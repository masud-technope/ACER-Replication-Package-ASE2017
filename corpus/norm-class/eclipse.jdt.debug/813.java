copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation yevgen kogan bug hot code replace drops frames cases org eclipse jdt internal debug core hcr java buffered reader bufferedreader java io exception ioexception java input stream inputstream java input stream reader inputstreamreader org eclipse core resources i file ifile org eclipse core resources i file state ifilestate org eclipse core resources resources plugin resourcesplugin org eclipse core runtime core exception coreexception org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core dom ast org eclipse jdt core dom ast matcher astmatcher org eclipse jdt core dom ast parser astparser org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom method declaration methoddeclaration code compilation unit delta compilationunitdelta code represents source code workspace point local history functionality context hot code replace determine stack frames dropped reload java typically code compilation unit delta compilationunitdelta code object generated replaced compilation unit delta compilationunitdelta ast current source code compilation unit compilationunit f current ast fcurrentast ast previous source code compilation unit compilationunit f prev ast fprevast ast parser ast parser astparser f parser fparser ast matcher ast matcher astmatcher f matcher fmatcher f has history fhashistory creates code compilation unit delta compilationunitdelta object cal culates calculates stores point time compilation unit delta compilationunitdelta i compilation unit icompilationunit timestamp core exception coreexception is working copy isworkingcopy get primary getprimary find underlying file i file ifile file i file ifile get underlying resource getunderlyingresource edit ions editions i file state ifilestate file get history gethistory length f has history fhashistory i file state ifilestate find edit ion edition time stamp i file state ifilestate get modification time getmodificationtime timestamp length input stream inputstream old contents oldcontents input stream inputstream new contents newcontents old contents oldcontents get contents getcontents new contents newcontents file get contents getcontents core exception coreexception f prev ast fprevast parse old contents oldcontents f current ast fcurrentast parse new contents newcontents returns code code source member changed element deleted element newly created initial timestamp has changed haschanged string class name classname string method name methodname string signature f has history fhashistory opt imistic optimistic history assume member has n hasn changed f prev ast fprevast f current ast fcurrentast pessimistic unable build parse trees method search visitor methodsearchvisitor visitor method search visitor methodsearchvisitor method declaration methoddeclaration prev find method findmethod f prev ast fprevast visitor class name classname method name methodname signature prev method declaration methoddeclaration curr find method findmethod f current ast fcurrentast visitor class name classname method name methodname signature curr get matcher getmatcher match prev curr method declaration methoddeclaration find method findmethod compilation unit compilationunit method search visitor methodsearchvisitor visitor string class name classname string string signature visitor set target method settargetmethod class name classname signature accept visitor visitor get match getmatch stuff parses input stream returns tree java nodes javanodes failure compilation unit compilationunit parse input stream inputstream input i compilation unit icompilationunit buffer read string readstring input buffer f parser fparser f parser fparser ast parser astparser new parser newparser ast jls f parser fparser set source setsource buffer f parser fparser set project setproject get java project getjavaproject f parser fparser set resolve bindings setresolvebindings f parser fparser set kind setkind ast parser astparser compilation unit f parser fparser set unit name setunitname get element name getelementname compilation unit compilationunit f parser fparser createast returns ast matcher ast matcher ast matcher astmatcher get matcher getmatcher f matcher fmatcher f matcher fmatcher ast matcher astmatcher f matcher fmatcher returns error occurred read string readstring input stream inputstream buffered reader bufferedreader reader string buffer stringbuffer buffer string buffer stringbuffer read reader buffered reader bufferedreader input stream reader inputstreamreader resources plugin resourcesplugin get encoding getencoding read reader read buffer append read buffer length buffer get chars getchars length io exception ioexception reader reader close io exception ioexception