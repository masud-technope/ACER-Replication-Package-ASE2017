licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache log jdbc java sql connection java sql driver manager drivermanager java sql sql exception sqlexception java sql statement java util array list arraylist java util iterator org apache log pattern layout patternlayout org apache log spi error code errorcode org apache log spi logging event loggingevent jdbc appender jdbcappender sending log events database font color warning version jdbc appender jdbcappender completely replaced more oever moreoever log exceptions font append call adds code array list arraylist code buffer buffer filled log event sql statement config urable configurable executed buffer size buffersize url user password config urable configurable options standard log ways code set sql setsql string sql code sets sql statement logging statement code pattern layout patternlayout code created auto maticly automaticly appender user conversion patterns code pattern layout patternlayout code statement test cases examples overriding link get log statement getlogstatement method explicit control statement logging base override code get connection getconnection code pass connection typically enable application wide connection pooling override code close connection closeconnection connection con code override get connection getconnection implement code close connection closeconnection code handle connection generated typically connection pool override code get log statement getlogstatement logging event loggingevent event code produce special ized specialized dynamic statements sql option author kevin step pe steppe href mailto ksteppe pacbell net ksteppe pacbell net jdbc appender jdbcappender org apache log appender skeleton appenderskeleton url connection handling string databaseurl jdbc odbc mydb user connect connection handling string database user databaseuser user connection handling string database password databasepassword mypassword connection connection opened time needed held open appender closed garbage collection behavior modified creating overriding code get connection getconnection code code close connection closeconnection code methods connection connection stores string pattern layout conversion sql statement insert log table logtable thread message values careful quotes messages pattern layout patternlayout string sql statement sqlstatement size logging event loggingevent buffer writting database buffer size buffersize array list arraylist holding buffer logging events array list arraylist buffer helper object clearing buffer array list arraylist removes location info locationinfo jdbc appender jdbcappender buffer array list arraylist buffer size buffersize removes array list arraylist buffer size buffersize location logging request call captured current location info locationinfo option get location info getlocationinfo location info locationinfo location info locationinfo option takes effort extract location event result event ultimately log ged logged wrong location log format location extract ion extraction comp aratively comparatively slow avoided performance concern param flag location extracted set location info setlocationinfo flag location info locationinfo flag adds event buffer full buffer flushed append logging event loggingevent event event getndc event get thread name getthreadname copy thread mdc event getmdccopy location info locationinfo event get location information getlocationinformation event get rendered message getrenderedmessage event get throwable str rep getthrowablestrrep buffer add event buffer size buffer size buffersize flush buffer flushbuffer get log statement getlogstatement sends event required layout object layout format pattern work able workable sql string overriding direct access logging event loggingevent constructing logging statement string get log statement getlogstatement logging event loggingevent event get layout getlayout format event override provide alert nat e alertnate method connections caching method open connections start flush buffer flushbuffer close connection pool jdbc appender jdbcappender accessed override method execute string sql sql exception sqlexception connection con statement stmt con get connection getconnection stmt con create statement createstatement stmt execute update executeupdate sql stmt stmt close close connection closeconnection con system println execute sql override connection pool clean resource behavior holds single connection open appender closed typically garbage collected close connection closeconnection connection con override link connection pooling system creates single connection held open object garbage collected connection get connection getconnection sql exception sqlexception driver manager drivermanager get drivers getdrivers has more elements hasmoreelements set driver setdriver sun jdbc odbc jdbc odbc driver jdbcodbcdriver connection connection driver manager drivermanager get connection getconnection databaseurl database user databaseuser database password databasepassword connection closes appender flushing buffer closing connection open close flush buffer flushbuffer connection connection is closed isclosed connection close sql exception sqlexception error handler errorhandler error error closing connection error code errorcode failure closed loops buffer logging events loggingevents sql string get log statement getlogstatement sends execute errors error handler errorhandler statement fails logging event loggingevent stays buffer flush buffer flushbuffer actual logging removes ensure capacity ensurecapacity buffer size iterator buffer iterator has next hasnext logging event loggingevent log event logevent logging event loggingevent string sql get log statement getlogstatement log event logevent execute sql sql exception sqlexception error handler errorhandler error failed exc ute excute sql error code errorcode flush failure removes add log event logevent remove buffer events reported buffer remove all removeall removes clear buffer reported events removes clear closes appender disposal finalize close jdbc appender jdbcappender requires layout requires layout requireslayout set sql setsql string sql sql statement sqlstatement sql get layout getlayout set layout setlayout pattern layout patternlayout sql pattern layout patternlayout get layout getlayout set conversion pattern setconversionpattern sql returns pre form ated formated statement insert log table logtable msg values string get sql getsql sql statement sqlstatement set user setuser string user database user databaseuser user seturl string url databaseurl url set password setpassword string password database password databasepassword password set buffer size setbuffersize new buffer size newbuffersize buffer size buffersize new buffer size newbuffersize buffer ensure capacity ensurecapacity buffer size buffersize removes ensure capacity ensurecapacity buffer size buffersize string get user getuser database user databaseuser string geturl databaseurl string get password getpassword database password databasepassword get buffer size getbuffersize buffer size buffersize ensures driver loaded sql connection creation set driver setdriver string driver class driverclass for name forname driver class driverclass exception error handler errorhandler error failed load driver error code errorcode failure