licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache log xml org apache log appender org apache log layout org apache log level org apache log log manager logmanager org apache log logger org apache log config property setter propertysetter org apache log helpers file watchdog filewatchdog org apache log helpers loader org apache log helpers log log loglog org apache log helpers option converter optionconverter org apache log renderer map renderermap org apache log spi appender attachable appenderattachable org apache log spi configurator org apache log spi error handler errorhandler org apache log spi filter org apache log spi logger factory loggerfactory org apache log spi logger repository loggerrepository org apache log spi renderer support renderersupport org apache log spi throwable renderer throwablerenderer org apache log spi throwable renderer support throwablerenderersupport org dom document org dom element org dom name d node map namednodemap org dom node org dom node list nodelist org xml sax input source inputsource org xml sax sax exception saxexception javax xml parsers document builder documentbuilder javax xml parsers document builder factory documentbuilderfactory javax xml parsers factory configuration error factoryconfigurationerror java file java io exception ioexception java input stream inputstream java interruptedioexception java reader java lang reflect method java lang reflect invocation target exception invocationtargetexception java net url java net url connection urlconnection java util hashtable java util properties initialize log environment dom tree dtd href doc files log dtd log dtd log reading configuration files enable log internal logging defining log debug variable java command alternatively code debug code attribute code log configuration code element pre log configuration debug xml ns xmlns log http jakarta apache org log log configuration pre sample xml files included author chris top her christopher taylor author ceki uuml uuml author and ers anders kristensen dom configurator domconfigurator configurator string configuration tag log configuration string configuration tag configuration string renderer tag renderer string throwable renderer tag throwable renderer throwablerenderer string appender tag appender string appender tag appender string param tag param string layout tag layout string category category string logger logger string logger logger string category factory tag category factory categoryfactory string logger factory tag logger factory loggerfactory string attr string attr string attr string root tag root string root root string level tag level string priority tag priority string filter tag filter string error handler tag error handler errorhandler string attr string add itivity additivity attr add itivity additivity string threshold attr threshold string config debug attr config debug configdebug string internal debug attr debug string reset attr reset string rendering attr rendering class renderingclass string rendered attr rendered class renderedclass string empty str string param string string dbf key dbfkey javax xml parsers document builder factory documentbuilderfactory key appender name appendername appender hashtable appender bag appenderbag properties props logger repository loggerrepository repository logger factory loggerfactory cat factory catfactory argument constructor dom configurator domconfigurator appender bag appenderbag hashtable int ernally internally parse append ers appenders idref appender find appender by name findappenderbyname document doc string appender name appendername appender appender appender appender bag appenderbag appender name appendername appender appender does n doesn work dom level element element doc get element by id getelementbyid appender name appendername end re endre hack element element node list nodelist list doc get elements by tag name getelementsbytagname appender list get length getlength node node list item name d node map namednodemap map node get attributes getattributes node attr node attrnode map get name d item getnameditem appender name appendername equals attr node attrnode get node value getnodevalue element element node element log log loglog error appender named appender name appendername appender parse appender parseappender element appender appender bag appenderbag appender name appendername appender appender int ernally internally parse append ers appenders idref element appender find appender by reference findappenderbyreference element appender ref appenderref string appender name appendername subst appender ref appenderref get attribute getattribute attr document doc appender ref appenderref get owner document getownerdocument find appender by name findappenderbyname doc appender name appendername delegates unrecognized content created instance supports unrecognized element parser unrecognizedelementparser param instance instance param element element param props properties io exception ioexception thrown configuration owner object abandoned parse unrecognized element parseunrecognizedelement object instance element element properties props exception recognized instance unrecognized element handler unrecognizedelementhandler recognized unrecognized element handler unrecognizedelementhandler instance parse unrecognized element parseunrecognizedelement element props recognized log log loglog warn unrecognized element element get node name getnodename delegates unrecognized content created instance supports unrecognized element parser unrecognizedelementparser cat ches catches logs exception param instance instance param element element param props properties quiet parse unrecognized element quietparseunrecognizedelement object instance element element properties props parse unrecognized element parseunrecognizedelement instance element props exception interrupted exception interruptedexception interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error error extension content int ernally internally parse appender element appender parse appender parseappender element appender element appenderelement string class name classname subst appender element appenderelement get attribute getattribute attr log log loglog debug class name classname object instance loader load class loadclass class name classname new instance newinstance appender appender appender instance property setter propertysetter prop setter propsetter property setter propertysetter appender appender set name setname subst appender element appenderelement get attribute getattribute attr node list nodelist children appender element appenderelement get child nodes getchildnodes length children get length getlength loop loop length loop node current node currentnode children item loop int erested interested elements current node currentnode get node type getnodetype node element node element current element currentelement element current node currentnode parse appender parameters current element currentelement get tag name gettagname equals param tag set parameter setparameter current element currentelement prop setter propsetter appender layout current element currentelement get tag name gettagname equals layout tag appender set layout setlayout parse layout parselayout current element currentelement add filters current element currentelement get tag name gettagname equals filter tag parse filters parsefilters current element currentelement appender current element currentelement get tag name gettagname equals error handler tag parse error handler parseerrorhandler current element currentelement appender current element currentelement get tag name gettagname equals appender tag string ref name refname subst current element currentelement get attribute getattribute attr appender appender attachable appenderattachable appender attachable appenderattachable appender attachable appenderattachable appender log log loglog debug attaching appender named ref name refname appender named appender get name getname add appender addappender find appender by reference findappenderbyreference current element currentelement log log loglog error requesting attachment appender named ref name refname appender named appender get name getname implement org apache log spi appender attachable appenderattachable parse unrecognized element parseunrecognizedelement instance current element currentelement props prop setter propsetter activate appender ugly exceptions point problem create appender exception oops oops interrupted exception interruptedexception oops interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error create appender reported error oops int ernally internally parse link error handler errorhandler element parse error handler parseerrorhandler element element appender appender error handler errorhandler error handler errorhandler option converter optionconverter instantiate by class name instantiatebyclassname subst element get attribute getattribute attr org apache log spi error handler errorhandler set appender setappender appender property setter propertysetter prop setter propsetter property setter propertysetter node list nodelist children element get child nodes getchildnodes length children get length getlength loop loop length loop node current node currentnode children item loop current node currentnode get node type getnodetype node element node element current element currentelement element current node currentnode string tag name tagname current element currentelement get tag name gettagname tag name tagname equals param tag set parameter setparameter current element currentelement prop setter propsetter tag name tagname equals appender tag set backup appender setbackupappender find appender by reference findappenderbyreference current element currentelement tag name tagname equals logger string logger name loggername current element currentelement get attribute getattribute attr logger logger cat factory catfactory repository get logger getlogger logger name loggername repository get logger getlogger logger name loggername cat factory catfactory set logger setlogger logger tag name tagname equals root logger root repository get root logger getrootlogger set logger setlogger root quiet parse unrecognized element quietparseunrecognizedelement current element currentelement props prop setter propsetter activate appender set error handler seterrorhandler int ernally internally parse filter element parse filters parsefilters element element appender appender string clazz subst element get attribute getattribute attr filter filter filter option converter optionconverter instantiate by class name instantiatebyclassname clazz filter filter property setter propertysetter prop setter propsetter property setter propertysetter filter node list nodelist children element get child nodes getchildnodes length children get length getlength loop loop length loop node current node currentnode children item loop current node currentnode get node type getnodetype node element node element current element currentelement element current node currentnode string tag name tagname current element currentelement get tag name gettagname tag name tagname equals param tag set parameter setparameter current element currentelement prop setter propsetter quiet parse unrecognized element quietparseunrecognizedelement filter current element currentelement props prop setter propsetter activate log log loglog debug adding filter type filter get class getclass appender named appender get name getname appender add filter addfilter filter int ernally internally parse category element parse category parsecategory element logger element loggerelement create org apache log category object category element string cat name catname subst logger element loggerelement get attribute getattribute attr logger cat string class name classname subst logger element loggerelement get attribute getattribute attr empty str equals class name classname log log loglog debug retreiving instance org apache log logger cat cat factory catfactory repository get logger getlogger cat name catname repository get logger getlogger cat name catname cat factory catfactory log log loglog debug desired logger class name classname clazz loader load class loadclass class name classname method get instance method getinstancemethod clazz get method getmethod get logger getlogger string param cat logger get instance method getinstancemethod invoke object cat name catname invocation target exception invocationtargetexception oops oops get target exception gettargetexception interrupted exception interruptedexception oops get target exception gettargetexception interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error retrieve category cat name catname reported error oops exception oops log log loglog error retrieve category cat name catname reported error oops configuration progress cat add itivity additivity option converter optionconverter to boolean toboolean subst logger element loggerelement get attribute getattribute add itivity additivity attr log log loglog debug setting cat get name getname add itivity additivity add itivity additivity cat set add itivity setadditivity add itivity additivity parse children of logger element parsechildrenofloggerelement logger element loggerelement cat int ernally internally parse category factory element parse category factory parsecategoryfactory element factory element factoryelement string class name classname subst factory element factoryelement get attribute getattribute attr empty str equals class name classname log log loglog error category factory tag attr attribute log log loglog debug category factory configured log log loglog debug desired category factory class name classname object factory option converter optionconverter instantiate by class name instantiatebyclassname class name classname logger factory loggerfactory factory logger factory loggerfactory cat factory catfactory logger factory loggerfactory factory log log loglog error category factory class name classname implement org apache log logger factory loggerfactory property setter propertysetter prop setter propsetter property setter propertysetter factory element current element currentelement node current node currentnode node list nodelist children factory element factoryelement get child nodes getchildnodes length children get length getlength loop loop length loop current node currentnode children item loop current node currentnode get node type getnodetype node element node current element currentelement element current node currentnode current element currentelement get tag name gettagname equals param tag set parameter setparameter current element currentelement prop setter propsetter quiet parse unrecognized element quietparseunrecognizedelement factory current element currentelement props int ernally internally parse roor category element parse root parseroot element root element rootelement logger root repository get root logger getrootlogger category configuration atomic root parse children of logger element parsechildrenofloggerelement root element rootelement root int ernally internally parse children category element parse children of logger element parsechildrenofloggerelement element cat element catelement logger cat is root isroot property setter propertysetter prop setter propsetter property setter propertysetter cat remove existing append ers appenders cat rec onstructed reconstructed cat remove all appenders removeallappenders node list nodelist children cat element catelement get child nodes getchildnodes length children get length getlength loop loop length loop node current node currentnode children item loop current node currentnode get node type getnodetype node element node element current element currentelement element current node currentnode string tag name tagname current element currentelement get tag name gettagname tag name tagname equals appender tag element appender ref appenderref element current node currentnode appender appender find appender by reference findappenderbyreference appender ref appenderref string ref name refname subst appender ref appenderref get attribute getattribute attr appender log log loglog debug adding appender named ref name refname category cat get name getname log log loglog debug appender named ref name refname cat add appender addappender appender tag name tagname equals level tag parse level parselevel current element currentelement cat is root isroot tag name tagname equals priority tag parse level parselevel current element currentelement cat is root isroot tag name tagname equals param tag set parameter setparameter current element currentelement prop setter propsetter quiet parse unrecognized element quietparseunrecognizedelement cat current element currentelement props prop setter propsetter activate int ernally internally parse layout element layout parse layout parselayout element layout element string class name classname subst layout element get attribute getattribute attr log log loglog debug parsing layout class name classname object instance loader load class loadclass class name classname new instance newinstance layout layout layout instance property setter propertysetter prop setter propsetter property setter propertysetter layout node list nodelist params layout element get child nodes getchildnodes length params get length getlength loop loop length loop node current node currentnode params item loop current node currentnode get node type getnodetype node element node element current element currentelement element current node currentnode string tag name tagname current element currentelement get tag name gettagname tag name tagname equals param tag set parameter setparameter current element currentelement prop setter propsetter parse unrecognized element parseunrecognizedelement instance current element currentelement props prop setter propsetter activate layout exception oops oops interrupted exception interruptedexception oops interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error create layout reported error oops parse renderer parserenderer element element string rendering class renderingclass subst element get attribute getattribute rendering attr string rendered class renderedclass subst element get attribute getattribute rendered attr repository renderer support renderersupport renderer map renderermap add renderer addrenderer renderer support renderersupport repository rendered class renderedclass rendering class renderingclass parses throwable renderer param element throwable renderer throwablerenderer element configured throwable renderer throwable renderer throwablerenderer parse throwable renderer parsethrowablerenderer element element string class name classname subst element get attribute getattribute attr log log loglog debug parsing throwable renderer throwablerenderer class name classname object instance loader load class loadclass class name classname new instance newinstance throwable renderer throwablerenderer throwable renderer throwablerenderer instance property setter propertysetter prop setter propsetter property setter propertysetter node list nodelist params element get child nodes getchildnodes length params get length getlength loop loop length loop node current node currentnode params item loop current node currentnode get node type getnodetype node element node element current element currentelement element current node currentnode string tag name tagname current element currentelement get tag name gettagname tag name tagname equals param tag set parameter setparameter current element currentelement prop setter propsetter parse unrecognized element parseunrecognizedelement instance current element currentelement props prop setter propsetter activate exception oops oops interrupted exception interruptedexception oops interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error create throwable renderer throwablerenderer reported error oops int ernally internally parse level element parse level parselevel element element logger logger is root isroot string cat name catname logger get name getname is root isroot cat name catname root string pri str pristr subst element get attribute getattribute attr log log loglog debug level cat name catname pri str pristr inherited equals ignore case equalsignorecase pri str pristr equals ignore case equalsignorecase pri str pristr is root isroot log log loglog error root level inherited ignoring directive logger set level setlevel string class name classname subst element get attribute getattribute attr empty str equals class name classname logger set level setlevel option converter optionconverter to level tolevel pri str pristr level debug log log loglog debug desired level class name classname clazz loader load class loadclass class name classname method to level method tolevelmethod clazz get method getmethod to level tolevel string param level pri level to level method tolevelmethod invoke object pri str pristr logger set level setlevel pri exception oops oops interrupted exception interruptedexception oops interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error create level pri str pristr reported error oops log log loglog debug cat name catname level logger get level getlevel set parameter setparameter element elem property setter propertysetter prop setter propsetter string subst elem get attribute getattribute attr string elem get attribute getattribute attr subst option converter optionconverter convert special chars convertspecialchars prop setter propsetter set property setproperty configure log code configuration code element defined log dtd configure element element dom configurator domconfigurator config urator configurator dom configurator domconfigurator config urator configurator do configure doconfigure element log manager logmanager get logger repository getloggerrepository link configure and watch configureandwatch string delay defined link file watchdog filewatchdog delay param config file name configfilename log configuration file xml format configure and watch configureandwatch string config file name configfilename configure and watch configureandwatch config file name configfilename file watchdog filewatchdog delay read configuration file code config file name configfilename code exists thread created per iodically periodically check code config file name configfilename code created modified period determined code delay code argument change file creation detected code config file name configfilename code read configure log param config file name configfilename log configuration file xml format param delay delay milliseconds wait check configure and watch configureandwatch string config file name configfilename delay xml watchdog xmlwatchdog xdog xml watchdog xmlwatchdog config file name configfilename xdog set delay setdelay delay xdog start parse action parseaction document parse document builder documentbuilder parser sax exception saxexception io exception ioexception do configure doconfigure string filename logger repository loggerrepository repository parse action parseaction action parse action parseaction document parse document builder documentbuilder parser sax exception saxexception io exception ioexception parser parse file filename string to string tostring file filename do configure doconfigure action repository do configure doconfigure url url logger repository loggerrepository repository parse action parseaction action parse action parseaction document parse document builder documentbuilder parser sax exception saxexception io exception ioexception url connection urlconnection u conn uconn url open connection openconnection u conn uconn set use caches setusecaches input stream inputstream stream u conn uconn get input stream getinputstream input source inputsource src input source inputsource stream src set system id setsystemid url to string tostring parser parse src stream close string to string tostring url url to string tostring do configure doconfigure action repository configure log reading log dtd comp liant compliant xml configuration file do configure doconfigure input stream inputstream input stream inputstream logger repository loggerrepository repository factory configuration error factoryconfigurationerror parse action parseaction action parse action parseaction document parse document builder documentbuilder parser sax exception saxexception io exception ioexception input source inputsource input source inputsource input source inputsource input stream inputstream input source inputsource set system id setsystemid dummy log dtd parser parse input source inputsource string to string tostring input stream input stream inputstream to string tostring do configure doconfigure action repository configure log reading log dtd comp liant compliant xml configuration file do configure doconfigure reader reader logger repository loggerrepository repository factory configuration error factoryconfigurationerror parse action parseaction action parse action parseaction document parse document builder documentbuilder parser sax exception saxexception io exception ioexception input source inputsource input source inputsource input source inputsource reader input source inputsource set system id setsystemid dummy log dtd parser parse input source inputsource string to string tostring reader reader to string tostring do configure doconfigure action repository configure log reading log dtd comp liant compliant xml configuration file do configure doconfigure input source inputsource input source inputsource logger repository loggerrepository repository factory configuration error factoryconfigurationerror input source inputsource get system id getsystemid input source inputsource set system id setsystemid dummy log dtd parse action parseaction action parse action parseaction document parse document builder documentbuilder parser sax exception saxexception io exception ioexception parser parse input source inputsource string to string tostring input source input source inputsource to string tostring do configure doconfigure action repository do configure doconfigure parse action parseaction action logger repository loggerrepository repository factory configuration error factoryconfigurationerror document builder factory documentbuilderfactory dbf repository repository log log loglog debug system property option converter optionconverter get system property getsystemproperty dbf key dbfkey dbf document builder factory documentbuilderfactory new instance newinstance log log loglog debug standard document builder factory documentbuilderfactory search succeded log log loglog debug document builder factory documentbuilderfactory dbf get class getclass get name getname factory configuration error factoryconfigurationerror fce exception fce get exception getexception log log loglog debug instantiate document builder factory documentbuilderfactory fce dbf set valid ating setvalidating document builder documentbuilder doc builder docbuilder dbf new document builder newdocumentbuilder doc builder docbuilder set error handler seterrorhandler sax error handler saxerrorhandler doc builder docbuilder set entity resolver setentityresolver log j entity resolver jentityresolver document doc action parse doc builder docbuilder parse doc get document element getdocumentelement exception interrupted exception interruptedexception interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error parse action to string tostring configure dom element do configure doconfigure element element logger repository loggerrepository repository repository repository parse element version link do configure doconfigure string logger repository loggerrepository configure string filename factory configuration error factoryconfigurationerror dom configurator domconfigurator do configure doconfigure filename log manager logmanager get logger repository getloggerrepository version link do configure doconfigure url logger repository loggerrepository configure url url factory configuration error factoryconfigurationerror dom configurator domconfigurator do configure doconfigure url log manager logmanager get logger repository getloggerrepository int ernally internally configure log framework parsing dom tree xml elements based href doc files log dtd log dtd parse element element string root element name rootelementname element get tag name gettagname root element name rootelementname equals configuration tag root element name rootelementname equals configuration tag log log loglog warn configuration tag element deprecated log log loglog warn configuration tag element log log loglog error dom element configuration tag element string debug attrib debugattrib subst element get attribute getattribute internal debug attr log log loglog debug debug attribute debug attrib debugattrib debug attribute returned empty string debug attrib debugattrib equals debug attrib debugattrib equals log log loglog set internal debug ging setinternaldebugging option converter optionconverter to boolean toboolean debug attrib debugattrib log log loglog debug ignoring internal debug attr attribute reset repository configuration reset configuration element string reset attrib resetattrib subst element get attribute getattribute reset attr log log loglog debug reset attribute reset attrib resetattrib equals reset attrib resetattrib option converter optionconverter to boolean toboolean reset attrib resetattrib repository reset configuration resetconfiguration string conf debug confdebug subst element get attribute getattribute config debug attr conf debug confdebug equals conf debug confdebug equals log log loglog warn config debug attr attribute deprecated log log loglog warn internal debug attr attribute log log loglog set internal debug ging setinternaldebugging option converter optionconverter to boolean toboolean conf debug confdebug string threshold str thresholdstr subst element get attribute getattribute threshold attr log log loglog debug threshold threshold str thresholdstr equals threshold str thresholdstr equals threshold str thresholdstr repository set threshold setthreshold threshold str thresholdstr hashtable appender bag appenderbag hashtable building appender objects placing local namespace reference configure category factory root element category factories configured categories support string tag name tagname element current element currentelement node current node currentnode node list nodelist children element get child nodes getchildnodes length children get length getlength loop loop length loop current node currentnode children item loop current node currentnode get node type getnodetype node element node current element currentelement element current node currentnode tag name tagname current element currentelement get tag name gettagname tag name tagname equals category factory tag tag name tagname equals logger factory tag parse category factory parsecategoryfactory current element currentelement loop loop length loop current node currentnode children item loop current node currentnode get node type getnodetype node element node current element currentelement element current node currentnode tag name tagname current element currentelement get tag name gettagname tag name tagname equals category tag name tagname equals logger parse category parsecategory current element currentelement tag name tagname equals root tag parse root parseroot current element currentelement tag name tagname equals renderer tag parse renderer parserenderer current element currentelement tag name tagname equals throwable renderer tag repository throwable renderer support throwablerenderersupport throwable renderer throwablerenderer parse throwable renderer parsethrowablerenderer current element currentelement throwable renderer support throwablerenderersupport repository set throwable renderer setthrowablerenderer tag name tagname equals appender tag tag name tagname equals category factory tag tag name tagname equals logger factory tag quiet parse unrecognized element quietparseunrecognizedelement repository current element currentelement props string subst string subst props sub stitutes substitutes property references expression param configuration file literal text property references param props properties eval uated evaluated expression expressions unable expand string subst string properties props option converter optionconverter subst vars substvars props illegal argument exception illegalargumentexception log log loglog warn perform variable substitution sets parameter based configuration file content param elem param element param prop setter propsetter property set ter setter param props properties set parameter setparameter element elem property setter propertysetter prop setter propsetter properties props string subst elem get attribute getattribute props string elem get attribute getattribute subst option converter optionconverter convert special chars convertspecialchars props prop setter propsetter set property setproperty creates object processes nested param elements call activate options activateoptions supports unrecognized element parser unrecognizedelementparser parse unrecognized element parseunrecognizedelement method call child elements param param element element param props properties param expected class expectedclass expected implemented created created exception thrown object abandoned object parse element parseelement element element properties props expected class expectedclass exception string clazz subst element get attribute getattribute props object instance option converter optionconverter instantiate by class name instantiatebyclassname clazz expected class expectedclass instance property setter propertysetter prop setter propsetter property setter propertysetter instance node list nodelist children element get child nodes getchildnodes length children get length getlength loop loop length loop node current node currentnode children item loop current node currentnode get node type getnodetype node element node element current element currentelement element current node currentnode string tag name tagname current element currentelement get tag name gettagname tag name tagname equals param set parameter setparameter current element currentelement prop setter propsetter props parse unrecognized element parseunrecognizedelement instance current element currentelement props instance xml watchdog xmlwatchdog file watchdog filewatchdog xml watchdog xmlwatchdog string filename filename call link dom configurator domconfigurator configure string code filename code rec onfigure reconfigure log do on change doonchange dom configurator domconfigurator do configure doconfigure filename log manager logmanager get logger repository getloggerrepository