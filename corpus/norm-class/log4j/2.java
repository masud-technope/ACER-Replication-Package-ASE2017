licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache log net java io exception ioexception java interruptedioexception java object output stream objectoutputstream java net inet address inetaddress java net server socket serversocket java net socket java net socket exception socketexception java util vector org apache log appender skeleton appenderskeleton org apache log helpers cyclic buffer cyclicbuffer org apache log helpers log log loglog org apache log spi logging event loggingevent socket hub appender sockethubappender appender skeleton appenderskeleton port number server socket serversocket created port port port vector oos list ooslist vector server monitor servermonitor server monitor servermonitor location info locationinfo cyclic buffer cyclicbuffer buffer string application advertise via multicast s advertiseviamulticastdns zero conf support zeroconfsupport zero conf zeroconf multicastdns zone advertise d advertised socket hub appender sockethubappender string zone log obj tcp accept tcpaccept appender local server socket serversocket server socket serversocket socket hub appender sockethubappender connects remote server code add ress address code code port code socket hub appender sockethubappender port port port start server startserver socket server port activate options activateoptions advertise via multicast s advertiseviamulticastdns zero conf zeroconf zero conf support zeroconfsupport zone port get name getname zero conf zeroconf advertise start server startserver close appender mark appender closed call link clean up cleanup method close closed log log loglog debug closing socket hub appender sockethubappender get name getname closed advertise via multicast s advertiseviamulticastdns zero conf zeroconf unadvertise clean up cleanup log log loglog debug socket hub appender sockethubappender get name getname closed release underlying server monitor servermonitor thread drop connections connected remote servers clean up cleanup monitor thread log log loglog debug stop ping stopping server socket serversocket server monitor servermonitor stop monitor stopmonitor server monitor servermonitor close connections log log loglog debug closing client connections oos list ooslist size object output stream objectoutputstream oos object output stream objectoutputstream oos list ooslist element at elementat oos oos close interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error close oos io exception ioexception log log loglog error close oos oos list ooslist remove element at removeelementat append event current connections append logging event loggingevent event event location info requested location info locationinfo event get location information getlocationinformation application event set property setproperty application application event getndc event get thread name getthreadname event getmdccopy event get rendered message getrenderedmessage event get throwable str rep getthrowablestrrep buffer buffer add event event open connections exit event oos list ooslist size loop current open connections app ending appending event stream count streamcount stream count streamcount oos list ooslist size stream count streamcount object output stream objectoutputstream oos oos object output stream objectoutputstream oos list ooslist element at elementat stream count streamcount array index out of bounds exception arrayindexoutofboundsexception list size changed unexpectedly exit append oos oos write object writeobject event oos flush failing reset object output stream creates memory leak reset todo frequency counter oos oos reset io exception ioexception interruptedioexception thread current thread currentthread int errupt interrupt oos list ooslist remove element at removeelementat stream count streamcount log log loglog debug dropped connection stream count streamcount socket hub appender sockethubappender layout method returns code code requires layout requireslayout port option takes positive int eger integer representing port server waiting connections set port setport port port port app option takes string application log ged logged property system property don set application setapplication string lapp application lapp returns application option string get application getapplication application returns port option get port getport port buffer size buffersize option takes positive int eger integer representing number events appender buffer send newly connected clients set buffer size setbuffersize buffer size buffersize buffer cyclic buffer cyclicbuffer buffer size buffersize returns buffer size buffersize option get buffer size getbuffersize buffer buffer get max size getmaxsize location info locationinfo option takes remote host include location location server set location info setlocationinfo location info locationinfo location info locationinfo location info locationinfo returns location info locationinfo option get location info getlocationinfo location info locationinfo set advertise via multicast s setadvertiseviamulticastdns advertise via multicast s advertiseviamulticastdns advertise via multicast s advertiseviamulticastdns advertise via multicast s advertiseviamulticastdns is advertise via multicast s isadvertiseviamulticastdns advertise via multicast s advertiseviamulticastdns start server monitor servermonitor thread start server startserver server monitor servermonitor server monitor servermonitor port oos list ooslist creates server socket accept connections param socket port socketport port socket listen socket io exception ioexception error opening socket server socket serversocket create server socket createserversocket socket port socketport io exception ioexception server socket serversocket socket port socketport int ernally internally monitor server socket serversocket register connections vector passed constructor server monitor servermonitor runnable port vector oos list ooslist keep running keeprunning thread monitor thread monitorthread create thread start monitor server monitor servermonitor port vector oos list ooslist port port oos list ooslist oos list ooslist keep running keeprunning monitor thread monitorthread thread monitor thread monitorthread set daemon setdaemon monitor thread monitorthread set name setname socket hub appender sockethubappender monitor port monitor thread monitorthread start s tops stops monitor method thread finished executing stop monitor stopmonitor keep running keeprunning log log loglog debug server monitor thread shutting keep running keeprunning server socket serversocket server socket serversocket close server socket serversocket io exception ioexception ioe monitor thread monitorthread join interrupted exception interruptedexception thread current thread currentthread int errupt interrupt release thread monitor thread monitorthread log log loglog debug server monitor thread shut send cached events sendcachedevents object output stream objectoutputstream stream io exception ioexception buffer buffer length stream write object writeobject buffer stream flush stream reset method runs monitoring server socket serversocket adding connections connect socket server socket serversocket server socket serversocket create server socket createserversocket port server socket serversocket set s o timeout setsotimeout exception interruptedioexception interrupted exception interruptedexception thread current thread currentthread int errupt interrupt log log loglog error exception setting timeout shutting server socket keep running keeprunning server socket serversocket set s o timeout setsotimeout socket exception socketexception log log loglog error exception setting timeout shutting server socket keep running keeprunning socket socket socket server socket serversocket accept interruptedioexception socket exception socketexception log log loglog error exception accepting socket shutting server socket keep running keeprunning io exception ioexception log log loglog error exception accepting socket socket accepted socket inet address inetaddress remote address remoteaddress socket get inet address getinetaddress log log loglog debug accepting connection remote address remoteaddress get host name gethostname remote address remoteaddress get host address gethostaddress create object output stream objectoutputstream object output stream objectoutputstream oos object output stream objectoutputstream socket get output stream getoutputstream buffer buffer length send cached events sendcachedevents oos add oos list ooslist vector oos list ooslist add element addelement oos io exception ioexception interruptedioexception thread current thread currentthread int errupt interrupt log log loglog error exception creating output stream socket close socket server socket serversocket close interruptedioexception thread current thread currentthread int errupt interrupt io exception ioexception