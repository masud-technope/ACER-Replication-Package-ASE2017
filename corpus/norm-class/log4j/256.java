licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache log junit framework test case testcase java file java file output stream fileoutputstream java io exception ioexception java file input stream fileinputstream java text simple date format simpledateformat java util calendar java util org apache log util compare exhaustive test daily rolling file appender dailyrollingfileappender compute algorithm author ceki uuml uuml author curt arnold drfa test case drfatestcase test case testcase create test param test drfa test case drfatestcase string reset configuration test tear down teardown log manager logmanager reset configuration resetconfiguration test prediction check period test compute check period testcomputecheckperiod daily rolling file appender dailyrollingfileappender drfa daily rolling file appender dailyrollingfileappender drfa set name setname test compute check period testcomputecheckperiod drfa set date pattern setdatepattern yyyy log drfa activate options activateoptions drfa compute check period computecheckperiod assert equals assertequals drfa compute check period computecheckperiod daily rolling file appender dailyrollingfileappender top day drfa set date pattern setdatepattern yyyy log assert equals assertequals drfa compute check period computecheckperiod daily rolling file appender dailyrollingfileappender top minute drfa set date pattern setdatepattern yyyy log assert equals assertequals drfa compute check period computecheckperiod daily rolling file appender dailyrollingfileappender day drfa set date pattern setdatepattern yyyy log assert equals assertequals drfa compute check period computecheckperiod daily rolling file appender dailyrollingfileappender top hour drfa set date pattern setdatepattern yyyy log assert equals assertequals drfa compute check period computecheckperiod daily rolling file appender dailyrollingfileappender top month drfa set date pattern setdatepattern log log assert equals assertequals drfa compute check period computecheckperiod daily rolling file appender dailyrollingfileappender top hour test rolling calendar rollingcalendar testrc rolling calendar rollingcalendar rolling calendar rollingcalendar set type settype daily rolling file appender dailyrollingfileappender top day calendar calendar get instance getinstance jan mar july aug oct dec days length clear calendar year calendar month calendar january calendar day month calendar hour day calendar minute calendar calendar millisecond set time settime get next check date getnextcheckdate get time gettime assert equals assertequals calendar month calendar january assert equals assertequals calendar day month assert equals assertequals calendar month calendar january assert equals assertequals calendar day month assert equals assertequals calendar hour day assert equals assertequals calendar minute assert equals assertequals calendar assert equals assertequals calendar millisecond rolling calendar rollingcalendar test testrc rolling calendar rollingcalendar rolling calendar rollingcalendar set type settype daily rolling file appender dailyrollingfileappender top hour calendar calendar get instance getinstance jan mar july aug oct dec days length system println month clear calendar year calendar month calendar january calendar day month calendar hour day calendar minute calendar calendar millisecond dlt state dltstate get time zone gettimezone in daylight time indaylighttime get time gettime set time settime get next check date getnextcheckdate get time gettime dlt state dltstate get time zone gettimezone in daylight time indaylighttime get time gettime assert equals assertequals calendar millisecond assert equals assertequals calendar assert equals assertequals calendar minute dlt state dltstate dlt state dltstate assert equals assertequals calendar hour day returning standard time dlt state dltstate assert equals assertequals calendar hour day switching day light saving time system err println system err println assert equals assertequals calendar hour day assert equals assertequals calendar day month assert equals assertequals calendar month calendar january assert equals assertequals calendar month calendar january assert equals assertequals calendar day month assert equals assertequals calendar month calendar january rolling calendar rollingcalendar test testrc rolling calendar rollingcalendar rolling calendar rollingcalendar set type settype daily rolling file appender dailyrollingfileappender top minute calendar calendar get instance getinstance jan mar july aug oct dec days length system println month length length clear calendar year calendar month calendar january calendar day month calendar hour day calendar minute calendar calendar millisecond add calendar millisecond dlt state dltstate get time zone gettimezone in daylight time indaylighttime get time gettime set time settime get next check date getnextcheckdate get time gettime add calendar millisecond dlt state dltstate get time zone gettimezone in daylight time indaylighttime get time gettime assert equals assertequals calendar millisecond assert equals assertequals calendar assert equals assertequals calendar minute dlt state dltstate dlt state dltstate assert equals assertequals calendar hour day assert equals assertequals calendar day month assert equals assertequals calendar month calendar january assert equals assertequals calendar month calendar january assert equals assertequals calendar day month discrepancies switching std dls time calendar hour day add calendar hour day dlt state dltstate get time zone gettimezone in daylight time indaylighttime get time gettime dlt state dltstate dlt state dltstate fail assert equals assertequals calendar day month assert equals assertequals calendar month calendar january common test code parameter constructor io exception ioexception io exception ioexception test test param string date pattern datepattern string filename io exception ioexception layout layout simple layout simplelayout daily rolling file appender dailyrollingfileappender appender daily rolling file appender dailyrollingfileappender layout filename date pattern datepattern assert equals assertequals date pattern datepattern appender get date pattern getdatepattern logger root logger get root logger getrootlogger root add appender addappender appender root info assert true asserttrue file filename exists creates appender unrecognized top year pattern io exception ioexception io exception ioexception test test top of year testtopofyear io exception ioexception test param yyyy output drfa top of year topofyear log fail expected illegal exception illegal state exception illegalstateexception assert not null assertnotnull creates appender top month pattern io exception ioexception io exception ioexception test test top of month testtopofmonth io exception ioexception test param yyyy output drfa top of month topofmonth log creates appender top week pattern io exception ioexception io exception ioexception test test top of week testtopofweek io exception ioexception test param yyyy output drfa top of week topofweek log creates appender top day pattern io exception ioexception io exception ioexception test test top of day testtopofday io exception ioexception test param yyyy output drfa top of day topofday log creates appender day pattern io exception ioexception io exception ioexception test test half day testhalfday io exception ioexception test param yyyy output drfa half day halfday log creates appender top hour pattern io exception ioexception io exception ioexception test test top of hour testtopofhour io exception ioexception test param yyyy output drfa top of hour topofhour log creates appender top day pattern io exception ioexception io exception ioexception test test top of min ute testtopofminute io exception ioexception test param yyyy output drfa top of min ute topofminute log attempts roll over rollover pattern io exception ioexception io exception ioexception test test rollover no pattern testrollovernopattern io exception ioexception layout layout simple layout simplelayout daily rolling file appender dailyrollingfileappender appender daily rolling file appender dailyrollingfileappender layout output drfa nop att ern nopattern log vector error handler vectorerrorhandler error handler errorhandler vector error handler vectorerrorhandler appender set error handler seterrorhandler error handler errorhandler appender roll over rollover assert equals assertequals error handler errorhandler size assert equals assertequals missing date pattern datepattern option roll over rollover error handler errorhandler get message getmessage tests roll over rollover minute period icity periodicity io exception ioexception interrupted exception interruptedexception test min ute rollover testminuterollover io exception ioexception interrupted exception interruptedexception layout layout simple layout simplelayout string filename output drfa minute rollover minuterollover log string pattern yyyy daily rolling file appender dailyrollingfileappender appender daily rolling file appender dailyrollingfileappender layout filename pattern logger root logger get root logger getrootlogger root add appender addappender appender file first file firstfile file filename simple date format simpledateformat pattern format root info create file deleted rollover first file firstfile create new file createnewfile assert true asserttrue first file firstfile exists assert equals assertequals first file firstfile length calendar cal calendar get instance getinstance cal get time gettime get time gettime cal calendar cal calendar millisecond cal add calendar minute cal get time gettime get time gettime thread sleep root info assert true asserttrue first file firstfile exists assert true asserttrue first file firstfile length naive append method combine rollover fragments param combined stream source appended param source stream bytes append param buf array transfer io exception ioexception error operation append file output stream fileoutputstream combined file input stream fileinputstream source buf io exception ioexception count source read buf count combined write buf count source close tests roll over rollover log file unable d unabled renamed bug io exception ioexception error interrupted exception interruptedexception test int errupted interrupted waiting start minute test blocked rollover testblockedrollover io exception ioexception interrupted exception interruptedexception layout layout simple layout simplelayout string filename output drfa blocked rollover blockedrollover log string pattern yyyy start daily rolling file appender dailyrollingfileappender appender daily rolling file appender dailyrollingfileappender layout filename pattern appender set append setappend logger root logger get root logger getrootlogger root add appender addappender appender open anti cipated anticipated rollover file names file block file filename simple date format simpledateformat pattern format start file block file filename simple date format simpledateformat pattern format start get time gettime file output stream fileoutputstream file output stream fileoutputstream block file output stream fileoutputstream file output stream fileoutputstream block root info prior rollover sleep seconds minute thread sleep start get time gettime trigger failed rollover root info rollover attempt blocked close close root info message block removed appender close combine base file potential roll overs rollovers rollover blocked depending platform string combined file name combinedfilename output drfa blocked rollover blockedrollover combined file output stream fileoutputstream combined file output stream fileoutputstream combined file name combinedfilename buf append combined file input stream fileinputstream block buf append combined file input stream fileinputstream block buf append combined file input stream fileinputstream filename buf combined close assert true asserttrue compare compare combined file name combinedfilename witness drfa blocked rollover blockedrollover log check computed rollover period pattern week finest unit week locale mismatch incorrect english locales bug test weekly rollover testweeklyrollover daily rolling file appender dailyrollingfileappender drfa daily rolling file appender dailyrollingfileappender drfa set date pattern setdatepattern yyyy check period checkperiod drfa compute check period computecheckperiod assert equals assertequals daily rolling file appender dailyrollingfileappender top week check period checkperiod