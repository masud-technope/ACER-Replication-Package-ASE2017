licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache log org apache log helpers loader org apache log helpers thread local map threadlocalmap java lang reflect invocation target exception invocationtargetexception java lang reflect method java util hashtable mdc link ndc based map stack mapped diagnostic contexts mapped diagnostic context mdc ins trument instrument distinguishing int erleaved interleaved log output sources log output typically int erleaved interleaved server handles multiple clients simultaneously mdc managed thread basis child thread automatically inherits copy mapped diagnostic context parent mdc requires jdk jdk mdc empty values affect harm application att ention attention application required clean web applications happen creating servlet filter overriding on filter onfilter method pre mdc my key mykey chain do filter dofilter request response mdc remove my key mykey pre link http logging apache org log faq html mdc memory leak mdcmemoryleak author ceki uuml uuml mdc mdc mdc mdc size java object tlm method remove method removemethod mdc java loader is java isjava java tlm thread local map threadlocalmap remove method removemethod thread local threadlocal get method getmethod remove no such method exception nosuchmethodexception context code code parameter identified code key code parameter current thread context map current thread context map created side string key object mdc mdc key context identified code key code parameter method side effects object string key mdc mdc key remove context identified code key code parameter remove string key mdc mdc remove key current thread mdc hashtable method intended int ernally internally hashtable get context getcontext mdc mdc get context getcontext remove values mdc clear mdc mdc clear string key object java tlm hashtable hashtable thread local map threadlocalmap tlm hashtable size thread local map threadlocalmap tlm key object string key java tlm hashtable hashtable thread local map threadlocalmap tlm key key remove string key java tlm hashtable hashtable thread local map threadlocalmap tlm remove key clean key is empty isempty clear hashtable get context getcontext java tlm hashtable thread local map threadlocalmap tlm clear java tlm hashtable hashtable thread local map threadlocalmap tlm clear remove method removemethod java remove suffer memory leak remove method removemethod invoke tlm illegal access exception illegalaccessexception invocation target exception invocationtargetexception