rcs file rcsfile revision fri mar copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smackx provider org jivesoftware smack packet org jivesoftware smack provider iq provider iqprovider org jivesoftware smack util string utils stringutils org jivesoftware smackx packet v card vcard org dom org xml pull xmlpull xml pull parser xmlpullparser org xml pull xmlpull xml pull parser exception xmlpullparserexception javax xml parsers document builder documentbuilder javax xml parsers document builder factory documentbuilderfactory java byte array input stream bytearrayinputstream java io exception ioexception java util array list arraylist java util list v card vcard provider author gaston dom biak dombiak author derek de moro demoro v card provider vcardprovider iq provider iqprovider string pref erred preferred encoding utf parseiq xml pull parser xmlpullparser parser exception string builder stringbuilder string builder stringbuilder event parser get event type geteventtype content event xml pull parser xmlpullparser text escape xml dom won exception append string utils stringutils escapeforxml parser get text gettext xml pull parser xmlpullparser start tag append append parser get name getname append xml pull parser xmlpullparser tag append append parser get name getname append event xml pull parser xmlpullparser tag v card vcard equals parser get name getname event parser xml pull parser exception xmlpullparserexception print stack trace printstacktrace io exception ioexception print stack trace printstacktrace string xml text xmltext to string tostring createvcardfromxml xml text xmltext builds users v card vcard xml file param xml xml representing users v card vcard v card vcard exception exception occurs v card vcard createvcardfromxml string xml exception v card vcard v card vcard v card vcard document builder factory documentbuilderfactory document builder factory documentbuilderfactory document builder factory documentbuilderfactory new instance newinstance document builder documentbuilder document builder documentbuilder document builder factory documentbuilderfactory new document builder newdocumentbuilder document document document builder documentbuilder parse byte array input stream bytearrayinputstream xml get bytes getbytes pref erred preferred encoding v card reader vcardreader v card vcard document initialize fields initializefields v card vcard v card reader vcardreader v card vcard v card vcard document document v card reader vcardreader v card vcard v card vcard document document v card vcard v card vcard document document initialize fields initializefields v card vcard set first name setfirstname get tag contents gettagcontents v card vcard set last name setlastname get tag contents gettagcontents family v card vcard set middle name setmiddlename get tag contents gettagcontents middle setup p hot o setupphoto setup e mai ls setupemails v card vcard set org anization setorganization get tag contents gettagcontents org name orgname v card vcard set org anization unit setorganizationunit get tag contents gettagcontents org unit orgunit setup simple fields setupsimplefields setup phones setupphones setup addr esses setupaddresses setup p hot o setupphoto string bin val binval string mime type mimetype node list nodelist photo document get elements by tag name getelementsbytagname photo photo get length getlength node photo node photonode photo item node list nodelist child nodes childnodes photo node photonode get child nodes getchildnodes child node count childnodecount child nodes childnodes get length getlength list node nodes array list arraylist node child node count childnodecount child node count childnodecount nodes add child nodes childnodes item string string node nodes get node name getnodename get text content gettextcontent equals bin val binval bin val binval equals type mime type mimetype bin val binval mime type mimetype v card vcard set avatar setavatar bin val binval mime type mimetype setup e mai ls setupemails node list nodelist nodes document get elements by tag name getelementsbytagname user id userid nodes nodes get length getlength element element element nodes item work equals element get parent node getparentnode get first child getfirstchild get node name getnodename v card vcard set email work setemailwork get text content gettextcontent element v card vcard set email home setemailhome get text content gettextcontent element setup phones setupphones node list nodelist all phones allphones document get elements by tag name getelementsbytagname tel all phones allphones all phones allphones get length getlength node list nodelist nodes all phones allphones item get child nodes getchildnodes string type string code string nodes get length getlength node node nodes item node get node type getnodetype node element node string node name nodename node get node name getnodename number equals node name nodename get text content gettextcontent node is work home isworkhome node name nodename type node name nodename code node name nodename code equals type v card vcard set phone home setphonehome code setup work phone v card vcard set phone work setphonework code is work home isworkhome string node name nodename equals node name nodename work equals node name nodename setup addr esses setupaddresses node list nodelist all addr esses alladdresses document get elements by tag name getelementsbytagname adr all addr esses alladdresses all addr esses alladdresses get length getlength element add ress node addressnode element all addr esses alladdresses item string type list string code array list arraylist string list string array list arraylist string node list nodelist child nodes childnodes add ress node addressnode get child nodes getchildnodes child nodes childnodes get length getlength node node child nodes childnodes item node get node type getnodetype node element node string node name nodename node get node name getnodename is work home isworkhome node name nodename type node name nodename code add node name nodename add get text content gettextcontent node size equals type v card vcard set address field home setaddressfieldhome string code string setup work add ress address v card vcard set address field work setaddressfieldwork string code string string get tag contents gettagcontents string tag node list nodelist nodes document get elements by tag name getelementsbytagname tag nodes nodes get length getlength get text content gettextcontent nodes item setup simple fields setupsimplefields node list nodelist child nodes childnodes document get document element getdocumentelement get child nodes getchildnodes child nodes childnodes get length getlength node node child nodes childnodes item node element element element element node string field element get node name getnodename element get child nodes getchildnodes get length getlength v card vcard set field setfield field element get child nodes getchildnodes get length getlength element get child nodes getchildnodes item text v card vcard set field setfield field get text content gettextcontent element string get text content gettextcontent node node string builder stringbuilder result string builder stringbuilder append text appendtext result node result to string tostring append text appendtext string builder stringbuilder result node node node list nodelist child nodes childnodes node get child nodes getchildnodes child nodes childnodes get length getlength node child nodes childnodes item string node value nodevalue get node value getnodevalue node value nodevalue result append node value nodevalue append text appendtext result