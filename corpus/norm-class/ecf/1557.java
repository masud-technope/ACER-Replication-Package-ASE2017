rcs file rcsfile revision copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smackx commands org jivesoftware smack org jivesoftware smack filter packet filter packetfilter org jivesoftware smack filter packet type filter packettypefilter org jivesoftware smack packet org jivesoftware smack packet packet org jivesoftware smack packet packet extension packetextension org jivesoftware smack packet xmpp error xmpperror org jivesoftware smack util string utils stringutils org jivesoftware smackx form org jivesoftware smackx node information provider nodeinformationprovider org jivesoftware smackx service discovery manager servicediscoverymanager org jivesoftware smackx commands ad hoc command adhoccommand action org jivesoftware smackx commands ad hoc command adhoccommand status org jivesoftware smackx packet ad hoc command data adhoccommanddata org jivesoftware smackx packet discover info discoverinfo org jivesoftware smackx packet discover info discoverinfo identity org jivesoftware smackx packet discover items discoveritems java util array list arraylist java util collection java util list java util map java util concurrent concurrent hash map concurrenthashmap ad hoc command manager adhoccommandmanager responsible keeping list commands off ered offered service processing commands requests pass connection instance link get add hoc commands manager getaddhoccommandsmanager org jivesoftware smack connection order instance author gabriel guardincerri ad hoc command manager adhoccommandmanager string disco name space namespace http jabber org protocol commands string disco node disconode disco name space namespace session time seconds session timeout map connection ad hoc command manager adhoccommandmanager map key pair active connection map connection ad hoc command manager adhoccommandmanager instances concurrent hash map concurrenthashmap connection ad hoc command manager adhoccommandmanager register listener connection creations connection created ad hoc command manager adhoccommandmanager created connection connection add connection creation listener addconnectioncreationlistener connection creation listener connectioncreationlistener connection created connectioncreated connection connection ad hoc command manager adhoccommandmanager connection returns code ad hoc command manager adhoccommandmanager code code connection code param connection xmpp connection ad hoc command manager adhoccommandmanager connection ad hoc command manager adhoccommandmanager get add hoc commands manager getaddhoccommandsmanager connection connection instances connection thread reaps stale sessions thread sessions sweeper sessionssweeper connection instances ad hoc command manager adhoccommandmanager manages connection connection map command node ad hoc command info adhoccommandinfo note key command node command command node matches node attribute command request ers requesters map string ad hoc command info adhoccommandinfo commands concurrent hash map concurrenthashmap string ad hoc command info adhoccommandinfo map command session instance local command localcommand local command localcommand objects current command execution note key session local command localcommand session matches session id sessionid attribute command respond ers responders map string local command localcommand executing commands executingcommands concurrent hash map concurrenthashmap string local command localcommand ad hoc command manager adhoccommandmanager connection connection connection connection init registers command command manager connection node unique identifier command connection command manager human readable command command extend link local command localcommand constructor param node unique identifier command param human readable command param clazz command extend link local command localcommand register command registercommand string node string local command localcommand clazz register command registercommand node local command factory localcommandfactory local command localcommand get instance getinstance instantiation exception instantiationexception illegal access exception illegalaccessexception clazz new instance newinstance registers command command manager connection node unique identifier command connection command manager human read eale readeale command factory generates instances command param node unique identifier command param human readable command param factory factory create instances command register command registercommand string node string local command factory localcommandfactory factory ad hoc command info adhoccommandinfo command info commandinfo ad hoc command info adhoccommandinfo node connection get user getuser factory commands node command info commandinfo node information provider nodeinformationprovider provide command service discovery manager servicediscoverymanager get instance for getinstancefor connection set node information provider setnodeinformationprovider node node information provider nodeinformationprovider list discover items discoveritems item get node items getnodeitems list string get node features getnodefeatures list string answer array list arraylist string answer add disco name space namespace todo check service todo current connection answer add jabber data answer list discover info discoverinfo identity get node ide ntities getnodeidentities list discover info discoverinfo identity answer array list arraylist discover info discoverinfo identity discover info discoverinfo identity identity discover info discoverinfo identity auto mation automation command node answer add identity answer override list packet extension packetextension get node packet extensions getnodepacketextensions discover commands specific jid code jid code full jid param jid full jid retrieve commands discovered items xmpp exception xmppexception operation failed reason discover items discoveritems discover commands discovercommands string jid xmpp exception xmppexception service discovery manager servicediscoverymanager service discovery manager servicediscoverymanager service discovery manager servicediscoverymanager get instance for getinstancefor connection service discovery manager servicediscoverymanager discover items discoveritems jid disco node disconode publish commands specific jid param jid full jid publish commands xmpp exception xmppexception operation failed reason publish commands publishcommands string jid xmpp exception xmppexception service discovery manager servicediscoverymanager service discovery manager servicediscoverymanager service discovery manager servicediscoverymanager get instance for getinstancefor connection collects commands publish items discover items discoveritems discover items discoveritems discover items discoveritems collection ad hoc command info adhoccommandinfo x commands list xcommandslist get registered commands getregisteredcommands ad hoc command info adhoccommandinfo info x commands list xcommandslist discover items discoveritems item item discover items discoveritems item info getownerjid item set name setname info get name getname item set node setnode info get node getnode discover items discoveritems add item additem item service discovery manager servicediscoverymanager publish items publishitems jid disco node disconode discover items discoveritems returns command represents instance command remote host execute remote commands concept rmi invocation command equivalent invocation remote command param jid full jid host remote command param node identifier command local instance equivalent remote command remote command remotecommand get remote command getremotecommand string jid string node remote command remotecommand connection node jid adds listeners connection registers hoc command feature service discovery manager servicediscoverymanager registers items feature adds packet listeners handle execution requests creates start session sweeper init register instance associate connection instances connection add listener connection removes registered instance connection closed connection add connection listener addconnectionlistener connection listener connectionlistener connection closed connectionclosed unregister instance connection closed instances remove connection connection closed on error connectionclosedonerror exception unregister instance connection closed instances remove connection reconnect ion successful reconnectionsuccessful register instance connection reestablished instances connection ad hoc command manager adhoccommandmanager rec onnecting in reconnectingin seconds reconnect ion failed reconnectionfailed exception add feature service discovery manage connection supports ad hoc adhoc commands protocol client discover client supports ad hoc adhoc commands service discovery manager servicediscoverymanager get instance for getinstancefor connection add feature addfeature disco name space namespace node information provider nodeinformationprovider provide ad hoc adhoc commands registered disco request received service discovery manager servicediscoverymanager get instance for getinstancefor connection set node information provider setnodeinformationprovider disco node disconode node information provider nodeinformationprovider list discover items discoveritems item get node items getnodeitems list discover items discoveritems item answer array list arraylist discover items discoveritems item collection ad hoc command info adhoccommandinfo commands list commandslist get registered commands getregisteredcommands ad hoc command info adhoccommandinfo info commands list commandslist discover items discoveritems item item discover items discoveritems item info getownerjid item set name setname info get name getname item set node setnode info get node getnode answer add item answer list string get node features getnodefeatures list identity get node ide ntities getnodeidentities override list packet extension packetextension get node packet extensions getnodepacketextensions packet listener filter processing ad hoc adhoc commands pack ets packets packet listener packetlistener listener packet listener packetlistener process packet processpacket packet packet ad hoc command data adhoccommanddata request data requestdata ad hoc command data adhoccommanddata packet process ad hoc command processadhoccommand request data requestdata packet filter packetfilter filter packet type filter packettypefilter ad hoc command data adhoccommanddata connection add packet listener addpacketlistener listener filter sessions sweeper sessionssweeper process ad hoc adhoc command packet request execution action command request method checks executing command requested command exists req uester requester permissions execute command stage saves command session request method checks executing command session request stored session life exc eed exceed time action execute actions param request data requestdata packet process process ad hoc command processadhoccommand ad hoc command data adhoccommanddata request data requestdata process requests type request data requestdata get type gettype type creates response data ad hoc command data adhoccommanddata response ad hoc command data adhoccommanddata response set to setto request data requestdata get from getfrom response set packet d setpacketid request data requestdata get packet d getpacketid response set node setnode request data requestdata get node getnode response set id setid request data requestdata get to getto string session id sessionid request data requestdata get session d getsessionid string command node commandnode request data requestdata get node getnode session id sessionid command exists commands contains key containskey command node commandnode requested command exist item error res pond error responderror response xmpp error xmpperror condition item create session session id sessionid string utils stringutils random string randomstring create instance command sessioid local command localcommand command new instance of cmd newinstanceofcmd command node commandnode session id sessionid response set type settype type result command set data setdata response execute requested command command has permission haspermission request data requestdata get from getfrom res pond error responderror response xmpp error xmpperror condition for bidden forbidden action action request data requestdata get action getaction action unknown res pond respond error action action equals action unknown res pond error responderror response xmpp error xmpperror condition bad request ad hoc command adhoccommand specific error condition specificerrorcondition malformed action malformedaction action execute invalid action action action equals action execute res pond error responderror response xmpp error xmpperror condition bad request ad hoc command adhoccommand specific error condition specificerrorcondition bad action badaction inc rease increase number command witch stage command increment s tag e incrementstage executes command command execute command is last s tag e islaststage stage command completed response set status setstatus status completed executing registered call response set status setstatus status executing executing commands executingcommands session id sessionid command session reaping thread started start sessions sweeper sessionssweeper sessions sweeper sessionssweeper thread runnable string session id sessionid executing commands executingcommands key set keyset local command localcommand command executing commands executingcommands session id sessionid map command creation stamp creationstamp command get creation date getcreationdate invalid session error time error system current time millis currenttimemillis creation stamp creationstamp session timeout remove expired session executing commands executingcommands remove session id sessionid thread sleep interrupted exception interruptedexception sessions sweeper sessionssweeper set daemon setdaemon sessions sweeper sessionssweeper start s ends sends response packet connection send packet sendpacket response xmpp exception xmppexception xmpp error xmpperror error getxmpperror xmpp error xmpperror type cancel equals error get type gettype response set status setstatus status can celed canceled executing commands executingcommands remove session id sessionid res pond error responderror response error print stack trace printstacktrace local command localcommand command executing commands executingcommands session id sessionid key map command res pond error responderror response xmpp error xmpperror condition bad request ad hoc command adhoccommand specific error condition specificerrorcondition bad session id badsessionid check session data expired min utes minutes creation stamp creationstamp command get creation date getcreationdate system current time millis currenttimemillis creation stamp creationstamp session timeout remove expired session executing commands executingcommands remove session id sessionid answer allowed error session expired res pond error responderror response xmpp error xmpperror condition allowed ad hoc command adhoccommand specific error condition specificerrorcondition session expired sessionexpired req uester requester send requests executing command session execution action avoid inc onsistencies inconsistencies command action action request data requestdata get action getaction action unknown res pond respond error action action equals action unknown res pond error responderror response xmpp error xmpperror condition bad request ad hoc command adhoccommand specific error condition specificerrorcondition malformed action malformedaction action follow actual execute action action action execute equals action action command get execute action getexecuteaction off ered offered command is valid action isvalidaction action res pond error responderror response xmpp error xmpperror condition bad request ad hoc command adhoccommand specific error condition specificerrorcondition bad action badaction todo check req uierd requierd fields form todo filled exception simplify todo construction commands errors passed response result response set type settype type result data command command set data setdata response action equals action command increment s tag e incrementstage command form request data requestdata get form getform command is last s tag e islaststage stage command completed response set status setstatus status completed executing response set status setstatus status executing action complete equals action command increment s tag e incrementstage command complete form request data requestdata get form getform response set status setstatus status completed remove completed session executing commands executingcommands remove session id sessionid action prev equals action command decrement s tag e decrementstage command prev action cancel equals action command cancel response set status setstatus status can celed canceled remove can celed canceled session executing commands executingcommands remove session id sessionid connection send packet sendpacket response xmpp exception xmppexception xmpp error xmpperror error getxmpperror xmpp error xmpperror type cancel equals error get type gettype response set status setstatus status can celed canceled executing commands executingcommands remove session id sessionid res pond error responderror response error print stack trace printstacktrace responds error specific condition param response response send param condition condition error res pond error responderror ad hoc command data adhoccommanddata response xmpp error xmpperror condition condition res pond error responderror response xmpp error xmpperror condition responds error specific condition param response response send param condition condition error param specific condition specificcondition adhoc command error condition res pond error responderror ad hoc command data adhoccommanddata response xmpp error xmpperror condition condition ad hoc command adhoccommand specific error condition specificerrorcondition specific condition specificcondition xmpp error xmpperror error xmpp error xmpperror condition error add extension addextension ad hoc command data adhoccommanddata specific error specificerror specific condition specificcondition res pond error responderror response error responds error specific error param response response send param error error send res pond error responderror ad hoc command data adhoccommanddata response xmpp error xmpperror error response set type settype type error response set error seterror error connection send packet sendpacket response creates instance command execution request param command node commandnode command node identifies param sessionid session execution command instance execute xmpp exception xmppexception problem creating instance local command localcommand new instance of cmd newinstanceofcmd string command node commandnode string sessionid xmpp exception xmppexception ad hoc command info adhoccommandinfo command info commandinfo commands command node commandnode local command localcommand command command local command localcommand command info commandinfo get command instance getcommandinstance command set session d setsessionid sessionid command set name setname command info commandinfo get name getname command set node setnode command info commandinfo get node getnode instantiation exception instantiationexception print stack trace printstacktrace xmpp exception xmppexception xmpp error xmpperror xmpp error xmpperror condition int erna interna server error illegal access exception illegalaccessexception print stack trace printstacktrace xmpp exception xmppexception xmpp error xmpperror xmpp error xmpperror condition int erna interna server error command returns registered commands command manager connection registered commands collection ad hoc command info adhoccommandinfo get registered commands getregisteredcommands commands values stores hoc command ad hoc command info adhoccommandinfo string node string string ownerjid local command factory localcommandfactory factory ad hoc command info adhoccommandinfo string node string string ownerjid local command factory localcommandfactory factory node node ownerjid ownerjid factory factory local command localcommand get command instance getcommandinstance instantiation exception instantiationexception illegal access exception illegalaccessexception factory get instance getinstance string get name getname string get node getnode node string getownerjid ownerjid