copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smackx work group workgroup util org jivesoftware smackx work group workgroup meta data metadata org jivesoftware smack util string utils stringutils org xml pull xmlpull xml pull parser xmlpullparser org xml pull xmlpull xml pull parser exception xmlpullparserexception java io exception ioexception java util utility meta data parsing writing author matt tucker meta data utils metadatautils parses meta data returns map string pairs parser pos itioned positioned opening meta data tag empty map returned param parser xml parser pos itioned positioned opening meta data tag meta data xml pull parser exception xmlpullparserexception error occurs parsing xml io exception ioexception error occurs parsing xml map string list string parse meta data parsemetadata xml pull parser xmlpullparser parser xml pull parser exception xmlpullparserexception io exception ioexception event type eventtype parser get event type geteventtype correctly pos itioned positioned opening meta data tag parse meta data event type eventtype xml pull parser xmlpullparser start tag parser get name getname equals meta data metadata element parser get name space getnamespace equals meta data metadata name space namespace map string list string meta data metadata hashtable string list string event type eventtype parser next tag nexttag parsing meta data event type eventtype xml pull parser xmlpullparser tag parser get name getname equals meta data metadata element string parser get attribute value getattributevalue string parser next text nexttext meta data metadata contains key containskey list string values meta data metadata values add list string values array list arraylist string values add meta data metadata values event type eventtype parser next tag nexttag meta data metadata collections empty map emptymap serial izes serializes map string pairs meta data xml format param meta data metadata map meta data map string list string meta data values xml form string serialize meta data serializemetadata map string list string meta data metadata string builder stringbuilder buf string builder stringbuilder meta data metadata meta data metadata size buf append metadata xml ns xmlns http jivesoftware protocol work group workgroup iterator string meta data metadata key set keyset iterator has next hasnext string key list string meta data metadata key iterator string iterator has next hasnext string buf append append key append buf append string utils stringutils escapeforxml buf append buf append metadata buf to string tostring