copyright mark us markus alexander kuppe rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors mark us markus alexander kuppe ecf dev eclipse org lemmster dot initial api implementation org eclipse ecf tests provider discovery java util array list arraylist java util arrays java util collection java util collections java util hash set hashset java util iterator java util list java util org eclipse ecf core i container icontainer org eclipse ecf core events i container event icontainerevent org eclipse ecf core identity org eclipse ecf discovery i discovery locator idiscoverylocator org eclipse ecf discovery i service event iserviceevent org eclipse ecf discovery i service info iserviceinfo org eclipse ecf discovery identity i service type d iservicetypeid org eclipse ecf provider discovery composite discovery container compositediscoverycontainer org eclipse ecf provider discovery composite service container event compositeservicecontainerevent org eclipse ecf tests discovery discovery service test discoveryservicetest org eclipse ecf tests discovery listener test service listener testservicelistener composite discovery service container test compositediscoveryservicecontainertest discovery service test discoveryservicetest i container icontainer container composite discovery service container test compositediscoveryservicecontainertest ecf discovery composite set comparator setcomparator composite service info comp orator compositeserviceinfocomporator todo jslp longer red iscovery rediscovery int erval interval nls set wait time for provider setwaittimeforprovider parse long parselong system get property getproperty net slp red iscover rediscover to string tostring todo mkuppe https bugs eclipse org bugs bug cgi set scope setscope i service type d iservicetypeid scope set host name sethostname system get property getproperty net mdns javadoc org eclipse ecf tests discovery discovery service test discoveryservicetest set up setup set up setup exception set up setup container i container icontainer discovery locator discoverylocator collection discovery containers discoverycontainers composite discovery container compositediscoverycontainer discovery locator discoverylocator get discovery containers getdiscoverycontainers hash set hashset iterator itr discovery containers discoverycontainers iterator itr has next hasnext i discovery locator idiscoverylocator object i discovery locator idiscoverylocator itr i container icontainer adapter i container icontainer object get adapter getadapter i container icontainer add adapter getid accidentally modified test ids to expect idstoexpect collections unmodifiable set unmodifiableset events to expect eventstoexpect discovery containers discoverycontainers size assert true asserttrue events sense events to expect eventstoexpect add service listener addservicelistener test service listener testservicelistener service listener servicelistener discovery locator discoverylocator add service listener addservicelistener service listener servicelistener add listener register and wait addlistenerregisterandwait service listener servicelistener service info serviceinfo discovery locator discoverylocator remove service listener removeservicelistener service listener servicelistener live container i container icontainer i container icontainer service listener servicelistener get locator getlocator assert true asserttrue get connected d getconnectedid check received correct amount events i container event icontainerevent events service listener servicelistener get event getevent assert not null assertnotnull test listener didn receive discovery events events assert equals assertequals test listener received unexpected amount discovery events arrays as list aslist events events to expect eventstoexpect events length list orig containers origcontainers array list arraylist events length composite service container event compositeservicecontainerevent event composite service container event compositeservicecontainerevent events check local container hidden correctly local container id localcontainerid event get local container d getlocalcontainerid connected id connectedid container get connected d getconnectedid assert equals assertequals local container id localcontainerid connected id connectedid check i service info iserviceinfo correct fields properties i service info iserviceinfo service info serviceinfo i service event iserviceevent event get service info getserviceinfo assert true asserttrue i service info iserviceinfo match expected service info serviceinfo service info serviceinfo comparator compare service info serviceinfo service info serviceinfo add underlying discovery container result orig containers origcontainers add event get original local container d getoriginallocalcontainerid check underlying containers fired event assert equals assertequals nested container didn send event multiple events to expect eventstoexpect orig containers origcontainers size collection get container ids getcontainerids i container event icontainerevent events collection original ids originalids array list arraylist events length i container event icontainerevent i container event icontainerevent events i container event icontainerevent composite service container event compositeservicecontainerevent composite service container event compositeservicecontainerevent csce composite service container event compositeservicecontainerevent i container event icontainerevent original ids originalids add csce get original local container d getoriginallocalcontainerid system err println warning skip ping skipping composite service container event compositeservicecontainerevent composite discovery service container test compositediscoveryservicecontainertest get container ids getcontainerids i container event icontainerevent original ids originalids add i container event icontainerevent get local container d getlocalcontainerid original ids originalids