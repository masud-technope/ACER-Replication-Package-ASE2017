copyright jan rellermeyer systems group dep artment department computer s cience science eth zurich rights reserved redistribution source binary forms modification permitted conditions met redistributions source code retain copyright not ice notice list conditions disclaimer redistributions binary form reproduce copyright not ice notice list conditions disclaimer documentation materials distribution eth zurich names contributors end orse endorse promote products derived software specific prior written permission software copyright holders contributors express implied warranties including limited implied warranties merchantability fitness purpose d isclaimed disclaimed event copyright owner contributors liable dir ect direct indirect incidental special exemplary consequential d amages damages including limited procurement substitute goods services loss data profits business int erruption interruption caused theory liability contract strict liability tort including negligence arising software advised possibility d amage damage ethz iks osgi impl java byte array input stream bytearrayinputstream java i o exception ioexception java input stream inputstream java not serializable exception notserializableexception java output stream outputstream java lang reflect invocation target exception invocationtargetexception java lang reflect method java text simple date format simpledateformat java util array list arraylist java util arrays java util java util dictionary java util hash map hashmap java util hash set hashset java util hashtable java util list java util map java util org osgi framework bundle org osgi framework bundle exception bundleexception org osgi framework constants org osgi framework filter org osgi framework service registration serviceregistration org osgi service event event org osgi service event event admin eventadmin org osgi service event event constants eventconstants org osgi service event event handler eventhandler org osgi service log log service logservice ethz iks osgi async remote call callback asyncremotecallcallback ethz iks osgi remoteosgiexception ethz iks osgi remoteosgiservice ethz iks osgi remote service event remoteserviceevent ethz iks osgi remote service reference remoteservicereference ethz iks osgi uri ethz iks osgi channels channel endpoint channelendpoint ethz iks osgi channels network channel networkchannel ethz iks osgi channels network channel factory networkchannelfactory ethz iks osgi messages deliver bundles message deliverbundlesmessage ethz iks osgi messages deliver service message deliverservicemessage ethz iks osgi messages lease message leasemessage ethz iks osgi messages lease update message leaseupdatemessage ethz iks osgi messages remote call message remotecallmessage ethz iks osgi messages remote call result message remotecallresultmessage ethz iks osgi messages remote event message remoteeventmessage ethz iks osgi messages remoteosgimessage ethz iks osgi messages request bundle message requestbundlemessage ethz iks osgi messages request dependencies message requestdependenciesmessage ethz iks osgi messages request service message requestservicemessage ethz iks osgi messages stream request message streamrequestmessage ethz iks osgi messages stream result message streamresultmessage ethz iks osgi messages time offset message timeoffsetmessage ethz iks osgi streams input stream handle inputstreamhandle ethz iks osgi streams input stream proxy inputstreamproxy ethz iks osgi streams output stream handle outputstreamhandle ethz iks osgi streams output stream proxy outputstreamproxy ethz iks util collection utils collectionutils ethz iks util string utils stringutils endpoint network channel encapsulates communication logic sending messages service method invocation timestamp synchronization event delivery end points endpoints exc hange exchange symmetric leases established leases statements supply demand peer services off ers offers event topics int erested interested statements under go undergo change lease update leases expire closing network channel end points endpoints network transport channels modular exc hangeable exchangeable services supported protocols service uri os gi osgi main tains maintains list network channel factories protocols support channel protocol network channel breaks channel endpoint reconnect restore connection instance endpoint endpoint unregistered author jan rellermeyer eth zurich channel endpoint impl channelendpointimpl channel endpoint channelendpoint usage counter usagecounter channel network channel networkchannel network channel networkchannel services os gi osgi framework holding remote channel endpoint map service uri remote service references remoteservicereferences map remote services remoteservices hash map hashmap topics int erest interest os gi osgi framework holding remote channel endpoint list topic strings list remote topics remotetopics array list arraylist time offset peer local time local time remote channel endpoint time offset timeoffset time offset timeoffset timeout timeout integer system get property getproperty ethz iks osgi channel endpoint impl channelendpointimpl timeout int value intvalue callback register map callbacks hash map hashmap map service uri remote service registration remoteserviceregistration hash map hashmap local services localservices hash map hashmap map service uri service registration hash map hashmap proxied services proxiedservices hash map hashmap map service uri proxy bundle endpoint closed proxies unregistered hash map hashmap proxy bundles proxybundles hash map hashmap map stream stream instance hash map hashmap streams hash map hashmap stream next stream d nextstreamid handler registration remote topic space empty service registration serviceregistration handler reg handlerreg filter events prevent loops remote delivery peers connected channel disjoint topic spaces string loops nls remote event message remoteeventmessage event sender uri nls https bugs eclipse org event constants eventconstants event topic org osgi service remote service admin remoteserviceadmin nls array list arraylist work queue workqueue array list arraylist multiple xer multiplexer serves marker channel dispose connection has redundant links hasredundantlinks create channel endpoint param factory transport channel factory param endpoint address endpointaddress add ress address remote endpoint remoteosgiexception wrong os gi osgi i o exception ioexception wrong network layer channel endpoint impl channelendpointimpl network channel factory networkchannelfactory factory uri endpoint address endpointaddress remoteosgiexception i o exception ioexception network channel networkchannel factory get connection getconnection endpoint address endpointaddress remote gi service impl remoteosgiserviceimpl debug remote gi service impl remoteosgiserviceimpl log log log service logservice log debug opening channel get remote address getremoteaddress init thread pool initthreadpool remote gi service impl remoteosgiserviceimpl register channel endpoint registerchannelendpoint create channel endpoint incoming connection param channel network channel incoming connection channel endpoint impl channelendpointimpl network channel networkchannel channel network channel networkchannel channel channel bind init thread pool initthreadpool remote gi service impl remoteosgiserviceimpl register channel endpoint registerchannelendpoint initialize thread pool init thread pool initthreadpool todo tra deoff tradeoff central end points endpoints thread group threadgroup thread pool threadpool thread group threadgroup worker threads workerthreads to string tostring remote gi service impl remoteosgiserviceimpl max threads end point endpoint thread thread thread pool threadpool os gi osgi channel worker thread channelworkerthread is interrupted isinterrupted runnable work queue workqueue work queue workqueue is empty isempty work queue workqueue wait runnable work queue workqueue remove interrupted exception interruptedexception print stack trace printstacktrace start process rec ieved recieved message called channel param msg received message ethz iks osgi channels channel endpoint channelendpoint received message receivedmessage ethz iks osgi messages remoteosgimessage category channel endpoint channelendpoint received message receivedmessage remoteosgimessage msg msg dispose integer xid integer msg getxid waiting callback waitingcallback callback callbacks callback waiting callback waitingcallback callbacks remove xid callback callback result msg runnable runnable remoteosgimessage reply handle message handlemessage msg reply network channel networkchannel send message sendmessage reply not serializable exception notserializableexception nse remoteosgiexception error sending reply nse null pointer exception nullpointerexception npe i o exception ioexception dispose work queue workqueue work queue workqueue add work queue workqueue notify invoke method remote host function proxy bundles param service service uri param method signature methodsignature method signature param args method parameter throwable exception original method remoteosgiexception result remote method invocation ethz iks osgi channels channel endpoint channelendpoint invoke method invokemethod java lang string java lang string java lang object category channel endpoint channelendpoint object invoke method invokemethod string service string method signature methodsignature object args throwable network channel networkchannel nls remoteosgiexception channel closed check arguments streams replace placeholder args length args input stream inputstream args get input stream placeholder getinputstreamplaceholder input stream inputstream args args output stream outputstream args get output stream placeholder getoutputstreamplaceholder output stream outputstream args remote call message remotecallmessage invoke msg invokemsg remote call message remotecallmessage invoke msg invokemsg set service d setserviceid uri create service get fragment getfragment invoke msg invokemsg set method signature setmethodsignature method signature methodsignature invoke msg invokemsg set args setargs args send message method result message methodresultmessage remote call result message remotecallresultmessage result msg resultmsg remote call result message remotecallresultmessage send and wait sendandwait invoke msg invokemsg result msg resultmsg caused exception causedexception result msg resultmsg get exception getexception object result result msg resultmsg get result getresult result input stream handle inputstreamhandle get input stream proxy getinputstreamproxy input stream handle inputstreamhandle result result output stream handle outputstreamhandle get output stream proxy getoutputstreamproxy output stream handle outputstreamhandle result result remoteosgiexception remoteosgiexception method invocation service method signature methodsignature failed async remote call asyncremotecall string fragment string method signature methodsignature object args async remote call callback asyncremotecallcallback callback network channel networkchannel nls remoteosgiexception channel closed check arguments streams replace placeholder args length args input stream inputstream args get input stream placeholder getinputstreamplaceholder input stream inputstream args args output stream outputstream args get output stream placeholder getoutputstreamplaceholder output stream outputstream args integer xid integer remote gi service impl remoteosgiserviceimpl next xid nextxid callbacks callbacks xid async callback asynccallback result remoteosgimessage msg remote call result message remotecallresultmessage result msg resultmsg remote call result message remotecallresultmessage msg result msg resultmsg caused exception causedexception callback remote call result remotecallresult result msg resultmsg get exception getexception object result result msg resultmsg get result getresult object res result input stream handle inputstreamhandle res get input stream proxy getinputstreamproxy input stream handle inputstreamhandle result result output stream handle outputstreamhandle res get output stream proxy getoutputstreamproxy output stream handle outputstreamhandle result res result callback remote call result remotecallresult res remote call message remotecallmessage invoke msg invokemsg remote call message remotecallmessage invoke msg invokemsg set service d setserviceid fragment invoke msg invokemsg set method signature setmethodsignature method signature methodsignature invoke msg invokemsg set args setargs args invoke msg invokemsg setxid xid short value shortvalue send invoke msg invokemsg remoteosgiexception callbacks remove xid callback remote call result remotecallresult remoteosgiexception method invocation get remote address getremoteaddress fragment method signature methodsignature failed attributes service function simplify proxy bundle generation param serviceid serviceid remote service service attributes category channel endpoint channelendpoint dictionary get properties getproperties string serviceid get remote reference getremotereference serviceid get properties getproperties attributes presentation service function proxies support serviceui present ations presentations param serviceid serviceid remote service presentation attributes category channel endpoint channelendpoint dictionary get presentation properties getpresentationproperties string serviceid dictionary attr ibs attribs hashtable attr ibs attribs remoteosgiservice service uri serviceid attr ibs attribs remoteosgiservice presentation get remote reference getremotereference serviceid get property getproperty remoteosgiservice presentation attr ibs attribs track registration proxy service param serviceid service param reg service registration category channel endpoint channelendpoint track registration trackregistration string serviceid service registration serviceregistration reg proxied services proxiedservices serviceid reg untrack registration proxy service param serviceid service category channel endpoint channelendpoint untrack registration untrackregistration string serviceid proxied services proxiedservices remove serviceid temp oral temporal offset remote peer time offset timeoffset remoteosgiexception network errors time offset timeoffset get offset getoffset remoteosgiexception time offset timeoffset unknown perform initial offset measurement messages time offset message timeoffsetmessage time msg timemsg time offset message timeoffsetmessage time msg timemsg timestamp time msg timemsg time offset message timeoffsetmessage send and wait sendandwait time msg timemsg time offset timeoffset time offset timeoffset time msg timemsg get time series gettimeseries time offset timeoffset is expired isexpired offset expired start measurement time offset message timeoffsetmessage time msg timemsg time offset message timeoffsetmessage time offset timeoffset series length serieslength time msg timemsg timestamp time msg timemsg time offset message timeoffsetmessage send and wait sendandwait time msg timemsg time offset timeoffset update time msg timemsg get time series gettimeseries time offset timeoffset dispose channel category channel endpoint channelendpoint dispose network channel networkchannel remote gi service impl remoteosgiserviceimpl debug remote gi service impl remoteosgiserviceimpl log log log service logservice log debug d i s posing disposing end point endpoint get remote address getremoteaddress remote gi service impl remoteosgiserviceimpl unregister channel endpoint unregisterchannelendpoint get remote address getremoteaddress to string tostring handler reg handlerreg handler reg handlerreg unregister network channel networkchannel old channel oldchannel network channel networkchannel network channel networkchannel old channel oldchannel close i o exception ioexception ioe ioe print stack trace printstacktrace has redundant links hasredundantlinks info rm inform listeners services remote service reference remoteservicereference remote service reference remoteservicereference remote services remoteservices values to array toarray remote service reference remoteservicereference remote services remoteservices size length remote gi service impl remoteosgiserviceimpl notify remote service listeners notifyremoteservicelisteners remote service event remoteserviceevent remote service event remoteserviceevent unregistering uninstall proxy bundle bundle proxies bundle proxy bundles proxybundles values to array toarray bundle proxy bundles proxybundles size proxies length proxies get state getstate bundle uninstalled proxies uninstall throwable remote services remoteservices remote topics remotetopics time offset timeoffset callbacks clear local services localservices clear proxied services proxiedservices clear close streams closestreams streams clear handler reg handlerreg callbacks callbacks notify all notifyall is connected isconnected network channel networkchannel string to string tostring network channel networkchannel nls remoteosgiexception channel closed nls nls channel endpoint channelendpoint network channel networkchannel to string tostring read input stream peer identified param streamid stream result read operation i o exception ioexception i o exception ioexception occurs read stream readstream streamid i o exception ioexception stream request message streamrequestmessage request msg requestmsg stream request message streamrequestmessage request msg requestmsg set op setop stream request message streamrequestmessage read request msg requestmsg set stream d setstreamid streamid stream result message streamresultmessage result msg resultmsg do stream op dostreamop request msg requestmsg result msg resultmsg get result getresult read array input stream peer identified param streamid stream param array write result param offset destination array param len number bytes read number bytes read i o exception ioexception i o exception ioexception occurs read stream readstream streamid len i o exception ioexception handle special cases defined input stream inputstream null pointer exception nullpointerexception len len length index out of bounds exception indexoutofboundsexception len stream request message streamrequestmessage request msg requestmsg stream request message streamrequestmessage request msg requestmsg set op setop stream request message streamrequestmessage read array request msg requestmsg set stream d setstreamid streamid request msg requestmsg set len or val setlenorval len stream result message streamresultmessage result msg resultmsg do stream op dostreamop request msg requestmsg length result msg resultmsg get len getlen check length indicating eof length read data readdata result msg resultmsg get data getdata copy result array correct offset system arraycopy read data readdata length length write output stream peer identified param streamid stream param i o exception ioexception i o exception ioexception occurs write stream writestream streamid i o exception ioexception stream request message streamrequestmessage request msg requestmsg stream request message streamrequestmessage request msg requestmsg set op setop stream request message streamrequestmessage write request msg requestmsg set stream d setstreamid streamid request msg requestmsg set len or val setlenorval wait stream operation finish do stream op dostreamop request msg requestmsg write bytes array output stream peer identified param streamid stream param source array param offset source array param len number bytes copy i o exception ioexception i o exception ioexception occurs write stream writestream streamid len i o exception ioexception handle special cases defined output stream outputstream null pointer exception nullpointerexception len len length index out of bounds exception indexoutofboundsexception data len system arraycopy data len stream request message streamrequestmessage request msg requestmsg stream request message streamrequestmessage request msg requestmsg set op setop stream request message streamrequestmessage write array request msg requestmsg set stream d setstreamid streamid request msg requestmsg set data setdata data request msg requestmsg set len or val setlenorval len wait stream operation finish do stream op dostreamop request msg requestmsg channel uri channel category channel endpoint channelendpoint uri get remote address getremoteaddress network channel networkchannel nls remoteosgiexception channel closed network channel networkchannel get remote address getremoteaddress hte local add ress address uri get local address getlocaladdress network channel networkchannel nls remoteosgiexception channel closed network channel networkchannel get local address getlocaladdress send lease param my services myservices services peer param my topics mytopics topics peer remote service references peer remote service reference remoteservicereference send lease sendlease remote service registration remoteserviceregistration my services myservices string my topics mytopics lease message leasemessage lease message leasemessage populate lease populatelease my services myservices my topics mytopics lease message leasemessage lease lease message leasemessage send and wait sendandwait process lease processlease lease send lease update param msg lease update message send lease update sendleaseupdate lease update message leaseupdatemessage msg send msg side reachable param uri remote endpoint add ress address side reachable is active isactive string uri remote services remoteservices uri fetch service remote peer param remote service reference i o exception ioexception network errors get proxy bundle getproxybundle remote service reference remoteservicereference i o exception ioexception remoteosgiexception network channel networkchannel nls remoteosgiexception channel closed build request service message requestservicemessage request service message requestservicemessage req request service message requestservicemessage req set service d setserviceid geturi get fragment getfragment send request service message requestservicemessage deliver service message deliverservicemessage deliver service message deliverservicemessage minimal description resources proxy bundle service type inject ions injections export declarations bundle deliver service message deliverservicemessage deliv deliver service message deliverservicemessage send and wait sendandwait req generate proxy bundle service input stream inputstream proxy generator proxygenerator generate proxy bundle generateproxybundle geturi deliv install resolve and start bundle installresolveandstartbundle install resolve and start bundle installresolveandstartbundle remote service reference remoteservicereference input stream inputstream is proxy isproxy bundle bundle remoteosgiactivator get activator getactivator get context getcontext install bundle installbundle geturi to string tostring retrieve dependencies retrievedependencies string bundle get headers getheaders constants string bundle get headers getheaders constants export is proxy isproxy store bundle updates cleanup proxy bundles proxybundles geturi get fragment getfragment bundle start bundle bundle start bundle exception bundleexception throwable nested get nested exception getnestedexception get nested exception getnestedexception nested print stack trace printstacktrace remoteosgiexception install generated bundle to string tostring nested clone remote bundle param remote service reference service bundle clone requested get clone bundle getclonebundle remote service reference remoteservicereference network channel networkchannel nls remoteosgiexception channel closed build request bundle message requestbundlemessage request bundle message requestbundlemessage req request bundle message requestbundlemessage req set service d setserviceid geturi get fragment getfragment deliver bundles message deliverbundlesmessage deliv deliver bundles message deliverbundlesmessage send and wait sendandwait req bundle bytes bundlebytes deliv get dependencies getdependencies install resolve and start bundle installresolveandstartbundle byte array input stream bytearrayinputstream bundle bytes bundlebytes tokenize export string param str string tokens string get tokens gettokens string str array list arraylist result array list arraylist string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer str string tokens string utils stringutils string to array stringtoarray str tokens length pos todo handle versions string pkg pos tokens index of indexof tokens substring pos trim tokens trim remote gi service impl remoteosgiserviceimpl check package import checkpackageimport pkg result add pkg string result to array toarray string result size missing dependencies remote bundle defined declared exports param import string importstring declared imports param export string exportstring declared exports retrieve dependencies retrievedependencies string import string importstring string export string exportstring exports hash set hashset arrays as list aslist get tokens gettokens export string exportstring imports hash set hashset arrays as list aslist get tokens gettokens import string importstring string missing string collection utils collectionutils right difference rightdifference imports exports to array toarray string missing length request dependencies message requestdependenciesmessage req request dependencies message requestdependenciesmessage req set packages setpackages missing deliver bundles message deliverbundlesmessage deps deliver bundles message deliverbundlesmessage send and wait sendandwait req dep bytes depbytes deps get dependencies getdependencies dep bytes depbytes length remoteosgiactivator get activator getactivator get context getcontext install bundle installbundle osgi dep missing byte array input stream bytearrayinputstream dep bytes depbytes bundle exception bundleexception print stack trace printstacktrace remote reference serviceid param serviceid uri remote service reference code code remote service reference impl remoteservicereferenceimpl get remote reference getremotereference string uri remote service reference impl remoteservicereferenceimpl remote services remoteservices uri remote references param filter filter code code remote service references match filter remote service reference remoteservicereference get all remote references getallremotereferences filter filter list result array list arraylist remote service reference impl remoteservicereferenceimpl remote service reference impl remoteservicereferenceimpl remote services remoteservices values to array toarray remote service reference impl remoteservicereferenceimpl remote services remoteservices size filter length length filter match get properties getproperties result add remote service reference remoteservicereference remote service reference remoteservicereference result to array toarray remote service reference impl remoteservicereferenceimpl result size length release remote service leads uninstallation proxy bundle param uri uri service unget remote service ungetremoteservice uri uri bundle bundle bundle proxy bundles proxybundles remove uri get fragment getfragment https bugs eclipse org bundle bundle uninstall remote gi service impl remoteosgiserviceimpl log log log service logservice log warning nls failed uninstall exist ant existant bundle nls uri get fragment getfragment bundle exception bundleexception start time starttime string trace time prop system get property getproperty ethz iks osgi trace send message time tracesendmessagetime trace time log service trace time prop trace time prop equals ignore case equalsignorecase logs ervice logservice trace time prop equals ignore case equalsignorecase trace time trace time prop equals ignore case equalsignorecase system out systemout trace time log service simple date format simpledateformat sdf simple date format simpledateformat sss start timing starttiming string message trace time start time starttime system current time millis currenttimemillis string buffer stringbuffer buf string buffer stringbuffer timing start buf append sdf format start time starttime append buf append message message log service logservice log service logservice remote gi service impl remoteosgiserviceimpl log log service logservice log service log service logservice log log service logservice log info buf to string tostring system println buf to string tostring stop timing stoptiming string message throwable exception trace time string buffer stringbuffer buf string buffer stringbuffer timing buf append sdf format start time starttime append buf append message message buf append duration append system current time millis currenttimemillis start time starttime log service logservice log service logservice remote gi service impl remoteosgiserviceimpl log log service logservice log service exception log service logservice log log service logservice log error buf to string tostring exception log service logservice log log service logservice log info buf to string tostring system println buf to string tostring exception exception print stack trace printstacktrace start time starttime send message param msg message send remoteosgimessage msg network channel networkchannel nls remoteosgiexception channel closed msg getxid msg setxid remote gi service impl remoteosgiserviceimpl next xid nextxid throwable string timing msg timingmsg send message sendmessage func i d funcid msg get func d getfuncid xid msg getxid start timing starttiming timing msg timingmsg network channel networkchannel send message sendmessage msg i o exception ioexception ioe msg time offset message timeoffsetmessage time offset message timeoffsetmessage msg rest amp restamp remote gi service impl remoteosgiserviceimpl next xid nextxid network channel networkchannel send message sendmessage msg network channel networkchannel send message sendmessage msg not serializable exception notserializableexception nse remoteosgiexception error sending msg nse remoteosgiexception i o exception ioexception ioe dispose remoteosgiexception network error ioe remoteosgiexception stop timing stoptiming timing msg timingmsg message handler method param msg incoming message reply created remoteosgiexception wrong remoteosgimessage handle message handlemessage remoteosgimessage msg remoteosgiexception msg get func d getfuncid requests remoteosgimessage lease lease message leasemessage lease lease message leasemessage msg process lease processlease lease populate lease populatelease lease remote gi service impl remoteosgiserviceimpl get services getservices remote gi service impl remoteosgiserviceimpl get topics gettopics lease remoteosgimessage request service request service message requestservicemessage req srv reqsrv request service message requestservicemessage msg string serviceid req srv reqsrv get service d getserviceid remote service registration remoteserviceregistration reg get service registration getserviceregistration serviceid deliver service message deliverservicemessage reg get deliver service message getdeliverservicemessage setxid req srv reqsrv getxid set service d setserviceid req srv reqsrv get service d getserviceid remoteosgimessage lease update lease update message leaseupdatemessage su msg sumsg lease update message leaseupdatemessage msg string serviceid su msg sumsg get service d getserviceid state update stateupdate su msg sumsg get type gettype string serviceuri get remote address getremoteaddress resolve serviceid to string tostring state update stateupdate lease update message leaseupdatemessage topic update older os gi osgi version incorrectly sends array list arraylist object topics added topicsadded su msg sumsg get payload getpayload topics added topicsadded list topics added topicsadded list topics added topicsadded to array toarray string object topics removed topicsremoved su msg sumsg get payload getpayload topics removed topicsremoved list topics removed topicsremoved list topics removed topicsremoved to array toarray string update topics updatetopics string topics added topicsadded string topics removed topicsremoved lease update message leaseupdatemessage service dictionary properties dictionary su msg sumsg get payload getpayload sanitize service properties sanitizeserviceproperties properties serviceuri remote service reference impl remoteservicereferenceimpl remote service reference impl remoteservicereferenceimpl string su msg sumsg get payload getpayload serviceid properties remote services remoteservices serviceuri remote gi service impl remoteosgiserviceimpl notify remote service listeners notifyremoteservicelisteners remote service event remoteserviceevent remote service event remoteserviceevent registered lease update message leaseupdatemessage service modified dictionary properties dictionary su msg sumsg get payload getpayload sanitize service properties sanitizeserviceproperties properties serviceuri service registration serviceregistration reg service registration serviceregistration proxied services proxiedservices serviceid reg reg set properties setproperties properties remote service reference impl remoteservicereferenceimpl get remote reference getremotereference nls serviceuri https bugs eclipse org reg set properties setproperties properties remote gi service impl remoteosgiserviceimpl notify remote service listeners notifyremoteservicelisteners remote service event remoteserviceevent remote service event remoteserviceevent modified lease update message leaseupdatemessage service removed network channel networkchannel remote service reference remoteservicereference remote service reference remoteservicereference remote services remoteservices remove serviceuri remote gi service impl remoteosgiserviceimpl notify remote service listeners notifyremoteservicelisteners remote service event remoteserviceevent remote service event remoteserviceevent unregistering bundle bundle bundle proxy bundles proxybundles remove serviceid bundle bundle uninstall bundle exception bundleexception print stack trace printstacktrace proxied services proxiedservices remove serviceid nls remote services remoteservices remove nls serviceuri remoteosgimessage remote call remote call message remotecallmessage inv msg invmsg remote call message remotecallmessage msg remote service registration remoteserviceregistration serv remote service registration remoteserviceregistration local services localservices inv msg invmsg get service d getserviceid serv remote service registration remoteserviceregistration reg get service registration getserviceregistration inv msg invmsg get service d getserviceid reg illegal state exception illegalstateexception to string tostring nls nls inv msg invmsg get service d getserviceid nls services nls local services localservices serv reg invocation arguments local method object arguments inv msg invmsg get args getargs arguments length arguments input stream handle inputstreamhandle arguments get input stream proxy getinputstreamproxy input stream handle inputstreamhandle arguments arguments output stream handle outputstreamhandle arguments get output stream proxy getoutputstreamproxy output stream handle outputstreamhandle arguments method method serv get method getmethod inv msg invmsg get method signature getmethodsignature invoke method object result method invoke serv get service object getserviceobject arguments remote call result message remotecallresultmessage remote call result message remotecallresultmessage setxid inv msg invmsg getxid result input stream inputstream set result setresult get input stream placeholder getinputstreamplaceholder input stream inputstream result result output stream outputstream set result setresult get output stream placeholder getoutputstreamplaceholder output stream outputstream result set result setresult result invocation target exception invocationtargetexception print stack trace printstacktrace get target exception gettargetexception throwable print stack trace printstacktrace remote call result message remotecallresultmessage remote call result message remotecallresultmessage setxid inv msg invmsg getxid set exception setexception remoteosgimessage remote event remote event message remoteeventmessage event msg eventmsg remote event message remoteeventmessage msg dictionary properties event msg eventmsg get properties getproperties transform event times tamps timestamps remote ts remotets remote ts remotets properties event constants eventconstants timestamp properties event constants eventconstants timestamp get offset getoffset transform remote ts remotets event event event event msg eventmsg get topic gettopic properties deliver event local framework remote gi service impl remoteosgiserviceimpl event admin tracker eventadmintracker get tracking count gettrackingcount event admin eventadmin remote gi service impl remoteosgiserviceimpl event admin tracker eventadmintracker get service getservice post event postevent event todo log system err println nls deliver received event nls event event admin eventadmin remoteosgimessage time offset add timestamp message message sender time offset message timeoffsetmessage msg timestamp msg remoteosgimessage stream request stream request message streamrequestmessage req msg reqmsg stream request message streamrequestmessage msg fetch stream object object stream streams integer req msg reqmsg get stream d getstreamid stream illegal state exception illegalstateexception stream req msg reqmsg get stream d getstreamid invoke operation stream req msg reqmsg get op getop stream request message streamrequestmessage read result input stream inputstream stream read stream result message streamresultmessage stream result message streamresultmessage setxid req msg reqmsg getxid set result setresult result stream request message streamrequestmessage read array req msg reqmsg get len or val getlenorval len input stream inputstream stream read req msg reqmsg get len or val getlenorval stream result message streamresultmessage stream result message streamresultmessage setxid req msg reqmsg getxid set result setresult stream result message streamresultmessage result array set len setlen len len set data setdata stream request message streamrequestmessage write output stream outputstream stream write req msg reqmsg get len or val getlenorval stream result message streamresultmessage stream result message streamresultmessage setxid req msg reqmsg getxid set result setresult stream result message streamresultmessage result write stream request message streamrequestmessage write array output stream outputstream stream write req msg reqmsg get data getdata stream result message streamresultmessage stream result message streamresultmessage setxid req msg reqmsg getxid set result setresult stream result message streamresultmessage result write remoteosgiexception unimplemented code stream request msg i o exception ioexception stream result message streamresultmessage stream result message streamresultmessage setxid req msg reqmsg getxid set result setresult stream result message streamresultmessage result exception set exception setexception remoteosgimessage request bundle request bundle message requestbundlemessage req b reqb request bundle message requestbundlemessage msg string serviceid req b reqb get service d getserviceid remote service registration remoteserviceregistration reg get service registration getserviceregistration serviceid bytes remote gi service impl remoteosgiserviceimpl get bundle getbundle reg get reference getreference get bundle getbundle deliver bundles message deliverbundlesmessage del b delb deliver bundles message deliverbundlesmessage del b delb setxid req b reqb getxid del b delb set dependencies setdependencies bytes del b delb i o exception ioexception ioe ioe print stack trace printstacktrace remoteosgimessage request d ependencies dependencies request dependencies message requestdependenciesmessage req deps reqdeps request dependencies message requestdependenciesmessage msg bundle bytes bundlebytes remote gi service impl remoteosgiserviceimpl get bundles for packages getbundlesforpackages req deps reqdeps get packages getpackages deliver bundles message deliverbundlesmessage del deps deldeps deliver bundles message deliverbundlesmessage del deps deldeps setxid req deps reqdeps getxid del deps deldeps set dependencies setdependencies bundle bytes bundlebytes del deps deldeps i o exception ioexception ioe ioe print stack trace printstacktrace nls remoteosgiexception unimplemented message msg send message wait result param msg message result message remoteosgimessage send and wait sendandwait remoteosgimessage msg msg getxid msg setxid remote gi service impl remoteosgiserviceimpl next xid nextxid integer xid integer msg getxid waiting callback waitingcallback blocking waiting callback waitingcallback callbacks callbacks xid blocking send msg wait reply blocking timeout system current time millis currenttimemillis timeout remoteosgimessage result blocking get result getresult result network channel networkchannel system current time millis currenttimemillis timeout blocking wait timeout result blocking get result getresult interrupted exception interruptedexception remoteosgiexception interrupted waiting callback result result network channel networkchannel nls remoteosgiexception nls channel closed remoteosgiexception method invocation failed timeout exc eeded exceeded remote service registration service param serviceid serviceid remote service registration code code remote service registration remoteserviceregistration get service registration getserviceregistration string serviceid remote service registration remoteserviceregistration reg remote gi service impl remoteosgiserviceimpl get service registration getserviceregistration serviceid local services localservices serviceid reg reg populate lease message values param lease lease message param regs registrations param topics topics populate lease populatelease lease message leasemessage lease remote service registration remoteserviceregistration regs string topics string serviceids string regs length string service interfaces serviceinterfaces string regs length dictionary service properties serviceproperties dictionary regs length regs length serviceids string value of valueof regs get service d getserviceid service interfaces serviceinterfaces regs get interface names getinterfacenames service properties serviceproperties regs get properties getproperties lease set service ds setserviceids serviceids lease set service interfaces setserviceinterfaces service interfaces serviceinterfaces lease set service properties setserviceproperties service properties serviceproperties lease set topics settopics topics process lease message param lease lease message remote references remote service reference remoteservicereference process lease processlease lease message leasemessage lease string serviceids lease get service ds getserviceids string service interfaces serviceinterfaces lease get service interfaces getserviceinterfaces dictionary service properties serviceproperties lease get service properties getserviceproperties remote service reference impl remoteservicereferenceimpl remote service reference impl remoteservicereferenceimpl serviceids length serviceids length string serviceid serviceids string serviceuri get remote address getremoteaddress resolve serviceid to string tostring dictionary properties service properties serviceproperties sanitize service properties sanitizeserviceproperties properties serviceuri remote service reference impl remoteservicereferenceimpl service interfaces serviceinterfaces serviceid properties remote services remoteservices geturi to string tostring remote gi service impl remoteosgiserviceimpl notify remote service listeners notifyremoteservicelisteners remote service event remoteserviceevent remote service event remoteserviceevent registered update topics updatetopics lease get topics gettopics string sanitize service properties sanitizeserviceproperties dictionary properties string serviceuri adjust properties properties remoteosgiservice service uri serviceuri remove service pid properties remove constants service pid remove os gi osgi registration property properties remove remoteosgiservice os gi osgi registration remote ecf registration property nls properties remove org eclipse ecf service registration remote serviceregistrationremote perform stream operation param request msg requestmsg request message result message i o exception ioexception stream result message streamresultmessage do stream op dostreamop stream request message streamrequestmessage request msg requestmsg i o exception ioexception send message stream result message streamresultmessage stream result message streamresultmessage result stream result message streamresultmessage send and wait sendandwait request msg requestmsg result caused exception causedexception result get exception getexception result remoteosgiexception remoteosgiexception invocation operation request msg requestmsg get op getop stream request msg requestmsg get stream d getstreamid failed update topics param topics added topicsadded topics param topics removed topicsremoved topics removed update topics updatetopics string topics added topicsadded string topics removed topicsremoved handler reg handlerreg object topics added topicsadded list ignore topics added topicsadded topics added topicsadded length register handler dictionary properties hashtable properties event constants eventconstants event topic topics added topicsadded properties event constants eventconstants event filter loops properties remote gi service impl remoteosgiserviceimpl os gi osgi internal handler reg handlerreg remoteosgiactivator get activator getactivator get context getcontext register service registerservice event handler eventhandler get name getname event for war der eventforwarder properties remote topics remotetopics add all addall arrays as list aslist topics added topicsadded topics removed topicsremoved remote topics remotetopics remove all removeall arrays as list aslist topics removed topicsremoved topics added topicsadded remote topics remotetopics add all addall arrays as list aslist topics added topicsadded remote topics remotetopics size unregister handler handler reg handlerreg unregister handler reg handlerreg update topics dictionary properties hashtable properties event constants eventconstants event topic remote topics remotetopics to array toarray string remote topics remotetopics size properties event constants eventconstants event filter loops properties remote gi service impl remoteosgiserviceimpl os gi osgi internal handler reg handlerreg set properties setproperties properties remote gi service impl remoteosgiserviceimpl msg debug remote gi service impl remoteosgiserviceimpl log log log service logservice log debug nls nls remote topic space get remote address getremoteaddress remote topics remotetopics creates placeholder input stream inputstream party converted input stream inputstream proxy param origis instance input stream inputstream remote d remoted placeholder object actual client input stream handle inputstreamhandle get input stream placeholder getinputstreamplaceholder input stream inputstream origis input stream handle inputstreamhandle input stream handle inputstreamhandle next stream d nextstreamid streams integer get stream d getstreamid origis creates proxy input stream corresponds placeholder param placeholder placeholder remote input stream proxy input stream input stream inputstream get input stream proxy getinputstreamproxy input stream handle inputstreamhandle placeholder input stream proxy inputstreamproxy placeholder get stream d getstreamid creates placeholder output stream outputstream party converted output stream outputstream proxy param origos instance output stream outputstream remote d remoted placeholder object actual client output stream handle outputstreamhandle get output stream placeholder getoutputstreamplaceholder output stream outputstream origos output stream handle outputstreamhandle output stream handle outputstreamhandle next stream d nextstreamid streams integer get stream d getstreamid origos creates proxy output stream corresponds placeholder param placeholder placeholder remote output stream proxy output stream output stream outputstream get output stream proxy getoutputstreamproxy output stream handle outputstreamhandle placeholder output stream proxy outputstreamproxy placeholder get stream d getstreamid stream wrapper stream wrapper next stream d nextstreamid next stream d nextstreamid next stream d nextstreamid next stream d nextstreamid closes streams open close streams closestreams object streams values to array toarray length input stream inputstream input stream inputstream close output stream outputstream output stream outputstream close remote gi service impl remoteosgiserviceimpl log log log service logservice log warning object input streams map instance stream i o exception ioexception for wards forwards events channel remote peer author jan rellermeyer eth zurich category event handler eventhandler event for war der eventforwarder event handler eventhandler handle event param event event handle event handleevent event event remote event message remoteeventmessage msg remote event message remoteeventmessage msg set topic settopic event get topic gettopic string property names propertynames event get property names getpropertynames dictionary props hashtable property names propertynames length props property names propertynames event get property getproperty property names propertynames props remote event message remoteeventmessage event sender uri network channel networkchannel get local address getlocaladdress msg set properties setproperties props send msg remote gi service impl remoteosgiserviceimpl msg debug remote gi service impl remoteosgiserviceimpl log log log service logservice log debug for warding forwarding event event exception print stack trace printstacktrace callback sig nals signals result author jan rellermeyer waiting callback waitingcallback async callback asynccallback remoteosgimessage result result remoteosgimessage msg result msg notify all notifyall remoteosgimessage get result getresult result