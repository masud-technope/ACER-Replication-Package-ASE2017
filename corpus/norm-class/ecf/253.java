copyright remy suen comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors remy suen remy suen gmail initial api implementation org eclipse ecf protocol bittorrent internal net java io exception ioexception java unsupported encoding exception unsupportedencodingexception java net inet socket address inetsocketaddress java net socket java net socket exception socketexception java nio byte buffer bytebuffer java nio channels socket channel socketchannel java util arrays org eclipse ecf protocol bittorrent torrent configuration torrentconfiguration org eclipse ecf protocol bittorrent torrent file torrentfile org eclipse ecf protocol bittorrent internal encode decode org eclipse ecf protocol bittorrent internal encode encode org eclipse ecf protocol bittorrent internal torrent piece extension code thread code manage connection peer peer connection peerconnection thread choke unchoke interested array current user int erested interested pieces connected peer pos sesses possesses interested spec ially specially for med formed string created array represent string literal bit torrent bittorrent protocol led string zeros hand shaking handshaking process peer string protocol string string amount space all ocated allocated code byte buffer bytebuffer code buffer maximum code byte buffer bytebuffer code read data peer byte buffer bytebuffer buffer byte buffer bytebuffer all ocate allocate buffer maximum code byte buffer bytebuffer code sending data peer byte buffer bytebuffer send buffer sendbuffer byte buffer bytebuffer all ocate allocate buffer maximum connection pool connectionpool pool torrent manager torrentmanager manager downloads uploads handshake request block info blockinfo have messages havemessages socket channel socketchannel channel inet socket address inetsocketaddress address array code code track pieces peer peer pieces peerpieces version bit torrent bittorrent client peer code unknown code string client name clientname peer address string amount bytes downloaded peer downloaded amount bytes uploaded peer uploaded last down loaded lastdownloaded last uploaded lastuploaded port peer list ening listening port counter link downloads link uploads store amount data downloaded uploaded queue position queueposition client choking peer code code is choking ischoking client int erested interested piece peer code code is int erested isinterested peer choking client code code peer is choking peerischoking peer int erested interested piece client code code peer is int erested peerisinterested identifies peer see d seed peer is see d peerisseed initialized choke message peer send choke sendchoke unchoke message peer send unchoke sendunchoke peer connection peerconnection connection pool connectionpool pool torrent manager torrentmanager manager unsupported encoding exception unsupportedencodingexception pool pool manager manager torrent file torrentfile torrent manager get torrent file gettorrentfile string buffer stringbuffer buffer string buffer stringbuffer protocol string buffer buffer append torrent get info hash getinfohash buffer append manager get peer d getpeerid nls handshake buffer to string tostring get bytes getbytes iso peer pieces peerpieces torrent get num pieces getnumpieces have messages havemessages peer pieces peerpieces length arrays fill peer pieces peerpieces arrays fill have messages havemessages set address setaddress string port address inet socket address inetsocketaddress port port port set channel setchannel socket channel socketchannel channel channel channel socket socket channel socket socket get local address getlocaladdress get host address gethostaddress port socket get local port getlocalport connect peer exc hange exchange hand shakes handshakes connection created depending incoming out going outgoing connection established connect channel call answer io exception ioexception string message get message getmessage torrent configuration torrentconfiguration debug connection port closed message message runtime exception runtimeexception close close call io exception ioexception channel socket channel socketchannel open address address socket exception socketexception torrent configuration torrentconfiguration debug unable connect port get message getmessage torrent configuration torrentconfiguration debug nls established out going outgoing connection nls port send handshake sendhandshake read ret bytes retrieved read channel ret channel read buffer ret nls nls torrent configuration torrentconfiguration debug stream reached port read ret torrent configuration torrentconfiguration debug nls received handshake message nls port client system arraycopy buffer array client process client name processclientname string client check data handshake read reading additional bytes read read channel ret channel read buffer ret nls nls torrent configuration torrentconfiguration debug stream reached port read ret buffer read channel ret channel read buffer ret nls nls torrent configuration torrentconfiguration debug stream reached port read ret check read bitfield buffer length buffer reading entire bitfield read read length channel ret channel read buffer ret nls nls torrent configuration torrentconfiguration debug stream reached port read ret buffer flip array read buffer array read process bit field processbitfield array array read length send bit field sendbitfield buffer bytes buffer bytes read array system arraycopy bytes array process message processmessage array buffer buffer buffer torrent configuration torrentconfiguration debug received keepalive message nls port torrent configuration torrentconfiguration debug received unidentifiable message nls port send bit field sendbitfield buffer clear enter main loop query answer io exception ioexception torrent configuration torrentconfiguration debug nls established incoming connection nls port send handshake sendhandshake send bit field sendbitfield query query io exception ioexception torrent configuration torrentconfiguration debug nls nls entering main loop port array read ret channel channel is connected isconnected buffer clear send queue d messages sendqueuedmessages read buffer array bufferarray buffer array bytes buffer array bufferarray length system arraycopy buffer array bufferarray read bytes buffer array bufferarray length read buffer bytes buffer position read request send request sendrequest manager request peer pieces peerpieces length request request reset buffer resetbuffer read channel ret channel read buffer ret nls nls torrent configuration torrentconfiguration debug stream reached port manager update down load request speed updatedownloadrequestspeed ret limit buffer limitbuffer manager get down load request speed getdownloadrequestspeed read ret buffer limit buffer maximum buffer rewind array array read buffer array read bytes array length read system arraycopy array bytes array length buffer bytes array length read array bytes array array array array torrent configuration torrentconfiguration debug nls received keepalive nls nls port array truncate array read array array length array array process message processmessage array array truncate array read array array array length buffer clear read channel ret channel read buffer ret torrent configuration torrentconfiguration debug nls nls stream reached nls nls port read ret bytes read system arraycopy array bytes array length buffer flip buffer bytes array length read array length array bytes process have message processhavemessage array array truncate array read array length array read length channel ret channel read buffer ret nls nls torrent configuration torrentconfiguration debug stream reached port read ret array length read bytes read system arraycopy array bytes array length buffer flip buffer bytes array length read array length array bytes process bit field processbitfield array length array truncate array length read length array array array length buffer clear read channel ret channel read buffer ret torrent configuration torrentconfiguration debug nls nls stream reached nls nls port read ret bytes read system arraycopy array bytes array length buffer flip buffer bytes array length read array length array bytes process request processrequest array imp roper improper request close array truncate array read array buffer array bufferarray buffer array length decode decode four byte number decodefourbytenumber array offset array length offset length bytes length system arraycopy array bytes offset array bytes reset buffer resetbuffer buffer clear start read read length channel ret channel read buffer ret nls nls torrent configuration torrentconfiguration debug stream reached port expand array length offset ret array length bytes offset ret system arraycopy array bytes array length array bytes system arraycopy buffer array bufferarray array offset ret manager update down load request speed updatedownloadrequestspeed ret buffer rewind limit buffer limitbuffer manager get down load request speed getdownloadrequestspeed offset ret read ret buffer limit buffer maximum array length read bytes read system arraycopy array bytes array length buffer position start buffer bytes array length read array length array bytes process piece processpiece array array truncate array length read length array todo implement processing cancel messages array truncate array read array todo implement processing port messages array truncate array read torrent configuration torrentconfiguration debug nls nls array encountered closing connection nls nls port truncate array length array length length bytes array length length system arraycopy array length bytes bytes length bytes reset buffer resetbuffer maximum manager get down load request speed getdownloadrequestspeed maximum buffer limit limit buffer limitbuffer maximum limit buffer limitbuffer maximum maximum current limit currentlimit buffer limit maximum current limit currentlimit buffer maximum buffer limit buffer maximum buffer limit current limit currentlimit maximum buffer limit sleep chances rotation causing unnecessarily loop thread sleep interrupted exception interruptedexception process client name processclientname string peerid peerid char at charat string client peerid substring string version nls nls peerid char at charat peerid char at charat peerid char at charat nls nls peerid char at charat nls client equals client name clientname nls arctic nls version nls client equals client name clientname nls bit p ump bitpump nls version nls client equals client name clientname nls azureus nls version nls client equals client name clientname nls bit buddy bitbuddy nls version nls client equals client name clientname nls bit comet bitcomet nls version nls client equals client name clientname nls bt slave btslave nls version nls client equals client name clientname nls bit torrent bittorrent nls version nls client equals client name clientname nls enhanced c torrent ctorrent nls version nls client equals client name clientname nls c torrent ctorrent nls version nls client equals client name clientname nls lphant nls version nls client equals client name clientname nls lib torrent libtorrent nls version nls client equals client name clientname nls lib torrent libtorrent nls version nls client equals client name clientname nls moo p olice moopolice nls version nls client equals client name clientname nls moo nlight torrent moonlighttorrent nls version nls client equals client name clientname nls torrent nls version nls client equals client name clientname nls retriever nls version nls client equals client name clientname nls swiftbit nls version nls client equals client name clientname nls s warm scope swarmscope nls version nls client equals client name clientname nls shareaza nls version nls client equals client name clientname nls torrent dot net torrentdotnet nls version nls client equals client name clientname nls transmission nls version nls client equals client name clientname nls torrent s tor m torrentstorm nls version nls client equals client name clientname nls âµtorrent nls version nls client equals client name clientname nls xan torrent xantorrent nls version nls client equals client name clientname nls zip torrent ziptorrent nls version nls client name clientname nls unknown client name clientname nls nls abc peerid char at charat peerid char at charat nls nls peerid char at charat client name clientname nls nls main line mainline peerid char at charat peerid char at charat nls nls peerid char at charat client name clientname nls nls osprey per maseed permaseed peerid char at charat peerid char at charat nls nls peerid char at charat client name clientname nls nls tribler peerid char at charat peerid char at charat nls nls peerid char at charat client name clientname nls nls shadow client peerid char at charat peerid char at charat nls nls peerid char at charat client name clientname nls nls bit torn ado bittornado peerid char at charat peerid char at charat nls nls peerid char at charat client name clientname nls nls up n p upnp nat bit torrent peerid char at charat peerid char at charat nls nls peerid char at charat nls client name clientname unknown process message processmessage array io exception ioexception array torrent configuration torrentconfiguration debug nls received choke message nls nls port peer is choking peerischoking torrent configuration torrentconfiguration debug nls received unchoke message nls nls port peer is choking peerischoking torrent configuration torrentconfiguration debug nls received interested message nls nls port peer is int erested peerisinterested peer is int erested peerisinterested pool check unchoke checkunchoke send unchoke sendunchoke torrent configuration torrentconfiguration debug received interested message nls port peer is int erested peerisinterested peer is int erested peerisinterested is choking ischoking pool unchoked peer cleared unchokedpeercleared send choke sendchoke process bit field processbitfield array offset has piece haspiece offset count peer offset bit decode decode signed byte decodesignedbyte array has piece haspiece count bit has piece haspiece count bit has piece haspiece count bit has piece haspiece count bit has piece haspiece count bit has piece haspiece count bit has piece haspiece count bit has piece haspiece count bit system arraycopy has piece haspiece peer pieces peerpieces peer pieces peerpieces length torrent configuration torrentconfiguration debug nls received bitfield message nls port manager add piece availability addpieceavailability peer pieces peerpieces peer pieces peerpieces length peer pieces peerpieces peer is see d peerisseed process have message processhavemessage array piece decode decode four byte number decodefourbytenumber array peer pieces peerpieces piece peer pieces peerpieces piece manager update piece availability updatepieceavailability piece torrent configuration torrentconfiguration debug nls received piece piece message nls nls port peer pieces peerpieces length peer pieces peerpieces peer is see d peerisseed process piece processpiece array io exception ioexception piece decode decode four byte number decodefourbytenumber array decode decode four byte number decodefourbytenumber array length decode decode four byte number decodefourbytenumber array manager write piece array length downloaded length torrent configuration torrentconfiguration debug nls received piece data piece nls nls length message nls nls port process request processrequest array io exception ioexception piece decode decode four byte number decodefourbytenumber array decode decode four byte number decodefourbytenumber array length decode decode four byte number decodefourbytenumber array is choking ischoking torrent configuration torrentconfiguration debug nls ignoring request piece piece nls nls length message nls nls port peer choked torrent configuration torrentconfiguration debug nls received request piece piece nls nls length message nls nls port length torrent configuration torrentconfiguration debug nls req uesting requesting length bytes violates standard maximum amount connection nls nls port closed block manager get piece data getpiecedata piece length block encode put integer as four bytes putintegerasfourbytes block info blockinfo length encode put integer as four bytes putintegerasfourbytes block info blockinfo piece encode put integer as four bytes putintegerasfourbytes block info blockinfo send buffer sendbuffer block info blockinfo block length blocklength block length offset remaining send buffer sendbuffer remaining write manager get upload request speed getuploadrequestspeed write write limit simply amount write length block write block length blocklength write write block length blocklength write block length blocklength write remaining write remaining write offset block length blocklength write thread sleep interrupted exception interruptedexception send buffer sendbuffer block offset write send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear offset write manager update upload request speed updateuploadrequestspeed write uploaded write manager add to uploaded addtouploaded write write manager get upload request speed getuploadrequestspeed write remaining block length blocklength offset write write remaining write write remaining write remaining remaining send buffer sendbuffer remaining write remaining write remaining write torrent configuration torrentconfiguration debug nls nls piece data piece length message nls nls nls port send handshake sendhandshake io exception ioexception send buffer sendbuffer handshake send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear torrent configuration torrentconfiguration debug nls nls handshake message port send bit field sendbitfield io exception ioexception bitfield manager get bit field getbitfield has piece haspiece bitfield length bitfield has piece haspiece peer has piece haspiece header encode put integer as four bytes putintegerasfourbytes header bitfield length send buffer sendbuffer header send buffer sendbuffer manager get bit field getbitfield send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear torrent configuration torrentconfiguration debug nls nls bitfield message port send request sendrequest piece piece io exception ioexception piece send not int erested sendnotinterested peer is choking peerischoking send int erested sendinterested piece get request information getrequestinformation piece manager request peer pieces peerpieces piece send not int erested sendnotinterested piece get request information getrequestinformation encode place request information placerequestinformation request send buffer sendbuffer request send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear torrent configuration torrentconfiguration debug nls request piece nls nls nls message nls nls port s ends sends queue d queued messages connected peer info rm inform io exception ioexception error occurs sending messages peer send queue d messages sendqueuedmessages io exception ioexception have messages havemessages length have messages havemessages encode put integer as four bytes putintegerasfourbytes send buffer sendbuffer send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear torrent configuration torrentconfiguration debug nls piece nls message nls nls port have messages havemessages send choke sendchoke send choke sendchoke send choke sendchoke send unchoke sendunchoke send unchoke sendunchoke send unchoke sendunchoke s ends sends message peer client int erested interested peer offer io exception ioexception error occurs sending message send int erested sendinterested io exception ioexception is int erested isinterested send buffer sendbuffer interested send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear is int erested isinterested torrent configuration torrentconfiguration debug nls interested message nls nls port s ends sends message peer client int erested interested peer offer io exception ioexception error occurs sending message send not int erested sendnotinterested io exception ioexception is int erested isinterested send buffer sendbuffer interested send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear is int erested isinterested torrent configuration torrentconfiguration debug nls interested message nls nls port s ends sends choke message peer piece requests discarded io exception ioexception error occurs writing message peer send choke sendchoke io exception ioexception is choking ischoking send buffer sendbuffer choke send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear is choking ischoking torrent configuration torrentconfiguration debug nls nls choke message port s ends sends unchoke message peer info rm inform piece requests honoured io exception ioexception error occurs writing message peer send unchoke sendunchoke io exception ioexception is choking ischoking send buffer sendbuffer unchoke send buffer sendbuffer flip channel write send buffer sendbuffer send buffer sendbuffer clear is choking ischoking torrent configuration torrentconfiguration debug nls unchoke message nls nls port resets instance values connection bridge d bridged thread remnants connection reset queue position queueposition downloaded uploaded arrays fill downloads arrays fill uploads is int erested isinterested is choking ischoking peer is int erested peerisinterested peer is choking peerischoking peer is see d peerisseed arrays fill peer pieces peerpieces send choke sendchoke send unchoke sendunchoke arrays fill have messages havemessages nls client name clientname unknown cleanup pool connection closed connectionclosed is choking ischoking pool unchoked peer cleared unchokedpeercleared initialized closes connection code io exception ioexception code thrown closing connection peer close channel reset channel close io exception ioexception channel manager remove piece availability removepieceavailability peer pieces peerpieces is choking ischoking is choking ischoking is connected to isconnectedto string port port port equals returns connected peer see d seed identify connection cut download completed see d seed connected see d seed code code connected peer see d seed code code is see d isseed peer is see d peerisseed queues piece needing message connected peer param number number piece completed illegal argument exception illegalargumentexception negative piece number piece number number pieces queue have message queuehavemessage number illegal argument exception illegalargumentexception number nls illegal argument exception illegalargumentexception piece number negative number peer pieces peerpieces length nls illegal argument exception illegalargumentexception piece number greater number pieces have messages havemessages number queue choke message queuechokemessage send unchoke sendunchoke queue unchoke message queueunchokemessage send choke sendchoke get down loaded getdownloaded downloaded get uploaded getuploaded uploaded get down speed getdownspeed total down totaldown total down totaldown downloads total down totaldown get up speed getupspeed total up totalup total up totalup uploads total up totalup queue speeds queuespeeds queue position queueposition queue position queueposition downloads queue position queueposition downloaded last down loaded lastdownloaded uploads queue position queueposition uploaded last uploaded lastuploaded last down loaded lastdownloaded downloaded last uploaded lastuploaded uploaded queue position queueposition string get client name getclientname client name clientname is initialized isinitialized initialized finalize close connection info connectioninfo info pool dequeue info pool connection destroyed connectiondestroyed initialized info is channel ischannel set channel setchannel info get channel getchannel set address setaddress info getip info get port getport pool connection created connectioncreated connect cleanup pool is connected isconnected pool pool wait interrupted exception interruptedexception pool connection destroyed connectiondestroyed info pool dequeue info pool connection destroyed connectiondestroyed runtime exception runtimeexception cleanup pool connection destroyed connectiondestroyed