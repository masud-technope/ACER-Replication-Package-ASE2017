copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf remote service remoteservice java lang reflect java util java util concurrent org eclipse core runtime org eclipse ecf core jobs jobs executor jobsexecutor org eclipse ecf core util ecf exception ecfexception org eclipse ecf internal remote service remoteservice activator org eclipse ecf remote service remoteservice async proxy asyncproxy org eclipse ecf remote service remoteservice events i remote call complete event iremotecallcompleteevent org eclipse ecf remote service remoteservice events i remote call event iremotecallevent org eclipse equinox concurrent org osgi framework bundle context bundlecontext org osgi framework service exception serviceexception org osgi util tracker service tracker servicetracker provider type providertype abstract remote service abstractremoteservice abstract async proxy remote service abstractasyncproxyremoteservice i remote service iremoteservice invocation handler invocationhandler object empty args object nls nls future executor service max threads futureexecutorservicemaxthreads integer parse int parseint system get property getproperty ecf remote service remoteservice future executor service max threads futureexecutorservicemaxthreads executor service executorservice future executor service futureexecutorservice executor service executorservice get future executor service getfutureexecutorservice i remote call iremotecall call future executor service futureexecutorservice future executor service futureexecutorservice exec utors executors new fixed thread pool newfixedthreadpool future executor service max threads futureexecutorservicemaxthreads future executor service futureexecutorservice set future executor service setfutureexecutorservice executor service executorservice executor service executorservice future executor service futureexecutorservice executor service executorservice i executor iexecutor i future executor ifutureexecutor i executor iexecutor get future executor getifutureexecutor i remote call iremotecall call i future executor ifutureexecutor nls nls i future executor ifutureexecutor jobs executor jobsexecutor rs jobs rsjobs rsid get remote service d getremoteserviceid i future executor ifutureexecutor set future executor setifutureexecutor i executor iexecutor executor i future executor ifutureexecutor executor string get interface class names getinterfaceclassnames i remote service d iremoteserviceid get remote service d getremoteserviceid i remote service reference iremoteservicereference get remote service reference getremoteservicereference load interface class loadinterfaceclass string class name classname class not found exception classnotfoundexception load interface class loadinterfaceclass get class getclass get class loader getclassloader class name classname load interface class loadinterfaceclass class loader classloader string class name classname class not found exception classnotfoundexception for name forname class name classname i remote service iremoteservice get remote service getremoteservice get default timeout getdefaulttimeout i remote call iremotecall timeout override i future ifuture call async callasync abstract async proxy remote call abstractasyncproxyremotecall call call async callasync i remote call iremotecall call i future ifuture call async callasync i remote call iremotecall call i executor iexecutor executor get future executor getifutureexecutor call executor nls service exception serviceexception i future ifuture executor call async callasync remote method call get method getmethod executor execute i progress runnable iprogressrunnable object i progress monitor iprogressmonitor monitor exception call sync callsync call suppress warnings suppresswarnings unchecked object get proxy getproxy ecf exception ecfexception list classes array list arraylist class loader classloader get class getclass get class loader getclassloader clazz reference string clazzes get interface class names getinterfaceclassnames clazzes length classes add load interface class loadinterfaceclass clazzes exception ecf exception ecfexception ecf exception ecfexception failed create proxy log warning logwarning exception remote service get proxy getproxy no class def found error noclassdeffounderror ecf exception ecfexception ecf exception ecfexception failed load proxy log warning logwarning load get proxy getproxy get proxy getproxy classes to array toarray classes size add remote service proxy to proxy addremoteserviceproxytoproxy list classes i remote service reference iremoteservicereference rs reference rsreference get remote service reference getremoteservicereference add i remote service proxy iremoteserviceproxy interfaces supported proxy rs reference rsreference rs reference rsreference get property getproperty constants service prevent rsproxy classes add i remote service proxy iremoteserviceproxy name already present namealreadypresent string class name classname list classes iterator classes iterator has next hasnext class name classname equals get name getname list add async proxy classes addasyncproxyclasses class loader classloader interfaces list int fs intfs arrays as list aslist interfaces list array list arraylist get remote service reference getremoteservicereference get property getproperty constants service prevent async proxy asyncproxy iterator int fs intfs iterator has next hasnext int f intf string int f name intfname convert interface name to async interface name convertinterfacenametoasyncinterfacename int f intf get name getname int f name intfname name already present namealreadypresent int f name intfname int fs intfs async class asyncclass find async remote service proxy class findasyncremoteserviceproxyclass int f intf add async async class asyncclass int fs intfs async class asyncclass add async class asyncclass add all addall int fs intfs suppress warnings suppresswarnings unchecked object get proxy getproxy class loader classloader interfaces ecf exception ecfexception add async list classes add async proxy classes addasyncproxyclasses interfaces add remote service proxy to proxy addremoteserviceproxytoproxy classes create proxy create proxy createproxy classes to array toarray classes size exception ecf exception ecfexception ecf exception ecfexception failed create proxy log warning logwarning exception remote service get proxy getproxy no class def found error noclassdeffounderror ecf exception ecfexception ecf exception ecfexception failed load proxy log warning logwarning load get proxy getproxy proxy class loader proxyclassloader class loader classloader class loader classloader proxy class loader proxyclassloader class loader classloader load class loadclass string class not found exception classnotfoundexception load class loadclass class not found exception classnotfoundexception activator activator get default getdefault bundle context bundlecontext context get context getcontext context context get bundle getbundle load class loadclass i remote service proxy creator iremoteserviceproxycreator get remote service proxy creator getremoteserviceproxycreator service tracker servicetracker service tracker servicetracker activator get default getdefault get context getcontext i remote service proxy creator iremoteserviceproxycreator open i remote service proxy creator iremoteserviceproxycreator result i remote service proxy creator iremoteserviceproxycreator get service getservice close result object create proxy createproxy class loader classloader classes i remote service proxy creator iremoteserviceproxycreator proxy creator proxycreator get remote service proxy creator getremoteserviceproxycreator proxy creator proxycreator proxy creator proxycreator create proxy createproxy proxy class loader proxyclassloader classes proxy new proxy instance newproxyinstance proxy class loader proxyclassloader classes object create proxy createproxy classes create proxy createproxy get class getclass get class loader getclassloader classes find async remote service proxy class findasyncremoteserviceproxyclass string proxy class name proxyclassname convert interface name to async interface name convertinterfacenametoasyncinterfacename get name getname for name forname proxy class name proxyclassname class not found exception classnotfoundexception log info loginfo async remote service proxy class name proxyclassname proxy service get name getname no class def found error noclassdeffounderror log warning logwarning async remote service proxy class name proxyclassname loaded proxy service get name getname find async remote service proxy class findasyncremoteserviceproxyclass class loader classloader string proxy class name proxyclassname convert interface name to async interface name convertinterfacenametoasyncinterfacename get name getname proxy class name proxyclassname for name forname proxy class name proxyclassname class not found exception classnotfoundexception no class def found error noclassdeffounderror log warning logwarning async remote service proxy class name proxyclassname loaded proxy service get name getname string convert interface name to async interface name convertinterfacenametoasyncinterfacename string interface name interfacename interface name interfacename string async proxy name asyncproxyname string get remote service reference getremoteservicereference get property getproperty constants service async rsproxy interface name interfacename async proxy name asyncproxyname async proxy name asyncproxyname interface name interfacename ends with endswith i async remote service proxy iasyncremoteserviceproxy async suffix interface name interfacename interface name interfacename i async remote service proxy iasyncremoteserviceproxy async suffix object get call parameters for proxy invoke getcallparametersforproxyinvoke string call method callmethod method proxy method proxymethod object args args empty args args get call timeout for proxy invoke getcalltimeoutforproxyinvoke string call method callmethod method proxy method proxymethod object args i remote call iremotecall timeout string get call method name for proxy invoke getcallmethodnameforproxyinvoke method method object args method get name getname object invoke object invokeobject object proxy method method object args throwable string method name methodname method get name getname nls method name methodname equals to string tostring string clazzes get interface class names getinterfaceclassnames string proxy class proxyclass clazzes length clazzes arrays as list aslist clazzes to string tostring nls proxy class proxyclass proxy get remote service d getremoteserviceid nls method name methodname equals hash code hashcode integer hash code hashcode nls method name methodname equals equals args args length proxy get invocation handler getinvocationhandler args equals illegal argument exception illegalargumentexception handles i remote service proxy iremoteserviceproxy get remote service getremoteservice method nls method name methodname equals get remote service getremoteservice get remote service getremoteservice nls method name methodname equals get remote service reference getremoteservicereference get remote service reference getremoteservicereference object invoke sync invokesync i remote call iremotecall call ecf exception ecfexception call sync callsync call is async isasync object proxy method method object args arrays as list aslist method get declaring class getdeclaringclass get interfaces getinterfaces i async remote service proxy iasyncremoteserviceproxy method get name getname ends with endswith i async remote service proxy iasyncremoteserviceproxy async method suffix i remote call iremotecall create remote call createremotecall string call method callmethod object call parameters callparameters call timeout calltimeout i remote call iremotecall string get method getmethod call method callmethod object get parameters getparameters call parameters callparameters get timeout gettimeout call timeout calltimeout handle proxy exception handleproxyexception string message throwable service exception serviceexception service exception serviceexception service exception serviceexception service exception serviceexception message service exception serviceexception remote handle invoke sync exception handleinvokesyncexception string method name methodname ecf exception ecfexception throwable throwable get cause getcause invocation target exception invocationtargetexception invocation target exception invocationtargetexception get target exception gettargetexception service exception serviceexception service exception serviceexception runtime exception runtimeexception nls nls service exception serviceexception runtime exception runtimeexception method method name methodname remote service proxy get remote service d getremoteserviceid service exception serviceexception remote no class def found error noclassdeffounderror nls nls service exception serviceexception remote no class def found error noclassdeffounderror method method name methodname remote service proxy get remote service d getremoteserviceid service exception serviceexception remote nls nls service exception serviceexception unexpected exception method method name methodname remote service proxy get remote service d getremoteserviceid service exception serviceexception remote object invoke object proxy method method object args throwable object result object resultobject method object i remote service proxy iremoteserviceproxy result invoking proxy result object resultobject invoke object invokeobject proxy method args throwable handle proxy exception handleproxyexception exception invoking local object method remote service proxy get remote service d getremoteserviceid result object resultobject result object resultobject is async isasync proxy method args invoke async invokeasync method args throwable handle proxy exception handleproxyexception exception invoking async method remote service proxy get remote service d getremoteserviceid call method callmethod call parameters callparameters call timeout calltimeout string call method callmethod get call method name for proxy invoke getcallmethodnameforproxyinvoke method args object call parameters callparameters get call parameters for proxy invoke getcallparametersforproxyinvoke call method callmethod method args call timeout calltimeout get call timeout for proxy invoke getcalltimeoutforproxyinvoke call method callmethod method args create i remote call iremotecall instance method parameters timeout i remote call iremotecall remote call remotecall create remote call createremotecall call method callmethod call parameters callparameters call timeout calltimeout invoke sync hronously synchronously invoke sync invokesync remote call remotecall ecf exception ecfexception handle invoke sync exception handleinvokesyncexception method get name getname async args asyncargs i remote call listener iremotecalllistener listener object args return type returntype async args asyncargs object original args originalargs return type returntype listener args original args originalargs return type returntype return type returntype async args asyncargs i remote call listener iremotecalllistener listener object original args originalargs listener listener listener async h args length asynchargslength original args originalargs length args object async h args length asynchargslength system arraycopy original args originalargs args async h args length asynchargslength args original args originalargs i remote call listener iremotecalllistener get listener getlistener listener object get args getargs args get return type getreturntype return type returntype remote call remotecall get async remote call getasyncremotecall string invoke method name invokemethodname object async args asyncargs remote call remotecall invoke method name invokemethodname async args asyncargs i remote call iremotecall timeout object invoke async invokeasync method method object args throwable string invoke method name invokemethodname get async invoke method name getasyncinvokemethodname method async args asyncargs async args asyncargs get async args getasyncargs method args remote call remotecall remote call remotecall get async remote call getasyncremotecall invoke method name invokemethodname async args asyncargs get args getargs i remote call listener iremotecalllistener listener async args asyncargs get listener getlistener listener call async with result callasyncwithresult remote call remotecall listener call future callfuture remote call remotecall async args asyncargs get return type getreturntype object call async with result callasyncwithresult i remote call iremotecall call i remote call listener iremotecalllistener listener call async callasync call listener override call comp let able async callcompletableasync abstract async proxy remote call abstractasyncproxyremotecall call i async proxy comp let able iasyncproxycompletable comp let able completable call async callasync i remote call iremotecall call i remote call listener iremotecalllistener handle event handleevent i remote call event iremotecallevent event event i remote call complete event iremotecallcompleteevent i remote call complete event iremotecallcompleteevent cce i remote call complete event iremotecallcompleteevent event comp let able completable handle complete handlecomplete cce get response getresponse cce had exception hadexception cce get exception getexception override call future async callfutureasync abstract async proxy remote call abstractasyncproxyremotecall call call future async callfutureasync i remote call iremotecall call call future async callfutureasync i remote call iremotecall call executor service executorservice executor service executorservice get future executor service getfutureexecutorservice call executor service executorservice nls service exception serviceexception executor service call async callasync remote method call get method getmethod executor service executorservice sub mit submit callable object call exception call sync callsync call async args asyncargs get async args getasyncargs method method object args i remote call listener iremotecalllistener listener return type returntype method get return type getreturntype type type java util concurrent is assignable from isassignablefrom return type returntype i future ifuture is assignable from isassignablefrom return type returntype async args asyncargs args return type returntype args include i remote call listener iremotecalllistener problem args args length nls illegal argument exception illegalargumentexception async calls include i remote call listener iremotecalllistener instance argument arg object last arg lastarg args args length i remote call listener iremotecalllistener impl ementer implementer last arg lastarg i remote call listener iremotecalllistener listener i remote call listener iremotecalllistener last arg lastarg callback last arg lastarg i async callback iasynccallback listener callback remote call listener callbackremotecalllistener i async callback iasynccallback last arg lastarg instance i remote call listener iremotecalllistener problem listener nls illegal argument exception illegalargumentexception argument instance i remote call listener iremotecalllistener async args asyncargs listener args string get async invoke method name getasyncinvokemethodname method method string method name methodname method get name getname method name methodname ends with endswith i async remote service proxy iasyncremoteserviceproxy async method suffix method name methodname substring method name methodname length i async remote service proxy iasyncremoteserviceproxy async method suffix length method name methodname log info loginfo string message throwable activator activator get default getdefault log status i status istatus info activator plugin message log warning logwarning string string throwable activator activator get default getdefault log status i status istatus warning activator plugin string dispose future executor service futureexecutorservice future executor service futureexecutorservice shutdown now shutdownnow future executor service futureexecutorservice i future executor ifutureexecutor