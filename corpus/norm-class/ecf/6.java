copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html org eclipse ecf internal examples load balancing loadbalancing server org eclipse ecf core i container icontainer org eclipse ecf core i container manager icontainermanager org eclipse ecf examples load balancing loadbalancing i data processor idataprocessor org eclipse ecf remote service remoteservice i remote service container adapter iremoteservicecontaineradapter org eclipse ecf remote service remoteservice i remote service registration iremoteserviceregistration org eclipse equinox app i application iapplication org eclipse equinox app i application context iapplicationcontext org osgi framework bundle context bundlecontext org osgi util tracker service tracker servicetracker data processor server application dataprocessorserverapplication i application iapplication string server container type ecf jms active mq activemq tcp server string queue tcp localhost example queue examplequeue bundle context bundlecontext bundle context bundlecontext service tracker servicetracker container manager service tracker containermanagerservicetracker string container type containertype server container type queue attach queue message consumer receiver actual remote method invocation requests note queue id queueid changed queue id queueid launch parameter queue id queueid tcp localhost my queue name myqueuename string queue id queueid queue container instance conn ects connects activemq queue message consumer i container icontainer container i data processor idataprocessor service implementation object receives actual remote method calls executes arbitrary code returns result data processor impl dataprocessorimpl data processor impl dataprocessorimpl remote service registration data processor impl dataprocessorimpl i remote service registration iremoteserviceregistration data processor remote service registration dataprocessorremoteserviceregistration object start i application context iapplicationcontext app context appcontext exception bundle context bundlecontext activator get context getcontext process arguments queue id queueid process args processargs app context appcontext create container connect queue id queueid message consumer container get container manager service getcontainermanagerservice get container factory getcontainerfactory create container createcontainer container type containertype object queue id queueid remote service container adapter i remote service container adapter iremoteservicecontaineradapter remote service container adapter remoteservicecontaineradapter i remote service container adapter iremoteservicecontaineradapter container get adapter getadapter i remote service container adapter iremoteservicecontaineradapter create data processor implementation data processor impl dataprocessorimpl data processor impl dataprocessorimpl container getid register data processor remote services queue consumer container data processor remote service registration dataprocessorremoteserviceregistration remote service container adapter remoteservicecontaineradapter register remote service registerremoteservice string i data processor idataprocessor get name getname data processor impl dataprocessorimpl report success registration system println server data processor registered queue queue id queueid wait service requests wait for done waitfordone i application iapplication exit data processor remote service registration dataprocessorremoteserviceregistration data processor remote service registration dataprocessorremoteserviceregistration unregister data processor remote service registration dataprocessorremoteserviceregistration data processor impl dataprocessorimpl data processor impl dataprocessorimpl data processor impl dataprocessorimpl container container dispose container get container manager service getcontainermanagerservice remove all containers removeallcontainers container manager service tracker containermanagerservicetracker container manager service tracker containermanagerservicetracker close container manager service tracker containermanagerservicetracker bundle context bundlecontext app lock applock app lock applock notify all notifyall process args processargs i application context iapplicationcontext app context appcontext string original args originalargs string app context appcontext get arguments getarguments application args original args originalargs original args originalargs length original args originalargs equals queue id queueid queue id queueid original args originalargs original args originalargs equals container type containertype container type containertype original args originalargs i container manager icontainermanager get container manager service getcontainermanagerservice container manager service tracker containermanagerservicetracker container manager service tracker containermanagerservicetracker service tracker servicetracker bundle context bundlecontext i container manager icontainermanager get name getname container manager service tracker containermanagerservicetracker open i container manager icontainermanager container manager service tracker containermanagerservicetracker get service getservice object app lock applock object wait for done waitfordone wait app lock applock app lock applock wait interrupted exception interruptedexception