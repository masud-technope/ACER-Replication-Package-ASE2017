copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html org eclipse ecf internal examples load balancing loadbalancing service host servicehost java util properties org eclipse ecf core i container icontainer org eclipse ecf core i container manager icontainermanager org eclipse ecf examples load balancing loadbalancing i data processor idataprocessor org eclipse ecf remote service remoteservice constants org eclipse ecf remote service remoteservice i remote service container adapter iremoteservicecontaineradapter org eclipse ecf remote service remoteservice i remote service registration iremoteserviceregistration org eclipse equinox app i application iapplication org eclipse equinox app i application context iapplicationcontext org osgi framework bundle context bundlecontext org osgi util tracker service tracker servicetracker data processor service host application dataprocessorservicehostapplication i application iapplication string svchost container type ecf jms active mq activemq tcp manager svc host svchost string queue tcp localhost example queue examplequeue string topic tcp localhost example topic exampletopic bundle context bundlecontext bundle context bundlecontext service tracker servicetracker container manager service tracker containermanagerservicetracker string container type containertype svchost container type jms queue uri attach queue message producer issue actual remote method invocation requests server consume rs consumers note queue id queueid changed queue id queueid launch parameter queue id queueid tcp myjmdnsbrokerdnsname my queue name myqueuename string queue id queueid queue jms topic uri register remote service registrations service consume rs consumers lookup remote services note topic id topicid changed topic id topicid launch parameter topic id topicid tcp myjmdnsbrokerdnsname my topic name mytopicname string topic id topicid topic container instance conn ects connects activemq queue message producer pub lishes publishes service topic id topicid i container icontainer container service host remote service registration simply unregister service application stopped i remote service registration iremoteserviceregistration data processor service host registration dataprocessorservicehostregistration object start i application context iapplicationcontext app context appcontext exception bundle context bundlecontext activator get context getcontext process arguments queue id queueid topic id topicid defaults process args processargs app context appcontext create container type topic id topicid queue id queueid construction container get container manager service getcontainermanagerservice get container factory getcontainerfactory create container createcontainer container type containertype object topic id topicid queue id queueid i remote service container adapter iremoteservicecontaineradapter i remote service container adapter iremoteservicecontaineradapter remote service adapter remoteserviceadapter i remote service container adapter iremoteservicecontaineradapter container get adapter getadapter i remote service container adapter iremoteservicecontaineradapter properties properties properties setting magical service property service registration load balancing service host properties constants service register proxy register remote service i data processor idataprocessor service registration note constants service register proxy registered remote service implementation object implement i data processor idataprocessor service load balancing service property specifies container remote service requests pro xied proxied for warded forwarded jms queue load balanced servers consume rs consumers queue data processor service host registration dataprocessorservicehostregistration remote service adapter remoteserviceadapter register remote service registerremoteservice string i data processor idataprocessor get name getname properties system println service host data processor dataprocessor registered ecf remote services topic topic id topicid wait remote service requests stopped wait for done waitfordone i application iapplication exit data processor service host registration dataprocessorservicehostregistration data processor service host registration dataprocessorservicehostregistration unregister data processor service host registration dataprocessorservicehostregistration container container dispose container get container manager service getcontainermanagerservice remove all containers removeallcontainers container manager service tracker containermanagerservicetracker container manager service tracker containermanagerservicetracker close container manager service tracker containermanagerservicetracker bundle context bundlecontext app lock applock app lock applock notify all notifyall process args processargs i application context iapplicationcontext app context appcontext string original args originalargs string app context appcontext get arguments getarguments application args original args originalargs original args originalargs length original args originalargs equals queue id queueid queue id queueid original args originalargs original args originalargs equals topic id topicid topic id topicid original args originalargs original args originalargs equals container type containertype container type containertype original args originalargs i container manager icontainermanager get container manager service getcontainermanagerservice container manager service tracker containermanagerservicetracker container manager service tracker containermanagerservicetracker service tracker servicetracker bundle context bundlecontext i container manager icontainermanager get name getname container manager service tracker containermanagerservicetracker open i container manager icontainermanager container manager service tracker containermanagerservicetracker get service getservice object app lock applock object wait for done waitfordone wait app lock applock app lock applock wait interrupted exception interruptedexception