rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smackx bytes treams bytestreams socks java io exception ioexception java net socket java util collection java util concurrent timeout exception timeoutexception org jivesoftware smack xmpp exception xmppexception org jivesoftware smack packet org jivesoftware smack packet xmpp error xmpperror org jivesoftware smack util cache org jivesoftware smackx bytes treams bytestreams bytestream request bytestreamrequest org jivesoftware smackx bytes treams bytestreams socks packet bytestream org jivesoftware smackx bytes treams bytestreams socks packet bytestream stream host streamhost socks bytestream request bytestreamrequest handles incoming socks bytestream requests author henning s tai b staib socks bytestream request bytestreamrequest bytestream request bytestreamrequest lifetime item blacklist blacklist lifetime size blacklist blacklist max size blacklist add res ses addresses socks proxies cache string integer address blacklist cache string integer blacklist max size blacklist lifetime number connection failures takes socks proxy blacklisted proxy blacklisted connection attempts period hours connection failure threshold byte stream bytestream initialization request bytestream byte stream request bytestreamrequest socks bytestream manager xmpp connection helper methods socks bytestream manager bytestreammanager manager timeout connect socks proxies total connect timeout totalconnecttimeout minimum timeout connect socks proxy minimum connect timeout minimumconnecttimeout returns number connection failures takes socks proxy blacklisted proxy blacklisted connection attempts period hours number connection failures takes socks proxy blacklisted get connect failure threshold getconnectfailurethreshold connection failure threshold sets number connection failures takes socks proxy blacklisted proxy blacklisted connection attempts period hours setting connection failure threshold disables black listing blacklisting param connect failure threshold connectfailurethreshold number connection failures takes socks proxy blacklisted set connect failure threshold setconnectfailurethreshold connect failure threshold connectfailurethreshold connection failure threshold connect failure threshold connectfailurethreshold creates socks bytestream request bytestreamrequest param manager socks bytestream manager param byte stream request bytestreamrequest socks bytestream initialization packet socks bytestream request bytestreamrequest socks bytestream manager bytestreammanager manager bytestream byte stream request bytestreamrequest manager manager byte stream request bytestreamrequest byte stream request bytestreamrequest returns maximum timeout connect socks proxies accepting socks bytestream request smack connect socks proxies init iator initiator connection established timeout divide d divided number socks proxies determines timeout connection attempt minimum timeout establishing connection socks proxy invoking link set minimum connect timeout setminimumconnecttimeout maximum timeout connect socks proxies get total connect timeout gettotalconnecttimeout total connect timeout totalconnecttimeout total connect timeout totalconnecttimeout sets maximum timeout connect socks proxies accepting socks bytestream request smack connect socks proxies init iator initiator connection established timeout divide d divided number socks proxies determines timeout connection attempt minimum timeout establishing connection socks proxy invoking link set minimum connect timeout setminimumconnecttimeout param total connect timeout totalconnecttimeout maximum timeout connect socks proxies set total connect timeout settotalconnecttimeout total connect timeout totalconnecttimeout total connect timeout totalconnecttimeout total connect timeout totalconnecttimeout returns timeout connect socks proxy accepting socks bytestream request timeout connect socks proxy get minimum connect timeout getminimumconnecttimeout minimum connect timeout minimumconnecttimeout minimum connect timeout minimumconnecttimeout sets timeout connect socks proxy accepting socks bytestream request param minimum connect timeout minimumconnecttimeout timeout connect socks proxy set minimum connect timeout setminimumconnecttimeout minimum connect timeout minimumconnecttimeout minimum connect timeout minimumconnecttimeout minimum connect timeout minimumconnecttimeout returns sender socks bytestream initialization request sender socks bytestream initialization request string get from getfrom byte stream request bytestreamrequest get from getfrom returns session socks bytestream initialization request session socks bytestream initialization request string get session d getsessionid byte stream request bytestreamrequest get session d getsessionid acc epts accepts socks bytestream initialization request returns socket send receive data accepting socks bytestream request time outs timeouts invoking link set total connect timeout settotalconnecttimeout link set minimum connect timeout setminimumconnecttimeout socket send receive data xmpp exception xmppexception connection socks proxies failed stream invalid interrupted exception interruptedexception current thread int errupted interrupted waiting socks bytestream session bytestreamsession accept xmpp exception xmppexception interrupted exception interruptedexception collection stream host streamhost stream hosts streamhosts byte stream request bytestreamrequest get stream hosts getstreamhosts exceptions request stream hosts stream hosts streamhosts size cancel request cancelrequest stream host streamhost selected host selectedhost socket socket string digest socks utils create digest createdigest byte stream request bytestreamrequest get session d getsessionid byte stream request bytestreamrequest get from getfrom manager get connection getconnection get user getuser determine timeout connection attempt socks proxy amount time consume timeout timeout math max get total connect timeout gettotalconnecttimeout stream hosts streamhosts size get minimum connect timeout getminimumconnecttimeout stream host streamhost stream host streamhost stream hosts streamhosts string address stream host streamhost get address getaddress stream host streamhost get port getport check address blacklisted failures get connection failures getconnectionfailures address connection failure threshold failures connection failure threshold establish socket build socks client socks client socks client socks client stream host streamhost digest connect socks proxy timeout socket socks client get socket getsocket timeout selected host selected host selectedhost stream host streamhost timeout exception timeoutexception increment connection failures incrementconnectionfailures address io exception ioexception increment connection failures incrementconnectionfailures address xmpp exception xmppexception increment connection failures incrementconnectionfailures address exception connecting socks proxies failed selected host selectedhost socket cancel request cancelrequest send host confirmation bytestream response create used host response createusedhostresponse selected host selectedhost manager get connection getconnection send packet sendpacket response socks bytestream session bytestreamsession socket selected host selectedhost getjid equals byte stream request bytestreamrequest get from getfrom rejects socks bytestream request sending reject error init iator initiator reject manager reply reject packet replyrejectpacket byte stream request bytestreamrequest can cels cancels socks bytestream request sending error init iator initiator building xmpp exception xmpp exception xmppexception xmpp exception xmpp error cancel request cancelrequest xmpp exception xmppexception string error message errormessage establish socket host xmpp error xmpperror error xmpp error xmpperror xmpp error xmpperror condition item error message errormessage erroriq create error response createerrorresponse byte stream request bytestreamrequest error manager get connection getconnection send packet sendpacket erroriq xmpp exception xmppexception error message errormessage error returns response socks bytestream request socks proxy param selected host selectedhost socks proxy response socks bytestream request bytestream create used host response createusedhostresponse stream host streamhost selected host selectedhost bytestream response bytestream byte stream request bytestreamrequest get session d getsessionid response set to setto byte stream request bytestreamrequest get from getfrom response set type settype type result response set packet d setpacketid byte stream request bytestreamrequest get packet d getpacketid response set used host setusedhost selected host selectedhost getjid response inc rements increments connection failure counter address param address address connection failure counter inc reased increased increment connection failures incrementconnectionfailures string address integer count address blacklist address address blacklist address count count returns connection address failed param address address number connection failures get connection failures getconnectionfailures string address integer count address blacklist address count count