rcs file rcsfile revision tue nov copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smack java util collection java util collections java util map java util java util weak hash map weakhashmap java util concurrent copy on write array set copyonwritearrayset org jivesoftware smack filter and filter andfilter org jivesoftware smack filter from contains filter fromcontainsfilter org jivesoftware smack filter packet filter packetfilter org jivesoftware smack filter thread filter threadfilter org jivesoftware smack packet message org jivesoftware smack packet packet org jivesoftware smack util string utils stringutils org jivesoftware smack util collect ions collections reference map referencemap chat manager track references current chats hold references memory neccesary reference chat object aware chats register listener calling link add chat listener addchatlistener chat manager listener chatmanagerlistener author alexander wenckus chat manager chatmanager returns unique alpha numeric alphanumeric prefix unique num eric numeric string nextid prefix to string tostring prefix helps unique mutliple instances string prefix string utils stringutils random string randomstring track current increment appended prefix for um forum unique maps thread chat map string chat thread chats threadchats collections synchronized map synchronizedmap reference map referencemap string chat reference map referencemap hard reference map referencemap weak maps jids chats map string chat jid chats jidchats collections synchronized map synchronizedmap reference map referencemap string chat reference map referencemap hard reference map referencemap weak maps base jids chats map string chat base jid chats basejidchats collections synchronized map synchronizedmap reference map referencemap string chat reference map referencemap hard reference map referencemap weak chat manager listener chatmanagerlistener chat manager listeners chatmanagerlisteners copy on write array set copyonwritearrayset chat manager listener chatmanagerlistener map packet interceptor packetinterceptor packet filter packetfilter int erceptors interceptors weak hash map weakhashmap packet interceptor packetinterceptor packet filter packetfilter connection connection chat manager chatmanager connection connection connection connection packet filter packetfilter filter packet filter packetfilter accept packet packet packet message message type message type messagetype message packet get type gettype message type messagetype message type group chat groupchat message type messagetype message type head line headline add listener message pack ets packets deliver err ant errant messages chat instance connection add packet listener addpacketlistener packet listener packetlistener process packet processpacket packet packet message message message packet chat chat message get thread getthread chat get user chat getuserchat message get from getfrom chat get thread chat getthreadchat message get thread getthread chat locate chat based sender message chat get user chat getuserchat message get from getfrom chat chat create chat createchat message deliver message delivermessage chat message filter creates chat returns param userjid user chat param listener listener listen messages chat created chat chat create chat createchat string userjid message listener messagelistener listener string threadid threadid nextid thread chats threadchats threadid create chat createchat userjid threadid listener creates chat thread returns param userjid jid user chat param thread thread created chat param listener listener add chat created chat chat create chat createchat string userjid string thread message listener messagelistener listener thread thread nextid chat chat thread chats threadchats thread chat illegal argument exception illegalargumentexception threadid chat create chat createchat userjid thread chat add message listener addmessagelistener listener chat chat create chat createchat string userjid string threadid created locally createdlocally chat chat chat userjid threadid thread chats threadchats threadid chat jid chats jidchats userjid chat base jid chats basejidchats string utils stringutils parse bar e address parsebareaddress userjid chat chat manager listener chatmanagerlistener listener chat manager listeners chatmanagerlisteners listener chat created chatcreated chat created locally createdlocally chat chat create chat createchat message message string threadid message get thread getthread threadid threadid nextid string userjid message get from getfrom create chat createchat userjid threadid matching chat user jid full jid map match base jid match param userjid chat get user chat getuserchat string userjid chat match jid chats jidchats userjid match match base jid chats basejidchats string utils stringutils parse bar e address parsebareaddress userjid match chat get thread chat getthreadchat string thread thread chats threadchats thread register listener chat manager chatmanager rec ieve recieve events chats param listener listener add chat listener addchatlistener chat manager listener chatmanagerlistener listener chat manager listeners chatmanagerlisteners add listener removes listener longer not ified notified events chats param listener listener removed remove chat listener removechatlistener chat manager listener chatmanagerlistener listener chat manager listeners chatmanagerlisteners remove listener returns unmodifiable collection chat listeners registered manager unmodifiable collection chat listeners registered manager collection chat manager listener chatmanagerlistener get chat listeners getchatlisteners collections unmodifiable collection unmodifiablecollection chat manager listeners chatmanagerlisteners deliver message delivermessage chat chat message message int erceptors interceptors chat deliver message send message sendmessage chat chat message message map entry packet interceptor packetinterceptor packet filter packetfilter int erceptor interceptor int erceptors interceptors entry set entryset packet filter packetfilter filter int erceptor interceptor get value getvalue filter filter accept message int erceptor interceptor get key getkey int ercept packet interceptpacket message ensure messages proper message get from getfrom message set from setfrom connection get user getuser connection send packet sendpacket message packet collector packetcollector create packet collector createpacketcollector chat chat connection create packet collector createpacketcollector and filter andfilter thread filter threadfilter chat get thread d getthreadid from contains filter fromcontainsfilter chat get participant getparticipant adds int erceptor interceptor int ercepts intercepts messages chats param packet interceptor packetinterceptor int erceptor interceptor add outgoing message interceptor addoutgoingmessageinterceptor packet interceptor packetinterceptor packet interceptor packetinterceptor add outgoing message interceptor addoutgoingmessageinterceptor packet interceptor packetinterceptor add outgoing message interceptor addoutgoingmessageinterceptor packet interceptor packetinterceptor packet interceptor packetinterceptor packet filter packetfilter filter packet interceptor packetinterceptor int erceptors interceptors packet interceptor packetinterceptor filter