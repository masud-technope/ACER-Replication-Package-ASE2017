revision copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smackx work group workgroup packet org jivesoftware smackx work group workgroup queue user queueuser org jivesoftware smack packet packet extension packetextension org jivesoftware smack provider packet extension provider packetextensionprovider org xml pull xmlpull xml pull parser xmlpullparser java text simple date format simpledateformat java util java util hash set hashset java util iterator java util queue details packet extension details users queue queue details queuedetails packet extension packetextension element packet extension string element notify queue details name space namespace packet extension string name space namespace http jabber org protocol work group workgroup string format yyyymmdd simple date format simpledateformat date format dateformat simple date format simpledateformat format list users queue queue user queueuser users creates queue details queuedetails packet queue details queuedetails users hash set hashset queue user queueuser returns number users queue waiting routed agent number users queue get user count getusercount users size returns users queue waiting routed agent queue user queueuser objects users waiting queue queue user queueuser get use rs getusers users users adds user packet param user user add user adduser queue user queueuser user users users add user string get element name getelementname element string get name space getnamespace name space namespace string toxml string builder stringbuilder buf string builder stringbuilder buf append append element append xml ns xmlns append name space namespace append users iterator queue user queueuser users iterator has next hasnext queue user queueuser user queue user queueuser position user get queue position getqueueposition time remaining timeremaining user get estimate d remaining time getestimatedremainingtime timestamp user get queue join timestamp getqueuejointimestamp buf append user jid append user get user d getuserid append position buf append position append position append position time remaining timeremaining buf append time append time remaining timeremaining append time timestamp buf append join time buf append date format dateformat format timestamp buf append join time buf append user buf append append element append buf to string tostring provider queue details queuedetails packet extensions provider packet extension provider packetextensionprovider packet extension packetextension parse extension parseextension xml pull parser xmlpullparser parser exception simple date format simpledateformat date format dateformat simple date format simpledateformat format queue details queuedetails queue details queuedetails queue details queuedetails event type eventtype parser get event type geteventtype event type eventtype xml pull parser xmlpullparser tag notify queue details equals parser get name getname event type eventtype parser event type eventtype xml pull parser xmlpullparser start tag user equals parser get name getname string uid position time join time jointime uid parser get attribute value getattributevalue jid uid exception event type eventtype parser event type eventtype xml pull parser xmlpullparser tag user equals parser get name getname position equals parser get name getname position integer parse int parseint parser next text nexttext time equals parser get name getname time integer parse int parseint parser next text nexttext join time equals parser get name getname join time jointime date format dateformat parse parser next text nexttext parser get name getname equals wait time waittime wait date format dateformat parse parser next text nexttext system println wait event type eventtype parser event type eventtype xml pull parser xmlpullparser tag exception queue details queuedetails add user adduser queue user queueuser uid position time join time jointime event type eventtype parser queue details queuedetails