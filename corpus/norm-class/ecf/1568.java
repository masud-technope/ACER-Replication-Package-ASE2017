copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf tests file transfer filetransfer java file java io exception ioexception java net connect exception connectexception java net httpurlconnection java net url java util map org apache commons http client httpclient server http request handler httprequesthandler org apache commons http client httpclient server response writer responsewriter org apache commons http client httpclient server simple http server simplehttpserver org apache commons http client httpclient server simple http server connection simplehttpserverconnection org apache commons http client httpclient server simple request simplerequest org eclipse ecf file transfer filetransfer i file transfer listener ifiletransferlistener org eclipse ecf file transfer filetransfer events i file transfer connect start event ifiletransferconnectstartevent org eclipse ecf file transfer filetransfer events i incoming file transfer receive data event iincomingfiletransferreceivedataevent org eclipse ecf file transfer filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent org eclipse ecf file transfer filetransfer identity i file d ifileid org eclipse ecf internal tests file transfer filetransfer https erver httpserver simple server simpleserver url retrieve test urlretrievetest abstract retrieve test case abstractretrievetestcase string http retrieve http eclipse org ecf log html string http retrieve http eclipse org down loads downloads download php file eclipse down loads downloads drops jar processor jarprocessor jar url http ftp osuosl org pub eclipse eclipse down loads downloads drops jar processor jarprocessor jar mirror string http retrieve port http eclipse org ecf log html string http retrieve host http google string https retrieve https eclipse org string http fail retrieve http google google liciousafdasdfasdfasdf googleliciousafdasdfasdfasdf string http bad url http ddasdf string http malformed url http malformed string http retrieve can onical canonical url http eclipse org ecf log html string ftp retrieve ftp ftp osuosl org pub eclipse ecf org eclipse ecf sdk zip bug string bug url http eclipse org down loads downloads download php file web tools webtools updates site xml format xml country code countrycode time zone timezone response type responsetype xml file tmp file tmpfile simple server simpleserver server javadoc junit framework test case testcase set up setup set up setup exception set up setup tmp file tmpfile file create temp file createtempfile ecf test ecftest server simple server simpleserver get name getname simple http server simplehttpserver simple server get simple http server getsimplehttpserver simple set request handler setrequesthandler http request handler httprequesthandler process request processrequest simple http server connection simplehttpserverconnection conn simple request simplerequest request io exception ioexception trace res ponding responding request request get request line getrequestline response writer responsewriter conn get writer getwriter write lines writelines string http content length content type text plain charset utf flush write flush conn set keep alive setkeepalive javadoc junit framework test case testcase tear down teardown tear down teardown exception tear down teardown server server shutdown server tmp file tmpfile tmp file tmpfile delete tmp file tmpfile javadoc org eclipse ecf tests file transfer filetransfer abstract retrieve test case abstractretrievetestcase handle start connect event handlestartconnectevent org eclipse ecf file transfer filetransfer events i file transfer connect start event ifiletransferconnectstartevent handle start connect event handlestartconnectevent i file transfer connect start event ifiletransferconnectstartevent event handle start connect event handlestartconnectevent event javadoc org eclipse ecf tests file transfer filetransfer abstract retrieve test case abstractretrievetestcase handle start event handlestartevent org eclipse ecf file transfer filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent handle start event handlestartevent i incoming file transfer receive start event iincomingfiletransferreceivestartevent event handle start event handlestartevent event assert not null assertnotnull event get file d getfileid assert not null assertnotnull event get file d getfileid get file name getfilename map response headers responseheaders event get response headers getresponseheaders assert not null assertnotnull response headers responseheaders trace response headers responseheaders response headers responseheaders incoming file transfer incomingfiletransfer event receive tmp file tmpfile io exception ioexception fail get local ized message getlocalizedmessage test receive testreceive string url exception assert not null assertnotnull retrieve adapter retrieveadapter i file transfer listener ifiletransferlistener listener create file transfer listener createfiletransferlistener i file d ifileid fileid create file d createfileid url url retrieve adapter retrieveadapter send retrieve request sendretrieverequest fileid listener wait for done waitfordone assert has event asserthasevent start events startevents i incoming file transfer receive start event iincomingfiletransferreceivestartevent assert has more than event count asserthasmorethaneventcount data events dataevents i incoming file transfer receive data event iincomingfiletransferreceivedataevent assert done k assertdoneok assert true asserttrue tmp file tmpfile exists assert true asserttrue tmp file tmpfile length test receive fails testreceivefails string url exception assert not null assertnotnull retrieve adapter retrieveadapter i file transfer listener ifiletransferlistener listener create file transfer listener createfiletransferlistener i file d ifileid fileid create file d createfileid url url retrieve adapter retrieveadapter send retrieve request sendretrieverequest fileid listener exception print stack trace printstacktrace fail to string tostring wait for done waitfordone assert has no event asserthasnoevent start events startevents i incoming file transfer receive start event iincomingfiletransferreceivestartevent assert has no event asserthasnoevent data events dataevents i incoming file transfer receive data event iincomingfiletransferreceivedataevent assert has done event asserthasdoneevent test receive file testreceivefile exception add proxy addproxy comp osent composent foo bar password test receive testreceive http retrieve test receive file testreceivefile exception add proxy addproxy comp osent composent foo bar password test receive testreceive http retrieve test receive host only testreceivehostonly exception add proxy addproxy comp osent composent foo bar password test receive testreceive http retrieve host test receive file port testreceivefileport exception test receive testreceive http retrieve port write lines writelines response writer responsewriter string lines io exception ioexception lines length println lines test receive file port testreceivefileport exception string url server getserverurl assert true asserttrue url url matches ahttp localhost test receive testreceive url test receive file port testreceivefileport exception string url server getserverurl assert true asserttrue url url matches ahttp localhost test receive testreceive url test receive file port testreceivefileport exception string url server getserverurl html assert true asserttrue url url matches ahttp localhost html test receive testreceive url test receive non canonical path testreceivenoncanonicalurlpath exception add proxy addproxy comp osent composent foo bar password test receive testreceive http retrieve can onical canonical url test receive non canonical path local host testreceivenoncanonicalurlpathlocalhost exception string url server getserverurl foo assert true asserttrue url url matches ahttp localhost foo test receive testreceive url testftpreceivefile exception test receive testreceive ftp retrieve test https receive file testhttpsreceivefile exception test receive testreceive https retrieve test failed receive testfailedreceive exception test receive fails testreceivefails http fail retrieve assert done exception after server response assertdoneexceptionafterserverresponse httpurlconnection http exception print stack trace printstacktrace fail to string tostring test retrieve bad l testretrievebadurl exception test receive fails testreceivefails http bad url assert done exception before server response assertdoneexceptionbeforeserverresponse connect exception connectexception exception print stack trace printstacktrace fail to string tostring test receive gzip testreceivegzip exception test receive testreceive bug url string http retrieve gzfile http download eclipse org eclipse updates plugins javax servlet jsp jar pack string http retrieve gzfile mirror http mirrors xmission eclipse eclipse updates plugins javax servlet jsp jar pack test receive gzip with file testreceivegzipwithgzfile exception tmp file tmpfile file create temp file createtempfile foo pack test receive testreceive http retrieve gzfile tmp file tmpfile system println tmp file tmpfile length assert true asserttrue tmp file tmpfile length test receive gzip with file from mirror testreceivegzipwithgzfilefrommirror exception tmp file tmpfile file create temp file createtempfile foo pack test receive testreceive http retrieve gzfile mirror tmp file tmpfile system println tmp file tmpfile length assert true asserttrue tmp file tmpfile length