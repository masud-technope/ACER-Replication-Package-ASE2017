copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf tests provider file transfer filetransfer xmpp java file java file output stream fileoutputstream org eclipse ecf core identity org eclipse ecf core identity id create exception idcreateexception org eclipse ecf core identity id factory idfactory org eclipse ecf file transfer filetransfer i file transfer listener ifiletransferlistener org eclipse ecf file transfer filetransfer i incoming file transfer request listener iincomingfiletransferrequestlistener org eclipse ecf file transfer filetransfer i outgoing file transfer ioutgoingfiletransfer org eclipse ecf file transfer filetransfer i send file transfer container adapter isendfiletransfercontaineradapter org eclipse ecf file transfer filetransfer events i file transfer event ifiletransferevent org eclipse ecf file transfer filetransfer events i file transfer request event ifiletransferrequestevent org eclipse ecf file transfer filetransfer events i outgoing file transfer response event ioutgoingfiletransferresponseevent org eclipse ecf file transfer filetransfer events i outgoing file transfer send done event ioutgoingfiletransfersenddoneevent org eclipse ecf file transfer filetransfer identity file create exception filecreateexception org eclipse ecf file transfer filetransfer identity fileidfactory org eclipse ecf file transfer filetransfer identity i file d ifileid org eclipse ecf tests container abstract test case containerabstracttestcase xmpp outgoing test xmppoutgoingtest container abstract test case containerabstracttestcase string tests rcpath testsrcpath test src string tests rcfile testsrcfile tests rcpath testsrcpath test txt string test target path testtargetpath test target string xmpp container ecf xmpps smack i send file transfer container adapter isendfiletransfercontaineradapter adapter adapter i outgoing file transfer ioutgoingfiletransfer out going outgoing file incoming directory incomingdirectory file incoming file incomingfile i file d ifileid targetid request accepted requestaccepted incoming file transfer request listener incomingfiletransferrequestlistener i incoming file transfer request listener iincomingfiletransferrequestlistener accept incoming file transfer request listener incomingfiletransferrequestlistener accept accept accept handle file transfer request handlefiletransferrequest i file transfer request event ifiletransferrequestevent event system println receiver handle file transfer request handlefiletransferrequest event incoming directory incomingdirectory file test target path testtargetpath incoming directory incomingdirectory mkdirs incoming file incomingfile file incoming directory incomingdirectory event get file transfer info getfiletransferinfo get file getfile get name getname accept event accept file output stream fileoutputstream incoming file incomingfile receiver transfer listener receivertransferlistener event reject exception print stack trace printstacktrace system err fail exception calling accept receive file transfer i file transfer listener ifiletransferlistener receiver transfer listener receivertransferlistener i file transfer listener ifiletransferlistener handle transfer event handletransferevent i file transfer event ifiletransferevent event system println receiver handle transfer event handletransferevent event i file transfer listener ifiletransferlistener sender transfer listener sendertransferlistener i file transfer listener ifiletransferlistener handle transfer event handletransferevent i file transfer event ifiletransferevent event system println sender handle transfer event handletransferevent event event i outgoing file transfer response event ioutgoingfiletransferresponseevent i outgoing file transfer response event ioutgoingfiletransferresponseevent revent i outgoing file transfer response event ioutgoingfiletransferresponseevent event out going outgoing revent get source getsource request accepted requestaccepted revent request accepted requestaccepted request accepted requestaccepted system println sender file transfer request rejected event i outgoing file transfer send done event ioutgoingfiletransfersenddoneevent sync notify syncnotify set up setup exception set up setup set client count setclientcount create clients clients create clients createclients connect clients connect client connectclient adapter get outgoing file transfer getoutgoingfiletransfer receiver listen sender adapter get outgoing file transfer getoutgoingfiletransfer target client connectedid includes resource connected targetid create file d createfileid adapter get client getclient get connected d getconnectedid tests rcfile testsrcfile tear down teardown exception tear down teardown disconnect clients disconnectclients incoming file incomingfile incoming file incomingfile delete incoming file incomingfile incoming directory incomingdirectory incoming directory incomingdirectory delete incoming directory incomingdirectory out going outgoing targetid test receiver accept testreceiveraccept exception setup receiver accept request file transfer requests adapter add listener addlistener incoming file transfer request listener incomingfiletransferrequestlistener init iate initiate send request adapter send outgoing request sendoutgoingrequest targetid file tests rcfile testsrcfile sender transfer listener sendertransferlistener sync wait for notify syncwaitfornotify assert not null assertnotnull out going outgoing assert null assertnull out going outgoing get exception getexception assert true asserttrue request accepted requestaccepted assert not null assertnotnull incoming file incomingfile assert true asserttrue incoming file incomingfile exists test receiver reject testreceiverreject exception setup receiver accept request file transfer requests adapter add listener addlistener incoming file transfer request listener incomingfiletransferrequestlistener init iate initiate send request adapter send outgoing request sendoutgoingrequest targetid file tests rcfile testsrcfile sender transfer listener sendertransferlistener sync wait for notify syncwaitfornotify assert not null assertnotnull out going outgoing assert false assertfalse request accepted requestaccepted string get client container name getclientcontainername xmpp container i send file transfer container adapter isendfiletransfercontaineradapter get outgoing file transfer getoutgoingfiletransfer client i send file transfer container adapter isendfiletransfercontaineradapter get client getclient client get adapter getadapter i send file transfer container adapter isendfiletransfercontaineradapter i file d ifileid create file d createfileid i send file transfer container adapter isendfiletransfercontaineradapter adapter clientid string filename file create exception filecreateexception fileidfactory get default getdefault create file d createfileid adapter get outgoing name space getoutgoingnamespace object clientid filename get server connect d getserverconnectid client id factory idfactory get default getdefault createid get client getclient client get connect name space getconnectnamespace get username getusername client id create exception idcreateexception print stack trace printstacktrace system err fail create server connect