copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf tests file transfer filetransfer java file java io exception ioexception java net url org eclipse ecf file transfer filetransfer i file transfer listener ifiletransferlistener org eclipse ecf file transfer filetransfer events i incoming file transfer receive data event iincomingfiletransferreceivedataevent org eclipse ecf file transfer filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent org eclipse ecf file transfer filetransfer identity i file d ifileid get remote file name test getremotefilenametest abstract retrieve test case abstractretrievetestcase string http retrieve http jtricks download unknown string http retrieve http jtricks download text file tmp file tmpfile javadoc junit framework test case testcase set up setup set up setup exception set up setup tmp file tmpfile file create temp file createtempfile ecf test ecftest javadoc junit framework test case testcase tear down teardown tear down teardown exception tear down teardown tmp file tmpfile tmp file tmpfile delete tmp file tmpfile object lock object javadoc org eclipse ecf tests file transfer filetransfer abstract retrieve test case abstractretrievetestcase handle start event handlestartevent org eclipse ecf file transfer filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent handle start event handlestartevent i incoming file transfer receive start event iincomingfiletransferreceivestartevent event handle start event handlestartevent event assert not null assertnotnull event get file d getfileid assert not null assertnotnull event get file d getfileid get file name getfilename incoming file transfer incomingfiletransfer event receive tmp file tmpfile lock lock notify io exception ioexception fail get local ized message getlocalizedmessage test receive testreceive string url exception assert not null assertnotnull retrieve adapter retrieveadapter i file transfer listener ifiletransferlistener listener create file transfer listener createfiletransferlistener i file d ifileid fileid create file d createfileid url url retrieve adapter retrieveadapter send retrieve request sendretrieverequest fileid listener lock lock wait interrupted exception interruptedexception fail system println remote file incoming file transfer incomingfiletransfer get remote file name getremotefilename wait for done waitfordone assert has event asserthasevent start events startevents i incoming file transfer receive start event iincomingfiletransferreceivestartevent assert has more than event count asserthasmorethaneventcount data events dataevents i incoming file transfer receive data event iincomingfiletransferreceivedataevent assert done k assertdoneok assert true asserttrue tmp file tmpfile exists assert true asserttrue tmp file tmpfile length test receive file testreceivefile exception test receive testreceive http retrieve test http testhttp receive file receivefile exception test receive testreceive http retrieve