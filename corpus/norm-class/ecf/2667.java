copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf provider comm tcp java java net java security access controller accesscontroller java security privileged action privilegedaction java util org eclipse core runtime org eclipse ecf core identity org eclipse ecf core identity i d factory idfactory org eclipse ecf core shared object sharedobject util simplefifoqueue org eclipse ecf core util ecf exception ecfexception org eclipse ecf core util trace org eclipse ecf internal provider ecf provider debug options ecfproviderdebugoptions org eclipse ecf internal provider provider plugin providerplugin org eclipse ecf provider comm client i synch async h connection isynchasynchconnection nls string protocol ecf tcp ecftcp sndr priority thread norm priority rcvr priority thread norm priority close timeout seconds close timeout maximum cached messages object stream max buffer msg wait interval socket socket nls string address port addressport endpoint underlying str eams streams object output stream objectoutputstream output stream outputstream object input stream objectinputstream input stream inputstream event handler i synch async h event handler isynchasyncheventhandler handler queue simplefifoqueue queue simplefifoqueue keep alive keepalive thread send thread sendthread thread rcv thread rcvthread thread keep alive thread keepalivethread is closing isclosing wait for ping waitforping ping message pingmessage ping ping message pingmessage ping response message pingresponsemessage ping res p pingresp ping response message pingresponsemessage max msg maxmsg max buffer msg close timeout closetimeout close timeout map properties containerid object ping lock pinglock object disconnect handle d disconnecthandled object disconnect lock disconnectlock object object output stream lock outputstreamlock object string get host name for address without lookup gethostnameforaddresswithoutlookup inet address inetaddress inet address inetaddress inet address inetaddress to string tostring returns inet address form host name hostname address hostname resolved result address detect location determine host string inet address str inetaddressstr inet address inetaddress to string tostring slash pos slashpos inet address str inetaddressstr index of indexof slash pos slashpos address string inet address str inetaddressstr substring hostname inet address str inetaddressstr substring slash pos slashpos param socket exception socketexception thrown implementation set socket setsocket socket socket exception socketexception socket address port addressport nls get local port getlocalport get host name for address without lookup gethostnameforaddresswithoutlookup get inet address getinetaddress nls nls get port getport nls address port addressport endpoint client socket a socket asocket object input stream objectinputstream i stream istream object output stream objectoutputstream o stream ostream i synch async h event handler isynchasyncheventhandler handler i o exception ioexception a socket asocket i stream istream o stream ostream handler max buffer msg client socket a socket asocket object input stream objectinputstream i stream istream object output stream objectoutputstream o stream ostream i synch async h event handler isynchasyncheventhandler handler max msgs maxmsgs i o exception ioexception is not null isnotnull a socket asocket a socket asocket get keep alive getkeepalive keep alive keepalive a socket asocket get so timeout getsotimeout set socket setsocket a socket asocket input stream inputstream i stream istream output stream outputstream o stream ostream handler handler containerid handler get event handler d geteventhandlerid max msg maxmsg max msgs maxmsgs properties properties setup threads setupthreads client i synch async h event handler isynchasyncheventhandler handler keep alive keepalive handler nls null pointer exception nullpointerexception event handler handler handler keep alive keepalive keep alive keepalive containerid handler get event handler d geteventhandlerid properties hash map hashmap get local d getlocalid containerid containerid socket retid retid i d factory idfactory get default getdefault create string d createstringid nls protocol get host name for address without lookup gethostnameforaddresswithoutlookup socket get local address getlocaladdress nls socket get local port getlocalport exception trace stack tracestack exception get local d getlocalid retid remove listener removelistener i connection listener iconnectionlistener xxx support listeners add listener addlistener i connection listener iconnectionlistener xxx support listeners is connected isconnected socket socket is connected isconnected is started isstarted send thread sendthread send thread sendthread is alive isalive set socket options setsocketoptions socket a socket asocket socket exception socketexception a socket asocket set tcp no delay settcpnodelay keep alive keepalive a socket asocket set keep alive setkeepalive a socket asocket set so timeout setsotimeout keep alive keepalive socket create connect socket createconnectsocket uri remote timeout ecf exception ecfexception socket factory create connect socket socket factory socketfactory fact socket factory socketfactory get socket factory getsocketfactory fact fact socket factory socketfactory get default socket factory getdefaultsocketfactory fact create socket createsocket remote get host gethost remote get port getport timeout i o exception ioexception ecf exception ecfexception create socket connect remote uri parse remote d parseremoteid remote ecf exception ecfexception uri remote get name getname uri syntax exception urisyntaxexception ecf exception ecfexception invalid uri remoteid remote object connect remote object data timeout ecf exception ecfexception nls nls nls nls debug connect remote data timeout socket nls ecf exception ecfexception connected remote nls ecf exception ecfexception remote parse remote uri uri anuri parse remote d parseremoteid remote create socket calling create socket createsocket socket create connect socket createconnectsocket anuri timeout connect result message connectresultmessage res socket options set socket options setsocketoptions connection socket set socket setsocket output stream outputstream object output stream objectoutputstream get output stream getoutputstream output stream outputstream flush input stream inputstream object input stream objectinputstream get input stream getinputstream nls debug connect anuri send connect data synch ronous synchronous response send connect request message connectrequestmessage anuri serializable data res connect result message connectresultmessage read object readobject i o exception ioexception ecf exception ecfexception exception connection remote get name getname nls debug connect rcv res res nls ecf exception ecfexception result setup threads setup threads setupthreads object ret res get data getdata nls debug connect returning ret ret setup threads setupthreads setup threads nls debug setup threads setupthreads send thread sendthread thread access controller accesscontroller do privileged doprivileged privileged action privilegedaction object get send thread getsendthread rcv thread rcvthread thread access controller accesscontroller do privileged doprivileged privileged action privilegedaction object get rcv thread getrcvthread thread get send thread getsendthread thread a thread athread thread runnable msg count msgcount thread thread current thread currentthread int errupted interrupted queue peek queue peekqueue returns is interrupted isinterrupted sender wait appears queue queue stopped returns serializable a msg amsg serializable queue peek queue peekqueue is interrupted isinterrupted a msg amsg send message send a msg amsg successful remove message queue queue remove head removehead msg count msgcount max msg maxmsg synchronize avoid concurrent access output stream outputstream output stream lock outputstreamlock output stream outputstream reset msg count msgcount msg count msgcount exception handle exception handleexception handle exception handleexception debug nls sender terminating nls get local d getlocalid snd r sndr get address port getaddressport priority thread a thread athread set priority setpriority sndr priority a thread athread handle exception handleexception throwable disconnect lock disconnectlock disconnect handle d disconnecthandled disconnect handle d disconnecthandled trace stack tracestack handle exception handleexception thread thread current thread currentthread get name getname handler handle disconnect event handledisconnectevent disconnect event disconnectevent queue client client notify all notifyall close socket closesocket socket socket close set socket setsocket i o exception ioexception trace stack tracestack close socket closesocket exception send serializable snd i o exception ioexception synchronize avoid concurrent access output stream outputstream output stream lock outputstreamlock output stream outputstream write object writeobject snd output stream outputstream flush handle ping res p handlepingresp ping lock pinglock wait for ping waitforping set close timeout setclosetimeout close timeout closetimeout send close sendclose serializable snd i o exception ioexception is closing isclosing nls nls debug send close sendclose snd send snd count int erval interval wait interval disconnect handle d disconnecthandled count int erval interval wait close timeout closetimeout int erval interval count interrupted exception interruptedexception trace stack tracestack send close sendclose wait thread get rcv thread getrcvthread thread a thread athread thread runnable thread thread current thread currentthread loop handle objects received is interrupted isinterrupted handle rcv handlercv read object readobject exception handle exception handleexception handle exception handleexception debug nls rcvr terminating nls get local d getlocalid rcv r rcvr get address port getaddressport priority a thread athread set priority setpriority rcvr priority a thread athread rcv count rcvcount handle rcv handlercv serializable rcv i o exception ioexception handle messages rcv synch message synchmessage handle synch message valid synch message close handler handle synch event handlesynchevent synch event synchevent synch message synchmessage rcv get data getdata rcv async h message asynchmessage serializable async h message asynchmessage rcv get data getdata handle async h asynch messages handler handle async h event handleasynchevent async h event asynchevent rcv ping message pingmessage handle ping sending response send ping res p pingresp rcv ping response message pingresponsemessage handle ping response handle ping res p handlepingresp nls i o exception ioexception nls invalid message received i o exception ioexception disconnect start nls debug start send thread sendthread send thread sendthread start rcv thread rcvthread rcv thread rcvthread start setup start alive thread keep alive keepalive keep alive thread keepalivethread setup ping setupping keep alive thread keepalivethread keep alive thread keepalivethread start nls debug thread setup ping setupping nls debug setup ping setupping ping start wait pingstartwait random next int nextint keep alive keepalive thread runnable thread thread current thread currentthread sleep random int erval interval start thread sleep ping start wait pingstartwait interrupted exception interruptedexception setup ping frequency keep alive keepalive frequency keep alive keepalive queue is stopped isstopped occurred is interrupted isinterrupted disconnect handle d disconnecthandled sleep timeout int erval interval divide d divided thread sleep frequency occurred is interrupted isinterrupted disconnect handle d disconnecthandled ping lock pinglock wait for ping waitforping queue ping instance send sender thread queue enqueue ping send ping count int erval interval wait interval wait for ping waitforping count int erval interval ping lock pinglock wait frequency int erval interval count remote reachable wait for ping waitforping i o exception ioexception get address port getaddressport remote reachable ping exception handle exception handleexception handle exception handleexception debug nls ping terminating nls get local d getlocalid ping get address port getaddressport disconnect nls debug disconnect close send queue socket queue close close socket closesocket keep alive thread keepalivethread thread current thread currentthread keep alive thread keepalivethread keep alive thread keepalivethread int errupt interrupt keep alive thread keepalivethread send thread sendthread send thread sendthread rcv thread rcvthread rcv thread rcvthread notify threads waiting hold lock notify all notifyall send async h sendasynch recipient obj i o exception ioexception queue object queueobject recipient obj send async h sendasynch recipient object obj i o exception ioexception queue object queueobject recipient serializable obj queue object queueobject recipient serializable obj i o exception ioexception queue is stopped isstopped is closing isclosing nls connect exception connectexception connected queue enqueue async h message asynchmessage obj serializable send object sendobject recipient serializable obj i o exception ioexception queue is stopped isstopped is closing isclosing nls connect exception connectexception connected send close sendclose synch message synchmessage obj object send synch sendsynch rec object obj i o exception ioexception send object sendobject rec serializable obj object send synch sendsynch rec obj i o exception ioexception send object sendobject rec obj serializable read object readobject i o exception ioexception serializable ret ret serializable input stream inputstream read object readobject class not found exception classnotfoundexception trace stack tracestack read object readobject class notfound exception classnotfoundexception i o exception ioexception i o exception ioexception protocol violation load failure set stack trace setstacktrace get stack trace getstacktrace ret map get properties getproperties properties object get adapter getadapter clazz string get address port getaddressport address port addressport debug string msg nls trace trace provider plugin providerplugin plugin ecf provider debug options ecfproviderdebugoptions connection get local d getlocalid msg trace stack tracestack string msg throwable trace cat ching catching provider plugin providerplugin plugin ecf provider debug options ecfproviderdebugoptions exceptions cat ching catching client msg set properties setproperties map props properties props object get output stream lock getoutputstreamlock output stream lock outputstreamlock