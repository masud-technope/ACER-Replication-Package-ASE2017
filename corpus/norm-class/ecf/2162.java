copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf server app java file input stream fileinputstream java security permission collection permissioncollection java util org eclipse ecf core i container listener icontainerlistener org eclipse ecf core events org eclipse ecf core identity org eclipse ecf core security i connect handler policy iconnecthandlerpolicy org eclipse ecf core shared object sharedobject org eclipse ecf core shared object sharedobject security i shared object policy isharedobjectpolicy org eclipse ecf provider ecf server container implementation runs application usage java org eclipse ecf provider app server application serverapplication config file configfile server id serverid config file configfile server configuration loaded setup servers server id serverid ecf tcp ecftcp localhost server server id serverid correspond uri syntax defined href http ietf org rfc rfc txt rfc nbsp uniform resource identifiers uri syntax amended href http ietf org rfc rfc txt rfc nbsp format literal ip v ipv addr esses addresses url s urls server application serverapplication keepalive tcpserversocontainer keepalive tcp server container group tcpserversocontainergroup server groups servergroups list servers array list arraylist join listener joinlistener i connect handler policy iconnecthandlerpolicy permission collection permissioncollection check connect checkconnect object add r addr fromid targetid string target group targetgroup object join data joindata exception nls nls nls nls system println join addr add r addr fromid target group target group targetgroup data join data joindata refresh nls system println connect handler policy connecthandlerpolicy refresh shared object add listener sharedobjectaddlistener i shared object policy isharedobjectpolicy permission collection permissioncollection check add shared object checkaddsharedobject fromid toid localid rep lica shared object description replicasharedobjectdescription new object newobject security exception securityexception nls nls nls system println check add shared object checkaddsharedobject fromid toid shared object sharedobject new object newobject refresh nls system println connect handler policy connecthandlerpolicy refresh container listener containerlistener i container listener icontainerlistener handle event handleevent i container event icontainerevent event event i container disconnected event icontainerdisconnectedevent nls system println nls container disconnected i container disconnected event icontainerdisconnectedevent event get target d gettargetid event i container ejected event icontainerejectedevent nls system println nls container ejected i container ejected event icontainerejectedevent event get target d gettargetid main string args exception server identity string server name servername list connectors args length nls args equals server config parser serverconfigparser parser server config parser serverconfigparser connectors parser load file input stream fileinputstream args nls args equals server name servername args connectors server groups servergroups tcp server container group tcpserversocontainergroup connectors size iterator connectors iterator has next hasnext connector connect connector server groups servergroups create server group createservergroup connect get host name gethostname connect get port getport list groups connect get groups getgroups iterator groups iterator has next hasnext name d group namedgroup group name d group namedgroup tcpserversocontainer cont create server container createservercontainer group getidforgroup server groups servergroups group get name getname connect get timeout gettimeout setup join policy i shared object container group manager isharedobjectcontainergroupmanager cont set connect policy setconnectpolicy join listener joinlistener cont add listener addlistener container listener containerlistener servers add cont nls nls system println put ting putting server connect get host name gethostname air server groups servergroups put on the air putontheair nls system println nls ctrl server server name servername server name servername tcpserversocontainer get default server l getdefaultserverurl java net uri anurl java net uri server name servername port anurl get port getport port port tcpserversocontainer port string anurl get path getpath tcpserversocontainer server groups servergroups tcp server container group tcpserversocontainergroup setup server group server groups servergroups tcp server container group tcpserversocontainergroup anurl get port getport create identity server id factory idfactory get default getdefault create string d createstringid server name servername create server config object identity timeout so container config socontainerconfig config so container config socontainerconfig server instance nls system print creating ecf server container tcpserversocontainer server tcpserversocontainer config server groups servergroups tcpserversocontainer keepalive setup join policy i shared object container group manager isharedobjectcontainergroupmanager server set connect policy setconnectpolicy join listener joinlistener setup add shared object policy i shared object manager isharedobjectmanager manager server get shared object manager getsharedobjectmanager manager set remote add policy setremoteaddpolicy shared object add listener sharedobjectaddlistener server groups servergroups put on the air putontheair servers add server nls system println success nls nls system println waiting join requests get name getname nls system println ctrl server tcp server container group tcpserversocontainergroup create server group createservergroup string port nls nls system println creating server group named listen port port tcp server container group tcpserversocontainergroup group tcp server container group tcpserversocontainergroup port group tcpserversocontainer create server container createservercontainer string tcp server container group tcpserversocontainergroup group string path keep alive keepalive id create exception idcreateexception nls nls nls system println creating container group path keep alive keepalive keep alive keepalive new server d newserverid id factory idfactory get default getdefault create string d createstringid so container config socontainerconfig config so container config socontainerconfig new server d newserverid tcpserversocontainer config group path keep alive keepalive