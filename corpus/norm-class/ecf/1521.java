copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation benjamin cabe benjamin cabe any ware anyware tech bug henrich kraemer bug update manager doesn work socks proxy org eclipse ecf provider filetransfer retrieve java buffered output stream bufferedoutputstream java file java file output stream fileoutputstream java io exception ioexception java input stream inputstream java output stream outputstream java net malformedurlexception java net url java text decimal format decimalformat java util java util map org eclipse core net proxy i proxy data iproxydata org eclipse core runtime org eclipse core runtime i adapter manager iadaptermanager org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime path org eclipse core runtime status org eclipse core runtime jobs job org eclipse ecf core identity org eclipse ecf core identity id factory idfactory org eclipse ecf core identity name space namespace org eclipse ecf core security i connect context iconnectcontext org eclipse ecf core util proxy org eclipse ecf filetransfer file transfer job filetransferjob org eclipse ecf filetransfer i file range specification ifilerangespecification org eclipse ecf filetransfer i file transfer listener ifiletransferlistener org eclipse ecf filetransfer i file transfer pausable ifiletransferpausable org eclipse ecf filetransfer i file transfer runnable ifiletransferrunnable org eclipse ecf filetransfer i incoming file transfer iincomingfiletransfer org eclipse ecf filetransfer i retrieve file transfer options iretrievefiletransferoptions org eclipse ecf filetransfer incoming file transfer exception incomingfiletransferexception org eclipse ecf filetransfer user cancelled exception usercancelledexception org eclipse ecf filetransfer events i incoming file transfer receive data event iincomingfiletransferreceivedataevent org eclipse ecf filetransfer events i incoming file transfer receive done event iincomingfiletransferreceivedoneevent org eclipse ecf filetransfer events i incoming file transfer receive paused event iincomingfiletransferreceivepausedevent org eclipse ecf filetransfer events i incoming file transfer receive res umed event iincomingfiletransferreceiveresumedevent org eclipse ecf filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent org eclipse ecf filetransfer identity i file d ifileid org eclipse ecf filetransfer service i retrieve file transfer iretrievefiletransfer org eclipse ecf internal provider filetransfer activator org eclipse ecf internal provider filetransfer messages org eclipse ecf provider filetransfer identity file transfer name space filetransfernamespace org eclipse ecf provider filetransfer util polling input stream pollinginputstream org eclipse ecf provider filetransfer util proxy setup helper proxysetuphelper org eclipse ecf provider filetransfer util timeout input stream timeoutinputstream org eclipse osgi util nls abstract retrieve file transfer abstractretrievefiletransfer i incoming file transfer iincomingfiletransfer i retrieve file transfer iretrievefiletransfer i file transfer pausable ifiletransferpausable buf length nls nls polling retry att empts attempts integer system get property getproperty org eclipse ecf provider filetransfer retrieve retry attempts retryattempts int value intvalue timeout input stream inputstream buffer size nls nls read timeout integer system get property getproperty org eclipse ecf provider filetransfer retrieve read timeout readtimeout int value intvalue nls nls close timeout integer system get property getproperty org eclipse ecf provider filetransfer retrieve close timeout closetimeout int value intvalue string read timeout message readtimeoutmessage nls timeout reading input stream nls system properties adjust read timeout readtimeout retry attempts retryattempts close timeout closetimeout nls torg eclipse ecf provider filetransfer retrieve read timeout readtimeout nls torg eclipse ecf provider filetransfer retrieve retry attempts retryattempts nls torg eclipse ecf provider filetransfer retrieve close timeout closetimeout string close timeout message closetimeoutmessage nls timeout closing input stream nls system properties adjust read timeout readtimeout retry attempts retryattempts close timeout closetimeout nls torg eclipse ecf provider filetransfer retrieve read timeout readtimeout nls torg eclipse ecf provider filetransfer retrieve retry attempts retryattempts nls torg eclipse ecf provider filetransfer retrieve close timeout closetimeout object job lock joblock object job job url remotefileurl i file d ifileid remote file d remotefileid i file transfer listener ifiletransferlistener listener buf f buff length buf length bytes received bytesreceived input stream inputstream remote file contents remotefilecontents output stream outputstream local file contents localfilecontents close output stream closeoutputstream exception exception file length filelength last modified time lastmodifiedtime map options paused i file range specification ifilerangespecification range specification rangespecification proxy proxy i connect context iconnectcontext connect context connectcontext transfer start time transferstarttime download rate bytes per second downloadratebytespersecond map response headers responseheaders abstract retrieve file transfer abstractretrievefiletransfer input stream inputstream wrap transfer read input stream wraptransferreadinputstream input stream inputstream input stream inputstream i progress monitor iprogressmonitor monitor polling input stream pollinginputstream input stream inputstream get retry attempts getretryattempts monitor read timeout message readtimeoutmessage close timeout message closetimeoutmessage get retry attempts getretryattempts result polling retry att empts attempts map local options localoptions get options getoptions local options localoptions property nls object local options localoptions org eclipse ecf provider filetransfer retrieve retry attempts retryattempts integer result integer int value intvalue string result integer string int value intvalue result i file transfer runnable ifiletransferrunnable file transfer runnable filetransferrunnable i file transfer runnable ifiletransferrunnable i status istatus perform file transfer performfiletransfer i progress monitor iprogressmonitor monitor transfer start time transferstarttime system current time millis currenttimemillis buf buf f buff length total work totalwork file length filelength file length filelength factor total work totalwork integer max integer max total work totalwork work total work totalwork integer max integer max total work totalwork monitor begin task begintask get remote file l getremotefileurl to string tostring messages abstract retrieve file transfer abstractretrievefiletransfer progress data work input stream inputstream read input stream readinputstream bug https bugs eclipse org bugs bug cgi remote file contents remotefilecontents io exception ioexception input stream create read input stream read input stream readinputstream wrap transfer read input stream wraptransferreadinputstream remote file contents remotefilecontents monitor is done isdone is paused ispaused bytes read input stream readinputstream read buf handle received data handlereceiveddata buf bytes factor monitor operation canceled exception operationcanceledexception user cancelled exception usercancelledexception messages abstract retrieve file transfer abstractretrievefiletransfer exception user cancelled exception is done isdone set done exception setdoneexception read input stream readinputstream read input stream readinputstream close io exception ioexception activator activator get default getdefault log status i status istatus error activator plugin i status istatus error hard close hardclose hard close hardclose monitor is paused ispaused fire transfer receive paused event firetransferreceivepausedevent fire transfer receive done event firetransferreceivedoneevent exception activator activator get default getdefault log status i status istatus error activator plugin i status istatus error messages abstract retrieve file transfer abstractretrievefiletransfer exception get final status getfinalstatus exception url get remote file l getremotefileurl remotefileurl get socket read timeout getsocketreadtimeout result read timeout map local options localoptions get options getoptions local options localoptions connect timeout option object local options localoptions i retrieve file transfer options iretrievefiletransferoptions read timeout integer result integer int value intvalue string result integer string int value intvalue result nls local options localoptions org eclipse ecf provider filetransfer http client httpclient retrieve read timeout readtimeout integer result integer int value intvalue string result integer string int value intvalue result get socket close timeout getsocketclosetimeout result close timeout map local options localoptions get options getoptions local options localoptions property nls object local options localoptions org eclipse ecf provider filetransfer retrieve close timeout closetimeout integer result integer int value intvalue string result integer string int value intvalue result set input stream setinputstream input stream inputstream ins remote file contents remotefilecontents timeout input stream timeoutinputstream ins timeout input stream inputstream buffer size get socket read timeout getsocketreadtimeout get socket close timeout getsocketclosetimeout set output stream setoutputstream output stream outputstream outs local file contents localfilecontents outs set close output stream setcloseoutputstream close close output stream closeoutputstream close set file length setfilelength length file length filelength length set last modified time setlastmodifiedtime timestamp last modified time lastmodifiedtime timestamp map get options getoptions options handle received data handlereceiveddata buf bytes factor i progress monitor iprogressmonitor monitor io exception ioexception bytes bytes received bytesreceived bytes local file contents localfilecontents write buf bytes download rate bytes per second downloadratebytespersecond bytes received bytesreceived system current time millis currenttimemillis transfer start time transferstarttime monitor set task name settaskname create job name createjobname messages abstract retrieve file transfer abstractretrievefiletransfer progress data nls bind messages abstract retrieve file transfer abstractretrievefiletransfer info transfer rate infotransferrate to human readable bytes tohumanreadablebytes download rate bytes per second downloadratebytespersecond monitor worked math factor bytes fire transfer receive data event firetransferreceivedataevent set done setdone string to human readable bytes tohumanreadablebytes size converted size convertedsize string unit size converted size convertedsize size unit messages abstract retrieve file transfer abstractretrievefiletransfer size unit b sizeunitgb size converted size convertedsize size unit messages abstract retrieve file transfer abstractretrievefiletransfer size unit b sizeunitmb size converted size convertedsize size unit messages abstract retrieve file transfer abstractretrievefiletransfer size unit b sizeunitkb converted size convertedsize size unit messages abstract retrieve file transfer abstractretrievefiletransfer size unit bytes sizeunitbytes decimal format decimalformat decimal format decimalformat nls bind messages abstract retrieve file transfer abstractretrievefiletransfer transfer rate format transferrateformat unit format converted size convertedsize javadoc org eclipse ecf core identity i ide ntifiable iidentifiable getid getid remote file d remotefileid i status istatus get final status getfinalstatus throwable exception status status hard close hardclose remote file contents remotefilecontents remote file contents remotefilecontents close io exception ioexception activator get default getdefault log status i status istatus error activator plugin i status istatus error hard close hardclose local file contents localfilecontents close output stream closeoutputstream local file contents localfilecontents close io exception ioexception activator get default getdefault log status i status istatus error activator plugin i status istatus error hard close hardclose leave job int act intact ensure event fire d fired remote file contents remotefilecontents local file contents localfilecontents fire transfer receive paused event firetransferreceivepausedevent listener handle transfer event handletransferevent i incoming file transfer receive paused event iincomingfiletransferreceivepausedevent i incoming file transfer iincomingfiletransfer get source getsource abstract retrieve file transfer abstractretrievefiletransfer string to string tostring string buffer stringbuffer nls string buffer stringbuffer nls i incoming file transfer receive paused event iincomingfiletransferreceivepausedevent nls append bytes received bytesreceived append nls bytes received bytesreceived append file length filelength append file length filelength append nls nls to string tostring fire transfer receive done event firetransferreceivedoneevent listener handle transfer event handletransferevent i incoming file transfer receive done event iincomingfiletransferreceivedoneevent i incoming file transfer iincomingfiletransfer get source getsource abstract retrieve file transfer abstractretrievefiletransfer exception get exception getexception abstract retrieve file transfer abstractretrievefiletransfer get exception getexception string to string tostring string buffer stringbuffer nls string buffer stringbuffer nls i incoming file transfer receive done event iincomingfiletransferreceivedoneevent nls append bytes received bytesreceived append nls bytes received bytesreceived append file length filelength append file length filelength append exception append nls nls get exception getexception append nls to string tostring fire transfer receive data event firetransferreceivedataevent listener handle transfer event handletransferevent i incoming file transfer receive data event iincomingfiletransferreceivedataevent i incoming file transfer iincomingfiletransfer get source getsource abstract retrieve file transfer abstractretrievefiletransfer string to string tostring string buffer stringbuffer nls string buffer stringbuffer nls i incoming file transfer receive data event iincomingfiletransferreceivedataevent nls append bytes received bytesreceived append nls bytes received bytesreceived append nls file length filelength append nls file length filelength append nls to string tostring javadoc see org seeorg eclipse ecf filetransfer i retrieve file transfer container adapter iretrievefiletransfercontaineradapter set connect context for authentication setconnectcontextforauthentication org eclipse ecf core security i connect context iconnectcontext set connect context for authentication setconnectcontextforauthentication i connect context iconnectcontext connect context connectcontext connect context connectcontext connect context connectcontext javadoc org eclipse ecf filetransfer i retrieve file transfer container adapter iretrievefiletransfercontaineradapter set proxy setproxy org eclipse ecf core util proxy set proxy setproxy proxy proxy proxy proxy javadoc org eclipse ecf filetransfer i incoming file transfer iincomingfiletransfer get bytes received getbytesreceived get bytes received getbytesreceived bytes received bytesreceived todo replace instances user cancelled exception usercancelledexception new user cancelled exception newusercancelledexception user cancelled exception usercancelledexception messages abstract retrieve file transfer abstractretrievefiletransfer exception user cancelled reset done and exception resetdoneandexception set done setdone exception set done setdone set done exception setdoneexception exception exception is canceled iscanceled exception user cancelled exception usercancelledexception set done canceled setdonecanceled set done canceled setdonecanceled new user cancelled exception newusercancelledexception set done canceled setdonecanceled exception user cancelled exception usercancelledexception exception exception new user cancelled exception newusercancelledexception javadoc org eclipse ecf filetransfer i file transfer ifiletransfer cancel cancel is paused ispaused set done canceled setdonecanceled fire transfer receive done event firetransferreceivedoneevent job lock joblock job job cancel javadoc org eclipse ecf filetransfer i file transfer ifiletransfer get exception getexception exception get exception getexception exception javadoc org eclipse ecf filetransfer i file transfer ifiletransfer get per cent complete getpercentcomplete get per cent complete getpercentcomplete file length filelength file length filelength file length filelength bytes received bytesreceived file length filelength javadoc org eclipse ecf filetransfer i file transfer ifiletransfer get file length getfilelength get file length getfilelength file length filelength javadoc org eclipse ecf provider filetransfer retrieve abstract retrieve file transfer abstractretrievefiletransfer get remote last modified getremotelastmodified get remote last modified getremotelastmodified last modified time lastmodifiedtime last modified time lastmodifiedtime javadoc org eclipse ecf filetransfer i file transfer ifiletransfer is done isdone is done isdone javadoc org eclipse core runtime i adaptable iadaptable get adapter getadapter java lang object get adapter getadapter adapter adapter adapter is instance isinstance i adapter manager iadaptermanager adapter manager adaptermanager activator get default getdefault get adapter manager getadaptermanager adapter manager adaptermanager adapter manager adaptermanager load adapter loadadapter adapter get name getname open incoming out going outgoing str eams streams file transfer subclasses implement method open input output str eams streams code remote file contents remotefilecontents code code local file content localfilecontent code code code successful completion implementation method incoming file transfer exception incomingfiletransferexception open streams openstreams incoming file transfer exception incomingfiletransferexception javadoc see org seeorg eclipse ecf filetransfer i retrieve file transfer container adapter iretrievefiletransfercontaineradapter send retrieve request sendretrieverequest org eclipse ecf filetransfer identity i file d ifileid org eclipse ecf filetransfer i file transfer listener ifiletransferlistener java util map send retrieve request sendretrieverequest i file d ifileid remote file d remotefileid i file transfer listener ifiletransferlistener transfer listener transferlistener map options incoming file transfer exception incomingfiletransferexception send retrieve request sendretrieverequest remote file d remotefileid transfer listener transferlistener options javadoc see org seeorg eclipse ecf filetransfer i retrieve file transfer container adapter iretrievefiletransfercontaineradapter get retrieve name space getretrievenamespace name space namespace get retrieve name space getretrievenamespace id factory idfactory get default getdefault get name space by name getnamespacebyname file transfer name space filetransfernamespace protocol javadoc org eclipse ecf filetransfer i file transfer pausable ifiletransferpausable is paused ispaused is paused ispaused paused sub class subclass overridable version link pause subclasses provide implementation method support link i file transfer pausable ifiletransferpausable pause successful code code do pause dopause javadoc org eclipse ecf filetransfer i file transfer pausable ifiletransferpausable pause pause do pause dopause sub class subclass overridable version link resume subclasses provide implementation method support link i file transfer pausable ifiletransferpausable resume successful code code do resume doresume javadoc org eclipse ecf filetransfer i file transfer pausable ifiletransferpausable resume resume do resume doresume javadoc org eclipse ecf filetransfer i incoming file transfer iincomingfiletransfer get listener getlistener i file transfer listener ifiletransferlistener get listener getlistener listener string create range name createrangename range specification rangespecification nls nls nls nls range specification rangespecification get start position getstartposition range specification rangespecification get end position getendposition string create job name createjobname get remote file l getremotefileurl to string tostring create range name createrangename setup and schedule job setupandschedulejob file transfer job filetransferjob file transfer job filetransferjob file transfer job filetransferjob create file transfer job filetransferjob file transfer job filetransferjob create job name createjobname runnable file transfer job filetransferjob set file transfer runnable setfiletransferrunnable file transfer runnable filetransferrunnable file transfer job filetransferjob set file transfer setfiletransfer is done isdone job lock joblock job file transfer job filetransferjob job schedule fire receive start event firereceivestartevent listener handle transfer event handletransferevent i incoming file transfer receive start event iincomingfiletransferreceivestartevent javadoc see org seeorg eclipse ecf filetransfer events i incoming file transfer event iincomingfiletransferevent get file d getfileid i incoming file transfer iincomingfiletransfer get source getsource abstract retrieve file transfer abstractretrievefiletransfer javadoc see org seeorg eclipse ecf filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent get file d getfileid i file d ifileid get file d getfileid remote file d remotefileid javadoc see org seeorg eclipse ecf filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent receive java file i incoming file transfer iincomingfiletransfer receive file local file to save localfiletosave io exception ioexception receive local file to save localfiletosave javadoc see org seeorg eclipse ecf filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent receive java file org eclipse ecf filetransfer file transfer job filetransferjob i incoming file transfer iincomingfiletransfer receive file local file to save localfiletosave file transfer job filetransferjob file transfer job filetransferjob io exception ioexception set output stream setoutputstream buffered output stream bufferedoutputstream file output stream fileoutputstream local file to save localfiletosave setup and schedule job setupandschedulejob file transfer job filetransferjob abstract retrieve file transfer abstractretrievefiletransfer param stream to store streamtostore incoming file transfer instance io exception ioexception thrown implementation i incoming file transfer iincomingfiletransfer receive output stream outputstream stream to store streamtostore io exception ioexception receive stream to store streamtostore io exception ioexception thrown implementation i incoming file transfer iincomingfiletransfer receive output stream outputstream stream to store streamtostore file transfer job filetransferjob file transfer job filetransferjob io exception ioexception set output stream setoutputstream stream to store streamtostore set close output stream setcloseoutputstream setup and schedule job setupandschedulejob file transfer job filetransferjob abstract retrieve file transfer abstractretrievefiletransfer javadoc see org seeorg eclipse ecf filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent cancel cancel abstract retrieve file transfer abstractretrievefiletransfer cancel javadoc java lang object to string tostring string to string tostring string buffer stringbuffer nls string buffer stringbuffer nls i incoming file transfer receive start event iincomingfiletransferreceivestartevent nls nls append isdone append is done isdone append nls append bytes received bytesreceived append nls bytes received bytesreceived append nls to string tostring map get response headers getresponseheaders response headers responseheaders fire receive res umed event firereceiveresumedevent listener handle transfer event handletransferevent i incoming file transfer receive res umed event iincomingfiletransferreceiveresumedevent i incoming file transfer iincomingfiletransfer get source getsource abstract retrieve file transfer abstractretrievefiletransfer i file d ifileid get file d getfileid remote file d remotefileid i incoming file transfer iincomingfiletransfer receive file local file to save localfiletosave append io exception ioexception receive local file to save localfiletosave append i incoming file transfer iincomingfiletransfer receive file local file to save localfiletosave file transfer job filetransferjob file transfer job filetransferjob append io exception ioexception set output stream setoutputstream buffered output stream bufferedoutputstream file output stream fileoutputstream local file to save localfiletosave get name getname append setup and schedule job setupandschedulejob file transfer job filetransferjob abstract retrieve file transfer abstractretrievefiletransfer i incoming file transfer iincomingfiletransfer receive output stream outputstream stream to store streamtostore io exception ioexception receive stream to store streamtostore i incoming file transfer iincomingfiletransfer receive output stream outputstream stream to store streamtostore file transfer job filetransferjob file transfer job filetransferjob io exception ioexception set output stream setoutputstream stream to store streamtostore set close output stream setcloseoutputstream setup and schedule job setupandschedulejob file transfer job filetransferjob abstract retrieve file transfer abstractretrievefiletransfer javadoc see org seeorg eclipse ecf filetransfer events i incoming file transfer receive start event iincomingfiletransferreceivestartevent cancel cancel hard close hardclose string to string tostring string buffer stringbuffer nls string buffer stringbuffer nls i incoming file transfer receive res umed event iincomingfiletransferreceiveresumedevent nls nls append isdone append is done isdone append nls append bytes received bytesreceived append nls bytes received bytesreceived append nls to string tostring map get response headers getresponseheaders response headers responseheaders javadoc org eclipse ecf filetransfer i incoming file transfer iincomingfiletransfer get file range specification getfilerangespecification i file range specification ifilerangespecification get file range specification getfilerangespecification range specification rangespecification javadoc see org seeorg eclipse ecf filetransfer i retrieve file transfer container adapter iretrievefiletransfercontaineradapter send retrieve request sendretrieverequest org eclipse ecf filetransfer identity i file d ifileid org eclipse ecf filetransfer i file range specification ifilerangespecification org eclipse ecf filetransfer i file transfer listener ifiletransferlistener java util map incoming file transfer exception incomingfiletransferexception send retrieve request sendretrieverequest i file d ifileid r file d rfileid i file range specification ifilerangespecification range spec rangespec i file transfer listener ifiletransferlistener transfer listener transferlistener map ops incoming file transfer exception incomingfiletransferexception is not null isnotnull r file d rfileid messages abstract retrieve file transfer abstractretrievefiletransfer remote file d remotefileid is not null isnotnull transfer listener transferlistener messages abstract retrieve file transfer abstractretrievefiletransfer transfer listener transferlistener job lock joblock job remotefileurl remote file d remotefileid r file d rfileid listener transfer listener transferlistener remote file contents remotefilecontents local file contents localfilecontents close output stream closeoutputstream reset done and exception resetdoneandexception bytes received bytesreceived file length filelength options ops paused range specification rangespecification range spec rangespec remotefileurl r file d rfileid geturl malformedurlexception set done exception setdoneexception fire transfer receive done event firetransferreceivedoneevent setup proxies setupproxies open streams openstreams incoming file transfer exception incomingfiletransferexception set done exception setdoneexception fire transfer receive done event firetransferreceivedoneevent setup ecf proxy subclasses override method proxy setup method called link send retrieve request sendretrieverequest i file d ifileid i file transfer listener ifiletransferlistener map link send retrieve request sendretrieverequest i file d ifileid i file range specification ifilerangespecification i file transfer listener ifiletransferlistener map prior actual call link open streams openstreams param proxy proxy setup code code setup proxy setupproxy proxy proxy select single proxy proxies host implementation sel ects selects manner proxies array length returned proxy array length entry returned proxies length type proxy array matches protocol http https matching proxy returned protocol match proxies proxy proxies returned subclasses override desired param protocol target protocol http https scp code code param proxies proxies select code code array length proxy data selected proxies i proxy data iproxydata select proxy from proxies selectproxyfromproxies string protocol i proxy data iproxydata proxies proxies proxies length proxy proxies length proxies nls protocol equals ignore case equalsignorecase http proxies length proxies get type gettype equals i proxy data iproxydata http proxy type proxies nls protocol equals ignore case equalsignorecase https proxies length proxies get type gettype equals i proxy data iproxydata https proxy type proxies have n haven proxies setup proxies setupproxies settings proxy proxy proxy setup helper proxysetuphelper get proxy getproxy get remote file l getremotefileurl to external form toexternalform no class def found error noclassdeffounderror activator log no proxy warning lognoproxywarning proxy setup proxy setupproxy proxy javadoc org eclipse ecf filetransfer i incoming file transfer iincomingfiletransfer get remote file name getremotefilename string get remote file name getremotefilename string path str pathstr get remote file l getremotefileurl get path getpath path str pathstr length i path ipath path path from portable string fromportablestring path str pathstr path segment count segmentcount path last segment lastsegment target has gz suffix targethasgzsuffix string target target nls target ends with endswith