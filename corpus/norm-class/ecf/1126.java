copyright remy chi jian suen rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors remy chi jian suen initial api implementation org eclipse ecf tests provider data share datashare nio java net inet socket address inetsocketaddress junit framework test case testcase org eclipse ecf core i container icontainer org eclipse ecf core identity org eclipse ecf core identity id factory idfactory org eclipse ecf core util ecf exception ecfexception org eclipse ecf data share datashare i channel ichannel org eclipse ecf data share datashare i channel container adapter ichannelcontaineradapter org eclipse ecf data share datashare i channel listener ichannellistener org eclipse ecf data share datashare events i channel connect event ichannelconnectevent org eclipse ecf data share datashare events i channel disconnect event ichanneldisconnectevent org eclipse ecf data share datashare events i channel event ichannelevent org eclipse ecf data share datashare events i channel message event ichannelmessageevent nio data share test niodatasharetest test case testcase nls string local host localhost string local host localhost localhost nls string local host localhost nls nls string channel channel object wait object waitobject object exception exception i container icontainer container a containera container impl containerimpl i container icontainer container b containerb container impl containerimpl concreteniodatasharecontainer channel container a channelcontainera concreteniodatasharecontainer channel container b channelcontainerb concreteniochannel channel a channela concreteniochannel channel b channelb assert equals assertequals expected actual don arrays equals accurate failure assert not null assertnotnull expected assert not null assertnotnull actual assert equals assertequals expected length actual length expected length assert equals assertequals expected actual concreteniochannel create channel createchannel i channel container adapter ichannelcontaineradapter channel container channelcontainer ecf exception ecfexception create channel createchannel channel container channelcontainer concreteniochannel create channel createchannel i channel container adapter ichannelcontaineradapter channel container channelcontainer i channel listener ichannellistener listener ecf exception ecfexception concreteniochannel channel container channelcontainer create channel createchannel id factory idfactory get default getdefault create string d createstringid channel listener set up setup exception set up setup channel container a channelcontainera concreteniodatasharecontainer container a containera channel container b channelcontainerb concreteniodatasharecontainer container b containerb exception tear down teardown exception container a containera disconnect container b containerb disconnect channel container a channelcontainera channel container b channelcontainerb channel a channela channel b channelb don pending threads wait object waitobject wait object waitobject notify all notifyall tear down teardown wait for completion waitforcompletion timeout exception wait object waitobject wait object waitobject wait timeout exception exception send i channel ichannel channel receiver data channel send message sendmessage receiver data ecf exception ecfexception exception wait object waitobject wait object waitobject notify test channel connect event testchannelconnectevent exception event ids eventids channel a channela create channel createchannel channel container a channelcontainera i channel listener ichannellistener handle channel event handlechannelevent i channel event ichannelevent i channel connect event ichannelconnectevent i channel connect event ichannelconnectevent event i channel connect event ichannelconnectevent event ids eventids event get channel d getchannelid event ids eventids event get target d gettargetid container a containera connect assert equals assertequals channel a channela getid event ids eventids assert equals assertequals container a containera get connected d getconnectedid event ids eventids test container fires events data share datashare implementation ignoring listener throwing runtime exceptions test channel connect event without listeners testchannelconnecteventwithoutlisteners exception channel a channela create channel createchannel channel container a channelcontainera container a containera connect test channel disconnect event testchanneldisconnectevent exception event ids eventids channel a channela create channel createchannel channel container a channelcontainera i channel listener ichannellistener handle channel event handlechannelevent i channel event ichannelevent i channel disconnect event ichanneldisconnectevent i channel disconnect event ichanneldisconnectevent event i channel disconnect event ichanneldisconnectevent event ids eventids event get channel d getchannelid event ids eventids event get target d gettargetid container a containera disconnect assert equals assertequals channel a channela getid event ids eventids tech nically technically get connected d getconnectedid container disconnected assert equals assertequals container a containera get connected d getconnectedid event ids eventids test container fires events data share datashare implementation ignoring listener throwing runtime exceptions test channel disconnect event without listeners testchanneldisconnecteventwithoutlisteners exception channel a channela create channel createchannel channel container a channelcontainera container a containera disconnect test one way send testonewaysend exception actual channel a channela create channel createchannel channel container a channelcontainera target port targetport channel a channela get port getport channel b channelb create channel createchannel channel container b channelcontainerb i channel listener ichannellistener handle channel event handlechannelevent i channel event ichannelevent event event i channel message event ichannelmessageevent actual i channel message event ichannelmessageevent event get data getdata wait object waitobject wait object waitobject notify expected channel a channela send message sendmessage container b containerb get connected d getconnectedid expected channel container b channelcontainerb enqueue inet socket address inetsocketaddress local host localhost target port targetport wait for completion waitforcompletion assert equals assertequals expected actual test one way send testonewaysend exception actual channel a channela create channel createchannel channel container a channelcontainera target port targetport channel a channela get port getport channel b channelb create channel createchannel channel container b channelcontainerb i channel listener ichannellistener handle channel event handlechannelevent i channel event ichannelevent event event i channel message event ichannelmessageevent actual i channel message event ichannelmessageevent event get data getdata wait object waitobject wait object waitobject notify expected expected length expected channel a channela send message sendmessage container b containerb get connected d getconnectedid expected channel container b channelcontainerb enqueue inet socket address inetsocketaddress local host localhost target port targetport wait for completion waitforcompletion assert equals assertequals expected actual test send and reply testsendandreply exception expected expected actual channel a channela create channel createchannel channel container a channelcontainera i channel listener ichannellistener handle channel event handlechannelevent i channel event ichannelevent event event i channel message event ichannelmessageevent actual i channel message event ichannelmessageevent event get data getdata wait object waitobject wait object waitobject notify target port targetport channel a channela get port getport channel b channelb create channel createchannel channel container b channelcontainerb i channel listener ichannellistener handle channel event handlechannelevent i channel event ichannelevent event event i channel message event ichannelmessageevent actual i channel message event ichannelmessageevent event get data getdata send channel b channelb container a containera get connected d getconnectedid expected channel a channela send message sendmessage container b containerb get connected d getconnectedid expected channel container b channelcontainerb enqueue inet socket address inetsocketaddress local host localhost target port targetport wait for completion waitforcompletion assert equals assertequals expected actual assert equals assertequals expected actual