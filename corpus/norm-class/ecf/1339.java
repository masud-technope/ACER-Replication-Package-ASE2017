copyright apache software foundation licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license software consists voluntary contributions individuals behalf apache software foundation apache software foundation http apache org additional not ices notices required prior licensing conditions org apache commons http client httpclient junit framework test junit framework test suite testsuite java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java input stream inputstream java util hash map hashmap java util map java util string tokenizer stringtokenizer org apache commons http client httpclient methods get method getmethod org apache commons http client httpclient methods post method postmethod org apache commons http client httpclient methods request entity requestentity org apache commons http client httpclient methods string request entity stringrequestentity org apache commons http client httpclient util uri util uriutil test method char encoding testmethodcharencoding http client test base httpclienttestbase string charset iso string charset ascii ascii string charset utf utf string charset koi koi string charset win swiss german stuff unicode xfc swiss german stuff iso xfc swiss german stuff utf xbc russian stuff unicode russian stuff utf xbc xbf russian stuff koi xcd russian stuff win xec xef test method char encoding testmethodcharencoding string test name testname io exception ioexception test name testname test case testcase methods test suite test suite testsuite test method char encoding testmethodcharencoding tests test request char encoding testrequestcharencoding io exception ioexception get method getmethod http get httpget get method getmethod assert equals assertequals charset http get httpget get request char set getrequestcharset http get httpget set request header setrequestheader content type text plain charset charset ascii assert equals assertequals charset ascii http get httpget get request char set getrequestcharset http get httpget set request header setrequestheader content type text plain charset charset utf assert equals assertequals charset utf http get httpget get request char set getrequestcharset test no explicit char encoding testnoexplicitcharencoding exception server set http service sethttpservice echo service echoservice get method getmethod http get httpget get method getmethod test http get httpget set request header setrequestheader content type text plain client execute method executemethod http get httpget assert equals assertequals http status httpstatus http get httpget get status code getstatuscode assert equals assertequals charset http get httpget get response char set getresponsecharset http get httpget release connection releaseconnection test explicit char encoding testexplicitcharencoding exception server set http service sethttpservice echo service echoservice get method getmethod http get httpget get method getmethod test http get httpget set request header setrequestheader content type text plain charset charset utf client execute method executemethod http get httpget assert equals assertequals http status httpstatus http get httpget get status code getstatuscode assert equals assertequals charset utf http get httpget get response char set getresponsecharset http get httpget release connection releaseconnection string construct string constructstring unicode chars unicodechars string buffer stringbuffer buffer string buffer stringbuffer unicode chars unicodechars unicode chars unicodechars length buffer append unicode chars unicodechars buffer to string tostring verify encoding verifyencoding request entity requestentity entity sample io exception ioexception assert not null assertnotnull request body entity byte array output stream bytearrayoutputstream bos byte array output stream bytearrayoutputstream entity write request writerequest bos input stream inputstream ins tream instream byte array input stream bytearrayinputstream bos to byte array tobytearray sample length ins tream instream read assert true asserttrue unexpected stream sample fail invalid request body encoding assert true asserttrue stream expected ins tream instream read test latin accent in request body testlatinaccentinrequestbody io exception ioexception post method postmethod http post httppost post method postmethod string construct string constructstring swiss german stuff unicode test encoding iso http post httppost set request entity setrequestentity string request entity stringrequestentity text plain charset verify encoding verifyencoding http post httppost get request entity getrequestentity swiss german stuff iso test utf encoding http post httppost set request entity setrequestentity string request entity stringrequestentity text plain charset utf verify encoding verifyencoding http post httppost get request entity getrequestentity swiss german stuff utf test russian in request body testrussianinrequestbody io exception ioexception post method postmethod http post httppost post method postmethod string construct string constructstring russian stuff unicode test utf encoding http post httppost set request entity setrequestentity string request entity stringrequestentity text plain charset utf verify encoding verifyencoding http post httppost get request entity getrequestentity russian stuff utf test koi http post httppost set request entity setrequestentity string request entity stringrequestentity text plain charset koi verify encoding verifyencoding http post httppost get request entity getrequestentity russian stuff koi test win http post httppost set request entity setrequestentity string request entity stringrequestentity text plain charset win verify encoding verifyencoding http post httppost get request entity getrequestentity russian stuff win test query params testqueryparams exception get method getmethod get method getmethod string msg construct string constructstring russian stuff unicode string msg construct string constructstring swiss german stuff unicode set query string setquerystring name value pair namevaluepair name value pair namevaluepair msg name value pair namevaluepair msg map params hash map hashmap string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer get query string getquerystring tokenizer has more tokens hasmoretokens string tokenizer next token nexttoken index of indexof assert true asserttrue invalid url encoded parameters string substring trim string substring length trim uri util uriutil decode charset utf params assert equals assertequals msg params assert equals assertequals msg params test url encoded request body testurlencodedrequestbody exception post method postmethod http post httppost post method postmethod string msg construct string constructstring russian stuff unicode string msg construct string constructstring swiss german stuff unicode http post httppost set request body setrequestbody name value pair namevaluepair name value pair namevaluepair msg name value pair namevaluepair msg http post httppost set request header setrequestheader content type post method postmethod form url encoded content type charset charset utf byte array output stream bytearrayoutputstream bos byte array output stream bytearrayoutputstream http post httppost get request entity getrequestentity write request writerequest bos map params hash map hashmap string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer string bos to byte array tobytearray charset utf tokenizer has more tokens hasmoretokens string tokenizer next token nexttoken index of indexof assert true asserttrue invalid url encoded parameters string substring trim string substring length trim uri util uriutil decode charset utf params assert equals assertequals msg params assert equals assertequals msg params test request entity length testrequestentitylength io exception ioexception string construct string constructstring swiss german stuff unicode request entity requestentity request entity requestentity string request entity stringrequestentity text plain charset utf assert equals assertequals get bytes getbytes charset utf length request entity requestentity get content length getcontentlength