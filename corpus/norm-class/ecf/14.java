copyright mark us markus alexander kuppe rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors mark us markus alexander kuppe ecf dev eclipse org lemmster dot initial api implementation org eclipse ecf tests provider discovery java lang reflect method java lang reflect modifier java util array list arraylist java util collection java util iterator org eclipse ecf discovery i discovery advertiser idiscoveryadvertiser org eclipse ecf discovery i discovery locator idiscoverylocator org eclipse ecf provider discovery composite discovery container compositediscoverycontainer org eclipse ecf tests discovery activator org osgi framework bundle context bundlecontext org osgi framework service event serviceevent org osgi framework service reference servicereference org osgi framework service registration serviceregistration org osgi framework hooks service event hook eventhook org osgi framework hooks service find hook findhook single composite discovery service container test singlecompositediscoveryservicecontainertest composite discovery service container test compositediscoveryservicecontainertest osg i osgi hooks registered individual test test tests executed random order int erleaved interleaved tests set up setup tear down teardown test expect test failures setup osgi hooks test test methods testmethods test methods left testmethodsleft service registration serviceregistration find hook findhook count test methods method methods single composite discovery service container test singlecompositediscoveryservicecontainertest get methods getmethods methods length method method methods method get name getname starts with startswith test method get modifiers getmodifiers modifier test methods testmethods test methods left testmethodsleft test methods testmethods string ecf discovery container name ecfdiscoverycontainername string class name classname single composite discovery service container test singlecompositediscoveryservicecontainertest string anecfdiscoverycontainername string a class name aclassname ecf discovery container name ecfdiscoverycontainername anecfdiscoverycontainername class name classname a class name aclassname do set up dosetup setup osgi hooks test test methods left testmethodsleft test methods testmethods do tear down doteardown setup osgi hooks test test methods left testmethodsleft javadoc org eclipse ecf tests provider discovery composite discovery service container test compositediscoveryservicecontainertest set up setup set up setup exception hack before class beforeclass j unit junit functionality do set up dosetup hack force fully forcefully start nested discovery container has n hasn started assuming bundle declares lazy start buddy policy for name forname class name classname init ially initially close existing cdc rid test left overs activator get default getdefault close service tracker closeservicetracker container under test containerundertest bundle context bundlecontext context activator get default getdefault get context getcontext string clazzes string find hook findhook get name getname event hook eventhook get name getname find hook findhook context register service registerservice clazzes discovery container filter hook discoverycontainerfilterhook ecf discovery container name ecfdiscoverycontainername set up setup javadoc org eclipse ecf tests discovery discovery test discoverytest tear down teardown tear down teardown exception tear down teardown hack before class beforeclass j unit junit functionality do tear down doteardown find hook findhook find hook findhook unregister find hook findhook close tracker force creation cdc instance activator get default getdefault close service tracker closeservicetracker container under test containerundertest reset instances reuse test methods left testmethodsleft test methods testmethods javadoc org eclipse ecf tests discovery discovery service test discoveryservicetest get discovery locator getdiscoverylocator i discovery locator idiscoverylocator get discovery locator getdiscoverylocator i discovery locator idiscoverylocator idl get discovery locator getdiscoverylocator check composite discovery container checkcompositediscoverycontainer class name classname composite discovery container compositediscoverycontainer idl idl javadoc org eclipse ecf tests discovery discovery service test discoveryservicetest get discovery advertiser getdiscoveryadvertiser i discovery advertiser idiscoveryadvertiser get discovery advertiser getdiscoveryadvertiser i discovery advertiser idiscoveryadvertiser ida get discovery advertiser getdiscoveryadvertiser check composite discovery container checkcompositediscoverycontainer class name classname composite discovery container compositediscoverycontainer ida ida cdc single idc registered correct type check composite discovery container checkcompositediscoverycontainer string a class name aclassname composite discovery container compositediscoverycontainer cdc collection discovery containers discoverycontainers cdc get discovery containers getdiscoverycontainers assert true asserttrue i discovery container idiscoverycontainer registered cdc point discovery containers discoverycontainers discovery containers discoverycontainers size iterator iterator discovery containers discoverycontainers iterator iterator has next hasnext i discovery locator idiscoverylocator i discovery locator idiscoverylocator iterator assert equals assertequals a class name aclassname get class getclass get name getname registered cdc discovery container filter hook discoverycontainerfilterhook find hook findhook event hook eventhook rename bundle change string bundle test org eclipse ecf provider discovery string container name containername discovery container filter hook discoverycontainerfilterhook string anecfdiscoverycontainername container name containername anecfdiscoverycontainername javadoc org osgi framework hooks service find hook findhook find org osgi framework bundle context bundlecontext java lang string java lang string java util collection find bundle context bundlecontext context string string filter all services allservices collection references composite discovery bundle find service string symbolic name symbolicname context get bundle getbundle get symbolic name getsymbolicname collection removees array list arraylist bundle test equals symbolic name symbolicname iterator iterator references iterator iterator has next hasnext filter container service reference servicereference service reference servicereference service reference servicereference iterator string property string service reference servicereference get property getproperty i discovery locator idiscoverylocator container property property equals container name containername removees add service reference servicereference system println removed reference property references remove all removeall removees javadoc org osgi framework hooks service event hook eventhook event org osgi framework service event serviceevent java util collection event service event serviceevent a service event aserviceevent collection a collection acollection a service event aserviceevent get type gettype service event serviceevent registered service reference servicereference service reference servicereference a service event aserviceevent get service reference getservicereference string property string service reference servicereference get property getproperty i discovery locator idiscoverylocator container property property equals container name containername collection removees array list arraylist iterator iterator a collection acollection iterator iterator has next hasnext bundle context bundlecontext bundle context bundlecontext bundle context bundlecontext iterator string symbolic name symbolicname bundle context bundlecontext get bundle getbundle get symbolic name getsymbolicname bundle test equals symbolic name symbolicname removees add bundle context bundlecontext system println filtered reference property a collection acollection remove all removeall removees