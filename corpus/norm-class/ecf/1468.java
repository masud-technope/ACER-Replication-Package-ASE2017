copyright eclipse source eclipsesource rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors eclipse source eclipsesource initial api implementation org eclipse ecf tutorial osgi services discovery org eclipse ecf internal osgi services discovery java serializable java net java util org eclipse ecf core identity org eclipse ecf core util ecf runtime exception ecfruntimeexception org eclipse ecf core util trace org eclipse ecf discovery org eclipse ecf discovery identity org eclipse ecf osgi services discovery ecf service publication ecfservicepublication org eclipse ecf remote service remoteservice constants org osgi framework bundle context bundlecontext org osgi framework service reference servicereference org osgi service discovery org osgi util tracker service tracker customizer servicetrackercustomizer service publication handler servicepublicationhandler direction ally directionally conn ects connects ecf discovery api rfc service publication servicepublication service publication handler servicepublicationhandler service tracker customizer servicetrackercustomizer discovery map acts mapping service references servicereferences i service info iserviceinfo objects retrieve i service info iserviceinfo service reference servicereference osg i osgi service unpublish map service ref to service info servicereftoserviceinfo collections synchronized map synchronizedmap hash map hashmap ecf discovery rfc ecf discovery i service listener iservicelistener receives i service events iserviceevents fired ecf discovery service discovery discovery i service listener iservicelistener service listener servicelistener i service listener iservicelistener javadoc org eclipse ecf discovery i service listener iservicelistener service discovered servicediscovered org eclipse ecf discovery i service event iserviceevent service discovered servicediscovered i service event iserviceevent an event anevent i service info iserviceinfo service info serviceinfo an event anevent get service info getserviceinfo i service d iserviceid serviceid service info serviceinfo get service d getserviceid nls nls trace handleosgiservicediscovered service info serviceinfo service info serviceinfo check valid checkvalid serviceid nls nls trace handleosgiservicediscovered matched service info serviceinfo service info serviceinfo discovered service tracker discoveredservicetracker discovered trackers discoveredtrackers find matching discovered service trackers findmatchingdiscoveredservicetrackers service info serviceinfo discovered trackers discoveredtrackers length discovered trackers discoveredtrackers service changed servicechanged discovered service notification impl discoveredservicenotificationimpl discovered service notification discoveredservicenotification service info serviceinfo javadoc org eclipse ecf discovery i service listener iservicelistener service undiscovered serviceundiscovered org eclipse ecf discovery i service event iserviceevent service undiscovered serviceundiscovered i service event iserviceevent an event anevent i service info iserviceinfo service info serviceinfo an event anevent get service info getserviceinfo i service d iserviceid serviceid service info serviceinfo get service d getserviceid check valid checkvalid serviceid nls nls trace handleosgiserviceundiscovered service info serviceinfo service info serviceinfo discovered service tracker discoveredservicetracker discovered trackers discoveredtrackers find matching discovered service trackers findmatchingdiscoveredservicetrackers service info serviceinfo discovered trackers discoveredtrackers length discovered trackers discoveredtrackers service changed servicechanged discovered service notification impl discoveredservicenotificationimpl discovered service notification discoveredservicenotification unavailable service info serviceinfo creates link service publication handler servicepublicationhandler starts list ening listening ecf discovery events service publication handler servicepublicationhandler todo tutorial implement listener registration ecf discovery unsupported operation exception unsupportedoperationexception service publication handler servicepublicationhandler rfc ecf discovery javadoc org osgi util tracker service tracker customizer servicetrackercustomizer adding service addingservice org osgi framework service reference servicereference object adding service addingservice service reference servicereference reference check valid checkvalid reference publish service publishservice reference activator get default getdefault get context getcontext get service getservice reference javadoc org osgi util tracker service tracker customizer servicetrackercustomizer modified service modifiedservice org osgi framework service reference servicereference java lang object modified service modifiedservice service reference servicereference reference object service check valid checkvalid reference unpublish service unpublishservice reference publish service publishservice reference javadoc org osgi util tracker service tracker customizer servicetrackercustomizer removed service removedservice org osgi framework service reference servicereference java lang object removed service removedservice service reference servicereference reference object service check valid checkvalid reference unpublish service unpublishservice reference converter methods rfc ecf discovery publishes service reference servicereference ecf discovery param reference link service reference servicereference published publish service publishservice service reference servicereference reference todo tutorial implement service publication properties servicepublicationproperties i service type iservicetype conversion unsupported operation exception unsupportedoperationexception publish service publishservice service reference servicereference reference unpublishes service reference servicereference param reference unpublish service unpublishservice service reference servicereference reference i service info iserviceinfo svc info svcinfo svc info svcinfo i service info iserviceinfo service ref to service info servicereftoserviceinfo remove reference svc info svcinfo activator get default getdefault get advertiser getadvertiser unregister service unregisterservice svc info svcinfo ecf runtime exception ecfruntimeexception log error logerror publish service publishservice unregister service info serviceinfo svc info svcinfo param service reference servicereference param service info serviceinfo match with discovered service info matchwithdiscoveredserviceinfo service reference servicereference service reference servicereference i service info iserviceinfo service info serviceinfo time returning fine returns array link discovered service tracker discoveredservicetracker responsible link i service info iserviceinfo empty array discovered service tracker discoveredservicetracker find matching discovered service trackers findmatchingdiscoveredservicetrackers i service info iserviceinfo service info serviceinfo service reference servicereference source trackers sourcetrackers activator get default getdefault get discovered service tracker references getdiscoveredservicetrackerreferences source trackers sourcetrackers discovered service tracker discoveredservicetracker list matching trackers matchingtrackers array list arraylist bundle context bundlecontext context activator get default getdefault get context getcontext source trackers sourcetrackers length match with discovered service info matchwithdiscoveredserviceinfo source trackers sourcetrackers service info serviceinfo matching trackers matchingtrackers add context get service getservice source trackers sourcetrackers discovered service tracker discoveredservicetracker matching trackers matchingtrackers to array toarray discovered service tracker discoveredservicetracker checks service reference servicereference val idity validity sph order link service reference servicereference valid properties link service publication servicepublication prop key service link service publication servicepublication prop key service properties link ecf service publication ecfservicepublication prop key end point endpoint container id containerid link constants service name space namespace link constants service param reference reference checked reference conf orms conforms requirements check valid checkvalid service reference servicereference reference service publication servicepublication prop key service collection svc interfaces svcinterfaces service property utils servicepropertyutils get collection property getcollectionproperty reference service publication servicepublication prop key service svc interfaces svcinterfaces log error logerror nls handle service publication handleservicepublication nls ignoring reference service publication servicepublication prop key service optional rfc property prop key service properties map service publication service properties servicepublicationserviceproperties service property utils servicepropertyutils get map property getmapproperty reference service publication servicepublication prop key service properties service publication service properties servicepublicationserviceproperties log error logerror nls handle service publication handleservicepublication nls ignoring reference service publication servicepublication prop key service properties ecf service publication ecfservicepublication prop key end point endpoint container id containerid endpoint container d endpointcontainerid reference get property getproperty ecf service publication ecfservicepublication prop key end point endpoint container id containerid endpoint container d endpointcontainerid log error logerror nls handle service publication handleservicepublication nls ignoring reference ecf service publication ecfservicepublication prop key end point endpoint container id containerid constants service name space namespace string rsnamespace service property utils servicepropertyutils get string property getstringproperty reference constants service name space namespace rsnamespace log error logerror handle service publication handleservicepublication nls nls ignoring reference nls constants service name space namespace nls constants service remote service d remoteserviceid reference get property getproperty constants service remote service d remoteserviceid log error logerror handle service publication handleservicepublication nls nls ignoring reference nls constants service nls add properties to discovery service properties addpropertiestodiscoveryserviceproperties i service properties iserviceproperties discovery service properties discoveryserviceproperties map service publication service properties servicepublicationserviceproperties iterator service publication service properties servicepublicationserviceproperties key set keyset iterator has next hasnext object key key string trace add properties to discovery service properties addpropertiestodiscoveryserviceproperties skip ping skipping string key key string key str keystr string key object val service publication service properties servicepublicationserviceproperties key str keystr val string discovery service properties discoveryserviceproperties set property string setpropertystring key str keystr string val val discovery service properties discoveryserviceproperties set property bytes setpropertybytes key str keystr val val serializable discovery service properties discoveryserviceproperties set property setproperty key str keystr val converter methods ecf discovery rfc accept services type ecf service publication ecfservicepublication service type check valid checkvalid i service d iserviceid service id serviceid string service service id serviceid get service type d getservicetypeid get services getservices list as list aslist arrays as list aslist service as list aslist ecf service publication ecfservicepublication service type creates link uri link param endpoint container d endpointcontainerid link uri uri syntax exception urisyntaxexception uri createuri endpoint container d endpointcontainerid uri syntax exception urisyntaxexception uri uri string str endpoint container d endpointcontainerid get name getname uri uri str uri is opaque isopaque str uri get raw scheme specific part getrawschemespecificpart uri syntax exception urisyntaxexception string scheme ecf service publication ecfservicepublication service type port uri port uri get port getport port port string host host inet address inetaddress get local host getlocalhost get host address gethostaddress exception host localhost uri scheme host port creates link i service type d iservicetypeid service publication properties servicepublicationproperties param service publication properties servicepublicationproperties param a name space anamespace i d create exception idcreateexception i service type d iservicetypeid create service type d createservicetypeid map service publication properties servicepublicationproperties name space namespace a name space anamespace i d create exception idcreateexception todo tutorial implement service publication properties servicepublicationproperties i service type iservicetype conversion unsupported operation exception unsupportedoperationexception create service type d createservicetypeid map service publication properties servicepublicationproperties name space namespace a name space anamespace utility methods returns object key map map key string get property with default getpropertywithdefault map properties string key string def string val string properties key val def val log error osg i osgi log service logservice add itionally additionally sends trace log error logerror string method string message throwable activator get default getdefault log method message trace output trace string method name methodname string message trace trace activator plugin debug options debugoptions svcpubhandlerdebug get class getclass method name methodname message cleans bundle life cycle event import antly importantly unregisters registered services ecf discovery dispose i discovery locator idiscoverylocator locator activator get default getdefault get locator getlocator locator locator remove service listener removeservicelistener service listener servicelistener service ref to service info servicereftoserviceinfo iterator service ref to service info servicereftoserviceinfo key set keyset iterator has next hasnext service reference servicereference service reference servicereference unpublish service unpublishservice service ref to service info servicereftoserviceinfo clear locator