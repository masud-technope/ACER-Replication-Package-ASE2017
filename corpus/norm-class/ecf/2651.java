header data cvs org eclipse ecf tests bundles org eclipse ecf tests apache http client httpclient server src org apache commons http client httpclient test http connection manager testhttpconnectionmanager java slewis exp revision copyright apache software foundation licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license software consists voluntary contributions individuals behalf apache software foundation apache software foundation http apache org org apache commons http client httpclient java io exception ioexception java lang weak reference weakreference java net inet address inetaddress java net socket java net unknown host exception unknownhostexception junit framework test junit framework test suite testsuite org apache commons http client httpclient methods get method getmethod org apache commons http client httpclient params http connection manager params httpconnectionmanagerparams org apache commons http client httpclient params http connection params httpconnectionparams org apache commons http client httpclient protocol protocol org apache commons http client httpclient protocol protocol socket factory protocolsocketfactory org apache commons http client httpclient protocol secure protocol socket factory secureprotocolsocketfactory org apache commons http client httpclient server simple request simplerequest org apache commons http client httpclient server simple response simpleresponse unit tests link http connection manager httpconnectionmanager author marc saegesser version test http connection manager testhttpconnectionmanager java slewis exp test http connection manager testhttpconnectionmanager http client test base httpclienttestbase constructor test http connection manager testhttpconnectionmanager string test name testname io exception ioexception test name testname main main string args string test case name testcasename test http connection manager testhttpconnectionmanager get name getname junit text ui textui test runner testrunner main test case name testcasename test case testcase methods test suite test suite testsuite test http connection manager testhttpconnectionmanager test methods test connect method connectmethod correctly releases connections connect fails test connect method failure release testconnectmethodfailurerelease exception multi threaded http connection manager multithreadedhttpconnectionmanager mgr multi threaded http connection manager multithreadedhttpconnectionmanager mgr get params getparams set int parameter setintparameter http connection manager params httpconnectionmanagerparams max total connections client set http connection manager sethttpconnectionmanager mgr server set http service sethttpservice reject connect service rejectconnectservice execute connect method localhost assuming connect supported test fake response fakeresponse code http method base httpmethodbase client get host configuration gethostconfiguration set proxy setproxy server get local address getlocaladdress server get local port getlocalport host secure destination connect method client get host configuration gethostconfiguration set host sethost not real host notarealhost protocol https protocol socket factory protocolsocketfactory fake secure protocol socket factory fakesecureprotocolsocketfactory get method getmethod get method getmethod assert true asserttrue client execute method executemethod io exception ioexception print stack trace printstacktrace fail error executing connect calling release connection releaseconnection releases connection release connection releaseconnection mgr get connection with timeout getconnectionwithtimeout client get host configuration gethostconfiguration release connection releaseconnection connect timeout exception connecttimeoutexception fail connection get method getmethod assert true asserttrue client execute method executemethod io exception ioexception print stack trace printstacktrace fail error executing connect reading response fully releases connection get response body as string getresponsebodyasstring mgr get connection with timeout getconnectionwithtimeout client get host configuration gethostconfiguration release connection releaseconnection connect timeout exception connecttimeoutexception fail connection get method getmethod assert true asserttrue client execute method executemethod io exception ioexception print stack trace printstacktrace fail error executing connect closing output stream releases connection get response body as stream getresponsebodyasstream close mgr get connection with timeout getconnectionwithtimeout client get host configuration gethostconfiguration release connection releaseconnection connect timeout exception connecttimeoutexception fail connection io exception ioexception print stack trace printstacktrace fail close connection failed test get connection testgetconnection multi threaded http connection manager multithreadedhttpconnectionmanager mgr multi threaded http connection manager multithreadedhttpconnectionmanager host configuration hostconfiguration host configuration hostconfiguration host configuration hostconfiguration host configuration hostconfiguration set host sethost nosuchserver http create connection http connection httpconnection conn mgr get connection getconnection host configuration hostconfiguration validate connection properties assert equals assertequals host nosuchserver conn get host gethost assert equals assertequals port conn get port getport release connection mgr release connection releaseconnection conn create connection host configuration hostconfiguration set host sethost nosuchserver https conn mgr get connection getconnection host configuration hostconfiguration validate connection properties assert equals assertequals host nosuchserver conn get host gethost assert equals assertequals port conn get port getport release connection mgr release connection releaseconnection conn create connection host configuration hostconfiguration set host sethost org http conn mgr get connection getconnection host configuration hostconfiguration validate connection properties assert equals assertequals host org conn get host gethost assert equals assertequals port conn get port getport release connection mgr release connection releaseconnection conn test dropped thread testdroppedthread exception server set http service sethttpservice echo service echoservice multi threaded http connection manager multithreadedhttpconnectionmanager mthcm multi threaded http connection manager multithreadedhttpconnectionmanager client set http connection manager sethttpconnectionmanager mthcm weak reference weakreference weak reference weakreference mthcm get method getmethod method get method getmethod client execute method executemethod method method release connection releaseconnection mthcm client method system time clean miscellaneous point ers pointers connection manager thread sleep interrupted exception interruptedexception fail should n shouldn int errupted interrupted object connection manager connectionmanager assert null assertnull connection manager connectionmanager connection manager connectionmanager test write request release connection testwriterequestreleaseconnection multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost client set http connection manager sethttpconnectionmanager connection manager connectionmanager get method getmethod get method getmethod write request body writerequestbody http state httpstate http connection httpconnection conn io exception ioexception http exception httpexception io exception ioexception client execute method executemethod fail exception occurred http exception httpexception print stack trace printstacktrace fail http exception httpexception occurred io exception ioexception connection manager connectionmanager get connection with timeout getconnectionwithtimeout client get host configuration gethostconfiguration connect timeout exception connecttimeoutexception print stack trace printstacktrace fail connection released test release connection testreleaseconnection server set http service sethttpservice echo service echoservice multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost client set http connection manager sethttpconnectionmanager connection manager connectionmanager should n shouldn wait connection client get params getparams set connection manager timeout setconnectionmanagertimeout get method getmethod get method getmethod get method getmethod client execute method executemethod get method getmethod exception fail error reading server fail connection released client execute method executemethod get method getmethod fail http connection httpconnection connect timeout exception connecttimeoutexception http exception httpexception fail error reading server io exception ioexception print stack trace printstacktrace fail error reading server release connection get method getmethod release connection releaseconnection get method getmethod get method getmethod fail connection released client execute method executemethod get method getmethod http exception httpexception fail http connection httpconnection released io exception ioexception fail error reading server connection released content body read test response auto release testresponseautorelease exception server set http service sethttpservice echo service echoservice multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost client set http connection manager sethttpconnectionmanager connection manager connectionmanager should n shouldn wait connection client get params getparams set connection manager timeout setconnectionmanagertimeout get method getmethod get method getmethod get method getmethod client execute method executemethod get method getmethod exception fail error reading server release connection get method getmethod get response body getresponsebody get method getmethod get method getmethod fail connection released client execute method executemethod get method getmethod http exception httpexception fail http connection httpconnection released io exception ioexception fail error reading server tests multi threaded http connection manager multithreadedhttpconnectionmanager ability rec laim reclaim unused connections test connection rec laiming testconnectionreclaiming multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost connection manager connectionmanager get params getparams set max total connections setmaxtotalconnections host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http http connection httpconnection connection connection manager connectionmanager get connection getconnection host release connection connection release connection releaseconnection connection connection host reclaimed connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host connect timeout exception connecttimeoutexception print stack trace printstacktrace fail http connection httpconnection tests link multi threaded http connection manager multithreadedhttpconnectionmanager shutdown all shutdownall closes resources connection man gers mangers unusable test shutdown all testshutdownall multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost connection manager connectionmanager get params getparams set max total connections setmaxtotalconnections host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http hold connection http connection httpconnection connection connection manager connectionmanager get connection getconnection host wait connection thread get connection thread getconnectionthread get conn getconn get connection thread getconnectionthread host connection manager connectionmanager get conn getconn start multi threaded http connection manager multithreadedhttpconnectionmanager shutdown all shutdownall release connection close connection connection release connection releaseconnection connection get conn getconn join interrupted exception interruptedexception print stack trace printstacktrace thread caught exception connection assert null assertnull connection checked get conn getconn get connection getconnection assert not null assertnotnull exception get conn getconn get exception getexception connection manager connectionmanager get connection getconnection host fail exception occurred exception tests link multi threaded http connection manager multithreadedhttpconnectionmanager shutdown closes resources connection man ger manger unusable test shutdown testshutdown multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost connection manager connectionmanager get params getparams set max total connections setmaxtotalconnections host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http hold connection http connection httpconnection connection connection manager connectionmanager get connection getconnection host wait connection thread get connection thread getconnectionthread get conn getconn get connection thread getconnectionthread host connection manager connectionmanager get conn getconn start connection manager connectionmanager shutdown release connection close connection connection release connection releaseconnection connection get conn getconn join interrupted exception interruptedexception print stack trace printstacktrace thread caught exception connection assert null assertnull connection checked get conn getconn get connection getconnection assert not null assertnotnull exception get conn getconn get exception getexception connection manager connectionmanager get connection getconnection host fail exception occurred exception tests multi threaded http connection manager multithreadedhttpconnectionmanager ability res trict restrict maximum number connections test max connections testmaxconnections multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost connection manager connectionmanager get params getparams set max total connections setmaxtotalconnections host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http http connection httpconnection connection connection manager connectionmanager get connection getconnection host http connection httpconnection connection connection manager connectionmanager get connection getconnection host fail connection released connection manager connectionmanager get connection with timeout getconnectionwithtimeout host fail connection pool timeout exception connectionpooltimeoutexception connection pool timeout exception connectionpooltimeoutexception release connections connection release connection releaseconnection connection connection connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host connection pool timeout exception connectionpooltimeoutexception print stack trace printstacktrace fail http connection httpconnection tests multi threaded http connection manager multithreadedhttpconnectionmanager ability res trict restrict maximum number connections host test max connections per host testmaxconnectionsperhost exception multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost connection manager connectionmanager get params getparams set max total connections setmaxtotalconnections host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http connection manager connectionmanager get params getparams set max connections per host setmaxconnectionsperhost host connection manager connectionmanager get params getparams set max connections per host setmaxconnectionsperhost host host http connection httpconnection connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host http connection httpconnection connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host http connection httpconnection connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host fail connection released connection manager connectionmanager get connection with timeout getconnectionwithtimeout host fail connection pool timeout exception connectionpooltimeoutexception connection pool timeout exception connectionpooltimeoutexception host connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host fail connection released connection manager connectionmanager get connection with timeout getconnectionwithtimeout host fail connection pool timeout exception connectionpooltimeoutexception connection pool timeout exception connectionpooltimeoutexception host host connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host fail connection released connection manager connectionmanager get connection with timeout getconnectionwithtimeout host fail connection pool timeout exception connectionpooltimeoutexception connection pool timeout exception connectionpooltimeoutexception test host reuse preference testhostreusepreference multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost connection manager connectionmanager get params getparams set max total connections setmaxtotalconnections host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http host configuration hostconfiguration host host configuration hostconfiguration host set host sethost host http http connection httpconnection connection connection manager connectionmanager get connection getconnection host get connection thread getconnectionthread get host gethost get connection thread getconnectionthread host connection manager connectionmanager get connection thread getconnectionthread get host gethost get connection thread getconnectionthread host connection manager connectionmanager get host gethost start get host gethost start threads time startup thread sleep interrupted exception interruptedexception print stack trace printstacktrace connection host released get host gethost connection release connection releaseconnection connection get host gethost join get host gethost join interrupted exception interruptedexception print stack trace printstacktrace assert not same assertnotsame connection get host gethost get connection getconnection get host gethost get connection getconnection assert not null assertnotnull connection host get host gethost get connection getconnection assert null assertnull connection host get host gethost get connection getconnection test max connections per server testmaxconnectionsperserver server set http service sethttpservice echo service echoservice multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set default max connections per host setdefaultmaxconnectionsperhost client set http connection manager sethttpconnectionmanager connection manager connectionmanager should n shouldn wait connection client get params getparams set connection manager timeout setconnectionmanagertimeout get method getmethod get method getmethod get method getmethod client execute method executemethod get method getmethod exception fail error reading server get method getmethod get method getmethod get method getmethod fail connection released client execute method executemethod get method getmethod fail http connection httpconnection connect timeout exception connecttimeoutexception http exception httpexception fail error reading server io exception ioexception fail error reading server test delete closed connections testdeleteclosedconnections multi threaded http connection manager multithreadedhttpconnectionmanager manager multi threaded http connection manager multithreadedhttpconnectionmanager http connection httpconnection conn manager get connection getconnection client get host configuration gethostconfiguration assert equals assertequals connections in pool connectionsinpool manager get connections in pool getconnectionsinpool assert equals assertequals connections in pool connectionsinpool host manager get connections in pool getconnectionsinpool client get host configuration gethostconfiguration conn close conn release connection releaseconnection assert equals assertequals connections in pool connectionsinpool manager get connections in pool getconnectionsinpool assert equals assertequals connections in pool connectionsinpool host manager get connections in pool getconnectionsinpool client get host configuration gethostconfiguration manager delete closed connections deleteclosedconnections assert equals assertequals connections in pool connectionsinpool manager get connections in pool getconnectionsinpool assert equals assertequals connections in pool connectionsinpool host manager get connections in pool getconnectionsinpool client get host configuration gethostconfiguration test rec laim unused connection testreclaimunusedconnection server set http service sethttpservice echo service echoservice multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager get params getparams set int parameter setintparameter http connection manager params httpconnectionmanagerparams max total connections client set http connection manager sethttpconnectionmanager connection manager connectionmanager should n shouldn wait connection client get params getparams set connection manager timeout setconnectionmanagertimeout get method getmethod get method getmethod get method getmethod client execute method executemethod get method getmethod exception fail error reading server get method getmethod get method getmethod runtime get runtime getruntime didn explicitly release connection reclaimed garbage collector hope client execute method executemethod get method getmethod http exception httpexception fail http connection httpconnection reclaimed io exception ioexception fail error reading server test get from multiple threads testgetfrommultiplethreads server set http service sethttpservice echo service echoservice client set http connection manager sethttpconnectionmanager multi threaded http connection manager multithreadedhttpconnectionmanager execute method thread executemethodthread threads execute method thread executemethodthread threads length get method getmethod method get method getmethod method set follow redirects setfollowredirects threads execute method thread executemethodthread method client threads start threads length wait thread fin ishes finishes seconds should n shouldn threads join interrupted exception interruptedexception exception occur exception threads get exception getexception fail error occured status assert equals assertequals threads get method getmethod get status code getstatuscode http status httpstatus test timeout testtimeout multi threaded http connection manager multithreadedhttpconnectionmanager mgr multi threaded http connection manager multithreadedhttpconnectionmanager mgr get params getparams set default max connections per host setdefaultmaxconnectionsperhost host configuration hostconfiguration host config hostconfig host configuration hostconfiguration host config hostconfig set host sethost nosuchserver http http connection httpconnection conn mgr get connection getconnection host config hostconfig http connection httpconnection conn mgr get connection getconnection host config hostconfig http connection httpconnection conn mgr get connection with timeout getconnectionwithtimeout host config hostconfig fail expected http exception httpexception connect timeout exception connecttimeoutexception fake secure protocol socket factory fakesecureprotocolsocketfactory secure protocol socket factory secureprotocolsocketfactory socket create socket createsocket socket socket string host port auto close autoclose io exception ioexception unknown host exception unknownhostexception illegal state exception illegalstateexception create socket createsocket called socket create socket createsocket string host port io exception ioexception unknown host exception unknownhostexception illegal state exception illegalstateexception create socket createsocket called socket create socket createsocket string host port inet address inetaddress client host clienthost client port clientport io exception ioexception unknown host exception unknownhostexception illegal state exception illegalstateexception create socket createsocket called socket create socket createsocket string host port inet address inetaddress client host clienthost client port clientport http connection params httpconnectionparams params io exception ioexception unknown host exception unknownhostexception illegal state exception illegalstateexception create socket createsocket called reject connect service rejectconnectservice echo service echoservice process simple request simplerequest request simple response simpleresponse response io exception ioexception request get request line getrequestline get method getmethod equals ignore case equalsignorecase connect response set status line setstatusline request get request line getrequestline get http version gethttpversion http status httpstatus method all owed allowed response set header setheader header connection close process request response get connection thread getconnectionthread thread host configuration hostconfiguration host configuration hostconfiguration multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager http connection httpconnection connection timeout exception exception get connection thread getconnectionthread host configuration hostconfiguration host configuration hostconfiguration multi threaded http connection manager multithreadedhttpconnectionmanager connection manager connectionmanager timeout host configuration hostconfiguration host configuration hostconfiguration connection manager connectionmanager connection manager connectionmanager timeout timeout connection connection manager connectionmanager get connection with timeout getconnectionwithtimeout host configuration hostconfiguration timeout exception exception exception get exception getexception exception http connection httpconnection get connection getconnection connection