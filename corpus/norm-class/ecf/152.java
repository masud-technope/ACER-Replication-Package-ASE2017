copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smackx workgroup user org jivesoftware smackx workgroup meta data metadata org jivesoftware smackx workgroup workgroup invitation workgroupinvitation org jivesoftware smackx workgroup workgroup invitation listener workgroupinvitationlistener org jivesoftware smackx workgroup ext forms workgroup form workgroupform org jivesoftware smackx workgroup packet dep art queue packet departqueuepacket org jivesoftware smackx workgroup packet queue update queueupdate org jivesoftware smackx workgroup packet sessionid org jivesoftware smackx workgroup packet userid org jivesoftware smackx workgroup settings org jivesoftware smack org jivesoftware smack filter org jivesoftware smack packet org jivesoftware smack util string utils stringutils org jivesoftware smackx form org jivesoftware smackx form field formfield org jivesoftware smackx service discovery manager servicediscoverymanager org jivesoftware smackx muc multi user chat multiuserchat org jivesoftware smackx packet data form dataform org jivesoftware smackx packet d iscover info discoverinfo org jivesoftware smackx packet muc user mucuser java util array list arraylist java util iterator java util list java util map workgroup services users use rs users join workgroup queue depart queue find status placement queue register not ified notified routed agent users perspective workgroup intended agents author matt tucker author d erek derek d e moro demoro workgroup string workgroupjid connection connection in queue inqueue list workgroup invitation listener workgroupinvitationlistener invitation listeners invitationlisteners list queue listener queuelistener queue listeners queuelisteners queue position queueposition queue remaining time queueremainingtime creates workgroup instance workgroup jid support workgroup xmpp connection connection under gone undergone successful login construct instance param workgroupjid jid workgroup param connection xmpp connection under gone undergone successful login workgroup string workgroupjid connection connection login passing connection connection is authenticated isauthenticated illegal state exception illegalstateexception login server creating workgroup workgroupjid workgroupjid connection connection in queue inqueue invitation listeners invitationlisteners array list arraylist workgroup invitation listener workgroupinvitationlistener queue listeners queuelisteners array list arraylist queue listener queuelistener register queue listener internal usage instance add queue listener addqueuelistener queue listener queuelistener joined queue joinedqueue in queue inqueue dep arted queue departedqueue in queue inqueue queue position queueposition queue remaining time queueremainingtime queue position updated queuepositionupdated current position currentposition queue position queueposition current position currentposition queue wait time updated queuewaittimeupdated seconds remaining secondsremaining queue remaining time queueremainingtime seconds remaining secondsremaining internal handling invitation recieving invitation removes user queue multi user chat multiuserchat add invitation listener addinvitationlistener connection org jivesoftware smackx muc invitation listener invitationlistener invitation received invitationreceived connection conn string room string invite r inviter string reason string password message message in queue inqueue queue position queueposition queue remaining time queueremainingtime register packet listener messages client packet filter packetfilter type filter typefilter packet type filter packettypefilter message connection add packet listener addpacketlistener packet listener packetlistener process packet processpacket packet packet handle packet handlepacket packet type filter typefilter returns workgroup support workgroup string getworkgroupjid workgroupjid returns user waiting workgroup queue waiting queue is in queue isinqueue in queue inqueue returns workgroup receiving requests workgroup agents workgroup workgroup receiving requests is available isavailable presence dir ected presence directedpresence presence presence type dir ected presence directedpresence set to setto workgroupjid packet filter packetfilter type filter typefilter packet type filter packettypefilter presence packet filter packetfilter from filter fromfilter from contains filter fromcontainsfilter workgroupjid packet collector packetcollector collector connection create packet collector createpacketcollector and filter andfilter from filter fromfilter type filter typefilter connection send packet sendpacket dir ected presence directedpresence presence response presence collector next result nextresult smack configuration smackconfiguration get packet reply timeout getpacketreplytimeout cancel collector collector cancel response response get error geterror presence type response get type gettype returns users current position workgroup queue user routed queue position displayed user good idea add method returns display user waiting workgroup queue position returned user current position workgroup queue position isn user isn queue get queue position getqueueposition queue position queueposition returns estimated time seconds user left wait workgroup queue routed user waiting workgroup queue time returned estimated time remaining seconds user wait int he inthe workgroup u workgroupu queue time isn user isn queue get queue remaining time getqueueremainingtime queue remaining time queueremainingtime joins workgroup queue wait routed agent joining queue queue status events user position estimated time left queue joining queue ways user leave queue user routed agent triggers group chat groupchat invitation user asks leave queue calling link depart queue departqueue method server error occurs administrator explicitly removes user queue user request join queue queue method illegal state exception illegalstateexception user queue servers configured require meta data order join queue link join queue joinqueue form method method meta data passed server tracks conversations user agents time tracking user jid user log ged logged anonymously web client user randomly generated persistent cookie username session userid explicitly passed link join queue joinqueue form string method userid user jid track conversations server ignore manually userid user connection server anonymous xmpp exception xmppexception error occured joining queue error connection failure occured server explicitly rejected request join queue join queue joinqueue xmpp exception xmppexception join queue joinqueue joins workgroup queue wait routed agent joining queue queue status events user position estimated time left queue joining queue ways user leave queue user routed agent triggers group chat groupchat invitation user asks leave queue calling link depart queue departqueue method server error occurs administrator explicitly removes user queue user request join queue queue method illegal state exception illegalstateexception user queue servers configured require meta data order join queue server tracks conversations user agents time tracking user jid user log ged logged anonymously web client user randomly generated persistent cookie username session userid explicitly passed link join queue joinqueue form string method userid user jid track conversations server ignore manually userid user connection server anonymous param answer form answerform completed form send join request xmpp exception xmppexception error occured joining queue error connection failure occured server explicitly rejected request join queue join queue joinqueue form answer form answerform xmpp exception xmppexception join queue joinqueue answer form answerform joins workgroup queue wait routed agent joining queue queue status events user position estimated time left queue joining queue ways user leave queue user routed agent triggers group chat groupchat invitation user asks leave queue calling link depart queue departqueue method server error occurs administrator explicitly removes user queue user request join queue queue method illegal state exception illegalstateexception user queue servers configured require meta data order join queue server tracks conversations user agents time tracking user jid user log ged logged anonymously web client user randomly generated persistent cookie username session userid user jid track conversations server ignore manually userid user connection server anonymous param answer form answerform completed form join reqest param userid string represents user anonymous sessions userid xmpp exception xmppexception error occured joining queue error connection failure occured server explicitly rejected request join queue join queue joinqueue form answer form answerform string userid xmpp exception xmppexception queue ignore join request in queue inqueue illegal state exception illegalstateexception queue workgroupjid join queue packet joinqueuepacket join packet joinpacket join queue packet joinqueuepacket workgroupjid answer form answerform userid packet collector packetcollector collector connection create packet collector createpacketcollector packetidfilter join packet joinpacket get packet d getpacketid connection send packet sendpacket join packet joinpacket response collector next result nextresult cancel collector collector cancel response xmpp exception xmppexception response server response get error geterror xmpp exception xmppexception response get error geterror notify listeners joined queue fire queue joined event firequeuejoinedevent joins workgroup queue wait routed agent joining queue queue status events user position estimated time left queue joining queue ways user leave queue user routed agent triggers group chat groupchat invitation user asks leave queue calling link depart queue departqueue method server error occurs administrator explicitly removes user queue user request join queue queue method illegal state exception illegalstateexception user queue servers configured require meta data order join queue server tracks conversations user agents time tracking user jid user log ged logged anonymously web client user randomly generated persistent cookie username session userid user jid track conversations server ignore manually userid user connection server anonymous param metadata metadata create data form dataform param userid string represents user anonymous sessions userid xmpp exception xmppexception error occured joining queue error connection failure occured server explicitly rejected request join queue join queue joinqueue map string object metadata string userid xmpp exception xmppexception queue ignore join request in queue inqueue illegal state exception illegalstateexception queue workgroupjid build data form dataform metadata form form form form type sub mit submit iterator string iter metadata key set keyset iterator iter has next hasnext string iter string metadata to string tostring string escaped name escapedname string utils stringutils escapeforxml string escaped value escapedvalue string utils stringutils escapeforxml form field formfield field form field formfield escaped name escapedname field set type settype form field formfield type text single form add field addfield field form set answer setanswer escaped name escapedname escaped value escapedvalue join queue joinqueue form userid dep arts departs workgroup queue user queue method user manually leave queue circumstances longer routed agent waiting xmpp exception xmppexception error occured send depart queue request server depart queue departqueue xmpp exception xmppexception queue ignore depart request in queue inqueue dep art queue packet departqueuepacket depart packet departpacket dep art queue packet departqueuepacket workgroupjid packet collector packetcollector collector connection create packet collector createpacketcollector packetidfilter depart packet departpacket get packet d getpacketid connection send packet sendpacket depart packet departpacket response collector next result nextresult collector cancel response xmpp exception xmppexception response server response get error geterror xmpp exception xmppexception response get error geterror notify listeners longer queue fire queue dep arted event firequeuedepartedevent adds queue listener not ified notified queue events user created workgroup instance param queue listener queuelistener queue listener add queue listener addqueuelistener queue listener queuelistener queue listener queuelistener queue listeners queuelisteners queue listeners queuelisteners queue listener queuelistener queue listeners queuelisteners add queue listener queuelistener removes queue listener param queue listener queuelistener queue listener remove queue listener removequeuelistener queue listener queuelistener queue listener queuelistener queue listeners queuelisteners queue listeners queuelisteners remove queue listener queuelistener adds invitation listener not ified notified group chat groupchat inv itations invitations workgroup user created workgroup instance param invitation listener invitationlistener invitation listener add invitation listener addinvitationlistener workgroup invitation listener workgroupinvitationlistener invitation listener invitationlistener invitation listeners invitationlisteners invitation listeners invitationlisteners invitation listener invitationlistener invitation listeners invitationlisteners add invitation listener invitationlistener removes invitation listener param invitation listener invitationlistener invitation listener remove queue listener removequeuelistener workgroup invitation listener workgroupinvitationlistener invitation listener invitationlistener invitation listeners invitationlisteners invitation listeners invitationlisteners remove invitation listener invitationlistener fire invitation event fireinvitationevent workgroup invitation workgroupinvitation invitation invitation listeners invitationlisteners iterator workgroup invitation listener workgroupinvitationlistener invitation listeners invitationlisteners iterator has next hasnext workgroup invitation listener workgroupinvitationlistener listener listener invitation received invitationreceived invitation fire queue joined event firequeuejoinedevent queue listeners queuelisteners iterator queue listener queuelistener queue listeners queuelisteners iterator has next hasnext queue listener queuelistener listener listener joined queue joinedqueue fire queue dep arted event firequeuedepartedevent queue listeners queuelisteners iterator queue listener queuelistener queue listeners queuelisteners iterator has next hasnext queue listener queuelistener listener listener dep arted queue departedqueue fire queue position event firequeuepositionevent current position currentposition queue listeners queuelisteners iterator queue listener queuelistener queue listeners queuelisteners iterator has next hasnext queue listener queuelistener listener listener queue position updated queuepositionupdated current position currentposition fire queue time event firequeuetimeevent seconds remaining secondsremaining queue listeners queuelisteners iterator queue listener queuelistener queue listeners queuelisteners iterator has next hasnext queue listener queuelistener listener listener queue wait time updated queuewaittimeupdated seconds remaining secondsremaining packet listener packetlistener implementation handle packet handlepacket packet packet packet message message msg message packet check user left queue packet extension packetextension msg get extension getextension depart queue http jabber org protocol workgroup packet extension packetextension queue status queuestatus msg get extension getextension queue status http jabber org protocol workgroup fire queue dep arted event firequeuedepartedevent queue status queuestatus queue update queueupdate queue update queueupdate queue update queueupdate queue status queuestatus queue update queueupdate get position getposition fire queue position event firequeuepositionevent queue update queueupdate get position getposition queue update queueupdate get remaing time getremaingtime fire queue time event firequeuetimeevent queue update queueupdate get remaing time getremaingtime check room invitation sender workgroup muc user mucuser muc user mucuser muc user mucuser msg get extension getextension http jabber org protocol muc user muc user mucuser invite invite muc user mucuser muc user mucuser get invite getinvite invite workgroupjid equals invite get from getfrom string sessionid map string list string meta data metadata msg get extension getextension sessionid element sessionid name space namespace sessionid sessionid get session d getsessionid msg get extension getextension meta data metadata element meta data metadata name space namespace meta data metadata meta data metadata get meta data getmetadata workgroup invitation workgroupinvitation inv workgroup invitation workgroupinvitation connection get user getuser msg get from getfrom workgroupjid sessionid msg get body getbody msg get from getfrom meta data metadata fire invitation event fireinvitationevent inv packet request joining workgroup queue join queue packet joinqueuepacket string userid data form dataform form join queue packet joinqueuepacket string workgroup form answer form answerform string userid userid userid set to setto workgroup set type settype type form answer form answerform get data form to send getdataformtosend add extension addextension form string get child element l getchildelementxml string builder stringbuilder buf string builder stringbuilder buf append join queue xml ns xmlns http jabber org protocol workgroup buf append queue not ifications notifications add user unique ide ntification identification session anonymous connection is anonymous isanonymous buf append userid userid toxml append data form text buf append form toxml buf append join queue buf to string tostring returns single chat setting based identified key param key key find chat setting chatsetting xmpp exception xmppexception error occurs server chat setting chatsetting get chat setting getchatsetting string key xmpp exception xmppexception chat settings chatsettings chat settings chatsettings get chat settings getchatsettings key chat settings chatsettings get first entry getfirstentry returns chat settings chatsettings based type param type type chat settings chatsettings chat settings chatsettings type xmpp exception xmppexception error occurs server chat settings chatsettings get chat settings getchatsettings type xmpp exception xmppexception get chat settings getchatsettings type returns chat settings chatsettings chat settings chatsettings workgroup xmpp exception xmppexception error occurs server chat settings chatsettings get chat settings getchatsettings xmpp exception xmppexception get chat settings getchatsettings asks workgroup chat settings key key retrieve settings settings key xmpp exception xmppexception error occurs server chat settings chatsettings get chat settings getchatsettings string key type xmpp exception xmppexception chat settings chatsettings request chat settings chatsettings key request set key setkey key type request set type settype type request set type settype type request set to setto workgroupjid packet collector packetcollector collector connection create packet collector createpacketcollector packetidfilter request get packet d getpacketid connection send packet sendpacket request chat settings chatsettings response chat settings chatsettings collector next result nextresult smack configuration smackconfiguration get packet reply timeout getpacketreplytimeout cancel collector collector cancel response xmpp exception xmppexception response server response get error geterror xmpp exception xmppexception response get error geterror response workgroup service configured send email queries workgroup service email service configured email service is email available isemailavailable service discovery manager servicediscoverymanager disco manager discomanager service discovery manager servicediscoverymanager get instance for getinstancefor connection string workgroup service workgroupservice string utils stringutils parse server parseserver workgroupjid d iscover info discoverinfo info result inforesult disco manager discomanager discover info discoverinfo workgroup service workgroupservice info result inforesult contains feature containsfeature jive email provider xmpp exception xmppexception asks workgroup offline settings off line settings offlinesettings off line offline settings workgroup xmpp exception xmppexception error occurs server offline settings offlinesettings get offline settings getofflinesettings xmpp exception xmppexception offline settings offlinesettings request offline settings offlinesettings request set type settype type request set to setto workgroupjid packet collector packetcollector collector connection create packet collector createpacketcollector packetidfilter request get packet d getpacketid connection send packet sendpacket request offline settings offlinesettings response offline settings offlinesettings collector next result nextresult smack configuration smackconfiguration get packet reply timeout getpacketreplytimeout cancel collector collector cancel response xmpp exception xmppexception response server response get error geterror xmpp exception xmppexception response get error geterror response asks workgroup sound settings sound settings soundsettings sound settings workgroup xmpp exception xmppexception error occurs server sound settings soundsettings get sound settings getsoundsettings xmpp exception xmppexception sound settings soundsettings request sound settings soundsettings request set type settype type request set to setto workgroupjid packet collector packetcollector collector connection create packet collector createpacketcollector packetidfilter request get packet d getpacketid connection send packet sendpacket request sound settings soundsettings response sound settings soundsettings collector next result nextresult smack configuration smackconfiguration get packet reply timeout getpacketreplytimeout cancel collector collector cancel response xmpp exception xmppexception response server response get error geterror xmpp exception xmppexception response get error geterror response asks workgroup properties workgroup properties workgroupproperties workgroup xmpp exception xmppexception error occurs server workgroup properties workgroupproperties get workgroup properties getworkgroupproperties xmpp exception xmppexception workgroup properties workgroupproperties request workgroup properties workgroupproperties request set type settype type request set to setto workgroupjid packet collector packetcollector collector connection create packet collector createpacketcollector packetidfilter request get packet d getpacketid connection send packet sendpacket request workgroup properties workgroupproperties response workgroup properties workgroupproperties collector next result nextresult smack configuration smackconfiguration get packet reply timeout getpacketreplytimeout cancel collector collector cancel response xmpp exception xmppexception response server response get error geterror xmpp exception xmppexception response get error geterror response asks workgroup properties param jid jid user workgroup ret reive retreive workgroup properties workgroupproperties workgroup xmpp exception xmppexception error occurs server workgroup properties workgroupproperties get workgroup properties getworkgroupproperties string jid xmpp exception xmppexception workgroup properties workgroupproperties request workgroup properties workgroupproperties request set jid setjid jid request set type settype type request set to setto workgroupjid packet collector packetcollector collector connection create packet collector createpacketcollector packetidfilter request get packet d getpacketid connection send packet sendpacket request workgroup properties workgroupproperties response workgroup properties workgroupproperties collector next result nextresult smack configuration smackconfiguration get packet reply timeout getpacketreplytimeout cancel collector collector cancel response xmpp exception xmppexception response server response get error geterror xmpp exception xmppexception response get error geterror response returns form clients workgroup server change form restart safe returned form sub missions submissions form searching tra nscripts transcripts xmpp exception xmppexception error occurs sending request server form get workgroup form getworkgroupform xmpp exception xmppexception workgroup form workgroupform workgroup form workgroupform workgroup form workgroupform workgroup form workgroupform set type settype type workgroup form workgroupform set to setto workgroupjid packet collector packetcollector collector connection create packet collector createpacketcollector packetidfilter workgroup form workgroupform get packet d getpacketid connection send packet sendpacket workgroup form workgroupform workgroup form workgroupform response workgroup form workgroupform collector next result nextresult smack configuration smackconfiguration get packet reply timeout getpacketreplytimeout cancel collector collector cancel response xmpp exception xmppexception response server status response get error geterror xmpp exception xmppexception response get error geterror form get form from getformfrom response main string args exception connection con xmpp connection xmppconnection ant eros anteros con connect con login anon ymously loginanonymously workgroup workgroup workgroup demo workgroup ant eros anteros con workgroup properties workgroupproperties props workgroup get workgroup properties getworkgroupproperties derek ant eros anteros system print props con disconnect