copyright jan rellermeyer systems group ins titute institute per vasive pervasive comp uting computing eth zurich rights reserved redistribution source binary forms modification permitted conditions met redistributions source code retain copyright not ice notice list conditions disclaimer redistributions binary form reproduce copyright not ice notice list conditions disclaimer documentation materials distribution eth zurich names contributors end orse endorse promote products derived software specific prior written permission software copyright holders contributors express implied warranties including limited implied warranties merchantability fitness purpose disclaimed event copyright owner contributors liable dir ect direct indirect incidental special exemplary consequential damages including limited procurement substitute goods services loss data profits business interruption caused theory liability contract strict liability tort including negligence arising software advised possibility damage ethz iks osgi messages java io exception ioexception java object input stream objectinputstream java object output stream objectoutputstream java util arrays java util hash map hashmap java util hash set hashset java util iterator java util map java util ethz iks util string utils stringutils deliver service message deliverservicemessage bring os gi osgi service remote machine service transfer red transferred code behaves smart proxy moves methods client machine os gi osgi check dependencies method custom objects parameter assumed client custom objects defined injections classes injections classes smart proxy object automatically injections author jan rellermeyer eth zurich deliver service message deliverservicemessage remoteosgimessage service string serviceid describes service string service interface names serviceinterfacenames option ally optionally smart proxy string smart proxy name smartproxyname injections map injections imports string imports exports string exports optional imports string optional imports optionalimports create deliver service message deliverservicemessage deliver service message deliverservicemessage deliver service create deliver service message deliverservicemessage net work network packet pre os gi osgi header function service length serviceid serviceid string imports exports length proxy class name proxyclassname proxy class name proxyclassname string number injection blocks inj blocks pre param input code data input datainput code body os gi osgi net work network packet io exception ioexception parse errors deliver service message deliverservicemessage object input stream objectinputstream input io exception ioexception deliver service serviceid serviceid input readutf imports imports input readutf exports exports input readutf names service interface names serviceinterfacenames read string array readstringarray input smart proxy defined string input readutf nls smart proxy name smartproxyname equals process injections blocks input read short readshort injections hash map hashmap blocks blocks injections input readutf read bytes readbytes input generate option imports injections hash set hashset add imports string imp imports string utils stringutils string to array stringtoarray imports string imp length string string imp trim add string iterator itr injections key set keyset iterator itr has next hasnext string class name classname string itr last index of lastindexof class name classname last index of lastindexof string pkg name pkgname class name classname substring last index of lastindexof replace pkg name pkgname add pkg name pkgname optional imports optionalimports optional imports optionalimports length pkg name pkgname resolution optional write message body stream param output stream io exception ioexception parse errors write body writebody object output stream objectoutputstream io exception ioexception writeutf serviceid writeutf imports writeutf exports write string array writestringarray service interface names serviceinterfacenames nls writeutf smart proxy name smartproxyname smart proxy name smartproxyname blocks injections size write short writeshort blocks string injection names injectionnames string injections key set keyset to array toarray string blocks blocks writeutf injection names injectionnames write bytes writebytes injections injection names injectionnames service service string get service d getserviceid serviceid service param serviceid service set service d setserviceid string serviceid serviceid serviceid injections param injections injections set inject ions setinjections map injections injections injections delivered service string get interface names getinterfacenames service interface names serviceinterfacenames names param interface names interfacenames names set interface names setinterfacenames string interface names interfacenames service interface names serviceinterfacenames interface names interfacenames convenience method bytes get interface class getinterfaceclass injections service interface names serviceinterfacenames replace nls smart proxy smart proxy undefined string get smart proxy name getsmartproxyname smart proxy name smartproxyname smart proxy param smart proxy name smartproxyname smart proxy set smart proxy name setsmartproxyname string smart proxy name smartproxyname smart proxy name smartproxyname smart proxy name smartproxyname convenience method bytes smart proxy undefined get proxy class getproxyclass smart proxy name smartproxyname injections smart proxy name smartproxyname replace nls list injection code list code names map get inject ions getinjections injections imports imports string get imports getimports imports imports param imports imports set imports setimports string imports imports imports exports exports string get exports getexports exports exports param exports exports set exports setexports string exports exports exports string representation debug out puts outputs string representation java lang object to string tostring string to string tostring string buffer stringbuffer buffer string buffer stringbuffer nls buffer append deliver service xid buffer append xid nls buffer append serviceid buffer append serviceid nls buffer append service interface name serviceinterfacename buffer append arrays as list aslist service interface names serviceinterfacenames smart proxy name smartproxyname nls buffer append smart proxy smartproxy buffer append smart proxy name smartproxyname injections size nls buffer append class inject ions classinjections buffer append injections key set keyset buffer to string tostring string get optional imports getoptionalimports optional imports optionalimports