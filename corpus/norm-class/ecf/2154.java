copyright mark us markus alexander kuppe rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors mark us markus alexander kuppe ecf dev eclipse org lemmster dot initial api implementation org eclipse ecf tests provider discovery java util array list arraylist java util arrays java util list org eclipse ecf core container connect exception containerconnectexception org eclipse ecf core i container icontainer org eclipse ecf core events i container event icontainerevent org eclipse ecf core identity org eclipse ecf core util ecf runtime exception ecfruntimeexception org eclipse ecf discovery i service event iserviceevent org eclipse ecf discovery i service info iserviceinfo org eclipse ecf discovery identity i service type d iservicetypeid org eclipse ecf provider discovery composite discovery container compositediscoverycontainer org eclipse ecf provider discovery composite service container event compositeservicecontainerevent org eclipse ecf tests discovery discovery container test discoverycontainertest org eclipse ecf tests discovery listener test service listener testservicelistener composite discovery container test compositediscoverycontainertest discovery container test discoverycontainertest test discovery container testdiscoverycontainer test discovery container testdiscoverycontainer composite discovery container test compositediscoverycontainertest composite discovery container compositediscoverycontainer set comparator setcomparator composite service info comp orator compositeserviceinfocomporator todo jslp longer red iscovery rediscovery int erval interval nls set wait time for provider setwaittimeforprovider parse long parselong system get property getproperty net slp red iscover rediscover to string tostring todo mkuppe https bugs eclipse org bugs bug cgi set scope setscope i service type d iservicetypeid scope set host name sethostname system get property getproperty net mdns javadoc org eclipse ecf tests discovery discovery test discoverytest set up setup set up setup exception set up setup events to expect eventstoexpect composite discovery container compositediscoverycontainer discovery locator discoverylocator get discovery containers getdiscoverycontainers size check container connect exception containerconnectexception test add container with registered services testaddcontainerwithregisteredservices container connect exception containerconnectexception discovery advertiser discoveryadvertiser register service registerservice service info serviceinfo ecf runtime exception ecfruntimeexception fail registering service failed idca composite discovery container compositediscoverycontainer cdc composite discovery container compositediscoverycontainer discovery locator discoverylocator test discovery container testdiscoverycontainer test discovery container testdiscoverycontainer assert true asserttrue cdc add container addcontainer test discovery container testdiscoverycontainer list registered services registeredservices test discovery container testdiscoverycontainer get registered services getregisteredservices assert equals assertequals register service registerservice a service aservice was n wasn called test discovery container testdiscoverycontainer service info serviceinfo registered services registeredservices composite discovery container compositediscoverycontainer cdc composite discovery container compositediscoverycontainer discovery locator discoverylocator cdc remove container removecontainer test discovery container testdiscoverycontainer test add container without registered services testaddcontainerwithoutregisteredservices container connect exception containerconnectexception discovery advertiser discoveryadvertiser register service registerservice service info serviceinfo discovery advertiser discoveryadvertiser unregister service unregisterservice service info serviceinfo ecf runtime exception ecfruntimeexception fail unregistering service failed idca composite discovery container compositediscoverycontainer cdc composite discovery container compositediscoverycontainer discovery locator discoverylocator test discovery container testdiscoverycontainer test discovery container testdiscoverycontainer assert true asserttrue cdc add container addcontainer test discovery container testdiscoverycontainer list registered services registeredservices test discovery container testdiscoverycontainer get registered services getregisteredservices assert true asserttrue registered services registeredservices is empty isempty composite discovery container compositediscoverycontainer cdc composite discovery container compositediscoverycontainer discovery locator discoverylocator cdc remove container removecontainer test discovery container testdiscoverycontainer add service listener addservicelistener test service listener testservicelistener service listener servicelistener discovery locator discoverylocator add service listener addservicelistener service listener servicelistener add listener register and wait addlistenerregisterandwait service listener servicelistener service info serviceinfo discovery locator discoverylocator remove service listener removeservicelistener service listener servicelistener live container i container icontainer i container icontainer service listener servicelistener get locator getlocator assert true asserttrue get connected d getconnectedid check received correct amount events i container event icontainerevent events service listener servicelistener get event getevent assert not null assertnotnull test listener didn receive discovery events events assert equals assertequals test listener received unexpected amount discovery events arrays as list aslist events events to expect eventstoexpect events length list orig containers origcontainers array list arraylist events length composite service container event compositeservicecontainerevent event composite service container event compositeservicecontainerevent events check local container hidden correctly local container id localcontainerid event get local container d getlocalcontainerid connected id connectedid container get connected d getconnectedid assert equals assertequals local container id localcontainerid connected id connectedid check i service info iserviceinfo correct fields properties i service info iserviceinfo service info serviceinfo i service event iserviceevent event get service info getserviceinfo assert true asserttrue i service info iserviceinfo match expected service info serviceinfo service info serviceinfo comparator compare service info serviceinfo service info serviceinfo add underlying discovery container result orig containers origcontainers add event get original local container d getoriginallocalcontainerid check underlying containers fired event assert equals assertequals nested container didn send event multiple events to expect eventstoexpect orig containers origcontainers size