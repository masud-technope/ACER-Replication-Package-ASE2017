copyright remain netherlands http remains oftware remainsoftware rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors wim jongman initial api implementation ahmed aadel initial api implementation org eclipse ecf provider zookeeper node internal java io exception ioexception java util collections java util hash map hashmap java util list java util map org apache zookeeper async callback asynccallback children callback childrencallback org apache zookeeper watched event watchedevent org apache zookeeper watcher org apache zookeeper zoo keeper zookeeper org eclipse core runtime org eclipse ecf provider zookeeper core discoverd service discoverdservice org eclipse ecf provider zookeeper core zoo discovery container zoodiscoverycontainer org eclipse ecf provider zookeeper util geo org eclipse ecf provider zookeeper util logger org osgi service log log service logservice read root readroot watcher children callback childrencallback zoo keeper zookeeper read keeper readkeeper string watch manager watchmanager watch manager watchmanager is connected isconnected map string node reader nodereader node read ers nodereaders collections synchronized map synchronizedmap hash map hashmap string node reader nodereader map string discoverd service discoverdservice discoverd services discoverdservices map string list discoverd service discoverdservice per type discoverd services pertypediscoverdservices object connection lock connectionlock object read root readroot string watch manager watchmanager watch manager watchmanager is not null isnotnull is not null isnotnull watch manager watchmanager watch manager watchmanager watch manager watchmanager discoverd services discoverdservices collections synchronized map synchronizedmap hash map hashmap string discoverd service discoverdservice per type discoverd services pertypediscoverdservices collections synchronized map synchronizedmap hash map hashmap string list discoverd service discoverdservice connect process watched event watchedevent event zoo discovery container zoodiscoverycontainer cached thread pool execute runnable connection lock connectionlock watch manager watchmanager is disposed isdisposed event get state getstate disconnected read root readroot read keeper readkeeper get state getstate is alive isalive read root readroot is connected isconnected connect expired read root readroot is connected isconnected connect sync connected syncconnected read root readroot is connected isconnected read root readroot is connected isconnected read root readroot watch manager watchmanager add zoo keeper addzookeeper read root readroot read keeper readkeeper read root readroot read keeper readkeeper exists i node inode root read root readroot read root readroot read keeper readkeeper get children getchildren i node inode root read root readroot read root readroot event get type gettype node deleted nodedeleted event get path getpath event get path getpath equals i node inode root read root readroot node read ers nodereaders remove event get path getpath node children changed nodechildrenchanged read root readroot is connected isconnected read root readroot read keeper readkeeper exists i node inode root read root readroot read root readroot read keeper readkeeper get children getchildren i node inode root read root readroot read root readroot connect connection lock connectionlock is connected isconnected watch manager watchmanager is disposed isdisposed node read ers nodereaders clear read keeper readkeeper discard current stale reader read keeper readkeeper close interrupted exception interruptedexception logger log log service logservice log error error closing current zoo keeper zookeeper get message getmessage watch manager watchmanager remove zoo keeper removezookeeper read keeper readkeeper read keeper readkeeper rec onnecting reconnecting read keeper readkeeper zoo keeper zookeeper io exception ioexception ioe logger log log service logservice log error init iate initiate zoo keeper zookeeper ioe get message getmessage ioe process result processresult string path object ctx list string children zoo discovery container zoodiscoverycontainer cached thread pool execute runnable connection lock connectionlock watch manager watchmanager is disposed isdisposed path children children size string children geo is own publication isownpublication public ations publications discovered read root readroot node read ers nodereaders contains key containskey launch reader handle node data node reader nodereader node reader nodereader read root readroot watch path deletion read root readroot read keeper readkeeper exists get absolute path getabsolutepath read root readroot read root readroot node read ers nodereaders get path getpath zoo keeper zookeeper get read keeper getreadkeeper read keeper readkeeper string get ip getip map string discoverd service discoverdservice get discoverd services getdiscoverdservices discoverd services discoverdservices map string list discoverd service discoverdservice get per type discoverd services getpertypediscoverdservices per type discoverd services pertypediscoverdservices