revision copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smackx work group workgroup agent org jivesoftware smackx work group workgroup packet agent status agentstatus org jivesoftware smackx work group workgroup packet agent status request agentstatusrequest org jivesoftware smack packet listener packetlistener org jivesoftware smack connection org jivesoftware smack filter packet filter packetfilter org jivesoftware smack filter packet type filter packettypefilter org jivesoftware smack packet packet org jivesoftware smack packet presence org jivesoftware smack util string utils stringutils java util array list arraylist java util collections java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util manges agents work group workgroup presence author matt tucker agent session agentsession get agent roster getagentroster agent roster agentroster event agent event agent removed event presence changed connection connection string workgroupjid list string entries list agent roster listener agentrosterlistener listeners map string map string presence presence map presencemap roster marked initialized single roster packet rec ieved recieved processed roster initialized rosterinitialized constructs agent roster agentroster param connection xmpp connection agent roster agentroster connection connection string workgroupjid connection connection workgroupjid workgroupjid entries array list arraylist string listeners array list arraylist agent roster listener agentrosterlistener presence map presencemap hash map hashmap string map string presence listen roster pack ets packets packet filter packetfilter roster filter rosterfilter packet type filter packettypefilter agent status request agentstatusrequest connection add packet listener addpacketlistener agent status listener agentstatuslistener roster filter rosterfilter listen presence pack ets packets connection add packet listener addpacketlistener presence packet listener presencepacketlistener packet type filter packettypefilter presence send request roster agent status request agentstatusrequest request agent status request agentstatusrequest request set to setto workgroupjid connection send packet sendpacket request reloads entire roster server asynchronous operation method roster reloaded point server resp onds responds reload request reload agent status request agentstatusrequest request agent status request agentstatusrequest request set to setto workgroupjid connection send packet sendpacket request adds listener roster listener fired any time anytime roster pushed server param listener agent roster listener add listener addlistener agent roster listener agentrosterlistener listener listeners listeners listener listeners add listener fire events existing entries presences roster iterator string get agents getagents iterator has next hasnext string jid entries jid fire agent event listener agent added agentadded jid map string presence user presences userpresences presence map presencemap jid user presences userpresences iterator presence presences user presences userpresences values iterator presences has next hasnext fire presence changed event listener presence changed presencechanged presences removes listener roster listener fired any time anytime roster pushed server param listener roster listener remove listener removelistener agent roster listener agentrosterlistener listener listeners listeners remove listener returns count agents work group workgroup number agents work group workgroup get agent count getagentcount entries size returns agents string jid values work group workgroup entries roster string get agents getagents string agents hash set hashset string entries iterator string entries iterator has next hasnext agents add collections unmodifiable set unmodifiableset agents returns xmpp address agent work group workgroup param jid xmpp address agent jsmith address valid format domain resource user domain user domain resource xmpp address agent work group workgroup string jid jid entries iterator string entries iterator has next hasnext string entry entry to lower case tolowercase equals jid to lower case tolowercase returns presence info agent agent unavailable off line offline presence param user fully qualified xmpp jid address valid format domain resource user domain user domain resource agent current presence agent unavailable presence presence get presence getpresence string user string key get presence map key getpresencemapkey user map string presence user presences userpresences presence map presencemap key user presences userpresences presence presence presence presence type unavailable presence set from setfrom user presence find resource highest priority changed resource highest availability iterator string user presences userpresences key set keyset iterator presence presence presence has next hasnext presence user presences userpresences presence presence get priority getpriority presence get priority getpriority presence presence presence presence presence type unavailable presence set from setfrom user presence presence returns key presence map presencemap fully qualified xmpp roster valid address format domain resource user domain user domain resource roster entry fully qualified xmpp fully qualified xmpp key presence map presencemap bar e bare address note key presence map presencemap fully qualified xmpp user presences userpresences use less useless entry user param user fully qualified xmpp jdoe work key presence map presencemap fully qualified xmpp string get presence map key getpresencemapkey string user string key user user key string utils stringutils parse bar e address parsebareaddress user to lower case tolowercase key fires event listeners fire event fireevent event type eventtype object event object eventobject agent roster listener agentrosterlistener listeners listeners listeners agent roster listener agentrosterlistener listeners size listeners to array toarray listeners listeners length event type eventtype event agent listeners agent added agentadded string event object eventobject event agent removed listeners agent removed agentremoved string event object eventobject event presence changed listeners presence changed presencechanged presence event object eventobject list ens listens presence pack ets packets processes presence packet listener presencepacketlistener packet listener packetlistener process packet processpacket packet packet presence presence presence packet string presence get from getfrom todo check ignore presences server bug system println presence presence toxml string key get presence map key getpresencemapkey user map presence pack ets packets saved resource presence get type gettype presence type ignore presence packet agent status extension agent status agentstatus agent status agentstatus agent status agentstatus presence get extension getextension agent status agentstatus element agent status agentstatus name space namespace agent status agentstatus agent workgroupjid equals agent status agentstatus get work group d getworkgroupjid map string presence user presences userpresences user presence map presence map presencemap key user presences userpresences hash map hashmap string presence presence map presencemap key user presences userpresences user presences userpresences presence map presencemap key add presence resources key user presences userpresences user presences userpresences string utils stringutils parse resource parseresource presence fire event entries iterator string entries iterator has next hasnext string entry entry to lower case tolowercase equals string utils stringutils parse bar e address parsebareaddress key to lower case tolowercase fire event fireevent event presence changed packet unavailable packet remove entries presence map presence get type gettype presence type unavailable presence map presencemap key map string presence user presences userpresences presence map presencemap key user presences userpresences user presences userpresences remove string utils stringutils parse resource parseresource user presences userpresences is empty isempty presence map presencemap remove key fire event entries iterator string entries iterator has next hasnext string entry string entry to lower case tolowercase equals string utils stringutils parse bar e address parsebareaddress key to lower case tolowercase fire event fireevent event presence changed packet list ens listens roster pack ets packets processes agent status listener agentstatuslistener packet listener packetlistener process packet processpacket packet packet packet agent status request agentstatusrequest agent status request agentstatusrequest status request statusrequest agent status request agentstatusrequest packet iterator agent status request agentstatusrequest item status request statusrequest get agents getagents iterator has next hasnext agent status request agentstatusrequest item item string agentjid item getjid remove equals item get type gettype removing user roster remove presence string key string utils stringutils parse name parsename string utils stringutils parse name parsename agentjid string utils stringutils parse server parseserver agentjid presence map presencemap remove key fire event roster listeners fire event fireevent event agent removed agentjid entries add agentjid fire event roster listeners fire event fireevent event agent agentjid mark roster initialized roster initialized rosterinitialized