copyright remy suen comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors remy suen remy suen gmail initial api implementation org eclipse ecf protocol bittorrent internal net java buffered reader bufferedreader java buffered writer bufferedwriter java file java file input stream fileinputstream java file output stream fileoutputstream java file reader filereader java file writer filewriter java io exception ioexception java unsupported encoding exception unsupportedencodingexception java net url java net url encoder urlencoder java nio byte buffer bytebuffer java nio channels closed by int err upt exception closedbyinterruptexception java nio channels file channel filechannel java nio channels socket channel socketchannel java security message digest messagedigest java security no such algorithm exception nosuchalgorithmexception java util arrays java util list java util properties java util vector org eclipse ecf protocol bittorrent i hash check listener ihashchecklistener org eclipse ecf protocol bittorrent i piece progress listener ipieceprogresslistener org eclipse ecf protocol bittorrent i torrent error listener itorrenterrorlistener org eclipse ecf protocol bittorrent i torrent progress listener itorrentprogresslistener org eclipse ecf protocol bittorrent i torrent state listener itorrentstatelistener org eclipse ecf protocol bittorrent torrent org eclipse ecf protocol bittorrent torrent configuration torrentconfiguration org eclipse ecf protocol bittorrent torrent file torrentfile org eclipse ecf protocol bittorrent torrent server torrentserver org eclipse ecf protocol bittorrent internal encode b encoded dictionary bencodeddictionary org eclipse ecf protocol bittorrent internal encode decode org eclipse ecf protocol bittorrent internal encode encode org eclipse ecf protocol bittorrent internal torrent data file datafile org eclipse ecf protocol bittorrent internal torrent piece org eclipse ecf protocol bittorrent internal torrent piece state piecestate code torrent manager torrentmanager code handle int ernals internals pub licly publicly exposed link torrent torrent manager torrentmanager nls string speed key speed nls string speed key speed message digest messagedigest sha digest shadigest file state path statepath connection pool connectionpool connection pool connectionpool array files read written exc hange exchange pieces peers data file datafile files vector state listeners statelisteners vector progress listeners progresslisteners vector error listeners errorlisteners vector piece listeners piecelisteners vector hash check listeners hashchecklisteners torrent file torrentfile torrent properties properties file properties file propertiesfile file target file targetfile file amount data downloaded torrent stored torrent resume downloading see ding seeding file torrent state torrentstate vector pieces collection link piece portion bytes completed vector incomplete pieces incompletepieces int eger integer array stores number peers pos sesses possesses specific piece determine piece rare piece piece availability pieceavailability bitfield array specific piece downloaded has piece haspiece priority pieces prioritypieces int erested pieces interestedpieces uninterested pieces uninterestedpieces string info hash infohash url tracker host connect string tracker unique ide ntification identification string identify client talking tracker nls string peerid create peer d createpeerid string hex hash hexhash additional ide ntification identification required track ers trackers event client key create key createkey total number bytes encompassed torrent file takes files accounts ignores file size folders total length piece piece length piecelength tracker thread trackerthread tracker thread trackerthread speed monitoring thread speedmonitoringthread speed monitoring thread speedmonitoringthread hash check thread hashcheckthread hash check thread hashcheckthread piece state piecestate unique string returned connected tracker ide ntification identification purposes string trackerid amount bytes downloaded peers downloaded amount bytes uploaded peers uploaded speed data downloaded peers bytes calculated twenty rolling average down speed downspeed speed data uploaded peers bytes calculated twenty rolling average up speed upspeed max down speed maxdownspeed max up speed maxupspeed request down speed requestdownspeed request up speed requestupspeed amount data discarded hash check failures discarded amount data downloaded completion remaining number peers request tracker request total number see ds seeds torrent returned tracker tracker returned tracker queried see ders seeders total number peers torrent returned tracker tracker returned tracker queried peers amount time wait querying tracker peers milliseconds timeout number completed pieces updated link write info rm inform attached link i torrent progress listener itorrentprogresslistener link fire piece completed event firepiececompletedevent method completed pieces completedpieces i torrent state listener itorrentstatelistener stopped torrent running running pieces passed sha hash check is completed iscompleted user deciding download files is selective isselective is prior itizing isprioritizing is waiting to start iswaitingtostart is hash checking ishashchecking nls sha digest shadigest message digest messagedigest get instance getinstance sha no such algorithm exception nosuchalgorithmexception runtime exception runtimeexception set state path setstatepath file path state path statepath path string create peer d createpeerid numbers numbers connection pool connectionpool random next int nextint string numbers create key createkey key connection pool connectionpool random next int nextint character is digit isdigit key character is letter isletter key key connection pool connectionpool random next int nextint key creates code host code exc hanging exchanging pieces pieces torrent param torrent torrent param properties code properties code instance store code code instance created io exception ioexception error occurs creating hoo king hooking files torrent torrent manager torrentmanager torrent file torrentfile torrent properties properties io exception ioexception torrent torrent target file targetfile torrent get target file gettargetfile connection pool connectionpool connection pool connectionpool tracker torrent get tracker gettracker piece length piecelength torrent get piece length getpiecelength info hash infohash torrent get info hash getinfohash hex hash hexhash torrent get hex hash gethexhash torrent state torrentstate file state path statepath hex hash hexhash total torrent get total length gettotallength nls torrent save file state path statepath hex hash hexhash torrent num pieces numpieces torrent get num pieces getnumpieces pieces vector num pieces numpieces tracker thread trackerthread tracker thread trackerthread piece state piecestate create states createstates num pieces numpieces num pieces numpieces pieces add piece bitfield num pieces numpieces num pieces numpieces num pieces numpieces has piece haspiece num pieces numpieces piece availability pieceavailability num pieces numpieces priority pieces prioritypieces num pieces numpieces int erested pieces interestedpieces num pieces numpieces uninterested pieces uninterestedpieces num pieces numpieces incomplete pieces incompletepieces vector state listeners statelisteners vector error listeners errorlisteners vector piece listeners piecelisteners vector progress listeners progresslisteners vector hash check listeners hashchecklisteners vector nls properties file propertiesfile file state path statepath hex hash hexhash properties properties file propertiesfile exists properties properties nls properties set property setproperty target target file targetfile get absolute path getabsolutepath properties properties properties properties load file input stream fileinputstream properties file propertiesfile restore properties restore properties properties properties store string file names filenames torrent get file names getfilenames file names filenames length target file targetfile exists target file targetfile mkdirs nls io exception ioexception folders needed torrent created files data file datafile file names filenames length file initialization fileinitialization file names filenames target file targetfile num pieces numpieces piece piece piece pieces piece set length setlength piece length piecelength piece pieces num pieces numpieces set length setlength total piece length piecelength check file checkfile set pieces setpieces check file checkfile torrent state torrentstate exists count buffered reader bufferedreader reader buffered reader bufferedreader file reader filereader torrent state torrentstate string input reader read line readline input parse long parselong input target file targetfile last modified lastmodified input reader read line readline piece state piecestate piece state piecestate create states createstates torrent get num pieces getnumpieces input count parse input input reader read line readline count length start hash check starthashcheck set pieces setpieces start hash check starthashcheck io exception ioexception start hash check starthashcheck start hash check starthashcheck perform hash check performhashcheck i torrent state listener itorrentstatelistener stopped start hash check starthashcheck i torrent state listener itorrentstatelistener hash checking start hash check starthashcheck hash check thread hashcheckthread hash check thread hashcheckthread is alive isalive hash check thread hashcheckthread hash check thread hashcheckthread hash check thread hashcheckthread start is hash checking ishashchecking fire state changed event firestatechangedevent i torrent state listener itorrentstatelistener hash checking file initialization fileinitialization string file names filenames file target file targetfile io exception ioexception files length length torrent get len gths getlengths files data file datafile target file targetfile length pieces torrent get pieces getpieces length pieces length pieces files set pieces setpieces pieces piece length piecelength piece length piecelength remaining length count piece current length currentlength piece length piecelength file names filenames length file file file target file targetfile file separator file names filenames file get parent file getparentfile exists file get parent file getparentfile mkdirs io exception ioexception folders needed torrent created file length filelength torrent get len gths getlengths files data file datafile file file length filelength current length currentlength file length filelength files set pieces setpieces count file length filelength file length filelength current length currentlength file length filelength current length currentlength file length filelength files set pieces setpieces count file length filelength file length filelength current length currentlength piece length piecelength count piece current length currentlength piece length piecelength current length currentlength file length filelength file length filelength current length currentlength count file length filelength piece length piecelength count file length filelength piece length piecelength count pieces count piece piece count pieces piece file length filelength files set pieces setpieces pieces piece length piecelength piece length piecelength files set pieces setpieces pieces current length currentlength piece length piecelength current length currentlength piece length piecelength file length filelength count piece count remaining total set pieces setpieces count piece len piecelen piece length piecelength files length length files length piece len piecelen piece len piecelen piece length piecelength piece len piecelen length piece piece piece pieces count piece add file addfile files piece len piecelen count length piece len piecelen piece len piecelen piece length piecelength piece len piecelen piece length piecelength piece len piecelen length piece pieces count add file addfile files length restore properties properties string properties get property getproperty speed key request down speed requestdownspeed parse long parselong properties get property getproperty speed key request up speed requestupspeed parse long parselong store io exception ioexception properties set property setproperty speed key to string tostring request down speed requestdownspeed properties set property setproperty speed key to string tostring request up speed requestupspeed properties store file output stream fileoutputstream properties file propertiesfile update bit field updatebitfield count size has piece haspiece length iter ate iterate pieces multiples bits size arrays fill bits iter ate iterate pieces segment size piece flag has piece haspiece bits encode binary string bitfield bitfield count encode encode for bit field encodeforbitfield bits count update bit field updatebitfield piece offset piece bits arrays fill bits offset offset has piece haspiece length has piece haspiece bits offset bitfield offset encode encode for bit field encodeforbitfield bits contacts tracker exc hanging exchanging pieces peers io exception ioexception error occurs querying tracker connecting peers start io exception ioexception hash check thread hashcheckthread hash check thread hashcheckthread is alive isalive is hash checking ishashchecking is waiting to start iswaitingtostart torrent state torrentstate exists start hash check starthashcheck is waiting to start iswaitingtostart running is waiting to start iswaitingtostart running speed monitoring thread speedmonitoringthread speed monitoring thread speedmonitoringthread tracker thread trackerthread tracker thread trackerthread speed monitoring thread speedmonitoringthread start tracker thread trackerthread start fire state changed event firestatechangedevent i torrent state listener itorrentstatelistener started nls query tracker querytracker started fire state changed event firestatechangedevent i torrent state listener itorrentstatelistener exchanging s to ps stops downloading see ding seeding torrent io exception ioexception io exception ioexception occurred info rmi ng informing tracker client stop ping stopping io exception ioexception is waiting to start iswaitingtostart hash check thread hashcheckthread hash check thread hashcheckthread is alive isalive hash check thread hashcheckthread int errupt interrupt is hash checking ishashchecking hash check thread hashcheckthread fire state changed event firestatechangedevent i torrent state listener itorrentstatelistener stopped running i torrent state listener itorrentstatelistener stopped tracker thread trackerthread int errupt interrupt speed monitoring thread speedmonitoringthread int errupt interrupt tracker thread trackerthread speed monitoring thread speedmonitoringthread running connection pool connectionpool close nls query tracker querytracker stopped fire state changed event firestatechangedevent i torrent state listener itorrentstatelistener stopped store removes saved status configuration opened torrent call link prior deletion files remove io exception ioexception file files state path statepath list files listfiles files length files get name getname starts with startswith hex hash hexhash files delete remaining total see ders seeders peers arrays fill priority pieces prioritypieces arrays fill int erested pieces interestedpieces arrays fill uninterested pieces uninterestedpieces pieces size piece pieces reset delete remove target file targetfile delete query tracker querytracker string event io exception ioexception string link tracker nls info hash nls nls url encoder urlencoder encode info hash infohash iso replace all replaceall nls nls nls nls peer nls nls url encoder urlencoder encode peerid iso replace all replaceall nls nls port nls nls torrent server torrentserver get port getport uploaded uploaded downloaded nls nls downloaded nls left nls remaining event event event nls nls nls num want numwant request compact key nls nls key nls nls trackerid tracker id trackerid trackerid nls torrent configuration torrentconfiguration debug querying tracker link url url url link b encoded dictionary bencodeddictionary dictionary decode b decode bdecode url open stream openstream nls event event equals stopped nls string failure string dictionary failure reason failure fire tracker error event firetrackererrorevent failure nls torrent configuration torrentconfiguration debug client connect tracker reason failure nls timeout dictionary int erval interval int value intvalue trackerid nls trackerid string dictionary tracker nls number dictionary completed see ders seeders number number int value intvalue nls number dictionary incomplete d incompleted peers number number int value intvalue nls object peers list peerslist dictionary peers peers list peerslist list nls torrent configuration torrentconfiguration debug peers returned string string string peers list peerslist nls bytes string get bytes getbytes iso string length string nls nls bytes xff bytes xff bytes xff nls bytes nls xff port integer parse int parseint integer to hex string tohexstring bytes xff integer to hex string tohexstring bytes xff connection pool connectionpool connect to connectto port connect to connectto socket channel socketchannel channel unsupported encoding exception unsupportedencodingexception connection pool connectionpool connect to connectto channel retrieves block data corresponds piece param piece int erested interested piece number array bytes data encompassed piece code code data illegal argument exception illegalargumentexception code piece code negative piece numbers io exception ioexception error occurs reading data local files get piece getpiece piece io exception ioexception piece nls illegal argument exception illegalargumentexception piece number negative piece has piece haspiece length illegal argument exception illegalargumentexception nls piece number piece exist data files length arrays fill data files length files contains piece containspiece piece data files get data getdata piece empty data length data data length empty empty bytes piece pieces piece get length getlength offset data length data system arraycopy data bytes offset data length offset data length bytes get piece data getpiecedata number offset length illegal argument exception illegalargumentexception io exception ioexception piece get piece getpiece number piece offset length piece length nls illegal argument exception illegalargumentexception block data requested range requested piece block length system arraycopy piece offset block length block performs hash check piece number data corrupt param piece number piece check code code sha hash piece data matches torrent file hash code code illegal argument exception illegalargumentexception piece completed io exception ioexception error occurs retrieving piece data file hash check hashcheck piece illegal argument exception illegalargumentexception io exception ioexception data get piece getpiece piece data torrent get pieces getpieces piece equals nls string sha digest shadigest digest data iso save state savestate io exception ioexception buffered writer bufferedwriter writer buffered writer bufferedwriter file writer filewriter torrent state torrentstate writer write to string tostring target file targetfile last modified lastmodified writer new line newline length writer write to string tostring writer new line newline writer flush writes data received peer local files param number piece number data corresponds param position piece retrieved data starts param data data peer param offset offset code data code actual bytes files start param length amount bytes data received io exception ioexception error occurs writing file saving performing hash check querying tracker write number data offset length io exception ioexception piece piece piece pieces number has piece haspiece number piece write data offset length remaining length downloaded length save state savestate fire block down loaded event fireblockdownloadedevent number length incomplete pieces incompletepieces piece incomplete pieces incompletepieces add piece piece is complete iscomplete incomplete pieces incompletepieces remove piece check completed piece checkcompletedpiece piece number check completed piece checkcompletedpiece piece piece number io exception ioexception hash check hashcheck number torrent configuration torrentconfiguration debug nls nls piece number passed hash check has piece haspiece number update bit field updatebitfield number fire piece completed event firepiececompletedevent completed pieces completedpieces connection pool connectionpool queue have message queuehavemessage number has piece haspiece length has piece haspiece is completed iscompleted fire state changed event firestatechangedevent i torrent state listener itorrentstatelistener finished connection pool connectionpool disconnect see ds disconnectseeds tracker download completed nls query tracker querytracker completed torrent configuration torrentconfiguration debug nls piece number failed hash check piece reset piece length piecelength piece get length getlength discarded piece length piecelength remaining remaining total piece length piecelength fire piece discard event firepiecediscardevent number piece length piecelength piece request peer pieces peerpieces is completed iscompleted piece request is selective isselective request request has piece haspiece peer pieces peerpieces is prior itizing isprioritizing request request priority pieces prioritypieces peer pieces peerpieces request request request int erested pieces interestedpieces peer pieces peerpieces request request int erested pieces interestedpieces peer pieces peerpieces request piece request compare peer pieces peerpieces is int erested isinterested compare has piece haspiece peer pieces peerpieces length has piece haspiece peer pieces peerpieces is int erested isinterested peer pieces peerpieces length compare peer pieces peerpieces is int erested isinterested is int erested isinterested has inc omplete piece hasincompletepiece incomplete pieces incompletepieces size piece piece piece incomplete pieces incompletepieces peer pieces peerpieces piece get number getnumber has inc omplete piece hasincompletepiece has inc omplete piece hasincompletepiece incomplete pieces incompletepieces size has piece haspiece compare get rare piece getrarepiece peer pieces peerpieces get rare piece getrarepiece compare peer pieces peerpieces piece piece piece incomplete pieces incompletepieces connection pool connectionpool random next int nextint incomplete pieces incompletepieces size peer pieces peerpieces piece get number getnumber is completed iscompleted incomplete pieces incompletepieces size has piece haspiece compare get rare piece getrarepiece peer pieces peerpieces get rare piece getrarepiece compare peer pieces peerpieces piece piece incomplete pieces incompletepieces connection pool connectionpool random next int nextint incomplete pieces incompletepieces size piece has piece haspiece compare get rare piece getrarepiece peer pieces peerpieces get rare piece getrarepiece compare peer pieces peerpieces piece get rare piece getrarepiece peer pieces peerpieces min piece availability pieceavailability peer pieces peerpieces length has piece haspiece peer pieces peerpieces min piece availability pieceavailability min piece availability pieceavailability size pieces size piece number piecenumber connection pool connectionpool random next int nextint size has piece haspiece piece number piecenumber piece availability pieceavailability piece number piecenumber min peer pieces peerpieces piece number piecenumber is completed iscompleted piece number piecenumber connection pool connectionpool random next int nextint size piece pieces piece number piecenumber piece get rare piece getrarepiece compare peer pieces peerpieces min piece availability pieceavailability peer pieces peerpieces length has piece haspiece compare peer pieces peerpieces min piece availability pieceavailability min piece availability pieceavailability size pieces size piece number piecenumber connection pool connectionpool random next int nextint size has piece haspiece piece number piecenumber piece availability pieceavailability piece number piecenumber min compare piece number piecenumber peer pieces peerpieces piece number piecenumber is completed iscompleted piece number piecenumber connection pool connectionpool random next int nextint size piece pieces piece number piecenumber string get peer d getpeerid peerid get bit field getbitfield bitfield piece user identifying pieces rare list connected peers param piece number piece update piece availability updatepieceavailability piece piece availability pieceavailability piece add piece availability addpieceavailability peer pieces peerpieces peer pieces peerpieces length piece availability pieceavailability length nls illegal argument exception illegalargumentexception length array piece availability pieceavailability length piece availability pieceavailability length peer pieces peerpieces piece availability pieceavailability remove piece availability removepieceavailability peer pieces peerpieces peer pieces peerpieces length piece availability pieceavailability length nls illegal argument exception illegalargumentexception length array piece availability pieceavailability length piece availability pieceavailability length peer pieces peerpieces piece availability pieceavailability add to uploaded addtouploaded length uploaded length sets maximum number connections host attempt connect peers plenty height ened heightened good reason net work network congestions param max connections maxconnections maximum number connections set max connections setmaxconnections max connections maxconnections connection pool connectionpool set max connections setmaxconnections max connections maxconnections setup file download priority levels file downloaded param download choices downloadchoices int eger integer array stores greater file high priority equal regular priority downloaded values correspond files returned link torrent file torrentfile link torrent file torrentfile get file names getfilenames method set files to down load setfilestodownload download choices downloadchoices files length download choices downloadchoices length nls illegal argument exception illegalargumentexception array length files length download choices downloadchoices length pieces files get pieces getpieces pieces length download choices downloadchoices priority pieces prioritypieces download choices downloadchoices int erested pieces interestedpieces uninterested pieces uninterestedpieces uninterested pieces uninterestedpieces is selective isselective download choices downloadchoices length download choices downloadchoices is prior itizing isprioritizing download choices downloadchoices length download choices downloadchoices length download choices downloadchoices download choices downloadchoices is selective isselective is selective isselective set max down load speed setmaxdownloadspeed maximum maximum max down speed maxdownspeed request down speed requestdownspeed max down speed maxdownspeed maximum request down speed requestdownspeed maximum set max upload speed setmaxuploadspeed maximum maximum max up speed maxupspeed request down speed requestdownspeed max up speed maxupspeed maximum request up speed requestupspeed maximum get max down load speed getmaxdownloadspeed max down speed maxdownspeed get max upload speed getmaxuploadspeed max up speed maxupspeed get down load request speed getdownloadrequestspeed request down speed requestdownspeed get upload request speed getuploadrequestspeed request up speed requestupspeed update down load request speed updatedownloadrequestspeed amount request down speed requestdownspeed request down speed requestdownspeed request down speed requestdownspeed amount amount request down speed requestdownspeed update upload request speed updateuploadrequestspeed amount request up speed requestupspeed request up speed requestupspeed request up speed requestupspeed amount amount request up speed requestupspeed retrieves amount downloaded original call link start amount bytes downloaded peers get down loaded getdownloaded downloaded returns number bytes uploaded peers calling link start amount bytes uploaded peers get uploaded getuploaded uploaded retreives number bytes required complete download number bytes left complete download get remaining getremaining remaining downloading speed calculated twenty rolling average speed bytes downloaded peers get down speed getdownspeed down speed downspeed retrieves uploading speed cal culations calculations twenty rolling average speed bytes uploaded peers get up speed getupspeed up speed upspeed get time remaining gettimeremaining is completed iscompleted down speed downspeed math remaining down speed downspeed retrieves amount data discarded caused pieces failed int egrity integrity hash check amount bytes discarded get discarded getdiscarded discarded retrieves number peers connections created number connected peers get connected peers getconnectedpeers connection pool connectionpool get connected getconnected returns number see ds seeds ass is ting assisting distribution number connected see ds seeds code code tracker support distribution get peers getpeers get see ds getseeds see ders seeders returns total number peers downloading torrent code host code total number connected peers torrent code code tracker support distribution get see ds getseeds get peers getpeers peers retrieves torrent create code host code code torrent code torrent file torrentfile get torrent file gettorrentfile torrent retrieves current host link i torrent state listener itorrentstatelistener host i torrent state listener itorrentstatelistener started i torrent state listener itorrentstatelistener exchanging i torrent state listener itorrentstatelistener stopped i torrent state listener itorrentstatelistener finished get state getstate adds listener collection listeners host contained listener not ified notified current torrent act ivity activity event correspond returned link get state getstate param listener listener notify illegal argument exception illegalargumentexception code listener code code code add torrent state listener addtorrentstatelistener i torrent state listener itorrentstatelistener listener illegal argument exception illegalargumentexception state listeners statelisteners state listeners statelisteners listener state listeners statelisteners add listener adds listener collection listeners host contained listener not ified notified piece completed verifying hash sum param listener listener notify illegal argument exception illegalargumentexception code listener code code code add torrent progress listener addtorrentprogresslistener i torrent progress listener itorrentprogresslistener listener illegal argument exception illegalargumentexception progress listeners progresslisteners progress listeners progresslisteners listener progress listeners progresslisteners add listener adds listener collection listeners host contained listener not ified notified piece downloaded amount additional bytes param listener listener notify illegal argument exception illegalargumentexception code listener code code code add piece progress listener addpieceprogresslistener i piece progress listener ipieceprogresslistener listener illegal argument exception illegalargumentexception piece listeners piecelisteners piece listeners piecelisteners listener piece listeners piecelisteners add listener adds listener collection listeners host contained listener not ified notified errors tracker failures hash check failures occurs param listener listener notify illegal argument exception illegalargumentexception code listener code code code add torrent error listener addtorrenterrorlistener i torrent error listener itorrenterrorlistener listener illegal argument exception illegalargumentexception error listeners errorlisteners error listeners errorlisteners listener error listeners errorlisteners add listener add hash check listener addhashchecklistener i hash check listener ihashchecklistener listener hash check listeners hashchecklisteners hash check listeners hashchecklisteners listener hash check listeners hashchecklisteners add listener remove torrent state listener removetorrentstatelistener i torrent state listener itorrentstatelistener listener state listeners statelisteners state listeners statelisteners remove listener remove torrent progress listener removetorrentprogresslistener i torrent progress listener itorrentprogresslistener listener progress listeners progresslisteners progress listeners progresslisteners remove listener remove piece progress listener removepieceprogresslistener i piece progress listener ipieceprogresslistener listener piece listeners piecelisteners piece listeners piecelisteners remove listener remove torrent error listener removetorrenterrorlistener i torrent error listener itorrenterrorlistener listener error listeners errorlisteners error listeners errorlisteners remove listener remove hash check listener removehashchecklistener i hash check listener ihashchecklistener listener hash check listeners hashchecklisteners hash check listeners hashchecklisteners remove listener fire state changed event firestatechangedevent state listeners statelisteners size i torrent state listener itorrentstatelistener state listeners statelisteners state changed statechanged fire block down loaded event fireblockdownloadedevent piece block length blocklength piece listeners piecelisteners piece listeners piecelisteners size i piece progress listener ipieceprogresslistener piece listeners piecelisteners block down loaded blockdownloaded piece block length blocklength fire piece completed event firepiececompletedevent completed progress listeners progresslisteners progress listeners progresslisteners size i torrent progress listener itorrentprogresslistener progress listeners progresslisteners piece completed piececompleted completed fire tracker error event firetrackererrorevent string message error listeners errorlisteners error listeners errorlisteners size i torrent error listener itorrenterrorlistener error listeners errorlisteners tracker error trackererror message fire piece discard event firepiecediscardevent piece piece length piecelength error listeners errorlisteners error listeners errorlisteners size i torrent error listener itorrenterrorlistener error listeners errorlisteners piece discarded piecediscarded piece piece length piecelength fire hash checked event firehashcheckedevent piece hash check listeners hashchecklisteners hash check listeners hashchecklisteners size i hash check listener ihashchecklistener hash check listeners hashchecklisteners hash checked hashchecked piece loads stored piece status updates torrent param specification piece downloaded illegal argument exception illegalargumentexception array length equal number pieces set pieces setpieces piece state piecestate length length illegal argument exception illegalargumentexception nls array size length length piece piece piece pieces piece is complete iscomplete completed pieces completedpieces has piece haspiece remaining piece get written getwritten piece set state setstate written piece get written getwritten remaining written written piece get length getlength completed pieces completedpieces has piece haspiece incomplete pieces incompletepieces remove piece written incomplete pieces incompletepieces piece incomplete pieces incompletepieces add piece update bit field updatebitfield has piece haspiece length has piece haspiece is completed iscompleted hash check thread hashcheckthread thread hash check thread hashcheckthread nls hash check thread torrent get name getname cleanup is hash checking ishashchecking fire state changed event firestatechangedevent i torrent state listener itorrentstatelistener stopped read count byte buffer bytebuffer buffer byte buffer bytebuffer all ocate allocate piece length piecelength files length file channel filechannel channel files get channel getchannel read channel read buffer piece length piecelength is interrupted isinterrupted cleanup piece piece piece pieces count piece is complete iscomplete completed pieces completedpieces has piece haspiece remaining piece get written getwritten buffer rewind torrent get pieces getpieces count equals string sha digest shadigest digest buffer array iso piece set as completed setascompleted has piece haspiece count completed pieces completedpieces remaining piece get length getlength piece reset incomplete pieces incompletepieces remove piece fire hash checked event firehashcheckedevent count count read read is interrupted isinterrupted cleanup piece piece piece pieces count piece is complete iscomplete completed pieces completedpieces has piece haspiece count remaining piece get written getwritten buffer rewind sha digest shadigest update buffer array read torrent get pieces getpieces count equals string sha digest shadigest digest nls iso has piece haspiece count piece set as completed setascompleted completed pieces completedpieces remaining piece get length getlength piece reset incomplete pieces incompletepieces remove piece fire hash checked event firehashcheckedevent count update bit field updatebitfield save state savestate is interrupted isinterrupted cleanup is hash checking ishashchecking is waiting to start iswaitingtostart torrent manager torrentmanager start io exception ioexception runtime exception runtimeexception closed by int err upt exception closedbyinterruptexception cleanup save state savestate io exception ioexception runtime exception runtimeexception io exception ioexception cleanup runtime exception runtimeexception tracker thread trackerthread thread tracker thread trackerthread nls tracker thread torrent get name getname thread sleep timeout query tracker querytracker io exception ioexception runtime exception runtimeexception interrupted exception interruptedexception speed monitoring thread speedmonitoringthread thread speed monitoring thread speedmonitoringthread nls speed monitoring thread torrent get name getname total down totaldown total up totalup last down loaded lastdownloaded downloaded last uploaded lastuploaded uploaded down loads downloads uploads thread sleep interrupted exception interruptedexception down loads downloads downloaded last down loaded lastdownloaded uploads uploaded last uploaded lastuploaded total down totaldown total up totalup total down totaldown down loads downloads total up totalup uploads down speed downspeed total down totaldown up speed upspeed total up totalup last down loaded lastdownloaded downloaded last uploaded lastuploaded uploaded request down speed requestdownspeed max down speed maxdownspeed request up speed requestupspeed max up speed maxupspeed