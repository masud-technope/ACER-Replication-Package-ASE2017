copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf internal examples remote services remoteservices consumer java util concurrent execution exception executionexception java util concurrent org eclipse core runtime org eclipse core runtime operation canceled exception operationcanceledexception org eclipse ecf core i container factory icontainerfactory org eclipse ecf examples remote services remoteservices hello message hellomessage org eclipse ecf examples remote services remoteservices i hello ihello org eclipse ecf examples remote services remoteservices i hello async ihelloasync org eclipse ecf osgi services distribution i distribution constants idistributionconstants org eclipse ecf remote service remoteservice i async callback iasynccallback org eclipse ecf remote service remoteservice i remote service iremoteservice org eclipse ecf remote service remoteservice i remote service proxy iremoteserviceproxy org eclipse ecf remote service remoteservice remote service helper remoteservicehelper org eclipse equinox app i application iapplication org eclipse equinox app i application context iapplicationcontext org eclipse equinox concurrent i future ifuture org osgi framework bundle context bundlecontext org osgi framework filter org osgi framework invalid syntax exception invalidsyntaxexception org osgi framework service reference servicereference org osgi framework service registration serviceregistration org osgi util tracker service tracker servicetracker org osgi util tracker service tracker customizer servicetrackercustomizer hello consumer application helloconsumerapplication i application iapplication i distribution constants idistributionconstants service tracker customizer servicetrackercustomizer string consumer org eclipse ecf examples remote services remoteservices consumer bundle context bundlecontext bundle context bundlecontext service tracker servicetracker container factory service tracker containerfactoryservicetracker string container type containertype ecf osgi peer object app lock applock object service tracker servicetracker hello service tracker helloservicetracker service registration serviceregistration discovery listener registration discoverylistenerregistration service registration serviceregistration distribution listener registration distributionlistenerregistration object start i application context iapplicationcontext app context appcontext exception bundle context service track ers trackers bundle context bundlecontext activator get context getcontext process args processargs app context appcontext create ecf container type container instance created var iety variety ways code org eclipse ecf container extension point automatically discovery i proxy container finder iproxycontainerfinder default proxy container finder defaultproxycontainerfinder get container factory getcontainerfactory create container createcontainer container type containertype create service tracker track i hello ihello instances service imported property defined osg i osgi remote services spec hello service tracker helloservicetracker service tracker servicetracker bundle context bundlecontext create remote filter createremotefilter hello service tracker helloservicetracker open wait for done waitfordone i application iapplication exit filter create remote filter createremotefilter invalid syntax exception invalidsyntaxexception remote services spec chapter bundle context bundlecontext create filter createfilter org osgi framework constants object class objectclass i hello ihello get name getname service imported hello service tracker helloservicetracker hello service tracker helloservicetracker close hello service tracker helloservicetracker container factory service tracker containerfactoryservicetracker container factory service tracker containerfactoryservicetracker close container factory service tracker containerfactoryservicetracker discovery listener registration discoverylistenerregistration discovery listener registration discoverylistenerregistration unregister discovery listener registration discoverylistenerregistration distribution listener registration distributionlistenerregistration distribution listener registration distributionlistenerregistration unregister distribution listener registration distributionlistenerregistration bundle context bundlecontext app lock applock app lock applock notify all notifyall i container factory icontainerfactory get container factory getcontainerfactory container factory service tracker containerfactoryservicetracker container factory service tracker containerfactoryservicetracker service tracker servicetracker bundle context bundlecontext i container factory icontainerfactory get name getname container factory service tracker containerfactoryservicetracker open i container factory icontainerfactory container factory service tracker containerfactoryservicetracker get service getservice process args processargs i application context iapplicationcontext app context appcontext string original args originalargs string app context appcontext get arguments getarguments application args original args originalargs original args originalargs length original args originalargs equals container type containertype container type containertype original args originalargs wait for done waitfordone wait app lock applock app lock applock wait interrupted exception interruptedexception method called remote i hello ihello instance registered object adding service addingservice service reference servicereference reference system println i hello ihello service proxy reference remote service service object returned proxy implementing i hello ihello i hello ihello proxy i hello ihello bundle context bundlecontext get service getservice reference call proxy sync hronously synchronously note call block fail sync hronous synchronous communication remote service system println starting remote call proxy proxy consumer proxy system println completed remote call proxy system println call hello message hellomessage method system println starting remote call proxy proxy hello message hellomessage hello message hellomessage consumer proxy how dy howdy system println completed remote call proxy system println asynchronous invoke methods asynchronously proxy i hello async ihelloasync i hello async ihelloasync hello a helloa i hello async ihelloasync proxy create callback i hello async ihelloasync i async callback iasynccallback callback i async callback iasynccallback string on success onsuccess string result system println completed remote call callback success result result system println on failure onfailure throwable system println completed remote call callback failed exception system println call asynchronously callback system println starting async remote call callback hello a helloa hello async helloasync consumer async proxy listener callback system println local async invocation complete system println call asynchronously system println starting async remote call string hello a helloa hello async helloasync consumer async proxy system println local async invocation complete system println is done isdone stuff system println local stuff waiting thread sleep block string result system println completed remote call succeeded result result system println operation canceled exception operationcanceledexception system println completed remote call callback cancelled exception system println print stack trace printstacktrace interrupted exception interruptedexception system println completed remote call callback int errupted interrupted exception system println print stack trace printstacktrace execution exception executionexception system println completed remote call callback int errupted interrupted exception system println print stack trace printstacktrace call hello message hellomessage method call asynchronously callback system println starting async remote call callback hello a helloa hello message async hellomessageasync hello message hellomessage consumer async proxy listener how dy howdy callback system println local async invocation complete system println call asynchronously system println starting async remote call hello a helloa hello message async hellomessageasync hello message hellomessage consumer async proxy how dy howdy system println local async invocation complete system println is done isdone stuff system println local stuff waiting thread sleep block string result system println completed remote call succeeded result result system println operation canceled exception operationcanceledexception system println completed remote call callback cancelled exception system println print stack trace printstacktrace interrupted exception interruptedexception system println completed remote call callback int errupted interrupted exception system println print stack trace printstacktrace execution exception executionexception system println completed remote call callback int errupted interrupted exception system println print stack trace printstacktrace osg i osgi remote service spec requires property named service imported ecf provider service imported property i remote service iremoteservice object remote service i remote service iremoteservice remote service remoteservice i remote service iremoteservice reference get property getproperty i distribution constants idistributionconstants service imported is not null isnotnull remote service remoteservice i remote service iremoteservice instance blocking asynchronous invocation remote methods client decide runtime sync hronous synchronous blocking calls asynchronous blocking calls remote service proxy remote service remoteservice i remote service proxy iremoteserviceproxy proxy get remote service getremoteservice is not null isnotnull remote service remoteservice blocking call placeholder result remote computation block system println starting async remote call i future ifuture remote service helper remoteservicehelper future exec futureexec remote service remoteservice object consumer system println local async invocation complete client execute arbitrary code blocks communication computation completed is done isdone stuff system println local stuff waiting thread sleep block object result system println completed remote call succeeded result result system println exception print stack trace printstacktrace proxy modified service modifiedservice service reference servicereference reference object service removed service removedservice service reference servicereference reference object service system println i hello ihello service proxy removed