copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html org eclipse ecf internal examples load balancing loadbalancing consumer org eclipse ecf core i container icontainer org eclipse ecf core i container manager icontainermanager org eclipse ecf core identity id factory idfactory org eclipse ecf core util ecf exception ecfexception org eclipse ecf examples load balancing loadbalancing i data processor idataprocessor org eclipse ecf remote service remoteservice i remote service iremoteservice org eclipse ecf remote service remoteservice i remote service container adapter iremoteservicecontaineradapter org eclipse ecf remote service remoteservice i remote service reference iremoteservicereference org eclipse ecf remote service remoteservice util tracker i remote service tracker customizer iremoteservicetrackercustomizer org eclipse ecf remote service remoteservice util tracker remote service tracker remoteservicetracker org eclipse equinox app i application iapplication org eclipse equinox app i application context iapplicationcontext org osgi framework bundle context bundlecontext org osgi util tracker service tracker servicetracker data processor consumer application dataprocessorconsumerapplication i application iapplication string svcconsumer container type ecf jms active mq activemq tcp client string topic tcp localhost example topic exampletopic string input data bundle context bundlecontext bundle context bundlecontext service tracker servicetracker container manager service tracker containermanagerservicetracker jms topic uri connect order lookup data processor remote service note topic id topicid changed topic id topicid launch parameter topic id topicid tcp myjmdnsbrokerdnsname my topic name mytopicname string topic id topicid topic container type load balancing service consumer container type normal client string container type containertype svcconsumer container type container instance conn ects connects activemq queue message producer pub lishes publishes service topic id topicid i container icontainer container i remote service container adapter iremoteservicecontaineradapter remote service adapter remoteserviceadapter input data passed data processor string input data inputdata input data lock flag synchronization object remote service received lock remoteservicereceivedlock object remote service received remoteservicereceived remote service remote service tracker customizer remoteservicetrackercustomizer sets i remote service iremoteservice remote service remoteservice remote service tracker customizer remoteservicetrackercustomizer i remote service tracker customizer iremoteservicetrackercustomizer i remote service iremoteservice adding service addingservice i remote service reference iremoteservicereference reference remote service remoteservice remote service adapter remoteserviceadapter get remote service getremoteservice reference i data processor idataprocessor data processor proxy dataprocessorproxy i data processor idataprocessor remote service remoteservice get proxy getproxy system println calling remote service input data input data inputdata call string result data processor proxy dataprocessorproxy process data processdata input data inputdata print system println tremote service result result ecf exception ecfexception print stack trace printstacktrace remote service received lock remoteservicereceivedlock remote service received remoteservicereceived remote service received lock remoteservicereceivedlock notify remote service remoteservice modified service modifiedservice i remote service reference iremoteservicereference reference i remote service iremoteservice remote service remoteservice removed service removedservice i remote service reference iremoteservicereference reference i remote service iremoteservice remote service remoteservice object start i application context iapplicationcontext app context appcontext exception bundle context bundlecontext activator get context getcontext process arguments queue id queueid topic id topicid process args processargs app context appcontext create container type container get container manager service getcontainermanagerservice get container factory getcontainerfactory create container createcontainer container type containertype adapter remote service adapter remoteserviceadapter i remote service container adapter iremoteservicecontaineradapter container get adapter getadapter i remote service container adapter iremoteservicecontaineradapter create remote service tracker open remote service tracker remoteservicetracker tracker remote service tracker remoteservicetracker remote service adapter remoteserviceadapter i data processor idataprocessor get name getname remote service tracker customizer remoteservicetrackercustomizer open tracker open connect topic trigger remote service registration async hronously asynchronously turn call remote service tracker customizer remoteservicetrackercustomizer adding service addingservice impl method container connect id factory idfactory get default getdefault createid container get connect name space getconnectnamespace topic id topicid wait remote service tracker receive proxy execute remote service tracker customizer remoteservicetrackercustomizer adding service addingservice wait for remote service waitforremoteservice i application iapplication exit container container dispose container get container manager service getcontainermanagerservice remove all containers removeallcontainers container manager service tracker containermanagerservicetracker container manager service tracker containermanagerservicetracker close container manager service tracker containermanagerservicetracker remote service received lock remoteservicereceivedlock remote service received remoteservicereceived remote service received lock remoteservicereceivedlock notify all notifyall bundle context bundlecontext process args processargs i application context iapplicationcontext app context appcontext string original args originalargs string app context appcontext get arguments getarguments application args original args originalargs original args originalargs length original args originalargs equals topic id topicid topic id topicid original args originalargs original args originalargs equals input data inputdata string buffer stringbuffer buf string buffer stringbuffer original args originalargs length buf append original args originalargs append input data inputdata buf to string tostring original args originalargs equals container type containertype container type containertype original args originalargs i container manager icontainermanager get container manager service getcontainermanagerservice container manager service tracker containermanagerservicetracker container manager service tracker containermanagerservicetracker service tracker servicetracker bundle context bundlecontext i container manager icontainermanager get name getname container manager service tracker containermanagerservicetracker open i container manager icontainermanager container manager service tracker containermanagerservicetracker get service getservice wait for remote service waitforremoteservice wait remote service received lock remoteservicereceivedlock remote service received remoteservicereceived remote service received lock remoteservicereceivedlock wait interrupted exception interruptedexception