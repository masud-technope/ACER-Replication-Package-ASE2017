copyright remy suen comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors remy suen remy suen gmail initial api implementation org eclipse ecf protocol bit torrent bittorrent internal torrent java io exception ioexception java util array list arraylist java util arrays java util vector code piece code data torrent meta info metainfo piece sha hash verify int egrity integrity data received peers piece amount data request peers data equal block request size code array list arraylist code link data file datafile piece corresponds array list arraylist files code array list arraylist code code integer code corresponsd length data link data file datafile link files piece represents array list arraylist file len gths filelengths piece number number piece link piece state piecestate stores per tai ning pertaining amount data written block piece state piecestate array corresponds number bytes written specific block written blocks writtenblocks array specific block requested peer requested array specific block completed completed length piece length number link block piece blocks piece piece torrent meta info metainfo is last piece islastpiece creates code piece code link piece state piecestate store number represent param code piece staet piecestaet code store param number number piece illegal argument exception illegalargumentexception code number code returns code code piece piece state piecestate number illegal argument exception illegalargumentexception number nls illegal argument exception illegalargumentexception piece number negative number number files array list arraylist file len gths filelengths array list arraylist sets length piece length piece amount bytes represents param length length piece illegal argument exception illegalargumentexception length negative set length setlength length illegal argument exception illegalargumentexception length nls illegal argument exception illegalargumentexception piece length negative length length is last piece islastpiece length block request size blocks length block request size is last piece islastpiece requested blocks completed blocks written blocks writtenblocks blocks retrieves piece length length piece get length getlength length removes data written piece piece data written blocks requested reset arrays fill requested arrays fill completed arrays fill written blocks writtenblocks reset retrieves offset position file position code pos code link files requires writing param pos position link data file datafile code files code param piece data writing additional offset piece corresponds code data file datafile code code code offset per tai n pertain file get file offset getfileoffset pos files size count offset offset integer file len gths filelengths count int value intvalue count pos offset pos offset integer file len gths filelengths count int value intvalue pos offset pos writes bytes received peers files local file system param piece index pieceindex piece block data received starts param block array subs ection subsection holds data received peer param offset starting offset code block code data files param length length bytes received peer code code writing performed code code io exception ioexception error occurs attempting write data files write piece index pieceindex block offset length io exception ioexception block index blockindex piece index pieceindex block request size completed block index blockindex add down loaded block adddownloadedblock piece index pieceindex length ret check writing piece block block index blockindex blocks limit is last piece islastpiece length block request size block request size ret offset length files size ret data file datafile files write number get file offset getfileoffset piece index pieceindex block ret ret piece index pieceindex ret written blocks writtenblocks block index blockindex length written blocks writtenblocks block index blockindex limit completed block index blockindex ret offset length files size ret data file datafile files write number get file offset getfileoffset piece index pieceindex block ret ret piece index pieceindex ret written blocks writtenblocks block index blockindex length entire block written not e note fact written blocks writtenblocks block index blockindex block request size completed block index blockindex retrieves amount bytes written piece amount data written get written getwritten total written blocks writtenblocks length total written blocks writtenblocks total adds link data file datafile piece length length data file piece holds param file code data file datafile code piece param length length bytes code file code contained piece illegal argument exception illegalargumentexception code file length code returns code code add file addfile data file datafile file length illegal argument exception illegalargumentexception file nls illegal argument exception illegalargumentexception file length nls illegal argument exception illegalargumentexception length negative number files add file file len gths filelengths add integer length returns amount data piece written equal length note method perform hash check data corrupt code code piece written data equal length code code is complete iscomplete completed blocks completed sets piece completed blocks completed data written set as completed setascompleted arrays fill requested arrays fill completed is last piece islastpiece blocks written blocks writtenblocks block request size written blocks writtenblocks blocks length block request size blocks written blocks writtenblocks block request size set as complete setascomplete length sets piece blocks piece requested completed param set state setstate piece state piecestate vector blocks get blocks getblocks blocks size block block block blocks block get index getindex block request size is last piece islastpiece block get index getindex block request size length block get block length getblocklength remainder length block request size remainder length block request size written blocks writtenblocks block request size requested completed length block request size block request size written blocks writtenblocks block request size requested completed written blocks writtenblocks remainder retrieves piece number torrent metadata file piece number get number getnumber number returns array size block data requested peer complete piece array size piece ide ntification identification number starting piece data received length data array code code block completed requested illegal state exception illegalstateexception length piece link set length setlength get request information getrequestinformation illegal state exception illegalstateexception length nls illegal state exception illegalstateexception length piece is complete iscomplete all requested allrequested blocks completed requested all requested allrequested random all requested allrequested random math random blocks requested random is complete iscomplete random math random blocks requested random random math random blocks completed random is complete iscomplete random math random blocks number written blocks writtenblocks random random block request size random blocks is last piece islastpiece length block request size block request size block request size