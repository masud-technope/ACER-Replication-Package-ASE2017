copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation mark us markus alexander kuppe ecf dev eclipse org lemmster dot reworked completely org eclipse ecf tests discovery java util arrays org eclipse core runtime operation canceled exception operationcanceledexception org eclipse ecf core container connect exception containerconnectexception org eclipse ecf core events i container event icontainerevent org eclipse ecf core util ecf runtime exception ecfruntimeexception org eclipse ecf discovery i service event iserviceevent org eclipse ecf discovery i service info iserviceinfo org eclipse ecf discovery identity i service type d iservicetypeid org eclipse ecf tests discovery listener test service listener testservicelistener org eclipse ecf tests discovery listener test service type listener testservicetypelistener org eclipse equinox concurrent i future ifuture discovery test discoverytest abstract discovery test abstractdiscoverytest wait time for provider waittimeforprovider events to expect eventstoexpect discovery test discoverytest string set wait time for provider setwaittimeforprovider a wait time for provider awaittimeforprovider wait time for provider waittimeforprovider a wait time for provider awaittimeforprovider a wait time for provider awaittimeforprovider register service registerservice i service info iserviceinfo service info serviceinfo exception assert not null assertnotnull service info serviceinfo assert not null assertnotnull discovery advertiser discoveryadvertiser discovery advertiser discoveryadvertiser register service registerservice service info serviceinfo unregister service unregisterservice i service info iserviceinfo service info serviceinfo exception assert not null assertnotnull service info serviceinfo assert not null assertnotnull discovery advertiser discoveryadvertiser discovery advertiser discoveryadvertiser unregister service unregisterservice service info serviceinfo javadoc junit framework test case testcase tear down teardown tear down teardown exception discovery advertiser discoveryadvertiser unregister service unregisterservice service info serviceinfo discovery locator discoverylocator purge cache purgecache tear down teardown register service registerservice discovery advertiser discoveryadvertiser register service registerservice service info serviceinfo ecf runtime exception ecfruntimeexception fail i service info iserviceinfo valid idca get message getmessage unregister service unregisterservice discovery advertiser discoveryadvertiser unregister service unregisterservice service info serviceinfo ecf runtime exception ecfruntimeexception fail unregistering service info serviceinfo work add listener register and wait addlistenerregisterandwait test service listener testservicelistener test service listener testservicelistener i service info iserviceinfo a service info aserviceinfo test service listener testservicelistener register service expect test listener not ified notified register service registerservice test service listener testservicelistener wait wait time for provider waittimeforprovider interrupted exception interruptedexception thread current thread currentthread int errupt interrupt fail discovery unrelated threading issues add service listener addservicelistener test service listener testservicelistener service listener servicelistener discovery locator discoverylocator add service listener addservicelistener service listener servicelistener add listener register and wait addlistenerregisterandwait service listener servicelistener service info serviceinfo discovery locator discoverylocator remove service listener removeservicelistener service listener servicelistener i container event icontainerevent event service listener servicelistener get event getevent assert not null assertnotnull test listener didn receive discovery event event assert equals assertequals test listener received unexpected amount discovery events arrays as list aslist event events to expect eventstoexpect event length i service info iserviceinfo service info serviceinfo i service event iserviceevent event events to expect eventstoexpect get service info getserviceinfo assert true asserttrue i service info iserviceinfo match expected service info serviceinfo service info serviceinfo comparator compare service info serviceinfo service info serviceinfo test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter get service info getserviceinfo org eclipse ecf discovery identity i service d iserviceid container connect exception containerconnectexception test get service info testgetserviceinfo container connect exception containerconnectexception register service registerservice i service info iserviceinfo info discovery locator discoverylocator get service info getserviceinfo service info serviceinfo get service d getserviceid assert true asserttrue i service info iserviceinfo match expected service info serviceinfo info comparator compare info service info serviceinfo test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter get service types getservicetypes container connect exception containerconnectexception test get service types testgetservicetypes container connect exception containerconnectexception register service registerservice i service type d iservicetypeid service type ds servicetypeids discovery locator discoverylocator get service types getservicetypes assert true asserttrue i service info iserviceinfo empty service type ds servicetypeids length service type ds servicetypeids length i service type d iservicetypeid i service type id iservicetypeid service type ds servicetypeids service info serviceinfo get service d getserviceid get service type d getservicetypeid equals i service type id iservicetypeid fail registered service test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter get services getservices container connect exception containerconnectexception test get services testgetservices container connect exception containerconnectexception register service registerservice i service info iserviceinfo services discovery locator discoverylocator get services getservices assert true asserttrue i service info iserviceinfo empty services length services length i service info iserviceinfo i service info iserviceinfo services comparator compare i service info iserviceinfo service info serviceinfo fail registered service test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter get services getservices org eclipse ecf discovery identity i service type d iservicetypeid container connect exception containerconnectexception test get services service type d testgetservicesiservicetypeid container connect exception containerconnectexception register service registerservice i service info iserviceinfo service infos serviceinfos discovery locator discoverylocator get services getservices service info serviceinfo get service d getserviceid get service type d getservicetypeid assert true asserttrue i service info iserviceinfo empty service infos serviceinfos length service infos serviceinfos length i service info iserviceinfo i service info iserviceinfo service infos serviceinfos comparator compare i service info iserviceinfo service info serviceinfo fail registered service test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter register service registerservice org eclipse ecf discovery i service info iserviceinfo container connect exception containerconnectexception test register service testregisterservice container connect exception containerconnectexception register service registerservice i service info iserviceinfo services discovery locator discoverylocator get services getservices assert true asserttrue i service info iserviceinfo empty services length services length i service info iserviceinfo service services comparator compare service service info serviceinfo fail registered service test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter unregister service unregisterservice org eclipse ecf discovery i service info iserviceinfo container connect exception containerconnectexception test unregister service testunregisterservice container connect exception containerconnectexception test register service testregisterservice unregister service unregisterservice i service info iserviceinfo services discovery locator discoverylocator get services getservices services length i service info iserviceinfo service services comparator compare service service info serviceinfo fail expected service registered test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter add service listener addservicelistener org eclipse ecf discovery i service listener iservicelistener container connect exception containerconnectexception test add service listener service listener testaddservicelisteneriservicelistener container connect exception containerconnectexception i service info iserviceinfo services discovery locator discoverylocator get services getservices assert true asserttrue services register d registerd point services length services to string tostring services length test service listener testservicelistener tsl test service listener testservicelistener events to expect eventstoexpect discovery locator discoverylocator get name getname get test id gettestid add service listener addservicelistener tsl test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter add service listener addservicelistener org eclipse ecf discovery identity i service type d iservicetypeid org eclipse ecf discovery i service listener iservicelistener container connect exception containerconnectexception test add service listener service type service listener testaddservicelisteneriservicetypeidiservicelistener container connect exception containerconnectexception i service info iserviceinfo services discovery locator discoverylocator get services getservices assert true asserttrue services register d registerd point services length services to string tostring services length test service listener testservicelistener tsl test service listener testservicelistener events to expect eventstoexpect discovery locator discoverylocator get name getname get test id gettestid discovery locator discoverylocator add service listener addservicelistener service info serviceinfo get service d getserviceid get service type d getservicetypeid tsl add listener register and wait addlistenerregisterandwait tsl service info serviceinfo discovery locator discoverylocator remove service listener removeservicelistener service info serviceinfo get service d getserviceid get service type d getservicetypeid tsl i container event icontainerevent event tsl get event getevent assert not null assertnotnull test listener didn receive discovery event assert equals assertequals test listener received unexpected amount discovery events arrays as list aslist event events to expect eventstoexpect event length i service info iserviceinfo service info serviceinfo i service event iserviceevent event events to expect eventstoexpect get service info getserviceinfo assert true asserttrue i service info iserviceinfo match expected service info serviceinfo service info serviceinfo comparator compare service info serviceinfo service info serviceinfo test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter add service type listener addservicetypelistener org eclipse ecf discovery i service type listener iservicetypelistener container connect exception containerconnectexception test add service type listener testaddservicetypelistener container connect exception containerconnectexception i service info iserviceinfo services discovery locator discoverylocator get services getservices assert true asserttrue services register d registerd point services length services to string tostring services length test service type listener testservicetypelistener test type listener testtypelistener test service type listener testservicetypelistener events to expect eventstoexpect discovery locator discoverylocator add service type listener addservicetypelistener test type listener testtypelistener test type listener testtypelistener register service expect test listener not ified notified register service registerservice test type listener testtypelistener wait wait time for provider waittimeforprovider interrupted exception interruptedexception thread current thread currentthread int errupt interrupt fail discovery unrelated threading issues discovery locator discoverylocator remove service type listener removeservicetypelistener test type listener testtypelistener i container event icontainerevent event test type listener testtypelistener get event getevent assert not null assertnotnull test listener didn receive discovery event assert equals assertequals test listener received unexpected amount discovery events arrays as list aslist event events to expect eventstoexpect event length test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter remove service listener removeservicelistener org eclipse ecf discovery i service listener iservicelistener container connect exception containerconnectexception test remove service listener service listener testremoveservicelisteneriservicelistener container connect exception containerconnectexception test service listener testservicelistener service listener servicelistener test service listener testservicelistener events to expect eventstoexpect discovery locator discoverylocator get name getname get test id gettestid add service listener addservicelistener service listener servicelistener todo reregister verify listener doesn receive events longer test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter remove service listener removeservicelistener org eclipse ecf discovery identity i service type d iservicetypeid org eclipse ecf discovery i service listener iservicelistener container connect exception containerconnectexception test remove service listener service type service listener testremoveservicelisteneriservicetypeidiservicelistener container connect exception containerconnectexception test service listener testservicelistener service listener servicelistener test service listener testservicelistener events to expect eventstoexpect discovery locator discoverylocator get name getname get test id gettestid add service listener addservicelistener service listener servicelistener todo reregister verify listener doesn receive events longer test method link org eclipse ecf discovery i discovery container adapter idiscoverycontaineradapter remove service type listener removeservicetypelistener org eclipse ecf discovery i service type listener iservicetypelistener container connect exception containerconnectexception test remove service type listener testremoveservicetypelistener container connect exception containerconnectexception assert true asserttrue services register d registerd point discovery locator discoverylocator get services getservices length test service type listener testservicetypelistener test type listener testtypelistener test service type listener testservicetypelistener events to expect eventstoexpect discovery locator discoverylocator add service type listener addservicetypelistener test type listener testtypelistener test type listener testtypelistener register service expect test listener not ified notified register service registerservice test type listener testtypelistener wait wait time for provider waittimeforprovider interrupted exception interruptedexception thread current thread currentthread int errupt interrupt fail discovery unrelated threading issues discovery locator discoverylocator remove service type listener removeservicetypelistener test type listener testtypelistener i container event icontainerevent event test type listener testtypelistener get event getevent assert not null assertnotnull test listener didn receive discovery event event assert equals assertequals test listener received unexpected amount discovery events arrays as list aslist event events to expect eventstoexpect event length todo reregister verify listener doesn receive events longer test method link org eclipse ecf discovery i discovery locator idiscoverylocator get async service info getasyncserviceinfo org eclipse ecf discovery identity i service d iserviceid interrupted exception interruptedexception operation canceled exception operationcanceledexception container connect exception containerconnectexception test get async service info testgetasyncserviceinfo operation canceled exception operationcanceledexception interrupted exception interruptedexception container connect exception containerconnectexception register service registerservice i future ifuture a future afuture discovery locator discoverylocator get async service info getasyncserviceinfo service info serviceinfo get service d getserviceid object object a future afuture assert true asserttrue object i service info iserviceinfo i service info iserviceinfo info i service info iserviceinfo object assert true asserttrue i service info iserviceinfo match expected service info serviceinfo info comparator compare info service info serviceinfo test method link org eclipse ecf discovery i discovery locator idiscoverylocator get async services getasyncservices container connect exception containerconnectexception interrupted exception interruptedexception operation canceled exception operationcanceledexception test get async services testgetasyncservices container connect exception containerconnectexception operation canceled exception operationcanceledexception interrupted exception interruptedexception register service registerservice i future ifuture a future afuture discovery locator discoverylocator get async services getasyncservices object object a future afuture assert true asserttrue object i service info iserviceinfo i service info iserviceinfo services i service info iserviceinfo object assert true asserttrue services length arrays as list aslist services services length events to expect eventstoexpect services length i service info iserviceinfo i service info iserviceinfo services comparator compare i service info iserviceinfo service info serviceinfo fail registered service test method link org eclipse ecf discovery i discovery locator idiscoverylocator get async services getasyncservices org eclipse ecf discovery identity i service type d iservicetypeid container connect exception containerconnectexception interrupted exception interruptedexception operation canceled exception operationcanceledexception test get async services service type d testgetasyncservicesiservicetypeid container connect exception containerconnectexception operation canceled exception operationcanceledexception interrupted exception interruptedexception register service registerservice i future ifuture a future afuture discovery locator discoverylocator get async services getasyncservices service info serviceinfo get service d getserviceid get service type d getservicetypeid object object a future afuture assert true asserttrue object i service info iserviceinfo i service info iserviceinfo services i service info iserviceinfo object assert true asserttrue services length arrays as list aslist services services length events to expect eventstoexpect services length i service info iserviceinfo i service info iserviceinfo services comparator compare i service info iserviceinfo service info serviceinfo fail registered service test method link org eclipse ecf discovery i discovery locator idiscoverylocator get async service types getasyncservicetypes container connect exception containerconnectexception interrupted exception interruptedexception operation canceled exception operationcanceledexception test get async service types testgetasyncservicetypes container connect exception containerconnectexception operation canceled exception operationcanceledexception interrupted exception interruptedexception register service registerservice i future ifuture a future afuture discovery locator discoverylocator get async service types getasyncservicetypes object object a future afuture assert true asserttrue object i service type d iservicetypeid i service type d iservicetypeid services i service type d iservicetypeid object expect event implementation filters dupes assert true asserttrue services length arrays as list aslist services services length services length i service type d iservicetypeid i service type id iservicetypeid services service info serviceinfo get service d getserviceid get service type d getservicetypeid equals i service type id iservicetypeid fail registered service