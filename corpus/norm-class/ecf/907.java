copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf remote service remoteservice util tracker java util org eclipse ecf core identity org eclipse ecf remote service remoteservice org eclipse ecf remote service remoteservice events org eclipse ecf remote service remoteservice util remote filter impl remotefilterimpl org osgi framework invalid syntax exception invalidsyntaxexception org osgi framework service event serviceevent remote service tracker implementation service tracker servicetracker ecf remote services remoteservices api get remote service getremoteservice method returns instances link i remote service iremoteservice suppress warnings suppresswarnings unchecked remote service tracker remoteservicetracker i remote service tracker customizer iremoteservicetrackercustomizer compile debug messages nls debug get boolean getboolean org eclipse ecf remote service remoteservice util tracker remote service tracker remoteservicetracker debug i remote service container adapter iremoteservicecontaineradapter container adapter containeradapter code remote service tracker remoteservicetracker code code tracking i remote service container adapter iremoteservicecontaineradapter container adapter containeradapter container i ds ids provide context tracking containerids filter search criteria services track i remote filter iremotefilter filter code service tracker customizer servicetrackercustomizer code object tracker i remote service tracker customizer iremoteservicetrackercustomizer customizer filter string adding service listener servicelistener string listener filter listenerfilter tracked field tracking string track class trackclass reference tracked field tracking single i remote service reference iremoteservicereference i remote service reference iremoteservicereference track reference trackreference filter object supplied constructor supplied filter no user filter nouserfilter tracked services code service reference servicereference code object custom ized customized object code service listener servicelistener code object tracked tracked modification count field initialized open close inc remented incremented modified field accessed multiple threads tracking count trackingcount cached service reference servicereference get service reference getservicereference field accessed multiple threads i remote service reference iremoteservicereference cached reference cachedreference cached service object get service getservice field accessed multiple threads i remote service iremoteservice cached service cachedservice create code remote service tracker remoteservicetracker code code code i remote service reference iremoteservicereference code remote service referenced code i remote service reference iremoteservicereference code object tracked code remote service tracker remoteservicetracker code code object param container adapter containeradapter code i remote service container adapter iremoteservicecontaineradapter code tracking param reference code i remote service reference iremoteservicereference code remote service tracked param customizer customizer object call services modified removed code remote service tracker remoteservicetracker code object customizer code code code remote service tracker remoteservicetracker code object code service tracker customizer servicetrackercustomizer code object code remote service tracker remoteservicetracker code object call code service tracker customizer servicetrackercustomizer code methods remote service tracker remoteservicetracker i remote service container adapter iremoteservicecontaineradapter container adapter containeradapter containerids i remote service reference iremoteservicereference reference i remote service tracker customizer iremoteservicetrackercustomizer customizer container adapter containeradapter container adapter containeradapter track reference trackreference reference containerids containerids track class trackclass customizer customizer customizer listener filter listenerfilter nls nls constants obj ectclass objectclass string reference get property getproperty constants obj ectclass objectclass constants service reference get property getproperty constants service to string tostring nls nls nls no user filter nouserfilter filter remote filter impl remotefilterimpl listener filter listenerfilter invalid syntax exception invalidsyntaxexception exception illegal argument exception illegalargumentexception unexpected invalid syntax exception invalidsyntaxexception get message getmessage create code remote service tracker remoteservicetracker code object services registered tracked code remote service tracker remoteservicetracker code object param container adapter containeradapter code bundle context bundlecontext code object tracking param clazz services tracked param customizer customizer object call services modified removed code remote service tracker remoteservicetracker code object customizer code code code remote service tracker remoteservicetracker code object code service tracker customizer servicetrackercustomizer code object code remote service tracker remoteservicetracker code object call code service tracker customizer servicetrackercustomizer code methods remote service tracker remoteservicetracker i remote service container adapter iremoteservicecontaineradapter container adapter containeradapter containerids string clazz i remote service tracker customizer iremoteservicetrackercustomizer customizer container adapter containeradapter container adapter containeradapter track reference trackreference track class trackclass clazz containerids containerids customizer customizer customizer nls nls nls listener filter listenerfilter constants obj ectclass objectclass clazz to string tostring no user filter nouserfilter filter remote filter impl remotefilterimpl listener filter listenerfilter invalid syntax exception invalidsyntaxexception exception illegal argument exception illegalargumentexception unexpected invalid syntax exception invalidsyntaxexception get message getmessage open code remote service tracker remoteservicetracker code object tracking services services match search criteria code remote service tracker remoteservicetracker code object created tracked code remote service tracker remoteservicetracker code object java lang illegal state exception illegalstateexception code bundle context bundlecontext code object code remote service tracker remoteservicetracker code object created longer valid open tracked debug nls system println remote service tracker remoteservicetracker open filter tracked tracked tracking count trackingcount tracked container adapter containeradapter add remote service listener addremoteservicelistener tracked i remote service reference iremoteservicereference references tracking single reference track reference trackreference references i remote service reference iremoteservicereference track reference trackreference tracking references references get initial references getinitialreferences containerids track class trackclass no user filter nouserfilter filter to string tostring tracked tracked set initial services setinitialservices references initial references invalid syntax exception invalidsyntaxexception runtime exception runtimeexception unexpected invalid syntax exception invalidsyntaxexception get message getmessage call tracked region process initial references tracked track initial services trackinitialservices returns list initial code service reference servicereference code objects tracked code remote service tracker remoteservicetracker code object param track class trackclass service registered services param filter string filterstring filter criteria services list initial code service reference servicereference code objects invalid syntax exception invalidsyntaxexception filter invalid syntax i remote service reference iremoteservicereference get initial references getinitialreferences ids string clazz string filter string filterstring invalid syntax exception invalidsyntaxexception container adapter containeradapter get remote service references getremoteservicereferences ids clazz filter string filterstring close code remote service tracker remoteservicetracker code method called code remote service tracker remoteservicetracker code object tracking services close tracked debug nls system println remote service tracker remoteservicetracker close filter tracked close i remote service reference iremoteservicereference references get remote service references getremoteservicereferences tracked out going outgoing tracked tracked container adapter containeradapter remove remote service listener removeremoteservicelistener out going outgoing illegal state exception illegalstateexception references references length out going outgoing untrack references tracking count trackingcount debug cached reference cachedreference cached service cachedservice nls system println nls remote service tracker remoteservicetracker close cached cleared filter implementation code i remote service tracker customizer iremoteservicetrackercustomizer adding service addingservice code method method called code remote service tracker remoteservicetracker code code object constructed code i remote service tracker customizer iremoteservicetrackercustomizer code argument implementation returns result calling code get service getservice code code bundle context bundlecontext code object code remote service tracker remoteservicetracker code object created passing code service reference servicereference code object method overridden subclass customize service object tracked service care rely implementation removed service removedservice unget service param reference reference service code remote service tracker remoteservicetracker code object i remote service iremoteservice object tracked service code remote service tracker remoteservicetracker code code object i remote service tracker customizer iremoteservicetrackercustomizer i remote service iremoteservice adding service addingservice i remote service reference iremoteservicereference reference container adapter containeradapter get remote service getremoteservice reference implementation code service tracker customizer servicetrackercustomizer modified service modifiedservice code method method called code remote service tracker remoteservicetracker code object constructed code service tracker customizer servicetrackercustomizer code argument implementation param reference reference modified service param remote service remoteservice service object modified service i remote service tracker customizer iremoteservicetrackercustomizer modified service modifiedservice i remote service reference iremoteservicereference reference i remote service iremoteservice remote service remoteservice subclasses override implementation code service tracker customizer servicetrackercustomizer removed service removedservice code method method called code remote service tracker remoteservicetracker code object constructed code service tracker customizer servicetrackercustomizer code argument implementation calls code unget service ungetservice code code bundle context bundlecontext code object code remote service tracker remoteservicetracker code object created passing code service reference servicereference code object method overridden subclass implementation code adding service addingservice code method method unget service param reference reference removed service param remote service remoteservice service object removed service i remote service tracker customizer iremoteservicetrackercustomizer removed service removedservice i remote service reference iremoteservicereference reference i remote service iremoteservice remote service remoteservice container adapter containeradapter unget remote service ungetremoteservice reference wait service tracked code remote service tracker remoteservicetracker code object recommended code wait for service waitforservice code calling code bundle activator bundleactivator code methods code bundle activator bundleactivator code methods expected complete period time param timeout time int erval interval milliseconds wait method wait ind efinitely indefinitely returns result code get service getservice code interrupted exception interruptedexception thread int errupted interrupted current thread illegal argument exception illegalargumentexception timeout negative i remote service iremoteservice wait for remote service waitforremoteservice timeout interrupted exception interruptedexception timeout nls illegal argument exception illegalargumentexception timeout negative i remote service iremoteservice object get remote service getremoteservice object tracked tracked local service tracker servicetracker open size wait timeout object get remote service getremoteservice timeout object object array code service reference servicereference code objects services tracked code remote service tracker remoteservicetracker code object array code service reference servicereference code objects code code service tracked i remote service reference iremoteservicereference get remote service references getremoteservicereferences tracked tracked local service tracker servicetracker open length size length i remote service reference iremoteservicereference references i remote service reference iremoteservicereference length enumeration length references i remote service reference iremoteservicereference next element nextelement references returns code service reference servicereference code object services tracked code remote service tracker remoteservicetracker code object multiple services tracked service highest ranking code service ranking code property returned tie ranking service lowest service code service code property service registered returned algorithm code bundle context bundlecontext get service reference getservicereference code code service reference servicereference code object code code service tracked i remote service reference iremoteservicereference get remote service reference getremoteservicereference i remote service reference iremoteservicereference reference cached reference cachedreference reference debug nls system println nls remote service tracker remoteservicetracker get remote service reference getremoteservicereference cached filter reference debug nls system println remote service tracker remoteservicetracker get remote service reference getremoteservicereference filter i remote service reference iremoteservicereference references get remote service references getremoteservicereferences length references references length length service tracked length service select highest ranking rank ings rankings length count max ranking maxranking integer min length object property references get property getproperty constants service ranking ranking property integer integer property int value intvalue rank ings rankings ranking ranking max ranking maxranking max ranking maxranking ranking count ranking max ranking maxranking count service select lowest count min id minid max length rank ings rankings max ranking maxranking references get property getproperty constants service long value longvalue min id minid min id minid cached reference cachedreference references returns service object code service reference servicereference code object referenced service tracked code remote service tracker remoteservicetracker code object param reference reference desired service service object code code service referenced code service reference servicereference code object tracked i remote service iremoteservice get remote service getremoteservice i remote service reference iremoteservicereference reference tracked tracked local service tracker servicetracker open i remote service iremoteservice reference array service objects services tracked code remote service tracker remoteservicetracker code object array service objects code code service tracked i remote service iremoteservice get remote services getremoteservices tracked tracked local service tracker servicetracker open i remote service reference iremoteservicereference references get remote service references getremoteservicereferences length references references length length i remote service iremoteservice objects i remote service iremoteservice length length objects get remote service getremoteservice references objects returns service object services tracked code remote service tracker remoteservicetracker code object services tracked method returns result calling code get service getservice get service reference getservicereference code service object code code service tracked i remote service iremoteservice get remote service getremoteservice i remote service iremoteservice service cached service cachedservice service debug nls system println nls remote service tracker remoteservicetracker get remote service getremoteservice cached filter service debug nls system println remote service tracker remoteservicetracker get remote service getremoteservice filter i remote service reference iremoteservicereference reference get remote service reference getremoteservicereference reference cached service cachedservice get remote service getremoteservice reference remove service code remote service tracker remoteservicetracker code object service removed code remote service tracker remoteservicetracker code object service tracked code service tracker customizer servicetrackercustomizer removed service removedservice code method called service param reference reference service removed remove i remote service reference iremoteservicereference reference tracked tracked local service tracker servicetracker open untrack reference number services tracked code remote service tracker remoteservicetracker code object number services tracked size tracked tracked local service tracker servicetracker open size returns tracking count code remote service tracker remoteservicetracker code object tracking count initialized code remote service tracker remoteservicetracker code object opened time service modified removed code remote service tracker remoteservicetracker code object tracking count inc remented incremented tracking count determine code remote service tracker remoteservicetracker code object modified removed service comparing tracking count collected current tracking count changed service modified removed code remote service tracker remoteservicetracker code object previous tracking count collected tracking count code remote service tracker remoteservicetracker code object code remote service tracker remoteservicetracker code object open get tracking count gettrackingcount tracking count trackingcount called tracked object tracked services modified inc rements increments tracking count clears cache guarded by guardedby tracked method called tracked tracked don synchronization int eractions interactions service listener servicelistener thread user thread modified tracking count trackingcount increment modification count cached reference cachedreference clear cached cached service cachedservice clear cached debug nls system println remote service tracker remoteservicetracker modified filter tracked hashtable i remote service listener iremoteservicelistener serialversionuid list service references servicereferences process deal nesting service events serviceevents service events serviceevents sync hronously synchronously delivered service events serviceevents nested processing adding service customizer service unregistered not ification notification nested call untrack service unregistered track method array list arraylist implementation access list object thread safety guarded by guardedby array list arraylist adding tracked object closed field thread read closed initial list service references servicereferences tracker correctly process initial services unregistered tracked initial tracked services anno unced announced service events serviceevents service event serviceevent unregistration delivered track service service initial adding lists time service moved initial list adding list atomic ally atomically tracking linked list linkedlist implementation access list object thread safety guarded by guardedby linked list linkedlist initial tracked constructor tracked closed adding array list arraylist initial linked list linkedlist initial list services tracker service events serviceevents received method called service tracker servicetracker open object block add service listener addservicelistener call param references initial list services tracked guarded by guardedby set initial services setinitialservices i remote service reference iremoteservicereference references references size references length size debug system println nls remote service tracker remoteservicetracker tracked set initial services setinitialservices nls references initial add references track initial list services called service events serviceevents received method called service tracker servicetracker open object add service listener addservicelistener call track initial services trackinitialservices i remote service reference iremoteservicereference reference initial size move service initial list adding list block reference i remote service reference iremoteservicereference initial remove first removefirst reference tracking service debug system println nls remote service tracker remoteservicetracker tracked track initial services trackinitialservices tracked nls reference skip service adding reference service process debug system println nls remote service tracker remoteservicetracker tracked track initial services trackinitialservices adding nls reference skip service adding add reference debug system println nls remote service tracker remoteservicetracker tracked track initial services trackinitialservices nls reference track adding trackadding reference tracking call track adding trackadding reference adding list called owning code remote service tracker remoteservicetracker code object closed close closed code service listener servicelistener code method code remote service tracker remoteservicetracker code method avoid deadlock potential param event code service event serviceevent code object framework handle service event handleserviceevent i remote service event iremoteserviceevent event check delayed call happen close closed type service event serviceevent modified event i remote service registered event iremoteserviceregisteredevent type service event serviceevent registered event i remote service unregistered event iremoteserviceunregisteredevent type service event serviceevent unregistering i remote service reference iremoteservicereference reference event get reference getreference debug nls nls system println remote service tracker remoteservicetracker tracked service changed servicechanged event get class getclass reference type service event serviceevent registered service event serviceevent modified user supplied filter checked no user filter nouserfilter track reference customizer unchecked exception safe propagate filter supplied user checked filter match reference track reference customizer unchecked exception safe propagate untrack reference customizer unchecked exception safe propagate service event serviceevent unregistering untrack reference customizer unchecked exception safe propagate track referenced service param reference i remote service reference iremoteservicereference service tracked track i remote service reference iremoteservicereference reference i remote service iremoteservice object object i remote service iremoteservice reference object tracking service debug system println nls remote service tracker remoteservicetracker tracked track modified nls reference increment modification count modified call customizer region customizer modified service modifiedservice reference object customizer unchecked exception safe propagate adding reference service process debug system println nls remote service tracker remoteservicetracker tracked track adding nls reference adding add reference mark service track adding trackadding reference call track adding trackadding reference adding list common logic add service tracker track track initial services trackinitialservices reference adding list calling method param reference i remote service reference iremoteservicereference service tracked track adding trackadding i remote service reference iremoteservicereference reference debug nls system println nls remote service tracker remoteservicetracker tracked track adding trackadding reference i remote service iremoteservice object became untracked becameuntracked call customizer region object customizer adding service addingservice reference customizer unchecked exception propagate adding remove reference service untracked customizer callback object reference object increment modification count modified notify all notifyall notify wait ers waiters wait for service waitforservice became untracked becameuntracked service untracked customizer callback became untracked becameuntracked debug system println nls remote service tracker remoteservicetracker tracked track adding trackadding removed nls reference call customizer region customizer removed service removedservice reference object customizer unchecked exception safe propagate discontinue tracking referenced service param reference reference tracked service untrack i remote service reference iremoteservicereference reference i remote service iremoteservice object initial remove reference service list initial references process debug system println nls remote service tracker remoteservicetracker tracked untrack removed initial nls reference removed list processed adding remove reference service process debug system println nls remote service tracker remoteservicetracker tracked untrack nls reference service untracked process adding object i remote service iremoteservice remove reference remove tracker calling customizer callback object tracking service increment modification count modified debug nls system println nls remote service tracker remoteservicetracker tracked untrack removed reference customizer removed service removedservice reference object all tracked alltracked tracked serialversionuid all tracked alltracked