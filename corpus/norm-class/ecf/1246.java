copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation org eclipse ecf clients applications java util collections java util hash map hashmap java util map org eclipse ecf core identity org eclipse ecf core identity id factory idfactory org eclipse ecf core shared object sharedobject i shared object container isharedobjectcontainer org eclipse ecf clients i message receiver imessagereceiver org eclipse ecf clients xmpp chat client xmppchatclient org eclipse ecf presence i presence ipresence org eclipse ecf presence i presence listener ipresencelistener org eclipse ecf presence i chat d ichatid org eclipse ecf presence i chat message ichatmessage org eclipse equinox app i application iapplication org eclipse equinox app i application context iapplicationcontext chatsorobotapplication i application iapplication i message receiver imessagereceiver i presence listener ipresencelistener map account xmppid items i presence listener ipresencelistener handle presence handlepresence method map roster use rs rosterusers collections synchronized map synchronizedmap hash map hashmap javadoc org eclipse equinox app i application iapplication start org eclipse equinox app i application context iapplicationcontext object start i application context iapplicationcontext context exception process program arguments string original args originalargs string context get arguments getarguments application args original args originalargs length system println parameters sender acc ount senderaccount sender password senderpassword target acc ount targetaccount message sender gmail sender password senderpassword receiver gmail integer string message original args originalargs length message original args originalargs create client xmpp chat client xmppchatclient client xmpp chat client xmppchatclient connect client connect original args originalargs original args originalargs wait roster presence received object lock object lock lock wait desired user roster use rs rosterusers map user active contacts list targetid roster use rs rosterusers original args originalargs targetid system println target user original args originalargs active contacts list send message user integer construct message string msg to send msgtosend message ecf chat robot message system println ecf chat robot sending target acc ount targetaccount original args originalargs message msg to send msgtosend send chat message targetid client send chat sendchat targetid msg to send msgtosend shared object container adapter i shared object container isharedobjectcontainer socontainer i shared object container isharedobjectcontainer client get container getcontainer get adapter getadapter i shared object container isharedobjectcontainer create add shared object container trivial shared object trivialsharedobject shared object sharedobject trivial shared object trivialsharedobject socontainer get shared object manager getsharedobjectmanager add shared object addsharedobject id factory idfactory get default getdefault create string d createstringid trivial shared object trivialsharedobject get name getname shared object sharedobject send messages shared object wait sending count lock count send shared object message shared object sharedobject send message to sendmessageto targetid original args originalargs shared object lock wait close nicely client close i application iapplication exit javadoc org eclipse equinox app i application iapplication handle message handlemessage i chat message ichatmessage chat message chatmessage system println handle message handlemessage chat message chatmessage handle presence handlepresence fromid i presence ipresence presence system println handle presence handlepresence fromid fromid presence presence i chat d ichatid from chat d fromchatid i chat d ichatid fromid get adapter getadapter i chat d ichatid from chat d fromchatid roster use rs rosterusers from chat d fromchatid get username getusername from chat d fromchatid get host name gethostname fromid