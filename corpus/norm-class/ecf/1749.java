rcs file rcsfile revision sat mar copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smack org jivesoftware smack packet packet java io exception ioexception java writer java util concurrent array blocking queue arrayblockingqueue java util concurrent blocking queue blockingqueue writes pack ets packets xmpp server packets dedicated thread packet int erceptors interceptors registered dynamically modify pack ets packets packet listeners registered listen out going outgoing pack ets packets connection add packet interceptor addpacketinterceptor connection add packet sending listener addpacketsendinglistener author matt tucker packet writer packetwriter thread writer thread writerthread writer writer xmpp connection xmppconnection connection blocking queue blockingqueue packet queue creates packet writer connection param connection connection packet writer packetwriter xmpp connection xmppconnection connection queue array blocking queue arrayblockingqueue packet connection connection init initializes writer order called connection invoked connection disconnected error init writer connection writer writer thread writerthread thread write packets writepackets writer thread writerthread set name setname smack packet writer connection connection counter value connectioncountervalue writer thread writerthread set daemon setdaemon s ends sends packet server param packet packet send send packet sendpacket packet packet invoke int erceptors interceptors packet int erceptors interceptors modify content packet connection fire packet int erceptors firepacketinterceptors packet queue packet interrupted exception interruptedexception print stack trace printstacktrace queue queue notify all notifyall process packet writer listeners note sending thread expected listeners fast connection fire packet sending listeners firepacketsendinglisteners packet starts packet writer thread opens connection server packet writer writing pack ets packets link shutdown error occurs startup writer thread writerthread start set writer setwriter writer writer writer writer shuts packet writer method called pack ets packets written server shutdown queue queue notify all notifyall cleans resources packet writer cleanup connection int erceptors interceptors clear connection send listeners sendlisteners clear returns packet queue writing packet writing packet next packet nextpacket packet packet wait packet packet queue poll queue queue wait interrupted exception interruptedexception packet write packets writepackets thread this thread thisthread open stream open stream openstream write pack ets packets queue writer thread writerthread this thread thisthread packet packet next packet nextpacket packet writer write packet toxml queue is empty isempty writer flush shutdown process queue is empty isempty packet packet queue remove writer write packet toxml writer flush exception print stack trace printstacktrace delete queue contents left queue clear close stream writer write stream stream writer flush exception writer close exception io exception ioexception ioe connection is socket closed issocketclosed connection packet reader packetreader connection notify connection error notifyconnectionerror ioe s ends sends server stream element operation requested times encapsulate logic place message tls sasl resource binding io exception ioexception error occurs sending sta nza stanza server open stream openstream io exception ioexception string builder stringbuilder stream string builder stringbuilder stream append stream stream stream append append connection get service name getservicename append stream append xml ns xmlns jabber client stream append xml ns xmlns stream http etherx jabber org str eams streams stream append version writer write stream to string tostring writer flush