headurl https svn apache org repos asf jakarta commons proper http client httpclient branches http client httpclient branch src test org apache commons http client httpclient test bad content length testbadcontentlength java revision copyright apache software foundation licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license software consists voluntary contributions individuals behalf apache software foundation apache software foundation http apache org org apache commons http client httpclient java io exception ioexception java input stream inputstream junit framework test junit framework test case testcase junit framework test suite testsuite org apache commons http client httpclient methods get method getmethod org apache commons http client httpclient server http request handler httprequesthandler org apache commons http client httpclient server request line requestline org apache commons http client httpclient server response writer responsewriter org apache commons http client httpclient server simple http server simplehttpserver org apache commons http client httpclient server simple http server connection simplehttpserverconnection org apache commons http client httpclient server simple request simplerequest tests http client httpclient behaviour receiving response data expected simple http server setup free port testing returns incorrect response content length sending surplus response data malicious fake response headers author christian kohlschuetter version test bad content length testbadcontentlength java slewis exp test bad content length testbadcontentlength test case testcase http client httpclient client simple http server simplehttpserver server constructor test bad content length testbadcontentlength string test name testname test name testname main main string args string test case name testcasename test bad content length testbadcontentlength get name getname junit text ui textui test runner testrunner main test case name testcasename test case testcase methods test suite test suite testsuite test bad content length testbadcontentlength test methods set up setup io exception ioexception client http client httpclient arbitrary port server simple http server simplehttpserver server set test name settestname get name getname server set request handler setrequesthandler my http request handler myhttprequesthandler tear down teardown io exception ioexception client server destroy http client httpclient conn ects connects test server performs subsequent requests uri len ient lenient mode expected behavior requests status code response body returned io exception ioexception test len ient lenient io exception ioexception client get params getparams make len ient makelenient get method getmethod get method getmethod http localhost server get local port getlocalport client execute method executemethod assert equals assertequals get status code getstatuscode assert equals assertequals get response body as string getresponsebodyasstring get method getmethod http localhost server get local port getlocalport client execute method executemethod assert equals assertequals get status code getstatuscode assert equals assertequals get response body as string getresponsebodyasstring release connection releaseconnection http client httpclient conn ects connects test server performs subsequent requests uri str ict strict mode response body read get response body as string getresponsebodyasstring returns error occured response body read input stream inputstream io exception ioexception wrong expected behavior requests status code returned request code code response body returned request link protocol exception protocolexception expected io exception ioexception test strict io exception ioexception client get params getparams make strict makestrict get method getmethod get method getmethod http localhost server get local port getlocalport client execute method executemethod assert equals assertequals get status code getstatuscode assert equals assertequals get response body as string getresponsebodyasstring get method getmethod http localhost server get local port getlocalport client execute method executemethod assert equals assertequals get status code getstatuscode input stream inputstream get response body as stream getresponsebodyasstream read release connection releaseconnection enable this test for debug ging only enablethistestfordebuggingonly interrupted exception interruptedexception server is running isrunning thread sleep my http request handler myhttprequesthandler http request handler httprequesthandler request no requestno process request processrequest simple http server connection simplehttpserverconnection conn simple request simplerequest request io exception ioexception request line requestline request line requestline request get request line getrequestline response writer responsewriter conn get writer getwriter equals request line requestline get method getmethod equals request line requestline get uri geturi request no requestno println http println content type text html println content length println connection alive println send bytes println garbage println ngarbage println http println content type text plain println println fake response flush process max subs equents subsequents requests connection request no requestno conn set keep alive setkeepalive