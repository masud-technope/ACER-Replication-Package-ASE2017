copyright marcelo may worm mayworm rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors marcelo may worm mayworm initial api implementation org eclipse ecf tests provider xmpp search java util iterator org eclipse ecf core container connect exception containerconnectexception org eclipse ecf core i container icontainer org eclipse ecf core identity org eclipse ecf core util ecf exception ecfexception org eclipse ecf presence search i criteria icriteria org eclipse ecf presence search i criterion icriterion org eclipse ecf presence search i restriction irestriction org eclipse ecf presence search i result iresult org eclipse ecf presence search i result list iresultlist org eclipse ecf presence search i search isearch org eclipse ecf presence search i user search complete event iusersearchcompleteevent org eclipse ecf presence search i user search event iusersearchevent org eclipse ecf presence search i user search listener iusersearchlistener org eclipse ecf presence search i user search manager iusersearchmanager org eclipse ecf presence search user search exception usersearchexception org eclipse ecf tests presence abstract search test abstractsearchtest org eclipse ecf tests provider xmpp xmpp xmpp search test xmppsearchtest abstract search test abstractsearchtest string use rname username username string email email string i container icontainer client i user search manager iusersearchmanager search manager searchmanager i search isearch search result searchresult string get client container name getclientcontainername xmpp container test retrieve buddies async testretrievebuddiesasync exception assert not null assertnotnull search manager searchmanager i restriction irestriction selection search manager searchmanager create restriction createrestriction assert not null assertnotnull selection fields xmpp server side search search field xmpp criterion match search i criterion icriterion selection marcelo i criterion icriterion email selection email i criterion icriterion username selection use rname username create specific criteria i criteria icriteria criteria search manager searchmanager create criteria createcriteria assert not null assertnotnull criteria criteria add criteria add email criteria add username i user search listener iusersearchlistener listener completed listenercompleted i user search listener iusersearchlistener handle user search event handleusersearchevent i user search event iusersearchevent event event i user search complete event iusersearchcompleteevent search result searchresult i user search complete event iusersearchcompleteevent event get search getsearch call block search search manager searchmanager search criteria listener completed listenercompleted assert null assertnull search result searchresult thread sleep completion result search handle search result searchresult assert not null assertnotnull search result searchresult check result assert true asserttrue search result searchresult get result list getresultlist get results getresults size locate buddies xmpp server call block container connect exception containerconnectexception test retrieve buddies all fields sync testretrievebuddiesallfieldssync container connect exception containerconnectexception assert not null assertnotnull search manager searchmanager i restriction irestriction selection search manager searchmanager create restriction createrestriction assert not null assertnotnull selection fields xmpp server side search search field xmpp criterion match search i criterion icriterion selection marcelo i criterion icriterion email selection email i criterion icriterion username selection use rname username create specific criteria i criteria icriteria criteria search manager searchmanager create criteria createcriteria assert not null assertnotnull criteria criteria add criteria add email criteria add username call block search i search isearch search search manager searchmanager search criteria collection i result iresult i result list iresultlist result list resultlist search get result list getresultlist check result assert true asserttrue result list resultlist get results getresults size iterator result list resultlist get results getresults iterator has next hasnext i result iresult type i result iresult system println type get user getuser get name getname type get user getuser getid exception print stack trace printstacktrace locate buddies xmpp server call block container connect exception containerconnectexception test retrieve buddies email field sync testretrievebuddiesemailfieldsync exception assert not null assertnotnull search manager searchmanager i restriction irestriction selection search manager searchmanager create restriction createrestriction assert not null assertnotnull selection search field xmpp criterion match search fields xmpp server side search i criterion icriterion email selection email may worm mayworm create specific criteria i criteria icriteria criteria search manager searchmanager create criteria createcriteria assert not null assertnotnull criteria criteria add email call block search i search isearch search search manager searchmanager search criteria collection i result iresult i result list iresultlist result list resultlist search get result list getresultlist check result result list size resultlistsize result list resultlist get results getresults size result list size resultlistsize system println xmpp search test xmppsearchtest test retrieve buddies email field sync testretrievebuddiesemailfieldsync email field retrieved assert true asserttrue result list size resultlistsize user search exception usersearchexception print stack trace printstacktrace locate buddies xmpp server call block container connect exception containerconnectexception test retrieve buddies name field sync testretrievebuddiesnamefieldsync exception assert not null assertnotnull search manager searchmanager i restriction irestriction selection search manager searchmanager create restriction createrestriction assert not null assertnotnull selection fields xmpp server side search search field xmpp criterion match search i criterion icriterion selection marcelo create specific criteria i criteria icriteria criteria search manager searchmanager create criteria createcriteria assert not null assertnotnull criteria criteria add search criterion searchcriterion criteria add call block search i search isearch search search manager searchmanager search criteria collection i result iresult i result list iresultlist result list resultlist search get result list getresultlist result list size resultlistsize result list resultlist get results getresults size result list size resultlistsize system println xmpp search test xmppsearchtest test retrieve buddies name field sync testretrievebuddiesnamefieldsync email field retrieved assert true asserttrue result list size resultlistsize user search exception usersearchexception print stack trace printstacktrace set up setup exception set up setup client index clientindex client get client getclient client index clientindex assert null assertnull client get connected d getconnectedid server connect d serverconnectid get server connect d getserverconnectid client index clientindex assert not null assertnotnull server connect d serverconnectid connect client connectclient client server connect d serverconnectid get connect context getconnectcontext client index clientindex assert equals assertequals server connect d serverconnectid client get connected d getconnectedid search manager searchmanager get presence adapter getpresenceadapter client index clientindex get user search manager getusersearchmanager tear down teardown exception work around workaround appears smack bug https bugs eclipse org bugs bug cgi thread sleep tear down teardown client disconnect test user properties testuserproperties ecf exception ecfexception assert not null assertnotnull search manager searchmanager string user properties userproperties search manager searchmanager get user properties fields getuserpropertiesfields check result assert true asserttrue user properties userproperties length ecf exception ecfexception print stack trace printstacktrace