copyright remy suen comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors remy suen remy suen gmail initial api implementation org eclipse ecf protocol bit torrent bittorrent internal net java unsupported encoding exception unsupportedencodingexception java net socket java nio channels socket channel socketchannel java util linked list linkedlist java util random java util vector pool threads all ocated allocated connection peer connection pool connectionpool shared code random code instance randomly select piece request peers random random random number seconds wait rotating opt imistic optimistic unchokes optimistic unchoke rotation time maximum number peers allowed unchoked persistent basis max unchoked peers vector connections linked list linkedlist targets manager pool torrent manager torrentmanager manager thread unchoking thread unchokingthread maximum number connections pool managing link set max connections setmaxconnections method inc reased increased caution tcp congestions max connections maxconnections number active connections size number unchoked peers unchoked peers unchokedpeers connected connection pool connectionpool torrent manager torrentmanager manager manager manager connections vector max connections maxconnections targets linked list linkedlist unchoke size max unchoked peers unchoked peers unchokedpeers max unchoked peers unchoke random next int nextint size peer connection peerconnection connection peer connection peerconnection connections unchoke connection is choking ischoking unchoke random next int nextint size connection peer connection peerconnection connections unchoke connection queue unchoke message queueunchokemessage choke random next int nextint size connection peer connection peerconnection connections choke choke unchoke connection is choking ischoking choke random next int nextint size connection peer connection peerconnection connections choke connection queue choke message queuechokemessage creates connection port current number active threads equal maximum number allowed connections code code returned param peer param port port peer list ening listening unsupported encoding exception unsupportedencodingexception code iso code encoding supported connect to connectto string port unsupported encoding exception unsupportedencodingexception unchoking thread unchokingthread unchoking thread unchokingthread optimistic unchoking thread optimisticunchokingthread unchoking thread unchokingthread start size max connections maxconnections connected connections size peer connection peerconnection connection peer connection peerconnection connections connection is initialized isinitialized connection is connected to isconnectedto port targets add connection info connectioninfo port connections size peer connection peerconnection connections is initialized isinitialized notify peer connection peerconnection connection peer connection peerconnection manager connections add connection connection start connect to connectto socket channel socketchannel channel unsupported encoding exception unsupportedencodingexception unchoking thread unchokingthread unchoking thread unchokingthread optimistic unchoking thread optimisticunchokingthread unchoking thread unchokingthread start size max connections maxconnections connected socket socket channel socket string socket get local address getlocaladdress get host address gethostaddress port socket get local port getlocalport connections size peer connection peerconnection connection peer connection peerconnection connections connection is connected to isconnectedto port targets add connection info connectioninfo channel connections size peer connection peerconnection connections is initialized isinitialized notify peer connection peerconnection connection peer connection peerconnection manager connections add connection connection start closes channels active close connected connections size peer connection peerconnection connections close targets clear notify all notifyall is connected isconnected connected connection info connectioninfo dequeue targets targets is empty isempty connection info connectioninfo targets remove first removefirst disconnects connections peers see ds seeds called down loading downloading completed longer connected see ds seeds pieces requested disconnect see ds disconnectseeds connections size peer connection peerconnection connection peer connection peerconnection connections connection is initialized isinitialized connection is see d isseed connection close called info rm inform pool unchoked connections choke d choked peer unchoked per manently permanently rotation unchoked peer cleared unchokedpeercleared unchoked peers unchokedpeers sets maximum number connections pool manage param max connections maxconnections maximum amount connections manage set max connections setmaxconnections max connections maxconnections max connections maxconnections max connections maxconnections connections ensure capacity ensurecapacity max connections maxconnections max connections maxconnections max connections maxconnections push active connections max connections maxconnections peer connection peerconnection connections is initialized isinitialized connections size peer connection peerconnection conn peer connection peerconnection connections conn is initialized isinitialized connections remove connections add connections remove close extra neous extraneous connections max connections maxconnections max connections maxconnections peer connection peerconnection connections close max connections maxconnections max connections maxconnections check unchoke checkunchoke unchoked peers unchokedpeers max unchoked peers unchoked peers unchokedpeers connection created connectioncreated size pool connection ended link peer connection peerconnection longer running connection closed connectionclosed size size unchoking thread unchokingthread unchoking thread unchokingthread int errupt interrupt unchoking thread unchokingthread connection destroyed connectiondestroyed peer connection peerconnection connection connections remove connection retrieves current number active connections number active connections pool get connected getconnected size ins truc ts instructs running threads send message piece connected peer param piece number piece message correspond queue have message queuehavemessage piece connections size peer connection peerconnection connection peer connection peerconnection connections connection is initialized isinitialized connection queue have message queuehavemessage piece is empty isempty connections is empty isempty optimistic unchoking thread optimisticunchokingthread thread optimistic unchoking thread optimisticunchokingthread nls optimistic unchoking thread manager get torrent file gettorrentfile get name getname optimistic unchoke rotation time thread sleep interrupted exception interruptedexception connections size peer connection peerconnection conn peer connection peerconnection connections conn is initialized isinitialized conn queue speeds queuespeeds unchoke