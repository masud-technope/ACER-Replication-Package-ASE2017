revision copyright jive software rights reserved licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org jivesoftware smackx work group workgroup packet org jivesoftware smack packet org jivesoftware smack provider iq provider iqprovider org xml pull xmlpull xml pull parser xmlpullparser java text simple date format simpledateformat java util packet req uesting requesting occupants room retrieving author gaston dom biak dombiak occupants info occupantsinfo simple date format simpledateformat utc format simple date format simpledateformat yyyymmdd utc format set time zone settimezone time zone timezone get time zone gettimezone gmt element packet extension string element occupants info name space namespace packet extension string name space namespace http jivesoftware protocol work group workgroup string roomid occupant info occupantinfo occupants occupants info occupantsinfo string roomid roomid roomid occupants hash set hashset occupant info occupantinfo string get room d getroomid roomid get occupants count getoccupantscount occupants size occupant info occupantinfo get occupants getoccupants collections unmodifiable set unmodifiableset occupants string get child element l getchildelementxml string builder stringbuilder buf string builder stringbuilder buf append append element append xml ns xmlns append name space namespace buf append roomid append roomid append occupants occupant info occupantinfo occupant occupants buf append occupant add occupant jid buf append jid buf append occupant getjid buf append jid add occupant nickname buf append buf append occupant get nickname getnickname buf append add occupant joined room buf append joined buf append utc format format occupant get joined getjoined buf append joined buf append occupant buf append append element append buf to string tostring occupant info occupantinfo string jid string nickname joined occupant info occupantinfo string jid string nickname joined jid jid nickname nickname joined joined string getjid jid string get nickname getnickname nickname get joined getjoined joined packet extension provider agent status request agentstatusrequest pack ets packets provider iq provider iqprovider parseiq xml pull parser xmlpullparser parser exception parser get event type geteventtype xml pull parser xmlpullparser start tag illegal state exception illegalstateexception parser proper position bad xml occupants info occupantsinfo occupants info occupantsinfo occupants info occupantsinfo parser get attribute value getattributevalue roomid event type eventtype parser event type eventtype xml pull parser xmlpullparser start tag occupant equals parser get name getname occupants info occupantsinfo occupants add parse occupant info parseoccupantinfo parser event type eventtype xml pull parser xmlpullparser tag element equals parser get name getname occupants info occupantsinfo occupant info occupantinfo parse occupant info parseoccupantinfo xml pull parser xmlpullparser parser exception string jid string nickname joined event type eventtype parser event type eventtype xml pull parser xmlpullparser start tag jid equals parser get name getname jid parser next text nexttext event type eventtype xml pull parser xmlpullparser start tag nickname equals parser get name getname nickname parser next text nexttext event type eventtype xml pull parser xmlpullparser start tag joined equals parser get name getname joined utc format parse parser next text nexttext event type eventtype xml pull parser xmlpullparser tag occupant equals parser get name getname occupant info occupantinfo jid nickname joined