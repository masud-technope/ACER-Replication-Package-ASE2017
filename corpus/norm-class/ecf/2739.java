copyright comp osent composent rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors comp osent composent initial api implementation must afa mustafa isik conflict resolution operational transformations marcelo may worm mayworm adding sync api dep endence dependence ibm corporation support text editors org eclipse ecf doc share docshare java util collections java util map org eclipse core file buf fers filebuffers i synchronization context isynchronizationcontext org eclipse core runtime org eclipse core runtime org eclipse ecf core identity org eclipse ecf core util ecf exception ecfexception org eclipse ecf core util trace org eclipse ecf data share datashare i channel ichannel org eclipse ecf doc share docshare messages file system document change message filesystemdocumentchangemessage org eclipse ecf doc share docshare messages selection message selectionmessage org eclipse ecf internal doc share docshare doc share activator docshareactivator org eclipse ecf internal doc share docshare messages org eclipse ecf sync org eclipse ecf sync doc document change message documentchangemessage org eclipse ecf sync doc i document synchronization strategy factory idocumentsynchronizationstrategyfactory org eclipse jface text org eclipse jface text source org eclipse osgi util nls document share documentshare selection receiver selectionreceiver nls string selection annotation org eclipse ecf doc share docshare annotations remote selection remoteselection nls string cursor annotation org eclipse ecf doc share docshare annotations remote cursor remotecursor annotation model current document i annotation model iannotationmodel annotation model annotationmodel object lock changing annotation model code code model object annotation model lock annotationmodellock annotation remote selection annotation model annotationmodel annotation current annotation currentannotation set annotation model setannotationmodel i annotation model iannotationmodel annotation model annotationmodel annotation model annotationmodel annotation model annotationmodel annotation model annotationmodel annotation model annotationmodel is ynchronizable isynchronizable annotation model lock annotationmodellock is ynchronizable isynchronizable annotation model annotationmodel get lock object getlockobject annotation model lock annotationmodellock annotation model lock annotationmodellock handle message handlemessage selection message selectionmessage remote msg remotemsg annotation model lock annotationmodellock position new position newposition position remote msg remotemsg get offset getoffset remote msg remotemsg get length getlength annotation new annotation newannotation annotation new position newposition get length getlength selection annotation cursor annotation messages doc share docshare remote selection remoteselection annotation model lock annotationmodellock annotation model annotationmodel initial selection create current annotation currentannotation current annotation currentannotation new annotation newannotation annotation model annotationmodel add annotation addannotation new annotation newannotation new position newposition selection changed skip current annotation currentannotation get type gettype new annotation newannotation get type gettype position old position oldposition annotation model annotationmodel get position getposition current annotation currentannotation old position oldposition new position newposition equals old position oldposition selection changed replace annotation annotation model annotationmodel i annotation model extension iannotationmodelextension annotation old annotations oldannotations annotation current annotation currentannotation current annotation currentannotation new annotation newannotation map new annotations newannotations collections singleton map singletonmap new annotation newannotation new position newposition i annotation model extension iannotationmodelextension annotation model annotationmodel replace annotations replaceannotations old annotations oldannotations new annotations newannotations annotation model annotationmodel remove annotation removeannotation current annotation currentannotation annotation model annotationmodel add annotation addannotation new annotation newannotation new position newposition dispose annotation model lock annotationmodellock annotation model lock annotationmodellock annotation model annotationmodel current annotation currentannotation annotation model annotationmodel remove annotation removeannotation current annotation currentannotation current annotation currentannotation annotation model annotationmodel selection receiver selectionreceiver selection receiver selectionreceiver i channel ichannel channel i document idocument document string path targetid locked locally active locallyactive remotely active remotelyactive strategy main taining maintaining consistency session participants doc uments documents i model synchronization strategy imodelsynchronizationstrategy sync strategy syncstrategy factory returns str ategies strategies i document synchronization strategy factory idocumentsynchronizationstrategyfactory factory create document sharing session instance document share documentshare i channel ichannel channel targetid string path i document idocument document is not null isnotnull channel channel channel targetid targetid path path document document factory doc share activator docshareactivator get default getdefault get cola synchronization strategy factory getcolasynchronizationstrategyfactory selection receiver selectionreceiver selection receiver selectionreceiver document add document listener adddocumentlistener document listener documentlistener sync api create instance synchronization str ategy strategy receiver sync strategy syncstrategy create synchronization strategy createsynchronizationstrategy is not null isnotnull sync strategy syncstrategy create document sharing session instance document share documentshare i channel ichannel channel targetid string path i document idocument document i annotation model iannotationmodel annotation model annotationmodel channel targetid path document selection receiver selectionreceiver set annotation model setannotationmodel annotation model annotationmodel lock locked unlock locked is locked islocked locked document listener listener local copy i document idocument listener responsible sending document update messages not ified notified i document listener idocumentlistener document listener documentlistener i document listener idocumentlistener document about to be changed documentabouttobechanged document event documentevent event handling local operation application document changed documentchanged document event documentevent event is locked islocked nls trace trace doc share activator docshareactivator plugin nls bind document changed documentchanged document share documentshare event sync api entry point usage sync api local document changed editor method called code executed code registers document change documentchange local sync strategy syncstrategy instance sync strategy syncstrategy register local change registerlocalchange i model change imodelchange model change messages returned register local change registerlocalchange call ecf data share datashare channel remote participant i model change message imodelchangemessage change messages changemessages register local change registerlocalchange document change message documentchangemessage event get offset getoffset event get length getlength event get text gettext change messages changemessages length send message sendmessage change messages changemessages send message sendmessage i model change message imodelchangemessage change message changemessage channel send message sendmessage targetid file system document change message filesystemdocumentchangemessage path change message changemessage serialize ecf exception ecfexception doc share activator docshareactivator log status i status istatus error doc share activator docshareactivator plugin send message targetid i model change message imodelchangemessage register local change registerlocalchange i model change imodelchange local change localchange sync strategy syncstrategy register local change registerlocalchange local change localchange connect i annotation model iannotationmodel annotation model annotationmodel selection receiver selectionreceiver set annotation model setannotationmodel annotation model annotationmodel disconnect selection receiver selectionreceiver dispose add document listener adddocumentlistener document add document listener adddocumentlistener document listener documentlistener remove document listener removedocumentlistener document remove document listener removedocumentlistener document listener documentlistener handle selection message handleselectionmessage selection message selectionmessage message selection receiver selectionreceiver handle message handlemessage message method called link handle message handlemessage method type message received update message param document change message documentchangemessage update message updatemessage received handle update message handleupdatemessage i synchronization context isynchronizationcontext context document change message documentchangemessage document change message documentchangemessage lock sync api document change message received remote channel passed sync strategy syncstrategy transformation returned i model change imodelchange applied local document synchronization str ategy strategy transformed i model change imodelchange model changes modelchanges sync strategy syncstrategy transform remote change transformremotechange document change message documentchangemessage model update exception modelupdateexception exception model update exception modelupdateexception model changes modelchanges length exception doc share activator docshareactivator get default getdefault get log getlog log status i status istatus error doc share activator docshareactivator plugin i status istatus error messages doc share docshare exception receiving message title exception i model change imodelchange model change modelchange model changes modelchanges context runnable apply change model type model change modelchange apply to model applytomodel get document getdocument model update exception modelupdateexception exception unlock i document idocument get document getdocument document i model synchronization strategy imodelsynchronizationstrategy create synchronization strategy createsynchronizationstrategy is init iator isinitiator instantiate service is not null isnotnull factory factory create document synchronization strategy createdocumentsynchronizationstrategy channel getid is init iator isinitiator returns code code document backed locally active actively edited editor open backed document code code backed document actively modified code code is locally active islocallyactive locally active locallyactive set locally active setlocallyactive locally active locallyactive locally active locallyactive locally active locallyactive returns code code document backed remotely active actively edited remote peer peer editor open backed document code code backed document actively modified remotely code code is remotely active isremotelyactive remotely active remotelyactive set remotely active setremotelyactive remotely active remotelyactive remotely active remotelyactive remotely active remotelyactive string to string tostring nls string buffer stringbuffer buf string buffer stringbuffer document share documentshare nls nls buf append path append path append channel append channel nls buf append targetid append targetid nls buf append str ategy strategy append sync strategy syncstrategy append buf to string tostring