licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket server java i o exception ioexception java util list java util map javax servlet http http session httpsession javax websocket close reason closereason javax websocket close reason closereason close codes closecodes javax websocket deployment exception deploymentexception javax websocket endpoint javax websocket endpoint config endpointconfig javax websocket extension org apache coyote http upgrade abstract servlet input stream abstractservletinputstream org apache coyote http upgrade abstract servlet output stream abstractservletoutputstream org apache coyote http upgrade servlet http upgrade handler httpupgradehandler org apache coyote http upgrade servlet read listener readlistener org apache coyote http upgrade servlet web connection webconnection org apache coyote http upgrade servlet write listener writelistener org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util res string manager stringmanager org apache tomcat websocket transformation org apache tomcat websocket wsioexception org apache tomcat websocket ws session wssession servlet http upgrade handler web socket websocket connections ws http upgrade handler wshttpupgradehandler http upgrade handler httpupgradehandler log log log factory logfactory get log getlog ws http upgrade handler wshttpupgradehandler string manager stringmanager string manager stringmanager get manager getmanager constants class loader classloader application class loader applicationclassloader endpoint endpoint config endpointconfig endpoint config endpointconfig ws server container wsservercontainer web socket container websocketcontainer ws handshake request wshandshakerequest handshake request handshakerequest list extension negotiated extensions negotiatedextensions string sub protocol subprotocol transformation transformation map string string path parameters pathparameters secure web connection webconnection connection ws session wssession ws session wssession ws http upgrade handler wshttpupgradehandler application class loader applicationclassloader thread current thread currentthread get context class loader getcontextclassloader pre init preinit endpoint endpoint config endpointconfig endpoint config endpointconfig ws server container wsservercontainer ws c wsc ws handshake request wshandshakerequest handshake request handshakerequest list extension negotiated extensions p has e negotiatedextensionsphase string sub protocol subprotocol transformation transformation map string string path parameters pathparameters secure endpoint config endpointconfig endpoint config endpointconfig web socket container websocketcontainer ws c wsc handshake request handshakerequest handshake request handshakerequest negotiated extensions negotiatedextensions negotiated extensions p has e negotiatedextensionsphase sub protocol subprotocol sub protocol subprotocol transformation transformation path parameters pathparameters path parameters pathparameters secure secure override init web connection webconnection connection illegal state exception illegalstateexception get string getstring ws http upgrade handler wshttpupgradehandler no pre init nopreinit connection connection abstract servlet input stream abstractservletinputstream sis abstract servlet output stream abstractservletoutputstream sos sis connection get input stream getinputstream sos connection get output stream getoutputstream i o exception ioexception illegal state exception illegalstateexception string http session id httpsessionid object session handshake request handshakerequest get http session gethttpsession session http session id httpsessionid http session httpsession session get id getid call on open onopen web application loader create frame application loader pick application specific config server container impl servercontainerimpl thread thread current thread currentthread class loader classloader get context class loader getcontextclassloader set context class loader setcontextclassloader application class loader applicationclassloader ws remote endpoint impl server wsremoteendpointimplserver ws remote endpoint server wsremoteendpointserver ws remote endpoint impl server wsremoteendpointimplserver sos web socket container websocketcontainer ws session wssession ws session wssession ws remote endpoint server wsremoteendpointserver web socket container websocketcontainer handshake request handshakerequest getrequesturi handshake request handshakerequest get parameter map getparametermap handshake request handshakerequest get query string getquerystring handshake request handshakerequest get user principal getuserprincipal http session id httpsessionid negotiated extensions negotiatedextensions sub protocol subprotocol path parameters pathparameters secure endpoint config endpointconfig ws frame server wsframeserver ws frame wsframe ws frame server wsframeserver sis ws session wssession transformation sos set write listener setwritelistener ws write listener wswritelistener ws remote endpoint server wsremoteendpointserver ws frame wsframe adds transformations copy completed transformation chain remote point ws remote endpoint server wsremoteendpointserver set transformation settransformation ws frame wsframe get transformation gettransformation on open onopen ws session wssession endpoint config endpointconfig web socket container websocketcontainer register session registersession ws session wssession sis set read listener setreadlistener ws read listener wsreadlistener ws frame wsframe deployment exception deploymentexception illegal argument exception illegalargumentexception set context class loader setcontextclassloader override destroy connection connection close exception log error get string getstring ws http upgrade handler wshttpupgradehandler destroy failed destroyfailed on error onerror throwable throwable ws session wssession do close doclose close reason closereason close codes closecodes throwable get message getmessage close reason closereason close codes closecodes closed abnormally throwable get message getmessage call on error onerror web application loader thread thread current thread currentthread class loader classloader get context class loader getcontextclassloader set context class loader setcontextclassloader application class loader applicationclassloader on error onerror ws session wssession throwable set context class loader setcontextclassloader close close reason closereason call method result problem reading client point connection unknown attempt send close frame client close socket point waiting close frame client guarantee recover messed client connection ws session wssession on close onclose ws read listener wsreadlistener read listener readlistener ws http upgrade handler wshttpupgradehandler ws protocol handler wsprotocolhandler ws frame server wsframeserver ws frame wsframe ws read listener wsreadlistener ws http upgrade handler wshttpupgradehandler ws protocol handler wsprotocolhandler ws frame server wsframeserver ws frame wsframe ws protocol handler wsprotocolhandler ws protocol handler wsprotocolhandler ws frame wsframe ws frame wsframe override on data available ondataavailable ws frame wsframe on data available ondataavailable wsioexception ws protocol handler wsprotocolhandler close get close reason getclosereason i o exception ioexception ioe on error onerror ioe close reason closereason close reason closereason close codes closecodes closed abnormally ioe get message getmessage ws protocol handler wsprotocolhandler close override on all data read onalldataread happen web socket websocket illegal state exception illegalstateexception override on error onerror throwable throwable ws protocol handler wsprotocolhandler on error onerror throwable ws write listener wswritelistener write listener writelistener ws http upgrade handler wshttpupgradehandler ws protocol handler wsprotocolhandler ws remote endpoint impl server wsremoteendpointimplserver ws remote endpoint server wsremoteendpointserver ws write listener wswritelistener ws http upgrade handler wshttpupgradehandler ws protocol handler wsprotocolhandler ws remote endpoint impl server wsremoteendpointimplserver ws remote endpoint server wsremoteendpointserver ws protocol handler wsprotocolhandler ws protocol handler wsprotocolhandler ws remote endpoint server wsremoteendpointserver ws remote endpoint server wsremoteendpointserver override on write possible onwritepossible triggered poller isn thread triggered write dispatch ws remote endpoint server wsremoteendpointserver on write possible onwritepossible override on error onerror throwable throwable ws protocol handler wsprotocolhandler on error onerror throwable ws remote endpoint server wsremoteendpointserver close