licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina startup java file java lang reflect invocation target exception invocationtargetexception java lang reflect method java net malformedurlexception java net url java util array list arraylist java util list java util string tokenizer stringtokenizer org apache catalina globals org apache catalina security security class load securityclassload org apache catalina startup class loader factory classloaderfactory repository org apache catalina startup class loader factory classloaderfactory repository type repositorytype org apache juli logging log org apache juli logging log factory logfactory bootstrap loader catalina application constructs loader loading catalina internal classes accumulating jar files server directory catalina starts regular execution container purpose round about roundabout app roach approach catalina internal classes classes depend xml parser system path visible application level classes author craig mc clanahan mcclanahan author remy maucherat bootstrap log log log factory logfactory get log getlog bootstrap variables daemon object main bootstrap daemon variables daemon reference object catalina daemon catalinadaemon class loader classloader common loader commonloader class loader classloader catalina loader catalinaloader class loader classloader shared loader sharedloader methods init class loaders initclassloaders common loader commonloader create class loader createclassloader common common loader commonloader config file loader single env common loader commonloader get class getclass get class loader getclassloader catalina loader catalinaloader create class loader createclassloader server common loader commonloader shared loader sharedloader create class loader createclassloader shared common loader commonloader throwable handle throwable handlethrowable log error loader creation thr ew threw exception system exit class loader classloader create class loader createclassloader string class loader classloader parent exception string catalina properties catalinaproperties get property getproperty loader equals parent replace list repository repositories array list arraylist repository string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer tokenizer has more elements hasmoreelements string repository tokenizer next token nexttoken trim repository length check jar url repository suppress warnings suppresswarnings unused url url url repository repositories add repository repository repository type repositorytype url malformedurlexception local repository repository ends with endswith jar repository repository substring repository length jar length repositories add repository repository repository type repositorytype glob repository ends with endswith jar repositories add repository repository repository type repositorytype jar repositories add repository repository repository type repositorytype dir class loader factory classloaderfactory create class loader createclassloader repositories parent system property replacement string param str original string modified string string replace string str implementation copied class loader log manager classloaderlogmanager replace special processing catalina catalina base string result str pos start str index of indexof pos start string builder stringbuilder builder string builder stringbuilder pos pos start builder append str pos pos start pos str index of indexof pos start pos pos pos start string prop name propname str substring pos start pos string replacement prop name propname length replacement globals catalina prop equals prop name propname replacement get catalina home getcatalinahome globals catalina base prop equals prop name propname replacement get catalina base getcatalinabase replacement system get property getproperty prop name propname replacement builder append replacement builder append str pos start pos pos start str index of indexof pos builder append str pos str length result builder to string tostring result initialize daemon init exception catalina path set catalina home setcatalinahome set catalina base setcatalinabase init class loaders initclassloaders thread current thread currentthread set context class loader setcontextclassloader catalina loader catalinaloader security class load securityclassload security class load securityclassload catalina loader catalinaloader load startup call process method log is debug enabled isdebugenabled log debug loading startup startup class startupclass catalina loader catalinaloader load class loadclass org apache catalina startup catalina object startup instance startupinstance startup class startupclass new instance newinstance shared extensions loader log is debug enabled isdebugenabled log debug setting startup properties string method name methodname set parent class loader setparentclassloader param types paramtypes param types paramtypes for name forname java lang class loader classloader object param values paramvalues object param values paramvalues shared loader sharedloader method method startup instance startupinstance get class getclass get method getmethod method name methodname param types paramtypes method invoke startup instance startupinstance param values paramvalues catalina daemon catalinadaemon startup instance startupinstance load daemon load string arguments exception call load method string method name methodname load object param param types paramtypes arguments arguments length param types paramtypes param param types paramtypes param types paramtypes arguments get class getclass param object param arguments method method catalina daemon catalinadaemon get class getclass get method getmethod method name methodname param types paramtypes log is debug enabled isdebugenabled log debug calling startup method method invoke catalina daemon catalinadaemon param get server getserver config test configtest object get server getserver exception string method name methodname get server getserver method method catalina daemon catalinadaemon get class getclass get method getmethod method name methodname method invoke catalina daemon catalinadaemon main program load catalina daemon init string arguments exception init load arguments start catalina daemon start exception catalina daemon catalinadaemon init method method catalina daemon catalinadaemon get class getclass get method getmethod start method invoke catalina daemon catalinadaemon object catalina daemon exception method method catalina daemon catalinadaemon get class getclass get method getmethod method invoke catalina daemon catalinadaemon object standalone server stop server stopserver exception method method catalina daemon catalinadaemon get class getclass get method getmethod stop server stopserver method invoke catalina daemon catalinadaemon object standalone server stop server stopserver string arguments exception object param param types paramtypes arguments arguments length param types paramtypes param param types paramtypes param types paramtypes arguments get class getclass param object param arguments method method catalina daemon catalinadaemon get class getclass get method getmethod stop server stopserver param types paramtypes method invoke catalina daemon catalinadaemon param flag set await setawait await exception param types paramtypes param types paramtypes type object param values paramvalues object param values paramvalues value of valueof await method method catalina daemon catalinadaemon get class getclass get method getmethod set await setawait param types paramtypes method invoke catalina daemon catalinadaemon param values paramvalues get await getawait exception param types paramtypes object param values paramvalues object method method catalina daemon catalinadaemon get class getclass get method getmethod get await getawait param types paramtypes method invoke catalina daemon catalinadaemon param values paramvalues boolean value booleanvalue destroy catalina daemon destroy fixme main method entry point starting tomcat scripts param args command arguments processed main string args daemon don daemon init completed bootstrap bootstrap bootstrap bootstrap init throwable handle throwable handlethrowable print stack trace printstacktrace daemon bootstrap running service call thread correct loader prevent range exceptions thread current thread currentthread set context class loader setcontextclassloader daemon catalina loader catalinaloader string command start args length command args args length command equals start d startd args args length start daemon load args daemon start command equals stop d stopd args args length daemon command equals start daemon set await setawait daemon load args daemon start command equals daemon stop server stopserver args command equals config test configtest daemon load args daemon get server getserver system exit system exit log warn bootstrap command command exist throwable invocation target exception invocationtargetexception get cause getcause get cause getcause handle throwable handlethrowable print stack trace printstacktrace system exit set catalina home setcatalinahome string system set property setproperty globals catalina prop set catalina base setcatalinabase string system set property setproperty globals catalina base prop code catalina base code system property current working directory set catalina base setcatalinabase system get property getproperty globals catalina base prop system get property getproperty globals catalina prop system set property setproperty globals catalina base prop system get property getproperty globals catalina prop system set property setproperty globals catalina base prop system get property getproperty user dir code catalina code system property current working directory set catalina home setcatalinahome system get property getproperty globals catalina prop file bootstrap jar bootstrapjar file system get property getproperty user dir bootstrap jar bootstrap jar bootstrapjar exists system set property setproperty globals catalina prop file system get property getproperty user dir get canonical path getcanonicalpath exception system set property setproperty globals catalina prop system get property getproperty user dir system set property setproperty globals catalina prop system get property getproperty user dir catalina environment variable string get catalina home getcatalinahome system get property getproperty globals catalina prop system get property getproperty user dir catalina base environment variable string get catalina base getcatalinabase system get property getproperty globals catalina base prop get catalina home getcatalinahome copied exception utils exceptionutils visible start handle throwable handlethrowable throwable thread death threaddeath thread death threaddeath virtual machine error virtualmachineerror virtual machine error virtualmachineerror instances throwable silently swallowed