licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache juli java file java file input stream fileinputstream java file permission filepermission java io exception ioexception java input stream inputstream java net url java net url class loader urlclassloader java security access control exception accesscontrolexception java security access controller accesscontroller java security permission java security privileged action privilegedaction java util collections java util enumeration java util hash map hashmap java util iterator java util map java util properties java util string tokenizer stringtokenizer java util weak hash map weakhashmap java util concurrent concurrent hash map concurrenthashmap java util logging handler java util logging level java util logging log manager logmanager java util logging logger class loader classloader log manager logmanager implementation light debug ging debugging system property code org apache juli class loader log manager classloaderlogmanager debug code configuration code system err code class loader log manager classloaderlogmanager log manager logmanager string debug property class loader log manager classloaderlogmanager get name getname debug cleaner thread override use shutdown hook useshutdownhook shutdown class loader log manager classloaderlogmanager runtime get runtime getruntime add shutdown hook addshutdownhook cleaner illegal state exception illegalstateexception ise variables map class loader classloader keyed class loader classloader weak hash map hashmap ensure class loader classloader reference leaked application redeployment map class loader classloader class loader log info classloaderloginfo class loader log gers classloaderloggers guarded weak hash map weakhashmap class loader classloader class loader log info classloaderloginfo prefix prefixes properties names handlers sub components subcomponents thread local threadlocal string prefix thread local threadlocal string determines shutdown hook perform clean flushing buf fered buffered handlers jvm shutdown defaults code code component ensures link shutdown called use shutdown hook useshutdownhook properties is use shutdown hook isuseshutdownhook use shutdown hook useshutdownhook set use shutdown hook setuseshutdownhook use shutdown hook useshutdownhook use shutdown hook useshutdownhook use shutdown hook useshutdownhook methods add logger class loader classloader local configuration param logger logger override add logger addlogger logger logger string logger name loggername logger get name getname class loader classloader class loader classloader thread current thread currentthread get context class loader getcontextclassloader class loader log info classloaderloginfo info get class loader info getclassloaderinfo class loader classloader info log gers loggers contains key containskey logger name loggername info log gers loggers logger name loggername logger apply initial level logger string level string levelstring get property getproperty logger name loggername level level string levelstring access controller accesscontroller do privileged doprivileged privileged action privilegedaction override logger set level setlevel level parse level string levelstring trim illegal argument exception illegalargumentexception instantiate parent log gers loggers control log categories runtime dot index dotindex logger name loggername last index of lastindexof dot index dotindex string parent name parentname logger name loggername substring dot index dotindex logger get logger getlogger parent name parentname find node log node lognode node info root node rootnode find node findnode logger name loggername node logger logger parent logger logger parent logger parentlogger node find parent logger findparentlogger parent logger parentlogger do set parent logger dosetparentlogger logger parent logger parentlogger children parent node set parent logger setparentlogger logger add handlers defined handlers property handlers parent logger string handlers get property getproperty logger name loggername handlers handlers logger set use parent handlers setuseparenthandlers string tokenizer stringtokenizer tok string tokenizer stringtokenizer handlers tok has more tokens hasmoretokens string handler name handlername tok next token nexttoken trim handler handler class loader classloader current class loader classloader current info class loader log gers classloaderloggers current info handler info handlers handler name handlername handler current current get parent getparent handler logger add handler addhandler handler parse use parent handlers useparenthandlers logger delegate parent java util logging delegate list handlers logger string use parent handlers string useparenthandlersstring get property getproperty logger name loggername use parent handlers useparenthandlers parse boolean parseboolean use parent handlers string useparenthandlersstring logger set use parent handlers setuseparenthandlers logger class loader classloader local configuration returns call originated logger get logger getlogger logger instantiated add logger addlogger param logger retrieve override logger get logger getlogger string class loader classloader class loader classloader thread current thread currentthread get context class loader getcontextclassloader get class loader info getclassloaderinfo class loader classloader log gers loggers enumeration logger names defined class loader classloader local configuration override enumeration string get logger names getloggernames class loader classloader class loader classloader thread current thread currentthread get context class loader getcontextclassloader collections enumeration get class loader info getclassloaderinfo class loader classloader log gers loggers key set keyset property class loader classloader local configuration param property override string get property getproperty string string prefix prefix string result prefix defined prefixed property prefix result find property findproperty prefix result result find property findproperty simple property replacement folder names result result replace result result string find property findproperty string class loader classloader class loader classloader thread current thread currentthread get context class loader getcontextclassloader class loader log info classloaderloginfo info get class loader info getclassloaderinfo class loader classloader string result info props get property getproperty properties result info props is empty isempty class loader classloader current class loader classloader get parent getparent current info class loader log gers classloaderloggers current info result info props get property getproperty result info props is empty isempty current current get parent getparent result result get property getproperty result override read configuration readconfiguration io exception ioexception security exception securityexception check access checkaccess read configuration readconfiguration thread current thread currentthread get context class loader getcontextclassloader override read configuration readconfiguration input stream inputstream io exception ioexception security exception securityexception check access checkaccess reset read configuration readconfiguration thread current thread currentthread get context class loader getcontextclassloader override reset security exception securityexception thread thread thread current thread currentthread thread get class getclass get name getname starts with startswith java util logging log manager logmanager shutdown hook class loader classloader class loader classloader thread get context class loader getcontextclassloader class loader log info classloaderloginfo cl log info clloginfo get class loader info getclassloaderinfo class loader classloader reset log gers resetloggers cl log info clloginfo reset shuts logging system shutdown load ers loaders shutdown class loader log info classloaderloginfo cl log info clloginfo class loader log gers classloaderloggers values reset log gers resetloggers cl log info clloginfo methods reset log gers resetloggers class loader log info classloaderloginfo cl log info clloginfo good cl log info clloginfo logger logger cl log info clloginfo log gers loggers values handler handlers logger get handlers gethandlers handler handler handlers logger remove handler removehandler handler handler handler cl log info clloginfo handlers values handler close exception cl log info clloginfo handlers clear methods retrieve configuration class loader classloader exist created param class loader classloader class loader classloader retrieve build configuration class loader log info classloaderloginfo get class loader info getclassloaderinfo class loader classloader class loader classloader class loader classloader class loader classloader class loader classloader get system class loader getsystemclassloader class loader log info classloaderloginfo info class loader log gers classloaderloggers class loader classloader info class loader classloader class loader param classloaderparam class loader classloader access controller accesscontroller do privileged doprivileged privileged action privilegedaction override read configuration readconfiguration class loader param classloaderparam io exception ioexception info class loader log gers classloaderloggers class loader classloader info read configuration class loader classloader param class loader classloader io exception ioexception error read configuration readconfiguration class loader classloader class loader classloader io exception ioexception input stream inputstream local repositories avoid redefining log gers loggers times class loader classloader url class loader urlclassloader url log config logconfig url class loader urlclassloader class loader classloader find resource findresource logging properties log config logconfig get boolean getboolean debug property system err println get class getclass get name getname read configuration readconfiguration logging properties log config logconfig class loader classloader get resource as stream getresourceasstream logging properties get boolean getboolean debug property system err println get class getclass get name getname read configuration readconfiguration logging properties access control exception accesscontrolexception ace class loader log info classloaderloginfo info class loader log gers classloaderloggers class loader classloader get system class loader getsystemclassloader info logger log info log gers loggers log permission perm ace get permission getpermission perm file permission filepermission perm get actions getactions equals read log warning reading perm get name getname permitted context logging catalina policy file log warning reading logging properties permitted context context logging catalina policy file log warning original error ace get message getmessage class loader classloader class loader classloader get system class loader getsystemclassloader string config file str configfilestr system get property getproperty java util logging config file config file str configfilestr file input stream fileinputstream replace config file str configfilestr io exception ioexception system err println configuration error print stack trace printstacktrace jvm configuration file default file defaultfile file file system get property getproperty java lib logging properties file input stream fileinputstream default file defaultfile io exception ioexception system err println configuration error print stack trace printstacktrace logger local root logger localrootlogger root logger rootlogger retrieve root logger parent class loader classloader class loader classloader current class loader classloader get parent getparent class loader log info classloaderloginfo info current info info get class loader info getclassloaderinfo current current current get parent getparent info local root logger localrootlogger set parent setparent info root node rootnode logger class loader log info classloaderloginfo info class loader log info classloaderloginfo log node lognode local root logger localrootlogger class loader log gers classloaderloggers class loader classloader info read configuration readconfiguration class loader classloader add logger addlogger local root logger localrootlogger load configuration param input stream inputstream properties file param class loader classloader configuration loaded io exception ioexception wrong loading read configuration readconfiguration input stream inputstream class loader classloader class loader classloader io exception ioexception class loader log info classloaderloginfo info class loader log gers classloaderloggers class loader classloader info props load io exception ioexception system err println configuration error print stack trace printstacktrace close io exception ioexception ioe create handlers root logger class loader classloader string root handlers roothandlers info props get property getproperty handlers string handlers info props get property getproperty handlers logger local root logger localrootlogger info root node rootnode logger handlers string tokenizer stringtokenizer tok string tokenizer stringtokenizer handlers tok has more tokens hasmoretokens string handler name handlername tok next token nexttoken trim string handler class name handlerclassname handler name handlername string prefix handler class name handlerclassname length webapp foo hanlder webappfoohanlder character is digit isdigit handler class name handlerclassname char at charat pos handler class name handlerclassname index of indexof pos prefix handler class name handlerclassname substring pos handler class name handlerclassname handler class name handlerclassname substring pos prefix prefix handler handler handler class loader classloader load class loadclass handler class name handlerclassname new instance newinstance specification impl ies implies configuration creation handler object includes setting level filter formatter encoding prefix info handlers handler name handlername handler root handlers roothandlers local root logger localrootlogger add handler addhandler handler exception system err println handler error print stack trace printstacktrace parent child relationship log gers loggers param logger param parent do set parent logger dosetparentlogger logger logger logger parent access controller accesscontroller do privileged doprivileged privileged action privilegedaction override logger set parent setparent parent system property replacement string param str original string modified string string replace string str string result str pos start str index of indexof pos start string builder stringbuilder builder string builder stringbuilder pos pos start builder append str pos pos start pos str index of indexof pos start pos pos pos start string prop name propname str substring pos start pos string replacement prop name propname length system get property getproperty prop name propname replacement builder append replacement builder append str pos start pos pos start str index of indexof pos builder append str pos str length result builder to string tostring result log node lognode logger logger map string log node lognode children hash map hashmap string log node lognode log node lognode parent log node lognode log node lognode parent logger logger parent parent logger logger log node lognode log node lognode parent parent log node lognode find node findnode string log node lognode current node currentnode logger get name getname equals dot index dotindex index of indexof string next name nextname dot index dotindex next name nextname next name nextname substring dot index dotindex substring dot index dotindex log node lognode child node childnode current node currentnode children next name nextname child node childnode child node childnode log node lognode current node currentnode current node currentnode children next name nextname child node childnode current node currentnode child node childnode current node currentnode logger find parent logger findparentlogger logger logger log node lognode node parent node logger logger node logger node node parent logger set parent logger setparentlogger logger parent iterator log node lognode iter children values iterator iter has next hasnext log node lognode child node childnode iter child node childnode logger child node childnode set parent logger setparentlogger parent do set parent logger dosetparentlogger child node childnode logger parent class loader log info classloaderloginfo log node lognode root node rootnode map string logger log gers loggers concurrent hash map concurrenthashmap string logger map string handler handlers hash map hashmap string handler properties props properties class loader log info classloaderloginfo log node lognode root node rootnode root node rootnode root node rootnode needed instantiate root class loader classloader hierarchy root logger rootlogger logger root logger rootlogger