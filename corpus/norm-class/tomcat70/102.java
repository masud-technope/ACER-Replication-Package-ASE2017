licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc pool java util properties org apache tomcat jdbc pool pool properties poolproperties interceptor definition interceptordefinition pool configuration poolconfiguration jmx prefix int erceptors interceptors register jmx string pkg prefix org apache tomcat jdbc pool int erceptor interceptor connections abandoned timed wont closed reported number connections percentage defined abandon when percentage full abandonwhenpercentagefull impl ies implies connections eligible closure remove abandoned timeout removeabandonedtimeout reached param percentage connections abandoned timed considered abandoned set abandon when percentage full setabandonwhenpercentagefull percentage connections abandoned timed wont closed reported number connections percentage defined abandon when percentage full abandonwhenpercentagefull impl ies implies connections eligible closure remove abandoned timeout removeabandonedtimeout reached percentage connections abandoned timed considered abandoned get abandon when percentage full getabandonwhenpercentagefull returns fair queue connection pool fair waiting queue is fair queue isfairqueue calls get connection getconnection treated fifo fashion link fair blocking queue fairblockingqueue implementation list idle connections flag required asynchronous connection retrieval param fair queue fairqueue set fair queue setfairqueue fair queue fairqueue property access allowed access achieved calling unwrap pooled connection link javax sql data source datasource call get connection getconnection ref lection reflection object link javax sql pooled connection pooledconnection is access to underlying connection allowed isaccesstounderlyingconnectionallowed param access to underlying connection allowed accesstounderlyingconnectionallowed parameter set access to underlying connection allowed setaccesstounderlyingconnectionallowed access to underlying connection allowed accesstounderlyingconnectionallowed connection properties jdbc driver establishing connections format string property name propertyname property note user password properties passed explicitly included string get connection properties getconnectionproperties properties passed link java sql driver connect string properties method username password stored passed properties connection established param connection properties connectionproperties properties format string property name propertyname property prop prop set connection properties setconnectionproperties string connection properties connectionproperties returns database properties passed link java sql driver connect string properties method database properties passed link java sql driver connect string properties method properties get db properties getdbproperties overrides database properties passed link java sql driver connect string properties method param db properties dbproperties set db properties setdbproperties properties db properties dbproperties auto commit connections created pool jdbc driver link java sql connection set auto commit setautocommit method called auto commit setting driver is default auto commit isdefaultautocommit auto commit connections created pool jdbc driver link java sql connection set auto commit setautocommit method called auto commit setting driver get default auto commit getdefaultautocommit auto commit connections created pool jdbc driver link java sql connection set auto commit setautocommit method called param default auto commit defaultautocommit auto commit setting driver set default auto commit setdefaultautocommit default auto commit defaultautocommit connection creation method link java sql connection set catalog setcatalog string called catalog accepting driver string get default catalog getdefaultcatalog connection creation method link java sql connection set catalog setcatalog string called param default catalog defaultcatalog accepting driver set default catalog setdefaultcatalog string default catalog defaultcatalog connection creation method link java sql connection set read only setreadonly called accepting driver read is default read only isdefaultreadonly connection creation method link java sql connection set read only setreadonly called accepting driver read get default read only getdefaultreadonly connection creation method link java sql connection set read only setreadonly called param default read only defaultreadonly accepting driver set default read only setdefaultreadonly default read only defaultreadonly returns transaction isolation level link data source factory datasourcefactory unknown transactionisolation method link java sql connection set transaction isolation settransactionisolation called connection creation driver transaction isolation level link data source factory datasourcefactory unknown transactionisolation get default transaction isolation getdefaulttransactionisolation link data source factory datasourcefactory unknown transactionisolation method link java sql connection set transaction isolation settransactionisolation called connection creation method called isolation level property param default transaction isolation defaulttransactionisolation link java sql connection transaction link java sql connection transaction read committed link java sql connection transaction read uncommitted link java sql connection transaction repeatable read link java sql connection transaction serializable link data source factory datasourcefactory unknown transactionisolation connection set default transaction isolation setdefaulttransactionisolation default transaction isolation defaulttransactionisolation fully qualified java jdbc driver driver accessible class loader classloader tomcat jdbc jar fully qualified jdbc driver string get driver class name getdriverclassname fully qualified java jdbc driver driver accessible class loader classloader tomcat jdbc jar param driver class name driverclassname fully qualified java link java sql driver implementation set driver class name setdriverclassname string driver class name driverclassname returns number connections established connection pool started number connections started pool started get initial size getinitialsize number connections established connection pool started exc eeds exceeds link set max active setmaxactive automatically low ered lowered param initial size initialsize number connections established set initial size setinitialsize initial size initialsize flag stack traces log ged logged application code abandoned connection logging abandoned connections adds over head overhead connection borrow stack trace generated connection pool logs stack traces connections borrowed pool is log abandoned islogabandoned flag stack traces log ged logged application code abandoned connection logging abandoned connections adds over head overhead connection borrow stack trace generated param log abandoned logabandoned stack traces recorded link data source datasource get connection getconnection called set log abandoned setlogabandoned log abandoned logabandoned maximum number active connections all ocated allocated pool time maximum number connections pool get max active getmaxactive maximum number active connections all ocated allocated pool time param max active maxactive hard limit number managed connections pool set max active setmaxactive max active maxactive maximum number connections idle pool link is pool sweeper enabled ispoolsweeperenabled returns link is pool sweeper enabled ispoolsweeperenabled returns idle pool grow link get max active getmaxactive shrunk link get min evictable idle time millis getminevictableidletimemillis setting max active maxactive maximum number idle connections get max idle getmaxidle maximum number connections idle pool link is pool sweeper enabled ispoolsweeperenabled returns link is pool sweeper enabled ispoolsweeperenabled returns idle pool grow link get max active getmaxactive shrunk link get min evictable idle time millis getminevictableidletimemillis setting max active maxactive param max idle maxidle maximum size idle pool set max idle setmaxidle max idle maxidle maximum number milliseconds pool wait connections link get max active getmaxactive reached connection returned throwing exception seconds number milliseconds wait connection pool maxed get max wait getmaxwait maximum number milliseconds pool wait connections link get max active getmaxactive reached connection returned throwing exception seconds param max wait maxwait maximum number milliseconds wait set max wait setmaxwait max wait maxwait minimum amount time object sit idle pool eligible eviction seconds minimum amount idle time milliseconds connection considered idle eligible eviction get min evictable idle time millis getminevictableidletimemillis minimum amount time object sit idle pool eligible eviction seconds param min evictable idle time millis minevictableidletimemillis number milliseconds connection idle eligible eviction set min evictable idle time millis setminevictableidletimemillis min evictable idle time millis minevictableidletimemillis minimum number established connections pool times connection pool shrink number validation queries fail connections closed derived link get initial size getinitialsize link set test while idle settestwhileidle idle pool shrink eviction number actual connections link get min idle getminidle link get max idle getmaxidle link get max active getmaxactive minimum number idle established connections get min idle getminidle minimum number established connections pool times connection pool shrink number validation queries fail connections closed derived link get initial size getinitialsize link set test while idle settestwhileidle idle pool shrink eviction number actual connections link get min idle getminidle link get max idle getmaxidle link get max active getmaxactive param min idle minidle minimum number idle established connections set min idle setminidle min idle minidle returns connection pool jvm unique random assigned pool unique jvm string get name getname sets connection pool param pool unique runtime jvm set name setname string property unknown get num tests per eviction run getnumtestsperevictionrun property param num tests per eviction run numtestsperevictionrun parameter set num tests per eviction run setnumtestsperevictionrun num tests per eviction run numtestsperevictionrun returns password establishing connections database password string format string get password getpassword sets password establish connection password included database property password param password get db properties getdbproperties set password setpassword string password get name getname string get pool name getpoolname returns username establish connection username establish connection string get username getusername sets username establish connection property called user database properties param username get db properties getdbproperties set username setusername string username flag remove abandoned connections exc eed exceed remove abandoned timout removeabandonedtimout connection considered abandoned eligible removal longer link get remove abandoned timeout getremoveabandonedtimeout condition link get abandon when percentage full getabandonwhenpercentagefull met setting recover connections applications fail close connection link is log abandoned islogabandoned abandoned connections closed exp elled expelled pool is remove abandoned isremoveabandoned flag remove abandoned connections exc eed exceed remove abandoned timout removeabandonedtimout connection considered abandoned eligible removal longer link get remove abandoned timeout getremoveabandonedtimeout condition link get abandon when percentage full getabandonwhenpercentagefull met setting recover connections applications fail close connection link is log abandoned islogabandoned param remove abandoned removeabandoned abandoned connections closed exp elled expelled pool set remove abandoned setremoveabandoned remove abandoned removeabandoned time seconds connection considered abandoned timer reset queries int erceptor interceptor param remove abandoned timeout removeabandonedtimeout time seconds connection considered abandoned org apache tomcat jdbc pool int erceptor interceptor reset abandoned timer resetabandonedtimer set remove abandoned timeout setremoveabandonedtimeout remove abandoned timeout removeabandonedtimeout time seconds connection considered abandoned timer reset queries int erceptor interceptor org apache tomcat jdbc pool int erceptor interceptor reset abandoned timer resetabandonedtimer time seconds connection considered abandoned get remove abandoned timeout getremoveabandonedtimeout indication objects validated borrowed pool object fails validate dropped pool attempt borrow note validation query validationquery parameter string order efficient validation link set validation interval setvalidationinterval connection validated borrowing connection pool get validation interval getvalidationinterval is test on borrow istestonborrow indication objects validated borrowed pool object fails validate dropped pool attempt borrow note validation query validationquery parameter string order efficient validation link set validation interval setvalidationinterval param test on borrow testonborrow validation place connection handed application get validation interval getvalidationinterval set test on borrow settestonborrow test on borrow testonborrow indication objects validated returned pool object fails validate dropped pool note validation query validationquery parameter string order efficient validation link set validation interval setvalidationinterval validation place connection returned pool get validation interval getvalidationinterval is test on return istestonreturn indication objects validated returned pool object fails validate dropped pool note validation query validationquery parameter string order efficient validation link set validation interval setvalidationinterval param test on return testonreturn validation place connection returned pool get validation interval getvalidationinterval set test on return settestonreturn test on return testonreturn query validation place connection idle validation place idle checks set time between eviction runs millis settimebetweenevictionrunsmillis is test while idle istestwhileidle query validation place connection idle param test while idle testwhileidle validation place idle checks set time between eviction runs millis settimebetweenevictionrunsmillis set test while idle settestwhileidle test while idle testwhileidle number milliseconds sleep runs idle connection validation abandoned cleaner idle pool res izing resizing dictates check idle abandoned connections validate idle connection resize idle pool seconds sleep time valid ations validations milliseconds get time between eviction runs millis gettimebetweenevictionrunsmillis number milliseconds sleep runs idle connection validation abandoned cleaner idle pool res izing resizing dictates check idle abandoned connections validate idle connection resize idle pool seconds param time between eviction runs millis timebetweenevictionrunsmillis sleep time valid ations validations milliseconds set time between eviction runs millis settimebetweenevictionrunsmillis time between eviction runs millis timebetweenevictionrunsmillis url connect database configured url connection pool java sql driver connect string properties string get url geturl sets url connect database param url configured url connection pool java sql driver connect string properties set url seturl string url sql query validate connections pool returning caller pool query data sql exception sqlexception values select mysql select dual oracle select sql server query validation validation performed string get validation query getvalidationquery sql query validate connections pool returning caller pool query data sql exception sqlexception values select mysql select dual oracle select sql server param validation query validationquery query validation validation performed set validation query setvalidationquery string validation query validationquery timeout seconds connection validation queries fail equal disable feature defaults timeout seconds get validation query timeout getvalidationquerytimeout timeout seconds connection validation queries fail equal disable feature defaults set validation query timeout setvalidationquerytimeout validation query timeout validationquerytimeout optional validator optional validator string get validator class name getvalidatorclassname optional validator place test queries standard validation param class name classname optional validator set validator class name setvalidatorclassname string class name classname optional validator object validator get validator getvalidator sets validator object object validator validation query validationquery remove usage validator set validator setvalidator validator validator avoid excess validation validation frequency time milliseconds connection validation validated int erval interval validated seconds validation int erval interval milliseconds get validation interval getvalidationinterval avoid excess validation validation frequency time milliseconds connection validation validated int erval interval validated seconds param validation interval validationinterval validation int erval interval milliseconds set validation interval setvalidationinterval validation interval validationinterval custom query connection created query runs connection connection established database replace validation query connection creation init sql string getinitsql custom query connection created query runs connection connection established database replace validation query connection creation param initsql init sql query executed setinitsql string initsql returns validation query connecting database time connection validation query validationquery init query validation query connect is test on connect istestonconnect validation query connecting database time connection validation query validationquery init query setting link setinitsql string override setting init sql validation query param test on connect testonconnect validation query connect set test on connect settestonconnect test on connect testonconnect semicolon separated list class names classnames extending link org apache tomcat jdbc pool jdbc interceptor jdbcinterceptor int erceptors interceptors inserted int erceptor interceptor chain operations java sql connection object int erceptors interceptors link org apache tomcat jdbc pool int erceptor interceptor statement final izer statementfinalizer statement final izer statementfinalizer close statements session link org apache tomcat jdbc pool int erceptor interceptor reset abandoned timer resetabandonedtimer reset abandoned timer resetabandonedtimer res ets resets timer operation connection statement link org apache tomcat jdbc pool int erceptor interceptor connection state connectionstate connection state connectionstate caches auto commit read catalog settings avoid trips int erceptors interceptors connections format connection state connectionstate use equals useequals fast reset abandoned timer resetabandonedtimer string get jdbc int erceptors getjdbcinterceptors semicolon separated list class names classnames extending link org apache tomcat jdbc pool jdbc interceptor jdbcinterceptor int erceptors interceptors inserted int erceptor interceptor chain operations java sql connection object int erceptors interceptors link org apache tomcat jdbc pool int erceptor interceptor statement final izer statementfinalizer statement final izer statementfinalizer close statements session link org apache tomcat jdbc pool int erceptor interceptor reset abandoned timer resetabandonedtimer reset abandoned timer resetabandonedtimer res ets resets timer operation connection statement link org apache tomcat jdbc pool int erceptor interceptor connection state connectionstate connection state connectionstate caches auto commit read catalog settings avoid trips param jdbc int erceptors jdbcinterceptors int erceptors interceptors connections format connection state connectionstate use equals useequals fast reset abandoned timer resetabandonedtimer set jdbc int erceptors setjdbcinterceptors string jdbc int erceptors jdbcinterceptors returns link get jdbc int erceptors getjdbcinterceptors array objects properties classes array int erceptors interceptors configured interceptor definition interceptordefinition get jdbc int erceptors as array getjdbcinterceptorsasarray connection pool creates link org apache tomcat jdbc pool jmx connection pool bean connectionpoolmbean object registered jmx receive not ifications notifications pool connection pool connectionpool object doesn register changing object name objectname jvm res tarts restarts mbean object created startup is jmx enabled isjmxenabled connection pool creates link org apache tomcat jdbc pool jmx connection pool bean connectionpoolmbean object registered jmx receive not ifications notifications pool connection pool connectionpool object doesn register changing object name objectname jvm res tarts restarts param jmx enabled jmxenabled mbean object created startup set jmx enabled setjmxenabled jmx enabled jmxenabled returns pool sweeper enabled connection pool pool sweeper enabled settings require async int ervention intervention pool turned source result get time between eviction runs millis gettimebetweenevictionrunsmillis result result is remove abandoned isremoveabandoned get remove abandoned timeout getremoveabandonedtimeout result result is test while idle istestwhileidle get validation query getvalidationquery result source background thread enabled pool is pool sweeper enabled ispoolsweeperenabled code proxy connection proxyconnection code code string equals code code code comparing method names property apply int erceptors interceptors configured individually code code pool link string equals object comparing method names link java sql connection methods is use equals isuseequals code proxy connection proxyconnection code code string equals code code code comparing method names property apply int erceptors interceptors configured individually code code param use equals useequals pool link string equals object comparing method names link java sql connection methods set use equals setuseequals use equals useequals time milliseconds connection alive connection returned pool pool check time connected max age maxage reached closes connection returning pool impl ies implies connections left open age check returning connection pool setting database sessions leak memory ensures session finite life span time milliseconds connection open get max age getmaxage time milliseconds connection alive connection returned pool pool check time connected max age maxage reached closes connection returning pool impl ies implies connections left open age check returning connection pool setting database sessions leak memory ensures session finite life span param max age maxage time milliseconds connection open set max age setmaxage max age maxage lock operations performed connection object plan background thread idle abandon checking jmx clients pool sweeper enabled lock automatically setting lock get use lock getuselock lock operations performed connection object plan background thread idle abandon checking jmx clients pool sweeper enabled lock automatically setting param use lock uselock lock connection operations set use lock setuselock use lock uselock link set remove abandoned timeout setremoveabandonedtimeout treating connection abandoned closing connection simply logs warning link is log abandoned islogabandoned returns equal suspect checking performed suspect checking takes place timeout larger connection abandoned abandon check disabled connection suspect warn message log ged logged jmx not ification notification param seconds amount time seconds pass connection marked suspect set suspect timeout setsuspecttimeout seconds returns time seconds pass connection marked abanoned suspect lesser equal check disabled returns time seconds pass connection marked abanoned suspect get suspect timeout getsuspecttimeout injects datasource retrieve create connections data source link pool configuration poolconfiguration get url geturl link pool configuration poolconfiguration get driver class name getdriverclassname methods pool link pool configuration poolconfiguration get username getusername link pool configuration poolconfiguration get password getpassword values method link javax sql data source datasource get connection getconnection string string method called link javax sql data source datasource get connection getconnection method data source link javax sql xa data source xadatasource methods link javax sql xa data source xadatasource getxaconnection link javax sql xa data source xadatasource getxaconnection string string invoked param link javax sql data source datasource creating connections pooled set data source setdatasource object returns datasource exists create connections method pool link java sql driver link javax sql data source datasource creating connections pooled driver object get data source getdatasource configure connection pool data source datasource link pool configuration poolconfiguration set data source setdatasource object injecting object jndi location successful jndi link pool configuration poolconfiguration get data source getdatasource param jndids jndi string todo rules setdatasourcejndi string jndids returns jndi string configured data source usage jndi string string getdatasourcejndi returns call link data source datasource get connection getconnection string string get connection getconnection username password allowed pool application accessing multiple schemas performance impact turning option link data source datasource get connection getconnection string string get connection getconnection username password honored is alternate username allowed isalternateusernameallowed call link data source datasource get connection getconnection string string get connection getconnection username password allowed honored pool application accessing multiple schemas performance impact turning option username checks param alternate username allowed alternateusernameallowed link data source datasource get connection getconnection string string get connection getconnection username password honored set alternate username allowed setalternateusernameallowed alternate username allowed alternateusernameallowed connection pool commit pending transaction connection returned result commit ting committing data parameter looked link get default auto commit getdefaultautocommit returns param commit on return commitonreturn pool call link java sql connection commit connection returned pool set commit on return setcommitonreturn commit on return commitonreturn pool configuration poolconfiguration set commit on return setcommitonreturn get commit on return getcommitonreturn connection pool rollback pending transaction connection returned result commit ting committing data parameter looked link get default auto commit getdefaultautocommit returns param rollback on return rollbackonreturn pool call link java sql connection rollback connection returned pool set rollback on return setrollbackonreturn rollback on return rollbackonreturn pool configuration poolconfiguration set rollback on return setrollbackonreturn get rollback on return getrollbackonreturn connection wrapped facade disallow connection link java sql connection close called link java sql connection close calls link java sql connection close link java sql connection is closed isclosed exception param use disposable connection facade usedisposableconnectionfacade set use disposable connection facade setusedisposableconnectionfacade use disposable connection facade usedisposableconnectionfacade returns connection pool configured connection facade prevent connection link java sql connection close invoked link java sql connection close invoked get use disposable connection facade getusedisposableconnectionfacade errors validation log ged logged error messages param log validation errors logvalidationerrors log validation errors set log validation errors setlogvalidationerrors log validation errors logvalidationerrors returns errors happen validation log ged logged errors happen validation log ged logged get log validation errors getlogvalidationerrors returns pool configured propagate int errupt interrupt thread thread waiting connection wait int errupted interrupted clear int errupt interrupt flag link pool exhausted exception poolexhaustedexception pool configured propagate clear thread int errupt interrupt get propagate int err upt state getpropagateinterruptstate configure pool propagate int errupt interrupt int errupted interrupted threads waiting connection thread waiting connection wait int errupted interrupted clear int errupt interrupt flag link pool exhausted exception poolexhaustedexception behavior change link pool exhausted exception poolexhaustedexception thrown threads int errupted interrupted param propagate int err upt state propagateinterruptstate clear propagate threads int errupted interrupted set propagate int err upt state setpropagateinterruptstate propagate int err upt state propagateinterruptstate ignore error connection creation initial izing initializing pool fail initialization pool throwing exception param ignore exception on pre load ignoreexceptiononpreload ignore error connection creation initial izing initializing pool set ignore exception on pre load setignoreexceptiononpreload ignore exception on pre load ignoreexceptiononpreload pool configuration poolconfiguration set ignore exception on pre load setignoreexceptiononpreload is ignore exception on pre load isignoreexceptiononpreload