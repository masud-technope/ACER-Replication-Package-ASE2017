licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina websocket java eof exception eofexception java io exception ioexception java nio byte buffer bytebuffer java nio char buffer charbuffer java nio charset code r result coderresult org apache catalina util conversions org apache coyote http upgrade upgrade processor upgradeprocessor org apache tomcat util buf utf decoder org apache tomcat util res string manager stringmanager represents complete web socket websocket frame exception payload control frames deprecated replaced jsr web socket websocket implementation removed tomcat deprecated ws frame wsframe string manager stringmanager string manager stringmanager get manager getmanager constants fin rsv op code opcode mask payload length payloadlength byte buffer bytebuffer payload create web socket websocket frame reading data processor param data frame param processor processor web socket websocket connection frame io exception ioexception problem occurs processing frame exception trigger closing web socket websocket connection ws frame wsframe upgrade processor upgradeprocessor processor io exception ioexception xff fin rsv op code opcode blocking read blockingread processor client data masked io exception ioexception get string getstring frame not masked notmasked payload length payloadlength payload length payloadlength extended blocking read blockingread processor extended payload length payloadlength conversions byte array to long bytearraytolong extended payload length payloadlength extended blocking read blockingread processor extended payload length payloadlength conversions byte array to long bytearraytolong extended is control iscontrol payload length payloadlength io exception ioexception fin io exception ioexception blocking read blockingread processor mask is control iscontrol note payload limited bytes test payload byte buffer bytebuffer all ocate allocate payload length payloadlength blocking read blockingread processor payload op code opcode constants opc ode opcode close payload length payloadlength check close payload valid utf char buffer charbuffer char buffer charbuffer all ocate allocate payload length payloadlength utf decoder decoder utf decoder payload position code r result coderresult decoder decode payload payload position is error iserror io exception ioexception get string getstring frame invalid utf invalidutf payload get fin getfin fin get rsv getrsv rsv get op code getopcode op code opcode is control iscontrol op code opcode get mask getmask mask get pay load length getpayloadlength payload length payloadlength byte buffer bytebuffer get pay load getpayload payload blocks aingle read blocking read blockingread upgrade processor upgradeprocessor processor io exception ioexception result processor read result io exception ioexception get string getstring frame eos result blocks array filled blocking read blockingread upgrade processor upgradeprocessor processor bytes io exception ioexception read read bytes length processor read bytes read bytes length read io exception ioexception get string getstring frame eos read int ended intended read payload blocks unmask payload data blocking read blockingread upgrade processor upgradeprocessor processor byte buffer bytebuffer io exception ioexception has remaining hasremaining processor read io exception ioexception get string getstring frame eos mask position flip read web socket websocket frame reading data processor param processor processor web socket websocket connection frame param block method block frame presented data process note single method block complete frame excluding payload control frames io exception ioexception problem occurs processing frame exception trigger closing web socket websocket connection ws frame wsframe next frame nextframe upgrade processor upgradeprocessor processor block io exception ioexception read processor read block read ws frame wsframe processor read read eof exception eofexception get string getstring frame read eos readeos io exception ioexception get string getstring frame read failed readfailed integer value of valueof read