licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache naming factory java util hash map hashmap java util hashtable java util map java util concurrent concurrent hash map concurrenthashmap javax naming context javax naming javax naming naming exception namingexception javax naming ref addr refaddr javax naming reference javax naming spi object factory objectfactory org apache naming resource link ref resourcelinkref object factory resource links author remy maucherat resource link factory resourcelinkfactory object factory objectfactory variables global naming context context global context globalcontext map class loader classloader map string string global resource registrations globalresourceregistrations concurrent hash map concurrenthashmap class loader classloader map string string methods global context not e note param new global context newglobalcontext global context set global context setglobalcontext context new global context newglobalcontext security manager securitymanager system get security manager getsecuritymanager check permission checkpermission runtime permission runtimepermission resource link factory resourcelinkfactory get name getname set global context setglobalcontext global context globalcontext new global context newglobalcontext register global resource access registerglobalresourceaccess context global context globalcontext string local name localname string global name globalname validate global context validateglobalcontext global context globalcontext class loader classloader thread current thread currentthread get context class loader getcontextclassloader map string string registrations global resource registrations globalresourceregistrations registrations web application initialization single thr eaded threaded safe registrations hash map hashmap string string global resource registrations globalresourceregistrations registrations registrations local name localname global name globalname deregister global resource access deregisterglobalresourceaccess context global context globalcontext string local name localname validate global context validateglobalcontext global context globalcontext class loader classloader thread current thread currentthread get context class loader getcontextclassloader map string string registrations global resource registrations globalresourceregistrations registrations registrations remove local name localname deregister global resource access deregisterglobalresourceaccess context global context globalcontext validate global context validateglobalcontext global context globalcontext class loader classloader thread current thread currentthread get context class loader getcontextclassloader global resource registrations globalresourceregistrations remove validate global context validateglobalcontext context global context globalcontext resource link factory resourcelinkfactory global context globalcontext resource link factory resourcelinkfactory global context globalcontext global context globalcontext security exception securityexception caller invalid global context validate global resource access validateglobalresourceaccess string global name globalname class loader classloader thread current thread currentthread get context class loader getcontextclassloader map string string registrations global resource registrations globalresourceregistrations registrations registrations contains value containsvalue global name globalname object factory objectfactory methods create data source datasource instance param obj reference object describing data source datasource override object get object instance getobjectinstance object obj context name ctx namectx hashtable environment naming exception namingexception obj resource link ref resourcelinkref process request reference reference obj read global add r addr string global name globalname ref addr refaddr ref addr refaddr resource link ref resourcelinkref global name globalname ref addr refaddr global name globalname ref addr refaddr get content getcontent to string tostring access global resource validate global resource access validateglobalresourceaccess global name globalname object result result global context globalcontext lookup global name globalname check expected type string expected class name expectedclassname get class name getclassname expected clazz expectedclazz for name forname expected class name expectedclassname thread current thread currentthread get context class loader getcontextclassloader expected clazz expectedclazz is assignable from isassignablefrom result get class getclass illegal argument exception illegalargumentexception class not found exception classnotfoundexception illegal state exception illegalstateexception result