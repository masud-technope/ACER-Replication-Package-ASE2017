licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jni needed classes java nio byte buffer bytebuffer file author mladen turk file open file reading apr fopen read open file writing apr fopen write create file apr fopen create append file apr fopen append open file truncate length apr fopen truncate open file binary mode apr fopen binary open fail apr create file exists apr fopen excl open file buf fered buffered apr fopen buffered delete file close apr fopen delonclose platform dependent tag open file multiple threads apr fopen xthread platform dependent support higher level locked read write access support writes process machines apr fopen sharelock register cleanup file opened apr fopen nocleanup advisory flag file support apr socket sendfile operation apr fopen sendfile enabled platform dependent flag enable large file support warning apr largefile flag platforms size of sizeof apr implemented opening writing file exc eeds exceeds size represented apr gigabytes file size exc eed exceed apr file info fail error descriptor apr stat apr lstat fail filename apr dir read fail apr incomplete directory entry large file depending apr finfo flags gen erally generally recommended flag apr fopen largefile file position apr current apr cur file apr flags apr file attrs file read apr file attr read only readonly file executable apr file attr executable file hidden apr file attr hidden file lock types flags shared lock process thread hold shared lock time essentially read lock prev enting preventing write rs writers establishing exclusive lock apr flock shared exclusive lock process hold exclusive lock time analogous write lock apr flock exclusive mask extract lock type apr flock type mask typemask block acquiring file lock apr flock non block nonblock apr file type filetype values file type filetype member apr file info structure warning file types filetypes determined platform correctly report socket descriptor apr sock type isn identified platform cases file type filetype exists recognized flags file type filetype apr unkfile file type filetype member determined type apr nofile file type determined apr nofile regular file apr reg directory apr dir character dev ice device apr chr block dev ice device apr blk fifo pipe apr pipe symbolic link apr lnk unix domain socket apr sock file unknown type apr unkfile apr file permissions file per missions permissions flags apr fprot use tid usetid user apr fprot uread read user apr fprot uwrite write user apr fprot uexecute execute user apr fprot gsetid group apr fprot gread read group apr fprot gwrite write group apr fprot gexecute execute group apr fprot wsticky sticky bit apr fprot wread read apr fprot wwrite write apr fprot wexecute execute apr fprot fff permissions apr finfo link stat link file link apr finfo mtime modification time apr finfo ctime creation inode changed time apr finfo atime access time apr finfo size size file apr finfo csize storage size consumed file apr finfo dev device apr finfo inode inode apr finfo nlink number links apr finfo type type apr finfo user user apr finfo group group apr finfo uprot user protection bits apr finfo gprot group protection bits apr finfo wprot protection bits apr finfo icase dev insensitive apr finfo proper apr finfo min type mtime ctime atime size apr finfo ident dev inode apr finfo owner user group apr finfo prot protect ions protections apr finfo norm atomic unix apr stat apr finfo dirent atomic unix apr dir read open file param fname full path file systems param flag pre apr fopen read open reading apr fopen write open writing apr fopen create create file apr fopen append file ptr prior writes apr fopen truncate length file exists apr fopen binary text file flag unix meaning apr fopen buffered buffer data buf fered buffered apr fopen excl error apr create file exists apr fopen delonclose delete file closing apr fopen xthread platform dependent tag open file multiple threads apr fopen sharelock platform dependent support higher level locked read write access support writes process machines apr fopen nocleanup register cleanup pool passed pool argument apr file handle apr file closed pool dest royed destroyed apr fopen sendfile enabled open platform semantics sendfile operations advisory apr socket sendfile check flag pre param per m perm access permissions file param pool pool per m perm apr file created permissions opened file descriptor open string fname flag per m perm pool error close file param file file descriptor close close file flush file buffer param the file thefile file descriptor flush flush the file thefile open temporary file param temp l templ template creating temp file param flags flags open file file opened apr create apr read apr write apr excl apr delonclose param pool pool all ocate allocate file apr file temporary file function generates unique temporary file template characters template xxx xxx xxxxxx replaced string filename unique modified template string constant declared character array mktemp string temp l templ flags pool error delete file param path full path file systems param pool pool file open won removed instances closed remove string path pool rename file warning file exists location overwritten moving files directories dev ices devices param from path frompath full path original file systems param to path topath full path file systems param pool pool rename string from path frompath string to path topath pool copy file file file exist created required warning file exists contents overwritten param from path frompath full path original file systems param to path topath full path file systems param perms access permissions file created place usual combination file permissions apr file source per ms perms source file permissions copied param pool pool copy string from path frompath string to path topath perms pool append file file file exist created required param from path frompath full path source file systems param to path topath full path destination file systems param perms access permissions destination file created place usual combination file permissions apr file source per ms perms source file permissions copied param pool pool append string from path frompath string to path topath perms pool write string file param str string write nul terminated param the file thefile file descriptor write puts str the file thefile move read write file offset file param the file thefile file descriptor param move pointer pre apr offset offset apr cur add offset current position apr add offset current file size pre param offset offset move pointer offset pointer moved see k seek the file thefile offset error write character file param character write param the file thefile file descriptor write put c putc the file thefile character stream param character write param the file thefile file descriptor write ungetc the file thefile write data file write write number bytes write bytes write argument modified reflect number bytes written bytes written error returned apr eintr returned param the file thefile file descriptor write param buf buffer data param offset start offset buf param nbytes number bytes write full array number bytes written write the file thefile buf offset nbytes write data file write write number bytes write bytes write argument modified reflect number bytes written bytes written error returned apr eintr returned param the file thefile file descriptor write param buf direct buffer data param offset start offset buf param nbytes number bytes write number bytes written write b writeb the file thefile byte buffer bytebuffer buf offset nbytes write data file ensuring data written returning write write number bytes write bytes process thread block written exceptional error space pipe closed terminate error bytes written error returned bytes written nbytes accompanying error returned apr eintr returned param the file thefile file descriptor write param buf buffer data param offset start offset buf param nbytes number bytes write full array number bytes written write full writefull the file thefile buf offset nbytes write data file ensuring data written returning write write number bytes write bytes process thread block written exceptional error space pipe closed terminate error bytes written error returned bytes written nbytes accompanying error returned apr eintr returned param the file thefile file descriptor write param buf direct byte buffer bytebuffer data param offset start offset buf param nbytes number bytes write number bytes written write full b writefullb the file thefile byte buffer bytebuffer buf offset nbytes write data array arrays file bytes written error returned apr eintr returned apr file write v writev underlying operating system doesn provide write v writev param the file thefile file descriptor write param vec array data write file number bytes written write v writev the file thefile vec write data array arrays file ensuring data written returning write v full writevfull underlying operating system doesn provide write v writev param the file thefile file descriptor write param vec array data write file number bytes written write v full writevfull the file thefile vec read data file apr file read read number bytes isn data fill number bytes data read argument modified reflect number bytes read stream ungetc character returned bytes read apr eof error returned apr eintr returned param the file thefile file descriptor read param buf buffer store data param offset start offset buf param nbytes number bytes read full array number bytes read read the file thefile buf offset nbytes read data file apr file read read number bytes isn data fill number bytes data read argument modified reflect number bytes read stream ungetc character returned bytes read apr eof error returned apr eintr returned param the file thefile file descriptor read param buf direct buffer store data param offset start offset buf param nbytes number bytes read number bytes read read b readb the file thefile byte buffer bytebuffer buf offset nbytes read data file ensuring buffer filled returning read read number bytes isn data fill number bytes process thread block eof reached stream ungetc character returned bytes read error returned bytes read nbytes accompanying error returned apr eintr returned param the file thefile file descriptor read param buf buffer store data param offset start offset buf param nbytes number bytes read full array number bytes read read full readfull the file thefile buf offset nbytes read data file ensuring buffer filled returning read read number bytes isn data fill number bytes process thread block eof reached stream ungetc character returned bytes read error returned bytes read nbytes accompanying error returned apr eintr returned param the file thefile file descriptor read param buf direct byte buffer bytebuffer store data param offset start offset buf param nbytes number bytes read number bytes read read full b readfullb the file thefile byte buffer bytebuffer buf offset nbytes read string file buffer nul terminated characters stored param buf buffer store string param offset start offset buf param the file thefile file descriptor read buf offset the file thefile read character file param the file thefile file descriptor read read character get c getc the file thefile error file param fptr apr file testing returns apr eof file apr success eof fptr file current file param the file thefile open file string name get nameget the file thefile file permission bits warning platforms apply permission bits apr incomplete returned permissions warning platforms implement feature apr enotimpl param fname file apply permissions param perms permission bits apply file perms set permsset string fname perms attributes file function preference explicit manipulation file permissions operations provide attributes platform specific involve simply setting permission bits warning platforms implement feature apr enotimpl param fname full path file systems param attributes combination pre apr file attr read only readonly file read only readonly apr file attr executable file executable apr file attr hidden file hidden pre param mask mask valid bits attributes param pool pool attrs set attrsset string fname attributes mask pool mtime file warning platforms implement feature apr enotimpl param fname full path file systems param mtime mtime apply file microseconds param pool pool mtime set mtimeset string fname mtime pool establish lock open file lock advisory mandatory discretion platform lock applies file specific range locks established thread process basis lock thread block param the file thefile file lock param type type lock establish file lock the file thefile type remove out standing outstanding locks file param the file thefile file unlock unlock the file thefile retrieve flags passed apr file open file opened param file file retrieve flags flags flags get flagsget file truncate file length offset param file truncate param offset offset truncate trunc offset create anonymous pipe param file descriptors input pipe file descriptor output pipe param pool pool operate pipe create pipecreate pool timeout pipe manipulate blocking param the pipe thepipe pipe timeout current timeout microseconds pipe timeout get pipetimeoutget the pipe thepipe error timeout pipe manipulate blocking param the pipe thepipe pipe setting timeout param timeout timeout microseconds values wait wait pipe timeout set pipetimeoutset the pipe thepipe timeout duplicate file descriptor param new file newfile file duplicate new file newfile point valid apr file point param old file oldfile file duplicate param pool pool file duplicate d duplicated file structure dup new file newfile old file oldfile pool error duplicate file descriptor close original param new file newfile file closed reused new file newfile point valid apr file param old file oldfile file duplicate param pool pool file status code dup new file newfile old file oldfile pool file stats file filename pre opened file param finfo store file touched call fails param fname file stat param wanted desired apr finfo fields bit flag apr finfo values param pool pool all ocate allocate file stat file info fileinfo finfo string fname wanted pool file stats file filename pre opened file param fname file stat param wanted desired apr finfo fields bit flag apr finfo values param pool pool all ocate allocate file file info fileinfo object file info fileinfo get stat getstat string fname wanted pool file stats param finfo store file param wanted desired apr finfo fields bit flag apr finfo values param the file thefile file info get infoget file info fileinfo finfo wanted the file thefile file stats param wanted desired apr finfo fields bit flag apr finfo values param the file thefile file file info fileinfo object file info fileinfo get info getinfo wanted the file thefile