licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc pool int erceptor interceptor java lang reflect constructor java lang reflect invocation target exception invocationtargetexception java lang reflect method java sql statement java util concurrent atomic atomic integer atomicinteger interceptor counts opened statements tests statement counter interceptor statementcounterinterceptor statement decorator interceptor statementdecoratorinterceptor atomic integer atomicinteger count open countopen atomic integer atomicinteger atomic integer atomicinteger count closed countclosed atomic integer atomicinteger get active count getactivecount count open countopen count closed countclosed override object create decorator createdecorator object proxy method method object args object statement constructor constructor string sql instantiation exception instantiationexception illegal access exception illegalaccessexception invocation target exception invocationtargetexception object result statement proxy statementproxy statement proxy statementproxy statement proxy statementproxy statement statement sql result constructor new instance newinstance object statement proxy statementproxy statement proxy statementproxy set actual proxy setactualproxy result statement proxy statementproxy set connection setconnection proxy statement proxy statementproxy set constructor setconstructor constructor count open countopen increment and get incrementandget result statement proxy statementproxy statement decorator interceptor statementdecoratorinterceptor statement proxy statementproxy statement statement proxy statementproxy statement delegate string sql delegate sql override close invoked closeinvoked count closed countclosed increment and get incrementandget close invoked closeinvoked