licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes group int erceptors interceptors java lang weak reference weakreference java util arrays java util concurrent atomic atomic integer atomicinteger org apache catalina tribes channel exception channelexception org apache catalina tribes channel interceptor channelinterceptor org apache catalina tribes channel message channelmessage org apache catalina tribes member org apache catalina tribes group channel interceptor base channelinterceptorbase org apache catalina tribes group group channel groupchannel org apache catalina tribes channel data channeldata org apache catalina tribes x byte buffer xbytebuffer org apache juli logging log org apache juli logging log factory logfactory tcp ping interceptor tcppinginterceptor channel interceptor base channelinterceptorbase log log log factory logfactory get log getlog tcp ping interceptor tcppinginterceptor tcp ping data int erval interval use thread usethread static only staticonly running ping thread pingthread thread atomic integer atomicinteger cnt atomic integer atomicinteger weak reference weakreference tcp failure detector tcpfailuredetector failure detector failuredetector weak reference weakreference static member ship interceptor staticmembershipinterceptor static members staticmembers override start svc channel exception channelexception start svc running thread use thread usethread thread ping thread pingthread thread set daemon setdaemon string channel name channelname get channel getchannel group channel groupchannel group channel groupchannel get channel getchannel get name getname channel name channelname group channel groupchannel get channel getchannel get name getname thread set name setname tcp ping interceptor tcppinginterceptor ping thread pingthread channel name channelname cnt add and get addandget thread start acquire int erceptors interceptors invoke send ping events channel interceptor channelinterceptor get next getnext tcp failure detector tcpfailuredetector failure detector failuredetector weak reference weakreference tcp failure detector tcpfailuredetector tcp failure detector tcpfailuredetector static member ship interceptor staticmembershipinterceptor static members staticmembers weak reference weakreference static member ship interceptor staticmembershipinterceptor static member ship interceptor staticmembershipinterceptor get next getnext override svc channel exception channelexception running thread thread int errupt interrupt thread svc override heartbeat heartbeat get use thread getusethread send ping sendping get interval getinterval int erval interval set interval setinterval int erval interval int erval interval int erval interval set use thread setusethread use thread usethread use thread usethread use thread usethread set static only setstaticonly static only staticonly static only staticonly static only staticonly get use thread getusethread use thread usethread get static only getstaticonly static only staticonly send ping sendping tcp failure detector tcpfailuredetector tcp failure detector tcpfailuredetector failure detector failuredetector failure detector failuredetector tcp failure detector tcpfailuredetector reference failure detector piggy tcp failure detector tcpfailuredetector check members checkmembers static member ship interceptor staticmembershipinterceptor smi static only staticonly static members staticmembers static members staticmembers smi send ping message sendpingmessage smi get members getmembers send ping message sendpingmessage get members getmembers send ping message sendpingmessage member members members members length generates unique channel data channeldata data channel data channeldata data set address setaddress get local member getlocalmember data set timestamp settimestamp system current time millis currenttimemillis data set options setoptions get option flag getoptionflag data set message setmessage x byte buffer xbytebuffer tcp ping data send message sendmessage members data channel exception channelexception log warn unable send tcp ping override message received messagereceived channel message channelmessage msg incoming process ok to process oktoprocess msg get options getoptions check ping message process process msg get message getmessage get length getlength tcp ping data length arrays equals tcp ping data msg get message getmessage get bytes getbytes ignore message doesn t doesnt flag process message received messagereceived msg log is debug enabled isdebugenabled log debug received tcp ping packet msg ping thread pingthread thread override running sleep int erval interval send ping sendping interrupted exception interruptedexception int errupted interrupted exception log warn unable send ping tcp ping thread