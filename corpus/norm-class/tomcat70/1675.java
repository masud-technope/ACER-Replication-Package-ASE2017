licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache jasper xml parser xmlparser java util array list arraylist java util collections java util hash map hashmap java util iterator java util list simplified implementation node document object model dom parse xml document represent dom tree xml parser implementation code org dom code visible remainder jasper strong warning strong construct ion construction tree modifications existing thread safe accesses author craig mc clanahan mcclanahan tree node treenode construct node parent param node param parent node parent node tree node treenode string tree node treenode parent parent parent parent parent add child addchild instance variables attributes node keyed attribute instantiate d instantiated required hash map hashmap string string attributes body text node string body children node instantiated required array list arraylist tree node treenode children node string parent node node tree node treenode parent methods add attribute node replacing existing attribute param attribute add param attribute add attribute addattribute string string attributes attributes hash map hashmap string string attributes add child node node param node child node add child addchild tree node treenode node children children array list arraylist tree node treenode children add node node attribute exists code code param requested attribute string find attribute findattribute string attributes attributes iterator attribute names node attributes empty iterator returned iterator string find attributes findattributes attributes list string empty collections empty list emptylist empty iterator attributes key set keyset iterator child node node code code param desired child element tree node treenode find child findchild string children iterator tree node treenode items children iterator items has next hasnext tree node treenode item items equals item get name getname item iterator children node children empty iterator returned iterator tree node treenode find children findchildren children list tree node treenode empty collections empty list emptylist empty iterator children iterator iterator children node children empty iterator returned param select children iterator tree node treenode find children findchildren string children list tree node treenode empty collections empty list emptylist empty iterator array list arraylist tree node treenode array list arraylist tree node treenode iterator tree node treenode items children iterator items has next hasnext tree node treenode item items equals item get name getname add item iterator body text node string get body getbody body node string get name getname body text node param body body text set body setbody string body body body string representation tree node treenode override string to string tostring string builder stringbuilder string builder stringbuilder to string tostring to string tostring methods append string builder stringbuilder character representation node amount indentation param string builder stringbuilder append param indent number characters indentation param node tree node treenode printed to string tostring string builder stringbuilder indent tree node treenode node indent indent reconstruct opening node indent append append append node get name getname iterator string names node find attributes findattributes names has next hasnext append string names append append string node find attribute findattribute append append append reconstruct body text node string body node get body getbody body body length indent append append body append reconstruct child nodes extra indentation iterator tree node treenode children node find children findchildren children has next hasnext tree node treenode child children to string tostring indent child reconstruct closing node marker indent append append append node get name getname append