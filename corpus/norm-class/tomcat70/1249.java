licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes transport nio java io exception ioexception java net server socket serversocket java nio channels cancelled key exception cancelledkeyexception java nio channels closed selector exception closedselectorexception java nio channels data gram channel datagramchannel java nio channels select able channel selectablechannel java nio channels selection key selectionkey java nio channels selector java nio channels server socket channel serversocketchannel java nio channels socket channel socketchannel java util iterator java util linked list linkedlist java util java util concurrent atomic atomic reference atomicreference org apache catalina tribes group group channel groupchannel org apache catalina tribes object reader objectreader org apache catalina tribes transport abstract rx task abstractrxtask org apache catalina tribes transport constants org apache catalina tribes transport receiver base receiverbase org apache catalina tribes transport rx task pool rxtaskpool org apache catalina tribes util string manager stringmanager org apache juli logging log org apache juli logging log factory logfactory author filip hanik nio receiver nioreceiver receiver base receiverbase runnable log log log factory logfactory get log getlog nio receiver nioreceiver string manager string manager stringmanager string manager stringmanager get manager getmanager constants descriptive implementation string info nio receiver nioreceiver running atomic reference atomicreference selector selector atomic reference atomicreference selector server socket channel serversocketchannel server channel serverchannel data gram channel datagramchannel data gram channel datagramchannel linked list linkedlist runnable events linked list linkedlist runnable nio receiver nioreceiver descriptive implementation version number format code description version code string get info getinfo info object get int erest ops mutex getinterestopsmutex int erest ops mutex interestopsmutex override stop list ening stoplistening start cluster receiver io exception ioexception org apache catalina tribes channel receiver channelreceiver start override start io exception ioexception start set pool setpool rx task pool rxtaskpool get max threads getmaxthreads get min threads getminthreads exception log fatal thread pool threadpool init ilzed initilzed listener started io exception ioexception io exception ioexception io exception ioexception get message getmessage get bind getbind bind string channel name channelname get channel getchannel group channel groupchannel group channel groupchannel get channel getchannel get name getname channel name channelname group channel groupchannel get channel getchannel get name getname thread thread nio receiver nioreceiver channel name channelname set daemon setdaemon start exception log fatal unable start cluster receiver io exception ioexception io exception ioexception io exception ioexception get message getmessage override abstract rx task abstractrxtask create rx task createrxtask nio replication task nioreplicationtask thread nio replication task nioreplicationtask thread set use buffer pool setusebufferpool get use buffer pool getusebufferpool thread set rx buf size setrxbufsize get rx buf size getrxbufsize thread set options setoptions get worker thread options getworkerthreadoptions thread bind io exception ioexception all ocate allocate unbound server socket channel server channel serverchannel server socket channel serversocketchannel open server socket serversocket bind server socket serversocket server socket serversocket server channel serverchannel socket create selector selector selector open isn thread safe http bugs sun view bug bug fixed selector selector open port server channel listen server socket serversocket bind inet socket address inetsocketaddress get bind getbind get tcp listen port gettcplistenport bind server socket serversocket get port getport get auto bind getautobind blocking mode list ening listening socket server channel serverchannel configure blocking configureblocking register server socket channel serversocketchannel selector server channel serverchannel register selector selection key selectionkey accept data gram datagram channel get udp port getudpport data gram channel datagramchannel data gram channel datagramchannel open configure data gra channel configuredatagrachannel bind add ress address avoid security checks bind udp bindudp data gram channel datagramchannel socket get udp port getudpport get auto bind getautobind configure data gra channel configuredatagrachannel io exception ioexception data gram channel datagramchannel configure blocking configureblocking data gram channel datagramchannel socket set send buffer size setsendbuffersize get udp tx buf size getudptxbufsize data gram channel datagramchannel socket set receive buffer size setreceivebuffersize get udp rx buf size getudprxbufsize data gram channel datagramchannel socket set reuse address setreuseaddress get so reuse address getsoreuseaddress data gram channel datagramchannel socket set so timeout setsotimeout get timeout gettimeout data gram channel datagramchannel socket set traffic class settrafficclass get so traffic class getsotrafficclass add event addevent runnable event selector selector selector selector events events add event log is trace enabled istraceenabled log trace adding event selector event is list ening islistening selector wakeup events events size events runnable events size events remove first removefirst log is trace enabled istraceenabled log trace processing event selector exception log error events clear cancelled key cancelledkey selection key selectionkey key object reader objectreader reader object reader objectreader key attachment reader reader set cancelled setcancelled reader finish key cancel key attach key channel socket channel socketchannel socket channel socketchannel key channel socket close io exception ioexception log is debug enabled isdebugenabled log debug key channel data gram channel datagramchannel data gram channel datagramchannel key channel socket close exception log is debug enabled isdebugenabled log debug key channel close io exception ioexception log is debug enabled isdebugenabled log debug last check lastcheck system current time millis currenttimemillis socket time outs sockettimeouts system current time millis currenttimemillis last check lastcheck get selector timeout getselectortimeout timeout selector tmp sel tmpsel selector selection key selectionkey is list ening islistening tmp sel tmpsel tmp sel tmpsel iterator selection key selectionkey iter iterator iter has next hasnext selection key selectionkey key iter key int erest ops interestops check didn object reader objectreader object reader objectreader key attachment delta get last access getlastaccess delta get timeout gettimeout is accessed isaccessed log is warn enabled iswarnenabled log warn channel key registered int erest interest ops get timeout gettimeout cancelled is cancelled iscancelled key access java sql timestamp get last access getlastaccess threads perform thread dump set last access setlastaccess key int erest ops interestops selection key selectionkey read cancelled key cancelledkey key cancelled key exception cancelledkeyexception ckx cancelled key cancelledkey key last check lastcheck system current time millis currenttimemillis data channel store array send cluster io exception ioexception java nio channels closed channel exception closedchannelexception listen exception do listen dolisten log warn server socket channel serversocketchannel started set listen setlisten avoid npe s npes selector selector selector selector selector data gram channel datagramchannel max size data gram datagram packet object reader objectreader oreader object reader objectreader max udp size register channel registerchannel selector data gram channel datagramchannel selection key selectionkey read oreader do listen dolisten selector selected ready channels events socket time outs sockettimeouts selector select get selector timeout getselectortimeout iterator selected iterator selection key selectionkey selector selected keys selectedkeys iterator key selected has next hasnext selection key selectionkey key connection coming key is accept able isacceptable server socket channel serversocketchannel server server socket channel serversocketchannel key channel socket channel socketchannel channel server accept channel socket set receive buffer size setreceivebuffersize get tx buf size gettxbufsize channel socket set send buffer size setsendbuffersize get tx buf size gettxbufsize channel socket set tcp no delay settcpnodelay get tcp no delay gettcpnodelay channel socket set keep alive setkeepalive get so keep alive getsokeepalive channel socket setoobinline get oo inline getoobinline channel socket set reuse address setreuseaddress get so reuse address getsoreuseaddress channel socket set so linger setsolinger get so linger on getsolingeron get so linger time getsolingertime channel socket set so timeout setsotimeout get timeout gettimeout object attach object reader objectreader channel register channel registerchannel selector channel selection key selectionkey read attach data read channel key is readable isreadable read data from socket readdatafromsocket key key int erest ops interestops key int erest ops interestops selection key selectionkey write remove key selected handled remove java nio channels closed selector exception closedselectorexception cse java nio channels cancelled key exception cancelledkeyexception log warn replication client disconnected error polling key ignoring client throwable thread death threaddeath thread death threaddeath virtual machine error virtualmachineerror virtual machine error virtualmachineerror log error unable process request nio receiver nioreceiver server channel serverchannel close data gram channel datagramchannel data gram channel datagramchannel close exception iox log is debug enabled isdebugenabled log debug unable close data gram datagram channel iox data gram channel datagramchannel close selector closeselector close selector org apache catalina tribes transport receiver base receiverbase stop list ening stoplistening set listen setlisten selector selector selector selector unlock thread blocked waiting input selector wakeup wait receiver thread finish count running count thread sleep count running log warn get string getstring nio receiver nioreceiver thread running threadrunning close selector closeselector exception log error unable close cluster receiver selector selector close selector closeselector io exception ioexception selector selector selector get and set getandset selector iterator selection key selectionkey selector iterator key selected has next hasnext selection key selectionkey key key channel close key attach key cancel io exception ioexception ignore log is warn enabled iswarnenabled log warn unable cleanup selector close ignore closed selector exception closedselectorexception ignore selector close register channel selector operations int erest interest register channel registerchannel selector selector select able channel selectablechannel channel ops object attach exception happen channel channel blocking channel configure blocking configureblocking register selector channel register selector ops attach start thread listen override running listen exception log error unable replication listener running sample data handler method channel data ready read param key selection key selectionkey object channel determined selector ready reading channel returns eof condition closed automatically invalid ates invalidates key selector register channel select call read data from socket readdatafromsocket selection key selectionkey key exception nio replication task nioreplicationtask task nio replication task nioreplicationtask get task pool gettaskpool get rx task getrxtask task wait log is debug enabled isdebugenabled log debug tcp replication thread tcpreplicationthread invoking wakes worker thread returns add task thread pool task service channel servicechannel key get executor getexecutor execute task