licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket server java util array list arraylist java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util javax websocket deployment exception deploymentexception org apache tomcat util res string manager stringmanager extra cts extracts path parameters uri s uris create web socket connections uri template defined endpoint uri template uritemplate string manager stringmanager string manager stringmanager get manager getmanager constants string normalized list segment segments array list arraylist segment has parameters hasparameters uri template uritemplate string path deployment exception deploymentexception path path length path starts with startswith deployment exception deploymentexception get string getstring uri template uritemplate invalid path invalidpath path string builder stringbuilder normalized string builder stringbuilder path length string param names paramnames hash set hashset string include empty segments string segments path split param count paramcount segment count segmentcount segments length string segment segments segment length segments length param count paramcount matches parameter ise d parameterised templates invalid illegal argument exception illegalargumentexception get string getstring uri template uritemplate empty segment emptysegment path normalized append segment starts with startswith segment ends with endswith segment count segmentcount segment segment substring segment length normalized append normalized append param count paramcount normalized append param names paramnames add segment illegal argument exception illegalargumentexception get string getstring uri template uritemplate duplicate parameter duplicateparameter segment segment segment illegal argument exception illegalargumentexception get string getstring uri template uritemplate invalid segment invalidsegment segment path normalized append segment segments add segment segment segment count segmentcount normalized normalized to string tostring has parameters hasparameters param count paramcount map string string match uri template uritemplate candidate map string string result hash map hashmap string string happen safety candidate get segment count getsegmentcount get segment count getsegmentcount iterator segment candidate segments candidatesegments candidate get segments getsegments iterator iterator segment target segments targetsegments segments iterator candidate segments candidatesegments has next hasnext segment candidate segment candidatesegment candidate segments candidatesegments segment target segment targetsegment target segments targetsegments target segment targetsegment get parameter index getparameterindex parameter values match target segment targetsegment get value getvalue equals candidate segment candidatesegment get value getvalue match parameter result target segment targetsegment get value getvalue candidate segment candidatesegment get value getvalue result has parameters hasparameters has parameters hasparameters get segment count getsegmentcount segments size string get normal ized path getnormalizedpath normalized list segment get segments getsegments segments segment parameter index parameterindex string segment parameter index parameterindex string parameter index parameterindex parameter index parameterindex get parameter index getparameterindex parameter index parameterindex string get value getvalue