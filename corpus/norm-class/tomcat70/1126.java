licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina ssi java i o exception ioexception java output stream writer outputstreamwriter java print writer printwriter java text date format dateformat java text simple date format simpledateformat java util locale java util time zone timezone javax servlet servlet context servletcontext javax servlet servlet output stream servletoutputstream javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax servlet http http servlet response wrapper httpservletresponsewrapper org apache tomcat util exception utils exceptionutils http servlet response wrapper httpservletresponsewrapper code ssi servlet external resolver ssiservletexternalresolver code author bip the lin thelin author david becker response include wrapper responseincludewrapper http servlet response wrapper httpservletresponsewrapper names headers capture string content type content type string modified modified date format dateformat rfc format string rfc pattern eee mmm yyyy last modified lastmodified string content type contenttype servlet output stream servletoutputstream servlet output stream servletoutputstream capture servlet output stream captureservletoutputstream servlet output stream servletoutputstream servlet output stream servletoutputstream print writer printwriter print writer printwriter servlet context servletcontext context http servlet request httpservletrequest request rfc format simple date format simpledateformat rfc pattern locale rfc format set time zone settimezone time zone timezone get time zone gettimezone gmt initialize wrapper current http servlet response httpservletresponse servlet output stream servletoutputstream param context servlet context param request http servlet response httpservletresponse param response response param capture servlet output stream captureservletoutputstream servlet output stream servletoutputstream response include wrapper responseincludewrapper servlet context servletcontext context http servlet request httpservletrequest request http servlet response httpservletresponse response servlet output stream servletoutputstream capture servlet output stream captureservletoutputstream response context context request request capture servlet output stream captureservletoutputstream capture servlet output stream captureservletoutputstream flush servlet output stream servletoutputstream print writer printwriter called request dispatcher requestdispatcher include assume included servlet flushed stream flush output stream or writer flushoutputstreamorwriter i o exception ioexception servlet output stream servletoutputstream servlet output stream servletoutputstream flush print writer printwriter print writer printwriter flush print writer printwriter exception output stream outputstream returned print writer printwriter object exception java i o exception ioexception outputs tream outputstream called override print writer printwriter get writer getwriter java i o exception ioexception servlet output stream servletoutputstream print writer printwriter set character encoding setcharacterencoding get character encoding getcharacterencoding print writer printwriter print writer printwriter output stream writer outputstreamwriter capture servlet output stream captureservletoutputstream get character encoding getcharacterencoding print writer printwriter illegal state exception illegalstateexception output stream outputstream exception print writer printwriter returned output stream outputstream object exception java i o exception ioexception print writer printwriter called override servlet output stream servletoutputstream get output stream getoutputstream java i o exception ioexception print writer printwriter servlet output stream servletoutputstream servlet output stream servletoutputstream capture servlet output stream captureservletoutputstream servlet output stream servletoutputstream illegal state exception illegalstateexception returns code modified code header field result number milliseconds january gmt resource referenced code response include wrapper responseincludewrapper code modified get last modified getlastmodified last modified lastmodified last modified lastmodified sets code modified code header field param last modified lastmodified number milliseconds january gmt set last modified setlastmodified last modified lastmodified last modified lastmodified last modified lastmodified http servlet response httpservletresponse get response getresponse set date header setdateheader modified last modified lastmodified returns code content type code header field content type resource referenced code response include wrapper responseincludewrapper code code code override string get content type getcontenttype content type contenttype string url request getrequesturi string mime context get mime type getmimetype url mime set content type setcontenttype mime safe set content type setcontenttype application octet stream content type contenttype sets code content type code header field param mime mime type override set content type setcontenttype string mime content type contenttype mime content type contenttype get response getresponse set content type setcontenttype content type contenttype override add date header adddateheader string add date header adddateheader string lname to lower case tolowercase locale english lname equals modified last modified lastmodified override add header addheader string string add header addheader string lname to lower case tolowercase locale english lname equals modified rfc format last modified lastmodified rfc format parse get time gettime throwable ignore exception utils exceptionutils handle throwable handlethrowable ignore lname equals content type content type contenttype override set date header setdateheader string set date header setdateheader string lname to lower case tolowercase locale english lname equals modified last modified lastmodified override set header setheader string string set header setheader string lname to lower case tolowercase locale english lname equals modified rfc format last modified lastmodified rfc format parse get time gettime throwable ignore exception utils exceptionutils handle throwable handlethrowable ignore lname equals content type content type contenttype