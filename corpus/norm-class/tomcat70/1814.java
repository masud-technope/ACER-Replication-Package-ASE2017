licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache coyote ajp org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util buf byte chunk bytechunk org apache tomcat util buf char chunk charchunk org apache tomcat util buf hex utils hexutils org apache tomcat util buf message bytes messagebytes org apache tomcat util res string manager stringmanager single packet communication web server container designed reused times creation garbage under stands understands format data types pack ets packets conf usingly confusingly incoming out going outgoing pack ets packets author henri gomez author dan milstein author keith wannamaker author kevin seguin author costin manolache ajp message ajpmessage log log log factory logfactory get log getlog ajp message ajpmessage string manager string manager stringmanager string manager stringmanager get manager getmanager constants ajp message ajpmessage packet size packetsize buf packet size packetsize instance variables fixed size buffer buf current read write position buffer pos depending packet read write read length payload excluding header write length packet counting header len methods prepare packet accumulating message container web server write position header leave length unwritten unknown reset len pos packet web server finish process accumulating data write length data payload header len pos d len dlen len buf buf buf d len dlen xff buf d len dlen xff underlying buffer get buffer getbuffer buf current message length read length payload excluding header write length packet counting header get len getlen len add int eger integer bytes message append int appendint val buf pos val xff buf pos val xff append message append byte appendbyte val buf pos val write message bytes messagebytes current write position message bytes messagebytes encoded string length append bytes appendbytes message bytes messagebytes log error get string getstring ajpmessage null pointer exception nullpointerexception append int appendint append byte appendbyte get type gettype message bytes messagebytes bytes byte chunk bytechunk get byte chunk getbytechunk append byte chunk appendbytechunk get type gettype message bytes messagebytes chars char chunk charchunk get char chunk getcharchunk append char chunk appendcharchunk append string appendstring to string tostring write byte chunk bytechunk current write position byte chunk bytechunk encoded string length append byte chunk appendbytechunk byte chunk bytechunk log error get string getstring ajpmessage null pointer exception nullpointerexception append int appendint append byte appendbyte append bytes appendbytes get bytes getbytes get start getstart get length getlength write char chunk charchunk current write position char chunk charchunk encoded string length append char chunk appendcharchunk char chunk charchunk log error get string getstring ajpmessage null pointer exception nullpointerexception append int appendint append byte appendbyte start get start getstart get end getend append int appendint start cbuf get buffer getbuffer start cbuf str eams streams properly encode output append byte appendbyte append byte appendbyte write string current write position strings encoded length bytes string terminating included encoded length terminator convenience code saves copying string encoded string length append string appendstring string str str log error get string getstring ajpmessage null pointer exception nullpointerexception append int appendint append byte appendbyte len str length append int appendint len len str char at charat str eams streams properly encode output append byte appendbyte append byte appendbyte copy chunk bytes packet starting current write position chunk bytes encoded length bytes data terminating included encoded length param array copy bytes param offset array start copying param num bytes numbytes number bytes copy append bytes appendbytes num bytes numbytes pos num bytes numbytes buf length log error get string getstring ajpmessage overflow num bytes numbytes pos array index out of bounds exception arrayindexoutofboundsexception log is debug enabled isdebugenabled dump overflow co bytes cobytes append int appendint num bytes numbytes system arraycopy buf pos num bytes numbytes pos num bytes numbytes append byte appendbyte read int eger integer packet advance read position int egers integers encoded unsigned bytes high order endian order get int getint buf pos xff buf pos xff validate pos validatepos pos peek int peekint validate pos validatepos pos buf pos xff buf pos xff get byte getbyte res buf pos validate pos validatepos pos res get bytes getbytes message bytes messagebytes do get bytes dogetbytes get body bytes getbodybytes message bytes messagebytes do get bytes dogetbytes do get bytes dogetbytes message bytes messagebytes terminated length get int getint length xffff length recycle terminated validate pos validatepos pos length validate pos validatepos pos length set bytes setbytes buf pos length valid get char chunk getcharchunk recycle pos length terminated skip terminating pos read bits int eger integer packet advance read position int egers integers encoded unsigned bytes high order endian order get long int getlongint swap java order buf pos xff buf pos xff buf pos xff buf pos xff validate pos validatepos pos get header length getheaderlength constants size get packet size getpacketsize buf length deprecated process header processheader process header processheader process header processheader to container tocontainer pos mark get int getint len get int getint verify message signature to container tocontainer mark to container tocontainer mark log error get string getstring ajpmessage invalid mark log is debug enabled isdebugenabled dump log is debug enabled isdebugenabled log debug received len buf len dump contents message prefixed string dump string msg log is debug enabled isdebugenabled log debug msg hex utils hexutils to hex string tohexstring buf pos len max pos len pos max len max max log is debug enabled isdebugenabled max log debug hex line hexline buf len validate pos validatepos pos to test postotest pos to test postotest len read data ajp message array index out of bounds exception arrayindexoutofboundsexception get string getstring ajp message ajpmessage invalid pos invalidpos integer value of valueof pos to test postotest methods string hex line hexline buf start len string builder stringbuilder string builder stringbuilder start start len append hex buf append append start start len character isisocontrol buf append character value of valueof buf append to string tostring string hex string integer to hex string tohexstring length substring length