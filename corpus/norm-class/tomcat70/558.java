licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util http file upload fileupload java unsupported encoding exception unsupportedencodingexception java util hash map hashmap java util locale java util map org apache tomcat util http file upload fileupload util mime mime utility mimeutility simple parser intended parse sequences pairs parameter values expected enclosed quotes unsafe characters characters separators parameter values optional code param param param code parameter parser parameterparser string parsed chars current position string pos maximum position string len start token token names stored map converted lower case names lowercasenames parameter parser parameterparser constructor parameter parser parameterparser characters left parse code unparsed characters code has char haschar pos len helper method process parsed token method removes leading trailing bla nks blanks enclosing quotation marks param quoted code quotation marks expected code token string get token gettoken quoted trim leading white spaces character is whitespace iswhitespace chars trim trailing white spaces character is whitespace iswhitespace chars str ip strip quotation marks quoted chars chars string result result string chars result tests character array characters param character test presense array characters param char ray charray array characters test code character array characters code is one of isoneof char ray charray result element char ray charray element result result parses token terminators encountered param terminators array terminating characters characters encountered sig nify signify token token string parse token parsetoken terminators pos pos has char haschar chars pos is one of isoneof terminators pos get token gettoken parses token terminators encountered quotation marks param terminators array terminating characters characters encountered quotation marks sig nify signify token token string parse quoted token parsequotedtoken terminators pos pos quoted char escaped charescaped has char haschar chars pos quoted is one of isoneof terminators char escaped charescaped quoted quoted char escaped charescaped char escaped charescaped pos get token gettoken is lower case names islowercasenames lower case names lowercasenames set lower case names setlowercasenames lower case names lowercasenames map string string parse string str separators separators separators length hash map hashmap string string separator separators str idx str length separator separators tmp str index of indexof separator tmp tmp idx idx tmp separator separator parse str separator map string string parse string str separator str hash map hashmap string string parse str to char array tochararray separator map string string parse char array chararray separator char array chararray hash map hashmap string string parse char array chararray char array chararray length separator map string string parse char array chararray offset length separator char array chararray hash map hashmap string string hash map hashmap string string params hash map hashmap string string chars char array chararray pos offset len length string param name paramname string param value paramvalue has char haschar param name paramname parse token parsetoken separator param value paramvalue has char haschar char array chararray pos pos param value paramvalue parse quoted token parsequotedtoken separator param value paramvalue param value paramvalue mime utility mimeutility decode text decodetext param value paramvalue unsupported encoding exception unsupportedencodingexception has char haschar char array chararray pos separator skip separator pos param name paramname param name paramname length lower case names lowercasenames param name paramname param name paramname to lower case tolowercase locale english params param name paramname param value paramvalue params