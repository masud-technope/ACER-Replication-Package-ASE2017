licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache jasper runtime java file java io exception ioexception javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax servlet jsp jsp factory jspfactory javax servlet jsp jsp writer jspwriter javax servlet jsp page context pagecontext org junit org junit test org apache catalina context org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest org apache jasper constants org apache tomcat util buf byte chunk bytechunk test page context impl testpagecontextimpl tomcat base test tomcatbasetest test test do for ward testdoforward exception tomcat tomcat get tomcat instance gettomcatinstance file app dir appdir file test webapp tomcat add webapp addwebapp test app dir appdir get absolute path getabsolutepath tomcat start byte chunk bytechunk res byte chunk bytechunk get url geturl http localhost get port getport test bug nnnn bug jsp res assert equals assertequals http servlet response httpservletresponse string body res to string tostring assert true asserttrue body assert false assertfalse body fail test test default buffer size testdefaultbuffersize exception tomcat tomcat get tomcat instance gettomcatinstance file app dir appdir file test webapp app dir relative server context ctx tomcat add webapp addwebapp test app dir appdir get absolute path getabsolutepath add servlet tomcat add servlet addservlet ctx bug bug ctx add servlet mapping addservletmapping bug bug tomcat start byte chunk bytechunk res get url geturl http localhost get port getport test bug string result res to string tostring assert true asserttrue result test test include throws exception testincludethrowsioexception exception tomcat tomcat get tomcat instance gettomcatinstance file app dir appdir file test webapp tomcat add webapp addwebapp test app dir appdir get absolute path getabsolutepath tomcat start byte chunk bytechunk res byte chunk bytechunk get url geturl http localhost get port getport test jsp page context pagecontext jsp res assert equals assertequals http servlet response httpservletresponse string body res to string tostring assert true asserttrue body assert false assertfalse body failed res byte chunk bytechunk get url geturl http localhost get port getport test jsp page context pagecontext jsp flush res assert equals assertequals http servlet response httpservletresponse body res to string tostring assert true asserttrue body flush assert true asserttrue body assert false assertfalse body failed bug http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception page context pagecontext page context pagecontext jsp factory jspfactory get default factory getdefaultfactory get page context getpagecontext req resp jsp writer jspwriter buffer jsp writer jspwriter page context pagecontext get out getout constants buffer size get buffer size getbuffersize resp get writer getwriter println resp get writer getwriter println fail