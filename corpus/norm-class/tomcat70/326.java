licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina filters java io exception ioexception java nio charset charset javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet http http servlet response httpservletresponse javax servlet http http servlet response wrapper httpservletresponsewrapper org apache juli logging log org apache juli logging log factory logfactory filter explicitly sets character media subtypes text type iso user defined character rfc explicitly browsers iso character defined media subtype text browsers attempt auto detect character exp loited exploited att acker attacker perform xss att ack attack int ernet internet explorer behaviour browsers option enable filter prevents att ack attack explicitly setting character character explicitly overridden user deserve browser adhere explicitly character prev enting preventing xss att ack attack add default charset filter adddefaultcharsetfilter filter base filterbase log log log factory logfactory get log getlog add default charset filter adddefaultcharsetfilter string encoding iso string encoding set encoding setencoding string encoding encoding encoding override log get logger getlogger log override init filter config filterconfig filter config filterconfig servlet exception servletexception init filter config filterconfig encoding encoding length encoding equals ignore case equalsignorecase encoding encoding encoding equals ignore case equalsignorecase system encoding charset default charset defaultcharset charset is supported issupported encoding illegal argument exception illegalargumentexception get string getstring add default charset adddefaultcharset unsupported charset unsupportedcharset encoding override do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain io exception ioexception servlet exception servletexception wrap response response http servlet response httpservletresponse response wrapper responsewrapper wrapped response wrapper responsewrapper http servlet response httpservletresponse response encoding chain do filter dofilter request wrapped chain do filter dofilter request response wrapper adds character text media types character response wrapper responsewrapper http servlet response wrapper httpservletresponsewrapper string encoding response wrapper responsewrapper http servlet response httpservletresponse response string encoding response encoding encoding override set content type setcontenttype string starts with startswith text index of indexof charset set content type setcontenttype charset encoding set content type setcontenttype encoding get character encoding getcharacterencoding set content type setcontenttype override set character encoding setcharacterencoding string charset set character encoding setcharacterencoding charset encoding charset