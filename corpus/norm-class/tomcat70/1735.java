licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache jasper compiler java byte array input stream bytearrayinputstream java char array writer chararraywriter java input stream inputstream java nio charset charset java util list iterator listiterator javax servlet jsp tagext page data pagedata org apache jasper jasper exception jasperexception org xml sax attributes org xml sax helpers attributes impl attributesimpl implementation javax servlet jsp tagext page data pagedata builds xml view xml view built passes pass first pass visitor firstpassvisitor collects attributes top level jsp root jsp root elements included adds jsp root element xml view add ition addition taglib directives converted xmlns attributes jsp root element xml view pass ignores nodes jsp root jsproot taglib directive taglibdirective pass second pass visitor secondpassvisitor produces xml view combined jsp root attributes determined pass remaining nodes pass ignores jsp root jsproot taglib directive taglibdirective nodes author jan luehe page data impl pagedataimpl page data pagedata tag constants tagconstants string jsp version string cdata start cdata string cdata charset charset utf charset for name forname utf string buffer build xml view string builder stringbuilder buf constructor param nodes generate xml view page data impl pagedataimpl node nodes compiler compiler jasper exception jasperexception pass first pass visitor firstpassvisitor first pass firstpass first pass visitor firstpassvisitor get root getroot compiler get page info getpageinfo visit first pass firstpass pass buf string builder stringbuilder second pass visitor secondpassvisitor second pass secondpass second pass visitor secondpassvisitor get root getroot buf compiler first pass firstpass get jsp id prefix getjspidprefix visit second pass secondpass returns input stream xml view input stream xml view override input stream inputstream get input stream getinputstream byte array input stream bytearrayinputstream buf to string tostring get bytes getbytes charset utf pass visitor jsp root jsproot nodes representing jsp root elements tab lib directive tablibdirective nodes ignoring nodes purpose visitor collect attributes top level jsp root jsp root elements included add jsp root element xml view add ition addition visitor converts taglib directives xmlns attributes adds jsp root element xml view first pass visitor firstpassvisitor node visitor tag constants tagconstants node root root attributes impl attributesimpl root attrs rootattrs page info pageinfo page info pageinfo prefix attribute string jsp id prefix jspidprefix constructor first pass visitor firstpassvisitor node root root page info pageinfo page info pageinfo root root page info pageinfo page info pageinfo root attrs rootattrs attributes impl attributesimpl root attrs rootattrs add attribute addattribute version cdata jsp version jsp id prefix jspidprefix jsp override visit node root jasper exception jasperexception visit body visitbody root top level add xmlns jsp http java sun jsp attribute jsp uri equals root attrs rootattrs get value getvalue xmlns jsp root attrs rootattrs add attribute addattribute xmlns jsp cdata jsp uri page info pageinfo is jsp prefix hijacked isjspprefixhijacked jsp prefix hijacked bound namespace jsp namespace adding attribute element jsp prefix create prefix unique translation unit attribute bind jsp namespace jsp id prefix jspidprefix jsp page info pageinfo contains prefix containsprefix jsp id prefix jspidprefix jsp id prefix jspidprefix jsp root attrs rootattrs add attribute addattribute xmlns jsp id prefix jspidprefix cdata jsp uri root set attributes setattributes root attrs rootattrs override visit node jsp root jsproot jasper exception jasperexception add attributes addattributes get taglib attributes gettaglibattributes add attributes addattributes get non taglib xmlns attributes getnontaglibxmlnsattributes add attributes addattributes get attributes getattributes visit body visitbody converts taglib directive xmlns attribute jsp root element override visit node taglib directive taglibdirective jasper exception jasperexception attributes attrs get attributes getattributes attrs string q name qname xmlns attrs get value getvalue prefix java docs javadocs org xml sax helpers attributes impl attributesimpl add attribute addattribute method check attribute contained list application resp onsibility responsibility root attrs rootattrs get index getindex q name qname string location attrs get value getvalue uri location location starts with startswith location urn jsp tld jsptld location root attrs rootattrs add attribute addattribute q name qname cdata location location attrs get value getvalue tag dir tagdir root attrs rootattrs add attribute addattribute q name qname cdata urn jsp tag dir jsptagdir location string get jsp id prefix getjspidprefix jsp id prefix jspidprefix add attributes addattributes attributes attrs attrs len attrs get length getlength len string q name qname attrs getqname version equals q name qname bug zilla bugzilla http apache org bug zilla bugzilla bug cgi root attrs rootattrs get index getindex q name qname root attrs rootattrs add attribute addattribute attrs geturi attrs get local name getlocalname q name qname attrs get type gettype attrs get value getvalue pass visitor responsible pro ducing producing xml view assigning element unique jsp attribute second pass visitor secondpassvisitor node visitor tag constants tagconstants node root root string builder stringbuilder buf compiler compiler string jsp id prefix jspidprefix reset default s resetdefaultns current jsp attribute jsp id jspid constructor second pass visitor secondpassvisitor node root root string builder stringbuilder buf compiler compiler string jsp id prefix jspidprefix root root buf buf compiler compiler jsp id prefix jspidprefix jsp id prefix jspidprefix visits root node override visit node root jasper exception jasperexception root top level append xml prolog appendxmlprolog append tag appendtag resetdefaultnssave reset default s resetdefaultns is xml syntax isxmlsyntax reset default s resetdefaultns visit body visitbody reset default s resetdefaultns resetdefaultnssave visits jsp root element jsp xml syntax nested jsp root elements included include directive override visit node jsp root jsproot jasper exception jasperexception visit body visitbody override visit node page directive pagedirective jasper exception jasperexception append page directive appendpagedirective override visit node include directive includedirective jasper exception jasperexception expand place visit body visitbody override visit node comment jasper exception jasperexception comments xml view override visit node declaration jasper exception jasperexception append tag appendtag override visit node expression jasper exception jasperexception append tag appendtag override visit node script let scriptlet jasper exception jasperexception append tag appendtag override visit node jsp element jspelement jasper exception jasperexception append tag appendtag override visit node el expression elexpression jasper exception jasperexception get root getroot is xml syntax isxmlsyntax buf append append jsp text action buf append buf append jsp id prefix jspidprefix buf append buf append jsp id jspid append buf append buf append jsp util jsputil escape xml escapexml get text gettext buf append get root getroot is xml syntax isxmlsyntax buf append jsp text action buf append override visit node include action includeaction jasper exception jasperexception append tag appendtag override visit node for ward action forwardaction jasper exception jasperexception append tag appendtag override visit node get property getproperty jasper exception jasperexception append tag appendtag override visit node set property setproperty jasper exception jasperexception append tag appendtag override visit node param action paramaction jasper exception jasperexception append tag appendtag override visit node params action paramsaction jasper exception jasperexception append tag appendtag override visit node fall back action fallbackaction jasper exception jasperexception append tag appendtag override visit node use bean usebean jasper exception jasperexception append tag appendtag override visit node plug in plugin jasper exception jasperexception append tag appendtag override visit node name d attribute namedattribute jasper exception jasperexception append tag appendtag override visit node jsp body jspbody jasper exception jasperexception append tag appendtag override visit node custom tag customtag jasper exception jasperexception resetdefaultnssave reset default s resetdefaultns append tag appendtag reset default s resetdefaultns reset default s resetdefaultns resetdefaultnssave override visit node uninterpreted tag uninterpretedtag jasper exception jasperexception resetdefaultnssave reset default s resetdefaultns append tag appendtag reset default s resetdefaultns reset default s resetdefaultns resetdefaultnssave override visit node jsp text jsptext jasper exception jasperexception append tag appendtag override visit node do body action dobodyaction jasper exception jasperexception append tag appendtag override visit node invoke action invokeaction jasper exception jasperexception append tag appendtag override visit node tag directive tagdirective jasper exception jasperexception append tag directive appendtagdirective override visit node attribute directive attributedirective jasper exception jasperexception append tag appendtag override visit node variable directive variabledirective jasper exception jasperexception append tag appendtag override visit node template text templatetext jasper exception jasperexception template text jsp written jsp syntax create jsp text element jsp append text appendtext get text gettext get root getroot is xml syntax isxmlsyntax appends tag including body xml view append tag appendtag node jasper exception jasperexception append tag appendtag appends tag including body xml view option ally optionally reset namespace append tag appendtag node add default s adddefaultns jasper exception jasperexception node nodes body get body getbody string text get text gettext buf append append getqname buf append print attributes printattributes add default s adddefaultns buf append append jsp id prefix jspidprefix append append buf append jsp id jspid append root action equals get local name getlocalname body text buf append root action equals get local name getlocalname compiler get compilation context getcompilationcontext is tag file istagfile append tag directive appendtagdirective append page directive appendpagedirective body body visit append text appendtext text buf append getqname buf append appends directive attributes xml view attribute directive attribute allowed multiple times document xml single attributes values multiple attributes combined separated comma directive content type contenttype page encoding pageencoding attributes ignore appended directive attributes append page directive appendpagedirective node page directive pagedirective append attributes attrs get attributes getattributes len attrs attrs get length getlength len attrs len suppress warnings suppresswarnings string attr name attrname attrs getqname page encoding pageencoding equals attr name attrname content type contenttype equals attr name attrname append append buf append append getqname buf append append jsp buf append append jsp id prefix jspidprefix append append buf append jsp id jspid append append remaining attributes len attrs len suppress warnings suppresswarnings string attr name attrname attrs getqname equals attr name attrname content type contenttype equals attr name attrname page encoding pageencoding equals attr name attrname directive attribute considered page encoding pageencoding content type contenttype attributes appended directive attributes string attrs get value getvalue buf append append attr name attrname append buf append jsp util jsputil get expr in xml getexprinxml append get imports getimports size concatenate names imported classes packages list iterator listiterator string iter get imports getimports list iterator listiterator iter has next hasnext buf append buf append buf append jsp util jsputil get expr in xml getexprinxml iter buf append buf append appends directive page encoding pageencoding content type contenttype attributes page encoding pageencoding attribute hard code d coded utf content type contenttype attribute identical container pass servlet response servletresponse set content type setcontenttype derived page info pageinfo append page directive appendpagedirective buf append append jsp directive action buf append append jsp buf append append jsp id prefix jspidprefix append append buf append jsp id jspid append buf append append page encoding pageencoding append utf buf append append content type contenttype append buf append compiler get page info getpageinfo get content type getcontenttype append buf append appends tag directive attributes xml view tag directive page encoding pageencoding attributes ignore appended tag directive attributes append tag directive appendtagdirective node tag directive tagdirective jasper exception jasperexception append attributes attrs get attributes getattributes len attrs attrs get length getlength len attrs len suppress warnings suppresswarnings string attr name attrname attrs getqname page encoding pageencoding equals attr name attrname append append append tag appendtag appends tag directive single page encoding pageencoding attribute hard code d coded utf append tag directive appendtagdirective buf append append jsp tag directive action buf append append jsp buf append append jsp id prefix jspidprefix append append buf append jsp id jspid append buf append append page encoding pageencoding append utf buf append append text appendtext string text create jsp text element createjsptextelement create jsp text element createjsptextelement buf append append jsp text action buf append append jsp buf append append jsp id prefix jspidprefix append append buf append jsp id jspid append buf append appendcdata text buf append jsp text action buf append appendcdata text appends text cdata xml view text marked cdata appendcdata string text buf append cdata start buf append escapecdata text buf append cdata escapes occurrences replacing text included cdata string escapecdata string text text len text length char array writer chararraywriter result char array writer chararraywriter len len len text char at charat text char at charat text char at charat match result write result write result write result write result write result write result write text char at charat result to string tostring appends attributes node xml view print attributes printattributes node add default s adddefaultns append xmlns attributes represent tag libraries attributes attrs get taglib attributes gettaglibattributes len attrs attrs get length getlength len attrs len suppress warnings suppresswarnings string attrs getqname string attrs get value getvalue buf append append append append append append xmlns attributes represent tag libraries attrs get non taglib xmlns attributes getnontaglibxmlnsattributes len attrs attrs get length getlength defaultnsseen len attrs len suppress warnings suppresswarnings string attrs getqname string attrs get value getvalue buf append append append append append defaultnsseen xmlns equals add default s adddefaultns defaultnsseen buf append xmlns reset default s resetdefaultns append attributes attrs get attributes getattributes len attrs attrs get length getlength len attrs len suppress warnings suppresswarnings string attrs getqname string attrs get value getvalue buf append append append buf append jsp util jsputil get expr in xml getexprinxml append appends xml prolog encoding declaration append xml prolog appendxmlprolog buf append xml version encoding utf