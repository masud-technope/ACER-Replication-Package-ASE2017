licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina valves java io exception ioexception java writer java util scanner javax servlet request dispatcher requestdispatcher javax servlet servlet exception servletexception javax servlet http http servlet response httpservletresponse org apache catalina connector request org apache catalina connector response org apache catalina util request util requestutil org apache catalina util server info serverinfo org apache coyote action code actioncode org apache tomcat util exception utils exceptionutils org apache tomcat util res string manager stringmanager implementation valve out puts outputs html error valve attached host level work attached context html code cocoon project author remy maucherat author craig mc clanahan mcclanahan author href mailto nicolaken super eva supereva nicola ken bar ozzi barozzi a isa aisa author href mailto stefano apache org stefano mazzocchi author yoav shapira error report valve errorreportvalve valve base valvebase show report showreport show server info showserverinfo constructor error report valve errorreportvalve instance variables descriptive implementation string info org apache catalina valves error report valve errorreportvalve properties descriptive valve implementation override string get info getinfo info methods invoke valve sequence invoke returns check response status code greater equal uncaught exception thrown error handling triggered param request servlet request processed param response servlet response created exception io exception ioexception input output error occurs exception servlet exception servletexception servlet error occurs override invoke request request response response io exception ioexception servlet exception servletexception perform request get next getnext invoke request response response is committed iscommitted response set error reported seterrorreported flush data written client response flush buffer flushbuffer throwable exception utils exceptionutils handle throwable handlethrowable close signal client wrong response get coyote response getcoyoteresponse action action code actioncode close throwable throwable throwable request get attribute getattribute request dispatcher requestdispatcher error exception container thread fin ishes finishes process error request is async isasync request is async comp leting isasynccompleting throwable response is error iserror methods called response component throwable tomcat won components safe call point response committed response reset response send error senderror http servlet response httpservletresponse internal server error response send error senderror called execution reaches point suspended response reverse valve write response response set suspended setsuspended report request response throwable throwable exception utils exceptionutils handle throwable handlethrowable methods prints error report param request request processed param response response generated param throwable exception occurred wraps root exception report request request response response throwable throwable status code statuscode response get status getstatus error reported status code statuscode response get content written getcontentwritten response set error reported seterrorreported string message request util requestutil filter response get message getmessage message throwable string exception message exceptionmessage throwable get message getmessage exception message exceptionmessage exception message exceptionmessage length message request util requestutil filter scanner exception message exceptionmessage next line nextline message message report status code error message string report string manager stringmanager sm client smclient string manager stringmanager get manager getmanager constants request get locales getlocales response set locale setlocale sm client smclient get locale getlocale report sm client smclient get string getstring http status code statuscode throwable exception utils exceptionutils handle throwable handlethrowable report message length report sm client smclient get string getstring error report valve errorreportvalve no description nodescription string builder stringbuilder string builder stringbuilder append html head show server info showserverinfo show report showreport append title show server info showserverinfo append server info serverinfo get server info getserverinfo append append sm client smclient get string getstring error report valve errorreportvalve error report errorreport append title append style append org apache catalina util tomcatcss tomcat css append style append title append sm client smclient get string getstring error report valve errorreportvalve error report errorreport append title append head body append append sm client smclient get string getstring error report valve errorreportvalve status header statusheader string value of valueof status code statuscode message append show report showreport append size noshade noshade append type throwable append sm client smclient get string getstring error report valve errorreportvalve exception report exceptionreport append sm client smclient get string getstring error report valve errorreportvalve status report statusreport append append append sm client smclient get string getstring error report valve errorreportvalve message append append message append append append sm client smclient get string getstring error report valve errorreportvalve description append append report append throwable string stack trace stacktrace get partial servlet stack trace getpartialservletstacktrace throwable append append sm client smclient get string getstring error report valve errorreportvalve exception append pre append request util requestutil filter stack trace stacktrace append pre loops throwable root cause rootcause throwable get cause getcause root cause rootcause loops stack trace stacktrace get partial servlet stack trace getpartialservletstacktrace root cause rootcause append append sm client smclient get string getstring error report valve errorreportvalve root cause rootcause append pre append request util requestutil filter stack trace stacktrace append pre root heavily nested root cause rootcause root cause rootcause get cause getcause loops append append sm client smclient get string getstring error report valve errorreportvalve not e note append append sm client smclient get string getstring error report valve errorreportvalve root cause in logs rootcauseinlogs show server info showserverinfo server info serverinfo get server info getserverinfo append append size noshade noshade show server info showserverinfo append append server info serverinfo get server info getserverinfo append append body html response set content type setcontenttype text html response set character encoding setcharacterencoding utf throwable exception utils exceptionutils handle throwable handlethrowable container get logger getlogger is debug enabled isdebugenabled container get logger getlogger debug status set content type setcontenttype writer writer response get reporter getreporter writer writer indication response hard committed happen writer write to string tostring response finish response finishresponse io exception ioexception illegal state exception illegalstateexception print partial servlet stack trace truncating occurrence javax servlet string get partial servlet stack trace getpartialservletstacktrace throwable string builder stringbuilder trace string builder stringbuilder trace append to string tostring append stack trace element stacktraceelement elements get stack trace getstacktrace pos elements length elements length elements get class name getclassname starts with startswith org apache catalina core application filter chain applicationfilterchain elements get method name getmethodname equals internal do filter internaldofilter pos pos elements get class name getclassname starts with startswith org apache catalina core trace append append elements to string tostring append trace to string tostring enables disables full error reports param show report showreport set show report setshowreport show report showreport show report showreport show report showreport is show report isshowreport show report showreport enables disables server info error param show server info showserverinfo set show server info setshowserverinfo show server info showserverinfo show server info showserverinfo show server info showserverinfo is show server info isshowserverinfo show server info showserverinfo