licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache coyote http java io exception ioexception java nio byte buffer bytebuffer java nio channels selection key selectionkey java nio channels selector org apache coyote output buffer outputbuffer org apache coyote response org apache tomcat util buf byte chunk bytechunk org apache tomcat util http http messages httpmessages org apache tomcat util net abstract endpoint abstractendpoint org apache tomcat util net nio channel niochannel org apache tomcat util net nio endpoint nioendpoint org apache tomcat util net nio selector pool nioselectorpool org apache tomcat util net socket wrapper socketwrapper output buffer author href mailto remm apache org remy maucherat author filip hanik internal nio output buffer internalniooutputbuffer abstract output buffer abstractoutputbuffer nio channel niochannel constructor internal nio output buffer internalniooutputbuffer response response header buffer size headerbuffersize response response buf header buffer size headerbuffersize output stream output buffer outputstreamoutputbuffer socket output buffer socketoutputbuffer filter library filterlibrary output filter outputfilter active filters activefilters output filter outputfilter last active filter lastactivefilter committed finished loading http messages httpmessages http messages httpmessages get instance getinstance response get locale getlocale get message getmessage underlying socket nio channel niochannel socket selector pool blocking reads blocking writes nio selector pool nioselectorpool pool methods flush response io exception ioexception underlying error occurred override flush io exception ioexception flush flush current buffer flush buffer flushbuffer recycle output buffer called closing connection override recycle recycle socket socket get buf handler getbufhandler get write buffer getwritebuffer clear socket request io exception ioexception underlying error occurred override end request endrequest io exception ioexception end request endrequest flush buffer flushbuffer http output methods send acknowledgment override send ack sendack io exception ioexception committed socket send socket constants ack bytes constants ack bytes length socket get buf handler getbufhandler get write buffer getwritebuffer constants ack bytes constants ack bytes length write to socket writetosocket socket get buf handler getbufhandler get write buffer getwritebuffer param byte buffer bytebuffer byte buffer bytebuffer param flip io exception ioexception todo blocking write properly write to socket writetosocket byte buffer bytebuffer byte buffer bytebuffer block flip io exception ioexception flip byte buffer bytebuffer flip written nio endpoint nioendpoint key attachment keyattachment att nio endpoint nioendpoint key attachment keyattachment socket get attachment getattachment att io exception ioexception key can celled cancelled write timeout writetimeout att get write timeout getwritetimeout selector selector selector pool io exception ioexception written pool write byte buffer bytebuffer socket selector write timeout writetimeout block flushed socket flush selector write timeout writetimeout selector pool selector clear block byte buffer bytebuffer clear written methods override init socket wrapper socketwrapper nio channel niochannel socket wrapper socketwrapper abstract endpoint abstractendpoint nio channel niochannel endpoint io exception ioexception socket socket wrapper socketwrapper get socket getsocket pool nio endpoint nioendpoint endpoint get selector pool getselectorpool commit response io exception ioexception underlying error occurred override commit io exception ioexception response committed committed response set committed setcommitted pos sending response header buffer add to b addtobb buf pos add to b addtobb buf offset length io exception ioexception length this time thistime length socket get buf handler getbufhandler get write buffer getwritebuffer position socket get buf handler getbufhandler get write buffer getwritebuffer capacity socket get buf handler getbufhandler get write buffer getwritebuffer remaining flush buffer flushbuffer this time thistime socket get buf handler getbufhandler get write buffer getwritebuffer remaining this time thistime socket get buf handler getbufhandler get write buffer getwritebuffer remaining socket get buf handler getbufhandler get write buffer getwritebuffer buf offset this time thistime length length this time thistime offset offset this time thistime nio endpoint nioendpoint key attachment keyattachment nio endpoint nioendpoint key attachment keyattachment socket get attachment getattachment prevent time outs timeouts client writes access callback write data buffer flush buffer flushbuffer io exception ioexception prevent timeout async selection key selectionkey key socket getiochannel key for keyfor socket get poller getpoller get selector getselector key nio endpoint nioendpoint key attachment keyattachment attach nio endpoint nioendpoint key attachment keyattachment key attachment attach access write socket write socket get buf handler getbufhandler get write buffer getwritebuffer position socket get buf handler getbufhandler get write buffer getwritebuffer flip write to socket writetosocket socket get buf handler getbufhandler get write buffer getwritebuffer output buffer write data output stream socket output buffer socketoutputbuffer output buffer outputbuffer write chunk override do write dowrite byte chunk bytechunk chunk response res io exception ioexception len chunk get length getlength start chunk get start getstart chunk get buffer getbuffer add to b addtobb start len byte count bytecount chunk get length getlength chunk get length getlength override get bytes written getbyteswritten byte count bytecount