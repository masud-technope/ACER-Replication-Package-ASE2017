licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket server java eof exception eofexception java io exception ioexception org apache coyote http upgrade abstract servlet input stream abstractservletinputstream org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util res string manager stringmanager org apache tomcat websocket transformation org apache tomcat websocket ws frame base wsframebase org apache tomcat websocket ws session wssession ws frame server wsframeserver ws frame base wsframebase log log log factory logfactory get log getlog ws frame server wsframeserver string manager stringmanager string manager stringmanager get manager getmanager constants abstract servlet input stream abstractservletinputstream sis object connection read lock connectionreadlock object ws frame server wsframeserver abstract servlet input stream abstractservletinputstream sis ws session wssession ws session wssession transformation transformation ws session wssession transformation sis sis called data servlet input stream servletinputstream process on data available ondataavailable io exception ioexception log is debug enabled isdebugenabled log debug ws frame server wsframeserver on data available ondataavailable connection read lock connectionreadlock is open isopen sis is ready isready fill input buffer data read sis read input buffer inputbuffer write pos writepos input buffer inputbuffer length write pos writepos log is debug enabled isdebugenabled log debug get string getstring ws frame server wsframeserver bytes read bytesread integer to string tostring read read read eof exception eofexception write pos writepos read process input buffer processinputbuffer override is masked ismasked data client masked override transformation get transformation gettransformation overridden visible classes get transformation gettransformation override log get log getlog log