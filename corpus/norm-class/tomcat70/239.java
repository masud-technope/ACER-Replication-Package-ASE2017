licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util buf java nio charset charset java nio charset malformed input exception malformedinputexception java util locale org junit org junit test test b testb c converter cconverter utf message utf invalid utf partial test test single message testsinglemessage exception test messages testmessages test test two message testtwomessage exception test messages testmessages test test many message testmanymessage exception test messages testmessages test messages testmessages msg count msgcount exception c converter cconverter conv c converter cconverter utf byte chunk bytechunk byte chunk bytechunk char chunk charchunk char chunk charchunk msg count msgcount append utf message utf message length conv convert assert equals assertequals abc to string tostring recycle recycle conv recycle system println test test left over size testleftoversize max left over maxleftover string charset name charsetname unset charset charset charset available chars ets availablecharsets values left over leftover charset to lower case tolowercase locale english starts with startswith int ernally internally jre charset equals compound text http bugs sun bug database bugdatabase view bug bug left over leftover charset new encoder newencoder max bytes per char maxbytesperchar unsupported operation exception unsupportedoperationexception uoe left over leftover max left over maxleftover max left over maxleftover left over leftover charset name charsetname charset assert true asserttrue limit max left over maxleftover charset charset name charsetname max left over maxleftover c converter cconverter left over leftover size todo work bug utf decoder test expected malformed input exception malformedinputexception test bug testbug exception check invalid input rejected str aight straight c converter cconverter conv c converter cconverter utf byte chunk bytechunk byte chunk bytechunk char chunk charchunk char chunk charchunk append utf invalid utf invalid length all ocate allocate get length getlength conv convert test expected malformed input exception malformedinputexception test bug testbug exception check partial input rejected c converter cconverter conv c converter cconverter utf byte chunk bytechunk byte chunk bytechunk char chunk charchunk char chunk charchunk append utf partial utf partial length all ocate allocate get length getlength conv convert test test bug testbug exception check partial input rejected c converter cconverter conv c converter cconverter utf byte chunk bytechunk byte chunk bytechunk char chunk charchunk char chunk charchunk append utf partial utf partial length all ocate allocate get length getlength conv convert exception conv convert malformed input exception malformedinputexception mie mie assert not null assertnotnull