licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc pool java sql connection java util hashtable java util properties javax management object name objectname javax naming context javax naming initial context initialcontext javax naming javax naming naming exception namingexception javax naming ref addr refaddr javax naming reference javax naming spi object factory objectfactory javax sql data source datasource org apache juli logging log org apache juli logging log factory logfactory jndi object factory creates instance code basic data source basicdatasource code configured based code ref addr refaddr code values code reference code match names data types code basic data source basicdatasource code bean properties properties configuration href http commons apache org dbcp configuration html commons dbcp properties initsql query executed connection established test on connect testonconnect validation query validationquery connection established validation interval validationinterval avoid excess validation validation frequency time milliseconds jdbc int erceptors jdbcinterceptors semicolon separated list class names classnames extending link jdbc interceptor jdbcinterceptor jmx enabled jmxenabled register pool jmx fair queue fairqueue pool sacrifice bit performance fairness author craig mc clanahan mcclanahan author dir k dirk verbeeck author filip hanik data source factory datasourcefactory object factory objectfactory log log log factory logfactory get log getlog data source factory datasourcefactory string prop default autocommit defaultautocommit default auto commit defaultautocommit string prop default read only defaultreadonly default read only defaultreadonly string prop default transactionisolation defaulttransactionisolation default transaction isolation defaulttransactionisolation string prop default cat alog defaultcatalog default catalog defaultcatalog string prop driverclassname driver class name driverclassname string prop password password string prop url url string prop use rname username username string prop max active maxactive max active maxactive string prop max idle maxidle max idle maxidle string prop minidle min idle minidle string prop initialsize initial size initialsize string prop max wait maxwait max wait maxwait string prop max age maxage max age maxage string prop test onborrow testonborrow test on borrow testonborrow string prop test onreturn testonreturn test on return testonreturn string prop test whileidle testwhileidle test while idle testwhileidle string prop test onconnect testonconnect test on connect testonconnect string prop validationquery validation query validationquery string prop validationquery timeout validation query timeout validationquerytimeout string prop validator validator class name validatorclassname string prop numtestsperevictionrun num tests per eviction run numtestsperevictionrun string prop timebetweenevictionrunsmillis time between eviction runs millis timebetweenevictionrunsmillis string prop minevictableidletimemillis min evictable idle time millis minevictableidletimemillis string prop access tounderlyingconnectionallowed accesstounderlyingconnectionallowed access to underlying connection allowed accesstounderlyingconnectionallowed string prop remove abandoned removeabandoned remove abandoned removeabandoned string prop remove abandonedtimeout removeabandonedtimeout remove abandoned timeout removeabandonedtimeout string prop log abandoned logabandoned log abandoned logabandoned string prop abandonwhenpercentagefull abandon when per centage full abandonwhenpercentagefull string prop poolpreparedstatements pool prepared statements poolpreparedstatements string prop max open preparedstatements maxopenpreparedstatements max open prepared statements maxopenpreparedstatements string prop connectionproperties connection properties connectionproperties string prop init sql initsql initsql string prop int erceptors interceptors jdbc int erceptors jdbcinterceptors string prop validationinterval validation interval validationinterval string prop jmx enabled jmx enabled jmxenabled string prop fair queue fair queue fairqueue string prop equals use equals useequals string prop con lock use lock uselock string prop datasource data source datasource string prop datasource jndi datasourcejndi string prop suspect timeout suspect timeout suspecttimeout string prop alternate use rname username allowed alternate username allowed alternateusernameallowed string prop commitonreturn commit on return commitonreturn string prop rollbackonreturn rollback on return rollbackonreturn string prop use disposableconnectionfacade usedisposableconnectionfacade use disposable connection facade usedisposableconnectionfacade string prop log validationerrors logvalidationerrors log validation errors logvalidationerrors string prop prop agateinterruptstate propagateinterruptstate propagate int err upt state propagateinterruptstate string prop ignore exception onpreload ignoreexceptiononpreload ignore exception on pre load ignoreexceptiononpreload unknown transactionisolation string object object string properties prop default autocommit defaultautocommit prop default read only defaultreadonly prop default transactionisolation defaulttransactionisolation prop default cat alog defaultcatalog prop driverclassname prop max active maxactive prop max idle maxidle prop minidle prop initialsize prop max wait maxwait prop test onborrow testonborrow prop test onreturn testonreturn prop timebetweenevictionrunsmillis prop numtestsperevictionrun prop minevictableidletimemillis prop test whileidle testwhileidle prop test onconnect testonconnect prop password prop url prop use rname username prop validationquery prop validationquery timeout prop validator prop validationinterval prop access tounderlyingconnectionallowed accesstounderlyingconnectionallowed prop remove abandoned removeabandoned prop remove abandonedtimeout removeabandonedtimeout prop log abandoned logabandoned prop poolpreparedstatements prop max open preparedstatements maxopenpreparedstatements prop connectionproperties prop init sql initsql prop int erceptors interceptors prop jmx enabled prop fair queue prop equals object prop abandonwhenpercentagefull prop max age maxage prop con lock prop datasource prop datasource jndi prop suspect timeout prop alternate use rname username allowed prop commitonreturn prop rollbackonreturn prop use disposableconnectionfacade usedisposableconnectionfacade prop log validationerrors logvalidationerrors prop prop agateinterruptstate propagateinterruptstate prop ignore exception onpreload ignoreexceptiononpreload object factory objectfactory methods create code basic data source basicdatasource code instance instance created code code param obj object location reference creating object param object relative code name ctx namectx code param name ctx namectx context relative code code parameter code code code code relative initial context param environment environment creating object exception exception exception occurs creating instance override object get object instance getobjectinstance object obj context name ctx namectx hashtable environment exception javax sql data source datasource obj obj reference reference reference obj javax sql data source datasource equals get class name getclassname javax sql xa data source xadatasource equals get class name getclassname org apache tomcat jdbc pool data source datasource get name getname equals get class name getclassname log warn get class name getclassname valid type jndi factory properties properties properties properties length string property name propertyname properties ref addr refaddr property name propertyname string property value propertyvalue get content getcontent to string tostring properties set property setproperty property name propertyname property value propertyvalue create data source createdatasource properties name ctx namectx pool configuration poolconfiguration parse pool properties parsepoolproperties properties properties pool configuration poolconfiguration pool properties poolproperties pool properties poolproperties string properties get property getproperty prop default autocommit defaultautocommit pool properties poolproperties set default auto commit setdefaultautocommit value of valueof properties get property getproperty prop default read only defaultreadonly pool properties poolproperties set default read only setdefaultreadonly value of valueof properties get property getproperty prop default transactionisolation defaulttransactionisolation level unknown transactionisolation equals ignore case equalsignorecase level connection transaction read committed equals ignore case equalsignorecase level connection transaction read committed read uncommitted equals ignore case equalsignorecase level connection transaction read uncommitted repeatable read equals ignore case equalsignorecase level connection transaction repeatable read serializable equals ignore case equalsignorecase level connection transaction serializable level integer parse int parseint number format exception numberformatexception system err println parse default transaction isolation defaulttransactionisolation system err println warning default transaction isolation defaulttransactionisolation system err println database driver level unknown transactionisolation pool properties poolproperties set default transaction isolation setdefaulttransactionisolation level properties get property getproperty prop default cat alog defaultcatalog pool properties poolproperties set default catalog setdefaultcatalog properties get property getproperty prop driverclassname pool properties poolproperties set driver class name setdriverclassname properties get property getproperty prop max active maxactive pool properties poolproperties set max active setmaxactive integer parse int parseint properties get property getproperty prop max idle maxidle pool properties poolproperties set max idle setmaxidle integer parse int parseint properties get property getproperty prop minidle pool properties poolproperties set min idle setminidle integer parse int parseint properties get property getproperty prop initialsize pool properties poolproperties set initial size setinitialsize integer parse int parseint properties get property getproperty prop max wait maxwait pool properties poolproperties set max wait setmaxwait integer parse int parseint properties get property getproperty prop test onborrow testonborrow pool properties poolproperties set test on borrow settestonborrow parse boolean parseboolean properties get property getproperty prop test onreturn testonreturn pool properties poolproperties set test on return settestonreturn parse boolean parseboolean properties get property getproperty prop test onconnect testonconnect pool properties poolproperties set test on connect settestonconnect parse boolean parseboolean properties get property getproperty prop timebetweenevictionrunsmillis pool properties poolproperties set time between eviction runs millis settimebetweenevictionrunsmillis integer parse int parseint properties get property getproperty prop numtestsperevictionrun pool properties poolproperties set num tests per eviction run setnumtestsperevictionrun integer parse int parseint properties get property getproperty prop minevictableidletimemillis pool properties poolproperties set min evictable idle time millis setminevictableidletimemillis integer parse int parseint properties get property getproperty prop test whileidle testwhileidle pool properties poolproperties set test while idle settestwhileidle parse boolean parseboolean properties get property getproperty prop password pool properties poolproperties set password setpassword properties get property getproperty prop url pool properties poolproperties set url seturl properties get property getproperty prop use rname username pool properties poolproperties set username setusername properties get property getproperty prop validationquery pool properties poolproperties set validation query setvalidationquery properties get property getproperty prop validationquery timeout pool properties poolproperties set validation query timeout setvalidationquerytimeout integer parse int parseint properties get property getproperty prop validator pool properties poolproperties set validator class name setvalidatorclassname properties get property getproperty prop validationinterval pool properties poolproperties set validation interval setvalidationinterval parse long parselong properties get property getproperty prop access tounderlyingconnectionallowed accesstounderlyingconnectionallowed pool properties poolproperties set access to underlying connection allowed setaccesstounderlyingconnectionallowed parse boolean parseboolean properties get property getproperty prop remove abandoned removeabandoned pool properties poolproperties set remove abandoned setremoveabandoned parse boolean parseboolean properties get property getproperty prop remove abandonedtimeout removeabandonedtimeout pool properties poolproperties set remove abandoned timeout setremoveabandonedtimeout integer parse int parseint properties get property getproperty prop log abandoned logabandoned pool properties poolproperties set log abandoned setlogabandoned parse boolean parseboolean properties get property getproperty prop poolpreparedstatements log warn prop poolpreparedstatements valid setting properties get property getproperty prop max open preparedstatements maxopenpreparedstatements log warn prop max open preparedstatements maxopenpreparedstatements valid setting properties get property getproperty prop connectionproperties properties get properties getproperties pool properties poolproperties set db properties setdbproperties pool properties poolproperties set db properties setdbproperties properties pool properties poolproperties get username getusername pool properties poolproperties get db properties getdbproperties set property setproperty user pool properties poolproperties get username getusername pool properties poolproperties get password getpassword pool properties poolproperties get db properties getdbproperties set property setproperty password pool properties poolproperties get password getpassword properties get property getproperty prop init sql initsql pool properties poolproperties setinitsql properties get property getproperty prop int erceptors interceptors pool properties poolproperties set jdbc int erceptors setjdbcinterceptors properties get property getproperty prop jmx enabled pool properties poolproperties set jmx enabled setjmxenabled parse boolean parseboolean properties get property getproperty prop fair queue pool properties poolproperties set fair queue setfairqueue parse boolean parseboolean properties get property getproperty prop equals pool properties poolproperties set use equals setuseequals parse boolean parseboolean properties get property getproperty object pool properties poolproperties set name setname object name objectname quote properties get property getproperty prop abandonwhenpercentagefull pool properties poolproperties set abandon when per centage full setabandonwhenpercentagefull integer parse int parseint properties get property getproperty prop max age maxage pool properties poolproperties set max age setmaxage parse long parselong properties get property getproperty prop con lock pool properties poolproperties set use lock setuselock parse boolean parseboolean properties get property getproperty prop datasource happen illegal argument exception illegalargumentexception data source datasource property string javax sql data source datasource object properties get property getproperty prop datasource jndi pool properties poolproperties setdatasourcejndi properties get property getproperty prop suspect timeout pool properties poolproperties set suspect timeout setsuspecttimeout integer parse int parseint properties get property getproperty prop alternate use rname username allowed pool properties poolproperties set alternate username allowed setalternateusernameallowed parse boolean parseboolean properties get property getproperty prop commitonreturn pool properties poolproperties set commit on return setcommitonreturn parse boolean parseboolean properties get property getproperty prop rollbackonreturn pool properties poolproperties set rollback on return setrollbackonreturn parse boolean parseboolean properties get property getproperty prop use disposableconnectionfacade usedisposableconnectionfacade pool properties poolproperties set use disposable connection facade setusedisposableconnectionfacade parse boolean parseboolean properties get property getproperty prop log validationerrors logvalidationerrors pool properties poolproperties set log validation errors setlogvalidationerrors parse boolean parseboolean properties get property getproperty prop prop agateinterruptstate propagateinterruptstate pool properties poolproperties set prop agate int err upt state setpropagateinterruptstate parse boolean parseboolean properties get property getproperty prop ignore exception onpreload ignoreexceptiononpreload pool properties poolproperties set ignore exception on pre load setignoreexceptiononpreload parse boolean parseboolean pool properties poolproperties creates config ures configures link data source datasource instance based properties param properties datasource configuration properties exception error occurs creating data source data source datasource create data source createdatasource properties properties exception create data source createdatasource properties data source datasource create data source createdatasource properties properties context context exception pool configuration poolconfiguration pool properties poolproperties data source factory datasourcefactory parse pool properties parsepoolproperties properties pool properties poolproperties getdatasourcejndi pool properties poolproperties get data source getdatasource performjndilookup context pool properties poolproperties org apache tomcat jdbc pool data source datasource data source datasource org apache tomcat jdbc pool xa data source xadatasource pool properties poolproperties org apache tomcat jdbc pool data source datasource pool properties poolproperties init ialise initialise pool data source datasource create pool createpool configured data source datasource instance data source datasource performjndilookup context context pool configuration poolconfiguration pool properties poolproperties object jndids context jndids context lookup pool properties poolproperties getdatasourcejndi log warn datasourcejndi property config ued configued local jndi context naming exception namingexception log debug pool properties poolproperties getdatasourcejndi local context jndids context initial context initialcontext jndids context lookup pool properties poolproperties getdatasourcejndi naming exception namingexception log warn pool properties poolproperties getdatasourcejndi initial context initialcontext jndids pool properties poolproperties set data source setdatasource jndids parse properties string format string property name propertyname property param prop text proptext properties exception properties get properties getproperties string prop text proptext pool properties poolproperties get properties getproperties prop text proptext