licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util net java eof exception eofexception java io exception ioexception java net socket timeout exception sockettimeoutexception java nio byte buffer bytebuffer java nio channels selection key selectionkey java nio channels selector java util no such element exception nosuchelementexception java util concurrent concurrent linked queue concurrentlinkedqueue java util concurrent atomic atomic integer atomicinteger org apache juli logging log org apache juli logging log factory logfactory nio selector pool nioselectorpool nio selector pool nioselectorpool log log log factory logfactory get log getlog nio selector pool nioselectorpool shared parse boolean parseboolean system get property getproperty org apache tomcat util net nio selector shared nioselectorshared nio blocking selector nioblockingselector blocking selector blockingselector selector shared selector max selectors maxselectors shared selector timeout sharedselectortimeout max spare selectors maxspareselectors enabled atomic integer atomicinteger active atomic integer atomicinteger atomic integer atomicinteger spare atomic integer atomicinteger concurrent linked queue concurrentlinkedqueue selector selectors concurrent linked queue concurrentlinkedqueue selector selector get shared selector getsharedselector io exception ioexception shared shared selector nio selector pool nioselectorpool shared selector selector selector open isn thread safe http bugs sun view bug bug fixed shared selector selector open log info shared selector servlet write read shared selector selector io exception ioexception shared get shared selector getsharedselector enabled active increment and get incrementandget max selectors maxselectors enabled active decrement and get decrementandget selector selectors size selectors poll selector selector open isn thread safe http bugs sun view bug bug fixed selector open spare decrement and get decrementandget no such element exception nosuchelementexception selector selector open io exception ioexception iox unable find selector active decrement and get decrementandget selector io exception ioexception shared enabled active decrement and get decrementandget enabled max spare selectors maxspareselectors spare math min max spare selectors maxspareselectors max selectors maxselectors spare increment and get incrementandget selectors offer close close io exception ioexception enabled selector selectors poll close spare active blocking selector blockingselector blocking selector blockingselector close shared get shared selector getsharedselector get shared selector getsharedselector close shared selector open io exception ioexception enabled get shared selector getsharedselector shared blocking selector blockingselector nio blocking selector nioblockingselector blocking selector blockingselector open get shared selector getsharedselector performs blocking write byte buffer bytebuffer data written selector block code selector code parameter perform busy write lot cpu cycles param buf byte buffer bytebuffer buffer data write code buf has remaining hasremaining code param socket socket channel socketchannel socket write data param selector selector selector blocking busy write init iated initiated param write timeout writetimeout timeout write operation milliseconds timeout returns number bytes written eof exception eofexception write returns socket timeout exception sockettimeoutexception write times io exception ioexception exception occurs underlying socket logic write byte buffer bytebuffer buf nio channel niochannel socket selector selector write timeout writetimeout io exception ioexception write buf socket selector write timeout writetimeout write byte buffer bytebuffer buf nio channel niochannel socket selector selector write timeout writetimeout block io exception ioexception shared block blocking selector blockingselector write buf socket write timeout writetimeout selection key selectionkey key written time dout timedout assume write key count keycount start timeout timer time system current time millis currenttimemillis time dout timedout buf has remaining hasremaining cnt key count keycount write registered write write data cnt socket write buf cnt eof exception eofexception written cnt cnt reset timeout timer time system current time millis currenttimemillis wrote selector don block cnt block selector register write selector key key socket getiochannel register selector selection key selectionkey write key int erest ops interestops selection key selectionkey write key count keycount selector select write timeout writetimeout write timeout writetimeout selector key count keycount time dout timedout system current time millis currenttimemillis time write timeout writetimeout time dout timedout socket timeout exception sockettimeoutexception key key cancel removes key selector selector selector select now selectnow written performs blocking read byte buffer bytebuffer data read selector block code selector code parameter perform busy read lot cpu cycles param buf byte buffer bytebuffer buffer data read read time d timed param socket socket channel socketchannel socket write data param selector selector selector blocking busy read init iated initiated param read timeout readtimeout timeout read operation milliseconds timeout returns number bytes read eof exception eofexception read returns socket timeout exception sockettimeoutexception read times io exception ioexception exception occurs underlying socket logic read byte buffer bytebuffer buf nio channel niochannel socket selector selector read timeout readtimeout io exception ioexception read buf socket selector read timeout readtimeout performs read byte buffer bytebuffer data read selector register events block code selector code parameter perform busy read lot cpu cycles param buf byte buffer bytebuffer buffer data read read time d timed param socket socket channel socketchannel socket write data param selector selector selector blocking busy read init iated initiated param read timeout readtimeout timeout read operation milliseconds timeout param block block data timeout time reached returns number bytes read eof exception eofexception read returns socket timeout exception sockettimeoutexception read times io exception ioexception exception occurs underlying socket logic read byte buffer bytebuffer buf nio channel niochannel socket selector selector read timeout readtimeout block io exception ioexception shared block blocking selector blockingselector read buf socket read timeout readtimeout selection key selectionkey key read time dout timedout assume write key count keycount start timeout timer time system current time millis currenttimemillis time dout timedout cnt key count keycount read registered read cnt socket read buf cnt eof exception eofexception read cnt read cnt reading cnt read block selector register write selector key key socket getiochannel register selector selection key selectionkey read key int erest ops interestops selection key selectionkey read key count keycount selector select read timeout readtimeout read timeout readtimeout selector key count keycount time dout timedout system current time millis currenttimemillis time read timeout readtimeout time dout timedout socket timeout exception sockettimeoutexception key key cancel removes key selector selector selector select now selectnow read set max selectors setmaxselectors max selectors maxselectors max selectors maxselectors max selectors maxselectors set max spare selectors setmaxspareselectors max spare selectors maxspareselectors max spare selectors maxspareselectors max spare selectors maxspareselectors set enabled setenabled enabled enabled enabled set shared selector timeout setsharedselectortimeout shared selector timeout sharedselectortimeout shared selector timeout sharedselectortimeout shared selector timeout sharedselectortimeout get max selectors getmaxselectors max selectors maxselectors get max spare selectors getmaxspareselectors max spare selectors maxspareselectors is enabled isenabled enabled get shared selector timeout getsharedselectortimeout shared selector timeout sharedselectortimeout concurrent linked queue concurrentlinkedqueue selector get selectors getselectors selectors atomic integer atomicinteger get spare getspare spare