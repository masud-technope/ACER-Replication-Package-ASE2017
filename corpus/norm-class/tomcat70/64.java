licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license websocket snake java awt color java io exception ioexception java nio byte buffer bytebuffer java nio char buffer charbuffer java util collection java util collections java util iterator java util random java util timer java util timer task timertask java util concurrent concurrent hash map concurrenthashmap java util concurrent atomic atomic integer atomicinteger javax servlet servlet exception servletexception javax servlet http http servlet request httpservletrequest org apache catalina websocket message inbound messageinbound org apache catalina websocket stream inbound streaminbound org apache catalina websocket web socket servlet websocketservlet org apache catalina websocket ws outbound wsoutbound org apache juli logging log org apache juli logging log factory logfactory web socket servlet simple multi player snake deprecated link websocket snake snake annotation snakeannotation deprecated snake web socket servlet snakewebsocketservlet web socket servlet websocketservlet serialversionuid log log log factory logfactory get log getlog snake web socket servlet snakewebsocketservlet playfield width playfield height grid size tick delay random random random timer game timer gametimer timer snake web socket servlet snakewebsocketservlet get simple name getsimplename timer atomic integer atomicinteger connection ids connectionids atomic integer atomicinteger concurrent hash map concurrenthashmap integer snake snakes concurrent hash map concurrenthashmap integer snake concurrent hash map concurrenthashmap integer snake message inbound snakemessageinbound connections concurrent hash map concurrenthashmap integer snake message inbound snakemessageinbound override init servlet exception servletexception init game timer gametimer schedule at fixed rate scheduleatfixedrate timer task timertask override tick runtime exception runtimeexception log error caught prevent timer shutting tick delay tick delay tick string builder stringbuilder string builder stringbuilder iterator snake iterator get snakes getsnakes iterator iterator has next hasnext snake snake iterator snake update get snakes getsnakes append snake get locations json getlocationsjson iterator has next hasnext append broadcast string format type update data to string tostring broadcast string message snake message inbound snakemessageinbound connection get connections getconnections char buffer charbuffer buffer char buffer charbuffer wrap message connection get ws outbound getwsoutbound write text message writetextmessage buffer io exception ioexception ignore collection snake message inbound snakemessageinbound get connections getconnections collections unmodifiable collection unmodifiablecollection connections values collection snake get snakes getsnakes collections unmodifiable collection unmodifiablecollection snakes values string get random hex color getrandomhexcolor hue random next float nextfloat sat saturation random next int nextint luminance color color color gethsbcolor hue saturation luminance integer to hex string tohexstring color getrgb xff ffff xffffff substring location get random location getrandomlocation round by grid size roundbygridsize random next int nextint snake web socket servlet snakewebsocketservlet playfield width round by grid size roundbygridsize random next int nextint snake web socket servlet snakewebsocketservlet playfield height location round by grid size roundbygridsize snake web socket servlet snakewebsocketservlet grid size snake web socket servlet snakewebsocketservlet grid size snake web socket servlet snakewebsocketservlet grid size override destroy destroy game timer gametimer game timer gametimer cancel override stream inbound streaminbound create web socket inbound createwebsocketinbound string sub protocol subprotocol http servlet request httpservletrequest request snake message inbound snakemessageinbound connection ids connectionids increment and get incrementandget snake message inbound snakemessageinbound message inbound messageinbound snake snake snake message inbound snakemessageinbound override on open onopen ws outbound wsoutbound out bound outbound snake snake out bound outbound snakes integer value of valueof snake connections integer value of valueof string builder stringbuilder string builder stringbuilder iterator snake iterator get snakes getsnakes iterator iterator has next hasnext snake snake iterator append string format color integer value of valueof snake get id getid snake get hex color gethexcolor iterator has next hasnext append broadcast string format type join data to string tostring override on close onclose status connections remove integer value of valueof snakes remove integer value of valueof broadcast string format type leave integer value of valueof override on binary message onbinarymessage byte buffer bytebuffer message io exception ioexception unsupported operation exception unsupportedoperationexception binary message supported override on text message ontextmessage char buffer charbuffer char buffer charbuffer io exception ioexception string message char buffer charbuffer to string tostring west equals message snake set direction setdirection direction west north equals message snake set direction setdirection direction north east equals message snake set direction setdirection direction east south equals message snake set direction setdirection direction south