licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina session java beans property change listener propertychangelistener java beans property change support propertychangesupport java io exception ioexception java util array list arraylist java util java util deque java util enumeration java util hash map hashmap java util iterator java util linked list linkedlist java util list java util map java util concurrent concurrent hash map concurrenthashmap java util concurrent atomic atomic long atomiclong java util regex pattern java util regex pattern syntax exception patternsyntaxexception org apache catalina container org apache catalina context org apache catalina engine org apache catalina globals org apache catalina lifecycle org apache catalina lifecycle exception lifecycleexception org apache catalina lifecycle state lifecyclestate org apache catalina manager org apache catalina session org apache catalina session id generator sessionidgenerator org apache catalina mbeans m bean utils mbeanutils org apache catalina util lifecycle bean base lifecyclembeanbase org apache catalina util session id generator base sessionidgeneratorbase org apache catalina util standard session id generator standardsessionidgenerator org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util res string manager stringmanager minimal implementation manager supports session persistence distributable capabilities subclassed create sophisticated manager implementations author craig mc clanahan mcclanahan manager base managerbase lifecycle bean base lifecyclembeanbase manager log log log factory logfactory get log getlog manager base managerbase instance variables container manager container container distributable flag sessions created manager flag code code user attributes session control led controlled manager serializable deprecated link context get distributable getdistributable takes precedence removed tomcat deprecated distributable descriptive string implementation string info manager base managerbase descriptive manager implementation logging string manager base managerbase maximum inactive int erval interval sessions created manager deprecated link context get session timeout getsessiontimeout takes precedence removed tomcat deprecated max inactive interval maxinactiveinterval session length unset session length sessions created manager length session id generator sessionidgenerator setting deprecated session id length sessionidlength session length unset java secure random number generator generating session identifiers random number generator see ding seeding argument constructor instance link java security secure random securerandom generated string secure random class securerandomclass algorithm create instances link java security secure random securerandom generate session id s ids algorithm sha prng platform sha prng empty string invalid algorithm provider secure random securerandom instances created defaults fails secure random securerandom instances created platform defaults string secure random algorithm securerandomalgorithm sha prng provider create instances link java security secure random securerandom generate session id s ids algorithm sha prng invalid algorithm provider secure random securerandom instances created defaults fails secure random securerandom instances created platform defaults string secure random provider securerandomprovider session id generator sessionidgenerator session id generator sessionidgenerator session id generator sessionidgenerator session id generator class sessionidgeneratorclass longest time seconds expired session alive session max alive time sessionmaxalivetime object session max alive time update lock sessionmaxalivetimeupdatelock object timing stats cache size deque session timing sessiontiming session creation timing sessioncreationtiming linked list linkedlist session timing sessiontiming deque session timing sessiontiming session expiration timing sessionexpirationtiming linked list linkedlist session timing sessiontiming number sessions expired atomic long atomiclong expired sessions expiredsessions atomic long atomiclong active sessions manager keyed session identifier map string session sessions concurrent hash map concurrenthashmap string session number sessions created manager session counter sessioncounter max active maxactive object max active update lock maxactiveupdatelock object maximum number active sessions allowed limit max active sessions maxactivesessions number session creations failed max active sessions maxactivesessions rejected sessions rejectedsessions number duplicated session ids problems duplicates processing time session expiration processing time processingtime iteration count background processing count frequency session expiration manager operations manager operations amount back grond process backgrondprocess calls amount checks occur process expires frequency processexpiresfrequency string manager string manager stringmanager string manager stringmanager get manager getmanager manager base managerbase property change support component property change support propertychangesupport support property change support propertychangesupport pattern session attribute name pattern sessionattributenamepattern pattern session attribute value class name pattern sessionattributevalueclassnamepattern warn on session attribute filter failure warnonsessionattributefilterfailure manager base managerbase globals security enabled minimum required distribution persistence work string set session attribute value class name filter setsessionattributevalueclassnamefilter java lang integer number string set warn on session attribute filter failure setwarnonsessionattributefilterfailure properties regular expression filter session attribute based attribute regular expression anchored match entire regular expression filter attribute names code filter applied empty string names match filter attributes blocked string get session attribute name filter getsessionattributenamefilter session attribute name pattern sessionattributenamepattern session attribute name pattern sessionattributenamepattern to string tostring set session attribute name filter setsessionattributenamefilter string session attribute name filter sessionattributenamefilter session attribute name filter sessionattributenamefilter session attribute name filter sessionattributenamefilter length session attribute name pattern sessionattributenamepattern session attribute name pattern sessionattributenamepattern pattern compile session attribute name filter sessionattributenamefilter pattern get session attribute name pattern getsessionattributenamepattern session attribute name pattern sessionattributenamepattern regular expression filter session attribute based implementation regular expression anchored match fully qualified regular expression filter names code filter applied empty string names match filter attributes blocked string get session attribute value class name filter getsessionattributevalueclassnamefilter session attribute value class name pattern sessionattributevalueclassnamepattern session attribute value class name pattern sessionattributevalueclassnamepattern to string tostring link get session attribute value class name filter getsessionattributevalueclassnamefilter pre compiled regular expression pattern pre compiled pattern filter session attributes based implementation code filter applied pattern get session attribute value class name pattern getsessionattributevalueclassnamepattern session attribute value class name pattern sessionattributevalueclassnamepattern regular expression filter classes session attributes regular expression anchored match fully qualified param session attribute value class name filter sessionattributevalueclassnamefilter regular expression filter session attributes based code filtering required empty string names match filter attributes blocked pattern syntax exception patternsyntaxexception expression valid set session attribute value class name filter setsessionattributevalueclassnamefilter string session attribute value class name filter sessionattributevalueclassnamefilter pattern syntax exception patternsyntaxexception session attribute value class name filter sessionattributevalueclassnamefilter session attribute value class name filter sessionattributevalueclassnamefilter length session attribute value class name pattern sessionattributevalueclassnamepattern session attribute value class name pattern sessionattributevalueclassnamepattern pattern compile session attribute value class name filter sessionattributevalueclassnamefilter warn level log message generated session attribute persisted replicated restored code warn level log message generated get warn on session attribute filter failure getwarnonsessionattributefilterfailure warn on session attribute filter failure warnonsessionattributefilterfailure configure warn level log message generated session attribute persisted replicated restored param warn on session attribute filter failure warnonsessionattributefilterfailure code warn level message generated set warn on session attribute filter failure setwarnonsessionattributefilterfailure warn on session attribute filter failure warnonsessionattributefilterfailure warn on session attribute filter failure warnonsessionattributefilterfailure warn on session attribute filter failure warnonsessionattributefilterfailure override container get container getcontainer container override set container setcontainer container container container container get state getstate equals lifecycle state lifecyclestate illegal state exception illegalstateexception get string getstring manager base managerbase set context not new setcontextnotnew container old container oldcontainer container container container todo delete tomcat onwards support fire property change firepropertychange container old container oldcontainer container implementation string get class name getclassname get class getclass get name getname deprecated override get distributable getdistributable container container get container getcontainer container context context container get distributable getdistributable deprecated override set distributable setdistributable distributable deprecated override string get info getinfo info override get max inactive interval getmaxinactiveinterval container container get container getcontainer container context method returns seconds context min utes minutes context container get session timeout getsessiontimeout deprecated override set max inactive interval setmaxinactiveinterval int erval interval log warn get string getstring manager base managerbase set max inactive interval unused setmaxinactiveintervalunused session length bytes sessions created manager deprecated link session id generator sessionidgenerator get session id length getsessionidlength method removed tomcat onwards session length override deprecated get session id length getsessionidlength session id length sessionidlength sets session length bytes sessions created manager deprecated link session id generator sessionidgenerator set session id length setsessionidlength method removed tomcat onwards param id length idlength session length override deprecated set session id length setsessionidlength id length idlength old session id length oldsessionidlength session id length sessionidlength session id length sessionidlength id length idlength support fire property change firepropertychange session id length sessionidlength integer value of valueof old session id length oldsessionidlength integer value of valueof session id length sessionidlength session generator session generator session id generator sessionidgenerator get session id generator getsessionidgenerator session id generator sessionidgenerator session id generator sessionidgenerator session id generator class sessionidgeneratorclass session id generator sessionidgenerator session id generator class sessionidgeneratorclass new instance newinstance session id generator sessionidgenerator illegal access exception illegalaccessexception instantiation exception instantiationexception set session id generator setsessionidgenerator session id generator sessionidgenerator session id generator sessionidgenerator session id generator sessionidgenerator session id generator sessionidgenerator session id generator class sessionidgeneratorclass session id generator sessionidgenerator get class getclass descriptive manager implementation string get name getname secure random number generator string get secure random class getsecurerandomclass secure random class securerandomclass secure random number generator param secure random class securerandomclass secure random number generator set secure random class setsecurerandomclass string secure random class securerandomclass string old secure random class oldsecurerandomclass secure random class securerandomclass secure random class securerandomclass secure random class securerandomclass support fire property change firepropertychange secure random class securerandomclass old secure random class oldsecurerandomclass secure random class securerandomclass secure random number generator algorithm string get secure random algorithm getsecurerandomalgorithm secure random algorithm securerandomalgorithm secure random number generator algorithm param secure random algorithm securerandomalgorithm secure random number generator algorithm set secure random algorithm setsecurerandomalgorithm string secure random algorithm securerandomalgorithm secure random algorithm securerandomalgorithm secure random algorithm securerandomalgorithm secure random number generator provider string get secure random provider getsecurerandomprovider secure random provider securerandomprovider secure random number generator provider param secure random provider securerandomprovider secure random number generator provider set secure random provider setsecurerandomprovider string secure random provider securerandomprovider secure random provider securerandomprovider secure random provider securerandomprovider override get rejected sessions getrejectedsessions rejected sessions rejectedsessions override get expired sessions getexpiredsessions expired sessions expiredsessions override set expired sessions setexpiredsessions expired sessions expiredsessions expired sessions expiredsessions expired sessions expiredsessions get processing time getprocessingtime processing time processingtime set processing time setprocessingtime processing time processingtime processing time processingtime processing time processingtime frequency manager checks get process expires frequency getprocessexpiresfrequency process expires frequency processexpiresfrequency manager checks frequency param process expires frequency processexpiresfrequency manager checks frequency set process expires frequency setprocessexpiresfrequency process expires frequency processexpiresfrequency process expires frequency processexpiresfrequency old process expires frequency oldprocessexpiresfrequency process expires frequency processexpiresfrequency process expires frequency processexpiresfrequency process expires frequency processexpiresfrequency support fire property change firepropertychange process expires frequency processexpiresfrequency integer value of valueof old process expires frequency oldprocessexpiresfrequency integer value of valueof process expires frequency processexpiresfrequency methods inherit doc inheritdoc direct call link process expires processexpires override background process backgroundprocess count count process expires frequency processexpiresfrequency count process expires processexpires invalid ate invalidate sessions expired process expires processexpires time now timenow system current time millis currenttimemillis session sessions find sessions findsessions expire here expirehere log is debug enabled isdebugenabled log debug start expire sessions get name getname time now timenow session count sessioncount sessions length sessions length sessions sessions is valid isvalid expire here expirehere time end timeend system current time millis currenttimemillis log is debug enabled isdebugenabled log debug expire sessions get name getname processing time processingtime time end timeend time now timenow expired sessions expire here expirehere processing time processingtime time end timeend time now timenow override init internal initinternal lifecycle exception lifecycleexception init internal initinternal container context lifecycle exception lifecycleexception get string getstring manager base managerbase context null contextnull override start internal startinternal lifecycle exception lifecycleexception nulls session creation timing sessioncreationtiming size timing stats cache size session creation timing sessioncreationtiming add session expiration timing sessionexpirationtiming size timing stats cache size session expiration timing sessionexpirationtiming add create session id generator sessionidgenerator explicitly configured session id generator sessionidgenerator session id generator sessionidgenerator get session id generator getsessionidgenerator session id generator sessionidgenerator session id generator sessionidgenerator standard session id generator standardsessionidgenerator set session id generator setsessionidgenerator session id generator sessionidgenerator session id length sessionidlength session length unset session id generator sessionidgenerator set session id length setsessionidlength session id length sessionidlength session id generator sessionidgenerator set jvm r out e setjvmroute get jvm r out e getjvmroute session id generator sessionidgenerator session id generator base sessionidgeneratorbase session id generator base sessionidgeneratorbase sig session id generator base sessionidgeneratorbase session id generator sessionidgenerator sig set secure random algorithm setsecurerandomalgorithm get secure random algorithm getsecurerandomalgorithm sig set secure random class setsecurerandomclass get secure random class getsecurerandomclass sig set secure random provider setsecurerandomprovider get secure random provider getsecurerandomprovider session id generator sessionidgenerator lifecycle lifecycle session id generator sessionidgenerator start force initialization random number generator log is debug enabled isdebugenabled log debug force random number initialization starting session id generator sessionidgenerator generate session id generatesessionid log is debug enabled isdebugenabled log debug force random number initialization completed override stop internal stopinternal lifecycle exception lifecycleexception session id generator sessionidgenerator lifecycle lifecycle session id generator sessionidgenerator override add session session sessions session get id internal getidinternal session size get active sessions getactivesessions size max active maxactive max active update lock maxactiveupdatelock size max active maxactive max active maxactive size override add property change listener addpropertychangelistener property change listener propertychangelistener listener support add property change listener addpropertychangelistener listener override session create session createsession string session id sessionid max active sessions maxactivesessions get active sessions getactivesessions max active sessions maxactivesessions rejected sessions rejectedsessions too many active sessions exception toomanyactivesessionsexception get string getstring manager base managerbase create session createsession ise max active sessions maxactivesessions recycle create session instance session session create empty session createemptysession initialize properties session session set new setnew session set valid setvalid session set creation time setcreationtime system current time millis currenttimemillis session set max inactive interval setmaxinactiveinterval context get container getcontainer get session timeout getsessiontimeout string session id sessionid generate session id generatesessionid session set id setid session counter sessioncounter session timing sessiontiming timing session timing sessiontiming session get creation time getcreationtime session creation timing sessioncreationtiming session creation timing sessioncreationtiming add timing session creation timing sessioncreationtiming poll session override session create empty session createemptysession get new session getnewsession override session find session findsession string io exception ioexception sessions override session find sessions findsessions sessions values to array toarray session override remove session session remove session override remove session session update manager persisted update expired stats update time now timenow system current time millis currenttimemillis time alive timealive time now timenow session get creation time internal getcreationtimeinternal update session max alive time updatesessionmaxalivetime time alive timealive expired sessions expiredsessions increment and get incrementandget session timing sessiontiming timing session timing sessiontiming time now timenow time alive timealive session expiration timing sessionexpirationtiming session expiration timing sessionexpirationtiming add timing session expiration timing sessionexpirationtiming poll session get id internal getidinternal sessions remove session get id internal getidinternal override remove property change listener removepropertychangelistener property change listener propertychangelistener listener support remove property change listener removepropertychangelistener listener override change session id changesessionid session session string old id oldid session get id internal getidinternal session set id setid generate session id generatesessionid string new id newid session get id internal getidinternal container fire container event firecontainerevent context change session event string old id oldid new id newid inherit doc inheritdoc implementation excludes session attributes distribution attribute matches link get session attribute name filter getsessionattributenamefilter override will attribute distribute willattributedistribute string object pattern session attribute name pattern sessionattributenamepattern get session attribute name pattern getsessionattributenamepattern session attribute name pattern sessionattributenamepattern session attribute name pattern sessionattributenamepattern matcher matches get warn on session attribute filter failure getwarnonsessionattributefilterfailure log is debug enabled isdebugenabled string msg get string getstring manager base managerbase session attribute name filter sessionattributenamefilter session attribute name pattern sessionattributenamepattern get warn on session attribute filter failure getwarnonsessionattributefilterfailure log warn msg log debug msg pattern session attribute value class name pattern sessionattributevalueclassnamepattern get session attribute value class name pattern getsessionattributevalueclassnamepattern session attribute value class name pattern sessionattributevalueclassnamepattern session attribute value class name pattern sessionattributevalueclassnamepattern matcher get class getclass get name getname matches get warn on session attribute filter failure getwarnonsessionattributefilterfailure log is debug enabled isdebugenabled string msg get string getstring manager base managerbase session attribute value class name filter sessionattributevalueclassnamefilter get class getclass get name getname session attribute name pattern sessionattributenamepattern get warn on session attribute filter failure getwarnonsessionattributefilterfailure log warn msg log debug msg methods session do load doload method standard session standardsession get new session getnewsession standard session standardsession generate session identifier string generate session id generatesessionid string result result thread safe multiple increments lost big deal fact duplicate bigger issue duplicates result session id generator sessionidgenerator generate session id generatesessionid sessions contains key containskey result result methods retrieve enclosing engine manager engine object engine get engine getengine engine container get container getcontainer get parent getparent engine engine retrieve jvm r out e jvmroute enclosing engine jvm r out e jvmroute string get jvm r out e getjvmroute engine get engine getengine get jvm r out e getjvmroute methods override set session counter setsessioncounter session counter sessioncounter session counter sessioncounter session counter sessioncounter override get session counter getsessioncounter session counter sessioncounter number duplicated session id s ids generated random source bigger problems count duplicates get duplicates getduplicates duplicates set duplicates setduplicates duplicates duplicates duplicates override get active sessions getactivesessions sessions size override get max active getmaxactive max active maxactive override set max active setmaxactive max active maxactive max active update lock maxactiveupdatelock max active maxactive max active maxactive maximum number active sessions allowed limit get max active sessions getmaxactivesessions max active sessions maxactivesessions maximum number active sessions allowed limit param max maximum number sessions set max active sessions setmaxactivesessions max old max active sessions oldmaxactivesessions max active sessions maxactivesessions max active sessions maxactivesessions max support fire property change firepropertychange max active sessions maxactivesessions integer value of valueof old max active sessions oldmaxactivesessions integer value of valueof max active sessions maxactivesessions override get session max alive time getsessionmaxalivetime session max alive time sessionmaxalivetime override set session max alive time setsessionmaxalivetime session max alive time sessionmaxalivetime session max alive time update lock sessionmaxalivetimeupdatelock session max alive time sessionmaxalivetime session max alive time sessionmaxalivetime updates session max alive time sessionmaxalivetime attribute candidate larger current param session alive time sessionalivetime candidate seconds session max alive time sessionmaxalivetime update session max alive time updatesessionmaxalivetime session alive time sessionalivetime session alive time sessionalivetime session max alive time sessionmaxalivetime session max alive time update lock sessionmaxalivetimeupdatelock session alive time sessionalivetime session max alive time sessionmaxalivetime session max alive time sessionmaxalivetime session alive time sessionalivetime inherit doc inheritdoc based sessions expire sessions expired data override get session average alive time getsessionaveragealivetime copy current stats list session timing sessiontiming copy array list arraylist session timing sessiontiming session expiration timing sessionexpirationtiming copy add all addall session expiration timing sessionexpirationtiming init counter result iterator session timing sessiontiming iter copy iterator calculate average iter has next hasnext session timing sessiontiming timing iter timing time alive timealive timing get duration getduration counter careful overflow result result counter counter time alive timealive counter result inherit doc inheritdoc based creation time previous sessions created sessions created data override get session create rate getsessioncreaterate system current time millis currenttimemillis copy current stats list session timing sessiontiming copy array list arraylist session timing sessiontiming session creation timing sessioncreationtiming copy add all addall session creation timing sessioncreationtiming init oldest counter result iterator session timing sessiontiming iter copy iterator calculate rate iter has next hasnext session timing sessiontiming timing iter timing counter timing get timestamp gettimestamp oldest oldest timing get timestamp gettimestamp counter oldest result counter oldest result integer max result inherit doc inheritdoc based exp iry expiry time previous sessions expired sessions expired data current rate sessions minute session expiration override get session expire rate getsessionexpirerate system current time millis currenttimemillis copy current stats list session timing sessiontiming copy array list arraylist session timing sessiontiming session expiration timing sessionexpirationtiming copy add all addall session expiration timing sessionexpirationtiming init oldest counter result iterator session timing sessiontiming iter copy iterator calculate rate iter has next hasnext session timing sessiontiming timing iter timing counter timing get timestamp gettimestamp oldest oldest timing get timestamp gettimestamp counter oldest result counter oldest reporting result integer max result debug ging debugging space separated list session id s ids active string list session ids listsessionids string builder stringbuilder string builder stringbuilder iterator string sessions key set keyset iterator has next hasnext append append to string tostring debug ging debugging param session id sessionid session int erest interest param key key attribute attribute session string get session attribute getsessionattribute string session id sessionid string key session sessions session id sessionid log is info enabled isinfoenabled log info session session id sessionid object get session getsession get attribute getattribute key to string tostring returns session session session org anized organized hash map hashmap mapping session attribute names string representation values param session id sessionid session hash map hashmap mapping session attribute names string representation values session exists session attributes hash map hashmap string string get session getsession string session id sessionid session sessions session id sessionid log is info enabled isinfoenabled log info session session id sessionid enumeration string get session getsession get attribute names getattributenames has more elements hasmoreelements hash map hashmap string string map hash map hashmap string string has more elements hasmoreelements string attr name attrname next element nextelement map attr name attrname get session attribute getsessionattribute session id sessionid attr name attrname map expire session expiresession string session id sessionid session sessions session id sessionid log is info enabled isinfoenabled log info session session id sessionid expire get this accessed timestamp getthisaccessedtimestamp string session id sessionid session sessions session id sessionid get this accessed time getthisaccessedtime string get this accessed time getthisaccessedtime string session id sessionid session sessions session id sessionid log is info enabled isinfoenabled log info session session id sessionid get this accessed time getthisaccessedtime to string tostring get last accessed timestamp getlastaccessedtimestamp string session id sessionid session sessions session id sessionid get last accessed time getlastaccessedtime string get last accessed time getlastaccessedtime string session id sessionid session sessions session id sessionid log is info enabled isinfoenabled log info session session id sessionid get last accessed time getlastaccessedtime to string tostring string get creation time getcreationtime string session id sessionid session sessions session id sessionid log is info enabled isinfoenabled log info session session id sessionid get creation time getcreationtime to string tostring get creation timestamp getcreationtimestamp string session id sessionid session sessions session id sessionid get creation time getcreationtime override string to string tostring string builder stringbuilder string builder stringbuilder get class getclass get name getname append container append container append container get name getname append to string tostring jmx registration override string get object name key properties getobjectnamekeyproperties string builder stringbuilder string builder stringbuilder type manager container context append context string context name contextname container get name getname context name contextname starts with startswith append append context name contextname context context context container append host append context get parent getparent get name getname impossible handle safe append container append container get name getname to string tostring suppress warnings suppresswarnings deprecation override string get domain internal getdomaininternal m bean utils mbeanutils get domain getdomain container session timing sessiontiming timestamp duration session timing sessiontiming timestamp duration timestamp timestamp duration duration time stamp piece timing milliseconds get timestamp gettimestamp timestamp duration piece timing seconds get duration getduration duration