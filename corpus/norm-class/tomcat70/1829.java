licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes group int erceptors interceptors java serializable java util queue java util concurrent concurrent linked queue concurrentlinkedqueue java util concurrent atomic atomic integer atomicinteger org junit assert false assertfalse org junit fail org junit org junit org junit test org apache catalina tribes channel org apache catalina tribes channel exception channelexception org apache catalina tribes channel listener channellistener org apache catalina tribes channel message channelmessage org apache catalina tribes member org apache catalina tribes tester util testerutil org apache catalina tribes group channel interceptor base channelinterceptorbase org apache catalina tribes group group channel groupchannel org apache catalina tribes group interceptor payload interceptorpayload test order interceptor testorderinterceptor group channel groupchannel channels order interceptor orderinterceptor order itcs orderitcs mangle order interceptor mangleorderinterceptor mangleitcs test listener testlistener test channel count channelcount thread threads set up setup exception system println setup channels group channel groupchannel channel count channelcount order itcs orderitcs order interceptor orderinterceptor channel count channelcount mangleitcs mangle order interceptor mangleorderinterceptor channel count channelcount test test listener testlistener channel count channelcount threads thread channel count channelcount channel count channelcount channels group channel groupchannel order itcs orderitcs order interceptor orderinterceptor mangleitcs mangle order interceptor mangleorderinterceptor order itcs orderitcs set expire setexpire max channels add interceptor addinterceptor order itcs orderitcs channels add interceptor addinterceptor mangleitcs test test listener testlistener channels add channel listener addchannellistener test threads thread override channels start channel thread sleep exception print stack trace printstacktrace tester util testerutil add random domain addrandomdomain channels channel count channelcount threads start channel count channelcount threads join thread sleep test test order testorder exception member dest channels get members getmembers atomic integer atomicinteger atomic integer atomicinteger channels send dest integer value of valueof get and add getandadd thread sleep test length assert false assertfalse test fail test test order testorder exception member dest channels get members getmembers atomic integer atomicinteger atomic integer atomicinteger queue exception exception queue exceptionqueue concurrent linked queue concurrentlinkedqueue exception runnable runnable override channels channels send dest integer value of valueof get and add getandadd exception exception queue exceptionqueue add thread threads thread threads length threads thread threads length threads start threads length threads join exception queue exceptionqueue is empty isempty fail exception sending threads exception queue exceptionqueue remove to string tostring thread sleep test length assert false assertfalse test fail tear down teardown exception system println tear down teardown channel count channelcount channels channel main string args org junit runner j unit core junitcore main test order interceptor testorderinterceptor get name getname test listener testlistener channel listener channellistener test listener testlistener cnt total fail override message received messagereceived serializable msg member sender total integer integer msg int value intvalue cnt fail cnt system println listener message received count total fail fail override accept serializable msg member sender msg integer mangle order interceptor mangleorderinterceptor channel interceptor base channelinterceptorbase channel message channelmessage hold member dest override send message sendmessage member destination channel message channelmessage msg interceptor payload interceptorpayload payload channel exception channelexception hold system println skip ping skipping message msg hold channel message channelmessage msg deep clone deepclone dest member destination length system arraycopy destination dest dest length system println sending message msg send message sendmessage destination msg payload system println sending message hold send message sendmessage dest hold hold dest