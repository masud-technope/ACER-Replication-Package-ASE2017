licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina websocket java io exception ioexception java input stream inputstream java input stream reader inputstreamreader java reader java nio byte buffer bytebuffer java nio charset malformed input exception malformedinputexception java nio charset unmappable character exception unmappablecharacterexception org apache coyote http upgrade upgrade inbound upgradeinbound org apache coyote http upgrade upgrade outbound upgradeoutbound org apache coyote http upgrade upgrade processor upgradeprocessor org apache tomcat util buf utf decoder org apache tomcat util net abstract endpoint abstractendpoint handler socket state socketstate base implementation process web socket websocket connections based str eams streams applications extend provide application specific functionality applications operate message basis stream basis link message inbound messageinbound deprecated replaced jsr web socket websocket implementation removed tomcat deprecated stream inbound streaminbound upgrade inbound upgradeinbound class loader classloader application class loader applicationclassloader upgrade processor upgradeprocessor processor ws outbound wsoutbound out bound outbound out bound byte buffer size outboundbytebuffersize ws outbound wsoutbound buffer size out bound char buffer size outboundcharbuffersize ws outbound wsoutbound buffer size stream inbound streaminbound application class loader applicationclassloader thread current thread currentthread get context class loader getcontextclassloader get outbound byte buffer size getoutboundbytebuffersize out bound byte buffer size outboundbytebuffersize applies link ws outbound wsoutbound instance returned link get ws outbound getwsoutbound created subsequent call link set upgrade outbound setupgradeoutbound upgrade outbound upgradeoutbound current link ws outbound wsoutbound instance param out bound byte buffer size outboundbytebuffersize set outbound byte buffer size setoutboundbytebuffersize out bound byte buffer size outboundbytebuffersize out bound byte buffer size outboundbytebuffersize out bound byte buffer size outboundbytebuffersize get outbound char buffer size getoutboundcharbuffersize out bound char buffer size outboundcharbuffersize applies link ws outbound wsoutbound instance returned link get ws outbound getwsoutbound created subsequent call link set upgrade outbound setupgradeoutbound upgrade outbound upgradeoutbound current link ws outbound wsoutbound instance param out bound char buffer size outboundcharbuffersize set outbound char buffer size setoutboundcharbuffersize out bound char buffer size outboundcharbuffersize out bound char buffer size outboundcharbuffersize out bound char buffer size outboundcharbuffersize override set upgrade outbound setupgradeoutbound upgrade outbound upgradeoutbound upgrade outbound upgradeoutbound out bound outbound ws outbound wsoutbound upgrade outbound upgradeoutbound out bound byte buffer size outboundbytebuffersize out bound char buffer size outboundcharbuffersize override set upgrade processor setupgradeprocessor upgrade processor upgradeprocessor processor processor processor out bound outbound side web socket websocket connection writing data client ws outbound wsoutbound get ws outbound getwsoutbound out bound outbound override socket state socketstate on data ondata io exception ioexception start start message consist multiple frames ws input stream wsinputstream ws is wsis ws input stream wsinputstream processor get ws outbound getwsoutbound ws frame wsframe frame ws is wsis next frame nextframe frame todo user defined extensions define values rsv frame get rsv getrsv close outbound connection closeoutboundconnection constants status protocol error socket state socketstate closed op code opcode frame get op code getopcode op code opcode constants opcode binary do on binary data doonbinarydata ws is wsis op code opcode constants opcode text input stream reader inputstreamreader input stream reader inputstreamreader ws is wsis utf decoder do on text data doontextdata op code opcode constants opcode close close outbound connection closeoutboundconnection frame socket state socketstate closed op code opcode constants opcode ping get ws outbound getwsoutbound pong frame get pay load getpayload op code opcode constants opcode pong do on pong doonpong frame get pay load getpayload unknown op code opcode close outbound connection closeoutboundconnection constants status protocol error socket state socketstate closed frame ws is wsis next frame nextframe malformed input exception malformedinputexception mie close outbound connection closeoutboundconnection constants status bad data socket state socketstate closed unmappable character exception unmappablecharacterexception uce close outbound connection closeoutboundconnection constants status bad data socket state socketstate closed io exception ioexception ioe close outbound connection closeoutboundconnection constants status protocol error socket state socketstate closed socket state socketstate upgraded do on binary data doonbinarydata input stream inputstream io exception ioexception call on binary data onbinarydata web application loader thread thread current thread currentthread class loader classloader get context class loader getcontextclassloader set context class loader setcontextclassloader application class loader applicationclassloader on binary data onbinarydata set context class loader setcontextclassloader do on text data doontextdata reader io exception ioexception call on text data ontextdata web application loader thread thread current thread currentthread class loader classloader get context class loader getcontextclassloader set context class loader setcontextclassloader application class loader applicationclassloader on text data ontextdata set context class loader setcontextclassloader close outbound connection closeoutboundconnection status byte buffer bytebuffer data io exception ioexception get ws outbound getwsoutbound close status data do on close doonclose status close outbound connection closeoutboundconnection ws frame wsframe frame io exception ioexception get ws outbound getwsoutbound close frame do on close doonclose constants status close normal out bound outbound connection signal connection closed error param status web socket websocket status code report application do on close doonclose status call on close onclose web application loader thread thread current thread currentthread class loader classloader get context class loader getcontextclassloader set context class loader setcontextclassloader application class loader applicationclassloader on close onclose status set context class loader setcontextclassloader do on pong doonpong byte buffer bytebuffer payload call on pong onpong web application loader thread thread current thread currentthread class loader classloader get context class loader getcontextclassloader set context class loader setcontextclassloader application class loader applicationclassloader on pong onpong payload set context class loader setcontextclassloader override on upgrade complete onupgradecomplete call on open onopen web application loader thread thread current thread currentthread class loader classloader get context class loader getcontextclassloader set context class loader setcontextclassloader application class loader applicationclassloader on open onopen out bound outbound set context class loader setcontextclassloader int ended intended overridden classes not ified notified out bound outbound connection established implementation param out bound outbound out bound outbound web socket websocket connection on open onopen ws outbound wsoutbound out bound outbound int ended intended overridden classes not ified notified out bound outbound connection closed implementation param status status code close reason on close onclose status int ended intended overridden classes not ified notified pong received implementation param payload payload included pong on pong onpong byte buffer bytebuffer payload method called binary web socket websocket message process message presented stream for med formed frames number frames transmit message visible application param web socket websocket message io exception ioexception problem occurs processing message exception trigger closing web socket websocket connection on binary data onbinarydata input stream inputstream io exception ioexception method called text ual textual web socket websocket message process message presented reader for med formed frames number frames transmit message visible application param web socket websocket message io exception ioexception problem occurs processing message exception trigger closing web socket websocket connection on text data ontextdata reader io exception ioexception implementation sets read timeout infinite expects web socket websocket application close connection longer required applications wishing explicit timeout override method choice read timeout milliseconds infinite override get read timeout getreadtimeout