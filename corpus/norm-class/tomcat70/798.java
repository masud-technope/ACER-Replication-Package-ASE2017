licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache naming resources java file java file output stream fileoutputstream java io exception ioexception java input stream inputstream java print writer printwriter javax naming binding javax naming composite name compositename javax naming context javax naming initial context initialcontext javax naming naming enumeration namingenumeration javax naming naming exception namingexception javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org junit assert equals assertequals org junit assert true asserttrue org junit org junit test org apache catalina core standard context standardcontext org apache catalina deploy context environment contextenvironment org apache catalina deploy context resource contextresource org apache catalina startup expand war expandwar org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest org apache tomcat util buf byte chunk bytechunk test naming context testnamingcontext tomcat base test tomcatbasetest test test lookup singleton resource testlookupsingletonresource exception do test lookup dotestlookup test test lookup non singleton resource testlookupnonsingletonresource exception do test lookup dotestlookup do test lookup dotestlookup use singleton resource usesingletonresource exception tomcat tomcat get tomcat instance gettomcatinstance tomcat enable naming enablenaming file system doc base docbase required standard context standardcontext ctx standard context standardcontext tomcat add context addcontext create resource context resource contextresource context resource contextresource set name setname list foo set type settype org apache naming resources tester object testerobject set property setproperty factory org apache naming resources tester factory testerfactory set singleton setsingleton use singleton resource usesingletonresource ctx get naming resources getnamingresources add resource addresource map test servlet bug servlet bug servlet bug servlet tomcat add servlet addservlet ctx bug servlet bug servlet ctx add servlet mapping addservletmapping bug servlet tomcat start byte chunk bytechunk get url geturl http localhost get port getport string expected use singleton resource usesingletonresource expected equal expected note qual notequal assert equals assertequals expected to string tostring test test aliases testaliases exception sample text string fox text foxtext quick brown fox jumps lazy do g dog string lorem ipsum loremipsum lorem ipsum do lor dolor sit amet cons ectetur consectetur adipisicing elit sed eiusmod temp or tempor inc ididunt incididunt lab ore labore do lore dolore magna aliqua temporary doc base docbase alt ernates alternates aliases file tmp dir tmpdir file get temporary directory gettemporarydirectory tomcat unit test test naming context testnamingcontext get name getname clean slate expand war expandwar delete tmp dir tmpdir file doc base docbase file tmp dir tmpdir doc base docbase file alternate file tmp dir tmpdir alternate file alternate file tmp dir tmpdir alternate register clean add delete on tear down adddeleteonteardown tmp dir tmpdir tmp dir tmpdir mkdirs io exception ioexception create temp directory tmp dir tmpdir doc base docbase mkdir io exception ioexception create temp directory doc base docbase alternate mkdir io exception ioexception create temp directory alternate alternate mkdir io exception ioexception create temp directory alternate create file alternate directory attempt access file output stream fileoutputstream fos file output stream fileoutputstream file alternate test txt fos write fox text foxtext get bytes getbytes utf fos flush fos close fos file output stream fileoutputstream file alternate test txt fos write lorem ipsum loremipsum get bytes getbytes utf fos flush fos close create context file dir context filedircontext ctx file dir context filedircontext ctx set doc base setdocbase doc base docbase get canonical path getcanonicalpath ctx set aliases setaliases alternate get canonical path getcanonicalpath alternate get canonical path getcanonicalpath check alias object file ctx lookup test txt assert not null assertnotnull file assert true asserttrue file resource buffer resource res resource file input stream inputstream res stream content streamcontent len len read buffer close string contents string buffer len utf assert equals assertequals fox text foxtext contents check alias file ctx lookup test txt assert not null assertnotnull file assert true asserttrue file resource res resource file res stream content streamcontent len read buffer close contents string buffer len utf assert equals assertequals lorem ipsum loremipsum contents test aliases spaces separators ctx set aliases setaliases alternate get canonical path getcanonicalpath alternate get canonical path getcanonicalpath check alias file ctx lookup test txt assert not null assertnotnull file assert true asserttrue file resource res resource file res stream content streamcontent len read buffer close contents string buffer len utf assert equals assertequals fox text foxtext contents check alias file ctx lookup test txt assert not null assertnotnull file assert true asserttrue file resource res resource file res stream content streamcontent len read buffer close contents string buffer len utf assert equals assertequals lorem ipsum loremipsum contents bug servlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain utf print writer printwriter resp get writer getwriter context ctx initial context initialcontext object obj ctx lookup java comp env list foo object obj ctx lookup java comp env list foo obj obj print equal print note qual notequal naming exception namingexception print stack trace printstacktrace test test list bindings testlistbindings exception tomcat tomcat get tomcat instance gettomcatinstance tomcat enable naming enablenaming file system doc base docbase required standard context standardcontext ctx standard context standardcontext tomcat add context addcontext create resource context resource contextresource context resource contextresource set name setname list foo set type settype org apache naming resources tester object testerobject set property setproperty factory org apache naming resources tester factory testerfactory ctx get naming resources getnamingresources add resource addresource map test servlet bug servlet bug servlet bug servlet tomcat add servlet addservlet ctx bug servlet bug servlet ctx add servlet mapping addservletmapping bug servlet tomcat start byte chunk bytechunk get url geturl http localhost get port getport assert equals assertequals org apache naming resources tester object testerobject to string tostring bug servlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain utf print writer printwriter resp get writer getwriter context ctx initial context initialcontext naming enumeration namingenumeration binding enm ctx list bindings listbindings java comp env list enm has more hasmore binding enm print get object getobject get class getclass get name getname naming exception namingexception print stack trace printstacktrace test test bean factory testbeanfactory exception tomcat tomcat get tomcat instance gettomcatinstance tomcat enable naming enablenaming file system doc base docbase required standard context standardcontext ctx standard context standardcontext tomcat add context addcontext create resource context resource contextresource context resource contextresource set name setname bug set type settype org apache naming resources tester object testerobject set property setproperty factory org apache naming factory bean factory beanfactory set property setproperty foo ctx get naming resources getnamingresources add resource addresource map test servlet bug servlet bug servlet bug servlet tomcat add servlet addservlet ctx bug servlet bug servlet ctx add servlet mapping addservletmapping bug servlet tomcat start byte chunk bytechunk get url geturl http localhost get port getport assert equals assertequals to string tostring bug servlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain utf print writer printwriter resp get writer getwriter context ctx initial context initialcontext object obj ctx lookup java comp env bug tester object testerobject tester object testerobject obj print get foo getfoo naming exception namingexception print stack trace printstacktrace test test bug testbug exception do test bug dotestbug test test bug testbug exception do test bug dotestbug do test bug dotestbug exception on failed write exceptiononfailedwrite exception tomcat tomcat get tomcat instance gettomcatinstance tomcat enable naming enablenaming file system doc base docbase required standard context standardcontext ctx standard context standardcontext tomcat add context addcontext ctx set jndi exception on failed write setjndiexceptiononfailedwrite exception on failed write exceptiononfailedwrite map test servlet bug servlet bug servlet bug servlet tomcat add servlet addservlet ctx bug servlet bug servlet ctx add servlet mapping addservletmapping bug servlet tomcat start byte chunk bytechunk byte chunk bytechunk get url geturl http localhost get port getport assert equals assertequals assert true asserttrue to string tostring bug servlet expected exception on failed write exceptiononfailedwrite assert true asserttrue to string tostring bug servlet error message bug servlet http servlet httpservlet serialversionuid string expected test value testvalue string error message error override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain utf print writer printwriter resp get writer getwriter context ctx initial context initialcontext context env context ctx lookup java comp env env add to environment addtoenvironment test name testname expected print env get environment getenvironment test name testname env close naming exception namingexception print error message naming exception namingexception print stack trace printstacktrace test test bug testbug exception tomcat tomcat get tomcat instance gettomcatinstance tomcat enable naming enablenaming file system doc base docbase required standard context standardcontext ctx standard context standardcontext tomcat add context addcontext create resource context environment contextenvironment env context environment contextenvironment env set name setname env set type settype get name getname env set value setvalue ctx get naming resources getnamingresources add environment addenvironment env map test servlet bug servlet bug servlet bug servlet tomcat add servlet addservlet ctx bug servlet bug servlet ctx add servlet mapping addservletmapping bug servlet tomcat start byte chunk bytechunk byte chunk bytechunk get url geturl http localhost get port getport assert equals assertequals assert true asserttrue to string tostring true true truetrue bug servlet http servlet httpservlet serialversionuid string jndi java comp env override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain utf print writer printwriter resp get writer getwriter context init ctx initctx initial context initialcontext init ctx initctx lookup jndi init ctx initctx lookup composite name compositename jndi print print naming exception namingexception servlet exception servletexception test test bug testbug exception tomcat tomcat get tomcat instance gettomcatinstance tomcat enable naming enablenaming file app dir appdir file test webapp app dir relative server org apache catalina context ctxt tomcat add webapp addwebapp test app dir appdir get absolute path getabsolutepath tomcat start byte chunk bytechunk byte chunk bytechunk get url geturl http localhost get port getport test bug nnnn bug jsp assert equals assertequals http servlet response httpservletresponse assert true asserttrue to string tostring context environment contextenvironment ctxt get naming resources getnamingresources find environment findenvironment bug assert equals assertequals bug mapped name mappedname get property getproperty mapped name mappedname