licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina loader java file java util arrays java util linked hash set linkedhashset java util locale java util java util string tokenizer stringtokenizer org apache catalina lifecycle exception lifecycleexception webapp loader webapploader custom ized customized classpath configuration context xml additional classpath entry webapp classpath making easy emulate standard webapp assembly webapp dependencies jars web inf lib pre context doc base docbase web apps webapps mydocbase loader class name classname org apache catalina loader virtual webapp loader virtualwebapploader virtual classpath virtualclasspath dir classes some dir somedir some jar somejar jar some dir somedir jar context pre code jar code suffix include jar files directory file directory exist skipped author fabrizio giustina virtual webapp loader virtualwebapploader webapp loader webapploader org apache juli logging log log org apache juli logging log factory logfactory get log getlog virtual webapp loader virtualwebapploader code code separated list additional path elements string virtual classpath virtualclasspath construct webapp loader webapploader defined parent loader actual parent system loader virtual webapp loader virtualwebapploader construct webapp loader webapploader loader defined parent class loader classloader ultimately create param parent parent loader virtual webapp loader virtualwebapploader class loader classloader parent parent code virtual classpath virtualclasspath code attribute automatically code context code code virtual classpath virtualclasspath code attribute context xml file param path code code separated list path elements set virtual classpath setvirtualclasspath string path virtual classpath virtualclasspath path returns search virtual first searchvirtualfirst get search virtual first getsearchvirtualfirst get search external first getsearchexternalfirst param search virtual first searchvirtualfirst virtual path searched webapp set search virtual first setsearchvirtualfirst search virtual first searchvirtualfirst set search external first setsearchexternalfirst search virtual first searchvirtualfirst implement requirements link org apache catalina util lifecycle base lifecyclebase start internal startinternal exception lifecycle exception lifecycleexception component detects fatal error prevents component override start internal startinternal lifecycle exception lifecycleexception add jar directory virtual classpath repositories list calling start standard webapp loader webapploader string tokenizer stringtokenizer tkn string tokenizer stringtokenizer virtual classpath virtualclasspath string linked hash set linkedhashset string tkn has more tokens hasmoretokens string token tkn next token nexttoken trim token is empty isempty log is debug enabled isdebugenabled log debug get string getstring virtual webapp loader virtualwebapploader token token token ends with endswith jar glob token token substring token length jar length file directory file token directory is directory isdirectory log is debug enabled isdebugenabled log debug get string getstring virtual webapp loader virtualwebapploader token not directory notdirectory directory get absolute path getabsolutepath log is debug enabled isdebugenabled log debug get string getstring virtual webapp loader virtualwebapploader token glob dir directory get absolute path getabsolutepath string file names filenames directory list arrays sort file names filenames file names filenames length string filename file names filenames to lower case tolowercase locale english filename ends with endswith jar file file file directory file names filenames file is file isfile log is debug enabled isdebugenabled log debug get string getstring virtual webapp loader virtualwebapploader token not file notfile file get absolute path getabsolutepath log is debug enabled isdebugenabled log debug get string getstring virtual webapp loader virtualwebapploader token file file get absolute path getabsolutepath add file touri to string tostring single file directory file file file token file exists log is debug enabled isdebugenabled log debug get string getstring virtual webapp loader virtualwebapploader token not exists notexists file get absolute path getabsolutepath log is debug enabled isdebugenabled log debug get string getstring virtual webapp loader virtualwebapploader token file file get absolute path getabsolutepath add file touri to string tostring string repository add repository addrepository repository start internal startinternal