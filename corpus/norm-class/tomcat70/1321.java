licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina loader java lang reflect method java security access controller accesscontroller java security privileged action privilegedaction org apache catalina lifecycle exception lifecycleexception org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util comp at compat jre compat jrecompat parallel loading implementation webapp class loader base webappclassloaderbase parallel loading java jre parallel webapp class loader parallelwebappclassloader webapp class loader base webappclassloaderbase log log log factory logfactory get log getlog parallel webapp class loader parallelwebappclassloader jre compat jrecompat is jre isjre parallel loading capable method register parallel registerparallel class loader classloader get declared method getdeclaredmethod register as parallel capable registerasparallelcapable access controller accesscontroller do privileged doprivileged privileged action privilegedaction object override object register parallel registerparallel set accessible setaccessible result register parallel registerparallel invoke result boolean value booleanvalue log warn get string getstring webapp class loader parallel webappclassloaderparallel registration failed registrationfailed exception parallel webapp class loader parallelwebappclassloader parallel webapp class loader parallelwebappclassloader class loader classloader parent parent returns copy loader file transformers tool java persistence api providers inspect entity classes absence ins trumentation instrumentation guaranteed context link java lang ins trument instrument class file transformer classfiletransformer link java lang ins trument instrument class file transformer classfiletransformer transform class loader classloader string java security protection domain protectiondomain transform method returned loader resource cache cleared classes ins trumented instrumented retained returned transformer free copy loader override parallel webapp class loader parallelwebappclassloader copy without transformers copywithouttransformers parallel webapp class loader parallelwebappclassloader result parallel webapp class loader parallelwebappclassloader get parent getparent copy state without transformers copystatewithouttransformers result result start lifecycle exception lifecycleexception illegal state exception illegalstateexception result