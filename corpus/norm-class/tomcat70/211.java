licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util modeler java file java file input stream fileinputstream java input stream inputstream java lang management management factory managementfactory java net url java util array list arraylist java util hash map hashmap java util hashtable java util iterator java util list javax management dynamicmbean javax management m bean attribute info mbeanattributeinfo javax management m bean info mbeaninfo javax management m bean operation info mbeanoperationinfo javax management m bean registration mbeanregistration javax management m bean server mbeanserver javax management m bean server factory mbeanserverfactory javax management malformed object name exception malformedobjectnameexception javax management object name objectname org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util modeler modules mode ler source modelersource registry modeler m beans mbeans main entry point modeler methods create manipulate model mbeans simplify starting version longer singleton methods deprecated container environment expect applications reg is tries registries mbean methods marked exp erimental experimental internal author craig mc clanahan mcclanahan author costin manolache registry registrymbean m bean registration mbeanregistration log instance write log messages log log log factory logfactory get log getlog registry support factory methods isolate apps enhance security hash map hashmap object registry per loader registries perloaderregistries registry instance created factory method time called registry registry reg isty registy fields code m bean server mbeanserver code instance register management beans m bean server mbeanserver server managed bean managedbean instances beans registry keyed hash map hashmap string managed bean managedbean descriptors hash map hashmap string managed bean managedbean list managed beans keyed hash map hashmap string managed bean managedbean descriptors by class descriptorsbyclass hash map hashmap string managed bean managedbean map avoid duplicated searching loading descriptors hash map hashmap string url searched paths searchedpaths hash map hashmap string url object guard small ints array access reset not ifications notifications hashtable string hashtable string integer id domains iddomains hashtable string hashtable string integer hashtable string ids hashtable string registry methods factories factory method create code registry code instance method registry methods deprecated should n shouldn current version versions thread loader param key support application isolation context loader set use context class loader setusecontextclassloader called registry returned param guard prevent access registry untrusted components registry get registry getregistry object key object guard registry local registry localregistry per loader registries perloaderregistries key key thread current thread currentthread get context class loader getcontextclassloader key local registry localregistry per loader registries perloaderregistries key local registry localregistry local registry localregistry registry local registry localregistry key key local registry localregistry guard guard per loader registries perloaderregistries key local registry localregistry local registry localregistry local registry localregistry guard local registry localregistry guard guard xxx permission local registry localregistry registry registry registry registry guard registry guard guard registry containers isolate apps called highly recommended call method registry container environment compatibility param enable set use context class loader setusecontextclassloader enable enable per loader registries perloaderregistries hash map hashmap object registry methods lifecycle method clean registry metadata called reset metadata resetmetadata override descriptors by class descriptorsbyclass hash map hashmap string managed bean managedbean descriptors hash map hashmap string managed bean managedbean searched paths searchedpaths hash map hashmap string url load extended mlet file source url file input stream inputstream mbeans instantiated registered attributes result list object names objectnames param source input stream inputstream url file param class loader classloader load mbeans jmx mechanism registered load ers loaders list object name objectname loaded mbeans exception override list object name objectname loadmbeans object source class loader classloader exception load mbeans source mbeanssource source load descriptors source file url input stream inputstream descriptors file file url extension ser serialized version loaded method explicitly load metadata required cases register component registercomponent method find metadata param source override load metadata loadmetadata object source exception load descriptors loaddescriptors source register bean creating modeler mbean adding m bean server mbeanserver metadata loaded read file named mbeans descriptors ser mbeans descriptors xml parent bean instance dynamicmbean metadata converted model mbean wrap modeler services supported metadata int rospection introspection extract automatically mbean registered unregistered component m bean registration mbeanregistration methods called method method set registry setregistry takes registrymbean parameter called current registry param bean object registered param oname registration param type type mbean declared mbeans descriptors hint subclasses override register component registercomponent object bean string oname string type exception register component registercomponent bean object name objectname oname type unregister component check registered mask errors helper param oname override unregister component unregistercomponent string oname unregister component unregistercomponent object name objectname oname malformed object name exception malformedobjectnameexception log info error creating object invoke operation list mbeans implement lifecycle operations param mbeans list object name objectname invoke operations param operation operation init start param fail first failfirst exceptions exception override invoke list object name objectname mbeans string operation fail first failfirst exception mbeans iterator object name objectname itr mbeans iterator itr has next hasnext object name objectname current itr current get method info getmethodinfo current operation get bean server getmbeanserver invoke current operation object string exception fail first failfirst log info error initial izing initializing current to string tostring registry faster access not ifications notifications operations optimize param domain name space namespace param type not ification notification unique domain combination override get id getid string domain string domain domain hashtable string integer domain table domaintable id domains iddomains domain domain table domaintable domain table domaintable hashtable string integer id domains iddomains domain domain table domaintable integer domain table domaintable int value intvalue ids domain ids domain code domain table domaintable integer value of valueof code code metadata methods add bean metadata beans registry internal components param bean managed bean add managed bean addmanagedbean managed bean managedbean bean xxx group descriptors bean get name getname bean bean get type gettype descriptors by class descriptorsbyclass bean get type gettype bean find managed bean definition bean code code param managed bean returned names full managed bean managedbean find managed bean findmanagedbean string xxx group group type managed bean managedbean descriptors descriptors by class descriptorsbyclass bean names managed beans registry string find managed beans findmanagedbeans descriptors key set keyset to array toarray string bean names managed beans registry belong group param group group int erest interest code code select beans belong group string find managed beans findmanagedbeans string group array list arraylist string array list arraylist string iterator managed bean managedbean items descriptors values iterator items has next hasnext managed bean managedbean item items group item get group getgroup add item get name getname group equals item get group getgroup add item get name getname string values string size to array toarray values remove existing bean beans registry param bean managed bean removed remove managed bean removemanagedbean managed bean managedbean bean todo change group descriptors remove bean get name getname descriptors by class descriptorsbyclass remove bean get type gettype help ers helpers type attribute object metadata param oname param att name attname metadata attribute string get type gettype object name objectname oname string att name attname string type m bean info mbeaninfo info info server get bean info getmbeaninfo oname exception log info find metadata object oname m bean attribute info mbeanattributeinfo att info attinfo info get attributes getattributes att info attinfo length att name attname equals att info attinfo get name getname type att info attinfo get type gettype type find operation info method param oname param op name opname operation info operation m bean operation info mbeanoperationinfo get method info getmethodinfo object name objectname oname string op name opname m bean info mbeaninfo info info server get bean info getmbeaninfo oname exception log info find metadata oname m bean operation info mbeanoperationinfo att info attinfo info get operations getoperations att info attinfo length op name opname equals att info attinfo get name getname att info attinfo unregister component helper avoids exceptions checking mbean registered param oname unregister component unregistercomponent object name objectname oname get bean server getmbeanserver is registered isregistered oname get bean server getmbeanserver unregistermbean oname throwable log error error unregistering mbean factory method create code m bean server mbeanserver code instance m bean server mbeanserver get bean server getmbeanserver system current time millis currenttimemillis server m bean server factory mbeanserverfactory find bean server findmbeanserver size server m bean server factory mbeanserverfactory find bean server findmbeanserver log is debug enabled isdebugenabled log debug existing m bean server mbeanserver system current time millis currenttimemillis server management factory managementfactory get platform bean server getplatformmbeanserver log is debug enabled isdebugenabled log debug creating m bean server mbeanserver system current time millis currenttimemillis server find load metadata managed bean managedbean find managed bean findmanagedbean object bean bean class beanclass string type exception bean bean class beanclass bean class beanclass bean get class getclass type type bean class beanclass get name getname existing descriptor managed bean managedbean managed find managed bean findmanagedbean type search descriptor managed check parent packages log is debug enabled isdebugenabled log debug descriptor find descriptor finddescriptor bean class beanclass type managed find managed bean findmanagedbean type int rospection introspection managed log is debug enabled isdebugenabled log debug intro spec ting introspecting int rospection introspection load descriptors loaddescriptors mbeans descriptors int rospection source mbeansdescriptorsintrospectionsource bean class beanclass type managed find managed bean findmanagedbean type managed log warn metadata type managed set name setname type add managed bean addmanagedbean managed managed experimental convert string object based type components provide plug gability pluggability consistent avoid dup lication duplication tasks param type fully qualified param string converted converted object convert value convertvalue string type string object obj value objvalue type java lang string equals type string obj value objvalue javax management object name objectname equals type object name objectname equals type obj value objvalue object name objectname malformed object name exception malformedobjectnameexception java lang integer equals type equals type obj value objvalue integer value of valueof java lang equals type equals type obj value objvalue value of valueof java lang equals type equals type obj value objvalue value of valueof obj value objvalue exp erimental experimental param source type sourcetype param source param param list descriptors exception list object name objectname load string source type sourcetype object source string param exception log is trace enabled istraceenabled log trace load source string location string type object input source inputsource source url url url url source location url to string tostring type param input source inputsource url open stream openstream source type sourcetype source type sourcetype source type from ext sourcetypefromext location source file location file source get absolute path getabsolutepath input source inputsource file input stream fileinputstream file source type param source type sourcetype source type sourcetype source type from ext sourcetypefromext location source input stream inputstream type param input source inputsource source source location source get name getname type param input source inputsource source source type sourcetype source type sourcetype mbeans descriptors int rospection source mbeansdescriptorsintrospectionsource source type sourcetype source type sourcetype mbeans descriptors digester source mbeansdescriptorsdigestersource mode ler source modelersource get mode ler source getmodelersource source type sourcetype list object name objectname mbeans load descriptors loaddescriptors type input source inputsource mbeans string source type from ext sourcetypefromext string ends with endswith ser mbeans descriptors ser source mbeansdescriptorssersource ends with endswith xml mbeans descriptors digester source mbeansdescriptorsdigestersource register component xxx param bean param oname param type exception register component registercomponent object bean object name objectname oname string type exception log is debug enabled isdebugenabled log debug managed oname bean log error component oname type type bean get class getclass get name getname managed bean managedbean managed find managed bean findmanagedbean bean get class getclass type real mbean created registered dynamicmbean mbean managed creatembean bean get bean server getmbeanserver is registered isregistered oname log is debug enabled isdebugenabled log debug unregistering existing component oname get bean server getmbeanserver unregistermbean oname get bean server getmbeanserver registermbean mbean oname exception log error error registering oname lookup component descriptor parent packages param package name packagename load descriptors loaddescriptors string package name packagename class loader classloader class loader classloader string res package name packagename replace log is trace enabled istraceenabled log trace finding descriptor res searched paths searchedpaths package name packagename string descriptors res mbeans descriptors ser url durl class loader classloader get resource getresource descriptors durl descriptors res mbeans descriptors xml durl class loader classloader get resource getresource descriptors durl log debug durl searched paths searchedpaths package name packagename durl descriptors ends with endswith xml load descriptors loaddescriptors mbeans descriptors digester source mbeansdescriptorsdigestersource durl load descriptors loaddescriptors mbeans descriptors ser source mbeansdescriptorssersource durl exception log error error loading durl param source type sourcetype param source param param exception load descriptors loaddescriptors string source type sourcetype object source string param exception load source type sourcetype source param lookup component descriptor parent packages param bean class beanclass param type find descriptor finddescriptor bean class beanclass string type type type bean class beanclass get name getname class loader classloader class loader classloader bean class beanclass class loader classloader bean class beanclass get class loader getclassloader class loader classloader class loader classloader thread current thread currentthread get context class loader getcontextclassloader class loader classloader class loader classloader get class getclass get class loader getclassloader string class name classname type string pkg class name classname pkg index of indexof last comp lastcomp pkg last index of lastindexof last comp lastcomp pkg pkg substring last comp lastcomp searched paths searchedpaths pkg load descriptors loaddescriptors pkg class loader classloader mode ler source modelersource get mode ler source getmodelersource string type exception type type mbeans descriptors digester source mbeansdescriptorsdigestersource type index of indexof type org apache tomcat util modeler modules type for name forname type mode ler source modelersource mode ler source modelersource new instance newinstance registration override object name objectname pre register preregister m bean server mbeanserver server object name objectname exception server server override post register postregister registration done registrationdone override pre deregister prederegister exception override post deregister postderegister deprecated methods tomcat off icial official release deprecated deprecated managed bean managedbean find managed bean findmanagedbean bean class beanclass string type exception find managed bean findmanagedbean bean class beanclass type code m bean server mbeanserver code util ized utilized registered management beans param server code m bean server mbeanserver code instance set bean server setmbeanserver m bean server mbeanserver server server server reset metadata resetmetadata