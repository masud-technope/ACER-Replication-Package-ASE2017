licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc pool int erceptor interceptor java lang reflect constructor java lang reflect invocation handler invocationhandler java lang reflect invocation target exception invocationtargetexception java lang reflect method java lang reflect proxy java sql callable statement callablestatement java sql prepared statement preparedstatement java sql result set resultset java sql sql exception sqlexception java sql statement org apache juli logging log org apache juli logging log factory logfactory implementation jdbc interceptor jdbcinterceptor proxies result sets resultsets statements author guillermo fernandes statement decorator interceptor statementdecoratorinterceptor abstract create statement interceptor abstractcreatestatementinterceptor log logger log factory logfactory get log getlog statement decorator interceptor statementdecoratorinterceptor string execute query execute query executequery string generated get generated keys getgeneratedkeys string resultset get result set getresultset string resultset types execute query generated resultset constructors create statement proxies constructor constructors constructor abstract create statement interceptor abstractcreatestatementinterceptor statement type count constructor create result set resultset proxies constructor result set constructor resultsetconstructor override close invoked closeinvoked creates constructor proxy doesn exist param idx constructor param clazz proxy implement returns constructor create instances no such method exception nosuchmethodexception constructor get constructor getconstructor idx clazz no such method exception nosuchmethodexception constructors idx proxy class proxyclass proxy get proxy class getproxyclass statement decorator interceptor statementdecoratorinterceptor get class loader getclassloader clazz constructors idx proxy class proxyclass get constructor getconstructor invocation handler invocationhandler constructors idx constructor get result set constructor getresultsetconstructor no such method exception nosuchmethodexception result set constructor resultsetconstructor proxy class proxyclass proxy get proxy class getproxyclass statement decorator interceptor statementdecoratorinterceptor get class loader getclassloader result set resultset result set constructor resultsetconstructor proxy class proxyclass get constructor getconstructor invocation handler invocationhandler result set constructor resultsetconstructor creates statement int erceptor interceptor monitor query response times override object create statement createstatement object proxy method method object args object statement time string method get name getname constructor constructor string sql compare create statement create statement createstatement constructor get constructor getconstructor create statement idx statement compare prepare statement prepare statement preparestatement constructor get constructor getconstructor prepare statement idx prepared statement preparedstatement sql string args compare prepare call prepare call preparecall constructor get constructor getconstructor prepare call idx callable statement callablestatement sql string args bail system statement create decorator createdecorator proxy method args statement constructor sql exception invocation target exception invocationtargetexception throwable get cause getcause thread death threaddeath thread death threaddeath virtual machine error virtualmachineerror virtual machine error virtualmachineerror logger warn unable create statement proxy slow query report statement creates proxy statement param proxy proxy object method triggered creation statement called param method method called proxy param args arguments passed method call proxy param statement statement object pro xied proxied param constructor constructor desired proxy param sql sql statement proxy statement object create decorator createdecorator object proxy method method object args object statement constructor constructor string sql instantiation exception instantiationexception illegal access exception illegalaccessexception invocation target exception invocationtargetexception object result statement proxy statementproxy statement statement proxy statementproxy statement proxy statementproxy statement statement statement sql result constructor new instance newinstance object statement proxy statementproxy statement proxy statementproxy set actual proxy setactualproxy result statement proxy statementproxy set connection setconnection proxy statement proxy statementproxy set constructor setconstructor constructor result is execute query isexecutequery string method name methodname execute query equals method name methodname is execute query isexecutequery method method is execute query isexecutequery method get name getname is result set isresultset method method process process resultset types method process measure query execute time author fhanik statement proxy statementproxy java sql statement invocation handler invocationhandler closed delegate object actual proxy actualproxy object connection string sql constructor constructor statement proxy statementproxy delegate string sql delegate delegate sql sql get delegate getdelegate delegate string get sql getsql sql set connection setconnection object proxy connection proxy object get connection getconnection connection set actual proxy setactualproxy object proxy actual proxy actualproxy proxy object get actual proxy getactualproxy actual proxy actualproxy constructor get constructor getconstructor constructor set constructor setconstructor constructor constructor constructor constructor close invoked closeinvoked get delegate getdelegate get delegate getdelegate close sql exception sqlexception ignore closed delegate override object invoke object proxy method method object args throwable compare tostring val method to string tostring close invoked close compare close val method close called multiple times close closed calling is closed isclosed compare isclosed val method value of valueof closed calling bail closed sql exception sqlexception statement closed compare get connection getconnection val method connection process process is result set isresultset method process check execute query executing current time object result perform close cleanup close close invoked closeinvoked execute query result method invoke delegate args throwable invocation target exception invocationtargetexception get cause getcause get cause getcause process result constructor cons get result set constructor getresultsetconstructor result cons new instance newinstance object result set proxy resultsetproxy actual proxy actualproxy result result override string to string tostring string buffer stringbuffer buf string buffer stringbuffer statement proxy statementproxy get name getname buf append proxy buf append system identity hash code identityhashcode buf append sql buf append get sql getsql buf append delegate buf append get delegate getdelegate buf append connection buf append get connection getconnection buf append buf to string tostring result set proxy resultsetproxy invocation handler invocationhandler object object delegate result set proxy resultsetproxy object object delegate delegate delegate override object invoke object proxy method method object args throwable method get name getname equals get statement getstatement method invoke delegate args throwable invocation target exception invocationtargetexception get cause getcause get cause getcause