licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc test java sql connection java sql sql exception sqlexception org junit org junit test borrow wait test borrowwaittest default test case defaulttestcase test test wait time testwaittime exception wait datasource set max active setmaxactive datasource set max wait setmaxwait wait connection con datasource get connection getconnection start system current time millis currenttimemillis connection con datasource get connection getconnection assert false assertfalse happen connection unavailable con close sql exception sqlexception delta system current time millis currenttimemillis start inrange math abs wait delta assert true asserttrue connection acquired wait delta inrange con close test wait time infinite testwaittimeinfinite exception system err println test wait time infinite testwaittimeinfinite test disabled lock test suite wait datasource set max active setmaxactive datasource set max wait setmaxwait wait connection con datasource get connection getconnection start system current time millis currenttimemillis connection con datasource get connection getconnection assert false assertfalse happen connection unavailable sql exception sqlexception delta system current time millis currenttimemillis inrange math abs wait delta assert true asserttrue connection acquired con close