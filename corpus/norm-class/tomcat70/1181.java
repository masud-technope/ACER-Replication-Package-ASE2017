licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket server java net uri java util queue java util concurrent count down latch countdownlatch java util concurrent time unit timeunit javax servlet servlet context event servletcontextevent javax websocket container provider containerprovider javax websocket deployment exception deploymentexception javax websocket session javax websocket web socket container websocketcontainer javax websocket server server container servercontainer javax websocket server server endpoint config serverendpointconfig org junit org junit test org apache catalina context org apache catalina lifecycle state lifecyclestate org apache catalina servlets default servlet defaultservlet org apache catalina startup tomcat org apache tomcat unit test unittest tester servlet context testerservletcontext org apache tomcat websocket tester echo server testerechoserver org apache tomcat websocket tester message count client testermessagecountclient basic text basictext org apache tomcat websocket web socket base test websocketbasetest org apache tomcat websocket pojo tester util testerutil simple client simpleclient test ws server container testwsservercontainer web socket base test websocketbasetest test test bug testbug exception tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context ctx tomcat add context addcontext ctx add application listener addapplicationlistener bug config get name getname tomcat add servlet addservlet ctx default servlet defaultservlet ctx add servlet mapping addservletmapping tomcat start assert equals assertequals lifecycle state lifecyclestate started ctx get state getstate test test bug testbug exception tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context ctx tomcat add context addcontext ctx add application listener addapplicationlistener bug config get name getname tomcat add servlet addservlet ctx default servlet defaultservlet ctx add servlet mapping addservletmapping web socket container websocketcontainer ws container wscontainer container provider containerprovider get web socket container getwebsocketcontainer tomcat start assert equals assertequals lifecycle state lifecyclestate started ctx get state getstate simple client simpleclient client simple client simpleclient uri uri uri localhost get port getport echo basic echobasic session session session ws container wscontainer connect to server connecttoserver client uri count down latch countdownlatch latch count down latch countdownlatch basic text basictext handler basic text basictext latch session add message handler addmessagehandler handler session get basic remote getbasicremote send text sendtext echo basic echobasic latch result latchresult handler get latch getlatch await time unit timeunit seconds assert true asserttrue latch result latchresult queue string messages handler get messages getmessages assert equals assertequals messages size string message messages assert equals assertequals echo basic echobasic message session session close bug config ws context listener wscontextlistener override context initialized contextinitialized servlet context event servletcontextevent sce context initialized contextinitialized sce server container servercontainer server container servercontainer sce get servlet context getservletcontext get attribute getattribute constants server container servlet context attribute server endpoint config serverendpointconfig server endpoint config serverendpointconfig builder create tester echo server testerechoserver basic param build add endpoint addendpoint deployment exception deploymentexception runtime exception runtimeexception test test spec example testspecexample exception ws server container wsservercontainer ws server container wsservercontainer tester servlet context testerservletcontext server endpoint config serverendpointconfig config a configa server endpoint config serverendpointconfig builder create object build server endpoint config serverendpointconfig config b configb server endpoint config serverendpointconfig builder create object build server endpoint config serverendpointconfig config c configc server endpoint config serverendpointconfig builder create object build add endpoint addendpoint config a configa add endpoint addendpoint config b configb add endpoint addendpoint config c configc assert equals assertequals config b configb find mapping findmapping get config getconfig assert equals assertequals config a configa find mapping findmapping get config getconfig assert equals assertequals config c configc find mapping findmapping get config getconfig test test spec example testspecexample exception ws server container wsservercontainer ws server container wsservercontainer tester servlet context testerservletcontext server endpoint config serverendpointconfig config a configa server endpoint config serverendpointconfig builder create object build server endpoint config serverendpointconfig config b configb server endpoint config serverendpointconfig builder create object build add endpoint addendpoint config a configa add endpoint addendpoint config b configb assert equals assertequals config b configb find mapping findmapping get config getconfig test expected javax websocket deployment exception deploymentexception test duplicate paths testduplicatepaths exception ws server container wsservercontainer ws server container wsservercontainer tester servlet context testerservletcontext server endpoint config serverendpointconfig config a configa server endpoint config serverendpointconfig builder create object build server endpoint config serverendpointconfig config b configb server endpoint config serverendpointconfig builder create object build add endpoint addendpoint config a configa add endpoint addendpoint config b configb test expected javax websocket deployment exception deploymentexception test duplicate paths testduplicatepaths exception ws server container wsservercontainer ws server container wsservercontainer tester servlet context testerservletcontext server endpoint config serverendpointconfig config a configa server endpoint config serverendpointconfig builder create object build server endpoint config serverendpointconfig config b configb server endpoint config serverendpointconfig builder create object build add endpoint addendpoint config a configa add endpoint addendpoint config b configb test expected javax websocket deployment exception deploymentexception test duplicate paths testduplicatepaths exception ws server container wsservercontainer ws server container wsservercontainer tester servlet context testerservletcontext server endpoint config serverendpointconfig config a configa server endpoint config serverendpointconfig builder create object build server endpoint config serverendpointconfig config b configb server endpoint config serverendpointconfig builder create object build add endpoint addendpoint config a configa add endpoint addendpoint config b configb test test duplicate paths testduplicatepaths exception ws server container wsservercontainer ws server container wsservercontainer tester servlet context testerservletcontext server endpoint config serverendpointconfig config a configa server endpoint config serverendpointconfig builder create object build server endpoint config serverendpointconfig config b configb server endpoint config serverendpointconfig builder create object build add endpoint addendpoint config a configa add endpoint addendpoint config b configb assert equals assertequals config a configa find mapping findmapping get config getconfig assert equals assertequals config b configb find mapping findmapping get config getconfig