licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket server java io exception ioexception java util arrays java util collections java util comparator java util enum set enumset java util map java util java util sorted set sortedset java util tree set treeset java util concurrent concurrent hash map concurrenthashmap java util concurrent concurrent map concurrentmap java util concurrent executor service executorservice java util concurrent sync hronous queue synchronousqueue java util concurrent thread factory threadfactory java util concurrent thread pool executor threadpoolexecutor java util concurrent time unit timeunit java util concurrent atomic atomic long atomiclong javax servlet dispatcher type dispatchertype javax servlet filter registration filterregistration javax servlet servlet context servletcontext javax servlet servlet exception servletexception javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax websocket close reason closereason javax websocket close reason closereason close codes closecodes javax websocket deployment exception deploymentexception javax websocket encoder javax websocket endpoint javax websocket server server container servercontainer javax websocket server server endpoint serverendpoint javax websocket server server endpoint config serverendpointconfig javax websocket server server endpoint config serverendpointconfig configurator org apache juli logging log org apache juli logging log factory logfactory org apache tomcat instance manager instancemanager org apache tomcat util res string manager stringmanager org apache tomcat websocket ws session wssession org apache tomcat websocket ws web socket container wswebsocketcontainer org apache tomcat websocket pojo pojo endpoint server pojoendpointserver org apache tomcat websocket pojo pojo method mapping pojomethodmapping loader web application instance server container servercontainer web application wide defaults configured setting servlet context init ialisation initialisation parameters desired values link constants binary buffer size servlet context init param link constants text buffer size servlet context init param ws server container wsservercontainer ws web socket container wswebsocketcontainer server container servercontainer string manager stringmanager string manager stringmanager get manager getmanager constants log log log factory logfactory get log getlog ws server container wsservercontainer close reason closereason auth enticated authenticated http session closed close reason closereason close codes closecodes violated policy connection established authenticated http session ended ws write timeout wswritetimeout ws write timeout wswritetimeout ws write timeout wswritetimeout servlet context servletcontext servlet context servletcontext map string server endpoint config serverendpointconfig config exact match map configexactmatchmap concurrent hash map concurrenthashmap string server endpoint config serverendpointconfig concurrent map concurrentmap integer sorted set sortedset template path match templatepathmatch config template match map configtemplatematchmap concurrent hash map concurrenthashmap integer sorted set sortedset template path match templatepathmatch enforce no add after handshake enforcenoaddafterhandshake org apache tomcat websocket constants strict spec compliance add allowed addallowed concurrent map concurrentmap string ws session wssession authenticated sessions authenticatedsessions concurrent hash map concurrenthashmap string ws session wssession executor service executorservice executor service executorservice thread group threadgroup thread group threadgroup end points registered endpointsregistered ws server container wsservercontainer servlet context servletcontext servlet context servletcontext servlet context servletcontext servlet context servletcontext set instance manager setinstancemanager instance manager instancemanager servlet context servletcontext get attribute getattribute instance manager instancemanager get name getname configure servlet context wide defaults string servlet context servletcontext get init parameter getinitparameter constants binary buffer size servlet context init param set default max binary message buffer size setdefaultmaxbinarymessagebuffersize integer parse int parseint servlet context servletcontext get init parameter getinitparameter constants text buffer size servlet context init param set default max text message buffer size setdefaultmaxtextmessagebuffersize integer parse int parseint servlet context servletcontext get init parameter getinitparameter constants enforce add handshake context init param set enforce no add after handshake setenforcenoaddafterhandshake parse boolean parseboolean executor config executor core size executorcoresize executor keep alive time seconds executorkeepalivetimeseconds servlet context servletcontext get init parameter getinitparameter constants executor core size init param executor core size executorcoresize integer parse int parseint servlet context servletcontext get init parameter getinitparameter constants executor keep alivetime keepalivetime seconds init param executor keep alive time seconds executorkeepalivetimeseconds parse long parselong filter registration filterregistration dynamic servlet context servletcontext add filter addfilter tomcat web socket websocket jsr filter ws filter wsfilter set async supported setasyncsupported enum set enumset dispatcher type dispatchertype types enum set enumset dispatcher type dispatchertype request dispatcher type dispatchertype add mapping for url patterns addmappingforurlpatterns types web application executor threads web socket websocket server code create group threads single thread group threadgroup string buffer stringbuffer thread group name threadgroupname string buffer stringbuffer web socket server websocketserver equals servlet context servletcontext get context path getcontextpath thread group name threadgroupname append root thread group name threadgroupname append servlet context servletcontext get context path getcontextpath thread group threadgroup thread group threadgroup thread group name threadgroupname to string tostring ws thread factory wsthreadfactory ws thread factory wsthreadfactory ws thread factory wsthreadfactory thread group threadgroup executor service executorservice thread pool executor threadpoolexecutor executor core size executorcoresize integer max executor keep alive time seconds executorkeepalivetimeseconds time unit timeunit seconds sync hronous queue synchronousqueue runnable ws thread factory wsthreadfactory published endpoint implementation path configuration link ws server container wsservercontainer servlet context servletcontext called calling method param configuration creating endpoint instances deployment exception deploymentexception override add endpoint addendpoint server endpoint config serverendpointconfig deployment exception deploymentexception enforce no add after handshake enforcenoaddafterhandshake add allowed addallowed deployment exception deploymentexception get string getstring server container servercontainer add not allowed addnotallowed servlet context servletcontext deployment exception deploymentexception get string getstring server container servercontainer servlet context missing servletcontextmissing string path get path getpath add method mapping user properties pojo method mapping pojomethodmapping method mapping methodmapping pojo method mapping pojomethodmapping get endpoint class getendpointclass get decoders getdecoders path method mapping methodmapping get on close getonclose method mapping methodmapping get on open getonopen method mapping methodmapping get on error getonerror method mapping methodmapping has message handlers hasmessagehandlers get user properties getuserproperties pojo endpoint server pojoendpointserver pojo method mapping key method mapping methodmapping uri template uritemplate uri template uritemplate uri template uritemplate path uri template uritemplate has parameters hasparameters integer key integer value of valueof uri template uritemplate get segment count getsegmentcount sorted set sortedset template path match templatepathmatch template matches templatematches config template match map configtemplatematchmap key template matches templatematches ensure concurrent threads execute block tree set treeset instance template matches templatematches tree set treeset template path match templatepathmatch template path match comparator templatepathmatchcomparator get instance getinstance config template match map configtemplatematchmap put if absent putifabsent key template matches templatematches template matches templatematches config template match map configtemplatematchmap key template matches templatematches add template path match templatepathmatch uri template uritemplate duplicate uri template uritemplate deployment exception deploymentexception get string getstring server container servercontainer duplicate paths duplicatepaths path get endpoint class getendpointclass get endpoint class getendpointclass exact match server endpoint config serverendpointconfig config exact match map configexactmatchmap path duplicate path mappings deployment exception deploymentexception get string getstring server container servercontainer duplicate paths duplicatepaths path get endpoint class getendpointclass get endpoint class getendpointclass end points registered endpointsregistered equivalent link add endpoint addendpoint server endpoint config serverendpointconfig publishing plain java objects pojo s pojos annotated web socket websocket end points endpoints param pojo annotated pojo override add endpoint addendpoint pojo deployment exception deploymentexception server endpoint serverendpoint annotation pojo get annotation getannotation server endpoint serverendpoint annotation deployment exception deploymentexception get string getstring server container servercontainer missing annotation missingannotation pojo get name getname string path annotation validate encoders validate encode rs validateencoders annotation encoders server endpoint config serverendpointconfig server endpoint config serverendpointconfig configurator configurator clazz configuratorclazz annotation configurator configurator configurator configurator clazz configuratorclazz equals configurator configurator annotation configurator new instance newinstance instantiation exception instantiationexception deployment exception deploymentexception get string getstring server container servercontainer configurator fail configuratorfail annotation configurator get name getname pojo get class getclass get name getname illegal access exception illegalaccessexception deployment exception deploymentexception get string getstring server container servercontainer configurator fail configuratorfail annotation configurator get name getname pojo get class getclass get name getname server endpoint config serverendpointconfig builder create pojo path decoders arrays as list aslist annotation decoders encoders arrays as list aslist annotation encoders sub protocols subprotocols arrays as list aslist annotation sub protocols subprotocols configurator configurator build add endpoint addendpoint override destroy shutdown executor shutdownexecutor destroy executor has n hasn fully shutdown won destroy thread group threads running mark thread group daemon dest roys destroys thread count reaches synchronization thread group threadgroup needed race destroy call termination thread thread group marked daemon explicit destroy call thread count threadcount thread group threadgroup active count activecount success old thread count oldthreadcount thread count threadcount thread group threadgroup thread count threadcount thread yield thread count threadcount thread group threadgroup active count activecount thread count threadcount thread count threadcount old thread count oldthreadcount stabilized retry thread count threadcount thread group threadgroup set daemon setdaemon thread group threadgroup destroy success illegal thread state exception illegalthreadstateexception exception success log warn get string getstring server container servercontainer thread group not destroyed threadgroupnotdestroyed thread group threadgroup get name getname integer value of valueof thread count threadcount are end points registered areendpointsregistered end points registered endpointsregistered web socket websocket specification mechanism tomcat prop rietary proprietary method enable applications program matically programmatically determine upgrade individual request web socket websocket note method tomcat party code removed param request request object upgrade d upgraded param response response object pop ulated populated result upgrade param server endpoint process upgrade request param path params pathparams path parameters upgrade request servlet exception servletexception configuration error prevents upgrade place io exception ioexception error occurs upgrade process do upgrade doupgrade http servlet request httpservletrequest request http servlet response httpservletresponse response server endpoint config serverendpointconfig map string string path params pathparams servlet exception servletexception io exception ioexception upgrade util upgradeutil do upgrade doupgrade request response path params pathparams ws mapping result wsmappingresult find mapping findmapping string path add allowed addallowed add allowed addallowed check exact match simple templates server endpoint config serverendpointconfig config exact match map configexactmatchmap path ws mapping result wsmappingresult collections string string empty map emptymap exact match template matches uri template uritemplate path uri template pathuritemplate path uri template pathuritemplate uri template uritemplate path deployment exception deploymentexception number segments match integer key integer value of valueof path uri template pathuritemplate get segment count getsegmentcount sorted set sortedset template path match templatepathmatch template matches templatematches config template match map configtemplatematchmap key template matches templatematches matches list alphabetical order normal ise d normalised templates correct match matches map string string path params pathparams template path match templatepathmatch template match templatematch template matches templatematches path params pathparams template match templatematch get uri template geturitemplate match path uri template pathuritemplate path params pathparams template match templatematch get config getconfig match ws mapping result wsmappingresult path params pathparams is enforce no add after handshake isenforcenoaddafterhandshake enforce no add after handshake enforcenoaddafterhandshake set enforce no add after handshake setenforcenoaddafterhandshake enforce no add after handshake enforcenoaddafterhandshake enforce no add after handshake enforcenoaddafterhandshake enforce no add after handshake enforcenoaddafterhandshake ws write timeout wswritetimeout get timeout gettimeout ws write timeout wswritetimeout inherit doc inheritdoc overridden visible classes override register session registersession endpoint endpoint ws session wssession ws session wssession register session registersession endpoint ws session wssession ws session wssession is open isopen ws session wssession get user principal getuserprincipal ws session wssession get http session id gethttpsessionid register authenticated session registerauthenticatedsession ws session wssession ws session wssession get http session id gethttpsessionid inherit doc inheritdoc overridden visible classes override unregister session unregistersession endpoint endpoint ws session wssession ws session wssession ws session wssession get user principal getuserprincipal ws session wssession get http session id gethttpsessionid unregister authenticated session unregisterauthenticatedsession ws session wssession ws session wssession get http session id gethttpsessionid unregister session unregistersession endpoint ws session wssession register authenticated session registerauthenticatedsession ws session wssession ws session wssession string http session id httpsessionid ws session wssession ws sessions wssessions authenticated sessions authenticatedsessions http session id httpsessionid ws sessions wssessions ws sessions wssessions collections new set from map newsetfrommap concurrent hash map concurrenthashmap ws session wssession authenticated sessions authenticatedsessions put if absent putifabsent http session id httpsessionid ws sessions wssessions ws sessions wssessions authenticated sessions authenticatedsessions http session id httpsessionid ws sessions wssessions add ws session wssession unregister authenticated session unregisterauthenticatedsession ws session wssession ws session wssession string http session id httpsessionid ws session wssession ws sessions wssessions authenticated sessions authenticatedsessions http session id httpsessionid ws sessions wssessions http session ended ws sessions wssessions ws sessions wssessions remove ws session wssession close authenticated session closeauthenticatedsession string http session id httpsessionid ws session wssession ws sessions wssessions authenticated sessions authenticatedsessions remove http session id httpsessionid ws sessions wssessions ws sessions wssessions is empty isempty ws session wssession ws session wssession ws sessions wssessions ws session wssession close auth enticated authenticated http session closed io exception ioexception executor service executorservice get executor service getexecutorservice executor service executorservice shutdown executor shutdownexecutor executor service executorservice executor service executorservice shutdown executor service executorservice await termination awaittermination time unit timeunit seconds interrupted exception interruptedexception validate encode rs validateencoders encoder encoders deployment exception deploymentexception encoder encoder encoders instantiate decoder ensure valid deployment failed suppress warnings suppresswarnings unused encoder instance encoder new instance newinstance instantiation exception instantiationexception deployment exception deploymentexception get string getstring server container servercontainer encoder fail encoderfail encoder get name getname illegal access exception illegalaccessexception deployment exception deploymentexception get string getstring server container servercontainer encoder fail encoderfail encoder get name getname template path match templatepathmatch server endpoint config serverendpointconfig config uri template uritemplate uri template uritemplate template path match templatepathmatch server endpoint config serverendpointconfig config uri template uritemplate uri template uritemplate config config uri template uritemplate uri template uritemplate server endpoint config serverendpointconfig get config getconfig config uri template uritemplate get uri template geturitemplate uri template uritemplate comparator implementation thread safe create single instance template path match comparator templatepathmatchcomparator comparator template path match templatepathmatch template path match comparator templatepathmatchcomparator instance template path match comparator templatepathmatchcomparator template path match comparator templatepathmatchcomparator get instance getinstance instance template path match comparator templatepathmatchcomparator hide constructor override compare template path match templatepathmatch tpm template path match templatepathmatch tpm tpm get uri template geturitemplate get normal ized path getnormalizedpath compare to compareto tpm get uri template geturitemplate get normal ized path getnormalizedpath ws thread factory wsthreadfactory thread factory threadfactory thread group threadgroup atomic long atomiclong count atomic long atomiclong ws thread factory wsthreadfactory thread group threadgroup override thread new thread newthread runnable thread thread set name setname get name getname count increment and get incrementandget