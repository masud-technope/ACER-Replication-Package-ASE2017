licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket server java io exception ioexception javax servlet filter javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse handles initial http connection web socket websocket connections ws filter wsfilter filter ws server container wsservercontainer override init filter config filterconfig filter config filterconfig servlet exception servletexception ws server container wsservercontainer filter config filterconfig get servlet context getservletcontext get attribute getattribute constants server container servlet context attribute override do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain io exception ioexception servlet exception servletexception filter handle web socket websocket upgrade requests are end points registered areendpointsregistered upgrade util upgradeutil is web socket upgrade request iswebsocketupgraderequest request response chain do filter dofilter request response http request upgrade header web socket websocket http servlet request httpservletrequest req http servlet request httpservletrequest request http servlet response httpservletresponse resp http servlet response httpservletresponse response check web socket websocket implementation matching mapping string path string path info pathinfo req get path info getpathinfo path info pathinfo path req get servlet path getservletpath path req get servlet path getservletpath path info pathinfo ws mapping result wsmappingresult mapping result mappingresult find mapping findmapping path mapping result mappingresult endpoint registered requested path application handle redirect chain do filter dofilter request response upgrade util upgradeutil do upgrade doupgrade req resp mapping result mappingresult get config getconfig mapping result mappingresult get path params getpathparams override destroy