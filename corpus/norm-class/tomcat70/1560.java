licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc pool int erceptor interceptor java lang reflect constructor java lang reflect invocation target exception invocationtargetexception java lang reflect method java sql result set resultset java sql statement java util map java util concurrent concurrent hash map concurrenthashmap java util concurrent atomic atomic integer atomicinteger org apache tomcat jdbc pool connection pool connectionpool org apache tomcat jdbc pool pool properties poolproperties interceptor property interceptorproperty org apache tomcat jdbc pool pooled connection pooledconnection interceptor caches code prepared statement preparedstatement code callable statement callablestatement instances connection statement cache statementcache statement decorator interceptor statementdecoratorinterceptor string types string prepare statement prepare call string call able callable type string prepare call string prepared type string prepare statement string type string string statement cache attr statement cache statementcache get name getname cache properties statement cache cache prepared cacheprepared cache callable cachecallable max cache size maxcachesize pooled connection pooledconnection pcon string types is cache prepared iscacheprepared cache prepared cacheprepared is cache callable iscachecallable cache callable cachecallable get max cache size getmaxcachesize max cache size maxcachesize string get types gettypes types atomic integer atomicinteger get cache size getcachesize cache size cachesize override set properties setproperties map string interceptor property interceptorproperty properties set properties setproperties properties interceptor property interceptorproperty properties prepared cache prepared cacheprepared get value as boolean getvalueasboolean cache prepared cacheprepared properties call able callable cache callable cachecallable get value as boolean getvalueasboolean cache callable cachecallable properties max max cache size maxcachesize get value as int getvalueasint max cache size maxcachesize cache prepared cacheprepared cache callable cachecallable types types cache prepared cacheprepared types prepared type cache callable cachecallable types call able callable type types type properties statement cache cache size concurrent hash map concurrenthashmap connection pool connectionpool atomic integer atomicinteger cache size map cachesizemap concurrent hash map concurrenthashmap connection pool connectionpool atomic integer atomicinteger atomic integer atomicinteger cache size cachesize override pool started poolstarted connection pool connectionpool pool cache size map cachesizemap put if absent putifabsent pool atomic integer atomicinteger pool started poolstarted pool override pool closed poolclosed connection pool connectionpool pool cache size map cachesizemap remove pool pool closed poolclosed pool cache size actual statement cache override reset connection pool connectionpool parent pooled connection pooledconnection con reset parent con parent cache size cachesize pcon cache size cachesize cache size map cachesizemap parent pcon con pcon get attributes getattributes contains key containskey statement cache attr concurrent hash map concurrenthashmap string cached statement cachedstatement cache concurrent hash map concurrenthashmap string cached statement cachedstatement pcon get attributes getattributes statement cache attr cache override disconnected connection pool connectionpool parent pooled connection pooledconnection con final izing finalizing suppress warnings suppresswarnings unchecked concurrent hash map concurrenthashmap string cached statement cachedstatement statements concurrent hash map concurrenthashmap string cached statement cachedstatement con get attributes getattributes statement cache attr statements map entry string cached statement cachedstatement statements entry set entryset close statement closestatement get value getvalue statements clear disconnected parent con final izing finalizing close statement closestatement cached statement cachedstatement force close forceclose override object create decorator createdecorator object proxy method method object args object statement constructor constructor string sql instantiation exception instantiationexception illegal access exception illegalaccessexception invocation target exception invocationtargetexception process process types method process object result cached statement cachedstatement statement proxy statementproxy cached statement cachedstatement statement statement sql result constructor new instance newinstance object statement proxy statementproxy statement proxy statementproxy set actual proxy setactualproxy result statement proxy statementproxy set connection setconnection proxy statement proxy statementproxy set constructor setconstructor constructor result create decorator createdecorator proxy method args statement constructor sql override object invoke object proxy method method object args throwable process process types method process args length args string cached statement cachedstatement statement is cached iscached string args statement remove cache remove statement removestatement statement statement get actual proxy getactualproxy invoke proxy method args invoke proxy method args cached statement cachedstatement is cached iscached string sql suppress warnings suppresswarnings unchecked concurrent hash map concurrenthashmap string cached statement cachedstatement cache concurrent hash map concurrenthashmap string cached statement cachedstatement pcon get attributes getattributes statement cache attr cache sql cache statement cachestatement cached statement cachedstatement proxy suppress warnings suppresswarnings unchecked concurrent hash map concurrenthashmap string cached statement cachedstatement cache concurrent hash map concurrenthashmap string cached statement cachedstatement pcon get attributes getattributes statement cache attr proxy get sql getsql cache contains key containskey proxy get sql getsql cache size cachesize max cache size maxcachesize cache size cachesize increment and get incrementandget max cache size maxcachesize cache size cachesize decrement and get decrementandget cache statement cache proxy get sql getsql proxy remove statement removestatement cached statement cachedstatement proxy suppress warnings suppresswarnings unchecked concurrent hash map concurrenthashmap string cached statement cachedstatement cache concurrent hash map concurrenthashmap string cached statement cachedstatement pcon get attributes getattributes statement cache attr cache remove proxy get sql getsql cache size cachesize decrement and get decrementandget cached statement cachedstatement statement decorator interceptor statementdecoratorinterceptor statement proxy statementproxy statement cached cached statement cachedstatement statement parent string sql parent sql override close invoked closeinvoked cache should close shouldclose cache size cachesize max cache size maxcachesize cache proxy don reuse facade cached statement cachedstatement proxy cached statement cachedstatement get delegate getdelegate get sql getsql clear result set resultset result set resultset result get delegate getdelegate get result set getresultset result result is closed isclosed result close create facade object actual proxy actualproxy get constructor getconstructor new instance newinstance object proxy proxy set actual proxy setactualproxy actual proxy actualproxy proxy set connection setconnection get connection getconnection proxy set constructor setconstructor get constructor getconstructor cache statement cachestatement proxy proxy cached should close shouldclose exception remove statement removestatement proxy should close shouldclose close invoked closeinvoked closed delegate force close forceclose remove statement removestatement close invoked closeinvoked