licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina startup java buffered output stream bufferedoutputstream java file java file input stream fileinputstream java file output stream fileoutputstream java i o exception ioexception java input stream inputstream java output stream outputstream java util array list arraylist java util hash map hashmap java util hash set hashset java util iterator java util linked hash map linkedhashmap java util list java util locale java util map java util java util sorted set sortedset java util tree set treeset java util concurrent concurrent hash map concurrenthashmap java util concurrent executor service executorservice java util concurrent java util jar jar entry jarentry java util jar jar file jarfile java util regex matcher java util regex pattern javax management object name objectname org apache catalina container org apache catalina context org apache catalina distributed manager distributedmanager org apache catalina engine org apache catalina globals org apache catalina host org apache catalina lifecycle org apache catalina lifecycle event lifecycleevent org apache catalina lifecycle listener lifecyclelistener org apache catalina manager org apache catalina core standard context standardcontext org apache catalina core standard host standardhost org apache catalina util context name contextname org apache catalina util i o tools iotools org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util exception utils exceptionutils org apache tomcat util buf uri util uriutil org apache tomcat util digester digester org apache tomcat util modeler registry org apache tomcat util res string manager stringmanager startup event listener host config ures configures properties host defined contexts author craig mc clanahan mcclanahan author remy maucherat host config hostconfig lifecycle listener lifecyclelistener log log log factory logfactory get log getlog host config hostconfig resolution milliseconds file modification times file modification resolution instance variables app base file app base appbase config base file config base configbase java context configuration deprecated removed tomcat deprecated string config class configclass org apache catalina startup context config contextconfig java context implementation string context class contextclass org apache catalina core standard context standardcontext host host host jmx object name objectname component object name objectname oname string resources string manager stringmanager string manager stringmanager get manager getmanager constants deploy xml context config files package d packaged war files directories deployxml xml files copied catalina base conf engine host web application deployed copyxml unpack war files auto dep loying deploying applications code app base appbase code directory unpackwars map deployed applications map string deployed application deployedapplication deployed concurrent hash map concurrenthashmap string deployed application deployedapplication list applications service d serviced should n shouldn deployed undeployed redeployed moment array list arraylist string service d serviced array list arraylist string code digester code instance parse context descriptors digester digester create digester createdigester context class contextclass object digester lock digesterlock object list wars app base appbase invalid sequences string invalid wars invalidwars hash set hashset string properties context configuration deprecated removed tomcat deprecated string get config class getconfigclass config class configclass context configuration param config class configclass context configuration deprecated removed tomcat deprecated set config class setconfigclass string config class configclass config class configclass config class configclass context implementation string get context class getcontextclass context class contextclass context implementation param context class contextclass context implementation set context class setcontextclass string context class contextclass string old context class oldcontextclass context class contextclass context class contextclass context class contextclass old context class oldcontextclass equals context class contextclass digester lock digesterlock digester create digester createdigester get context class getcontextclass deploy xml config file flag component isdeployxml deployxml deploy xml config file flag component param deployxml deploy xml flag setdeployxml deployxml deployxml deployxml copy xml config file flag component iscopyxml copyxml copy xml config file flag component param copyxml copy xml flag setcopyxml copyxml copyxml copyxml unpack wa rs wars flag isunpackwars unpackwars unpack wa rs wars flag param unpackwars unpack wa rs wars flag setunpackwars unpackwars unpackwars unpackwars methods process start event host param event lifecycle event occurred override lifecycle event lifecycleevent lifecycle event lifecycleevent event identify host host host event get lifecycle getlifecycle host standard host standardhost setcopyxml standard host standardhost host iscopyxml setdeployxml standard host standardhost host isdeployxml setunpackwars standard host standardhost host isunpackwars set context class setcontextclass standard host standardhost host get context class getcontextclass class cast exception classcastexception log error get string getstring host config hostconfig cce event get lifecycle getlifecycle process event occurred event get type gettype equals lifecycle per iodic periodic event check event get type gettype equals lifecycle start event before start beforestart event get type gettype equals lifecycle start event start event get type gettype equals lifecycle event add service d serviced application list add service d addserviced string service d serviced add application service d serviced application is service d isserviced string service d serviced removed service d serviced application list remove service d removeserviced string service d serviced remove ins tant instant application deployed application deployed ins tant instant application deployed get deployment time getdeploymenttime string deployed application deployedapplication app deployed app app timestamp application deployed note applications defined server xml deployed code code application deployed code code application deployed exist is deployed isdeployed string deployed application deployedapplication app deployed app methods create digester parse context config files digester create digester createdigester string context class name contextclassname digester digester digester digester set valid ating setvalidating add object creation rule digester add object create addobjectcreate context context class name contextclassname class name classname properties object doesn matter extra properties digester add set properties addsetproperties context digester file return canonical path returncanonicalpath string path file file file path file base file system get property getproperty globals catalina base prop file is absolute isabsolute file file base path file get canonical file getcanonicalfile i o exception ioexception file file object representing application root directory host file app base appbase app base appbase app base appbase app base appbase return canonical path returncanonicalpath host get app base getappbase app base appbase file object representing configuration root directory host file config base configbase config base configbase config base configbase host get xml base getxmlbase config base configbase return canonical path returncanonicalpath host get xml base getxmlbase string builder stringbuilder xml dir xmldir string builder stringbuilder conf container parent host get parent getparent parent engine xml dir xmldir append xml dir xmldir append parent get name getname xml dir xmldir append xml dir xmldir append host get name getname config base configbase return canonical path returncanonicalpath xml dir xmldir to string tostring config base configbase config base configbase jmx management string get config base name getconfigbasename config base configbase get absolute path getabsolutepath deploy applications directories war files application root directory deploy apps deployapps file app base appbase app base appbase file config base configbase config base configbase string filtered app paths filteredapppaths filter app paths filterapppaths app base appbase list deploy xml descriptors config base configbase deploy descriptors deploydescriptors config base configbase config base configbase list deploy wa rs wars deploywars app base appbase filtered app paths filteredapppaths deploy expanded folders deploy dir ectories deploydirectories app base appbase filtered app paths filteredapppaths filter list application file paths remove match regular expression defined link host get deploy ignore getdeployignore param unfiltered app paths unfilteredapppaths list application paths filter filtered list application paths string filter app paths filterapppaths string unfiltered app paths unfilteredapppaths pattern filter host get deploy ignore pattern getdeployignorepattern filter unfiltered app paths unfilteredapppaths unfiltered app paths unfilteredapppaths list string filtered list filteredlist array list arraylist string matcher matcher string app path apppath unfiltered app paths unfilteredapppaths matcher matcher filter matcher app path apppath matcher reset app path apppath matcher matches log is debug enabled isdebugenabled log debug get string getstring host config hostconfig ignore path ignorepath app path apppath filtered list filteredlist add app path apppath filtered list filteredlist to array toarray string filtered list filteredlist size deploy applications directories war files application root directory deploy apps deployapps string file app base appbase app base appbase file config base configbase config base configbase context name contextname context name contextname string base name basename get base name getbasename deployment exists deploymentexists get name getname deploy xml descriptor config base configbase file xml file config base configbase base name basename xml xml exists deploy descriptor deploydescriptor xml deploy war file war file app base appbase base name basename war war exists deploywar war deploy expanded folder file dir file app base appbase base name basename dir exists deploy directory deploydirectory dir deploy xml context descriptors deploy descriptors deploydescriptors file config base configbase string files files executor service executorservice host get start stop executor getstartstopexecutor list array list arraylist files length file context xml contextxml file config base configbase files files to lower case tolowercase locale english ends with endswith xml context name contextname context name contextname files is service d isserviced get name getname deployment exists deploymentexists get name getname add sub mit submit deploy descriptor deploydescriptor context xml contextxml result result exception log error get string getstring host config hostconfig deploy descriptor deploydescriptor threaded error param param context xml contextxml context suppress warnings suppresswarnings deploy descriptor deploydescriptor context name contextname file context xml contextxml deployed application deployedapplication deployed app deployedapp deployed application deployedapplication get name getname start time starttime assume configuration descriptor deploy log is info enabled isinfoenabled start time starttime system current time millis currenttimemillis log info get string getstring host config hostconfig deploy descriptor deploydescriptor context xml contextxml get absolute path getabsolutepath context context is external war isexternalwar is external isexternal file expanded doc base expandeddocbase file input stream fileinputstream fis fis file input stream fileinputstream context xml contextxml digester lock digesterlock context context digester parse fis exception log error get string getstring host config hostconfig deploy descriptor deploydescriptor error context xml contextxml get absolute path getabsolutepath context failed context failedcontext digester reset clazz for name forname host get config class getconfigclass lifecycle listener lifecyclelistener listener lifecycle listener lifecyclelistener clazz new instance newinstance context add lifecycle listener addlifecyclelistener listener context set config file setconfigfile context xml contextxml touri tourl context set name setname get name getname context set path setpath get path getpath context set webapp version setwebappversion get version getversion add doc base docbase redeployed list war context get doc base getdocbase file doc base docbase file context get doc base getdocbase doc base docbase is absolute isabsolute doc base docbase file app base appbase context get doc base getdocbase external doc base docbase register xml redeploy doc base docbase get canonical path getcanonicalpath starts with startswith app base appbase get absolute path getabsolutepath file separator is external isexternal deployed app deployedapp redeploy resources redeployresources context xml contextxml get absolute path getabsolutepath value of valueof context xml contextxml last modified lastmodified deployed app deployedapp redeploy resources redeployresources doc base docbase get absolute path getabsolutepath value of valueof doc base docbase last modified lastmodified doc base docbase get absolute path getabsolutepath to lower case tolowercase locale english ends with endswith war is external war isexternalwar log warn get string getstring host config hostconfig deploy descriptor deploydescriptor local doc base specified localdocbasespecified doc base docbase ignore doc base docbase context set doc base setdocbase host add child addchild context throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring host config hostconfig deploy descriptor deploydescriptor error context xml contextxml get absolute path getabsolutepath fis fis close i o exception ioexception paths war expanded war app base appbase app base appbase dir expanded doc base expandeddocbase file app base appbase get base name getbasename context get doc base getdocbase context get doc base getdocbase to lower case tolowercase locale english ends with endswith war assume doc base docbase absolute expanded doc base expandeddocbase file context get doc base getdocbase expanded doc base expandeddocbase is absolute isabsolute doc base docbase relative relative app base appbase expanded doc base expandeddocbase file app base appbase context get doc base getdocbase unpackwar unpackwars unpackwar context standard context standardcontext unpackwar standard context standardcontext context getunpackwar watched is external war isexternalwar unpackwar deployed app deployedapp redeploy resources redeployresources expanded doc base expandeddocbase get absolute path getabsolutepath value of valueof expanded doc base expandeddocbase last modified lastmodified add watched resources addwatchedresources deployed app deployedapp expanded doc base expandeddocbase get absolute path getabsolutepath context add watched resources addwatchedresources deployed app deployedapp context find existing matching war expanded folder is external isexternal file war doc base wardocbase file expanded doc base expandeddocbase get absolute path getabsolutepath war war doc base wardocbase exists deployed app deployedapp redeploy resources redeployresources war doc base wardocbase get absolute path getabsolutepath value of valueof war doc base wardocbase last modified lastmodified trigger redeploy war deployed app deployedapp redeploy resources redeployresources war doc base wardocbase get absolute path getabsolutepath value of valueof unpackwar deployed app deployedapp redeploy resources redeployresources expanded doc base expandeddocbase get absolute path getabsolutepath value of valueof expanded doc base expandeddocbase last modified lastmodified add watched resources addwatchedresources deployed app deployedapp expanded doc base expandeddocbase get absolute path getabsolutepath context add watched resources addwatchedresources deployed app deployedapp context is external isexternal external doc bases docbases context xml deployed app deployedapp redeploy resources redeployresources context xml contextxml get absolute path getabsolutepath value of valueof context xml contextxml last modified lastmodified add global redeploy resources deleted don int erfere interfere deletion process add global redeploy resources addglobalredeployresources deployed app deployedapp host find child findchild context get name getname deployed context get name getname deployed app deployedapp log is info enabled isinfoenabled log info get string getstring host config hostconfig deploy descriptor deploydescriptor finished context xml contextxml get absolute path getabsolutepath value of valueof system current time millis currenttimemillis start time starttime deploy war files deploywars file app base appbase string files files executor service executorservice host get start stop executor getstartstopexecutor list array list arraylist files length files equals ignore case equalsignorecase meta inf files equals ignore case equalsignorecase web inf file war file app base appbase files files to lower case tolowercase locale english ends with endswith war war is file isfile invalid wars invalidwars files context name contextname context name contextname files is service d isserviced get name getname deployment exists deploymentexists get name getname deployed application deployedapplication app deployed get name getname unpackwar unpackwars unpackwar host find child findchild get name getname standard context standardcontext unpackwar standard context standardcontext host find child findchild get name getname getunpackwar unpackwar app check directory file dir file app base appbase get base name getbasename dir exists app log ged dir warning loggeddirwarning log warn get string getstring host config hostconfig deploy war deploywar hidden dir hiddendir dir get absolute file getabsolutefile war get absolute file getabsolutefile app log ged dir warning loggeddirwarning app log ged dir warning loggeddirwarning check wa rs wars sequences validate context path validatecontextpath app base appbase get base name getbasename log error get string getstring host config hostconfig illegal war name illegalwarname files invalid wars invalidwars add files add sub mit submit deploy war deploywar war result result exception log error get string getstring host config hostconfig deploy war deploywar threaded error validate context path validatecontextpath file app base appbase string context path contextpath comp licated complicated ideal canonical path file separator directory string builder stringbuilder doc base docbase string canonical doc base canonicaldocbase string canonical app base canonicalappbase app base appbase get canonical path getcanonicalpath doc base docbase string builder stringbuilder canonical app base canonicalappbase canonical app base canonicalappbase ends with endswith file separator doc base docbase append context path contextpath substring replace file separator char separatorchar doc base docbase append context path contextpath replace file separator char separatorchar point doc base docbase canonical file separator canonical doc base canonicaldocbase file doc base docbase to string tostring get canonical path getcanonicalpath doc base docbase compared canonical doc base canonicaldocbase ends with endswith file separator doc base docbase append file separator i o exception ioexception ioe sequences canonical doc base canonicaldocbase equals doc base docbase to string tostring param param war deploywar context name contextname file war checking nested meta inf context xml jar file jarfile jar input stream inputstream istream file output stream fileoutputstream fos buffered output stream bufferedoutputstream ostream file xml file app base appbase get base name getbasename meta inf context xml xml in war xmlinwar jar jar file jarfile war jar entry jarentry entry jar get jar entry getjarentry constants application context xml applicationcontextxml entry xml in war xmlinwar i o exception ioexception jar jar close i o exception ioexception ioe jar context context deployxml xml exists unpackwars copyxml digester lock digesterlock context context digester parse xml exception log error get string getstring host config hostconfig deploy descriptor deploydescriptor error war get absolute path getabsolutepath digester reset context context failed context failedcontext context set config file setconfigfile xml touri tourl deployxml xml in war xmlinwar digester lock digesterlock jar jar file jarfile war jar entry jarentry entry jar get jar entry getjarentry constants application context xml applicationcontextxml istream jar get input stream getinputstream entry context context digester parse istream exception log error get string getstring host config hostconfig deploy descriptor deploydescriptor error war get absolute path getabsolutepath digester reset istream istream close i o exception ioexception istream jar jar close i o exception ioexception jar context context failed context failedcontext context set config file setconfigfile uri util uriutil build jar url buildjarurl war constants application context xml applicationcontextxml deployxml xml in war xmlinwar block deployment meta inf context xml security configuration secure deployment log error get string getstring host config hostconfig deploy descriptor deploydescriptor blocked get path getpath constants application context xml applicationcontextxml file config base configbase get base name getbasename xml context context for name forname context class contextclass new instance newinstance throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring host config hostconfig deploy war deploywar error war get absolute path getabsolutepath context context failed context failedcontext copy this xml copythisxml deployxml host standard host standardhost copy this xml copythisxml standard host standardhost host iscopyxml host context override copy this xml copythisxml context standard context standardcontext copy this xml copythisxml standard context standardcontext context getcopyxml xml in war xmlinwar copy this xml copythisxml change location xml file config base xml file config base configbase get base name getbasename xml jar jar file jarfile war jar entry jarentry entry jar get jar entry getjarentry constants application context xml applicationcontextxml istream jar get input stream getinputstream entry fos file output stream fileoutputstream xml ostream buffered output stream bufferedoutputstream fos buffer istream read buffer ostream write buffer ostream flush i o exception ioexception ostream ostream close i o exception ioexception ioe ostream fos fos close i o exception ioexception ioe fos istream istream close i o exception ioexception ioe istream jar jar close i o exception ioexception ioe jar deployed application deployedapplication deployed app deployedapp deployed application deployedapplication get name getname xml exists deployxml copy this xml copythisxml start time starttime deploy application war file log is info enabled isinfoenabled start time starttime system current time millis currenttimemillis log info get string getstring host config hostconfig deploy war deploywar war get absolute path getabsolutepath populate redeploy resources war file deployed app deployedapp redeploy resources redeployresources war get absolute path getabsolutepath value of valueof war last modified lastmodified deployxml xml exists copy this xml copythisxml deployed app deployedapp redeploy resources redeployresources xml get absolute path getabsolutepath value of valueof xml last modified lastmodified xml file config base deployed app deployedapp redeploy resources redeployresources file config base configbase get base name getbasename xml get absolute path getabsolutepath value of valueof clazz for name forname host get config class getconfigclass lifecycle listener lifecyclelistener listener lifecycle listener lifecyclelistener clazz new instance newinstance context add lifecycle listener addlifecyclelistener listener context set name setname get name getname context set path setpath get path getpath context set webapp version setwebappversion get version getversion context set doc base setdocbase get base name getbasename war host add child addchild context throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring host config hostconfig deploy war deploywar error war get absolute path getabsolutepath unpacking wa rs wars doc base docbase mutated starting context unpackwar unpackwars unpackwar context standard context standardcontext unpackwar standard context standardcontext context getunpackwar unpackwar context get doc base getdocbase file doc base docbase file app base appbase get base name getbasename deployed app deployedapp redeploy resources redeployresources doc base docbase get absolute path getabsolutepath value of valueof doc base docbase last modified lastmodified add watched resources addwatchedresources deployed app deployedapp doc base docbase get absolute path getabsolutepath context deployxml copy this xml copythisxml xml in war xmlinwar xml exists deployed app deployedapp redeploy resources redeployresources xml get absolute path getabsolutepath value of valueof xml last modified lastmodified passing doc base docbase resources watched log ged logged debug level add watched resources addwatchedresources deployed app deployedapp context add global redeploy resources deleted don int erfere interfere deletion process add global redeploy resources addglobalredeployresources deployed app deployedapp deployed get name getname deployed app deployedapp log is info enabled isinfoenabled log info get string getstring host config hostconfig deploy war deploywar finished war get absolute path getabsolutepath value of valueof system current time millis currenttimemillis start time starttime deploy directories deploy dir ectories deploydirectories file app base appbase string files files executor service executorservice host get start stop executor getstartstopexecutor list array list arraylist files length files equals ignore case equalsignorecase meta inf files equals ignore case equalsignorecase web inf file dir file app base appbase files dir is directory isdirectory context name contextname context name contextname files is service d isserviced get name getname deployment exists deploymentexists get name getname add sub mit submit deploy directory deploydirectory dir result result exception log error get string getstring host config hostconfig deploy dir deploydir threaded error param param dir deploy directory deploydirectory context name contextname file dir start time starttime deploy application directory log is info enabled isinfoenabled start time starttime system current time millis currenttimemillis log info get string getstring host config hostconfig deploy dir deploydir dir get absolute path getabsolutepath context context file xml file dir constants application context xml applicationcontextxml file xml copy xmlcopy file config base configbase get base name getbasename xml deployed application deployedapplication deployed app deployedapp copy this xml copythisxml copyxml deployxml xml exists digester lock digesterlock context context digester parse xml exception log error get string getstring host config hostconfig deploy descriptor deploydescriptor error xml context failed context failedcontext digester reset context context failed context failedcontext copy this xml copythisxml context standard context standardcontext host context override copy this xml copythisxml standard context standardcontext context getcopyxml copy this xml copythisxml input stream inputstream output stream outputstream file input stream fileinputstream xml file output stream fileoutputstream xml copy xmlcopy i o tools iotools flow don ioe handle close i o exception ioexception close i o exception ioexception context set config file setconfigfile xml copy xmlcopy touri tourl context set config file setconfigfile xml touri tourl deployxml xml exists block deployment meta inf context xml security configuration secure deployment log error get string getstring host config hostconfig deploy descriptor deploydescriptor blocked get path getpath xml xml copy xmlcopy context failed context failedcontext context context for name forname context class contextclass new instance newinstance clazz for name forname host get config class getconfigclass lifecycle listener lifecyclelistener listener lifecycle listener lifecyclelistener clazz new instance newinstance context add lifecycle listener addlifecyclelistener listener context set name setname get name getname context set path setpath get path getpath context set webapp version setwebappversion get version getversion context set doc base setdocbase get base name getbasename host add child addchild context throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring host config hostconfig deploy dir deploydir error dir get absolute path getabsolutepath deployed app deployedapp deployed application deployedapplication get name getname xml exists deployxml copy this xml copythisxml fake deploy resource detect war point deployed app deployedapp redeploy resources redeployresources dir get absolute path getabsolutepath war value of valueof deployed app deployedapp redeploy resources redeployresources dir get absolute path getabsolutepath value of valueof dir last modified lastmodified deployxml xml exists copy this xml copythisxml deployed app deployedapp redeploy resources redeployresources xml copy xmlcopy get absolute path getabsolutepath value of valueof xml copy xmlcopy last modified lastmodified deployed app deployedapp redeploy resources redeployresources xml get absolute path getabsolutepath value of valueof xml last modified lastmodified fake deploy resource detect context xml file point deployed app deployedapp redeploy resources redeployresources xml copy xmlcopy get absolute path getabsolutepath value of valueof fake deploy resource detect context xml file point deployed app deployedapp redeploy resources redeployresources xml copy xmlcopy get absolute path getabsolutepath value of valueof xml exists deployed app deployedapp redeploy resources redeployresources xml get absolute path getabsolutepath value of valueof add watched resources addwatchedresources deployed app deployedapp dir get absolute path getabsolutepath context add global redeploy resources deleted don int erfere interfere deletion process add global redeploy resources addglobalredeployresources deployed app deployedapp deployed get name getname deployed app deployedapp log is info enabled isinfoenabled log info get string getstring host config hostconfig deploy dir deploydir finished dir get absolute path getabsolutepath value of valueof system current time millis currenttimemillis start time starttime check webapp deployed host param context name contextname context checked deployment exists deploymentexists string context name contextname deployed contains key containskey context name contextname host find child findchild context name contextname add watched resources context param app host config hostconfig deployed app param doc base docbase web app doc base docbase param context web application context add watched resources addwatchedresources deployed application deployedapplication app string doc base docbase context context fixme feature idea add support patterns web inf web inf xml check resource newer app timestamp file doc base file docbasefile doc base docbase doc base file docbasefile file doc base docbase doc base file docbasefile is absolute isabsolute doc base file docbasefile file app base appbase doc base docbase string watched resources watchedresources context find watched resources findwatchedresources watched resources watchedresources length file resource file watched resources watchedresources resource is absolute isabsolute doc base docbase resource file doc base file docbasefile watched resources watchedresources log is debug enabled isdebugenabled log debug ignoring existent watched resource watchedresource resource get absolute path getabsolutepath log is debug enabled isdebugenabled log debug watching watched resource watchedresource resource get absolute path getabsolutepath app reload resources reloadresources resource get absolute path getabsolutepath value of valueof resource last modified lastmodified add global redeploy resources addglobalredeployresources deployed application deployedapplication app redeploy resources processing hard code d coded delete file file host context xml hostcontextxml file get config base name getconfigbasename constants host context xml hostcontextxml host context xml hostcontextxml is file isfile app redeploy resources redeployresources host context xml hostcontextxml get absolute path getabsolutepath value of valueof host context xml hostcontextxml last modified lastmodified redeploy resources catalina base conf deleted file global context xml globalcontextxml return canonical path returncanonicalpath constants default context xml defaultcontextxml global context xml globalcontextxml is file isfile app redeploy resources redeployresources global context xml globalcontextxml get absolute path getabsolutepath value of valueof global context xml globalcontextxml last modified lastmodified check resources redeployment reloading deprecated link check resources checkresources deployed application deployedapplication removed tomcat deprecated check resources checkresources deployed application deployedapplication app check resources checkresources app check resources redeployment reloading param app web application check param skip file modification resolution check skipfilemodificationresolutioncheck checking files modification check requires file modification occurred resolution file time stamp skipped check resources checkresources deployed application deployedapplication app skip file modification resolution check skipfilemodificationresolutioncheck string resources app redeploy resources redeployresources key set keyset to array toarray string offset current time resolution file last modified lastmodified current time with resolution offset currenttimewithresolutionoffset system current time millis currenttimemillis file modification resolution resources length file resource file resources log is debug enabled isdebugenabled log debug checking context app redeploy resource resource last modified lastmodified app redeploy resources redeployresources resources long value longvalue resource exists last modified lastmodified missed bug resource last modified lastmodified last modified lastmodified host get auto deploy getautodeploy resource last modified lastmodified current time with resolution offset currenttimewithresolutionoffset skip file modification resolution check skipfilemodificationresolutioncheck resource is directory isdirectory action required modified directory app redeploy resources redeployresources resources value of valueof resource last modified lastmodified app has descriptor hasdescriptor resource get name getname to lower case tolowercase locale english ends with endswith war modified war triggers reload xml file resource deleted expanded war context context context host find child findchild app string doc base docbase context get doc base getdocbase doc base docbase to lower case tolowercase locale english ends with endswith war expanded directory file doc base file docbasefile file doc base docbase doc base file docbasefile is absolute isabsolute doc base file docbasefile file app base appbase doc base docbase reload app doc base file docbasefile resource get absolute path getabsolutepath reload app update times app redeploy resources redeployresources resources value of valueof resource last modified lastmodified app timestamp system current time millis currenttimemillis unpackwar unpackwars unpackwar context standard context standardcontext unpackwar standard context standardcontext context getunpackwar unpackwar add watched resources addwatchedresources app context get doc base getdocbase context add watched resources addwatchedresources app context triggers redeploy undeploy deploy follow undeploy app delete redeploy resources deleteredeployresources app resources temp orarily temporarily renamed text editor save thread sleep interrupted exception interruptedexception r echeck recheck resource deleted resource exists undeploy application undeploy app delete redeploy resources deleteredeployresources app resources resources app reload resources reloadresources key set keyset to array toarray string update resources length file resource file resources log is debug enabled isdebugenabled log debug checking context app reload resource resource last modified lastmodified app reload resources reloadresources resources long value longvalue missed bug resource last modified lastmodified last modified lastmodified host get auto deploy getautodeploy resource last modified lastmodified current time with resolution offset currenttimewithresolutionoffset skip file modification resolution check skipfilemodificationresolutioncheck update update reload application reload app update update times file updated don trigger series rel oads reloads app reload resources reloadresources resources value of valueof resource last modified lastmodified app timestamp system current time millis currenttimemillis note file to remove filetoremove new doc base newdocbase reload deployed application deployedapplication app file file to remove filetoremove string new doc base newdocbase log is info enabled isinfoenabled log info get string getstring host config hostconfig reload app context context context host find child findchild app context get state getstate is available isavailable file to remove filetoremove new doc base newdocbase context add lifecycle listener addlifecyclelistener expanded directory removal listener expandeddirectoryremovallistener file to remove filetoremove new doc base newdocbase reload cat ches catches logs exceptions context reload web xml start file to remove filetoremove new doc base newdocbase expand war expandwar delete file to remove filetoremove context set doc base setdocbase new doc base newdocbase context start exception log warn get string getstring host config hostconfig context restart app undeploy deployed application deployedapplication app log is info enabled isinfoenabled log info get string getstring host config hostconfig undeploy app container context host find child findchild app host remove child removechild context throwable exception utils exceptionutils handle throwable handlethrowable log warn get string getstring host config hostconfig context remove app deployed remove app delete redeploy resources deleteredeployresources deployed application deployedapplication app string resources delete reload resources deletereloadresources delete redeploy resources resources length file current file resources delete host context xml defaults constants host context xml hostcontextxml equals current get name getname host config base configbase is deletable resource isdeletableresource app current log is debug enabled isdebugenabled log debug delete current expand war expandwar delete current delete reload resources remove remaining xml descriptor delete reload resources deletereloadresources string resources app reload resources reloadresources key set keyset to array toarray string resources length file current file resources delete host context xml defaults constants host context xml hostcontextxml equals current get name getname config base configbase is deletable resource isdeletableresource app current log is debug enabled isdebugenabled log debug delete current expand war expandwar delete current delete resource trigger automatic deployment code deploy application deleting resource located app base appbase deployment descriptor located config base configbase symlinks app base appbase config base configbase is deletable resource isdeletableresource deployed application deployedapplication app file resource check resource absolute resource is absolute isabsolute log warn get string getstring host config hostconfig resource not absolute resourcenotabsolute app resource determine resource located string canonical location canonicallocation canonical location canonicallocation resource get parent file getparentfile get canonical path getcanonicalpath i o exception ioexception log warn get string getstring host config hostconfig canonical izing canonicalizing resource get parent file getparentfile app string canonical app base canonicalappbase canonical app base canonicalappbase app base appbase get canonical path getcanonicalpath i o exception ioexception log warn get string getstring host config hostconfig canonical izing canonicalizing app base appbase app canonical location canonicallocation equals canonical app base canonicalappbase resource located app base appbase deleted string canonical config base canonicalconfigbase canonical config base canonicalconfigbase config base configbase get canonical path getcanonicalpath i o exception ioexception log warn get string getstring host config hostconfig canonical izing canonicalizing config base configbase app canonical location canonicallocation equals canonical config base canonicalconfigbase resource get name getname ends with endswith xml resource xml file config base configbase deleted resources deleted before start beforestart host get create dirs getcreatedirs file dirs file app base appbase config base configbase dirs length dirs mkdirs dirs is directory isdirectory log error get string getstring host config hostconfig create dirs createdirs dirs process start event host start log is debug enabled isdebugenabled log debug get string getstring host config hostconfig start object name objectname hoston host get object name getobjectname oname object name objectname hoston get domain getdomain type deployer host host get name getname registry get registry getregistry register component registercomponent oname get class getclass get name getname exception log error get string getstring host config hostconfig jmx register oname app base appbase is directory isdirectory log error get string getstring host config hostconfig app base appbase host get name getname app base appbase get path getpath host set deploy on startup setdeployonstartup host set auto deploy setautodeploy host get deploy on startup getdeployonstartup deploy apps deployapps process event host log is debug enabled isdebugenabled log debug get string getstring host config hostconfig oname registry get registry getregistry unregister component unregistercomponent oname exception log error get string getstring host config hostconfig jmx unregister oname oname check status web apps webapps check host get auto deploy getautodeploy check resources modification trigger redeployment deployed application deployedapplication apps deployed values to array toarray deployed application deployedapplication apps length is service d isserviced apps check resources checkresources apps check versions applications undeployed host get undeploy old versions getundeployoldversions check undeploy checkundeploy hot deploy hotdeploy applications deploy apps deployapps check status specific web application reload redeploy deploy method functionality management web applications upload updated web applications trigger action deploy method assumes web application marked service d serviced uploading updating completed method called action result checks complete method returns param web application check check string deployed application deployedapplication app deployed app check resources checkresources app deploy apps deployapps check versions applications parallel deployment unused active sessions undeploy check undeploy checkundeploy ordered names sorted set sortedset string sorted app names sortedappnames tree set treeset string sorted app names sortedappnames add all addall deployed key set keyset sorted app names sortedappnames size iterator string iter sorted app names sortedappnames iterator context name contextname previous context name contextname iter context name contextname current context name contextname iter current get path getpath equals previous get path getpath current previous path current version context previous context previouscontext context host find child findchild previous get name getname context current context currentcontext context host find child findchild current get name getname previous context previouscontext current context currentcontext current context currentcontext get state getstate is available isavailable is service d isserviced previous get name getname manager manager previous context previouscontext get manager getmanager manager session count sessioncount manager distributed manager distributedmanager session count sessioncount distributed manager distributedmanager manager get active sessions full getactivesessionsfull session count sessioncount manager get active sessions getactivesessions session count sessioncount log is info enabled isinfoenabled log info get string getstring host config hostconfig undeploy version undeployversion previous get name getname deployed application deployedapplication app deployed previous get name getname string resources app redeploy resources redeployresources key set keyset to array toarray string version unused undeploy completely trick ensure redeploy resources removed undeploy app delete redeploy resources deleteredeployresources app resources previous current iter has next hasnext add context managed entry point admin webapp jmx context control lers controllers manage app manageapp context context string context name contextname context get name getname deployed contains key containskey context name contextname deployed application deployedapplication deployed app deployedapp deployed application deployedapplication context name contextname add doc base docbase redeployed list war is war iswar context get doc base getdocbase file doc base docbase file context get doc base getdocbase doc base docbase is absolute isabsolute doc base docbase file app base appbase context get doc base getdocbase deployed app deployedapp redeploy resources redeployresources doc base docbase get absolute path getabsolutepath value of valueof doc base docbase last modified lastmodified doc base docbase get absolute path getabsolutepath to lower case tolowercase locale english ends with endswith war is war iswar host add child addchild context add event ual eventual unpacked war resources watched unpackwar unpackwars unpackwar context standard context standardcontext unpackwar standard context standardcontext context getunpackwar is war iswar unpackwar file doc base docbase file app base appbase context get base name getbasename deployed app deployedapp redeploy resources redeployresources doc base docbase get absolute path getabsolutepath value of valueof doc base docbase last modified lastmodified add watched resources addwatchedresources deployed app deployedapp doc base docbase get absolute path getabsolutepath context add watched resources addwatchedresources deployed app deployedapp context deployed context name contextname deployed app deployedapp remove webapp control entry point admin webapp jmx context control lers controllers unmanage app unmanageapp string context name contextname is service d isserviced context name contextname deployed remove context name contextname host remove child removechild host find child findchild context name contextname represents deployed application monitored resources deployed application deployedapplication deployed application deployedapplication string has descriptor hasdescriptor has descriptor hasdescriptor has descriptor hasdescriptor application context path assert ion assertion host get child getchild string application context xml descriptor file host config base configbase has descriptor hasdescriptor modification resources redeployment application resources removed application undeployed typically resources context xml file comp res sed compressed war path modification time linked hash map linkedhashmap string redeploy resources redeployresources linked hash map linkedhashmap string modification resources reload application typically resources web xml webapp configured additional descriptors modification time hash map hashmap string reload resources reloadresources hash map hashmap string ins tant instant application service timestamp system current time millis currenttimemillis circumstances unpackwars directory app base appbase flag user war ned warned warning log ged logged auto deployer log ged dir warning loggeddirwarning deploy descriptor deploydescriptor runnable host config hostconfig config context name contextname file descriptor deploy descriptor deploydescriptor host config hostconfig config context name contextname file descriptor config config descriptor descriptor override config deploy descriptor deploydescriptor descriptor deploy war deploywar runnable host config hostconfig config context name contextname file war deploy war deploywar host config hostconfig config context name contextname file war config config war war override config deploywar war deploy directory deploydirectory runnable host config hostconfig config context name contextname file dir deploy directory deploydirectory host config hostconfig config context name contextname file dir config config dir dir override config deploy directory deploydirectory dir purpose provide host config hostconfig context delete expanded war context stops resolve issue bug alternative solutions require dup licating duplicating lot context reload code host config hostconfig adding reload method context caller option ally optionally delete expanded war lifecycle listener lifecyclelistener app roach approach off ers offers greater flexibility enables behaviour changed extended removed changing context api expanded directory removal listener expandeddirectoryremovallistener lifecycle listener lifecyclelistener file to delete todelete string new doc base newdocbase create listener ensure expanded war removed doc base docbase war param to delete todelete file directory representing expanded war deleted param new doc base newdocbase doc base docbase context expanded directory removal listener expandeddirectoryremovallistener file to delete todelete string new doc base newdocbase to delete todelete to delete todelete new doc base newdocbase new doc base newdocbase override lifecycle event lifecycleevent lifecycle event lifecycleevent event lifecycle event equals event get type gettype context stopped context context context event get lifecycle getlifecycle remove expanded war expand war expandwar delete to delete todelete reset doc base docbase trigger exp ansion expansion war context set doc base setdocbase new doc base newdocbase remove listener context time context stopped context remove lifecycle listener removelifecyclelistener