licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat build util buildutil java buffered reader bufferedreader java file java file reader filereader java file writer filewriter java io exception ioexception java print writer printwriter java util iterator java util linked list linkedlist java util list org apache tools ant build exception buildexception org apache tools ant directory scanner directoryscanner org apache tools ant project org apache tools ant task org apache tools ant types file set fileset ant task convert files text html inserts html header including pre tags replaces special characters html escaped equivalents task ant script build examples author mark roth txt html task directory files file todir file converted html list file set fileset files ets filesets linked list linkedlist file set fileset sets directory files param todir directory set todir settodir file todir todir todir sets files converted html param file set fileset converted add file set addfileset file set fileset files ets filesets add perform conversion build exception buildexception error occurs execution task override execute build exception buildexception count step file convert iterator file set fileset iter files ets filesets iterator iter has next hasnext file set fileset iter directory scanner directoryscanner get directory scanner getdirectoryscanner get project getproject file based ir basedir get based ir getbasedir string files get included files getincludedfiles files length file file based ir basedir files file file todir files html exists last modified lastmodified last modified lastmodified log converting file get absolute path getabsolutepath get absolute path getabsolutepath project msg verbose convert io exception ioexception build exception buildexception convert get absolute path getabsolutepath get absolute path getabsolutepath count count log converted count file count todir get absolute path getabsolutepath perform actual copy conversion param input file param output file io exception ioexception thrown error occurs conversion convert file file io exception ioexception open files buffered reader bufferedreader print writer printwriter buffered reader bufferedreader file reader filereader print writer printwriter file writer filewriter output header println html body pre convert string read line readline string builder stringbuilder result string builder stringbuilder len length len char at charat result append amp result append result append println result to string tostring output foo ter footer println pre body html close close io exception ioexception