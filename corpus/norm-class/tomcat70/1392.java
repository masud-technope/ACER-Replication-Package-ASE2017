licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc test java sql connection org junit org junit test two data sources twodatasources default test case defaulttestcase test test two data sources testtwodatasources exception org apache tomcat jdbc pool data source datasource create default data source createdefaultdatasource org apache tomcat jdbc pool data source datasource create default data source createdefaultdatasource set remove abandoned setremoveabandoned set remove abandoned timeout setremoveabandonedtimeout set time between eviction runs millis settimebetweenevictionrunsmillis set remove abandoned setremoveabandoned connection get connection getconnection connection get connection getconnection thread sleep create statement createstatement assert true asserttrue connection abandoned exception assert true asserttrue correct abandoned create statement createstatement assert true asserttrue connection abandoned exception assert true asserttrue connection working assert true asserttrue connection closed is closed isclosed exception assert true asserttrue correct closed assert false assertfalse connection closed is closed isclosed exception assert true asserttrue connection working