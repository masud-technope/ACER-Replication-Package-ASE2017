licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes test channel java serializable java util arrays java util random java util concurrent atomic atomic integer atomicinteger java util concurrent atomic atomic long atomiclong org junit assert equals assertequals org junit org junit org junit test org apache catalina tribes channel org apache catalina tribes channel listener channellistener org apache catalina tribes channel receiver channelreceiver org apache catalina tribes managed channel managedchannel org apache catalina tribes member org apache catalina tribes tester util testerutil org apache catalina tribes group group channel groupchannel org apache catalina tribes group int erceptors interceptors message dispatch messagedispatch interceptor org apache catalina tribes group int erceptors interceptors throughput interceptor throughputinterceptor org apache catalina tribes x byte buffer xbytebuffer org apache catalina tribes transport abstract sender abstractsender org apache catalina tribes transport receiver base receiverbase org apache catalina tribes transport replication transmitter replicationtransmitter test udp packages testudppackages msg count msgcount thread count threadcount group channel groupchannel channel group channel groupchannel channel listener listener set up setup exception channel group channel groupchannel channel add interceptor addinterceptor message dispatch messagedispatch interceptor channel group channel groupchannel channel add interceptor addinterceptor message dispatch messagedispatch interceptor throughput interceptor throughputinterceptor tint throughput interceptor throughputinterceptor tint set interval setinterval throughput interceptor throughputinterceptor tint throughput interceptor throughputinterceptor tint set interval setinterval channel add interceptor addinterceptor tint channel add interceptor addinterceptor tint listener listener receiver base receiverbase receiver base receiverbase channel get channel receiver getchannelreceiver receiver base receiverbase receiver base receiverbase channel get channel receiver getchannelreceiver set udp port setudpport set udp port setudpport channel add channel listener addchannellistener listener tester util testerutil add random domain addrandomdomain managed channel managedchannel channel channel channel start channel channel start channel tear down teardown exception channel channel channel channel test test single data send o testsingledatasendno ack exception abstract sender abstractsender abstract sender abstractsender replication transmitter replicationtransmitter channel get channel sender getchannelsender get transport gettransport abstract sender abstractsender abstract sender abstractsender replication transmitter replicationtransmitter channel get channel sender getchannelsender get transport gettransport debug ging debugging set timeout settimeout max debug ging debugging set timeout settimeout max system err println starting single ack channel send member channel get local member getlocalmember data create random data createrandomdata channel send options udp thread sleep system err println finished single ack listener count assert equals assertequals checking success messages listener count test test data send o testdatasendno ack exception atomic integer atomicinteger counter atomic integer atomicinteger receiver base receiverbase receiver base receiverbase channel get channel receiver getchannelreceiver receiver base receiverbase receiver base receiverbase channel get channel receiver getchannelreceiver set udp rx buf size setudprxbufsize set udp rx buf size setudprxbufsize set udp tx buf size setudptxbufsize set udp tx buf size setudptxbufsize system err println starting ack thread threads thread thread count threadcount threads length threads thread override start system current time millis currenttimemillis msg count msgcount cnt counter get and add getandadd channel send member channel get local member getlocalmember data create random data createrandomdata cnt channel send options udp thread current thread currentthread sleep system println thread get name getname msg count msgcount messages system current time millis currenttimemillis start exception print stack trace printstacktrace threads length threads start threads length threads join sleep messages start system current time millis currenttimemillis system current time millis currenttimemillis start msg count msgcount thread count threadcount listener count thread sleep system err println finished ack listener count system println counter messages received listener count highest msg received listener max idx maxidx system print missing messages print missing msgs printmissingmsgs listener nrs counter assert equals assertequals checking success messages msg count msgcount thread count threadcount listener count print missing msgs printmissingmsgs msgs max idx maxidx max idx maxidx msgs length msgs system print system println test testdatasendasyncm exception atomic integer atomicinteger counter atomic integer atomicinteger receiver base receiverbase receiver base receiverbase channel get channel receiver getchannelreceiver receiver base receiverbase receiver base receiverbase channel get channel receiver getchannelreceiver set udp rx buf size setudprxbufsize set udp rx buf size setudprxbufsize set udp tx buf size setudptxbufsize set udp tx buf size setudptxbufsize system err println starting ack thread threads thread thread count threadcount threads length threads thread override start system current time millis currenttimemillis msg count msgcount cnt counter get and add getandadd channel send member channel get local member getlocalmember data create random data createrandomdata cnt channel send options udp channel send options asynchronous thread current thread currentthread sleep system println thread get name getname msg count msgcount messages system current time millis currenttimemillis start exception print stack trace printstacktrace threads length threads start threads length threads join sleep messages start system current time millis currenttimemillis system current time millis currenttimemillis start msg count msgcount thread count threadcount listener count thread sleep system err println finished ack listener count system println counter messages received listener count highest msg received listener max idx maxidx system print missing messages print missing msgs printmissingmsgs listener nrs counter assert equals assertequals checking success messages msg count msgcount thread count threadcount listener count test testdatasendasync exception system err println starting async msg count msgcount channel send member channel get local member getlocalmember data create random data createrandomdata channel send options asynchronous channel send options udp sleep messages start system current time millis currenttimemillis system current time millis currenttimemillis start msg count msgcount listener count thread sleep system err println finished async assert equals assertequals checking success messages msg count msgcount listener count test test data send k testdatasendack exception system err println starting ack msg count msgcount channel send member channel get local member getlocalmember data create random data createrandomdata channel send options ack channel send options udp thread sleep system err println finished ack assert equals assertequals checking success messages msg count msgcount listener count test testdatasendsyncack exception system err println starting sync ack msg count msgcount channel send member channel get local member getlocalmember data create random data createrandomdata channel send options ack channel send options ack channel send options udp thread sleep system err println finished sync ack assert equals assertequals checking success messages msg count msgcount listener count listener channel listener channellistener atomic long atomiclong count atomic long atomiclong max idx maxidx nrs listener arrays fill nrs override accept serializable member data override message received messagereceived serializable member data data data verify system err println error unable verify data count add and get addandget system err println success get number getnumber nrs length max idx maxidx math max max idx maxidx nrs exception print stack trace printstacktrace data serializable serialversionuid length data key has nr hasnr random random data create random data createrandomdata create random data createrandomdata channel receiver channelreceiver max udp size data create random data createrandomdata size create random data createrandomdata size data create random data createrandomdata size number next int nextint length math abs next int nextint size length length data data length length key data length arrays fill data key number data length populate number has nr hasnr x byte buffer xbytebuffer to bytes tobytes number data get number getnumber has nr hasnr x byte buffer xbytebuffer to int toint data verify data result length data length has nr hasnr result data length result result data key result