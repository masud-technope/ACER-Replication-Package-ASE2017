licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc test java sql connection java sql prepared statement preparedstatement java sql result set resultset java sql statement java util random org junit test org apache tomcat jdbc pool int erceptor interceptor reset abandoned timer resetabandonedtimer create test table createtesttable default test case defaulttestcase recreate get boolean getboolean recreate test test create test table testcreatetesttable exception connection con datasource get connection getconnection statement con create statement createstatement execute create table test val varchar val varchar val varchar val varchar exception ignore close con close test check data testcheckdata exception count string check select count test connection con datasource get connection getconnection statement con create statement createstatement result set resultset execute query executequery check count get int getint close close system println count count exception ignore con close count test test populate data testpopulatedata exception count actual test check data testcheckdata actual count system println test tab les tables actual rows data populate datasource set jdbc int erceptors setjdbcinterceptors reset abandoned timer resetabandonedtimer get name getname string insert insert test values datasource set remove abandoned setremoveabandoned connection con datasource get connection getconnection commit con get auto commit getautocommit con set auto commit setautocommit recreate statement con create statement createstatement execute drop table test exception ignore execute create table test val varchar val varchar val varchar val varchar close prepared statement preparedstatement con prepare statement preparestatement insert set query timeout setquerytimeout actual count set int setint string get random getrandom set string setstring set string setstring set string setstring set string setstring add batch addbatch clear parameters clearparameters system print system print execute batch executebatch close con commit con prepare statement preparestatement insert set query timeout setquerytimeout close con set auto commit setautocommit commit con close random random random system current time millis currenttimemillis string get random getrandom string builder stringbuilder string builder stringbuilder math abs random next int nextint append to string tostring main string args exception recreate create test table createtesttable test create test table createtesttable test test populate data testpopulatedata