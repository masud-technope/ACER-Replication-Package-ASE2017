licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina connector java i o exception ioexception java output stream outputstream java print writer printwriter java net malformedurlexception java security access controller accesscontroller java security privileged action privilegedaction java security privileged action exception privilegedactionexception java security privileged exception action privilegedexceptionaction java text simple date format simpledateformat java util array list arraylist java util arrays java util collection java util enumeration java util list java util locale java util time zone timezone java util vector java util concurrent atomic atomic integer atomicinteger javax servlet servlet output stream servletoutputstream javax servlet session tracking mode sessiontrackingmode javax servlet http cookie javax servlet http http servlet response httpservletresponse org apache catalina context org apache catalina globals org apache catalina session org apache catalina wrapper org apache catalina security security util securityutil org apache catalina util date tool datetool org apache catalina util request util requestutil org apache catalina util session config sessionconfig org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util buf char chunk charchunk org apache tomcat util buf u encoder uencoder org apache tomcat util buf u encoder uencoder safe chars set safecharsset org apache tomcat util http fast http date format fasthttpdateformat org apache tomcat util http mime headers mimeheaders org apache tomcat util http server cookie servercookie org apache tomcat util http parser media type cache mediatypecache org apache tomcat util net url org apache tomcat util res string manager stringmanager wrapper object coyote response author remy maucherat author craig mc clanahan mcclanahan response http servlet response httpservletresponse log log log factory logfactory get log getlog response string manager stringmanager string manager stringmanager get manager getmanager response media type cache mediatypecache media type cache media type cache mediatypecache compliance srv call response get writer getwriter character encoding result subsequent calls response get character encoding getcharacterencoding returning iso content type response header include charset iso component enforce encoding writer ensure url loaded url is scheme char isschemechar enforce encoding writer parse boolean parseboolean system get property getproperty org apache catalina connector response enforce encoding writer descriptive response implementation string info org apache coyote catalina coyote response coyoteresponse instance variables format creating headers simple date format simpledateformat format properties catalina connector deprecated unused deprecated connector connector connector request received deprecated connector get connector getconnector connector connector request received param connector connector set connector setconnector connector connector connector connector ajp equals connector get protocol getprotocol size size ajp packet output buffer outputbuffer output buffer outputbuffer output buffer outputbuffer output buffer outputbuffer output stream outputstream coyote output stream coyoteoutputstream output buffer outputbuffer writer coyote writer coyotewriter output buffer outputbuffer coyote response org apache coyote response coyote response coyoteresponse coyote response param coyote response coyoteresponse coyote response set coyote response setcoyoteresponse org apache coyote response coyote response coyoteresponse coyote response coyoteresponse coyote response coyoteresponse output buffer outputbuffer set response setresponse coyote response coyoteresponse coyote response org apache coyote response get coyote response getcoyoteresponse coyote response coyoteresponse context request processed context get context getcontext request get context getcontext context request processed called context identified ide ntifies identifies returned code get context path getcontextpath code enables parsing request uri param context newly context deprecated set context setcontext context context request set context setcontext context output buffer output buffer outputbuffer output buffer outputbuffer output stream coyote output stream coyoteoutputstream output stream outputstream writer coyote writer coyotewriter writer application commit flag app committed appcommitted included flag included character encoding characterencoding flag is character encoding set ischaracterencodingset intro duction introduction async processing pos sibility possibility container threads calling send error senderror tracking current error ensuring correct error called comp licated complicated attribute helps tracking current error info rmi ng informing call ers callers attempt change change successful thread pre machine simple reported reported set error seterror reported report reported pre atomic integer atomicinteger error state errorstate atomic integer atomicinteger output stream flag using output stream usingoutputstream writer flag using writer usingwriter url encoder u encoder uencoder url encoder urlencoder u encoder uencoder safe chars set safecharsset slash recyclable buffer hold redirect url char chunk charchunk redirecturlcc char chunk charchunk methods release object references initialize instance variables preparation reuse object recycle output buffer outputbuffer recycle using output stream usingoutputstream using writer usingwriter app committed appcommitted included error state errorstate is character encoding set ischaracterencodingset globals security enabled connector recycle facades facade facade clear facade output stream outputstream output stream outputstream clear output stream outputstream writer writer clear writer writer recycle clear cached encoders save memory comet requests clear encode rs clearencoders output buffer outputbuffer clear encode rs clearencoders response methods number bytes application written output stream excludes chunking compression headers get content written getcontentwritten output buffer outputbuffer get content written getcontentwritten number bytes written socket includes chunking compression excludes headers get bytes written getbyteswritten flush flush output buffer outputbuffer flush i o exception ioexception ioe get coyote response getcoyoteresponse get bytes written getbyteswritten flush application commit flag param app committed appcommitted application committed flag set app committed setappcommitted app committed appcommitted app committed appcommitted app committed appcommitted application commit flag accessor is app committed isappcommitted app committed appcommitted is committed iscommitted is suspended issuspended get content length getcontentlength get content written getcontentwritten get content length getcontentlength processing include flag deprecated get included getincluded included processing include flag param included code code request dispatcher requestdispatcher include code code deprecated set included setincluded included included included descriptive response implementation version number format code description version code string get info getinfo info request response request request request response org apache catalina connector request get request getrequest request request response param request request set request setrequest org apache catalina connector request request request request facade response response facade responsefacade facade code servlet response servletresponse code object facade http servlet response httpservletresponse get response getresponse facade facade response facade responsefacade facade output stream response deprecated output stream outputstream get stream getstream output stream outputstream output stream outputstream coyote output stream coyoteoutputstream output buffer outputbuffer output stream outputstream suspended flag param suspended suspended flag set suspended setsuspended suspended output buffer outputbuffer set suspended setsuspended suspended suspended flag accessor is suspended issuspended output buffer outputbuffer is suspended issuspended closed flag accessor is closed isclosed output buffer outputbuffer is closed isclosed error flag set error seterror result error state errorstate compare and set compareandset result wrapper wrapper get request getrequest get wrapper getwrapper wrapper wrapper increment error count incrementerrorcount result error flag accessor is error iserror error state errorstate is error report required iserrorreportrequired error state errorstate set error reported seterrorreported error state errorstate compare and set compareandset create servlet output stream servletoutputstream write content response exception i o exception ioexception input output error occurs deprecated servlet output stream servletoutputstream create output stream createoutputstream i o exception ioexception use less useless output stream outputstream output stream outputstream coyote output stream coyoteoutputstream output buffer outputbuffer output stream outputstream perform actions required flush close output stream writer single operation exception i o exception ioexception input output error occurs finish response finishresponse i o exception ioexception writing left over leftover bytes output buffer outputbuffer close content length calculated response get content length getcontentlength get coyote response getcoyoteresponse get content length getcontentlength content type calculated response code code content type override string get content type getcontenttype get coyote response getcoyoteresponse get content type getcontenttype print writer printwriter render error messages stream writer acquired writer error reports response error report returned send error senderror triggered unexpected exception thrown servlet processing returned response stream exception i o exception ioexception input output error occurs print writer printwriter get reporter getreporter i o exception ioexception output buffer outputbuffer is new isnew output buffer outputbuffer check converter checkconverter writer writer coyote writer coyotewriter output buffer outputbuffer writer servlet response servletresponse methods flush buffer commit response exception i o exception ioexception input output error occurs override flush buffer flushbuffer i o exception ioexception output buffer outputbuffer flush actual buffer size response override get buffer size getbuffersize output buffer outputbuffer get buffer size getbuffersize character encoding response override string get character encoding getcharacterencoding get coyote response getcoyoteresponse get character encoding getcharacterencoding servlet output stream response exception illegal state exception illegalstateexception code get writer getwriter code called response exception i o exception ioexception input output error occurs override servlet output stream servletoutputstream get output stream getoutputstream i o exception ioexception using writer usingwriter illegal state exception illegalstateexception get string getstring coyote response coyoteresponse get output stream getoutputstream ise using output stream usingoutputstream output stream outputstream output stream outputstream coyote output stream coyoteoutputstream output buffer outputbuffer output stream outputstream locale assigned response override locale get locale getlocale get coyote response getcoyoteresponse get locale getlocale writer response exception illegal state exception illegalstateexception code get output stream getoutputstream code called response exception i o exception ioexception input output error occurs override print writer printwriter get writer getwriter i o exception ioexception using output stream usingoutputstream illegal state exception illegalstateexception get string getstring coyote response coyoteresponse get writer getwriter ise enforce encoding writer response character encoding code get character encoding getcharacterencoding code method returns code iso code code get writer getwriter code updates code iso code subsequent call get content type getcontenttype include charset iso component ref lected reflected content type response header satisfying servlet spec req uirement requirement containers communicate character encoding servlet response writer client set character encoding setcharacterencoding get character encoding getcharacterencoding using writer usingwriter output buffer outputbuffer check converter checkconverter writer writer coyote writer coyotewriter output buffer outputbuffer writer output response committed override is committed iscommitted get coyote response getcoyoteresponse is committed iscommitted clear content written buffer exception illegal state exception illegalstateexception response committed override reset ignore call included servlet included get coyote response getcoyoteresponse reset output buffer outputbuffer reset using output stream usingoutputstream using writer usingwriter is character encoding set ischaracterencodingset reset data buffer status header exception illegal state exception illegalstateexception response committed override reset buffer resetbuffer reset buffer resetbuffer reset data buffer writer stream flags status header param reset writer stream flags resetwriterstreamflags code code internal code using writer usingwriter code code using output stream usingoutputstream code code is character encoding set ischaracterencodingset code flags reset exception illegal state exception illegalstateexception response committed reset buffer resetbuffer reset writer stream flags resetwriterstreamflags is committed iscommitted illegal state exception illegalstateexception get string getstring coyote response coyoteresponse reset buffer resetbuffer ise output buffer outputbuffer reset reset writer stream flags resetwriterstreamflags reset writer stream flags resetwriterstreamflags using output stream usingoutputstream using writer usingwriter is character encoding set ischaracterencodingset buffer size response param size buffer size exception illegal state exception illegalstateexception method called output committed response override set buffer size setbuffersize size is committed iscommitted output buffer outputbuffer is new isnew illegal state exception illegalstateexception get string getstring coyote response coyoteresponse set buffer size setbuffersize ise output buffer outputbuffer set buffer size setbuffersize size content length bytes response param length content length override set content length setcontentlength length is committed iscommitted ignore call included servlet included get coyote response getcoyoteresponse set content length setcontentlength length content type response param type content type override set content type setcontenttype string type is committed iscommitted ignore call included servlet included type get coyote response getcoyoteresponse set content type setcontenttype string media type cache parse type invalid assume charset pass user get coyote response getcoyoteresponse set content type no charset setcontenttypenocharset type get coyote response getcoyoteresponse set content type no charset setcontenttypenocharset ignore charset get writer getwriter called using writer usingwriter get coyote response getcoyoteresponse set character encoding setcharacterencoding is character encoding set ischaracterencodingset overrides character encoding body request method called prior reading request parameters reading input get reader getreader param charset string character encoding override set character encoding setcharacterencoding string charset is committed iscommitted ignore call included servlet included using writer usingwriter get coyote response getcoyoteresponse set character encoding setcharacterencoding charset is character encoding set ischaracterencodingset locale response including setting character encoding param locale locale override set locale setlocale locale locale is committed iscommitted ignore call included servlet included get coyote response getcoyoteresponse set locale setlocale locale using writer usingwriter is character encoding set ischaracterencodingset string charset get context getcontext get charset getcharset locale charset get coyote response getcoyoteresponse set character encoding setcharacterencoding charset http response httpresponse methods override string get header getheader string get coyote response getcoyoteresponse get mime headers getmimeheaders get header getheader override collection string get header names getheadernames mime headers mimeheaders headers get coyote response getcoyoteresponse get mime headers getmimeheaders headers size list string result array list arraylist string result add headers get name getname to string tostring result override collection string get headers getheaders string enumeration string enumeration get coyote response getcoyoteresponse get mime headers getmimeheaders values vector string result vector string enumeration has more elements hasmoreelements result add element addelement enumeration next element nextelement result error message code send error senderror code response string get message getmessage get coyote response getcoyoteresponse get message getmessage override get status getstatus get coyote response getcoyoteresponse get status getstatus reset response values http status code message exception illegal state exception illegalstateexception response committed deprecated reset status string message reset set status setstatus status message http servlet response httpservletresponse methods add cookie included response param cookie cookie override add cookie addcookie cookie cookie ignore call included servlet included is committed iscommitted string buffer stringbuffer generate cookie string generatecookiestring cookie reached exception cookie valid header cookie rfc rfc supported browse rs browsers servlet spec asks add header addheader cookie to string tostring special method adding session cookie overriding previous param cookie add session cookie internal addsessioncookieinternal cookie cookie is committed iscommitted string cookie get name getname string header name headername cookie string starts with startswith string buffer stringbuffer generate cookie string generatecookiestring cookie mime headers mimeheaders headers get coyote response getcoyoteresponse get mime headers getmimeheaders headers size headers get name getname to string tostring equals header name headername headers get value getvalue to string tostring starts with startswith starts with startswith headers get value getvalue set string setstring to string tostring add header addheader header name headername to string tostring string buffer stringbuffer generate cookie string generatecookiestring cookie cookie string buffer stringbuffer string buffer stringbuffer append cookie value appendcookievalue invocation security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction override server cookie servercookie append cookie value appendcookievalue cookie get version getversion cookie get name getname cookie get value getvalue cookie get path getpath cookie get domain getdomain cookie get comment getcomment cookie get max age getmaxage cookie get secure getsecure cookie is http only ishttponly server cookie servercookie append cookie value appendcookievalue cookie get version getversion cookie get name getname cookie get value getvalue cookie get path getpath cookie get domain getdomain cookie get comment getcomment cookie get max age getmaxage cookie get secure getsecure cookie is http only ishttponly add header param header param override add date header adddateheader string length is committed iscommitted ignore call included servlet included format format simple date format simpledateformat date tool datetool http response header locale format set time zone settimezone time zone timezone get time zone gettimezone gmt add header addheader fast http date format fasthttpdateformat format date formatdate format add header param header param override add header addheader string string length is committed iscommitted ignore call included servlet included char at charat check special header checkspecialheader get coyote response getcoyoteresponse add header addheader extended version exists link org apache coyote response check required ensure using writer usingwriter checks link set content type setcontenttype string applied using writer usingwriter visible link org apache coyote response called add header addheader header special header check special header checkspecialheader string string equals ignore case equalsignorecase content type set content type setcontenttype add int eger integer header param header param integer override add int header addintheader string length is committed iscommitted ignore call included servlet included add header addheader header response param header check override contains header containsheader string special handling content type content length special handling coyote response coyoteresponse char at charat equals ignore case equalsignorecase content type get coyote response getcoyoteresponse get content type getcontenttype equals ignore case equalsignorecase content length client get coyote response getcoyoteresponse get content length long getcontentlengthlong get coyote response getcoyoteresponse contains header containsheader encode session identifier response redirect url param url url encoded override string encoderedirecturl string url is encodeable isencodeable to absolute toabsolute url to encoded toencoded url request get session internal getsessioninternal get id internal getidinternal url encode session identifier response redirect url param url url encoded deprecated version java servlet api code encoderedirecturl code override deprecated string encode redirect url encoderedirecturl string url encoderedirecturl url encode session identifier response url param url url encoded override string encodeurl string url string absolute absolute to absolute toabsolute url illegal argument exception illegalargumentexception iae url is encodeable isencodeable absolute spec url equals ignore case equalsignorecase url absolute url equals absolute has path haspath url url to encoded toencoded url request get session internal getsessioninternal get id internal getidinternal url encode session identifier response url param url url encoded deprecated version java servlet api code encodeurl code override deprecated string encode url encodeurl string url encodeurl url send acknowledgment request exception i o exception ioexception input output error occurs send ack now ledgement sendacknowledgement i o exception ioexception is committed iscommitted ignore call included servlet included get coyote response getcoyoteresponse acknowledge send error response status message param status http status code send exception illegal state exception illegalstateexception response committed exception i o exception ioexception input output error occurs override send error senderror status i o exception ioexception send error senderror status send error response status message param status http status code send param message message send exception illegal state exception illegalstateexception response committed exception i o exception ioexception input output error occurs override send error senderror status string message i o exception ioexception is committed iscommitted illegal state exception illegalstateexception get string getstring coyote response coyoteresponse send error senderror ise ignore call included servlet included set error seterror get coyote response getcoyoteresponse set status setstatus status get coyote response getcoyoteresponse set message setmessage message clear data content buf fered buffered reset buffer resetbuffer response finished application perspective set suspended setsuspended send temporary redirect redirect location url param location location url redirect exception illegal state exception illegalstateexception response committed exception i o exception ioexception input output error occurs override send redirect sendredirect string location i o exception ioexception send redirect sendredirect location internal method redirect status link http servlet response httpservletresponse attempt validate status code send redirect sendredirect string location status i o exception ioexception is committed iscommitted illegal state exception illegalstateexception get string getstring coyote response coyoteresponse send redirect sendredirect ise ignore call included servlet included clear data content buf fered buffered reset buffer resetbuffer generate temporary redirect location string location uri locationuri relative redirects require http get request getrequest get coyote request getcoyoterequest get supports relative redirects getsupportsrelativeredirects get context getcontext get use relative redirects getuserelativeredirects location uri locationuri location location uri locationuri to absolute toabsolute location set status setstatus status set header setheader location location uri locationuri get context getcontext get send redirect body getsendredirectbody print writer printwriter writer get writer getwriter writer print get string getstring coyote response coyoteresponse send redirect sendredirect not e note request util requestutil filter location uri locationuri flush buffer flushbuffer illegal argument exception illegalargumentexception log warn get string getstring response send redirect fail sendredirectfail location set status setstatus response finished application perspective set suspended setsuspended header param header param override set date header setdateheader string length is committed iscommitted ignore call included servlet included format format simple date format simpledateformat date tool datetool http response header locale format set time zone settimezone time zone timezone get time zone gettimezone gmt set header setheader fast http date format fasthttpdateformat format date formatdate format header param header param override set header setheader string string length is committed iscommitted ignore call included servlet included char at charat check special header checkspecialheader get coyote response getcoyoteresponse set header setheader int eger integer header param header param integer override set int header setintheader string length is committed iscommitted ignore call included servlet included set header setheader http status returned response param status http status override set status setstatus status set status setstatus status http status message returned response param status http status param message text message deprecated version java servlet api method deprecated ambiguous meaning message parameter override deprecated set status setstatus status string message is committed iscommitted ignore call included servlet included get coyote response getcoyoteresponse set status setstatus status get coyote response getcoyoteresponse set message setmessage message methods code code url encoded session identifier conditions met request resp onding responding asked valid session requested session received cookie url points web application resp onding responding request param location absolute url validated is encodeable isencodeable string location location int ra intra document reference location starts with startswith valid session cookies request hreq request session session hreq get session internal getsessioninternal session hreq is requested session id from cookie isrequestedsessionidfromcookie url encoding permitted hreq get servlet context getservletcontext get effective session tracking modes geteffectivesessiontrackingmodes session tracking mode sessiontrackingmode url security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction override value of valueof do is encodeable doisencodeable hreq session location boolean value booleanvalue do is encodeable doisencodeable hreq session location do is encodeable doisencodeable request hreq session session string location valid absolute url url url url url location malformedurlexception url match including context path hreq get scheme getscheme equals ignore case equalsignorecase url get protocol getprotocol hreq get server name getservername equals ignore case equalsignorecase url get host gethost server port serverport hreq get server port getserverport server port serverport https equals hreq get scheme getscheme server port serverport server port serverport url port urlport url get port getport url port urlport https equals url get protocol getprotocol url port urlport url port urlport server port serverport url port urlport string context path contextpath get context getcontext get path getpath context path contextpath string file url get file getfile file starts with startswith context path contextpath string tok session config sessionconfig get session uri param name getsessionuriparamname request get context getcontext session get id internal getidinternal file index of indexof tok context path contextpath length url belongs web application encode able encodeable convert absolute url represents resource referenced relative url url absolute unchanged param location url converted returned exception illegal argument exception illegalargumentexception malformedurlexception thrown converting relative url absolute string to absolute toabsolute string location location location leading slash leadingslash location starts with startswith location starts with startswith scheme relative redirecturlcc recycle add scheme string scheme request get scheme getscheme redirecturlcc append scheme scheme length redirecturlcc append redirecturlcc append location location length redirecturlcc to string tostring i o exception ioexception illegal argument exception illegalargumentexception iae illegal argument exception illegalargumentexception location iae init cause initcause iae leading slash leadingslash has scheme hasscheme location redirecturlcc recycle string scheme request get scheme getscheme string request get server name getservername port request get server port getserverport redirecturlcc append scheme scheme length redirecturlcc append redirecturlcc append length scheme equals http port scheme equals https port redirecturlcc append string port s ports port redirecturlcc append port s ports port s ports length leading slash leadingslash string relative path relativepath request get decoded request i getdecodedrequesturi pos relative path relativepath last index of lastindexof char chunk charchunk encodeduri string frelative path frelativepath relative path relativepath fend pos security util securityutil is package protection enabled ispackageprotectionenabled encodeduri access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction char chunk charchunk override char chunk charchunk i o exception ioexception url encoder urlencoder encodeurl frelative path frelativepath fend privileged action exception privilegedactionexception pae illegal argument exception illegalargumentexception iae illegal argument exception illegalargumentexception location iae init cause initcause pae get exception getexception iae encodeduri url encoder urlencoder encodeurl relative path relativepath pos redirecturlcc append encodeduri encodeduri recycle redirecturlcc append redirecturlcc append location location length normalize redirecturlcc i o exception ioexception illegal argument exception illegalargumentexception iae illegal argument exception illegalargumentexception location iae init cause initcause iae redirecturlcc to string tostring location removes sequences absolute url s urls code borrowed heavily coyote adapter coyoteadapter normalize normalize char chunk charchunk str ip strip query string fragment nor malization normalization logic lot simple r simpler truncate index of indexof truncate truncate index of indexof truncatecc truncate truncatecc arrays copy of range copyofrange get buffer getbuffer get start getstart truncate get end getend set end setend get start getstart truncate ends with endswith ends with endswith append i o exception ioexception illegal argument exception illegalargumentexception to string tostring get chars getchars start get start getstart get end getend start index startindex start index startindex index of indexof start index startindex remove start index startindex index of indexof copy chars copychars start start start set end setend remove start index startindex pos index of indexof server root start index startindex illegal argument exception illegalargumentexception pos start pos pos pos pos copy chars copychars start start start set end setend add query string fragment truncatecc append truncatecc truncatecc length i o exception ioexception ioe illegal argument exception illegalargumentexception ioe copy chars copychars dest src len pos pos len pos pos dest pos src determine absolute url path component has path haspath string uri pos uri index of indexof pos pos uri index of indexof pos pos determine uri string code scheme code component has scheme hasscheme string uri len uri length len uri char at charat url is scheme char isschemechar url session identifier suitably encoded param url url encoded session param session id sessionid session included encoded url string to encoded toencoded string url string session id sessionid url session id sessionid url string path url string query string anchor question url index of indexof question path url substring question query url substring question pound path index of indexof pound anchor path substring pound path path substring pound string builder stringbuilder string builder stringbuilder path length jsessionid append append session config sessionconfig get session uri param name getsessionuriparamname request get context getcontext append append session id sessionid append anchor append query to string tostring