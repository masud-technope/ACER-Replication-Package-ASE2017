licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes transport bio java input stream inputstream java output stream outputstream java net socket org apache catalina tribes channel message channelmessage org apache catalina tribes buffer pool bufferpool org apache catalina tribes channel data channeldata org apache catalina tribes listen callback listencallback org apache catalina tribes object reader objectreader org apache catalina tribes transport abstract rx task abstractrxtask org apache catalina tribes transport constants org apache juli logging log org apache juli logging log factory logfactory worker thread drain channels echo input instance constructed reference owning thread pool object started thread loops waiting awakened service channel selection key selectionkey object worker tasked calling service channel servicechannel method selection key selectionkey object service channel servicechannel method stores key reference thread object calls notify wake channel drained worker thread returns parent pool author filip hanik bio replication task bioreplicationtask abstract rx task abstractrxtask log log log factory logfactory get log getlog bio replication task bioreplicationtask socket socket object reader objectreader reader bio replication task bioreplicationtask listen callback listencallback callback callback loop waiting work override socket drain socket drainsocket exception log error unable service bio socket socket close exception log is debug enabled isdebugenabled log debug failed close socket reader close exception log is debug enabled isdebugenabled log debug failed close reader reader socket ready pool get task pool gettaskpool get task pool gettaskpool return worker returnworker service socket servicesocket socket socket object reader objectreader reader socket socket reader reader execute object reader objectreader reader exception pkg cnt pkgcnt reader count pkg cnt pkgcnt channel message channelmessage msgs reader execute msgs length send ack ack request remote server comp leting completing request considered async hronized asynchronized request channel data channeldata send ack async sendackasync msgs get options getoptions send ack sendack constants ack command process message get callback getcallback message data received messagedatareceived msgs send ack request complete server sending ack remote server considered request channel data channeldata send ack sync sendacksync msgs get options getoptions send ack sendack constants ack command exception channel data channeldata send ack sync sendacksync msgs get options getoptions send ack sendack constants fail ack command log error error thrown message data received messagedatareceived get use buffer pool getusebufferpool buffer pool bufferpool get buffer pool getbufferpool return buffer returnbuffer msgs get message getmessage msgs set message setmessage actual code drains channel key method assumes key modified prior invocation turn selection int erest interest read method completes enables read calls wakeup selector selector resume watching channel drain socket drainsocket exception input stream inputstream socket get input stream getinputstream loop data channel blocking buf length read buf length count reader append buf length count execute reader length read buf send reply acknowledgment param command send ack sendack command output stream outputstream socket get output stream getoutputstream write command flush log is trace enabled istraceenabled log trace ack socket get port getport java io exception ioexception log warn unable send ack channel channel disconnected get message getmessage override close set do run setdorun socket close exception log is debug enabled isdebugenabled log debug failed close socket reader close exception log is debug enabled isdebugenabled log debug failed close reader reader socket close