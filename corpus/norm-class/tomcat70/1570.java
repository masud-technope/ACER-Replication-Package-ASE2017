licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util buf java nio byte buffer bytebuffer java nio char buffer charbuffer java nio charset charset encoder charsetencoder java nio charset code r result coderresult encodes characters bytes utf extra cted extracted apache harmony minor bug fixes applied utf encoder charset encoder charsetencoder utf encoder c converter cconverter utf override code r result coderresult encode loop encodeloop char buffer charbuffer byte buffer bytebuffer has array hasarray has array hasarray encode has array encodehasarray encode not has array encodenothasarray code r result coderresult encode has array encodehasarray char buffer charbuffer byte buffer bytebuffer out remaining outremaining remaining pos position limit limit b arr barr c arr carr pos b arr barr array c arr carr array out pos outpos position rem remaining pos pos rem jchar c arr carr xffff jchar out remaining outremaining position position out pos outpos code r result coderresult overflow b arr barr out pos outpos jchar xff out remaining outremaining jchar out remaining outremaining position position out pos outpos code r result coderresult overflow b arr barr out pos outpos jchar b arr barr out pos outpos jchar out remaining outremaining jchar jchar xdfff limit position position out pos outpos code r result coderresult underflow out remaining outremaining position position out pos outpos code r result coderresult overflow surrogate pair starts surrogate jchar xdc position position out pos outpos code r result coderresult malformed for length malformedforlength jchar c arr carr xffff surrogate pair ends high surrogate jchar xdc position position out pos outpos code r result coderresult malformed for length malformedforlength note unicode scalar defined jchar jchar xdc jchar high surrogate jchar surrogate jchar jchar xfca b arr barr out pos outpos b arr barr out pos outpos b arr barr out pos outpos b arr barr out pos outpos out remaining outremaining out remaining outremaining position position out pos outpos code r result coderresult overflow b arr barr out pos outpos jchar b arr barr out pos outpos jchar b arr barr out pos outpos jchar out remaining outremaining out remaining outremaining position position out pos outpos input output exhausted underflow limit code r result coderresult underflow code r result coderresult overflow rem position position out pos outpos code r result coderresult underflow code r result coderresult encode not has array encodenothasarray char buffer charbuffer byte buffer bytebuffer out remaining outremaining remaining pos position limit limit pos limit out remaining outremaining code r result coderresult overflow jchar xffff jchar out remaining outremaining code r result coderresult overflow jchar out remaining outremaining jchar out remaining outremaining code r result coderresult overflow jchar jchar out remaining outremaining jchar jchar xdfff limit pos code r result coderresult underflow out remaining outremaining code r result coderresult overflow surrogate pair starts surrogate jchar xdc code r result coderresult malformed for length malformedforlength jchar xffff surrogate pair ends high surrogate jchar xdc code r result coderresult malformed for length malformedforlength note unicode scalar defined jchar jchar xdc jchar high surrogate jchar surrogate jchar jchar xfca out remaining outremaining pos out remaining outremaining code r result coderresult overflow jchar jchar jchar out remaining outremaining pos position pos code r result coderresult underflow