licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util http java io exception ioexception java util hash map hashmap java util list java util map javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax servlet http http session httpsession org junit assert equals assertequals org junit test org apache catalina context org apache catalina startup tomcat org apache tomcat util buf byte chunk bytechunk test link cookies note code code constants link cookies tests executed jvm instance tests place separate classes facilitate running unit tests ant test bug testbug cookies base test cookiesbasetest string path override test test cookies instance testcookiesinstance exception tomcat tomcat get tomcat instance gettomcatinstance add servlets addservlets tomcat tomcat start map string list string headers hash map hashmap string list string byte chunk bytechunk res byte chunk bytechunk get url geturl http localhost get port getport path res headers list string cookie headers cookieheaders headers cookie assert equals assertequals cookie header test cookie headers cookieheaders size add servlets addservlets tomcat tomcat file system doc base docbase required context ctx tomcat add context addcontext tomcat add servlet addservlet ctx path test bug testbug servlet ctx add servlet mapping addservletmapping path path test bug testbug servlet http servlet httpservlet serialversionuid override service http servlet request httpservletrequest req http servlet response httpservletresponse res servlet exception servletexception io exception ioexception http session httpsession session req get session getsession session invalid ate invalidate session req get session getsession session invalid ate invalidate req get session getsession