licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina session java io exception ioexception java print writer printwriter javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax servlet http http session httpsession org junit org junit test org apache catalina context org apache catalina tcp simple tcp cluster simpletcpcluster org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest org apache tomcat util buf byte chunk bytechunk test standard session int egration teststandardsessionintegration tomcat base test tomcatbasetest test session invalid ate invalidate clustered environment test test bug testbug exception do test invalid ate dotestinvalidate test test bug testbug exception do test invalid ate dotestinvalidate do test invalid ate dotestinvalidate use clustering useclustering exception setup tomcat instance tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context ctx tomcat add context addcontext tomcat add servlet addservlet ctx bug bug servlet ctx add servlet mapping addservletmapping bug bug use clustering useclustering tomcat get engine getengine set cluster setcluster simple tcp cluster simpletcpcluster ctx set distributable setdistributable ctx set manager setmanager ctx get cluster getcluster create manager createmanager tomcat start byte chunk bytechunk res get url geturl http localhost get port getport bug assert equals assertequals pass res to string tostring bug servlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain resp set character encoding setcharacterencoding utf print writer printwriter resp get writer getwriter http session httpsession session req get session getsession session invalid ate invalidate ugly easiest test session valid result session get creation time getcreationtime result illegal state exception illegalstateexception ise result result print pass print fail