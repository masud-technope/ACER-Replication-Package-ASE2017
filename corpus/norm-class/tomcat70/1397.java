licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina startup java file java i o exception ioexception java lang reflect invocation target exception invocationtargetexception java net malformedurlexception java net url java security principal java util array list arraylist java util hash map hashmap java util list java util map java util stack java util jar jar entry jarentry java util jar jar file jarfile java util logging level java util logging logger javax servlet servlet javax servlet servlet exception servletexception org apache catalina container org apache catalina context org apache catalina engine org apache catalina globals org apache catalina host org apache catalina lifecycle org apache catalina lifecycle event lifecycleevent org apache catalina lifecycle exception lifecycleexception org apache catalina lifecycle listener lifecyclelistener org apache catalina realm org apache catalina server org apache catalina service org apache catalina wrapper org apache catalina authenticator non login authenticator nonloginauthenticator org apache catalina connector connector org apache catalina core container base containerbase org apache catalina core naming context listener namingcontextlistener org apache catalina core standard context standardcontext org apache catalina core standard engine standardengine org apache catalina core standard host standardhost org apache catalina core standard server standardserver org apache catalina core standard service standardservice org apache catalina core standard wrapper standardwrapper org apache catalina deploy login config loginconfig org apache catalina realm generic principal genericprincipal org apache catalina realm realm base realmbase org apache tomcat util buf uri util uriutil minimal tomcat starter embedding unit tests tomcat supports multiple styles configuration startup common stable server xml based implemented org apache catalina startup bootstrap apps embed tomcat requirements tomcat classes servlets classpath big jar eclipse combination temporary directory work files config file required methods webapp web xml file optional servlets var iety variety add methods configure servlets web apps webapps methods create simple memory security realm apply complex security processing define subclass convenience methods config uri ng configuring webapp contexts over loads overloads method pre add webapp addwebapp pre methods create webapp context configure add link host global web xml add lifecycle listener adds standard default servlet defaultservlet jsp processing files complex cases prefer ordinary tomcat api create webapp contexts install custom loader call link host add child addchild container replicate basic behavior pre add webapp addwebapp pre methods call methods link no default web xml path nodefaultwebxmlpath link get default web xml listener getdefaultwebxmllistener link get default realm getdefaultrealm returns simple security realm link get default web xml listener getdefaultwebxmllistener returns link lifecycle listener lifecyclelistener adds standard default servlet defaultservlet jsp processing files add listener prevent tomcat app lying applying standard global web xml link no default web xml path nodefaultwebxmlpath returns dummy path name pathname configure prevent link context config contextconfig apply global web xml file main simple cli arguments set ters setters doc simple tests demo href http svn apache org repos asf tomcat trunk test org apache catalina startup test tomcat testtomcat java test tomcat testtomcat author costin manolache tomcat logging implementations weak references log gers loggers pos sibility possibility logging configuration lost runs log gers loggers configured purpose map retain strong references explicitly configured log gers loggers configuration lost map string logger pinned log gers pinnedloggers hash map hashmap string logger single engine service server connector cases server xml server server service service engine engine customize classes connector connector bit easier config common host context host host todo easy add support hosts needed todo memory connector port string hostname localhost string basedir memory realm engine replaced engine level ridden host context level removed tomcat deprecated realm default realm defaultrealm map string string user pass userpass hash map hashmap string string map string list string user roles userroles hash map hashmap string list string map string principal user principals userprincipals hash map hashmap string principal tomcat noop tomcat directory temp files method called method called system properties catalina base catalina tomcat port tmp doesn good choice security todo current dir todo disable work dir needed jsp set base dir setbasedir string basedir basedir basedir port connector called start set port setport port port port hostname host localhost set host name sethostname string hostname equivalent adding web application tomcat apos web apps webapps directory equivalent web xml applied web application web inf web xml meta inf context xml package d packaged application processed normal web fragment link javax servlet servlet container initializer servletcontainerinitializer processing applied servlet exception servletexception context add webapp addwebapp string context path contextpath string doc base docbase servlet exception servletexception add webapp addwebapp get host gethost context path contextpath doc base docbase add context program matic programmatic mode web xml api calls equivalent web xml context param ctx add parameter addparameter error error page errorpage error page errorpage set error code seterrorcode set location setlocation error html ctx add error page adderrorpage ctx add mime mapping addmimemapping ext type note reload context configuration lost reload support lifecycle listener lifecyclelistener provide configuration todo add param context path contextpath root context param doc base docbase base dir context files exist relative server context add context addcontext string context path contextpath string doc base docbase add context addcontext get host gethost context path contextpath doc base docbase equivalent servlet servlet servlet general faster method takes servlet param servlet commonly avoid loading deps jsp servlet customize returned servlet wrapper add init parameter addinitparameter param context path contextpath context add servlet param servlet name servletname servlet mappings param servlet class servletclass servlet wrapper servlet wrapper add servlet addservlet string context path contextpath string servlet name servletname string servlet class servletclass container ctx get host gethost find child findchild context path contextpath add servlet addservlet context ctx servlet name servletname servlet class servletclass version link add servlet addservlet string string string param ctx context add servlet param servlet name servletname servlet mappings param servlet class servletclass servlet wrapper servlet wrapper add servlet addservlet context ctx string servlet name servletname string servlet class servletclass init params wrapper ctx create wrapper createwrapper set servlet class setservletclass servlet class servletclass set name setname servlet name servletname ctx add child addchild add existing servlet context for name forname init ialisation initialisation param context path contextpath context add servlet param servlet name servletname servlet mappings param servlet servlet add wrapper servlet wrapper add servlet addservlet string context path contextpath string servlet name servletname servlet servlet container ctx get host gethost find child findchild context path contextpath add servlet addservlet context ctx servlet name servletname servlet version link add servlet addservlet string string servlet param ctx context add servlet param servlet name servletname servlet mappings param servlet servlet add wrapper servlet wrapper add servlet addservlet context ctx string servlet name servletname servlet servlet init params wrapper existing standard wrapper existingstandardwrapper servlet set name setname servlet name servletname ctx add child addchild init ialise initialise server lifecycle exception lifecycleexception init lifecycle exception lifecycleexception get server getserver get connector getconnector server init start server lifecycle exception lifecycleexception start lifecycle exception lifecycleexception get server getserver get connector getconnector server start server lifecycle exception lifecycleexception lifecycle exception lifecycleexception get server getserver server destroy server object method called destroy lifecycle exception lifecycleexception get server getserver server destroy objects add user memory realm created apps replaced set realm setrealm add user adduser string user string pass user pass userpass user pass add user adduser string string add role addrole string user string role list string roles user roles userroles user roles roles array list arraylist string user roles userroles user roles roles add role extra customization tune individual tomcat objects internal api s apis http connector parameters port initialized alternatively construct connector params call add connector addconnector connector connector object custom ized customized connector get connector getconnector get server getserver connector connector standard tomcat configuration creates apr http connector apr lifecycle listener aprlifecyclelistener configured created tomcat library creates bio http connector http protocol connector connector http connector set port setport port service add connector addconnector connector connector set connector setconnector connector connector connector connector service object add connectors global settings service get service getservice get server getserver service sets current host web apps webapps host tomcat starts host host param host set host sethost host host host host host get host gethost host host standard host standardhost host set name setname hostname get engine getengine add child addchild host host custom realm called simple internal map called adding context deprecated removed tomcat deprecated set default realm setdefaultrealm realm realm default realm defaultrealm realm access engine customization engine get engine getengine engine get server getserver engine standard engine standardengine engine set name setname tomcat engine set default host setdefaulthost hostname default realm defaultrealm init simple auth initsimpleauth engine set realm setrealm default realm defaultrealm service set container setcontainer engine engine server object add listeners custom izations customizations jndi disabled server get server getserver server server init base dir initbasedir system set property setproperty catalina use naming usenaming server standard server standardserver server set port setport service standard service standardservice service set name setname tomcat server add service addservice service server context add context addcontext host host string context path contextpath string dir add context addcontext host context path contextpath context path contextpath dir context add context addcontext host host string context path contextpath string context name contextname string dir silence host context name contextname context ctx create context createcontext host context path contextpath ctx set name setname context name contextname ctx set path setpath context path contextpath ctx set doc base setdocbase dir ctx add lifecycle listener addlifecyclelistener fix context listener fixcontextlistener host get host gethost add child addchild ctx host add child addchild ctx ctx context add webapp addwebapp host host string context path contextpath string doc base docbase add webapp addwebapp host context path contextpath context path contextpath doc base docbase add webapp addwebapp string string param context path contextpath deprecated link add webapp addwebapp host string string deprecated context add webapp addwebapp host host string context path contextpath string string doc base docbase silence host context path contextpath context ctx create context createcontext host context path contextpath ctx set path setpath context path contextpath ctx set doc base setdocbase doc base docbase ctx add lifecycle listener addlifecyclelistener default web xml listener defaultwebxmllistener ctx set config file setconfigfile get webapp config file getwebappconfigfile doc base docbase context path contextpath context config contextconfig ctx cfg ctxcfg context config contextconfig ctx add lifecycle listener addlifecyclelistener ctx cfg ctxcfg prevent finds dup error ctx cfg ctxcfg set default web xml setdefaultwebxml no default web xml path nodefaultwebxmlpath host get host gethost add child addchild ctx host add child addchild ctx ctx listener required configuration items jsp processing standard tomcat global web xml pass link context add lifecycle listener addlifecyclelistener lifecycle listener lifecyclelistener pass result link no default web xml path nodefaultwebxmlpath link context config contextconfig set default web xml setdefaultwebxml string listener object config ures configures jsp processing lifecycle listener lifecyclelistener get default web xml listener getdefaultwebxmllistener default web xml listener defaultwebxmllistener path name pathname pass link context config contextconfig set default web xml setdefaultwebxml string link get default web xml listener getdefaultwebxmllistener string no default web xml path nodefaultwebxmlpath constants no default web xml nodefaultwebxml complex configurations accessor call ers callers simple realm created simple memory realm created deprecated removed tomcat deprecated realm get default realm getdefaultrealm default realm defaultrealm init simple auth initsimpleauth default realm defaultrealm helper methods classes create memory realm replace contexts real realm created engine replaced engine level ridden normal tomcat behaviour host context level deprecated removed tomcat deprecated init simple auth initsimpleauth default realm defaultrealm realm base realmbase override string get name getname simple override string get password getpassword string username user pass userpass username override principal get principal getprincipal string username principal user principals userprincipals username string pass user pass userpass username pass generic principal genericprincipal username pass user roles userroles username user principals userprincipals username init base dir initbasedir string catalina home catalinahome system get property getproperty globals catalina prop basedir basedir system get property getproperty globals catalina base prop basedir basedir catalina home catalinahome basedir create temp dir basedir system get property getproperty user dir tomcat port file file basedir mkdir is absolute isabsolute basedir get canonical path getcanonicalpath i o exception ioexception basedir get absolute path getabsolutepath catalina home catalinahome system set property setproperty globals catalina prop basedir system set property setproperty globals catalina base prop basedir string silences string org apache coyote http http protocol org apache catalina core standard service standardservice org apache catalina core standard engine standardengine org apache catalina startup context config contextconfig org apache catalina core application context applicationcontext org apache catalina core apr lifecycle listener aprlifecyclelistener silent controls log gers loggers silenced param silent code code sets log level warn log gers loggers log tomcat start prevents usual startup log ged logged code code sets log level level info set silent setsilent silent silent silent string silences logger logger logger get logger getlogger pinned log gers pinnedloggers logger silent logger set level setlevel level warning logger set level setlevel level info silence host host string context path contextpath string logger name loggername get logger name getloggername host context path contextpath logger logger logger get logger getlogger logger name loggername pinned log gers pinnedloggers logger name loggername logger silent logger set level setlevel level warning logger set level setlevel level info essentially logic link container base containerbase log name logname string get logger name getloggername host host string context name contextname host host get host gethost string builder stringbuilder logger name loggername string builder stringbuilder logger name loggername append container base containerbase get name getname logger name loggername append engine logger name loggername append host get parent getparent get name getname logger name loggername append host logger name loggername append host get name getname logger name loggername append context context name contextname context name contextname equals logger name loggername append context name contextname starts with startswith logger name loggername append logger name loggername append context name contextname logger name loggername append logger name loggername to string tostring create configured link context code host code constructor configured link standard host standardhost set context class setcontextclass string param host host link context created code code host param url path webapp link context newly created link context context create context createcontext host host string url string context class contextclass standard context standardcontext get name getname host host get host gethost host standard host standardhost context class contextclass standard host standardhost host get context class getcontextclass context for name forname context class contextclass get constructor getconstructor new instance newinstance instantiation exception instantiationexception illegal argument exception illegalargumentexception instantiate context context class contextclass host host url url illegal access exception illegalaccessexception illegal argument exception illegalargumentexception instantiate context context class contextclass host host url url illegal argument exception illegalargumentexception illegal argument exception illegalargumentexception instantiate context context class contextclass host host url url invocation target exception invocationtargetexception illegal argument exception illegalargumentexception instantiate context context class contextclass host host url url no such method exception nosuchmethodexception illegal argument exception illegalargumentexception instantiate context context class contextclass host host url url security exception securityexception illegal argument exception illegalargumentexception instantiate context context class contextclass host host url url class not found exception classnotfoundexception illegal argument exception illegalargumentexception instantiate context context class contextclass host host url url enables jndi naming disabled server implement link lifecycle order link naming context listener namingcontextlistener enable naming enablenaming get server getserver called naming disabled get server getserver server add lifecycle listener addlifecyclelistener naming context listener namingcontextlistener system set property setproperty catalina use naming usenaming string org apache naming string old value oldvalue system get property getproperty javax naming context url pkg prefixes old value oldvalue old value oldvalue old value oldvalue old value oldvalue system set property setproperty javax naming context url pkg prefixes system get property getproperty javax naming context initial context factory system set property setproperty javax naming context initial context factory org apache naming java javaurlcontextfactory provide configuration context program matic programmatic equivalent web xml todo normal tomcat web xml method param context path contextpath context defaults init webapp defaults initwebappdefaults string context path contextpath container ctx get host gethost find child findchild context path contextpath init webapp defaults initwebappdefaults context ctx version link init webapp defaults initwebappdefaults string param ctx context defaults init webapp defaults initwebappdefaults context ctx servlet wrapper servlet add servlet addservlet ctx org apache catalina servlets default servlet defaultservlet servlet set load on startup setloadonstartup servlet set overridable setoverridable jsp servlet avoid loading deps servlet add servlet addservlet ctx jsp org apache jasper servlet jsp servlet jspservlet servlet add init parameter addinitparameter for k fork servlet set load on startup setloadonstartup servlet set overridable setoverridable servlet mappings ctx add servlet mapping addservletmapping ctx add servlet mapping addservletmapping jsp jsp ctx add servlet mapping addservletmapping jspx jsp sessions ctx set session timeout setsessiontimeout mime mappings mime mappings length ctx add mime mapping addmimemapping mime mappings mime mappings files ctx add welcome file addwelcomefile html ctx add welcome file addwelcomefile htm ctx add welcome file addwelcomefile jsp startup sequence required don web xml start method context configured expects listener fix context listener fixcontextlistener lifecycle listener lifecyclelistener override lifecycle event lifecycleevent lifecycle event lifecycleevent event context context context event get lifecycle getlifecycle event get type gettype equals lifecycle configure start event context set configured setconfigured annotations context get login config getloginconfig context set login config setloginconfig login config loginconfig context get pipeline getpipeline add valve addvalve non login authenticator nonloginauthenticator class cast exception classcastexception reload required reloading program matic programmatic configuration context reloaded program matic programmatic configuration lost listener sets equivalent conf web xml context starts default web xml listener defaultwebxmllistener lifecycle listener lifecyclelistener override lifecycle event lifecycleevent lifecycle event lifecycleevent event lifecycle start event equals event get type gettype init webapp defaults initwebappdefaults context event get lifecycle getlifecycle helper wrapping existing servlets disables servlet lifecycle normal reloading reduces over head overhead provide direct control servlet existing standard wrapper existingstandardwrapper standard wrapper standardwrapper servlet existing suppress warnings suppresswarnings deprecation existing standard wrapper existingstandardwrapper servlet existing existing existing existing javax servlet single thread model singlethreadmodel single thread model singlethreadmodel instance pool instancepool stack servlet override servlet load servlet loadservlet servlet exception servletexception single thread model singlethreadmodel servlet instance instance existing get class getclass new instance newinstance instantiation exception instantiationexception servlet exception servletexception illegal access exception illegalaccessexception servlet exception servletexception instance init facade instance instance initialized instanceinitialized existing init facade instance initialized instanceinitialized existing override get available getavailable override is unavailable isunavailable override servlet get servlet getservlet existing override string get servlet class getservletclass existing get class getclass get name getname todo properties resource parsing mime types needed don web xml encoded string mime mappings abs audio mpeg application post script postscript aif audio aiff aifc audio aiff aiff audio aiff aim application aim art image asf video asf asx video asf audio basic avi video msvideo avx video rad screen play screenplay bcpio application bcpio bin application octet stream bmp image bmp body text html cdf application cdf cer application pkix cert application java cpio application cpio csh application csh css text css dib image bmp doc application msword dtd application xml dtd video dvi application dvi eps application post script postscript etx text set ext setext exe application octet stream gif image gif gtar application gtar application gzip hdf application hdf hqx application mac bin hex binhex htc text component htm text html html text html ief image ief jad text vnd sun app descriptor jar application java archive java text java source jnlp application java jnlp file jpe image jpeg jpeg image jpeg jpg image jpeg application java script javascript jsf text plain jsp f jspf text plain kar audio midi latex application latex audio mpeg url mpegurl mac image macpaint man text troff mathml application mathml xml text troff mid audio midi midi audio midi mif application mif mov video quicktime movie video sgi movie audio mpeg audio mpeg audio mpeg video mpa audio mpeg mpe video mpeg mpeg video mpeg mpega audio mpeg mpg video mpeg mpv video mpeg application net cdf netcdf oda application oda odb application vnd oasis opendocument database odc application vnd oasis opendocument char t chart odf application vnd oasis opendocument form ula formula odg application vnd oasis opendocument graphics odi application vnd oasis opendocument image odm application vnd oasis opendocument text master odp application vnd oasis opendocument presentation ods application vnd oasis opendocument spreadsheet odt application vnd oasis opendocument text otg application vnd oasis opendocument graphics template oth application vnd oasis opendocument text web otp application vnd oasis opendocument presentation template ots application vnd oasis opendocument spreadsheet template ott application vnd oasis opendocument text template ogx application ogg ogv video ogg oga audio ogg ogg audio ogg spx audio ogg flac audio flac anx application anno dex annodex axa audio anno dex annodex axv video anno dex annodex xspf application xspf xml pbm image port able portable bit map bitmap pct image pict pdf application pdf pgm image port able portable graymap pic image pict pict image pict pls audio scpls png image png pnm image port able portable any map anymap pnt image macpaint ppm image port able portable pixmap ppt application vnd powerpoint pps application vnd powerpoint application post script postscript psd image vnd adobe photoshop video quicktime qti image quicktime qtif image quicktime ras image cmu raster rdf application rdf xml rgb image rgb application vnd realm edia realmedia roff text troff rtf application rtf rtx text richtext application shar application shar shtml text server parsed html sit application stuff it stuffit snd audio basic src application wais source cpio application cpio crc application crc svg image svg xml svg z svgz image svg xml swf application shockwave flash text troff tar application tar tcl application tcl tex application tex texi application texinfo texinfo application texinfo tif image tiff tiff image tiff text troff tsv text tab separated values txt text plain ulw audio basic ustar application ustar vxml application voicexml xml xbm image xbitmap xht application xhtml xml xhtml application xhtml xml xls application vnd exc el excel xml application xml xpm image xpixmap xsl application xml xslt application xslt xml xul application vnd mozilla xul xml xwd image xwindowdump vsd application vnd vis io visio wav audio wav wbmp image vnd wap wbmp wml text vnd wap wml wmlc application vnd wap wmlc wmls text vnd wap wmlsc wmlscriptc application vnd wap wmlscriptc wmv video wmv wrl model vrml wspolicy application wspolicy xml application comp ress compress application comp ress compress zip application zip url get webapp config file getwebappconfigfile string path string context name contextname file doc base docbase file path doc base docbase is directory isdirectory get webapp config file from directory getwebappconfigfilefromdirectory doc base docbase context name contextname get webapp config file from jar getwebappconfigfilefromjar doc base docbase context name contextname url get webapp config file from directory getwebappconfigfilefromdirectory file doc base docbase string context name contextname url result file web app context xml webappcontextxml file doc base docbase constants application context xml applicationcontextxml web app context xml webappcontextxml exists result web app context xml webappcontextxml touri tourl malformedurlexception logger get logger getlogger get logger name getloggername get host gethost context name contextname log level warning unable determine web application context xml doc base docbase result url get webapp config file from jar getwebappconfigfilefromjar file doc base docbase string context name contextname url result jar file jarfile jar jar jar file jarfile doc base docbase jar entry jarentry entry jar get jar entry getjarentry constants application context xml applicationcontextxml entry result uri util uriutil build jar url buildjarurl doc base docbase constants application context xml applicationcontextxml i o exception ioexception logger get logger getlogger get logger name getloggername get host gethost context name contextname log level warning unable determine web application context xml doc base docbase jar jar close i o exception ioexception result