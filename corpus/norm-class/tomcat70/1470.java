licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache coyote ajp java eof exception eofexception java io exception ioexception java interruptedioexception java nio byte buffer bytebuffer java nio channels selector org apache coyote action code actioncode org apache coyote error state errorstate org apache coyote request info requestinfo org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util exception utils exceptionutils org apache tomcat util net abstract endpoint abstractendpoint handler socket state socketstate org apache tomcat util net nio channel niochannel org apache tomcat util net nio endpoint nioendpoint org apache tomcat util net nio endpoint nioendpoint key attachment keyattachment org apache tomcat util net nio selector pool nioselectorpool org apache tomcat util net socket status socketstatus org apache tomcat util net socket wrapper socketwrapper processes ajp requests nio ajp nio processor ajpnioprocessor abstract ajp processor abstractajpprocessor nio channel niochannel logger log log log factory logfactory get log getlog ajp nio processor ajpnioprocessor override log get log getlog log ajp nio processor ajpnioprocessor packet size packetsize nio endpoint nioendpoint endpoint packet size packetsize endpoint response set output buffer setoutputbuffer socket output buffer socketoutputbuffer pool endpoint get selector pool getselectorpool instance variables selector pool endpoint nio selector pool nioselectorpool pool methods process pipeline d pipelined http requests input output str eams streams io exception ioexception error operation override socket state socketstate process socket wrapper socketwrapper nio channel niochannel socket io exception ioexception request info requestinfo request get request processor getrequestprocessor set s tag e setstage org apache coyote constants stage parse setting socket socket wrapper socketwrapper socket so timeout sotimeout endpoint get so timeout getsotimeout cping get error state geterrorstate is error iserror endpoint is paused ispaused parsing request header message request bytes read bytesread read message readmessage request header message requestheadermessage bytes read bytesread timeout alive timeout enabled keep alive timeout keepalivetimeout socket set timeout settimeout so timeout sotimeout check message type process regular request processing type request header message requestheadermessage get byte getbyte type constants ajp cping request endpoint is paused ispaused recycle cping output pong message array pongmessagearray pong message array pongmessagearray length io exception ioexception set error state seterrorstate error state errorstate close recycle type constants ajp request swallowed finish log is debug enabled isdebugenabled log debug unexpected message type set error state seterrorstate error state errorstate close recycle request set start time setstarttime system current time millis currenttimemillis io exception ioexception set error state seterrorstate error state errorstate close throwable exception utils exceptionutils handle throwable handlethrowable log debug get string getstring ajpprocessor header error response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response get error state geterrorstate is error iserror setting filters parse request headers set s tag e setstage org apache coyote constants stage prepare prepare request preparerequest throwable exception utils exceptionutils handle throwable handlethrowable log debug get string getstring ajpprocessor request prepare response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response get error state geterrorstate is error iserror cping endpoint is paused ispaused service unavailable response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response cping process request adapter get error state geterrorstate is error iserror set s tag e setstage org apache coyote constants stage service adapter service request response interruptedioexception set error state seterrorstate error state errorstate close throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring ajpprocessor request process response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response is async isasync get error state geterrorstate is error iserror finish response finished get error state geterrorstate is io allowed isioallowed finish throwable exception utils exceptionutils handle throwable handlethrowable set error state seterrorstate error state errorstate close error update statistics counter get error state geterrorstate is error iserror response set status setstatus request update count ers updatecounters set s tag e setstage org apache coyote constants stage keep alive keepalive alive timeout enabled keep alive timeout keepalivetimeout socket set timeout settimeout keep alive timeout keepalivetimeout recycle set s tag e setstage org apache coyote constants stage ended get error state geterrorstate is error iserror endpoint is paused ispaused is async isasync socket state socketstate socket state socketstate open socket state socketstate closed action hook actionhook methods send action connector param action code actioncode type action param param action parameter override cases handled action suppress warnings suppresswarnings incomplete action internal actioninternal action code actioncode action code actioncode object param action code actioncode async complete async state machine asyncstatemachine async complete asynccomplete nio endpoint nioendpoint endpoint process socket processsocket socket wrapper socketwrapper get socket getsocket socket status socketstatus open read async set timeout settimeout param timeout param long value longvalue key attachment keyattachment key attachment keyattachment socket wrapper socketwrapper get socket getsocket get attachment getattachment set timeout settimeout timeout async dispatch async state machine asyncstatemachine async dispatch asyncdispatch nio endpoint nioendpoint endpoint process socket processsocket socket wrapper socketwrapper get socket getsocket socket status socketstatus open read override reset time outs resettimeouts nio connector timeout configured wrapper poller reset asycn processing finished key attachment keyattachment attach key attachment keyattachment socket wrapper socketwrapper get socket getsocket get attachment getattachment get error state geterrorstate is error iserror attach async state machine asyncstatemachine is async dispatching isasyncdispatching so timeout sotimeout endpoint get so timeout getsotimeout reset timeout keep alive timeout keepalivetimeout attach set timeout settimeout keep alive timeout keepalivetimeout attach set timeout settimeout so timeout sotimeout override output src offset length io exception ioexception key attachment keyattachment att key attachment keyattachment socket wrapper socketwrapper get socket getsocket get attachment getattachment att io exception ioexception key can celled cancelled byte buffer bytebuffer write buffer writebuffer socket wrapper socketwrapper get socket getsocket get buf handler getbufhandler get write buffer getwritebuffer this time thistime written written length to write towrite math min length written write buffer writebuffer remaining write buffer writebuffer src offset written to write towrite write buffer writebuffer flip write timeout writetimeout att get write timeout getwritetimeout selector selector selector pool io exception ioexception this time thistime pool write write buffer writebuffer socket wrapper socketwrapper get socket getsocket selector write timeout writetimeout write buffer writebuffer clear selector pool selector written this time thistime read amount bytes place input buffer read buf pos block first read blockfirstread io exception ioexception read res block block first read blockfirstread read res read socket readsocket buf read pos read block res read res res block io exception ioexception get string getstring ajpprocessor failed read failedread block read read socket readsocket buf pos block io exception ioexception n read nread byte buffer bytebuffer read buffer readbuffer socket wrapper socketwrapper get socket getsocket get buf handler getbufhandler get read buffer getreadbuffer read buffer readbuffer clear read buffer readbuffer capacity read buffer readbuffer limit block selector selector selector pool io exception ioexception nio endpoint nioendpoint key attachment keyattachment att nio endpoint nioendpoint key attachment keyattachment socket wrapper socketwrapper get socket getsocket get attachment getattachment att io exception ioexception key can celled cancelled n read nread pool read read buffer readbuffer socket wrapper socketwrapper get socket getsocket selector att get timeout gettimeout eof exception eofexception eof n read nread selector pool selector n read nread socket wrapper socketwrapper get socket getsocket read read buffer readbuffer n read nread read buffer readbuffer flip read buffer readbuffer limit n read nread read buffer readbuffer buf pos n read nread n read nread n read nread eof exception eofexception get string getstring iib eof error receive chunk data called implement special packet ajp receive data send body packet override receive io exception ioexception body message bodymessage reset read message readmessage body message bodymessage data received body message bodymessage get len getlen don mark stream chunk blen body message bodymessage peek int peekint blen body message bodymessage get body bytes getbodybytes body bytes bodybytes empty read ajp message number bytes read io exception ioexception failure including incomplete reads read message readmessage ajp message ajpmessage message block first read blockfirstread io exception ioexception buf message get buffer getbuffer header length headerlength message get header length getheaderlength bytes read bytesread read buf header length headerlength block first read blockfirstread bytes read bytesread message length messagelength message process header processheader message length messagelength invalid ajp header signature io exception ioexception get string getstring ajp message ajpmessage invalid length invalidlength integer value of valueof message length messagelength message length messagelength length message bytes read bytesread message length messagelength buf length trigger response illegal argument exception illegalargumentexception get string getstring ajpprocessor header too long toolong integer value of valueof message length messagelength integer value of valueof buf length bytes read bytesread read buf header length headerlength message length messagelength bytes read bytesread