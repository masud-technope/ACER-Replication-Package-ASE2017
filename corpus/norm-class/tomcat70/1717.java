licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina ssi java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java input stream reader inputstreamreader java output stream outputstream java output stream writer outputstreamwriter java print writer printwriter java reader java util regex matcher java util regex pattern javax servlet filter javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org apache catalina globals filter process ssi requests web page webpage mapped content types web xml author david becker org apache catalina ssi ssi servlet ssiservlet ssi filter ssifilter filter filter config filterconfig config debug level servlet debug expiration time seconds doc expires virtual path webapp relative is virtual webapp relative isvirtualwebapprelative regex pattern match eval uating evaluating content types pattern content type reg ex contenttyperegex pattern ssi filter content type matching pattern shtml reg ex shtmlregex pattern compile text server parsed html exec blocked security allow exec allowexec methods initialize servlet exception servlet exception servletexception error occurs override init filter config filterconfig config servlet exception servletexception config config config get init parameter getinitparameter debug debug integer parse int parseint config get init parameter getinitparameter debug config get init parameter getinitparameter content type contenttype content type reg ex contenttyperegex pattern compile config get init parameter getinitparameter content type contenttype content type reg ex contenttyperegex shtml reg ex shtmlregex is virtual webapp relative isvirtualwebapprelative parse boolean parseboolean config get init parameter getinitparameter is virtual webapp relative isvirtualwebapprelative config get init parameter getinitparameter expires expires value of valueof config get init parameter getinitparameter expires allow exec allowexec parse boolean parseboolean config get init parameter getinitparameter allow exec allowexec debug config get servlet context getservletcontext log ssi filter ssifilter init ssi invoke r invoker started debug debug override do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain io exception ioexception servlet exception servletexception http servlet request httpservletrequest req http servlet request httpservletrequest request http servlet response httpservletresponse res http servlet response httpservletresponse response ssi processing req set attribute setattribute globals ssi flag attr setup capture output byte array servlet output stream bytearrayservletoutputstream basos byte array servlet output stream bytearrayservletoutputstream response include wrapper responseincludewrapper response include wrapper responseincludewrapper response include wrapper responseincludewrapper config get servlet context getservletcontext req res basos process remainder filter chain chain do filter dofilter req response include wrapper responseincludewrapper assume chain flushed output response include wrapper responseincludewrapper flush output stream or writer flushoutputstreamorwriter bytes basos to byte array tobytearray content type string content type contenttype response include wrapper responseincludewrapper get content type getcontenttype allowed type ssi processing content type reg ex contenttyperegex matcher content type contenttype matches string encoding res get character encoding getcharacterencoding ssi processing ssi external resolver ssiexternalresolver ssi external resolver ssiexternalresolver ssi servlet external resolver ssiservletexternalresolver config get servlet context getservletcontext req res is virtual webapp relative isvirtualwebapprelative debug encoding ssi processor ssiprocessor ssi processor ssiprocessor ssi processor ssiprocessor ssi external resolver ssiexternalresolver debug allow exec allowexec prepare read ers readers write rs writers reader reader input stream reader inputstreamreader byte array input stream bytearrayinputstream bytes encoding byte array output stream bytearrayoutputstream ssiout byte array output stream bytearrayoutputstream print writer printwriter writer print writer printwriter output stream writer outputstreamwriter ssiout encoding ssi processing last modified lastmodified ssi processor ssiprocessor process reader response include wrapper responseincludewrapper get last modified getlastmodified writer output bytes writer flush bytes ssiout to byte array tobytearray override headers expires res set date header setdateheader expires java util get time gettime expires long value longvalue last modified lastmodified res set date header setdateheader modified last modified lastmodified res set content length setcontentlength bytes length matcher shtml matcher shtmlmatcher shtml reg ex shtmlregex matcher response include wrapper responseincludewrapper get content type getcontenttype shtml matcher shtmlmatcher matches convert shtml mime type ordinary html mime type preserve encoding string enc shtml matcher shtmlmatcher group res set content type setcontenttype text html enc enc write output output stream outputstream res get output stream getoutputstream illegal state exception illegalstateexception res get writer getwriter write string bytes write bytes override destroy noop