licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina websocket java io exception ioexception java input stream inputstream org apache coyote http upgrade upgrade processor upgradeprocessor org apache tomcat util res string manager stringmanager read web socket websocket frames underlying socket payload reading link input stream inputstream number bytes declared payload length reading bytes socket deprecated replaced jsr web socket websocket implementation removed tomcat deprecated ws input stream wsinputstream input stream inputstream string manager stringmanager string manager stringmanager get manager getmanager constants upgrade processor upgradeprocessor processor ws outbound wsoutbound out bound outbound ws frame wsframe frame remaining read this fragment readthisfragment string error ws input stream wsinputstream upgrade processor upgradeprocessor processor ws outbound wsoutbound out bound outbound processor processor out bound outbound out bound outbound process web socket websocket frame param block method block frame presented data process note single method block complete frame excluding payload control frames frame processed code code block code code data processed io exception ioexception problem occurs reading data frame ws frame wsframe next frame nextframe block io exception ioexception frame ws frame wsframe next frame nextframe processor block frame read this fragment readthisfragment remaining frame get pay load length getpayloadlength frame input stream inputstream methods override read io exception ioexception make payload data available makepayloaddataavailable remaining remaining read this fragment readthisfragment masked processor read masked masked frame get mask getmask read this fragment readthisfragment xff override read len io exception ioexception make payload data available makepayloaddataavailable remaining len remaining len remaining result processor read len result result frame get mask getmask read this fragment readthisfragment remaining result read this fragment readthisfragment result result ensures payload data ready read make payload data available makepayloaddataavailable io exception ioexception error io exception ioexception error remaining frame get fin getfin data process frame next frame nextframe frame is control iscontrol frame get op code getopcode constants opcode ping out bound outbound pong frame get pay load getpayload frame get op code getopcode constants opcode pong swallow frame get op code getopcode constants opcode close out bound outbound close frame io exception ioexception get string getstring unknown op code unknownopcode value of valueof frame get op code getopcode next frame nextframe frame get op code getopcode constants opcode continuation error get string getstring not continuation notcontinuation value of valueof frame get op code getopcode io exception ioexception error