licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina connector java file java io exception ioexception java util array list arraylist java util arrays java util list org junit org junit test org apache catalina container org apache catalina container listener containerlistener org apache catalina lifecycle exception lifecycleexception org apache catalina lifecycle listener lifecyclelistener org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest org apache tomcat util buf byte chunk bytechunk test mapper listener testmapperlistener tomcat base test tomcatbasetest test test tomcat restart listener count testtomcatrestartlistenercount bug io exception ioexception lifecycle exception lifecycleexception test runs tomcat tests started comp ares compares counts listeners registered containers starts sample request test tomcat testtomcat test single webapp testsinglewebapp tomcat tomcat get tomcat instance gettomcatinstance file app dir appdir file get build directory getbuilddirectory web apps webapps examples app dir relative server tomcat add webapp addwebapp examples app dir appdir get absolute path getabsolutepath tomcat start byte chunk bytechunk res string text res get url geturl http localhost get port getport examples servlets servlet hello world example helloworldexample text res to string tostring assert true asserttrue text text href helloworld html list listeners info listenersinfo listeners first listenersfirst array list arraylist listeners info listenersinfo populate listeners info populatelistenersinfo listeners first listenersfirst tomcat get engine getengine tomcat tomcat start res get url geturl http localhost get port getport examples servlets servlet hello world example helloworldexample text res to string tostring assert true asserttrue text text href helloworld html list listeners info listenersinfo listeners second listenerssecond array list arraylist listeners info listenersinfo populate listeners info populatelistenersinfo listeners second listenerssecond tomcat get engine getengine assert equals assertequals listeners first listenersfirst size listeners second listenerssecond size len listeners first listenersfirst size len listeners info listenersinfo listeners first listenersfirst listeners info listenersinfo listeners second listenerssecond equal container get class getclass container get class getclass container listeners containerlisteners length container listeners containerlisteners length lifecycle listeners lifecyclelisteners length lifecycle listeners lifecyclelisteners length equal fail lists listeners differ listeners info listenersinfo container container container listener containerlistener container listeners containerlisteners lifecycle listener lifecyclelistener lifecycle listeners lifecyclelisteners listeners info listenersinfo container container container listener containerlistener container listeners containerlisteners lifecycle listener lifecyclelistener lifecycle listeners lifecyclelisteners container container container listeners containerlisteners container listeners containerlisteners lifecycle listeners lifecyclelisteners lifecycle listeners lifecyclelisteners override string to string tostring string builder stringbuilder buf string builder stringbuilder buf append container append container append container listeners containerlisteners length append container listeners containerlisteners length append lifecycle listeners lifecyclelisteners length append lifecycle listeners lifecyclelisteners length append container listeners containerlisteners append arrays as list aslist container listeners containerlisteners append lifecycle listeners lifecyclelisteners append arrays as list aslist lifecycle listeners lifecyclelisteners append buf to string tostring populate listeners info populatelistenersinfo list listeners info listenersinfo list container container list add listeners info listenersinfo container container find container listeners findcontainerlisteners container find lifecycle listeners findlifecyclelisteners container child container find children findchildren populate listeners info populatelistenersinfo list child