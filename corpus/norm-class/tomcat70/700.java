licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util http java io exception ioexception javax servlet servlet exception servletexception javax servlet http cookie javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org junit assert equals assertequals org junit test org apache catalina context org apache catalina startup simple http client simplehttpclient org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest test cookies allow equals testcookiesallowequals tomcat base test tomcatbasetest string cookie equals equals middle string cookie equals equals start equalsstart string cookie equals equals end equalsend test test with equals testwithequals exception system set property setproperty org apache tomcat util http server cookie servercookie equals test cookie equals client testcookieequalsclient client test cookie equals client testcookieequalsclient client do request dorequest test cookie equals client testcookieequalsclient simple http client simplehttpclient do request dorequest exception tomcat tomcat get tomcat instance gettomcatinstance context root tomcat add context addcontext temp dir tomcat add servlet addservlet root simple simple servlet simpleservlet root add servlet mapping addservletmapping test simple tomcat start open connection set port setport tomcat get connector getconnector get local port getlocalport connect string request string request test http crlf cookie cookie equals crlf cookie cookie equals crlf cookie cookie equals crlf crlf set request setrequest request blocks response read process request processrequest string response get response body getresponsebody close connection disconnect reset tomcat assert equals assertequals cookie equals cookie equals cookie equals response override is response body k isresponsebodyok simple servlet simpleservlet http servlet httpservlet serialversionuid override service http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception cookie cookies req get cookies getcookies cookie cookie cookies resp get writer getwriter write cookie get name getname cookie get value getvalue resp flush buffer flushbuffer