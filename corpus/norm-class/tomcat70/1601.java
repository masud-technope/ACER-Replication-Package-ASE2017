licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache juli java buffered output stream bufferedoutputstream java file java file output stream fileoutputstream java io exception ioexception java output stream outputstream java output stream writer outputstreamwriter java print writer printwriter java unsupported encoding exception unsupportedencodingexception java sql timestamp java util concurrent locks read write lock readwritelock java util concurrent locks reentrant read write lock reentrantreadwritelock java util logging error manager errormanager java util logging filter java util logging formatter java util logging handler java util logging level java util logging log manager logmanager java util logging log record logrecord java util logging simple formatter simpleformatter implementation handler app ends appends log messages file named prefix suffix configured directory configuration properties code directory code directory create log file path absolute relative current working directory application apache tomcat configuration files absolute path property code catalina base logs code code logs code code rotatable code code code log file rotated write midnight filename code prefix suffix code yyyy code code file rotated filename code prefix suffix code code code code prefix code leading log file code juli code code suffix code trailing log file code log code code buffer size buffersize code config ures configures buf fering buffering code code system buf fering buffering typically buffer code code for ces forces writer flush log write code code buffered output stream bufferedoutputstream defined not e note system buf fering buffering applied code code code encoding code character log file empty string system character code level code level threshold handler code java util logging level code levels code code code filter code code java util logging filter code implementation handler unset code formatter code code java util logging formatter code implementation handler code java util logging simple formatter simpleformatter code file handler filehandler handler file handler filehandler file handler filehandler string directory string prefix string suffix directory directory prefix prefix suffix suffix configure open writer openwriter instance variables open log file length string open log file string directory log files created string directory prefix log file file names filenames string prefix suffix log file file names filenames string suffix determines log file logfile rotatable rotatable print writer printwriter logging print writer printwriter writer lock control access writer read write lock readwritelock writer lock writerlock reentrant read write lock reentrantreadwritelock log buffer size buffer size buffersize methods format publish log record logrecord param record description log event override publish log record logrecord record is log gable isloggable record construct timestamp requested timestamp timestamp system current time millis currenttimemillis string ts string tsstring to string tostring substring string ts date tsdate ts string tsstring substring writer lock writerlock read lock readlock lock changed log files rotatable equals ts date tsdate upgrade write lock writelock writer lock writerlock read lock readlock unlock writer lock writerlock write lock writelock lock thread has n hasn equals ts date tsdate close writer closewriter ts date tsdate open writer openwriter down grade downgrade read lock ensures writer remains valid log message written writer lock writerlock read lock readlock lock writer lock writerlock write lock writelock unlock string result result get formatter getformatter format record exception report error reporterror error manager errormanager format failure writer writer write result buffer size buffersize writer flush report error reporterror file handler filehandler closed initialized unable log result error manager errormanager write failure exception report error reporterror error manager errormanager write failure writer lock writerlock read lock readlock unlock methods close open log file override close close writer closewriter close writer closewriter writer lock writerlock write lock writelock lock writer writer write get formatter getformatter get tail gettail writer flush writer close writer exception report error reporterror error manager errormanager close failure writer lock writerlock write lock writelock unlock flush writer override flush writer lock writerlock read lock readlock lock writer writer flush exception report error reporterror error manager errormanager flush failure writer lock writerlock read lock readlock unlock configure code log manager logmanager code properties configure timestamp timestamp system current time millis currenttimemillis string ts string tsstring to string tostring substring ts string tsstring substring classes override string class name classname get class getclass get name getname class loader classloader thread current thread currentthread get context class loader getcontextclassloader retrieve configuration logging file rotatable parse boolean parseboolean get property getproperty class name classname rotatable directory directory get property getproperty class name classname directory logs prefix prefix get property getproperty class name classname prefix juli suffix suffix get property getproperty class name classname suffix log string s buffer size sbuffersize get property getproperty class name classname buffer size buffersize string value of valueof buffer size buffersize buffer size buffersize integer parse int parseint s buffer size sbuffersize number format exception numberformatexception ignore encoding logging file string encoding get property getproperty class name classname encoding encoding encoding length set encoding setencoding encoding unsupported encoding exception unsupportedencodingexception logging level handler set level setlevel level parse get property getproperty class name classname level level filter configuration string filter name filtername get property getproperty class name classname filter filter name filtername set filter setfilter filter load class loadclass filter name filtername new instance newinstance exception formatter string formatter name formattername get property getproperty class name classname formatter formatter name formattername set formatter setformatter formatter load class loadclass formatter name formattername new instance newinstance exception set formatter setformatter simple formatter simpleformatter set formatter setformatter simple formatter simpleformatter error manager set error manager seterrormanager error manager errormanager string get property getproperty string string default value defaultvalue string log manager logmanager get log manager getlogmanager get property getproperty default value defaultvalue trim open log file code code open open writer openwriter open writer openwriter create directory file dir file directory dir mkdirs dir is directory isdirectory report error reporterror unable create dir error manager errormanager open failure writer open current log file writer lock writerlock write lock writelock lock file output stream fileoutputstream fos output stream outputstream file path name pathname file dir get absolute file getabsolutefile prefix rotatable suffix file parent path name pathname get parent file getparentfile parent mkdirs parent is directory isdirectory report error reporterror unable create parent error manager errormanager open failure writer string encoding get encoding getencoding fos file output stream fileoutputstream path name pathname buffer size buffersize buffered output stream bufferedoutputstream fos buffer size buffersize fos writer print writer printwriter encoding output stream writer outputstreamwriter encoding output stream writer outputstreamwriter writer write get formatter getformatter get head gethead exception report error reporterror error manager errormanager open failure writer fos fos close io exception ioexception close io exception ioexception writer lock writerlock write lock writelock unlock