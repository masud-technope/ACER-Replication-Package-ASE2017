licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc test java lang management management factory managementfactory java util hashtable java util properties javax management jmx javax management m bean server mbeanserver javax management object name objectname org junit org junit org junit test org apache tomcat jdbc pool connection pool connectionpool org apache tomcat jdbc pool pool utilities poolutilities org apache tomcat jdbc pool jmx connection pool bean connectionpoolmbean org apache tomcat jdbc test driver driver jmx password test jmxpasswordtest default test case defaulttestcase string password password string username username object name objectname oname set up setup exception datasource set driver class name setdriverclassname driver get name getname datasource set url seturl jdbc tomcat test datasource set password setpassword password datasource set username setusername username datasource get connection getconnection close m bean server mbeanserver mbs management factory managementfactory get platform bean server getplatformmbeanserver string domain tomcat jdbc hashtable string string properties hashtable string string properties type connection pool connectionpool properties get class getclass get name getname oname object name objectname domain properties connection pool connectionpool pool datasource create pool createpool org apache tomcat jdbc pool jmx connection pool connectionpool jmx pool jmxpool org apache tomcat jdbc pool jmx connection pool connectionpool pool mbs registermbean jmx pool jmxpool oname test test password testpassword exception assert equals assertequals pass words passwords match jmx password datasource get pool properties getpoolproperties get password getpassword m bean server mbeanserver mbs management factory managementfactory get platform bean server getplatformmbeanserver connection pool bean connectionpoolmbean mbean jmx new bean proxy newmbeanproxy mbs oname connection pool bean connectionpoolmbean string jmx password jmxpassword mbean get password getpassword properties jmx properties jmxproperties mbean get db properties getdbproperties assert false assertfalse pass words passwords match password equals jmx password jmxpassword assert false assertfalse password property missing jmx properties jmxproperties contains key containskey pool utilities poolutilities prop password