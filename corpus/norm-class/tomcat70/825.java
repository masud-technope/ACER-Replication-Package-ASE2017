licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket java util hash set hashset java util org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util exception utils exceptionutils org apache tomcat util res string manager stringmanager background processing mechanism triggers roughly main tains maintains thread runs instance link background process backgroundprocess registered background process manager backgroundprocessmanager log log log factory logfactory get log getlog background process manager backgroundprocessmanager string manager stringmanager string manager stringmanager get manager getmanager constants background process manager backgroundprocessmanager instance instance background process manager backgroundprocessmanager background process manager backgroundprocessmanager get instance getinstance instance background process backgroundprocess processes hash set hashset background process backgroundprocess object processes lock processeslock object ws background thread wsbackgroundthread ws background thread wsbackgroundthread background process manager backgroundprocessmanager hide constructor register background process backgroundprocess process processes lock processeslock processes size ws background thread wsbackgroundthread ws background thread wsbackgroundthread ws background thread wsbackgroundthread set context class loader setcontextclassloader get class getclass get class loader getclassloader ws background thread wsbackgroundthread set daemon setdaemon ws background thread wsbackgroundthread start processes add process unregister background process backgroundprocess process processes lock processeslock processes remove process ws background thread wsbackgroundthread processes size ws background thread wsbackgroundthread halt ws background thread wsbackgroundthread process background process backgroundprocess current processes currentprocesses hash set hashset background process backgroundprocess processes lock processeslock current processes currentprocesses add all addall processes background process backgroundprocess process current processes currentprocesses process background process backgroundprocess throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring background process manager backgroundprocessmanager process failed processfailed unit testing get process count getprocesscount processes lock processeslock processes size shutdown processes lock processeslock processes clear ws background thread wsbackgroundthread ws background thread wsbackgroundthread halt ws background thread wsbackgroundthread ws background thread wsbackgroundthread thread background process manager backgroundprocessmanager manager running ws background thread wsbackgroundthread background process manager backgroundprocessmanager manager set name setname web socket websocket background processing manager manager override running thread sleep interrupted exception interruptedexception manager process halt set name setname web socket websocket background processing stop ping stopping running