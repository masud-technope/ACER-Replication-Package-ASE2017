licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket java io exception ioexception java nio channels asynchronous channel group asynchronouschannelgroup java security access controller accesscontroller java security privileged action privilegedaction java util concurrent executor service executorservice java util concurrent sync hronous queue synchronousqueue java util concurrent thread factory threadfactory java util concurrent time unit timeunit java util concurrent atomic atomic integer atomicinteger org apache tomcat util res string manager stringmanager org apache tomcat util threads thread pool executor threadpoolexecutor utility enables multiple link ws web socket container wswebsocketcontainer instances share single link asynchronous channel group asynchronouschannelgroup ensuring group dest royed destroyed longer required async channel group util asyncchannelgrouputil string manager stringmanager string manager stringmanager get manager getmanager constants asynchronous channel group asynchronouschannelgroup group usage count usagecount object lock object async channel group util asyncchannelgrouputil hide constructor asynchronous channel group asynchronouschannelgroup register lock usage count usagecount group create asynchronous channel group createasynchronouschannelgroup usage count usagecount group unregister lock usage count usagecount usage count usagecount group shutdown group asynchronous channel group asynchronouschannelgroup create asynchronous channel group createasynchronouschannelgroup thread context loader web app call trigger leak class loader classloader original thread current thread currentthread get context class loader getcontextclassloader thread current thread currentthread set context class loader setcontextclassloader asynciothreadfactory get class loader getclassloader settings asynchronous channel group asynchronouschannelgroup initial size initialsize runtime get runtime getruntime available processors availableprocessors executor service executorservice executor service executorservice thread pool executor threadpoolexecutor integer max max time unit timeunit milliseconds sync hronous queue synchronousqueue runnable asynciothreadfactory asynchronous channel group asynchronouschannelgroup with cached thread pool withcachedthreadpool executor service executorservice initial size initialsize io exception ioexception illegal state exception illegalstateexception get string getstring async channel group asyncchannelgroup create fail createfail thread current thread currentthread set context class loader setcontextclassloader original asynciothreadfactory thread factory threadfactory load new thread privileged action newthreadprivilegedaction new thread newthread called inn ocuous thread innocuousthread https apache org bug zilla bugzilla bug cgi new thread privileged action newthreadprivilegedaction load override thread new thread newthread runnable https apache org bug zilla bugzilla bug cgi access controller accesscontroller do privileged doprivileged new thread privileged action newthreadprivilegedaction explicitly new thread privileged action newthreadprivilegedaction privileged action privilegedaction thread atomic integer atomicinteger count atomic integer atomicinteger runnable new thread privileged action newthreadprivilegedaction runnable override thread thread thread set name setname web socket client websocketclient asyncio count increment and get incrementandget set context class loader setcontextclassloader get class getclass get class loader getclassloader set daemon setdaemon load hook enable loaded