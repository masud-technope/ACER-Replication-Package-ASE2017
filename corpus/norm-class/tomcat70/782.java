licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util http file upload fileupload java io exception ioexception java input stream inputstream java nio charset charset java util array list arraylist java util hash map hashmap java util list java util locale java util map java util no such element exception nosuchelementexception org apache tomcat util http file upload fileupload multipart stream multipartstream item input stream iteminputstream org apache tomcat util http file upload fileupload util closeable org apache tomcat util http file upload fileupload util file item headers impl fileitemheadersimpl org apache tomcat util http file upload fileupload util limited input stream limitedinputstream org apache tomcat util http file upload fileupload util streams high level api processing file uploads handles multiple files single html widget code multipart mixed code encoding type href http ietf org rfc rfc txt rfc link parse request parserequest request context requestcontext acquire list link org apache tomcat util http file upload fileupload file item fileitem html widget data individual parts stored determined factory create memory disk file upload base fileuploadbase methods charset charset iso charset for name forname iso utility method determines request multipart content strong note strong method moved code servlet file upload servletfileupload code file upload fileupload release method provide replacement method removed param ctx request context eval uated evaluated code code request multipart code code is multipart content ismultipartcontent request context requestcontext ctx string content type contenttype ctx get content type getcontenttype content type contenttype content type contenttype to lower case tolowercase locale english starts with startswith multipart manifest constants http content type header string content type content type http content disposition header string content disposition content disposition http content length header string content length content length content disposition form data string form data form data content disposition file attachment string attachment attachment http content type header string multipart multipart http content type header multipart forms string multipart form data multipart form data http content type header multiple uploads string multipart mixed multipart mixed data members maximum size permitted complete request opposed link file size max filesizemax maximum size max sizemax maximum size permitted single uploaded file opposed link size max sizemax maximum file size max filesizemax content encoding reading headers string header encoding headerencoding progress listener progress listener progresslistener listener property access ors accessors returns factory creating file items factory file items file item factory fileitemfactory get file item factory getfileitemfactory sets factory creating file items param factory factory file items set file item factory setfileitemfactory file item factory fileitemfactory factory returns maximum allowed size complete request opposed link get file size max getfilesizemax maximum allowed size bytes limit set size max setsizemax get size max getsizemax size max sizemax sets maximum allowed size complete request opposed link set file size max setfilesizemax param size max sizemax maximum allowed size bytes limit get size max getsizemax set size max setsizemax size max sizemax size max sizemax size max sizemax returns maximum allowed size single uploaded file opposed link get size max getsizemax set file size max setfilesizemax maximum size single uploaded file get file size max getfilesizemax file size max filesizemax sets maximum allowed size single uploaded file opposed link get size max getsizemax get file size max getfilesizemax param file size max filesizemax maximum size single uploaded file set file size max setfilesizemax file size max filesizemax file size max filesizemax file size max filesizemax retrieves character encoding reading headers individual code code request encoding code code platform encoding encoding read headers string get header encoding getheaderencoding header encoding headerencoding specifies character encoding reading headers individual code code request encoding code code platform encoding param encoding encoding read headers set header encoding setheaderencoding string encoding header encoding headerencoding encoding methods processes href http ietf org rfc rfc txt rfc comp liant compliant code multipart form data code stream param ctx context request parsed iterator instances code file item stream fileitemstream code parsed request order transmitted file upload exception fileuploadexception problems reading parsing request storing files io exception ioexception error occurred net work network error communicating client problem storing uploaded content file item iterator fileitemiterator get item iterator getitemiterator request context requestcontext ctx file upload exception fileuploadexception io exception ioexception file item iterator impl fileitemiteratorimpl ctx fileuploadioexception file upload exception fileuploadexception get cause getcause processes href http ietf org rfc rfc txt rfc comp liant compliant code multipart form data code stream param ctx context request parsed list code file item fileitem code instances parsed request order transmitted file upload exception fileuploadexception problems reading parsing request storing files list file item fileitem parse request parserequest request context requestcontext ctx file upload exception fileuploadexception list file item fileitem items array list arraylist file item fileitem successful file item iterator fileitemiterator iter get item iterator getitemiterator ctx file item factory fileitemfactory fac get file item factory getfileitemfactory fac null pointer exception nullpointerexception file item factory fileitemfactory iter has next hasnext file item stream fileitemstream item iter don get name getname prevent invalid file name exception invalidfilenameexception string file name filename file item iterator impl fileitemiteratorimpl file item stream impl fileitemstreamimpl item file item fileitem file item fileitem fac create item createitem item get field name getfieldname item get content type getcontenttype item is form field isformfield file name filename items add file item fileitem streams copy item open stream openstream file item fileitem get output stream getoutputstream fileuploadioexception file upload exception fileuploadexception get cause getcause io exception ioexception io file upload exception iofileuploadexception string format processing request failed multipart form data get message getmessage file item headers fileitemheaders fih item get headers getheaders file item fileitem set headers setheaders fih successful items fileuploadioexception file upload exception fileuploadexception get cause getcause io exception ioexception file upload exception fileuploadexception get message getmessage successful file item fileitem file item fileitem items file item fileitem delete exception processes href http ietf org rfc rfc txt rfc comp liant compliant code multipart form data code stream param ctx context request parsed map code file item fileitem code instances parsed request file upload exception fileuploadexception problems reading parsing request storing files map string list file item fileitem parse parameter map parseparametermap request context requestcontext ctx file upload exception fileuploadexception list file item fileitem items parse request parserequest ctx map string list file item fileitem items map itemsmap hash map hashmap string list file item fileitem items size file item fileitem file item fileitem items string field name fieldname file item fileitem get field name getfieldname list file item fileitem mapped items mappeditems items map itemsmap field name fieldname mapped items mappeditems mapped items mappeditems array list arraylist file item fileitem items map itemsmap field name fieldname mapped items mappeditems mapped items mappeditems add file item fileitem items map itemsmap methods retrieves boundary code content type code header param content type contenttype content type header extract boundary boundary array get boundary getboundary string content type contenttype parameter parser parameterparser parser parameter parser parameterparser parser set lower case names setlowercasenames parameter parser handle input map string string params parser parse content type contenttype string boundary str boundarystr params boundary boundary str boundarystr boundary boundary boundary str boundarystr get bytes getbytes charset iso boundary retrieves file code content disposition code header param headers http headers object file current code encapsulation code string get file name getfilename file item headers fileitemheaders headers get file name getfilename headers get header getheader content disposition returns content disposition headers file param p content disposition pcontentdisposition content disposition headers file string get file name getfilename string p content disposition pcontentdisposition string file name filename p content disposition pcontentdisposition string cdl p content disposition pcontentdisposition to lower case tolowercase locale english cdl starts with startswith form data cdl starts with startswith attachment parameter parser parameterparser parser parameter parser parameterparser parser set lower case names setlowercasenames parameter parser handle input map string string params parser parse p content disposition pcontentdisposition params contains key containskey filename file name filename params filename file name filename file name filename file name filename trim parameter empty file file file name filename file name filename retrieves field code content disposition code header param headers code map code http request headers field current code encapsulation code string get field name getfieldname file item headers fileitemheaders headers get field name getfieldname headers get header getheader content disposition returns field content disposition header param p content disposition pcontentdisposition content dispositions header field jake string get field name getfieldname string p content disposition pcontentdisposition string field name fieldname p content disposition pcontentdisposition p content disposition pcontentdisposition to lower case tolowercase locale english starts with startswith form data parameter parser parameterparser parser parameter parser parameterparser parser set lower case names setlowercasenames parameter parser handle input map string string params parser parse p content disposition pcontentdisposition field name fieldname params field name fieldname field name fieldname field name fieldname trim field name fieldname parses code header code returns key pairs multiple headers names map comma separated list values param header part headerpart code header code current code encapsulation code code map code parsed http request headers file item headers fileitemheaders get parse d headers getparsedheaders string header part headerpart len header part headerpart length file item headers impl fileitemheadersimpl headers new file item headers newfileitemheaders start parse end of line parseendofline header part headerpart start start string builder stringbuilder header string builder stringbuilder header part headerpart substring start start start len non ws nonws start non ws nonws len header part headerpart char at charat non ws nonws non ws nonws non ws nonws start continuation parse end of line parseendofline header part headerpart non ws nonws header append append header part headerpart substring non ws nonws start parse header line parseheaderline headers header to string tostring headers creates instance link file item headers fileitemheaders instance file item headers impl fileitemheadersimpl new file item headers newfileitemheaders file item headers impl fileitemheadersimpl skips bytes current param header part headerpart headers parsed param processed sequence parse end of line parseendofline string header part headerpart offset header part headerpart index of indexof offset offset header part headerpart length illegal state exception illegalstateexception expected headers terminated empty header part headerpart char at charat offset offset offset reads header param headers string headers param header map store current header parse header line parseheaderline file item headers impl fileitemheadersimpl headers string header colon offset colonoffset header index of indexof colon offset colonoffset header malformed skip string header name headername header substring colon offset colonoffset trim string header value headervalue header substring header index of indexof trim headers add header addheader header name headername header value headervalue iterator returned link file upload base fileuploadbase get item iterator getitemiterator request context requestcontext file item iterator impl fileitemiteratorimpl file item iterator fileitemiterator implementation link file item stream fileitemstream file item stream impl fileitemstreamimpl file item stream fileitemstream file items content type string content type contenttype file items field string field name fieldname file items file string file item form field form field formfield file items input stream input stream inputstream stream file item opened opened headers file item headers fileitemheaders headers creates instance param p name pname items file param p field name pfieldname items field param p content type pcontenttype items content type param p form field pformfield item form field param p content length pcontentlength items content length io exception ioexception creating file item failed file item stream impl fileitemstreamimpl string p name pname string p field name pfieldname string p content type pcontenttype p form field pformfield p content length pcontentlength io exception ioexception p name pname field name fieldname p field name pfieldname content type contenttype p content type pcontenttype form field formfield p form field pformfield item input stream iteminputstream item stream itemstream multi new input stream newinputstream input stream inputstream istream item stream itemstream file size max filesizemax p content length pcontentlength p content length pcontentlength file size max filesizemax file size limit exceeded exception filesizelimitexceededexception file size limit exceeded exception filesizelimitexceededexception string format field exceeds maximum permitted size bytes field name fieldname value of valueof file size max filesizemax p content length pcontentlength file size max filesizemax set file name setfilename p name pname set field name setfieldname p field name pfieldname fileuploadioexception istream limited input stream limitedinputstream istream file size max filesizemax override raise error raiseerror p size max psizemax p count pcount io exception ioexception item stream itemstream close file size limit exceeded exception filesizelimitexceededexception file size limit exceeded exception filesizelimitexceededexception string format field exceeds maximum permitted size bytes field name fieldname value of valueof p size max psizemax p count pcount p size max psizemax set field name setfieldname field name fieldname set file name setfilename fileuploadioexception stream istream returns items content type content type override string get content type getcontenttype content type contenttype returns items field field override string get field name getfieldname field name fieldname returns items file file invalid file name exception invalidfilenameexception file nul character indicator security att ack attack int end intend file exception invalid file name exception invalidfilenameexception get name getname override string get name getname streams check file name checkfilename returns form field item form field override is form field isformfield form field formfield returns input stream read items contents opened input stream io exception ioexception error occurred override input stream inputstream open stream openstream io exception ioexception opened illegal state exception illegalstateexception stream opened closeable stream is closed isclosed file item stream fileitemstream item skipped exception itemskippedexception stream closes file item io exception ioexception error occurred close io exception ioexception stream close returns file item headers items header object override file item headers fileitemheaders get headers getheaders headers sets file item headers param p headers pheaders items header object override set headers setheaders file item headers fileitemheaders p headers pheaders headers p headers pheaders multi stream process multipart stream multipartstream multi not ifier notifier triggering link progress listener progresslistener multipart stream multipartstream progress not ifier progressnotifier not ifier notifier boundary sep arates separates parts boundary item process file item stream impl fileitemstreamimpl current item currentitem current items field string current field name currentfieldname skip ping skipping p reamble preamble skip preamble skippreamble current item read item valid itemvalid file eof creates instance param ctx request context file upload exception fileuploadexception error occurred parsing request io exception ioexception error occurred file item iterator impl fileitemiteratorimpl request context requestcontext ctx file upload exception fileuploadexception io exception ioexception ctx null pointer exception nullpointerexception ctx parameter string content type contenttype ctx get content type getcontenttype content type contenttype content type contenttype to lower case tolowercase locale english starts with startswith multipart invalid content type exception invalidcontenttypeexception string format request doesn stream content type header multipart form data multipart mixed content type contenttype request size requestsize upload context uploadcontext ctx content length contentlength event ually eventually closed multipart stream multipartstream processing input stream inputstream input size max sizemax request size requestsize request size requestsize size max sizemax size limit exceeded exception sizelimitexceededexception string format request rejected size exceeds configured maximum value of valueof request size requestsize value of valueof size max sizemax request size requestsize size max sizemax event ually eventually closed multipart stream multipartstream processing input limited input stream limitedinputstream ctx get input stream getinputstream size max sizemax override raise error raiseerror p size max psizemax p count pcount io exception ioexception file upload exception fileuploadexception size limit exceeded exception sizelimitexceededexception string format request rejected size exceeds configured maximum value of valueof p count pcount value of valueof p size max psizemax p count pcount p size max psizemax fileuploadioexception input ctx get input stream getinputstream string char encoding charencoding header encoding headerencoding char encoding charencoding char encoding charencoding ctx get character encoding getcharacterencoding boundary get boundary getboundary content type contenttype boundary avoid resource leak io utils ioutils close quietly closequietly input file upload exception fileuploadexception request rejected multipart boundary not ifier notifier multipart stream multipartstream progress not ifier progressnotifier listener request size requestsize multi multipart stream multipartstream input boundary not ifier notifier illegal argument exception illegalargumentexception iae io utils ioutils close quietly closequietly input invalid content type exception invalidcontenttypeexception string format boundary header content type iae multi set header encoding setheaderencoding char encoding charencoding skip preamble skippreamble find next item findnextitem called finding item item io exception ioexception error occurred find next item findnextitem io exception ioexception eof current item currentitem current item currentitem close current item currentitem next part nextpart skip preamble skippreamble next part nextpart multi skip preamble skippreamble next part nextpart multi read boundary readboundary next part nextpart current field name currentfieldname multipart terminated data eof multipart terminated parsing multi set boundary setboundary boundary current field name currentfieldname file item headers fileitemheaders headers get parse d headers getparsedheaders multi read headers readheaders current field name currentfieldname parsing multipart string field name fieldname get field name getfieldname headers field name fieldname string sub content type subcontenttype headers get header getheader content type sub content type subcontenttype sub content type subcontenttype to lower case tolowercase locale english starts with startswith multipart mixed current field name currentfieldname field name fieldname multiple files field sub boundary subboundary get boundary getboundary sub content type subcontenttype multi set boundary setboundary sub boundary subboundary skip preamble skippreamble string file name filename get file name getfilename headers current item currentitem file item stream impl fileitemstreamimpl file name filename field name fieldname headers get header getheader content type file name filename get content length getcontentlength headers current item currentitem set headers setheaders headers not ifier notifier not e item noteitem item valid itemvalid string file name filename get file name getfilename headers file name filename current item currentitem file item stream impl fileitemstreamimpl file name filename current field name currentfieldname headers get header getheader content type get content length getcontentlength headers current item currentitem set headers setheaders headers not ifier notifier not e item noteitem item valid itemvalid multi discard body data discardbodydata get content length getcontentlength file item headers fileitemheaders p headers pheaders parse long parselong p headers pheaders get header getheader content length exception returns instance link file item stream fileitemstream file upload exception fileuploadexception parsing processing file item failed io exception ioexception reading file item failed additional file items override has next hasnext file upload exception fileuploadexception io exception ioexception eof item valid itemvalid find next item findnextitem fileuploadioexception file upload exception fileuploadexception get cause getcause returns link file item stream fileitemstream java util no such element exception nosuchelementexception items link has next hasnext prevent exception file upload exception fileuploadexception parsing processing file item failed io exception ioexception reading file item failed file item stream fileitemstream instance access file item override file item stream fileitemstream file upload exception fileuploadexception io exception ioexception eof item valid itemvalid has next hasnext no such element exception nosuchelementexception item valid itemvalid current item currentitem exception thrown hiding link file upload exception fileuploadexception link io exception ioexception fileuploadioexception io exception ioexception serialversionuid fileuploadioexception fileuploadioexception string message throwable message fileuploadioexception string message message fileuploadioexception throwable thrown request multipart request invalid content type exception invalidcontenttypeexception file upload exception fileuploadexception exceptions uid serial izing serializing instance serialversionuid constructs code invalid content type exception invalidcontenttypeexception code detail message invalid content type exception invalidcontenttypeexception constructs code invalid content type exception invalidcontenttypeexception code detail message param message detail message invalid content type exception invalidcontenttypeexception string message message constructs code invalid content type exception invalidcontenttypeexception code detail message param msg detail message param original invalid content type exception invalidcontenttypeexception string msg throwable msg thrown io exception ioexception io file upload exception iofileuploadexception file upload exception fileuploadexception serialversionuid io file upload exception iofileuploadexception io file upload exception iofileuploadexception string message throwable message io file upload exception iofileuploadexception string message message io file upload exception iofileuploadexception throwable exception thrown requests permitted size exc eeded exceeded size exception sizeexception file upload exception fileuploadexception serial version uid serialized serialversionuid actual size request actual maximum permitted size request permitted creates instance param message detail message param actual actual number bytes request param permitted requests size limit bytes size exception sizeexception string message actual permitted message actual actual permitted permitted retrieves actual size request actual size request get actual size getactualsize actual retrieves permitted size request permitted size request get per mit ted size getpermittedsize permitted thrown request size exceeds configured maximum size limit exceeded exception sizelimitexceededexception size exception sizeexception serialversionuid constructs code size exceeded exception sizeexceededexception code detail message actual permitted sizes param message detail message param actual actual request size param permitted maximum permitted request size size limit exceeded exception sizelimitexceededexception string message actual permitted message actual permitted thrown files size exceeds configured maximum file size limit exceeded exception filesizelimitexceededexception size exception sizeexception serialversionuid file item caused exception string file name filename field item caused exception string field name fieldname file size limit exceeded exception filesizelimitexceededexception string message actual permitted message actual permitted returns file item caused exception file string get file name getfilename file name filename sets file item caused exception param p file name pfilename file item caused exception set file name setfilename string p file name pfilename file name filename p file name pfilename returns field item caused exception field string get field name getfieldname field name fieldname sets field item caused exception param p field name pfieldname field item caused exception set field name setfieldname string p field name pfieldname field name fieldname p field name pfieldname returns progress listener progress listener progress listener progresslistener get progress listener getprogresslistener listener sets progress listener param p listener plistener progress listener defaults set progress listener setprogresslistener progress listener progresslistener p listener plistener listener p listener plistener