licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache jasper compiler java file java file not found exception filenotfoundexception java file permission filepermission java net url java net url class loader urlclassloader java security code source codesource java security permission collection permissioncollection java security policy java security cert certificate java util iterator java util map java util concurrent concurrent hash map concurrenthashmap java util concurrent atomic atomic integer atomicinteger javax servlet servlet context servletcontext javax servlet jsp jsp factory jspfactory org apache jasper constants org apache jasper jsp compilation context jspcompilationcontext org apache jasper options org apache jasper runtime exception utils exceptionutils org apache jasper runtime jsp factory impl jspfactoryimpl org apache jasper security security class load securityclassload org apache jasper servlet jsp servlet wrapper jspservletwrapper org apache jasper util fast removal dequeue fastremovaldequeue org apache juli logging log org apache juli logging log factory logfactory tracking jsp compile time file dependencies include file directive background thread per iodically periodically checks files jsp dependent dependent file jsp included recompiled web application context directory author g len n glenn nielsen jsp runtime context jspruntimecontext logger log log log factory logfactory get log getlog jsp runtime context jspruntimecontext counts times webapp jsp s jsps reloaded atomic integer atomicinteger jsp reload count jspreloadcount atomic integer atomicinteger counts times jsp s jsps unloaded webapp atomic integer atomicinteger jsp unload count jspunloadcount atomic integer atomicinteger preload classes required runtime jsp servlet don define class in package defineclassinpackage security exception jsp factory impl jspfactoryimpl factory jsp factory impl jspfactoryimpl security class load securityclassload security class load securityclassload factory get class getclass get class loader getclassloader system get security manager getsecuritymanager string base package basepackage org apache jasper factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime jsp factory impl jspfactoryimpl privileged get page context privilegedgetpagecontext factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime jsp factory impl jspfactoryimpl privileged release page context privilegedreleasepagecontext factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime jsp runtime library jspruntimelibrary factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime jsp runtime library jspruntimelibrary privileged intro spec t helper privilegedintrospecthelper factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime servlet response wrapper include servletresponsewrapperinclude factory get class getclass get class loader getclassloader load class loadclass base package basepackage servlet jsp servlet wrapper jspservletwrapper class not found exception classnotfoundexception illegal state exception illegalstateexception jsp factory jspfactory set default factory setdefaultfactory factory create jsp runtime context jspruntimecontext web application context loads generated dependencies file param context servlet context servletcontext web application jsp runtime context jspruntimecontext servlet context servletcontext context options options context context options options parent loader class loader classloader loader thread current thread currentthread get context class loader getcontextclassloader loader loader get class getclass get class loader getclassloader log is debug enabled isdebugenabled loader log debug localizer get message getmessage jsp message parent loader loader to string tostring log debug localizer get message getmessage jsp message parent loader parent class loader parentclassloader loader classpath init class path initclasspath context org apache jasper servlet jsp servlet context jspcservletcontext code source codesource permission collection permissioncollection constants security enabled security holder securityholder holder init security initsecurity code source codesource holder permission collection permissioncollection holder code source codesource permission collection permissioncollection web application context running directory start background compilation thread string app base appbase context get real path getrealpath options get development getdevelopment app base appbase options get check interval getcheckinterval last compile check lastcompilecheck system current time millis currenttimemillis options get max loaded jsps getmaxloadedjsps jsp queue jspqueue fast removal dequeue fastremovaldequeue jsp servlet wrapper jspservletwrapper options get max loaded jsps getmaxloadedjsps log is debug enabled isdebugenabled log debug localizer get message getmessage jsp message jsp queue created options get max loaded jsps getmaxloadedjsps context get context path getcontextpath init parameter seconds locally milliseconds jsp idle timeout jspidletimeout options get jsp idle timeout getjspidletimeout instance variables web applications servlet context servletcontext servlet context servletcontext context options options class loader classloader parent class loader parentclassloader permission collection permissioncollection permission collection permissioncollection code source codesource code source codesource string classpath last compile check lastcompilecheck last jsp queue update lastjspqueueupdate system current time millis currenttimemillis jsp idle timeout milliseconds jsp idle timeout jspidletimeout maps jsp jsp servlet wrapper jspservletwrapper map string jsp servlet wrapper jspservletwrapper jsps concurrent hash map concurrenthashmap string jsp servlet wrapper jspservletwrapper jsp ordered access fast removal dequeue fastremovaldequeue jsp servlet wrapper jspservletwrapper jsp queue jspqueue methods add jsp servlet wrapper jspservletwrapper param jsp uri jspuri jsp uri param jsw servlet wrapper jsp add wrapper addwrapper string jsp uri jspuri jsp servlet wrapper jspservletwrapper jsw jsps jsp uri jspuri jsw existing jsp servlet wrapper jspservletwrapper param jsp uri jspuri jsp uri jsp servlet wrapper jspservletwrapper jsp jsp servlet wrapper jspservletwrapper get wrapper getwrapper string jsp uri jspuri jsps jsp uri jspuri remove jsp servlet wrapper jspservletwrapper param jsp uri jspuri jsp uri jsp servlet wrapper jspservletwrapper remove remove wrapper removewrapper string jsp uri jspuri jsps remove jsp uri jspuri push newly compiled jsp servlet wrapper jspservletwrapper queue execution jsp destroy jsp replaced queue param jsw servlet wrapper jsp unload handle unloadhandle pushed front queue execution times fast removal dequeue fastremovaldequeue jsp servlet wrapper jspservletwrapper entry jsp servlet wrapper jspservletwrapper push jsp servlet wrapper jspservletwrapper jsw log is trace enabled istraceenabled log trace localizer get message getmessage jsp message jsp jsw get jsp uri getjspuri context get context path getcontextpath fast removal dequeue fastremovaldequeue jsp servlet wrapper jspservletwrapper entry jsp servlet wrapper jspservletwrapper entry jsp queue jspqueue push jsw jsp servlet wrapper jspservletwrapper replaced entry get replaced getreplaced replaced log is debug enabled isdebugenabled log debug localizer get message getmessage jsp message jsp removed excess replaced get jsp uri getjspuri context get context path getcontextpath unload jsp servlet wrapper unloadjspservletwrapper replaced entry clear replaced clearreplaced entry push unload handle unloadhandle jsp servlet wrapper jspservletwrapper front queue param unload handle unloadhandle unload handle unloadhandle jsp make you ngest makeyoungest fast removal dequeue fastremovaldequeue jsp servlet wrapper jspservletwrapper entry jsp servlet wrapper jspservletwrapper unload handle unloadhandle log is trace enabled istraceenabled jsp servlet wrapper jspservletwrapper jsw unload handle unloadhandle get content getcontent log trace localizer get message getmessage jsp message jsp queue update jsw get jsp uri getjspuri context get context path getcontextpath jsp queue jspqueue move first movefirst unload handle unloadhandle returns number jsp s jsps jsp servlet wrappers jspservletwrappers exist number jsp s jsps loaded webapp number jsp s jsps loaded webapp get jsp count getjspcount jsps size security manager securitymanager policy code source codesource web application context code source codesource jsp code source codesource get code source getcodesource code source codesource parent class loader classloader class loader classloader parent class loader classloader get parent class loader getparentclassloader parent class loader parentclassloader security manager securitymanager permission collection permissioncollection web application context permission collection permissioncollection permissions permission collection permissioncollection get permission collection getpermissioncollection permission collection permissioncollection process destroy event web application context destroy iterator jsp servlet wrapper jspservletwrapper servlets jsps values iterator servlets has next hasnext servlets destroy inc rements increments jsp reload counter increment jsp reload count incrementjspreloadcount jsp reload count jspreloadcount increment and get incrementandget resets jsp reload counter param count reset jsp reload counter set jsp reload count setjspreloadcount count jsp reload count jspreloadcount count current jsp reload counter current jsp reload counter get jsp reload count getjspreloadcount jsp reload count jspreloadcount int value intvalue number jsp s jsps jsp limiter queue number jsp s jsps webapp jsp servlet jspservlet jsp limiter queue get jsp queue length getjspqueuelength jsp queue jspqueue jsp queue jspqueue get size getsize inc rements increments jsp unload counter increment jsp unload count incrementjspunloadcount jsp unload count jspunloadcount increment and get incrementandget number jsp s jsps unloaded number jsp s jsps webapp jsp servlet jspservlet unloaded get jsp unload count getjspunloadcount jsp unload count jspunloadcount int value intvalue method background thread check jsp dependencies registered jsp check compile checkcompile last compile check lastcompilecheck checking disabled system current time millis currenttimemillis last compile check lastcompilecheck options get check interval getcheckinterval last compile check lastcompilecheck object wrappers jsps values to array toarray wrappers length jsp servlet wrapper jspservletwrapper jsw jsp servlet wrapper jspservletwrapper wrappers jsp compilation context jspcompilationcontext ctxt jsw get jsp engine context getjspenginecontext detects reload jsw ctxt compile file not found exception filenotfoundexception ctxt increment removed incrementremoved throwable exception utils exceptionutils handle throwable handlethrowable jsw get servlet context getservletcontext log background compile failed classpath passed java compiler string get class path getclasspath classpath time update background task get last jsp queue update getlastjspqueueupdate last jsp queue update lastjspqueueupdate methods method initialize classpath comp iles compiles string init class path initclasspath string builder stringbuilder cpath string builder stringbuilder parent class loader parentclassloader url class loader urlclassloader url urls url class loader urlclassloader parent class loader parentclassloader geturls urls length urls get protocol getprotocol equals file cpath append urls get file getfile file path separator pathseparator cpath append options get scratch dir getscratchdir file path separator pathseparator string string context get attribute getattribute constants servlet classpath equals options get class path getclasspath string path cpath to string tostring log is debug enabled isdebugenabled log debug compilation classpath initialized path path helper init security initsecurity items security holder securityholder code source codesource permission collection permissioncollection security holder securityholder code source codesource permission collection permissioncollection method initialize security manager securitymanager data security holder securityholder init security initsecurity setup permission collection permissioncollection web app context based permissions configured root web app context directory add file read permission directory policy policy policy get policy getpolicy code source codesource source permission collection permissioncollection permissions policy permissions web app context string doc base docbase context get real path getrealpath doc base docbase doc base docbase options get scratch dir getscratchdir to string tostring string code base codebase doc base docbase code base codebase ends with endswith file separator code base codebase code base codebase file separator file context dir contextdir file code base codebase url url context dir contextdir get canonical file getcanonicalfile touri tourl source code source codesource url certificate permissions policy get per missions getpermissions source create file read permission web app context directory doc base docbase ends with endswith file separator permissions add file permission filepermission doc base docbase read doc base docbase doc base docbase file separator permissions add file permission filepermission doc base docbase substring doc base docbase length read doc base docbase doc base docbase permissions add file permission filepermission doc base docbase read spec apps read write temp directory fine security sensitive files app doesn full control written string work dir workdir options get scratch dir getscratchdir to string tostring work dir workdir ends with endswith file separator permissions add file permission filepermission work dir workdir read write work dir workdir work dir workdir file separator work dir workdir work dir workdir permissions add file permission filepermission work dir workdir read write delete jsp access org apache jasper runtime http jsp base httpjspbase permissions add runtime permission runtimepermission access class in package accessclassinpackage org apache jasper runtime parent class loader parentclassloader url class loader urlclassloader url urls url class loader urlclassloader parent class loader parentclassloader geturls string jar url jarurl string jndi url jndiurl urls length jndi url jndiurl urls to string tostring starts with startswith jndi jndi url jndiurl urls to string tostring jar url jarurl urls to string tostring starts with startswith jar jndi jar url jarurl urls to string tostring jar url jarurl jar url jarurl substring jar url jarurl length jar url jarurl jar url jarurl substring jar url jarurl last index of lastindexof jar url jarurl permissions add file permission filepermission jar url jarurl read permissions add file permission filepermission jar url jarurl substring read jndi url jndiurl permissions add file permission filepermission jndi url jndiurl read exception context log security init context failed security holder securityholder source permissions unload jsp servlet wrapper unloadjspservletwrapper jsp servlet wrapper jspservletwrapper jsw remove wrapper removewrapper jsw get jsp uri getjspuri jsw jsw destroy jsp unload count jspunloadcount increment and get incrementandget method background thread check jsp unloaded check unload checkunload log is trace enabled istraceenabled queue length queuelength jsp queue jspqueue queue length queuelength jsp queue jspqueue get size getsize log trace localizer get message getmessage jsp message jsp unload check context get context path getcontextpath jsps size queue length queuelength system current time millis currenttimemillis jsp idle timeout jspidletimeout unload before unloadbefore jsp idle timeout jspidletimeout object wrappers jsps values to array toarray wrappers length jsp servlet wrapper jspservletwrapper jsw jsp servlet wrapper jspservletwrapper wrappers jsw jsw get last usage time getlastusagetime unload before unloadbefore log is debug enabled isdebugenabled log debug localizer get message getmessage jsp message jsp removed idle jsw get jsp uri getjspuri context get context path getcontextpath jsw get last usage time getlastusagetime jsp queue jspqueue jsp queue jspqueue remove jsw get unload handle getunloadhandle unload jsp servlet wrapper unloadjspservletwrapper jsw last jsp queue update lastjspqueueupdate