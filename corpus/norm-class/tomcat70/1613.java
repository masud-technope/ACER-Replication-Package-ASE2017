licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license websocket drawboard java eof exception eofexception java io exception ioexception javax websocket close reason closereason javax websocket endpoint javax websocket endpoint config endpointconfig javax websocket message handler messagehandler javax websocket session org apache juli logging log org apache juli logging log factory logfactory websocket drawboard draw message drawmessage parse exception parseexception websocket drawboard wsmessages string web socket message stringwebsocketmessage draw board endpoint drawboardendpoint endpoint log log log factory logfactory get log getlog draw board endpoint drawboardendpoint room players join room room object room lock roomlock object room get room getroom create create room room lock roomlock room room room room room player endpoint current room note variable accessed room thread todo tomcat endpoint instance java doc endpoint instance websocket endpoint guaranteed called thread time active connection calling on close onclose instance reused connection on open onopen called thread variable holder variables accessed room thread read reference holder on open onopen on message onmessage on close onclose methods ensure room thread correct instance variable holder room player player override on open onopen session session endpoint config endpointconfig config maximum messages size bytes session set max text message buffer size setmaxtextmessagebuffersize session add message handler addmessagehandler string handler stringhandler client client client session room room get room getroom room invoke and wait invokeandwait runnable override create player add room player room create and add player createandaddplayer client illegal state exception illegalstateexception client send message sendmessage string web socket message stringwebsocketmessage get local ized message getlocalizedmessage client close runtime exception runtimeexception log error unexpected exception to string tostring override on close onclose session session close reason closereason close reason closereason room room get room getroom room room invoke and wait invokeandwait runnable override player could n couldn enter room player remove player room player remove from room removefromroom player prevent npe s npes on message onmessage events processed threads on close onclose called thread closed web socket websocket session player runtime exception runtimeexception log error unexpected exception to string tostring override on error onerror session session throwable user closing browser check root eof ignore protect infinite loops count throwable root root get cause getcause count root root get cause getcause count root eof exception eofexception assume triggered user closing browser ignore session is open isopen root io exception ioexception io exception ioexception close assume variation user closing browser ref res hing refreshing ignore log error on error onerror to string tostring message handler messagehandler string string handler stringhandler message handler messagehandler string override on message onmessage string message invoke handling message room room invoke and wait invokeandwait runnable override types messages client send draw messages prefixed message starting pong messages starting draw messages type col r colr col b colb col g colg col a cola thickness last in chain lastinchain dont swallow exception dontswallowexception message type messagetype message char at charat string message content messagecontent message substring message type messagetype draw message index of char indexofchar message content messagecontent index of indexof msg id msgid parse long parselong message content messagecontent substring index of char indexofchar draw message drawmessage msg draw message drawmessage parse from string parsefromstring message content messagecontent substring index of char indexofchar don ingore runtime exceptions runtimeexceptions thrown method todo find solution variable dont swallow exception dontswallowexception player player handle draw message handledrawmessage msg msg id msgid dont swallow exception dontswallowexception runtime exception runtimeexception dont swallow exception dontswallowexception parse exception parseexception runtime exception runtimeexception log error unexpected exception to string tostring