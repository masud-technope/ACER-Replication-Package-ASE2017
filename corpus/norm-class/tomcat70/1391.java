licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket java nio byte buffer bytebuffer org junit org junit test test ws session testwssession test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation test test append close reason with truncation testappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation do test append close reason with truncation dotestappendclosereasonwithtruncation reason length reasonlength string builder stringbuilder reason string builder stringbuilder reason length reasonlength reason length reasonlength reason append byte buffer bytebuffer buf byte buffer bytebuffer all ocate allocate ws session wssession append close reason with truncation appendclosereasonwithtruncation buf reason to string tostring check position contents reason length reasonlength assert equals assertequals reason length reasonlength buf position reason length reasonlength assert equals assertequals buf truncated assert equals assertequals buf position assert equals assertequals buf assert equals assertequals buf xff assert equals assertequals buf xff assert equals assertequals buf xff