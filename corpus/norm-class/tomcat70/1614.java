licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina startup java io exception ioexception java print writer printwriter java net url java net url class loader urlclassloader javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org junit assert equals assertequals org junit test org apache catalina context org apache catalina loader webapp class loader base webappclassloaderbase org apache tomcat util buf byte chunk bytechunk test tomcat class loader testtomcatclassloader tomcat base test tomcatbasetest test test default class loader testdefaultclassloader exception tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context ctx tomcat add context addcontext tomcat add servlet addservlet ctx class loader report classloaderreport class loader report classloaderreport ctx add servlet mapping addservletmapping class loader report classloaderreport tomcat start byte chunk bytechunk res get url geturl http localhost get port getport assert equals assertequals webapp system res to string tostring test test non default class loader testnondefaultclassloader exception class loader classloader url class loader urlclassloader url thread current thread currentthread get context class loader getcontextclassloader thread current thread currentthread set context class loader setcontextclassloader tomcat tomcat get tomcat instance gettomcatinstance tomcat get server getserver set parent class loader setparentclassloader file system doc base docbase required context ctx tomcat add context addcontext tomcat add servlet addservlet ctx class loader report classloaderreport class loader report classloaderreport ctx add servlet mapping addservletmapping class loader report classloaderreport tomcat start byte chunk bytechunk res get url geturl http localhost get port getport assert equals assertequals webapp custom system res to string tostring class loader report classloaderreport http servlet httpservlet serialversionuid class loader classloader custom class loader report classloaderreport class loader classloader custom custom custom override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain print writer printwriter resp get writer getwriter class loader classloader system class loader classloader get system class loader getsystemclassloader class loader classloader thread current thread currentthread get context class loader getcontextclassloader system print system custom print custom webapp class loader base webappclassloaderbase print webapp print get parent getparent