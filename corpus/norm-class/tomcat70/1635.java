licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina deploy java beans property change listener propertychangelistener java beans property change support propertychangesupport java serializable java lang reflect field java lang reflect invocation target exception invocationtargetexception java lang reflect method java util hash map hashmap java util hash set hashset java util javax naming naming exception namingexception org apache catalina container org apache catalina context org apache catalina engine org apache catalina lifecycle exception lifecycleexception org apache catalina lifecycle state lifecyclestate org apache catalina server org apache catalina mbeans m bean utils mbeanutils org apache catalina util int rospection introspection org apache catalina util lifecycle bean base lifecyclembeanbase org apache juli logging log org apache juli logging log factory logfactory org apache naming context bindings contextbindings org apache tomcat util exception utils exceptionutils org apache tomcat util res string manager stringmanager h olds holds manages naming resources defined enter pri se enterprise naming context jndi context author remy maucherat naming resources namingresources lifecycle bean base lifecyclembeanbase serializable serialversionuid log log log factory logfactory get log getlog naming resources namingresources string manager stringmanager string manager stringmanager get manager getmanager constants resource require explicit registration resourcerequireexplicitregistration create naming resources namingresources instance naming resources namingresources noop instance variables container object object container naming entries keyed string entries hash set hashset string ejb resource references web application keyed hash map hashmap string context ejb contextejb ejbs hash map hashmap string context ejb contextejb environment entries web application keyed hash map hashmap string context environment contextenvironment envs hash map hashmap string context environment contextenvironment local ejb resource references web application keyed hash map hashmap string context local ejb contextlocalejb local ejbs localejbs hash map hashmap string context local ejb contextlocalejb message destination reference ss referencess web application keyed hash map hashmap string message destination ref messagedestinationref mdrs hash map hashmap string message destination ref messagedestinationref resource environment references web application keyed hash map hashmap string context resource env ref contextresourceenvref resource env refs resourceenvrefs hash map hashmap string context resource env ref contextresourceenvref resource references web application keyed hash map hashmap string context resource contextresource resources hash map hashmap string context resource contextresource resource links web application keyed hash map hashmap string context resource link contextresourcelink resource links resourcelinks hash map hashmap string context resource link contextresourcelink web service references web application keyed hash map hashmap string context service contextservice services hash map hashmap string context service contextservice transaction webapp context transaction contexttransaction transaction property change support component property change support propertychangesupport support property change support propertychangesupport properties container naming resources object get container getcontainer container container naming resources set container setcontainer object container container container transaction object set transaction settransaction context transaction contexttransaction transaction transaction transaction transaction object context transaction contexttransaction get transaction gettransaction transaction add ejb resource reference web application param ejb ejb resource reference add ejb addejb context ejb contextejb ejb entries ejb get name getname entries add ejb get name getname ejbs ejb set naming resources setnamingresources ejbs ejb get name getname ejb support fire property change firepropertychange ejb ejb add environment entry web application param environment environment entry add environment addenvironment context environment contextenvironment environment entries environment get name getname context environment contextenvironment find environment findenvironment environment get name getname context resource link contextresourcelink find resource link findresourcelink environment get name getname get override getoverride remove environment removeenvironment environment get name getname link global resources naming resources namingresources global get server getserver get global naming resources getglobalnamingresources global find environment findenvironment get global getglobal global find environment findenvironment get global getglobal get override getoverride remove resource link removeresourcelink environment get name getname exists isn env res link check resource type checkresourcetype environment illegal argument exception illegalargumentexception get string getstring naming resources namingresources resource type fail resourcetypefail environment get name getname environment get type gettype entries add environment get name getname envs environment set naming resources setnamingresources envs environment get name getname environment support fire property change firepropertychange environment environment register jmx resource require explicit registration resourcerequireexplicitregistration m bean utils mbeanutils creatembean environment exception log warn get string getstring naming resources namingresources mbean create fail mbeancreatefail environment get name getname container instance server context trigger npe server get server getserver container server server container container context lots casts split cla rity clarity engine engine engine context container get parent getparent get parent getparent engine get service getservice get server getserver add local ejb resource reference web application param ejb ejb resource reference add local ejb addlocalejb context local ejb contextlocalejb ejb entries ejb get name getname entries add ejb get name getname local ejbs localejbs ejb set naming resources setnamingresources local ejbs localejbs ejb get name getname ejb support fire property change firepropertychange local ejb localejb ejb add message destination reference web application param mdr message destination reference add message destination ref addmessagedestinationref message destination ref messagedestinationref mdr entries mdr get name getname check resource type checkresourcetype mdr illegal argument exception illegalargumentexception get string getstring naming resources namingresources resource type fail resourcetypefail mdr get name getname mdr get type gettype entries add mdr get name getname mdrs mdr set naming resources setnamingresources mdrs mdr get name getname mdr support fire property change firepropertychange message destination ref messagedestinationref mdr add property change listener component param listener listener add add property change listener addpropertychangelistener property change listener propertychangelistener listener support add property change listener addpropertychangelistener listener add resource reference web application param resource resource reference add resource addresource context resource contextresource resource entries resource get name getname check resource type checkresourcetype resource illegal argument exception illegalargumentexception get string getstring naming resources namingresources resource type fail resourcetypefail resource get name getname resource get type gettype entries add resource get name getname resources resource set naming resources setnamingresources resources resource get name getname resource support fire property change firepropertychange resource resource register jmx resource require explicit registration resourcerequireexplicitregistration m bean utils mbeanutils creatembean resource exception log warn get string getstring naming resources namingresources mbean create fail mbeancreatefail resource get name getname add resource environment reference web application param resource resource add resource env ref addresourceenvref context resource env ref contextresourceenvref resource entries resource get name getname check resource type checkresourcetype resource illegal argument exception illegalargumentexception get string getstring naming resources namingresources resource type fail resourcetypefail resource get name getname resource get type gettype entries add resource get name getname resource env refs resourceenvrefs resource set naming resources setnamingresources resource env refs resourceenvrefs resource get name getname resource support fire property change firepropertychange resource env ref resourceenvref resource add resource link web application param resource link resourcelink resource link add resource link addresourcelink context resource link contextresourcelink resource link resourcelink entries resource link resourcelink get name getname entries add resource link resourcelink get name getname resource links resourcelinks resource link resourcelink set naming resources setnamingresources resource links resourcelinks resource link resourcelink get name getname resource link resourcelink support fire property change firepropertychange resource link resourcelink resource link resourcelink register jmx resource require explicit registration resourcerequireexplicitregistration m bean utils mbeanutils creatembean resource link resourcelink exception log warn get string getstring naming resources namingresources mbean create fail mbeancreatefail resource link resourcelink get name getname add web service reference web application param service web service reference add service addservice context service contextservice service entries service get name getname entries add service get name getname services service set naming resources setnamingresources services service get name getname service support fire property change firepropertychange service service ejb resource reference code code param desired ejb resource reference context ejb contextejb find ejb findejb string ejbs ejbs defined ejb resource references application length array returned context ejb contextejb find ejbs findejbs ejbs context ejb contextejb context ejb contextejb ejbs size ejbs values to array toarray environment entry code code param desired environment entry context environment contextenvironment find environment findenvironment string envs envs defined environment entries web application defined length array returned context environment contextenvironment find environments findenvironments envs context environment contextenvironment context environment contextenvironment envs size envs values to array toarray local ejb resource reference code code param desired ejb resource reference context local ejb contextlocalejb find local ejb findlocalejb string local ejbs localejbs local ejbs localejbs defined local ejb resource references application length array returned context local ejb contextlocalejb find local ejbs findlocalejbs local ejbs localejbs context local ejb contextlocalejb context local ejb contextlocalejb local ejbs localejbs size local ejbs localejbs values to array toarray message destination reference code code param desired message destination reference message destination ref messagedestinationref find message destination ref findmessagedestinationref string mdrs mdrs defined message destination references application length array returned message destination ref messagedestinationref find message destination refs findmessagedestinationrefs mdrs message destination ref messagedestinationref message destination ref messagedestinationref mdrs size mdrs values to array toarray resource reference code code param desired resource reference context resource contextresource find resource findresource string resources resources resource link code code param desired resource link context resource link contextresourcelink find resource link findresourcelink string resource links resourcelinks resource links resourcelinks defined resource links application defined length array returned context resource link contextresourcelink find resource links findresourcelinks resource links resourcelinks context resource link contextresourcelink context resource link contextresourcelink resource links resourcelinks size resource links resourcelinks values to array toarray defined resource references application defined length array returned context resource contextresource find resources findresources resources context resource contextresource context resource contextresource resources size resources values to array toarray resource environment reference type code code param desired resource environment reference context resource env ref contextresourceenvref find resource env ref findresourceenvref string resource env refs resourceenvrefs resource env refs resourceenvrefs resource environment reference names web application length array returned context resource env ref contextresourceenvref find resource env refs findresourceenvrefs resource env refs resourceenvrefs context resource env ref contextresourceenvref context resource env ref contextresourceenvref resource env refs resourceenvrefs size resource env refs resourceenvrefs values to array toarray web service reference code code param desired web service context service contextservice find service findservice string services services defined web service references application defined length array returned context service contextservice find services findservices services context service contextservice context service contextservice services size services values to array toarray exists deprecated exists string entries remove ejb resource reference param ejb resource reference remove remove ejb removeejb string entries remove context ejb contextejb ejb ejbs ejb ejbs remove ejb support fire property change firepropertychange ejb ejb ejb set naming resources setnamingresources remove environment entry param environment entry remove remove environment removeenvironment string entries remove context environment contextenvironment environment envs environment envs remove environment support fire property change firepropertychange environment environment register jmx resource require explicit registration resourcerequireexplicitregistration m bean utils mbeanutils destroymbean environment exception log warn get string getstring naming resources namingresources mbean destroy fail mbeandestroyfail environment get name getname environment set naming resources setnamingresources remove local ejb resource reference param ejb resource reference remove remove local ejb removelocalejb string entries remove context local ejb contextlocalejb local ejb localejb local ejbs localejbs local ejb localejb local ejbs localejbs remove local ejb localejb support fire property change firepropertychange local ejb localejb local ejb localejb local ejb localejb set naming resources setnamingresources remove message destination reference param message destination resource reference remove remove message destination ref removemessagedestinationref string entries remove message destination ref messagedestinationref mdr mdrs mdr mdrs remove mdr support fire property change firepropertychange message destination ref messagedestinationref mdr mdr set naming resources setnamingresources remove property change listener component param listener listener remove remove property change listener removepropertychangelistener property change listener propertychangelistener listener support remove property change listener removepropertychangelistener listener remove resource reference param resource reference remove remove resource removeresource string entries remove context resource contextresource resource resources resource resources remove resource support fire property change firepropertychange resource resource register jmx resource require explicit registration resourcerequireexplicitregistration m bean utils mbeanutils destroymbean resource exception log warn get string getstring naming resources namingresources mbean destroy fail mbeandestroyfail resource get name getname resource set naming resources setnamingresources remove resource environment reference param resource environment reference remove remove resource env ref removeresourceenvref string entries remove context resource env ref contextresourceenvref resource env ref resourceenvref resource env refs resourceenvrefs resource env ref resourceenvref resource env refs resourceenvrefs remove resource env ref resourceenvref support fire property change firepropertychange resource env ref resourceenvref resource env ref resourceenvref resource env ref resourceenvref set naming resources setnamingresources remove resource link param resource link remove remove resource link removeresourcelink string entries remove context resource link contextresourcelink resource link resourcelink resource links resourcelinks resource link resourcelink resource links resourcelinks remove resource link resourcelink support fire property change firepropertychange resource link resourcelink resource link resourcelink register jmx resource require explicit registration resourcerequireexplicitregistration m bean utils mbeanutils destroymbean resource link resourcelink exception log warn get string getstring naming resources namingresources mbean destroy fail mbeandestroyfail resource link resourcelink get name getname resource link resourcelink set naming resources setnamingresources remove web service reference param web service reference remove remove service removeservice string entries remove context service contextservice service services service services remove service support fire property change firepropertychange service service service set naming resources setnamingresources lifecycle methods override init internal initinternal lifecycle exception lifecycleexception init internal initinternal register naming resources avoid timing issues duplication registration issue resource require explicit registration resourcerequireexplicitregistration context resource contextresource resources values m bean utils mbeanutils creatembean exception log warn get string getstring naming resources namingresources mbean create fail mbeancreatefail get name getname context environment contextenvironment envs values m bean utils mbeanutils creatembean exception log warn get string getstring naming resources namingresources mbean create fail mbeancreatefail get name getname context resource link contextresourcelink crl resource links resourcelinks values m bean utils mbeanutils creatembean crl exception log warn get string getstring naming resources namingresources mbean create fail mbeancreatefail crl get name getname override start internal startinternal lifecycle exception lifecycleexception fire lifecycle event firelifecycleevent configure start event set state setstate lifecycle state lifecyclestate starting override stop internal stopinternal lifecycle exception lifecycleexception clean up cleanup set state setstate lifecycle state lifecyclestate stopping fire lifecycle event firelifecycleevent configure event close resources explicit close clean faster clean up cleanup resources size javax naming context ctxt container server ctxt server container get global naming context getglobalnamingcontext ctxt context bindings contextbindings get class loader getclassloader ctxt javax naming context ctxt lookup comp env naming exception namingexception log warn get string getstring naming resources namingresources cleanup no context cleanupnocontext container context resource contextresource resources values get singleton getsingleton string close method closemethod get close method getclosemethod close method closemethod close method closemethod length string get name getname object resource resource ctxt lookup naming exception namingexception log warn get string getstring naming resources namingresources cleanup no resource cleanupnoresource get name getname container clean up cleanup resource close method closemethod clean resource calling defined close method closing database connection pool close open connections happen leaves connections open issues param resource resource close clean up cleanup object resource string string close method closemethod arg close method method resource get class getclass get method getmethod close method closemethod security exception securityexception log debug get string getstring naming resources namingresources cleanup close security cleanupclosesecurity close method closemethod container no such method exception nosuchmethodexception log debug get string getstring naming resources namingresources cleanup no close cleanupnoclose container close method closemethod invoke resource object illegal argument exception illegalargumentexception log warn get string getstring naming resources namingresources cleanup close failed cleanupclosefailed close method closemethod container illegal access exception illegalaccessexception log warn get string getstring naming resources namingresources cleanup close failed cleanupclosefailed close method closemethod container invocation target exception invocationtargetexception throwable exception utils exceptionutils unwrap invocation target exception unwrapinvocationtargetexception exception utils exceptionutils handle throwable handlethrowable log warn get string getstring naming resources namingresources cleanup close failed cleanupclosefailed close method closemethod container override destroy internal destroyinternal lifecycle exception lifecycleexception register naming resources avoid timing issues duplication registration issue resource require explicit registration resourcerequireexplicitregistration destroy reverse order create matter context resource link contextresourcelink crl resource links resourcelinks values m bean utils mbeanutils destroymbean crl exception log warn get string getstring naming resources namingresources mbean destroy fail mbeandestroyfail crl get name getname context environment contextenvironment envs values m bean utils mbeanutils destroymbean exception log warn get string getstring naming resources namingresources mbean destroy fail mbeandestroyfail get name getname context resource contextresource resources values m bean utils mbeanutils destroymbean exception log warn get string getstring naming resources namingresources mbean destroy fail mbeandestroyfail get name getname destroy internal destroyinternal override string get domain internal getdomaininternal domain container object get container getcontainer lifecycle bean base lifecyclembeanbase lifecycle bean base lifecyclembeanbase get domain getdomain override string get object name key properties getobjectnamekeyproperties object get container getcontainer container type naming resources namingresources m bean utils mbeanutils get container key properties getcontainerkeyproperties container server unknown type naming resources namingresources checks configuration type resource consistent injection targets type configure type based injection targets param resource resource check code code type resource valid code code code code current resource type inconsistent injection targets determined check resource type checkresourcetype resource base resourcebase resource container context context injection targets resource get injection targets getinjectiontargets resource get injection targets getinjectiontargets size injection targets defined type resource context context context container string type name typename resource get type gettype type class typeclass type name typename type class typeclass int rospection introspection load class loadclass context type name typename type class typeclass fail compatible class compatibleclass get compatible type getcompatibletype context resource type class typeclass compatible class compatibleclass worked injection targets resource set type settype compatible class compatibleclass get canonical name getcanonicalname get compatible type getcompatibletype context context resource base resourcebase resource type class typeclass result injection target injectiontarget injection target injectiontarget resource get injection targets getinjectiontargets clazz int rospection introspection load class loadclass context injection target injectiontarget get target class gettargetclass clazz load ignore target match string target name targetname injection target injectiontarget get target name gettargetname set ter setter match target type targettype get setter type getsettertype clazz target name targetname target type targettype field match set ter setter match target type targettype get field type getfieldtype clazz target name targetname target type targettype match ignore injection target target type targettype int rospection introspection convert primitive type convertprimitivetype target type targettype type class typeclass find common type injection targets result result target type targettype target type targettype is assignable from isassignablefrom result work result is assignable from isassignablefrom target type targettype specific type result target type targettype incompatible types type target type targettype is assignable from isassignablefrom type class typeclass result type class typeclass incompatible types result get setter type getsettertype clazz string method methods int rospection introspection get declared methods getdeclaredmethods clazz methods methods length method method methods int rospection introspection is valid setter isvalidsetter method int rospection introspection get property name getpropertyname method equals method get parameter types getparametertypes get field type getfieldtype clazz string field fields int rospection introspection get declared fields getdeclaredfields clazz fields fields length field field fields field get name getname equals field get type gettype