licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina mbeans java util iterator javax naming binding javax naming context javax naming initial context initialcontext javax naming naming enumeration namingenumeration javax naming naming exception namingexception javax naming operation not supported exception operationnotsupportedexception org apache catalina group org apache catalina lifecycle org apache catalina lifecycle event lifecycleevent org apache catalina lifecycle listener lifecyclelistener org apache catalina role org apache catalina user org apache catalina user database userdatabase org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util modeler registry implementation code lifecycle listener lifecyclelistener code ins tantiates instantiates m beans mbeans global jndi resources subject management author craig mc clanahan mcclanahan global resources lifecycle listener globalresourceslifecyclelistener lifecycle listener lifecyclelistener log log log factory logfactory get log getlog global resources lifecycle listener globalresourceslifecyclelistener instance variables owning catalina component attached lifecycle component configuration registry managed beans registry registry m bean utils mbeanutils create registry createregistry lifecycle listener lifecyclelistener methods primary entry point startup shutdown events param event event occurred override lifecycle event lifecycleevent lifecycle event lifecycleevent event lifecycle start event equals event get type gettype component event get lifecycle getlifecycle creatembeans lifecycle event equals event get type gettype destroymbeans component methods create m beans mbeans int eresting interesting global jndi resources creatembeans global naming context context context context context initial context initialcontext lookup java naming exception namingexception log error global naming context defined server recurse defined global jndi resources context creatembeans context naming exception namingexception log error exception processing global jndi resources create m beans mbeans int eresting interesting global jndi resources naming context param prefix prefix complete object paths param context context scanned exception naming exception namingexception jndi exception occurs creatembeans string prefix context context naming exception namingexception log is debug enabled isdebugenabled log debug creating m beans mbeans global jndi resources context prefix naming enumeration namingenumeration binding bindings context list bindings listbindings bindings has more hasmore binding binding bindings string prefix binding get name getname object context lookup binding get name getname log is debug enabled isdebugenabled log debug checking resource context creatembeans context user database userdatabase creatembeans user database userdatabase exception log error exception creating user database userdatabase m beans mbeans runtime exception runtimeexception log error runtime exception runtimeexception operation not supported exception operationnotsupportedexception log error operation supported create m beans mbeans user database userdatabase contents param complete resource user database userdatabase param database user database userdatabase processed exception exception exception occurs creating m beans mbeans creatembeans string user database userdatabase database exception create m bean mbean user database userdatabase log is debug enabled isdebugenabled log debug creating user database userdatabase m beans mbeans resource log debug database database m bean utils mbeanutils creatembean database exception illegal argument exception illegalargumentexception create user database userdatabase m bean mbean resource create m beans mbeans defined role iterator role roles database get roles getroles roles has next hasnext role role roles log is debug enabled isdebugenabled log debug creating role m bean mbean role role m bean utils mbeanutils creatembean role exception illegal argument exception illegalargumentexception create role m bean mbean role role create m beans mbeans defined group iterator group groups database get groups getgroups groups has next hasnext group group groups log is debug enabled isdebugenabled log debug creating group m bean mbean group group m bean utils mbeanutils creatembean group exception illegal argument exception illegalargumentexception create group m bean mbean group group create m beans mbeans defined user iterator user users database get use rs getusers users has next hasnext user user users log is debug enabled isdebugenabled log debug creating user m bean mbean user user m bean utils mbeanutils creatembean user exception illegal argument exception illegalargumentexception create user m bean mbean user user destroy m beans mbeans int eresting interesting global jndi resources destroymbeans log is debug enabled isdebugenabled log debug dest roying destroying m beans mbeans global jndi resources