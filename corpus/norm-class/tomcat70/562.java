licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina core java io exception ioexception java print writer printwriter java util hash map hashmap java util map java util map entry javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org junit org junit test org apache catalina context org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest org apache tomcat util exception utils exceptionutils org apache tomcat util buf byte chunk bytechunk test application http request testapplicationhttprequest tomcat base test tomcatbasetest https apache org bug zilla bugzilla bug cgi test test forward query string testforwardquerystring exception map string string expected hash map hashmap string string expected string do query string test doquerystringtest expected test test forward query string testforwardquerystring exception map string string expected hash map hashmap string string expected string do query string test doquerystringtest expected test test forward query string testforwardquerystring exception map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test forward query string testforwardquerystring exception map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test forward query string testforwardquerystring exception parameters assigned val e vale empty string map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test original query string testoriginalquerystring exception map string string expected hash map hashmap string string expected string do query string test doquerystringtest expected test test original query string testoriginalquerystring exception map string string expected hash map hashmap string string expected string do query string test doquerystringtest expected test test original query string testoriginalquerystring exception map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test original query string testoriginalquerystring exception map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test original query string testoriginalquerystring exception parameters assigned val e vale empty string map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test merge query string testmergequerystring exception map string string expected hash map hashmap string string expected string do query string test doquerystringtest expected test test merge query string testmergequerystring exception map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test merge query string testmergequerystring exception map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test merge query string testmergequerystring exception map string string expected hash map hashmap string string expected string expected string do query string test doquerystringtest expected test test merge query string testmergequerystring exception https wikipedia org wiki test test string test string query test map string string expected hash map hashmap string string expected string expected test string test do query string test doquerystringtest query expected do query string test doquerystringtest string original query string originalquerystring string for ward query string forwardquerystring map string string expected exception tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context ctx tomcat add context addcontext for ward query string forwardquerystring tomcat add servlet addservlet ctx forward servlet forwardservlet display tomcat add servlet addservlet ctx forward servlet forwardservlet display for ward query string forwardquerystring ctx add servlet mapping addservletmapping tomcat add servlet addservlet ctx display display parameter servlet displayparameterservlet expected ctx add servlet mapping addservletmapping display display tomcat start byte chunk bytechunk response byte chunk bytechunk string builder stringbuilder target string builder stringbuilder http localhost target append get port getport target append original query string originalquerystring target append target append original query string originalquerystring get url geturl target to string tostring response assert equals assertequals assert equals assertequals response to string tostring test test parameter immutability testparameterimmutability exception tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context ctx tomcat add context addcontext tomcat add servlet addservlet ctx forward servlet forwardservlet modify ctx add servlet mapping addservletmapping tomcat add servlet addservlet ctx modify modify parameter servlet modifyparameterservlet ctx add servlet mapping addservletmapping modify modify tomcat start byte chunk bytechunk response byte chunk bytechunk string builder stringbuilder target string builder stringbuilder http localhost target append get port getport target append get url geturl target to string tostring response assert equals assertequals assert equals assertequals response to string tostring forward servlet forwardservlet http servlet httpservlet serialversionuid string target forward servlet forwardservlet string target target target override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception req set character encoding setcharacterencoding utf req get request dispatcher getrequestdispatcher target req resp display parameter servlet displayparameterservlet http servlet httpservlet serialversionuid map string string expected display parameter servlet displayparameterservlet map string string expected expected expected override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception req set character encoding setcharacterencoding utf resp set content type setcontenttype text plain resp set character encoding setcharacterencoding utf print writer printwriter resp get writer getwriter map string string actual req get parameter map getparametermap entry string string entry actual entry set entryset string expected value expectedvalue expected entry get key getkey expected value expectedvalue expected value expectedvalue length entry get value getvalue length expected value expectedvalue length expected value expectedvalue equals entry get value getvalue print first param firstparam entry string string param actual entry set entryset first param firstparam first param firstparam print print param get key getkey print first value firstvalue string param get value getvalue first value firstvalue first value firstvalue print print print print modify parameter servlet modifyparameterservlet http servlet httpservlet serialversionuid suppress warnings generated code wrong type values map suppress warnings suppresswarnings rawtypes unchecked override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception map map req get parameter map getparametermap insert works insertworks map test integer integer value of valueof insert works insertworks throwable exception utils exceptionutils handle throwable handlethrowable insert works insertworks resp set content type setcontenttype text plain resp set character encoding setcharacterencoding utf print writer printwriter resp get writer getwriter insert works insertworks print fail print