licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license compression filters compressionfilters java i o exception ioexception java util array list arraylist java util enumeration java util list java util string tokenizer stringtokenizer javax servlet filter javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse implementation code javax servlet filter code compress servlet response servletresponse bigger threshold author amy roh author dmitri val din valdin compression filter compressionfilter filter filter configuration object filter instance configured filter config filterconfig config minimal reasonable threshold min threshold minthreshold threshold number compress compression threshold compressionthreshold minimal reasonable buffer tomcat min buffer minbuffer compression buffer size avoid chunking compression buffer compressionbuffer mime types compress string compression mime types compressionmimetypes text html text xml text plain debug level filter debug place filter service param filter config filterconfig filter configuration object override init filter config filterconfig filter config filterconfig config filter config filterconfig filter config filterconfig string filter config filterconfig get init parameter getinitparameter debug debug integer parse int parseint string str filter config filterconfig get init parameter getinitparameter compression threshold compressionthreshold str compression threshold compressionthreshold integer parse int parseint str compression threshold compressionthreshold compression threshold compressionthreshold min threshold minthreshold debug system println compression threshold compressionthreshold compression min threshold minthreshold system println compression threshold compressionthreshold min threshold minthreshold compression threshold compressionthreshold min threshold minthreshold str filter config filterconfig get init parameter getinitparameter compression buffer compressionbuffer str compression buffer compressionbuffer integer parse int parseint str compression buffer compressionbuffer min buffer minbuffer debug system println compression buffer compressionbuffer min buffer minbuffer system println compression buffer compressionbuffer min buffer minbuffer compression buffer compressionbuffer min buffer minbuffer str filter config filterconfig get init parameter getinitparameter compression mime types compressionmimetypes str list string values array list arraylist string string tokenizer stringtokenizer string tokenizer stringtokenizer str has more tokens hasmoretokens string token next token nexttoken trim token length values add token values size compression mime types compressionmimetypes values to array toarray string values size compression mime types compressionmimetypes debug system println compression mime types compressionmimetypes compression mime types compressionmimetypes filter service override destroy config code do filter dofilter code method filter called container time request response pair passed chain client request resource chain filter chain filterchain passed method filter pass request response entity chain method exam ines examines request check client support compression simply pass request response support compression compression support creates compression servlet response wrapper compressionservletresponsewrapper object comp res ses compresses content modifies header content length big invokes entity chain filter chain filterchain object code chain do filter dofilter code override do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain i o exception ioexception servlet exception servletexception debug system println do filter dofilter compression threshold compressionthreshold debug system println do filter dofilter called compression treshold compressiontreshold compression chain do filter dofilter request response support compression supportcompression request http servlet request httpservletrequest debug system println requesturi http servlet request httpservletrequest request getrequesturi allowed compress string http servlet request httpservletrequest request get parameter getparameter gzip equals debug system println parameter gzip don compress chain filter chain do filter dofilter request response enumeration string http servlet request httpservletrequest request get headers getheaders accept encoding has more elements hasmoreelements string next element nextelement index of indexof gzip debug system println supports compression support compression supportcompression debug system println support compression support compression supportcompression response http servlet response httpservletresponse compression servlet response wrapper compressionservletresponsewrapper wrapped response wrappedresponse compression servlet response wrapper compressionservletresponsewrapper http servlet response httpservletresponse response wrapped response wrappedresponse set debug level setdebuglevel debug wrapped response wrappedresponse set compression threshold setcompressionthreshold compression threshold compressionthreshold wrapped response wrappedresponse set compression buffer setcompressionbuffer compression buffer compressionbuffer wrapped response wrappedresponse set compression mime types setcompressionmimetypes compression mime types compressionmimetypes debug system println do filter dofilter called compression chain do filter dofilter request wrapped response wrappedresponse wrapped response wrappedresponse finish response finishresponse debug system println do filter dofilter called compression chain do filter dofilter request response filter config function equivalent init required web logic weblogic param filter config filterconfig filter configuration object set filter config setfilterconfig filter config filterconfig filter config filterconfig init filter config filterconfig required web logic weblogic filter config filterconfig init ialise initialise filter filter config filterconfig get filter config getfilterconfig config