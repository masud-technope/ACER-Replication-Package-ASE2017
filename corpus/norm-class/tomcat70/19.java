licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina connector java io exception ioexception java reader java writer java nio charset malformed input exception malformedinputexception javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org junit org junit test org apache catalina context org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest org apache tomcat util buf c converter cconverter org apache tomcat util buf byte chunk bytechunk org apache tomcat util buf test utf testutf org apache tomcat util buf test utf testutf utf test case testcase test input buffer testinputbuffer tomcat base test tomcatbasetest test test utf testutf body exception tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context root tomcat add context addcontext tomcat add servlet addservlet root echo utf echo root add servlet mapping addservletmapping test echo tomcat get connector getconnector set property setproperty so timeout sotimeout tomcat start utf test case testcase test case testcase test utf testutf test cases string expected test case testcase invalid index invalidindex expected test case testcase output replaced outputreplaced do utf doutf body test bodytest test case testcase description test case testcase input expected do utf doutf body test bodytest string description input string expected exception bytes input length input length bytes input byte chunk bytechunk byte chunk bytechunk post url posturl bytes http localhost get port getport test expected assert equals assertequals description http servlet response httpservletresponse assert equals assertequals description failed to string tostring expected length assert null assertnull description to string tostring set charset setcharset c converter cconverter utf assert equals assertequals description expected to string tostring utf echo http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception post resp send error senderror http servlet response httpservletresponse method allowed override do post dopost http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception req set character encoding setcharacterencoding utf reader req get reader getreader resp set character encoding setcharacterencoding utf resp set content type setcontenttype text plain writer resp get writer getwriter copy character time read write read close malformed input exception malformedinputexception mie resp reset buffer resetbuffer write failed