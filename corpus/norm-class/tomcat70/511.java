licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket server java util comparator java util iterator java util java util concurrent concurrent skip list set concurrentskiplistset java util concurrent atomic atomic integer atomicinteger org apache tomcat websocket background process backgroundprocess org apache tomcat websocket background process manager backgroundprocessmanager time outs timeouts asynchronous web socket writes server side access link javax servlet servlet output stream servletoutputstream link javax servlet servlet input stream servletinputstream timeout writes client ws write timeout wswritetimeout background process backgroundprocess ws remote endpoint impl server wsremoteendpointimplserver end points endpoints concurrent skip list set concurrentskiplistset ws remote endpoint impl server wsremoteendpointimplserver endpoint comparator endpointcomparator atomic integer atomicinteger count atomic integer atomicinteger background process count backgroundprocesscount process period processperiod override background process backgroundprocess method called background process count backgroundprocesscount background process count backgroundprocesscount process period processperiod background process count backgroundprocesscount system current time millis currenttimemillis iterator ws remote endpoint impl server wsremoteendpointimplserver iter end points endpoints iterator iter has next hasnext ws remote endpoint impl server wsremoteendpointimplserver endpoint iter endpoint get timeout expiry gettimeoutexpiry background thread thread triggered write dispatch endpoint on timeout ontimeout end points endpoints override set process period setprocessperiod period process period processperiod period inherit doc inheritdoc asynchronous write time outs timeouts processed override get process period getprocessperiod process period processperiod register ws remote endpoint impl server wsremoteendpointimplserver endpoint result end points endpoints add endpoint result new count newcount count increment and get incrementandget new count newcount background process manager backgroundprocessmanager get instance getinstance register unregister ws remote endpoint impl server wsremoteendpointimplserver endpoint result end points endpoints remove endpoint result new count newcount count decrement and get decrementandget new count newcount background process manager backgroundprocessmanager get instance getinstance unregister note comparator impo ses imposes order ings orderings inconsistent equals endpoint comparator endpointcomparator comparator ws remote endpoint impl server wsremoteendpointimplserver override compare ws remote endpoint impl server wsremoteendpointimplserver ws remote endpoint impl server wsremoteendpointimplserver get timeout expiry gettimeoutexpiry get timeout expiry gettimeoutexpiry