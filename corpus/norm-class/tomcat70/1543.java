licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache coyote ajp java io exception ioexception java input stream inputstream java interruptedioexception java output stream outputstream java net socket org apache coyote action code actioncode org apache coyote error state errorstate org apache coyote request info requestinfo org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util exception utils exceptionutils org apache tomcat util net abstract endpoint abstractendpoint handler socket state socketstate org apache tomcat util net j io endpoint jioendpoint org apache tomcat util net socket status socketstatus org apache tomcat util net socket wrapper socketwrapper processes ajp requests author remy maucherat author henri gomez author dan milstein author keith wannamaker author kevin seguin author costin manolache author bill bar ker barker ajp processor ajpprocessor abstract ajp processor abstractajpprocessor socket logger log log log factory logfactory get log getlog ajp processor ajpprocessor override log get log getlog log ajp processor ajpprocessor packet size packetsize j io endpoint jioendpoint endpoint packet size packetsize endpoint response set output buffer setoutputbuffer socket output buffer socketoutputbuffer instance variables input stream input stream inputstream input output stream output stream outputstream output methods process pipeline d pipelined http requests input output str eams streams io exception ioexception error operation override socket state socketstate process socket wrapper socketwrapper socket socket io exception ioexception request info requestinfo request get request processor getrequestprocessor set s tag e setstage org apache coyote constants stage parse setting socket socket wrapper socketwrapper socket input socket get socket getsocket get input stream getinputstream output socket get socket getsocket get output stream getoutputstream so timeout sotimeout keep alive timeout keepalivetimeout so timeout sotimeout socket get socket getsocket get so timeout getsotimeout cping get error state geterrorstate is error iserror endpoint is paused ispaused parsing request header alive timeout enabled keep alive timeout keepalivetimeout socket get socket getsocket set so timeout setsotimeout keep alive timeout keepalivetimeout message request read message readmessage request header message requestheadermessage connection timeout timeout alive timeout enabled keep alive timeout keepalivetimeout socket get socket getsocket set so timeout setsotimeout so timeout sotimeout check message type process regular request processing type request header message requestheadermessage get byte getbyte type constants ajp cping request endpoint is paused ispaused recycle cping output write pong message array pongmessagearray io exception ioexception set error state seterrorstate error state errorstate close type constants ajp request swallowed finish log is debug enabled isdebugenabled log debug unexpected message type set error state seterrorstate error state errorstate close request set start time setstarttime system current time millis currenttimemillis io exception ioexception set error state seterrorstate error state errorstate close throwable exception utils exceptionutils handle throwable handlethrowable log debug get string getstring ajpprocessor header error response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response get error state geterrorstate is error iserror setting filters parse request headers set s tag e setstage org apache coyote constants stage prepare prepare request preparerequest throwable exception utils exceptionutils handle throwable handlethrowable log debug get string getstring ajpprocessor request prepare response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response get error state geterrorstate is error iserror cping endpoint is paused ispaused service unavailable response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response cping process request adapter get error state geterrorstate is error iserror set s tag e setstage org apache coyote constants stage service adapter service request response interruptedioexception set error state seterrorstate error state errorstate close throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring ajpprocessor request process response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response is async isasync get error state geterrorstate is error iserror finish response finished get error state geterrorstate is io allowed isioallowed finish throwable exception utils exceptionutils handle throwable handlethrowable set error state seterrorstate error state errorstate close error update statistics counter get error state geterrorstate is error iserror response set status setstatus request update count ers updatecounters set s tag e setstage org apache coyote constants stage keep alive keepalive recycle set s tag e setstage org apache coyote constants stage ended is async isasync get error state geterrorstate is error iserror endpoint is paused ispaused socket state socketstate input output socket state socketstate closed override recycle socket closing socketclosing recycle socket closing socketclosing socket closing socketclosing input output action hook actionhook methods send action connector param action code actioncode type action param param action parameter override cases handled action suppress warnings suppresswarnings incomplete action internal actioninternal action code actioncode action code actioncode object param action code actioncode async complete async state machine asyncstatemachine async complete asynccomplete j io endpoint jioendpoint endpoint process socket async processsocketasync socket wrapper socketwrapper socket status socketstatus open read async set timeout settimeout param timeout param long value longvalue piggy backing worker thread timeout socket wrapper socketwrapper set timeout settimeout timeout async dispatch async state machine asyncstatemachine async dispatch asyncdispatch j io endpoint jioendpoint endpoint process socket async processsocketasync socket wrapper socketwrapper socket status socketstatus open read override reset time outs resettimeouts ajp bio connector timeout socket wrapper socketwrapper async time outs timeouts override output src offset length io exception ioexception output write src offset length read amount bytes place input buffer read buf pos io exception ioexception read res read res input read buf read pos read res read res io exception ioexception get string getstring ajpprocessor failed read failedread receive chunk data called implement special packet ajp receive data send body packet override receive io exception ioexception body message bodymessage reset read message readmessage body message bodymessage invalid message data received body message bodymessage get len getlen don mark stream chunk blen body message bodymessage peek int peekint blen body message bodymessage get body bytes getbodybytes body bytes bodybytes empty read ajp message message read read didn io exception ioexception failure including incomplete reads read message readmessage ajp message ajpmessage message io exception ioexception buf message get buffer getbuffer header length headerlength message get header length getheaderlength read buf header length headerlength message length messagelength message process header processheader message length messagelength todo exception close connection frontend message length messagelength length message message length messagelength buf length trigger response illegal argument exception illegalargumentexception get string getstring ajpprocessor header too long toolong integer value of valueof message length messagelength integer value of valueof buf length read buf header length headerlength message length messagelength