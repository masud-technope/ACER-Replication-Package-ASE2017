licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache jasper java file java file not found exception filenotfoundexception java i o exception ioexception java net jarurlconnection java net malformedurlexception java net uri java net uri syntax exception urisyntaxexception java net url java net url class loader urlclassloader java net url connection urlconnection java util hash map hashmap java util map java util javax servlet servlet context servletcontext javax servlet jsp tagext tag info taginfo org apache jasper compiler compiler org apache jasper compiler jar resource jarresource org apache jasper compiler jsp runtime context jspruntimecontext org apache jasper compiler jsp util jsputil org apache jasper compiler localizer org apache jasper compiler servlet writer servletwriter org apache jasper compiler tld location tldlocation org apache jasper servlet jasper loader jasperloader org apache jasper servlet jsp servlet wrapper jspservletwrapper org apache juli logging log org apache juli logging log factory logfactory place holder jsp engine request context data structure instance variables points path stuff mangling names versions dirs loading resources dealing uris author anil vijendran author harish prabandham author pierre delisle author costin manolache author kin man chung jsp compilation context jspcompilationcontext log log log factory logfactory get log getlog jsp compilation context jspcompilationcontext map string jar resource jarresource tag file jar urls tagfilejarurls string class name classname string jsp uri jspuri string base package name basepackagename string derived package name derivedpackagename string servlet java file name servletjavafilename string java path javapath string class file name classfilename servlet writer servletwriter writer options options jsp servlet wrapper jspservletwrapper jsw compiler jsp compiler jspcompiler string class path classpath string baseuri string output dir outputdir servlet context servletcontext context class loader classloader loader jsp runtime context jspruntimecontext rctxt removed url class loader urlclassloader jsp loader jsploader url base url baseurl servlet class servletclass is tag file istagfile proto type mode prototypemode tag info taginfo tag info taginfo jar resource jarresource tag jar resource tagjarresource jspuri relative context jsp compilation context jspcompilationcontext string jsp uri jspuri options options servlet context servletcontext context jsp servlet wrapper jspservletwrapper jsw jsp runtime context jspruntimecontext rctxt jsp uri jspuri canonicaluri jsp uri jspuri options options jsw jsw context context baseuri jsp uri jspuri substring jsp uri jspuri last index of lastindexof hack resolverelativeuri baseuri is empty isempty baseuri baseuri char at charat str ip strip base slash combined uri base uribase generate file baseuri baseuri baseuri char at charat baseuri length baseuri rctxt rctxt tag file jar urls tagfilejarurls hash map hashmap string jar resource jarresource base package name basepackagename constants jsp jsp compilation context jspcompilationcontext string tag file tagfile tag info taginfo tag info taginfo options options servlet context servletcontext context jsp servlet wrapper jspservletwrapper jsw jsp runtime context jspruntimecontext rctxt jar resource jarresource tag jar resource tagjarresource tag file tagfile options context jsw rctxt is tag file istagfile tag info taginfo tag info taginfo tag jar resource tagjarresource tag jar resource tagjarresource methods override path loader classpath passed java compiler string get class path getclasspath class path classpath class path classpath rctxt get class path getclasspath classpath passed java compiler set class path setclasspath string class path classpath class path classpath class path classpath loader loading classes compiling jsp class loader classloader get class loader getclassloader loader loader rctxt get parent class loader getparentclassloader set class loader setclassloader class loader classloader loader loader loader class loader classloader get jsp loader getjsploader jsp loader jsploader jsp loader jsploader jasper loader jasperloader url base url baseurl get class loader getclassloader rctxt get permission collection getpermissioncollection jsp loader jsploader clear jsp loader clearjsploader jsp loader jsploader input output output directory generate code output directory scr atch scratch directory provide options directory derived string get output dir getoutputdir output dir outputdir create output dir createoutputdir output dir outputdir create compiler object based init param data hardcoding actual compilers created compiler create compiler createcompiler jsp compiler jspcompiler jsp compiler jspcompiler jsp compiler jspcompiler options get compiler class name getcompilerclassname jsp compiler jspcompiler create compiler createcompiler options get compiler class name getcompilerclassname options get compiler getcompiler jsp compiler jspcompiler create compiler createcompiler org apache jasper compiler jdt compiler jdtcompiler jsp compiler jspcompiler jsp compiler jspcompiler create compiler createcompiler org apache jasper compiler ant compiler antcompiler jsp compiler jspcompiler create compiler createcompiler org apache jasper compiler ant compiler antcompiler jsp compiler jspcompiler jsp compiler jspcompiler create compiler createcompiler org apache jasper compiler jdt compiler jdtcompiler jsp compiler jspcompiler illegal state exception illegalstateexception localizer get message getmessage jsp error compiler jsp compiler jspcompiler init jsw jsp compiler jspcompiler compiler create compiler createcompiler string class name classname compiler compiler compiler compiler for name forname class name classname new instance newinstance instantiation exception instantiationexception log warn localizer get message getmessage jsp error compiler illegal access exception illegalaccessexception log warn localizer get message getmessage jsp error compiler n o class def found error noclassdeffounderror log is debug enabled isdebugenabled log debug localizer get message getmessage jsp error compiler class not found exception classnotfoundexception log is debug enabled isdebugenabled log debug localizer get message getmessage jsp error compiler compiler compiler get compiler getcompiler jsp compiler jspcompiler access resources webapp full uri relative compil ations compilations context current file base string resolve relative uri resolverelativeuri string uri root directory separator uri starts with startswith uri starts with startswith file separator uri baseuri uri resource stream relative mean ings meanings context implementation resource represented input stream inputstream java input stream inputstream get resource as stream getresourceasstream string res context get resource as stream getresourceasstream canonicaluri res url get resource getresource string res malformedurlexception url result res starts with startswith meta inf tag file package d packaged jar compiled jar resource jarresource jar resource jarresource tag file jar urls tagfilejarurls res jar resource jarresource jar resource jarresource tag jar resource tagjarresource jar resource jarresource result jar resource jarresource get entry getentry res substring jar ide environments result context get resource getresource canonicaluri res res starts with startswith jar jndi tag file package d packaged jar checked dependency result url res result context get resource getresource canonicaluri res result string get resource paths getresourcepaths string path context get resource paths getresourcepaths canonicaluri path actual path uri relative context compilation string get real path getrealpath string path context context get real path getrealpath path path returns tag file jar file map compilation unit maps tag file names jar files tag files package d packaged map pop ulated populated parsing tag file elements tld s tlds imported tag libs taglibs jar resource jarresource get tag file jar resource gettagfilejarresource string tag file tagfile tag file jar urls tagfilejarurls tag file tagfile set tag file jar resource settagfilejarresource string tag file tagfile jar resource jarresource jar resource jarresource tag file jar urls tagfilejarurls tag file tagfile jar resource jarresource returns jar file tag file jsp compilation context jspcompilationcontext created package d packaged jsp compilation context jspcompilationcontext correspond tag file tag file package d packaged jar jar resource jarresource get tag file jar resource gettagfilejarresource tag jar resource tagjarresource common implementation include generated string get servlet class name getservletclassname class name classname class name classname is tag file istagfile class name classname tag info taginfo get tag class name gettagclassname last index lastindex class name classname last index of lastindexof last index lastindex class name classname class name classname substring last index lastindex i sep isep jsp uri jspuri last index of lastindexof class name classname jsp util jsputil make java identifier makejavaidentifier jsp uri jspuri substring i sep isep class name classname set servlet class name setservletclassname string class name classname class name classname class name classname path jsp uri note file context rooted uri jsp file string get jsp file getjspfile jsp uri jspuri deprecated removed tomcat link get last modified getlastmodified string deprecated get jsp last modified getjsplastmodified result url connection urlconnection url jsp url jspurl get resource getresource get jsp file getjspfile jsp url jspurl increment removed incrementremoved result jsp url jspurl open connection openconnection jarurlconnection result jarurlconnection get jar entry getjarentry get time gettime result get last modified getlastmodified i o exception ioexception log is debug enabled isdebugenabled log debug localizer get message getmessage jsp error last modified lastmodified get jsp file getjspfile result get input stream getinputstream close i o exception ioexception log is debug enabled isdebugenabled log debug localizer get message getmessage jsp error last modified lastmodified get jsp file getjspfile result result get last modified getlastmodified string resource result resource starts with startswith file file file uri resource uri syntax exception urisyntaxexception value of valueof value of valueof last modified lastmodified url connection urlconnection url jsp url jspurl get resource getresource resource jsp url jspurl increment removed incrementremoved value of valueof result jsp url jspurl open connection openconnection jarurlconnection result jarurlconnection get jar entry getjarentry get time gettime result get last modified getlastmodified i o exception ioexception log is debug enabled isdebugenabled log debug localizer get message getmessage jsp error last modified lastmodified get jsp file getjspfile result get input stream getinputstream close i o exception ioexception log is debug enabled isdebugenabled log debug localizer get message getmessage jsp error last modified lastmodified get jsp file getjspfile result value of valueof result is tag file istagfile is tag file istagfile tag info taginfo get tag info gettaginfo tag info taginfo set tag info settaginfo tag info taginfo tag i tagi tag info taginfo tag i tagi compiling tag file prototype mode generate codes tag handler empty method bodies is prototype mode isprototypemode proto type mode prototypemode set prototype mode setprototypemode proto type mode prototypemode generated base user set table settable derived derived mirrors file hierarchy jsp string get servlet package name getservletpackagename is tag file istagfile string class name classname tag info taginfo get tag class name gettagclassname last index lastindex class name classname last index of lastindexof string pkg name pkgname last index lastindex pkg name pkgname class name classname substring last index lastindex pkg name pkgname string d package name dpackagename get derived package name getderivedpackagename d package name dpackagename length base package name basepackagename base package name basepackagename get derived package name getderivedpackagename string get derived package name getderivedpackagename derived package name derivedpackagename i sep isep jsp uri jspuri last index of lastindexof derived package name derivedpackagename i sep isep jsp util jsputil make java package makejavapackage jsp uri jspuri substring i sep isep derived package name derivedpackagename servlet generated set servlet package name setservletpackagename string servlet package name servletpackagename base package name basepackagename servlet package name servletpackagename full path java file servlet generated string get servlet java file name getservletjavafilename servlet java file name servletjavafilename servlet java file name servletjavafilename get output dir getoutputdir get servlet class name getservletclassname java servlet java file name servletjavafilename hold options object context options get options getoptions options servlet context servletcontext get servlet context getservletcontext context jsp runtime context jspruntimecontext get runtime context getruntimecontext rctxt path java file relative work directory string get java path getjavapath java path javapath java path javapath is tag file istagfile string tag name tagname tag info taginfo get tag class name gettagclassname java path javapath tag name tagname replace java java path javapath get servlet package name getservletpackagename replace get servlet class name getservletclassname java java path javapath string get class file name getclassfilename class file name classfilename class file name classfilename get output dir getoutputdir get servlet class name getservletclassname class file name classfilename servlet generated servlet writer servletwriter get writer getwriter writer set writer setwriter servlet writer servletwriter writer writer writer location tld taglib uri array strings element denotes real path tld path tld points jar file element denotes tld entry jar file returns uri tag library exposed web application tld location tldlocation get tld location gettldlocation string uri jasper exception jasperexception tld location tldlocation location get options getoptions get tld locations cache gettldlocationscache get location getlocation uri location keeping generated code keep generated keepgenerated get options getoptions get keep generated getkeepgenerated removal increment removed incrementremoved removed rctxt rctxt remove wrapper removewrapper jsp uri jspuri removed is removed isremoved removed compile reload compile jasper exception jasperexception file not found exception filenotfoundexception create compiler createcompiler jsp compiler jspcompiler is out date d isoutdated is removed isremoved file not found exception filenotfoundexception jsp uri jspuri jsp compiler jspcompiler remove generated files removegeneratedfiles jsp loader jsploader jsp compiler jspcompiler compile jsw set reload setreload jsw set compilation exception setcompilationexception jasper exception jasperexception jsw set compilation exception setcompilationexception options get development getdevelopment options get recompile on fail getrecompileonfail jsw set last modification test setlastmodificationtest file not found exception filenotfoundexception fnfe fnfe exception jasper exception jasperexception jasper exception jasperexception localizer get message getmessage jsp error unable compile jsw set compilation exception setcompilationexception manipulating load jasper exception jasperexception get jsp loader getjsploader string getfqcn servlet class servletclass jsp loader jsploader load class loadclass class not found exception classnotfoundexception cex jasper exception jasperexception localizer get message getmessage jsp error unable load cex exception jasper exception jasperexception localizer get message getmessage jsp error unable compile removed servlet class servletclass string getfqcn string is tag file istagfile tag info taginfo get tag class name gettagclassname get servlet package name getservletpackagename get servlet class name getservletclassname methods object output dir lock outputdirlock object check output dir checkoutputdir output dir outputdir file output dir outputdir exists make output dir makeoutputdir create output dir createoutputdir make output dir makeoutputdir output dir lock outputdirlock file out dir file outdirfile file output dir outputdir out dir file outdirfile mkdirs out dir file outdirfile is directory isdirectory create output dir createoutputdir string path is tag file istagfile string tag name tagname tag info taginfo get tag class name gettagclassname path tag name tagname replace file separator char separatorchar path path substring path last index of lastindexof file separator char separatorchar path get servlet package name getservletpackagename replace file separator char separatorchar append servlet tag handler path scr atch scratch dir file base options get scratch dir getscratchdir base url baseurl base touri tourl output dir outputdir base get absolute path getabsolutepath file separator path file separator make output dir makeoutputdir illegal state exception illegalstateexception localizer get message getmessage jsp error output folder outputfolder malformedurlexception illegal state exception illegalstateexception localizer get message getmessage jsp error output folder outputfolder is path separator ispathseparator string canonicaluri string string builder stringbuilder result string builder stringbuilder len length pos pos len char at charat pos is path separator ispathseparator pos len is path separator ispathseparator char at charat pos pos pos len char at charat pos single dot path pos len char at charat pos directory path foo bar foo bar pos pos len is path separator ispathseparator char at charat pos pos separator pos separatorpos result length separator pos separatorpos is path separator ispathseparator result char at charat separator pos separatorpos separator pos separatorpos separator pos separatorpos result set length setlength separator pos separatorpos result append pos result to string tostring