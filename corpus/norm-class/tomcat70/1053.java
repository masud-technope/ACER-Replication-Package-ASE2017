licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes membership java serializable java util array list arraylist java util arrays java util comparator java util hash map hashmap java util iterator java util map org apache catalina tribes member membership implementation simple multicast representation multicast membership responsible main taining maintaining list active cluster nodes cluster node fails send heartbeat node dismissed author filip hanik author peter rossbach membership cloneable member impl memberimpl empty members member impl memberimpl object members lock memberslock object membership local member member impl memberimpl local map members cluster hash map hashmap member impl memberimpl mbr entry mbrentry map hash map hashmap member impl memberimpl mbr entry mbrentry list members cluster member impl memberimpl members empty members sort members alive time comparator member member comparator membercomparator member comparator membercomparator override object clone members lock memberslock membership clone membership local member comparator membercomparator map correct type suppress warnings suppresswarnings unchecked hash map hashmap member impl memberimpl mbr entry mbrentry tmp clone tmpclone hash map hashmap member impl memberimpl mbr entry mbrentry map clone clone map tmp clone tmpclone clone members member impl memberimpl members length system arraycopy members clone members members length clone constructs membership param local local member filter local member cluster membership param include local includelocal tba membership member impl memberimpl local include local includelocal local local include local includelocal add member addmember local membership member impl memberimpl local local membership member impl memberimpl local comparator member comp local comp membership member impl memberimpl local comparator member comp include local includelocal local include local includelocal member comparator membercomparator comp reset membership start fresh delete members wait ping join membership reset map clear members empty members notify membership member anno unced announced param member member pinged member cluster member local member updated member alive memberalive member impl memberimpl member result ignore member equals local result membership changed mbr entry mbrentry entry map member entry entry add member addmember member result update member alive time member impl memberimpl update member updatemember entry get member getmember update member updatemember get member alive time getmemberalivetime member get member alive time getmemberalivetime update fields change update member updatemember set member alive time setmemberalivetime member get member alive time getmemberalivetime update member updatemember set payload setpayload member get payload getpayload update member updatemember set command setcommand member get command getcommand arrays sort members member comparator membercomparator entry accessed result add member component sort array member comparator membercomparator param member member add mbr entry mbrentry add member addmember member impl memberimpl member members lock memberslock mbr entry mbrentry entry mbr entry mbrentry member map contains key containskey member map member entry member impl memberimpl member impl memberimpl members length members length members members length member members arrays sort members member comparator membercomparator entry remove member component param member member remove remove member removemember member impl memberimpl member map remove member members lock memberslock members length members member members equals member member impl memberimpl member impl memberimpl members length members length members members runs refresh cycle returns list members expired removes members membership get members getmembers get members getmembers expire param max time maxtime max time member remain unannounced considered dead list expired members member impl memberimpl expire max time maxtime has members hasmembers empty members array list arraylist member impl memberimpl list iterator mbr entry mbrentry map values iterator has next hasnext mbr entry mbrentry entry entry has expired hasexpired max time maxtime list members expired smaller list list java util array list arraylist member impl memberimpl list add entry get member getmember list member impl memberimpl result member impl memberimpl list size list to array toarray result result length remove member removemember result result empty members returning service members has members hasmembers members length member impl memberimpl get member getmember member mbr has members hasmembers member impl memberimpl result members length result members equals mbr result members result member mbr get member getmember mbr returning list members membership copy add remove generate arrays member impl memberimpl get members getmembers has members hasmembers members empty members copy member entries mbr entry mbrentry get member entries getmemberentries mbr entry mbrentry result mbr entry mbrentry map size iterator map entry member impl memberimpl mbr entry mbrentry map entry set entryset iterator pos has next hasnext result pos get value getvalue result member comparator membercomparator comparator member serializable serialversionuid override compare member member longer alive time sort result get member alive time getmemberalivetime get member alive time getmemberalivetime result result represents member entry mbr entry mbrentry member impl memberimpl mbr last heard from lastheardfrom mbr entry mbrentry member impl memberimpl mbr mbr mbr member accessed accessed last heard from lastheardfrom system current time millis currenttimemillis actual member object member impl memberimpl get member getmember mbr check dude expired param max time maxtime time threshold has expired hasexpired max time maxtime delta system current time millis currenttimemillis last heard from lastheardfrom delta max time maxtime