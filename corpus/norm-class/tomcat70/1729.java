licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc test java sql connection java util concurrent atomic atomic integer atomicinteger org junit org junit test org apache tomcat jdbc pool data source datasource org apache tomcat jdbc pool pool configuration poolconfiguration org apache tomcat jdbc test driver driver https apache org bug zilla bugzilla bug cgi test size preservation testsizepreservation data source datasource init simple pool properties initsimplepoolproperties pool configuration poolconfiguration default properties defaultproperties org apache tomcat jdbc pool data source datasource set pool properties setpoolproperties get pool properties getpoolproperties set driver class name setdriverclassname driver get name getname get pool properties getpoolproperties set url seturl driver url get pool properties getpoolproperties set fair queue setfairqueue get pool properties getpoolproperties set jmx enabled setjmxenabled get pool properties getpoolproperties set test while idle settestwhileidle get pool properties getpoolproperties set test on borrow settestonborrow get pool properties getpoolproperties set test on return settestonreturn get pool properties getpoolproperties set validation interval setvalidationinterval get pool properties getpoolproperties set time between eviction runs millis settimebetweenevictionrunsmillis get pool properties getpoolproperties set initial size setinitialsize get pool properties getpoolproperties set max active setmaxactive get pool properties getpoolproperties set min idle setminidle get pool properties getpoolproperties set max idle setmaxidle get pool properties getpoolproperties set max wait setmaxwait get pool properties getpoolproperties set remove abandoned timeout setremoveabandonedtimeout get pool properties getpoolproperties set min evictable idle time millis setminevictableidletimemillis get pool properties getpoolproperties set log abandoned setlogabandoned get pool properties getpoolproperties set remove abandoned setremoveabandoned get pool properties getpoolproperties set use lock setuselock init evicting pool initevictingpool init simple pool properties initsimplepoolproperties get pool properties getpoolproperties set time between eviction runs millis settimebetweenevictionrunsmillis get pool properties getpoolproperties set min evictable idle time millis setminevictableidletimemillis get pool properties getpoolproperties set remove abandoned setremoveabandoned get pool properties getpoolproperties set remove abandoned timeout setremoveabandonedtimeout test test simple testsimple exception init simple pool properties initsimplepoolproperties common close driver reset test test evicting testevicting exception init evicting pool initevictingpool common close driver reset common exception get connection getconnection close iter ations iterations atomic integer atomicinteger loop count loopcount atomic integer atomicinteger runnable runnable override loop count loopcount increment and get incrementandget iter ations iterations connection get connection getconnection thread sleep close exception print stack trace printstacktrace thread threads thread threads length threads thread threads length threads start loop count loopcount iter ations iterations thread sleep exception loop count loopcount iter ations iterations print stack trace printstacktrace threads length threads join system println pool size get pool getpool get size getsize assert true asserttrue size val idity validity check get pool getpool get size getsize