licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina startup java file java file input stream fileinputstream java i o exception ioexception java input stream inputstream java output stream outputstream java lang reflect constructor java net connect exception connectexception java net socket java util array list arraylist java util hash map hashmap java util list java util logging log manager logmanager org apache catalina container org apache catalina globals org apache catalina lifecycle exception lifecycleexception org apache catalina lifecycle state lifecyclestate org apache catalina server org apache catalina security security config securityconfig org apache juli class loader log manager classloaderlogmanager org apache tomcat util exception utils exceptionutils org apache tomcat util digester digester org apache tomcat util digester rule org apache tomcat util digester rule set ruleset org apache tomcat util log system log handler systemloghandler org apache tomcat util res string manager stringmanager org xml sax attributes org xml sax input source inputsource org xml sax sax parse exception saxparseexception startup shutdown shell program catalina command options recognized config path name pathname path name pathname configuration file processed relative path int erpreted interpreted relative directory path name pathname catalina base system property conf server xml display usage non aming nonaming disable naming support config test configtest test config start start instance catalina running instance catalina embedded server xml file author craig mc clanahan mcclanahan author remy maucherat catalina string manager string manager stringmanager string manager stringmanager get manager getmanager constants instance variables await await path name pathname server configuration file string config file configfile conf server xml xxx moved embedded shared extensions loader server class loader classloader parent class loader parentclassloader catalina get class loader getclassloader server component starting stopping server server starting server deprecated unused removed tomcat deprecated starting stopping existing server deprecated unused removed tomcat deprecated stopping shutdown hook flag use shutdown hook useshutdownhook shutdown hook thread shutdown hook shutdownhook naming enabled use naming usenaming catalina set security protection setsecurityprotection properties deprecated link set config file setconfigfile string deprecated set config setconfig string file config file configfile file set config file setconfigfile string file config file configfile file string get config file getconfigfile config file configfile set use shutdown hook setuseshutdownhook use shutdown hook useshutdownhook use shutdown hook useshutdownhook use shutdown hook useshutdownhook get use shutdown hook getuseshutdownhook use shutdown hook useshutdownhook shared extensions loader param parent class loader parentclassloader shared extensions loader set parent class loader setparentclassloader class loader classloader parent class loader parentclassloader parent class loader parentclassloader parent class loader parentclassloader class loader classloader get parent class loader getparentclassloader parent class loader parentclassloader parent class loader parentclassloader class loader classloader get system class loader getsystemclassloader set server setserver server server server server server get server getserver server naming enabled is use naming isusenaming use naming usenaming enables disables naming support param use naming usenaming naming set use naming setusenaming use naming usenaming use naming usenaming use naming usenaming set await setawait await is await isawait await methods process command arguments code code processing code code param args command arguments process arguments string args is config isconfig args length usage args length is config isconfig config file configfile args is config isconfig args equals config is config isconfig args equals non aming nonaming set use naming setusenaming args equals usage args equals start starting stopping args equals config test configtest starting stopping args equals starting stopping usage file object representing configuration file file config file configfile file file file config file configfile file is absolute isabsolute file file system get property getproperty globals catalina base prop config file configfile file create configure digester startup digester create start digester createstartdigester system current time millis currenttimemillis initialize digester digester digester digester digester set valid ating setvalidating digester set rules validation setrulesvalidation hash map hashmap list string fake attributes fakeattributes hash map hashmap list string array list arraylist string attrs array list arraylist string attrs add class name classname fake attributes fakeattributes object attrs digester set fake attributes setfakeattributes fake attributes fakeattributes digester set use context class loader setusecontextclassloader configure actions digester add object create addobjectcreate server org apache catalina core standard server standardserver class name classname digester add set properties addsetproperties server digester add set next addsetnext server set server setserver org apache catalina server digester add object create addobjectcreate server global naming resources globalnamingresources org apache catalina deploy naming resources namingresources digester add set properties addsetproperties server global naming resources globalnamingresources digester add set next addsetnext server global naming resources globalnamingresources set global naming resources setglobalnamingresources org apache catalina deploy naming resources namingresources digester add object create addobjectcreate server listener element class name classname digester add set properties addsetproperties server listener digester add set next addsetnext server listener add lifecycle listener addlifecyclelistener org apache catalina lifecycle listener lifecyclelistener digester add object create addobjectcreate server service org apache catalina core standard service standardservice class name classname digester add set properties addsetproperties server service digester add set next addsetnext server service add service addservice org apache catalina service digester add object create addobjectcreate server service listener element class name classname digester add set properties addsetproperties server service listener digester add set next addsetnext server service listener add lifecycle listener addlifecyclelistener org apache catalina lifecycle listener lifecyclelistener executor digester add object create addobjectcreate server service executor org apache catalina core standard thread executor standardthreadexecutor class name classname digester add set properties addsetproperties server service executor digester add set next addsetnext server service executor add executor addexecutor org apache catalina executor digester add rule addrule server service connector connector create rule connectorcreaterule digester add rule addrule server service connector set all properties rule setallpropertiesrule string executor digester add set next addsetnext server service connector add connector addconnector org apache catalina connector connector digester add object create addobjectcreate server service connector listener element class name classname digester add set properties addsetproperties server service connector listener digester add set next addsetnext server service connector listener add lifecycle listener addlifecyclelistener org apache catalina lifecycle listener lifecyclelistener add rule sets rulesets nested elements digester add rule set addruleset naming rule set namingruleset server global naming resources globalnamingresources digester add rule set addruleset engine rule set engineruleset server service digester add rule set addruleset host rule set hostruleset server service engine digester add rule set addruleset context rule set contextruleset server service engine host add cluster rule set addclusterruleset digester server service engine host cluster digester add rule set addruleset naming rule set namingruleset server service engine host context engine parent class loader parentclassloader digester add rule addrule server service engine set parent class loader rule setparentclassloaderrule parent class loader parentclassloader add cluster rule set addclusterruleset digester server service engine cluster system current time millis currenttimemillis log is debug enabled isdebugenabled log debug digester server xml created digester cluster support optional jar s jars removed add cluster rule set addclusterruleset digester digester string prefix clazz constructor constructor clazz for name forname org apache catalina cluster rule set clusterruleset constructor clazz get constructor getconstructor string rule set ruleset rule set ruleset rule set ruleset constructor new instance newinstance prefix digester add rule set addruleset rule set ruleset exception log is debug enabled isdebugenabled log debug get string getstring catalina no cluster nocluster get class getclass get name getname get message getmessage log is info enabled isinfoenabled log info get string getstring catalina no cluster nocluster get class getclass get name getname get message getmessage create configure digester shutdown digester create stop digester createstopdigester initialize digester digester digester digester digester set use context class loader setusecontextclassloader configure rules shutting digester add object create addobjectcreate server org apache catalina core standard server standardserver class name classname digester add set properties addsetproperties server digester add set next addsetnext server set server setserver org apache catalina server digester stop server stopserver stop server stopserver stop server stopserver string arguments arguments arguments arguments server get server getserver create execute digester digester digester create stop digester createstopdigester file file config file configfile file input stream fileinputstream fis input source inputsource input source inputsource file touri tourl to string tostring fis file input stream fileinputstream file set byte stream setbytestream fis digester push digester parse exception log error catalina system exit fis fis close i o exception ioexception server object running service lifecycle exception lifecycleexception log error catalina existing server get server getserver get port getport socket socket output stream outputstream stream socket socket get address getaddress get port getport stream socket get output stream getoutputstream string shutdown get shutdown getshutdown shutdown length stream write shutdown char at charat stream flush connect exception connectexception log error get string getstring catalina stop server stopserver connect exception connectexception get address getaddress string value of valueof get port getport log error catalina system exit i o exception ioexception log error catalina system exit stream stream close i o exception ioexception socket socket close i o exception ioexception log error get string getstring catalina stop server stopserver system exit start server instance load system nano time nanotime init dirs initdirs digester needed init naming initnaming create execute digester digester digester create start digester createstartdigester input source inputsource input source inputsource input stream inputstream input stream inputstream file file file config file configfile input stream inputstream file input stream fileinputstream file input source inputsource input source inputsource file touri tourl to string tostring exception log is debug enabled isdebugenabled log debug get string getstring catalina config fail configfail file input stream inputstream input stream inputstream get class getclass get class loader getclassloader get resource as stream getresourceasstream get config file getconfigfile input source inputsource input source inputsource get class getclass get class loader getclassloader get resource getresource get config file getconfigfile to string tostring exception log is debug enabled isdebugenabled log debug get string getstring catalina config fail configfail get config file getconfigfile alternative don bother xml create manually input stream inputstream input stream inputstream get class getclass get class loader getclassloader get resource as stream getresourceasstream server embed xml input source inputsource input source inputsource get class getclass get class loader getclassloader get resource getresource server embed xml to string tostring exception log is debug enabled isdebugenabled log debug get string getstring catalina config fail configfail server embed xml input stream inputstream input source inputsource file log warn get string getstring catalina config fail configfail get config file getconfigfile server embed xml log warn get string getstring catalina config fail configfail file get absolute path getabsolutepath file exists file can read canread log warn per missions permissions incorrect read permission allowed file input source inputsource set byte stream setbytestream input stream inputstream digester push digester parse input source inputsource sax parse exception saxparseexception spe log warn catalina start get config file getconfigfile spe get message getmessage exception log warn catalina start get config file getconfigfile input stream inputstream input stream inputstream close i o exception ioexception get server getserver set catalina setcatalina stream redirect ion redirection init streams initstreams start server get server getserver init lifecycle exception lifecycleexception get boolean getboolean org apache catalina startup exit init failure java lang error log error catalina start system nano time nanotime log is info enabled isinfoenabled log info initialization processed load arguments load string args arguments args load exception print stack trace printstacktrace system start server instance start get server getserver load get server getserver log fatal start server server instance configured system nano time nanotime start server get server getserver start lifecycle exception lifecycleexception log fatal get string getstring catalina server start fail serverstartfail get server getserver destroy lifecycle exception lifecycleexception log debug destroy failed failed server system nano time nanotime log is info enabled isinfoenabled log info server startup register shutdown hook use shutdown hook useshutdownhook shutdown hook shutdownhook shutdown hook shutdownhook catalina shutdown hook catalinashutdownhook runtime get runtime getruntime add shutdown hook addshutdownhook shutdown hook shutdownhook juli disable juli shutdown hook shutdown hooks parallel log messages lost juli hook comp letes completes catalina shutdown hook catalinashutdownhook log manager logmanager log manager logmanager log manager logmanager get log manager getlogmanager log manager logmanager class loader log manager classloaderlogmanager class loader log manager classloaderlogmanager log manager logmanager set use shutdown hook setuseshutdownhook await await existing server instance doesn invoked use shutdown hook useshutdownhook runtime get runtime getruntime remove shutdown hook removeshutdownhook shutdown hook shutdownhook juli enable juli shutdown ensure log messages lost log manager logmanager log manager logmanager log manager logmanager get log manager getlogmanager log manager logmanager class loader log manager classloaderlogmanager class loader log manager classloaderlogmanager log manager logmanager set use shutdown hook setuseshutdownhook throwable exception utils exceptionutils handle throwable handlethrowable shut server server get server getserver lifecycle state lifecyclestate get state getstate lifecycle state lifecyclestate stopping prep compare to compareto lifecycle state lifecyclestate destroyed compare to compareto called destroy lifecycle exception lifecycleexception log error catalina await shutdown await get server getserver await print usage application usage system println usage java org apache catalina startup catalina config path name pathname non aming nonaming start init dirs initdirs string catalina home catalinahome system get property getproperty globals catalina prop catalina home catalinahome compatibility patch string ee home eehome system get property getproperty sun enter prise enterprise ee home eehome catalina home catalinahome system get property getproperty sun enter prise enterprise system get property getproperty globals catalina base prop catalina home catalinahome system get property getproperty globals catalina base prop res ort resort minimal embedded cases catalina home catalinahome catalina home catalinahome system get property getproperty user dir catalina home catalinahome file file catalina home catalinahome is absolute isabsolute catalina home catalinahome get canonical path getcanonicalpath i o exception ioexception catalina home catalinahome get absolute path getabsolutepath system set property setproperty globals catalina prop catalina home catalinahome system get property getproperty globals catalina base prop system set property setproperty globals catalina base prop catalina home catalinahome string catalina base catalinabase system get property getproperty globals catalina base prop file base file catalina base catalinabase base is absolute isabsolute catalina base catalinabase base get canonical path getcanonicalpath i o exception ioexception catalina base catalinabase base get absolute path getabsolutepath system set property setproperty globals catalina base prop catalina base catalinabase string temp system get property getproperty java tmp dir tmpdir temp file temp exists file temp is directory isdirectory log error get string getstring embedded not mp notmp temp init streams initstreams replace system system err custom print stream printstream system set out setout system log handler systemloghandler system system set err seterr system log handler systemloghandler system err init naming initnaming setting additional variables use naming usenaming log info catalina naming disabled system set property setproperty catalina use naming usenaming system set property setproperty catalina use naming usenaming string org apache naming string old value oldvalue system get property getproperty javax naming context url pkg prefixes old value oldvalue old value oldvalue system set property setproperty javax naming context url pkg prefixes log is debug enabled isdebugenabled log debug setting naming prefix system get property getproperty javax naming context initial context factory system set property setproperty javax naming context initial context factory org apache naming java javaurlcontextfactory log debug initial context factory security access protection set security protection setsecurityprotection security config securityconfig security config securityconfig security config securityconfig new instance newinstance security config securityconfig set package definition setpackagedefinition security config securityconfig set package access setpackageaccess shutdown hook perform clean shutdown catalina needed catalina shutdown hook catalinashutdownhook thread override get server getserver catalina throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring catalina shutdown hook fail shutdownhookfail juli shut juli server shuts log messages lost log manager logmanager log manager logmanager log manager logmanager get log manager getlogmanager log manager logmanager class loader log manager classloaderlogmanager class loader log manager classloaderlogmanager log manager logmanager shutdown org apache juli logging log log org apache juli logging log factory logfactory get log getlog catalina set parent class loader rule setparentclassloaderrule rule set parent class loader rule setparentclassloaderrule class loader classloader parent class loader parentclassloader parent class loader parentclassloader parent class loader parentclassloader class loader classloader parent class loader parentclassloader override string namespace string attributes attributes exception digester get logger getlogger is debug enabled isdebugenabled digester get logger getlogger debug setting parent loader container top container digester peek top set parent class loader setparentclassloader parent class loader parentclassloader