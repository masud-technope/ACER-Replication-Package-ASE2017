licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina servlets java file java file output stream fileoutputstream java io exception ioexception java output stream writer outputstreamwriter java writer java text simple date format simpledateformat java util java util hash map hashmap java util list java util locale java util map java util time zone timezone javax servlet http http servlet response httpservletresponse org junit assert equals assertequals org junit assert false assertfalse org junit assert true asserttrue org junit fail org junit org junit test org apache catalina startup simple http client simplehttpclient crlf org apache catalina startup simple http client simplehttpclient org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest org apache tomcat util buf byte chunk bytechunk test default servlet testdefaultservlet tomcat base test tomcatbasetest test attempting access special paths web inf meta inf default servlet defaultservlet test test get spec ials testgetspecials exception tomcat tomcat get tomcat instance gettomcatinstance string context path contextpath examples file app dir appdir file get build directory getbuilddirectory web apps webapps context path contextpath app dir relative server tomcat add webapp addwebapp examples app dir appdir get absolute path getabsolutepath tomcat start byte chunk bytechunk res byte chunk bytechunk get url geturl http localhost get port getport context path contextpath web inf web xml res assert equals assertequals http servlet response httpservletresponse get url geturl http localhost get port getport context path contextpath web inf doesn texistanywhere doesntexistanywhere res assert equals assertequals http servlet response httpservletresponse get url geturl http localhost get port getport context path contextpath web inf res assert equals assertequals http servlet response httpservletresponse get url geturl http localhost get port getport context path contextpath meta inf manifest res assert equals assertequals http servlet response httpservletresponse get url geturl http localhost get port getport context path contextpath meta inf doesn texistanywhere doesntexistanywhere res assert equals assertequals http servlet response httpservletresponse test https apache org bug zilla bugzilla bug cgi verify serving resources context root sub path subpath mapping test test get with sub path mount testgetwithsubpathmount exception tomcat tomcat get tomcat instance gettomcatinstance string context path contextpath examples file app dir appdir file get build directory getbuilddirectory web apps webapps context path contextpath app dir relative server org apache catalina context ctx tomcat add webapp addwebapp examples app dir appdir get absolute path getabsolutepath override servlet mappings tomcat add servlet addservlet ctx default servlet defaultservlet ctx add servlet mapping addservletmapping ctx add servlet mapping addservletmapping servlets ctx add servlet mapping addservletmapping tomcat start byte chunk bytechunk res byte chunk bytechunk default servlet defaultservlet isn exp osing exposing special directories remounting webapp path get url geturl http localhost get port getport context path contextpath web inf web xml res assert equals assertequals http servlet response httpservletresponse get url geturl http localhost get port getport context path contextpath web inf doesn texistanywhere doesntexistanywhere res assert equals assertequals http servlet response httpservletresponse assert equals assertequals http servlet response httpservletresponse get url geturl http localhost get port getport context path contextpath web inf res assert equals assertequals http servlet response httpservletresponse get url geturl http localhost get port getport context path contextpath meta inf manifest res assert equals assertequals http servlet response httpservletresponse get url geturl http localhost get port getport context path contextpath meta inf doesn texistanywhere doesntexistanywhere res assert equals assertequals http servlet response httpservletresponse default servlet defaultservlet serving resources relative context root mapped byte chunk bytechunk root resource rootresource byte chunk bytechunk get url geturl http localhost get port getport context path contextpath html root resource rootresource assert equals assertequals http servlet response httpservletresponse byte chunk bytechunk sub path resource subpathresource byte chunk bytechunk get url geturl http localhost get port getport context path contextpath servlets html sub path resource subpathresource assert equals assertequals http servlet response httpservletresponse assert false assertfalse root resource rootresource to string tostring equals sub path resource subpathresource to string tostring get url geturl http localhost get port getport context path contextpath html res assert equals assertequals http servlet response httpservletresponse test https apache org bug zilla bugzilla bug cgi serving custom error test test custom error page testcustomerrorpage exception file app dir appdir file get temporary directory gettemporarydirectory my app myapp file web inf webinf file app dir appdir web inf add delete on tear down adddeleteonteardown app dir appdir web inf webinf mkdirs web inf webinf is directory isdirectory fail unable create directory web inf webinf writer output stream writer outputstreamwriter file output stream fileoutputstream file app dir appdir web inf web xml utf write xml version encoding utf web app xml ns xmlns http java sun xml xml ns xmlns xsi http org xml schema xmlschema instance xsi schema location schemalocation http java sun xml http java sun xml web app xsd version error error code error code location html location error web app flush close output stream writer outputstreamwriter file output stream fileoutputstream file app dir appdir html iso write html flush close tomcat tomcat get tomcat instance gettomcatinstance string context path contextpath my app myapp tomcat add webapp addwebapp context path contextpath app dir appdir get absolute path getabsolutepath tomcat start test custom error client testcustomerrorclient client test custom error client testcustomerrorclient tomcat get connector getconnector get local port getlocalport client reset client set request setrequest string my app myapp missing http crlf crlf client connect client process request processrequest assert true asserttrue client is response isresponse assert equals assertequals html client get response body getresponsebody simple date format simpledateformat format simple date format simpledateformat eee mmm yyyy zzz locale format set time zone settimezone time zone timezone get time zone gettimezone gmt string tomorrow format format system current time millis currenttimemillis https apache org bug zilla bugzilla bug cgi client reset client set request setrequest string my app myapp missing http crlf host localhost crlf connection close crlf modified tomorrow crlf crlf client connect client process request processrequest assert true asserttrue client is response isresponse assert equals assertequals html client get response body getresponsebody https apache org bug zilla bugzilla bug cgi client reset client set request setrequest string my app myapp missing http crlf host localhost crlf connection close crlf range bytes crlf crlf client connect client process request processrequest assert true asserttrue client is response isresponse assert equals assertequals html client get response body getresponsebody test custom configured file missing test test custom error page missing testcustomerrorpagemissing exception file app dir appdir file get temporary directory gettemporarydirectory my app myapp file web inf webinf file app dir appdir web inf add delete on tear down adddeleteonteardown app dir appdir web inf webinf mkdirs web inf webinf is directory isdirectory fail unable create directory web inf webinf writer output stream writer outputstreamwriter file output stream fileoutputstream file app dir appdir web inf web xml utf write xml version encoding utf web app xml ns xmlns http java sun xml xml ns xmlns xsi http org xml schema xmlschema instance xsi schema location schemalocation http java sun xml http java sun xml web app xsd version error error code error code location absent html location error web app flush close tomcat tomcat get tomcat instance gettomcatinstance string context path contextpath my app myapp tomcat add webapp addwebapp context path contextpath app dir appdir get absolute path getabsolutepath tomcat start test custom error client testcustomerrorclient client test custom error client testcustomerrorclient tomcat get connector getconnector get local port getlocalport client reset client set request setrequest string my app myapp missing http crlf crlf client connect client process request processrequest assert true asserttrue client is response isresponse verifies content length returned head operations resource served default servlet defaultservlet included test test bug testbug exception tomcat tomcat get tomcat instance gettomcatinstance file app dir appdir file test webapp tomcat add webapp addwebapp test app dir appdir get absolute path getabsolutepath tomcat start map string list string res headers resheaders hash map hashmap string list string string path http localhost get port getport test bug nnnn bug jsp byte chunk bytechunk byte chunk bytechunk get url geturl path res headers resheaders assert equals assertequals http servlet response httpservletresponse string length res headers resheaders content length assert equals assertequals parse long parselong length get length getlength recycle head url headurl path res headers resheaders assert equals assertequals http servlet response httpservletresponse assert equals assertequals get length getlength assert equals assertequals length res headers resheaders content length tomcat get url geturl string path byte chunk bytechunk map string list string res head reshead io exception ioexception recycle tomcat base test tomcatbasetest get url geturl path res head reshead test custom error client testcustomerrorclient simple http client simplehttpclient test custom error client testcustomerrorclient port set port setport port override is response body k isresponsebodyok