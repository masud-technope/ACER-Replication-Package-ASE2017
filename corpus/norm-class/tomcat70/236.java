licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket server java net uri java net uri syntax exception urisyntaxexception java security principal java util arrays java util collections java util enumeration java util hash map hashmap java util list java util map java util map entry javax servlet http http servlet request httpservletrequest javax websocket server handshake request handshakerequest org apache tomcat websocket case ins ensitive key map caseinsensitivekeymap represents request session opened ws handshake request wshandshakerequest handshake request handshakerequest uri request uri requesturi map string list string parameter map parametermap string query string querystring principal user principal userprincipal map string list string headers object http session httpsession http servlet request httpservletrequest request ws handshake request wshandshakerequest http servlet request httpservletrequest request map string string path params pathparams request request query string querystring request get query string getquerystring user principal userprincipal request get user principal getuserprincipal http session httpsession request get session getsession uri string builder stringbuilder string builder stringbuilder request getrequesturi query string querystring append append query string querystring request uri requesturi uri to string tostring uri syntax exception urisyntaxexception illegal argument exception illegalargumentexception parameter map parametermap map string string original parameters originalparameters request get parameter map getparametermap map string list string new parameters newparameters hash map hashmap string list string original parameters originalparameters size entry string string entry original parameters originalparameters entry set entryset new parameters newparameters entry get key getkey collections unmodifiable list unmodifiablelist arrays as list aslist entry get value getvalue entry string string entry path params pathparams entry set entryset new parameters newparameters entry get key getkey collections unmodifiable list unmodifiablelist arrays as list aslist entry get value getvalue parameter map parametermap collections unmodifiable map unmodifiablemap new parameters newparameters headers map string list string new headers newheaders case ins ensitive key map caseinsensitivekeymap list string enumeration string header names headernames request get header names getheadernames header names headernames has more elements hasmoreelements string header name headername header names headernames next element nextelement new headers newheaders header name headername collections unmodifiable list unmodifiablelist collections list request get headers getheaders header name headername headers collections unmodifiable map unmodifiablemap new headers newheaders override uri getrequesturi request uri requesturi override map string list string get parameter map getparametermap parameter map parametermap override string get query string getquerystring query string querystring override principal get user principal getuserprincipal user principal userprincipal override map string list string get headers getheaders headers override is user in role isuserinrole string role request illegal state exception illegalstateexception request is user in role isuserinrole role override object get http session gethttpsession http session httpsession called handshake request handshakerequest longer required instance ret ains retains reference current http servlet request httpservletrequest reference cleared http servlet request httpservletrequest reused reason instances accessed handshake completed finished request