licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache coyote java io exception ioexception java net inet address inetaddress java util map java util concurrent concurrent hash map concurrenthashmap java util concurrent concurrent linked queue concurrentlinkedqueue java util concurrent executor java util concurrent atomic atomic integer atomicinteger java util concurrent atomic atomic long atomiclong javax management m bean registration mbeanregistration javax management m bean server mbeanserver javax management malformed object name exception malformedobjectnameexception javax management object name objectname org apache coyote http upgrade servlet http upgrade handler httpupgradehandler org apache coyote http upgrade servlet web connection webconnection org apache juli logging log org apache tomcat util exception utils exceptionutils org apache tomcat util modeler registry org apache tomcat util net abstract endpoint abstractendpoint org apache tomcat util net abstract endpoint abstractendpoint handler org apache tomcat util net socket status socketstatus org apache tomcat util net socket wrapper socketwrapper org apache tomcat util res string manager stringmanager abstract protocol abstractprotocol protocol handler protocolhandler m bean registration mbeanregistration string manager string manager stringmanager string manager stringmanager get manager getmanager constants counter generate unique jmx names connectors automatic port binding atomic integer atomicinteger name counter namecounter atomic integer atomicinteger m bean mbean global request processor object name objectname rg oname rgoname m bean mbean thread pool threadpool object name objectname tp oname tponame unique connector connector configured random port port change start called name index nameindex endpoint level net work network matched protocol handler protocolhandler implementation protocol handler protocolhandler bio requires bio endpoint abstract endpoint abstractendpoint endpoint maximum number cookies permitted request limit defaults max cookie count maxcookiecount property handling property set ter setter digester code digester method find specific set ter setter property belongs endpoint server socket factory serversocketfactory level component method ensures visible set property setproperty string string endpoint set property setproperty property get ter getter digester code string get property getproperty string endpoint get property getproperty properties managed protocol handler protocolhandler adapter link protocol handler protocolhandler connector adapter adapter override set adapter setadapter adapter adapter adapter adapter override adapter get adapter getadapter adapter maximum number idle processors retained cache subsequent request unlimited unlimited the oretical theoretical maximum number cached processor objects link get max connections getmaxconnections close r closer link get max threads getmaxthreads processor cache processorcache get processor cache getprocessorcache processor cache processorcache set processor cache setprocessorcache processor cache processorcache processor cache processorcache processor cache processorcache client certificate presented form instances link java security cert certificate converted property controls jsse provider perform conversion ajp connectors http apr connector link org apache catalina valves ssl valve sslvalve provider string client cert provider clientcertprovider string get client cert provider getclientcertprovider client cert provider clientcertprovider set client cert provider setclientcertprovider string client cert provider clientcertprovider override is apr required isaprrequired get max cookie count getmaxcookiecount max cookie count maxcookiecount set max cookie count setmaxcookiecount max cookie count maxcookiecount max cookie count maxcookiecount max cookie count maxcookiecount properties passed end point endpoint override executor get executor getexecutor endpoint get executor getexecutor set executor setexecutor executor executor endpoint set executor setexecutor executor get max threads getmaxthreads endpoint get max threads getmaxthreads set max threads setmaxthreads max threads maxthreads endpoint set max threads setmaxthreads max threads maxthreads get max connections getmaxconnections endpoint get max connections getmaxconnections set max connections setmaxconnections max connections maxconnections endpoint set max connections setmaxconnections max connections maxconnections get min spare threads getminsparethreads endpoint get min spare threads getminsparethreads set min spare threads setminsparethreads min spare threads minsparethreads endpoint set min spare threads setminsparethreads min spare threads minsparethreads get thread priority getthreadpriority endpoint get thread priority getthreadpriority set thread priority setthreadpriority thread priority threadpriority endpoint set thread priority setthreadpriority thread priority threadpriority get backlog getbacklog endpoint get backlog getbacklog set backlog setbacklog back log backlog endpoint set backlog setbacklog back log backlog get tcp no delay gettcpnodelay endpoint get tcp no delay gettcpnodelay set tcp no delay settcpnodelay tcp no delay tcpnodelay endpoint set tcp no delay settcpnodelay tcp no delay tcpnodelay get so linger getsolinger endpoint get so linger getsolinger set so linger setsolinger so linger solinger endpoint set so linger setsolinger so linger solinger get keep alive timeout getkeepalivetimeout endpoint get keep alive timeout getkeepalivetimeout set keep alive timeout setkeepalivetimeout keep alive timeout keepalivetimeout endpoint set keep alive timeout setkeepalivetimeout keep alive timeout keepalivetimeout inet address inetaddress get address getaddress endpoint get address getaddress set address setaddress inet address inetaddress endpoint set address setaddress get port getport endpoint get port getport set port setport port endpoint set port setport port get local port getlocalport endpoint get local port getlocalport tomcat expects data client time tomcat wait data arrive closing connection get connection timeout getconnectiontimeout note endpoint alternative endpoint get so timeout getsotimeout set connection timeout setconnectiontimeout timeout note endpoint alternative endpoint set so timeout setsotimeout timeout alternative connection timeout connectiontimeout property get so timeout getsotimeout get connection timeout getconnectiontimeout set so timeout setsotimeout timeout set connection timeout setconnectiontimeout timeout get max header count getmaxheadercount endpoint get max header count getmaxheadercount set max header count setmaxheadercount max header count maxheadercount endpoint set max header count setmaxheadercount max header count maxheadercount get connection count getconnectioncount endpoint get connection count getconnectioncount methods get name index getnameindex name index nameindex name index nameindex name counter namecounter increment and get incrementandget name index nameindex prefix address port address prefix port address app ropriately appropriately quoted object name objectname string get name getname string builder stringbuilder string builder stringbuilder get name prefix getnameprefix append get address getaddress append get address getaddress get host address gethostaddress append port get port getport port auto binding check port append auto append get name index getnameindex port get local port getlocalport port append append port append port object name objectname quote to string tostring methods concrete implementations provide access logger classes log get log getlog prefix construction protocol handler prefix address port string get name prefix getnameprefix protocol http ajp jmx string get protocol name getprotocolname handler underlying endpoint handler get handler gethandler jmx methods string domain object name objectname oname m bean server mbeanserver mserver object name objectname get object name getobjectname oname string get domain getdomain domain override object name objectname pre register preregister m bean server mbeanserver server object name objectname exception oname mserver server domain get domain getdomain override post register postregister registration done registrationdone noop override pre deregister prederegister exception noop override post deregister postderegister noop object name objectname create object name createobjectname malformed object name exception malformedobjectnameexception domain connector domain adapter get domain getdomain domain string builder stringbuilder string builder stringbuilder get domain getdomain append type protocol handler protocolhandler port port get port getport port append get port getport append auto append get name index getnameindex inet address inetaddress address get address getaddress address append address append object name objectname quote address get host address gethostaddress object name objectname to string tostring lifecycle methods note main tenance maintenance checking valid transitions expected connector main tain maintain prevent invalid transitions override init exception get log getlog is info enabled isinfoenabled get log getlog info get string getstring abstract protocol handler abstractprotocolhandler init get name getname oname component pre registered register oname create object name createobjectname oname registry get registry getregistry register component registercomponent oname domain tp oname tponame object name objectname domain type thread pool threadpool get name getname registry get registry getregistry register component registercomponent endpoint tp oname tponame exception get log getlog error get string getstring abstract protocol handler abstractprotocolhandler mbean registration failed mbeanregistrationfailed tp oname tponame get name getname rg oname rgoname object name objectname domain type global request processor globalrequestprocessor get name getname registry get registry getregistry register component registercomponent get handler gethandler get global getglobal rg oname rgoname string endpoint name endpointname get name getname endpoint set name setname endpoint name endpointname substring endpoint name endpointname length endpoint init exception get log getlog error get string getstring abstract protocol handler abstractprotocolhandler init error initerror get name getname override start exception get log getlog is info enabled isinfoenabled get log getlog info get string getstring abstract protocol handler abstractprotocolhandler start get name getname endpoint start exception get log getlog error get string getstring abstract protocol handler abstractprotocolhandler start error starterror get name getname override pause exception get log getlog is info enabled isinfoenabled get log getlog info get string getstring abstract protocol handler abstractprotocolhandler pause get name getname endpoint pause exception get log getlog error get string getstring abstract protocol handler abstractprotocolhandler pause error pauseerror get name getname override resume exception get log getlog is info enabled isinfoenabled get log getlog info get string getstring abstract protocol handler abstractprotocolhandler resume get name getname endpoint resume exception get log getlog error get string getstring abstract protocol handler abstractprotocolhandler resume error resumeerror get name getname override exception get log getlog is info enabled isinfoenabled get log getlog info get string getstring abstract protocol handler abstractprotocolhandler get name getname endpoint exception get log getlog error get string getstring abstract protocol handler abstractprotocolhandler stop error stoperror get name getname override destroy get log getlog is info enabled isinfoenabled get log getlog info get string getstring abstract protocol handler abstractprotocolhandler destroy get name getname endpoint destroy exception get log getlog error get string getstring abstract protocol handler abstractprotocolhandler destroy error destroyerror get name getname oname registry get registry getregistry unregister component unregistercomponent oname tp oname tponame registry get registry getregistry unregister component unregistercomponent tp oname tponame rg oname rgoname registry get registry getregistry unregister component unregistercomponent rg oname rgoname abstract connection handler abstractconnectionhandler processor abstract endpoint abstractendpoint handler log get log getlog request group info requestgroupinfo global request group info requestgroupinfo atomic long atomiclong register count registercount atomic long atomiclong map processor connections concurrent hash map concurrenthashmap processor recycled processors recycledprocessors recycled processors recycledprocessors recycled processors recycledprocessors abstract protocol abstractprotocol get protocol getprotocol override object get global getglobal global override recycle recycled processors recycledprocessors clear http upgrade method deprecated suppress warnings suppresswarnings deprecation socket state socketstate process socket wrapper socketwrapper wrapper socket status socketstatus status wrapper socket closed socket state socketstate closed socket wrapper get socket getsocket socket socket closed socket state socketstate closed processor processor connections socket status socket status socketstatus disconnect processor longer processor socket socket state socketstate closed wrapper set async setasync container thread marker containerthreadmarker mark as container thread markascontainerthread processor processor recycled processors recycledprocessors poll processor processor create processor createprocessor init ssl initssl wrapper processor socket state socketstate socket state socketstate closed status socket status socketstatus close processor error dispatch errordispatch socket state socketstate closed status socket status socketstatus disconnect processor is comet iscomet wait recycled don comet generate event processor is async isasync socket state socketstate async processor async dispatch asyncdispatch status socket state socketstate open release won called request takes time process remove socket waiting requests async timeout fire get protocol getprotocol endpoint remove waiting request removewaitingrequest wrapper pipe line d lined data read data isn processed execution exit loop call release recycle processor input buffer deleting pipe line d lined data avoid process processor process wrapper processor is comet iscomet processor event status processor get upgrade inbound getupgradeinbound processor upgrade dispatch upgradedispatch processor is upgrade isupgrade processor upgrade dispatch upgradedispatch status processor process wrapper socket state socketstate closed processor is async isasync processor async post process asyncpostprocess socket state socketstate upgrading http upgrade handler http upgrade handler httpupgradehandler http upgrade handler httpupgradehandler processor get http upgrade handler gethttpupgradehandler release http processor release wrapper processor create upgrade processor processor create upgrade processor createupgradeprocessor wrapper http upgrade handler httpupgradehandler mark connection upgrade d upgraded wrapper set upgrade d setupgraded associate processor connection connections socket processor init ialise initialise upgrade handler trigger protocol lines safe fails error handling surrounding deal http upgrade handler httpupgradehandler init web connection webconnection processor socket state socketstate upgrading tomcat upgrade inbound upgradeinbound handler org apache coyote http upgrade upgrade inbound upgradeinbound inbound processor get upgrade inbound getupgradeinbound release http processor release wrapper processor create light weight upgrade processor processor create upgrade processor createupgradeprocessor wrapper inbound inbound on upgrade complete onupgradecomplete get log getlog is debug enabled isdebugenabled get log getlog debug socket wrapper status status socket state socketstate async socket state socketstate upgrading socket state socketstate upgrading tomcat socket state socketstate middle processing request response socket processor exact requirements depend type poll connections socket processor long poll longpoll wrapper processor socket state socketstate open alive requests recycle processor poll request connections remove socket release wrapper processor socket state socketstate sendfile sendfile progress fails socket closed works socket poller connections remove socket release wrapper processor socket state socketstate upgraded connection processor connections socket processor poller status socket status socketstatus open write long poll longpoll wrapper processor connection closed recycle processor upgrade processors recycled connections remove socket processor is upgrade isupgrade processor get http upgrade handler gethttpupgradehandler destroy processor org apache coyote http upgrade upgrade processor upgradeprocessor release wrapper processor java net socket exception socketexception get log getlog debug get string getstring abstract connection handler abstractconnectionhandler socket exception socketexception debug java io exception ioexception get log getlog debug get string getstring abstract connection handler abstractconnectionhandler ioe xception ioexception debug throwable exception utils exceptionutils handle throwable handlethrowable get log getlog error get string getstring abstract connection handler abstractconnectionhandler error socket processor removed list current connections connections remove socket don add upgrade processors pool processor org apache coyote http upgrade upgrade processor upgradeprocessor processor is upgrade isupgrade release wrapper processor socket state socketstate closed create processor createprocessor init ssl initssl socket wrapper socketwrapper socket processor processor long poll longpoll socket wrapper socketwrapper socket processor processor release socket wrapper socketwrapper socket processor processor socket closing socketclosing add to poller addtopoller deprecated removed tomcat deprecated processor create upgrade processor createupgradeprocessor socket wrapper socketwrapper socket org apache coyote http upgrade upgrade inbound upgradeinbound inbound io exception ioexception processor create upgrade processor createupgradeprocessor socket wrapper socketwrapper socket http upgrade handler httpupgradehandler http upgrade processor httpupgradeprocessor io exception ioexception register abstract processor abstractprocessor processor get protocol getprotocol get domain getdomain count register count registercount increment and get incrementandget request info requestinfo processor get request getrequest get request processor getrequestprocessor set global processor setglobalprocessor global object name objectname rp name rpname object name objectname get protocol getprotocol get domain getdomain type request processor requestprocessor worker get protocol getprotocol get name getname get protocol getprotocol get protocol name getprotocolname request count get log getlog is debug enabled isdebugenabled get log getlog debug register rp name rpname registry get registry getregistry register component registercomponent rp name rpname set rp name setrpname rp name rpname exception get log getlog warn error registering request unregister processor processor get protocol getprotocol get domain getdomain request processor get request getrequest upgrade processor upgradeprocessor request info requestinfo get request processor getrequestprocessor set global processor setglobalprocessor object name objectname rp name rpname get rp name getrpname get log getlog is debug enabled isdebugenabled get log getlog debug unregister rp name rpname registry get registry getregistry unregister component unregistercomponent rp name rpname set rp name setrpname exception get log getlog warn error unregistering request recycled processors recycledprocessors processor concurrent linked queue concurrentlinkedqueue processor serialversionuid abstract connection handler abstractconnectionhandler handler atomic integer atomicinteger size atomic integer atomicinteger recycled processors recycledprocessors abstract connection handler abstractconnectionhandler handler handler handler override offer processor processor cache size cachesize handler get protocol getprotocol get processor cache getprocessorcache offer cache size cachesize size cache size cachesize avoid growing cache add stopped result offer result offer processor result size increment and get incrementandget result handler unregister processor result override processor poll processor result poll result size decrement and get decrementandget result override clear processor poll handler unregister poll clear size