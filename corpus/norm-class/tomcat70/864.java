licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util net java output stream writer outputstreamwriter java net inet address inetaddress java net inet socket address inetsocketaddress java util array list arraylist java util hash map hashmap java util string tokenizer stringtokenizer java util concurrent executor java util concurrent time unit timeunit javax net ssl key manager factory keymanagerfactory javax net ssl ssl engine sslengine org apache juli logging log org apache tomcat util int rospection utils introspectionutils org apache tomcat util comp at compat jre compat jrecompat org apache tomcat util net abstract endpoint abstractendpoint acceptor acceptor state acceptorstate org apache tomcat util res string manager stringmanager org apache tomcat util threads limit latch limitlatch org apache tomcat util threads resizable executor resizableexecutor org apache tomcat util threads task queue taskqueue org apache tomcat util threads task thread factory taskthreadfactory org apache tomcat util threads thread pool executor threadpoolexecutor author fhanik author mladen turk author remy maucherat abstract endpoint abstractendpoint constants string manager stringmanager string manager stringmanager get manager getmanager org apache tomcat util net res handler types socket react enum socket state socketstate async open closed async sendfile upgrading tomcat upgrading upgraded global request processor globalrequestprocessor handler object get global getglobal recycle resources handler recycle enum bind state bindstate unbound bound init bound start acceptor runnable enum acceptor state acceptorstate running paused ended acceptor state acceptorstate acceptor state acceptorstate acceptor state acceptorstate get state getstate string thread name threadname set thread name setthreadname string thread name threadname thread name threadname thread name threadname string get thread name getthreadname thread name threadname initial error delay max error delay fields running endpoint running endpoint paused paused internal executor internal executor internalexecutor counter connections handled endpoint limit latch limitlatch connection limit latch connectionlimitlatch socket properties socket properties socketproperties socket properties socketproperties socket properties socketproperties socket properties socketproperties get socket properties getsocketproperties socket properties socketproperties threads accept connections pass worker threads acceptor accept ors acceptors properties time wait internal executor terminate endpoint stopped milliseconds defaults seconds executor termination timeout millis executorterminationtimeoutmillis get executor termination timeout millis getexecutorterminationtimeoutmillis executor termination timeout millis executorterminationtimeoutmillis set executor termination timeout millis setexecutorterminationtimeoutmillis executor termination timeout millis executorterminationtimeoutmillis executor termination timeout millis executorterminationtimeoutmillis executor termination timeout millis executorterminationtimeoutmillis acceptor thread count acceptor thread count acceptorthreadcount set acceptor thread count setacceptorthreadcount acceptor thread count acceptorthreadcount acceptor thread count acceptorthreadcount acceptor thread count acceptorthreadcount get acceptor thread count getacceptorthreadcount acceptor thread count acceptorthreadcount priority acceptor threads acceptor thread priority acceptorthreadpriority thread norm priority set acceptor thread priority setacceptorthreadpriority acceptor thread priority acceptorthreadpriority acceptor thread priority acceptorthreadpriority acceptor thread priority acceptorthreadpriority get acceptor thread priority getacceptorthreadpriority acceptor thread priority acceptorthreadpriority max connections maxconnections set max connections setmaxconnections max con maxcon max connections maxconnections max con maxcon limit latch limitlatch latch connection limit latch connectionlimitlatch latch update latch enforces max con maxcon release connection latch releaseconnectionlatch latch set limit setlimit max con maxcon max con maxcon initialize connection latch initializeconnectionlatch get max connections getmaxconnections max connections maxconnections current count connections handled endpoint connections counted maximum count connections limited code code property ins pected inspected jmx visible thread pool threadpool m bean mbean count inc remented incremented acceptor accept connection limit reached count inc remented incremented count accept ors acceptors actual count connections served count get connection count getconnectioncount limit latch limitlatch latch connection limit latch connectionlimitlatch latch latch get count getcount external executor based thread pool executor executor set executor setexecutor executor executor executor executor internal executor internalexecutor executor executor get executor getexecutor executor server socket port port get port getport port set port setport port port port get local port getlocalport address server socket inet address inetaddress address inet address inetaddress get address getaddress address set address setaddress inet address inetaddress address address address server dev eloper developer backlog server sockets backlog set backlog setbacklog backlog backlog backlog backlog get backlog getbacklog backlog controls endpoint bin ds binds port code code bin ds binds port link init unbinds link destroy code code port bound link start unbound link bind on init bindoninit get bind on init getbindoninit bind on init bindoninit set bind on init setbindoninit bind on init bindoninit bind state bindstate bind state bindstate bind state bindstate unbound keep alive keepalive timeout so timeout sotimeout integer keep alive timeout keepalivetimeout get keep alive timeout getkeepalivetimeout keep alive timeout keepalivetimeout get so timeout getsotimeout keep alive timeout keepalivetimeout int value intvalue set keep alive timeout setkeepalivetimeout keep alive timeout keepalivetimeout keep alive timeout keepalivetimeout integer value of valueof keep alive timeout keepalivetimeout socket tcp delay get tcp no delay gettcpnodelay socket properties socketproperties get tcp no delay gettcpnodelay set tcp no delay settcpnodelay tcp no delay tcpnodelay socket properties socketproperties set tcp no delay settcpnodelay tcp no delay tcpnodelay socket linger get so linger getsolinger socket properties socketproperties get so linger time getsolingertime set so linger setsolinger so linger solinger socket properties socketproperties set so linger time setsolingertime so linger solinger socket properties socketproperties set so linger on setsolingeron so linger solinger socket timeout get so timeout getsotimeout socket properties socketproperties get so timeout getsotimeout set so timeout setsotimeout so timeout sotimeout socket properties socketproperties set so timeout setsotimeout so timeout sotimeout ssl engine ssl enabled sslenabled issslenabled ssl enabled sslenabled setsslenabled ssl enabled sslenabled ssl enabled sslenabled ssl enabled sslenabled min spare threads minsparethreads get min spare threads getminsparethreads math min min spare threads minsparethreads get max threads getmaxthreads set min spare threads setminsparethreads min spare threads minsparethreads min spare threads minsparethreads min spare threads minsparethreads running executor executor java util concurrent thread pool executor threadpoolexecutor java util concurrent thread pool executor threadpoolexecutor executor set core pool size setcorepoolsize min spare threads minsparethreads executor resizable executor resizableexecutor resizable executor resizableexecutor executor resize pool resizepool min spare threads minsparethreads max threads maxthreads maximum amount worker threads max threads maxthreads set max threads setmaxthreads max threads maxthreads max threads maxthreads max threads maxthreads running executor executor java util concurrent thread pool executor threadpoolexecutor java util concurrent thread pool executor threadpoolexecutor executor set maximum pool size setmaximumpoolsize max threads maxthreads executor resizable executor resizableexecutor resizable executor resizableexecutor executor resize pool resizepool min spare threads minsparethreads max threads maxthreads get max threads getmaxthreads get max threads executor getmaxthreadsexecutor running get max threads executor getmaxthreadsexecutor use executor useexecutor use executor useexecutor executor executor java util concurrent thread pool executor threadpoolexecutor java util concurrent thread pool executor threadpoolexecutor executor get maximum pool size getmaximumpoolsize executor resizable executor resizableexecutor resizable executor resizableexecutor executor get max threads getmaxthreads max threads maxthreads max alive requests apache http d httpd server max keep alive requests maxkeepaliverequests get max keep alive requests getmaxkeepaliverequests max keep alive requests maxkeepaliverequests set max keep alive requests setmaxkeepaliverequests max keep alive requests maxkeepaliverequests max keep alive requests maxkeepaliverequests max keep alive requests maxkeepaliverequests maximum number headers request allowed limit apache http d httpd server max header count maxheadercount get max header count getmaxheadercount max header count maxheadercount set max header count setmaxheadercount max header count maxheadercount max header count maxheadercount max header count maxheadercount thread pool naming child threads string set name setname string string get name getname created threads daemon mode control thread daemon process alive daemon set daemon setdaemon daemon get daemon getdaemon daemon priority worker threads thread priority threadpriority thread norm priority set thread priority setthreadpriority thread priority threadpriority thread priority threadpriority thread priority threadpriority get thread priority getthreadpriority thread priority threadpriority get defer accept getdeferaccept attributes provide configuration passed components link org apache coyote protocol handler protocolhandler aware properties components component link org apache tomcat util net server socket factory serversocketfactory hash map hashmap string object attributes hash map hashmap string object property set ter setter called property specific set ter setter exists link org apache coyote protocol handler protocolhandler components specific set ter setter call method populate attributes set attribute setattribute string object get log getlog is trace enabled istraceenabled get log getlog trace get string getstring abstract protocol handler abstractprotocolhandler set attribute setattribute attributes components retrieve configuration object get attribute getattribute string key object attributes key get log getlog is trace enabled istraceenabled get log getlog trace get string getstring abstract protocol handler abstractprotocolhandler get attribute getattribute key set property setproperty string string set attribute setattribute string socket name socketname socket starts with startswith socket name socketname int rospection utils introspectionutils set property setproperty socket properties socketproperties substring socket name socketname length int rospection utils introspectionutils set property setproperty exception get log getlog error unable attribute string get property getproperty string string get attribute getattribute amount threads managed pool amount threads managed pool get current thread count getcurrentthreadcount executor executor thread pool executor threadpoolexecutor thread pool executor threadpoolexecutor executor get pool size getpoolsize executor resizable executor resizableexecutor resizable executor resizableexecutor executor get pool size getpoolsize amount threads amount threads get current threads busy getcurrentthreadsbusy executor executor thread pool executor threadpoolexecutor thread pool executor threadpoolexecutor executor get active count getactivecount executor resizable executor resizableexecutor resizable executor resizableexecutor executor get active count getactivecount is running isrunning running is paused ispaused paused create executor createexecutor internal executor internalexecutor task queue taskqueue task queue taskqueue task queue taskqueue task thread factory taskthreadfactory task thread factory taskthreadfactory get name getname exec daemon get thread priority getthreadpriority executor thread pool executor threadpoolexecutor get min spare threads getminsparethreads get max threads getmaxthreads time unit timeunit seconds task queue taskqueue task queue taskqueue set parent setparent thread pool executor threadpoolexecutor executor shutdown executor shutdownexecutor executor internal executor internalexecutor executor thread pool executor threadpoolexecutor internal shut thread pool executor threadpoolexecutor tpe thread pool executor threadpoolexecutor executor tpe shutdown now shutdownnow timeout get executor termination timeout millis getexecutorterminationtimeoutmillis timeout tpe await termination awaittermination timeout time unit timeunit milliseconds interrupted exception interruptedexception tpe is terminating isterminating get log getlog warn get string getstring endpoint warn executor shutdown executorshutdown get name getname task queue taskqueue queue task queue taskqueue tpe get queue getqueue queue set parent setparent executor unlock server socket accept bogus connection unlock accept unlockaccept unlock acceptor unlock required unlockrequired acceptor acceptor accept ors acceptors acceptor get state getstate acceptor state acceptorstate running unlock required unlockrequired unlock required unlockrequired java net socket inet socket address inetsocketaddress saddr create connection unlock accept address saddr inet socket address inetsocketaddress localhost get local port getlocalport saddr inet socket address inetsocketaddress address get local port getlocalport java net socket stmo utmo get socket properties getsocketproperties get so timeout getsotimeout stmo stmo get socket properties getsocketproperties get so timeout getsotimeout get socket properties getsocketproperties get unlock timeout getunlocktimeout utmo utmo get socket properties getsocketproperties get unlock timeout getunlocktimeout set so timeout setsotimeout stmo todo hard coding set so linger setsolinger set so linger setsolinger get socket properties getsocketproperties get so linger on getsolingeron get socket properties getsocketproperties get so linger time getsolingertime get log getlog is debug enabled isdebugenabled get log getlog debug unlock socket saddr connect saddr utmo get defer accept getdeferaccept deferred accept accept filters send data wake accept send options bypass bsd accept filters acceptor discard output stream writer outputstreamwriter output stream writer outputstreamwriter get output stream getoutputstream iso write options http user agent tomcat wakeup connection flush get log getlog is debug enabled isdebugenabled get log getlog debug socket unlock completed saddr wait upto acceptor threads unlock wait left waitleft acceptor acceptor accept ors acceptors wait left waitleft acceptor get state getstate acceptor state acceptorstate running thread sleep wait left waitleft exception get log getlog is debug enabled isdebugenabled get log getlog debug get string getstring endpoint debug unlock get port getport close exception request processing methods process socket async processsocketasync socket wrapper socketwrapper socket wrapper socketwrapper socket status socketstatus socket status socketstatus remove waiting request removewaitingrequest socket wrapper socketwrapper socket wrapper socketwrapper lifecycle methods note main tenance maintenance checking valid transitions ensuring bind unbind called place expected calling code main tain maintain prevent invalid transitions bind exception unbind exception start internal startinternal exception stop internal stopinternal exception init exception test server cipher suites order support testserverciphersuitesordersupport bind on init bindoninit bind bind state bindstate bind state bindstate bound init test server cipher suites order support testserverciphersuitesordersupport test feature user explicitly requested equals get use server cipher suites order getuseserverciphersuitesorder trim jre compat jrecompat is jre isjre unsupported operation exception unsupportedoperationexception get string getstring endpoint jsse cannot honor server cipher order cannothonorservercipherorder start exception bind state bindstate bind state bindstate unbound bind bind state bindstate bind state bindstate bound start start internal startinternal start acceptor threads startacceptorthreads count get acceptor thread count getacceptorthreadcount accept ors acceptors acceptor count count accept ors acceptors create acceptor createacceptor string thread name threadname get name getname acceptor accept ors acceptors set thread name setthreadname thread name threadname thread thread accept ors acceptors thread name threadname set priority setpriority get acceptor thread priority getacceptorthreadpriority set daemon setdaemon get daemon getdaemon start hook end points endpoints provide specific acceptor implementation acceptor create acceptor createacceptor pause endpoint accepting connections pause running paused paused unlock accept unlockaccept resume endpoint start accepting connections resume running paused exception stop internal stopinternal bind state bindstate bind state bindstate bound start unbind bind state bindstate bind state bindstate unbound destroy exception bind state bindstate bind state bindstate bound init unbind bind state bindstate bind state bindstate unbound log get log getlog flags optional feature support hard code d coded hard code d coded endpoint support config urable configurable get use sendfile getusesendfile get use comet getusecomet get use comet timeout getusecomettimeout get use polling getusepolling limit latch limitlatch initialize connection latch initializeconnectionlatch max connections maxconnections connection limit latch connectionlimitlatch connection limit latch connectionlimitlatch limit latch limitlatch get max connections getmaxconnections connection limit latch connectionlimitlatch release connection latch releaseconnectionlatch limit latch limitlatch latch connection limit latch connectionlimitlatch latch latch release all releaseall connection limit latch connectionlimitlatch count up or await connection countuporawaitconnection interrupted exception interruptedexception max connections maxconnections limit latch limitlatch latch connection limit latch connectionlimitlatch latch latch count up or await countuporawait count down connection countdownconnection max connections maxconnections limit latch limitlatch latch connection limit latch connectionlimitlatch latch result latch count down countdown result get log getlog warn incorrect connection count multiple socket close called socket result common app roach approach classes handle exceptions delay required prevent thread entering tight loop consume cpu trigger large amounts logging happen acceptor thread ulimit open files reached param current error delay currenterrordelay current delay applied failure delay apply failure handle exception with delay handleexceptionwithdelay current error delay currenterrordelay don delay exception current error delay currenterrordelay thread sleep current error delay currenterrordelay interrupted exception interruptedexception subsequent exception delay reaches seconds current error delay currenterrordelay initial error delay current error delay currenterrordelay max error delay current error delay currenterrordelay max error delay ssl properties string algorithm key manager factory keymanagerfactory get default algorithm getdefaultalgorithm string get algorithm getalgorithm algorithm set algorithm setalgorithm string algorithm string client auth clientauth string get client auth getclientauth client auth clientauth set client auth setclientauth string client auth clientauth string key store file keystorefile system get property getproperty user key store keystore string get key store file getkeystorefile key store file keystorefile set key store file setkeystorefile string key store file keystorefile string key store pass keystorepass string get key store pass getkeystorepass key store pass keystorepass set key store pass setkeystorepass string key store pass keystorepass string key store type keystoretype jks string get key store type getkeystoretype key store type keystoretype set key store type setkeystoretype string key store type keystoretype string key store provider keystoreprovider string get key store provider getkeystoreprovider key store provider keystoreprovider set key store provider setkeystoreprovider string key store provider keystoreprovider string ssl protocol sslprotocol constants ssl proto tls string get ssl protocol getsslprotocol ssl protocol sslprotocol set ssl protocol setsslprotocol string ssl protocol sslprotocol string ciphers string get ciphers getciphers ciphers set ciphers setciphers string ciphers string use server cipher suites order useserverciphersuitesorder string get use server cipher suites order getuseserverciphersuitesorder use server cipher suites order useserverciphersuitesorder set use server cipher suites order setuseserverciphersuitesorder string use server cipher suites order useserverciphersuitesorder string key alias keyalias string get key alias getkeyalias key alias keyalias set key alias setkeyalias string key alias keyalias string key pass keypass string get key pass getkeypass key pass keypass set key pass setkeypass string key pass keypass string truststore file truststorefile system get property getproperty javax net ssl trust store truststore string get truststore file gettruststorefile truststore file truststorefile set truststore file settruststorefile string truststore file truststorefile string truststore pass truststorepass system get property getproperty javax net ssl trust store password truststorepassword string get truststore pass gettruststorepass truststore pass truststorepass set truststore pass settruststorepass string truststore pass truststorepass truststore pass truststorepass truststore pass truststorepass string truststore type truststoretype system get property getproperty javax net ssl trust store type truststoretype string get truststore type gettruststoretype truststore type truststoretype set truststore type settruststoretype string truststore type truststoretype truststore type truststoretype truststore type truststoretype string truststore provider truststoreprovider string get truststore provider gettruststoreprovider truststore provider truststoreprovider set truststore provider settruststoreprovider string truststore provider truststoreprovider truststore provider truststoreprovider truststore provider truststoreprovider string truststore algorithm truststorealgorithm string get truststore algorithm gettruststorealgorithm truststore algorithm truststorealgorithm set truststore algorithm settruststorealgorithm string truststore algorithm truststorealgorithm truststore algorithm truststorealgorithm truststore algorithm truststorealgorithm string trust manager class name trustmanagerclassname string get trust manager class name gettrustmanagerclassname trust manager class name trustmanagerclassname set trust manager class name settrustmanagerclassname string trust manager class name trustmanagerclassname trust manager class name trustmanagerclassname trust manager class name trustmanagerclassname string crl file crlfile string get crl file getcrlfile crl file crlfile set crl file setcrlfile string crl file crlfile crl file crlfile crl file crlfile string trust max cert length trustmaxcertlength string get trust max cert length gettrustmaxcertlength trust max cert length trustmaxcertlength set trust max cert length settrustmaxcertlength string trust max cert length trustmaxcertlength trust max cert length trustmaxcertlength trust max cert length trustmaxcertlength string session cache size sessioncachesize string get session cache size getsessioncachesize session cache size sessioncachesize set session cache size setsessioncachesize string session cache size sessioncachesize string session timeout sessiontimeout string get session timeout getsessiontimeout session timeout sessiontimeout set session timeout setsessiontimeout string session timeout sessiontimeout string allow unsafe legacy renegotiation allowunsafelegacyrenegotiation string get allow unsafe legacy renegotiation getallowunsafelegacyrenegotiation allow unsafe legacy renegotiation allowunsafelegacyrenegotiation set allow unsafe legacy renegotiation setallowunsafelegacyrenegotiation string allow unsafe legacy renegotiation allowunsafelegacyrenegotiation string ssl enabled protocol sarr sslenabledprotocolsarr string string get ssl enabled protocols array getsslenabledprotocolsarray ssl enabled protocol sarr sslenabledprotocolsarr set ssl enabled protocols setsslenabledprotocols string ssl enabled protocol sarr sslenabledprotocolsarr string array list arraylist string ssl enabled protocols sslenabledprotocols array list arraylist string string tokenizer stringtokenizer string tokenizer stringtokenizer has more tokens hasmoretokens string next token nexttoken trim length ssl enabled protocols sslenabledprotocols add ssl enabled protocol sarr sslenabledprotocolsarr ssl enabled protocols sslenabledprotocols to array toarray string ssl enabled protocols sslenabledprotocols size config ures configures ssl engine sslengine honor cipher suites ordering based endpoint configuration invalid algorithm parameter exception invalidalgorithmparameterexception runtime jvm doesn support setting configure use server cipher suites order configureuseserverciphersuitesorder ssl engine sslengine engine string use server cipher suites order str useserverciphersuitesorderstr get use server cipher suites order getuseserverciphersuitesorder trim feature user explicitly requested equals use server cipher suites order str useserverciphersuitesorderstr use server cipher suites order useserverciphersuitesorder equals ignore case equalsignorecase use server cipher suites order str useserverciphersuitesorderstr equals ignore case equalsignorecase use server cipher suites order str useserverciphersuitesorderstr jre compat jrecompat jre compat jrecompat jre compat jrecompat get instance getinstance jre compat jrecompat set use server cipher suites order setuseserverciphersuitesorder engine use server cipher suites order useserverciphersuitesorder