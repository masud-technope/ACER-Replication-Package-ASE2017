licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes demos java serializable java util random org apache catalina tribes byte message bytemessage org apache catalina tribes channel org apache catalina tribes channel exception channelexception org apache catalina tribes channel listener channellistener org apache catalina tribes managed channel managedchannel org apache catalina tribes member org apache catalina tribes member ship listener membershiplistener org apache juli logging log org apache juli logging log factory logfactory title description comp any company author attr ibutable attributable version load test loadtest member ship listener membershiplistener channel listener channellistener runnable log log log factory logfactory get log getlog load test loadtest size object mutex object do run dorun bytes received bytesreceived m bytes received mbytesreceived messages received messagesreceived send debug msg count msgcount managed channel managedchannel channel stats interval statsinterval pause break on channel exception breakonchannelexception async receive start receivestart channel options channeloptions channel send options message size messagesize messages sent messagessent message start send time messagestartsendtime message end send time messageendsendtime thread count threadcount start test starttest thread count threadcount message start send time messagestartsendtime message start send time messagestartsendtime system current time millis currenttimemillis end test endtest thread count threadcount message end send time messageendsendtime thread count threadcount message end send time messageendsendtime system current time millis currenttimemillis add send stats addsendstats count messages sent messagessent count print send stats printsendstats counter message size messagesize cnt counter size message size messagesize time system current time millis currenttimemillis message start send time messagestartsendtime log info send stats thread current thread currentthread get name getname t message tmessage count counter t total ttotal bytes size cnt t total ttotal seconds time t bytes tbytes size cnt time tmbytes size cnt time load test loadtest managed channel managedchannel channel send msg count msgcount debug pause stats break on ex breakonex channel channel send send msg count msgcount msg count msgcount debug debug pause pause stats interval statsinterval stats break on channel exception breakonchannelexception break on ex breakonex override counter total load message loadmessage msg load message loadmessage start test starttest total msg count msgcount channel get members getmembers length send mutex mutex wait interrupted exception interruptedexception log info thread int errupted interrupted wait msg set msg nr setmsgnr total counter debug print array printarray msg get message getmessage channel send channel get members getmembers msg channel options channeloptions pause debug system println pausing sender pause thread sleep pause channel exception channelexception debug log error unable send message get message getmessage log error unable send message get message getmessage channel exception channelexception faulty member faultymember faulty get faulty members getfaultymembers faulty length log error faulty faulty counter break on channel exception breakonchannelexception counter stats interval statsinterval counter add global counter counter add send stats addsendstats counter print global counter print send stats printsendstats load test loadtest messages sent messagessent load test loadtest message size messagesize load test loadtest message send time messagesendtime print send stats printsendstats load test loadtest messages sent messagessent load test loadtest message size messagesize exception log error capture d captured error sending get message getmessage debug log error print send stats printsendstats load test loadtest messages sent messagessent load test loadtest message size messagesize end test endtest member added memberadded param member member todo implement org apache catalina tribes member ship listener membershiplistener method override member added memberadded member member log info member member mutex mutex notify all notifyall member disappeared memberdisappeared param member member todo implement org apache catalina tribes member ship listener membershiplistener method override member disappeared memberdisappeared member member log info member disappeared member override accept serializable msg member mbr msg load message loadmessage msg byte message bytemessage override message received messagereceived serializable msg member mbr receive start receivestart receive start receivestart system current time millis currenttimemillis debug msg load message loadmessage print array printarray load message loadmessage msg get message getmessage msg byte message bytemessage msg load message loadmessage load message loadmessage tmp load message loadmessage tmp set message setmessage byte message bytemessage msg get message getmessage msg tmp tmp bytes received bytesreceived load message loadmessage msg get message getmessage length m bytes received mbytesreceived load message loadmessage msg get message getmessage length messages received messagesreceived messages received messagesreceived stats interval statsinterval messages received messagesreceived msg count msgcount bytes load message loadmessage msg get message getmessage length messages received messagesreceived seconds system current time millis currenttimemillis receive start receivestart log info receive stats thread current thread currentthread get name getname t message tmessage count messages received messagesreceived t message tmessage messages received messagesreceived seconds t total ttotal bytes bytes t total ttotal mbytes m bytes received mbytesreceived t time ttime seconds seconds t bytes tbytes bytes seconds tmbytes m bytes received mbytesreceived seconds print array printarray data system print data length system print data system print system println size data length load message loadmessage byte message bytemessage out data outdata size random random get message size getmessagesize load message loadmessage msg msg get message getmessage length next bytes nextbytes out data outdata message get message getmessage load message loadmessage constructor override get message getmessage message message out data outdata message override set message setmessage data message data usage system println tribes load tester system println load tester sender received mode system println usage java load test loadtest options options mode receive send start options startoptions start flags startflags channel debug count message count messagecount stats stat interval statinterval pause nrofsecondstopausebetweensends threads number ofsenderthreads numberofsenderthreads size message size messagesize send options sendoptions channel options channeloptions halts execution exception shutdown issues channel command send completed t channel tchannel options channel creator channelcreator usage java load test loadtest port java load test loadtest bind port java load test loadtest bind port mbind count stats main string args exception send debug pause count stats break on ex breakonex threads shutdown start options startoptions channel channel options channeloptions channel send options args length args string args length threads equals args threads integer parse int parseint args count equals args count integer parse int parseint args system println sending count messages pause equals args pause parse long parselong args equals args break on ex breakonex shutdown equals args shutdown stats equals args stats integer parse int parseint args system println stats stats message send options sendoptions equals args channel options channeloptions integer parse int parseint args system println setting send options channel options channeloptions start options startoptions equals args start options startoptions integer parse int parseint args system println setting start options start options startoptions size equals args size integer parse int parseint args system println message size size bytes mode equals args receive equals args send debug equals args debug equals args usage system exit managed channel managedchannel channel managed channel managedchannel channel creator channelcreator create channel createchannel args load test loadtest test load test loadtest channel send count debug pause stats break on ex breakonex test channel options channeloptions channel options channeloptions load message loadmessage msg load message loadmessage message size messagesize load message loadmessage get message size getmessagesize msg channel add channel listener addchannellistener test channel add member ship listener addmembershiplistener test channel start start options startoptions runtime get runtime getruntime add shutdown hook addshutdownhook shutdown channel threads thread thread test set daemon setdaemon start threads test load test loadtest channel send count debug pause stats break on ex breakonex test channel options channeloptions channel options channeloptions test shutdown send channel channel system println system test complete sleeping threads finish thread sleep shutdown thread managed channel managedchannel channel shutdown managed channel managedchannel channel channel channel override system println shutting system exit systemexit exit system exit systemexit exit set daemon setdaemon exit start channel channel exception print stack trace printstacktrace system println channel stopped system exit systemexit thread delay system exit systemexit delay delay delay override thread sleep delay exception print stack trace printstacktrace system exit