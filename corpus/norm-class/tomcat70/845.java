licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license websocket chat java io exception ioexception java nio byte buffer bytebuffer java nio char buffer charbuffer java util java util concurrent copy on write array set copyonwritearrayset java util concurrent atomic atomic integer atomicinteger javax servlet http http servlet request httpservletrequest org apache catalina websocket message inbound messageinbound org apache catalina websocket stream inbound streaminbound org apache catalina websocket web socket servlet websocketservlet org apache catalina websocket ws outbound wsoutbound util html filter htmlfilter web socket servlet chat deprecated link websocket chat chat annotation chatannotation deprecated chat web socket servlet chatwebsocketservlet web socket servlet websocketservlet serialversionuid string guest prefix guest atomic integer atomicinteger connection ids connectionids atomic integer atomicinteger chat message inbound chatmessageinbound connections copy on write array set copyonwritearrayset chat message inbound chatmessageinbound override stream inbound streaminbound create web socket inbound createwebsocketinbound string sub protocol subprotocol http servlet request httpservletrequest request chat message inbound chatmessageinbound connection ids connectionids increment and get incrementandget chat message inbound chatmessageinbound message inbound messageinbound string nickname chat message inbound chatmessageinbound nickname guest prefix override on open onopen ws outbound wsoutbound out bound outbound connections add string message string format nickname joined broadcast message override on close onclose status connections remove string message string format nickname disconnected broadcast message override on binary message onbinarymessage byte buffer bytebuffer message io exception ioexception unsupported operation exception unsupportedoperationexception binary message supported override on text message ontextmessage char buffer charbuffer message io exception ioexception trust client string filtered message filteredmessage string format nickname html filter htmlfilter filter message to string tostring broadcast filtered message filteredmessage broadcast string message chat message inbound chatmessageinbound connection connections char buffer charbuffer buffer char buffer charbuffer wrap message connection get ws outbound getwsoutbound write text message writetextmessage buffer io exception ioexception ignore