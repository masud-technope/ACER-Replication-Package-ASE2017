licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache naming resources java file java util array list arraylist java util hash map hashmap java util hash set hashset java util list java util map java util java util string tokenizer stringtokenizer javax naming naming exception namingexception javax naming directory attributes org apache naming naming entry namingentry extended file dir context filedircontext implementation expose multiple directories file system filesystem single webapp feature development ide s ides conjunction link org apache catalina loader virtual webapp loader virtualwebapploader sample context xml configuration code context path mywebapp doc base docbase users the user theuser mywebapp src main webapp resources class name classname org apache naming resources virtual dir context virtualdircontext extra resource paths extraresourcepaths pictures users the user theuser mypictures movies users the user theuser mymovies loader class name classname org apache catalina loader virtual webapp loader virtualwebapploader virtual classpath virtualclasspath users the user theuser mywebapp target classes jar scanner jarscanner scan all dir ectories scanalldirectories context code strong meant product ion production meant ease development ide fully rep ublishing republishing jars web inf lib strong author fabrizio giustina virtual dir context virtualdircontext file dir context filedircontext string extra resource paths extraresourcepaths map string list string mapped resource paths mappedresourcepaths map path file system filesystem path webapp multiple file system filesystem paths mapped path webapp files ystem filesystem path virtual path separated equal sign pairs paths separated comma code users slaurent mywebapp src main webapp pictures users slaurent shared pictures sharedpictures code path doc base docbase resources listed param path set extra resource paths setextraresourcepaths string path extra resource paths extraresourcepaths path inherit doc inheritdoc override all ocate allocate all ocate allocate mapped resource paths mappedresourcepaths hash map hashmap string list string string tokenizer stringtokenizer tkn string tokenizer stringtokenizer extra resource paths extraresourcepaths tkn has more tokens hasmoretokens string res spec resspec tkn next token nexttoken res spec resspec length idx res spec resspec index of indexof string path idx path res spec resspec starts with startswith res spec resspec res spec resspec substring idx path res spec resspec substring idx string dir res spec resspec substring idx list string resource paths resourcepaths mapped resource paths mappedresourcepaths path resource paths resourcepaths resource paths resourcepaths array list arraylist string mapped resource paths mappedresourcepaths path resource paths resourcepaths resource paths resourcepaths add dir mapped resource paths mappedresourcepaths is empty isempty mapped resource paths mappedresourcepaths inherit doc inheritdoc override release mapped resource paths mappedresourcepaths release override attributes get attributes getattributes string naming exception namingexception naming exception namingexception initial exception initialexception normal processing fails extra resources attributes attributes get attributes getattributes attributes naming exception namingexception exc initial exception initialexception exc mapped resource paths mappedresourcepaths map entry string list string mapping mapped resource paths mappedresourcepaths entry set entryset string path mapping get key getkey list string dir list dirlist mapping get value getvalue string resources dir resourcesdir dir list dirlist equals path file file resources dir resourcesdir exists can read canread file resource attributes fileresourceattributes path starts with startswith path string res substring path length file file resources dir resourcesdir res exists can read canread file resource attributes fileresourceattributes initial exception initialexception override file file string file file file file mapped resource paths mappedresourcepaths file ensure string slash length char at charat map entry string list string mapping mapped resource paths mappedresourcepaths entry set entryset string path mapping get key getkey list string dir list dirlist mapping get value getvalue equals path string resources dir resourcesdir dir list dirlist file file resources dir resourcesdir file exists file can read canread file starts with startswith path string res substring path length string resources dir resourcesdir dir list dirlist file file resources dir resourcesdir res file exists file can read canread file override list naming entry namingentry list file file list naming entry namingentry entries list file mapped resource paths mappedresourcepaths mapped resource paths mappedresourcepaths is empty isempty string entry names entrynames hash set hashset string entries size naming entry namingentry entry entries entry names entrynames add entry add entries extra resource paths string abs path abspath file get absolute path getabsolutepath abs path abspath starts with startswith get doc base getdocbase file separator string rel path relpath abs path abspath substring get doc base getdocbase length string fs rel path fsrelpath rel path relpath replace file separator char separatorchar map entry string list string mapping mapped resource paths mappedresourcepaths entry set entryset string path mapping get key getkey list string dir list dirlist mapping get value getvalue string res fs rel path fsrelpath equals path res fs rel path fsrelpath starts with startswith path res rel path relpath substring path length res string resources dir resourcesdir dir list dirlist file file resources dir resourcesdir res exists can read canread is directory isdirectory list naming entry namingentry virt entries virtentries list naming entry namingentry entry virt entries virtentries filter duplicate entry names entrynames entry entry names entrynames add entry entries add entry entries override object do lookup dolookup string object ret super retsuper do lookup dolookup ret super retsuper mapped resource paths mappedresourcepaths ret super retsuper perform lookup extra resource paths map entry string list string mapping mapped resource paths mappedresourcepaths entry set entryset string path mapping get key getkey list string dir list dirlist mapping get value getvalue equals path string resources dir resourcesdir dir list dirlist file file resources dir resourcesdir exists can read canread is file isfile file resource fileresource directory implementation returned path starts with startswith path string res substring path length string resources dir resourcesdir dir list dirlist file file resources dir resourcesdir res exists can read canread is file isfile file resource fileresource directory implementation returned ret super retsuper override string do get real path dogetrealpath string path file file file path file file get absolute path getabsolutepath