licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache coyote java security access controller accesscontroller java security privileged action privilegedaction org apache tomcat util net abstract endpoint abstractendpoint handler socket state socketstate org apache tomcat util res string manager stringmanager org apache tomcat util security privileged get tccl privilegedgettccl org apache tomcat util security privileged set tccl privilegedsettccl manages transitions async requests pre internal dispatched standard request async mode starting servlet request servletrequest start async startasync called request call finished processing started servlet request servletrequest start async startasync called request call finished processing complete complete called request servlet request servletrequest start async startasync finished request fin is hes finishes complete processed completing call complete request started triggered container thread depends start runnable timing async request time d timed waiting call complete isn error entered dispatch dispatch called container thread dispatch processed processing control returns container dispatching dispatch called container thread dispatch processed container thread error wrong error complete dispatch timeout post process postprocess auto dispatched completing start async startasync timeout post process postprocess complete starting complete dispatch dispatch started auto dispatch auto auto dispatching timing dispatch complete error pre async state machine asyncstatemachine string manager string manager stringmanager string manager stringmanager get manager getmanager constants enum async state asyncstate dispatched starting started complete completing timing dispatch dispatching error is async isasync is started isstarted is completing iscompleting is dispatching isdispatching pause non container thread pausenoncontainerthread async state asyncstate is async isasync is started isstarted is completing iscompleting is dispatching isdispatching pause non container thread pausenoncontainerthread is async isasync is async isasync is started isstarted is started isstarted is completing iscompleting is completing iscompleting is dispatching isdispatching is dispatching isdispatching pause non container thread pausenoncontainerthread pause non container thread pausenoncontainerthread is async isasync is async isasync is started isstarted is started isstarted is dispatching isdispatching is dispatching isdispatching is completing iscompleting is completing iscompleting get pause non container thread getpausenoncontainerthread pause non container thread pausenoncontainerthread async state asyncstate async state asyncstate dispatched fire listener complete async context callback asynccontextcallback async ctxt asyncctxt processor processor async state machine asyncstatemachine processor processor processor processor is async isasync is async isasync is async dispatching isasyncdispatching is dispatching isdispatching is async started isasyncstarted is started isstarted is async timing out isasynctimingout async state asyncstate timing is async error isasyncerror async state asyncstate error is completing iscompleting is completing iscompleting async start asyncstart async context callback asynccontextcallback async ctxt asyncctxt async state asyncstate dispatched async state asyncstate starting async ctxt asyncctxt async ctxt asyncctxt illegal state exception illegalstateexception get string getstring async state machine asyncstatemachine invalid async state invalidasyncstate async start asyncstart async processed enter poll depends current srv process calls complete dispatch socket state socketstate async post process asyncpostprocess unpause container threads waiting container thread complete method note syncs container threads won start method exits notify all notifyall async state asyncstate starting async state asyncstate started socket state socketstate async state asyncstate complete async ctxt asyncctxt fire on complete fireoncomplete async state asyncstate dispatched socket state socketstate async async state asyncstate completing async ctxt asyncctxt fire on complete fireoncomplete async state asyncstate dispatched socket state socketstate async async state asyncstate dispatch async state asyncstate dispatching socket state socketstate async async state asyncstate dispatching async state asyncstate dispatched socket state socketstate async async state asyncstate started servlet on timeout ontimeout socket state socketstate illegal state exception illegalstateexception get string getstring async state machine asyncstatemachine invalid async state invalidasyncstate async post process asyncpostprocess async complete asynccomplete pause non container thread pausenoncontainerthread do complete docomplete async state asyncstate starting async state asyncstate complete async state asyncstate started async state asyncstate completing do complete docomplete async state asyncstate timing async state asyncstate error async state asyncstate complete illegal state exception illegalstateexception get string getstring async state machine asyncstatemachine invalid async state invalidasyncstate async complete asynccomplete do complete docomplete async timeout asynctimeout async state asyncstate started async state asyncstate timing async state asyncstate completing async state asyncstate dispatching async state asyncstate dispatched timeout firing execution reaching point illegal state exception illegalstateexception get string getstring async state machine asyncstatemachine invalid async state invalidasyncstate async timeout asynctimeout async dispatch asyncdispatch pause non container thread pausenoncontainerthread do dispatch dodispatch async state asyncstate starting async state asyncstate timing async state asyncstate error cases processing container thread transfer processing container thread async state asyncstate dispatch async state asyncstate started dispatch required container thread container thread complete processing container thread current request response request response async context asynccontext container thread process request response async state asyncstate dispatching do dispatch dodispatch illegal state exception illegalstateexception get string getstring async state machine asyncstatemachine invalid async state invalidasyncstate async dispatch asyncdispatch do dispatch dodispatch async dispatched asyncdispatched async state asyncstate dispatching async state asyncstate dispatch async state asyncstate dispatched illegal state exception illegalstateexception get string getstring async state machine asyncstatemachine invalid async state invalidasyncstate async dispatched asyncdispatched async error asyncerror do dispatch dodispatch async state asyncstate starting async state asyncstate dispatched async state asyncstate timing async state asyncstate complete async state asyncstate error illegal state exception illegalstateexception get string getstring async state machine asyncstatemachine invalid async state invalidasyncstate async error asyncerror do dispatch dodispatch async run asyncrun runnable runnable async state asyncstate starting async state asyncstate started execute runnable container thread connector thread pool wrapper prevent memory leak class loader classloader oldcl constants security enabled privileged action privilegedaction class loader classloader privileged get tccl privilegedgettccl oldcl access controller accesscontroller do privileged doprivileged oldcl thread current thread currentthread get context class loader getcontextclassloader constants security enabled privileged action privilegedaction privileged set tccl privilegedsettccl get class getclass get class loader getclassloader access controller accesscontroller do privileged doprivileged thread current thread currentthread set context class loader setcontextclassloader get class getclass get class loader getclassloader processor get executor getexecutor execute runnable constants security enabled privileged action privilegedaction privileged set tccl privilegedsettccl oldcl access controller accesscontroller do privileged doprivileged thread current thread currentthread set context class loader setcontextclassloader oldcl illegal state exception illegalstateexception get string getstring async state machine asyncstatemachine invalid async state invalidasyncstate async run asyncrun recycle ensure error container threads paused unpaused notify all notifyall async ctxt asyncctxt async state asyncstate dispatched start async startasync called container thread called completed processing avoid race conditions including error handling pause container thread container thread finished processing container thread paused container thread completes async post process asyncpostprocess pause non container thread pausenoncontainerthread container thread marker containerthreadmarker is container thread iscontainerthread get pause non container thread getpausenoncontainerthread wait interrupted exception interruptedexception