licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes group int erceptors interceptors java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java util zip gzip input stream gzipinputstream java util zip gzip output stream gzipoutputstream org apache catalina tribes channel exception channelexception org apache catalina tribes channel message channelmessage org apache catalina tribes member org apache catalina tribes group channel interceptor base channelinterceptorbase org apache catalina tribes group interceptor payload interceptorpayload org apache juli logging log org apache juli logging log factory logfactory author filip hanik version gzip interceptor gzipinterceptor channel interceptor base channelinterceptorbase log log log factory logfactory get log getlog gzip interceptor gzipinterceptor buffer size override send message sendmessage member destination channel message channelmessage msg interceptor payload interceptorpayload payload channel exception channelexception data compress msg get message getmessage get bytes getbytes msg get message getmessage trim msg get message getmessage get length getlength msg get message getmessage append data data length get next getnext send message sendmessage destination msg payload io exception ioexception log error unable compress contents channel exception channelexception override message received messagereceived channel message channelmessage msg data decompress msg get message getmessage get bytes getbytes msg get message getmessage trim msg get message getmessage get length getlength msg get message getmessage append data data length get previous getprevious message received messagereceived msg io exception ioexception log error unable decompress contents compress data io exception ioexception byte array output stream bytearrayoutputstream bout byte array output stream bytearrayoutputstream gzip output stream gzipoutputstream gout gzip output stream gzipoutputstream bout gout write data gout flush gout close bout to byte array tobytearray param data data decompress dec ompressed decompressed data io exception ioexception decompress data io exception ioexception byte array output stream bytearrayoutputstream bout byte array output stream bytearrayoutputstream buffer size byte array input stream bytearrayinputstream bin byte array input stream bytearrayinputstream data gzip input stream gzipinputstream gin gzip input stream gzipinputstream bin tmp buffer size length gin read tmp length bout write tmp length length gin read tmp bout to byte array tobytearray