licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina servlets java buffered input stream bufferedinputstream java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java file java file input stream fileinputstream java file not found exception filenotfoundexception java i o exception ioexception java input stream inputstream java input stream reader inputstreamreader java output stream writer outputstreamwriter java print writer printwriter java random access file randomaccessfile java reader java string reader stringreader java string writer stringwriter java security access controller accesscontroller java util array list arraylist java util iterator java util locale java util string tokenizer stringtokenizer javax naming initial context initialcontext javax naming name class pair nameclasspair javax naming naming enumeration namingenumeration javax naming naming exception namingexception javax naming directory dir context dircontext javax servlet dispatcher type dispatchertype javax servlet request dispatcher requestdispatcher javax servlet servlet context servletcontext javax servlet servlet exception servletexception javax servlet servlet output stream servletoutputstream javax servlet servlet response servletresponse javax servlet servlet response wrapper servletresponsewrapper javax servlet unavailable exception unavailableexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax xml parsers document builder documentbuilder javax xml parsers document builder factory documentbuilderfactory javax xml parsers parser configuration exception parserconfigurationexception javax xml transform source javax xml transform transformer javax xml transform transformer exception transformerexception javax xml transform transformer factory transformerfactory javax xml transform dom dom source domsource javax xml transform stream stream result streamresult javax xml transform stream stream source streamsource org apache catalina globals org apache catalina connector request facade requestfacade org apache catalina connector response facade responsefacade org apache catalina util request util requestutil org apache catalina util server info serverinfo org apache catalina util url encoder urlencoder org apache naming resources cache entry cacheentry org apache naming resources proxy dir context proxydircontext org apache naming resources resource org apache naming resources resource attributes resourceattributes org apache tomcat util res string manager stringmanager org apache tomcat util security privileged get tccl privilegedgettccl org apache tomcat util security privileged set tccl privilegedsettccl org dom document org xml sax input source inputsource org xml sax sax exception saxexception org xml sax ext entity resolver entityresolver resource serving servlet web applications serve resources html images servlet intended mapped pre servlet mapping servlet servlet url pattern url pattern servlet mapping pre mapped paths cases resources served web app plication appplication resource root full path root web application context web application structure pre context images tomcat jpg images tomcat jpg pre servlet mapping maps code code servlet pre servlet mapping servlet servlet url pattern url pattern servlet mapping pre request code context images tomcat jpg code succeed request code context images tomcat jpg code fail author craig mc clanahan mcclanahan author remy maucherat default servlet defaultservlet http servlet httpservlet serialversionuid document builder factory documentbuilderfactory factory secure entity resolver secureentityresolver secure entity resolver secureentityresolver instance variables debug ging debugging detail level servlet debug input buffer size serving resources input generate directory list ings listings list ings listings read flag read only readonly output buffer size serving resources output array safe characters url encoder urlencoder url encoder urlencoder custom ized customized directory listing directory string local xslt file localxsltfile custom ized customized directory listing context string context xslt file contextxsltfile custom ized customized directory listing instance string global xslt file globalxsltfile readme file included string readme file readmefile proxy directory context proxy dir context proxydircontext resources file encoding reading files platform string file encoding fileencoding minimum size sendfile usage bytes sendfile size sendfilesize accept ranges bytes header send resources use accept ranges useacceptranges full range marker array list arraylist range full array list arraylist range flag determine server presented show server info showserverinfo gmt time zone timezone http dates gmt url encoder urlencoder url encoder urlencoder url encoder urlencoder add safe character addsafecharacter url encoder urlencoder add safe character addsafecharacter url encoder urlencoder add safe character addsafecharacter url encoder urlencoder add safe character addsafecharacter url encoder urlencoder add safe character addsafecharacter globals security enabled factory document builder factory documentbuilderfactory new instance newinstance factory set name space aware setnamespaceaware factory set valid ating setvalidating secure entity resolver secureentityresolver secure entity resolver secureentityresolver factory secure entity resolver secureentityresolver mime multipart sep aration separation string string mime separation mimeseparation catalina mime boundary jndi resources string resources jndi java comp resources string manager string manager stringmanager string manager stringmanager get manager getmanager constants size file transfer buffer bytes buffer size methods finalize servlet override destroy noop initialize servlet override init servlet exception servletexception get servlet config getservletconfig get init parameter getinitparameter debug debug integer parse int parseint get servlet config getservletconfig get init parameter getinitparameter debug get servlet config getservletconfig get init parameter getinitparameter input input integer parse int parseint get servlet config getservletconfig get init parameter getinitparameter input get servlet config getservletconfig get init parameter getinitparameter output output integer parse int parseint get servlet config getservletconfig get init parameter getinitparameter output list ings listings parse boolean parseboolean get servlet config getservletconfig get init parameter getinitparameter list ings listings get servlet config getservletconfig get init parameter getinitparameter read only readonly read only readonly parse boolean parseboolean get servlet config getservletconfig get init parameter getinitparameter read only readonly get servlet config getservletconfig get init parameter getinitparameter sendfile size sendfilesize sendfile size sendfilesize integer parse int parseint get servlet config getservletconfig get init parameter getinitparameter sendfile size sendfilesize file encoding fileencoding get servlet config getservletconfig get init parameter getinitparameter file encoding fileencoding global xslt file globalxsltfile get servlet config getservletconfig get init parameter getinitparameter global xslt file globalxsltfile context xslt file contextxsltfile get servlet config getservletconfig get init parameter getinitparameter context xslt file contextxsltfile local xslt file localxsltfile get servlet config getservletconfig get init parameter getinitparameter local xslt file localxsltfile readme file readmefile get servlet config getservletconfig get init parameter getinitparameter readme file readmefile get servlet config getservletconfig get init parameter getinitparameter use accept ranges useacceptranges use accept ranges useacceptranges parse boolean parseboolean get servlet config getservletconfig get init parameter getinitparameter use accept ranges useacceptranges sanity check buffer sizes input input output output debug log default servlet defaultservlet init input buffer size input output buffer size output load proxy dir context resources proxy dir context proxydircontext get servlet context getservletcontext get attribute getattribute globals resources attr resources resources proxy dir context proxydircontext initial context initialcontext lookup resources jndi naming exception namingexception servlet exception servletexception resources resources unavailable exception unavailableexception resources get servlet config getservletconfig get init parameter getinitparameter show server info showserverinfo show server info showserverinfo parse boolean parseboolean get servlet config getservletconfig get init parameter getinitparameter show server info showserverinfo methods relative path servlet param request servlet request processing string get relative path getrelativepath http servlet request httpservletrequest request get relative path getrelativepath request string get relative path getrelativepath http servlet request httpservletrequest request allow empty path allowemptypath default servlet defaultservlet mapped path serves resources web app root context rooted paths mount web app root path method construct complete context rooted path subclasses change behaviour string servlet path servletpath string path info pathinfo request get attribute getattribute request dispatcher requestdispatcher include request uri includes info attributes path info pathinfo string request get attribute getattribute request dispatcher requestdispatcher include path info servlet path servletpath string request get attribute getattribute request dispatcher requestdispatcher include servlet path path info pathinfo request get path info getpathinfo servlet path servletpath request get servlet path getservletpath string builder stringbuilder result string builder stringbuilder servlet path servletpath length result append servlet path servletpath path info pathinfo result append path info pathinfo result length allow empty path allowemptypath result append result to string tostring determines path prepend resources gen erating generating directory list ings listings depending behaviour link get relative path getrelativepath http servlet request httpservletrequest change param request request determine path prefix apply resources listing string get path prefix getpathprefix http servlet request httpservletrequest request request get context path getcontextpath process request resource param request servlet request processing param response servlet response creating exception i o exception ioexception input output error occurs exception servlet exception servletexception servlet error occurs override do get doget http servlet request httpservletrequest request http servlet response httpservletresponse response i o exception ioexception servlet exception servletexception serve requested resource including data content serve resource serveresource request response process head request resource param request servlet request processing param response servlet response creating exception i o exception ioexception input output error occurs exception servlet exception servletexception servlet error occurs override do head dohead http servlet request httpservletrequest request http servlet response httpservletresponse response i o exception ioexception servlet exception servletexception serve requested resource data content included content correct content length reported including resource serve content servecontent dispatcher type dispatchertype include equals request get dispatcher type getdispatchertype serve resource serveresource request response serve content servecontent override implementation ensure trace correctly handled param req link http servlet request httpservletrequest object request client servlet param resp link http servlet response httpservletresponse object response servlet returns client exception i o exception ioexception input output error occurs servlet handling options request exception servlet exception servletexception request options handled override do options dooptions http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception i o exception ioexception string builder stringbuilder string builder stringbuilder do get doget method append head do post dopost append post do put doput append do delete dodelete append delete trace assume disabled pro ve prove req request facade requestfacade request facade requestfacade req get allow trace getallowtrace append trace options append options resp set header setheader to string tostring process post request resource param request servlet request processing param response servlet response creating exception i o exception ioexception input output error occurs exception servlet exception servletexception servlet error occurs override do post dopost http servlet request httpservletrequest request http servlet response httpservletresponse response i o exception ioexception servlet exception servletexception do get doget request response process request resource param req servlet request processing param resp servlet response creating exception i o exception ioexception input output error occurs exception servlet exception servletexception servlet error occurs override do put doput http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception i o exception ioexception read only readonly resp send error senderror http servlet response httpservletresponse forbidden string path get relative path getrelativepath req exists resources lookup path naming exception namingexception exists result temp content file support partial file content file contentfile range range parse content range parsecontentrange req resp input stream inputstream resource input stream resourceinputstream assume range range content file contentfile execute partial put executepartialput req range path resource input stream resourceinputstream file input stream fileinputstream content file contentfile resource input stream resourceinputstream req get input stream getinputstream resource new resource newresource resource resource input stream resourceinputstream fixme add attributes exists resources rebind path new resource newresource resources bind path new resource newresource naming exception namingexception result result exists resp set status setstatus http servlet response httpservletresponse content resp set status setstatus http servlet response httpservletresponse created resp send error senderror http servlet response httpservletresponse conflict handle partial content request appended existing content old revision content oldrevisioncontent code support simultaneous partial updates resource file execute partial put executepartialput http servlet request httpservletrequest req range range string path i o exception ioexception append data ranges existing content resource create temp file local file system filesystem perform operation file temp dir tempdir file get servlet context getservletcontext get attribute getattribute servlet context servletcontext temp dir tempdir convert characters resource path resourcepath string converted resource path convertedresourcepath path replace file content file contentfile file temp dir tempdir converted resource path convertedresourcepath content file contentfile create new file createnewfile clean content file contentfile tomcat terminated content file contentfile delete on exit deleteonexit random access file randomaccessfile rand access content file randaccesscontentfile rand access content file randaccesscontentfile random access file randomaccessfile content file contentfile resource old resource oldresource object obj resources lookup path obj resource old resource oldresource resource obj naming exception namingexception copy data old revision content oldrevisioncontent content file contentfile old resource oldresource buffered input stream bufferedinputstream buf old rev stream bufoldrevstream buf old rev stream bufoldrevstream buffered input stream bufferedinputstream old resource oldresource stream content streamcontent buffer size num bytes read numbytesread copy buffer copybuffer buffer size num bytes read numbytesread buf old rev stream bufoldrevstream read copy buffer copybuffer rand access content file randaccesscontentfile write copy buffer copybuffer num bytes read numbytesread buf old rev stream bufoldrevstream buf old rev stream bufoldrevstream close i o exception ioexception rand access content file randaccesscontentfile set length setlength range length append data request input stream content file contentfile rand access content file randaccesscontentfile see k seek range start num bytes read numbytesread transfer buffer transferbuffer buffer size buffered input stream bufferedinputstream request buf in stream requestbufinstream request buf in stream requestbufinstream buffered input stream bufferedinputstream req get input stream getinputstream buffer size num bytes read numbytesread request buf in stream requestbufinstream read transfer buffer transferbuffer rand access content file randaccesscontentfile write transfer buffer transferbuffer num bytes read numbytesread request buf in stream requestbufinstream request buf in stream requestbufinstream close i o exception ioexception rand access content file randaccesscontentfile rand access content file randaccesscontentfile close i o exception ioexception content file contentfile process delete request resource param req servlet request processing param resp servlet response creating exception i o exception ioexception input output error occurs exception servlet exception servletexception servlet error occurs override do delete dodelete http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception i o exception ioexception read only readonly resp send error senderror http servlet response httpservletresponse forbidden string path get relative path getrelativepath req exists resources lookup path naming exception namingexception exists exists result resources unbind path naming exception namingexception result result resp set status setstatus http servlet response httpservletresponse content resp send error senderror http servlet response httpservletresponse method all owed allowed resp send error senderror http servlet response httpservletresponse check conditions optional headers satisfied param request servlet request processing param response servlet response creating param resource attributes resourceattributes resource resource meets conditions conditions satisfied request processing stopped check if headers checkifheaders http servlet request httpservletrequest request http servlet response httpservletresponse response resource attributes resourceattributes resource attributes resourceattributes i o exception ioexception check if match checkifmatch request response resource attributes resourceattributes check if modified since checkifmodifiedsince request response resource attributes resourceattributes check if non e match checkifnonematch request response resource attributes resourceattributes check if unmodified since checkifunmodifiedsince request response resource attributes resourceattributes url rewriter param path path rewritten string rewrite url rewriteurl string path url encoder urlencoder encode path utf display size file deprecated removed tomcat replaced link render size rendersize deprecated display size displaysize string builder stringbuilder buf file size filesize left side leftside file size filesize digit right side rightside file size filesize avoid file bump left side leftside right side rightside file size filesize right side rightside buf append left side leftside append append right side rightside buf append serve resource option ally optionally including data content param request servlet request processing param response servlet response creating param content content included exception i o exception ioexception input output error occurs exception servlet exception servletexception servlet error occurs serve resource serveresource http servlet request httpservletrequest request http servlet response httpservletresponse response content i o exception ioexception servlet exception servletexception serve content servecontent content identify requested resource path string path get relative path getrelativepath request debug serve content servecontent log default servlet defaultservlet serve resource serveresource serving resource path headers data log default servlet defaultservlet serve resource serveresource serving resource path headers path length context root redirect do directory redirect dodirectoryredirect request response cache entry cacheentry cache entry cacheentry resources lookup cache lookupcache path cache entry cacheentry exists check included missing resource error string request uri requesturi string request get attribute getattribute request dispatcher requestdispatcher include request uri request uri requesturi request uri requesturi request getrequesturi srv fnfe file not found exception filenotfoundexception get string getstring default servlet defaultservlet missing resource missingresource request uri requesturi response send error senderror http servlet response httpservletresponse request uri requesturi ends cache entry cacheentry context path ends with endswith path ends with endswith string request uri requesturi string request get attribute getattribute request dispatcher requestdispatcher include request uri request uri requesturi request uri requesturi request getrequesturi response send error senderror http servlet response httpservletresponse request uri requesturi is error iserror response get status getstatus http servlet response httpservletresponse bad request cache entry cacheentry context included request get attribute getattribute request dispatcher requestdispatcher include context path included is error iserror check if headers checkifheaders request response cache entry cacheentry attributes string content type contenttype cache entry cacheentry attributes get mime type getmimetype content type contenttype content type contenttype get servlet context getservletcontext get mime type getmimetype cache entry cacheentry cache entry cacheentry attributes set mime type setmimetype content type contenttype array list arraylist range ranges content length contentlength cache entry cacheentry context path ends with endswith do directory redirect dodirectoryredirect request response list ings listings response send error senderror http servlet response httpservletresponse request getrequesturi content type contenttype text html charset utf is error iserror use accept ranges useacceptranges response set header setheader accept ranges bytes ranges parse range parserange request response cache entry cacheentry attributes response set header setheader e tag etag cache entry cacheentry attributes getetag response set header setheader modified cache entry cacheentry attributes get last modified http getlastmodifiedhttp content length contentlength cache entry cacheentry attributes get content length getcontentlength content length contentlength serve content servecontent servlet output stream servletoutputstream ostream print writer printwriter writer serve content servecontent ostream response get output stream getoutputstream illegal state exception illegalstateexception content type contenttype content type contenttype starts with startswith text content type contenttype ends with endswith xml content type contenttype java script javascript writer response get writer getwriter ranges full servlet response servletresponse response content written contentwritten servlet response wrapper servletresponsewrapper servlet response wrapper servletresponsewrapper get response getresponse response facade responsefacade content written contentwritten response facade responsefacade get content written getcontentwritten content written contentwritten ranges full cache entry cacheentry context is error iserror ranges ranges is empty isempty request get header getheader range ranges full content type contenttype debug log default servlet defaultservlet serve file servefile content type contenttype content type contenttype response set content type setcontenttype content type contenttype cache entry cacheentry resource content length contentlength serve content servecontent ostream debug log default servlet defaultservlet serve file servefile content length contentlength content length contentlength content written contentwritten content length contentlength integer max response set content length setcontentlength content length contentlength response set header setheader content length content length contentlength input stream inputstream render result renderresult cache entry cacheentry context serve content servecontent render result renderresult render get path prefix getpathprefix request cache entry cacheentry serve content servecontent response set buffer size setbuffersize output illegal state exception illegalstateexception ostream check sendfile checksendfile request response cache entry cacheentry content length contentlength copy cache entry cacheentry render result renderresult ostream copy cache entry cacheentry render result renderresult writer ranges ranges is empty isempty response set status setstatus http servlet response httpservletresponse partial content ranges size range range ranges response add header addheader content range bytes range start range range length length range range start length integer max response set content length setcontentlength length response set header setheader content length length content type contenttype debug log default servlet defaultservlet serve file servefile content type contenttype content type contenttype response set content type setcontenttype content type contenttype serve content servecontent response set buffer size setbuffersize output illegal state exception illegalstateexception ostream check sendfile checksendfile request response cache entry cacheentry range range start range copy cache entry cacheentry ostream range illegal state exception illegalstateexception response set content type setcontenttype multipart byte ranges byteranges boundary mime separation mimeseparation serve content servecontent response set buffer size setbuffersize output illegal state exception illegalstateexception ostream copy cache entry cacheentry ostream ranges iterator content type contenttype illegal state exception illegalstateexception do directory redirect dodirectoryredirect http servlet request httpservletrequest request http servlet response httpservletresponse response i o exception ioexception string builder stringbuilder location string builder stringbuilder request getrequesturi location append request get query string getquerystring location append location append request get query string getquerystring response send redirect sendredirect response encoderedirecturl location to string tostring range parse content range parsecontentrange http servlet request httpservletrequest request http servlet response httpservletresponse response i o exception ioexception string range header rangeheader request get header getheader content range range header rangeheader range header rangeheader starts with startswith bytes response send error senderror http servlet response httpservletresponse bad request range header rangeheader range header rangeheader substring trim dash pos dashpos range header rangeheader index of indexof slash pos slashpos range header rangeheader index of indexof dash pos dashpos response send error senderror http servlet response httpservletresponse bad request slash pos slashpos response send error senderror http servlet response httpservletresponse bad request range range range range start parse long parselong range header rangeheader substring dash pos dashpos range parse long parselong range header rangeheader substring dash pos dashpos slash pos slashpos range length parse long parselong range header rangeheader substring slash pos slashpos range header rangeheader length number format exception numberformatexception response send error senderror http servlet response httpservletresponse bad request range validate response send error senderror http servlet response httpservletresponse bad request range array list arraylist range parse range parserange http servlet request httpservletrequest request http servlet response httpservletresponse response resource attributes resourceattributes resource attributes resourceattributes i o exception ioexception string header value headervalue request get header getheader range header value headervalue header value time headervaluetime header value time headervaluetime request get date header getdateheader range illegal argument exception illegalargumentexception string e tag etag resource attributes resourceattributes getetag last modified lastmodified resource attributes resourceattributes get last modified getlastmodified header value time headervaluetime e tag etag equals header value headervalue trim full last modified lastmodified header value time headervaluetime full file length filelength resource attributes resourceattributes get content length getcontentlength file length filelength string range header rangeheader request get header getheader range range header rangeheader range header rangeheader starts with startswith bytes response add header addheader content range bytes file length filelength response send error senderror http servlet response httpservletresponse requested range satisfiable range header rangeheader range header rangeheader substring array list arraylist range result array list arraylist range string tokenizer stringtokenizer comma tokenizer commatokenizer string tokenizer stringtokenizer range header rangeheader comma tokenizer commatokenizer has more tokens hasmoretokens string range definition rangedefinition comma tokenizer commatokenizer next token nexttoken trim range current range currentrange range current range currentrange length file length filelength dash pos dashpos range definition rangedefinition index of indexof dash pos dashpos response add header addheader content range bytes file length filelength response send error senderror http servlet response httpservletresponse requested range satisfiable dash pos dashpos offset parse long parselong range definition rangedefinition current range currentrange start file length filelength offset current range currentrange file length filelength number format exception numberformatexception response add header addheader content range bytes file length filelength response send error senderror http servlet response httpservletresponse requested range satisfiable current range currentrange start parse long parselong range definition rangedefinition substring dash pos dashpos dash pos dashpos range definition rangedefinition length current range currentrange parse long parselong range definition rangedefinition substring dash pos dashpos range definition rangedefinition length current range currentrange file length filelength number format exception numberformatexception response add header addheader content range bytes file length filelength response send error senderror http servlet response httpservletresponse requested range satisfiable current range currentrange validate response add header addheader content range bytes file length filelength response send error senderror http servlet response httpservletresponse requested range satisfiable result add current range currentrange result input stream inputstream render string context path contextpath cache entry cacheentry cache entry cacheentry i o exception ioexception servlet exception servletexception source xslt source xsltsource find xslt input stream findxsltinputstream cache entry cacheentry context xslt source xsltsource render html renderhtml context path contextpath cache entry cacheentry render xml renderxml context path contextpath cache entry cacheentry xslt source xsltsource input stream inputstream render xml renderxml string context path contextpath cache entry cacheentry cache entry cacheentry source xslt source xsltsource i o exception ioexception servlet exception servletexception string builder stringbuilder string builder stringbuilder append xml version append listing append context path contextpath append context path contextpath append append directory append cache entry cacheentry append append has parent hasparent append cache entry cacheentry equals append append entries render directory entries directory naming enumeration namingenumeration name class pair nameclasspair enumeration resources list cache entry cacheentry rewrite url rewriteurl context path contextpath expensive cache result reuse string rewritten context path rewrittencontextpath rewrite url rewriteurl context path contextpath enumeration has more elements hasmoreelements name class pair nameclasspair nc pair ncpair enumeration next element nextelement string resource name resourcename nc pair ncpair get name getname string trimmed resource name resourcename trimmed equals ignore case equalsignorecase web inf trimmed equals ignore case equalsignorecase meta inf trimmed equals ignore case equalsignorecase local xslt file localxsltfile cache entry cacheentry trimmed equals context xslt file contextxsltfile cache entry cacheentry child cache entry childcacheentry resources lookup cache lookupcache cache entry cacheentry resource name resourcename child cache entry childcacheentry exists append entry append type append child cache entry childcacheentry context dir file append append url path urlpath append rewritten context path rewrittencontextpath append rewrite url rewriteurl cache entry cacheentry resource name resourcename append child cache entry childcacheentry context append child cache entry childcacheentry resource append size append render size rendersize child cache entry childcacheentry attributes get content length getcontentlength append append append child cache entry childcacheentry attributes get last modified http getlastmodifiedhttp append append append request util requestutil filter trimmed child cache entry childcacheentry context append append entry naming exception namingexception servlet exception servletexception error accessing resource append entries string readme get read me getreadme cache entry cacheentry context readme append readme cdata append readme append readme append listing prevent memory leak ensure transformer transformer factory transformerfactory loaded web application class loader classloader original globals security enabled privileged get tccl privilegedgettccl privileged get tccl privilegedgettccl original access controller accesscontroller do privileged doprivileged original thread current thread currentthread get context class loader getcontextclassloader globals security enabled privileged set tccl privilegedsettccl privileged set tccl privilegedsettccl default servlet defaultservlet get class loader getclassloader access controller accesscontroller do privileged doprivileged thread current thread currentthread set context class loader setcontextclassloader default servlet defaultservlet get class loader getclassloader transformer factory transformerfactory t factory tfactory transformer factory transformerfactory new instance newinstance source xml source xmlsource stream source streamsource string reader stringreader to string tostring transformer transformer t factory tfactory new transformer newtransformer xslt source xsltsource byte array output stream bytearrayoutputstream stream byte array output stream bytearrayoutputstream output stream writer outputstreamwriter os writer oswriter output stream writer outputstreamwriter stream utf stream result streamresult stream result streamresult os writer oswriter transformer transform xml source xmlsource os writer oswriter flush byte array input stream bytearrayinputstream stream to byte array tobytearray transformer exception transformerexception servlet exception servletexception xsl transformer error globals security enabled privileged set tccl privilegedsettccl privileged set tccl privilegedsettccl original access controller accesscontroller do privileged doprivileged thread current thread currentthread set context class loader setcontextclassloader original input stream inputstream html representation contents directory param context path contextpath context path internal paths relative input stream inputstream render html renderhtml string context path contextpath cache entry cacheentry cache entry cacheentry i o exception ioexception servlet exception servletexception string cache entry cacheentry prepare writer buf fered buffered area byte array output stream bytearrayoutputstream stream byte array output stream bytearrayoutputstream output stream writer outputstreamwriter os writer oswriter output stream writer outputstreamwriter stream utf print writer printwriter writer print writer printwriter os writer oswriter string builder stringbuilder string builder stringbuilder rewrite url rewriteurl context path contextpath expensive cache result reuse string rewritten context path rewrittencontextpath rewrite url rewriteurl context path contextpath render header append html append head append title append get string getstring directory title append title append style append org apache catalina util tomcatcss tomcat css append style append head append body append append get string getstring directory title render link parent required string parent directory parentdirectory parent directory parentdirectory ends with endswith parent directory parentdirectory parent directory parentdirectory substring parent directory parentdirectory length slash parent directory parentdirectory last index of lastindexof slash string parent substring slash append href append rewritten context path rewrittencontextpath parent equals parent append rewrite url rewriteurl parent parent ends with endswith append append append append get string getstring directory parent parent append append append append size noshade noshade append table width cellspacing cellpadding align center render column head ings headings append append align left font size strong append get string getstring directory filename append strong font append align center font size strong append get string getstring directory size append strong font append align font size strong append get string getstring directory last modified lastmodified append strong font append render directory entries directory naming enumeration namingenumeration name class pair nameclasspair enumeration resources list cache entry cacheentry shade enumeration has more elements hasmoreelements name class pair nameclasspair nc pair ncpair enumeration next element nextelement string resource name resourcename nc pair ncpair get name getname string trimmed resource name resourcename trimmed equals ignore case equalsignorecase web inf trimmed equals ignore case equalsignorecase meta inf cache entry cacheentry child cache entry childcacheentry resources lookup cache lookupcache cache entry cacheentry resource name resourcename child cache entry childcacheentry exists append shade append bgcolor e e e eee eeeeee append shade shade append align left nbsp nbsp append href append rewritten context path rewrittencontextpath resource name resourcename rewrite url rewriteurl resource name resourcename append resource name resourcename child cache entry childcacheentry context append append append request util requestutil filter trimmed child cache entry childcacheentry context append append append align child cache entry childcacheentry context append nbsp append render size rendersize child cache entry childcacheentry attributes get content length getcontentlength append append align append child cache entry childcacheentry attributes get last modified http getlastmodifiedhttp append append naming exception namingexception servlet exception servletexception error accessing resource render foo ter footer append table append size noshade noshade string readme get read me getreadme cache entry cacheentry context readme append readme append size noshade noshade show server info showserverinfo append append server info serverinfo get server info getserverinfo append append body append html input stream underlying bytes writer write to string tostring writer flush byte array input stream bytearrayinputstream stream to byte array tobytearray render file size bytes param size file size bytes string render size rendersize size left side leftside size digit right side rightside size left side leftside right side rightside size right side rightside left side leftside right side rightside readme file string string get read me getreadme dir context dircontext directory i o exception ioexception readme file readmefile object obj directory lookup readme file readmefile obj obj resource string writer stringwriter buffer string writer stringwriter input stream inputstream reader reader resource obj stream content streamcontent file encoding fileencoding reader input stream reader inputstreamreader file encoding fileencoding reader input stream reader inputstreamreader copy range copyrange reader print writer printwriter buffer reader reader close i o exception ioexception log close reader close i o exception ioexception log close buffer to string tostring naming exception namingexception debug log readme readme file readmefile source xsl template source find xslt input stream findxsltinputstream dir context dircontext directory i o exception ioexception local xslt file localxsltfile object obj directory lookup local xslt file localxsltfile obj obj resource input stream inputstream resource obj stream content streamcontent globals security enabled secure xslt securexslt stream source streamsource naming exception namingexception debug log local xslt file localxsltfile local xslt file localxsltfile context xslt file contextxsltfile input stream inputstream get servlet context getservletcontext get resource as stream getresourceasstream context xslt file contextxsltfile globals security enabled secure xslt securexslt stream source streamsource debug log context xslt file contextxsltfile context xslt file contextxsltfile open read file fell swoop reduce chance chance leaving handle open global xslt file globalxsltfile file validate global xslt file validateglobalxsltfile file input stream fileinputstream fis fis file input stream fileinputstream length danger fis read stream source streamsource byte array input stream bytearrayinputstream fis fis close i o exception ioexception ioe file validate global xslt file validateglobalxsltfile file result string base system get property getproperty globals catalina base prop base file base conf baseconf file base conf result validate global xslt file validateglobalxsltfile base conf baseconf result string system get property getproperty globals catalina prop equals base file home conf homeconf file conf result validate global xslt file validateglobalxsltfile home conf homeconf result file validate global xslt file validateglobalxsltfile file base file candidate file global xslt file globalxsltfile candidate is absolute isabsolute candidate file base global xslt file globalxsltfile candidate is file isfile check path base candidate get canonical path getcanonicalpath starts with startswith base get canonical path getcanonicalpath i o exception ioexception ioe check xsl xslt file string name lower namelower candidate get name getname to lower case tolowercase locale english name lower namelower ends with endswith xslt name lower namelower ends with endswith xsl candidate source secure xslt securexslt input stream inputstream filter external entities source result document builder documentbuilder builder factory new document builder newdocumentbuilder builder set entity resolver setentityresolver secure entity resolver secureentityresolver document document builder parse result dom source domsource document parser configuration exception parserconfigurationexception debug log get message getmessage sax exception saxexception debug log get message getmessage i o exception ioexception debug log get message getmessage close i o exception ioexception result methods check sendfile check sendfile checksendfile http servlet request httpservletrequest request http servlet response httpservletresponse response cache entry cacheentry entry length range range sendfile size sendfilesize entry resource length sendfile size sendfilesize entry resource get content getcontent entry attributes get canonical path getcanonicalpath equals request get attribute getattribute globals sendfile supported attr request get class getclass get name getname equals org apache catalina connector request facade requestfacade response get class getclass get name getname equals org apache catalina connector response facade responsefacade request set attribute setattribute globals sendfile filename attr entry attributes get canonical path getcanonicalpath range request set attribute setattribute globals sendfile file start attr value of valueof request set attribute setattribute globals sendfile file attr value of valueof length request set attribute setattribute globals sendfile file start attr value of valueof range start request set attribute setattribute globals sendfile file attr value of valueof range check match condition satisfied param request servlet request processing param response servlet response creating param resource attributes resourceattributes file object resource meets condition condition satisfied request processing stopped check if match checkifmatch http servlet request httpservletrequest request http servlet response httpservletresponse response resource attributes resourceattributes resource attributes resourceattributes i o exception ioexception string e tag etag resource attributes resourceattributes getetag string header value headervalue request get header getheader match header value headervalue header value headervalue index of indexof string tokenizer stringtokenizer comma tokenizer commatokenizer string tokenizer stringtokenizer header value headervalue condition satisfied conditionsatisfied condition satisfied conditionsatisfied comma tokenizer commatokenizer has more tokens hasmoretokens string current token currenttoken comma tokenizer commatokenizer next token nexttoken current token currenttoken trim equals e tag etag condition satisfied conditionsatisfied condition satisfied conditionsatisfied response send error senderror http servlet response httpservletresponse precondition failed check modified condition satisfied param request servlet request processing param response servlet response creating param resource attributes resourceattributes file object resource meets condition condition satisfied request processing stopped check if modified since checkifmodifiedsince http servlet request httpservletrequest request http servlet response httpservletresponse response resource attributes resourceattributes resource attributes resourceattributes header value headervalue request get date header getdateheader modified last modified lastmodified resource attributes resourceattributes get last modified getlastmodified header value headervalue request get header getheader match last modified lastmodified header value headervalue entity modified client error response set status setstatus http servlet response httpservletresponse modified response set header setheader e tag etag resource attributes resourceattributes getetag illegal argument exception illegalargumentexception illegal argument illegalargument check match condition satisfied param request servlet request processing param response servlet response creating param resource attributes resourceattributes file object resource meets condition condition satisfied request processing stopped check if non e match checkifnonematch http servlet request httpservletrequest request http servlet response httpservletresponse response resource attributes resourceattributes resource attributes resourceattributes i o exception ioexception string e tag etag resource attributes resourceattributes getetag string header value headervalue request get header getheader match header value headervalue condition satisfied conditionsatisfied header value headervalue equals string tokenizer stringtokenizer comma tokenizer commatokenizer string tokenizer stringtokenizer header value headervalue condition satisfied conditionsatisfied comma tokenizer commatokenizer has more tokens hasmoretokens string current token currenttoken comma tokenizer commatokenizer next token nexttoken current token currenttoken trim equals e tag etag condition satisfied conditionsatisfied condition satisfied conditionsatisfied condition satisfied conditionsatisfied equals request get method getmethod head equals request get method getmethod response set status setstatus http servlet response httpservletresponse modified response set header setheader e tag etag e tag etag response send error senderror http servlet response httpservletresponse precondition failed check unmodified condition satisfied param request servlet request processing param response servlet response creating param resource attributes resourceattributes file object resource meets condition condition satisfied request processing stopped check if unmodified since checkifunmodifiedsince http servlet request httpservletrequest request http servlet response httpservletresponse response resource attributes resourceattributes resource attributes resourceattributes i o exception ioexception last modified lastmodified resource attributes resourceattributes get last modified getlastmodified header value headervalue request get date header getdateheader unmodified header value headervalue last modified lastmodified header value headervalue entity modified client error response send error senderror http servlet response httpservletresponse precondition failed illegal argument exception illegalargumentexception illegal argument illegalargument copy contents input stream output stream ensure str eams streams closed returning face exception param cache entry cacheentry cache entry source resource param input stream read source resource param ostream output stream write exception i o exception ioexception input output error occurs copy cache entry cacheentry cache entry cacheentry input stream inputstream servlet output stream servletoutputstream ostream i o exception ioexception i o exception ioexception exception input stream inputstream resource input stream resourceinputstream cache entry cacheentry resource buffer cache entry cacheentry resource get content getcontent buffer ostream write buffer buffer length resource input stream resourceinputstream cache entry cacheentry resource stream content streamcontent resource input stream resourceinputstream input stream inputstream istream buffered input stream bufferedinputstream resource input stream resourceinputstream input copy input stream output stream exception copy range copyrange istream ostream clean input stream istream close rethrow exception occurred exception exception copy contents input stream output stream ensure str eams streams closed returning face exception param cache entry cacheentry cache entry source resource param input stream read source resource param writer writer write exception i o exception ioexception input output error occurs copy cache entry cacheentry cache entry cacheentry input stream inputstream print writer printwriter writer i o exception ioexception i o exception ioexception exception input stream inputstream resource input stream resourceinputstream cache entry cacheentry resource resource input stream resourceinputstream cache entry cacheentry resource stream content streamcontent resource input stream resourceinputstream reader reader file encoding fileencoding reader input stream reader inputstreamreader resource input stream resourceinputstream reader input stream reader inputstreamreader resource input stream resourceinputstream file encoding fileencoding copy input stream output stream exception copy range copyrange reader writer clean reader reader close rethrow exception occurred exception exception copy contents input stream output stream ensure str eams streams closed returning face exception param cache entry cacheentry cache entry source resource param ostream output stream write param range range client wanted retrieve exception i o exception ioexception input output error occurs copy cache entry cacheentry cache entry cacheentry servlet output stream servletoutputstream ostream range range i o exception ioexception i o exception ioexception exception input stream inputstream resource input stream resourceinputstream cache entry cacheentry resource stream content streamcontent input stream inputstream istream buffered input stream bufferedinputstream resource input stream resourceinputstream input exception copy range copyrange istream ostream range start range clean input stream istream close rethrow exception occurred exception exception copy contents input stream output stream ensure str eams streams closed returning face exception param cache entry cacheentry cache entry source resource param ostream output stream write param ranges enumeration ranges client wanted retrieve param content type contenttype content type resource exception i o exception ioexception input output error occurs copy cache entry cacheentry cache entry cacheentry servlet output stream servletoutputstream ostream iterator range ranges string content type contenttype i o exception ioexception i o exception ioexception exception exception ranges has next hasnext input stream inputstream resource input stream resourceinputstream cache entry cacheentry resource stream content streamcontent input stream inputstream istream istream buffered input stream bufferedinputstream resource input stream resourceinputstream input range current range currentrange ranges writing mime header ostream println ostream println mime separation mimeseparation content type contenttype ostream println content type content type contenttype ostream println content range bytes current range currentrange start current range currentrange current range currentrange length ostream println printing content exception copy range copyrange istream ostream current range currentrange start current range currentrange istream istream close i o exception ioexception ostream println ostream print mime separation mimeseparation rethrow exception occurred exception exception copy contents input stream output stream ensure str eams streams closed returning face exception param istream input stream read param ostream output stream write exception occurred processing i o exception ioexception copy range copyrange input stream inputstream istream servlet output stream servletoutputstream ostream copy input stream output stream i o exception ioexception exception buffer input len buffer length len istream read buffer len ostream write buffer len i o exception ioexception exception len exception copy contents input stream output stream ensure str eams streams closed returning face exception param reader reader read param writer writer write exception occurred processing i o exception ioexception copy range copyrange reader reader print writer printwriter writer copy input stream output stream i o exception ioexception exception buffer input len buffer length len reader read buffer len writer write buffer len i o exception ioexception exception len exception copy contents input stream output stream ensure str eams streams closed returning face exception param istream input stream read param ostream output stream write param start start range copied param range copied exception occurred processing i o exception ioexception copy range copyrange input stream inputstream istream servlet output stream servletoutputstream ostream start debug log serving bytes start skipped skipped istream skip start i o exception ioexception skipped start i o exception ioexception get string getstring defaults e rvlet defaultservlet skip fail skipfail value of valueof skipped value of valueof start i o exception ioexception exception bytes to read bytestoread start buffer input len buffer length bytes to read bytestoread len buffer length len istream read buffer bytes to read bytestoread len ostream write buffer len bytes to read bytestoread len ostream write buffer bytes to read bytestoread bytes to read bytestoread i o exception ioexception exception len len buffer length exception range start length validate range validate length length start start length secure sense attempt external entity trigger exception secure entity resolver secureentityresolver entity resolver entityresolver override input source inputsource resolve entity resolveentity string public id publicid string system id systemid sax exception saxexception i o exception ioexception sax exception saxexception get string getstring default servlet defaultservlet block external entity blockexternalentity public id publicid system id systemid override input source inputsource get external sub set getexternalsubset string string baseuri sax exception saxexception i o exception ioexception sax exception saxexception get string getstring default servlet defaultservlet block external sub set blockexternalsubset baseuri override input source inputsource resolve entity resolveentity string string public id publicid string baseuri string system id systemid sax exception saxexception i o exception ioexception sax exception saxexception get string getstring default servlet defaultservlet block external entity blockexternalentity public id publicid baseuri system id systemid