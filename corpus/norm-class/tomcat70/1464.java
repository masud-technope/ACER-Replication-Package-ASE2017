licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket java util concurrent count down latch countdownlatch java util concurrent execution exception executionexception java util concurrent java util concurrent time unit timeunit java util concurrent timeout exception timeoutexception javax websocket send handler sendhandler javax websocket send result sendresult org apache tomcat util res string manager stringmanager converts send handler sendhandler future to send handler futuretosendhandler send handler sendhandler string manager stringmanager string manager stringmanager get manager getmanager constants count down latch countdownlatch latch count down latch countdownlatch ws session wssession ws session wssession close message closemessage send result sendresult result future to send handler futuretosendhandler ws session wssession ws session wssession ws session wssession future to send handler futuretosendhandler ws session wssession ws session wssession close message closemessage ws session wssession ws session wssession close message closemessage close message closemessage is close message isclosemessage close message closemessage send handler sendhandler override on result onresult send result sendresult result result result latch count down countdown override cancel may int err upt if running mayinterruptifrunning can celling cancelling task supported override is cancelled iscancelled can celling cancelling task supported override is done isdone latch get count getcount override interrupted exception interruptedexception execution exception executionexception ws session wssession register future registerfuture latch await ws session wssession unregister future unregisterfuture result get exception getexception execution exception executionexception result get exception getexception override timeout time unit timeunit unit interrupted exception interruptedexception execution exception executionexception timeout exception timeoutexception retval ws session wssession register future registerfuture retval latch await timeout unit ws session wssession unregister future unregisterfuture retval timeout exception timeoutexception get string getstring future to send handler futuretosendhandler timeout value of valueof timeout unit to string tostring to lower case tolowercase result get exception getexception execution exception executionexception result get exception getexception