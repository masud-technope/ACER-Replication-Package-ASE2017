licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat jdbc test java sql connection org junit org junit test org apache tomcat jdbc pool int erceptor interceptor reset abandoned timer resetabandonedtimer abandon percentage test abandonpercentagetest default test case defaulttestcase test test default abandon testdefaultabandon exception datasource set max active setmaxactive datasource set max idle setmaxidle datasource set initial size setinitialsize datasource get pool properties getpoolproperties set abandon when percentage full setabandonwhenpercentagefull datasource get pool properties getpoolproperties set time between eviction runs millis settimebetweenevictionrunsmillis datasource get pool properties getpoolproperties set remove abandoned setremoveabandoned datasource get pool properties getpoolproperties set remove abandoned timeout setremoveabandonedtimeout connection con datasource get connection getconnection assert equals assertequals number connections active busy datasource get pool getpool get active getactive thread sleep assert equals assertequals number connections active busy datasource get pool getpool get active getactive con close test test maxed out abandon testmaxedoutabandon exception size datasource set max active setmaxactive size datasource set max idle setmaxidle size datasource set initial size setinitialsize datasource get pool properties getpoolproperties set abandon when percentage full setabandonwhenpercentagefull datasource get pool properties getpoolproperties set time between eviction runs millis settimebetweenevictionrunsmillis datasource get pool properties getpoolproperties set remove abandoned setremoveabandoned datasource get pool properties getpoolproperties set remove abandoned timeout setremoveabandonedtimeout connection con datasource get connection getconnection assert equals assertequals number connections active busy datasource get pool getpool get active getactive thread sleep assert equals assertequals number connections active busy datasource get pool getpool get active getactive con close test test reset connection testresetconnection exception size datasource set max active setmaxactive size datasource set max idle setmaxidle size datasource set initial size setinitialsize datasource get pool properties getpoolproperties set abandon when percentage full setabandonwhenpercentagefull datasource get pool properties getpoolproperties set time between eviction runs millis settimebetweenevictionrunsmillis datasource get pool properties getpoolproperties set remove abandoned setremoveabandoned datasource get pool properties getpoolproperties set remove abandoned timeout setremoveabandonedtimeout datasource get pool properties getpoolproperties set jdbc int erceptors setjdbcinterceptors reset abandoned timer resetabandonedtimer get name getname connection con datasource get connection getconnection assert equals assertequals number connections active busy datasource get pool getpool get active getactive thread sleep con is closed isclosed assert equals assertequals number connections active busy datasource get pool getpool get active getactive con close test test half way testhalfway exception size datasource set max active setmaxactive size datasource set max idle setmaxidle size datasource set initial size setinitialsize datasource get pool properties getpoolproperties set abandon when percentage full setabandonwhenpercentagefull datasource get pool properties getpoolproperties set time between eviction runs millis settimebetweenevictionrunsmillis datasource get pool properties getpoolproperties set remove abandoned setremoveabandoned datasource get pool properties getpoolproperties set remove abandoned timeout setremoveabandonedtimeout connection con connection size con datasource get connection getconnection assert equals assertequals number connections active busy datasource get pool getpool get active getactive con datasource get connection getconnection assert equals assertequals number connections active busy datasource get pool getpool get active getactive thread sleep assert equals assertequals number connections active busy datasource get pool getpool get active getactive datasource get pool properties getpoolproperties set remove abandoned timeout setremoveabandonedtimeout con length con datasource get connection getconnection active datasource get pool getpool get active getactive system println active active assert equals assertequals number connections active busy con length con length datasource get pool getpool get active getactive datasource get pool properties getpoolproperties set remove abandoned timeout setremoveabandonedtimeout thread sleep assert true asserttrue number connections datasource get pool getpool get active getactive datasource get pool properties getpoolproperties set abandon when percentage full setabandonwhenpercentagefull thread sleep assert equals assertequals number connections active busy datasource get pool getpool get active getactive