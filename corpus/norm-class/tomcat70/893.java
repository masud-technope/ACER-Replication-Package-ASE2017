licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina core java file java io exception ioexception java print writer printwriter java util arrays java util javax servlet filter javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet http constraint element httpconstraintelement javax servlet multipart config element multipartconfigelement javax servlet servlet javax servlet servlet container initializer servletcontainerinitializer javax servlet servlet context servletcontext javax servlet servlet exception servletexception javax servlet servlet registration servletregistration javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet servlet security element servletsecurityelement javax servlet annotation multipart config multipartconfig javax servlet annotation servlet security servletsecurity transport guarantee transportguarantee javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org hamcrest core matchers corematchers org junit assert equals assertequals org junit assert false assertfalse org junit assert not same assertnotsame org junit assert true asserttrue org junit fail org junit org junit test org apache catalina context org apache catalina lifecycle org apache catalina lifecycle event lifecycleevent org apache catalina lifecycle exception lifecycleexception org apache catalina lifecycle listener lifecyclelistener org apache catalina lifecycle state lifecyclestate org apache catalina wrapper org apache catalina authenticator basic authenticator basicauthenticator org apache catalina deploy filter def filterdef org apache catalina deploy filter map filtermap org apache catalina deploy login config loginconfig org apache catalina loader webapp loader webapploader org apache catalina startup simple http client simplehttpclient org apache catalina startup test tomcat testtomcat map realm maprealm org apache catalina startup tomcat org apache catalina startup tomcat base test tomcatbasetest org apache tomcat util buf byte chunk bytechunk test standard context teststandardcontext tomcat base test tomcatbasetest string request http host connection close test test bug testbug exception tests filter init fails web application service tests failure context started redeploy container tomcat tomcat get tomcat instance gettomcatinstance file doc base docbase file tomcat get host gethost get app base getappbase root doc base docbase mkdirs doc base docbase is directory isdirectory fail unable create doc base docbase context root tomcat add context addcontext root configure test configuretest context root tomcat start configure client bug client client bug client tomcat get connector getconnector get local port getlocalport client set request setrequest string request client connect client process request processrequest assert true asserttrue client is response isresponse context failed start checks automatic transition failed stopped successful assert equals assertequals lifecycle state lifecyclestate stopped root get state getstate prepare context attempt configuration cleared standard context standardcontext reset context resetcontext configure scr atch scratch configure test configuretest context root root start request processed client connect client process request processrequest assert true asserttrue client is response isresponse assert equals assertequals bug filter get name getname hello world servlet helloworldservlet response text client get response body getresponsebody configure test configuretest context context context fail add test filter fails filter def filterdef filter def filterdef filter def filterdef filter def filterdef set filter class setfilterclass bug filter get name getname filter def filterdef set filter name setfiltername bug filter def filterdef add init parameter addinitparameter fail to string tostring fail context add filter def addfilterdef filter def filterdef filter map filtermap filter map filtermap filter map filtermap filter map filtermap set filter name setfiltername bug filter map filtermap addurlpattern context add filter map addfiltermap filter map filtermap add test servlet generate response works should n shouldn tomcat add servlet addservlet context bug hello world servlet helloworldservlet context add servlet mapping addservletmapping bug bug client simple http client simplehttpclient bug client port set port setport port override is response body k isresponsebodyok don care body test bug filter filter override destroy noop override do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain io exception ioexception servlet exception servletexception print writer printwriter response get writer getwriter print get class getclass get name getname chain do filter dofilter request response override init filter config filterconfig filter config filterconfig servlet exception servletexception fail filter config filterconfig get init parameter getinitparameter fail equals fail servlet exception servletexception init fail test class not found exception classnotfoundexception test test webapp loader start fail testwebapploaderstartfail exception test webapp loader webapploader start fails failure context started redeploy container tomcat tomcat get tomcat instance gettomcatinstance tomcat start start context automatically configure container base containerbase tomcat get host gethost set start children setstartchildren failing webapp loader failingwebapploader loader failing webapp loader failingwebapploader file root file test webapp context context tomcat add webapp addwebapp root get absolute path getabsolutepath context set loader setloader loader context start fail lifecycle exception lifecycleexception assert equals assertequals lifecycle state lifecyclestate failed context get state getstate attempt loader set fail setfail context start assert equals assertequals lifecycle state lifecyclestate started context get state getstate test test bug testbug check webapp running byte chunk bytechunk result get url geturl http localhost get port getport bug target assert equals assertequals target result to string tostring test test webapp listener configure fail testwebapplistenerconfigurefail exception test lifecycle listener lifecyclelistener webapp fails configure start event failure context started redeploy container tomcat tomcat get tomcat instance gettomcatinstance tomcat start start context automatically configure container base containerbase tomcat get host gethost set start children setstartchildren failing lifecycle listener failinglifecyclelistener listener failing lifecycle listener failinglifecyclelistener file root file test webapp context context tomcat add webapp addwebapp root get absolute path getabsolutepath context add lifecycle listener addlifecyclelistener listener context start fail lifecycle exception lifecycleexception assert equals assertequals lifecycle state lifecyclestate failed context get state getstate attempt listener set fail setfail context start assert equals assertequals lifecycle state lifecyclestate started context get state getstate test test bug testbug check webapp running byte chunk bytechunk result get url geturl http localhost get port getport bug target assert equals assertequals target result to string tostring failing webapp loader failingwebapploader webapp loader webapploader fail set fail setfail fail fail fail override start internal startinternal lifecycle exception lifecycleexception fail runtime exception runtimeexception start fail test start internal startinternal failing lifecycle listener failinglifecyclelistener lifecycle listener lifecyclelistener string fail event failevent lifecycle configure start event fail set fail setfail fail fail fail override lifecycle event lifecycleevent lifecycle event lifecycleevent event fail event get type gettype equals fail event failevent runtime exception runtimeexception fail event failevent fail test test test bug testbug exception test filter mapping works test filter called selected mapping url patterns url pattern servlet container tomcat tomcat get tomcat instance gettomcatinstance file root file test webapp tomcat add webapp addwebapp root get absolute path getabsolutepath tomcat start byte chunk bytechunk result byte chunk bytechunk check filter servlet called get url geturl http localhost get port getport bug foo result assert equals assertequals http servlet response httpservletresponse assert true asserttrue result get length getlength check extension mapping works result get url geturl http localhost get port getport foo assert equals assertequals filter servlet filterservlet result to string tostring check path mapping works result get url geturl http localhost get port getport bug servlet assert equals assertequals filter servlet filterservlet result to string tostring check servlet mapping works result get url geturl http localhost get port getport foo assert equals assertequals filter servlet filterservlet result to string tostring check filter called result get url geturl http localhost get port getport bug servlet foo assert equals assertequals filter servlet filterservlet result to string tostring result get url geturl http localhost get port getport bug servlet foo assert equals assertequals filter servlet filterservlet result to string tostring check dispatcher mapping result get url geturl http localhost get port getport bug target assert equals assertequals target result to string tostring result get url geturl http localhost get port getport bug assert equals assertequals filter target filtertarget result to string tostring result get url geturl http localhost get port getport bug include assert equals assertequals include filter target includefiltertarget result to string tostring bug filter filter override destroy noop override do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain io exception ioexception servlet exception servletexception response set content type setcontenttype text plain response get writer getwriter print filter chain do filter dofilter request response override init filter config filterconfig filter config filterconfig servlet exception servletexception noop bug for ward servlet forwardservlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception req get request dispatcher getrequestdispatcher bug target req resp bug include servlet includeservlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain resp get writer getwriter print include req get request dispatcher getrequestdispatcher bug target include req resp bug target servlet targetservlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain resp get writer getwriter print target bug servlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain resp get writer getwriter print servlet test test bug testbug exception test config uri ng configuring servlet security constraints program matically programmatically work container tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context ctx tomcat add context addcontext setup realm map realm maprealm realm map realm maprealm realm add user adduser tomcat tomcat realm add user role adduserrole tomcat tomcat ctx set realm setrealm realm configure app basic login config loginconfig login config loginconfig set auth method setauthmethod basic ctx set login config setloginconfig ctx get pipeline getpipeline add valve addvalve basic authenticator basicauthenticator add servlet container initializer servletcontainerinitializer servlet container initializer servletcontainerinitializer sci bug sci ctx add servlet container initializer addservletcontainerinitializer sci start context tomcat start request servlet byte chunk bytechunk byte chunk bytechunk get url geturl http localhost get port getport bug check assert not same assertnotsame to string tostring assert equals assertequals bug sci servlet container initializer servletcontainerinitializer override on startup onstartup servlet context servletcontext ctx servlet exception servletexception register map servlet servlet bug servlet servlet registration servletregistration dynamic ctx add servlet addservlet bug add mapping addmapping bug limit access users tomcat role http constraint element httpconstraintelement hce http constraint element httpconstraintelement transport guarantee transportguarantee tomcat servlet security element servletsecurityelement sse servlet security element servletsecurityelement hce set servlet security setservletsecurity sse bug servlet http servlet httpservlet serialversionuid override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain resp get writer getwriter write test test bug testbug exception do test bug dotestbug test test bug testbug exception do test bug dotestbug do test bug dotestbug load on start up loadonstartup exception test servlet program matically programmatically load on startup loadonstartup property honored init destroy methods called container tomcat tomcat get tomcat instance gettomcatinstance file system doc base docbase required context ctx tomcat add context addcontext add servlet container initializer servletcontainerinitializer bug sci sci bug sci load on start up loadonstartup ctx add servlet container initializer addservletcontainerinitializer sci start context tomcat start context ctx init destroy called correctly assert true asserttrue sci get servlet getservlet is ok isok assert true asserttrue load on start up loadonstartup sci get servlet getservlet is init called isinitcalled bug sci servlet container initializer servletcontainerinitializer bug servlet load on start up loadonstartup bug sci load on start up loadonstartup load on start up loadonstartup load on start up loadonstartup bug servlet get servlet getservlet override on startup onstartup servlet context servletcontext ctx servlet exception servletexception register map servlet bug servlet servlet registration servletregistration dynamic ctx add servlet addservlet bug add mapping addmapping bug load on start up loadonstartup set load on startup setloadonstartup bug servlet http servlet httpservlet serialversionuid init ok initok destroy ok destroyok override init init ok initok destroy ok destroyok init ok initok init ok initok override destroy init ok initok boolean value booleanvalue destroy ok destroyok destroy ok destroyok destroy ok destroyok override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype text plain resp get writer getwriter write is ok isok init ok initok init ok initok boolean value booleanvalue destroy ok destroyok destroy ok destroyok boolean value booleanvalue init ok initok destroy ok destroyok is init called isinitcalled init ok initok init ok initok boolean value booleanvalue test bug http servlet request httpservletrequest get parts getparts work filter test test bug testbug bug client client bug client multipart works properly client do request dorequest regular assert equals assertequals incorrect response request parts client get response body getresponsebody client reset regular multipart works properly send multipart request client do request dorequest multipart assert equals assertequals regular multipart doesn work parts client get response body getresponsebody client reset casual multipart request regular servlet config expect parts send multipart request client do request dorequest regular assert equals assertequals incorrect response configured casual multipart request multipart request parts client get response body getresponsebody client reset casual multipart request regular servlet config expect server parse parts multipart config multipartconfig send multipart request client do request dorequest regular assert equals assertequals incorrect response configured casual multipart request parts client get response body getresponsebody client reset bug servlet http servlet httpservlet serialversionuid override service http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception echo parameters values plain text resp set content type setcontenttype text plain resp set character encoding setcharacterencoding utf print writer printwriter resp get writer getwriter println parts req get parts getparts integer value of valueof req get parts getparts size multipart config multipartconfig bug servlet multipart bug servlet serialversionuid bug test client test casual get parts getparts calls bug client simple http client simplehttpclient init context context init exception init tomcat tomcat get tomcat instance gettomcatinstance context tomcat add context addcontext temp dir tomcat add servlet addservlet context regular bug servlet wrapper tomcat add servlet addservlet context multipart bug servlet multipart tomcat add servlet addservlet resp ect respect annotations multipart config element multipartconfigelement set multipart config element setmultipartconfigelement multipart config element multipartconfigelement context add servlet mapping addservletmapping regular regular context add servlet mapping addservletmapping multipart multipart tomcat start set port setport tomcat get connector getconnector get local port getlocalport init exception do request dorequest string uri allow casual multipart allowcasualmultipart make multipart request makemultipartrequest init context set allow casual multipart parsing setallowcasualmultipartparsing allow casual multipart allowcasualmultipart open connection connect send request body method string request make multipart request makemultipartrequest string boundary simple boundary simpleboundary string content boundary crlf content disposition form data crlf crlf crlf boundary crlf encode content bytes characters content string content get bytes getbytes utf ascii request string post http localhost get port getport uri http crlf host localhost crlf connection close crlf content type multipart form data boundary boundary crlf content length content length crlf crlf content crlf request string http localhost get port getport uri http crlf host localhost crlf connection close crlf crlf set request setrequest request blocks response read process request processrequest close connection disconnect exception override is response body k isresponsebodyok don care test expected illegal argument exception illegalargumentexception test add post construct method null class name testaddpostconstructmethodnullclassname standard context standardcontext add post construct method addpostconstructmethod test expected illegal argument exception illegalargumentexception test add post construct method null method name testaddpostconstructmethodnullmethodname standard context standardcontext add post construct method addpostconstructmethod test expected illegal argument exception illegalargumentexception test add post construct method conflicts testaddpostconstructmethodconflicts standard context standardcontext standard context standardcontext standard context standardcontext standard context standardcontext add post construct method addpostconstructmethod standard context standardcontext add post construct method addpostconstructmethod test expected illegal argument exception illegalargumentexception test add pre destroy method null class name testaddpredestroymethodnullclassname standard context standardcontext add pre destroy method addpredestroymethod test expected illegal argument exception illegalargumentexception test add pre destroy method null method name testaddpredestroymethodnullmethodname standard context standardcontext add pre destroy method addpredestroymethod test expected illegal argument exception illegalargumentexception test add pre destroy method conflicts testaddpredestroymethodconflicts standard context standardcontext standard context standardcontext standard context standardcontext standard context standardcontext add pre destroy method addpredestroymethod standard context standardcontext add pre destroy method addpredestroymethod test test tld listener testtldlistener exception container tomcat tomcat get tomcat instance gettomcatinstance file doc base docbase file test webapp context ctx tomcat add context addcontext doc base docbase get absolute path getabsolutepath start context tomcat start context ctx string log tester tld listener testertldlistener get log getlog assert true asserttrue log log pass assert true asserttrue log log pass assert false assertfalse log log fail test test flag fail ctx if servlet start fails testflagfailctxifservletstartfails exception tomcat tomcat get tomcat instance gettomcatinstance file doc base docbase file system get property getproperty java tmp dir tmpdir standard context standardcontext context standard context standardcontext tomcat add context addcontext doc base docbase get absolute path getabsolutepath test flag host context assert false assertfalse context get computed fail ctx if servlet start fails getcomputedfailctxifservletstartfails standard host standardhost host standard host standardhost tomcat get host gethost host set fail ctx if servlet start fails setfailctxifservletstartfails assert true asserttrue context get computed fail ctx if servlet start fails getcomputedfailctxifservletstartfails context set fail ctx if servlet start fails setfailctxifservletstartfails assert false assertfalse flag context override host config context get computed fail ctx if servlet start fails getcomputedfailctxifservletstartfails test actual flag startup wrapper servlet tomcat add servlet addservlet context myservlet failing startup servlet failingstartupservlet servlet set load on startup setloadonstartup tomcat start assert true asserttrue flag fail deployment context get state getstate is available isavailable tomcat assert false assertfalse context get state getstate is available isavailable host remove child removechild context context standard context standardcontext tomcat add context addcontext doc base docbase get absolute path getabsolutepath servlet tomcat add servlet addservlet context myservlet failing startup servlet failingstartupservlet servlet set load on startup setloadonstartup tomcat start assert false assertfalse flag fail deployment context get state getstate is available isavailable failing startup servlet failingstartupservlet http servlet httpservlet serialversionuid override init servlet exception servletexception servlet exception servletexception failing purpose test test bug testbug context context standard context standardcontext context set resource only servlets setresourceonlyservlets assert that assertthat arrays as list aslist context get resource only servlets getresourceonlyservlets split core matchers corematchers has items hasitems test test set path testsetpath test set path testsetpath test set path testsetpath foo foo test set path testsetpath foo bar foo bar test set path testsetpath test set path testsetpath test set path testsetpath foo foo test set path testsetpath foo bar foo bar test set path testsetpath foo bar foo bar test set path testsetpath string string expected value expectedvalue standard context standardcontext context standard context standardcontext context set path setpath assert equals assertequals expected value expectedvalue context get path getpath