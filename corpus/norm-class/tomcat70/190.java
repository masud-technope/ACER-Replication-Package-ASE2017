licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license websocket snake java awt color java eof exception eofexception java util iterator java util random java util concurrent atomic atomic integer atomicinteger javax websocket on close onclose javax websocket on error onerror javax websocket on message onmessage javax websocket on open onopen javax websocket session javax websocket server server endpoint serverendpoint server endpoint serverendpoint websocket snake snake annotation snakeannotation playfield width playfield height grid size atomic integer atomicinteger snake ids snakeids atomic integer atomicinteger random random random snake snake string get random hex color getrandomhexcolor hue random next float nextfloat sat saturation random next int nextint luminance color color color gethsbcolor hue saturation luminance integer to hex string tohexstring color getrgb xff ffff xffffff substring location get random location getrandomlocation round by grid size roundbygridsize random next int nextint playfield width round by grid size roundbygridsize random next int nextint playfield height location round by grid size roundbygridsize grid size grid size grid size snake annotation snakeannotation snake ids snakeids get and increment getandincrement on open onopen on open onopen session session snake snake session snake timer snaketimer add snake addsnake snake string builder stringbuilder string builder stringbuilder iterator snake iterator snake timer snaketimer get snakes getsnakes iterator iterator has next hasnext snake snake iterator append string format color integer value of valueof snake get id getid snake get hex color gethexcolor iterator has next hasnext append snake timer snaketimer broadcast string format type join data to string tostring on message onmessage on text message ontextmessage string message west equals message snake set direction setdirection direction west north equals message snake set direction setdirection direction north east equals message snake set direction setdirection direction east south equals message snake set direction setdirection direction south on close onclose on close onclose snake timer snaketimer remove snake removesnake snake snake timer snaketimer broadcast string format type leave integer value of valueof on error onerror on error onerror throwable throwable user closing browser check root eof ignore protect infinite loops count throwable root root get cause getcause count root root get cause getcause count root eof exception eofexception assume triggered user closing browser ignore