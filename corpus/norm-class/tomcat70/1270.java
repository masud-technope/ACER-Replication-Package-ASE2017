licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina connector java i o exception ioexception java unsupported encoding exception unsupportedencodingexception java nio charset charset java util enum set enumset java util concurrent atomic atomic boolean atomicboolean javax servlet request dispatcher requestdispatcher javax servlet session tracking mode sessiontrackingmode javax servlet http http servlet response httpservletresponse org apache catalina authenticator org apache catalina context org apache catalina host org apache catalina wrapper org apache catalina authenticator authenticator base authenticatorbase org apache catalina comet comet event cometevent org apache catalina comet comet event cometevent event type eventtype org apache catalina core async context impl asynccontextimpl org apache catalina util server info serverinfo org apache catalina util session config sessionconfig org apache catalina util url encoder urlencoder org apache coyote action code actioncode org apache coyote adapter org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util exception utils exceptionutils org apache tomcat util buf c converter cconverter org apache tomcat util buf byte chunk bytechunk org apache tomcat util buf char chunk charchunk org apache tomcat util buf message bytes messagebytes org apache tomcat util http cookies org apache tomcat util http server cookie servercookie org apache tomcat util net ssl support sslsupport org apache tomcat util net socket status socketstatus org apache tomcat util res string manager stringmanager implementation request processor delegates processing coyote processor author craig mc clanahan mcclanahan author remy maucherat coyote adapter coyoteadapter adapter log log log factory logfactory get log getlog coyote adapter coyoteadapter constants string powered servlet jsp server info serverinfo get server info getserverinfo java system get property getproperty java vendor system get property getproperty java runtime version enum set enumset session tracking mode sessiontrackingmode ssl enum set enumset session tracking mode sessiontrackingmode ssl adapter notes backslash parse boolean parseboolean system get property getproperty org apache catalina connector coyote adapter coyoteadapter backslash construct coyote processor coyoteprocessor connector param connector coyote connector coyoteconnector owns processor coyote adapter coyoteadapter connector connector connector connector instance variables coyote connector coyoteconnector processor connector connector string manager string manager stringmanager string manager stringmanager get manager getmanager constants encoder location url http redirects url encoder urlencoder url encoder urlencoder safe character url encoder urlencoder url encoder urlencoder url encoder urlencoder add safe character addsafecharacter url encoder urlencoder add safe character addsafecharacter url encoder urlencoder add safe character addsafecharacter url encoder urlencoder add safe character addsafecharacter url encoder urlencoder add safe character addsafecharacter adapter methods event method error expected override event org apache coyote request req org apache coyote response res socket status socketstatus status request request request req get note getnote adapter notes response response response res get note getnote adapter notes request get wrapper getwrapper error read status socket status socketstatus open read response is closed isclosed event closed asynchronously call read cleanup pipeline request get event getevent set event type seteventtype comet event cometevent event type eventtype request get event getevent set event sub type seteventsubtype fill read buffer servlet layer request read read i o exception ioexception error read request get event getevent set event type seteventtype comet event cometevent event type eventtype read request get event getevent set event sub type seteventsubtype error request get event getevent set event type seteventtype comet event cometevent event type eventtype error request get event getevent set event sub type seteventsubtype comet event cometevent event sub type eventsubtype client disconnect request get event getevent set event type seteventtype comet event cometevent event type eventtype request get event getevent set event sub type seteventsubtype status socket status socketstatus disconnect request get event getevent set event type seteventtype comet event cometevent event type eventtype error request get event getevent set event sub type seteventsubtype comet event cometevent event sub type eventsubtype client disconnect error status socket status socketstatus error request get event getevent set event type seteventtype comet event cometevent event type eventtype error request get event getevent set event sub type seteventsubtype comet event cometevent event sub type eventsubtype ioexception error status socket status socketstatus request get event getevent set event type seteventtype comet event cometevent event type eventtype request get event getevent set event sub type seteventsubtype comet event cometevent event sub type eventsubtype server shutdown status socket status socketstatus timeout response is closed isclosed event closed asynchronously call read cleanup pipeline request get event getevent set event type seteventtype comet event cometevent event type eventtype request get event getevent set event sub type seteventsubtype request get event getevent set event type seteventtype comet event cometevent event type eventtype error request get event getevent set event sub type seteventsubtype comet event cometevent event sub type eventsubtype timeout req get request processor getrequestprocessor set worker thread name setworkerthreadname thread current thread currentthread get name getname calling container connector get service getservice get container getcontainer get pipeline getpipeline get first getfirst event request response request get event getevent error response is closed isclosed request get attribute getattribute request dispatcher requestdispatcher error exception unexpected exception occurred processing event error called request get event getevent set event type seteventtype comet event cometevent event type eventtype error request get event getevent set event sub type seteventsubtype error connector get service getservice get container getcontainer get pipeline getpipeline get first getfirst event request response request get event getevent response is closed isclosed request is comet iscomet status socket status socketstatus open read request get event getevent get event type geteventtype event type eventtype comet event cometevent close called event request get event getevent set event type seteventtype comet event cometevent event type eventtype request get event getevent set event sub type seteventsubtype error connector get service getservice get container getcontainer get pipeline getpipeline get first getfirst event request response request get event getevent res action action code actioncode comet error read request get available getavailable read bytes read data read connector error request get event getevent set event type seteventtype comet event cometevent event type eventtype error request get event getevent set event sub type seteventsubtype comet event cometevent event sub type eventsubtype ioexception error connector get service getservice get container getcontainer get pipeline getpipeline get first getfirst event request response request get event getevent error throwable exception utils exceptionutils handle throwable handlethrowable i o exception ioexception log error get string getstring coyote adapter coyoteadapter service error req get request processor getrequestprocessor set worker thread name setworkerthreadname recycle wrapper request response error response is closed isclosed request is comet iscomet context request get mapping data getmappingdata context log access logaccess request response system current time millis currenttimemillis req get start time getstarttime request recycle request set filter chain setfilterchain response recycle override async dispatch asyncdispatch org apache coyote request req org apache coyote response res socket status socketstatus status exception request request request req get note getnote adapter notes response response response res get note getnote adapter notes request illegal state exception illegalstateexception dispatch happen existing request comet success async context impl asynccontextimpl async con impl asyncconimpl request get async context internal getasynccontextinternal req get request processor getrequestprocessor set worker thread name setworkerthreadname thread current thread currentthread get name getname request is async isasync comet error timeout listeners request test change method required entering method context ctxt context request get mapping data getmappingdata context ctxt ctxt fire request destroy event firerequestdestroyevent request lift suspension send error senderror async request response written client response set suspended setsuspended status socket status socketstatus timeout async con impl asyncconimpl timeout async con impl asyncconimpl set error state seterrorstate application doesn define request is async dispatching isasyncdispatching request is async isasync response is error report required iserrorreportrequired connector get service getservice get container getcontainer get pipeline getpipeline get first getfirst invoke request response request is async dispatching isasyncdispatching connector get service getservice get container getcontainer get pipeline getpipeline get first getfirst invoke request response throwable throwable request get attribute getattribute request dispatcher requestdispatcher error exception async con impl asyncconimpl set error state seterrorstate request is comet iscomet response is closed isclosed response is error iserror request get available getavailable request get content length getcontentlength request is parameters parse d isparametersparsed invoke read event bytes event req res socket status socketstatus open read comet res action action code actioncode comet comet res action action code actioncode comet clear filter chain reset comet request request set filter chain setfilterchain request is async isasync comet request finish request finishrequest response finish response finishresponse time req get start time getstarttime time system current time millis currenttimemillis req get start time getstarttime request get mapping data getmappingdata context context request get mapping data getmappingdata context log access logaccess request response time log req res time req action action code actioncode post request check processor error bail atomic boolean atomicboolean error atomic boolean atomicboolean res action action code actioncode error error error request is async comp leting isasynccompleting connection for cibly forcibly closed prevent completion happening usual point trigger call on complete oncomplete res action action code actioncode async post process success i o exception ioexception success throwable exception utils exceptionutils handle throwable handlethrowable success log error get string getstring coyote adapter coyoteadapter service req get request processor getrequestprocessor set worker thread name setworkerthreadname recycle wrapper request response success comet request is async isasync request recycle response recycle clear convert ers converters minimum amount memory processor request clear encoders clearencoders response clear encoders clearencoders success service method override service org apache coyote request req org apache coyote response res exception request request request req get note getnote adapter notes response response response res get note getnote adapter notes request create objects request connector create request createrequest request set coyote request setcoyoterequest req response connector create response createresponse response set coyote response setcoyoteresponse res link objects request set response setresponse response response set request setrequest request notes req set note setnote adapter notes request res set note setnote adapter notes response query string encoding req get parameters getparameters set query string encoding setquerystringencoding connector geturiencoding connector get xpowered by getxpoweredby response add header addheader powered powered comet async post parse success postparsesuccess parse catalina configuration specific request parameters req get request processor getrequestprocessor set worker thread name setworkerthreadname thread current thread currentthread get name getname post parse success postparsesuccess post parse request postparserequest req request res response post parse success postparsesuccess check valves support async request set async supported setasyncsupported connector get service getservice get container getcontainer get pipeline getpipeline is async supported isasyncsupported calling container connector get service getservice get container getcontainer get pipeline getpipeline get first getfirst invoke request response request is comet iscomet response is closed isclosed response is error iserror request get available getavailable request get content length getcontentlength request is parameters parse d isparametersparsed invoke read event bytes event req res socket status socketstatus open read comet res action action code actioncode comet comet res action action code actioncode comet clear filter chain reset comet request request set filter chain setfilterchain request is async isasync async throwable throwable throwable request get attribute getattribute request dispatcher requestdispatcher error exception async error process request is async comp leting isasynccompleting throwable request get async context internal getasynccontextinternal set error state seterrorstate throwable comet request finish request finishrequest response finish response finishresponse post parse success postparsesuccess log processing invoked post parse request postparserequest failed log ged logged context start comet request failed log ged logged context request get mapping data getmappingdata context log access logaccess request response system current time millis currenttimemillis req get start time getstarttime req action action code actioncode post request i o exception ioexception req get request processor getrequestprocessor set worker thread name setworkerthreadname atomic boolean atomicboolean error atomic boolean atomicboolean res action action code actioncode error error recycle wrapper request response comet async error request recycle response recycle clear convert ers converters minimum amount memory processor request clear encoders clearencoders response clear encoders clearencoders override error dispatch errordispatch org apache coyote request req org apache coyote response res request request request req get note getnote adapter notes response response response res get note getnote adapter notes request request get mapping data getmappingdata context context request get mapping data getmappingdata context log access logaccess request response system current time millis currenttimemillis req get start time getstarttime log req res system current time millis currenttimemillis req get start time getstarttime request request recycle response response recycle req recycle res recycle override log org apache coyote request req org apache coyote response res time request request request req get note getnote adapter notes response response response res get note getnote adapter notes request create objects request connector create request createrequest request set coyote request setcoyoterequest req response connector create response createresponse response set coyote response setcoyoteresponse res link objects request set response setresponse response response set request setrequest request notes req set note setnote adapter notes request res set note setnote adapter notes response query string encoding req get parameters getparameters set query string encoding setquerystringencoding connector geturiencoding log lowest level log access logaccess automatically called parent containers log ged logged request mapping data mappingdata request mapping data mappingdata context log ged logged context request mapping data mappingdata context log access logaccess request response time request mapping data mappingdata host log ged logged host request mapping data mappingdata host log access logaccess request response time log ged logged connector get service getservice get container getcontainer log access logaccess request response time throwable exception utils exceptionutils handle throwable handlethrowable log warn get string getstring coyote adapter coyoteadapter access log fail accesslogfail request recycle response recycle recycle required exception recyclerequiredexception exception serialversionuid override check recycled checkrecycled org apache coyote request req org apache coyote response res request request request req get note getnote adapter notes response response response res get note getnote adapter notes string message key messagekey request request get host gethost message key messagekey coyote adapter coyoteadapter check recycled checkrecycled request response response get content written getcontentwritten message key messagekey coyote adapter coyoteadapter check recycled checkrecycled response message key messagekey log request skipped access log log method care rec ycling recycling log req res connector get state getstate is available isavailable log is info enabled isinfoenabled log info get string getstring message key messagekey recycle required exception recyclerequiredexception reused issue warn log is debug enabled isdebugenabled log debug get string getstring message key messagekey recycle required exception recyclerequiredexception override string get domain getdomain connector get domain getdomain methods parse additional request parameters post parse request postparserequest org apache coyote request req request request org apache coyote response res response response exception connector configuration req scheme is null isnull processor scheme determine secure request set secure setsecure req scheme equals https connector scheme secure configuration defaults http req scheme set string setstring connector get scheme getscheme request set secure setsecure connector get secure getsecure fixme code doesn t doesnt belongs sense http ajp point host header processed override proxy port proxyport proxy host proxyhost string proxy name proxyname connector get proxy name getproxyname proxy port proxyport connector get proxy port getproxyport proxy port proxyport req set server port setserverport proxy port proxyport proxy name proxyname req server name servername set string setstring proxy name proxyname copy raw uri decodeduri message bytes messagebytes decodeduri req decodeduri decodeduri duplicate req requesturi parse path parameters str ip strip path parameters convert decodeduri bytes parse path parameters parsepathparameters req request decoding url req geturldecoder convert decodeduri i o exception ioexception ioe res set status setstatus res set message setmessage invalid uri ioe get message getmessage connector get service getservice get container getcontainer log access logaccess request response normalization normalize req decodeduri res set status setstatus res set message setmessage invalid uri connector get service getservice get container getcontainer log access logaccess request response character decoding converturi decodeduri request check uri normalized check normalize checknormalize req decodeduri res set status setstatus res set message setmessage invalid uri character encoding connector get service getservice get container getcontainer log access logaccess request response request mapping message bytes messagebytes server name servername connector getuseipvhosts server name servername req local name localname server name servername is null isnull res action action code actioncode req local attribute server name servername req server name servername request is async started isasyncstarted todo servlet async reset mapping data pro lly prolly request get mapping data getmappingdata recycle version mapping loop context expect version string version context version context versioncontext map required maprequired map required maprequired map latest version connector get mapper getmapper map server name servername decodeduri version request get mapping data getmappingdata request set context setcontext context request get mapping data getmappingdata context request set wrapper setwrapper wrapper request get mapping data getmappingdata wrapper deployed request get context getcontext res set status setstatus res set message setmessage context host host host request get host gethost host shutdown host host log access logaccess request response context parse session url redirect include session redirect string sessionid request get servlet context getservletcontext get effective session tracking modes geteffectivesessiontrackingmodes session tracking mode sessiontrackingmode url session sessionid request get path parameter getpathparameter session config sessionconfig get session uri param name getsessionuriparamname request get context getcontext sessionid request set requested session id setrequestedsessionid sessionid request set requested session l setrequestedsessionurl session cookies ssl session parse session cookies id parsesessioncookiesid req request parse session ssl id parsesessionsslid request sessionid request get requested session id getrequestedsessionid map required maprequired version request get context getcontext version context versioncontext version asked version version context versioncontext object contexts request get mapping data getmappingdata contexts session pos sibility possibility remap contexts sessionid find context session contexts length context ctxt context contexts ctxt get manager getmanager find session findsession sessionid mapped ctxt equals request get mapping data getmappingdata context version time mapping correct context version ctxt get webapp version getwebappversion version context versioncontext ctxt reset mapping request get mapping data getmappingdata recycle map required maprequired recycle session info correct context configured settings request recycle session info recyclesessioninfo map required maprequired request get context getcontext get paused getpaused point thread sleep interrupted exception interruptedexception reset mapping request get mapping data getmappingdata recycle map required maprequired redirect message bytes messagebytes redirect path b redirectpathmb request get mapping data getmappingdata redirect path redirectpath redirect path b redirectpathmb is null isnull string redirect path redirectpath url encoder urlencoder encode redirect path b redirectpathmb to string tostring utf string query request get query string getquerystring request is requested session id from l isrequestedsessionidfromurl opt imal optimal common should n shouldn matter redirect path redirectpath redirect path redirectpath session config sessionconfig get session uri param name getsessionuriparamname request get context getcontext request get requested session id getrequestedsessionid query opt imal optimal common should n shouldn matter redirect path redirectpath redirect path redirectpath query response send redirect sendredirect redirect path redirectpath request get context getcontext log access logaccess request response filter trace method connector get allow trace getallowtrace req method equals ignore case equalsignorecase trace wrapper wrapper request get wrapper getwrapper string header wrapper string methods wrapper get servlet methods getservletmethods methods methods length trace equals methods header header methods header methods res set status setstatus res add header addheader header res set message setmessage trace method allowed request get context getcontext log access logaccess request response do connector authentication authorization doconnectorauthenticationauthorization req request do connector authentication authorization doconnectorauthenticationauthorization org apache coyote request req request request remote principal string username req get remote user getremoteuser to string tostring username log is debug enabled isdebugenabled log debug get string getstring coyote adapter coyoteadapter authenticate username req get remote user needs authorization getremoteuserneedsauthorization authenticator authenticator request get context getcontext get authenticator getauthenticator authenticator security constraints configured application auth orize authorize user coyote principal coyoteprincipal provide authenticated user request set user principal setuserprincipal coyote principal coyoteprincipal username authenticator authenticator base authenticatorbase log is debug enabled isdebugenabled log debug get string getstring coyote adapter coyoteadapter auth orize authorize username custom authenticator trigger authorization authorization request set user principal setuserprincipal request get context getcontext get realm getrealm authenticate username authenticator instance authenticator base authenticatorbase check req get remote user needs authorization getremoteuserneedsauthorization trigger authorization cache result prev enting preventing exc essive excessive calls realm connector isn configured authorization create user roles supplied user request set user principal setuserprincipal coyote principal coyoteprincipal username authorization type string auth type authtype req get auth type getauthtype to string tostring auth type authtype request set auth type setauthtype auth type authtype extract path parameters request assumes parameters form path int erested interested session form parameters safely param req param request parse path parameters parsepathparameters org apache coyote request req request request process bytes format req decodeduri to bytes tobytes byte chunk bytechunk uribc req decodeduri get byte chunk getbytechunk semicolon uribc index of indexof encoding platforms encoding doesn expected result explicit string enc connector geturiencoding enc enc iso charset charset charset c converter cconverter get charset getcharset enc unsupported encoding exception unsupportedencodingexception log warn get string getstring coyote adapter coyoteadapter parse path param parsepathparam enc log is debug enabled isdebugenabled log debug get string getstring coyote adapter coyoteadapter debug uribc uribc to string tostring log debug get string getstring coyote adapter coyoteadapter debug semicolon string value of valueof semicolon log debug get string getstring coyote adapter coyoteadapter debug enc enc semicolon parse path param extract decoded request uri start uribc get start getstart uribc get end getend path param start pathparamstart semicolon path param end pathparamend byte chunk bytechunk find bytes findbytes uribc get buffer getbuffer start path param start pathparamstart string path param end pathparamend charset string uribc get buffer getbuffer start path param start pathparamstart path param end pathparamend path param start pathparamstart charset extract path param decoded request uri buf uribc get buffer getbuffer start path param end pathparamend buf start semicolon buf start path param end pathparamend uribc set bytes setbytes buf start start path param end pathparamend semicolon charset string uribc get buffer getbuffer start path param start pathparamstart start path param start pathparamstart charset uribc set end setend start semicolon log is debug enabled isdebugenabled log debug get string getstring coyote adapter coyoteadapter debug path param start pathparamstart string value of valueof path param start pathparamstart log debug get string getstring coyote adapter coyoteadapter debug path param end pathparamend string value of valueof path param end pathparamend log debug get string getstring coyote adapter coyoteadapter debug equals index of indexof equals string substring equals string substring equals request add path parameter addpathparameter log is debug enabled isdebugenabled log debug get string getstring coyote adapter coyoteadapter debug equals string value of valueof equals log debug get string getstring coyote adapter coyoteadapter debug log debug get string getstring coyote adapter coyoteadapter debug semicolon uribc index of indexof semicolon ssl session required ssl session tracking method enabled parse session ssl id parsesessionsslid request request request get requested session id getrequestedsessionid ssl equals request get servlet context getservletcontext get effective session tracking modes geteffectivesessiontrackingmodes request connector secure todo map ssl sessions sesison todo request get attribute getattribute number ssl attribute pop ulated populated performance concern request set requested session id setrequestedsessionid request get attribute getattribute ssl support sslsupport session key to string tostring request set requested session l setrequestedsessionssl parse session url parse session cookies id parsesessioncookiesid org apache coyote request req request request session tracking cookies disabled current context don session cookie cookie parent context session overwrite valid session encoded url context context context request get mapping data getmappingdata context context context get servlet context getservletcontext get effective session tracking modes geteffectivesessiontrackingmodes session tracking mode sessiontrackingmode cookie parse session cookies cookies server cookies servercookies req get cookies getcookies count server cookies servercookies get cookie count getcookiecount count string session cookie name sessioncookiename session config sessionconfig get session cookie name getsessioncookiename context count server cookie servercookie scookie server cookies servercookies get cookie getcookie scookie get name getname equals session cookie name sessioncookiename override requested url request is requested session id from cookie isrequestedsessionidfromcookie accept session cookie convertmb scookie get value getvalue request set requested session id setrequestedsessionid scookie get value getvalue to string tostring request set requested session cookie setrequestedsessioncookie request set requested session l setrequestedsessionurl log is debug enabled isdebugenabled log debug requested cookie session request get requested session id getrequestedsessionid request is requested session id valid isrequestedsessionidvalid replace session valid convertmb scookie get value getvalue request set requested session id setrequestedsessionid scookie get value getvalue to string tostring character conversion uri converturi message bytes messagebytes uri request request exception byte chunk bytechunk uri get byte chunk getbytechunk length get length getlength char chunk charchunk uri get char chunk getcharchunk all ocate allocate length string enc connector geturiencoding enc c converter cconverter conv request geturiconverter conv conv c converter cconverter enc request seturiconverter conv conv recycle i o exception ioexception log error invalid uri encoding http connector seturiencoding conv conv convert uri set chars setchars get buffer getbuffer get start getstart get length getlength i o exception ioexception ioe request get response getresponse send error senderror http servlet response httpservletresponse bad request encoding fast conversion iso bbuf get buffer getbuffer cbuf get buffer getbuffer start get start getstart length cbuf bbuf start xff uri set chars setchars cbuf length character conversion ascii message bytes messagebytes convertmb message bytes messagebytes meaningful bytes get type gettype message bytes messagebytes bytes byte chunk bytechunk get byte chunk getbytechunk char chunk charchunk get char chunk getcharchunk length get length getlength all ocate allocate length encoding fast conversion bbuf get buffer getbuffer cbuf get buffer getbuffer start get start getstart length cbuf bbuf start xff set chars setchars cbuf length normalize uri method normal izes normalizes method root uri param urimb uri normalized normalize message bytes messagebytes urimb byte chunk bytechunk uribc urimb get byte chunk getbytechunk uribc get bytes getbytes start uribc get start getstart uribc get end getend empty url accept able acceptable start url accept able acceptable start start pos check pos start pos pos pos backslash pos pos start pos start pos pos pos pos pos copy bytes copybytes pos pos pos start uribc set end setend uribc index of indexof copy bytes copybytes start start start uribc set end setend uribc index of indexof pos start pos pos pos pos copy bytes copybytes start start start uribc set end setend check normalize checknormalize message bytes messagebytes urimb char chunk charchunk uricc urimb get char chunk getcharchunk uricc get chars getchars start uricc get start getstart uricc get end getend pos pos start pos pos pos pos pos start pos pos pos pos start uricc index of indexof uricc index of indexof copy bytes copybytes dest src len pos pos len pos pos dest pos src