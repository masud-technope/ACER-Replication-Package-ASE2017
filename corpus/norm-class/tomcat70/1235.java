licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util net java file java file input stream fileinputstream java io exception ioexception java net inet socket address inetsocketaddress java net server socket serversocket java net socket java net socket timeout exception sockettimeoutexception java nio byte buffer bytebuffer java nio channels cancelled key exception cancelledkeyexception java nio channels file channel filechannel java nio channels selection key selectionkey java nio channels selector java nio channels server socket channel serversocketchannel java nio channels socket channel socketchannel java nio channels writable byte channel writablebytechannel java util concurrent modification exception concurrentmodificationexception java util iterator java util locale java util java util concurrent concurrent linked queue concurrentlinkedqueue java util concurrent count down latch countdownlatch java util concurrent rejected execution exception rejectedexecutionexception java util concurrent time unit timeunit java util concurrent atomic atomic integer atomicinteger java util concurrent atomic atomic long atomiclong javax net ssl key manager keymanager javax net ssl ssl context sslcontext javax net ssl ssl engine sslengine javax net ssl ssl session context sslsessioncontext javax net ssl key manager keymanager org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util exception utils exceptionutils org apache tomcat util int rospection utils introspectionutils org apache tomcat util net abstract endpoint abstractendpoint handler socket state socketstate org apache tomcat util net secure nio channel secureniochannel application buffer handler applicationbufferhandler org apache tomcat util net jsse nio x niox key manager keymanager nio tail ored tailored thread pool providing services socket accept or acceptor thread socket poller thread worker threads pool switching java opportunity virtual machine thread pool author mladen turk author remy maucherat author filip hanik nio endpoint nioendpoint abstract endpoint abstractendpoint nio channel niochannel constants log log log factory logfactory get log getlog nio endpoint nioendpoint register int erest interest register callback int erest interest callback fields nio selector pool nioselectorpool selector pool selectorpool nio selector pool nioselectorpool server socket pointer server socket channel serversocketchannel server sock serversock send file use sendfile usesendfile size oom parachute oom parachute oomparachute oom parachute oom error release data jvm ins tantly instantly chunk data recover oom parachute data oomparachutedata string all ocated allocated string oom parachute msg oomparachutemsg severe memory usage parachute existent system start failing track oom warning messages last parachute check lastparachutecheck system current time millis currenttimemillis count down latch countdownlatch stop latch stoplatch cache socket processor socketprocessor objects concurrent linked queue concurrentlinkedqueue socket processor socketprocessor processor cache processorcache concurrent linked queue concurrentlinkedqueue socket processor socketprocessor serialversionuid atomic integer atomicinteger size atomic integer atomicinteger override offer socket processor socketprocessor reset offer socket properties socketproperties get processor cache getprocessorcache size socket properties socketproperties get processor cache getprocessorcache avoid growing cache add stopped running paused offer result offer result size increment and get incrementandget result override socket processor socketprocessor poll socket processor socketprocessor result poll result size decrement and get decrementandget result override clear clear size cache key attachment objects concurrent linked queue concurrentlinkedqueue key attachment keyattachment key cache keycache concurrent linked queue concurrentlinkedqueue key attachment keyattachment serialversionuid atomic integer atomicinteger size atomic integer atomicinteger override offer key attachment keyattachment reset offer socket properties socketproperties get key cache getkeycache size socket properties socketproperties get key cache getkeycache avoid growing cache add stopped running paused offer result offer result size increment and get incrementandget result override key attachment keyattachment poll key attachment keyattachment result poll result size decrement and get decrementandget result override clear clear size cache poller events concurrent linked queue concurrentlinkedqueue poller event pollerevent event cache eventcache concurrent linked queue concurrentlinkedqueue poller event pollerevent serialversionuid atomic integer atomicinteger size atomic integer atomicinteger override offer poller event pollerevent reset offer socket properties socketproperties get event cache geteventcache size socket properties socketproperties get event cache geteventcache avoid growing cache add stopped running paused offer result offer result size increment and get incrementandget result override poller event pollerevent poll poller event pollerevent result poll result size decrement and get decrementandget result override clear clear size byte buffer bytebuffer cache channel holds buf fers buffers ssl holds concurrent linked queue concurrentlinkedqueue nio channel niochannel nio channels niochannels concurrent linked queue concurrentlinkedqueue nio channel niochannel serialversionuid atomic integer atomicinteger size atomic integer atomicinteger atomic integer atomicinteger bytes atomic integer atomicinteger override offer nio channel niochannel socket offer socket properties socketproperties get buffer pool getbufferpool size socket properties socketproperties get buffer pool getbufferpool offer offer socket properties socketproperties get buffer pool size getbufferpoolsize bytes socket get buffer size getbuffersize socket properties socketproperties get buffer pool size getbufferpoolsize avoid growing cache add stopped running paused offer result offer socket result size increment and get incrementandget bytes add and get addandget socket get buffer size getbuffersize result override nio channel niochannel poll nio channel niochannel result poll result size decrement and get decrementandget bytes add and get addandget result get buffer size getbuffersize result override clear clear size bytes properties properties intro spec ted introspected override set property setproperty string string string selector pool name selectorpoolname selector pool selectorpool starts with startswith selector pool name selectorpoolname int rospection utils introspectionutils set property setproperty selector pool selectorpool substring selector pool name selectorpoolname length set property setproperty exception log error unable attribute priority poller threads poller thread priority pollerthreadpriority thread norm priority set poller thread priority setpollerthreadpriority poller thread priority pollerthreadpriority poller thread priority pollerthreadpriority poller thread priority pollerthreadpriority get poller thread priority getpollerthreadpriority poller thread priority pollerthreadpriority handling accepted sockets handler handler set handler sethandler handler handler handler handler handler get handler gethandler handler comet request handling use comet usecomet set use comet setusecomet use comet usecomet use comet usecomet use comet usecomet override get use comet getusecomet use comet usecomet override get use comet timeout getusecomettimeout get use comet getusecomet override get use polling getusepolling supported poller thread count poller thread count pollerthreadcount math min runtime get runtime getruntime available processors availableprocessors set poller thread count setpollerthreadcount poller thread count pollerthreadcount poller thread count pollerthreadcount poller thread count pollerthreadcount get poller thread count getpollerthreadcount poller thread count pollerthreadcount selector timeout selectortimeout set selector timeout setselectortimeout timeout selector timeout selectortimeout timeout get selector timeout getselectortimeout selector timeout selectortimeout socket poller poller pollers atomic integer atomicinteger poller rotater pollerrotater atomic integer atomicinteger poller robin fashion poller get poller getpoller idx math abs poller rotater pollerrotater increment and get incrementandget pollers length pollers idx set selector pool setselectorpool nio selector pool nioselectorpool selector pool selectorpool selector pool selectorpool selector pool selectorpool set socket properties setsocketproperties socket properties socketproperties socket properties socketproperties socket properties socketproperties socket properties socketproperties set use sendfile setusesendfile use sendfile usesendfile use sendfile usesendfile use sendfile usesendfile defer accept deferaccept supported override get defer accept getdeferaccept supported set oom parachute setoomparachute oom parachute oomparachute oom parachute oomparachute oom parachute oomparachute set oom parachute data setoomparachutedata oom parachute data oomparachutedata oom parachute data oomparachutedata oom parachute data oomparachutedata ssl context sslcontext ssl context sslcontext ssl context sslcontext getsslcontext ssl context sslcontext setsslcontext ssl context sslcontext ssl context sslcontext string enabled ciphers enabledciphers string enabled protocols enabledprotocols port override get local port getlocalport server socket channel serversocketchannel ssc server sock serversock ssc server socket serversocket ssc socket get local port getlocalport oom parachute methods check parachute checkparachute para reclaim parachute reclaimparachute para system current time millis currenttimemillis last parachute check lastparachutecheck log fatal oom parachute msg oomparachutemsg throwable exception utils exceptionutils handle throwable handlethrowable system err println oom parachute msg oomparachutemsg last parachute check lastparachutecheck system current time millis currenttimemillis reclaim parachute reclaimparachute force oom parachute data oomparachutedata oom parachute oomparachute force runtime get runtime getruntime free memory freememory oom parachute oomparachute oom parachute data oomparachutedata oom parachute oomparachute oom parachute data oomparachutedata release caches releasecaches key cache keycache clear nio channels niochannels clear processor cache processorcache clear handler handler recycle methods number keep alive keepalive sockets get keep alive count getkeepalivecount pollers sum pollers length sum pollers get key count getkeycount sum lifecycle methods initialize endpoint override bind exception server sock serversock server socket channel serversocketchannel open socket properties socketproperties set properties setproperties server sock serversock socket inet socket address inetsocketaddress add r addr get address getaddress inet socket address inetsocketaddress get address getaddress get port getport inet socket address inetsocketaddress get port getport server sock serversock socket bind add r addr get backlog getbacklog mimic apr behavior server sock serversock configure blocking configureblocking server sock serversock socket set so timeout setsotimeout get socket properties getsocketproperties get so timeout getsotimeout initialize thread count defaults accept or acceptor poller accept or thread count acceptorthreadcount fixme does n doesn work multiple accept threads accept or thread count acceptorthreadcount poller thread count pollerthreadcount minimum poller thread poller thread count pollerthreadcount stop latch stoplatch count down latch countdownlatch poller thread count pollerthreadcount initialize ssl needed issslenabled ssl util sslutil ssl util sslutil handler get ssl implementation getsslimplementation getsslutil ssl context sslcontext ssl util sslutil createsslcontext ssl context sslcontext init wrap ssl util sslutil get key managers getkeymanagers ssl util sslutil get trust managers gettrustmanagers ssl session context sslsessioncontext session context sessioncontext ssl context sslcontext get server session context getserversessioncontext session context sessioncontext ssl util sslutil configure session context configuresessioncontext session context sessioncontext determine cipher suites protocols enable enabled ciphers enabledciphers ssl util sslutil get enable able ciphers getenableableciphers ssl context sslcontext enabled protocols enabledprotocols ssl util sslutil get enable able protocols getenableableprotocols ssl context sslcontext oom parachute oomparachute reclaim parachute reclaimparachute selector pool selectorpool open key manager keymanager wrap key manager keymanager managers managers key manager keymanager result key manager keymanager managers length result length managers key manager keymanager get key alias getkeyalias string key alias keyalias get key alias getkeyalias jks keys tores keystores convert alias jks equals ignore case equalsignorecase get keys tore type getkeystoretype key alias keyalias key alias keyalias to lower case tolowercase locale english result nio x niox key manager keymanager key manager keymanager managers key alias keyalias result managers result start nio endpoint creating accept or acceptor poller threads override start internal startinternal exception running running paused create worker collection get executor getexecutor create executor createexecutor initialize connection latch initializeconnectionlatch start poller threads pollers poller get poller thread count getpollerthreadcount pollers length pollers poller thread poller thread pollerthread thread pollers get name getname client poller clientpoller poller thread pollerthread set priority setpriority thread priority threadpriority poller thread pollerthread set daemon setdaemon poller thread pollerthread start start acceptor threads startacceptorthreads endpoint processing threads override stop internal stopinternal release connection latch releaseconnectionlatch paused pause running running unlock accept unlockaccept pollers pollers length pollers pollers destroy pollers stop latch stoplatch await selector timeout selectortimeout time unit timeunit milliseconds interrupted exception interruptedexception ignore event cache eventcache clear key cache keycache clear nio channels niochannels clear processor cache processorcache clear shutdown executor shutdownexecutor deallocate nio memory pools close server socket override unbind exception log is debug enabled isdebugenabled log debug destroy init iated initiated inet socket address inetsocketaddress get address getaddress get port getport running close server socket server sock serversock socket close server sock serversock close server sock serversock ssl context sslcontext release caches releasecaches selector pool selectorpool close log is debug enabled isdebugenabled log debug destroy completed inet socket address inetsocketaddress get address getaddress get port getport methods get write buf size getwritebufsize socket properties socketproperties get tx buf size gettxbufsize get read buf size getreadbufsize socket properties socketproperties get rx buf size getrxbufsize nio selector pool nioselectorpool get selector pool getselectorpool selector pool selectorpool override get use sendfile getusesendfile use sendfile usesendfile get oom parachute getoomparachute oom parachute oomparachute get oom parachute data getoomparachutedata oom parachute data oomparachutedata override abstract endpoint abstractendpoint acceptor create acceptor createacceptor acceptor process connection set socket options setsocketoptions socket channel socketchannel socket process connection disable blocking apr style gonna polling socket configure blocking configureblocking socket sock socket socket socket properties socketproperties set properties setproperties sock nio channel niochannel channel nio channels niochannels poll channel ssl setup ssl context sslcontext ssl engine sslengine engine createsslengine app buf size appbufsize engine get session getsession get application buffer size getapplicationbuffersize nio buffer handler niobufferhandler buf handler bufhandler nio buffer handler niobufferhandler math max app buf size appbufsize socket properties socketproperties get app read buf size getappreadbufsize math max app buf size appbufsize socket properties socketproperties get app write buf size getappwritebufsize socket properties socketproperties get direct buffer getdirectbuffer channel secure nio channel secureniochannel socket engine buf handler bufhandler selector pool selectorpool normal tcp setup nio buffer handler niobufferhandler buf handler bufhandler nio buffer handler niobufferhandler socket properties socketproperties get app read buf size getappreadbufsize socket properties socketproperties get app write buf size getappwritebufsize socket properties socketproperties get direct buffer getdirectbuffer channel nio channel niochannel socket buf handler bufhandler channel setiochannel socket channel secure nio channel secureniochannel ssl engine sslengine engine createsslengine secure nio channel secureniochannel channel reset engine channel reset get poller getpoller register channel throwable exception utils exceptionutils handle throwable handlethrowable log error throwable exception utils exceptionutils handle throwable handlethrowable ssl engine sslengine createsslengine ssl engine sslengine engine ssl context sslcontext createsslengine equals get client auth getclientauth engine set need client auth setneedclientauth engine set want client auth setwantclientauth equals get client auth getclientauth equals get client auth getclientauth engine set need client auth setneedclientauth equals get client auth getclientauth engine set want client auth setwantclientauth engine set use client mode setuseclientmode engine set enabled cipher suites setenabledciphersuites enabled ciphers enabledciphers engine set enabled protocols setenabledprotocols enabled protocols enabledprotocols configure use server cipher suites order configureuseserverciphersuitesorder engine engine returns worker thread processing is worker available isworkeravailable override process socket async processsocketasync socket wrapper socketwrapper nio channel niochannel socket wrapper socketwrapper socket status socketstatus socket status socketstatus dispatch for event dispatchforevent socket wrapper socketwrapper get socket getsocket socket status socketstatus dispatch for event dispatchforevent nio channel niochannel socket socket status socketstatus status dispatch dispatch status socket status socketstatus open read socket get poller getpoller add socket callback process socket processsocket socket status dispatch process socket processsocket nio channel niochannel socket socket status socketstatus status dispatch key attachment keyattachment attachment key attachment keyattachment socket get attachment getattachment attachment reset reg attachment set comet notify setcometnotify socket processor socketprocessor processor cache processorcache poll socket processor socketprocessor socket status reset socket status dispatch get executor getexecutor get executor getexecutor execute rejected execution exception rejectedexecutionexception log warn socket processing request rejected socket throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring endpoint process fail override remove waiting request removewaitingrequest socket wrapper socketwrapper nio channel niochannel socket wrapper socketwrapper override log get log getlog log background thread list ens listens incoming tcp connections hands processor acceptor abstract endpoint abstractendpoint acceptor override error delay errordelay loop receive shutdown command running loop endpoint paused paused running acceptor state acceptorstate paused thread sleep interrupted exception interruptedexception running acceptor state acceptorstate running reached max connections wait count up or await connection countuporawaitconnection socket channel socketchannel socket accept incoming connection server socket socket server sock serversock accept io exception ioexception ioe count down connection countdownconnection error delay errordelay handle exception with delay handleexceptionwithdelay error delay errordelay ioe successful accept reset error delay error delay errordelay successful running paused set socket options setsocketoptions socket count down connection countdownconnection close socket closesocket socket count down connection countdownconnection close socket closesocket socket socket timeout exception sockettimeoutexception io exception ioexception running log error get string getstring endpoint accept fail out of memory error outofmemoryerror oom oom parachute data oomparachutedata release caches releasecaches log error oom throwable oomt system err println oom parachute msg oomparachutemsg oomt print stack trace printstacktrace throwable lets hope we dont get here letshopewedontgethere exception utils exceptionutils handle throwable handlethrowable lets hope we dont get here letshopewedontgethere throwable lets hope we dont get here letshopewedontgethere exception utils exceptionutils handle throwable handlethrowable lets hope we dont get here letshopewedontgethere throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring endpoint accept fail acceptor state acceptorstate ended close socket closesocket socket channel socketchannel socket socket socket close io exception ioexception ioe log is debug enabled isdebugenabled log debug ioe socket close io exception ioexception ioe log is debug enabled isdebugenabled log debug ioe poller event pollerevent cache able cacheable object poller events avoid poller event pollerevent runnable nio channel niochannel socket int erest ops interestops key attachment keyattachment key poller event pollerevent nio channel niochannel key attachment keyattachment int ops intops reset int ops intops reset nio channel niochannel key attachment keyattachment int ops intops socket int erest ops interestops int ops intops key reset reset override int erest ops interestops register socket getiochannel register socket get poller getpoller get selector getselector selection key selectionkey read key exception log error selection key selectionkey key socket getiochannel key for keyfor socket get poller getpoller get selector getselector key key cancelled socket closure removed selector processed count connections point won counted socket closed socket get poller getpoller get endpoint getendpoint count down connection countdownconnection key attachment keyattachment att key attachment keyattachment key attachment att handle callback flag att is comet iscomet int erest ops interestops callback callback att set comet notify setcometnotify att set comet notify setcometnotify remove callback flag int erest ops interestops int erest ops interestops callback prevent timeout att access registering key start reset fairness counter ops key int erest ops interestops int erest ops interestops att int erest ops interestops ops key int erest ops interestops ops socket get poller getpoller cancelled key cancelledkey key socket status socketstatus error cancelled key exception cancelledkeyexception ckx socket get poller getpoller cancelled key cancelledkey key socket status socketstatus disconnect exception ignore override string to string tostring to string tostring int ops intops int erest ops interestops poller poller runnable selector selector concurrent linked queue concurrentlinkedqueue runnable events concurrent linked queue concurrentlinkedqueue runnable close optimize expiration handling next expiration nextexpiration atomic long atomiclong wakeup counter wakeupcounter atomic long atomiclong key count keycount poller io exception ioexception selector selector open isn thread safe http bugs sun view bug bug fixed selector selector open get key count getkeycount key count keycount selector get selector getselector selector nio endpoint nioendpoint get endpoint getendpoint nio endpoint nioendpoint destroy poller destroy wait poll time polltime poller threads exit parallel closure sockets poller problems close selector wakeup tomcat deprecated deprecated add event addevent runnable event events offer event wakeup counter wakeupcounter increment and get incrementandget selector wakeup unused removed tomcat deprecated deprecated comet int erest cometinterest nio channel niochannel socket key attachment keyattachment att key attachment keyattachment socket get attachment getattachment add socket att get comet ops getcometops att get comet ops getcometops callback callback force check faster callback next expiration nextexpiration selector wakeup add socket pool poller socket temporary array polled maximum amount time equal poll time polltime cases latency param socket add poller add nio channel niochannel socket add socket selection key selectionkey read add nio channel niochannel socket int erest ops interestops poller event pollerevent event cache eventcache poll poller event pollerevent socket int erest ops interestops reset socket int erest ops interestops add event addevent close process socket processsocket socket socket status socketstatus processes events event queue poller code code events processed code code queue empty events result runnable events poll result poller event pollerevent poller event pollerevent reset event cache eventcache offer poller event pollerevent throwable log error result register nio channel niochannel socket socket set poller setpoller key attachment keyattachment key key cache keycache poll key attachment keyattachment key key key attachment keyattachment socket reset socket get socket properties getsocketproperties get so timeout getsotimeout set keep alive left setkeepaliveleft nio endpoint nioendpoint get max keep alive requests getmaxkeepaliverequests set secure setsecure issslenabled poller event pollerevent event cache eventcache poll register turns int erest ops interestops selection key selectionkey read poller event pollerevent socket register reset socket register add event addevent key attachment keyattachment cancelled key cancelledkey selection key selectionkey key socket status socketstatus status dispatch key attachment keyattachment key key attachment keyattachment key attachment is comet iscomet status comet event takes care clean process socket processsocket get channel getchannel status dispatch avoid loop set comet setcomet status socket status socketstatus timeout process socket processsocket get channel getchannel status don close comet timeout don dispatch lines can celling cancelling key process socket processsocket get channel getchannel status key attachment keyattachment key attach handler release handler release socket channel socketchannel key channel key is valid isvalid key cancel key channel is open isopen key channel close exception log is debug enabled isdebugenabled log debug get string getstring endpoint debug channel close fail channelclosefail get socket getsocket close exception log is debug enabled isdebugenabled log debug get string getstring endpoint debug socket close fail socketclosefail get sendfile data getsendfiledata get sendfile data getsendfiledata fchannel get sendfile data getsendfiledata fchannel is open isopen get sendfile data getsendfiledata fchannel close exception ignore reset count down connection countdownconnection throwable exception utils exceptionutils handle throwable handlethrowable log is debug enabled isdebugenabled log error background thread list ens listens incoming tcp connections hands processor override loop destroy called loop endpoint paused paused close thread sleep interrupted exception interruptedexception has events hasevents time terminate close events timeout selector close io exception ioexception ioe log error get string getstring endpoint nio selector close fail selectorclosefail ioe has events hasevents events close wakeup counter wakeupcounter get and set getandset stuff blocking select key count keycount selector select now selectnow key count keycount selector select selector timeout selectortimeout wakeup counter wakeupcounter close events timeout selector close io exception ioexception ioe log error get string getstring endpoint nio selector close fail selectorclosefail ioe null pointer exception nullpointerexception log is debug enabled isdebugenabled log debug encountered sun bug windows jdk wakeup counter wakeupcounter selector cancelled key exception cancelledkeyexception log is debug enabled isdebugenabled log debug encountered sun bug windows jdk wakeup counter wakeupcounter selector throwable exception utils exceptionutils handle throwable handlethrowable log error time d timed woke process events key count keycount has events hasevents has events hasevents events iterator selection key selectionkey iterator key count keycount selector selected keys selectedkeys iterator active event iterator iterator has next hasnext selection key selectionkey iterator key attachment keyattachment attachment key attachment keyattachment attachment cancelled key cancelledkey attachment iterator remove attachment access iterator remove process key processkey attachment process time outs timeouts timeout key count keycount has events hasevents oom parachute oomparachute oom parachute data oomparachutedata check parachute checkparachute out of memory error outofmemoryerror oom oom parachute data oomparachutedata release caches releasecaches log error oom throwable oomt system err println oom parachute msg oomparachutemsg oomt print stack trace printstacktrace throwable lets hope we dont get here letshopewedontgethere exception utils exceptionutils handle throwable handlethrowable lets hope we dont get here letshopewedontgethere notify all notifyall stop latch stoplatch count down countdown process key processkey selection key selectionkey key attachment keyattachment attachment result close cancelled key cancelledkey socket status socketstatus attachment comet is valid isvalid attachment don time valid sockets attachment access remember attach attachment nio channel niochannel channel attachment get channel getchannel is readable isreadable is writable iswritable attachment get sendfile data getsendfiledata process sendfile processsendfile attachment is worker available isworkeravailable unreg attachment ready ops readyops close socket closesocket read write is readable isreadable process socket processsocket channel socket status socketstatus open read close socket closesocket close socket closesocket is writable iswritable process socket processsocket channel socket status socketstatus open write close socket closesocket close socket closesocket cancelled key cancelledkey socket status socketstatus disconnect result invalid key cancelled key cancelledkey socket status socketstatus error cancelled key exception cancelledkeyexception ckx cancelled key cancelledkey socket status socketstatus error throwable exception utils exceptionutils handle throwable handlethrowable log error result sendfile state sendfilestate process sendfile processsendfile selection key selectionkey key attachment keyattachment attachment called by processor calledbyprocessor nio channel niochannel unreg attachment ready ops readyops sendfile data sendfiledata attachment get sendfile data getsendfiledata log is trace enabled istraceenabled log trace processing send file file name filename setup file channel fchannel file file file name filename exists cancelled key cancelledkey socket status socketstatus error sendfile state sendfilestate error closed channel closed suppress warnings suppresswarnings resource file input stream fileinputstream fis file input stream fileinputstream fchannel fis get channel getchannel configure output channel attachment get channel getchannel ssl channel writable byte channel writablebytechannel secure nio channel secureniochannel getiochannel data buffer get outbound remaining getoutboundremaining flush outbound flushoutbound attachment access written fchannel transfer to transferto pos length written pos written length written attachment access check length correctly fchannel size pos io exception ioexception sendfile configured send data length get outbound remaining getoutboundremaining log is debug enabled isdebugenabled log debug send file complete file name filename attachment set sendfile data setsendfiledata fchannel close exception ignore event sendfile completes called by processor calledbyprocessor keep alive keepalive log is debug enabled isdebugenabled log debug connection alive registering read reg attachment selection key selectionkey read log is debug enabled isdebugenabled log debug send file connection closed cancelled key cancelledkey socket status socketstatus sendfile state sendfilestate log is debug enabled isdebugenabled log debug write sendfile file name filename called by processor calledbyprocessor add attachment get channel getchannel selection key selectionkey write reg attachment selection key selectionkey write sendfile state sendfilestate pending io exception ioexception log is debug enabled isdebugenabled log debug unable complete sendfile request cancelled key cancelledkey socket status socketstatus error sendfile state sendfilestate error throwable log error cancelled key cancelledkey socket status socketstatus error sendfile state sendfilestate error unreg selection key selectionkey key attachment keyattachment attachment ready ops readyops don multiple threads messing socket reg attachment int erest ops interestops ready ops readyops reg selection key selectionkey key attachment keyattachment attachment into ps intops int erest ops interestops into ps intops attachment int erest ops interestops into ps intops attachment set comet ops setcometops into ps intops timeout key count keycount has events hasevents system current time millis currenttimemillis server socket closed key count keycount has events hasevents next expiration nextexpiration close timeout selection key selectionkey selector key count keycount iterator selection key selectionkey iter iterator iter has next hasnext selection key selectionkey key iter key count keycount key attachment keyattachment key attachment keyattachment key attachment don support attach ments attachments cancelled key cancelledkey key socket status socketstatus error get error geterror todo cancelled key cancelledkey key socket status socketstatus error is comet iscomet get comet notify getcometnotify set comet notify setcometnotify avoid multiple calls reregistered invocation reg key process socket processsocket get channel getchannel socket status socketstatus open callback process socket processsocket get channel getchannel socket status socketstatus disconnect process socket processsocket get channel getchannel socket status socketstatus open read process socket processsocket get channel getchannel socket status socketstatus disconnect int erest ops interestops selection key selectionkey read selection key selectionkey read int erest ops interestops selection key selectionkey write selection key selectionkey write timeout sockets waiting read delta get last access getlastaccess timeout get timeout gettimeout is time dout istimedout timeout delta timeout close key int erest ops interestops avoid duplicate calls int erest ops interestops process key processkey key is time dout istimedout key int erest ops interestops avoid duplicate timeout calls int erest ops interestops cancelled key cancelledkey key socket status socketstatus timeout is async isasync is comet iscomet close key int erest ops interestops avoid duplicate calls int erest ops interestops process key processkey key is async isasync get timeout gettimeout async requests timeout timeout delta get last access getlastaccess timeout get timeout gettimeout socket properties socketproperties get so timeout getsotimeout get timeout gettimeout is time dout istimedout delta timeout is time dout istimedout prevent subsequent time outs timeouts timeout event takes process access max process socket processsocket get channel getchannel socket status socketstatus timeout cancelled key exception cancelledkeyexception ckx cancelled key cancelledkey key socket status socketstatus error concurrent modification exception concurrentmodificationexception cme log warn get string getstring endpoint nio timeout cme timeoutcme cme logging purposes prev exp prevexp next expiration nextexpiration next expiration nextexpiration system current time millis currenttimemillis socket properties socketproperties get timeout interval gettimeoutinterval log is trace enabled istraceenabled log trace timeout completed processed key count keycount next expiration nextexpiration prev exp prevexp key count keycount key count keycount has events hasevents has events hasevents eval prev exp prevexp key count keycount has events hasevents close key attachment key attachment keyattachment socket wrapper socketwrapper nio channel niochannel key attachment keyattachment nio channel niochannel channel channel reset poller poller nio channel niochannel channel so timeout sotimeout reset channel so timeout sotimeout comet notify cometnotify comet ops cometops selection key selectionkey read int erest ops interestops poller poller last registered lastregistered sendfile data sendfiledata read latch readlatch read latch readlatch get count getcount read latch readlatch count down countdown exception ignore read latch readlatch sendfile data sendfiledata write latch writelatch write latch writelatch get count getcount write latch writelatch count down countdown exception ignore write latch writelatch set write timeout setwritetimeout so timeout sotimeout reset reset poller get poller getpoller poller set poller setpoller poller poller poller poller set comet notify setcometnotify notify comet notify cometnotify notify get comet notify getcometnotify comet notify cometnotify deprecated unused read removed tomcat deprecated set comet ops setcometops ops comet ops cometops ops deprecated unused removed tomcat deprecated get comet ops getcometops comet ops cometops nio channel niochannel get channel getchannel get socket getsocket set channel setchannel nio channel niochannel channel socket channel poller poller int erest ops interestops int erest ops interestops int erest ops interestops int erest ops interestops ops int erest ops interestops ops ops count down latch countdownlatch get read latch getreadlatch read latch readlatch count down latch countdownlatch get write latch getwritelatch write latch writelatch count down latch countdownlatch reset latch resetlatch count down latch countdownlatch latch latch latch get count getcount illegal state exception illegalstateexception latch count reset read latch resetreadlatch read latch readlatch reset latch resetlatch read latch readlatch reset write latch resetwritelatch write latch writelatch reset latch resetlatch write latch writelatch count down latch countdownlatch start latch startlatch count down latch countdownlatch latch cnt latch latch get count getcount count down latch countdownlatch cnt illegal state exception illegalstateexception latch count start read latch startreadlatch cnt read latch readlatch start latch startlatch read latch readlatch cnt start write latch startwritelatch cnt write latch writelatch start latch startlatch write latch writelatch cnt await latch awaitlatch count down latch countdownlatch latch timeout time unit timeunit unit interrupted exception interruptedexception latch illegal state exception illegalstateexception latch latch await timeout unit await read latch awaitreadlatch timeout time unit timeunit unit interrupted exception interruptedexception await latch awaitlatch read latch readlatch timeout unit await write latch awaitwritelatch timeout time unit timeunit unit interrupted exception interruptedexception await latch awaitlatch write latch writelatch timeout unit deprecated unused removed tomcat deprecated get last registered getlastregistered last registered lastregistered deprecated unused removed tomcat deprecated set last registered setlastregistered reg last registered lastregistered reg set sendfile data setsendfiledata sendfile data sendfiledata sendfile data sendfiledata sendfile data sendfiledata get sendfile data getsendfiledata sendfile data sendfiledata set write timeout setwritetimeout write timeout writetimeout write timeout writetimeout write timeout writetimeout get write timeout getwritetimeout write timeout writetimeout comet comet ops cometops selection key selectionkey read comet notify cometnotify count down latch countdownlatch read latch readlatch count down latch countdownlatch write latch writelatch sendfile data sendfiledata sendfile data sendfiledata write timeout writetimeout application buffer handler nio buffer handler niobufferhandler application buffer handler applicationbufferhandler byte buffer bytebuffer read buf readbuf byte buffer bytebuffer write buf writebuf nio buffer handler niobufferhandler read size readsize write size writesize direct direct read buf readbuf byte buffer bytebuffer all ocate direct allocatedirect read size readsize write buf writebuf byte buffer bytebuffer all ocate direct allocatedirect write size writesize read buf readbuf byte buffer bytebuffer all ocate allocate read size readsize write buf writebuf byte buffer bytebuffer all ocate allocate write size writesize override byte buffer bytebuffer expand byte buffer bytebuffer buffer remaining buffer override byte buffer bytebuffer get read buffer getreadbuffer read buf readbuf override byte buffer bytebuffer get write buffer getwritebuffer write buf writebuf bar e bare bones socket processing thread data stored thread with attributes threadwithattributes extra folders alt ernately alternately thread local fields handler abstract endpoint abstractendpoint handler socket state socketstate process socket wrapper socketwrapper nio channel niochannel socket socket status socketstatus status release socket wrapper socketwrapper nio channel niochannel socket release socket channel socketchannel socket ssl implementation sslimplementation get ssl implementation getsslimplementation equivalent worker simply external executor thread pool socket processor socketprocessor runnable nio channel niochannel socket socket status socketstatus status socket processor socketprocessor nio channel niochannel socket socket status socketstatus status reset socket status reset nio channel niochannel socket socket status socketstatus status socket socket status status override selection key selectionkey key socket getiochannel key for keyfor socket get poller getpoller get selector getselector key attachment keyattachment key key attachment keyattachment key attachment nio configured is upgrade d isupgraded socket status socketstatus open write status get write thread lock getwritethreadlock do run dorun key socket do run dorun key do run dorun selection key selectionkey key key attachment keyattachment handshake key poller stopped socket is handshake complete ishandshakecomplete status socket status socketstatus handshake handshake socket handshake key is readable isreadable key is writable iswritable handshake process reads writes socket status open write handshake completes handshake socket opened status open read completes handshake completes status socket status socketstatus open read io exception ioexception handshake log is debug enabled isdebugenabled log debug error ssl handshake cancelled key exception cancelledkeyexception ckx handshake handshake socket state socketstate socket state socketstate open process request socket status handler process socket status socketstatus open read handler process status socket state socketstate closed close socket pool close socket key socket status socketstatus error handshake close socket key socket status socketstatus disconnect get poller getpoller add socket handshake cancelled key exception cancelledkeyexception socket get poller getpoller cancelled key cancelledkey key out of memory error outofmemoryerror oom oom parachute data oomparachutedata log error oom socket socket get poller getpoller cancelled key cancelledkey key socket status socketstatus error release caches releasecaches throwable oomt system err println oom parachute msg oomparachutemsg oomt print stack trace printstacktrace throwable lets hope we dont get here letshopewedontgethere exception utils exceptionutils handle throwable handlethrowable lets hope we dont get here letshopewedontgethere virtual machine error virtualmachineerror vme exception utils exceptionutils handle throwable handlethrowable vme throwable log error socket socket get poller getpoller cancelled key cancelledkey key socket status socketstatus error socket status cache running paused processor cache processorcache offer close key attachment keyattachment nio channel niochannel socket selection key selectionkey key socket status socketstatus socket status socketstatus set comet setcomet socket get poller getpoller cancelled key cancelledkey key socket status socketstatus running paused nio channels niochannels offer socket running paused key cache keycache offer exception log error sendfile data sendfiledata sendfile data sendfiledata file string file name filename file channel filechannel fchannel pos length keep alive keepalive flag keep alive keepalive