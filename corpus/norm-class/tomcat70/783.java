licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat websocket java eof exception eofexception java io exception ioexception java nio byte buffer bytebuffer java nio channels async hronous socket channel asynchronoussocketchannel java nio channels completion handler completionhandler java util concurrent count down latch countdownlatch java util concurrent execution exception executionexception java util concurrent executor service executorservice java util concurrent executors java util concurrent java util concurrent thread factory threadfactory java util concurrent time unit timeunit java util concurrent timeout exception timeoutexception java util concurrent atomic atomic boolean atomicboolean java util concurrent atomic atomic integer atomicinteger javax net ssl ssl engine sslengine javax net ssl ssl engine result sslengineresult javax net ssl ssl engine result sslengineresult handshake status handshakestatus javax net ssl ssl engine result sslengineresult status javax net ssl ssl exception sslexception org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util res string manager stringmanager wraps link async hronous socket channel asynchronoussocketchannel ssl tls lot testing considered robust async channel wrapper secure asyncchannelwrappersecure async channel wrapper asyncchannelwrapper log log log factory logfactory get log getlog async channel wrapper secure asyncchannelwrappersecure string manager stringmanager string manager stringmanager get manager getmanager constants byte buffer bytebuffer dummy byte buffer bytebuffer all ocate allocate async hronous socket channel asynchronoussocketchannel socket channel socketchannel ssl engine sslengine ssl engine sslengine byte buffer bytebuffer socket read buffer socketreadbuffer byte buffer bytebuffer socket write buffer socketwritebuffer thread read write executor service executorservice executor executors new fixed thread pool newfixedthreadpool secureiothreadfactory atomic boolean atomicboolean writing atomic boolean atomicboolean atomic boolean atomicboolean reading atomic boolean atomicboolean async channel wrapper secure asyncchannelwrappersecure async hronous socket channel asynchronoussocketchannel socket channel socketchannel ssl engine sslengine ssl engine sslengine socket channel socketchannel socket channel socketchannel ssl engine sslengine ssl engine sslengine socket buffer size socketbuffersize ssl engine sslengine get session getsession get packet buffer size getpacketbuffersize socket read buffer socketreadbuffer byte buffer bytebuffer all ocate direct allocatedirect socket buffer size socketbuffersize socket write buffer socketwritebuffer byte buffer bytebuffer all ocate direct allocatedirect socket buffer size socketbuffersize override integer read byte buffer bytebuffer dst wrapper future wrapperfuture integer wrapper future wrapperfuture integer reading compare and set compareandset illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure concurrent read concurrentread read task readtask read task readtask read task readtask dst executor execute read task readtask override read byte buffer bytebuffer dst attachment completion handler completionhandler integer handler wrapper future wrapperfuture integer wrapper future wrapperfuture integer handler attachment reading compare and set compareandset illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure concurrent read concurrentread read task readtask read task readtask read task readtask dst executor execute read task readtask override integer write byte buffer bytebuffer src wrapper future wrapperfuture wrapper future wrapperfuture writing compare and set compareandset illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure concurrent write concurrentwrite write task writetask write task writetask write task writetask byte buffer bytebuffer src executor execute write task writetask integer long to integer future longtointegerfuture override write byte buffer bytebuffer srcs offset length timeout time unit timeunit unit attachment completion handler completionhandler handler wrapper future wrapperfuture wrapper future wrapperfuture handler attachment writing compare and set compareandset illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure concurrent write concurrentwrite write task writetask write task writetask write task writetask srcs offset length executor execute write task writetask override close socket channel socketchannel close io exception ioexception log info get string getstring async channel wrapper secure asyncchannelwrappersecure close fail closefail executor shutdown now shutdownnow override handshake ssl exception sslexception wrapper future wrapperfuture w future wfuture wrapper future wrapperfuture thread web socket ssl handshake thread websocketsslhandshakethread w future wfuture start w future wfuture write task writetask runnable byte buffer bytebuffer srcs offset length wrapper future wrapperfuture write task writetask byte buffer bytebuffer srcs offset length wrapper future wrapperfuture srcs srcs offset offset length length override written offset offset length byte buffer bytebuffer src srcs src has remaining hasremaining socket write buffer socketwritebuffer clear enc rypt encrypt data ssl engine result sslengineresult ssl engine sslengine wrap src socket write buffer socketwritebuffer written bytes consumed bytesconsumed status get status getstatus status status buffer overflow write bytes read source empty status closed unexpected illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure status wrap statuswrap check tasks get handshake status gethandshakestatus handshake status handshakestatus task runnable runnable ssl engine sslengine get delegate d task getdelegatedtask runnable runnable runnable ssl engine sslengine get delegate d task getdelegatedtask socket write buffer socketwritebuffer flip write to write towrite bytes produced bytesproduced to write towrite integer socket channel socketchannel write socket write buffer socketwritebuffer integer socket write socketwrite to write towrite socket write socketwrite int value intvalue writing compare and set compareandset complete value of valueof written fail illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure wrong state write wrongstatewrite exception fail read task readtask runnable byte buffer bytebuffer dest wrapper future wrapperfuture integer read task readtask byte buffer bytebuffer dest wrapper future wrapperfuture integer dest dest override read force read forceread read socket read buffer socketreadbuffer compact force read forceread force read forceread integer socket channel socketchannel read socket read buffer socketreadbuffer integer socket read socketread socket read socketread int value intvalue eof exception eofexception get string getstring async channel wrapper secure asyncchannelwrappersecure eof socket read buffer socketreadbuffer flip socket read buffer socketreadbuffer has remaining hasremaining dec rypt decrypt data buffer ssl engine result sslengineresult ssl engine sslengine unwrap socket read buffer socketreadbuffer dest read bytes produced bytesproduced status get status getstatus status bytes reading sufficient data socket read buffer socketreadbuffer support reads reading socket status buffer underflow partial data socket read buffer socketreadbuffer read data partial data processed output generated force read forceread data deal partial data read status buffer overflow clearer reading compare and set compareandset read buffer overflow exception readbufferoverflowexception ssl engine sslengine get session getsession get application buffer size getapplicationbuffersize fail illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure wrong state read wrongstateread status closed unexpected illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure status unwrap statusunwrap check tasks get handshake status gethandshakestatus handshake status handshakestatus task runnable runnable ssl engine sslengine get delegate d task getdelegatedtask runnable runnable runnable ssl engine sslengine get delegate d task getdelegatedtask force read forceread reading compare and set compareandset complete integer value of valueof read fail illegal state exception illegalstateexception get string getstring async channel wrapper secure asyncchannelwrappersecure wrong state read wrongstateread exception fail web socket ssl handshake thread websocketsslhandshakethread thread wrapper future wrapperfuture h future hfuture handshake status handshakestatus handshake status handshakestatus status result status resultstatus web socket ssl handshake thread websocketsslhandshakethread wrapper future wrapperfuture h future hfuture h future hfuture h future hfuture override ssl engine sslengine begin handshake beginhandshake compact socket read buffer socketreadbuffer position socket read buffer socketreadbuffer limit handshake status handshakestatus ssl engine sslengine get handshake status gethandshakestatus result status resultstatus status handshaking handshaking handshake status handshakestatus wrap socket write buffer socketwritebuffer clear ssl engine result sslengineresult ssl engine sslengine wrap dummy socket write buffer socketwritebuffer check result checkresult socket write buffer socketwritebuffer flip integer f write fwrite socket channel socketchannel write socket write buffer socketwritebuffer f write fwrite unwrap socket read buffer socketreadbuffer compact socket read buffer socketreadbuffer position result status resultstatus status buffer underflow integer f read fread socket channel socketchannel read socket read buffer socketreadbuffer f read fread socket read buffer socketreadbuffer flip ssl engine result sslengineresult ssl engine sslengine unwrap socket read buffer socketreadbuffer dummy check result checkresult task runnable ssl engine sslengine get delegate d task getdelegatedtask handshake status handshakestatus ssl engine sslengine get handshake status gethandshakestatus finished handshaking ssl exception sslexception todo ssl exception sslexception h future hfuture fail interrupted exception interruptedexception h future hfuture fail execution exception executionexception h future hfuture fail h future hfuture complete check result checkresult ssl engine result sslengineresult result wrap ssl exception sslexception handshake status handshakestatus result get handshake status gethandshakestatus result status resultstatus result get status getstatus result status resultstatus status wrap result status resultstatus status buffer underflow ssl exception sslexception todo wrap result bytes consumed bytesconsumed ssl exception sslexception todo wrap result bytes produced bytesproduced ssl exception sslexception todo wrapper future wrapperfuture completion handler completionhandler handler attachment result throwable throwable count down latch countdownlatch completion latch completionlatch count down latch countdownlatch wrapper future wrapperfuture wrapper future wrapperfuture completion handler completionhandler handler attachment handler handler attachment attachment complete result result result completion latch completionlatch count down countdown handler handler completed result attachment fail throwable throwable completion latch completionlatch count down countdown handler handler failed throwable attachment override cancel may int err upt if running mayinterruptifrunning support can cellation cancellation closing connection override is cancelled iscancelled support can cellation cancellation closing connection override is done isdone completion latch completionlatch get count getcount override interrupted exception interruptedexception execution exception executionexception completion latch completionlatch await throwable execution exception executionexception throwable result override timeout time unit timeunit unit interrupted exception interruptedexception execution exception executionexception timeout exception timeoutexception latch result latchresult completion latch completionlatch await timeout unit latch result latchresult timeout exception timeoutexception throwable execution exception executionexception throwable result long to integer future longtointegerfuture integer wrapped long to integer future longtointegerfuture wrapped wrapped wrapped override cancel may int err upt if running mayinterruptifrunning wrapped cancel may int err upt if running mayinterruptifrunning override is cancelled iscancelled wrapped is cancelled iscancelled override is done isdone wrapped is done isdone override integer interrupted exception interruptedexception execution exception executionexception result wrapped result long value longvalue integer max execution exception executionexception get string getstring async channel wrapper secure asyncchannelwrappersecure too big toobig result integer value of valueof result int value intvalue override integer timeout time unit timeunit unit interrupted exception interruptedexception execution exception executionexception timeout exception timeoutexception result wrapped timeout unit result long value longvalue integer max execution exception executionexception get string getstring async channel wrapper secure asyncchannelwrappersecure too big toobig result integer value of valueof result int value intvalue secureiothreadfactory thread factory threadfactory atomic integer atomicinteger count atomic integer atomicinteger override thread new thread newthread runnable thread thread set name setname web socket client websocketclient secureio count increment and get incrementandget context loader threads cleaned connection closed set daemon setdaemon