licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes transport bio java io exception ioexception java input stream inputstream java output stream outputstream java net inet socket address inetsocketaddress java net socket java util arrays org apache catalina tribes remote process exception remoteprocessexception org apache catalina tribes x byte buffer xbytebuffer org apache catalina tribes transport abstract sender abstractsender org apache catalina tribes transport constants org apache catalina tribes transport sender state senderstate org apache catalina tribes util string manager stringmanager send cluster messages socket ack alive handling supported author peter rossbach author filip hanik bio sender biosender abstract sender abstractsender org apache juli logging log log org apache juli logging log factory logfactory get log getlog bio sender biosender string manager string manager stringmanager string manager stringmanager get manager getmanager constants instance variables descriptive implementation string info data sender datasender current sender socket socket socket output stream outputstream so out soout input stream inputstream so in soin x byte buffer xbytebuffer ackbuf x byte buffer xbytebuffer constants ack command length bio sender biosender properties descriptive implementation version number format code description version code string get info getinfo info methods connect cluster member receiver org apache catalina tribes transport data sender datasender connect override connect io exception ioexception open socket opensocket disconnect close socket org apache catalina tribes transport data sender datasender disconnect override disconnect connect is connected isconnected close socket closesocket connect log is debug enabled isdebugenabled log debug get string getstring i data sender idatasender disconnect get address getaddress get host address gethostaddress integer value of valueof get port getport value of valueof send message send message sendmessage data wait for ack waitforack io exception ioexception io exception ioexception exception set attempt setattempt existing connection push message pushmessage data wait for ack waitforack io exception ioexception sender state senderstate get sender state getsenderstate get destination getdestination set suspect setsuspect exception log is trace enabled istraceenabled log trace get string getstring i data sender idatasender send get address getaddress get host address gethostaddress integer value of valueof get port getport get attempt getattempt get max retry attempts getmaxretryattempts set attempt setattempt get attempt getattempt push message pushmessage data wait for ack waitforack exception io exception ioexception exception close socket closesocket set request count setrequestcount get request count getrequestcount keep alive keepalive exception exception so cker sender sockersender override string to string tostring string builder stringbuilder buf string builder stringbuilder data sender datasender buf append to string tostring append buf append get address getaddress append append get port getport append buf to string tostring methods open real socket time wait for ack waitforack enabled socket open open socket opensocket io exception ioexception is connected isconnected socket socket inet socket address inetsocketaddress sockaddr inet socket address inetsocketaddress get address getaddress get port getport socket connect sockaddr get timeout gettimeout socket set send buffer size setsendbuffersize get tx buf size gettxbufsize socket set receive buffer size setreceivebuffersize get rx buf size getrxbufsize socket set so timeout setsotimeout get timeout gettimeout socket set tcp no delay settcpnodelay get tcp no delay gettcpnodelay socket set keep alive setkeepalive get so keep alive getsokeepalive socket set reuse address setreuseaddress get so reuse address getsoreuseaddress socket setoobinline get oo inline getoobinline socket set so linger setsolinger get so linger on getsolingeron get so linger time getsolingertime socket set traffic class settrafficclass get so traffic class getsotrafficclass set connected setconnected so out soout socket get output stream getoutputstream so in soin socket get input stream getinputstream set request count setrequestcount set connect time setconnecttime system current time millis currenttimemillis log is debug enabled isdebugenabled log debug get string getstring i data sender idatasender open socket opensocket get address getaddress get host address gethostaddress integer value of valueof get port getport value of valueof io exception ioexception sender state senderstate get sender state getsenderstate get destination getdestination set suspect setsuspect log is debug enabled isdebugenabled log debug get string getstring i data sender idatasender open socket opensocket failure get address getaddress get host address gethostaddress integer value of valueof get port getport value of valueof close socket disconnect close socket closesocket is connected isconnected socket socket close io exception ioexception socket so out soout so in soin set request count setrequestcount set connected setconnected log is debug enabled isdebugenabled log debug get string getstring i data sender idatasender close socket closesocket get address getaddress get host address gethostaddress integer value of valueof get port getport value of valueof push messages socket time wait ack needed auto retry write message failed sending error close reopen socket successful sending update stats warning subclasses careful thread call push message pushmessage close socket closesocket open socket opensocket send message sendmessage param data data send push message pushmessage data reconnect wait for ack waitforack io exception ioexception keep alive keepalive reconnect close socket closesocket is connected isconnected open socket opensocket so out soout write data so out soout flush wait for ack waitforack wait for ack waitforack sender state senderstate get sender state getsenderstate get destination getdestination set ready setready wait ack now ledgement acknowledgement server fixme wait characters control wait ack message correct java io exception ioexception java net socket timeout exception sockettimeoutexception wait for ack waitforack java io exception ioexception ack received ackreceived fail ack received failackreceived ackbuf clear bytes read bytesread so in soin read bytes read bytesread constants ack command length bytes read bytesread ackbuf append ackbuf does package exist doespackageexist ackcmd ackbuf extract data package extractdatapackage get bytes getbytes ack received ackreceived arrays equals ackcmd org apache catalina tribes transport constants ack data fail ack received failackreceived arrays equals ackcmd org apache catalina tribes transport constants fail ack data ack received ackreceived ack received ackreceived fail ack received failackreceived so in soin read ack received ackreceived io exception ioexception get string getstring i data sender idatasender ack eof get address getaddress integer value of valueof socket get local port getlocalport io exception ioexception get string getstring i data sender idatasender ack wrong get address getaddress integer value of valueof socket get local port getlocalport fail ack received failackreceived get throw on failed ack getthrowonfailedack remote process exception remoteprocessexception received failed ack org apache catalina tribes transport constants fail ack data io exception ioexception string err msg errmsg get string getstring i data sender idatasender ack missing get address getaddress integer value of valueof socket get local port getlocalport value of valueof get timeout gettimeout sender state senderstate get sender state getsenderstate get destination getdestination is ready isready sender state senderstate get sender state getsenderstate get destination getdestination set suspect setsuspect log is warn enabled iswarnenabled log warn err msg errmsg log is debug enabled isdebugenabled log debug err msg errmsg ackbuf clear