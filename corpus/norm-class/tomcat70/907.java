licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache jasper runtime java util enumeration java util vector javax servlet servlet config servletconfig javax servlet jsp jsp exception jspexception javax servlet jsp tagext tag org apache jasper constants thread local based pool tag handlers reused author jan luehe author costin manolache deprecated thread locals threadlocals trigger memory leaks tag handler pool taghandlerpool removed tomcat deprecated per thread tag handler pool perthreadtaghandlerpool tag handler pool taghandlerpool max size maxsize cleanup vector per thread data perthreaddata per thread data vector perthreaddatavector thread local threadlocal per thread data perthreaddata per thread perthread per thread data perthreaddata tag handlers current constructs tag handler pool capacity per thread tag handler pool perthreadtaghandlerpool per thread data vector perthreaddatavector vector per thread data perthreaddata override init servlet config servletconfig config max size maxsize constants max pool size string max size s maxsizes get option getoption config option max size maxsize max size s maxsizes max size maxsize integer parse int parseint max size s maxsizes max size maxsize max size maxsize constants max pool size per thread perthread thread local threadlocal per thread data perthreaddata override per thread data perthreaddata initial value initialvalue per thread data perthreaddata ptd per thread data perthreaddata ptd handlers tag max size maxsize ptd current per thread data vector perthreaddatavector add element addelement ptd ptd tag handler tag handler pool ins tantiating instantiating tag handler pool empty param handler class handlerclass tag handler reused newly instantiated tag handler jsp exception jspexception tag handler instantiated override tag tag handler class handlerclass jsp exception jspexception per thread data perthreaddata ptd per thread perthread ptd current ptd handlers ptd current handler class handlerclass new instance newinstance exception jsp exception jspexception get message getmessage adds tag handler tag handler pool tag handler pool reached capacity tag handler release method called param handler tag handler add tag handler pool override reuse tag handler per thread data perthreaddata ptd per thread perthread ptd current ptd handlers length ptd handlers ptd current handler handler release calls release method tag handlers tag handler pool override release enumeration per thread data perthreaddata enumeration per thread data vector perthreaddatavector elements enumeration has more elements hasmoreelements per thread data perthreaddata ptd enumeration next element nextelement ptd handlers ptd current ptd handlers ptd handlers release