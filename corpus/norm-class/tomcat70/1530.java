licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util digester java util array list arraylist java util hash map hashmap java util iterator java util list rules base rulesbase rules instance variables registered rule instances keyed matching pattern list rules pattern order originally registered hash map hashmap string list rule cache hash map hashmap string list rule digester instance rules instance digester digester namespace uri sub sequently subsequently code rule code objects relevant code code matching independent names paces namespaces string namespaceuri registered rule instances order originally registered array list arraylist rule rules array list arraylist rule properties digester instance rules instance override digester get digester getdigester digester digester instance rules instance param digester newly digester instance override set digester setdigester digester digester digester digester iterator rule items rules iterator items has next hasnext rule item items item set digester setdigester digester namespace uri applied sub sequently subsequently code rule code objects override string get name space i getnamespaceuri namespaceuri namespace uri applied sub sequently subsequently code rule code objects param namespaceuri name space namespace uri match sub sequently subsequently rules code code matching current namespace uri override set name space i setnamespaceuri string namespaceuri namespaceuri namespaceuri methods register rule instance matching pattern param pattern nesting pattern matched rule param rule rule instance registered override add string pattern rule rule users accidently add patterns pattern length patternlength pattern length pattern length patternlength pattern ends with endswith pattern pattern substring pattern length patternlength list rule list cache pattern list list array list arraylist rule cache pattern list list add rule rules add rule digester rule set digester setdigester digester namespaceuri rule set name space i setnamespaceuri namespaceuri clear existing rule instance registrations override clear cache clear rules clear list registered rule instances match nesting pattern length list matches rule instance matches strong strong returned order originally registered code add code method param namespaceuri name space namespace uri select matching rules code code match namespace uri param pattern nesting pattern matched override list rule match string namespaceuri string pattern list rules list ruleslist list cache pattern list rule rules list ruleslist lookup namespaceuri pattern rules list ruleslist rules list ruleslist size find longest key discriminant string long key longkey iterator string cache key set keyset iterator has next hasnext string key key starts with startswith pattern equals key substring pattern ends with endswith key substring key length long key longkey length rules list ruleslist list cache key rules list ruleslist lookup namespaceuri key long key longkey key rules list ruleslist rules list ruleslist array list arraylist rule rules list ruleslist list registered rule instances length list registered rule instances rule instance registered strong strong returned order originally registered code add code method override list rule rules rules methods list rule instances pattern match namespace uri rules code code param namespaceuri name space namespace uri match code code select matching rules namespace uri param pattern pattern matched list rule lookup string namespaceuri string pattern optimize namespace uri list rule list cache pattern list namespaceuri namespaceuri length list select rules match namespace uri array list arraylist rule array list arraylist rule iterator rule items list iterator items has next hasnext rule item items namespaceuri equals item get name space i getnamespaceuri item get name space i getnamespaceuri add item