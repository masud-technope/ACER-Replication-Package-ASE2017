licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util http java util hash map hashmap java util list java util map org junit assert equals assertequals org junit test org apache catalina startup tomcat org apache tomcat util buf byte chunk bytechunk test link cookies note code code constants link cookies tests executed jvm instance tests place separate classes facilitate running unit tests ant test cookies strict sys props testcookiesstrictsysprops cookies base test cookiesbasetest override test test cookies instance testcookiesinstance exception system set property setproperty org apache catalina strict servlet compliance tomcat tomcat get tomcat instance gettomcatinstance add servlets addservlets tomcat tomcat start byte chunk bytechunk res get url geturl http localhost get port getport invalid assert equals assertequals cookie fail res to string tostring res get url geturl http localhost get port getport assert equals assertequals cookie fail res to string tostring res get url geturl http localhost get port getport blank assert equals assertequals cookie fail res to string tostring res get url geturl http localhost get port getport invalid fwd invalidfwd assert equals assertequals cookie fail res to string tostring res get url geturl http localhost get port getport invalid strict invalidstrict assert equals assertequals cookie fail res to string tostring res get url geturl http localhost get port getport valid assert equals assertequals cookie res to string tostring read response headers test version switching map string list string headers hash map hashmap string list string get url geturl http localhost get port getport res headers list string cookie headers cookieheaders headers cookie string cookie header cookieheader cookie headers cookieheaders assert equals assertequals val version cookie header cookieheader