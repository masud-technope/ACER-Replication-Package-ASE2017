licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina deploy java file java i o exception ioexception java string reader stringreader java util hash set hashset java util map java util org junit org junit test org apache catalina startup web rule set webruleset org apache tomcat util descriptor digester factory digesterfactory org apache tomcat util descriptor xml error handler xmlerrorhandler org apache tomcat util descriptor xml identifiers xmlidentifiers org apache tomcat util digester digester org xml sax input source inputsource org xml sax sax exception saxexception test link web xml webxml test web xml testwebxml test test parse version testparseversion web xml webxml webxml web xml webxml defaults assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion changed webxml set version setversion assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion unknown input webxml set version setversion assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion input webxml set version setversion assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion test test parse public id version testparsepublicidversion web xml webxml webxml web xml webxml webxml set public id setpublicid xml identifiers xmlidentifiers web assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion assert equals assertequals webxml get version getversion test test parse public id version testparsepublicidversion web xml webxml webxml web xml webxml webxml set public id setpublicid xml identifiers xmlidentifiers web assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion assert equals assertequals webxml get version getversion test test parse public id version testparsepublicidversion web xml webxml webxml web xml webxml webxml set version setversion assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion assert equals assertequals webxml get version getversion test test parse public id version testparsepublicidversion web xml webxml webxml web xml webxml webxml set version setversion assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion assert equals assertequals webxml get version getversion test test parse public id version testparsepublicidversion web xml webxml webxml web xml webxml webxml set version setversion assert equals assertequals webxml get major version getmajorversion assert equals assertequals webxml get minor version getminorversion assert equals assertequals webxml get version getversion test test validate version testvalidateversion i o exception ioexception sax exception saxexception do test validate version dotestvalidateversion test test validate version testvalidateversion i o exception ioexception sax exception saxexception do test validate version dotestvalidateversion test test validate version testvalidateversion i o exception ioexception sax exception saxexception do test validate version dotestvalidateversion test test validate version testvalidateversion i o exception ioexception sax exception saxexception do test validate version dotestvalidateversion test test validate version testvalidateversion i o exception ioexception sax exception saxexception do test validate version dotestvalidateversion do test validate version dotestvalidateversion string version i o exception ioexception sax exception saxexception web xml webxml webxml web xml webxml special cases equals version webxml set public id setpublicid xml identifiers xmlidentifiers web equals version webxml set public id setpublicid xml identifiers xmlidentifiers web webxml set version setversion version merged web xml published merged web xml context attribute simplest consists webapp web xml file conf web xml web xml webxml defaults hash set hashset web xml webxml defaults add get default web xml fragment getdefaultwebxmlfragment webxml merge defaults digester digester digester factory digesterfactory new digester newdigester web rule set webruleset xml error handler xmlerrorhandler handler xml error handler xmlerrorhandler digester set error handler seterrorhandler handler input source inputsource input source inputsource string reader stringreader webxml to xml toxml web xml webxml webxml result webxmlresult web xml webxml digester push webxml result webxmlresult digester parse assert equals assertequals handler get errors geterrors size assert equals assertequals handler get warnings getwarnings size assert equals assertequals version webxml get version getversion assert equals assertequals version webxml result webxmlresult get version getversion simplified copy context config contextconfig get default web xml fragment getdefaultwebxmlfragment assuming global web xml exists host specific web xml exist web xml webxml get default web xml fragment getdefaultwebxmlfragment i o exception ioexception sax exception saxexception input source inputsource global web xml globalwebxml input source inputsource file conf web xml get absolute file getabsolutefile touri to string tostring web xml webxml web xml default fragment webxmldefaultfragment web xml webxml web xml default fragment webxmldefaultfragment set over ridable setoverridable web xml default fragment webxmldefaultfragment set distributable setdistributable web xml default fragment webxmldefaultfragment set always add welcome files setalwaysaddwelcomefiles digester digester digester factory digesterfactory new digester newdigester web rule set webruleset xml error handler xmlerrorhandler handler xml error handler xmlerrorhandler digester set error handler seterrorhandler handler digester push web xml default fragment webxmldefaultfragment digester parse global web xml globalwebxml assert equals assertequals handler get errors geterrors size assert equals assertequals handler get warnings getwarnings size web xml default fragment webxmldefaultfragment set replace welcome files setreplacewelcomefiles web xml parsed empty servlet assert not null assertnotnull web xml default fragment webxmldefaultfragment get servlets getservlets manually add version specific features ensure problems merged web xml filters excluded filter def filterdef filter def filterdef filter def filterdef filter def filterdef set filter class setfilterclass org apache tomcat dummy filter dummyfilter filter def filterdef set filter name setfiltername dummy web xml default fragment webxmldefaultfragment add filter addfilter filter def filterdef filter map filtermap filter map filtermap filter map filtermap filter map filtermap set filter name setfiltername dummy filter map filtermap addurlpattern web xml default fragment webxmldefaultfragment add filter mapping addfiltermapping filter map filtermap listeners excluded web xml default fragment webxmldefaultfragment add listener addlistener org apache tomcat dummy listener dummylistener resource env excluded context resource env ref contextresourceenvref resource env ref resourceenvref context resource env ref contextresourceenvref resource env ref resourceenvref set name setname dummy resource env ref resourceenvref set type settype dummy web xml default fragment webxmldefaultfragment add resource env ref addresourceenvref resource env ref resourceenvref ejb local excluded context local ejb contextlocalejb ejb local ref ejblocalref context local ejb contextlocalejb ejb local ref ejblocalref set name setname dummy ejb local ref ejblocalref set type settype session ejb local ref ejblocalref set local setlocal dummy ejb local ref ejblocalref set home sethome dummy web xml default fragment webxmldefaultfragment add ejb local ref addejblocalref ejb local ref ejblocalref servlet excluded servlet def servletdef servlet def servletdef servlet def servletdef servlet def servletdef set servlet name setservletname dummy servlet def servletdef set servlet class setservletclass org apache tomcat dummy servlet dummyservlet servlet def servletdef set run as setrunas dummy web xml default fragment webxmldefaultfragment add servlet addservlet servlet def servletdef web xml default fragment webxmldefaultfragment add servlet mapping addservletmapping dummy dummy resource res sharing scope excluded context resource contextresource context resource contextresource context resource contextresource context resource contextresource set name setname dummy context resource contextresource set type settype dummy context resource contextresource set auth setauth container context resource contextresource set scope setscope shareable web xml default fragment webxmldefaultfragment add resource ref addresourceref context resource contextresource security constraint display excluded security constraint securityconstraint security constraint securityconstraint set display name setdisplayname dummy security collection securitycollection collection security collection securitycollection collection set name setname dummy collection add pattern addpattern collection add method addmethod delete add collection addcollection collection web xml default fragment webxmldefaultfragment add security constraint addsecurityconstraint service excluded earlier context service contextservice service ref serviceref context service contextservice service ref serviceref set name setname dummy service ref serviceref set interface setinterface dummy web xml default fragment webxmldefaultfragment add service ref addserviceref service ref serviceref message destination excluded earlier message destination ref messagedestinationref md ref mdref message destination ref messagedestinationref md ref mdref set name setname dummy md ref mdref set type settype dummy md ref mdref set usage setusage consumes web xml default fragment webxmldefaultfragment add message destination ref addmessagedestinationref md ref mdref message destination excluded earlier message destination messagedestination message destination messagedestination set name setname dummy web xml default fragment webxmldefaultfragment add message destination addmessagedestination local encoding mapping list excluded earlier web xml default fragment webxmldefaultfragment add locale encoding mapping addlocaleencodingmapping utf jsp config servlet web xml default fragment webxmldefaultfragment add taglib addtaglib dummy dummy filter mapping dispatcher servlet filter map filtermap set dispatcher setdispatcher request listener description display icon servlet supported web xml webxml filter mapping dispatcher async servlet filter map filtermap set dispatcher setdispatcher async error location allowed servlet error page errorpage error page errorpage error page errorpage error page errorpage set location setlocation dummy web xml default fragment webxmldefaultfragment add error page adderrorpage error page errorpage async supported servlet filter filter def filterdef set async supported setasyncsupported servlet def servletdef set async supported setasyncsupported session cookie config session config sessionconfig session config sessionconfig session config sessionconfig session config sessionconfig set cookie domain setcookiedomain dummy web xml default fragment webxmldefaultfragment set session config setsessionconfig session config sessionconfig http method omission servlet trigger validation error drop ping dropping silently security concern multi config servlet multipart def multipartdef multi part multipart multipart def multipartdef servlet def servletdef set multipart def setmultipartdef multi part multipart web xml default fragment webxmldefaultfragment test test lifecycle methods web xml testlifecyclemethodswebxml web xml webxml webxml web xml webxml webxml add post construct methods addpostconstructmethods webxml add pre destroy methods addpredestroymethods web xml webxml fragment web xml webxml fragment add post construct methods addpostconstructmethods fragment add pre destroy methods addpredestroymethods web xml webxml fragments hash set hashset web xml webxml fragments add fragment webxml merge fragments map string string post construct methods postconstructmethods webxml get post construct methods getpostconstructmethods map string string pre destroy methods predestroymethods webxml get pre destroy methods getpredestroymethods assert equals assertequals post construct methods postconstructmethods size assert equals assertequals pre destroy methods predestroymethods size assert equals assertequals post construct methods postconstructmethods assert equals assertequals pre destroy methods predestroymethods test test lifecycle methods web fragments testlifecyclemethodswebfragments web xml webxml webxml web xml webxml web xml webxml fragment web xml webxml fragment add post construct methods addpostconstructmethods fragment add pre destroy methods addpredestroymethods web xml webxml fragment web xml webxml fragment add post construct methods addpostconstructmethods fragment add pre destroy methods addpredestroymethods web xml webxml fragments hash set hashset web xml webxml fragments add fragment fragments add fragment webxml merge fragments map string string post construct methods postconstructmethods webxml get post construct methods getpostconstructmethods map string string pre destroy methods predestroymethods webxml get pre destroy methods getpredestroymethods assert equals assertequals post construct methods postconstructmethods size assert equals assertequals pre destroy methods predestroymethods size assert equals assertequals post construct methods postconstructmethods assert equals assertequals post construct methods postconstructmethods assert equals assertequals pre destroy methods predestroymethods assert equals assertequals pre destroy methods predestroymethods test test lifecycle methods web fragments with conflicts testlifecyclemethodswebfragmentswithconflicts web xml webxml webxml web xml webxml web xml webxml fragment web xml webxml fragment add post construct methods addpostconstructmethods fragment add pre destroy methods addpredestroymethods web xml webxml fragment web xml webxml fragment add post construct methods addpostconstructmethods web xml webxml fragments hash set hashset web xml webxml fragments add fragment fragments add fragment assert false assertfalse webxml merge fragments assert equals assertequals webxml get post construct methods getpostconstructmethods size web xml webxml fragment web xml webxml fragment add pre destroy methods addpredestroymethods fragments remove fragment fragments add fragment assert false assertfalse webxml merge fragments assert equals assertequals webxml get pre destroy methods getpredestroymethods size test expected illegal argument exception illegalargumentexception test bug testbug multiple servlets mapped url pattern web xml webxml webxml web xml webxml webxml add servlet mapping addservletmapping foo webxml add servlet mapping addservletmapping foo test expected illegal argument exception illegalargumentexception test bug testbug multiple servlets mapped url pattern web xml webxml webxml web xml webxml web xml webxml web xml webxml web xml webxml web xml webxml hash set hashset web xml webxml fragments hash set hashset web xml webxml fragments add fragments add add servlet mapping addservletmapping foo add servlet mapping addservletmapping foo webxml merge fragments test test bug testbug multiple servlets mapped url pattern main web xml takes priority web xml webxml webxml web xml webxml web xml webxml web xml webxml web xml webxml web xml webxml hash set hashset web xml webxml fragments hash set hashset web xml webxml fragments add fragments add add servlet mapping addservletmapping foo add servlet mapping addservletmapping foo webxml add servlet mapping addservletmapping foo main webxml merge fragments