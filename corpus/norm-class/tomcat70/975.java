licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina valves java text simple date format simpledateformat java util org junit test simple micro benchmarks determine app roach approach thread safety valves link access log valve accesslogvalve impl emented implemented j unit junit tests simple execute test avoid included auto mated automated unit tests benchmarks test test access log get date testaccessloggetdate exception sync thread local benchmark test benchmarktest benchmark benchmark test benchmarktest runnable tests runnable get date benchmark test getdatebenchmarktest sync get date benchmark test getdatebenchmarktest local get date benchmark test getdatebenchmarktest local mutable long localmutablelong get date benchmark test getdatebenchmarktest local struct localstruct benchmark do test dotest tests get date benchmark test getdatebenchmarktest sync runnable override string to string tostring syncs current millis currentmillis current date currentdate override get current date getcurrentdate get current date getcurrentdate systime system current time millis currenttimemillis systime current millis currentmillis systime current millis currentmillis current date currentdate systime current millis currentmillis systime current date currentdate get date benchmark test getdatebenchmarktest local runnable override string to string tostring thread locals threadlocals thread local threadlocal current millis local currentmillislocal thread local threadlocal override initial value initialvalue value of valueof thread local threadlocal current date local currentdatelocal thread local threadlocal override get current date getcurrentdate get current date getcurrentdate systime system current time millis currenttimemillis systime current millis local currentmillislocal long value longvalue current date local currentdatelocal systime current millis local currentmillislocal value of valueof systime current date local currentdatelocal get date benchmark test getdatebenchmarktest local mutable long localmutablelong runnable override string to string tostring thread locals threadlocals mutable mutable long mutablelong thread local threadlocal mutable long mutablelong current millis local currentmillislocal thread local threadlocal mutable long mutablelong override mutable long mutablelong initial value initialvalue mutable long mutablelong thread local threadlocal current date local currentdatelocal thread local threadlocal override get current date getcurrentdate get current date getcurrentdate systime system current time millis currenttimemillis systime current millis local currentmillislocal current date local currentdatelocal systime current millis local currentmillislocal systime current date local currentdatelocal get date benchmark test getdatebenchmarktest local struct localstruct runnable override string to string tostring single thread local threadlocal not e note avoid conversion struct current millis currentmillis current date currentdate thread local threadlocal struct current struct currentstruct thread local threadlocal struct override struct initial value initialvalue struct override get current date getcurrentdate get current date getcurrentdate struct struct current struct currentstruct systime system current time millis currenttimemillis systime struct current millis currentmillis struct current date currentdate systime struct current millis currentmillis systime struct current date currentdate test test access log time date element testaccesslogtimedateelement exception sync thread local benchmark test benchmarktest benchmark benchmark test benchmarktest runnable tests runnable time date element benchmark test timedateelementbenchmarktest sync time date element benchmark test timedateelementbenchmarktest local time date element benchmark test timedateelementbenchmarktest local struct localstruct time date element benchmark test timedateelementbenchmarktest local struct localstruct s builder sbuilder benchmark do test dotest tests time date element benchmark test base timedateelementbenchmarktestbase string months jan feb mar apr jun jul aug sep oct nov dec string lookup string month integer parse int parseint month throwable months time date element benchmark test timedateelementbenchmarktest sync time date element benchmark test base timedateelementbenchmarktestbase runnable override string to string tostring syncs current date currentdate string current date string currentdatestring simple date format simpledateformat day formatter dayformatter simple date format simpledateformat simple date format simpledateformat month formatter monthformatter simple date format simpledateformat simple date format simpledateformat year formatter yearformatter simple date format simpledateformat yyyy simple date format simpledateformat time formatter timeformatter simple date format simpledateformat override print date printdate string print date printdate string builder stringbuilder buf string builder stringbuilder get date sync getdatesync current date currentdate current date currentdate string builder stringbuilder current string builder stringbuilder current append day current append day formatter dayformatter format current append month current append lookup month formatter monthformatter format current append year current append year formatter yearformatter format current append time current append time formatter timeformatter format current append current date string currentdatestring current to string tostring current date currentdate buf append current date string currentdatestring buf to string tostring get date sync getdatesync systime system current time millis currenttimemillis systime current date currentdate get time gettime systime current date currentdate get time gettime current date currentdate set time settime systime current date currentdate time date element benchmark test timedateelementbenchmarktest local time date element benchmark test base timedateelementbenchmarktestbase runnable override string to string tostring thread locals threadlocals thread local threadlocal string current date string local currentdatestringlocal thread local threadlocal string thread local threadlocal current date local currentdatelocal thread local threadlocal override initial value initialvalue thread local threadlocal simple date format simpledateformat day formatter local dayformatterlocal thread local threadlocal simple date format simpledateformat override simple date format simpledateformat initial value initialvalue simple date format simpledateformat thread local threadlocal simple date format simpledateformat month formatter local monthformatterlocal thread local threadlocal simple date format simpledateformat override simple date format simpledateformat initial value initialvalue simple date format simpledateformat thread local threadlocal simple date format simpledateformat year formatter local yearformatterlocal thread local threadlocal simple date format simpledateformat override simple date format simpledateformat initial value initialvalue simple date format simpledateformat yyyy thread local threadlocal simple date format simpledateformat time formatter local timeformatterlocal thread local threadlocal simple date format simpledateformat override simple date format simpledateformat initial value initialvalue simple date format simpledateformat override print date printdate string print date printdate get date local getdatelocal current date string local currentdatestringlocal string builder stringbuilder current string builder stringbuilder current append current append day formatter local dayformatterlocal format day current date local currentdatelocal current append current append lookup month formatter local monthformatterlocal format month current date local currentdatelocal current append current append year formatter local yearformatterlocal format year current date local currentdatelocal current append current append time formatter local timeformatterlocal format time current date local currentdatelocal current append current date string local currentdatestringlocal current to string tostring current date string local currentdatestringlocal get date local getdatelocal systime system current time millis currenttimemillis systime current date local currentdatelocal get time gettime current date local currentdatelocal set time settime systime current date string local currentdatestringlocal current date local currentdatelocal time date element benchmark test timedateelementbenchmarktest local struct localstruct time date element benchmark test base timedateelementbenchmarktestbase runnable override string to string tostring single thread local threadlocal struct string current date string currentdatestring current date currentdate simple date format simpledateformat day formatter dayformatter simple date format simpledateformat simple date format simpledateformat month formatter monthformatter simple date format simpledateformat simple date format simpledateformat year formatter yearformatter simple date format simpledateformat yyyy simple date format simpledateformat time formatter timeformatter simple date format simpledateformat thread local threadlocal struct struct local structlocal thread local threadlocal struct override struct initial value initialvalue struct override print date printdate string print date printdate get date local getdatelocal struct struct struct local structlocal struct current date string currentdatestring string builder stringbuilder current string builder stringbuilder current append day current append struct day formatter dayformatter format struct current date currentdate current append current append lookup struct month formatter monthformatter format month struct current date currentdate current append year current append struct year formatter yearformatter format struct current date currentdate current append time current append struct time formatter timeformatter format struct current date currentdate current append struct current date string currentdatestring current to string tostring struct current date string currentdatestring get date local getdatelocal struct struct struct local structlocal systime system current time millis currenttimemillis systime struct current date currentdate get time gettime struct current date currentdate set time settime systime struct current date string currentdatestring struct current date currentdate time date element benchmark test timedateelementbenchmarktest local struct localstruct s builder sbuilder time date element benchmark test base timedateelementbenchmarktestbase runnable override string to string tostring single thread local threadlocal string builder stringbuilder struct string current date string currentdatestring current date currentdate simple date format simpledateformat day formatter dayformatter simple date format simpledateformat simple date format simpledateformat month formatter monthformatter simple date format simpledateformat simple date format simpledateformat year formatter yearformatter simple date format simpledateformat yyyy simple date format simpledateformat time formatter timeformatter simple date format simpledateformat thread local threadlocal struct struct local structlocal thread local threadlocal struct override struct initial value initialvalue struct override print date printdate string print date printdate get date local getdatelocal struct struct struct local structlocal struct current date string currentdatestring string builder stringbuilder current string builder stringbuilder current append day current append struct day formatter dayformatter format struct current date currentdate current append current append lookup struct month formatter monthformatter format month struct current date currentdate current append year current append struct year formatter yearformatter format struct current date currentdate current append time current append struct time formatter timeformatter format struct current date currentdate current append struct current date string currentdatestring current to string tostring struct current date string currentdatestring get date local getdatelocal struct struct struct local structlocal systime system current time millis currenttimemillis systime struct current date currentdate get time gettime struct current date currentdate set time settime systime struct current date string currentdatestring struct current date currentdate benchmark test benchmarktest do test dotest thread count threadcount runnable tests exception iterations iterations iterations tests length do test internal dotestinternal thread count threadcount iterations tests do test internal dotestinternal thread count threadcount iterations runnable test exception start system current time millis currenttimemillis thread threads thread thread count threadcount thread count threadcount threads thread test thread testthread iterations test thread count threadcount threads start thread count threadcount threads join system current time millis currenttimemillis system println test get class getclass get simple name getsimplename thread count threadcount threads iterations iterations test start test thread testthread runnable count runnable test test thread testthread count runnable test count count test test override count test