licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache tomcat util http java io exception ioexception java unsupported encoding exception unsupportedencodingexception java nio charset charset java util array list arraylist java util collections java util enumeration java util linked hash map linkedhashmap java util map org apache tomcat util buf c converter cconverter org apache tomcat util buf byte chunk bytechunk org apache tomcat util buf char chunk charchunk org apache tomcat util buf message bytes messagebytes org apache tomcat util buf u decoder udecoder org apache tomcat util log user data helper userdatahelper org apache tomcat util res string manager stringmanager author costin manolache parameters org apache juli logging log log org apache juli logging log factory logfactory get log getlog parameters user data helper userdatahelper user data log userdatalog user data helper userdatahelper log user data helper userdatahelper max param count log maxparamcountlog user data helper userdatahelper log string manager stringmanager string manager stringmanager get manager getmanager org apache tomcat util http map string array list arraylist string param hash values paramhashvalues linked hash map linkedhashmap string array list arraylist string did query parameters didqueryparameters message bytes messagebytes querymb u decoder udecoder url dec urldec message bytes messagebytes decoded query decodedquery message bytes messagebytes new instance newinstance string encoding string query string encoding querystringencoding limit parameter count parametercount reason failure failure failures parameter parsing fail reason failreason parse failed reason parsefailedreason parameters set query setquery message bytes messagebytes querymb querymb querymb set limit setlimit limit limit limit string get encoding getencoding encoding set encoding setencoding string encoding log is debug enabled isdebugenabled log debug encoding set query string encoding setquerystringencoding string query string encoding querystringencoding log is debug enabled isdebugenabled log debug query string encoding is parse failed isparsefailed parse failed reason parsefailedreason fail reason failreason get parse failed reason getparsefailedreason parse failed reason parsefailedreason set parse failed reason setparsefailedreason fail reason failreason fail reason failreason parse failed reason parsefailedreason parse failed reason parsefailedreason fail reason failreason recycle parameter count parametercount param hash values paramhashvalues clear did query parameters didqueryparameters encoding decoded query decodedquery recycle parse failed reason parsefailedreason data access access current values side processing explicitly call handle query parameters handlequeryparameters post methods deprecated add parameter values addparametervalues string key string new values newvalues key array list arraylist string values param hash values paramhashvalues key values values array list arraylist string new values newvalues length param hash values paramhashvalues key values values ensure capacity ensurecapacity values size new values newvalues length string new value newvalue new values newvalues values add new value newvalue string get parameter values getparametervalues string handle query parameters handlequeryparameters facade array list arraylist string values param hash values paramhashvalues values values to array toarray string values size enumeration string get parameter names getparameternames handle query parameters handlequeryparameters collections enumeration param hash values paramhashvalues key set keyset string get parameter getparameter string handle query parameters handlequeryparameters array list arraylist string values param hash values paramhashvalues values values size values processing process query string parameters handle query parameters handlequeryparameters did query parameters didqueryparameters did query parameters didqueryparameters querymb querymb is null isnull log is debug enabled isdebugenabled log debug decoding query decoded query decodedquery query string encoding querystringencoding decoded query decodedquery duplicate querymb io exception ioexception print stack trace printstacktrace process parameters processparameters decoded query decodedquery query string encoding querystringencoding add parameter addparameter string key string illegal state exception illegalstateexception key parameter count parametercount limit parameter count parametercount limit processing parameter push limit ise request parse parts parseparts requests big set parse failed reason setparsefailedreason fail reason failreason parameters illegal state exception illegalstateexception get string getstring parameters max count fail maxcountfail integer value of valueof limit array list arraylist string values param hash values paramhashvalues key values values array list arraylist string param hash values paramhashvalues key values values add seturldecoder u decoder udecoder url dec urldec parameter parsing called single thread hard needed byte chunk bytechunk tmp name tmpname byte chunk bytechunk byte chunk bytechunk tmp value tmpvalue byte chunk bytechunk byte chunk bytechunk orig name origname byte chunk bytechunk byte chunk bytechunk orig value origvalue byte chunk bytechunk char chunk charchunk tmp name c tmpnamec char chunk charchunk string encoding iso charset charset charset for name forname encoding process parameters processparameters bytes start len process parameters processparameters bytes start len get charset getcharset encoding process parameters processparameters bytes start len charset charset log is debug enabled isdebugenabled log debug get string getstring parameters bytes string bytes start len charset decode fail count decodefailcount pos start start len pos name start namestart pos name end nameend value start valuestart value end valueend parsing name parsingname decode name decodename decode value decodevalue parameter complete parametercomplete bytes pos parsing name parsingname finished starts character name end nameend pos parsing name parsingname value start valuestart pos equals character pos parsing name parsingname finished name end nameend pos finished value end valueend pos parameter complete parametercomplete pos decoding required parsing name parsingname decode name decodename decode value decodevalue pos pos parameter complete parametercomplete pos pos name end nameend name end nameend pos value start valuestart value end valueend value end valueend pos log is debug enabled isdebugenabled value start valuestart log debug get string getstring parameters noequal integer value of valueof name start namestart integer value of valueof name end nameend string bytes name start namestart name end nameend name start namestart charset name end nameend name start namestart value start valuestart log is debug enabled isdebugenabled log debug get string getstring parameters empty chunk emptychunk flag error foo user data helper userdatahelper mode log mode logmode user data log userdatalog get next mode getnextmode log mode logmode string extract value end valueend name start namestart extract string bytes name start namestart value end valueend name start namestart charset extract string message get string getstring parameters invalid chunk invalidchunk integer value of valueof name start namestart integer value of valueof value end valueend extract log mode logmode info debug message get string getstring parameters fall to debug falltodebug fall info log info message debug log debug message set parse failed reason setparsefailedreason fail reason failreason invalid chunk ignore tmp name tmpname set bytes setbytes bytes name start namestart name end nameend name start namestart value start valuestart tmp value tmpvalue set bytes setbytes bytes value start valuestart value end valueend value start valuestart tmp value tmpvalue set bytes setbytes bytes performance debug log is debug enabled isdebugenabled orig name origname append bytes name start namestart name end nameend name start namestart value start valuestart orig value origvalue append bytes value start valuestart value end valueend value start valuestart orig value origvalue append bytes io exception ioexception ioe log error get string getstring parameters copy fail copyfail ioe string string decode name decodename url decode urldecode tmp name tmpname tmp name tmpname set charset setcharset charset tmp name tmpname to string tostring value start valuestart decode value decodevalue url decode urldecode tmp value tmpvalue tmp value tmpvalue set charset setcharset charset tmp value tmpvalue to string tostring add parameter addparameter illegal state exception illegalstateexception ise user data helper userdatahelper mode log mode logmode max param count log maxparamcountlog get next mode getnextmode log mode logmode string message ise get message getmessage log mode logmode info debug message get string getstring parameters max count fail maxcountfail fall to debug falltodebug info log info message debug log debug message io exception ioexception set parse failed reason setparsefailedreason fail reason failreason url decoding decode fail count decodefailcount decode fail count decodefailcount log is debug enabled isdebugenabled log is debug enabled isdebugenabled log debug get string getstring parameters decode fail decodefail debug orig name origname to string tostring orig value origvalue to string tostring log is info enabled isinfoenabled user data helper userdatahelper mode log mode logmode user data log userdatalog get next mode getnextmode log mode logmode string message get string getstring parameters decode fail decodefail info tmp name tmpname to string tostring tmp value tmpvalue to string tostring log mode logmode info debug message get string getstring parameters fall to debug falltodebug info log info message debug log debug message tmp name tmpname recycle tmp value tmpvalue recycle recycle copies log is debug enabled isdebugenabled orig name origname recycle orig value origvalue recycle decode fail count decodefailcount log is debug enabled isdebugenabled user data helper userdatahelper mode log mode logmode user data log userdatalog get next mode getnextmode log mode logmode string message get string getstring parameters multiple decoding fail multipledecodingfail integer value of valueof decode fail count decodefailcount log mode logmode info debug message get string getstring parameters fall to debug falltodebug fall info log info message debug log debug message url decode urldecode byte chunk bytechunk io exception ioexception url dec urldec url dec urldec u decoder udecoder url dec urldec convert process parameters processparameters message bytes messagebytes data string encoding data data is null isnull data get length getlength data get type gettype message bytes messagebytes bytes data to bytes tobytes byte chunk bytechunk data get byte chunk getbytechunk process parameters processparameters get bytes getbytes get offset getoffset get length getlength get charset getcharset encoding charset get charset getcharset string encoding encoding charset c converter cconverter get charset getcharset encoding unsupported encoding exception unsupportedencodingexception charset debug purpose string params as string paramsasstring string builder stringbuilder string builder stringbuilder map entry string array list arraylist string param hash values paramhashvalues entry set entryset append get key getkey append array list arraylist string values get value getvalue string values append append append to string tostring enum fail reason failreason client disconnect multipart config invalid invalid content type error post large request body incomplete parameters unknown url decoding