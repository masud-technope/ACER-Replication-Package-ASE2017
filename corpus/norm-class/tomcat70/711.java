licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache coyote ajp java io exception ioexception java interruptedioexception java nio byte buffer bytebuffer org apache coyote action code actioncode org apache coyote error state errorstate org apache coyote request info requestinfo org apache juli logging log org apache juli logging log factory logfactory org apache tomcat jni socket org apache tomcat jni status org apache tomcat util exception utils exceptionutils org apache tomcat util net abstract endpoint abstractendpoint handler socket state socketstate org apache tomcat util net apr endpoint aprendpoint org apache tomcat util net socket status socketstatus org apache tomcat util net socket wrapper socketwrapper processes ajp requests author remy maucherat author henri gomez author dan milstein author keith wannamaker author kevin seguin author costin manolache author bill bar ker barker ajp apr processor ajpaprprocessor abstract ajp processor abstractajpprocessor logger log log log factory logfactory get log getlog ajp apr processor ajpaprprocessor override log get log getlog log ajp apr processor ajpaprprocessor packet size packetsize apr endpoint aprendpoint endpoint packet size packetsize endpoint response set output buffer setoutputbuffer socket output buffer socketoutputbuffer all ocate allocate input output buf fers buffers input buffer inputbuffer byte buffer bytebuffer all ocate direct allocatedirect packet size packetsize input buffer inputbuffer limit output buffer outputbuffer byte buffer bytebuffer all ocate direct allocatedirect packet size packetsize instance variables direct buffer input byte buffer bytebuffer input buffer inputbuffer direct buffer output byte buffer bytebuffer output buffer outputbuffer methods process pipeline d pipelined http requests input output str eams streams io exception ioexception error operation override socket state socketstate process socket wrapper socketwrapper socket io exception ioexception request info requestinfo request get request processor getrequestprocessor set s tag e setstage org apache coyote constants stage parse setting socket socket wrapper socketwrapper socket socket ref socketref socket get socket getsocket long value longvalue socket set rbb setrbb socket ref socketref input buffer inputbuffer socket sets bb setsbb socket ref socketref output buffer outputbuffer cping kept alive keptalive get error state geterrorstate is error iserror endpoint is paused ispaused parsing request header message request read message readmessage request header message requestheadermessage kept alive keptalive method check message type process regular request processing type request header message requestheadermessage get byte getbyte type constants ajp cping request endpoint is paused ispaused recycle cping socket send socket ref socketref pong message array pongmessagearray pong message array pongmessagearray length set error state seterrorstate error state errorstate close type constants ajp request swallowed finish log is debug enabled isdebugenabled log debug unexpected message type set error state seterrorstate error state errorstate close kept alive keptalive request set start time setstarttime system current time millis currenttimemillis io exception ioexception set error state seterrorstate error state errorstate close throwable exception utils exceptionutils handle throwable handlethrowable log debug get string getstring ajpprocessor header error response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response get error state geterrorstate is error iserror setting filters parse request headers set s tag e setstage org apache coyote constants stage prepare prepare request preparerequest throwable exception utils exceptionutils handle throwable handlethrowable log debug get string getstring ajpprocessor request prepare response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response get error state geterrorstate is error iserror cping endpoint is paused ispaused service unavailable response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response cping process request adapter get error state geterrorstate is error iserror set s tag e setstage org apache coyote constants stage service adapter service request response interruptedioexception set error state seterrorstate error state errorstate close throwable exception utils exceptionutils handle throwable handlethrowable log error get string getstring ajpprocessor request process response set status setstatus set error state seterrorstate error state errorstate close clean get adapter getadapter log request response is async isasync get error state geterrorstate is error iserror finish response finished get error state geterrorstate is io allowed isioallowed finish throwable exception utils exceptionutils handle throwable handlethrowable set error state seterrorstate error state errorstate close error update statistics counter get error state geterrorstate is error iserror response set status setstatus request update count ers updatecounters set s tag e setstage org apache coyote constants stage keep alive keepalive recycle set s tag e setstage org apache coyote constants stage ended get error state geterrorstate is error iserror endpoint is paused ispaused is async isasync socket state socketstate socket state socketstate open socket state socketstate closed action hook actionhook methods send action connector param action code actioncode type action param param action parameter override cases handled action suppress warnings suppresswarnings incomplete action internal actioninternal action code actioncode action code actioncode object param action code actioncode async complete async state machine asyncstatemachine async complete asynccomplete apr endpoint aprendpoint endpoint process socket async processsocketasync socket wrapper socketwrapper socket status socketstatus open read async set timeout settimeout param timeout param long value longvalue socket wrapper socketwrapper set timeout settimeout timeout async dispatch async state machine asyncstatemachine async dispatch asyncdispatch apr endpoint aprendpoint endpoint process socket async processsocketasync socket wrapper socketwrapper socket status socketstatus open read override reset time outs resettimeouts ajp apr connector timeout time socket wrapper socketwrapper async time outs timeouts override output src offset length io exception ioexception output buffer outputbuffer src offset length socket ref socketref socket wrapper socketwrapper get socket getsocket long value longvalue output buffer outputbuffer position socket ref socketref socket send bb sendbb socket ref socketref output buffer outputbuffer position clear buffer prevent overflow buffer output buffer outputbuffer clear io exception ioexception get string getstring ajpprocessor failed send failedsend output buffer outputbuffer clear read amount bytes place input buffer read io exception ioexception input buffer inputbuffer capacity input buffer inputbuffer limit input buffer inputbuffer remaining input buffer inputbuffer compact input buffer inputbuffer limit input buffer inputbuffer position input buffer inputbuffer position n read nread input buffer inputbuffer remaining n read nread socket recvbb socket wrapper socketwrapper get socket getsocket long value longvalue input buffer inputbuffer limit input buffer inputbuffer capacity input buffer inputbuffer limit n read nread input buffer inputbuffer limit input buffer inputbuffer limit n read nread io exception ioexception get string getstring ajpprocessor failed read failedread read amount bytes place input buffer read t readt use available data useavailabledata io exception ioexception use available data useavailabledata input buffer inputbuffer remaining input buffer inputbuffer capacity input buffer inputbuffer limit input buffer inputbuffer remaining input buffer inputbuffer compact input buffer inputbuffer limit input buffer inputbuffer position input buffer inputbuffer position n read nread input buffer inputbuffer remaining n read nread socket recvbb socket wrapper socketwrapper get socket getsocket long value longvalue input buffer inputbuffer limit input buffer inputbuffer capacity input buffer inputbuffer limit n read nread input buffer inputbuffer limit input buffer inputbuffer limit n read nread n read nread status etimedout n read nread status time up timeup io exception ioexception get string getstring ajpprocessor failed read failedread receive chunk data called implement special packet ajp receive data send body packet override receive io exception ioexception body message bodymessage reset read message readmessage body message bodymessage invalid message data received body message bodymessage get len getlen don mark stream chunk blen body message bodymessage peek int peekint blen body message bodymessage get body bytes getbodybytes body bytes bodybytes empty read ajp message param message request duration blocking read message read read didn io exception ioexception failure including incomplete reads read message readmessage ajp message ajpmessage message use available data useavailabledata io exception ioexception header length headerlength message get header length getheaderlength read t readt header length headerlength use available data useavailabledata read header length headerlength input buffer inputbuffer message get buffer getbuffer header length headerlength message length messagelength message process header processheader message length messagelength todo exception close connection frontend message length messagelength length message message length messagelength message get buffer getbuffer length trigger response illegal argument exception illegalargumentexception get string getstring ajpprocessor header too long toolong integer value of valueof message length messagelength integer value of valueof message get buffer getbuffer length read message length messagelength input buffer inputbuffer message get buffer getbuffer header length headerlength message length messagelength recycle processor override recycle socket closing socketclosing recycle socket closing socketclosing input buffer inputbuffer clear input buffer inputbuffer limit output buffer outputbuffer clear