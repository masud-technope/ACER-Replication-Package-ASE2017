licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina session java file input stream fileinputstream java file not found exception filenotfoundexception java io exception ioexception java input stream inputstream java security secure random securerandom org junit fail org junit test org apache catalina lifecycle exception lifecycleexception org apache catalina session org apache catalina core standard context standardcontext name d named benchmarks automatically executed unit tests benchmarks mark t markt core windows dev box thread threads threads threads mark t markt core osx dev box thread threads threads threads test test manager base generate session id testmanagerbasegeneratesessionid exception do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid reduce iter ations iterations context switching slow do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid do test manager base generate session id dotestmanagerbasegeneratesessionid thread count threadcount iter count itercount exception create session manager standard manager standardmanager mgr standard manager standardmanager mgr start internal startinternal lifecycle exception lifecycleexception mgr generate session id generatesessionid mgr session creation timing sessioncreationtiming size manager base managerbase timing stats cache size mgr session creation timing sessioncreationtiming add mgr session expiration timing sessionexpirationtiming size manager base managerbase timing stats cache size mgr session expiration timing sessionexpirationtiming add thread threads thread thread count threadcount thread count threadcount threads thread test thread generate session id testthreadgeneratesessionid mgr iter count itercount start system current time millis currenttimemillis thread count threadcount threads start thread count threadcount threads join interrupted exception interruptedexception print stack trace printstacktrace fail get message getmessage system current time millis currenttimemillis string builder stringbuilder result string builder stringbuilder result append threads result append thread count threadcount result append time result append start system println result to string tostring test thread generate session id testthreadgeneratesessionid runnable manager base managerbase mgr count test thread generate session id testthreadgeneratesessionid manager base managerbase mgr count mgr mgr count count override count mgr generate session id generatesessionid mark t markt core windows dev box thread threads threads threads mark t markt core osx dev box thread threads threads threads test test manager base create session testmanagerbasecreatesession do test manager base create session dotestmanagerbasecreatesession do test manager base create session dotestmanagerbasecreatesession do test manager base create session dotestmanagerbasecreatesession do test manager base create session dotestmanagerbasecreatesession reduce iter ations iterations context switching slow do test manager base create session dotestmanagerbasecreatesession do test manager base create session dotestmanagerbasecreatesession do test manager base create session dotestmanagerbasecreatesession thread count threadcount iter count itercount create session manager standard manager standardmanager mgr standard manager standardmanager mgr start internal startinternal lifecycle exception lifecycleexception mgr set container setcontainer standard context standardcontext mgr generate session id generatesessionid mgr session creation timing sessioncreationtiming size manager base managerbase timing stats cache size mgr session creation timing sessioncreationtiming add mgr session expiration timing sessionexpirationtiming size manager base managerbase timing stats cache size mgr session expiration timing sessionexpirationtiming add thread threads thread thread count threadcount thread count threadcount threads thread test thread create session testthreadcreatesession mgr iter count itercount start system current time millis currenttimemillis thread count threadcount threads start thread count threadcount threads join interrupted exception interruptedexception print stack trace printstacktrace fail get message getmessage system current time millis currenttimemillis string builder stringbuilder result string builder stringbuilder result append threads result append thread count threadcount result append time result append start system println result to string tostring test thread create session testthreadcreatesession runnable manager base managerbase mgr count test thread create session testthreadcreatesession manager base managerbase mgr count mgr mgr count count override count session session mgr create session createsession mgr generate session id generatesessionid session expire secure random securerandom reading dev urandom performance platforms mark t markt core windows dev box secure random securerandom dev urandom thread threads threads mark t markt core osx dev box secure random securerandom dev urandom thread threads threads test test secure random vs dev random testsecurerandomvsdevurandom exception do test secure random vs dev random dotestsecurerandomvsdevurandom do test secure random vs dev random dotestsecurerandomvsdevurandom do test secure random vs dev random dotestsecurerandomvsdevurandom do test secure random vs dev random dotestsecurerandomvsdevurandom thread count threadcount iter count itercount exception do test secure random vs dev random inner dotestsecurerandomvsdevurandominner thread count threadcount iter count itercount do test secure random vs dev random inner dotestsecurerandomvsdevurandominner thread count threadcount iter count itercount do test secure random vs dev random inner dotestsecurerandomvsdevurandominner thread count threadcount iter count itercount use secure random usesecurerandom exception thread threads thread thread count threadcount thread count threadcount use secure random usesecurerandom threads thread test thread secure random testthreadsecurerandom iter count itercount threads thread test thread dev urandom testthreaddevurandom iter count itercount start system current time millis currenttimemillis thread count threadcount threads start thread count threadcount threads join interrupted exception interruptedexception print stack trace printstacktrace fail get message getmessage system current time millis currenttimemillis string builder stringbuilder result string builder stringbuilder use secure random usesecurerandom result append secure random securerandom result append dev urandom result append threads result append thread count threadcount result append time result append start system println result to string tostring test thread secure random testthreadsecurerandom runnable secure random securerandom secure random securerandom bytes count test thread secure random testthreadsecurerandom iter count itercount exception count iter count itercount secure random securerandom secure random securerandom get instance getinstance sha prng override count secure random securerandom next bytes nextbytes bytes test thread dev urandom testthreaddevurandom runnable input stream inputstream bytes count test thread dev urandom testthreaddevurandom iter count itercount file input stream fileinputstream dev urandom file not found exception filenotfoundexception print stack trace printstacktrace count iter count itercount override read count read read bytes read bytes length io exception ioexception read read bytes io exception ioexception print stack trace printstacktrace