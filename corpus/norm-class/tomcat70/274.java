licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina util java unsupported encoding exception unsupportedencodingexception java nio charset charset java util map org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util buf c converter cconverter org apache tomcat util res string manager stringmanager general purpose request parsing encoding utility methods author craig mc clanahan mcclanahan author tim tye request util requestutil log log log factory logfactory get log getlog request util requestutil string resources string manager stringmanager string manager stringmanager get manager getmanager org apache catalina util filter message string characters sensitive html avoids potential att acks attacks caused including java script javascript codes request url reported error messages param message message string filtered string filter string message message content message length message get chars getchars message length content string builder stringbuilder result string builder stringbuilder content length content length content result append result append result append amp result append quot result append content result to string tostring normalize relative uri path relative values strong warning strong method normal izing normalizing application generated paths perform security checks malicious input param path relative path normalized deprecated deprecated resolve circular dependency removed tomcat link org apache tomcat util http request util requestutil normalize string replacement deprecated string normalize string path org apache tomcat util http request util requestutil normalize path normalize relative uri path relative values strong warning strong method normal izing normalizing application generated paths perform security checks malicious input param path relative path normalized param replace back slash replacebackslash replaced deprecated deprecated resolve circular dependency removed tomcat link org apache tomcat util http request util requestutil normalize string replacement deprecated string normalize string path replace back slash replacebackslash org apache tomcat util http request util requestutil normalize path replace back slash replacebackslash append request parameters string map presumed map accessed thread synchronization performed strong implementation note strong url decoding performed individually parsed elements entire query string time properly deal includes encoded character int erpreted interpreted delimiter param map map accumulates parameters param data input string request parameters param encoding encoding encoding unsupported encoding parameters parsed map modified parse parameters parseparameters map string string map string data string encoding data data length encoding extract bytes string encoding lost bytes bytes data get bytes getbytes c converter cconverter get charset getcharset encoding parse parameters parseparameters map bytes encoding unsupported encoding exception unsupportedencodingexception uee log is debug enabled isdebugenabled log debug get string getstring request util requestutil parse parameters parseparameters uee encoding uee decode url encoded string array converted string system character encoding servers assumed string query string param str url encoded string exception illegal argument exception illegalargumentexception character valid digit hexadecimal number string url decode urldecode string str url decode urldecode str decode url encoded string assumed string query string param str url encoded string param enc encoding encoding unsupported encoding returned exception illegal argument exception illegalargumentexception character valid digit hexadecimal number string url decode urldecode string str string enc url decode urldecode str enc decode url encoded string param str url encoded string param enc encoding encoding unsupported encoding returned param is query isquery query string processed exception illegal argument exception illegalargumentexception character valid digit hexadecimal number string url decode urldecode string str string enc is query isquery str encoding extract bytes string encoding lost encoding platform bytes enc bytes str get bytes getbytes charset default charset defaultcharset bytes str get bytes getbytes c converter cconverter get charset getcharset enc unsupported encoding exception unsupportedencodingexception uee log is debug enabled isdebugenabled log debug get string getstring request util requestutil url decode urldecode uee enc uee url decode urldecode bytes enc is query isquery decode url encoded array assumed string query string param bytes url encoded array exception illegal argument exception illegalargumentexception character valid digit hexadecimal number string url decode urldecode bytes url decode urldecode bytes decode url encoded array assumed string query string param bytes url encoded array param enc encoding encoding exception illegal argument exception illegalargumentexception character valid digit hexadecimal number deprecated unused removed deprecated string url decode urldecode bytes string enc url decode urldecode bytes enc decode url encoded array param bytes url encoded array param enc encoding encoding unsupported encoding returned param is query isquery query string processed exception illegal argument exception illegalargumentexception character valid digit hexadecimal number string url decode urldecode bytes string enc is query isquery bytes len bytes length len test bytes is query isquery len illegal argument exception illegalargumentexception get string getstring request util requestutil url decode urldecode missing digit missingdigit convert hex digit converthexdigit bytes convert hex digit converthexdigit bytes bytes enc string bytes c converter cconverter get charset getcharset enc unsupported encoding exception unsupportedencodingexception uee log is debug enabled isdebugenabled log debug get string getstring request util requestutil url decode urldecode uee enc uee string bytes convert character hexadecimal digit param character convert hex digit converthexdigit illegal argument exception illegalargumentexception get string getstring request util requestutil convert hex digit converthexdigit not hex nothex character value of valueof pair map exist add array values param map map populate param parameter param parameter put map entry putmapentry map string string map string string string new values newvalues string old values oldvalues map old values oldvalues new values newvalues string new values newvalues new values newvalues string old values oldvalues length system arraycopy old values oldvalues new values newvalues old values oldvalues length new values newvalues old values oldvalues length map new values newvalues append request parameters string map presumed map accessed thread synchronization performed strong implementation note strong url decoding performed individually parsed elements entire query string time properly deal includes encoded character int erpreted interpreted delimiter note array data modified method caller beware param map map accumulates parameters param data input string request parameters param encoding encoding encoding exception unsupported encoding exception unsupportedencodingexception requested encoding supported parse parameters parseparameters map string string map data string encoding unsupported encoding exception unsupportedencodingexception charset charset c converter cconverter get charset getcharset encoding data data length string key string data length data string data charset key put map entry putmapentry map key key key key string data charset data data data convert hex digit converthexdigit data convert hex digit converthexdigit data data save key string data charset put map entry putmapentry map key