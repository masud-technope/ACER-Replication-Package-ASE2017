licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache jasper compiler java file not found exception filenotfoundexception java io exception ioexception java input stream reader inputstreamreader java util stack java util jar jar file jarfile org apache jasper jasper exception jasperexception org apache jasper jsp compilation context jspcompilationcontext org apache jasper runtime exception utils exceptionutils org apache jasper xml parser xmlparser xml encoding detector xmlencodingdetector org xml sax attributes controller parsing jsp parser controller parsercontroller instance jsp jsp segments included include directive segment standard xml syntax sel ects selects invokes parser jsp included segments author pierre delisle author jan luehe parser controller parsercontroller tag constants tagconstants string charset charset jsp compilation context jspcompilationcontext ctxt compiler compiler error dispatcher errordispatcher err syntax xml standard file processed is xml isxml stack track current base directory include directives refer relative paths stack string base dir stack basedirstack stack string is encoding specified in prolog isencodingspecifiedinprolog is bom present isbompresent skip string source enc sourceenc is default page encoding isdefaultpageencoding is tag file istagfile directive only directiveonly constructor parser controller parsercontroller jsp compilation context jspcompilationcontext ctxt compiler compiler ctxt ctxt compiler compiler err compiler get error dispatcher geterrordispatcher jsp compilation context jspcompilationcontext get jsp compilation context getjspcompilationcontext ctxt compiler get compiler getcompiler compiler parses jsp tag file invoked compiler param in file name infilename path jsp tag file parsed node nodes parse string in file name infilename file not found exception filenotfoundexception jasper exception jasperexception io exception ioexception parsing package d packaged tag file resource included include directive ctxt get tag file jar gettagfilejar returns jar file read tag file included resource is tag file istagfile ctxt is tag file istagfile directive only directiveonly do parse doparse in file name infilename ctxt get tag file jar resource gettagfilejarresource parses directives jsp tag file invoked compiler param in file name infilename path jsp tag file parsed node nodes parse dir ectives parsedirectives string in file name infilename file not found exception filenotfoundexception jasper exception jasperexception io exception ioexception parsing package d packaged tag file resource included include directive ctxt get tag file jar gettagfilejar returns jar file read tag file included resource is tag file istagfile ctxt is tag file istagfile directive only directiveonly do parse doparse in file name infilename ctxt get tag file jar resource gettagfilejarresource processes include directive path param in file name infilename path resource included param parent parent node include directive param jar resource jarresource jar file read included resource included resource read file system filesystem node nodes parse string in file name infilename node parent jar resource jarresource jar resource jarresource file not found exception filenotfoundexception jasper exception jasperexception io exception ioexception remain unchanged do parse doparse in file name infilename parent jar resource jarresource extra cts extracts tag file directive tag file invoked compiler param in file name infilename tag file parsed param jar resource jarresource location tag file node nodes parse tag file dir ectives parsetagfiledirectives string in file name infilename jar resource jarresource jar resource jarresource file not found exception filenotfoundexception jasper exception jasperexception io exception ioexception is tag file save istagfilesave is tag file istagfile directive only save directiveonlysave directive only directiveonly is tag file istagfile directive only directiveonly node nodes do parse doparse in file name infilename jar resource jarresource directive only directiveonly directive only save directiveonlysave is tag file istagfile is tag file save istagfilesave parses jsp tag file path param in file name infilename jsp tag file parsed param parent parent node processing include directive param is tag file istagfile file parsed tag file regular jsp param directives only directivesonly file parsed tag file int erested interested directives needed constructing tag file info tagfileinfo param jar resource jarresource jar file read jsp tag file jsp tag file read file system filesystem node nodes do parse doparse string in file name infilename node parent jar resource jarresource jar resource jarresource file not found exception filenotfoundexception jasper exception jasperexception io exception ioexception node nodes parsed page parsedpage is encoding specified in prolog isencodingspecifiedinprolog is bom present isbompresent is default page encoding isdefaultpageencoding jar file jarfile jar file jarfile jar resource jarresource jar resource jarresource get jar file getjarfile string abs file name absfilename resolve file name resolvefilename in file name infilename string jsp config page enc jspconfigpageenc get jsp config page encoding getjspconfigpageencoding abs file name absfilename figure type jsp document encoding type dealing determine syntax and encoding determinesyntaxandencoding abs file name absfilename jar file jarfile jsp config page enc jspconfigpageenc parent included resource add dependent list jar file jarfile compiler get page info getpageinfo add dependant adddependant abs file name absfilename ctxt get last modified getlastmodified abs file name absfilename string entry abs file name absfilename substring compiler get page info getpageinfo add dependant adddependant jar resource jarresource get entry getentry entry to string tostring value of valueof jar file jarfile get entry getentry entry get time gettime is xml isxml is encoding specified in prolog isencodingspecifiedinprolog is bom present isbompresent encoding explicitly xml prolog matches jsp config element treating utf utf utf identical jsp config page enc jspconfigpageenc jsp config page enc jspconfigpageenc equals source enc sourceenc jsp config page enc jspconfigpageenc starts with startswith utf source enc sourceenc starts with startswith utf err jsp error jsperror jsp error prolog config encoding mismatch source enc sourceenc jsp config page enc jspconfigpageenc dispatch parser is xml isxml jsp document xml syntax input stream inputstream jspx created properly closed jsp document parser jspdocumentparser parsed page parsedpage jsp document parser jspdocumentparser parse abs file name absfilename jar file jarfile parent is tag file istagfile directive only directiveonly source enc sourceenc jsp config page enc jspconfigpageenc is encoding specified in prolog isencodingspecifiedinprolog is bom present isbompresent standard syntax input stream reader inputstreamreader in stream reader instreamreader in stream reader instreamreader jsp util jsputil get reader getreader abs file name absfilename source enc sourceenc jar file jarfile ctxt err skip jsp reader jspreader jsp reader jspreader jsp reader jspreader ctxt abs file name absfilename source enc sourceenc in stream reader instreamreader err parsed page parsedpage parser parse jsp reader jspreader parent is tag file istagfile directive only directiveonly jar resource jarresource source enc sourceenc jsp config page enc jspconfigpageenc is default page encoding isdefaultpageencoding is bom present isbompresent in stream reader instreamreader in stream reader instreamreader close exception jar file jarfile jar file jarfile close throwable exception utils exceptionutils handle throwable handlethrowable base dir stack basedirstack pop parsed page parsedpage checks uri matched url pattern jsp property group web xml returns encoding element param abs file name absfilename uri match encoding attribute jsp property group matching url pattern string get jsp config page encoding getjspconfigpageencoding string abs file name absfilename jasper exception jasperexception jsp config jspconfig jsp config jspconfig ctxt get options getoptions get jsp config getjspconfig jsp config jspconfig jsp property jspproperty jsp property jspproperty jsp config jspconfig find jsp property findjspproperty abs file name absfilename jsp property jspproperty get page encoding getpageencoding determines syntax standard xml encoding properties file stores is xml isxml source enc sourceenc instance variables determine syntax and encoding determinesyntaxandencoding string abs file name absfilename jar file jarfile jar file jarfile string jsp config page enc jspconfigpageenc jasper exception jasperexception io exception ioexception is xml isxml syntax xml standard file external jsp configuration element jspx suffix enclosing file included resources is external isexternal revert temporary usage iso utf revert jsp config jspconfig jsp config jspconfig ctxt get options getoptions get jsp config getjspconfig jsp config jspconfig jsp property jspproperty jsp property jspproperty jsp config jspconfig find jsp property findjspproperty abs file name absfilename jsp property jspproperty is xml isxml xml jsp property group is xml isxml jsp util jsputil boolean value booleanvalue jsp property jspproperty is xml isxml is external isexternal abs file name absfilename ends with endswith jspx abs file name absfilename ends with endswith tag x tagx is xml isxml is external isexternal is external isexternal is xml isxml jsp standard syntax encoding jsp config source enc sourceenc jsp config page enc jspconfigpageenc source enc sourceenc don encoding bom determine source enc sourceenc iso xml syntax unknown auto detect encoding object ret xml encoding detector xmlencodingdetector get encoding getencoding abs file name absfilename jar file jarfile ctxt err source enc sourceenc string ret ret boolean value booleanvalue is encoding specified in prolog isencodingspecifiedinprolog ret boolean value booleanvalue is bom present isbompresent skip integer ret int value intvalue is xml isxml source enc sourceenc equals utf don dealing xml standard syntax check jsp root element careful encoded iso sequences utf converter exceptions safe source encoding iso invalid sequences iso character sequences jsp root identical encoding utf iso extensions ascii source enc sourceenc iso revert is xml isxml jspx suffix point is external isexternal is xml isxml search jsp root action order determine dealing xml standard syntax dealing is external isexternal is xml isxml check xml prolog prevents output ting outputting xml jsp syntax xml prolog treated template text jsp reader jspreader jsp reader jspreader jsp reader jspreader jsp reader jspreader ctxt abs file name absfilename source enc sourceenc jar file jarfile err file not found exception filenotfoundexception jasper exception jasperexception jsp reader jspreader set single file setsinglefile mark start mark startmark jsp reader jspreader mark is external isexternal jsp reader jspreader reset start mark startmark has jsp root hasjsproot jsp reader jspreader revert source enc sourceenc utf is xml isxml revert is bom present isbompresent source enc sourceenc utf is xml isxml point dealing jsp syntax xml prolog treated template text determine encoding directive jsp config is bom present isbompresent source enc sourceenc jsp config page enc jspconfigpageenc source enc sourceenc source enc sourceenc get page encoding for jsp syntax getpageencodingforjspsyntax jsp reader jspreader start mark startmark source enc sourceenc iso jsp spec source enc sourceenc iso is default page encoding isdefaultpageencoding determines source encoding tag file jsp syntax reading order page encoding pageencoding directive attribute charset content type contenttype directive attribute encoding string get page encoding for jsp syntax getpageencodingforjspsyntax jsp reader jspreader jsp reader jspreader mark start mark startmark jasper exception jasperexception string encoding string save encoding saveencoding jsp reader jspreader reset start mark startmark determine encoding directive form tag jsp directive jsp directive tag jsp reader jspreader skip until skipuntil comment skip jsp reader jspreader matches jsp reader jspreader skip until skipuntil error caught parser is directive isdirective jsp reader jspreader matches is directive isdirective jsp reader jspreader skip spaces skipspaces is directive isdirective jsp reader jspreader matches jsp directive is directive isdirective compare tag don match taglib jsp reader jspreader matches tag jsp reader jspreader matches jsp reader jspreader skip spaces skipspaces attributes attrs parser parse attributes parseattributes jsp reader jspreader encoding get page encoding from directive getpageencodingfromdirective attrs page encoding pageencoding encoding encoding get page encoding from directive getpageencodingfromdirective attrs content type contenttype encoding save encoding saveencoding encoding encoding encoding save encoding saveencoding encoding s cans scans attributes attribute page encoding pageencoding content type contenttype returns encoding content type contenttype encoding content type charset component param attrs directive attributes param attr name attrname attribute search page encoding pageencoding content type contenttype encoding string get page encoding from directive getpageencodingfromdirective attributes attrs string attr name attrname string attrs get value getvalue attr name attrname attr name attrname equals page encoding pageencoding attr name attrname content type contenttype string content type contenttype string encoding content type contenttype loc content type contenttype index of indexof charset loc encoding content type contenttype substring loc charset length encoding resolve file update base dir stack basedirstack track current base directory included file root file absolute path initial base dir stack basedirstack string resolve file name resolvefilename string in file name infilename string file name filename in file name infilename replace is absolute isabsolute file name filename starts with startswith file name filename is absolute isabsolute file name filename base dir stack basedirstack peek file name filename string base dir basedir file name filename substring file name filename last index of lastindexof base dir stack basedirstack push base dir basedir file name filename has jsp root hasjsproot jsp reader jspreader reader jasper exception jasperexception mark start start reader skip until skipuntil reader next char nextchar start mark reader skip until skipuntil root string prefix reader get text gettext start substring start reader skip until skipuntil string root reader get text gettext start string xml ns decl xmlnsdecl xml ns xmlns prefix root index of indexof xml ns decl xmlnsdecl xml ns decl xmlnsdecl length root length character is whitespace iswhitespace root char at charat root length root char at charat root length character is whitespace iswhitespace root char at charat root length root char at charat root char at charat root region matches regionmatches jsp uri jsp uri length