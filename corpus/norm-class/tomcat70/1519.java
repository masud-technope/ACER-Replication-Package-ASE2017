licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina ssi java i o exception ioexception java unsupported encoding exception unsupportedencodingexception java net url java net url connection urlconnection java net url decoder urldecoder java util collection java util java util enumeration java util locale javax servlet request dispatcher requestdispatcher javax servlet servlet context servletcontext javax servlet servlet exception servletexception javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org apache catalina connector request org apache coyote constants org apache tomcat util buf c converter cconverter org apache tomcat util http request util requestutil implementation ssi external resolver ssiexternalresolver servlets author dan sandberg author david becker ssi servlet external resolver ssiservletexternalresolver ssi external resolver ssiexternalresolver string variable names type content length content type document document uri gateway http accept http accept encoding http accept language http connection http host http ref erer referer http user agent path info path translated query string query string unescaped remote addr remote host remote port remote user request method request uri script filename script server addr server server port server protocol server software unique servlet context servletcontext context http servlet request httpservletrequest req http servlet response httpservletresponse res is virtual webapp relative isvirtualwebapprelative debug string input encoding inputencoding ssi servlet external resolver ssiservletexternalresolver servlet context servletcontext context http servlet request httpservletrequest req http servlet response httpservletresponse res is virtual webapp relative isvirtualwebapprelative debug string input encoding inputencoding context context req req res res is virtual webapp relative isvirtualwebapprelative is virtual webapp relative isvirtualwebapprelative debug debug input encoding inputencoding input encoding inputencoding override log string message throwable throwable doesn throwable context log message throwable context log message override add variable names addvariablenames collection string variable names variablenames variable names length string variable name variablename variable names string variable value variablevalue get variable value getvariablevalue variable name variablename variable value variablevalue variable names variablenames add variable name variablename enumeration string req get attribute names getattributenames has more elements hasmoreelements string next element nextelement is name reserved isnamereserved variable names variablenames add object get req attribute ignore case getreqattributeignorecase string target name targetname object object is name reserved isnamereserved target name targetname object req get attribute getattribute target name targetname object enumeration string req get attribute names getattributenames has more elements hasmoreelements string next element nextelement target name targetname equals ignore case equalsignorecase is name reserved isnamereserved object req get attribute getattribute object object is name reserved isnamereserved string starts with startswith java starts with startswith javax starts with startswith sun override set variable value setvariablevalue string string is name reserved isnamereserved req set attribute setattribute override string get variable value getvariablevalue string string ret val retval object object get req attribute ignore case getreqattributeignorecase object ret val retval object to string tostring ret val retval getcgivariable ret val retval string getcgivariable string string ret val retval string name parts nameparts to upper case touppercase locale english split required parts requiredparts name parts nameparts length name parts nameparts equals path required parts requiredparts name parts nameparts equals name parts nameparts equals type ret val retval req get auth type getauthtype name parts nameparts equals content name parts nameparts equals length content length contentlength req get content length getcontentlength content length contentlength ret val retval integer to string tostring content length contentlength name parts nameparts equals type ret val retval req get content type getcontenttype name parts nameparts equals document name parts nameparts equals string requesturi req getrequesturi ret val retval requesturi substring requesturi last index of lastindexof name parts nameparts equals uri ret val retval req getrequesturi equals ignore case equalsignorecase gateway ret val retval cgi name parts nameparts equals http name parts nameparts equals accept string accept name parts nameparts length accept accept name parts nameparts equals encoding required parts requiredparts accept accept encoding name parts nameparts equals language required parts requiredparts accept accept language accept enumeration string accept headers acceptheaders req get headers getheaders accept accept headers acceptheaders accept headers acceptheaders has more elements hasmoreelements string builder stringbuilder string builder stringbuilder accept headers acceptheaders next element nextelement accept headers acceptheaders has more elements hasmoreelements append append accept headers acceptheaders next element nextelement ret val retval to string tostring name parts nameparts equals connection ret val retval req get header getheader connection name parts nameparts equals host ret val retval req get header getheader host name parts nameparts equals ref erer referer ret val retval req get header getheader ref erer referer name parts nameparts equals user name parts nameparts length name parts nameparts equals agent required parts requiredparts ret val retval req get header getheader user agent name parts nameparts equals path name parts nameparts equals info ret val retval req get path info getpathinfo name parts nameparts equals translated ret val retval req get path translated getpathtranslated name parts nameparts equals query name parts nameparts equals string string query string querystring req get query string getquerystring name parts nameparts length apache displays empty string ret val retval null to empty string nulltoemptystring query string querystring name parts nameparts equals unescaped required parts requiredparts query string querystring res ort resort string query string encoding querystringencoding constants character encoding string uri encoding uriencoding use body encoding for i usebodyencodingforuri encoding settings request connector string request encoding requestencoding req get character encoding getcharacterencoding req request uri encoding uriencoding request req get connector getconnector geturiencoding use body encoding for i usebodyencodingforuri request req get connector getconnector get use body encoding for i getusebodyencodingforuri valid apply settings request connector uri encoding uriencoding query string encoding querystringencoding uri encoding uriencoding use body encoding for i usebodyencodingforuri request encoding requestencoding query string encoding querystringencoding request encoding requestencoding ret val retval url decoder urldecoder decode query string querystring query string encoding querystringencoding unsupported encoding exception unsupportedencodingexception ret val retval query string querystring name parts nameparts equals remote name parts nameparts equals addr ret val retval req get remote addr getremoteaddr name parts nameparts equals host ret val retval req get remote host getremotehost name parts nameparts equals ident implemented name parts nameparts equals port ret val retval integer to string tostring req get remote port getremoteport name parts nameparts equals user ret val retval req get remote user getremoteuser name parts nameparts equals request name parts nameparts equals method ret val retval req get method getmethod name parts nameparts equals uri error original uri ret val retval string req get attribute getattribute request dispatcher requestdispatcher request uri ret val retval ret val retval req getrequesturi name parts nameparts equals script string script name scriptname req get servlet path getservletpath name parts nameparts equals filename ret val retval context get real path getrealpath script name scriptname name parts nameparts equals ret val retval script name scriptname name parts nameparts equals server name parts nameparts equals addr ret val retval req get local addr getlocaladdr name parts nameparts equals ret val retval req get server name getservername name parts nameparts equals port ret val retval integer to string tostring req get server port getserverport name parts nameparts equals protocol ret val retval req get protocol getprotocol name parts nameparts equals software string builder stringbuilder string builder stringbuilder context get server info getserverinfo append append system get property getproperty java append append system get property getproperty java version append append system get property getproperty ret val retval to string tostring equals ignore case equalsignorecase unique ret val retval req get requested session i d getrequestedsessionid required parts requiredparts name parts nameparts length ret val retval override get current date getcurrentdate string null to empty string nulltoemptystring string string string ret val retval string ret val retval ret val retval ret val retval string get path without file name getpathwithoutfilename string servlet path servletpath string ret val retval last slash lastslash servlet path servletpath last index of lastindexof last slash lastslash cut file ret val retval servlet path servletpath substring last slash lastslash ret val retval string get path without context getpathwithoutcontext string context path contextpath string servlet path servletpath servlet path servletpath starts with startswith context path contextpath servlet path servletpath substring context path contextpath length servlet path servletpath string get absolute path getabsolutepath string path i o exception ioexception string path without context pathwithoutcontext ssi servlet request util ssiservletrequestutil get relative path getrelativepath req string prefix get path without file name getpathwithoutfilename path without context pathwithoutcontext prefix i o exception ioexception couldn remove filename path path without context pathwithoutcontext string full path fullpath prefix path string ret val retval request util requestutil normalize full path fullpath ret val retval i o exception ioexception normalization yielded path full path fullpath ret val retval servlet context and path servletcontextandpath get servlet context and path from non virtual path getservletcontextandpathfromnonvirtualpath string non virtual path nonvirtualpath i o exception ioexception non virtual path nonvirtualpath starts with startswith non virtual path nonvirtualpath starts with startswith i o exception ioexception virtual path absolute non virtual path nonvirtualpath non virtual path nonvirtualpath index of indexof i o exception ioexception virtual path non virtual path nonvirtualpath string path get absolute path getabsolutepath non virtual path nonvirtualpath servlet context and path servletcontextandpath cs and p csandp servlet context and path servletcontextandpath context path cs and p csandp servlet context and path servletcontextandpath get servlet context and path from virtual path getservletcontextandpathfromvirtualpath string virtual path virtualpath i o exception ioexception virtual path virtualpath starts with startswith virtual path virtualpath starts with startswith servlet context and path servletcontextandpath context get absolute path getabsolutepath virtual path virtualpath string normalized request util requestutil normalize virtual path virtualpath is virtual webapp relative isvirtualwebapprelative servlet context and path servletcontextandpath context normalized servlet context servletcontext norm context normcontext context get context getcontext normalized norm context normcontext i o exception ioexception couldn context path normalized file shtml app name appname file shtml is root context isrootcontext norm context normcontext string no context nocontext get path without context getpathwithoutcontext norm context normcontext get context path getcontextpath normalized no context nocontext i o exception ioexception couldn remove context path normalized servlet context and path servletcontextandpath norm context normcontext no context nocontext servlet context and path servletcontextandpath norm context normcontext normalized assumes servlet context servletcontext assumes identity comparison context assuming get context getcontext root context accessible isn servlet context servletcontext root context match is root context isrootcontext servlet context servletcontext servlet context servletcontext servlet context servletcontext servlet context servletcontext get context getcontext servlet context and path servletcontextandpath get servlet context and path getservletcontextandpath string original path originalpath virtual i o exception ioexception servlet context and path servletcontextandpath cs and p csandp debug log ssi servlet external resolver ssiservletexternalresolver get servlet context and path getservletcontextandpath original path originalpath virtual virtual cs and p csandp get servlet context and path from virtual path getservletcontextandpathfromvirtualpath original path originalpath cs and p csandp get servlet context and path from non virtual path getservletcontextandpathfromnonvirtualpath original path originalpath cs and p csandp url connection urlconnection geturlconnection string original path originalpath virtual i o exception ioexception servlet context and path servletcontextandpath cs and p csandp get servlet context and path getservletcontextandpath original path originalpath virtual servlet context servletcontext context cs and p csandp get servlet context getservletcontext string path cs and p csandp get path getpath url url context get resource getresource path url i o exception ioexception context resource path url connection urlconnection url connection urlconnection url open connection openconnection url connection urlconnection override get file last modified getfilelastmodified string path virtual i o exception ioexception last modified lastmodified url connection urlconnection url connection urlconnection geturlconnection path virtual last modified lastmodified url connection urlconnection get last modified getlastmodified i o exception ioexception last modified lastmodified override get file size getfilesize string path virtual i o exception ioexception file size filesize url connection urlconnection url connection urlconnection geturlconnection path virtual file size filesize url connection urlconnection get content length getcontentlength i o exception ioexception file size filesize making lots unnecessary copies included data comp lains complains slow connect included stream print writer ssi command ssicommand override string get file text getfiletext string original path originalpath virtual i o exception ioexception servlet context and path servletcontextandpath cs and p csandp get servlet context and path getservletcontextandpath original path originalpath virtual servlet context servletcontext context cs and p csandp get servlet context getservletcontext string path cs and p csandp get path getpath request dispatcher requestdispatcher context get request dispatcher getrequestdispatcher path i o exception ioexception couldn request dispatcher path path byte array servlet output stream bytearrayservletoutputstream basos byte array servlet output stream bytearrayservletoutputstream response include wrapper responseincludewrapper response include wrapper responseincludewrapper response include wrapper responseincludewrapper context req res basos include req response include wrapper responseincludewrapper assume included servlet flushed output response include wrapper responseincludewrapper flush output stream or writer flushoutputstreamorwriter bytes basos to byte array tobytearray assume platform encoding string ret val retval input encoding inputencoding ret val retval string bytes ret val retval string bytes c converter cconverter get charset getcharset input encoding inputencoding included ret val retval equals req get method getmethod equals ignore case equalsignorecase org apache coyote http constants head i o exception ioexception couldn find file path ret val retval servlet exception servletexception i o exception ioexception couldn include file original path originalpath servlet exception servletexception get message getmessage servlet context and path servletcontextandpath servlet context servletcontext servlet context servletcontext string path servlet context and path servletcontextandpath servlet context servletcontext servlet context servletcontext string path servlet context servletcontext servlet context servletcontext path path servlet context servletcontext get servlet context getservletcontext servlet context servletcontext string get path getpath path