licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tcp java beans property change support propertychangesupport java serializable java util array list arraylist java util hash map hashmap java util iterator java util list java util map java util concurrent concurrent hash map concurrenthashmap javax management object name objectname org apache catalina container org apache catalina context org apache catalina engine org apache catalina host org apache catalina lifecycle org apache catalina lifecycle event lifecycleevent org apache catalina lifecycle exception lifecycleexception org apache catalina lifecycle listener lifecyclelistener org apache catalina lifecycle state lifecyclestate org apache catalina manager org apache catalina valve org apache catalina catalina cluster catalinacluster org apache catalina cluster deployer clusterdeployer org apache catalina cluster listener clusterlistener org apache catalina cluster manager clustermanager org apache catalina cluster message clustermessage org apache catalina cluster valve clustervalve org apache catalina session cluster session listener clustersessionlistener org apache catalina session delta manager deltamanager org apache catalina session jvm r out e binder valve jvmroutebindervalve org apache catalina session jvm r out e session binder listener jvmroutesessionidbinderlistener org apache catalina session session message sessionmessage org apache catalina util i dynamic property idynamicproperty org apache catalina mbeans m bean utils mbeanutils org apache catalina tribes channel org apache catalina tribes channel listener channellistener org apache catalina tribes member org apache catalina tribes member ship listener membershiplistener org apache catalina tribes group group channel groupchannel org apache catalina tribes group int erceptors interceptors message dispatch messagedispatch interceptor org apache catalina tribes group int erceptors interceptors tcp failure detector tcpfailuredetector org apache catalina util lifecycle bean base lifecyclembeanbase org apache juli logging log org apache juli logging log factory logfactory org apache tomcat util int rospection utils introspectionutils org apache tomcat util res string manager stringmanager cluster implementation simple multicast res ponsible responsible setting cluster call ers callers valid multicast receiver sender fixme wrote test cases testcases author filip hanik author remy maucherat author peter rossbach simple tcp cluster simpletcpcluster lifecycle bean base lifecyclembeanbase catalina cluster catalinacluster lifecycle listener lifecyclelistener i dynamic property idynamicproperty member ship listener membershiplistener channel listener channellistener log log log factory logfactory get log getlog simple tcp cluster simpletcpcluster instance variables descriptive component implementation string info simple tcp cluster simpletcpcluster string member register memberregister event member register string member register memberregister event member register string managerregister event manager register string managerregister event manager register string managerunregister event manager unregister string managerunregister event manager unregister string member unregister memberunregister event member unregister string member unregister memberunregister event member unregister string send message failure event send message failure string receive message failure event receive message failure group channel channel channel group channel groupchannel logging purpose string cluster imp name clusterimpname simple tcp cluster simpletcpcluster string manager string manager stringmanager string manager stringmanager get manager getmanager constants cluster join string cluster name clustername call channel heartbeat container background thread org apache catalina tribes group group channel groupchannel heartbeat heartbeat background enabled heartbeatbackgroundenabled container cluster container container property change support component property change support propertychangesupport support property change support propertychangesupport context manager association distributed contexts map string cluster manager clustermanager managers hash map hashmap string cluster manager clustermanager cluster manager clustermanager manager template managertemplate delta manager deltamanager list valve valves array list arraylist valve cluster deployer clusterdeployer cluster deployer clusterdeployer object name objectname oname cluster deployer onameclusterdeployer listeners messages list cluster listener clusterlistener cluster listeners clusterlisteners array list arraylist cluster listener clusterlistener comment code notify lifecycle listener on failure notifylifecyclelisteneronfailure code notify lifecycle listener on failure notifylifecyclelisteneronfailure dynamic sender code properties code deprecated unused removed tomcat deprecated map string object properties hash map hashmap string object channel send options channelsendoptions channel send options async hronous asynchronous channel start options channelstartoptions channel map member object name objectname member oname map memberonamemap concurrent hash map concurrenthashmap member object name objectname simple tcp cluster simpletcpcluster descriptive cluster implementation version number format code description version code override string get info getinfo info heartbeat enable flag heartbeat background enabled heartbeatbackgroundenabled is heartbeat background enabled isheartbeatbackgroundenabled heartbeat background enabled heartbeatbackgroundenabled enabled container background thread backgroundthread call heartbeat channel param heartbeat background enabled heartbeatbackgroundenabled heartbeat background enabled heartbeatbackgroundenabled set heartbeat background enabled setheartbeatbackgroundenabled heartbeat background enabled heartbeatbackgroundenabled heartbeat background enabled heartbeatbackgroundenabled heartbeat background enabled heartbeatbackgroundenabled cluster join cluster create param cluster name clustername cluster name clustername join override set cluster name setclustername string cluster name clustername cluster name clustername cluster name clustername cluster server configured operate cluster server override string get cluster name getclustername cluster name clustername container container get name getname cluster name clustername container cluster param container container override set container setcontainer container container container old container oldcontainer container container container support fire property change firepropertychange container old container oldcontainer container container cluster container cluster override container get container getcontainer container returns notify lifecycle listener on failure notifylifecyclelisteneronfailure is notify lifecycle listener on failure isnotifylifecyclelisteneronfailure notify lifecycle listener on failure notifylifecyclelisteneronfailure param notify listener on failure notifylisteneronfailure notify lifecycle listener on failure notifylifecyclelisteneronfailure set notify lifecycle listener on failure setnotifylifecyclelisteneronfailure notify listener on failure notifylisteneronfailure old notify listener on failure oldnotifylisteneronfailure notify lifecycle listener on failure notifylifecyclelisteneronfailure notify lifecycle listener on failure notifylifecyclelisteneronfailure notify listener on failure notifylisteneronfailure support fire property change firepropertychange notify lifecycle listener on failure notifylifecyclelisteneronfailure old notify listener on failure oldnotifylisteneronfailure notify lifecycle listener on failure notifylifecyclelisteneronfailure add cluster valve cluster val ves valves add container cluster started param valve cluster valve override add valve addvalve valve valve valve cluster valve clustervalve valves valve valves add valve cluster valves current cluster valves override valve get val ves getvalves valves to array toarray valve valves size cluster listeners cluster array listeners registered length array returned cluster listener clusterlistener find cluster listeners findclusterlisteners cluster listeners clusterlisteners size cluster listener clusterlistener listener cluster listener clusterlistener cluster listeners clusterlisteners size cluster listeners clusterlisteners to array toarray listener listener cluster listener clusterlistener add cluster message listener register cluster listener org apache catalina catalina cluster catalinacluster add cluster listener addclusterlistener org apache catalina cluster listener clusterlistener override add cluster listener addclusterlistener cluster listener clusterlistener listener listener cluster listeners clusterlisteners listener cluster listeners clusterlisteners add listener listener set cluster setcluster remove message listener deregister cluster listener org apache catalina catalina cluster catalinacluster remove cluster listener removeclusterlistener org apache catalina cluster listener clusterlistener override remove cluster listener removeclusterlistener cluster listener clusterlistener listener listener cluster listeners clusterlisteners remove listener listener set cluster setcluster current deployer override cluster deployer clusterdeployer get cluster deployer getclusterdeployer cluster deployer clusterdeployer deployer cluster started override set cluster deployer setclusterdeployer cluster deployer clusterdeployer cluster deployer clusterdeployer cluster deployer clusterdeployer cluster deployer clusterdeployer override set channel setchannel channel channel channel channel set manager template setmanagertemplate cluster manager clustermanager manager template managertemplate manager template managertemplate manager template managertemplate set channel send options setchannelsendoptions channel send options channelsendoptions channel send options channelsendoptions channel send options channelsendoptions members has members hasmembers override has members hasmembers has members hasmembers current cluster members members empty array override member get members getmembers channel get members getmembers member represents node member override member get local member getlocalmember channel get local member getlocalmember dynamic manager property handling jmx hack direct jconsole param param deprecated unused removed tomcat deprecated set property setproperty string string set property setproperty object config attributes reflect propagate managers param param deprecated unused removed tomcat override deprecated set property setproperty string object log is trace enabled istraceenabled log trace get string getstring simple tcp cluster simpletcpcluster set property setproperty properties properties dynamic setting properties nice security ris k risk exposed jmx sit guess property names explicit property names log warn dynamic set property setproperty disabled explicit properties element identify current config param key property deprecated unused removed tomcat override deprecated object get property getproperty string key log is trace enabled istraceenabled log trace get string getstring simple tcp cluster simpletcpcluster get property getproperty key properties key properties iterator property names deprecated unused removed tomcat override deprecated iterator string get property names getpropertynames properties key set keyset iterator remove configured property param key deprecated unused removed tomcat override deprecated remove property removeproperty string key properties remove key transfer properties cluster configuration sub element subelement bean param prefix param bean deprecated unused removed tomcat deprecated transfer property transferproperty string prefix object bean prefix iterator string iter get property names getpropertynames iter has next hasnext string pkey iter pkey starts with startswith prefix string key pkey substring prefix length object get property getproperty pkey int rospection utils introspectionutils set property setproperty bean key to string tostring methods returns managers override map string cluster manager clustermanager get managers getmanagers managers override channel get channel getchannel channel cluster manager clustermanager get manager template getmanagertemplate manager template managertemplate get channel send options getchannelsendoptions channel send options channelsendoptions create manager add cluster start manager param context manager org apache catalina cluster create manager createmanager java lang string delta manager deltamanager start override manager create manager createmanager string log is debug enabled isdebugenabled log debug creating cluster manager clustermanager context get manager template getmanagertemplate get class getclass get name getname cluster manager clustermanager manager manager manager template managertemplate clone from template clonefromtemplate manager set name setname exception log error unable clone cluster manager def aulting defaulting org apache catalina session delta manager deltamanager manager org apache catalina session delta manager deltamanager manager manager set cluster setcluster manager override register manager registermanager manager manager manager cluster manager clustermanager log warn manager manager implement cluster manager clustermanager add ition addition cluster aborted cluster manager clustermanager cmanager cluster manager clustermanager manager notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent managerregister event manager string cluster name clustername get manager name getmanagername cmanager get name getname manager cmanager set name setname cluster name clustername cmanager set cluster setcluster managers cluster name clustername cmanager notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent managerregister event manager remove application cluster replication bus org apache catalina cluster remove manager removemanager manager override remove manager removemanager manager manager manager manager cluster manager clustermanager cluster manager clustermanager cmgr cluster manager clustermanager manager notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent managerunregister event manager managers remove get manager name getmanagername cmgr get name getname manager cmgr set cluster setcluster notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent managerunregister event manager param param manager todo override string get manager name getmanagername string manager manager string cluster name clustername cluster name clustername cluster name clustername manager get container getcontainer get name getname get container getcontainer engine context context context manager get container getcontainer container host context get parent getparent host host cluster name clustername cluster name clustername starts with startswith host get name getname cluster name clustername host get name getname cluster name clustername cluster name clustername manager org apache catalina catalina cluster catalinacluster get manager getmanager java lang string override manager get manager getmanager string managers lifecycle methods execute periodic task reloading method invoked class loading classloading context container unexpected throw ables throwables caught log ged logged org apache catalina deploy farm war deployer farmwardeployer background process backgroundprocess org apache catalina tribes group group channel groupchannel heartbeat org apache catalina tribes group group channel groupchannel heartbeat thread heartbeatthread override background process backgroundprocess cluster deployer clusterdeployer cluster deployer clusterdeployer background process backgroundprocess send heartbeat channel is heartbeat background enabled isheartbeatbackgroundenabled channel channel heartbeat periodic event fire lifecycle event firelifecycleevent lifecycle per iodic periodic event base handle start periodic events host log messages trace level org apache catalina lifecycle listener lifecyclelistener lifecycle event lifecycleevent org apache catalina lifecycle event lifecycleevent deprecated unused removed tomcat override deprecated lifecycle event lifecycleevent lifecycle event lifecycleevent lifecycle event lifecycleevent log is trace enabled istraceenabled log trace get string getstring simple tcp cluster simpletcpcluster event log lifecycle event lifecycleevent get type gettype lifecycle event lifecycleevent get data getdata suppress warnings suppresswarnings deprecation override init internal initinternal lifecycle exception lifecycleexception init internal initinternal cluster deployer clusterdeployer string builder stringbuilder string builder stringbuilder type cluster container container get container getcontainer append m bean utils mbeanutils get container key properties getcontainerkeyproperties container append component deployer oname cluster deployer onameclusterdeployer register cluster deployer clusterdeployer to string tostring start cluster implement requirements link org apache catalina util lifecycle base lifecyclebase start internal startinternal exception lifecycle exception lifecycleexception component detects fatal error prevents component override start internal startinternal lifecycle exception lifecycleexception log is info enabled isinfoenabled log info cluster start check defaults checkdefaults register cluster valve registerclustervalve channel add member ship listener addmembershiplistener channel add channel listener addchannellistener channel group channel groupchannel group channel groupchannel channel set name setname get cluster name getclustername channel channel start channel start options channelstartoptions cluster deployer clusterdeployer cluster deployer clusterdeployer start register member registermember channel get local member getlocalmember exception log error unable start cluster lifecycle exception lifecycleexception set state setstate lifecycle state lifecyclestate starting check defaults checkdefaults cluster listeners clusterlisteners size add cluster listener addclusterlistener jvm r out e session binder listener jvmroutesessionidbinderlistener manager template managertemplate delta manager deltamanager add cluster listener addclusterlistener cluster session listener clustersessionlistener valves size add valve addvalve jvm r out e binder valve jvmroutebindervalve add valve addvalve replication valve replicationvalve cluster deployer clusterdeployer cluster deployer clusterdeployer set cluster setcluster channel channel group channel groupchannel channel group channel groupchannel group channel groupchannel channel get int erceptors getinterceptors has next hasnext channel add interceptor addinterceptor message dispatch messagedispatch interceptor channel add interceptor addinterceptor tcp failure detector tcpfailuredetector heartbeat background enabled heartbeatbackgroundenabled channel set heartbeat setheartbeat register cluster valve host engine register cluster valve registerclustervalve container iterator valve iter valves iterator iter has next hasnext cluster valve clustervalve valve cluster valve clustervalve iter log is debug enabled isdebugenabled log debug invoking add valve addvalve get container getcontainer valve get class getclass get name getname valve container get pipeline getpipeline add valve addvalve valve valve set cluster setcluster unregister cluster valve host engine unregister cluster valve unregisterclustervalve iterator valve iter valves iterator iter has next hasnext cluster valve clustervalve valve cluster valve clustervalve iter log is debug enabled isdebugenabled log debug invoking remove valve removevalve get container getcontainer valve get class getclass get name getname valve container get pipeline getpipeline remove valve removevalve valve valve set cluster setcluster cluster implement requirements link org apache catalina util lifecycle base lifecyclebase stop internal stopinternal exception lifecycle exception lifecycleexception component detects fatal error prevents component override stop internal stopinternal lifecycle exception lifecycleexception set state setstate lifecycle state lifecyclestate stopping unregister member unregistermember channel get local member getlocalmember cluster deployer clusterdeployer cluster deployer clusterdeployer managers clear cluster deployer clusterdeployer cluster deployer clusterdeployer set cluster setcluster channel channel start options channelstartoptions channel remove channel listener removechannellistener channel remove member ship listener removemembershiplistener unregister cluster valve unregisterclustervalve exception log error unable cluster override destroy internal destroyinternal lifecycle exception lifecycleexception oname cluster deployer onameclusterdeployer unregister oname cluster deployer onameclusterdeployer oname cluster deployer onameclusterdeployer destroy internal destroyinternal string rendering object override string to string tostring string builder stringbuilder string builder stringbuilder get class getclass get name getname append container append container append container get name getname append to string tostring send message cluster members param msg message transfer org apache catalina catalina cluster catalinacluster send org apache catalina cluster message clustermessage override send cluster message clustermessage msg send msg send cluster message member param msg message transfer param dest receiver member org apache catalina catalina cluster catalinacluster send org apache catalina cluster message clustermessage org apache catalina tribes member override send cluster message clustermessage msg member dest msg set address setaddress get local member getlocalmember send options sendoptions channel send options channelsendoptions msg session message sessionmessage session message sessionmessage msg get event type geteventtype session message sessionmessage evt session data send options sendoptions channel send options ack channel send options ack dest get local member getlocalmember equals dest channel send member dest msg send options sendoptions log error unable send message local member msg member dest members destmembers channel get members getmembers dest members destmembers length channel send dest members destmembers msg send options sendoptions log is debug enabled isdebugenabled log debug members cluster ignoring message msg exception log error unable send message cluster sender cluster member registered org apache catalina tribes member ship listener membershiplistener member added memberadded org apache catalina tribes member override member added memberadded member member has members hasmembers channel has members hasmembers log is info enabled isinfoenabled log info replication member member notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent member register memberregister event member register member registermember member notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent member register memberregister event member exception log error unable connect replication system cluster member org apache catalina tribes member ship listener membershiplistener member disappeared memberdisappeared org apache catalina tribes member override member disappeared memberdisappeared member member has members hasmembers channel has members hasmembers log is info enabled isinfoenabled log info received member disappeared member notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent member unregister memberunregister event member unregister member unregistermember member notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent member unregister memberunregister event member exception log error unable remove cluster node replication system receiver messages notify listeners receiving message cluster message clustermessage emit failure event life cylce listener lifecylcelistener param msg received message override accept serializable msg member sender msg cluster message clustermessage override message received messagereceived serializable message member sender cluster message clustermessage fwd cluster message clustermessage message fwd set address setaddress sender message received messagereceived fwd message received messagereceived cluster message clustermessage message log is debug enabled isdebugenabled message log debug assuming clocks sync hed synched replication message get unique id getuniqueid system current time millis currenttimemillis message get timestamp gettimestamp invoke listeners accepted message iterator cluster listener clusterlistener iter cluster listeners clusterlisteners iterator iter has next hasnext cluster listener clusterlistener listener iter listener accept message accepted listener message received messagereceived message accepted notify lifecycle listener on failure notifylifecyclelisteneronfailure member dest message get address getaddress notify int erested interested lifecycle listeners lifecyclelisteners fire lifecycle event firelifecycleevent receive message failure event send message data sendmessagedata message dest log is debug enabled isdebugenabled log debug message message to string tostring type message get class getclass get name getname transfered listener registered logger override log get logger getlogger log deprecated org apache catalina cluster set protocol setprotocol java lang string override set protocol setprotocol string protocol org apache catalina cluster get protocol getprotocol override string get protocol getprotocol get channel start options getchannelstartoptions channel start options channelstartoptions set channel start options setchannelstartoptions channel start options channelstartoptions channel start options channelstartoptions channel start options channelstartoptions jmx suppress warnings suppresswarnings deprecation override string get domain internal getdomaininternal container container get container getcontainer container m bean utils mbeanutils get domain getdomain container suppress warnings suppresswarnings deprecation override string get object name key properties getobjectnamekeyproperties string builder stringbuilder string builder stringbuilder type cluster container container get container getcontainer container append m bean utils mbeanutils get container key properties getcontainerkeyproperties container to string tostring suppress warnings suppresswarnings deprecation register member registermember member member jmx registration string builder stringbuilder string builder stringbuilder type cluster container container get container getcontainer container append m bean utils mbeanutils get container key properties getcontainerkeyproperties container append component member append object name objectname quote member get name getname object name objectname oname register member to string tostring member oname map memberonamemap member oname unregister member unregistermember member member member object name objectname oname member oname map memberonamemap remove member oname unregister oname