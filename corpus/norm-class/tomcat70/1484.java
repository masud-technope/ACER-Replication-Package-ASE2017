licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes tipis java serializable org apache catalina tribes channel org apache catalina tribes channel exception channelexception org apache catalina tribes member org apache catalina tribes unique id uniqueid org apache catalina tribes util arrays org apache juli logging log org apache juli logging log factory logfactory smart implementation stat eful stateful replicated map primary secondary backup str ategy strategy node primary node backup map cluster backup member per fect perfect usage map session map session manager clustered environment modify list code put all putall remove code methods entry set entryset entry set full entrysetfull key set keyset key set full keysetfull returns modifiable sets objects values map change invoking code code code remove code data distributed methods code replicate code code replicate object code methods under stand understand map work objects serializable entire object serialized time replicated replicated map entry replicatedmapentry is dirty isdirty flag replicate diffs desired impl ementing implementing code replicated map entry replicatedmapentry code decide objects replicated data replicated time implement smart aop mechanism detect underlying objects replicate implementing replicated map entry replicatedmapentry is diff able isdiffable invoked map implementation doesn background thread running replicate invoking remove invoke methods code replicate object code rep licates replicates object belongs key code replicate code s cans scans entire map rep licates replicates data code code code replicate code method decide replicate objects implement code replicated map entry replicatedmapentry code replicate objects object doesn implement code replicated map entry replicatedmapentry code time object replicated entire object serialized call code replicate code replicate objects map node primary rember call code break down breakdown code code finalize code map avoid memory leaks todo implement per iodic periodic sync transfer thread author filip hanik version lazy replicated map lazyreplicatedmap abstract replicated map abstractreplicatedmap serialversionuid log log log factory logfactory get log getlog lazy replicated map lazyreplicatedmap creates map param channel channel communication param timeout timeout rpc messags param map context name mapcontextname string unique map multiple maps channel param initial capacity initialcapacity size map hash map hashmap param load factor loadfactor load factor hash map hashmap lazy replicated map lazyreplicatedmap map owner mapowner owner channel channel timeout string map context name mapcontextname initial capacity initialcapacity load factor loadfactor class loader classloader cls owner channel timeout map context name mapcontextname initial capacity initialcapacity load factor loadfactor channel send options cls creates map param channel channel communication param timeout timeout rpc messags param map context name mapcontextname string unique map multiple maps channel param initial capacity initialcapacity size map hash map hashmap lazy replicated map lazyreplicatedmap map owner mapowner owner channel channel timeout string map context name mapcontextname initial capacity initialcapacity class loader classloader cls owner channel timeout map context name mapcontextname initial capacity initialcapacity abstract replicated map abstractreplicatedmap load factor channel send options cls creates map param channel channel communication param timeout timeout rpc messags param map context name mapcontextname string unique map multiple maps channel lazy replicated map lazyreplicatedmap map owner mapowner owner channel channel timeout string map context name mapcontextname class loader classloader cls owner channel timeout map context name mapcontextname abstract replicated map abstractreplicatedmap initial capacity abstract replicated map abstractreplicatedmap load factor channel send options cls creates map param channel channel communication param timeout timeout rpc messags param map context name mapcontextname string unique map multiple maps channel param terminate flag terminate map failed start lazy replicated map lazyreplicatedmap map owner mapowner owner channel channel timeout string map context name mapcontextname class loader classloader cls terminate owner channel timeout map context name mapcontextname abstract replicated map abstractreplicatedmap initial capacity abstract replicated map abstractreplicatedmap load factor channel send options cls terminate methods override override get state message type getstatemessagetype abstract replicated map abstractreplicatedmap map message mapmessage msg override get rep licate message type getreplicatemessagetype abstract replicated map abstractreplicatedmap map message mapmessage msg backup publish info map pair key nodes cluster param key object param object member backup node channel exception channelexception override member publish entry info publishentryinfo object key object channel exception channelexception key serializable serializable member member members get map members getmapmembers first idx firstidx get next backup index getnextbackupindex next idx nextidx first idx firstidx member backup member back ups backups members length first idx firstidx backup success select backup node member members next idx nextidx increment selection next idx nextidx next idx nextidx next idx nextidx members length next idx nextidx map message mapmessage msg member tmp backup tmpbackup wrap publish backup data node msg map message mapmessage get map context name getmapcontextname map message mapmessage msg backup serializable key serializable channel get local member getlocalmember tmp backup tmpbackup log is trace enabled istraceenabled log trace publishing backup data msg get name getname unique id uniqueid get channel getchannel send tmp backup tmpbackup msg get channel send options getchannelsendoptions log is trace enabled istraceenabled log trace data published msg msg published backup mark test success success backup tmp backup tmpbackup channel exception channelexception log error unable replicate backup key key backup reason get message getmessage publish data nodes member proxies exclude from set excludefromset backup get map members getmapmembers success proxies length msg map message mapmessage get map context name getmapcontextname map message mapmessage msg proxy serializable key channel get local member getlocalmember backup log is trace enabled istraceenabled log trace publishing proxy data msg arrays to name string tonamestring proxies get channel getchannel send proxies msg get channel send options getchannelsendoptions channel exception channelexception log error unable replicate proxy key key backup reason get message getmessage success first idx firstidx next idx nextidx backup