licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes group int erceptors interceptors java util hash map hashmap java util concurrent atomic atomic integer atomicinteger java util concurrent locks reentrant read write lock reentrantreadwritelock org apache catalina tribes channel exception channelexception org apache catalina tribes channel message channelmessage org apache catalina tribes member org apache catalina tribes group channel interceptor base channelinterceptorbase org apache catalina tribes group interceptor payload interceptorpayload org apache catalina tribes x byte buffer xbytebuffer order int erceptor interceptor guarantees messages received order int erceptor interceptor works ack setting point replication mode replicationmode fast async hqueue fastasynchqueue mode guarantees ordering mode ack replication mode replicationmode pooled lot concurrent threads int erceptor interceptor slow messages completely order queue large order interceptor orderinterceptor max queue maxqueue meaning messages queue configuration options order int eceptor orderinteceptor expire milliseconds message arrives order order int eceptor orderinteceptor max queue maxqueue max queue size queue grow ensure ordering setting avoid out of memory errors outofmemoryerrors integer max order interceptor orderinterceptor for ward expired forwardexpired flag tells int erceptor interceptor message expired queue grow n grown larger max queue maxqueue message stack receiver receive order message for get forget message reset message counter author filip hanik version order interceptor orderinterceptor channel interceptor base channelinterceptorbase hash map hashmap member counter out counter outcounter hash map hashmap member counter hash map hashmap member counter inc ounter incounter hash map hashmap member counter hash map hashmap member message order messageorder incoming hash map hashmap member message order messageorder expire for ward expired forwardexpired max queue maxqueue integer max reentrant read write lock reentrantreadwritelock in lock inlock reentrant read write lock reentrantreadwritelock reentrant read write lock reentrantreadwritelock out lock outlock reentrant read write lock reentrantreadwritelock override send message sendmessage member destination channel message channelmessage msg interceptor payload interceptorpayload payload channel exception channelexception ok to process oktoprocess msg get options getoptions send message sendmessage destination msg payload channel exception channelexception destination length out lock outlock write lock writelock lock inc counter inccounter destination out lock outlock write lock writelock unlock reduce copy msg get message getmessage append get next getnext send message sendmessage member destination msg payload msg get message getmessage trim channel exception channelexception add faulty member addfaultymember get faulty members getfaultymembers override message received messagereceived channel message channelmessage msg ok to process oktoprocess msg get options getoptions message received messagereceived msg msg nr msgnr x byte buffer xbytebuffer to int toint msg get message getmessage get bytes direct getbytesdirect msg get message getmessage get length getlength msg get message getmessage trim message order messageorder order message order messageorder msg nr msgnr channel message channelmessage msg deep clone deepclone in lock inlock write lock writelock lock process incoming processincoming order process left overs processleftovers msg get address getaddress in lock inlock write lock writelock unlock process left overs processleftovers member member force message order messageorder tmp incoming member force counter cnt get in counter getincounter member cnt set counter setcounter integer max tmp process incoming processincoming tmp param order message order messageorder message expired processed process incoming processincoming message order messageorder order result member member order get message getmessage get address getaddress counter cnt get in counter getincounter member message order messageorder tmp incoming member tmp order message order messageorder add tmp order order order get msg nr getmsgnr cnt get counter getcounter target process orders order get msg nr getmsgnr cnt get counter getcounter cnt order get msg nr getmsgnr cnt get counter getcounter cnt set counter setcounter order get msg nr getmsgnr message received messagereceived order get message getmessage order set message setmessage order order message order messageorder head order message order messageorder prev tmp order flag empty queue larger max queue maxqueue empty order order get count getcount max queue maxqueue tmp process expired messages empty queue tmp is expired isexpired expire empty reset head tmp head head tmp cnt set counter setcounter tmp get msg nr getmsgnr get for ward expired getforwardexpired message received messagereceived tmp get message getmessage tmp set message setmessage tmp tmp prev prev tmp result prev tmp tmp tmp head incoming remove member incoming member head result override member added memberadded member member notify member added memberadded member override member disappeared memberdisappeared member member reset count ers counters lock free inc ounter incounter remove member out counter outcounter remove member clear remaining queue process left overs processleftovers member notify member disappeared memberdisappeared member inc counter inccounter member mbr counter cnt get out counter getoutcounter mbr cnt counter get in counter getincounter member mbr counter cnt inc ounter incounter mbr cnt cnt counter start incoming cnt inc ounter incounter mbr cnt cnt counter get out counter getoutcounter member mbr counter cnt out counter outcounter mbr cnt cnt counter out counter outcounter mbr cnt cnt counter atomic integer atomicinteger atomic integer atomicinteger get counter getcounter set counter setcounter counter counter add and get addandget message order messageorder received system current time millis currenttimemillis message order messageorder msg nr msgnr channel message channelmessage msg message order messageorder msg nr msgnr channel message channelmessage msg msg nr msgnr msg nr msgnr msg msg is expired isexpired expire time expiretime system current time millis currenttimemillis received expire time expiretime channel message channelmessage get message getmessage msg set message setmessage channel message channelmessage msg msg msg set next setnext message order messageorder order order message order messageorder get next getnext get count getcount counter message order messageorder tmp tmp counter tmp tmp counter prev suppress warnings suppresswarnings message order messageorder add message order messageorder head message order messageorder add head add add head head add add head get msg nr getmsgnr add get msg nr getmsgnr add head add message order messageorder iter head message order messageorder prev iter get msg nr getmsgnr add get msg nr getmsgnr iter prev iter iter iter iter get msg nr getmsgnr add get msg nr getmsgnr add add iter iter add iter get msg nr getmsgnr add get msg nr getmsgnr add prev warning suppressed prev add add iter arithmetic exception arithmeticexception message counter synchronization bug disable order int erceptor interceptor head get msg nr getmsgnr msg nr msgnr set expire setexpire expire expire expire set for ward expired setforwardexpired for ward expired forwardexpired for ward expired forwardexpired for ward expired forwardexpired set max queue setmaxqueue max queue maxqueue max queue maxqueue max queue maxqueue get expire getexpire expire get for ward expired getforwardexpired for ward expired forwardexpired get max queue getmaxqueue max queue maxqueue