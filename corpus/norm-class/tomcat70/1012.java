licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache catalina tribes group java serializable java util array list arraylist java util hash map hashmap java util random java util concurrent atomic atomic integer atomicinteger org junit fail org junit org junit org junit test org apache catalina startup logging base test loggingbasetest org apache catalina tribes channel org apache catalina tribes channel listener channellistener org apache catalina tribes managed channel managedchannel org apache catalina tribes member org apache catalina tribes tester util testerutil org apache catalina tribes transport replication transmitter replicationtransmitter test group channel sender connections testgroupchannelsenderconnections logging base test loggingbasetest count managed channel managedchannel channels managed channel managedchannel count test msg listener testmsglistener listeners test msg listener testmsglistener count override set up setup exception set up setup channels length channels group channel groupchannel channels get member ship service getmembershipservice set payload setpayload channel get bytes getbytes ascii listeners test msg listener testmsglistener listener channels add channel listener addchannellistener listeners tester util testerutil add random domain addrandomdomain channels channels length channels start channel snd seq channel snd seq send messages sendmessages delay sleep exception reset message count ers resetmessagecounters member local channels get local member getlocalmember member dest channels get local member getlocalmember log info sending messages local get name getname dest get name getname delay delay channels send member dest test msg testmsg delay thread sleep delay log info messages waiting sleep seconds received start time starttime system current time millis currenttimemillis count received countreceived count received countreceived get received message count getreceivedmessagecount time system current time millis currenttimemillis time start time starttime sleep fail count received countreceived messages received sleep seconds thread sleep test test connection linger testconnectionlinger exception send messages sendmessages test test keep alive count testkeepalivecount exception log info setting alive count channels length replication transmitter replicationtransmitter replication transmitter replicationtransmitter channels get channel sender getchannelsender get transport gettransport set keep alive count setkeepalivecount send messages sendmessages test test keep alive time testkeepalivetime exception log info setting alive count channels length replication transmitter replicationtransmitter replication transmitter replicationtransmitter channels get channel sender getchannelsender get transport gettransport set keep alive time setkeepalivetime send messages sendmessages override tear down teardown exception channels length channels channel tear down teardown reset message count ers resetmessagecounters test msg listener testmsglistener listener listeners listener reset get received message count getreceivedmessagecount count test msg listener testmsglistener listener listeners count listener get received count getreceivedcount count test message message size random test msg testmsg serializable serialversionuid random random hash map hashmap integer array list arraylist object map hash map hashmap integer array list arraylist object test msg testmsg size math abs next int nextint size length math abs next int nextint array list arraylist object list array list arraylist object length map integer value of valueof list test msg listener testmsglistener channel listener channellistener string atomic integer atomicinteger counter atomic integer atomicinteger test msg listener testmsglistener string reset counter get received count getreceivedcount counter override message received messagereceived serializable msg member sender counter increment and get incrementandget log info received message msg sender get name getname override accept serializable msg member sender