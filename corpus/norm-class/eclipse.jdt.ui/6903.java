copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal text correction proposals java util array list arraylist java util arrays java util collection java util hash set hashset java util list org eclipse core runtime core exception coreexception org eclipse core runtime platform org eclipse core runtime preferences i scope context iscopecontext org eclipse core runtime preferences instance scope instancescope org eclipse core resources project scope projectscope org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core naming conventions namingconventions org eclipse jdt core compiler i terminal symbols iterminalsymbols org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom assignment org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom child list property descriptor childlistpropertydescriptor org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom expression org eclipse jdt core dom expression statement expressionstatement org eclipse jdt core dom field access fieldaccess org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom initializer org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom modifier org eclipse jdt core dom simple name simplename org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom statement org eclipse jdt core dom type org eclipse jdt core dom variable declaration expression variabledeclarationexpression org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom bindings org eclipse jdt internal corext dom linked node finder linkednodefinder org eclipse jdt internal corext dom token scanner tokenscanner org eclipse jdt internal corext clean up constants cleanupconstants org eclipse jdt internal corext clean up post save listener cleanuppostsavelistener org eclipse jdt internal corext clean up preference util cleanuppreferenceutil org eclipse jdt internal corext util messages org eclipse jdt preference constants preferenceconstants org eclipse jdt cleanup clean up options cleanupoptions org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java plugin images javapluginimages org eclipse jdt internal java editor javaeditor save participant saveparticipant abstract save participant preference configuration abstractsaveparticipantpreferenceconfiguration org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal text correction correction messages correctionmessages org eclipse jdt internal text correction modifier correction sub processor modifiercorrectionsubprocessor org eclipse jdt internal viewsupport basic element labels basicelementlabels proposals assign variable quick assist assign expression expression statement expressionstatement local field assign single parameter field assign to variable assist proposal assigntovariableassistproposal linked correction proposal linkedcorrectionproposal local field nls string key nls string key type type f variable kind fvariablekind expression statement expressionstatement single variable declaration singlevariabledeclaration list ast node astnode f nodes to assign fnodestoassign i type binding itypebinding f type binding ftypebinding variable declaration fragment variabledeclarationfragment f existing fragment fexistingfragment assign to variable assist proposal assigntovariableassistproposal i compilation unit icompilationunit variable kind variablekind expression statement expressionstatement node i type binding itypebinding type binding typebinding relevance nls relevance f variable kind fvariablekind variable kind variablekind f nodes to assign fnodestoassign array list arraylist f nodes to assign fnodestoassign add node type binding typebinding is wildcard type iswildcardtype type binding typebinding ast res olving astresolving normalize wildcard type normalizewildcardtype type binding typebinding node getast f type binding ftypebinding type binding typebinding variable kind variablekind local set display name setdisplayname correction messages correctionmessages assign to variable assist proposal assigntovariableassistproposal assign tolocal assigntolocal description set image setimage java plugin images javapluginimages java plugin images javapluginimages img correction local set display name setdisplayname correction messages correctionmessages assign to variable assist proposal assigntovariableassistproposal assign tofield assigntofield description set image setimage java plugin images javapluginimages java plugin images javapluginimages img field create import rewrite createimportrewrite compilation unit compilationunit node get root getroot assign to variable assist proposal assigntovariableassistproposal i compilation unit icompilationunit single variable declaration singlevariabledeclaration parameter variable declaration fragment variabledeclarationfragment existing fragment existingfragment i type binding itypebinding type binding typebinding relevance nls relevance f variable kind fvariablekind field f nodes to assign fnodestoassign array list arraylist f nodes to assign fnodestoassign add parameter f type binding ftypebinding type binding typebinding f existing fragment fexistingfragment existing fragment existingfragment existing fragment existingfragment set display name setdisplayname correction messages correctionmessages assign to variable assist proposal assigntovariableassistproposal assign param tofield assignparamtofield description set display name setdisplayname messages format correction messages correctionmessages assign to variable assist proposal assigntovariableassistproposal assign toexistingfield assigntoexistingfield description basic element labels basicelementlabels get java element name getjavaelementname existing fragment existingfragment get name getname get identifier getidentifier set image setimage java plugin images javapluginimages java plugin images javapluginimages img field assign to variable assist proposal assigntovariableassistproposal i compilation unit icompilationunit list single variable declaration singlevariabledeclaration parameters relevance nls relevance f variable kind fvariablekind field f nodes to assign fnodestoassign array list arraylist f nodes to assign fnodestoassign add all addall parameters f type binding ftypebinding set display name setdisplayname correction messages correctionmessages assign to variable assist proposal assigntovariableassistproposal assign all params tofields assignallparamstofields description set image setimage java plugin images javapluginimages java plugin images javapluginimages img field override ast rewrite astrewrite get rewrite getrewrite core exception coreexception f variable kind fvariablekind field ast rewrite astrewrite rewrite ast rewrite astrewrite create f nodes to assign fnodestoassign getast f nodes to assign fnodestoassign size do add field doaddfield rewrite f nodes to assign fnodestoassign f type binding ftypebinding do add all fields doaddallfields rewrite local do add local doaddlocal ast rewrite astrewrite do add local doaddlocal ast node astnode node to assign nodetoassign f nodes to assign fnodestoassign expression expression expression statement expressionstatement node to assign nodetoassign get expression getexpression ast ast node to assign nodetoassign getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast create import rewrite createimportrewrite compilation unit compilationunit node to assign nodetoassign get root getroot string var names varnames suggest local variable names suggestlocalvariablenames f type binding ftypebinding expression var names varnames length add linked position proposal addlinkedpositionproposal key var names varnames variable declaration fragment variabledeclarationfragment new decl frag newdeclfrag ast new variable declaration fragment newvariabledeclarationfragment new decl frag newdeclfrag set name setname ast new simple name newsimplename var names varnames new decl frag newdeclfrag set initializer setinitializer expression rewrite create copy target createcopytarget expression type type evaluate type evaluatetype ast node to assign nodetoassign f type binding ftypebinding key type ast nodes astnodes is control statement body iscontrolstatementbody node to assign nodetoassign get location in parent getlocationinparent block block ast new block newblock block statements add rewrite create move target createmovetarget node to assign nodetoassign rewrite replace node to assign nodetoassign block needs semicolon needssemicolon expression variable declaration statement variabledeclarationstatement var statement varstatement ast new variable declaration statement newvariabledeclarationstatement new decl frag newdeclfrag var statement varstatement set type settype type rewrite replace expression var statement varstatement trick bug variable declaration expression variabledeclarationexpression expression statement expressionstatement variable declaration expression variabledeclarationexpression var expression varexpression ast new variable declaration expression newvariabledeclarationexpression new decl frag newdeclfrag var expression varexpression set type settype type rewrite replace expression var expression varexpression add linked position addlinkedposition rewrite track new decl frag newdeclfrag get name getname key add linked position addlinkedposition rewrite track type key type cursor expression statement set end position setendposition rewrite track node to assign nodetoassign rewrite needs semicolon needssemicolon expression expression expression get parent getparent get flags getflags ast node astnode recovered token scanner tokenscanner scanner token scanner tokenscanner get compilation unit getcompilationunit scanner read next readnext expression get start position getstartposition expression get length getlength i terminal symbols iterminalsymbols tokennamesemicolon core exception coreexception ast rewrite astrewrite do add field doaddfield ast rewrite astrewrite rewrite ast node astnode node to assign nodetoassign i type binding itypebinding type binding typebinding is param to field isparamtofield node to assign nodetoassign get node type getnodetype ast node astnode single variable declaration ast node astnode new type decl newtypedecl ast res olving astresolving find parent type findparenttype node to assign nodetoassign new type decl newtypedecl expression expression is param to field isparamtofield single variable declaration singlevariabledeclaration node to assign nodetoassign get name getname expression statement expressionstatement node to assign nodetoassign get expression getexpression ast ast new type decl newtypedecl getast create import rewrite createimportrewrite compilation unit compilationunit node to assign nodetoassign get root getroot body declaration bodydeclaration body decl bodydecl ast res olving astresolving find parent body declaration findparentbodydeclaration node to assign nodetoassign block body body decl bodydecl method declaration methoddeclaration body method declaration methoddeclaration body decl bodydecl get body getbody body decl bodydecl initializer body initializer body decl bodydecl get body getbody i java project ijavaproject project get compilation unit getcompilationunit get java project getjavaproject is anonymous isanonymous new type decl newtypedecl get node type getnodetype ast node astnode anonymous declaration is static isstatic modifier is static isstatic body decl bodydecl get modifiers getmodifiers is anonymous isanonymous is constructor param isconstructorparam is param to field isparamtofield node to assign nodetoassign get parent getparent method declaration methoddeclaration method declaration methoddeclaration node to assign nodetoassign get parent getparent is constructor isconstructor modifiers modifier is static isstatic modifiers modifier is constructor param isconstructorparam string save actions key saveactionskey abstract save participant preference configuration abstractsaveparticipantpreferenceconfiguration editor save participant prefix clean up post save listener cleanuppostsavelistener post save list ener postsavelistener i scope context iscopecontext scopes instance scope instancescope instance project scope projectscope project get project getproject safe actions enabled safeactionsenabled platform get preferences service getpreferencesservice get boolean getboolean java plugin javaplugin get plugin id getpluginid save actions key saveactionskey scopes safe actions enabled safeactionsenabled clean up options cleanupoptions equals preference constants preferenceconstants get preference getpreference clean up preference util cleanuppreferenceutil save participant key prefix clean up constants cleanupconstants cleanup save add itional additional options project clean up options cleanupoptions equals preference constants preferenceconstants get preference getpreference clean up preference util cleanuppreferenceutil save participant key prefix clean up constants cleanupconstants variable declarations project clean up options cleanupoptions equals preference constants preferenceconstants get preference getpreference clean up preference util cleanuppreferenceutil save participant key prefix clean up constants cleanupconstants variable declarations fields project constructors new type decl newtypedecl abstract type declaration abstracttypedeclaration list body declaration bodydeclaration body declarations bodydeclarations abstract type declaration abstracttypedeclaration new type decl newtypedecl body declarations bodydeclarations body declaration bodydeclaration decl body declarations bodydeclarations decl method declaration methoddeclaration method declaration methoddeclaration decl is constructor isconstructor constructors constructors modifiers modifier variable declaration fragment variabledeclarationfragment new decl frag newdeclfrag add field declaration addfielddeclaration rewrite new type decl newtypedecl modifiers expression node to assign nodetoassign type binding typebinding string var name varname new decl frag newdeclfrag get name getname get identifier getidentifier assignment assignment ast new assignment newassignment assignment set right hand side setrighthandside expression rewrite create copy target createcopytarget expression needs this needsthis stub utility stubutility use this for field access usethisforfieldaccess project is param to field isparamtofield needs this needsthis var name varname equals simple name simplename expression get identifier getidentifier simple name simplename access name accessname ast new simple name newsimplename var name varname needs this needsthis field access fieldaccess field access fieldaccess ast new field access newfieldaccess field access fieldaccess set name setname access name accessname is static isstatic string type name typename abstract type declaration abstracttypedeclaration new type decl newtypedecl get name getname get identifier getidentifier field access fieldaccess set expression setexpression ast new simple name newsimplename type name typename field access fieldaccess set expression setexpression ast new this expression newthisexpression assignment set left hand side setlefthandside field access fieldaccess assignment set left hand side setlefthandside access name accessname ast node astnode selection node selectionnode is param to field isparamtofield assign parameter field expression statement expressionstatement statement ast new expression statement newexpressionstatement assignment insert idx insertidx find assignment insert index findassignmentinsertindex body statements node to assign nodetoassign rewrite get list rewrite getlistrewrite body block statements property insert at insertat statement insert idx insertidx selection node selectionnode statement needs semicolon needssemicolon expression rewrite replace expression ast new expression statement newexpressionstatement assignment rewrite replace expression assignment selection node selectionnode node to assign nodetoassign add linked position addlinkedposition rewrite track new decl frag newdeclfrag get name getname key is param to field isparamtofield field declaration fielddeclaration field declaration fielddeclaration field declaration fielddeclaration new decl frag newdeclfrag get parent getparent add linked position addlinkedposition rewrite track field declaration fielddeclaration get type gettype key type add linked position addlinkedposition rewrite track access name accessname key i variable binding ivariablebinding variable binding variablebinding new decl frag newdeclfrag resolve binding resolvebinding variable binding variablebinding simple name simplename linked nodes linkednodes linked node finder linkednodefinder find by binding findbybinding node to assign nodetoassign get root getroot variable binding variablebinding linked nodes linkednodes length add linked position addlinkedposition rewrite track linked nodes linkednodes key set end position setendposition rewrite track selection node selectionnode rewrite ast rewrite astrewrite do add all fields doaddallfields ast rewrite astrewrite rewrite rewrite f nodes to assign fnodestoassign size ast node astnode node to assign nodetoassign f nodes to assign fnodestoassign i type binding itypebinding type binding typebinding single variable declaration singlevariabledeclaration node to assign nodetoassign resolve binding resolvebinding get type gettype rewrite do add field doaddfield rewrite node to assign nodetoassign type binding typebinding rewrite variable declaration fragment variabledeclarationfragment add field declaration addfielddeclaration ast rewrite astrewrite rewrite ast node astnode new type decl newtypedecl modifiers expression expression ast node astnode node to assign nodetoassign i type binding itypebinding type binding typebinding f existing fragment fexistingfragment f existing fragment fexistingfragment child list property descriptor childlistpropertydescriptor property ast nodes astnodes get body declarations property getbodydeclarationsproperty new type decl newtypedecl list body declaration bodydeclaration decls ast nodes astnodes get body declarations getbodydeclarations new type decl newtypedecl ast ast new type decl newtypedecl getast string var names varnames suggest field names suggestfieldnames type binding typebinding expression modifiers node to assign nodetoassign var names varnames length add linked position proposal addlinkedpositionproposal key var names varnames string var name varname var names varnames variable declaration fragment variabledeclarationfragment new decl frag newdeclfrag ast new variable declaration fragment newvariabledeclarationfragment new decl frag newdeclfrag set name setname ast new simple name newsimplename var name varname field declaration fielddeclaration new decl newdecl ast new field declaration newfielddeclaration new decl frag newdeclfrag type type evaluate type evaluatetype ast node to assign nodetoassign type binding typebinding key type new decl newdecl set type settype type new decl newdecl modifiers add all addall ast node factory astnodefactory new modifiers newmodifiers ast modifiers modifier correction sub processor modifiercorrectionsubprocessor install linked visibility proposals installlinkedvisibilityproposals get linked proposal model getlinkedproposalmodel rewrite new decl newdecl modifiers modifier correction sub processor modifiercorrectionsubprocessor key modifier insert index insertindex find field insert index findfieldinsertindex decls node to assign nodetoassign get start position getstartposition rewrite get list rewrite getlistrewrite new type decl newtypedecl property insert at insertat new decl newdecl insert index insertindex new decl frag newdeclfrag type evaluate type evaluatetype ast ast ast node astnode node to assign nodetoassign i type binding itypebinding type binding typebinding string groupid i type binding itypebinding proposals ast res olving astresolving get relaxing types getrelaxingtypes ast type binding typebinding proposals length add linked position proposal addlinkedpositionproposal groupid proposals import rewrite importrewrite import rewrite importrewrite get import rewrite getimportrewrite compilation unit compilationunit cu node cunode compilation unit compilationunit node to assign nodetoassign get root getroot import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext cu node cunode node to assign nodetoassign get start position getstartposition import rewrite importrewrite import rewrite importrewrite add import addimport type binding typebinding ast context string suggest local variable names suggestlocalvariablenames i type binding itypebinding binding expression expression i java project ijavaproject project get compilation unit getcompilationunit get java project getjavaproject stub utility stubutility get variable name suggestions getvariablenamesuggestions naming conventions namingconventions local project binding expression get used variable names getusedvariablenames f nodes to assign fnodestoassign string suggest field names suggestfieldnames i type binding itypebinding binding expression expression modifiers ast node astnode node to assign nodetoassign i java project ijavaproject project get compilation unit getcompilationunit get java project getjavaproject var kind varkind modifier is static isstatic modifiers naming conventions namingconventions field naming conventions namingconventions instance field stub utility stubutility get variable name suggestions getvariablenamesuggestions var kind varkind project binding expression get used variable names getusedvariablenames node to assign nodetoassign collection string get used variable names getusedvariablenames ast node astnode node to assign nodetoassign arrays as list aslist ast res olving astresolving get used variable names getusedvariablenames node to assign nodetoassign find assignment insert index findassignmentinsertindex list statement statements ast node astnode node to assign nodetoassign hash set hashset string params before paramsbefore hash set hashset list single variable declaration singlevariabledeclaration params method declaration methoddeclaration node to assign nodetoassign get parent getparent parameters params size params node to assign nodetoassign single variable declaration singlevariabledeclaration decl params params before paramsbefore add decl get name getname get identifier getidentifier statements size statement curr statements curr get node type getnodetype ast node astnode constructor invocation ast node astnode constructor invocation ast node astnode expression statement expression expr expression statement expressionstatement curr get expression getexpression expr assignment assignment assignment assignment expr expression right hand righthand assignment get right hand side getrighthandside right hand righthand simple name simplename params before paramsbefore simple name simplename right hand righthand get identifier getidentifier i variable binding ivariablebinding binding bindings get assigned variable getassignedvariable assignment binding binding is field isfield find field insert index findfieldinsertindex list body declaration bodydeclaration decls curr pos currpos decls size ast node astnode curr decls curr field declaration fielddeclaration curr pos currpos curr get start position getstartposition curr get length getlength returns variable kind get variable kind getvariablekind f variable kind fvariablekind