copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse ltk internal core refactoring org eclipse core commands execution exception executionexception org eclipse core commands operations i operation history ioperationhistory org eclipse core commands operations i operation history listener ioperationhistorylistener org eclipse core commands operations i undoable operation iundoableoperation org eclipse core commands operations operation history event operationhistoryevent org eclipse core commands operations operation history factory operationhistoryfactory org eclipse core commands operations triggered operations triggeredoperations org eclipse core runtime core exception coreexception org eclipse core runtime i adaptable iadaptable org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i safe runnable isaferunnable org eclipse core runtime i status istatus org eclipse core runtime listener list listenerlist org eclipse core runtime safe runner saferunner org eclipse core runtime status org eclipse ltk core refactoring change org eclipse ltk core refactoring i undo manager iundomanager org eclipse ltk core refactoring i undo manager listener iundomanagerlistener org eclipse ltk core refactoring i validation check result query ivalidationcheckresultquery org eclipse ltk core refactoring refactoring status refactoringstatus undo manager undomanager i undo manager iundomanager operation history listener operationhistorylistener i operation history listener ioperationhistorylistener override history notification historynotification operation history event operationhistoryevent event i undoable operation iundoableoperation event get operation getoperation triggered operations triggeredoperations triggered operations triggeredoperations get triggering operation gettriggeringoperation undoable operation undoableoperation change adapter changeadapter change operation changeoperation undoable operation undoableoperation change adapter changeadapter change operation changeoperation undoable operation undoableoperation change adapter changeadapter change operation changeoperation change change change operation changeoperation get change getchange event get event type geteventtype operation history event operationhistoryevent execute operation history event operationhistoryevent undo operation history event operationhistoryevent redo fire about to perform change fireabouttoperformchange change operation history event operationhistoryevent operation history event operationhistoryevent undo ne undone operation history event operationhistoryevent red one redone fire change performed firechangeperformed change fire undo stack changed fireundostackchanged fire redo stack changed fireredostackchanged operation history event operationhistoryevent operation fire change performed firechangeperformed change operation history event operationhistoryevent operation events fire undo stack changed fireundostackchanged fire redo stack changed fireredostackchanged operation history event operationhistoryevent operation removed events fire undo stack changed fireundostackchanged fire redo stack changed fireredostackchanged null query nullquery i validation check result query ivalidationcheckresultquery override proceed refactoring status refactoringstatus status override stopped refactoring status refactoringstatus status query adapter queryadapter i adaptable iadaptable i validation check result query ivalidationcheckresultquery f query fquery query adapter queryadapter i validation check result query ivalidationcheckresultquery query f query fquery query suppress warnings suppresswarnings unchecked override get adapter getadapter adapter i validation check result query ivalidationcheckresultquery equals adapter f query fquery i operation history ioperationhistory f operation history foperationhistory i operation history listener ioperationhistorylistener f operation history listener foperationhistorylistener f is open fisopen triggered operations triggeredoperations f active operation factiveoperation listener list listenerlist i undo manager listener iundomanagerlistener f listeners flisteners undo manager undomanager f operation history foperationhistory operation history factory operationhistoryfactory get operation history getoperationhistory override add listener addlistener i undo manager listener iundomanagerlistener listener f listeners flisteners f listeners flisteners listener list listenerlist listener list listenerlist identity f operation history listener foperationhistorylistener operation history listener operationhistorylistener f operation history foperationhistory add operation history listener addoperationhistorylistener f operation history listener foperationhistorylistener f listeners flisteners add listener override remove listener removelistener i undo manager listener iundomanagerlistener listener f listeners flisteners f listeners flisteners remove listener f listeners flisteners size f operation history foperationhistory remove operation history listener removeoperationhistorylistener f operation history listener foperationhistorylistener f listeners flisteners f operation history listener foperationhistorylistener override about to perform change abouttoperformchange change change i undoable operation iundoableoperation operation undoable operation undoableoperation change adapter changeadapter change operation add context addcontext refactoring core plugin refactoringcoreplugin get undo context getundocontext f active operation factiveoperation triggered operations triggeredoperations operation f operation history foperationhistory f active operation factiveoperation add context addcontext refactoring core plugin refactoringcoreplugin get undo context getundocontext f operation history foperationhistory open operation openoperation f active operation factiveoperation i operation history ioperationhistory execute f is open fisopen param change change deprecated change performed changeperformed change deprecated override change performed changeperformed change change change performed changeperformed change override change performed changeperformed change change successful f is open fisopen f active operation factiveoperation f operation history foperationhistory close operation closeoperation successful i operation history ioperationhistory execute f is open fisopen override add undo addundo string change change f active operation factiveoperation undoable operation undoableoperation change adapter changeadapter operation undoable operation undoableoperation change adapter changeadapter f active operation factiveoperation get triggering operation gettriggeringoperation operation set undo change setundochange change operation set label setlabel f operation history foperationhistory add f active operation factiveoperation f active operation factiveoperation override anything to undo anythingtoundo f operation history foperationhistory can undo canundo refactoring core plugin refactoringcoreplugin get undo context getundocontext override string peek undo name peekundoname i undoable operation iundoableoperation f operation history foperationhistory get undo operation getundooperation refactoring core plugin refactoringcoreplugin get undo context getundocontext get label getlabel override perform undo performundo i validation check result query ivalidationcheckresultquery query i progress monitor iprogressmonitor core exception coreexception i undoable operation iundoableoperation undo f operation history foperationhistory get undo operation getundooperation refactoring core plugin refactoringcoreplugin get undo context getundocontext undoable operation undoableoperation change adapter changeadapter change operation changeoperation get unwrapped operation getunwrappedoperation undo change operation changeoperation core exception coreexception status i status istatus error refactoring core plugin refactoringcoreplugin get plugin id getpluginid i status istatus error refactoring core messages refactoringcoremessages undo manager undomanager change query query null query nullquery f operation history foperationhistory undo operation undooperation undo query adapter queryadapter query execution exception executionexception handle exception handleexception override anything to redo anythingtoredo f operation history foperationhistory can redo canredo refactoring core plugin refactoringcoreplugin get undo context getundocontext override string peek redo name peekredoname i undoable operation iundoableoperation f operation history foperationhistory get redo operation getredooperation refactoring core plugin refactoringcoreplugin get undo context getundocontext get label getlabel override perform redo performredo i validation check result query ivalidationcheckresultquery query i progress monitor iprogressmonitor core exception coreexception i undoable operation iundoableoperation redo f operation history foperationhistory get redo operation getredooperation refactoring core plugin refactoringcoreplugin get undo context getundocontext undoable operation undoableoperation change adapter changeadapter change operation changeoperation get unwrapped operation getunwrappedoperation redo change operation changeoperation core exception coreexception status i status istatus error refactoring core plugin refactoringcoreplugin get plugin id getpluginid i status istatus error refactoring core messages refactoringcoremessages undo manager undomanager change query query null query nullquery f operation history foperationhistory redo operation redooperation redo query adapter queryadapter query execution exception executionexception handle exception handleexception undoable operation undoableoperation change adapter changeadapter get unwrapped operation getunwrappedoperation i undoable operation iundoableoperation operation i undoable operation iundoableoperation result operation result triggered operations triggeredoperations result triggered operations triggeredoperations result get triggering operation gettriggeringoperation result undoable operation undoableoperation change adapter changeadapter undoable operation undoableoperation change adapter changeadapter result override flush f active operation factiveoperation f is open fisopen f operation history foperationhistory close operation closeoperation i operation history ioperationhistory execute triggering operation invalid ensure operations executed open remain undo history accomplish adding invalid operation disposing context broken atomic parts f operation history foperationhistory add f active operation factiveoperation f active operation factiveoperation f is open fisopen f operation history foperationhistory dispose refactoring core plugin refactoringcoreplugin get undo context getundocontext override shutdown shared undo manager handle exception handleexception execution exception executionexception core exception coreexception throwable get cause getcause core exception coreexception core exception coreexception core exception coreexception status i status istatus error refactoring core plugin refactoringcoreplugin get plugin id getpluginid i status istatus error refactoring core messages refactoringcoremessages refactoring core plugin refactoringcoreplugin internal error event f iring firing methods fire about to perform change fireabouttoperformchange change change f listeners flisteners i undo manager listener iundomanagerlistener listener f listeners flisteners safe runner saferunner i safe runnable isaferunnable override exception listener about to perform change abouttoperformchange undo manager undomanager change override handle exception handleexception throwable exception refactoring core plugin refactoringcoreplugin log exception fire change performed firechangeperformed change change f listeners flisteners i undo manager listener iundomanagerlistener listener f listeners flisteners safe runner saferunner i safe runnable isaferunnable override exception listener change performed changeperformed undo manager undomanager change override handle exception handleexception throwable exception refactoring core plugin refactoringcoreplugin log exception fire undo stack changed fireundostackchanged f listeners flisteners i undo manager listener iundomanagerlistener listener f listeners flisteners safe runner saferunner i safe runnable isaferunnable override exception listener undo stack changed undostackchanged undo manager undomanager override handle exception handleexception throwable exception refactoring core plugin refactoringcoreplugin log exception fire redo stack changed fireredostackchanged f listeners flisteners i undo manager listener iundomanagerlistener listener f listeners flisteners safe runner saferunner i safe runnable isaferunnable override exception listener redo stack changed redostackchanged undo manager undomanager override handle exception handleexception throwable exception refactoring core plugin refactoringcoreplugin log exception testing methods test has number of undos testhasnumberofundos number f operation history foperationhistory get undo history getundohistory refactoring core plugin refactoringcoreplugin get undo context getundocontext length number test has number of red os testhasnumberofredos number f operation history foperationhistory get redo history getredohistory refactoring core plugin refactoringcoreplugin get undo context getundocontext length number