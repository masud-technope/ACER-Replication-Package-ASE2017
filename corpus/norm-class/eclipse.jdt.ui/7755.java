copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation benjamin muskalla bmuskalla eclipse source eclipsesource extract method extra cting extracting compile error https bugs eclipse org bugs bug cgi samrat dhillon sam rat samrat dhillon gmail extract method extra cted extracted method declared extracted expression method https bugs eclipse org bugs bug cgi org eclipse jdt internal corext refactoring code java util array list arraylist java util hash map hashmap java util iterator java util list java util map org eclipse core runtime org eclipse jdt core dom ast matcher astmatcher org eclipse jdt core dom ast node astnode org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom annotation type declaration annotationtypedeclaration org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom assignment org eclipse jdt core dom enum declaration enumdeclaration org eclipse jdt core dom expression org eclipse jdt core dom field access fieldaccess org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom super field access superfieldaccess org eclipse jdt core dom type declaration typedeclaration org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom bindings org eclipse jdt internal corext dom generic visitor genericvisitor org eclipse jdt internal text correction ast res olving astresolving snippet finder snippetfinder generic visitor genericvisitor match list ast node astnode f nodes fnodes map i variable binding ivariablebinding simple name simplename f local map pings flocalmappings match f nodes fnodes array list arraylist f local map pings flocalmappings hash map hashmap add ast node astnode node f nodes fnodes add node has correct nesting hascorrectnesting ast node astnode node f nodes fnodes size ast node astnode parent node get parent getparent f nodes fnodes get parent getparent parent elements parent block statement snippet foo foo match pattern foo foo node type nodetype parent get node type getnodetype node type nodetype ast node astnode block node type nodetype ast node astnode statement ast node astnode get nodes getnodes f nodes fnodes to array toarray ast node astnode f nodes fnodes size add local addlocal i variable binding ivariablebinding org simple name simplename local f local map pings flocalmappings org local simple name simplename get mapped name getmappedname i variable binding ivariablebinding org f local map pings flocalmappings org i variable binding ivariablebinding get mapped binding getmappedbinding i variable binding ivariablebinding org simple name simplename f local map pings flocalmappings org ast nodes astnodes get variable binding getvariablebinding is empty isempty f nodes fnodes is empty isempty f local map pings flocalmappings is empty isempty tests node replaced invalid node invalid is invalid node isinvalidnode ast node astnode f nodes fnodes ast node astnode candidate get parent getparent candidate invalid opening closing parent hesis parenthesis method signature node replaced candidate get node type getnodetype ast node astnode method declaration method declaration methoddeclaration get enclosing method getenclosingmethod ast node astnode f nodes fnodes method declaration methoddeclaration ast nodes astnodes get parent getparent ast node astnode method declaration is node in static context isnodeinstaticcontext ast node astnode f nodes fnodes ast res olving astresolving is in static context isinstaticcontext matcher ast matcher astmatcher override match simple name simplename candidate object simple name simplename simple name simplename snippet simple name simplename candidate is declaration isdeclaration snippet is declaration isdeclaration i binding ibinding candidate resolve binding resolvebinding i binding ibinding snippet resolve binding resolvebinding i variable binding ivariablebinding vcb ast nodes astnodes get variable binding getvariablebinding candidate i variable binding ivariablebinding vsb ast nodes astnodes get variable binding getvariablebinding snippet vcb vsb bindings equals vcb is field isfield vsb is field isfield bindings equals vcb get type gettype vsb get type gettype simple name simplename mapped f match fmatch get mapped name getmappedname vsb mapped i variable binding ivariablebinding mapped binding mappedbinding ast nodes astnodes get variable binding getvariablebinding mapped bindings equals vcb mapped binding mappedbinding f match fmatch add local addlocal vsb candidate bindings equals list match f result fresult array list arraylist match f match fmatch ast node astnode f snippet fsnippet f index findex matcher f matcher fmatcher f types ftypes snippet finder snippetfinder ast node astnode snippet f snippet fsnippet snippet f matcher fmatcher matcher reset match perform ast node astnode start ast node astnode snippet is true istrue start abstract type declaration abstracttypedeclaration start anonymous class declaration anonymousclassdeclaration snippet finder snippetfinder finder snippet finder snippetfinder snippet start accept finder iterator match iter finder f result fresult iterator iter has next hasnext match match iter ast node astnode nodes match get nodes getnodes nodes length is left hand side of assignment islefthandsideofassignment nodes iter remove finder f result fresult to array toarray match finder f result fresult size is left hand side of assignment islefthandsideofassignment ast node astnode node assignment assignment assignment ast nodes astnodes get parent getparent node ast node astnode assignment assignment expression left hand side lefthandside assignment get left hand side getlefthandside left hand side lefthandside node ast nodes astnodes is parent isparent node left hand side lefthandside left hand side lefthandside get node type getnodetype ast node astnode simple ast node astnode field access node field access fieldaccess left hand side lefthandside get name getname ast node astnode qualified node qualified name qualifiedname left hand side lefthandside get name getname ast node astnode field access node super field access superfieldaccess left hand side lefthandside get name getname override visit type declaration typedeclaration node f types ftypes visit node override end visit endvisit type declaration typedeclaration node f types ftypes end visit endvisit node override visit enum declaration enumdeclaration node f types ftypes visit node override end visit endvisit enum declaration enumdeclaration node f types ftypes end visit endvisit node override visit annotation type declaration annotationtypedeclaration node f types ftypes visit node override end visit endvisit annotation type declaration annotationtypedeclaration node f types ftypes end visit endvisit node override visit node visitnode ast node astnode node matches node is reset ted isresetted reset matches node matches ast node astnode node is snippet node issnippetnode node node subtree match subtreematch f matcher fmatcher f snippet fsnippet f index findex f match fmatch has correct nesting hascorrectnesting node f match fmatch add node f index findex f index findex f snippet fsnippet length f result fresult add f match fmatch reset is reset ted isresetted f index findex f match fmatch is empty isempty reset f index findex f match fmatch match is snippet node issnippetnode ast node astnode node f snippet fsnippet length node f snippet fsnippet