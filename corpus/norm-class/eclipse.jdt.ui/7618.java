copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation swartz swartz nokia bug ltk patch text edit based change texteditbasedchange text change textchange incorrect diff side empty org eclipse ltk core refactoring java util array list arraylist java util iterator java util list org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse text edits text edit textedit org eclipse text edits text edit copier texteditcopier org eclipse text edits text edit group texteditgroup org eclipse text edits text edit processor texteditprocessor org eclipse jface text bad location exception badlocationexception org eclipse jface text i document idocument org eclipse jface text i region iregion org eclipse ltk internal core refactoring base implementation change based text edits text edit based change texteditbasedchange change text edit processor ability select ively selectively include exclude single text edits local text edit processor localtexteditprocessor text edit processor texteditprocessor exclude include text edit textedit f excludes fexcludes text edit textedit f includes fincludes local text edit processor localtexteditprocessor i document idocument document text edit textedit root flags document root flags set includes setincludes text edit textedit includes is not null isnotnull includes is true istrue f excludes fexcludes f includes fincludes flatten includes set excludes setexcludes text edit textedit excludes is not null isnotnull excludes is true istrue f includes fincludes f excludes fexcludes flatten excludes override consider edit consideredit text edit textedit edit f excludes fexcludes f excludes fexcludes length edit equals f excludes fexcludes f includes fincludes f includes fincludes length edit equals f includes fincludes text edit textedit flatten text edit textedit edits list text edit textedit result array list arraylist edits length flatten result edits result to array toarray text edit textedit result size flatten list text edit textedit result text edit textedit edit result add edit text edit textedit children edit get children getchildren children length flatten result children objects enc apsulating encapsulating document region preview and region previewandregion i document idocument document i region iregion region preview and region previewandregion i document idocument i region iregion document region special object denoting edits managed change includes edits managed link text edit based change group texteditbasedchangegroup text edit based change group texteditbasedchangegroup edits text edit based change group texteditbasedchangegroup list change groups list text edit based change group texteditbasedchangegroup f change groups fchangegroups group category set groupcategoryset f combied group categories fcombiedgroupcategories change string f name fname text type string f text type ftexttype positions edits tracked change generation f track edits ftrackedits creates text edit change human readable displayed users unique code code text type text edit change code txt code param text edit change set text type settexttype string text edit based change texteditbasedchange string nls is not null isnotnull f change groups fchangegroups array list arraylist f name fname nls f text type ftexttype txt adds link text edit based change group texteditbasedchangegroup text edit change group edits managed text edit change group change root edit param group text edit change group add add change group addchangegroup text edit based change group texteditbasedchangegroup group is true istrue group f change groups fchangegroups add group f combied group categories fcombiedgroupcategories f combied group categories fcombiedgroupcategories group category set groupcategoryset union f combied group categories fcombiedgroupcategories group get group category set getgroupcategoryset adds link text edit group texteditgroup text edit group method convenience method calling code change add change group addchangegroup text edit based change group texteditbasedchangegroup change group code param group text edit group add add text edit group addtexteditgroup text edit group texteditgroup group add change group addchangegroup text edit based change group texteditbasedchangegroup group returns code code change group categories code code returned param group categories groupcategories group categories check change group categories has one group category hasonegroupcategory list group category groupcategory group categories groupcategories f combied group categories fcombiedgroupcategories f combied group categories fcombiedgroupcategories group category set groupcategoryset iterator text edit based change group texteditbasedchangegroup iter f change groups fchangegroups iterator iter has next hasnext text edit based change group texteditbasedchangegroup group iter f combied group categories fcombiedgroupcategories group category set groupcategoryset union f combied group categories fcombiedgroupcategories group get group category set getgroupcategoryset f combied group categories fcombiedgroupcategories contains one category containsonecategory group categories groupcategories returns link text edit based change group texteditbasedchangegroup text edit change groups managed buffer change text edit change groups text edit based change group texteditbasedchangegroup get change groups getchangegroups f change groups fchangegroups to array toarray text edit based change group texteditbasedchangegroup f change groups fchangegroups size string get content getcontent i document idocument document i region iregion region expand region to full line expandregiontofullline surrounding lines surroundinglines core exception coreexception expand region to full line expandregiontofullline start line startline math max document get line of offset getlineofoffset region get offset getoffset surrounding lines surroundinglines end line endline region get length getlength spurious deletes source surrounding lines surroundinglines nls end line endline math min document get line of offset getlineofoffset region get offset getoffset surrounding lines surroundinglines document get number of lines getnumberoflines end line endline math min document get line of offset getlineofoffset region get offset getoffset region get length getlength surrounding lines surroundinglines document get number of lines getnumberoflines offset document get line information getlineinformation start line startline get offset getoffset i region iregion end line region endlineregion document get line information getlineinformation end line endline length end line region endlineregion get offset getoffset end line region endlineregion get length getlength offset document offset length document region get offset getoffset region get length getlength bad location exception badlocationexception as core exception ascoreexception returns current content document text change param progress monitor report progress code code progress reporting desired current content text edit change exception core exception coreexception content accessed string get current content getcurrentcontent i progress monitor iprogressmonitor core exception coreexception returns current content text edit change clipped specific region region determined code expand region to full line expandregiontofullline code code code parameter code region code determines clipping code expand region to full line expandregiontofullline code code code region determined parameter code region code extended cover full lines code surrounding lines surroundinglines code number surrounding lines code surrounding lines surroundinglines code considered code expand region to full line expandregiontofullline code code code param region starting region text returned param expand region to full line expandregiontofullline code code passed region extended cover full lines param surrounding lines surroundinglines number surrounding lines clipping region considered code expand region to full line expandregiontofullline code code code param progress monitor report progress code code progress reporting desired current content text edit change clipped region determined parameters core exception coreexception exception occurs accessing current content string get current content getcurrentcontent i region iregion region expand region to full line expandregiontofullline surrounding lines surroundinglines i progress monitor iprogressmonitor core exception coreexception returns preview edits remembered region tracking code code executed text edits remembered preview generation code code get keep preview edits getkeeppreviewedits f track edits ftrackedits override string get name getname f name fname returns preview text edit change clipped specific region preview created app lying applying text edits managed array link text edit based change group texteditbasedchangegroup text edit change groups region determined code expand region to full line expandregiontofullline code code code parameter code region code determines clipping code expand region to full line expandregiontofullline code code code region determined parameter code region code extended cover full lines code surrounding lines surroundinglines code number surrounding lines code surrounding lines surroundinglines code considered code expand region to full line expandregiontofullline code code code param change groups changegroups change groups preview generated param region starting region clipping param expand region to full line expandregiontofullline code code passed region extended cover full lines param surrounding lines surroundinglines number surrounding lines clipping region considered code expand region to full line expandregiontofullline code code code param progress monitor report progress code code progress reporting desired current content text change clipped region determined parameters core exception coreexception exception occurs generating preview get current content getcurrentcontent i region iregion i progress monitor iprogressmonitor string get preview content getpreviewcontent text edit based change group texteditbasedchangegroup change groups changegroups i region iregion region expand region to full line expandregiontofullline surrounding lines surroundinglines i progress monitor iprogressmonitor core exception coreexception returns preview content string param progress monitor report progress code code progress reporting desired preview core exception coreexception preview created string get preview content getpreviewcontent i progress monitor iprogressmonitor core exception coreexception returns text edit change text type text edit change text type string get text type gettexttype f text type ftexttype text edit textedit map edits mapedits text edit textedit edits text edit copier texteditcopier copier edits list text edit textedit result array list arraylist edits length edits length text edit textedit edit copier get copy getcopy edits edit result add edit result to array toarray text edit textedit result size override set enabled setenabled enabled set enabled setenabled enabled iterator text edit based change group texteditbasedchangegroup iter f change groups fchangegroups iterator iter has next hasnext text edit based change group texteditbasedchangegroup element iter element set enabled setenabled enabled controls text edit change executed edits preview generation param code code executed preview edits set keep preview edits setkeeppreviewedits f track edits ftrackedits sets text type text type determine content merge viewer difference original preview content user content merge viewers defined extension point code org eclipse compare content merge view ers contentmergeviewers code text type code txt code param type text type code code passed text type res eted reseted text type code txt code set text type settexttype string type type nls type txt f text type ftexttype type