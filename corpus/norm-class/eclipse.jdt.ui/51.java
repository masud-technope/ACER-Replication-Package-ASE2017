copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jsp java io exception ioexception java reader java util array list arraylist org eclipse jface text source translation i tag handler itaghandler org eclipse jface text source translation i tag handler factory itaghandlerfactory org eclipse jface text source translation i translator itranslator org eclipse jdt internal examples jsp editor jspeditor jsp translator result collector jsptranslatorresultcollector jsp translator jsptranslator abstract jsp parser abstractjspparser i translator itranslator string buffer stringbuffer f declarations fdeclarations string buffer stringbuffer string buffer stringbuffer f content fcontent string buffer stringbuffer string buffer stringbuffer f local declarations flocaldeclarations string buffer stringbuffer array list arraylist f content lines fcontentlines array list arraylist array list arraylist f declaration lines fdeclarationlines array list arraylist array list arraylist f local declaration lines flocaldeclarationlines array list arraylist f smap fsmap i tag handler factory itaghandlerfactory f tag handler factor ftaghandlerfactor i tag handler itaghandler f current tag handler fcurrenttaghandler jsp translator result collector jsptranslatorresultcollector f result collector fresultcollector jsp translator jsptranslator links passing parameters tag handlers f result collector fresultcollector jsp translator result collector jsptranslatorresultcollector f declarations fdeclarations f local declarations flocaldeclarations f content fcontent f declaration lines fdeclarationlines f local declaration lines flocaldeclarationlines f content lines fcontentlines start tag starttag end tag endtag string start name startname f current tag handler fcurrenttaghandler f tag handler factor ftaghandlerfactor get handler gethandler tag attribute tagattribute string attr name attrname string start name startname start value startvalue f current tag handler fcurrenttaghandler f current tag handler fcurrenttaghandler add attribute addattribute attr name attrname f lines flines end tag endtag f current tag handler fcurrenttaghandler f current tag handler fcurrenttaghandler process end tag processendtag f result collector fresultcollector f lines flines io exception ioexception print stack trace printstacktrace java string java nls f current tag handler fcurrenttaghandler f tag handler factor ftaghandlerfactor get handler gethandler nls f current tag handler fcurrenttaghandler f tag handler factor ftaghandlerfactor get handler gethandler xxx needed parser treat tag nls f current tag handler fcurrenttaghandler add attribute addattribute source java f current tag handler fcurrenttaghandler process end tag processendtag f result collector fresultcollector io exception ioexception print stack trace printstacktrace text string string buffer stringbuffer string buffer stringbuffer length char at charat nls nls f content fcontent append system println to string tostring nls f content lines fcontentlines add integer set length setlength append length nls nls f content fcontent append system print to string tostring nls f content lines fcontentlines add integer reset translator resettranslator f declarations fdeclarations set length setlength f content fcontent set length setlength f local declarations flocaldeclarations set length setlength f local declaration lines flocaldeclarationlines clear f content lines fcontentlines clear f declaration lines fdeclarationlines clear string translate reader reader string io exception ioexception string buffer stringbuffer buffer string buffer stringbuffer reset translator resettranslator parse reader line count linecount f declaration lines fdeclarationlines size f local declaration lines flocaldeclarationlines size f content lines fcontentlines size f smap fsmap line count linecount f smap fsmap nls nls buffer append f smap fsmap f smap fsmap nls buffer append f declarations fdeclarations to string tostring system println f declarations fdeclarations to string tostring f declaration lines fdeclarationlines size f smap fsmap integer f declaration lines fdeclarationlines int value intvalue nls system println integer f declaration lines fdeclarationlines int value intvalue f smap fsmap f smap fsmap nls buffer append f smap fsmap f smap fsmap f local declarations flocaldeclarations length buffer append f local declarations flocaldeclarations to string tostring system println f local declarations flocaldeclarations f local declaration lines flocaldeclarationlines size nls system println nls integer f local declaration lines flocaldeclarationlines int value intvalue f smap fsmap integer f local declaration lines flocaldeclarationlines int value intvalue buffer append f content fcontent to string tostring system println f content fcontent f content lines fcontentlines size f smap fsmap integer f content lines fcontentlines int value intvalue nls system println integer f content lines fcontentlines int value intvalue nls buffer append f smap fsmap f smap fsmap nls buffer append f smap fsmap f smap fsmap f smap fsmap length nls nls system println f smap fsmap system println buffer to string tostring buffer to string tostring get line mapping getlinemapping f smap fsmap org eclipse jface text source i translator itranslator set tag handler factory settaghandlerfactory org eclipse jface text source i tag handler factory itaghandlerfactory set tag handler factory settaghandlerfactory i tag handler factory itaghandlerfactory tag handler factory taghandlerfactory f tag handler factor ftaghandlerfactor tag handler factory taghandlerfactory i translator itranslator back translate offset in line backtranslateoffsetinline string string back translate offset in line backtranslateoffsetinline string original line originalline string translated line translatedline offset in translated line offsetintranslatedline string tag i tag handler itaghandler handler tag handler f tag handler factor ftaghandlerfactor get handler gethandler tag handler f tag handler factor ftaghandlerfactor find handler findhandler original line originalline handler handler back translate offset in line backtranslateoffsetinline original line originalline translated line translatedline offset in translated line offsetintranslatedline