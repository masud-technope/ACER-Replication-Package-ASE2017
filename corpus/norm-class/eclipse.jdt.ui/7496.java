copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt jar package r jarpackager java buffered input stream bufferedinputstream java byte array output stream bytearrayoutputstream java file java file output stream fileoutputstream java io exception ioexception java util array list arraylist java util hash set hashset java util list java util java util jar jar entry jarentry java util jar jar output stream jaroutputstream java util jar manifest java util zip crc java util zip zip entry zipentry org eclipse swt widgets shell org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core resources i file ifile org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources resources plugin resourcesplugin org eclipse jdt internal corext util messages org eclipse jdt internal java plugin javaplugin org eclipse jdt internal jar package r jarpackager jar packager messages jarpackagermessages org eclipse jdt internal jar package r jarpackager jar packager util jarpackagerutil org eclipse jdt internal viewsupport basic element labels basicelementlabels creates jar file jar data clients subclass org eclipse jdt jar package r jarpackager jar package data jarpackagedata deprecated link org eclipse jdt jar package r jarpackager jar writer jarwriter jar writer jarwriter deprecated jar writer jarwriter jar output stream jaroutputstream f jar output stream fjaroutputstream jar package data jarpackagedata f jar package fjarpackage string f dir ectories fdirectories hash set hashset creates instance create jar based jar package jarpackage param jar package jarpackage jar specification param parent shell display question dialogs code code cancel answer dialog core exception coreexception signal unusual termination status object jar writer jarwriter jar package data jarpackagedata jar package jarpackage shell parent core exception coreexception nls is not null isnotnull jar package jarpackage jar specification f jar package fjarpackage jar package jarpackage nls is true istrue f jar package fjarpackage is valid isvalid jar specification invalid can create jar cancreatejar parent operation canceled exception operationcanceledexception f jar package fjarpackage uses manifest usesmanifest f jar package fjarpackage are generated files exported aregeneratedfilesexported manifest manifest f jar package fjarpackage get manifest provider getmanifestprovider create f jar package fjarpackage f jar output stream fjaroutputstream jar output stream jaroutputstream file output stream fileoutputstream f jar package fjarpackage get absolute jar location getabsolutejarlocation to file tofile manifest f jar output stream fjaroutputstream jar output stream jaroutputstream file output stream fileoutputstream f jar package fjarpackage get absolute jar location getabsolutejarlocation to file tofile string comment jar package jarpackage get comment getcomment comment f jar output stream fjaroutputstream set comment setcomment comment io exception ioexception jar packager util jarpackagerutil create core exception createcoreexception get local ized message getlocalizedmessage closes archive required cleanup core exception coreexception signal unusual termination status object close core exception coreexception f jar output stream fjaroutputstream f jar output stream fjaroutputstream close register in workspace if needed registerinworkspaceifneeded io exception ioexception jar packager util jarpackagerutil create core exception createcoreexception get local ized message getlocalizedmessage writes passed resource current archive param resource file written param destination path destinationpath path file archive core exception coreexception signal unusual termination status object write i file ifile resource i path ipath destination path destinationpath core exception coreexception byte array output stream bytearrayoutputstream output byte array output stream bytearrayoutputstream buffered input stream bufferedinputstream content stream contentstream content stream contentstream buffered input stream bufferedinputstream resource get contents getcontents chunk size chunksize read buffer readbuffer chunk size chunksize count count content stream contentstream read read buffer readbuffer chunk size chunksize output write read buffer readbuffer count io exception ioexception jar packager util jarpackagerutil create core exception createcoreexception get local ized message getlocalizedmessage content stream contentstream content stream contentstream close io exception ioexception jar packager util jarpackagerutil create core exception createcoreexception get local ized message getlocalizedmessage i path ipath file location filelocation resource get location getlocation last modified lastmodified system current time millis currenttimemillis file file file location filelocation file file location filelocation to file tofile file exists last modified lastmodified file last modified lastmodified f jar package fjarpackage are directory entries included aredirectoryentriesincluded add dir ectories adddirectories destination path destinationpath file write destination path destinationpath output to byte array tobytearray last modified lastmodified io exception ioexception string message get local ized message getlocalizedmessage message messages format jar packager messages jarpackagermessages jar writer jarwriter write problem with message writeproblemwithmessage object basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath get local ized message getlocalizedmessage message messages format jar packager messages jarpackagermessages jar writer jarwriter write problem writeproblem basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath jar packager util jarpackagerutil create core exception createcoreexception message creates jar entry jarentry passed path contents writes current archive param path path archive param contents bytes write param last modified lastmodified represents modification io exception ioexception error occurred write i path ipath path contents last modified lastmodified io exception ioexception jar entry jarentry new entry newentry jar entry jarentry path to string tostring replace file separator char separatorchar f jar package fjarpackage is comp res sed iscompressed new entry newentry set method setmethod zip entry zipentry deflated entry filled automatically new entry newentry set method setmethod zip entry zipentry stored new entry newentry set size setsize contents length crc checks um calculator checksumcalculator crc checks um calculator checksumcalculator update contents new entry newentry set crc setcrc checks um calculator checksumcalculator get value getvalue modification time new entry newentry set time settime last modified lastmodified f jar output stream fjaroutputstream put next entry putnextentry new entry newentry f jar output stream fjaroutputstream write contents commented jre s jres npe stream closed works put next entry putnextentry closes previous entry closing stream closes entry f jar output stream fjaroutputstream close entry closeentry add directory entries path jar param destination path destinationpath path add param corresponding file correspondingfile file file system code code doesn exist io exception ioexception error occurred add dir ectories adddirectories i path ipath destination path destinationpath file corresponding file correspondingfile io exception ioexception string path destination path destinationpath to string tostring replace file separator char separatorchar last slash lastslash path last index of lastindexof list jar entry jarentry directories array list arraylist last slash lastslash path path substring last slash lastslash f dir ectories fdirectories add path corresponding file correspondingfile corresponding file correspondingfile corresponding file correspondingfile get parent file getparentfile time stamp timestamp corresponding file correspondingfile corresponding file correspondingfile exists corresponding file correspondingfile last modified lastmodified system current time millis currenttimemillis jar entry jarentry new entry newentry jar entry jarentry path new entry newentry set method setmethod zip entry zipentry stored new entry newentry set size setsize new entry newentry set crc setcrc new entry newentry set time settime time stamp timestamp directories add new entry newentry last slash lastslash path last index of lastindexof last slash lastslash directories size f jar output stream fjaroutputstream put next entry putnextentry directories checks jar file overwritten jar setting overwrite jar dialog user param parent parent dialog code code dialog presented code code create jar can create jar cancreatejar shell parent file file f jar package fjarpackage get absolute jar location getabsolutejarlocation to file tofile file exists file can write canwrite f jar package fjarpackage allow overwrite allowoverwrite parent jar packager util jarpackagerutil ask for overwrite permission askforoverwritepermission parent f jar package fjarpackage get absolute jar location getabsolutejarlocation test directory exists string path file get absolute path getabsolutepath separator index separatorindex path last index of lastindexof file separator directory fine separator index separatorindex file directory file path substring separator index separatorindex directory exists jar packager util jarpackagerutil ask to create directory asktocreatedirectory parent directory directory mkdirs register in workspace if needed registerinworkspaceifneeded i path ipath jar path jarpath f jar package fjarpackage get absolute jar location getabsolutejarlocation i project iproject projects resources plugin resourcesplugin get workspace getworkspace get root getroot get projects getprojects projects length i project iproject project projects jar local file system project project local get location getlocation save i path ipath project location projectlocation project get location getlocation project location projectlocation project location projectlocation is prefix of isprefixof jar path jarpath jar path jarpath jar path jarpath remove first segments removefirstsegments project location projectlocation segment count segmentcount jar path jarpath jar path jarpath remove last segments removelastsegments i resource iresource containing folder containingfolder project find member findmember jar path jarpath containing folder containingfolder containing folder containingfolder is accessible isaccessible containing folder containingfolder refresh local refreshlocal i resource iresource depth core exception coreexception java plugin javaplugin log