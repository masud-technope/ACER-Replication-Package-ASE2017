copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal text template contentassist java util array list arraylist java util list java util map java util regex matcher java util regex pattern org eclipse swt graphics image org eclipse swt graphics point org eclipse swt widgets shell org eclipse core runtime core exception coreexception org eclipse text edits malformed tree exception malformedtreeexception org eclipse jface dialogs message dialog messagedialog org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text document event documentevent org eclipse jface text i document idocument org eclipse jface text i region iregion org eclipse jface text i rewrite target irewritetarget org eclipse jface text i text viewer itextviewer org eclipse jface text i text viewer extension itextviewerextension org eclipse jface text region org eclipse jface text templates global template variables globaltemplatevariables org eclipse jface text templates template org eclipse jface text templates template buffer templatebuffer org eclipse jface text templates template exception templateexception org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom block org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom variable declaration variabledeclaration org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom generic visitor genericvisitor org eclipse jdt internal corext template java compilation unit context compilationunitcontext org eclipse jdt internal corext template java compilation unit context type compilationunitcontexttype org eclipse jdt text java i invocation context iinvocationcontext org eclipse jdt internal java plugin javaplugin org eclipse jdt internal text correction assist context assistcontext org eclipse jdt internal text correction surround with surroundwith surround with template proposal surroundwithtemplateproposal template proposal templateproposal surround with template surroundwithtemplate surround with surroundwith nls nls pattern selection pattern pattern compile global template variables globaltemplatevariables line selection lineselection template f template ftemplate i java project ijavaproject f current project fcurrentproject ast node astnode f template node ftemplatenode surround with template surroundwithtemplate i invocation context iinvocationcontext context ast node astnode selected nodes selectednodes template template context getastroot selected nodes selectednodes f template ftemplate template f current project fcurrentproject context get compilation unit getcompilationunit get java project getjavaproject override list variable declaration variabledeclaration get variable declaration reads inside getvariabledeclarationreadsinside ast node astnode selected nodes selectednodes max variable id maxvariableid is new context isnewcontext get variable declaration reads inside getvariabledeclarationreadsinside selected nodes selectednodes max variable id maxvariableid array list arraylist override is new context isnewcontext nls string template variable reg ex templatevariableregex string template f template ftemplate get pattern getpattern matcher line selection matcher lineselectionmatcher selection pattern matcher template current position currentposition line selection matcher lineselectionmatcher find line selection matcher lineselectionmatcher start insertion position insertionposition current position currentposition insertion position insertionposition current position currentposition template nls template replace first replacefirst nls template variable reg ex templatevariableregex nls line selection matcher lineselectionmatcher selection pattern matcher template current position currentposition line selection matcher lineselectionmatcher find line selection matcher lineselectionmatcher start nls template template replace all replaceall template variable reg ex templatevariableregex ast ast get ast getast ast parser astparser parser ast parser astparser new parser newparser ast api level apilevel parser set source setsource template to char array tochararray parser set project setproject f current project fcurrentproject parser set kind setkind ast parser astparser statements ast node astnode root parser createast block root statements is empty isempty parser ast parser astparser new parser newparser ast api level apilevel parser set source setsource template to char array tochararray parser set project setproject f current project fcurrentproject parser set kind setkind ast parser astparser expression root parser createast line selection position lineselectionposition insertion position insertionposition root accept generic visitor genericvisitor override end visit endvisit block node end visit endvisit node f template node ftemplatenode node get start position getstartposition line selection position lineselectionposition node get length getlength node get start position getstartposition line selection position lineselectionposition f template node ftemplatenode node f template node ftemplatenode ast nodes astnodes get parent getparent f template node ftemplatenode method declaration methoddeclaration i region iregion f region fregion i compilation unit icompilationunit f compilation unit fcompilationunit compilation unit context compilationunitcontext f context fcontext template f template ftemplate ast node astnode f selected nodes fselectednodes template proposal templateproposal f proposal fproposal i region iregion f selected region fselectedregion surround with template proposal surroundwithtemplateproposal i compilation unit icompilationunit compilation unit compilationunit template template compilation unit context compilationunitcontext context i region iregion region image image ast node astnode selected nodes selectednodes template context region image f compilation unit fcompilationunit compilation unit compilationunit f template ftemplate template f context fcontext context f region fregion region f selected nodes fselectednodes selected nodes selectednodes org eclipse jdt internal text template contentassist template proposal templateproposal get additional proposal info getadditionalproposalinfo string get preview content getpreviewcontent i document idocument document document f compilation unit fcompilationunit get buffer getbuffer get contents getcontents compilation unit context compilationunitcontext context create new context createnewcontext document offset context get completion offset getcompletionoffset start context get start getstart context get end getend i region iregion region region start start context set read only setreadonly template buffer templatebuffer template buffer templatebuffer template buffer templatebuffer context evaluate f template ftemplate template exception templateexception java plugin javaplugin log start region get offset getoffset region get offset getoffset region get length getlength math max offset string template string templatestring template buffer templatebuffer get string getstring document replace start start template string templatestring document malformed tree exception malformedtreeexception java plugin javaplugin log illegal argument exception illegalargumentexception java plugin javaplugin log bad location exception badlocationexception java plugin javaplugin log core exception coreexception java plugin javaplugin log org eclipse jdt internal text template contentassist template proposal templateproposal apply org eclipse jface text i text viewer itextviewer override apply i text viewer itextviewer viewer trigger state mask statemask offset set redraw setredraw viewer i document idocument document viewer get document getdocument compilation unit context compilationunitcontext context create new context createnewcontext document start context get start getstart context get end getend i region iregion region region start start evaluate template context f proposal fproposal template proposal templateproposal f template ftemplate context region f proposal fproposal apply viewer trigger state mask statemask context get completion offset getcompletionoffset malformed tree exception malformedtreeexception handle exception handleexception viewer f region fregion illegal argument exception illegalargumentexception handle exception handleexception viewer f region fregion bad location exception badlocationexception handle exception handleexception viewer f region fregion core exception coreexception handle exception handleexception viewer f region fregion set redraw setredraw viewer set redraw setredraw i text viewer itextviewer viewer redraw viewer i text viewer extension itextviewerextension i text viewer extension itextviewerextension extension i text viewer extension itextviewerextension viewer i rewrite target irewritetarget target extension get rewrite target getrewritetarget target set redraw setredraw redraw override point get selection getselection i document idocument document f selected region fselectedregion point f selected region fselectedregion get offset getoffset f selected region fselectedregion get length getlength f proposal fproposal f proposal fproposal get selection getselection document compilation unit context compilationunitcontext create new context createnewcontext i document idocument document core exception coreexception bad location exception badlocationexception assist context assistcontext invocation context invocationcontext assist context assistcontext f compilation unit fcompilationunit f context fcontext get start getstart f context fcontext get end getend f context fcontext get start getstart surround with template surroundwithtemplate surround with surroundwith surround with template surroundwithtemplate invocation context invocationcontext f selected nodes fselectednodes f template ftemplate map string string options f compilation unit fcompilationunit get java project getjavaproject get options getoptions surround with surroundwith get rewrite getrewrite rewriteast document options apply document offset surround with surroundwith get body start getbodystart length surround with surroundwith get body length getbodylength string new selection newselection document offset length create context compilation unit context type compilationunitcontexttype context type contexttype compilation unit context type compilationunitcontexttype java plugin javaplugin get default getdefault get template context registry gettemplatecontextregistry get context type getcontexttype f template ftemplate get context type id getcontexttypeid compilation unit context compilationunitcontext context context type contexttype create context createcontext document offset new selection newselection length f compilation unit fcompilationunit nls context set variable setvariable selection new selection newselection context set force evaluation setforceevaluation context handle exception handleexception i text viewer itextviewer viewer exception i region iregion region java plugin javaplugin log open error dialog openerrordialog viewer get text widget gettextwidget get shell getshell f selected region fselectedregion region open error dialog openerrordialog shell shell exception message dialog messagedialog open error openerror shell template content assist messages templatecontentassistmessages template evaluator templateevaluator error title get message getmessage override validate i document idocument document offset document event documentevent event