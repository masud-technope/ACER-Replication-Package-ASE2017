copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring structure java util array list arraylist java util arrays java util collection java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime sub progress monitor subprogressmonitor org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits text edit textedit org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text i document idocument org eclipse ltk core refactoring change org eclipse ltk core refactoring group category groupcategory org eclipse ltk core refactoring group category set groupcategoryset org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring participants check conditions context checkconditionscontext org eclipse jdt core flags org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i field ifield org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i type itype org eclipse jdt core i type hierarchy itypehierarchy org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast requestor astrequestor org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom block org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom expression org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom marker annotation markerannotation org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom modifier org eclipse jdt core dom org eclipse jdt core dom type org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite i tracked node position itrackednodeposition org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core refactoring i java refactorings ijavarefactorings org eclipse jdt core refactoring descriptors java refactoring descriptor javarefactoringdescriptor org eclipse jdt core refactoring descriptors push down descriptor pushdowndescriptor org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search search engine searchengine org eclipse jdt core search search match searchmatch org eclipse jdt core search search pattern searchpattern org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom modifier rewrite modifierrewrite org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring arguments javarefactoringarguments org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring availability tester refactoringavailabilitytester org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring refactoring search engine refactoringsearchengine org eclipse jdt internal corext refactoring search result group searchresultgroup org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring dynamic validation refactoring change dynamicvalidationrefactoringchange org eclipse jdt internal corext refactoring rename method checks methodchecks org eclipse jdt internal corext refactoring structure member visibility adjustor membervisibilityadjustor incoming member visibility adjustment incomingmembervisibilityadjustment org eclipse jdt internal corext refactoring util resource util resourceutil org eclipse jdt internal corext refactoring util text edit based change manager texteditbasedchangemanager org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util jdt flags jdtflags org eclipse jdt internal corext util messages org eclipse jdt internal corext util search utils searchutils org eclipse jdt internal corext util strings org eclipse jdt java element labels javaelementlabels org eclipse jdt internal java plugin javaplugin org eclipse jdt internal preferences java preferences settings javapreferencessettings org eclipse jdt internal viewsupport basic element labels basicelementlabels refactoring processor push refactoring push down refactoring processor pushdownrefactoringprocessor hierarchy processor hierarchyprocessor member action info memberactioninfo i member action info imemberactioninfo action push action push action assert valid action assertvalidaction i member imember member action member i method imethod is true istrue action push action action action action push action member i field ifield is true istrue action action action push action member action info memberactioninfo create i member imember member action member action info memberactioninfo member action i member imember get members getmembers member action info memberactioninfo infos i member imember result i member imember infos length result length result infos get member getmember result f action faction i member imember f member fmember member action info memberactioninfo i member imember member action assert valid action assertvalidaction member action is true istrue member i field ifield member i method imethod f member fmember member f action faction action copy javadoc to copies in subclasses copyjavadoctocopiesinsubclasses is to be deleted from declaring class istobedeletedfromdeclaringclass get action getaction f action faction get available actions getavailableactions is field info isfieldinfo push action action push action push action action i member imember get member getmember f member fmember get new modifiers for copy in sub class getnewmodifiersforcopyinsubclass old modifiers oldmodifiers java model exception javamodelexception is field info isfieldinfo old modifiers oldmodifiers is to be deleted from declaring class istobedeletedfromdeclaringclass old modifiers oldmodifiers modifiers old modifiers oldmodifiers is new method to be declared abstract isnewmethodtobedeclaredabstract jdt flags jdtflags is public ispublic f member fmember modifiers modifier jdt flags jdtflags clear access modifiers clearaccessmodifiers modifiers modifiers get new modifiers for original getnewmodifiersfororiginal old modifiers oldmodifiers java model exception javamodelexception is field info isfieldinfo old modifiers oldmodifiers is to be deleted from declaring class istobedeletedfromdeclaringclass old modifiers oldmodifiers modifiers old modifiers oldmodifiers is new method to be declared abstract isnewmethodtobedeclaredabstract modifiers jdt flags jdtflags clear flag clearflag modifier modifier old modifiers oldmodifiers modifiers modifier jdt flags jdtflags is public ispublic f member fmember modifiers modifier jdt flags jdtflags clear access modifiers clearaccessmodifiers modifiers modifiers override is active isactive get action getaction action is editable iseditable is field info isfieldinfo get action getaction member action info memberactioninfo action is field info isfieldinfo f member fmember i field ifield is new method to be declared abstract isnewmethodtobedeclaredabstract java model exception javamodelexception is field info isfieldinfo jdt flags jdtflags is abstract isabstract f member fmember f action faction push action is to be created in subclasses of declaring class istobecreatedinsubclassesofdeclaringclass f action faction action is to be deleted from declaring class istobedeletedfromdeclaringclass is to be pushed down istobepusheddown is to be pushed down istobepusheddown f action faction push action set action setaction action assert valid action assertvalidaction f member fmember action is field info isfieldinfo is true istrue action push action f action faction action nls string attribute nls string attribute push push identifier processor nls string identifier org eclipse jdt push down processor pushdownprocessor push group category group category set groupcategoryset push group category set groupcategoryset nls group category groupcategory nls org eclipse jdt internal corext push down pushdown refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring category refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring category description member action info memberactioninfo create infos for all push able fields and methods createinfosforallpushablefieldsandmethods i type itype type java model exception javamodelexception list member action info memberactioninfo result array list arraylist i member imember push able members pushablemembers refactoring availability tester refactoringavailabilitytester get push down members getpushdownmembers type push able members pushablemembers length result add member action info memberactioninfo create push able members pushablemembers member action info memberactioninfo action result to array toarray member action info memberactioninfo result size i member imember get abstract members getabstractmembers i member imember members java model exception javamodelexception list i member imember result array list arraylist members length members length i member imember member members jdt flags jdtflags is abstract isabstract member result add member result to array toarray i member imember result size compilation unit rewrite compilationunitrewrite get compilation unit rewrite getcompilationunitrewrite map i compilation unit icompilationunit compilation unit rewrite compilationunitrewrite rewrites i compilation unit icompilationunit unit is not null isnotnull rewrites is not null isnotnull unit compilation unit rewrite compilationunitrewrite rewrite rewrites unit rewrite rewrite compilation unit rewrite compilationunitrewrite unit rewrites unit rewrite rewrite i java element ijavaelement get ref erencing elements from same class getreferencingelementsfromsameclass i member imember member i progress monitor iprogressmonitor refactoring status refactoringstatus status java model exception javamodelexception is not null isnotnull member refactoring search engine refactoringsearchengine engine refactoring search engine refactoringsearchengine search pattern searchpattern create pattern createpattern member i java search constants ijavasearchconstants references search utils searchutils generics agnostic match rule engine set filtering setfiltering engine set scope setscope search engine searchengine create java search scope createjavasearchscope i java element ijavaelement member get declaring type getdeclaringtype engine set status setstatus status engine search pattern searchpattern sub progress monitor subprogressmonitor search result group searchresultgroup groups search result group searchresultgroup engine get results getresults i java element ijavaelement result hash set hashset groups length search result group searchresultgroup group groups search match searchmatch group get search results getsearchresults length search match searchmatch search result searchresult result add search utils searchutils get enclosing java element getenclosingjavaelement search result searchresult result to array toarray i java element ijavaelement result size i type hierarchy itypehierarchy f cached class hierarchy fcachedclasshierarchy member action info memberactioninfo f member infos fmemberinfos creates push refactoring processor param members members pull push down refactoring processor pushdownrefactoringprocessor i member imember members members members i type itype type refactoring availability tester refactoringavailabilitytester get top level type gettopleveltype members type refactoring availability tester refactoringavailabilitytester get push down members getpushdownmembers type length f members to move fmemberstomove i member imember f cached declaring type fcacheddeclaringtype type java model exception javamodelexception exception java plugin javaplugin log exception creates push refactoring processor refactoring arguments param arguments refactoring arguments param status status push down refactoring processor pushdownrefactoringprocessor java refactoring arguments javarefactoringarguments arguments refactoring status refactoringstatus status refactoring status refactoringstatus initialize status initializestatus initialize arguments status merge initialize status initializestatus add all required push able members addallrequiredpushablemembers list i member imember queue i member imember member i progress monitor iprogressmonitor monitor java model exception javamodelexception monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring calculating required i progress monitor iprogressmonitor sub progress monitor subprogressmonitor monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring calculating required i method imethod required methods requiredmethods reference finder util referencefinderutil get methods referenced in getmethodsreferencedin i java element ijavaelement member sub progress monitor subprogressmonitor sub progress monitor subprogressmonitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring calculating required required methods requiredmethods length required methods requiredmethods length i method imethod method required methods requiredmethods method checks methodchecks is virtual isvirtual method method get declaring type getdeclaringtype equals get declaring type getdeclaringtype queue method refactoring availability tester refactoringavailabilitytester is push down available ispushdownavailable method queue add method i field ifield required fields requiredfields reference finder util referencefinderutil get fields referenced in getfieldsreferencedin i java element ijavaelement member sub progress monitor subprogressmonitor monitor required fields requiredfields length i field ifield field required fields requiredfields field get declaring type getdeclaringtype equals get declaring type getdeclaringtype queue field refactoring availability tester refactoringavailabilitytester is push down available ispushdownavailable field queue add field monitor refactoring status refactoringstatus check abstract members in destination classes checkabstractmembersindestinationclasses i member imember members to push down memberstopushdown i type itype destination classes for abstract destinationclassesforabstract java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus i member imember abstract members to push down abstractmemberstopushdown get abstract members getabstractmembers members to push down memberstopushdown destination classes for abstract destinationclassesforabstract length result merge member check util membercheckutil check members in destination type checkmembersindestinationtype abstract members to push down abstractmemberstopushdown destination classes for abstract destinationclassesforabstract result refactoring status refactoringstatus check accessed fields checkaccessedfields i type itype subclasses i progress monitor iprogressmonitor java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus i member imember members to push down memberstopushdown member action info memberactioninfo get members getmembers get infos for members to be created in subclasses of declaring class getinfosformemberstobecreatedinsubclassesofdeclaringclass list i member imember pushed down list pusheddownlist arrays as list aslist members to push down memberstopushdown i field ifield accessed fields accessedfields reference finder util referencefinderutil get fields referenced in getfieldsreferencedin members to push down memberstopushdown subclasses length i type itype target class targetclass subclasses i type hierarchy itypehierarchy target super types targetsupertypes target class targetclass new supertype hierarchy newsupertypehierarchy accessed fields accessedfields length i field ifield field accessed fields accessedfields is accessible isaccessible pushed down list pusheddownlist field can be accessed from canbeaccessedfrom field target class targetclass target super types targetsupertypes flags is enum isenum field get flags getflags is accessible isaccessible string message messages format refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring field accessible string java element labels javaelementlabels get text label gettextlabel field java element labels javaelementlabels fully qualified java element labels javaelementlabels get text label gettextlabel target class targetclass java element labels javaelementlabels fully qualified result add error adderror message java status context javastatuscontext create field result refactoring status refactoringstatus check accessed methods checkaccessedmethods i type itype subclasses i progress monitor iprogressmonitor java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus i member imember members to push down memberstopushdown member action info memberactioninfo get members getmembers get infos for members to be created in subclasses of declaring class getinfosformemberstobecreatedinsubclassesofdeclaringclass list i member imember pushed down list pusheddownlist arrays as list aslist members to push down memberstopushdown i method imethod accessed methods accessedmethods reference finder util referencefinderutil get methods referenced in getmethodsreferencedin members to push down memberstopushdown subclasses length i type itype target class targetclass subclasses i type hierarchy itypehierarchy target super types targetsupertypes target class targetclass new supertype hierarchy newsupertypehierarchy offset offset accessed methods accessedmethods length offset i method imethod method accessed methods accessedmethods offset is accessible isaccessible pushed down list pusheddownlist method can be accessed from canbeaccessedfrom method target class targetclass target super types targetsupertypes is accessible isaccessible string message messages format refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring method accessible string java element labels javaelementlabels get text label gettextlabel method java element labels javaelementlabels fully qualified java element labels javaelementlabels get text label gettextlabel target class targetclass java element labels javaelementlabels fully qualified result add error adderror message java status context javastatuscontext create method result refactoring status refactoringstatus check accessed types checkaccessedtypes i type itype subclasses i progress monitor iprogressmonitor java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus i type itype accessed types accessedtypes get types referenced in moved members gettypesreferencedinmovedmembers subclasses length i type itype target class targetclass subclasses i type hierarchy itypehierarchy target super types targetsupertypes target class targetclass new supertype hierarchy newsupertypehierarchy offset offset accessed types accessedtypes length offset i type itype type accessed types accessedtypes offset can be accessed from canbeaccessedfrom type target class targetclass target super types targetsupertypes string message messages format refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring type accessible string java element labels javaelementlabels get text label gettextlabel type java element labels javaelementlabels fully qualified java element labels javaelementlabels get text label gettextlabel target class targetclass java element labels javaelementlabels fully qualified result add error adderror message java status context javastatuscontext create type result refactoring status refactoringstatus check elements accessed by modified members checkelementsaccessedbymodifiedmembers i progress monitor iprogressmonitor java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring check references i type itype subclasses get abstract destinations getabstractdestinations sub progress monitor subprogressmonitor result merge check accessed types checkaccessedtypes subclasses sub progress monitor subprogressmonitor result merge check accessed fields checkaccessedfields subclasses sub progress monitor subprogressmonitor result merge check accessed methods checkaccessedmethods subclasses sub progress monitor subprogressmonitor result override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor monitor check conditions context checkconditionscontext context core exception coreexception operation canceled exception operationcanceledexception monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring checking clear caches clearcaches i compilation unit icompilationunit unit get declaring type getdeclaringtype get compilation unit getcompilationunit f layer flayer unit unit find working copy findworkingcopy f owner fowner reset working copies resetworkingcopies unit refactoring status refactoringstatus result refactoring status refactoringstatus result merge check members in destination classes checkmembersindestinationclasses sub progress monitor subprogressmonitor monitor result merge check elements accessed by modified members checkelementsaccessedbymodifiedmembers sub progress monitor subprogressmonitor monitor result merge check references to pushed down members checkreferencestopusheddownmembers sub progress monitor subprogressmonitor monitor jdt flags jdtflags is abstract isabstract get declaring type getdeclaringtype get abstract declaration infos getabstractdeclarationinfos length result merge check constructor c alls checkconstructorcalls get declaring type getdeclaringtype sub progress monitor subprogressmonitor monitor monitor worked result has fatal error hasfatalerror result list i member imember members array list arraylist f member infos fmemberinfos length f member infos fmemberinfos length f member infos fmemberinfos get action getaction member action info memberactioninfo action members add f member infos fmemberinfos get member getmember f members to move fmemberstomove members to array toarray i member imember members size f change manager fchangemanager create change manager createchangemanager sub progress monitor subprogressmonitor monitor result result has fatal error hasfatalerror result checks add modified files to checker addmodifiedfilestochecker resource util resourceutil get files getfiles f change manager fchangemanager get all compilation units getallcompilationunits context result monitor override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor monitor core exception coreexception operation canceled exception operationcanceledexception monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring checking refactoring status refactoringstatus status refactoring status refactoringstatus status merge check possible subclasses checkpossiblesubclasses sub progress monitor subprogressmonitor monitor status has fatal error hasfatalerror status status merge check declaring type checkdeclaringtype sub progress monitor subprogressmonitor monitor status has fatal error hasfatalerror status status merge check if members exist checkifmembersexist status has fatal error hasfatalerror status f member infos fmemberinfos create infos for all push able fields and methods createinfosforallpushablefieldsandmethods get declaring type getdeclaringtype list i member imember list arrays as list aslist f members to move fmemberstomove offset offset f member infos fmemberinfos length offset member action info memberactioninfo info f member infos fmemberinfos offset list info get member getmember info set action setaction member action info memberactioninfo push action status monitor refactoring status refactoringstatus check members in destination classes checkmembersindestinationclasses i progress monitor iprogressmonitor monitor java model exception javamodelexception monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring checking refactoring status refactoringstatus result refactoring status refactoringstatus i member imember members to push down memberstopushdown member action info memberactioninfo get members getmembers get infos for members to be created in subclasses of declaring class getinfosformemberstobecreatedinsubclassesofdeclaringclass i type itype destination classes for non abstract destinationclassesfornonabstract get abstract destinations getabstractdestinations sub progress monitor subprogressmonitor monitor result merge check non abstract members in destination classes checknonabstractmembersindestinationclasses members to push down memberstopushdown destination classes for non abstract destinationclassesfornonabstract list i member imember list arrays as list aslist get abstract members getabstractmembers get abstract destinations getabstractdestinations sub progress monitor subprogressmonitor monitor i type itype destination classes for abstract destinationclassesforabstract list to array toarray i type itype list size result merge check abstract members in destination classes checkabstractmembersindestinationclasses members to push down memberstopushdown destination classes for abstract destinationclassesforabstract monitor result refactoring status refactoringstatus check non abstract members in destination classes checknonabstractmembersindestinationclasses i member imember members to push down memberstopushdown i type itype destination classes for non abstract destinationclassesfornonabstract java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus arrays as list aslist support removing list i member imember list array list arraylist list add all addall arrays as list aslist members to push down memberstopushdown list remove all removeall arrays as list aslist get abstract members getabstractmembers members to push down memberstopushdown i member imember non abstract members to push down nonabstractmemberstopushdown list to array toarray i member imember list size destination classes for non abstract destinationclassesfornonabstract length result merge member check util membercheckutil check members in destination type checkmembersindestinationtype non abstract members to push down nonabstractmemberstopushdown destination classes for non abstract destinationclassesfornonabstract result refactoring status refactoringstatus check possible subclasses checkpossiblesubclasses i progress monitor iprogressmonitor java model exception javamodelexception i type itype modifiable subclasses modifiablesubclasses get abstract destinations getabstractdestinations modifiable subclasses modifiablesubclasses length string msg messages format refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring subclasses string java element labels javaelementlabels get text label gettextlabel get declaring type getdeclaringtype java element labels javaelementlabels fully qualified refactoring status refactoringstatus create fatal error status createfatalerrorstatus msg refactoring status refactoringstatus refactoring status refactoringstatus check references to pushed down members checkreferencestopusheddownmembers i progress monitor iprogressmonitor monitor java model exception javamodelexception list i member imember fields array list arraylist f member infos fmemberinfos length f member infos fmemberinfos length member action info memberactioninfo info f member infos fmemberinfos info is to be pushed down istobepusheddown fields add info get member getmember i member imember members to push memberstopush fields to array toarray i member imember fields size refactoring status refactoringstatus result refactoring status refactoringstatus list i member imember moved members movedmembers arrays as list aslist member action info memberactioninfo get members getmembers get infos for members to be created in subclasses of declaring class getinfosformemberstobecreatedinsubclassesofdeclaringclass monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring check references members to push memberstopush length members to push memberstopush length i member imember member members to push memberstopush string label create label createlabel member i java element ijavaelement referencing get ref erencing elements from same class getreferencingelementsfromsameclass member sub progress monitor subprogressmonitor monitor result offset offset referencing length offset i java element ijavaelement element referencing offset moved members movedmembers element element i member imember i member imember referencing member referencingmember i member imember element object label create label createlabel referencing member referencingmember string msg messages format refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring referenced result add error adderror msg java status context javastatuscontext create referencing member referencingmember monitor result compute additional required members to push down computeadditionalrequiredmemberstopushdown i progress monitor iprogressmonitor monitor java model exception javamodelexception list i member imember list arrays as list aslist get additional required members getadditionalrequiredmembers monitor f member infos fmemberinfos length member action info memberactioninfo info f member infos fmemberinfos list info get member getmember info set action setaction member action info memberactioninfo push action copy body of pushed down method copybodyofpusheddownmethod ast rewrite astrewrite target rewrite targetrewrite i method imethod method method declaration methoddeclaration old method oldmethod method declaration methoddeclaration new method newmethod type variable map let typevariablemaplet mapping java model exception javamodelexception block body old method oldmethod get body getbody body new method newmethod set body setbody i document idocument document document method get compilation unit getcompilationunit get buffer getbuffer get contents getcontents ast rewrite astrewrite rewriter ast rewrite astrewrite create body getast i tracked node position itrackednodeposition position rewriter track body body accept type variable mapper typevariablemapper rewriter mapping rewriter rewriteast document get declaring type getdeclaringtype get compilation unit getcompilationunit get java project getjavaproject get options getoptions apply document text edit textedit string content document position get start position getstartposition position get length getlength string lines strings convert into lines convertintolines content strings trim indentation trimindentation lines method get java project getjavaproject content strings concatenate lines stub utility stubutility get line delimiter used getlinedelimiterused method new method newmethod set body setbody block target rewrite targetrewrite create string placeholder createstringplaceholder content ast node astnode block malformed tree exception malformedtreeexception exception java plugin javaplugin log exception bad location exception badlocationexception exception java plugin javaplugin log exception copy members copymembers collection member visibility adjustor membervisibilityadjustor adjustors map i member imember incoming member visibility adjustment incomingmembervisibilityadjustment adjustments map i compilation unit icompilationunit compilation unit rewrite compilationunitrewrite rewrites refactoring status refactoringstatus status member action info memberactioninfo infos i type itype destinations compilation unit rewrite compilationunitrewrite source rewriter sourcerewriter compilation unit rewrite compilationunitrewrite unit rewriter unitrewriter i progress monitor iprogressmonitor monitor java model exception javamodelexception monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring checking i type itype type type variable map let typevariablemaplet mapping destinations length type destinations mapping type variable util typevariableutil super type to inherited type supertypetoinheritedtype get declaring type getdeclaringtype type unit rewriter unitrewriter get cu getcu equals type get compilation unit getcompilationunit i member imember member member visibility adjustor membervisibilityadjustor adjustor abstract type declaration abstracttypedeclaration declaration ast node search util astnodesearchutil get abstract type declaration node getabstracttypedeclarationnode type unit rewriter unitrewriter get root getroot import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext declaration unit rewriter unitrewriter get import rewrite getimportrewrite offset infos length offset offset member infos offset get member getmember adjustor member visibility adjustor membervisibilityadjustor type member infos offset is new method to be declared abstract isnewmethodtobedeclaredabstract adjustor set incoming setincoming adjustor set rewrite setrewrite source rewriter sourcerewriter getastrewrite source rewriter sourcerewriter get root getroot adjustor set rewrites setrewrites rewrites error bug fixed adjustor set failure severity setfailureseverity refactoring status refactoringstatus warning adjustor set status setstatus status adjustor set adjustments setadjustments adjustments adjustor adjust visibility adjustvisibility sub progress monitor subprogressmonitor monitor adjustments remove member adjustors add adjustor status merge check project compliance checkprojectcompliance get compilation unit rewrite getcompilationunitrewrite rewrites get declaring type getdeclaringtype get compilation unit getcompilationunit type i member imember infos offset get member getmember infos offset is field info isfieldinfo variable declaration fragment variabledeclarationfragment old field oldfield ast node search util astnodesearchutil get field declaration fragment node getfielddeclarationfragmentnode i field ifield infos offset get member getmember source rewriter sourcerewriter get root getroot old field oldfield field declaration fielddeclaration new field newfield create new field declaration node createnewfielddeclarationnode infos offset source rewriter sourcerewriter get root getroot mapping unit rewriter unitrewriter getastrewrite old field oldfield unit rewriter unitrewriter getastrewrite get list rewrite getlistrewrite declaration declaration get body declarations property getbodydeclarationsproperty insert at insertat new field newfield ast nodes astnodes get insertion index getinsertionindex new field newfield declaration body declarations bodydeclarations unit rewriter unitrewriter create categorized group description createcategorizedgroupdescription refactoring core messages refactoringcoremessages hierarchy refactoring hierarchyrefactoring add member push import rewrite util importrewriteutil add imports addimports unit rewriter unitrewriter context old field oldfield get parent getparent hash map hashmap string hash map hashmap string method declaration methoddeclaration old method oldmethod ast node search util astnodesearchutil get method declaration node getmethoddeclarationnode i method imethod infos offset get member getmember source rewriter sourcerewriter get root getroot old method oldmethod method declaration methoddeclaration new method newmethod create new method declaration node createnewmethoddeclarationnode infos offset mapping unit rewriter unitrewriter old method oldmethod unit rewriter unitrewriter getastrewrite get list rewrite getlistrewrite declaration declaration get body declarations property getbodydeclarationsproperty insert at insertat new method newmethod ast nodes astnodes get insertion index getinsertionindex new method newmethod declaration body declarations bodydeclarations unit rewriter unitrewriter create categorized group description createcategorizedgroupdescription refactoring core messages refactoringcoremessages hierarchy refactoring hierarchyrefactoring add member push import rewrite util importrewriteutil add imports addimports unit rewriter unitrewriter context old method oldmethod hash map hashmap string hash map hashmap string monitor override change create change createchange i progress monitor iprogressmonitor core exception coreexception operation canceled exception operationcanceledexception map string string arguments hash map hashmap string project i type itype declaring get declaring type getdeclaringtype i java project ijavaproject java project javaproject declaring get java project getjavaproject java project javaproject project java project javaproject get element name getelementname flags java refactoring descriptor javarefactoringdescriptor jar migration java refactoring descriptor javarefactoringdescriptor jar refactoring refactoring descriptor refactoringdescriptor structural change refactoring descriptor refactoringdescriptor multi change declaring is local islocal declaring is anonymous isanonymous flags java refactoring descriptor javarefactoringdescriptor jar source attachment java model exception javamodelexception exception java plugin javaplugin log exception string description f members to move fmemberstomove length messages format refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring descriptor description multi basic element labels basicelementlabels get java element name getjavaelementname f members to move fmemberstomove get element name getelementname refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring descriptor description string header f members to move fmemberstomove length messages format refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring descriptor description full string java element labels javaelementlabels get element label getelementlabel f members to move fmemberstomove java element labels javaelementlabels fully qualified java element labels javaelementlabels get element label getelementlabel declaring java element labels javaelementlabels fully qualified messages format refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring descriptor description string java element labels javaelementlabels get element label getelementlabel declaring java element labels javaelementlabels fully qualified jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header string settings string f members to move fmemberstomove length settings length settings java element labels javaelementlabels get element label getelementlabel f members to move fmemberstomove java element labels javaelementlabels fully qualified comment add setting addsetting jdt refactoring descriptor comment jdtrefactoringdescriptorcomment create composite setting createcompositesetting refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring pushed members pattern settings add super type settings addsupertypesettings comment push down descriptor pushdowndescriptor descriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create push down descriptor createpushdowndescriptor project description comment as string asstring arguments flags f cached declaring type fcacheddeclaringtype arguments java refactoring descriptor util javarefactoringdescriptorutil attribute input java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f cached declaring type fcacheddeclaringtype f members to move fmemberstomove length arguments java refactoring descriptor util javarefactoringdescriptorutil attribute element java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f members to move fmemberstomove offset offset f member infos fmemberinfos length offset f member infos fmemberinfos offset get member getmember equals f members to move fmemberstomove f member infos fmemberinfos offset get action getaction member action info memberactioninfo push action arguments attribute value of valueof to string tostring member action info memberactioninfo push action arguments attribute push value of valueof to string tostring dynamic validation refactoring change dynamicvalidationrefactoringchange descriptor refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring change f change manager fchangemanager get all changes getallchanges clear caches clearcaches text edit based change manager texteditbasedchangemanager create change manager createchangemanager i progress monitor iprogressmonitor monitor refactoring status refactoringstatus status core exception coreexception is not null isnotnull monitor is not null isnotnull status monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring checking i compilation unit icompilationunit source get declaring type getdeclaringtype get compilation unit getcompilationunit compilation unit rewrite compilationunitrewrite source rewriter sourcerewriter compilation unit rewrite compilationunitrewrite source map i compilation unit icompilationunit compilation unit rewrite compilationunitrewrite rewrites hash map hashmap rewrites source source rewriter sourcerewriter i type itype types get hierarchy of declaring class gethierarchyofdeclaringclass sub progress monitor subprogressmonitor monitor get subclasses getsubclasses get declaring type getdeclaringtype i compilation unit icompilationunit result hash set hashset types length types length i compilation unit icompilationunit types get compilation unit getcompilationunit subclasses bin aries binaries result add result add source map i member imember incoming member visibility adjustment incomingmembervisibilityadjustment adjustments hash map hashmap list member visibility adjustor membervisibilityadjustor adjustors array list arraylist i compilation unit icompilationunit units result to array toarray i compilation unit icompilationunit result size i compilation unit icompilationunit unit compilation unit rewrite compilationunitrewrite rewrite i progress monitor iprogressmonitor sub progress monitor subprogressmonitor monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring checking units length units length unit units rewrite get compilation unit rewrite getcompilationunitrewrite rewrites unit unit equals source rewriter sourcerewriter get cu getcu abstract type declaration abstracttypedeclaration declaration ast node search util astnodesearchutil get abstract type declaration node getabstracttypedeclarationnode get declaring type getdeclaringtype rewrite get root getroot jdt flags jdtflags is abstract isabstract get declaring type getdeclaringtype get abstract declaration infos getabstractdeclarationinfos length modifier rewrite modifierrewrite create rewrite getastrewrite declaration set modifiers setmodifiers modifier declaration get modifiers getmodifiers rewrite create categorized group description createcategorizedgroupdescription refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring push delete declaration nodes deletedeclarationnodes source rewriter sourcerewriter rewrite arrays as list aslist get deletable members getdeletablemembers push member action info memberactioninfo methods get abstract declaration infos getabstractdeclarationinfos offset offset methods length offset declare method abstract declaremethodabstract methods offset source rewriter sourcerewriter rewrite i member imember members get abstract members getabstractmembers get abstract destinations getabstractdestinations sub progress monitor subprogressmonitor monitor i type itype classes i type itype members length offset offset members length offset classes offset i type itype members offset copy members copymembers adjustors adjustments rewrites status get abstract member infos getabstractmemberinfos classes source rewriter sourcerewriter rewrite copy members copymembers adjustors adjustments rewrites status get affected member infos getaffectedmemberinfos get abstract destinations getabstractdestinations sub progress monitor subprogressmonitor monitor source rewriter sourcerewriter rewrite monitor is canceled iscanceled operation canceled exception operationcanceledexception adjustors is empty isempty adjustments is empty isempty member visibility adjustor membervisibilityadjustor adjustor adjustors adjustor rewrite visibility rewritevisibility sub progress monitor subprogressmonitor monitor text edit based change manager texteditbasedchangemanager manager text edit based change manager texteditbasedchangemanager iterator i compilation unit icompilationunit iterator rewrites key set keyset iterator iterator has next hasnext unit iterator rewrite rewrites unit rewrite manager manage unit rewrite create change createchange manager monitor field declaration fielddeclaration create new field declaration node createnewfielddeclarationnode member action info memberactioninfo info compilation unit compilationunit declaring cu node declaringcunode type variable map let typevariablemaplet mapping ast rewrite astrewrite rewrite variable declaration fragment variabledeclarationfragment old field fragment oldfieldfragment java model exception javamodelexception is true istrue info is field info isfieldinfo i field ifield field i field ifield info get member getmember ast ast rewrite getast variable declaration fragment variabledeclarationfragment new fragment newfragment ast new variable declaration fragment newvariabledeclarationfragment copy extra dimensions copyextradimensions old field fragment oldfieldfragment new fragment newfragment expression initializer old field fragment oldfieldfragment get initializer getinitializer initializer expression new initializer newinitializer mapping length new initializer newinitializer create placeholder for expression createplaceholderforexpression initializer field get compilation unit getcompilationunit mapping rewrite new initializer newinitializer create placeholder for expression createplaceholderforexpression initializer field get compilation unit getcompilationunit rewrite new fragment newfragment set initializer setinitializer new initializer newinitializer new fragment newfragment set name setname ast new simple name newsimplename old field fragment oldfieldfragment get name getname get identifier getidentifier field declaration fielddeclaration new field newfield ast new field declaration newfielddeclaration new fragment newfragment field declaration fielddeclaration old field oldfield ast node search util astnodesearchutil get field declaration node getfielddeclarationnode field declaring cu node declaringcunode info copy javadoc to copies in subclasses copyjavadoctocopiesinsubclasses copy javadoc node copyjavadocnode rewrite old field oldfield new field newfield copy annotations copyannotations old field oldfield new field newfield new field newfield modifiers add all addall ast node factory astnodefactory new modifiers newmodifiers ast info get new modifiers for copy in sub class getnewmodifiersforcopyinsubclass old field oldfield get modifiers getmodifiers type old type oldtype old field oldfield get type gettype i compilation unit icompilationunit field get compilation unit getcompilationunit type new type newtype mapping length new type newtype create placeholder for type createplaceholderfortype old type oldtype mapping rewrite new type newtype create placeholder for type createplaceholderfortype old type oldtype rewrite new field newfield set type settype new type newtype new field newfield method declaration methoddeclaration create new method declaration node createnewmethoddeclarationnode member action info memberactioninfo info type variable map let typevariablemaplet mapping compilation unit rewrite compilationunitrewrite rewriter method declaration methoddeclaration old method oldmethod java model exception javamodelexception is true istrue info is field info isfieldinfo i method imethod method i method imethod info get member getmember ast rewrite astrewrite rewrite rewriter getastrewrite ast ast rewrite getast method declaration methoddeclaration new method newmethod ast new method declaration newmethoddeclaration copy body of pushed down method copybodyofpusheddownmethod rewrite method old method oldmethod new method newmethod mapping new method newmethod set constructor setconstructor old method oldmethod is constructor isconstructor copy extra dimensions copyextradimensions old method oldmethod new method newmethod info copy javadoc to copies in subclasses copyjavadoctocopiesinsubclasses copy javadoc node copyjavadocnode rewrite old method oldmethod new method newmethod i java project ijavaproject project rewriter get cu getcu get java project getjavaproject info is new method to be declared abstract isnewmethodtobedeclaredabstract java model util javamodelutil or higher orhigher project java preferences settings javapreferencessettings get code generation settings getcodegenerationsettings project override annotation overrideannotation marker annotation markerannotation annotation ast new marker annotation newmarkerannotation nls annotation set type name settypename ast new simple name newsimplename override new method newmethod modifiers add annotation copy annotations copyannotations old method oldmethod new method newmethod new method newmethod modifiers add all addall ast node factory astnodefactory new modifiers newmodifiers ast info get new modifiers for copy in sub class getnewmodifiersforcopyinsubclass old method oldmethod get modifiers getmodifiers new method newmethod set name setname ast new simple name newsimplename old method oldmethod get name getname get identifier getidentifier copy return type copyreturntype rewrite method get compilation unit getcompilationunit old method oldmethod new method newmethod mapping copy parameters copyparameters rewrite method get compilation unit getcompilationunit old method oldmethod new method newmethod mapping copy thrown exceptions copythrownexceptions old method oldmethod new method newmethod copy type parameters copytypeparameters old method oldmethod new method newmethod new method newmethod declare method abstract declaremethodabstract member action info memberactioninfo info compilation unit rewrite compilationunitrewrite source rewrite sourcerewrite compilation unit rewrite compilationunitrewrite unit rewrite unitrewrite java model exception javamodelexception is true istrue info is field info isfieldinfo i method imethod method i method imethod info get member getmember jdt flags jdtflags is abstract isabstract method method declaration methoddeclaration declaration ast node search util astnodesearchutil get method declaration node getmethoddeclarationnode method source rewrite sourcerewrite get root getroot unit rewrite unitrewrite getastrewrite remove declaration get body getbody source rewrite sourcerewrite get import remove r getimportremover register removed node registerremovednode declaration get body getbody modifier rewrite modifierrewrite create unit rewrite unitrewrite getastrewrite declaration set modifiers setmodifiers info get new modifiers for original getnewmodifiersfororiginal declaration get modifiers getmodifiers member action info memberactioninfo get abstract declaration infos getabstractdeclarationinfos java model exception javamodelexception list member action info memberactioninfo result array list arraylist f member infos fmemberinfos length f member infos fmemberinfos length member action info memberactioninfo info f member infos fmemberinfos info is new method to be declared abstract isnewmethodtobedeclaredabstract result add info result to array toarray member action info memberactioninfo result size i type itype get abstract destinations getabstractdestinations i progress monitor iprogressmonitor monitor java model exception javamodelexception i type itype all direct subclasses alldirectsubclasses get hierarchy of declaring class gethierarchyofdeclaringclass monitor get subclasses getsubclasses get declaring type getdeclaringtype list i type itype result array list arraylist all direct subclasses alldirectsubclasses length all direct subclasses alldirectsubclasses length i type itype subclass all direct subclasses alldirectsubclasses subclass exists subclass is binary isbinary subclass is read only isreadonly subclass get compilation unit getcompilationunit subclass is structure known isstructureknown result add subclass result to array toarray i type itype result size member action info memberactioninfo get abstract member infos getabstractmemberinfos java model exception javamodelexception list member action info memberactioninfo result array list arraylist f member infos fmemberinfos length f member infos fmemberinfos length member action info memberactioninfo info f member infos fmemberinfos info is to be created in subclasses of declaring class istobecreatedinsubclassesofdeclaringclass jdt flags jdtflags is abstract isabstract info get member getmember result add info result to array toarray member action info memberactioninfo result size i member imember get additional required members getadditionalrequiredmembers i progress monitor iprogressmonitor monitor java model exception javamodelexception i member imember members member action info memberactioninfo get members getmembers get infos for members to be created in subclasses of declaring class getinfosformemberstobecreatedinsubclassesofdeclaringclass monitor begin task begintask refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring calculating required members length easy list i member imember queue array list arraylist members length queue add all addall arrays as list aslist members queue is empty isempty i member imember i member imember current current queue add all required push able members addallrequiredpushablemembers queue current sub progress monitor subprogressmonitor monitor queue size current current report additional queue remove all removeall arrays as list aslist members queue to array toarray i member imember queue size i member imember get deletable members getdeletablemembers list i member imember result array list arraylist f member infos fmemberinfos length f member infos fmemberinfos length member action info memberactioninfo info f member infos fmemberinfos info is to be deleted from declaring class istobedeletedfromdeclaringclass result add info get member getmember result to array toarray i member imember result size member action info memberactioninfo get affected member infos getaffectedmemberinfos java model exception javamodelexception list member action info memberactioninfo result array list arraylist f member infos fmemberinfos length f member infos fmemberinfos length member action info memberactioninfo info f member infos fmemberinfos info is to be created in subclasses of declaring class istobecreatedinsubclassesofdeclaringclass jdt flags jdtflags is abstract isabstract info get member getmember result add info result to array toarray member action info memberactioninfo result size override object get elements getelements f members to move fmemberstomove i type hierarchy itypehierarchy get hierarchy of declaring class gethierarchyofdeclaringclass i progress monitor iprogressmonitor monitor java model exception javamodelexception f cached class hierarchy fcachedclasshierarchy f cached class hierarchy fcachedclasshierarchy f cached class hierarchy fcachedclasshierarchy get declaring type getdeclaringtype new type hierarchy newtypehierarchy monitor f cached class hierarchy fcachedclasshierarchy monitor override string get identifier getidentifier identifier member action info memberactioninfo get infos for members to be created in subclasses of declaring class getinfosformemberstobecreatedinsubclassesofdeclaringclass java model exception javamodelexception member action info memberactioninfo abs get abstract member infos getabstractmemberinfos member action info memberactioninfo non abs nonabs get affected member infos getaffectedmemberinfos list member action info memberactioninfo result array list arraylist abs length non abs nonabs length result add all addall arrays as list aslist abs result add all addall arrays as list aslist non abs nonabs result to array toarray member action info memberactioninfo result size member action info memberactioninfo get member action infos getmemberactioninfos f member infos fmemberinfos override string get processor name getprocessorname refactoring core messages refactoringcoremessages push down refactoring pushdownrefactoring refactoring status refactoringstatus initialize java refactoring arguments javarefactoringarguments extended string handle extended get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute input handle i java element ijavaelement element java refactoring descriptor util javarefactoringdescriptorutil handle to element handletoelement extended get project getproject handle element element exists element get element type getelementtype i java element ijavaelement type java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get processor name getprocessorname i java refactorings ijavarefactorings push f cached declaring type fcacheddeclaringtype i type itype element count list i java element ijavaelement elements array list arraylist list member action info memberactioninfo infos array list arraylist string attribute java refactoring descriptor util javarefactoringdescriptorutil attribute element count refactoring status refactoringstatus status refactoring status refactoringstatus handle extended get attribute getattribute attribute i java element ijavaelement element java refactoring descriptor util javarefactoringdescriptorutil handle to element handletoelement extended get project getproject handle element element exists status merge java refactoring descriptor util javarefactoringdescriptorutil create input warning status createinputwarningstatus element get processor name getprocessorname i java refactorings ijavarefactorings push elements add element extended get attribute getattribute attribute count infos add member action info memberactioninfo create i member imember element member action info memberactioninfo push action extended get attribute getattribute attribute push count infos add member action info memberactioninfo create i member imember element member action info memberactioninfo push action infos add member action info memberactioninfo create i member imember element member action info memberactioninfo action count attribute java refactoring descriptor util javarefactoringdescriptorutil attribute element count f members to move fmemberstomove elements to array toarray i member imember elements size f member infos fmemberinfos infos to array toarray member action info memberactioninfo infos size status isok status refactoring status refactoringstatus override is applicable isapplicable core exception coreexception refactoring availability tester refactoringavailabilitytester is push down available ispushdownavailable f members to move fmemberstomove override rewrite type occurrences rewritetypeoccurrences text edit based change manager texteditbasedchangemanager manager ast requestor astrequestor requestor compilation unit rewrite compilationunitrewrite rewrite i compilation unit icompilationunit unit compilation unit compilationunit node string replace ments replacements i progress monitor iprogressmonitor monitor core exception coreexception needed