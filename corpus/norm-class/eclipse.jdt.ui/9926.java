copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation nikolay metchev nikolaymetchev gmail extract local extract local variable replacing multiple occurrences statement https bugs eclipse org org eclipse jdt tests refactoring java util hashtable org eclipse core runtime null progress monitor nullprogressmonitor org eclipse jface preference i preference store ipreferencestore org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i source range isourcerange org eclipse jdt core java core javacore org eclipse jdt core formatter default code formatter constants defaultcodeformatterconstants org eclipse jdt internal corext refactoring base refactoring status codes refactoringstatuscodes org eclipse jdt internal corext refactoring code extract constant refactoring extractconstantrefactoring org eclipse jdt preference constants preferenceconstants org eclipse jdt tests refactoring infra text range util textrangeutil org eclipse jdt internal java plugin javaplugin junit framework test junit framework test suite testsuite extract constant tests extractconstanttests refactoring test refactoringtest extract constant tests extractconstanttests clazz extract constant tests extractconstanttests string refactoring path extract constant extractconstant bug import rewrite importrewrite xxx compiler bad syntax error insert identifier or new identifierornew missing semicolon bug string f comp act pref fcompactpref f add comments faddcomments extract constant tests extractconstanttests string override string get refactoring path getrefactoringpath refactoring path test suite refactoring test setup refactoringtestsetup test suite testsuite clazz test set up test setuptest test test refactoring test setup refactoringtestsetup test string get simple test file name getsimpletestfilename can inline caninline input string file name filename get name getname can inline caninline file name filename input file name filename java string get test file name gettestfilename can extract canextract input string file name filename test path prefix get refactoring path getrefactoringpath file name filename can extract canextract can extract canextract cannot extract cannotextract file name filename get simple test file name getsimpletestfilename can extract canextract input i compilation unit icompilationunit create ufrom test file createcufromtestfile i package fragment ipackagefragment pack can extract canextract input exception createcu pack get simple test file name getsimpletestfilename can extract canextract input get file contents getfilecontents get test file name gettestfilename can extract canextract input override set up setup exception set up setup hashtable string string options java core javacore get options getoptions string setting default code formatter constants defaultcodeformatterconstants formatter insert space assignment f comp act pref fcompactpref options setting options setting default code formatter constants defaultcodeformatterconstants java core javacore set options setoptions options i preference store ipreferencestore store java plugin javaplugin get default getdefault get preference store getpreferencestore f add comments faddcomments store get boolean getboolean preference constants preferenceconstants codegen add comments store set value setvalue preference constants preferenceconstants codegen add comments override tear down teardown exception tear down teardown hashtable string string options java core javacore get options getoptions options default code formatter constants defaultcodeformatterconstants formatter insert space assignment f comp act pref fcompactpref java core javacore set options setoptions options i preference store ipreferencestore store java plugin javaplugin get default getdefault get preference store getpreferencestore store set value setvalue preference constants preferenceconstants codegen add comments f add comments faddcomments guess helper guesshelper start line startline start column startcolumn end line endline end column endcolumn string expected guessed name expectedguessedname exception i compilation unit icompilationunit createcu get package p getpackagep get name getname java get file contents getfilecontents test path prefix get refactoring path getrefactoringpath name guessing nameguessing get name getname java i source range isourcerange selection text range util textrangeutil get selection getselection start line startline start column startcolumn end line endline end column endcolumn extract constant refactoring extractconstantrefactoring extract constant refactoring extractconstantrefactoring selection get offset getoffset selection get length getlength refactoring status refactoringstatus precondition result preconditionresult check initial conditions checkinitialconditions null progress monitor nullprogressmonitor assert true asserttrue activation supposed successful precondition result preconditionresult to string tostring precondition result preconditionresult isok assert equals assertequals constant guessed expected guessed name expectedguessedname guess constant name guessconstantname helper start line startline start column startcolumn end line endline end column endcolumn replace all replaceall allow loadtime allowloadtime qualify references with constant name qualifyreferenceswithconstantname string constant name constantname string guessed constant name guessedconstantname exception i compilation unit icompilationunit create ufrom test file createcufromtestfile get package p getpackagep i source range isourcerange selection text range util textrangeutil get selection getselection start line startline start column startcolumn end line endline end column endcolumn extract constant refactoring extractconstantrefactoring extract constant refactoring extractconstantrefactoring selection get offset getoffset selection get length getlength refactoring status refactoringstatus precondition result preconditionresult check initial conditions checkinitialconditions null progress monitor nullprogressmonitor assert true asserttrue activation supposed successful precondition result preconditionresult to string tostring precondition result preconditionresult isok allow loadtime allowloadtime assert true asserttrue selected expression err one ously erroneously reported references fields selection all static final selectionallstaticfinal set replace all occurrences setreplacealloccurrences replace all replaceall set qualify references with declaring class name setqualifyreferenceswithdeclaringclassname qualify references with constant name qualifyreferenceswithconstantname set constant name setconstantname constant name constantname assert equals assertequals constant incorrectly guessed guessed constant name guessedconstantname guess constant name guessconstantname refactoring status refactoringstatus check input result checkinputresult check final conditions checkfinalconditions null progress monitor nullprogressmonitor assert true asserttrue precondition supposed pass check input result checkinputresult isok perform change performchange i package fragment ipackagefragment pack i package fragment ipackagefragment get parent getparent string new cu name newcuname get simple test file name getsimpletestfilename i compilation unit icompilationunit new cu newcu pack get compilation unit getcompilationunit new cu name newcuname assert true asserttrue new cu name newcuname exist new cu newcu exists assert equal lines assertequallines get file contents getfilecontents get test file name gettestfilename new cu newcu get source getsource helper start line startline start column startcolumn end line endline end column endcolumn replace all replaceall allow loadtime allowloadtime string constant name constantname string guessed constant name guessedconstantname exception helper start line startline start column startcolumn end line endline end column endcolumn replace all replaceall allow loadtime allowloadtime constant name constantname guessed constant name guessedconstantname fail helper failhelper start line startline start column startcolumn end line endline end column endcolumn replace all replaceall allow loadtime allowloadtime string constant name constantname exception fail helper failhelper start line startline start column startcolumn end line endline end column endcolumn replace all replaceall allow loadtime allowloadtime constant name constantname fail helper failhelper start line startline start column startcolumn end line endline end column endcolumn replace all replaceall allow loadtime allowloadtime string constant name constantname error code errorcode check code checkcode exception i compilation unit icompilationunit create ufrom test file createcufromtestfile get package p getpackagep i source range isourcerange selection text range util textrangeutil get selection getselection start line startline start column startcolumn end line endline end column endcolumn extract constant refactoring extractconstantrefactoring extract constant refactoring extractconstantrefactoring selection get offset getoffset selection get length getlength set replace all occurrences setreplacealloccurrences replace all replaceall set constant name setconstantname constant name constantname refactoring status refactoringstatus result perform refactoring performrefactoring allow loadtime allowloadtime selection all static final selectionallstaticfinal assert not null assertnotnull precondition supposed fail result check code checkcode assert equals assertequals error code errorcode result get entry matching severity getentrymatchingseverity refactoring status refactoringstatus error get code getcode tests test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant test exception helper constant fred test exception helper constant red test exception helper constant fred test exception helper constant test exception helper constant string test exception helper constant string test exception helper constant string test exception helper items array list test exception helper color red test exception bug import rewrite importrewrite print test disabled message printtestdisabledmessage bug import rewrite importrewrite helper num enum test exception helper jean pierre test exception helper test exception helper foo foo test exception helper foo foo test exception helper number number test exception helper integer integer bug test bug exception helper list list bug test bug exception helper string string bug test bug exception helper string string syntax error test syntax error exception bug helper string string bug test bug exception helper bug bug bug test bug exception helper bug bug bug test bug exception helper bug test bug exception helper bug test bug exception helper constant bug test bug exception helper constant bug test bug exception helper constant bug test bug exception helper constant bug test bug exception helper constant bug test bug exception helper constant bug test bug exception helper constant bug test bug exception helper constant test zero length selection testzerolengthselection exception helper constant testing failing preconditions test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant refactoring status codes refactoringstatuscodes expression rvalue test fail testfail exception fail helper failhelper constant refactoring status codes refactoringstatuscodes expression rvalue test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper constant test fail testfail exception fail helper failhelper color test guess string literal testguessstringliteral exception test bug guess helper guesshelper foo hash map test guess string literal testguessstringliteral exception test bug guess helper guesshelper foo hash map test guess string literal testguessstringliteral exception test bug guess helper guesshelper hans glueck bla bla test guess string literal testguessstringliteral exception guess helper guesshelper assume camel test guess from getter name testguessfromgettername exception guess helper guesshelper foo bar test guess from getter name testguessfromgettername exception guess helper guesshelper foo bar