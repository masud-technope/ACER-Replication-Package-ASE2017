copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring code java util array list arraylist java util hash map hashmap java util list java util map org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i file ifile org eclipse core resources i resource iresource org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits multi text edit multitextedit org eclipse text edits text edit textedit org eclipse text edits text edit group texteditgroup org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text i document idocument org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring participants resource change checker resourcechangechecker org eclipse jdt core flags org eclipse jdt core i class file iclassfile org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i method imethod org eclipse jdt core i type itype org eclipse jdt core i type hierarchy itypehierarchy org eclipse jdt core i type root ityperoot org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom expression statement expressionstatement org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom modifier org eclipse jdt core dom node finder nodefinder org eclipse jdt core dom simple name simplename org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt core refactoring descriptors java refactoring descriptor javarefactoringdescriptor org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring arguments javarefactoringarguments org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring base references in binary context referencesinbinarycontext org eclipse jdt internal corext refactoring binary stub creator stubcreator org eclipse jdt internal corext refactoring dynamic validation refactoring change dynamicvalidationrefactoringchange org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal corext refactoring util text change manager textchangemanager org eclipse jdt internal corext util messages org eclipse jdt java element labels javaelementlabels org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor ast provider astprovider org eclipse jdt internal viewsupport basic element labels basicelementlabels org eclipse jdt internal viewsupport binding label provider bindinglabelprovider replace invocations refactoring replaceinvocationsrefactoring refactoring nls string replace invocations org eclipse jdt replace invocations nls string attribute mode mode mode mode mode replace mode mode replace single mode i type root ityperoot f selection type root fselectiontyperoot initial mode replace single f selection start fselectionstart initial mode replace single f selection length fselectionlength ast node astnode f selection node fselectionnode check initial conditions checkinitialconditions i method imethod f method fmethod string f body fbody string f parameter names fparameternames resolved check initial conditions checkinitialconditions source provider sourceprovider f source provider fsourceprovider f lexible flexible target provider targetprovider f target provider ftargetprovider text change manager textchangemanager f change manager fchangemanager i method binding imethodbinding f method binding fmethodbinding replace invocations refactoring replaceinvocationsrefactoring i type root ityperoot type root typeroot offset length f selection type root fselectiontyperoot type root typeroot f selection start fselectionstart offset f selection length fselectionlength length replace invocations refactoring replaceinvocationsrefactoring i method imethod method f method fmethod method f selection type root fselectiontyperoot method get type root gettyperoot f selection start fselectionstart f selection length fselectionlength replace invocations refactoring replaceinvocationsrefactoring java refactoring arguments javarefactoringarguments arguments refactoring status refactoringstatus status refactoring status refactoringstatus initialize status initializestatus initialize arguments status merge initialize status initializestatus override string get name getname refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring called link check initial conditions checkinitialconditions i progress monitor iprogressmonitor can replace single canreplacesingle f selection node fselectionnode method invocation methodinvocation called link check initial conditions checkinitialconditions i progress monitor iprogressmonitor refactoring status refactoringstatus set current mode setcurrentmode mode mode java model exception javamodelexception f target provider ftargetprovider is single issingle mode mode replace single refactoring status refactoringstatus is true istrue can replace single canreplacesingle mode mode replace single f target provider ftargetprovider target provider targetprovider create i compilation unit icompilationunit f selection type root fselectiontyperoot method invocation methodinvocation f selection node fselectionnode f target provider ftargetprovider target provider targetprovider create f source provider fsourceprovider get declaration getdeclaration f target provider ftargetprovider check activation checkactivation set body setbody string body string parameter names parameternames todo validate parameter count body f body fbody body f parameter names fparameternames parameter names parameternames override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception target provider targetprovider untampered ast original invocation node source provider sourceprovider tweaked ast method body parameter names replaced refactoring status refactoringstatus result refactoring status refactoringstatus f method fmethod f selection type root fselectiontyperoot i compilation unit icompilationunit refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring replace binary i compilation unit icompilationunit i compilation unit icompilationunit f selection type root fselectiontyperoot compilation unit compilationunit root refactoringastparser ast provider astprovider shared ast level parse f selection node fselectionnode get target node gettargetnode root f selection start fselectionstart f selection length fselectionlength f selection node fselectionnode refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring select method apply f selection node fselectionnode get node type getnodetype ast node astnode method declaration method declaration methoddeclaration method declaration methoddeclaration method declaration methoddeclaration f selection node fselectionnode f target provider ftargetprovider target provider targetprovider create method declaration methoddeclaration f method binding fmethodbinding method declaration methoddeclaration resolve binding resolvebinding method invocation methodinvocation method invocation methodinvocation method invocation methodinvocation f selection node fselectionnode f target provider ftargetprovider target provider targetprovider create method invocation methodinvocation f method binding fmethodbinding method invocation methodinvocation resolve method binding resolvemethodbinding f method binding fmethodbinding refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring error no method declaration nomethoddeclaration f method fmethod i method imethod f method binding fmethodbinding get java element getjavaelement ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level parser set project setproject f method fmethod get java project getjavaproject i binding ibinding bindings parser create bindings createbindings i java element ijavaelement f method fmethod f method binding fmethodbinding i method binding imethodbinding bindings f method binding fmethodbinding refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring error no method declaration nomethoddeclaration f target provider ftargetprovider target provider targetprovider create f method binding fmethodbinding result merge f target provider ftargetprovider check activation checkactivation result source provider sourceprovider resolve source provider resolvesourceprovider i method binding imethodbinding method binding methodbinding refactoring status refactoringstatus status java model exception javamodelexception i method imethod method i method imethod method binding methodbinding get java element getjavaelement i type root ityperoot type root typeroot i document idocument source compilation unit compilationunit method declaration ast root methoddeclarationastroot i compilation unit icompilationunit method cu methodcu method get compilation unit getcompilationunit method cu methodcu type root typeroot method cu methodcu ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level parser set source setsource method cu methodcu parser set focal position setfocalposition method get name range getnamerange get offset getoffset compilation unit compilationunit compilation unit compilationunit compilation unit compilationunit parser createast method declaration methoddeclaration method decl methoddecl method declaration methoddeclaration node finder nodefinder perform compilation unit compilationunit method get name range getnamerange get parent getparent ast ast compilation unit compilationunit getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast block new body newbody ast new block newblock new body newbody statements add rewrite create string placeholder createstringplaceholder f body fbody ast node astnode empty statement rewrite replace method decl methoddecl get body getbody new body newbody list single variable declaration singlevariabledeclaration parameters method decl methoddecl parameters parameters size single variable declaration singlevariabledeclaration parameter parameters rewrite parameter get name getname simple name simplename identifier property f parameter names fparameternames text edit textedit text edit textedit rewrite rewriteast document document document method cu methodcu get buffer getbuffer get contents getcontents text edit textedit apply document malformed tree exception malformedtreeexception java plugin javaplugin log bad location exception badlocationexception java plugin javaplugin log source document method declaration ast root methoddeclarationastroot refactoringastparser ast provider astprovider shared ast level parse source method cu methodcu i class file iclassfile class file classfile method get class file getclassfile todo source stub creator stubcreator stub creator stubcreator stub creator stubcreator override append method body appendmethodbody i method imethod current method currentmethod java model exception javamodelexception current method currentmethod equals method f buffer fbuffer append f body fbody append method body appendmethodbody current method currentmethod org eclipse jdt internal corext refactoring binary stub creator stubcreator append method parameter name appendmethodparametername org eclipse jdt core i method imethod override append method parameter name appendmethodparametername i method imethod current method currentmethod current method currentmethod equals method f buffer fbuffer append f parameter names fparameternames append method parameter name appendmethodparametername current method currentmethod string stub stub creator stubcreator create stub createstub class file classfile get type gettype source document stub method declaration ast root methoddeclarationastroot refactoringastparser ast provider astprovider shared ast level parse stub class file classfile type root typeroot class file classfile ast node astnode node method declaration ast root methoddeclarationastroot find declaring node finddeclaringnode method binding methodbinding get key getkey node method declaration methoddeclaration source provider sourceprovider type root typeroot source method declaration methoddeclaration node status add fatal error addfatalerror refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring find method declaration invocation declaration node ast node astnode get target node gettargetnode i compilation unit icompilationunit unit compilation unit compilationunit root offset length ast node astnode node node check node checknode node finder nodefinder perform root offset length unit java model exception javamodelexception node node check node checknode node finder nodefinder perform root offset length ast node astnode check node checknode ast node astnode node node node get node type getnodetype ast node astnode simple node node get parent getparent node get node type getnodetype ast node astnode expression statement node expression statement expressionstatement node get expression getexpression node get node type getnodetype ast node astnode method declaration ast node astnode method invocation ast node astnode constructor invocation node override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception nls begin task begintask f change manager fchangemanager text change manager textchangemanager refactoring status refactoringstatus result refactoring status refactoringstatus f source provider fsourceprovider resolve source provider resolvesourceprovider f method binding fmethodbinding result result has fatal error hasfatalerror result result merge f source provider fsourceprovider check activation checkactivation result has fatal error hasfatalerror result f source provider fsourceprovider initialize f target provider ftargetprovider initialize set task name settaskname refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring searching refactoring status refactoringstatus search status searchstatus refactoring status refactoringstatus string binary refs description binaryrefsdescription messages format refactoring core messages refactoringcoremessages references in binary context referencesinbinarycontext bin aries binaries description basic element labels basicelementlabels get java element name getjavaelementname f source provider fsourceprovider get method name getmethodname references in binary context referencesinbinarycontext binary refs binaryrefs references in binary context referencesinbinarycontext binary refs description binaryrefsdescription i compilation unit icompilationunit units f target provider ftargetprovider get affected compilation units getaffectedcompilationunits search status searchstatus binary refs binaryrefs sub progress monitor subprogressmonitor binary refs binaryrefs add error if necessary adderrorifnecessary search status searchstatus search status searchstatus has fatal error hasfatalerror result merge search status searchstatus result i file ifile files to be modified filestobemodified get files to be modified getfilestobemodified units result merge checks validate modifies files validatemodifiesfiles files to be modified filestobemodified get validation context getvalidationcontext result has fatal error hasfatalerror result result merge resource change checker resourcechangechecker check files to be changed checkfilestobechanged files to be modified filestobemodified sub progress monitor subprogressmonitor check overridden checkoverridden result sub progress monitor subprogressmonitor i progress monitor iprogressmonitor sub progress monitor subprogressmonitor nls begin task begintask units length units length i compilation unit icompilationunit unit units sub task subtask messages format refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring processing basic element labels basicelementlabels get file name getfilename unit call inline r callinliner inliner multi text edit multitextedit root multi text edit multitextedit compilation unit change compilationunitchange change compilation unit change compilationunitchange f change manager fchangemanager unit change set edit setedit root body declaration bodydeclaration bodies f target provider ftargetprovider get affected body declarations getaffectedbodydeclarations unit sub progress monitor subprogressmonitor bodies length inliner call inline r callinliner unit compilation unit compilationunit bodies get root getroot f source provider fsourceprovider bodies length body declaration bodydeclaration body bodies inliner initialize body refactoring status refactoringstatus nested invocations nestedinvocations refactoring status refactoringstatus ast node astnode invocations remove nested calls removenestedcalls nested invocations nestedinvocations unit f target provider ftargetprovider get invocations getinvocations body sub progress monitor subprogressmonitor invocations length ast node astnode invocation invocations result merge inliner initialize invocation f target provider ftargetprovider get status severity getstatusseverity result has fatal error hasfatalerror result get severity getseverity f target provider ftargetprovider get status severity getstatusseverity text edit group texteditgroup group text edit group texteditgroup refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring edit inline change add text edit group addtexteditgroup group result merge inliner perform group inlined method calls generate modifications result merge nested invocations nestedinvocations f change manager fchangemanager remove unit root add child addchild inliner get modifications getmodifications import rewrite importrewrite rewrite inliner get import edit getimportedit rewrite has recorded changes hasrecordedchanges text edit textedit edit rewrite rewrite imports rewriteimports edit multi text edit multitextedit multi text edit multitextedit edit get children size getchildrensize root add child addchild edit change add text edit group addtexteditgroup text edit group texteditgroup refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring edit text edit textedit edit inliner inliner dispose worked is canceled iscanceled operation canceled exception operationcanceledexception result merge search status searchstatus result override change create change createchange i progress monitor iprogressmonitor core exception coreexception todo update f selection start fselectionstart map string string arguments hash map hashmap string project i java project ijavaproject java project javaproject f selection type root fselectiontyperoot get java project getjavaproject java project javaproject project java project javaproject get element name getelementname i method binding imethodbinding binding f source provider fsourceprovider get declaration getdeclaration resolve binding resolvebinding flags refactoring descriptor refactoringdescriptor structural change java refactoring descriptor javarefactoringdescriptor jar refactoring java refactoring descriptor javarefactoringdescriptor jar source attachment modifier is private isprivate binding get modifiers getmodifiers flags refactoring descriptor refactoringdescriptor multi change string description messages format refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring descriptor description basic element labels basicelementlabels get java element name getjavaelementname binding get name getname string header messages format refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring descriptor description string binding label provider bindinglabelprovider get binding label getbindinglabel binding java element labels javaelementlabels fully qualified binding label provider bindinglabelprovider get binding label getbindinglabel binding get declaring class getdeclaringclass java element labels javaelementlabels fully qualified jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header comment add setting addsetting messages format refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring original pattern binding label provider bindinglabelprovider get binding label getbindinglabel binding java element labels javaelementlabels fully qualified f target provider ftargetprovider is single issingle comment add setting addsetting refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring replace references review unregistered java refactoring descriptor javarefactoringdescriptor descriptor java refactoring descriptor javarefactoringdescriptor replace invocations project description comment as string asstring arguments flags arguments java refactoring descriptor util javarefactoringdescriptorutil attribute input java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f selection type root fselectiontyperoot nls arguments java refactoring descriptor util javarefactoringdescriptorutil attribute selection integer f selection start fselectionstart to string tostring integer f selection length fselectionlength to string tostring arguments attribute mode integer f target provider ftargetprovider is single issingle to string tostring dynamic validation refactoring change dynamicvalidationrefactoringchange descriptor refactoring core messages refactoringcoremessages replace invocations refactoring replaceinvocationsrefactoring change f change manager fchangemanager get all changes getallchanges i file ifile get files to be modified getfilestobemodified i compilation unit icompilationunit units list i file ifile result array list arraylist units length i file ifile file units length file get file getfile units file result add file result to array toarray i file ifile result size i file ifile get file getfile i compilation unit icompilationunit unit unit unit get primary getprimary i resource iresource resource unit get resource getresource resource resource get type gettype i resource iresource file i file ifile resource check overridden checkoverridden refactoring status refactoringstatus status i progress monitor iprogressmonitor java model exception javamodelexception nls begin task begintask set task name settaskname refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring checking overridden method declaration methoddeclaration decl f source provider fsourceprovider get declaration getdeclaration i method imethod method i method imethod decl resolve binding resolvebinding get java element getjavaelement method flags is private isprivate method get flags getflags worked i type itype type method get declaring type getdeclaringtype i type hierarchy itypehierarchy hierarchy type new type hierarchy newtypehierarchy sub progress monitor subprogressmonitor check sub types checksubtypes status method hierarchy get all subtypes getallsubtypes type sub progress monitor subprogressmonitor check super classes checksuperclasses status method hierarchy get all super classes getallsuperclasses type sub progress monitor subprogressmonitor check super interfaces checksuperinterfaces status method hierarchy get all super interfaces getallsuperinterfaces type sub progress monitor subprogressmonitor nls set task name settaskname check sub types checksubtypes refactoring status refactoringstatus result i method imethod method i type itype types i progress monitor iprogressmonitor check types checktypes result method types refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring checking overridden error check super classes checksuperclasses refactoring status refactoringstatus result i method imethod method i type itype types i progress monitor iprogressmonitor check types checktypes result method types refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring checking overrides error check super interfaces checksuperinterfaces refactoring status refactoringstatus result i method imethod method i type itype types i progress monitor iprogressmonitor check types checktypes result method types refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring checking error check types checktypes refactoring status refactoringstatus result i method imethod method i type itype types string key i progress monitor iprogressmonitor nls begin task begintask types length types length worked i method imethod overridden types find methods findmethods method overridden overridden length result add error adderror messages format key basic element labels basicelementlabels get java element name getjavaelementname types get element name getelementname java status context javastatuscontext create overridden ast node astnode remove nested calls removenestedcalls refactoring status refactoringstatus status i compilation unit icompilationunit unit ast node astnode invocations invocations length invocations ast node astnode parents ast node astnode invocations length invocations length parents invocations get parent getparent invocations length remove nested calls removenestedcalls status unit parents invocations list ast node astnode result array list arraylist invocations length invocations result add invocations result to array toarray ast node astnode result size remove nested calls removenestedcalls refactoring status refactoringstatus status i compilation unit icompilationunit unit ast node astnode parents ast node astnode invocations ast node astnode invocation invocations parents length ast node astnode parent parents parent parent invocation status add error adderror refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring nested invocation nestedinvocation java status context javastatuscontext create unit parent invocations parent parent get parent getparent refactoring status refactoringstatus initialize java refactoring arguments javarefactoringarguments arguments string arguments get attribute getattribute attribute mode nls equals mode mode integer parse int parseint number format exception numberformatexception exception refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute mode set current mode setcurrentmode mode mode replace mode replace single java model exception javamodelexception exception refactoring status refactoringstatus create fatal error status createfatalerrorstatus exception get local ized message getlocalizedmessage refactoring status refactoringstatus i method imethod get method getmethod f method fmethod