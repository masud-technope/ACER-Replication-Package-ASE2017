copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal working sets workingsets java util array list arraylist java util arrays java util collections java util hash map hashmap java util identity hash map identityhashmap java util iterator java util list java util map org eclipse core runtime org eclipse core runtime i adaptable iadaptable org eclipse core runtime listener list listenerlist org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse jface util i property change listener ipropertychangelistener org eclipse jface util property change event propertychangeevent org eclipse jface viewers i element compare r ielementcomparer org eclipse i local working set manager ilocalworkingsetmanager org eclipse i memento imemento org eclipse i working set iworkingset org eclipse i working set manager iworkingsetmanager org eclipse i working set updater iworkingsetupdater org eclipse platformui org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject working set model workingsetmodel nls string change working model content working set model changed workingsetmodelchanged i element compare r ielementcomparer compare r comparer working set comp arar workingsetcomparar nls string tag local working manager local working set manager localworkingsetmanager key working sets nls string tag working sets all working sets allworkingsets nls string tag active working active working set activeworkingset nls string tag working working set name workingsetname nls string tag configured configured key sort working sets nls string tag sort working sets sort working sets sortworkingsets i local working set manager ilocalworkingsetmanager f local working set manager flocalworkingsetmanager list i working set iworkingset f active working sets factiveworkingsets listener list listenerlist i property change listener ipropertychangelistener f listeners flisteners i property change listener ipropertychangelistener f working set manager listener fworkingsetmanagerlistener others working set updater othersworkingsetupdater f others working set updater fothersworkingsetupdater element mapper elementmapper f element mapper felementmapper element mapper elementmapper f configured fconfigured sorted working sets f is sorting enabled fissortingenabled list working sets list i working set iworkingset f all working sets fallworkingsets working set comp arar workingsetcomparar i element compare r ielementcomparer override equals object object i working set iworkingset i working set iworkingset i working set iworkingset i working set iworkingset i working set iworkingset i working set iworkingset equals override hash code hashcode object element element i working set iworkingset system identity hash code identityhashcode element element hash code hashcode element mapper elementmapper map i adaptable iadaptable object f element to working set felementtoworkingset hash map hashmap map i working set iworkingset i adaptable iadaptable f working set to element fworkingsettoelement identity hash map identityhashmap map i adaptable iadaptable object f resource to working set fresourcetoworkingset hash map hashmap list i adaptable iadaptable f non project top level elements fnonprojecttoplevelelements array list arraylist clear f element to working set felementtoworkingset clear f working set to element fworkingsettoelement clear f resource to working set fresourcetoworkingset clear f non project top level elements fnonprojecttoplevelelements clear rebuild i working set iworkingset working sets workingsets clear working sets workingsets length working sets workingsets i adaptable iadaptable refresh i working set iworkingset i adaptable iadaptable old elements oldelements f working set to element fworkingsettoelement old elements oldelements i adaptable iadaptable new elements newelements get elements getelements list i adaptable iadaptable to remove toremove array list arraylist arrays as list aslist old elements oldelements list i adaptable iadaptable to add toadd array list arraylist arrays as list aslist new elements newelements compute delta computedelta to remove toremove to add toadd old elements oldelements new elements newelements iterator i adaptable iadaptable iter to add toadd iterator iter has next hasnext add element addelement iter iterator i adaptable iadaptable iter to remove toremove iterator iter has next hasnext remove element removeelement iter to remove toremove size to add toadd size f working set to element fworkingsettoelement new elements newelements old elements oldelements compute delta computedelta list i adaptable iadaptable to remove toremove list i adaptable iadaptable to add toadd i adaptable iadaptable old elements oldelements i adaptable iadaptable new elements newelements old elements oldelements length to add toadd remove old elements oldelements new elements newelements length to remove toremove remove new elements newelements i working set iworkingset get first working set getfirstworkingset object element i working set iworkingset get first element getfirstelement f element to working set felementtoworkingset element list i working set iworkingset get all working sets getallworkingsets object element list i working set iworkingset all elements allelements get all elements getallelements f element to working set felementtoworkingset element all elements allelements is empty isempty element i java element ijavaelement time working manually updated bug all elements allelements get all elements getallelements f element to working set felementtoworkingset i java element ijavaelement element get resource getresource all elements allelements list i working set iworkingset get all working sets for resource getallworkingsetsforresource i resource iresource resource get all elements getallelements f resource to working set fresourcetoworkingset resource list i adaptable iadaptable get non project top level elements getnonprojecttoplevelelements f non project top level elements fnonprojecttoplevelelements i working set iworkingset f working set to element fworkingsettoelement contains key containskey i adaptable iadaptable elements get elements getelements f working set to element fworkingsettoelement elements elements length i adaptable iadaptable element elements add element addelement element element i project iproject element i java project ijavaproject f non project top level elements fnonprojecttoplevelelements add element add element addelement i adaptable iadaptable element i working set iworkingset add to map addtomap f element to working set felementtoworkingset element i resource iresource resource element get adapter getadapter i resource iresource resource add to map addtomap f resource to working set fresourcetoworkingset resource remove element removeelement i adaptable iadaptable element i working set iworkingset remove from map removefrommap f element to working set felementtoworkingset element i resource iresource resource element get adapter getadapter i resource iresource resource remove from map removefrommap f resource to working set fresourcetoworkingset resource add to map addtomap map i adaptable iadaptable object map i adaptable iadaptable key i working set iworkingset object obj map key obj map key obj i working set iworkingset list i working set iworkingset array list arraylist add i working set iworkingset obj add map key obj list suppress warnings suppresswarnings unchecked list i working set iworkingset sets list i working set iworkingset obj sets add remove from map removefrommap map i adaptable iadaptable object map i adaptable iadaptable key i working set iworkingset object current map key current current list suppress warnings suppresswarnings unchecked list i working set iworkingset sets list i working set iworkingset current sets remove sets size map remove key map key sets current map remove key object get first element getfirstelement map i adaptable iadaptable object map object key object obj map key obj list suppress warnings suppresswarnings unchecked list i working set iworkingset sets list i working set iworkingset obj sets obj list i working set iworkingset get all elements getallelements map i adaptable iadaptable object map object key object obj map key obj list suppress warnings suppresswarnings unchecked list i working set iworkingset sets list i working set iworkingset obj sets obj collections empty list emptylist list i working set iworkingset result array list arraylist result add i working set iworkingset obj result param memento memento code code working set model workingsetmodel i memento imemento memento f local working set manager flocalworkingsetmanager platformui get workbench getworkbench create local working set manager createlocalworkingsetmanager add listeners to working set managers addlistenerstoworkingsetmanagers f active working sets factiveworkingsets array list arraylist f all working sets fallworkingsets array list arraylist memento restore state restorestate memento i working set iworkingset f local working set manager flocalworkingsetmanager create working set createworkingset working set messages workingsetmessages working set model workingsetmodel i adaptable iadaptable set id setid i working set ds iworkingsetids f local working set manager flocalworkingsetmanager add working set addworkingset f active working sets factiveworkingsets add f all working sets fallworkingsets add is not null isnotnull f others working set updater fothersworkingsetupdater f element mapper felementmapper rebuild get active working sets getactiveworkingsets f others working set updater fothersworkingsetupdater update elements updateelements add listeners to working set managers addlistenerstoworkingsetmanagers f listeners flisteners listener list listenerlist listener list listenerlist identity f working set manager listener fworkingsetmanagerlistener i property change listener ipropertychangelistener override property change propertychange property change event propertychangeevent event working set manager changed workingsetmanagerchanged event platformui get workbench getworkbench get working set manager getworkingsetmanager add property change listener addpropertychangelistener f working set manager listener fworkingsetmanagerlistener f local working set manager flocalworkingsetmanager add property change listener addpropertychangelistener f working set manager listener fworkingsetmanagerlistener dispose f working set manager listener fworkingsetmanagerlistener platformui get workbench getworkbench get working set manager getworkingsetmanager remove property change listener removepropertychangelistener f working set manager listener fworkingsetmanagerlistener f local working set manager flocalworkingsetmanager remove property change listener removepropertychangelistener f working set manager listener fworkingsetmanagerlistener f local working set manager flocalworkingsetmanager dispose f working set manager listener fworkingsetmanagerlistener model relation ships relationships i adaptable iadaptable get children getchildren i working set iworkingset working set workingset working set workingset get elements getelements object get parent getparent object element element i working set iworkingset f active working sets factiveworkingsets element f element mapper felementmapper get first working set getfirstworkingset element object get all parents getallparents object element element i working set iworkingset f active working sets factiveworkingsets element object f element mapper felementmapper get all working sets getallworkingsets element to array toarray object add working sets addworkingsets object elements list i working set iworkingset result elements length object element elements list i working set iworkingset sets element i resource iresource sets f element mapper felementmapper get all working sets for resource getallworkingsetsforresource i resource iresource element sets f element mapper felementmapper get all working sets getallworkingsets element sets sets size result result array list arraylist arrays as list aslist elements result add all addall sets result elements result to array toarray needs configuration needsconfiguration f configured fconfigured f active working sets factiveworkingsets size i working set ds iworkingsetids equals f active working sets factiveworkingsets get id getid configured f configured fconfigured working management adds property change listener param listener property change listener add add property change listener addpropertychangelistener i property change listener ipropertychangelistener listener f listeners flisteners add listener removes property change listener param listener property change listener remove remove property change listener removepropertychangelistener i property change listener ipropertychangelistener listener f listeners flisteners remove listener i working set iworkingset get active working sets getactiveworkingsets f active working sets factiveworkingsets to array toarray i working set iworkingset f active working sets factiveworkingsets size returns array working sets array working sets i working set iworkingset get all working sets getallworkingsets f all working sets fallworkingsets size i working set ds iworkingsetids equals f all working sets fallworkingsets get id getid f all working sets fallworkingsets get active and all working sets from managers getactiveandallworkingsetsfrommanagers f all working sets fallworkingsets to array toarray i working set iworkingset f all working sets fallworkingsets size returns list active working sets working managers list working sets list i working set iworkingset get active and all working sets from managers getactiveandallworkingsetsfrommanagers list i working set iworkingset result array list arraylist result add all addall f active working sets factiveworkingsets i working set iworkingset locals f local working set manager flocalworkingsetmanager get working sets getworkingsets locals length result locals is supported as top level element issupportedastoplevelelement locals result add locals i working set iworkingset globals platformui get workbench getworkbench get working set manager getworkingsetmanager get working sets getworkingsets globals length result globals is supported as top level element issupportedastoplevelelement globals result add globals f is sorting enabled fissortingenabled collections sort result working set comparator workingsetcomparator result adds newly created working sets list working sets param result list working sets working managers add newly created working sets addnewlycreatedworkingsets list i working set iworkingset result iterator i working set iworkingset iter result iterator iter has next hasnext i working set iworkingset iter f all working sets fallworkingsets f all working sets fallworkingsets add sets working sets lists note active working sets contained all working sets allworkingsets relative ordering active working sets all working sets allworkingsets active working sets activeworkingsets arrays method code illegal argument exception illegalargumentexception code param all working sets allworkingsets array working sets param is sorting enabled issortingenabled code code sorting enabled code code param active working sets activeworkingsets array active working sets set working sets setworkingsets i working set iworkingset all working sets allworkingsets is sorting enabled issortingenabled i working set iworkingset active working sets activeworkingsets is legal islegal arrays as list aslist all working sets allworkingsets contains all containsall arrays as list aslist active working sets activeworkingsets is legal islegal is order different in working set lists isorderdifferentinworkingsetlists arrays as list aslist all working sets allworkingsets arrays as list aslist active working sets activeworkingsets is sorting enabled issortingenabled arrays sort all working sets allworkingsets working set comparator workingsetcomparator f all working sets fallworkingsets array list arraylist arrays as list aslist all working sets allworkingsets set active working sets setactiveworkingsets active working sets activeworkingsets is sorting enabled issortingenabled sets active working sets note relative ordering active working sets f all working sets fallworkingsets f active working sets factiveworkingsets f all working sets fallworkingsets ordered f active working sets factiveworkingsets param working sets workingsets active working sets set active working sets setactiveworkingsets i working set iworkingset working sets workingsets is legal islegal arrays as list aslist get all working sets getallworkingsets contains all containsall arrays as list aslist working sets workingsets f is sorting enabled fissortingenabled arrays sort working sets workingsets working set comparator workingsetcomparator f active working sets factiveworkingsets array list arraylist arrays as list aslist working sets workingsets bug is order different in working set lists isorderdifferentinworkingsetlists f all working sets fallworkingsets f active working sets factiveworkingsets adjust ordering of all working sets adjustorderingofallworkingsets f element mapper felementmapper rebuild get active working sets getactiveworkingsets f others working set updater fothersworkingsetupdater update elements updateelements fire event fireevent property change event propertychangeevent change working model content adjusts relative ordering active working sets f all working sets fallworkingsets f active working sets factiveworkingsets adjust ordering of all working sets adjustorderingofallworkingsets count active countactive iterator i working set iworkingset iter f all working sets fallworkingsets iterator iter has next hasnext i working set iworkingset iter f active working sets factiveworkingsets i working set iworkingset working set workingset f active working sets factiveworkingsets count active countactive working set workingset equals f all working sets fallworkingsets index of indexof working set workingset f all working sets fallworkingsets f all working sets fallworkingsets index of indexof working set workingset f all working sets fallworkingsets count active countactive f active working sets factiveworkingsets size checks order active working sets active working lists param all working sets allworkingsets list working sets param active working sets activeworkingsets list active working sets code code order code code is order different in working set lists isorderdifferentinworkingsetlists list i working set iworkingset all working sets allworkingsets list i working set iworkingset active working sets activeworkingsets count iterator i working set iworkingset iter all working sets allworkingsets iterator iter has next hasnext i working set iworkingset iter active working sets activeworkingsets active working sets activeworkingsets count equals sets active working sets param working sets workingsets array working sets param is sorting enabled issortingenabled code code sorting enabled code code set active working sets setactiveworkingsets i working set iworkingset working sets workingsets is sorting enabled issortingenabled f is sorting enabled fissortingenabled is sorting enabled issortingenabled set active working sets setactiveworkingsets working sets workingsets save state savestate i memento imemento memento memento put boolean putboolean tag sort working sets f is sorting enabled fissortingenabled memento put boolean putboolean tag configured f configured fconfigured f local working set manager flocalworkingsetmanager save state savestate memento create child createchild tag local working manager iterator i working set iworkingset iter f active working sets factiveworkingsets iterator iter has next hasnext i memento imemento active memento create child createchild tag active working i working set iworkingset working set workingset iter active put string putstring tag working working set workingset get name getname iterator i working set iworkingset iter arrays as list aslist get all working sets getallworkingsets iterator iter has next hasnext i memento imemento all working set allworkingset memento create child createchild tag working sets i working set iworkingset working set workingset iter is supported as top level element issupportedastoplevelelement working set workingset all working set allworkingset put string putstring tag working working set workingset get name getname list i adaptable iadaptable get non project top level elements getnonprojecttoplevelelements f element mapper felementmapper get non project top level elements getnonprojecttoplevelelements restore local working set manager localworkingsetmanager active working sets param memento memento restore successful restore state restorestate i memento imemento memento string configured memento get string getstring tag configured configured f configured fconfigured value of valueof configured boolean value booleanvalue f local working set manager flocalworkingsetmanager restore state restorestate memento get child getchild tag local working manager i working set iworkingset all local working sets alllocalworkingsets f local working set manager flocalworkingsetmanager get all working sets getallworkingsets all local working sets alllocalworkingsets length i working set iworkingset all local working sets alllocalworkingsets i working set ds iworkingsetids equals get id getid label locale changed bug string other projects label otherprojectslabel working set messages workingsetmessages working set model workingsetmodel other projects label otherprojectslabel equals get label getlabel set label setlabel other projects label otherprojectslabel string is sorting enabled issortingenabled memento get string getstring tag sort working sets is sorting enabled issortingenabled f is sorting enabled fissortingenabled f is sorting enabled fissortingenabled value of valueof is sorting enabled issortingenabled boolean value booleanvalue i memento imemento act ives actives memento get children getchildren tag active working act ives actives length string act ives actives get string getstring tag working i working set iworkingset f local working set manager flocalworkingsetmanager get working set getworkingset platformui get workbench getworkbench get working set manager getworkingsetmanager get working set getworkingset f active working sets factiveworkingsets add i memento imemento all working sets allworkingsets memento get children getchildren tag working sets all working sets allworkingsets length string all working sets allworkingsets get string getstring tag working i working set iworkingset f local working set manager flocalworkingsetmanager get working set getworkingset platformui get workbench getworkbench get working set manager getworkingsetmanager get working set getworkingset f all working sets fallworkingsets add list i working set iworkingset result get active and all working sets from managers getactiveandallworkingsetsfrommanagers f all working sets fallworkingsets contains all containsall result add newly created working sets addnewlycreatedworkingsets result working set manager changed workingsetmanagerchanged property change event propertychangeevent event string property event get property getproperty i working set manager iworkingsetmanager change working update r updater installed equals property event get source getsource f local working set manager flocalworkingsetmanager i working set updater iworkingsetupdater update r updater i working set updater iworkingsetupdater event get new value getnewvalue update r updater others working set updater othersworkingsetupdater f others working set updater fothersworkingsetupdater others working set updater othersworkingsetupdater update r updater f others working set updater fothersworkingsetupdater init add working list active working sets working sets i working set manager iworkingsetmanager change working add equals property i working set iworkingset working set workingset i working set iworkingset event get new value getnewvalue is supported as top level element issupportedastoplevelelement working set workingset i working set manager iworkingsetmanager manager platformui get workbench getworkbench get working set manager getworkingsetmanager list i working set iworkingset all working sets allworkingsets array list arraylist arrays as list aslist manager get all working sets getallworkingsets all working sets allworkingsets working set workingset list i working set iworkingset elements array list arraylist f active working sets factiveworkingsets working set workingset is visible isvisible f active working sets factiveworkingsets working set workingset elements add working set workingset list i working set iworkingset all elements allelements array list arraylist arrays as list aslist get all working sets getallworkingsets all elements allelements working set workingset all elements allelements add working set workingset set working sets setworkingsets all elements allelements to array toarray i working set iworkingset all elements allelements size f is sorting enabled fissortingenabled elements to array toarray i working set iworkingset elements size don handle working sets managed model is affected isaffected event i working set manager iworkingsetmanager change working content change equals property i working set iworkingset working set workingset i working set iworkingset event get new value getnewvalue i adaptable iadaptable elements f element mapper felementmapper refresh working set workingset elements fire event fireevent event i working set manager iworkingsetmanager change working remove equals property i working set iworkingset working set workingset i working set iworkingset event get old value getoldvalue list i working set iworkingset elements array list arraylist f active working sets factiveworkingsets elements remove working set workingset list i working set iworkingset all elements allelements array list arraylist arrays as list aslist get all working sets getallworkingsets all elements allelements remove working set workingset set working sets setworkingsets all elements allelements to array toarray i working set iworkingset all elements allelements size f is sorting enabled fissortingenabled elements to array toarray i working set iworkingset elements size i working set manager iworkingsetmanager change working label change equals property i working set iworkingset working set workingset i working set iworkingset event get new value getnewvalue is sorting enabled issortingenabled arrays as list aslist get all working sets getallworkingsets working set workingset set working sets setworkingsets get all working sets getallworkingsets is sorting enabled issortingenabled f active working sets factiveworkingsets to array toarray i working set iworkingset f active working sets factiveworkingsets size fire event fireevent event tells working supported top level element param working set workingset working test code code working supported top level element is supported as top level element issupportedastoplevelelement i working set iworkingset working set workingset object working set workingset get id getid i working set ds iworkingsetids equals i working set ds iworkingsetids java equals i working set ds iworkingsetids resource equals working set workingset is self updating isselfupdating working set workingset is aggregate working set isaggregateworkingset i adaptable iadaptable elements working set workingset get elements getelements elements length i adaptable iadaptable element elements i project iproject element get adapter getadapter i project iproject exists fire event fireevent property change event propertychangeevent event i property change listener ipropertychangelistener listener f listeners flisteners listener property change propertychange event is affected isaffected property change event propertychangeevent event f active working sets factiveworkingsets object old value oldvalue event get old value getoldvalue object new value newvalue event get new value getnewvalue old value oldvalue f active working sets factiveworkingsets old value oldvalue new value newvalue f active working sets factiveworkingsets new value newvalue is active working set isactiveworkingset i working set iworkingset changed working set changedworkingset f active working sets factiveworkingsets changed working set changedworkingset add active working set addactiveworkingset i working set iworkingset working set workingset i working set iworkingset working sets workingsets get active working sets getactiveworkingsets i working set iworkingset active working sets activeworkingsets i working set iworkingset working sets workingsets length system arraycopy working sets workingsets active working sets activeworkingsets working sets workingsets length active working sets activeworkingsets working sets workingsets length working set workingset set active working sets setactiveworkingsets active working sets activeworkingsets returns sorting enabled working sets code code sorting enabled code code is sorting enabled issortingenabled f is sorting enabled fissortingenabled