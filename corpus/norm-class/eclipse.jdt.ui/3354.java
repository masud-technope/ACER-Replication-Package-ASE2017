copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation ferenc hechler ferenc hechler users source for ge sourceforge net jar application add jar jar class loader classloader option ferenc hechler ferenc hechler users source for ge sourceforge net jar exporter ant file jar jar option relative path jar rsrc loader zip ferenc hechler ferenc hechler users source for ge sourceforge net jar exporter remove built attribute ant files fat jar exporter ferenc hechler ferenc hechler users source for ge sourceforge net jar exporter ant file produced export runnable jar abs olut absolut paths relative workspace org eclipse jdt internal jar package rfat jarpackagerfat java file java file output stream fileoutputstream java io exception ioexception java output stream outputstream javax xml parsers document builder documentbuilder javax xml parsers document builder factory documentbuilderfactory javax xml parsers parser configuration exception parserconfigurationexception javax xml transform output keys outputkeys javax xml transform transformer javax xml transform transformer exception transformerexception javax xml transform transformer factory transformerfactory javax xml transform dom dom source domsource javax xml transform stream stream result streamresult org dom document org dom element org dom node org eclipse core runtime i path ipath org eclipse debug core i launch configuration ilaunchconfiguration create ant script runnable jar wit libraries folder script generated based classpath selected launch configuration unpack jar ant exporter unpackjarantexporter fat jar ant exporter fatjarantexporter unpack jar ant exporter unpackjarantexporter i path ipath ant script location antscriptlocation i path ipath jar location jarlocation i launch configuration ilaunchconfiguration launch configuration launchconfiguration ant script location antscriptlocation jar location jarlocation launch configuration launchconfiguration override buildantscript i path ipath ant script location antscriptlocation string project name projectname i path ipath abs jar file absjarfile string main class mainclass source info sourceinfo source infos sourceinfos io exception ioexception output stream outputstream output stream outputstream output stream outputstream file output stream fileoutputstream ant script location antscriptlocation to file tofile string abs jar name absjarname abs jar file absjarfile to string tostring nls string sub folder subfolder abs jar file absjarfile remove file extension removefileextension last segment lastsegment lib string abs sub folder abssubfolder abs jar file absjarfile remove last segments removelastsegments append sub folder subfolder to string tostring document builder documentbuilder doc builder docbuilder document builder factory documentbuilderfactory factory document builder factory documentbuilderfactory new instance newinstance factory set valid ating setvalidating doc builder docbuilder factory new document builder newdocumentbuilder parser configuration exception parserconfigurationexception io exception ioexception fat jar package r messages fatjarpackagermessages fat jar package ant script fatjarpackageantscript error could not get xml builder couldnotgetxmlbuilder document document doc builder docbuilder new document newdocument node comment create document nls element project document create element createelement project nls nls nls project set attribute setattribute create runnable jar project project name projectname libraries folder nls nls project set attribute setattribute create jar nls comment document create comment createcomment file created eclipse runnable jar export wizard project append child appendchild comment nls comment document create comment createcomment ant required project append child appendchild comment document append child appendchild project add base dir properties addbasedirproperties document project nls element target document create element createelement target nls nls target set attribute setattribute create jar project append child appendchild target nls element jar document create element createelement jar nls jar set attribute setattribute dest file destfile substitute base dirs substitutebasedirs abs jar name absjarname target append child appendchild jar nls element manifest document create element createelement manifest jar append child appendchild manifest nls element attribute document create element createelement attribute nls nls attribute set attribute setattribute main nls attribute set attribute setattribute main class mainclass manifest append child appendchild attribute nls attribute document create element createelement attribute nls nls attribute set attribute setattribute path string buffer stringbuffer class path classpath string buffer stringbuffer nls class path classpath append source infos sourceinfos length source info sourceinfo source info sourceinfo source infos sourceinfos source info sourceinfo is jar isjar nls nls class path classpath append append sub folder subfolder append append file source info sourceinfo abs path abspath get name getname nls attribute set attribute setattribute class path classpath to string tostring manifest append child appendchild attribute add folders source infos sourceinfos length source info sourceinfo source info sourceinfo source infos sourceinfos source info sourceinfo is jar isjar element file set fileset nls document create element createelement nls file set fileset file set fileset set attribute setattribute dir substitute base dirs substitutebasedirs nls source info sourceinfo abs path abspath jar append child appendchild file set fileset nls element delete document create element createelement delete nls delete set attribute setattribute dir substitute base dirs substitutebasedirs abs sub folder abssubfolder target append child appendchild delete nls element mkdir document create element createelement mkdir nls mkdir set attribute setattribute dir substitute base dirs substitutebasedirs abs sub folder abssubfolder target append child appendchild mkdir add libraries source infos sourceinfos length source info sourceinfo source info sourceinfo source infos sourceinfos source info sourceinfo is jar isjar element copy nls document create element createelement nls copy copy set attribute setattribute file substitute base dirs substitutebasedirs nls source info sourceinfo abs path abspath copy set attribute setattribute todir substitute base dirs substitutebasedirs nls abs sub folder abssubfolder target append child appendchild copy add folders source infos sourceinfos length source info sourceinfo source info sourceinfo source infos sourceinfos source info sourceinfo is jar isjar write document stream transformer transformer transformer factory transformerfactory new instance newinstance new transformer newtransformer nls transformer set output property setoutputproperty nls output keys outputkeys method nls xml nls transformer set output property setoutputproperty nls output keys outputkeys encoding nls utf nls transformer set output property setoutputproperty nls output keys outputkeys indent nls nls nls transformer set output property setoutputproperty http xml apache org xslt indent amount dom source domsource source dom source domsource document stream result streamresult result stream result streamresult output stream outputstream transformer transform source result transformer exception transformerexception io exception ioexception fat jar package r messages fatjarpackagermessages fat jar package ant script fatjarpackageantscript error could not transform to l couldnottransformtoxml output stream outputstream output stream outputstream close