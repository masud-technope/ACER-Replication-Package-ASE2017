copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring reorg java util array list arraylist java util hash set hashset java util iterator java util list java util org eclipse text edits text edit group texteditgroup org eclipse jdt core i field ifield org eclipse jdt core i java element ijavaelement org eclipse jdt core i type itype org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast node astnode org eclipse jdt core dom class instance creation classinstancecreation org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom enum constant declaration enumconstantdeclaration org eclipse jdt core dom expression statement expressionstatement org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt internal corext dom generic visitor genericvisitor org eclipse jdt internal corext refactoring structure ast node search util astnodesearchutil org eclipse jdt internal corext refactoring structure compilation unit rewrite compilationunitrewrite org eclipse jdt internal corext util jdt flags jdtflags ast node delete util astnodedeleteutil ast node astnode get nodes to delete getnodestodelete i java element ijavaelement element compilation unit compilationunit cu node cunode java model exception javamodelexception fields don delete declaration fragment element get element type getelementtype i java element ijavaelement field jdt flags jdtflags is enum isenum i field ifield element ast node astnode ast node search util astnodesearchutil get enum constant declaration getenumconstantdeclaration i field ifield element cu node cunode ast node astnode ast node search util astnodesearchutil get field declaration fragment node getfielddeclarationfragmentnode i field ifield element cu node cunode element get element type getelementtype i java element ijavaelement type i type itype element is local islocal i type itype type i type itype element type is anonymous isanonymous type get parent getparent get element type getelementtype i java element ijavaelement field enum constant declaration enumconstantdeclaration enum decl enumdecl ast node search util astnodesearchutil get enum constant declaration getenumconstantdeclaration i field ifield element get parent getparent cu node cunode enum decl enumdecl enum decl enumdecl get anonymous class declaration getanonymousclassdeclaration ast node astnode enum decl enumdecl get anonymous class declaration getanonymousclassdeclaration class instance creation classinstancecreation creation ast node search util astnodesearchutil get class instance creation node getclassinstancecreationnode type cu node cunode creation creation get location in parent getlocationinparent expression statement expressionstatement expression property ast node astnode creation get parent getparent creation get location in parent getlocationinparent variable declaration fragment variabledeclarationfragment initializer property ast node astnode creation ast node astnode creation get anonymous class declaration getanonymousclassdeclaration ast node astnode ast node astnode nodes ast node search util astnodesearchutil get declaration nodes getdeclarationnodes element cu node cunode delete type declaration statement typedeclarationstatement nodes nodes get parent getparent nodes ast node search util astnodesearchutil get declaration nodes getdeclarationnodes element cu node cunode ast node astnode get removed nodes getremovednodes list ast node astnode removed compilation unit rewrite compilationunitrewrite rewrite ast node astnode result hash set hashset rewrite get root getroot accept generic visitor genericvisitor override visit node visitnode ast node astnode node removed node result add node result mark as deleted markasdeleted i java element ijavaelement java elements javaelements compilation unit rewrite compilationunitrewrite rewrite text edit group texteditgroup group java model exception javamodelexception list ast node astnode removed array list arraylist java elements javaelements length mark as deleted markasdeleted removed java elements javaelements rewrite group propagate field declaration node deletions propagatefielddeclarationnodedeletions removed rewrite group mark as deleted markasdeleted list ast node astnode list i java element ijavaelement element compilation unit rewrite compilationunitrewrite rewrite text edit group texteditgroup group java model exception javamodelexception ast node astnode declaration nodes declarationnodes get nodes to delete getnodestodelete element rewrite get root getroot declaration nodes declarationnodes length ast node astnode node declaration nodes declarationnodes node list add node rewrite getastrewrite remove node group rewrite get import remove r getimportremover register removed node registerremovednode node propagate field declaration node deletions propagatefielddeclarationnodedeletions list ast node astnode removed compilation unit rewrite compilationunitrewrite rewrite text edit group texteditgroup group ast node astnode removed nodes removednodes get removed nodes getremovednodes removed rewrite iterator ast node astnode iter removed nodes removednodes iterator iter has next hasnext ast node astnode node iter node variable declaration fragment variabledeclarationfragment node get parent getparent field declaration fielddeclaration field declaration fielddeclaration field declaration fielddeclaration node get parent getparent removed removed nodes removednodes contains all containsall fragments rewrite getastrewrite remove group rewrite get import remove r getimportremover register removed node registerremovednode ast node delete util astnodedeleteutil