copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation johannes utzig mail jutzig j unit junit update test suite wizard j unit junit run with runwith suite https bugs eclipse org org eclipse jdt internal junit wizards java lang reflect invocation target exception invocationtargetexception java util org eclipse jdt junit wizards new test suite wizard page newtestsuitewizardpage org eclipse swt widgets shell org eclipse core runtime org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i file ifile org eclipse jface action i action iaction org eclipse jface dialogs error dialog errordialog org eclipse jface dialogs message dialog messagedialog org eclipse jface operation i runnable with progress irunnablewithprogress org eclipse jface viewers i label provider ilabelprovider org eclipse jface viewers i selection iselection org eclipse jface viewers i structured selection istructuredselection org eclipse jface window window org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text i document idocument org eclipse i object action delegate iobjectactiondelegate org eclipse i workbench part iworkbenchpart org eclipse platformui org eclipse dialogs i selection status validator iselectionstatusvalidator org eclipse jdt core i annotation iannotation org eclipse jdt core i buffer ibuffer org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i method imethod org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i source range isourcerange org eclipse jdt core i type itype org eclipse jdt core java model exception javamodelexception org eclipse jdt internal junit messages org eclipse jdt internal junit j unit plugin junitplugin org eclipse jdt internal junit util checked table selection dialog checkedtableselectiondialog org eclipse jdt internal junit util exception handler exceptionhandler org eclipse jdt internal junit util j unit status junitstatus org eclipse jdt internal junit util j unit stub utility junitstubutility org eclipse jdt internal junit util resources org eclipse jdt java element label provider javaelementlabelprovider object contribution action updates existing all tests alltests classes update test suite updatetestsuite i object action delegate iobjectactiondelegate shell f shell fshell i package fragment ipackagefragment f pack fpack i compilation unit icompilationunit f test suite ftestsuite i method imethod f suite method fsuitemethod f empty selection allowed femptyselectionallowed object f selected test cases fselectedtestcases f is junit fisjunit i annotation iannotation f suite classes fsuiteclasses update all tests validator updatealltestsvalidator i selection status validator iselectionstatusvalidator i selection validator iselectionvalidator validate object override i status istatus validate object selection count object element selection element i type itype count count f empty selection allowed femptyselectionallowed nls j unit status junitstatus nls i status istatus error nls i status istatus recursive inclusion status recursiveinclusionstatus check recursive suite inclusion checkrecursivesuiteinclusion selection recursive inclusion status recursiveinclusionstatus recursive inclusion status recursiveinclusionstatus isok recursive inclusion status recursiveinclusionstatus string message count message messages format wizard messages wizardmessages update all tests updatealltests selected methods label integer count message messages format wizard messages wizardmessages update all tests updatealltests selected methods label integer count j unit status junitstatus i status istatus info message i status istatus check recursive suite inclusion checkrecursivesuiteinclusion object selection i type itype suite class suiteclass f is junit fisjunit suite class suiteclass i type itype f suite classes fsuiteclasses get parent getparent suite class suiteclass f suite method fsuitemethod get declaring type getdeclaringtype object element selection element i type itype i type itype element equals suite class suiteclass j unit status junitstatus i status istatus warning wizard messages wizardmessages update test suite updatetestsuite infinite recursion update test suite updatetestsuite i object action delegate iobjectactiondelegate set active part setactivepart i action iaction i workbench part iworkbenchpart override set active part setactivepart i action iaction action i workbench part iworkbenchpart target part targetpart i action delegate iactiondelegate i action iaction override i action iaction action i label provider ilabelprovider lprovider java element label provider javaelementlabelprovider java element label provider javaelementlabelprovider suite classes content provider suiteclassescontentprovider cprovider suite classes content provider suiteclassescontentprovider f is junit fisjunit f is junit fisjunit find test classes testclasses test suite i type itype test suite type testsuitetype f test suite ftestsuite find primary type findprimarytype nls f suite classes fsuiteclasses test suite type testsuitetype get annotation getannotation suite classes suiteclasses f suite classes fsuiteclasses exists open test selection dialog opentestselectiondialog lprovider cprovider test suite type testsuitetype no suite error nosuiteerror find test classes testclasses test suite i type itype test suite type testsuitetype f test suite ftestsuite find primary type findprimarytype nls f suite method fsuitemethod test suite type testsuitetype get method getmethod suite string f suite method fsuitemethod exists i source range isourcerange range f suite method fsuitemethod get source range getsourcerange i buffer ibuffer buf f test suite ftestsuite get buffer getbuffer string original content originalcontent buf get text gettext range get offset getoffset range get length getlength buf close get test suite class list range gettestsuiteclasslistrange original content originalcontent open test selection dialog opentestselectiondialog lprovider cprovider test suite type testsuitetype cannot update suite error cannotupdatesuiteerror java model exception javamodelexception j unit plugin junitplugin log no suite error nosuiteerror open test selection dialog opentestselectiondialog i label provider ilabelprovider lprovider suite classes content provider suiteclassescontentprovider cprovider i type itype test suite type testsuitetype checked table selection dialog checkedtableselectiondialog dialog checked table selection dialog checkedtableselectiondialog f shell fshell lprovider cprovider dialog set validator setvalidator update all tests validator updatealltestsvalidator dialog set title settitle wizard messages wizardmessages update all tests updatealltests title dialog set message setmessage wizard messages wizardmessages update all tests updatealltests message i type itype elements cprovider get tests gettests f pack fpack elements remove test suite type testsuitetype dialog set initial select ions setinitialselections elements to array toarray dialog set size setsize dialog set input setinput f pack fpack dialog open window f selected test cases fselectedtestcases dialog get result getresult platformui get workbench getworkbench get progress service getprogressservice busy cursor while busycursorwhile get runnable getrunnable exception j unit plugin junitplugin log i action delegate iactiondelegate selection changed selectionchanged i action iaction i selection iselection override selection changed selectionchanged i action iaction action i selection iselection selection f shell fshell j unit plugin junitplugin get active workbench shell getactiveworkbenchshell selection i structured selection istructuredselection object test suite obj testsuiteobj i structured selection istructuredselection selection get first element getfirstelement test suite obj testsuiteobj test suite obj testsuiteobj i compilation unit icompilationunit f test suite ftestsuite i compilation unit icompilationunit test suite obj testsuiteobj i java element ijavaelement packije f test suite ftestsuite get parent getparent packije i package fragment ipackagefragment f pack fpack i package fragment ipackagefragment packije i type itype primary type primarytype f test suite ftestsuite find primary type findprimarytype primary type primarytype f is junit fisjunit nls primary type primarytype get annotation getannotation run with runwith exists update test cases in junit updatetestcasesinjunit suite i progress monitor iprogressmonitor monitor i compilation unit icompilationunit test suite testsuite i annotation iannotation test classes annotation testclassesannotation object selected test cases selectedtestcases java model exception javamodelexception monitor begin task begintask wizard messages wizardmessages update all tests updatealltests begin task begintask i source range isourcerange range test classes annotation testclassesannotation get source range getsourcerange i document idocument full source fullsource document test suite testsuite get buffer getbuffer get contents getcontents string buffer stringbuffer source string buffer stringbuffer monitor worked source append get updatable annotations getupdatableannotations selected test cases selectedtestcases full source fullsource replace range get offset getoffset range get length getlength source to string tostring monitor worked string for matted content formattedcontent j unit stub utility junitstubutility format compilation unit formatcompilationunit test suite testsuite get java project getjavaproject full source fullsource test suite testsuite find recommended line separator findrecommendedlineseparator i buffer ibuffer buf test suite testsuite get buffer getbuffer buf replace buf get length getlength for matted content formattedcontent monitor worked test suite testsuite save sub progress monitor subprogressmonitor monitor monitor worked bad location exception badlocationexception is true istrue happen monitor update test cases in suite updatetestcasesinsuite i progress monitor iprogressmonitor monitor i compilation unit icompilationunit test suite testsuite i method imethod suite method suitemethod object selected test cases selectedtestcases java model exception javamodelexception monitor begin task begintask wizard messages wizardmessages update all tests updatealltests begin task begintask i source range isourcerange range suite method suitemethod get source range getsourcerange i document idocument full source fullsource document test suite testsuite get buffer getbuffer get contents getcontents string original content originalcontent full source fullsource range get offset getoffset range get length getlength string buffer stringbuffer source string buffer stringbuffer original content originalcontent test suite class list range testsuiteclasslistrange class range classrange get test suite class list range gettestsuiteclasslistrange source to string tostring class range classrange monitor worked string updatable code updatablecode source substring start new test suite creation wizard page newtestsuitecreationwizardpage end marker endmarker length source replace class range classrange get start getstart class range classrange get end getend get updatable string getupdatablestring selected test cases selectedtestcases full source fullsource replace range get offset getoffset range get length getlength source to string tostring monitor worked string for matted content formattedcontent j unit stub utility junitstubutility format compilation unit formatcompilationunit test suite testsuite get java project getjavaproject full source fullsource test suite testsuite find recommended line separator findrecommendedlineseparator buf replace range get offset getoffset range get length getlength for matted content formattedcontent i buffer ibuffer buf test suite testsuite get buffer getbuffer buf replace buf get length getlength for matted content formattedcontent monitor worked test suite testsuite save sub progress monitor subprogressmonitor monitor monitor worked bad location exception badlocationexception is true istrue happen monitor test suite class list range testsuiteclasslistrange get test suite class list range gettestsuiteclasslistrange string source start source index of indexof new test suite wizard page newtestsuitewizardpage comment start marker start start source last index of lastindexof new test suite wizard page newtestsuitewizardpage comment start start start source index of indexof new test suite wizard page newtestsuitewizardpage comment marker start new test suite wizard page newtestsuitewizardpage comment marker length test suite class list range testsuiteclasslistrange start returns code included suite replaces code existing suite string get updatable string getupdatablestring object selected classes selectedclasses string buffer stringbuffer suite string buffer stringbuffer nls suite append new test suite wizard page newtestsuitewizardpage start marker object selected class e selectedclasse selected classes selectedclasses selected class e selectedclasse i type itype i type itype test type testtype i type itype selected class e selectedclasse i method imethod suite method suitemethod nls test type testtype get method getmethod nls suite nls string suite method suitemethod exists nls nls suite append suite add test suite addtestsuite test type testtype get element name getelementname nls nls suite append suite add test addtest test type testtype get element name getelementname suite nls suite append new test suite wizard page newtestsuitewizardpage marker suite to string tostring returns test suite annotations replace annotations existing suite string get updatable annotations getupdatableannotations object selected classes selectedclasses nls string buffer stringbuffer buffer string buffer stringbuffer suite classes suiteclasses selected classes selectedclasses length selected classes selectedclasses i type itype i type itype test type testtype i type itype selected classes selectedclasses buffer append test type testtype get element name getelementname nls buffer append nls selected classes selectedclasses length buffer append nls buffer append nls buffer append buffer to string tostring check validate edit status checkvalidateeditstatus i compilation unit icompilationunit test suite cu testsuitecu shell shell i status istatus status validate modifies files validatemodifiesfiles get test suite file gettestsuitefile test suite cu testsuitecu status isok error dialog errordialog open error openerror shell wizard messages wizardmessages update test suite updatetestsuite update wizard messages wizardmessages update test suite updatetestsuite update status i file ifile get test suite file gettestsuitefile i compilation unit icompilationunit test suite cu testsuitecu i file ifile test suite cu testsuitecu get resource getresource i status istatus validate modifies files validatemodifiesfiles i file ifile file to modify filetomodify i file ifile files to modify filestomodify file to modify filetomodify i status istatus status resources check in sync checkinsync files to modify filestomodify status isok status status resources make commit table makecommittable files to modify filestomodify status isok status j unit status junitstatus i runnable with progress irunnablewithprogress get runnable getrunnable i runnable with progress irunnablewithprogress override i progress monitor iprogressmonitor monitor invocation target exception invocationtargetexception interrupted exception interruptedexception monitor monitor null progress monitor nullprogressmonitor check validate edit status checkvalidateeditstatus f test suite ftestsuite f shell fshell f is junit fisjunit update test cases in junit updatetestcasesinjunit suite monitor f test suite ftestsuite f suite classes fsuiteclasses f selected test cases fselectedtestcases update test cases in suite updatetestcasesinsuite monitor f test suite ftestsuite f suite method fsuitemethod f selected test cases fselectedtestcases java model exception javamodelexception exception handler exceptionhandler handle f shell fshell wizard messages wizardmessages update test suite updatetestsuite update wizard messages wizardmessages update test suite updatetestsuite error cannot update suite error cannotupdatesuiteerror message dialog messagedialog open error openerror f shell fshell wizard messages wizardmessages update all tests updatealltests cannot update cannotupdate error dialog errordialog title messages format wizard messages wizardmessages update all tests updatealltests cannot update cannotupdate error dialog errordialog message string new test suite wizard page newtestsuitewizardpage start marker new test suite wizard page newtestsuitewizardpage marker no suite error nosuiteerror f is junit fisjunit message dialog messagedialog open error openerror f shell fshell wizard messages wizardmessages update all tests updatealltests cannot find cannotfind annotation error dialog errordialog title wizard messages wizardmessages update all tests updatealltests cannot find cannotfind annotation error dialog errordialog message message dialog messagedialog open error openerror f shell fshell wizard messages wizardmessages update all tests updatealltests cannot find cannotfind error dialog errordialog title wizard messages wizardmessages update all tests updatealltests cannot find cannotfind error dialog errordialog message