copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext dom java util arrays java util hash map hashmap java util iterator java util list java util map org eclipse core runtime org eclipse text edits text edit group texteditgroup org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom block org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom i extended modifier iextendedmodifier org eclipse jdt core dom modifier org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom switch statement switchstatement org eclipse jdt core dom type org eclipse jdt core dom variable declaration expression variabledeclarationexpression org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt internal corext util jdt ui helper classes jdtuihelperclasses rewrite helper variable declarations jdt ui helper classes jdtuihelperclasses variable declaration rewrite variabledeclarationrewrite rewrite modifiers rewritemodifiers single variable declaration singlevariabledeclaration declaration node declarationnode included modifiers includedmodifiers excluded modifiers excludedmodifiers ast rewrite astrewrite rewrite text edit group texteditgroup group modifier rewrite modifierrewrite list rewrite listrewrite modifier rewrite modifierrewrite create rewrite declaration node declarationnode list rewrite listrewrite set modifiers setmodifiers included modifiers includedmodifiers excluded modifiers excludedmodifiers group rewrite modifiers rewritemodifiers variable declaration expression variabledeclarationexpression declaration node declarationnode included modifiers includedmodifiers excluded modifiers excludedmodifiers ast rewrite astrewrite rewrite text edit group texteditgroup group modifier rewrite modifierrewrite list rewrite listrewrite modifier rewrite modifierrewrite create rewrite declaration node declarationnode list rewrite listrewrite set modifiers setmodifiers included modifiers includedmodifiers excluded modifiers excludedmodifiers group rewrite modifiers rewritemodifiers field declaration fielddeclaration declaration node declarationnode variable declaration fragment variabledeclarationfragment to change tochange included modifiers includedmodifiers excluded modifiers excludedmodifiers ast rewrite astrewrite rewrite text edit group texteditgroup group list variable declaration fragment variabledeclarationfragment fragments to change fragmentstochange arrays as list aslist to change tochange ast ast declaration node declarationnode getast problem declaration node declarationnode subject multiple calls method calls original declaration node declarationnode rewritten account assumption modifiers variable declaration fragment variabledeclarationfragment modified solution main tain maintain map original variable declaration fragments variabledeclarationfragments field declaration fielddeclaration original modifiers declaration node declarationnode belong fragment fragment modifiers create field declaration fielddeclaration move successive fragments declaration fragment moved declaration don create move target created list variable declaration fragment variabledeclarationfragment fragments declaration node declarationnode fragments iterator variable declaration fragment variabledeclarationfragment iter fragments iterator list rewrite listrewrite block rewrite blockrewrite declaration node declarationnode get parent getparent abstract type declaration abstracttypedeclaration block rewrite blockrewrite rewrite get list rewrite getlistrewrite declaration node declarationnode get parent getparent abstract type declaration abstracttypedeclaration declaration node declarationnode get parent getparent get body declarations property getbodydeclarationsproperty block rewrite blockrewrite rewrite get list rewrite getlistrewrite declaration node declarationnode get parent getparent anonymous class declaration anonymousclassdeclaration body declarations property variable declaration fragment variabledeclarationfragment last fragment lastfragment iter ast node astnode last statement laststatement declaration node declarationnode fragments to change fragmentstochange last fragment lastfragment modifier rewrite modifierrewrite modifier rewrite modifierrewrite modifier rewrite modifierrewrite create rewrite declaration node declarationnode modifier rewrite modifierrewrite set modifiers setmodifiers included modifiers includedmodifiers excluded modifiers excludedmodifiers group list rewrite listrewrite fragments rewrite fragmentsrewrite iter has next hasnext variable declaration fragment variabledeclarationfragment current fragment currentfragment iter suppress warnings suppresswarnings unchecked map variable declaration fragment variabledeclarationfragment moved fragment movedfragment lookup map variable declaration fragment variabledeclarationfragment moved fragment movedfragment rewrite get property getproperty moved fragment movedfragment get name getname lookup lookup hash map hashmap rewrite set property setproperty moved fragment movedfragment get name getname lookup moved fragment movedfragment current moved fragment currentmovedfragment lookup current fragment currentfragment change last changelast fragments to change fragmentstochange last fragment lastfragment change current changecurrent fragments to change fragmentstochange current fragment currentfragment change last changelast change current changecurrent lookup contains key containskey last fragment lastfragment modifier rewrite modifierrewrite modifier rewrite modifierrewrite current moved fragment currentmovedfragment current moved fragment currentmovedfragment f uses original modifiers fusesoriginalmodifiers modifiers removing existing modifier rewrite modifierrewrite modifier rewrite modifierrewrite create rewrite current moved fragment currentmovedfragment f declaration fdeclaration list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite current moved fragment currentmovedfragment f declaration fdeclaration field declaration fielddeclaration modifiers property list i extended modifier iextendedmodifier extended list extendedlist list rewrite listrewrite get rewritten list getrewrittenlist extended list extendedlist size ast node astnode curr ast node astnode extended list extendedlist curr modifier rewrite remove curr group don touch modifiers leave modifier rewrite modifierrewrite split existing field declaration variable declaration fragment variabledeclarationfragment move target movetarget move target movetarget variable declaration fragment variabledeclarationfragment rewrite create move target createmovetarget current fragment currentfragment field declaration fielddeclaration new statement newstatement field declaration fielddeclaration ast create instance createinstance field declaration fielddeclaration rewrite get list rewrite getlistrewrite new statement newstatement field declaration fielddeclaration fragments property insert last insertlast move target movetarget group lookup current fragment currentfragment moved fragment movedfragment move target movetarget new statement newstatement change current changecurrent rewrite new statement newstatement field declaration fielddeclaration type property rewrite create copy target createcopytarget declaration node declarationnode get type gettype group modifier rewrite modifierrewrite modifier rewrite modifierrewrite create rewrite new statement newstatement modifier rewrite modifierrewrite copy all annotations copyallannotations declaration node declarationnode group block rewrite blockrewrite insert after insertafter new statement newstatement last statement laststatement group fragments rewrite fragmentsrewrite rewrite get list rewrite getlistrewrite new statement newstatement field declaration fielddeclaration fragments property last statement laststatement new statement newstatement modifier rewrite modifierrewrite change current changecurrent new modifiers newmodifiers declaration node declarationnode get modifiers getmodifiers excluded modifiers excludedmodifiers included modifiers includedmodifiers modifier rewrite modifierrewrite set modifiers setmodifiers new modifiers newmodifiers excluded modifiers excludedmodifiers group new modifiers newmodifiers declaration node declarationnode get modifiers getmodifiers modifier rewrite modifierrewrite set modifiers setmodifiers new modifiers newmodifiers modifier group fragments rewrite fragmentsrewrite variable declaration fragment variabledeclarationfragment fragment uses original modifiers usesoriginalmodifiers current moved fragment currentmovedfragment fragment current moved fragment currentmovedfragment f move target fmovetarget uses original modifiers usesoriginalmodifiers current moved fragment currentmovedfragment f uses original modifiers fusesoriginalmodifiers rewrite get list rewrite getlistrewrite current moved fragment currentmovedfragment f declaration fdeclaration field declaration fielddeclaration fragments property remove fragment group fragment variable declaration fragment variabledeclarationfragment rewrite create move target createmovetarget current fragment currentfragment lookup current fragment currentfragment moved fragment movedfragment fragment last statement laststatement uses original modifiers usesoriginalmodifiers fragments rewrite fragmentsrewrite insert last insertlast fragment group last fragment lastfragment current fragment currentfragment moved fragment movedfragment variable declaration fragment variabledeclarationfragment f move target fmovetarget ast node astnode f declaration fdeclaration f uses original modifiers fusesoriginalmodifiers moved fragment movedfragment variable declaration fragment variabledeclarationfragment move target movetarget ast node astnode declaration uses original modifiers usesoriginalmodifiers f move target fmovetarget move target movetarget f declaration fdeclaration declaration f uses original modifiers fusesoriginalmodifiers uses original modifiers usesoriginalmodifiers rewrite modifiers rewritemodifiers variable declaration statement variabledeclarationstatement declaration node declarationnode variable declaration fragment variabledeclarationfragment to change tochange included modifiers includedmodifiers excluded modifiers excludedmodifiers ast rewrite astrewrite rewrite text edit group texteditgroup group list variable declaration fragment variabledeclarationfragment fragments to change fragmentstochange arrays as list aslist to change tochange ast ast declaration node declarationnode getast list variable declaration fragment variabledeclarationfragment fragments declaration node declarationnode fragments iterator variable declaration fragment variabledeclarationfragment iter fragments iterator list rewrite listrewrite block rewrite blockrewrite ast node astnode parent statement parentstatement declaration node declarationnode get parent getparent parent statement parentstatement switch statement switchstatement block rewrite blockrewrite rewrite get list rewrite getlistrewrite parent statement parentstatement switch statement switchstatement statements property parent statement parentstatement block block rewrite blockrewrite rewrite get list rewrite getlistrewrite parent statement parentstatement block statements property happen variable declaration variabledeclaration control statement body is true istrue variable declaration fragment variabledeclarationfragment last fragment lastfragment iter ast node astnode last statement laststatement declaration node declarationnode modifiers modified modifiersmodified fragments to change fragmentstochange last fragment lastfragment modifier rewrite modifierrewrite modifier rewrite modifierrewrite modifier rewrite modifierrewrite create rewrite declaration node declarationnode modifier rewrite modifierrewrite set modifiers setmodifiers included modifiers includedmodifiers excluded modifiers excludedmodifiers group modifiers modified modifiersmodified list rewrite listrewrite fragments rewrite fragmentsrewrite iter has next hasnext variable declaration fragment variabledeclarationfragment current fragment currentfragment iter fragments to change fragmentstochange last fragment lastfragment fragments to change fragmentstochange current fragment currentfragment variable declaration statement variabledeclarationstatement new statement newstatement ast new variable declaration statement newvariabledeclarationstatement variable declaration fragment variabledeclarationfragment rewrite create move target createmovetarget current fragment currentfragment new statement newstatement set type settype type rewrite create copy target createcopytarget declaration node declarationnode get type gettype modifier rewrite modifierrewrite modifier rewrite modifierrewrite modifier rewrite modifierrewrite create rewrite new statement newstatement fragments to change fragmentstochange current fragment currentfragment modifier rewrite modifierrewrite copy all annotations copyallannotations declaration node declarationnode group new modifiers newmodifiers declaration node declarationnode get modifiers getmodifiers excluded modifiers excludedmodifiers included modifiers includedmodifiers modifier rewrite modifierrewrite set modifiers setmodifiers new modifiers newmodifiers excluded modifiers excludedmodifiers group modifier rewrite modifierrewrite copy all modifiers copyallmodifiers declaration node declarationnode group modifiers modified modifiersmodified block rewrite blockrewrite insert after insertafter new statement newstatement last statement laststatement group fragments rewrite fragmentsrewrite rewrite get list rewrite getlistrewrite new statement newstatement variable declaration statement variabledeclarationstatement fragments property last statement laststatement new statement newstatement fragments rewrite fragmentsrewrite ast node astnode fragment rewrite create move target createmovetarget current fragment currentfragment fragments rewrite fragmentsrewrite insert last insertlast fragment group last fragment lastfragment current fragment currentfragment