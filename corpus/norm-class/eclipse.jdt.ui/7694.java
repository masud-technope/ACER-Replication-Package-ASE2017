copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext java util array list arraylist java util arrays java util collection java util list org eclipse core runtime core exception coreexception org eclipse core runtime i status istatus org eclipse core runtime status org eclipse text edits text edit group texteditgroup org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom for statement forstatement org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom statement org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt internal corext dom generic visitor genericvisitor org eclipse jdt internal corext dom scope analyzer scopeanalyzer org eclipse jdt internal corext compilation unit rewrite operations fix compilationunitrewriteoperationsfix compilation unit rewrite operation compilationunitrewriteoperation org eclipse jdt internal corext refactoring structure compilation unit rewrite compilationunitrewrite org eclipse jdt internal java plugin javaplugin convert loop operation convertloopoperation compilation unit rewrite operation compilationunitrewriteoperation nls string loop element identifier element nls i status istatus error status status i status istatus error java plugin javaplugin get plugin id getpluginid for statement forstatement f statement fstatement convert loop operation convertloopoperation f operation foperation string f used names fusednames convert loop operation convertloopoperation for statement forstatement statement string used names usednames f statement fstatement statement f used names fusednames used names usednames set body converter setbodyconverter convert loop operation convertloopoperation operation f operation foperation operation string get introduce d variable name getintroducedvariablename i status istatus satisfies preconditions satisfiespreconditions statement convert compilation unit rewrite compilationunitrewrite cu rewrite curewrite text edit group texteditgroup group linked proposal model linkedproposalmodel position groups positiongroups core exception coreexception for statement forstatement get for statement getforstatement f statement fstatement statement get body getbody compilation unit rewrite compilationunitrewrite cu rewrite curewrite text edit group texteditgroup group linked proposal model linkedproposalmodel position groups positiongroups core exception coreexception f operation foperation f operation foperation convert cu rewrite curewrite group position groups positiongroups statement cu rewrite curewrite getastrewrite create move target createmovetarget get for statement getforstatement get body getbody string get used variable names getusedvariablenames list string array list arraylist for statement forstatement for statement forstatement get for statement getforstatement compilation unit compilationunit root compilation unit compilationunit for statement forstatement get root getroot collection string variable names variablenames scope analyzer scopeanalyzer root get used variable names getusedvariablenames for statement forstatement get start position getstartposition for statement forstatement get length getlength add all addall variable names variablenames for statement forstatement accept generic visitor genericvisitor override visit single variable declaration singlevariabledeclaration node add node get name getname get identifier getidentifier visit node override visit variable declaration fragment variabledeclarationfragment fragment add fragment get name getname get identifier getidentifier visit fragment add all addall arrays as list aslist f used names fusednames to array toarray string size