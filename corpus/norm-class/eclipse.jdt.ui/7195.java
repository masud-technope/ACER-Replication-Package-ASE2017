copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring structure java util array list arraylist java util arrays java util hash set hashset java util list java util org eclipse core runtime org eclipse jdt core i field ifield org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i type itype org eclipse jdt core i type parameter itypeparameter org eclipse jdt core java model exception javamodelexception org eclipse jdt core signature org eclipse jdt internal java plugin javaplugin utilities create mappings type variables types type hierarchy type variable util typevariableutil returns comp osition composition type variable mappings type variables signatures arbitrary format param type variable mapping param type variable mapping empty comp osed composed type variable mapping type variable map let typevariablemaplet compose map pings composemappings type variable map let typevariablemaplet type variable map let typevariablemaplet is not null isnotnull is not null isnotnull length length type variable map let typevariablemaplet source type variable map let typevariablemaplet target type variable map let typevariablemaplet hash set hashset length length length offset offset length offset source target offset source get target index gettargetindex target get source index getsourceindex source get target name gettargetname equals target get source name getsourcename add type variable map let typevariablemaplet source get source name getsourcename target get target name gettargetname offset type variable map let typevariablemaplet mapping type variable map let typevariablemaplet size to array toarray mapping mapping extra cts extracts type variables signature param signature signature extract type variables param variables variables fill extract type variables extracttypevariables string signature string variables is not null isnotnull signature is not null isnotnull variables string arguments signature get type arguments gettypearguments signature arguments length variables add signature to string tostring signature arguments length variables add signature to string tostring arguments returns type variables referenced signature member param declaring declaring type member param member member type variables type field method empty array type variable candidates java model exception javamodelexception signature member resolved string get referenced variables getreferencedvariables i type itype declaring i member imember member java model exception javamodelexception is not null isnotnull declaring is not null isnotnull member string variables parameters to variables parameterstovariables declaring get type parameters gettypeparameters string result string member i field ifield string signature i field ifield member get type signature gettypesignature string signatures get variable signatures getvariablesignatures signature signatures length string variable signature to string tostring signature variables length variable equals variables result string variable result string signatures length result length result signature to string tostring signatures member i method imethod i method imethod method i method imethod member hash set hashset string hash set hashset string types method get parameter types getparametertypes types length extract type variables extracttypevariables types extract type variables extracttypevariables method get return type getreturntype string arguments parameters to variables parameterstovariables i method imethod member get type parameters gettypeparameters arguments length add arguments result string size to array toarray result member i type itype result parameters to variables parameterstovariables i type itype member get type parameters gettypeparameters nls java plugin javaplugin log error message logerrormessage unexpected type i member imember member get class getclass get name getname is true istrue list string list array list arraylist variables length string variable variables length variable variables offset offset result length offset variable equals result offset list add result offset result string list size list to array toarray result result returns type variable names member mapped type variable mapping param mapping type variable mapping entries mapping simple type variable names param declaring declaring type member param member member determine unmapped type variable names empty array unmapped type variable names java model exception javamodelexception type parameters member determined string get unmapped variables getunmappedvariables type variable map let typevariablemaplet mapping i type itype declaring i member imember member java model exception javamodelexception is not null isnotnull mapping is not null isnotnull declaring is not null isnotnull member list string list string types get referenced variables getreferencedvariables declaring member mapping length list array list arraylist types length list add all addall arrays as list aslist types string mapped hash set hashset types length string type types length offset offset mapping length offset type types mapping offset get source name getsourcename equals type mapped add type list array list arraylist types length mapped size types length type types mapped type list add type string result string list size list to array toarray result result returns type variable signatures parameterized type signature empty array param signature signature type variable signatures signature parameterized type signature empty array type variable signatures signature get type arguments gettypearguments string string get variable signatures getvariablesignatures string signature is not null isnotnull signature string result result signature get type arguments gettypearguments signature illegal argument exception illegalargumentexception exception result string result returns reverse d reversed type variable mapping mapping param mapping mapping inverse empty inverse mapping type variable map let typevariablemaplet inverse mapping inversemapping type variable map let typevariablemaplet mapping is not null isnotnull mapping type variable map let typevariablemaplet result type variable map let typevariablemaplet mapping length type variable map let typevariablemaplet map let maplet mapping length map let maplet mapping result type variable map let typevariablemaplet map let maplet get target name gettargetname map let maplet get target index gettargetindex map let maplet get source name getsourcename map let maplet get source index getsourceindex result creates type variable mapping domain range param domain domain mapping param range range mapping param indexes code code indexes compared code code names compared empty type variable mapping type variable map let typevariablemaplet parameters to signatures parameterstosignatures i type parameter itypeparameter domain string range indexes is not null isnotnull domain is not null isnotnull range type variable map let typevariablemaplet hash set hashset i type parameter itypeparameter source string target string element string signature domain length source domain offset offset range length offset target range offset element source get element name getelementname signature signature to string tostring target indexes offset add type variable map let typevariablemaplet element signature offset element equals signature add type variable map let typevariablemaplet element signature offset type variable map let typevariablemaplet result type variable map let typevariablemaplet size to array toarray result result converts type parameters type variable names param parameters type parameters convert converted type variable names i type parameter itypeparameter get element name getelementname string parameters to variables parameterstovariables i type parameter itypeparameter parameters is not null isnotnull parameters string result string parameters length parameters length result parameters get element name getelementname result creates type variable mapping domain range param domain domain mapping param range range mapping empty type variable mapping type variable map let typevariablemaplet signatures to parameters signaturestoparameters string domain i type parameter itypeparameter range is not null isnotnull domain is not null isnotnull range is true istrue domain length domain length range length list type variable map let typevariablemaplet list array list arraylist string source string target domain length source signature to string tostring domain target range get element name getelementname list add type variable map let typevariablemaplet source target type variable map let typevariablemaplet result type variable map let typevariablemaplet list size list to array toarray result result returns type variable mapping subclass superclass param type type representing subclass type variable mapping mapping entries consist simple type variable names java model exception javamodelexception signature types involved retrieved type variable map let typevariablemaplet sub type to inherited type subtypetoinheritedtype i type itype type java model exception javamodelexception is not null isnotnull type i type parameter itypeparameter domain type get type parameters gettypeparameters domain length string signature type get superclass type signature getsuperclasstypesignature signature string range get variable signatures getvariablesignatures signature range length parameters to signatures parameterstosignatures domain range type variable map let typevariablemaplet returns type variable mapping subclass superclass param subtype type representing subclass param supertype type representing superclass type variable mapping mapping entries consist simple type variable names java model exception javamodelexception signature types involved retrieved type variable map let typevariablemaplet sub type to super type subtypetosupertype i type itype subtype i type itype supertype java model exception javamodelexception is not null isnotnull subtype is not null isnotnull supertype type variable map let typevariablemaplet mapping sub type to inherited type subtypetoinheritedtype subtype mapping length i type parameter itypeparameter range supertype get type parameters gettypeparameters range length string signature subtype get superclass type signature getsuperclasstypesignature signature string domain get variable signatures getvariablesignatures signature domain length compose map pings composemappings mapping signatures to parameters signaturestoparameters domain range mapping returns type variable mapping superclass subclass param supertype type representing superclass param subtype type representing subclass type variable mapping mapping entries consist simple type variable names java model exception javamodelexception signature types involved retrieved type variable map let typevariablemaplet super type to inherited type supertypetoinheritedtype i type itype supertype i type itype subtype java model exception javamodelexception is not null isnotnull subtype is not null isnotnull supertype i type parameter itypeparameter domain supertype get type parameters gettypeparameters domain length string signature subtype get superclass type signature getsuperclasstypesignature signature string range get variable signatures getvariablesignatures signature range length parameters to signatures parameterstosignatures domain range type variable map let typevariablemaplet returns type variable mapping superclass subclass param supertype type representing superclass param subtype type representing subclass type variable mapping mapping entries consist simple type variable names java model exception javamodelexception signature types involved retrieved type variable map let typevariablemaplet super type to sub type supertypetosubtype i type itype supertype i type itype subtype java model exception javamodelexception is not null isnotnull supertype is not null isnotnull subtype inverse mapping inversemapping sub type to super type subtypetosupertype subtype supertype type variable util typevariableutil instantiated