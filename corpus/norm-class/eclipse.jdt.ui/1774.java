copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation dmitry stalnov dst alnov dstalnov f usionone fusionone contributed f ixes fixes bug inline method doesn handle implicit https bugs eclipse org bugs bug cgi bug inline method compile error array https bugs eclipse org bugs bug cgi inline call field initializer https bugs eclipse org bugs bug cgi inline call field initializer detect reference https bugs eclipse org bugs bug cgi constructor inlined https bugs eclipse org bugs bug cgi nikolay metchev nikolaymetchev gmail anonymous parameter breaks method inlining https bugs eclipse org org eclipse jdt internal corext refactoring code java util array list arraylist java util hash set hashset java util iterator java util list java util org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core file buf fers filebuffers i text file buffer itextfilebuffer org eclipse text edits text edit textedit org eclipse text edits text edit group texteditgroup org eclipse jface text bad location exception badlocationexception org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring refactoring status entry refactoringstatusentry org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast visitor astvisitor org eclipse jdt core dom array initializer arrayinitializer org eclipse jdt core dom assignment org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom cast expression castexpression org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom do statement dostatement org eclipse jdt core dom enhanced for statement enhancedforstatement org eclipse jdt core dom expression org eclipse jdt core dom field access fieldaccess org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom for statement forstatement org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom if statement ifstatement org eclipse jdt core dom labeled statement labeledstatement org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom modifier org eclipse jdt core dom modifier modifier keyword modifierkeyword org eclipse jdt core dom org eclipse jdt core dom parenthesized expression parenthesizedexpression org eclipse jdt core dom return statement returnstatement org eclipse jdt core dom simple name simplename org eclipse jdt core dom statement org eclipse jdt core dom super field access superfieldaccess org eclipse jdt core dom switch statement switchstatement org eclipse jdt core dom this expression thisexpression org eclipse jdt core dom type org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom while statement whilestatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt internal corext core xt corext org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom bindings org eclipse jdt internal corext dom code scope builder codescopebuilder org eclipse jdt internal corext dom hierarchicalastvisitor org eclipse jdt internal corext dom local variable index localvariableindex org eclipse jdt internal corext dom necessary parentheses checker necessaryparentheseschecker org eclipse jdt internal corext dom selection org eclipse jdt internal corext dom type binding visitor typebindingvisitor org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring base refactoring status codes refactoringstatuscodes org eclipse jdt internal corext refactoring code flow flow context flowcontext org eclipse jdt internal corext refactoring code flow flow info flowinfo org eclipse jdt internal corext refactoring code flow input flow analyzer inputflowanalyzer org eclipse jdt internal corext refactoring type constraints typeconstraints types t type ttype org eclipse jdt internal corext refactoring type constraints typeconstraints types type environment typeenvironment org eclipse jdt internal corext refactoring util no comment source range computer nocommentsourcerangecomputer org eclipse jdt internal corext refactoring util refactoring file buffers refactoringfilebuffers org eclipse jdt internal java plugin javaplugin call inliner callinliner i compilation unit icompilationunit fcunit ast rewrite astrewrite f rewrite frewrite import rewrite importrewrite f import rewrite fimportrewrite i text file buffer itextfilebuffer f buffer fbuffer source provider sourceprovider f source provider fsourceprovider type environment typeenvironment f type environment ftypeenvironment body declaration bodydeclaration f body declaration fbodydeclaration code scope builder codescopebuilder scope f root scope frootscope f number of locals fnumberoflocals ast node astnode f invocation finvocation f insertion index finsertionindex list rewrite listrewrite f list rewrite flistrewrite f needs statement fneedsstatement ast node astnode f target node ftargetnode flow context flowcontext f flow context fflowcontext flow info flowinfo f flow info fflowinfo code scope builder codescopebuilder scope f invocation scope finvocationscope f field initializer ffieldinitializer list variable declaration statement variabledeclarationstatement f locals flocals call context callcontext f context fcontext inline evaluator inlineevaluator hierarchicalastvisitor parameter data parameterdata f for mal argument fformalargument f result fresult inline evaluator inlineevaluator parameter data parameterdata argument f for mal argument fformalargument argument get result getresult f result fresult set result setresult result f result fresult result override visit expression node access mode accessmode f for mal argument fformalargument get simplified access mode getsimplifiedaccessmode access mode accessmode flow info flowinfo write set result setresult access mode accessmode flow info flowinfo unused set result setresult ast nodes astnodes is literal isliteral node set result setresult set result setresult f for mal argument fformalargument get number of acc esses getnumberofaccesses override visit simple name simplename node i binding ibinding binding node resolve binding resolvebinding binding i variable binding ivariablebinding access mode accessmode f for mal argument fformalargument get simplified access mode getsimplifiedaccessmode f for mal argument fformalargument is final isfinal modifier is final isfinal binding get modifiers getmodifiers set result setresult access mode accessmode flow info flowinfo read access mode accessmode flow info flowinfo unused set result setresult write accesses i variable binding ivariablebinding i variable binding ivariablebinding binding is field isfield set result setresult set result setresult f flow info fflowinfo has access mode hasaccessmode f flow context fflowcontext flow info flowinfo unused flow info flowinfo write set result setresult override visit field access fieldaccess node visit node get name getname override visit super field access superfieldaccess node visit node get name getname override visit this expression thisexpression node access mode accessmode f for mal argument fformalargument get simplified access mode getsimplifiedaccessmode access mode accessmode flow info flowinfo read access mode accessmode flow info flowinfo unused set result setresult set result setresult ambiguous method analyzer ambiguousmethodanalyzer type binding visitor typebindingvisitor type environment typeenvironment f type environment ftypeenvironment t type ttype f types ftypes i method binding imethodbinding f original foriginal ambiguous method analyzer ambiguousmethodanalyzer type environment typeenvironment type environment typeenvironment i method binding imethodbinding original t type ttype types f type environment ftypeenvironment type environment typeenvironment f original foriginal original f types ftypes types override visit i type binding itypebinding node i method binding imethodbinding methods node get declared methods getdeclaredmethods methods length i method binding imethodbinding candidate methods candidate f original foriginal f original foriginal get name getname equals candidate get name getname can impl icitly call canimplicitlycall candidate returns code code method called explicit casts code code param candidate method test code code method called explicit casts can impl icitly call canimplicitlycall i method binding imethodbinding candidate i type binding itypebinding parameters candidate get parameter types getparametertypes parameters length f types ftypes length parameters length f types ftypes can assign t o canassignto f type environment ftypeenvironment create parameters call inliner callinliner i compilation unit icompilationunit unit compilation unit compilationunit target ast root targetastroot source provider sourceprovider provider core exception coreexception fcunit unit f buffer fbuffer refactoring file buffers refactoringfilebuffers acquire fcunit f source provider fsourceprovider provider f import rewrite fimportrewrite stub utility stubutility create import rewrite createimportrewrite target ast root targetastroot f locals flocals array list arraylist f rewrite frewrite ast rewrite astrewrite create target ast root targetastroot getast f rewrite frewrite set target source range computer settargetsourcerangecomputer no comment source range computer nocommentsourcerangecomputer f type environment ftypeenvironment type environment typeenvironment dispose refactoring file buffers refactoringfilebuffers release fcunit core exception coreexception exception java plugin javaplugin log exception import rewrite importrewrite get import edit getimportedit f import rewrite fimportrewrite ast node astnode get target node gettargetnode f target node ftargetnode initialize body declaration bodydeclaration declaration f body declaration fbodydeclaration declaration f root scope frootscope code scope builder codescopebuilder perform declaration f source provider fsourceprovider get declaration getdeclaration resolve binding resolvebinding f number of locals fnumberoflocals declaration get node type getnodetype ast node astnode method declaration ast node astnode initializer f number of locals fnumberoflocals local variable index localvariableindex perform declaration refactoring status refactoringstatus initialize ast node astnode invocation severity refactoring status refactoringstatus result refactoring status refactoringstatus f invocation finvocation invocation f locals flocals array list arraylist check method declaration checkmethoddeclaration result severity result get severity getseverity severity result initialize rewrite state initializerewritestate initialize target node initializetargetnode flow analysis flowanalysis f context fcontext call context callcontext f invocation finvocation f invocation scope finvocationscope f target node ftargetnode get node type getnodetype f import rewrite fimportrewrite compute real arguments computerealarguments compute receiver computereceiver bad location exception badlocationexception exception java plugin javaplugin log exception check invocation context checkinvocationcontext result severity result initialize rewrite state initializerewritestate f field initializer ffieldinitializer ast node astnode parent f invocation finvocation get parent getparent parent field declaration fielddeclaration f field initializer ffieldinitializer parent block parent parent get parent getparent parent initialize target node initializetargetnode ast node astnode parent f invocation finvocation get parent getparent node type nodetype parent get node type getnodetype node type nodetype ast node astnode expression statement node type nodetype ast node astnode statement f target node ftargetnode parent f target node ftargetnode f invocation finvocation checks depend invocation context source analyzer sourceanalyzer check method declaration checkmethoddeclaration refactoring status refactoringstatus result severity method declaration methoddeclaration method declaration methoddeclaration f source provider fsourceprovider get declaration getdeclaration constructor invoked constructor inline invocation f invocation finvocation get node type getnodetype ast node astnode constructor invocation method declaration methoddeclaration is constructor isconstructor result add entry addentry refactoring status entry refactoringstatusentry severity refactoring core messages refactoringcoremessages call inliner callinliner constructors java status context javastatuscontext create fcunit f invocation finvocation f source provider fsourceprovider has super method invocation hassupermethodinvocation f invocation finvocation get node type getnodetype ast node astnode method invocation expression receiver method invocation methodinvocation f invocation finvocation get expression getexpression receiver this expression thisexpression result add entry addentry refactoring status entry refactoringstatusentry severity refactoring core messages refactoringcoremessages call inliner callinliner expression java status context javastatuscontext create fcunit f invocation finvocation check invocation context checkinvocationcontext refactoring status refactoringstatus result severity f invocation finvocation get node type getnodetype ast node astnode method invocation method invocation methodinvocation f invocation finvocation resolve type binding resolvetypebinding add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner receiver type refactoring status codes refactoringstatuscodes inline method binding severity node type nodetype f target node ftargetnode get node type getnodetype node type nodetype ast node astnode expression statement f source provider fsourceprovider is execution flow interrupted isexecutionflowinterrupted add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner execution flow refactoring status codes refactoringstatuscodes inline method execution flow severity node type nodetype ast node astnode method invocation ast node astnode parent f target node ftargetnode get parent getparent is return statement isreturnstatement parent support inlining execution flow int errupted interrupted f source provider fsourceprovider is execution flow interrupted isexecutionflowinterrupted add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner execution flow refactoring status codes refactoringstatuscodes inline method execution flow severity is assignment isassignment parent is single declaration issingledeclaration parent execution flow isn int errupted interrupted is field declaration isfielddeclaration ast nodes astnodes get parent getparent f invocation finvocation field declaration fielddeclaration f source provider fsourceprovider is simple function issimplefunction is multi declaration fragment ismultideclarationfragment parent add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner multi declaration multideclaration refactoring status codes refactoringstatuscodes inline method initializer fragement severity is field declaration isfielddeclaration add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner field initializer simple refactoring status codes refactoringstatuscodes inline method field initializer severity add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner simple functions refactoring status codes refactoringstatuscodes inline method simple func t ions functions severity is field declaration isfielddeclaration arguments count argumentscount f context fcontext arguments length arguments count argumentscount parameter data parameterdata parameter f source provider fsourceprovider get parameter data getparameterdata parameter is write iswrite add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner field initialize write parameter refactoring status codes refactoringstatuscodes inline method field initializer severity f locals flocals size add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner field initialize local refactoring status codes refactoringstatuscodes inline method field initializer severity verify field referenced initializer method variable declaration fragment variabledeclarationfragment variable variable declaration fragment variabledeclarationfragment ast nodes astnodes get parent getparent f invocation finvocation ast node astnode variable declaration fragment f source provider fsourceprovider is variable reference d isvariablereferenced variable resolve binding resolvebinding add entry addentry result refactoring core messages refactoringcoremessages call inliner callinliner field initialize reference refactoring status codes refactoringstatuscodes inline method field initializer severity is assignment isassignment ast node astnode node node assignment is return statement isreturnstatement ast node astnode node node return statement returnstatement is single declaration issingledeclaration ast node astnode node type node get node type getnodetype type ast node astnode single variable declaration type ast node astnode variable declaration fragment node node get parent getparent node get node type getnodetype ast node astnode variable declaration statement variable declaration statement variabledeclarationstatement variable declaration statement variabledeclarationstatement node fragments size is multi declaration fragment ismultideclarationfragment ast node astnode node node type nodetype node get node type getnodetype node type nodetype ast node astnode variable declaration fragment node node get parent getparent node get node type getnodetype ast node astnode variable declaration statement variable declaration statement variabledeclarationstatement variable declaration statement variabledeclarationstatement node fragments size add entry addentry refactoring status refactoringstatus result string message code severity result add entry addentry refactoring status entry refactoringstatusentry severity message java status context javastatuscontext create fcunit f invocation finvocation core xt corext get plugin id getpluginid code flow analysis flowanalysis f invocation scope finvocationscope f root scope frootscope find scope findscope f target node ftargetnode get start position getstartposition f target node ftargetnode get length getlength f invocation scope finvocationscope set cursor setcursor f target node ftargetnode get start position getstartposition f flow context fflowcontext flow context flowcontext f number of locals fnumberoflocals f flow context fflowcontext set consider access mode setconsideraccessmode f flow context fflowcontext set compute mode setcomputemode flow context flowcontext arguments selection selection selection create from start length createfromstartlength f invocation finvocation get start position getstartposition f invocation finvocation get length getlength f body declaration fbodydeclaration get node type getnodetype ast node astnode initializer ast node astnode field declaration ast node astnode method declaration ast node astnode enum constant declaration f flow info fflowinfo input flow analyzer inputflowanalyzer f flow context fflowcontext selection perform f body declaration fbodydeclaration nls is true istrue happen refactoring status refactoringstatus perform text edit group texteditgroup text edit group texteditgroup core exception coreexception refactoring status refactoringstatus result refactoring status refactoringstatus string blocks f source provider fsourceprovider get code blocks getcodeblocks f context fcontext f import rewrite fimportrewrite f field initializer ffieldinitializer initialize insertion point initializeinsertionpoint f source provider fsourceprovider get number of statements getnumberofstatements f locals flocals size add new locals addnewlocals text edit group texteditgroup replace call replacecall result blocks text edit group texteditgroup result text edit textedit get modifications getmodifications f rewrite frewrite rewriteast f buffer fbuffer get document getdocument fcunit get java project getjavaproject get options getoptions compute real arguments computerealarguments list expression arguments invocations get arguments getarguments f invocation finvocation expression can not inline cannotinline cross check arguments crosscheckarguments arguments needs var arg boxing needsvarargboxing needs var arg boxing needsvarargboxing arguments vararg index varargindex f source provider fsourceprovider get var arg index getvarargindex ast ast f invocation finvocation getast expression real arguments realarguments expression needs var arg boxing needsvarargboxing vararg index varargindex arguments size needs var arg boxing needsvarargboxing vararg index varargindex arguments size expression expression arguments parameter data parameterdata parameter f source provider fsourceprovider get parameter data getparameterdata can inline caninline expression parameter can not inline cannotinline expression real arguments realarguments expression string f invocation scope finvocationscope create name createname parameter get name getname real arguments realarguments ast new simple name newsimplename variable declaration statement variabledeclarationstatement local create local declaration createlocaldeclaration parameter get type binding gettypebinding expression f rewrite frewrite create copy target createcopytarget expression parameter is final isfinal local modifiers add f invocation finvocation getast new modifier newmodifier modifier keyword modifierkeyword keyword f locals flocals add local needs var arg boxing needsvarargboxing parameter data parameterdata parameter f source provider fsourceprovider get parameter data getparameterdata vararg index varargindex string f invocation scope finvocationscope create name createname parameter get name getname real arguments realarguments vararg index varargindex ast new simple name newsimplename type type f import rewrite fimportrewrite add import addimport parameter get type binding gettypebinding ast variable declaration fragment variabledeclarationfragment fragment ast new variable declaration fragment newvariabledeclarationfragment fragment set name setname ast new simple name newsimplename array initializer arrayinitializer initializer ast new array initializer newarrayinitializer vararg index varargindex arguments size initializer expressions add f rewrite frewrite create copy target createcopytarget arguments fragment set initializer setinitializer initializer variable declaration statement variabledeclarationstatement decl ast new variable declaration statement newvariabledeclarationstatement fragment decl set type settype type f locals flocals add decl f context fcontext compilation unit compilationunit fcunit f context fcontext arguments real arguments realarguments needs var arg boxing needsvarargboxing list expression arguments f source provider fsourceprovider is varargs isvarargs f source provider fsourceprovider has array access hasarrayaccess f source provider fsourceprovider get var arg index getvarargindex var ags varags call doesn pass arguments arguments size arg arguments size i type binding itypebinding argument arguments resolve type binding resolvetypebinding argument i type binding itypebinding parameter f source provider fsourceprovider get parameter data getparameterdata get type binding gettypebinding f type environment ftypeenvironment create argument can assign t o canassignto f type environment ftypeenvironment create parameter compute receiver computereceiver bad location exception badlocationexception expression receiver invocations get expression getexpression f invocation finvocation receiver is name isname receiver is name isname f context fcontext receiver is static receiverisstatic receiver resolve binding resolvebinding i type binding itypebinding ast nodes astnodes is literal isliteral receiver is name isname receiver this expression thisexpression f context fcontext receiver f buffer fbuffer get document getdocument receiver get start position getstartposition receiver get length getlength f source provider fsourceprovider get receive rs t o be updated getreceiverstobeupdated evaluate current receiver assign local f locals flocals add create local declaration createlocaldeclaration receiver resolve type binding resolvetypebinding nls f invocation scope finvocationscope create name createname nls nls expression f rewrite frewrite create copy target createcopytarget receiver f context fcontext receiver f buffer fbuffer get document getdocument receiver get start position getstartposition receiver get length getlength string local nls f invocation scope finvocationscope create name createname nls nls f locals flocals add create local declaration createlocaldeclaration receiver resolve type binding resolvetypebinding local expression f rewrite frewrite create copy target createcopytarget receiver f context fcontext receiver local add new locals addnewlocals text edit group texteditgroup text edit group texteditgroup f locals flocals is empty isempty iterator variable declaration statement variabledeclarationstatement iter f locals flocals iterator iter has next hasnext ast node astnode element iter f list rewrite flistrewrite insert at insertat element f insertion index finsertionindex text edit group texteditgroup replace call replacecall refactoring status refactoringstatus status string blocks text edit group texteditgroup text edit group texteditgroup inline empty body blocks length f target node ftargetnode f needs statement fneedsstatement f rewrite frewrite replace f target node ftargetnode f target node ftargetnode getast new empty statement newemptystatement text edit group texteditgroup f rewrite frewrite remove f target node ftargetnode text edit group texteditgroup ast node astnode node blocks length node f rewrite frewrite create string placeholder createstringplaceholder blocks ast node astnode statement f list rewrite flistrewrite insert at insertat node f insertion index finsertionindex text edit group texteditgroup string block blocks blocks length returned expression eval uated evaluated f context fcontext call mode callmode ast node astnode expression statement f source provider fsourceprovider has return value hasreturnvalue f source provider fsourceprovider must evaluate returned expression mustevaluatereturnedexpression f source provider fsourceprovider return value needs local variable returnvalueneedslocalvariable i method binding imethodbinding invocation invocations resolve binding resolvebinding f invocation finvocation node create local declaration createlocaldeclaration invocation get return type getreturntype f invocation scope finvocationscope create name createname f source provider fsourceprovider get method name getmethodname expression f rewrite frewrite create string placeholder createstringplaceholder block ast node astnode method invocation node f rewrite frewrite getast new expression statement newexpressionstatement expression f rewrite frewrite create string placeholder createstringplaceholder block ast node astnode method invocation node f target node ftargetnode expression node f rewrite frewrite create string placeholder createstringplaceholder block ast node astnode method invocation f ixes fixes bug needs explicit cast needsexplicitcast status ast ast node getast cast expression castexpression cast expression castexpression ast new cast expression newcastexpression type return type returntype f import rewrite fimportrewrite add import addimport f source provider fsourceprovider get return type getreturntype ast cast expression castexpression set type settype return type returntype necessary parentheses checker necessaryparentheseschecker needs parentheses needsparentheses f source provider fsourceprovider get return expressions getreturnexpressions cast expression castexpression cast expression castexpression expression property parenthesized expression parenthesizedexpression parenthesized ast new parenthesized expression newparenthesizedexpression parenthesized set expression setexpression expression node node parenthesized cast expression castexpression set expression setexpression expression node node cast expression castexpression necessary parentheses checker necessaryparentheseschecker needs parentheses needsparentheses cast expression castexpression f target node ftargetnode get parent getparent f target node ftargetnode get location in parent getlocationinparent parenthesized expression parenthesizedexpression parenthesized ast new parenthesized expression newparenthesizedexpression parenthesized set expression setexpression expression node node parenthesized f source provider fsourceprovider needs returned expression parent hesis needsreturnedexpressionparenthesis f target node ftargetnode get parent getparent f target node ftargetnode get location in parent getlocationinparent parenthesized expression parenthesizedexpression p exp pexp f target node ftargetnode getast new parenthesized expression newparenthesizedexpression p exp pexp set expression setexpression expression node node p exp pexp node f rewrite frewrite create string placeholder createstringplaceholder block ast node astnode statement replace target node source node node f target node ftargetnode f list rewrite flistrewrite insert at insertat node f insertion index finsertionindex text edit group texteditgroup f rewrite frewrite replace f target node ftargetnode node text edit group texteditgroup f target node ftargetnode f rewrite frewrite remove f target node ftargetnode text edit group texteditgroup param status status code code explicit needed code code needs explicit cast needsexplicitcast refactoring status refactoringstatus status returned expression don explicit f source provider fsourceprovider return type matches return expressions returntypematchesreturnexpressions list expression return exprs returnexprs f source provider fsourceprovider get return expressions getreturnexpressions method invocations return exprs returnexprs size f target node ftargetnode get location in parent getlocationinparent method invocation methodinvocation arguments property method invocation methodinvocation method invocation methodinvocation method invocation methodinvocation f target node ftargetnode get parent getparent method invocation methodinvocation get expression getexpression f target node ftargetnode i method binding imethodbinding method method invocation methodinvocation resolve method binding resolvemethodbinding method status add error adderror refactoring core messages refactoringcoremessages call inliner callinliner analysis error java status context javastatuscontext create fcunit method invocation methodinvocation i type binding itypebinding parameters method get parameter types getparametertypes argument index argumentindex method invocation methodinvocation arguments index of indexof f invocation finvocation i type binding itypebinding parameter type parametertype return exprs returnexprs resolve type binding resolvetypebinding method is varargs isvarargs argument index argumentindex parameters length argument index argumentindex parameters length parameter type parametertype parameter type parametertype create array type createarraytype parameters argument index argumentindex parameter type parametertype i type binding itypebinding type ast nodes astnodes get receiver type binding getreceivertypebinding method invocation methodinvocation type binding visitor typebindingvisitor visitor ambiguous method analyzer ambiguousmethodanalyzer f type environment ftypeenvironment method f type environment ftypeenvironment create parameters visitor visit type type is interface isinterface bindings visit interfaces visitinterfaces type visitor modifier is abstract isabstract type get modifiers getmodifiers bindings visit hierarchy visithierarchy type visitor needed visit interfaces receiver concrete bindings visit super classes visitsuperclasses type visitor i type binding itypebinding explicit cast explicitcast ast nodes astnodes get explicit cast getexplicitcast return exprs returnexprs expression f target node ftargetnode explicit cast explicitcast variable declaration statement variabledeclarationstatement create local declaration createlocaldeclaration i type binding itypebinding type string expression initializer import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext f target node ftargetnode f import rewrite fimportrewrite string type name typename f import rewrite fimportrewrite add import addimport type context variable declaration statement variabledeclarationstatement decl variable declaration statement variabledeclarationstatement ast node factory astnodefactory new statement newstatement f invocation finvocation getast nls nls type name typename variable declaration fragment variabledeclarationfragment decl fragments set initializer setinitializer initializer decl checks arguments passed method assignments expression arguments inlined calling method assignments reorder code add field args length field hash code hashcode code field initialized arguments reorder called method param arguments arguments arguments inlined expression cross check arguments crosscheckarguments list expression arguments i binding ibinding assigned hash set hashset expression result hash set hashset iterator expression iter arguments iterator iter has next hasnext expression expression iter expression accept ast visitor astvisitor override visit assignment node expression lhs node get left hand side getlefthandside lhs i binding ibinding binding lhs resolve binding resolvebinding binding i variable binding ivariablebinding assigned add binding result add expression iterator expression iter arguments iterator iter has next hasnext expression expression iter result expression expression accept hierarchicalastvisitor override visit node i binding ibinding binding node resolve binding resolvebinding binding assigned binding result add expression result can inline caninline expression actual parameter actualparameter parameter data parameterdata for mal parameter formalparameter inline evaluator inlineevaluator eval uator evaluator inline evaluator inlineevaluator for mal parameter formalparameter actual parameter actualparameter accept eval uator evaluator eval uator evaluator get result getresult initialize insertion point initializeinsertionpoint f insertion index finsertionindex f needs statement fneedsstatement constructor invocation invocation statement ast node astnode parent statement parentstatement f invocation finvocation statement f invocation finvocation ast nodes astnodes get parent getparent f invocation finvocation statement parent statement parentstatement ast node astnode container parent statement parentstatement get parent getparent type container get node type getnodetype type ast node astnode block block block block container f list rewrite flistrewrite f rewrite frewrite get list rewrite getlistrewrite block block statements property f insertion index finsertionindex f list rewrite flistrewrite get rewritten list getrewrittenlist index of indexof parent statement parentstatement type ast node astnode statement switch statement switchstatement switch statement switchstatement switch statement switchstatement container f list rewrite flistrewrite f rewrite frewrite get list rewrite getlistrewrite switch statement switchstatement switch statement switchstatement statements property f insertion index finsertionindex f list rewrite flistrewrite get rewritten list getrewrittenlist index of indexof parent statement parentstatement is control statement iscontrolstatement container type ast node astnode labeled statement f needs statement fneedsstatement needs block around dangling if needsblockarounddanglingif block block f invocation finvocation getast new block newblock f insertion index finsertionindex statement current statement currentstatement type ast node astnode labeled statement current statement currentstatement labeled statement labeledstatement container get body getbody ast node astnode statement current statement currentstatement for statement forstatement container get body getbody ast node astnode enhanced statement current statement currentstatement enhanced for statement enhancedforstatement container get body getbody ast node astnode statement current statement currentstatement while statement whilestatement container get body getbody ast node astnode statement current statement currentstatement do statement dostatement container get body getbody ast node astnode statement if statement ifstatement node if statement ifstatement container statement then part thenpart node get then statement getthenstatement f target node ftargetnode then part thenpart ast nodes astnodes is parent isparent f target node ftargetnode then part thenpart current statement currentstatement then part thenpart current statement currentstatement node get else statement getelsestatement is not null isnotnull current statement currentstatement f rewrite frewrite replace current statement currentstatement block f list rewrite flistrewrite f rewrite frewrite get list rewrite getlistrewrite block block statements property method inlined body control statement current statement currentstatement f target node ftargetnode f list rewrite flistrewrite insert last insertlast f rewrite frewrite create copy target createcopytarget current statement currentstatement replace copy insert statements inlined f target node ftargetnode insert statement delete existing call insertion needs block around dangling if needsblockarounddanglingif https bugs eclipse org bugs bug cgi situation to inline toinline hash code hashcode to inline toinline to string tostring block inlined avoid attaching wrong f target node ftargetnode get location in parent getlocationinparent if statement ifstatement statement property f target node ftargetnode get parent getparent get structural property getstructuralproperty if statement ifstatement statement property f source provider fsourceprovider is dan glig if isdangligif is control statement iscontrolstatement ast node astnode node type node get node type getnodetype type ast node astnode statement type ast node astnode statement type ast node astnode enhanced statement type ast node astnode statement type ast node astnode statement