copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation nikolay metchev nikolaymetchev gmail inline problem fields types https bugs eclipse org org eclipse jdt internal corext refactoring code java util array list arraylist java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util java util string tokenizer stringtokenizer org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime sub progress monitor subprogressmonitor org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits range marker rangemarker org eclipse text edits text edit textedit org eclipse text edits text edit group texteditgroup org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text i document idocument org eclipse jface text i region iregion org eclipse jface text text utilities textutilities org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse jdt core flags org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i field ifield org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i source range isourcerange org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom array creation arraycreation org eclipse jdt core dom array initializer arrayinitializer org eclipse jdt core dom array type arraytype org eclipse jdt core dom assignment org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom cast expression castexpression org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom expression org eclipse jdt core dom expression method reference expressionmethodreference org eclipse jdt core dom field access fieldaccess org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom import declaration importdeclaration org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom modifier org eclipse jdt core dom org eclipse jdt core dom node finder nodefinder org eclipse jdt core dom parenthesized expression parenthesizedexpression org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom structural property descriptor structuralpropertydescriptor org eclipse jdt core dom super method reference supermethodreference org eclipse jdt core dom type org eclipse jdt core dom type declaration statement typedeclarationstatement org eclipse jdt core dom type method reference typemethodreference org eclipse jdt core dom variable declaration variabledeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt core refactoring i java refactorings ijavarefactorings org eclipse jdt core refactoring descriptors inline constant descriptor inlineconstantdescriptor org eclipse jdt core refactoring descriptors java refactoring descriptor javarefactoringdescriptor org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search search match searchmatch org eclipse jdt core search search pattern searchpattern org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt internal corext core xt corext org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext code manipulation codemanipulation import references collector importreferencescollector org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom hierarchicalastvisitor org eclipse jdt internal corext dom necessary parentheses checker necessaryparentheseschecker org eclipse jdt internal corext dom fragments ast fragment factory astfragmentfactory org eclipse jdt internal corext dom fragments i expression fragment iexpressionfragment org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring i refactoring search requestor irefactoringsearchrequestor org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring arguments javarefactoringarguments org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring refactoring scope factory refactoringscopefactory org eclipse jdt internal corext refactoring refactoring search engine refactoringsearchengine org eclipse jdt internal corext refactoring search result group searchresultgroup org eclipse jdt internal corext refactoring base refactoring status codes refactoringstatuscodes org eclipse jdt internal corext refactoring dynamic validation refactoring change dynamicvalidationrefactoringchange org eclipse jdt internal corext refactoring structure ast node search util astnodesearchutil org eclipse jdt internal corext refactoring structure compilation unit rewrite compilationunitrewrite org eclipse jdt internal corext refactoring util resource util resourceutil org eclipse jdt internal corext refactoring util tight source range computer tightsourcerangecomputer org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util messages org eclipse jdt internal corext util strings org eclipse jdt java element labels javaelementlabels org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor ast provider astprovider inline constant refactoring inlineconstantrefactoring refactoring nls string attribute replace replace nls string attribute remove remove inline target compilation unit inlinetargetcompilationunit initializer traversal initializertraversal hierarchicalastvisitor are in same type areinsametype ast node astnode ast node astnode ast node astnode ones container onescontainer get containing type declaration getcontainingtypedeclaration ast node astnode others container otherscontainer get containing type declaration getcontainingtypedeclaration ones container onescontainer others container otherscontainer i type binding itypebinding ones container binding onescontainerbinding get type binding for type declaration gettypebindingfortypedeclaration ones container onescontainer i type binding itypebinding others container binding otherscontainerbinding get type binding for type declaration gettypebindingfortypedeclaration others container otherscontainer is not null isnotnull ones container binding onescontainerbinding is not null isnotnull others container binding otherscontainerbinding string ones key oneskey ones container binding onescontainerbinding get key getkey string others key otherskey others container binding otherscontainerbinding get key getkey ones key oneskey others key otherskey ones key oneskey equals others key otherskey is static access isstaticaccess simple name simplename member name membername i binding ibinding binding member name membername resolve binding resolvebinding is true istrue binding i variable binding ivariablebinding binding i method binding imethodbinding binding i type binding itypebinding binding i type binding itypebinding binding i variable binding ivariablebinding i variable binding ivariablebinding binding is field isfield modifiers binding get modifiers getmodifiers modifier is static isstatic modifiers ast node astnode get containing type declaration getcontainingtypedeclaration ast node astnode node node node abstract type declaration abstracttypedeclaration node anonymous class declaration anonymousclassdeclaration node node get parent getparent node i type binding itypebinding get type binding for type declaration gettypebindingfortypedeclaration ast node astnode declaration declaration anonymous class declaration anonymousclassdeclaration anonymous class declaration anonymousclassdeclaration declaration resolve binding resolvebinding declaration abstract type declaration abstracttypedeclaration abstract type declaration abstracttypedeclaration declaration resolve binding resolvebinding is true istrue expression f initializer finitializer ast rewrite astrewrite f initializer rewrite finitializerrewrite hash set hashset simple name simplename f static imports in initializer fstaticimportsininitializer cache string f names declared locally at new location fnamesdeclaredlocallyatnewlocation expression f new location fnewlocation hash set hashset simple name simplename f static imports in reference fstaticimportsinreference compilation unit rewrite compilationunitrewrite f new location cu rewrite fnewlocationcurewrite import rewrite context importrewritecontext f new location context fnewlocationcontext initializer traversal initializertraversal expression initializer hash set hashset simple name simplename static imports in initializer staticimportsininitializer expression new location newlocation hash set hashset simple name simplename static imports in reference staticimportsinreference compilation unit rewrite compilationunitrewrite new location cu rewrite newlocationcurewrite f initializer finitializer initializer f initializer rewrite finitializerrewrite ast rewrite astrewrite create initializer getast f static imports in initializer fstaticimportsininitializer static imports in initializer staticimportsininitializer f new location fnewlocation new location newlocation f static imports in reference fstaticimportsinreference static imports in reference staticimportsinreference f new location cu rewrite fnewlocationcurewrite new location cu rewrite newlocationcurewrite f new location context fnewlocationcontext context sensitive import rewrite context contextsensitiveimportrewritecontext f new location fnewlocation f new location cu rewrite fnewlocationcurewrite get import rewrite getimportrewrite perform initializer param scope type declaration typedeclaration strings representing simple names string get locally declared names getlocallydeclarednames body declaration bodydeclaration scope is true istrue scope abstract type declaration abstracttypedeclaration string result hash set hashset scope field declaration fielddeclaration result scope accept hierarchicalastvisitor override visit abstract type declaration abstracttypedeclaration node is true istrue node get parent getparent type declaration statement typedeclarationstatement result add node get name getname get identifier getidentifier override visit anonymous class declaration anonymousclassdeclaration anon decl anondecl override visit variable declaration variabledeclaration var decl vardecl result add var decl vardecl get name getname get identifier getidentifier result ast rewrite astrewrite get initializer rewrite getinitializerrewrite f initializer rewrite finitializerrewrite perform expression initializer initializer accept add explicit type arguments if necessary addexplicittypeargumentsifnecessary initializer add explicit type arguments if necessary addexplicittypeargumentsifnecessary expression invocation invocations is resolved type inferred from expected type isresolvedtypeinferredfromexpectedtype invocation ast node astnode reference context referencecontext f new location fnewlocation get parent getparent reference context referencecontext variable declaration fragment variabledeclarationfragment reference context referencecontext single variable declaration singlevariabledeclaration reference context referencecontext assignment i type binding itypebinding type arguments typearguments invocations get inferred type arguments getinferredtypearguments invocation list rewrite listrewrite type args rewrite typeargsrewrite invocations get inferred type arguments rewrite getinferredtypeargumentsrewrite f initializer rewrite finitializerrewrite invocation type arguments typearguments length type type argument typeargument f new location cu rewrite fnewlocationcurewrite get import rewrite getimportrewrite add import addimport type arguments typearguments f new location cu rewrite fnewlocationcurewrite getast f new location context fnewlocationcontext f new location cu rewrite fnewlocationcurewrite get import remove r getimportremover register added imports registeraddedimports type argument typeargument type args rewrite typeargsrewrite insert last insertlast type argument typeargument invocation method invocation methodinvocation method invocation methodinvocation method invocation methodinvocation method invocation methodinvocation invocation expression expression method invocation methodinvocation get expression getexpression expression i method binding imethodbinding method binding methodbinding method invocation methodinvocation resolve method binding resolvemethodbinding method binding methodbinding expression f new location cu rewrite fnewlocationcurewrite getast new name newname f new location cu rewrite fnewlocationcurewrite get import rewrite getimportrewrite add import addimport method binding methodbinding get declaring class getdeclaringclass get type declaration gettypedeclaration f new location context fnewlocationcontext f initializer rewrite finitializerrewrite invocation method invocation methodinvocation expression property expression override visit field access fieldaccess field access fieldaccess field access fieldaccess get expression getexpression accept override visit method invocation methodinvocation invocation invocation get expression getexpression qualify unqualified member name if necessary qualifyunqualifiedmembernameifnecessary invocation get name getname invocation get expression getexpression accept iterator expression invocation arguments iterator has next hasnext accept override visit structural property descriptor structuralpropertydescriptor location in parent locationinparent get location in parent getlocationinparent location in parent locationinparent expression method reference expressionmethodreference property location in parent locationinparent type method reference typemethodreference property location in parent locationinparent super method reference supermethodreference property simple name simplename left most leftmost get left most getleftmost i binding ibinding left most binding leftmostbinding left most leftmost resolve binding resolvebinding left most binding leftmostbinding i variable binding ivariablebinding left most binding leftmostbinding i method binding imethodbinding left most binding leftmostbinding i type binding itypebinding should unqualify shouldunqualify left most leftmost unqualify member name unqualifymembername left most leftmost qualify unqualified member name if necessary qualifyunqualifiedmembernameifnecessary left most leftmost left most binding leftmostbinding i type binding itypebinding string added import addedimport f new location cu rewrite fnewlocationcurewrite get import rewrite getimportrewrite add import addimport i type binding itypebinding left most binding leftmostbinding f new location context fnewlocationcontext f new location cu rewrite fnewlocationcurewrite get import remove r getimportremover register added import registeraddedimport added import addedimport qualify unqualified member name if necessary qualifyunqualifiedmembernameifnecessary simple name simplename member name membername should qualify shouldqualify member name membername qualify member name qualifymembername member name membername should unqualify shouldunqualify simple name simplename member name membername are in same type areinsametype member name membername f new location fnewlocation may be shadowed by local declaration maybeshadowedbylocaldeclaration member name membername unqualify member name unqualifymembername simple name simplename member name membername does parent qualify doesparentqualify member name membername f initializer rewrite finitializerrewrite replace member name membername get parent getparent member name membername should qualify shouldqualify simple name simplename member name membername are in same type areinsametype f initializer finitializer f new location fnewlocation may be shadowed by local declaration maybeshadowedbylocaldeclaration member name membername may be shadowed by local declaration maybeshadowedbylocaldeclaration simple name simplename member name membername get names declared locally at new location getnamesdeclaredlocallyatnewlocation member name membername get identifier getidentifier string get names declared locally at new location getnamesdeclaredlocallyatnewlocation f names declared locally at new location fnamesdeclaredlocallyatnewlocation f names declared locally at new location fnamesdeclaredlocallyatnewlocation body declaration bodydeclaration enclosing body decl enclosingbodydecl body declaration bodydeclaration ast nodes astnodes get parent getparent f new location fnewlocation body declaration bodydeclaration is true istrue enclosing body decl enclosingbodydecl abstract type declaration abstracttypedeclaration f names declared locally at new location fnamesdeclaredlocallyatnewlocation get locally declared names getlocallydeclarednames enclosing body decl enclosingbodydecl qualify member name qualifymembername simple name simplename member name membername is static access isstaticaccess member name membername i binding ibinding member binding memberbinding member name membername resolve binding resolvebinding member binding memberbinding i variable binding ivariablebinding member binding memberbinding i method binding imethodbinding reference location f static imports in reference fstaticimportsinreference f new location fnewlocation import static ally importstatically member name membername member binding memberbinding imported static ally statically initializer f static imports in initializer fstaticimportsininitializer member name membername import static ally importstatically member name membername member binding memberbinding qualify qualify to top level class qualifytotoplevelclass member name membername import static ally importstatically simple name simplename to import toimport i binding ibinding binding string new name newname f new location cu rewrite fnewlocationcurewrite get import rewrite getimportrewrite add static import addstaticimport binding f new location cu rewrite fnewlocationcurewrite get import remove r getimportremover register added static import registeraddedstaticimport binding new reference newreference ast node factory astnodefactory new name newname f initializer rewrite finitializerrewrite getast new name newname f initializer rewrite finitializerrewrite replace to import toimport new reference newreference qualify to top level class qualifytotoplevelclass simple name simplename to qualify toqualify i type binding itypebinding declaring class declaringclass get declaring class binding getdeclaringclassbinding to qualify toqualify declaring class declaringclass type new qualification newqualification f new location cu rewrite fnewlocationcurewrite get import rewrite getimportrewrite add import addimport declaring class declaringclass get erasure geterasure f initializer rewrite finitializerrewrite getast f new location context fnewlocationcontext f new location cu rewrite fnewlocationcurewrite get import remove r getimportremover register added imports registeraddedimports new qualification newqualification simple name simplename new to qualify newtoqualify simple name simplename f initializer rewrite finitializerrewrite create move target createmovetarget to qualify toqualify type new type newtype f initializer rewrite finitializerrewrite getast new qualified type newqualifiedtype new qualification newqualification new to qualify newtoqualify f initializer rewrite finitializerrewrite replace to qualify toqualify new type newtype i type binding itypebinding get declaring class binding getdeclaringclassbinding simple name simplename member name membername i binding ibinding binding member name membername resolve binding resolvebinding binding i method binding imethodbinding i method binding imethodbinding binding get declaring class getdeclaringclass binding i variable binding ivariablebinding i variable binding ivariablebinding binding get declaring class getdeclaringclass binding i type binding itypebinding i type binding itypebinding binding get declaring class getdeclaringclass is true istrue expression f initializer finitializer i compilation unit icompilationunit f initializer unit finitializerunit variable declaration fragment variabledeclarationfragment f original declaration foriginaldeclaration references compilation unit represented ast nodes parsed representation compilation unit expression f references freferences variable declaration fragment variabledeclarationfragment f declaration to remove fdeclarationtoremove compilation unit rewrite compilationunitrewrite f cu rewrite fcurewrite tight source range computer tightsourcerangecomputer f source range computer fsourcerangecomputer hash set hashset simple name simplename f static imports in initializer fstaticimportsininitializer f is fis inline target compilation unit inlinetargetcompilationunit compilation unit rewrite compilationunitrewrite cu rewrite curewrite references inline constant refactoring inlineconstantrefactoring refactoring hash set hashset simple name simplename static imports in initializer staticimportsininitializer f initializer finitializer refactoring get initializer getinitializer f initializer unit finitializerunit refactoring get declaring compilation unit getdeclaringcompilationunit f cu rewrite fcurewrite cu rewrite curewrite f source range computer fsourcerangecomputer tight source range computer tightsourcerangecomputer f cu rewrite fcurewrite getastrewrite set target source range computer settargetsourcerangecomputer f source range computer fsourcerangecomputer refactoring get remove declaration getremovedeclaration refactoring get replace all references getreplaceallreferences cu rewrite curewrite get cu getcu equals f initializer unit finitializerunit f declaration to remove fdeclarationtoremove refactoring get declaration getdeclaration f declaration to remove fdeclarationtoremove f original declaration foriginaldeclaration refactoring get declaration getdeclaration f references freferences expression references length references length f references freferences get qualified reference getqualifiedreference references f is fis java model util javamodelutil or higher orhigher cu rewrite curewrite get cu getcu get java project getjavaproject f static imports in initializer fstaticimportsininitializer f is fis static imports in initializer staticimportsininitializer hash set hashset simple name simplename expression get qualified reference getqualifiedreference field name fieldname does parent qualify doesparentqualify field name fieldname expression field name fieldname get parent getparent field name fieldname does parent qualify doesparentqualify field name fieldname ast node astnode parent field name fieldname get parent getparent is not null isnotnull parent parent field access fieldaccess field access fieldaccess parent get name getname field name fieldname parent qualified name qualifiedname qualified name qualifiedname parent get name getname field name fieldname parent method invocation methodinvocation method invocation methodinvocation parent get name getname field name fieldname compilation unit change compilationunitchange get change getchange core exception coreexception f references freferences length inline reference inlinereference f references freferences remove constant declaration if necessary removeconstantdeclarationifnecessary f cu rewrite fcurewrite create change createchange inline reference inlinereference expression reference core exception coreexception ast node astnode import decl importdecl ast nodes astnodes get parent getparent reference import declaration importdeclaration import decl importdecl f cu rewrite fcurewrite get import remove r getimportremover register inlined static import registerinlinedstaticimport import declaration importdeclaration import decl importdecl string modified initializer modifiedinitializer prepare initializer for location prepareinitializerforlocation reference modified initializer modifiedinitializer text edit group texteditgroup msg f cu rewrite fcurewrite create group description creategroupdescription refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring inline expression new reference newreference is string placeholder isstringplaceholder ast ast f cu rewrite fcurewrite getast i type binding itypebinding explicit cast explicitcast ast nodes astnodes get explicit cast getexplicitcast f initializer finitializer reference explicit cast explicitcast cast expression castexpression ast new cast expression newcastexpression expression modified initializer expr modifiedinitializerexpr expression f cu rewrite fcurewrite getastrewrite create string placeholder createstringplaceholder modified initializer modifiedinitializer reference get node type getnodetype necessary parentheses checker necessaryparentheseschecker needs parentheses needsparentheses f initializer finitializer cast expression castexpression expression property parenthesized expression parenthesizedexpression parenthesized ast new parenthesized expression newparenthesizedexpression parenthesized set expression setexpression modified initializer expr modifiedinitializerexpr modified initializer expr modifiedinitializerexpr parenthesized set expression setexpression modified initializer expr modifiedinitializerexpr import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext reference f cu rewrite fcurewrite get import rewrite getimportrewrite set type settype f cu rewrite fcurewrite get import rewrite getimportrewrite add import addimport explicit cast explicitcast ast context new reference newreference f initializer finitializer array initializer arrayinitializer array creation arraycreation array creation arraycreation ast new array creation newarraycreation array type arraytype array type arraytype array type arraytype ast node factory astnodefactory new type newtype ast f original declaration foriginaldeclaration array creation arraycreation set type settype array type arraytype array initializer arrayinitializer new array initializer newarrayinitializer array initializer arrayinitializer f cu rewrite fcurewrite getastrewrite create string placeholder createstringplaceholder modified initializer modifiedinitializer ast node astnode array initializer array creation arraycreation set initializer setinitializer new array initializer newarrayinitializer new reference newreference array creation arraycreation i type binding itypebinding type to add to import typetoaddtoimport ast nodes astnodes get type gettype f original declaration foriginaldeclaration resolve binding resolvebinding import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext reference f cu rewrite fcurewrite get import rewrite getimportrewrite f cu rewrite fcurewrite get import rewrite getimportrewrite add import addimport type to add to import typetoaddtoimport context f cu rewrite fcurewrite get import remove r getimportremover register added import registeraddedimport type to add to import typetoaddtoimport get name getname new reference newreference expression f cu rewrite fcurewrite getastrewrite create string placeholder createstringplaceholder modified initializer modifiedinitializer reference get node type getnodetype is string placeholder isstringplaceholder necessary parentheses checker necessaryparentheseschecker needs parentheses needsparentheses is string placeholder isstringplaceholder f initializer finitializer new reference newreference reference get parent getparent reference get location in parent getlocationinparent parenthesized expression parenthesizedexpression parenthesized ast new parenthesized expression newparenthesizedexpression parenthesized set expression setexpression new reference newreference new reference newreference parenthesized f cu rewrite fcurewrite getastrewrite replace reference new reference newreference msg f source range computer fsourcerangecomputer add tight source node addtightsourcenode reference f cu rewrite fcurewrite get import remove r getimportremover register removed node registerremovednode reference string prepare initializer for location prepareinitializerforlocation expression location core exception coreexception hash set hashset simple name simplename static imports in reference staticimportsinreference hash set hashset i java project ijavaproject project f cu rewrite fcurewrite get cu getcu get java project getjavaproject f is fis import references collector importreferencescollector collect location project array list arraylist simple name simplename static imports in reference staticimportsinreference initializer traversal initializertraversal traversal initializer traversal initializertraversal f initializer finitializer f static imports in initializer fstaticimportsininitializer location static imports in reference staticimportsinreference f cu rewrite fcurewrite ast rewrite astrewrite initializer rewrite initializerrewrite traversal get initializer rewrite getinitializerrewrite reuse document gen erating generating app lying applying undo edits i document idocument document document f initializer unit finitializerunit get buffer getbuffer get contents getcontents range marker rangemarker marker range marker rangemarker f initializer finitializer get start position getstartposition f initializer finitializer get length getlength text edit textedit rewrite edits rewriteedits initializer rewrite initializerrewrite rewriteast document f initializer unit finitializerunit get java project getjavaproject get options getoptions remove children removechildren marker add children addchildren rewrite edits rewriteedits marker apply document text edit textedit update regions string rewritten initializer rewritteninitializer document marker get offset getoffset marker get length getlength i region iregion region document get line information getlineinformation document get line of offset getlineofoffset marker get offset getoffset old indent oldindent strings compute indent units computeindentunits document region get offset getoffset region get length getlength project nls strings change indent changeindent nls rewritten initializer rewritteninitializer nls old indent oldindent nls project nls nls text utilities textutilities get default line delimiter getdefaultlinedelimiter document malformed tree exception malformedtreeexception java plugin javaplugin log bad location exception badlocationexception java plugin javaplugin log f initializer unit finitializerunit get buffer getbuffer get text gettext f initializer finitializer get start position getstartposition f initializer finitializer get length getlength remove constant declaration if necessary removeconstantdeclarationifnecessary f declaration to remove fdeclarationtoremove field declaration fielddeclaration parent declaration parentdeclaration field declaration fielddeclaration f declaration to remove fdeclarationtoremove get parent getparent ast node astnode to remove toremove parent declaration parentdeclaration fragments size to remove toremove parent declaration parentdeclaration to remove toremove f declaration to remove fdeclarationtoremove text edit group texteditgroup msg f cu rewrite fcurewrite create group description creategroupdescription refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring remove declaration f cu rewrite fcurewrite getastrewrite remove to remove toremove msg f cu rewrite fcurewrite get import remove r getimportremover register removed node registerremovednode to remove toremove inline target compilation unit inlinetargetcompilationunit simple name simplename get left most getleftmost simple name simplename simple name simplename get left most getleftmost qualified name qualifiedname get qualifier getqualifier f selection start fselectionstart f selection length fselectionlength i compilation unit icompilationunit f selection cu fselectioncu compilation unit rewrite compilationunitrewrite f selection cu rewrite fselectioncurewrite f selected constant name fselectedconstantname i field ifield f field ffield compilation unit rewrite compilationunitrewrite f declaration cu rewrite fdeclarationcurewrite variable declaration fragment variabledeclarationfragment f declaration fdeclaration f declaration selected fdeclarationselected f declaration selected checked fdeclarationselectedchecked f initializer all static final finitializerallstaticfinal f initializer checked finitializerchecked f remove declaration fremovedeclaration f replace all references freplaceallreferences compilation unit change compilationunitchange f changes fchanges creates inline constant refactoring constructor code delegate creator delegatecreator code param field field inline inline constant refactoring inlineconstantrefactoring i field ifield field is not null isnotnull field is true istrue field is binary isbinary f field ffield field creates inline constant refactoring param unit compilation unit code code invoked scripting param node compilation unit node code code invoked scripting param selection start selectionstart start selection param selection length selectionlength length selection inline constant refactoring inlineconstantrefactoring i compilation unit icompilationunit unit compilation unit compilationunit node selection start selectionstart selection length selectionlength is true istrue selection start selectionstart is true istrue selection length selectionlength f selection cu fselectioncu unit f selection start fselectionstart selection start selectionstart f selection length fselectionlength selection length selectionlength unit initialize unit node inline constant refactoring inlineconstantrefactoring java refactoring arguments javarefactoringarguments arguments refactoring status refactoringstatus status refactoring status refactoringstatus initialize status initializestatus initialize arguments status merge initialize status initializestatus initialize i compilation unit icompilationunit compilation unit compilationunit node f selection cu rewrite fselectioncurewrite compilation unit rewrite compilationunitrewrite node f selected constant name fselectedconstantname find constant name node findconstantnamenode find constant name node findconstantnamenode ast node astnode node node finder nodefinder perform f selection cu rewrite fselectioncurewrite get root getroot f selection start fselectionstart f selection length fselectionlength node node field access fieldaccess node field access fieldaccess node get name getname node node i binding ibinding binding resolve binding resolvebinding binding i variable binding ivariablebinding i variable binding ivariablebinding variable binding variablebinding i variable binding ivariablebinding binding variable binding variablebinding is field isfield variable binding variablebinding is enum constant isenumconstant modifiers binding get modifiers getmodifiers modifier is static isstatic modifiers modifier is final isfinal modifiers refactoring status refactoringstatus check static final constant name selected checkstaticfinalconstantnameselected f selected constant name fselectedconstantname refactoring status refactoringstatus create status createstatus refactoring status refactoringstatus fatal refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring field core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes selected refactoring status refactoringstatus override string get name getname refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring returns field inline field link check initial conditions checkinitialconditions i progress monitor iprogressmonitor called field code code i java element ijavaelement get field getfield f field ffield override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception nls begin task begintask f selection cu fselectioncu is structure known isstructureknown refactoring status refactoringstatus create status createstatus refactoring status refactoringstatus fatal refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring syntax errors core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes syntax errors refactoring status refactoringstatus result check static final constant name selected checkstaticfinalconstantnameselected result has fatal error hasfatalerror result result merge find field findfield result has fatal error hasfatalerror result worked result merge find declaration finddeclaration result has fatal error hasfatalerror result worked result merge check initializer checkinitializer result has fatal error hasfatalerror result worked result refactoring status refactoringstatus find field findfield f field ffield i field ifield i variable binding ivariablebinding f selected constant name fselectedconstantname resolve binding resolvebinding get java element getjavaelement f field ffield f field ffield exists refactoring status refactoringstatus create status createstatus refactoring status refactoringstatus fatal refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring local anonymous unsupported core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes local anonymous supported refactoring status refactoringstatus find declaration finddeclaration java model exception javamodelexception f declaration selected checked fdeclarationselectedchecked f declaration selected fdeclarationselected ast node astnode parent f selected constant name fselectedconstantname get parent getparent parent variable declaration fragment variabledeclarationfragment variable declaration fragment variabledeclarationfragment parent declaration parentdeclaration variable declaration fragment variabledeclarationfragment parent parent declaration parentdeclaration get name getname f selected constant name fselectedconstantname f declaration selected fdeclarationselected f declaration cu rewrite fdeclarationcurewrite f selection cu rewrite fselectioncurewrite f declaration fdeclaration variable declaration fragment variabledeclarationfragment f selected constant name fselectedconstantname get parent getparent variable declaration fragment variabledeclarationfragment declaration variable declaration fragment variabledeclarationfragment f selection cu rewrite fselectioncurewrite get root getroot find declaring node finddeclaringnode f selected constant name fselectedconstantname resolve binding resolvebinding declaration f declaration cu rewrite fdeclarationcurewrite f selection cu rewrite fselectioncurewrite f declaration fdeclaration declaration f field ffield get compilation unit getcompilationunit refactoring status refactoringstatus create status createstatus refactoring status refactoringstatus fatal refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring binary file core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes declared class file classfile f declaration cu rewrite fdeclarationcurewrite compilation unit rewrite compilationunitrewrite f field ffield get compilation unit getcompilationunit f declaration fdeclaration ast node search util astnodesearchutil get field declaration fragment node getfielddeclarationfragmentnode f field ffield f declaration cu rewrite fdeclarationcurewrite get root getroot refactoring status refactoringstatus check initializer checkinitializer expression initializer get initializer getinitializer initializer refactoring status refactoringstatus create status createstatus refactoring status refactoringstatus fatal refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring blank fin als finals core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes inline blank f initializer all static final finitializerallstaticfinal constant checks constantchecks is static final constant isstaticfinalconstant i expression fragment iexpressionfragment ast fragment factory astfragmentfactory create fragment for full subtree createfragmentforfullsubtree initializer f initializer checked finitializerchecked refactoring status refactoringstatus variable declaration fragment variabledeclarationfragment get declaration getdeclaration f declaration fdeclaration expression get initializer getinitializer f declaration fdeclaration get initializer getinitializer i compilation unit icompilationunit get declaring compilation unit getdeclaringcompilationunit f field ffield get compilation unit getcompilationunit override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception refactoring status refactoringstatus result refactoring status refactoringstatus nls begin task begintask f selection cu rewrite fselectioncurewrite clearastandimportrewrites f declaration cu rewrite fdeclarationcurewrite clearastandimportrewrites list compilation unit change compilationunitchange array list arraylist hash set hashset simple name simplename static imports in initializer staticimportsininitializer hash set hashset import references collector importreferencescollector collect get initializer getinitializer f field ffield get java project getjavaproject array list arraylist simple name simplename static imports in initializer staticimportsininitializer get replace all references getreplaceallreferences search result group searchresultgroup search result groups searchresultgroups find references findreferences result search result groups searchresultgroups length is canceled iscanceled operation canceled exception operationcanceledexception search result group searchresultgroup group search result groups searchresultgroups i compilation unit icompilationunit group get compilation unit getcompilationunit compilation unit rewrite compilationunitrewrite cu rewrite curewrite get cu rewrite getcurewrite references extract reference nodes extractreferencenodes group get search results getsearchresults cu rewrite curewrite get root getroot inline target compilation unit inlinetargetcompilationunit target compilation unit targetcompilationunit inline target compilation unit inlinetargetcompilationunit cu rewrite curewrite references static imports in initializer staticimportsininitializer compilation unit change compilationunitchange change target compilation unit targetcompilationunit get change getchange change add change is true istrue is declaration selected isdeclarationselected inline target compilation unit inlinetargetcompilationunit target for only selected reference targetforonlyselectedreference inline target compilation unit inlinetargetcompilationunit f selection cu rewrite fselectioncurewrite f selected constant name fselectedconstantname static imports in initializer staticimportsininitializer compilation unit change compilationunitchange change target for only selected reference targetforonlyselectedreference get change getchange change add change result has fatal error hasfatalerror result get remove declaration getremovedeclaration get replace all references getreplaceallreferences declaration removed declarationremoved iterator compilation unit change compilationunitchange iter iterator iter has next hasnext compilation unit change compilationunitchange change iter change get compilation unit getcompilationunit equals f declaration cu rewrite fdeclarationcurewrite get cu getcu declaration removed declarationremoved declaration removed declarationremoved inline target compilation unit inlinetargetcompilationunit target for declaration targetfordeclaration inline target compilation unit inlinetargetcompilationunit f declaration cu rewrite fdeclarationcurewrite static imports in initializer staticimportsininitializer compilation unit change compilationunitchange change target for declaration targetfordeclaration get change getchange change add change i compilation unit icompilationunit cus i compilation unit icompilationunit size size compilation unit change compilationunitchange change cus change get compilation unit getcompilationunit result merge checks validate modifies files validatemodifiesfiles resource util resourceutil get files getfiles cus get validation context getvalidationcontext worked f changes fchanges to array toarray compilation unit change compilationunitchange size result extract reference nodes extractreferencenodes search match searchmatch search results searchresults compilation unit compilationunit cu node cunode references search results searchresults length search results searchresults length references node finder nodefinder perform cu node cunode search results searchresults get offset getoffset search results searchresults get length getlength references compilation unit rewrite compilationunitrewrite get cu rewrite getcurewrite i compilation unit icompilationunit compilation unit rewrite compilationunitrewrite cu rewrite curewrite equals f selection cu fselectioncu cu rewrite curewrite f selection cu rewrite fselectioncurewrite equals f field ffield get compilation unit getcompilationunit cu rewrite curewrite f declaration cu rewrite fdeclarationcurewrite cu rewrite curewrite compilation unit rewrite compilationunitrewrite cu rewrite curewrite search result group searchresultgroup find references findreferences i progress monitor iprogressmonitor refactoring status refactoringstatus status java model exception javamodelexception refactoring search engine refactoringsearchengine engine refactoring search engine refactoringsearchengine search pattern searchpattern create pattern createpattern f field ffield i java search constants ijavasearchconstants references engine set filtering setfiltering engine set scope setscope refactoring scope factory refactoringscopefactory create f field ffield engine set status setstatus status engine set requestor setrequestor i refactoring search requestor irefactoringsearchrequestor override search match searchmatch accept search match acceptsearchmatch search match searchmatch match match is inside doc comment isinsidedoccomment match engine search pattern searchpattern sub progress monitor subprogressmonitor search result group searchresultgroup engine get results getresults override change create change createchange i progress monitor iprogressmonitor core exception coreexception begin task begintask refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring preview map string string arguments hash map hashmap string project i java project ijavaproject java project javaproject f selection cu fselectioncu get java project getjavaproject java project javaproject project java project javaproject get element name getelementname flags refactoring descriptor refactoringdescriptor structural change java refactoring descriptor javarefactoringdescriptor jar refactoring java refactoring descriptor javarefactoringdescriptor jar source attachment flags is private isprivate f field ffield get flags getflags flags refactoring descriptor refactoringdescriptor multi change java model exception javamodelexception exception java plugin javaplugin log exception string description messages format refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring descriptor description java element labels javaelementlabels get element label getelementlabel f field ffield java element labels javaelementlabels string header messages format refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring descriptor description string java element labels javaelementlabels get element label getelementlabel f field ffield java element labels javaelementlabels fully qualified java element labels javaelementlabels get element label getelementlabel f field ffield get parent getparent java element labels javaelementlabels fully qualified jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header comment add setting addsetting messages format refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring original pattern java element labels javaelementlabels get element label getelementlabel f field ffield java element labels javaelementlabels fully qualified f remove declaration fremovedeclaration comment add setting addsetting refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring remove declaration f replace all references freplaceallreferences comment add setting addsetting refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring replace references inline constant descriptor inlineconstantdescriptor descriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create inline constant descriptor createinlineconstantdescriptor project description comment as string asstring arguments flags arguments java refactoring descriptor util javarefactoringdescriptorutil attribute input java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f selection cu fselectioncu nls arguments java refactoring descriptor util javarefactoringdescriptorutil attribute selection integer f selection start fselectionstart to string tostring integer f selection length fselectionlength to string tostring arguments attribute remove value of valueof f remove declaration fremovedeclaration to string tostring arguments attribute replace value of valueof f replace all references freplaceallreferences to string tostring dynamic validation refactoring change dynamicvalidationrefactoringchange descriptor refactoring core messages refactoringcoremessages inline constant refactoring inlineconstantrefactoring inline f changes fchanges f changes fchanges check in variant checkinvariant is declaration selected isdeclarationselected is true istrue f replace all references freplaceallreferences get remove declaration getremovedeclaration f remove declaration fremovedeclaration get replace all references getreplaceallreferences check in variant checkinvariant f replace all references freplaceallreferences is declaration selected isdeclarationselected is true istrue f declaration selected checked fdeclarationselectedchecked f declaration selected fdeclarationselected is initializer all static final isinitializerallstaticfinal is true istrue f initializer checked finitializerchecked f initializer all static final finitializerallstaticfinal set remove declaration setremovedeclaration remove declaration removedeclaration f remove declaration fremovedeclaration remove declaration removedeclaration set replace all references setreplaceallreferences replace all references replaceallreferences f replace all references freplaceallreferences replace all references replaceallreferences check in variant checkinvariant refactoring status refactoringstatus initialize java refactoring arguments javarefactoringarguments arguments string selection arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute selection selection offset length string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer selection tokenizer has more tokens hasmoretokens offset integer value of valueof tokenizer next token nexttoken int value intvalue tokenizer has more tokens hasmoretokens length integer value of valueof tokenizer next token nexttoken int value intvalue offset length f selection start fselectionstart offset f selection length fselectionlength length refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring illegal argument object selection java refactoring descriptor util javarefactoringdescriptorutil attribute selection string handle arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute input handle i java element ijavaelement element java refactoring descriptor util javarefactoringdescriptorutil handle to element handletoelement arguments get project getproject handle element element exists java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get name getname i java refactorings ijavarefactorings inline constant element i compilation unit icompilationunit f selection cu fselectioncu i compilation unit icompilationunit element selection refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute selection element i field ifield i field ifield field i field ifield element i source range isourcerange range field get name range getnamerange range f selection start fselectionstart range get offset getoffset f selection length fselectionlength range get length getlength refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist i java refactorings ijavarefactorings inline constant java model exception javamodelexception exception java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get name getname i java refactorings ijavarefactorings inline constant f selection cu fselectioncu field get compilation unit getcompilationunit refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring illegal argument object handle java refactoring descriptor util javarefactoringdescriptorutil attribute input ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level parser set resolve bindings setresolvebindings parser set source setsource f selection cu fselectioncu compilation unit compilationunit unit compilation unit compilationunit parser createast initialize f selection cu fselectioncu unit check static final constant name selected checkstaticfinalconstantnameselected has fatal error hasfatalerror java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get name getname i java refactorings ijavarefactorings inline constant refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute input string replace arguments get attribute getattribute attribute replace replace f replace all references freplaceallreferences value of valueof replace boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute replace string remove arguments get attribute getattribute attribute remove remove f remove declaration fremovedeclaration value of valueof remove boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute remove refactoring status refactoringstatus