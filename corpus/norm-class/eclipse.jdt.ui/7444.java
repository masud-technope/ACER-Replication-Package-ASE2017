copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring java util arrays java util comparator java util hash map hashmap java util map org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime path org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i resource iresource org eclipse core resources resources plugin resourcesplugin org eclipse ltk core refactoring change org eclipse ltk core refactoring null change nullchange org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt internal corext refactoring abstract java element rename change abstractjavaelementrenamechange org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring util java element util javaelementutil org eclipse jdt internal corext util messages org eclipse jdt java element labels javaelementlabels org eclipse jdt internal viewsupport basic element labels basicelementlabels rename package change renamepackagechange abstract java element rename change abstractjavaelementrenamechange i path ipath create path createpath string package name packagename path package name packagename replace i path ipath separator map i resource iresource f compilation unit stamps fcompilationunitstamps f rename subpackages frenamesubpackages rename package change renamepackagechange i package fragment ipackagefragment pack string new name newname rename subpackages renamesubpackages pack get path getpath pack get element name getelementname new name newname i resource iresource stamp rename subpackages renamesubpackages nls is true istrue pack is read only isreadonly read rename package change renamepackagechange i path ipath resource path resourcepath string old name oldname string new name newname stamp to restore stamptorestore map i resource iresource compilation unit stamps compilationunitstamps rename subpackages renamesubpackages resource path resourcepath old name oldname new name newname stamp to restore stamptorestore f compilation unit stamps fcompilationunitstamps compilation unit stamps compilationunitstamps f rename subpackages frenamesubpackages rename subpackages renamesubpackages set validation method setvalidationmethod validate dirty add stamps addstamps map i resource iresource stamps i compilation unit icompilationunit units units length i resource iresource resource units get resource getresource stamp i resource iresource stamp resource stamp resource get modification stamp getmodificationstamp i resource iresource stamp stamps resource stamp override i path ipath create new path createnewpath i package fragment ipackagefragment old package oldpackage get package getpackage i path ipath old package name oldpackagename create path createpath old package oldpackage get element name getelementname i path ipath new package name newpackagename create path createpath get new name getnewname get resource path getresourcepath remove last segments removelastsegments old package name oldpackagename segment count segmentcount append new package name newpackagename i path ipath create new path createnewpath i package fragment ipackagefragment old package oldpackage i path ipath old package path oldpackagepath create path createpath old package oldpackage get element name getelementname i path ipath new package path newpackagepath create path createpath get new name getnewname old package oldpackage old package oldpackage get path getpath remove last segments removelastsegments old package path oldpackagepath segment count segmentcount append new package path newpackagepath override change create undo change createundochange stamp to restore stamptorestore core exception coreexception i package fragment ipackagefragment pack get package getpackage pack null change nullchange map i resource iresource stamps hash map hashmap f rename subpackages frenamesubpackages add stamps addstamps stamps pack get compilation units getcompilationunits i package fragment ipackagefragment all packages allpackages java element util javaelementutil get package and subpackages getpackageandsubpackages pack all packages allpackages length i package fragment ipackagefragment current package currentpackage all packages allpackages add stamps addstamps stamps current package currentpackage get compilation units getcompilationunits rename package change renamepackagechange create new path createnewpath get new name getnewname get old name getoldname stamp to restore stamptorestore stamps f rename subpackages frenamesubpackages note reverse change works rename package renamepackage change merge source existing target override do rename dorename i progress monitor iprogressmonitor core exception coreexception i package fragment ipackagefragment pack get package getpackage pack f rename subpackages frenamesubpackages rename package renamepackage pack create new path createnewpath get new name getnewname i package fragment ipackagefragment all packages allpackages java element util javaelementutil get package and subpackages getpackageandsubpackages pack arrays sort all packages allpackages comparator i package fragment ipackagefragment override compare i package fragment ipackagefragment i package fragment ipackagefragment string get element name getelementname string get element name getelementname compare to compareto count all packages allpackages length nls begin task begintask count renaming sub package subpackage inside out insideout get new name getnewname starts with startswith get old name getoldname count i package fragment ipackagefragment current package currentpackage all packages allpackages inside out insideout count rename package renamepackage current package currentpackage sub progress monitor subprogressmonitor create new path createnewpath current package currentpackage get new name getnewname current package currentpackage override string get name getname string msg f rename subpackages frenamesubpackages refactoring core messages refactoringcoremessages rename package change renamepackagechange sub packages subpackages refactoring core messages refactoringcoremessages rename package change renamepackagechange string basic element labels basicelementlabels get java element name getjavaelementname get old name getoldname basic element labels basicelementlabels get java element name getjavaelementname get new name getnewname messages format msg string get new name getnewname i package fragment ipackagefragment sub package subpackage get new name getnewname sub package subpackage get element name getelementname substring get old name getoldname length i package fragment ipackagefragment get package getpackage i package fragment ipackagefragment get modified element getmodifiedelement override refactoring status refactoringstatus is valid isvalid i progress monitor iprogressmonitor core exception coreexception nls begin task begintask refactoring status refactoringstatus result result refactoring status refactoringstatus i java element ijavaelement element i java element ijavaelement get modified element getmodifiedelement don check read don validate edit result merge is valid isvalid sub progress monitor subprogressmonitor result has fatal error hasfatalerror result element element exists element i package fragment ipackagefragment i package fragment ipackagefragment pack i package fragment ipackagefragment element f rename subpackages frenamesubpackages i package fragment ipackagefragment all packages allpackages java element util javaelementutil get package and subpackages getpackageandsubpackages pack sub progress monitor subprogressmonitor sub pm subpm sub progress monitor subprogressmonitor sub pm subpm begin task begintask nls all packages allpackages length all packages allpackages length don check read don validate edit check if modifiable checkifmodifiable result all packages allpackages get resource getresource validate dirty result has fatal error hasfatalerror result is valid isvalid result all packages allpackages sub progress monitor subprogressmonitor sub pm subpm is valid isvalid result pack sub progress monitor subprogressmonitor result is valid isvalid refactoring status refactoringstatus result i package fragment ipackagefragment pack i progress monitor iprogressmonitor java model exception javamodelexception i compilation unit icompilationunit units pack get compilation units getcompilationunits nls begin task begintask units length units length sub task subtask messages format refactoring core messages refactoringcoremessages rename package change renamepackagechange checking change java element labels javaelementlabels get element label getelementlabel pack java element labels javaelementlabels check if modifiable checkifmodifiable result units get resource getresource validate read validate dirty worked rename package renamepackage i package fragment ipackagefragment pack i progress monitor iprogressmonitor i path ipath new path newpath string new name newname java model exception javamodelexception core exception coreexception pack exists empty parent single sub package subpackage renamed https bugs eclipse org bugs bug cgi pack rename new name newname f compilation unit stamps fcompilationunitstamps i package fragment ipackagefragment new pack newpack i package fragment ipackagefragment java core javacore create resources plugin resourcesplugin get workspace getworkspace get root getroot get folder getfolder new path newpath new pack newpack exists i compilation unit icompilationunit units new pack newpack get compilation units getcompilationunits units length i resource iresource resource units get resource getresource resource stamp f compilation unit stamps fcompilationunitstamps resource stamp resource revert modification stamp revertmodificationstamp stamp long value longvalue