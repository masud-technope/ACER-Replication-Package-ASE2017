copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt tests refactoring java io exception ioexception junit framework test junit framework test suite testsuite org eclipse core runtime core exception coreexception org eclipse core runtime null progress monitor nullprogressmonitor org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i field ifield org eclipse jdt core i method imethod org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i type itype org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt internal corext refactoring delegates delegate creator delegatecreator org eclipse jdt internal corext refactoring delegates delegate field creator delegatefieldcreator org eclipse jdt internal corext refactoring delegates delegate method creator delegatemethodcreator org eclipse jdt internal corext refactoring structure ast node search util astnodesearchutil org eclipse jdt internal corext refactoring structure compilation unit rewrite compilationunitrewrite org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal java editor javaeditor ast provider astprovider delegate creator tests delegatecreatortests refactoring test refactoringtest delegate creator tests delegatecreatortests clazz delegate creator tests delegatecreatortests string refactoring path delegate creator delegatecreator delegate creator tests delegatecreatortests string override string get refactoring path getrefactoringpath refactoring path test suite refactoring test setup refactoringtestsetup test suite testsuite clazz test set up test setuptest test test refactoring test setup refactoringtestsetup test method helper methodhelper string method name methodname string args copy string new name newname string new type name newtypename exception i type binding itypebinding destination create target binding createtargetbinding new type name newtypename helper method name methodname args copy new name newname destination field helper fieldhelper string field name fieldname copy string new name newname string new type name newtypename exception i type binding itypebinding destination create target binding createtargetbinding new type name newtypename helper field name fieldname copy new name newname destination i type binding itypebinding create target binding createtargetbinding string new type name newtypename exception java model exception javamodelexception i type binding itypebinding destination new type name newtypename i compilation unit icompilationunit create ufrom test file createcufromtestfile get package p getpackagep new type name newtypename i type itype class new classnew get type gettype new type name newtypename compilation unit compilationunit cu node cunode refactoringastparser ast provider astprovider shared ast level parse type declaration typedeclaration ast node search util astnodesearchutil get type declaration node gettypedeclarationnode class new classnew cu node cunode destination resolve binding resolvebinding destination helper string method name methodname string args string field name fieldname copy string new name newname i type binding itypebinding destination exception java model exception javamodelexception core exception coreexception io exception ioexception i compilation unit icompilationunit create ufrom test file createcufromtestfile get package p getpackagep i type itype class a classa get type gettype compilation unit rewrite compilationunitrewrite rewrite compilation unit rewrite compilationunitrewrite rewrite set resolve bindings setresolvebindings body declaration bodydeclaration delegate creator delegatecreator creator method name methodname i method imethod method class a classa get method getmethod method name methodname args ast node search util astnodesearchutil get method declaration node getmethoddeclarationnode method rewrite get root getroot creator delegate method creator delegatemethodcreator i field ifield field class a classa get field getfield field name fieldname ast node search util astnodesearchutil get field declaration node getfielddeclarationnode field rewrite get root getroot creator delegate field creator delegatefieldcreator creator set declaration setdeclaration creator set source rewrite setsourcerewrite rewrite creator set copy setcopy copy new name newname creator set new element name setnewelementname new name newname destination creator set new location setnewlocation destination creator prepare delegate preparedelegate creator create edit createedit compilation unit change compilationunitchange create change createchange rewrite create change createchange create change createchange initialize validation data initializevalidationdata null progress monitor nullprogressmonitor create change createchange perform null progress monitor nullprogressmonitor assert equal lines assertequallines invalid delegate created get file contents getfilecontents get output test file name getoutputtestfilename get source getsource test m testm exception create delegate ext ras extras method helper methodhelper foo string test m testm exception copy existing javadoc method helper methodhelper foo string test m testm exception existing annotations method helper methodhelper foo string test m testm exception method helper methodhelper foo string bar test m testm exception type method helper methodhelper foo string test m testm exception type method helper methodhelper foo string bar test m testm exception ensure comments parameters copied method helper methodhelper foo string q string qstring q string qstring bar test m testm exception i package fragment ipackagefragment get root getroot create package fragment createpackagefragment i compilation unit icompilationunit create ufrom test file createcufromtestfile i type itype class new classnew get type gettype compilation unit compilationunit cu node cunode refactoringastparser ast provider astprovider shared ast level parse type declaration typedeclaration ast node search util astnodesearchutil get type declaration node gettypedeclarationnode class new classnew cu node cunode i type binding itypebinding destination resolve binding resolvebinding helper foo string destination test m testm exception method ensure body created method helper methodhelper foo string test m testm exception method ensure body created method helper methodhelper foo string test m testm exception constructor method helper methodhelper string fields test f testf exception create delegate ext ras extras field helper fieldhelper foo test f testf exception copy existing javadoc field helper fieldhelper foo test f testf exception existing annotations field helper fieldhelper foo test f testf exception field helper fieldhelper foo bar test f testf exception type field helper fieldhelper foo test f testf exception type field helper fieldhelper foo bar test f testf exception ensure comments parameters copied field helper fieldhelper foo test f testf exception i package fragment ipackagefragment get root getroot create package fragment createpackagefragment i compilation unit icompilationunit create ufrom test file createcufromtestfile i type itype class new classnew get type gettype compilation unit compilationunit cu node cunode refactoringastparser ast provider astprovider shared ast level parse type declaration typedeclaration ast node search util astnodesearchutil get type declaration node gettypedeclarationnode class new classnew cu node cunode i type binding itypebinding destination resolve binding resolvebinding helper foo destination test f testf exception initializer removed field helper fieldhelper foo