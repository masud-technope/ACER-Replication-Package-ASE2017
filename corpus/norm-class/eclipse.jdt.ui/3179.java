copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring code java util array list arraylist java util arrays java util hash map hashmap java util iterator java util list java util map java util string tokenizer stringtokenizer org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse text edits text edit textedit org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring change descriptor refactoringchangedescriptor org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring refactoring status context refactoringstatuscontext org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom array creation arraycreation org eclipse jdt core dom array initializer arrayinitializer org eclipse jdt core dom array type arraytype org eclipse jdt core dom assignment org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom catch clause catchclause org eclipse jdt core dom child list property descriptor childlistpropertydescriptor org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom constructor invocation constructorinvocation org eclipse jdt core dom dimension org eclipse jdt core dom expression org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i extended modifier iextendedmodifier org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom javadoc org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom modifier org eclipse jdt core dom simple name simplename org eclipse jdt core dom statement org eclipse jdt core dom switch statement switchstatement org eclipse jdt core dom type org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom variable declaration variabledeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt core refactoring i java refactorings ijavarefactorings org eclipse jdt core refactoring descriptors convert local variable descriptor convertlocalvariabledescriptor org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom dimension rewrite dimensionrewrite org eclipse jdt internal corext dom hierarchicalastvisitor org eclipse jdt internal corext dom modifier rewrite modifierrewrite org eclipse jdt internal corext linked proposal model linkedproposalmodel org eclipse jdt internal corext linked proposal position group linkedproposalpositiongroup org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring arguments javarefactoringarguments org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring text change compatibility textchangecompatibility org eclipse jdt internal corext refactoring rename temp declaration finder tempdeclarationfinder org eclipse jdt internal corext refactoring rename temp occurrence analyzer tempoccurrenceanalyzer org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal corext refactoring util resource util resourceutil org eclipse jdt internal corext util jdt flags jdtflags org eclipse jdt internal corext util messages org eclipse jdt code generation codegeneration org eclipse jdt java element labels javaelementlabels org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal viewsupport basic element labels basicelementlabels org eclipse jdt internal viewsupport binding label provider bindinglabelprovider promote temp to field refactoring promotetemptofieldrefactoring refactoring nls string attribute nls string attribute nls string attribute visibility visibility nls string attribute initialize initialize f selection start fselectionstart f selection length fselectionlength i compilation unit icompilationunit f cu fcu initialize field initialize method initialize constructor nls string linked settings string f field name ffieldname f visibility fvisibility modifier f declare static fdeclarestatic f declare final fdeclarefinal f initialize in finitializein initialize constraints fields comp utations computations compilation unit compilationunit f compilation unit node fcompilationunitnode variable declaration variabledeclaration f temp declaration node ftempdeclarationnode analysis f initializer uses local types finitializeruseslocaltypes f temp type uses class type variables ftemptypeusesclasstypevariables scripting f self initial izing fselfinitializing linked proposal model linkedproposalmodel f linked proposal model flinkedproposalmodel creates promote temp field refactoring param unit compilation unit code code invoked scripting param selection start selectionstart start param selection length selectionlength length promote temp to field refactoring promotetemptofieldrefactoring i compilation unit icompilationunit unit selection start selectionstart selection length selectionlength is true istrue selection start selectionstart is true istrue selection length selectionlength f selection start fselectionstart selection start selectionstart f selection length fselectionlength selection length selectionlength f cu fcu unit nls f field name ffieldname f visibility fvisibility modifier f declare static fdeclarestatic f declare final fdeclarefinal f initialize in finitializein initialize method f linked proposal model flinkedproposalmodel creates promote temp field refactoring param declaration variable declaration node convert field promote temp to field refactoring promotetemptofieldrefactoring variable declaration variabledeclaration declaration is true istrue declaration f temp declaration node ftempdeclarationnode declaration i variable binding ivariablebinding resolve binding resolvebinding declaration resolve binding resolvebinding is true istrue resolve binding resolvebinding resolve binding resolvebinding is parameter isparameter resolve binding resolvebinding is field isfield ast node astnode root declaration get root getroot is true istrue root compilation unit compilationunit f compilation unit node fcompilationunitnode compilation unit compilationunit root i java element ijavaelement input f compilation unit node fcompilationunitnode get java element getjavaelement is true istrue input i compilation unit icompilationunit f cu fcu i compilation unit icompilationunit input f selection start fselectionstart declaration get start position getstartposition f selection length fselectionlength declaration get length getlength nls f field name ffieldname f visibility fvisibility modifier f declare static fdeclarestatic f declare final fdeclarefinal f initialize in finitializein initialize method f linked proposal model flinkedproposalmodel promote temp to field refactoring promotetemptofieldrefactoring java refactoring arguments javarefactoringarguments arguments refactoring status refactoringstatus status refactoring status refactoringstatus initialize status initializestatus initialize arguments status merge initialize status initializestatus override string get name getname refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring get available visibilities getavailablevisibilities modifier modifier modifier modifier get visibility getvisibility f visibility fvisibility get declare final getdeclarefinal f declare final fdeclarefinal get declare static getdeclarestatic f declare static fdeclarestatic get initialize in getinitializein f initialize in finitializein set visibility setvisibility access modifier accessmodifier is true istrue access modifier accessmodifier modifier access modifier accessmodifier modifier access modifier accessmodifier modifier access modifier accessmodifier modifier f visibility fvisibility access modifier accessmodifier set declare final setdeclarefinal declare final declarefinal f declare final fdeclarefinal declare final declarefinal set declare static setdeclarestatic declare static declarestatic f declare static fdeclarestatic declare static declarestatic set field name setfieldname string field name fieldname is not null isnotnull field name fieldname f field name ffieldname field name fieldname set initialize in setinitializein initialize in initializein is true istrue initialize in initializein initialize constructor initialize in initializein initialize field initialize in initializein initialize method f initialize in finitializein initialize in initializein can enable setting static canenablesettingstatic f initialize in finitializein initialize constructor is temp declared in static method istempdeclaredinstaticmethod f temp type uses class type variables ftemptypeusesclasstypevariables can enable setting final canenablesettingfinal f initialize in finitializein initialize constructor can enable setting declare in constructors canenablesettingdeclareinconstructors temp has assignments other than initialization temphasassignmentsotherthaninitialization f initialize in finitializein initialize field can enable setting declare in field declaration canenablesettingdeclareinfielddeclaration temp has assignments other than initialization temphasassignmentsotherthaninitialization get method declaration getmethoddeclaration is constructor isconstructor temp has assignments other than initialization temphasassignmentsotherthaninitialization temp has assignments other than initialization temphasassignmentsotherthaninitialization temp assignment finder tempassignmentfinder assignment finder assignmentfinder temp assignment finder tempassignmentfinder f temp declaration node ftempdeclarationnode f compilation unit node fcompilationunitnode accept assignment finder assignmentfinder assignment finder assignmentfinder has assignments hasassignments can enable setting declare in constructors canenablesettingdeclareinconstructors f declare static fdeclarestatic f initializer uses local types finitializeruseslocaltypes get method declaration getmethoddeclaration is constructor isconstructor is declared in anonymous class isdeclaredinanonymousclass is temp declared in static method istempdeclaredinstaticmethod temp has initializer temphasinitializer can enable setting declare in method canenablesettingdeclareinmethod f declare final fdeclarefinal temp has initializer temphasinitializer temp has initializer temphasinitializer get temp initializer gettempinitializer can enable setting declare in field declaration canenablesettingdeclareinfielddeclaration f initializer uses local types finitializeruseslocaltypes temp has initializer temphasinitializer expression get temp initializer gettempinitializer f temp declaration node ftempdeclarationnode get initializer getinitializer is temp declared in static method istempdeclaredinstaticmethod modifier is static isstatic get method declaration getmethoddeclaration get modifiers getmodifiers method declaration methoddeclaration get method declaration getmethoddeclaration method declaration methoddeclaration ast nodes astnodes get parent getparent f temp declaration node ftempdeclarationnode method declaration methoddeclaration is declared in anonymous class isdeclaredinanonymousclass ast nodes astnodes get parent getparent f temp declaration node ftempdeclarationnode anonymous class declaration anonymousclassdeclaration org eclipse jdt internal corext refactoring base refactoring check activation checkactivation org eclipse core runtime i progress monitor iprogressmonitor override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception refactoring status refactoringstatus result checks validate modifies files validatemodifiesfiles resource util resourceutil get files getfiles i compilation unit icompilationunit f cu fcu get validation context getvalidationcontext result has fatal error hasfatalerror result initast f temp declaration node ftempdeclarationnode refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring select declaration checks is declared in isdeclaredin f temp declaration node ftempdeclarationnode method declaration methoddeclaration refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring declared methods is method parameter ismethodparameter refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring method parameters is temp an exception in catch block istempanexceptionincatchblock refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring exceptions ast node astnode declaring type declaringtype ast res olving astresolving find parent type findparenttype f temp declaration node ftempdeclarationnode declaring type declaringtype type declaration typedeclaration type declaration typedeclaration declaring type declaringtype is interface isinterface refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring methods result merge check temp type for local type usage checktemptypeforlocaltypeusage result has fatal error hasfatalerror result check temp initializer for local type usage checktempinitializerforlocaltypeusage f self initial izing fselfinitializing initialize defaults initializedefaults result initialize defaults initializedefaults f visibility fvisibility modifier f declare static fdeclarestatic modifier is static isstatic get method declaration getmethoddeclaration get modifiers getmodifiers f declare final fdeclarefinal can enable setting declare in method canenablesettingdeclareinmethod f initialize in finitializein initialize method can enable setting declare in field declaration canenablesettingdeclareinfielddeclaration f initialize in finitializein initialize field can enable setting declare in constructors canenablesettingdeclareinconstructors f initialize in finitializein initialize constructor string guess field names guessfieldnames string raw temp name rawtempname stub utility stubutility get base name getbasename f temp declaration node ftempdeclarationnode resolve binding resolvebinding f cu fcu get java project getjavaproject string excluded names excludednames get names of fields in declaring type getnamesoffieldsindeclaringtype dim ast nodes astnodes get dimensions getdimensions f temp declaration node ftempdeclarationnode stub utility stubutility get field name suggestions getfieldnamesuggestions f cu fcu get java project getjavaproject raw temp name rawtempname dim get modifiers getmodifiers excluded names excludednames string get initial field name getinitialfieldname string suggested names suggestednames guess field names guessfieldnames suggested names suggestednames length f linked proposal model flinkedproposalmodel linked proposal position group linkedproposalpositiongroup name group namegroup f linked proposal model flinkedproposalmodel get position group getpositiongroup linked suggested names suggestednames length name group namegroup add proposal addproposal suggested names suggestednames suggested names suggestednames length suggested names suggestednames f temp declaration node ftempdeclarationnode get name getname get identifier getidentifier string get names of fields in declaring type getnamesoffieldsindeclaringtype abstract type declaration abstracttypedeclaration type get enclosing type getenclosingtype type type declaration typedeclaration field declaration fielddeclaration fields type declaration typedeclaration type get fields getfields list string result array list arraylist fields length fields length iterator variable declaration fragment variabledeclarationfragment iter fields fragments iterator iter has next hasnext variable declaration fragment variabledeclarationfragment field iter result add field get name getname get identifier getidentifier result to array toarray string result size string check temp initializer for local type usage checktempinitializerforlocaltypeusage expression initializer f temp declaration node ftempdeclarationnode get initializer getinitializer initializer i method binding imethodbinding declaring method binding declaringmethodbinding get method declaration getmethoddeclaration resolve binding resolvebinding i type binding itypebinding method type parameters methodtypeparameters declaring method binding declaringmethodbinding i type binding itypebinding declaring method binding declaringmethodbinding get type parameters gettypeparameters local type and variable usage analyzer localtypeandvariableusageanalyzer local type analyer localtypeanalyer local type and variable usage analyzer localtypeandvariableusageanalyzer method type parameters methodtypeparameters initializer accept local type analyer localtypeanalyer f initializer uses local types finitializeruseslocaltypes local type analyer localtypeanalyer get usage of enclosing nodes getusageofenclosingnodes is empty isempty refactoring status refactoringstatus check temp type for local type usage checktemptypeforlocaltypeusage variable declaration statement variabledeclarationstatement vds get temp declaration statement gettempdeclarationstatement vds refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring promote type type vds get type gettype i type binding itypebinding binding type resolve binding resolvebinding binding refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring promote i method binding imethodbinding declaring method binding declaringmethodbinding get method declaration getmethoddeclaration resolve binding resolvebinding i type binding itypebinding method type parameters methodtypeparameters declaring method binding declaringmethodbinding i type binding itypebinding declaring method binding declaringmethodbinding get type parameters gettypeparameters local type and variable usage analyzer localtypeandvariableusageanalyzer analyzer local type and variable usage analyzer localtypeandvariableusageanalyzer method type parameters methodtypeparameters type accept analyzer uses local types useslocaltypes analyzer get usage of enclosing nodes getusageofenclosingnodes is empty isempty f temp type uses class type variables ftemptypeusesclasstypevariables analyzer get class type variables used getclasstypevariablesused uses local types useslocaltypes refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring type declared locally variable declaration statement variabledeclarationstatement get temp declaration statement gettempdeclarationstatement variable declaration statement variabledeclarationstatement ast nodes astnodes get parent getparent f temp declaration node ftempdeclarationnode variable declaration statement variabledeclarationstatement is temp an exception in catch block istempanexceptionincatchblock f temp declaration node ftempdeclarationnode get parent getparent catch clause catchclause is method parameter ismethodparameter f temp declaration node ftempdeclarationnode get parent getparent method declaration methoddeclaration initast i progress monitor iprogressmonitor f compilation unit node fcompilationunitnode f compilation unit node fcompilationunitnode refactoringastparser parsewithastprovider f cu fcu f temp declaration node ftempdeclarationnode temp declaration finder tempdeclarationfinder find temp declaration findtempdeclaration f compilation unit node fcompilationunitnode f selection start fselectionstart f selection length fselectionlength refactoring status refactoringstatus validate input validateinput checks check field name checkfieldname f field name ffieldname f cu fcu org eclipse jdt internal corext refactoring base refactoring check input checkinput org eclipse core runtime i progress monitor iprogressmonitor override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception refactoring status refactoringstatus result refactoring status refactoringstatus result merge check clashes with existing fields checkclasheswithexistingfields f initialize in finitializein initialize constructor result merge check clashes in constructors checkclashesinconstructors result refactoring status refactoringstatus check clashes in constructors checkclashesinconstructors is true istrue f initialize in finitializein initialize constructor is true istrue is declared in anonymous class isdeclaredinanonymousclass abstract type declaration abstracttypedeclaration declaration abstract type declaration abstracttypedeclaration get method declaration getmethoddeclaration get parent getparent declaration type declaration typedeclaration method declaration methoddeclaration methods type declaration typedeclaration declaration get methods getmethods methods length method declaration methoddeclaration method methods method is constructor isconstructor name collector namecollector name collector namecollector name collector namecollector method override visit node visitnode ast node astnode node method accept name collector namecollector list string names name collector namecollector get names getnames names f field name ffieldname string basic element labels basicelementlabels get java element name getjavaelementname f field name ffieldname binding label provider bindinglabelprovider get binding label getbindinglabel method resolve binding resolvebinding java element labels javaelementlabels fully qualified string msg messages format refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring conflict refactoring status refactoringstatus create fatal error status createfatalerrorstatus msg refactoring status refactoringstatus check clashes with existing fields checkclasheswithexistingfields field declaration fielddeclaration existing fields existingfields get field declarations getfielddeclarations existing fields existingfields length field declaration fielddeclaration declaration existing fields existingfields variable declaration fragment variabledeclarationfragment fragments variable declaration fragment variabledeclarationfragment declaration fragments to array toarray variable declaration fragment variabledeclarationfragment declaration fragments size fragments length variable declaration fragment variabledeclarationfragment fragment fragments f field name ffieldname equals fragment get name getname get identifier getidentifier conflict refactoring status context refactoringstatuscontext context java status context javastatuscontext create f cu fcu fragment refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring conflict field context field declaration fielddeclaration get field declarations getfielddeclarations list body declaration bodydeclaration body declarations bodydeclarations ast nodes astnodes get body declarations getbodydeclarations get method declaration getmethoddeclaration get parent getparent list field declaration fielddeclaration fields array list arraylist iterator body declaration bodydeclaration iter body declarations bodydeclarations iterator iter has next hasnext object iter field declaration fielddeclaration fields add field declaration fielddeclaration fields to array toarray field declaration fielddeclaration fields size org eclipse jdt internal corext refactoring base i refactoring irefactoring create change createchange org eclipse core runtime i progress monitor iprogressmonitor override change create change createchange i progress monitor iprogressmonitor core exception coreexception nls begin task begintask f field name ffieldname length f field name ffieldname get initial field name getinitialfieldname ast rewrite astrewrite rewrite ast rewrite astrewrite create f compilation unit node fcompilationunitnode getast f initialize in finitializein initialize method temp has initializer temphasinitializer add local declaration split addlocaldeclarationsplit rewrite add local declaration removal addlocaldeclarationremoval rewrite f initialize in finitializein initialize constructor add initializers to constructors addinitializerstoconstructors rewrite add temp renames addtemprenames rewrite add field declaration addfielddeclaration rewrite compilation unit change compilationunitchange result compilation unit change compilationunitchange refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring f cu fcu result set descriptor setdescriptor refactoring change descriptor refactoringchangedescriptor get refactoring descriptor getrefactoringdescriptor text edit textedit resulting edits resultingedits rewrite rewriteast text change compatibility textchangecompatibility add text edit addtextedit result refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring edit name editname resulting edits resultingedits result add temp renames addtemprenames ast rewrite astrewrite rewrite no name change nonamechange f field name ffieldname equals f temp declaration node ftempdeclarationnode get name getname get identifier getidentifier f linked proposal model flinkedproposalmodel no name change nonamechange needed temp occurrence analyzer tempoccurrenceanalyzer analyzer temp occurrence analyzer tempoccurrenceanalyzer f temp declaration node ftempdeclarationnode analyzer perform java docs javadocs refactoring parameters simple name simplename temp refs temprefs analyzer get reference nodes getreferencenodes temp refs temprefs length simple name simplename occurence temp refs temprefs no name change nonamechange add linked name addlinkedname rewrite occurence simple name simplename new name newname getast new simple name newsimplename f field name ffieldname add linked name addlinkedname rewrite new name newname rewrite replace occurence new name newname add initializers to constructors addinitializerstoconstructors ast rewrite astrewrite rewrite core exception coreexception is true istrue is declared in anonymous class isdeclaredinanonymousclass abstract type declaration abstracttypedeclaration declaration abstract type declaration abstracttypedeclaration get method declaration getmethoddeclaration get parent getparent method declaration methoddeclaration constructors get all constructors getallconstructors declaration constructors length ast ast rewrite getast method declaration methoddeclaration new constructor newconstructor ast new method declaration newmethoddeclaration new constructor newconstructor set constructor setconstructor new constructor newconstructor modifiers add all addall ast new modifiers newmodifiers declaration get modifiers getmodifiers modifier rewrite modifierrewrite visibility modifiers new constructor newconstructor set name setname ast new simple name newsimplename declaration get name getname get identifier getidentifier new constructor newconstructor set javadoc setjavadoc get new constructor comment getnewconstructorcomment rewrite new constructor newconstructor set body setbody ast new block newblock add field initialization to constructor addfieldinitializationtoconstructor rewrite new constructor newconstructor insertion index insertionindex compute insert index for new constructor computeinsertindexfornewconstructor declaration rewrite get list rewrite getlistrewrite declaration declaration get body declarations property getbodydeclarationsproperty insert at insertat new constructor newconstructor insertion index insertionindex constructors length should insert temp initialization shouldinserttempinitialization constructors add field initialization to constructor addfieldinitializationtoconstructor rewrite constructors string get enclosing type name getenclosingtypename get enclosing type getenclosingtype get name getname get identifier getidentifier abstract type declaration abstracttypedeclaration get enclosing type getenclosingtype abstract type declaration abstracttypedeclaration ast nodes astnodes get parent getparent get temp declaration statement gettempdeclarationstatement abstract type declaration abstracttypedeclaration javadoc get new constructor comment getnewconstructorcomment ast rewrite astrewrite rewrite core exception coreexception stub utility stubutility do add comments doaddcomments f cu fcu get java project getjavaproject string comment code generation codegeneration get method comment getmethodcomment f cu fcu get enclosing type name getenclosingtypename get enclosing type name getenclosingtypename string string stub utility stubutility get line delimiter used getlinedelimiterused f cu fcu comment comment length javadoc rewrite create string placeholder createstringplaceholder comment ast node astnode javadoc compute insert index for new constructor computeinsertindexfornewconstructor abstract type declaration abstracttypedeclaration declaration list body declaration bodydeclaration declarations declaration body declarations bodydeclarations declarations is empty isempty find first method index findfirstmethodindex declaration declarations size find first method index findfirstmethodindex abstract type declaration abstracttypedeclaration type declaration typedeclaration type declaration typedeclaration body declarations bodydeclarations size type declaration typedeclaration body declarations bodydeclarations method declaration methoddeclaration add field initialization to constructor addfieldinitializationtoconstructor ast rewrite astrewrite rewrite method declaration methoddeclaration constructor constructor get body getbody constructor set body setbody getast new block newblock statement new statement newstatement create new assignment statement createnewassignmentstatement rewrite rewrite get list rewrite getlistrewrite constructor get body getbody block statements property insert last insertlast new statement newstatement should insert temp initialization shouldinserttempinitialization method declaration methoddeclaration constructor is true istrue constructor is constructor isconstructor constructor get body getbody list statement statements constructor get body getbody statements statements statements size statements constructor invocation constructorinvocation method declaration methoddeclaration get all constructors getallconstructors abstract type declaration abstracttypedeclaration type declaration typedeclaration type declaration typedeclaration type declaration typedeclaration method declaration methoddeclaration all methods allmethods type declaration typedeclaration type declaration typedeclaration get methods getmethods list method declaration methoddeclaration result array list arraylist math min all methods allmethods length all methods allmethods length method declaration methoddeclaration declaration all methods allmethods declaration is constructor isconstructor result add declaration result to array toarray method declaration methoddeclaration result size method declaration methoddeclaration convert local variable descriptor convertlocalvariabledescriptor get refactoring descriptor getrefactoringdescriptor map string string arguments hash map hashmap string project i java project ijavaproject java project javaproject f cu fcu get java project getjavaproject java project javaproject project java project javaproject get element name getelementname i variable binding ivariablebinding binding f temp declaration node ftempdeclarationnode resolve binding resolvebinding string description messages format refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring descriptor description basic element labels basicelementlabels get java element name getjavaelementname binding get name getname string header messages format refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring descriptor description string binding label provider bindinglabelprovider get binding label getbindinglabel binding java element labels javaelementlabels fully qualified binding label provider bindinglabelprovider get binding label getbindinglabel binding get declaring method getdeclaringmethod java element labels javaelementlabels fully qualified jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header comment add setting addsetting messages format refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring original pattern binding label provider bindinglabelprovider get binding label getbindinglabel binding java element labels javaelementlabels fully qualified comment add setting addsetting messages format refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring field pattern basic element labels basicelementlabels get java element name getjavaelementname f field name ffieldname f initialize in finitializein initialize constructor comment add setting addsetting refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring initialize constructor initialize field comment add setting addsetting refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring initialize declaration initialize method comment add setting addsetting refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring initialize method string visibility jdt flags jdtflags get visibility string getvisibilitystring f visibility fvisibility nls equals visibility visibility refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring visibility comment add setting addsetting messages format refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring visibility pattern visibility f declare final fdeclarefinal f declare static fdeclarestatic comment add setting addsetting refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring declare f declare final fdeclarefinal comment add setting addsetting refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring declare f declare static fdeclarestatic comment add setting addsetting refactoring core messages refactoringcoremessages promote temp to field refactoring promotetemptofieldrefactoring declare convert local variable descriptor convertlocalvariabledescriptor descriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create convert local variable descriptor createconvertlocalvariabledescriptor project description comment as string asstring arguments refactoring descriptor refactoringdescriptor structural change arguments java refactoring descriptor util javarefactoringdescriptorutil attribute input java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f cu fcu arguments java refactoring descriptor util javarefactoringdescriptorutil attribute f field name ffieldname nls arguments java refactoring descriptor util javarefactoringdescriptorutil attribute selection integer f selection start fselectionstart to string tostring integer f selection length fselectionlength to string tostring arguments attribute value of valueof f declare static fdeclarestatic to string tostring arguments attribute value of valueof f declare final fdeclarefinal to string tostring arguments attribute visibility integer f visibility fvisibility to string tostring arguments attribute initialize integer f initialize in finitializein to string tostring descriptor add local declaration split addlocaldeclarationsplit ast rewrite astrewrite rewrite variable declaration statement variabledeclarationstatement temp declaration statement tempdeclarationstatement get temp declaration statement gettempdeclarationstatement ast node astnode parent statement parentstatement temp declaration statement tempdeclarationstatement get parent getparent list rewrite listrewrite list rewrite listrewrite parent statement parentstatement switch statement switchstatement list rewrite listrewrite rewrite get list rewrite getlistrewrite parent statement parentstatement switch statement switchstatement statements property parent statement parentstatement block list rewrite listrewrite rewrite get list rewrite getlistrewrite parent statement parentstatement block statements property happen variable declaration variabledeclaration control statement body list rewrite listrewrite is true istrue statement index statementindex list rewrite listrewrite get original list getoriginallist index of indexof temp declaration statement tempdeclarationstatement is true istrue statement index statementindex statement new statement newstatement create new assignment statement createnewassignmentstatement rewrite list variable declaration fragment variabledeclarationfragment fragments temp declaration statement tempdeclarationstatement fragments fragment index fragmentindex fragments index of indexof f temp declaration node ftempdeclarationnode is true istrue fragment index fragmentindex fragments size rewrite replace temp declaration statement tempdeclarationstatement new statement newstatement fragment index fragmentindex fragments size variable declaration fragment variabledeclarationfragment fragment fragments rewrite remove fragment fragment index fragmentindex rewrite remove temp declaration statement tempdeclarationstatement is true istrue temp has initializer temphasinitializer list rewrite listrewrite insert at insertat new statement newstatement statement index statementindex fragment index fragmentindex fragments size variable declaration fragment variabledeclarationfragment first fragment after firstfragmentafter fragments fragment index fragmentindex variable declaration fragment variabledeclarationfragment copy first fragment after copyfirstfragmentafter variable declaration fragment variabledeclarationfragment rewrite create copy target createcopytarget first fragment after firstfragmentafter variable declaration statement variabledeclarationstatement statement getast new variable declaration statement newvariabledeclarationstatement copy first fragment after copyfirstfragmentafter type type type rewrite create copy target createcopytarget temp declaration statement tempdeclarationstatement get type gettype statement set type settype type list i extended modifier iextendedmodifier modifiers temp declaration statement tempdeclarationstatement modifiers modifiers size list rewrite listrewrite modifiers rewrite modifiersrewrite rewrite get list rewrite getlistrewrite temp declaration statement tempdeclarationstatement variable declaration statement variabledeclarationstatement modifiers property ast node astnode first modifier firstmodifier ast node astnode modifiers ast node astnode last modifier lastmodifier ast node astnode modifiers modifiers size ast node astnode modifiers copy modifierscopy modifiers rewrite modifiersrewrite create copy target createcopytarget first modifier firstmodifier last modifier lastmodifier statement modifiers add modifiers copy modifierscopy fragment index fragmentindex fragments size variable declaration fragment variabledeclarationfragment fragment fragments variable declaration fragment variabledeclarationfragment fragment copy fragmentcopy variable declaration fragment variabledeclarationfragment rewrite create copy target createcopytarget fragment statement fragments add fragment copy fragmentcopy list rewrite listrewrite insert at insertat statement statement index statementindex statement create new assignment statement createnewassignmentstatement ast rewrite astrewrite rewrite ast ast getast assignment assignment ast new assignment newassignment simple name simplename field name fieldname ast new simple name newsimplename f field name ffieldname add linked name addlinkedname rewrite field name fieldname assignment set left hand side setlefthandside field name fieldname assignment set right hand side setrighthandside get temp initializer copy gettempinitializercopy rewrite ast new expression statement newexpressionstatement assignment add linked name addlinkedname ast rewrite astrewrite rewrite simple name simplename field name fieldname is first isfirst f linked proposal model flinkedproposalmodel f linked proposal model flinkedproposalmodel get position group getpositiongroup linked add position addposition rewrite track field name fieldname is first isfirst expression get temp initializer copy gettempinitializercopy ast rewrite astrewrite rewrite expression initializer expression rewrite create copy target createcopytarget get temp initializer gettempinitializer initializer array initializer arrayinitializer ast nodes astnodes get dimensions getdimensions f temp declaration node ftempdeclarationnode array creation arraycreation array creation arraycreation rewrite getast new array creation newarraycreation array creation arraycreation set type settype array type arraytype ast node factory astnodefactory new type newtype rewrite getast f temp declaration node ftempdeclarationnode array creation arraycreation set initializer setinitializer array initializer arrayinitializer initializer array creation arraycreation initializer add local declaration removal addlocaldeclarationremoval ast rewrite astrewrite rewrite variable declaration statement variabledeclarationstatement temp declaration statement tempdeclarationstatement get temp declaration statement gettempdeclarationstatement list variable declaration fragment variabledeclarationfragment fragments temp declaration statement tempdeclarationstatement fragments fragment index fragmentindex fragments index of indexof f temp declaration node ftempdeclarationnode is true istrue fragment index fragmentindex variable declaration fragment variabledeclarationfragment fragment fragments fragment index fragmentindex rewrite remove fragment fragments size rewrite remove temp declaration statement tempdeclarationstatement add field declaration addfielddeclaration ast rewrite astrewrite rewrite field declaration fielddeclaration fields get field declarations getfielddeclarations ast node astnode parent get method declaration getmethoddeclaration get parent getparent child list property descriptor childlistpropertydescriptor descriptor ast nodes astnodes get body declarations property getbodydeclarationsproperty parent insert index insertindex fields length insert index insertindex insert index insertindex ast nodes astnodes get body declarations getbodydeclarations parent index of indexof fields fields length field declaration fielddeclaration declaration create new field declaration createnewfielddeclaration rewrite rewrite get list rewrite getlistrewrite parent descriptor insert at insertat declaration insert index insertindex field declaration fielddeclaration create new field declaration createnewfielddeclaration ast rewrite astrewrite rewrite ast ast getast variable declaration fragment variabledeclarationfragment fragment ast new variable declaration fragment newvariabledeclarationfragment simple name simplename variable name variablename ast new simple name newsimplename f field name ffieldname fragment set name setname variable name variablename add linked name addlinkedname rewrite variable name variablename list dimension extra dimensions extradimensions dimension rewrite dimensionrewrite copy dimensions copydimensions f temp declaration node ftempdeclarationnode extra dimensions extradimensions rewrite fragment extra dimensions extradimensions add all addall extra dimensions extradimensions f initialize in finitializein initialize field temp has initializer temphasinitializer expression initializer expression rewrite create copy target createcopytarget get temp initializer gettempinitializer fragment set initializer setinitializer initializer field declaration fielddeclaration field declaration fielddeclaration ast new field declaration newfielddeclaration fragment variable declaration statement variabledeclarationstatement vds get temp declaration statement gettempdeclarationstatement type type type rewrite create copy target createcopytarget vds get type gettype field declaration fielddeclaration set type settype type field declaration fielddeclaration modifiers add all addall ast node factory astnodefactory new modifiers newmodifiers ast get modifiers getmodifiers field declaration fielddeclaration get modifiers getmodifiers flags f visibility fvisibility f declare final fdeclarefinal flags modifier f declare static fdeclarestatic flags modifier flags ast getast f temp declaration node ftempdeclarationnode getast local type and variable usage analyzer localtypeandvariableusageanalyzer hierarchicalastvisitor list i binding ibinding variable type list i binding ibinding f local definitions flocaldefinitions array list arraylist list ast nodes astnodes list simple name simplename f local references to enclosing flocalreferencestoenclosing array list arraylist list i type binding itypebinding f method type variables fmethodtypevariables f class type variables used fclasstypevariablesused local type and variable usage analyzer localtypeandvariableusageanalyzer i type binding itypebinding method type variables methodtypevariables f method type variables fmethodtypevariables arrays as list aslist method type variables methodtypevariables list simple name simplename get usage of enclosing nodes getusageofenclosingnodes f local references to enclosing flocalreferencestoenclosing get class type variables used getclasstypevariablesused f class type variables used fclasstypevariablesused override visit simple name simplename node i type binding itypebinding type binding typebinding node resolve type binding resolvetypebinding type binding typebinding type binding typebinding is local islocal node is declaration isdeclaration f local definitions flocaldefinitions add type binding typebinding f local definitions flocaldefinitions type binding typebinding f local references to enclosing flocalreferencestoenclosing add node type binding typebinding type binding typebinding is type variable istypevariable node is declaration isdeclaration f local definitions flocaldefinitions add type binding typebinding f local definitions flocaldefinitions type binding typebinding f method type variables fmethodtypevariables type binding typebinding f local references to enclosing flocalreferencestoenclosing add node f class type variables used fclasstypevariablesused i binding ibinding binding node resolve binding resolvebinding binding binding get kind getkind i binding ibinding variable i variable binding ivariablebinding binding is field isfield node is declaration isdeclaration f local definitions flocaldefinitions add binding f local definitions flocaldefinitions binding f local references to enclosing flocalreferencestoenclosing add node visit node refactoring status refactoringstatus initialize java refactoring arguments javarefactoringarguments arguments f self initial izing fselfinitializing string selection arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute selection selection offset length string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer selection tokenizer has more tokens hasmoretokens offset integer value of valueof tokenizer next token nexttoken int value intvalue tokenizer has more tokens hasmoretokens length integer value of valueof tokenizer next token nexttoken int value intvalue offset length f selection start fselectionstart offset f selection length fselectionlength length refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring illegal argument object selection java refactoring descriptor util javarefactoringdescriptorutil attribute selection refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute selection string handle arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute input handle i java element ijavaelement element java refactoring descriptor util javarefactoringdescriptorutil handle to element handletoelement arguments get project getproject handle element element exists element get element type getelementtype i java element ijavaelement compilation unit java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get name getname i java refactorings ijavarefactorings convert local variable f cu fcu i compilation unit icompilationunit element refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute input string visibility arguments get attribute getattribute attribute visibility nls visibility equals visibility flag flag integer parse int parseint visibility number format exception numberformatexception exception refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute visibility f visibility fvisibility flag string initialize arguments get attribute getattribute attribute initialize nls initialize equals initialize integer parse int parseint initialize number format exception numberformatexception exception refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute initialize f initialize in finitializein string arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute nls equals f field name ffieldname refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute string declare static declarestatic arguments get attribute getattribute attribute declare static declarestatic f declare static fdeclarestatic value of valueof declare static declarestatic boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute string declare final declarefinal arguments get attribute getattribute attribute declare final declarefinal f declare final fdeclarefinal value of valueof declare final declarefinal boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute refactoring status refactoringstatus set linked proposal model setlinkedproposalmodel linked proposal model linkedproposalmodel model f linked proposal model flinkedproposalmodel model