copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring java util array list arraylist java util list org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core resources i container icontainer org eclipse core resources i file ifile org eclipse core resources i marker imarker org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources resource attributes resourceattributes org eclipse core resources resources plugin resourcesplugin org eclipse core resources mapping i resource change description factory iresourcechangedescriptionfactory org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring participants check conditions context checkconditionscontext org eclipse ltk core refactoring participants resource change checker resourcechangechecker org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java model marker ijavamodelmarker org eclipse jdt core i java project ijavaproject org eclipse jdt core i local variable ilocalvariable org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i type itype org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core signature org eclipse jdt core dom ast node astnode org eclipse jdt core dom annotation org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom expression org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom org eclipse jdt core dom switch case switchcase org eclipse jdt core dom variable declaration variabledeclaration org eclipse jdt internal corext core xt corext org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom bindings org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring base refactoring status codes refactoringstatuscodes org eclipse jdt internal corext refactoring util java element util javaelementutil org eclipse jdt internal corext util java conventions util javaconventionsutil org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util jdt flags jdtflags org eclipse jdt internal corext util messages org eclipse jdt internal corext util resources org eclipse jdt java element labels javaelementlabels org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal viewsupport basic element labels basicelementlabels defines reusable checks methods checks instances checks constants returned check expression is value checkexpressionisrvalue rvalue rvalue misc rvalue rvalue guessed checks method constructor renaming param method param new method name newmethodname param new type name newtypename code refactoring status refactoringstatus code code warning code severity method constructor renaming code code refactoring status refactoringstatus check if constructor name checkifconstructorname i method imethod method string new method name newmethodname string new type name newtypename new method name newmethodname equals new type name newtypename refactoring status refactoringstatus create warning status createwarningstatus messages format refactoring core messages refactoringcoremessages checks constructor object java element util javaelementutil create method signature createmethodsignature method java element labels javaelementlabels get element label getelementlabel method get declaring type getdeclaringtype java element labels javaelementlabels fully qualified checks valid java field param java field param context link i java element ijavaelement code code refactoring status error message valid java field refactoring status refactoringstatus check field name checkfieldname string i java element ijavaelement context check name checkname java conventions util javaconventionsutil validate field name validatefieldname context checks valid java type parameter param java type parameter param context link i java element ijavaelement code code refactoring status error message valid java type parameter refactoring status refactoringstatus check type parameter name checktypeparametername string i java element ijavaelement context check name checkname java conventions util javaconventionsutil validate type variable name validatetypevariablename context checks valid java identifier param java identifier param context link i java element ijavaelement code code refactoring status error message valid java identifier refactoring status refactoringstatus check identifier checkidentifier string i java element ijavaelement context check name checkname java conventions util javaconventionsutil validate identifier validateidentifier context checks valid java method param java method param context link i java element ijavaelement code code refactoring status error message valid java method refactoring status refactoringstatus check method name checkmethodname string i java element ijavaelement context refactoring status refactoringstatus status check name checkname java conventions util javaconventionsutil validate method name validatemethodname context status isok starts with lower case startswithlowercase refactoring status refactoringstatus create warning status createwarningstatus refactoring core messages refactoringcoremessages checks method names lowercase status checks valid java type param java method param context link i java element ijavaelement code code refactoring status error message valid java type refactoring status refactoringstatus check type name checktypename string i java element ijavaelement context itpjui winnt assert ion assertion failed rename type renametype refactoring nls index of indexof refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages checks dot check name checkname java conventions util javaconventionsutil validate java type name validatejavatypename context checks valid java param java param context link i java element ijavaelement code code refactoring status error message valid java refactoring status refactoringstatus check package name checkpackagename string i java element ijavaelement context check name checkname java conventions util javaconventionsutil validate package name validatepackagename context checks valid compilation unit param compilation unit param context link i java element ijavaelement code code refactoring status error message valid compilation unit refactoring status refactoringstatus check compilation unit name checkcompilationunitname string i java element ijavaelement context check name checkname java conventions util javaconventionsutil validate compilation unit name validatecompilationunitname context returns status file exists param rename param new bar e name newbarename extension status fatal exists refactoring status refactoringstatus check compilation unit new name checkcompilationunitnewname i compilation unit icompilationunit string new bar e name newbarename string newcuname java model util javamodelutil get rename d name getrenamedcuname new bar e name newbarename i path ipath renamed resource path renamedresourcepath get parent getparent get path getpath append newcuname resource exists resourceexists renamed resource path renamedresourcepath refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages checks basic element labels basicelementlabels get resource name getresourcename newcuname refactoring status refactoringstatus starts with lower case startswithlowercase string nls equals work around workaround jdk bug char at charat character to lower case tolowercase char at charat resource exists resourceexists i path ipath resource path resourcepath resources plugin resourcesplugin get workspace getworkspace get root getroot find member findmember resource path resourcepath is top level istoplevel i type itype type type get declaring type getdeclaringtype is anonymous isanonymous i type itype type java model exception javamodelexception type is anonymous isanonymous is top level type istopleveltype i member imember member member get element type getelementtype i java element ijavaelement type is top level istoplevel i type itype member is inside local type isinsidelocaltype i type itype type java model exception javamodelexception type type is local islocal type type get declaring type getdeclaringtype is already name d isalreadynamed i java element ijavaelement element string equals element get element name getelementname main method checks refactoring status refactoringstatus check for main and native methods checkformainandnativemethods i compilation unit icompilationunit java model exception javamodelexception check for main and native methods checkformainandnativemethods get types gettypes refactoring status refactoringstatus check for main and native methods checkformainandnativemethods i type itype types java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus types length result merge check for main and native methods checkformainandnativemethods types result refactoring status refactoringstatus check for main and native methods checkformainandnativemethods i type itype type java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus result merge check for main and native methods checkformainandnativemethods type get methods getmethods result merge check for main and native methods checkformainandnativemethods type get types gettypes result refactoring status refactoringstatus check for main and native methods checkformainandnativemethods i method imethod methods java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus methods length jdt flags jdtflags is native isnative methods string type name typename java element labels javaelementlabels get element label getelementlabel methods get declaring type getdeclaringtype java element labels javaelementlabels fully qualified string method name methodname java element labels javaelementlabels get element label getelementlabel methods java element labels javaelementlabels string msg messages format refactoring core messages refactoringcoremessages checks method string nls type name typename nls method name methodname nls unsatisfied link error unsatisfiedlinkerror result add entry addentry refactoring status refactoringstatus error msg java status context javastatuscontext create methods core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes method methods is main method ismainmethod string msg messages format refactoring core messages refactoringcoremessages checks main java element labels javaelementlabels get element label getelementlabel methods get declaring type getdeclaringtype java element labels javaelementlabels fully qualified result add entry addentry refactoring status refactoringstatus warning msg java status context javastatuscontext create methods core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes main method result method checking checks method type param type param method name methodname param parameters status refactoring status refactoringstatus check method in type checkmethodintype i type binding itypebinding type string method name methodname i type binding itypebinding parameters refactoring status refactoringstatus result refactoring status refactoringstatus i method binding imethodbinding method org eclipse jdt internal corext dom bindings find method in type findmethodintype type method name methodname parameters method method is constructor isconstructor result add warning addwarning messages format refactoring core messages refactoringcoremessages checks method name methodname constructor object basic element labels basicelementlabels get java element name getjavaelementname type get name getname result add error adderror messages format refactoring core messages refactoringcoremessages checks method name methodname exists object basic element labels basicelementlabels get java element name getjavaelementname method name methodname basic element labels basicelementlabels get java element name getjavaelementname type get name getname java status context javastatuscontext create method result checks method conflicts existing method hierarchy checks method overrides method defined type classes param type param method name methodname param return type returntype param parameters status refactoring status refactoringstatus check method in hierarchy checkmethodinhierarchy i type binding itypebinding type string method name methodname i type binding itypebinding return type returntype i type binding itypebinding parameters refactoring status refactoringstatus result refactoring status refactoringstatus i method binding imethodbinding method bindings find method in hierarchy findmethodinhierarchy type method name methodname parameters method return type clash returntypeclash i type binding itypebinding method return type methodreturntype method get return type getreturntype return type returntype method return type methodreturntype string return type key returntypekey return type returntype get key getkey string method return type key methodreturntypekey method return type methodreturntype get key getkey return type key returntypekey method return type key methodreturntypekey return type clash returntypeclash return type returntype method return type methodreturntype return type key returntypekey method return type key methodreturntypekey return type clash returntypeclash return type key returntypekey equals method return type key methodreturntypekey i type binding itypebinding method get declaring class getdeclaringclass return type clash returntypeclash result add error adderror messages format refactoring core messages refactoringcoremessages checks method name methodname return type clash returntypeclash object basic element labels basicelementlabels get java element name getjavaelementname method name methodname basic element labels basicelementlabels get java element name getjavaelementname get name getname java status context javastatuscontext create method method is constructor isconstructor result add warning addwarning messages format refactoring core messages refactoringcoremessages checks method name methodname constructor object basic element labels basicelementlabels get java element name getjavaelementname get name getname result add error adderror messages format refactoring core messages refactoringcoremessages checks method name methodname overrides object basic element labels basicelementlabels get java element name getjavaelementname method name methodname basic element labels basicelementlabels get java element name getjavaelementname get name getname java status context javastatuscontext create method result selection checks is extract able expression isextractableexpression ast node astnode selected nodes selectednodes ast node astnode covering node coveringnode ast node astnode node covering node coveringnode is enum case isenumcase node selected nodes selectednodes selected nodes selectednodes length node selected nodes selectednodes is extract able expression isextractableexpression node is enum case isenumcase ast node astnode node node switch case switchcase switch case switchcase caze switch case switchcase node expression expression caze get expression getexpression expression expression i binding ibinding binding resolve binding resolvebinding binding i variable binding ivariablebinding i variable binding ivariablebinding variable binding variablebinding i variable binding ivariablebinding binding variable binding variablebinding is enum constant isenumconstant is extract able expression isextractableexpression ast node astnode node node expression node i binding ibinding binding node resolve binding resolvebinding binding binding i variable binding ivariablebinding is inside javadoc isinsidejavadoc ast node astnode node node get node type getnodetype ast node astnode javadoc node node get parent getparent node returns fatal error empty cases error based status returned param param status status refactoring status refactoringstatus based status empty refactoring status refactoringstatus check name checkname string i status istatus status refactoring status refactoringstatus result refactoring status refactoringstatus nls equals refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages checks choose status isok result status get severity getseverity i status istatus error refactoring status refactoringstatus create fatal error status createfatalerrorstatus status get message getmessage i status istatus warning refactoring status refactoringstatus create warning status createwarningstatus status get message getmessage i status istatus info refactoring status refactoringstatus create info status createinfostatus status get message getmessage refactoring status refactoringstatus finds method type searches method signature parameter types compared simple resolving fully qualified type param param parameter count parametercount param is constructor isconstructor param type method java model exception javamodelexception i method imethod find method findmethod string parameter count parametercount is constructor isconstructor i type itype type java model exception javamodelexception find method findmethod parameter count parametercount is constructor isconstructor type get methods getmethods finds method type searches method parameter count parameter types compared param method param type method java model exception javamodelexception i method imethod find method findmethod i method imethod method i type itype type java model exception javamodelexception find method findmethod method get element name getelementname method get parameter types getparametertypes length method is constructor isconstructor type get methods getmethods finds method array methods searches method parameter count parameter types compared param method param methods method java model exception javamodelexception i method imethod find method findmethod i method imethod method i method imethod methods java model exception javamodelexception find method findmethod method get element name getelementname method get parameter types getparametertypes length method is constructor isconstructor methods i method imethod find method findmethod string parameters is constructor isconstructor i method imethod methods java model exception javamodelexception methods length i method imethod curr methods equals curr get element name getelementname is constructor isconstructor curr is constructor isconstructor parameters curr get parameter types getparametertypes length curr finds method type searches method signature parameter types compared simple resolving fully qualified type param method param type method java model exception javamodelexception i method imethod find similar method findsimilarmethod i method imethod method i type itype type java model exception javamodelexception find similar method findsimilarmethod method type get methods getmethods finds method array methods searches method signature parameter types compared simple resolving fully qualified type param method param methods method java model exception javamodelexception i method imethod find similar method findsimilarmethod i method imethod method i method imethod methods java model exception javamodelexception is constructor isconstructor method is constructor isconstructor methods length i method imethod other method othermethod methods other method othermethod is constructor isconstructor is constructor isconstructor method is similar issimilar other method othermethod other method othermethod compare parameter signatures compare param types compareparamtypes string param types paramtypes string param types paramtypes param types paramtypes length param types paramtypes length param types paramtypes length string signature get simple name getsimplename signature to string tostring param types paramtypes string signature get simple name getsimplename signature to string tostring param types paramtypes equals refactoring status refactoringstatus check if cu broken checkifcubroken i member imember member java model exception javamodelexception i compilation unit icompilationunit i compilation unit icompilationunit java core javacore create member get compilation unit getcompilationunit get resource getresource refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages checks created is structure known isstructureknown refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages checks parsed refactoring status refactoringstatus search result group searchresultgroup passed parameter method removes correspond parsable i compilation unit icompilationunit returns result param grouped array search result groups parsable compilation units removed param status refactoring status collect errors problems array search result groups java model exception javamodelexception search result group searchresultgroup exclude compilation units excludecompilationunits search result group searchresultgroup grouped refactoring status refactoringstatus status java model exception javamodelexception list search result group searchresultgroup result array list arraylist was empty wasempty grouped length grouped length i resource iresource resource grouped get resource getresource i java element ijavaelement element java core javacore create resource element i compilation unit icompilationunit xxx work around workaround jcore feature errors cus original element i compilation unit icompilationunit i compilation unit icompilationunit java core javacore create resource is structure known isstructureknown status add error adderror messages format refactoring core messages refactoringcoremessages checks parsed basic element labels basicelementlabels get path label getpathlabel get path getpath removed result add grouped was empty wasempty result is empty isempty status add fatal error addfatalerror refactoring core messages refactoringcoremessages checks excluded result to array toarray search result group searchresultgroup result size refactoring status refactoringstatus check compile errors in affected files checkcompileerrorsinaffectedfiles search result group searchresultgroup grouped java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus grouped length check compile errors in affected file checkcompileerrorsinaffectedfile result grouped get resource getresource result check compile errors in affected file checkcompileerrorsinaffectedfile refactoring status refactoringstatus result i resource iresource resource java model exception javamodelexception has compile errors hascompileerrors resource result add warning addwarning messages format refactoring core messages refactoringcoremessages checks compile errors basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath refactoring status refactoringstatus check compile errors in affected files checkcompileerrorsinaffectedfiles search result group searchresultgroup references i resource iresource declaring java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus references length i resource iresource resource references get resource getresource resource equals declaring declaring check compile errors in affected file checkcompileerrorsinaffectedfile result resource declaring check compile errors in affected file checkcompileerrorsinaffectedfile result declaring result has compile errors hascompileerrors i resource iresource resource java model exception javamodelexception i marker imarker problem markers problemmarkers resource find markers findmarkers i java model marker ijavamodelmarker java model problem marker i resource iresource depth infinite problem markers problemmarkers length problem markers problemmarkers get attribute getattribute i marker imarker severity i marker imarker severity error java model exception javamodelexception core exception coreexception java model exception javamodelexception is read only isreadonly object element java model exception javamodelexception element i resource iresource is read only isreadonly i resource iresource element element i java element ijavaelement element i package fragment root ipackagefragmentroot is classpath delete isclasspathdelete i package fragment root ipackagefragmentroot element is read only isreadonly i java element ijavaelement element get resource getresource nls is true istrue expected is read only isreadonly i resource iresource res java model exception javamodelexception resource attributes resourceattributes attributes res get resource attributes getresourceattributes attributes attributes is read only isreadonly res i container icontainer i container icontainer container i container icontainer res i resource iresource children container members children length is read only isreadonly children java model exception javamodelexception core exception coreexception java model exception javamodelexception is classpath delete isclasspathdelete i package fragment root ipackagefragmentroot pkg root pkgroot i resource iresource res pkg root pkgroot get resource getresource res i project iproject defining project definingproject res get project getproject res get parent getparent pkg root pkgroot is archive isarchive res get parent getparent equals defining project definingproject i project iproject occur ring project occurringproject pkg root pkgroot get java project getjavaproject get project getproject defining project definingproject equals occur ring project occurringproject validate edit validateedit checks refactoring status refactoringstatus validate modifies files validatemodifiesfiles i file ifile files to modify filestomodify object context refactoring status refactoringstatus result refactoring status refactoringstatus i status istatus status resources check in sync checkinsync files to modify filestomodify status isok result merge refactoring status refactoringstatus create status status resources make commit table makecommittable files to modify filestomodify context status isok result merge refactoring status refactoringstatus create status result has fatal error hasfatalerror result add fatal error addfatalerror refactoring core messages refactoringcoremessages checks validate edit validateedit result add modified files to checker addmodifiedfilestochecker i file ifile files to modify filestomodify check conditions context checkconditionscontext context resource change checker resourcechangechecker checker context get checker getchecker resource change checker resourcechangechecker i resource change description factory iresourcechangedescriptionfactory delta factory deltafactory checker get delta factory getdeltafactory files to modify filestomodify length delta factory deltafactory change files to modify filestomodify refactoring status refactoringstatus validate edit validateedit i compilation unit icompilationunit unit object context i resource iresource resource unit get primary getprimary get resource getresource refactoring status refactoringstatus result refactoring status refactoringstatus resource result i status istatus status resources check in sync checkinsync resource status isok result merge refactoring status refactoringstatus create status status resources make commit table makecommittable resource context status isok result merge refactoring status refactoringstatus create status result has fatal error hasfatalerror result add fatal error addfatalerror refactoring core messages refactoringcoremessages checks validate edit validateedit result checks modify code i java element ijavaelement code code i java element ijavaelement code exist read modifiable code i member imember code binary returned code refactoring status refactoringstatus code code error code severity modify element param java element javaelement status java model exception javamodelexception i java element ijavaelement exists i java element ijavaelement is read only isreadonly i member imember is binary isbinary refactoring status refactoringstatus refactoring status refactoringstatus check availability checkavailability i java element ijavaelement java element javaelement java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus java element javaelement exists result add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages refactoring model get java element name getjavaelementname java element javaelement java element javaelement is read only isreadonly result add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages refactoring read get java element name getjavaelementname java element javaelement java element javaelement exists java element javaelement is structure known isstructureknown result add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages refactoring unknown structure get java element name getjavaelementname java element javaelement java element javaelement i member imember i member imember java element javaelement is binary isbinary result add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages refactoring binary get java element name getjavaelementname java element javaelement result string get java element name getjavaelementname i java element ijavaelement element java element labels javaelementlabels get element label getelementlabel element java element labels javaelementlabels is available isavailable i java element ijavaelement java element javaelement java model exception javamodelexception java element javaelement java element javaelement exists java element javaelement is read only isreadonly bug https bugs eclipse org bugs bug cgi java element javaelement i java project ijavaproject java element javaelement i local variable ilocalvariable java element javaelement is structure known isstructureknown java element javaelement i member imember i member imember java element javaelement is binary isbinary i type itype find type in package findtypeinpackage i package fragment ipackagefragment pack string element name elementname java model exception javamodelexception is true istrue pack exists is true istrue pack is read only isreadonly string package name packagename pack get element name getelementname element name elementname package name packagename length package name packagename element name elementname element name elementname pack get java project getjavaproject find type findtype element name elementname i progress monitor iprogressmonitor refactoring status refactoringstatus check temp name checktempname string new name newname i java element ijavaelement context refactoring status refactoringstatus result checks check identifier checkidentifier new name newname context result has fatal error hasfatalerror result checks starts with lower case startswithlowercase new name newname result add warning addwarning refactoring core messages refactoringcoremessages extract temp refactoring extracttemprefactoring convention result refactoring status refactoringstatus check enum constant name checkenumconstantname string new name newname i java element ijavaelement context refactoring status refactoringstatus result checks check field name checkfieldname new name newname context result has fatal error hasfatalerror result new name newname length new name newname char at charat character is letter isletter character is upper case isuppercase result add warning addwarning refactoring core messages refactoringcoremessages rename enum const refactoring renameenumconstrefactoring convention result refactoring status refactoringstatus check constant name checkconstantname string new name newname i java element ijavaelement context refactoring status refactoringstatus result checks check field name checkfieldname new name newname context result has fatal error hasfatalerror result new name newname length new name newname char at charat character is letter isletter character is upper case isuppercase result add warning addwarning refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring convention result is exception isexception i type itype i type itype i progress monitor iprogressmonitor java model exception javamodelexception i type itype is class isclass i type itype super types supertypes i type itype new supertype hierarchy newsupertypehierarchy get all super types getallsupertypes i type itype super types supertypes length nls java lang throwable equals nls super types supertypes get fully qualified name getfullyqualifiedname param checks rvalue rvalue checks rvalue guessed guessed rvalue checks rvalue rvalue type checks rvalue misc rvalue reason check expression is value checkexpressionisrvalue expression resolve binding resolvebinding i variable binding ivariablebinding rvalue misc annotation rvalue misc i type binding itypebinding resolve type binding resolvetypebinding guessing required guessingrequired guessing required guessingrequired ast res olving astresolving guess binding for reference guessbindingforreference rvalue misc nls get name getname equals rvalue guessing required guessingrequired rvalue guessed rvalue is declared in isdeclaredin variable declaration variabledeclaration temp declaration tempdeclaration ast node astnode ast node class astnodeclass ast node astnode initializer ast nodes astnodes get parent getparent temp declaration tempdeclaration ast node class astnodeclass initializer ast node astnode anonymous ast nodes astnodes get parent getparent temp declaration tempdeclaration anonymous class declaration anonymousclassdeclaration anonymous stupid code find variable declaration isn field ast nodes astnodes is parent isparent anonymous initializer