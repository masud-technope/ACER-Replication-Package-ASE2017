copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal compare java util array list arraylist java util hash map hashmap java util iterator java util list java util map java util string tokenizer stringtokenizer org eclipse swt widgets shell org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core resources i resource iresource org eclipse jface text document org eclipse jface text i document idocument org eclipse jface text i document partitioner idocumentpartitioner org eclipse services i disposable idisposable org eclipse compare compareui org eclipse compare i editable content ieditablecontent org eclipse compare i editable content extension ieditablecontentextension org eclipse compare i resource provider iresourceprovider org eclipse compare i shared document adapter ishareddocumentadapter org eclipse compare i stream content accessor istreamcontentaccessor org eclipse compare str ucturemergeviewer structuremergeviewer diff node diffnode org eclipse compare str ucturemergeviewer structuremergeviewer differencer org eclipse compare str ucturemergeviewer structuremergeviewer document range node documentrangenode org eclipse compare str ucturemergeviewer structuremergeviewer i compare input icompareinput org eclipse compare str ucturemergeviewer structuremergeviewer i diff container idiffcontainer org eclipse compare str ucturemergeviewer structuremergeviewer i diff element idiffelement org eclipse compare str ucturemergeviewer structuremergeviewer i structure comparator istructurecomparator org eclipse compare str ucturemergeviewer structuremergeviewer structure creator structurecreator org eclipse compare str ucturemergeviewer structuremergeviewer structure root node structurerootnode org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core java core javacore org eclipse jdt core tool factory toolfactory org eclipse jdt core compiler i scanner iscanner org eclipse jdt core compiler i terminal symbols iterminalsymbols org eclipse jdt core compiler invalid input exception invalidinputexception org eclipse jdt core dom ast parser astparser org eclipse jdt core dom compilation unit compilationunit org eclipse jdt text i java partitions ijavapartitions org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor ast provider astprovider java structure creator javastructurecreator structure creator structurecreator map string string f default compiler options fdefaultcompileroptions root node structure link structure root node structurerootnode needed subclass link java node javanode code build structure root java node rootjavanode java node javanode i disposable idisposable object f input finput f editable feditable i shared document adapter ishareddocumentadapter f adapter fadapter root java node rootjavanode i document idocument document editable object input i shared document adapter ishareddocumentadapter adapter document f editable feditable editable f input finput input f adapter fadapter adapter override is editable iseditable f editable feditable override node changed nodechanged document range node documentrangenode node save f input finput override dispose f adapter fadapter f adapter fadapter disconnect f input finput suppress warnings suppresswarnings unchecked override get adapter getadapter adapter adapter i shared document adapter ishareddocumentadapter f adapter fadapter get adapter getadapter adapter override is read only isreadonly f input finput i editable content extension ieditablecontentextension i editable content extension ieditablecontentextension ext i editable content extension ieditablecontentextension f input finput ext is read only isreadonly is read only isreadonly override i status istatus validate edit validateedit shell shell f input finput i editable content extension ieditablecontentextension i editable content extension ieditablecontentextension ext i editable content extension ieditablecontentextension f input finput ext validate edit validateedit shell validate edit validateedit shell rewrite infos rewriteinfos temp orarily temporarily rewriting diff tree order combine diff nodes smart folding rewrite info rewriteinfo f is out fisout java node javanode f ancestor fancestor java node javanode f left fleft java node javanode f right fright array list arraylist i diff element idiffelement f children fchildren array list arraylist add i diff element idiffelement diff f children fchildren add diff set diff setdiff i compare input icompareinput diff f is out fisout f is out fisout java node javanode java node javanode diff get ancestor getancestor java node javanode java node javanode diff get left getleft java node javanode java node javanode diff get right getright f ancestor fancestor f ancestor fancestor f left fleft f left fleft f right fright f right fright f is out fisout nodes combined matches f is out fisout f ancestor fancestor f left fleft f right fright java structure creator javastructurecreator set default compiler options setdefaultcompileroptions map string string compiler settings compilersettings f default compiler options fdefaultcompileroptions compiler settings compilersettings appears enclosing pane title bar override string get name getname compare messages comparemessages java structure viewer javastructureviewer title param input implement i stream content accessor istreamcontentaccessor tree java nodes javanodes input error returned override i structure comparator istructurecomparator get structure getstructure object input string contents buffer i document idocument doc compareui get document getdocument input doc input i stream content accessor istreamcontentaccessor i stream content accessor istreamcontentaccessor sca i stream content accessor istreamcontentaccessor input contents java compare utilities javacompareutilities read string readstring sca core exception coreexception contents contents length buffer contents get chars getchars buffer doc document contents setup document setupdocument doc create structure comparator createstructurecomparator input buffer doc override i structure comparator istructurecomparator create structure comparator createstructurecomparator object element i document idocument document i shared document adapter ishareddocumentadapter shared document adapter shareddocumentadapter i progress monitor iprogressmonitor monitor core exception coreexception create structure comparator createstructurecomparator element document shared document adapter shareddocumentadapter monitor i structure comparator istructurecomparator create structure comparator createstructurecomparator object input buffer i document idocument doc i shared document adapter ishareddocumentadapter adapter i progress monitor iprogressmonitor monitor string contents map string string compiler options compileroptions input i resource provider iresourceprovider i resource iresource resource i resource provider iresourceprovider input get resource getresource resource i java element ijavaelement element java core javacore create resource element i java project ijavaproject java project javaproject element get java project getjavaproject java project javaproject compiler options compileroptions java project javaproject get options getoptions compiler options compileroptions compiler options compileroptions f default compiler options fdefaultcompileroptions doc is editable iseditable input i editable content ieditablecontent is editable iseditable i editable content ieditablecontent input is editable iseditable hook root node int ercept intercept node java node javanode root root java node rootjavanode doc is editable iseditable input adapter buffer contents doc contents length buffer contents get chars getchars buffer ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level compiler options compileroptions parser set compiler options setcompileroptions compiler options compileroptions parser set source setsource buffer parser set focal position setfocalposition compilation unit compilationunit compilation unit compilationunit parser createast monitor accept java parse tree builder javaparsetreebuilder root buffer root returns contents node string string test content java element equality string representing content param node implement i stream content accessor istreamcontentaccessor param ignore white space ignorewhitespace code code java white space including comments removed contents contents equality test override string get contents getcontents object node ignore white space ignorewhitespace node i stream content accessor istreamcontentaccessor i stream content accessor istreamcontentaccessor sca i stream content accessor istreamcontentaccessor node string content content java compare utilities javacompareutilities read string readstring sca core exception coreexception java plugin javaplugin log ignore white space ignorewhitespace content replace whitespace single blank string buffer stringbuffer buf string buffer stringbuffer content to char array tochararray avoid trouble dealing unicode java scanner extract whitespace comment tokens request whitespace comments i scanner iscanner scanner tool factory toolfactory create scanner createscanner scanner set source setsource token token scanner get next token getnexttoken i terminal symbols iterminalsymbols tokennameeof current token source currenttokensource scanner get current token source getcurrenttokensource token i terminal symbols iterminalsymbols tokennamecomment i terminal symbols iterminalsymbols tokennamecomment block i terminal symbols iterminalsymbols tokennamecomment javadoc string buffer stringbuffer token str tokenstr string buffer stringbuffer current token source currenttokensource length token str tokenstr append current token source currenttokensource string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer token str tokenstr to string tostring tokenizer has more tokens hasmoretokens buf append tokenizer next token nexttoken buf append buf append current token source currenttokensource buf append success content buf to string tostring invalid input exception invalidinputexception content i structure creator istructurecreator rewrite diff tree order f old fold combinations add itions additions deletions can rewrite tree canrewritetree detect combinations add itions additions deletions renames signature folders single node param differencer differencer param root diff container root rewrite tree rewritetree differencer differencer i diff container idiffcontainer root hash map hashmap string rewrite info rewriteinfo map hash map hashmap object children root get children getchildren children length diff node diffnode diff diff node diffnode children java node javanode java node javanode diff get i d getid type get type code gettypecode combine methods constructors type java node javanode method type java node javanode constructor find create rewrite info rewriteinfo methods string extract method name extractmethodname rewrite info rewriteinfo name info nameinfo map name info nameinfo name info nameinfo rewrite info rewriteinfo map name info nameinfo name info nameinfo add diff find create rewrite info rewriteinfo methods empty argument list string arg list arglist extract argument list extractargumentlist rewrite info rewriteinfo arg info arginfo nls arg list arglist arg list arglist equals arg info arginfo map arg list arglist arg info arginfo arg info arginfo rewrite info rewriteinfo map arg list arglist arg info arginfo arg info arginfo add diff diff get kind getkind differencer change type mask differencer add ition addition differencer deletion pair add ition addition deletions type java node javanode constructor name info nameinfo set diff setdiff diff arg info arginfo arg info arginfo set diff setdiff diff recurse rewrite tree rewritetree differencer diff rebuild diff tree combined iterator string map key set keyset iterator has next hasnext string rewrite info rewriteinfo map rewrite info rewriteinfo combined matches find diff erences differences newly combined node pass deletion add ition addition diff node diffnode diff node diffnode differencer find diff erences finddifferences root f ancestor fancestor f left fleft f right fright difference set dont expand setdontexpand iterator i diff element idiffelement f children fchildren iterator has next hasnext i diff element idiffelement root remove t o root removetoroot add java history action javahistoryaction function determine selected java element replaced piece code local history param java element i java element ijavaelement maps java node javanode has edit ion hasedition i java element ijavaelement java element history page source javaelementhistorypagesource has edit ion hasedition override i document partitioner idocumentpartitioner get document partitioner getdocumentpartitioner java compare utilities javacompareutilities create java partitioner createjavapartitioner override string get document partitioning getdocumentpartitioning i java partitions ijavapartitions java partitioning override string get path getpath object element object input element i java element ijavaelement i java element ijavaelement i java element ijavaelement element build path starting java element walk parent chain reach i working copy iworkingcopy i compilation unit icompilationunit list string args array list arraylist path component conventions java node javanode string java compare utilities javacompareutilities get java element d getjavaelementid args add i compilation unit icompilationunit get parent getparent revert path args size string path string path args path