copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal text correction proposals java util arrays java util comparator java util hash set hashset java util iterator java util list org eclipse swt graphics image org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom assignment org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom child list property descriptor childlistpropertydescriptor org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom enhanced for statement enhancedforstatement org eclipse jdt core dom enum constant declaration enumconstantdeclaration org eclipse jdt core dom enum declaration enumdeclaration org eclipse jdt core dom expression org eclipse jdt core dom expression statement expressionstatement org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom for statement forstatement org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom initializer org eclipse jdt core dom javadoc org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom modifier org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom statement org eclipse jdt core dom structural property descriptor structuralpropertydescriptor org eclipse jdt core dom tag element tagelement org eclipse jdt core dom text element textelement org eclipse jdt core dom type org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom variable declaration expression variabledeclarationexpression org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom bindings org eclipse jdt internal corext dom linked node finder linkednodefinder org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal text correction javadoc tags sub processor javadoctagssubprocessor org eclipse jdt internal text correction modifier correction sub processor modifiercorrectionsubprocessor new variable correction proposal newvariablecorrectionproposal linked correction proposal linkedcorrectionproposal local field param field enum nls string key nls string key type type nls string key initializer initializer f variable kind fvariablekind simple name simplename f original node foriginalnode i type binding itypebinding f sender binding fsenderbinding new variable correction proposal newvariablecorrectionproposal string label i compilation unit icompilationunit variable kind variablekind simple name simplename node i type binding itypebinding sender binding senderbinding relevance image image label relevance image sender binding senderbinding is true istrue variable kind variablekind param variable kind variablekind local is true istrue bindings is declaration binding isdeclarationbinding sender binding senderbinding f variable kind fvariablekind variable kind variablekind f original node foriginalnode node f sender binding fsenderbinding sender binding senderbinding override ast rewrite astrewrite get rewrite getrewrite core exception coreexception compilation unit compilationunit ast res olving astresolving find parent compilation unit findparentcompilationunit f original node foriginalnode f variable kind fvariablekind param do add param doaddparam field field do add field doaddfield local do add local doaddlocal enum do add enum const doaddenumconst nls illegal argument exception illegalargumentexception nls unsupported variable kind f variable kind fvariablekind ast rewrite astrewrite do add param doaddparam compilation unit compilationunit ast ast getast simple name simplename node f original node foriginalnode body declaration bodydeclaration decl ast res olving astresolving find parent body declaration findparentbodydeclaration node decl method declaration methoddeclaration method declaration methoddeclaration method declaration methoddeclaration method declaration methoddeclaration decl ast rewrite astrewrite rewrite ast rewrite astrewrite create ast import rewrite importrewrite imports create import rewrite createimportrewrite compilation unit compilationunit decl get root getroot import rewrite context importrewritecontext import rewrite context importrewritecontext context sensitive import rewrite context contextsensitiveimportrewritecontext decl imports single variable declaration singlevariabledeclaration new decl newdecl ast new single variable declaration newsinglevariabledeclaration new decl newdecl set type settype evaluate variable type evaluatevariabletype ast imports import rewrite context importrewritecontext method declaration methoddeclaration resolve binding resolvebinding new decl newdecl set name setname ast new simple name newsimplename node get identifier getidentifier list rewrite listrewrite list rewriter listrewriter rewrite get list rewrite getlistrewrite decl method declaration methoddeclaration parameters property list rewriter listrewriter insert last insertlast new decl newdecl add linked position addlinkedposition rewrite track node key add javadoc tag javadoc javadoc method declaration methoddeclaration get javadoc getjavadoc javadoc hash set hashset string leading names leadingnames hash set hashset iterator single variable declaration singlevariabledeclaration iter method declaration methoddeclaration parameters iterator iter has next hasnext single variable declaration singlevariabledeclaration curr iter leading names leadingnames add curr get name getname get identifier getidentifier simple name simplename new tag ref newtagref ast new simple name newsimplename node get identifier getidentifier tag element tagelement new tag element newtagelement ast new tag element newtagelement new tag element newtagelement set tag name settagname tag element tagelement tag param new tag element newtagelement fragments add new tag ref newtagref text element textelement comment start commentstart ast new text element newtextelement new tag element newtagelement fragments add comment start commentstart add linked position addlinkedposition rewrite track new tag ref newtagref key add linked position addlinkedposition nls rewrite track comment start commentstart nls nls comment start list rewrite listrewrite tags rewriter tagsrewriter rewrite get list rewrite getlistrewrite javadoc javadoc tags property javadoc tags sub processor javadoctagssubprocessor insert tag inserttag tags rewriter tagsrewriter new tag element newtagelement leading names leadingnames add linked position addlinkedposition rewrite track new decl newdecl get type gettype key type add linked position addlinkedposition rewrite track new decl newdecl get name getname key rewrite is assigned isassigned statement statement simple name simplename statement expression statement expressionstatement expression statement expressionstatement exstat expression statement expressionstatement statement exstat get expression getexpression assignment assignment assignment assignment exstat get expression getexpression assignment get left hand side getlefthandside is for statement init isforstatementinit statement statement simple name simplename statement for statement forstatement for statement forstatement for statement forstatement for statement forstatement statement list expression list for statement forstatement initializers list size list assignment assignment assignment assignment list assignment get left hand side getlefthandside is enhanced for statement variable isenhancedforstatementvariable statement statement simple name simplename statement enhanced for statement enhancedforstatement enhanced for statement enhancedforstatement for statement forstatement enhanced for statement enhancedforstatement statement single variable declaration singlevariabledeclaration param for statement forstatement get parameter getparameter str ange strange recovery https bugs eclipse org param get type gettype get parent getparent ast rewrite astrewrite do add local doaddlocal compilation unit compilationunit ast ast getast block body body declaration bodydeclaration decl ast res olving astresolving find parent body declaration findparentbodydeclaration f original node foriginalnode i binding ibinding target context targetcontext decl method declaration methoddeclaration body method declaration methoddeclaration decl get body getbody target context targetcontext method declaration methoddeclaration decl resolve binding resolvebinding decl initializer body initializer decl get body getbody target context targetcontext bindings get binding of parent type getbindingofparenttype decl ast rewrite astrewrite rewrite ast rewrite astrewrite create ast import rewrite importrewrite imports create import rewrite createimportrewrite compilation unit compilationunit decl get root getroot simple name simplename names get all references getallreferences body ast node astnode dom inant dominant get dom inant node getdominantnode names statement dom inant statement dominantstatement ast res olving astresolving find parent statement findparentstatement dom inant dominant ast nodes astnodes is control statement body iscontrolstatementbody dom inant statement dominantstatement get location in parent getlocationinparent dom inant statement dominantstatement statement dom inant statement dominantstatement get parent getparent simple name simplename node names import rewrite context importrewritecontext import rewrite context importrewritecontext context sensitive import rewrite context contextsensitiveimportrewritecontext node imports is assigned isassigned dom inant statement dominantstatement node assignment assignment assignment node get parent getparent trick avoid comment removal statement expression statement replace assignment variable declaration expression variabledeclarationexpression variable declaration fragment variabledeclarationfragment new decl frag newdeclfrag ast new variable declaration fragment newvariabledeclarationfragment variable declaration expression variabledeclarationexpression new decl newdecl ast new variable declaration expression newvariabledeclarationexpression new decl frag newdeclfrag new decl newdecl set type settype evaluate variable type evaluatevariabletype ast imports import rewrite context importrewritecontext target context targetcontext expression placeholder expression rewrite create copy target createcopytarget assignment get right hand side getrighthandside new decl frag newdeclfrag set initializer setinitializer placeholder new decl frag newdeclfrag set name setname ast new simple name newsimplename node get identifier getidentifier rewrite replace assignment new decl newdecl add linked position addlinkedposition rewrite track new decl newdecl get type gettype key type add linked position addlinkedposition rewrite track new decl frag newdeclfrag get name getname key set end position setendposition rewrite track assignment get parent getparent rewrite dom inant dominant dom inant statement dominantstatement is for statement init isforstatementinit dom inant statement dominantstatement node assignment assignment assignment node get parent getparent variable declaration fragment variabledeclarationfragment frag ast new variable declaration fragment newvariabledeclarationfragment variable declaration expression variabledeclarationexpression expression ast new variable declaration expression newvariabledeclarationexpression frag frag set name setname ast new simple name newsimplename node get identifier getidentifier expression placeholder expression rewrite create copy target createcopytarget assignment get right hand side getrighthandside frag set initializer setinitializer placeholder expression set type settype evaluate variable type evaluatevariabletype ast imports import rewrite context importrewritecontext target context targetcontext rewrite replace assignment expression add linked position addlinkedposition rewrite track expression get type gettype key type add linked position addlinkedposition rewrite track frag get name getname key set end position setendposition rewrite track expression rewrite dom inant dominant dom inant statement dominantstatement is enhanced for statement variable isenhancedforstatementvariable dom inant statement dominantstatement node collection of t collectionoft collection of t collectionoft enhanced for statement enhancedforstatement enhanced for statement enhancedforstatement enhanced for statement enhancedforstatement dom inant statement dominantstatement single variable declaration singlevariabledeclaration parameter enhanced for statement enhancedforstatement get parameter getparameter expression expression enhanced for statement enhancedforstatement get expression getexpression simple name simplename new name newname simple name simplename rewrite create move target createmovetarget node rewrite parameter single variable declaration singlevariabledeclaration property new name newname i type binding itypebinding element binding elementbinding i type binding itypebinding type binding typebinding expression resolve type binding resolvetypebinding type binding typebinding type binding typebinding is array isarray element binding elementbinding type binding typebinding get element type getelementtype i type binding itypebinding iterable bindings find type in hierarchy findtypeinhierarchy type binding typebinding java lang iterable iterable i type binding itypebinding type arguments typearguments iterable get type arguments gettypearguments type arguments typearguments length element binding elementbinding type arguments typearguments element binding elementbinding bindings normalize for declaration use normalizefordeclarationuse element binding elementbinding ast type type element binding elementbinding type imports add import addimport element binding elementbinding ast import rewrite context importrewritecontext type nls ast new simple type newsimpletype nls ast new simple name newsimplename object rewrite parameter single variable declaration singlevariabledeclaration type property type add linked position addlinkedposition rewrite track type key type add linked position addlinkedposition rewrite track new name newname key set end position setendposition rewrite track expression rewrite foo foo variable declaration fragment variabledeclarationfragment new decl frag newdeclfrag ast new variable declaration fragment newvariabledeclarationfragment variable declaration statement variabledeclarationstatement new decl newdecl ast new variable declaration statement newvariabledeclarationstatement new decl frag newdeclfrag new decl frag newdeclfrag set name setname ast new simple name newsimplename node get identifier getidentifier new decl newdecl set type settype evaluate variable type evaluatevariabletype ast imports import rewrite context importrewritecontext target context targetcontext new decl frag newdeclfrag set initializer setinitializer ast node factory astnodefactory new default expression newdefaultexpression ast new decl newdecl get type gettype add linked position addlinkedposition rewrite track new decl newdecl get type gettype key type add linked position addlinkedposition rewrite track node key add linked position addlinkedposition rewrite track new decl frag newdeclfrag get name getname key statement statement dom inant statement dominantstatement list ast node astnode list ast nodes astnodes get containing list getcontaininglist statement parent list statement get parent getparent statement statement statement statement get parent getparent list ast nodes astnodes get containing list getcontaininglist statement list ast node astnode parent statement get parent getparent structural property descriptor structuralpropertydescriptor child property childproperty statement get location in parent getlocationinparent child property childproperty is child list property ischildlistproperty rewrite get list rewrite getlistrewrite parent child list property descriptor childlistpropertydescriptor child property childproperty insert before insertbefore new decl newdecl statement rewrite rewrite simple name simplename get all references getallreferences block body simple name simplename names linked node finder linkednodefinder find by problems findbyproblems body f original node foriginalnode names simple name simplename f original node foriginalnode names length arrays sort names comparator simple name simplename override compare simple name simplename simple name simplename get start position getstartposition get start position getstartposition names ast node astnode get dom inant node getdominantnode simple name simplename names ast res olving astresolving find parent statement findparentstatement names ast node astnode dom inator dominator names names length ast res olving astresolving find parent statement findparentstatement names ast node astnode curr names curr dom inator dominator ast node astnode parent get common parent getcommonparent curr dom inator dominator curr get start position getstartposition dom inator dominator get start position getstartposition dom inator dominator curr dom inator dominator get parent getparent parent dom inator dominator dom inator dominator get parent getparent parent kind parentkind dom inator dominator get parent getparent get node type getnodetype parent kind parentkind ast node astnode block parent kind parentkind ast node astnode statement dom inator dominator get parent getparent dom inator dominator ast node astnode get common parent getcommonparent ast node astnode node ast node astnode node ast node astnode parent node get parent getparent parent ast nodes astnodes is parent isparent node parent parent parent get parent getparent parent ast rewrite astrewrite do add field doaddfield compilation unit compilationunit ast root astroot simple name simplename node f original node foriginalnode is in different u isindifferentcu ast node astnode new type decl newtypedecl ast root astroot find declaring node finddeclaringnode f sender binding fsenderbinding new type decl newtypedecl ast root astroot ast res olving astresolving create quick fix t createquickfixast get compilation unit getcompilationunit new type decl newtypedecl ast root astroot find declaring node finddeclaringnode f sender binding fsenderbinding get key getkey is in different u isindifferentcu import rewrite importrewrite imports create import rewrite createimportrewrite ast root astroot import rewrite context importrewritecontext import rewrite context importrewritecontext context sensitive import rewrite context contextsensitiveimportrewritecontext ast res olving astresolving find parent body declaration findparentbodydeclaration node imports new type decl newtypedecl ast ast new type decl newtypedecl getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast variable declaration fragment variabledeclarationfragment fragment ast new variable declaration fragment newvariabledeclarationfragment fragment set name setname ast new simple name newsimplename node get identifier getidentifier type type evaluate variable type evaluatevariabletype ast imports import rewrite context importrewritecontext f sender binding fsenderbinding field declaration fielddeclaration new decl newdecl ast new field declaration newfielddeclaration fragment new decl newdecl set type settype type new decl newdecl modifiers add all addall ast node factory astnodefactory new modifiers newmodifiers ast evaluate field modifiers evaluatefieldmodifiers new type decl newtypedecl f sender binding fsenderbinding is interface isinterface f variable kind fvariablekind field fragment set initializer setinitializer ast node factory astnodefactory new default expression newdefaultexpression ast type child list property descriptor childlistpropertydescriptor property ast nodes astnodes get body declarations property getbodydeclarationsproperty new type decl newtypedecl list body declaration bodydeclaration decls ast nodes astnodes body declaration bodydeclaration get child list property getchildlistproperty new type decl newtypedecl property max offset maxoffset is in different u isindifferentcu node get start position getstartposition insert index insertindex find field insert index findfieldinsertindex decls new decl newdecl max offset maxoffset list rewrite listrewrite list rewriter listrewriter rewrite get list rewrite getlistrewrite new type decl newtypedecl property list rewriter listrewriter insert at insertat new decl newdecl insert index insertindex modifier correction sub processor modifiercorrectionsubprocessor install linked visibility proposals installlinkedvisibilityproposals get linked proposal model getlinkedproposalmodel rewrite new decl newdecl modifiers f sender binding fsenderbinding is interface isinterface add linked position addlinkedposition rewrite track new decl newdecl get type gettype key type is in different u isindifferentcu add linked position addlinkedposition rewrite track node key add linked position addlinkedposition rewrite track fragment get name getname key fragment get initializer getinitializer add linked position addlinkedposition rewrite track fragment get initializer getinitializer key initializer rewrite find field insert index findfieldinsertindex list body declaration bodydeclaration decls field declaration fielddeclaration new decl newdecl max offset maxoffset max offset maxoffset decls size body declaration bodydeclaration curr decls max offset maxoffset curr get start position getstartposition curr get length getlength ast nodes astnodes get insertion index getinsertionindex new decl newdecl decls sub list sublist ast nodes astnodes get insertion index getinsertionindex new decl newdecl decls type evaluate variable type evaluatevariabletype ast ast import rewrite importrewrite imports import rewrite context importrewritecontext import rewrite context importrewritecontext i binding ibinding target context targetcontext f original node foriginalnode get parent getparent method invocation methodinvocation method invocation methodinvocation parent method invocation methodinvocation f original node foriginalnode get parent getparent parent get expression getexpression f original node foriginalnode foo guess qualifier type type method foo i type binding itypebinding bindings ast res olving astresolving get qualifier guess getqualifierguess f original node foriginalnode get root getroot parent get name getname get identifier getidentifier parent arguments target context targetcontext bindings length bindings length add linked position proposal addlinkedpositionproposal key type bindings imports add import addimport bindings ast import rewrite context importrewritecontext i type binding itypebinding binding ast res olving astresolving guess binding for reference guessbindingforreference f original node foriginalnode binding binding is wildcard type iswildcardtype binding ast res olving astresolving normalize wildcard type normalizewildcardtype binding is variable assigned isvariableassigned ast binding binding applies binding ast resolve well known type resolvewellknowntype java lang object is variable assigned isvariableassigned i type binding itypebinding type proposals typeproposals ast res olving astresolving get relaxing types getrelaxingtypes ast binding type proposals typeproposals length add linked position proposal addlinkedpositionproposal key type type proposals typeproposals imports add import addimport binding ast import rewrite context importrewritecontext binding find type ast node abc abc type type ast res olving astresolving guess type for reference guesstypeforreference ast f original node foriginalnode type type f variable kind fvariablekind field nls ast new simple type newsimpletype ast new simple name newsimplename string nls ast new simple type newsimpletype ast new simple name newsimplename object is variable assigned isvariableassigned ast node astnode parent f original node foriginalnode get parent getparent parent assignment f original node foriginalnode assignment parent get left hand side getlefthandside evaluate field modifiers evaluatefieldmodifiers ast node astnode new type decl newtypedecl f sender binding fsenderbinding is annotation isannotation f sender binding fsenderbinding is interface isinterface members copy modifiers existing field field declaration fielddeclaration field decls fielddecls type declaration typedeclaration new type decl newtypedecl get fields getfields field decls fielddecls length field decls fielddecls get modifiers getmodifiers modifiers f variable kind fvariablekind field modifiers modifier modifier ast node astnode parent f original node foriginalnode get parent getparent parent qualified name qualifiedname i binding ibinding qualifier binding qualifierbinding qualified name qualifiedname parent get qualifier getqualifier resolve binding resolvebinding qualifier binding qualifierbinding i type binding itypebinding modifiers modifier ast res olving astresolving is in static context isinstaticcontext f original node foriginalnode modifiers modifier ast node astnode node ast res olving astresolving find parent type findparenttype f original node foriginalnode new type decl newtypedecl equals node modifiers modifier node anonymous class declaration anonymousclassdeclaration modifiers modifier modifiers modifier modifiers ast rewrite astrewrite do add enum const doaddenumconst compilation unit compilationunit ast root astroot simple name simplename node f original node foriginalnode ast node astnode new type decl newtypedecl ast root astroot find declaring node finddeclaringnode f sender binding fsenderbinding new type decl newtypedecl ast root astroot ast res olving astresolving create quick fix t createquickfixast get compilation unit getcompilationunit new type decl newtypedecl ast root astroot find declaring node finddeclaringnode f sender binding fsenderbinding get key getkey new type decl newtypedecl ast ast new type decl newtypedecl getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast enum constant declaration enumconstantdeclaration const decl constdecl ast new enum constant declaration newenumconstantdeclaration const decl constdecl set name setname ast new simple name newsimplename node get identifier getidentifier list rewrite listrewrite list rewriter listrewriter rewrite get list rewrite getlistrewrite new type decl newtypedecl enum declaration enumdeclaration enum constants property list rewriter listrewriter insert last insertlast const decl constdecl add linked position addlinkedposition rewrite track const decl constdecl get name getname key rewrite returns variable kind variable kind get variable kind getvariablekind f variable kind fvariablekind