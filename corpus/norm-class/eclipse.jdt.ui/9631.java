copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation ferenc hechler ferenc hechler users source for ge sourceforge net jar application add jar jar class loader classloader option org eclipse jdt internal jar package rfat jarpackagerfat java file java file input stream fileinputstream java file not found exception filenotfoundexception java file output stream fileoutputstream java io exception ioexception java input stream inputstream java output stream outputstream java util array list arraylist java util hash set hashset java util iterator java util java util zip zip file zipfile org eclipse swt widgets shell org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime multi status multistatus org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt jar package r jarpackager i manifest provider imanifestprovider org eclipse jdt jar package r jarpackager jar package data jarpackagedata org eclipse jdt internal jar package r jarpackager jar packager util jarpackagerutil jar builder extra cts extracts required libraries folder generated jar unpack jar builder unpackjarbuilder fat jar builder fatjarbuilder nls string builder org eclipse jdt unpack jar builder nls string subfolder suffix lib string f sub folder fsubfolder i path ipath f sub folder path fsubfolderpath jar package data jarpackagedata f jar package fjarpackage string jar names jarnames unpack jar builder unpackjarbuilder jar package data jarpackagedata jar package jarpackage f sub folder fsubfolder jar package jarpackage get absolute jar location getabsolutejarlocation remove file extension removefileextension last segment lastsegment subfolder suffix f sub folder path fsubfolderpath jar package jarpackage get absolute jar location getabsolutejarlocation remove last segments removelastsegments append f sub folder fsubfolder f jar package fjarpackage jar package jarpackage override string get id getid builder merge manifests override is merge manifests ismergemanifests remove sig ners signers override is remove sign ers isremovesigners override i manifest provider imanifestprovider get manifest provider getmanifestprovider fat jar manifest provider fatjarmanifestprovider override string get manifest classpath getmanifestclasspath array list arraylist string renamed jar names renamedjarnames array list arraylist object elements f jar package fjarpackage get elements getelements elements length object element elements element i package fragment root ipackagefragmentroot i package fragment root ipackagefragmentroot element is archive isarchive string jar name jarname i package fragment root ipackagefragmentroot element get path getpath to file tofile get name getname renamed jar names renamedjarnames jar name jarname jar name jarname fat jar packager util fatjarpackagerutil next num bered file name nextnumberedfilename jar name jarname renamed jar names renamedjarnames add jar name jarname string buffer stringbuffer result string buffer stringbuffer nls result append iterator string iterator renamed jar names renamedjarnames iterator iterator has next hasnext string jar name jarname iterator nls nls result append append f sub folder fsubfolder append append jar name jarname result to string tostring override open jar package data jarpackagedata jar package jarpackage shell display shell displayshell multi status multistatus status core exception coreexception open jar package jarpackage display shell displayshell status f jar package fjarpackage jar package jarpackage jar names jarnames hash set hashset create blank sub folder createblanksubfolder display shell displayshell jar package jarpackage allow overwrite allowoverwrite creates sub folder subfolder cleanup existing sub folder subfolder dialog user param parent parent dialog code code dialog presented param allow overwrite allowoverwrite package r packager allowed overwrite existing folders core exception coreexception creation folder failed create blank sub folder createblanksubfolder shell parent allow overwrite allowoverwrite core exception coreexception file folder f sub folder path fsubfolderpath to file tofile test directory exists folder exists create folder folder mkdirs nls nls jar packager util jarpackagerutil create core exception createcoreexception create lib folder folder get absolute path getabsolutepath folder can write canwrite nls nls jar packager util jarpackagerutil create core exception createcoreexception folder folder get absolute path getabsolutepath writable allow overwrite allowoverwrite parent jar packager util jarpackagerutil ask for overwrite folder permission askforoverwritefolderpermission parent f sub folder path fsubfolderpath nls nls jar packager util jarpackagerutil create core exception createcoreexception folder folder get absolute path getabsolutepath exists overwritten file jar files jarfiles folder list files listfiles jar files jarfiles length jar files jarfiles is file isfile nls nls jar packager util jarpackagerutil create core exception createcoreexception sub folder subfolder jar files jarfiles get absolute path getabsolutepath exists jar files jarfiles delete nls nls jar packager util jarpackagerutil create core exception createcoreexception delete file jar files jarfiles get absolute path getabsolutepath override write archive writearchive zip file zipfile jar file jarfile i progress monitor iprogressmonitor progress monitor progressmonitor file jar path file jarpathfile file jar file jarfile get name getname string jar name jarname jar path file jarpathfile get name getname jar names jarnames jar name jarname jar name jarname fat jar packager util fatjarpackagerutil next num bered file name nextnumberedfilename jar name jarname jar names jarnames add jar name jarname file dest jar path file destjarpathfile file f sub folder path fsubfolderpath to file tofile jar name jarname copy file copyfile jar path file jarpathfile dest jar path file destjarpathfile copy file copyfile file src file dest input stream inputstream output stream outputstream file input stream fileinputstream src file output stream fileoutputstream dest buf cnt read buf cnt write buf cnt cnt read buf runtime exception runtimeexception runtime exception runtimeexception file not found exception filenotfoundexception runtime exception runtimeexception io exception ioexception runtime exception runtimeexception close io exception ioexception ignore close io exception ioexception ignore