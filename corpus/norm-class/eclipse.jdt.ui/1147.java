copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation sebastian davids sdavids gmx bug org eclipse jdt internal junit runner java buffered reader bufferedreader java buffered writer bufferedwriter java file java file input stream fileinputstream java io exception ioexception java input stream reader inputstreamreader java output stream writer outputstreamwriter java print writer printwriter java string writer stringwriter java unsupported encoding exception unsupportedencodingexception java net socket java util vector org eclipse jdt internal junit runner junit j unit junit test loader testloader test runner testrunner reports socket connection message ids messageids protocol remote test runner remotetestrunner message sender messagesender i visits test trees ivisitstesttrees holder rerun request rerun request rerunrequest string f rerun class name frerunclassname string f rerun test name freruntestname f rerun test id freruntestid rerun request rerunrequest test id testid string class name classname string test name testname f rerun test id freruntestid test id testid f rerun class name frerunclassname class name classname f rerun test name freruntestname test name testname nls string reran failure failure nls string reran error error nls string reran test classes executed string f test class names ftestclassnames test argument test string f test name ftestname current test result test execution testexecution f execution fexecution client socket socket f client socket fclientsocket print writer sending messages print writer printwriter f writer fwriter reader incoming messages buffered reader bufferedreader f reader freader host connect localhost nls string f host fhost port connect f port fport debug mode enabled f debug mode fdebugmode test server alive test finished rerun tests f keep alive fkeepalive server stopped f stopped fstopped queue rerun requests vector f rerun requests frerunrequests vector thread reading socket reader thread readerthread f reader thread freaderthread string f rerun test freruntest test id map testidmap f ids fids test id map testidmap string f failure names ffailurenames i test loader itestloader f loader floader message sender messagesender f sender fsender f console mode fconsolemode reader thread processes messages client reader thread readerthread thread reader thread readerthread nls reader thread readerthread string message message f reader freader read line readline message starts with startswith message ids messageids test f stopped fstopped remote test runner remotetestrunner remote test runner remotetestrunner remote test runner remotetestrunner notify all notifyall message starts with startswith message ids messageids test rerun string arg message substring message ids messageids msg header length format test id testid class name classname test name testname arg index of indexof arg index of indexof string arg substring test id testid integer parse int parseint string class name classname arg substring string test name testname arg substring arg length remote test runner remotetestrunner f rerun requests frerunrequests add rerun request rerunrequest test id testid class name classname test name testname remote test runner remotetestrunner notify all notifyall exception remote test runner remotetestrunner remote test runner remotetestrunner set message sender setmessagesender set message sender setmessagesender message sender messagesender sender f sender fsender sender main entry point param args parameters pre class names classnames test suite test filename testfilename file class names classnames test suites test test method format class name classname test name testname host host connect local host port port connect mandatory argument keep alive keepalive process alive test pre main string args remote test runner remotetestrunner test run server testrunserver remote test runner remotetestrunner test run server testrunserver init args test run server testrunserver throwable print stack trace printstacktrace system exit parse command arguments hook subclasses process additional arguments param args arguments init string args default init defaultinit args loader loading tests subclasses override loader loader lead test classes class loader classloader get test class loader gettestclassloader get class getclass get class loader getclassloader process arguments param args arguments default init defaultinit string args args length nls nls args to lower case tolowercase equals class names classnames args to lower case tolowercase equals class name classname vector list vector args length nls args starts with startswith nls list add args f test class names ftestclassnames string list to array toarray string list size nls args to lower case tolowercase equals test string test name testname args test name testname index of indexof illegal argument exception illegalargumentexception test name testname separated f test name ftestname test name testname substring f test class names ftestclassnames string test name testname substring nls args to lower case tolowercase equals testname file testnamefile string test name file testnamefile args read test names readtestnames test name file testnamefile io exception ioexception illegal argument exception illegalargumentexception read test name testname file nls args to lower case tolowercase equals test failures testfailures string test failures file testfailuresfile args read failure names readfailurenames test failures file testfailuresfile io exception ioexception illegal argument exception illegalargumentexception read test failures testfailures file nls args to lower case tolowercase equals port f port fport integer parse int parseint args nls args to lower case tolowercase equals host f host fhost args nls args to lower case tolowercase equals rerun f rerun test freruntest args nls args to lower case tolowercase equals keep alive keepalive f keep alive fkeepalive nls nls args to lower case tolowercase equals debug ging debugging args to lower case tolowercase equals debug f debug mode fdebugmode nls args to lower case tolowercase equals junit console junitconsole f console mode fconsolemode nls args to lower case tolowercase equals test loader class testloaderclass string class name classname args create loader createloader class name classname get test loader gettestloader init default loader initdefaultloader f test class names ftestclassnames f test class names ftestclassnames length nls illegal argument exception illegalargumentexception j unit messages junitmessages get string getstring remote test runner remotetestrunner error classname missing classnamemissing f port fport nls illegal argument exception illegalargumentexception j unit messages junitmessages get string getstring remote test runner remotetestrunner error port missing portmissing f debug mode fdebugmode nls system println keep alive keepalive f keep alive fkeepalive init default loader initdefaultloader create loader createloader j unit junit test loader testloader get name getname create loader createloader string class name classname set loader setloader create raw test loader createrawtestloader class name classname i test loader itestloader create raw test loader createrawtestloader string class name classname i test loader itestloader load test loader class loadtestloaderclass class name classname new instance newinstance exception string writer stringwriter trace string writer stringwriter print stack trace printstacktrace print writer printwriter trace string message j unit messages junitmessages get for matted string getformattedstring remote test runner remotetestrunner error invalid loader invalidloader object class name classname trace to string tostring illegal argument exception illegalargumentexception message load test loader class loadtestloaderclass string class name classname class not found exception classnotfoundexception for name forname class name classname set loader setloader i test loader itestloader new instance newinstance f loader floader new instance newinstance read test names readtestnames string test name file testnamefile io exception ioexception nls buffered reader bufferedreader buffered reader bufferedreader input stream reader inputstreamreader file input stream fileinputstream file test name file testnamefile utf string vector list vector read line readline list add f test class names ftestclassnames string list to array toarray string list size close f debug mode fdebugmode nls system println tests f test class names ftestclassnames length nls system println nls f test class names ftestclassnames read failure names readfailurenames string test failure file testfailurefile io exception ioexception nls buffered reader bufferedreader buffered reader bufferedreader input stream reader inputstreamreader file input stream fileinputstream file test failure file testfailurefile utf string vector list vector read line readline list add f failure names ffailurenames string list to array toarray string list size close f debug mode fdebugmode nls system println failures f failure names ffailurenames length nls system println nls f failure names ffailurenames connects remote ports runs tests connect f rerun test freruntest rerun test reruntest rerun request rerunrequest integer parse int parseint f rerun test freruntest f test class names ftestclassnames f test name ftestname first run execution listener firstrunexecutionlistener listener first run execution listener firstrunexecutionlistener f execution fexecution test execution testexecution listener get class ifier getclassifier run tests runtests f execution fexecution f keep alive fkeepalive wait for reruns waitforreruns shut down shutdown first run execution listener firstrunexecutionlistener first run execution listener firstrunexecutionlistener first run execution listener firstrunexecutionlistener f sender fsender f ids fids waits rerun requests explicit request wait for reruns waitforreruns f stopped fstopped wait f stopped fstopped f rerun requests frerunrequests size rerun request rerunrequest rerun request rerunrequest f rerun requests frerunrequests remove rerun test reruntest interrupted exception interruptedexception run failed runfailed string message exception exception todo remove system err println system err println message exception exception print stack trace printstacktrace system err load classes loadclasses string test class names testclassnames vector classes vector test class names testclassnames length string test class names testclassnames clazz load class loadclass clazz classes add clazz classes to array toarray classes size notify listeners of test end notifylistenersoftestend test execution testexecution execution test start time teststarttime execution execution should stop shouldstop notify test run stopped notifytestrunstopped system current time millis currenttimemillis test start time teststarttime notify test run ended notifytestrunended system current time millis currenttimemillis test start time teststarttime runs tests param test class names testclassnames classes param test name testname individual method param execution executor run tests runtests string test class names testclassnames string test name testname test execution testexecution execution i test reference itestreference suites f loader floader load tests loadtests load classes loadclasses test class names testclassnames test name testname f failure names ffailurenames count test methods testmethods info rm inform i test run listeners itestrunlisteners count count tests counttests suites notify test run started notifytestrunstarted count count notify test run ended notifytestrunended send trees sendtrees suites test start time teststarttime system current time millis currenttimemillis execution suites notify listeners of test end notifylistenersoftestend execution test start time teststarttime send trees sendtrees i test reference itestreference suites start time starttime system current time millis currenttimemillis f debug mode fdebugmode nls system print start send tree suites length suites send tree sendtree f debug mode fdebugmode nls system println send tree time system current time millis currenttimemillis start time starttime count tests counttests i test reference itestreference tests count tests length i test reference itestreference test tests test count count test count test cases counttestcases count reruns test defined fully qualified test param rerun request rerun test reruntest rerun request rerunrequest classes load classes loadclasses string f rerun class name frerunclassname i test reference itestreference rerun test reruntest f loader floader load tests loadtests classes f rerun test name freruntestname rerun execution listener rerunexecutionlistener service rerun execution listener rerunexecutionlistener test execution testexecution execution test execution testexecution service get class ifier getclassifier i test reference itestreference suites i test reference itestreference rerun test reruntest execution suites notify rerun complete notifyreruncomplete service get status getstatus rerun execution listener rerunexecutionlistener rerun execution listener rerunexecutionlistener rerun execution listener rerunexecutionlistener f sender fsender f ids fids ic lass ifies throw ables iclassifiesthrowables get class ifier getclassifier default class ifier defaultclassifier visit tree entry visittreeentry i test identifier itestidentifier notify test tree entry notifytesttreeentry get test id gettestid escape test name escapetestname get name getname string escape test name escapetestname string index of indexof index of indexof index of indexof index of indexof string buffer stringbuffer string buffer stringbuffer length length char at charat append append length char at charat append append append to string tostring string get test id gettestid i test identifier itestidentifier f ids fids get test id gettestid f execution fexecution f execution fexecution connect f console mode fconsolemode f client socket fclientsocket f writer fwriter print writer printwriter system f reader freader buffered reader bufferedreader input stream reader inputstreamreader system f reader thread freaderthread reader thread readerthread f reader thread freaderthread start f debug mode fdebugmode system println remote test runner remotetestrunner connect f host fhost f port fport exception exception f client socket fclientsocket socket f host fhost f port fport f writer fwriter print writer printwriter buffered writer bufferedwriter output stream writer outputstreamwriter f client socket fclientsocket get output stream getoutputstream utf unsupported encoding exception unsupportedencodingexception f writer fwriter print writer printwriter buffered writer bufferedwriter output stream writer outputstreamwriter f client socket fclientsocket get output stream getoutputstream f reader freader buffered reader bufferedreader input stream reader inputstreamreader f client socket fclientsocket get input stream getinputstream utf unsupported encoding exception unsupportedencodingexception f reader freader buffered reader bufferedreader input stream reader inputstreamreader f client socket fclientsocket get input stream getinputstream f reader thread freaderthread reader thread readerthread f reader thread freaderthread start io exception ioexception exception thread sleep interrupted exception interruptedexception run failed runfailed j unit messages junitmessages get for matted string getformattedstring remote test runner remotetestrunner error connect string f host fhost integer to string tostring f port fport exception shut down shutdown f writer fwriter f writer fwriter close f writer fwriter f reader thread freaderthread lock held buffered reader bufferedreader bug f reader thread freaderthread int errupt interrupt f reader freader f reader freader close f reader freader io exception ioexception f debug mode fdebugmode print stack trace printstacktrace f client socket fclientsocket f client socket fclientsocket close f client socket fclientsocket io exception ioexception f debug mode fdebugmode print stack trace printstacktrace org eclipse jdt internal junit runner message sender messagesender send message sendmessage java lang string send message sendmessage string msg f writer fwriter f writer fwriter println msg f console mode fconsolemode system println msg notify test run started notifytestrunstarted test count testcount nls nls f sender fsender send message sendmessage message ids messageids test start test count testcount notify test run ended notifytestrunended elapsed time elapsedtime f sender fsender send message sendmessage message ids messageids test elapsed time elapsedtime f sender fsender flush shut down shutdown notify test run stopped notifytestrunstopped elapsed time elapsedtime f sender fsender send message sendmessage message ids messageids test stopped elapsed time elapsedtime f sender fsender flush shut down shutdown notify test tree entry notifytesttreeentry string tree entry treeentry f sender fsender send message sendmessage message ids messageids test tree tree entry treeentry org eclipse jdt internal junit runner rerun completion listener reruncompletionlistener notify rerun complete notifyreruncomplete org eclipse jdt internal junit runner rerun request rerunrequest java lang string notify rerun complete notifyreruncomplete rerun request rerunrequest string status f port fport nls nls nls f sender fsender send message sendmessage message ids messageids test reran f rerun test id freruntestid f rerun class name frerunclassname f rerun test name freruntestname status f sender fsender flush flush f writer fwriter flush run tests runtests test execution testexecution execution run tests runtests f test class names ftestclassnames f test name ftestname execution i test loader itestloader get test loader gettestloader f loader floader load class loadclass string class name classname remote test runner remotetestrunner listener clazz clazz get test class loader gettestclassloader load class loadclass class name classname class not found exception classnotfoundexception listener run failed runfailed j unit messages junitmessages get for matted string getformattedstring remote test runner remotetestrunner error class not found classnotfound class name classname clazz