copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal java editor javaeditor java lang reflect invocation target exception invocationtargetexception java util array list arraylist java util hash set hashset java util list java util org osgi framework bundle org eclipse swt swt org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i safe runnable isaferunnable org eclipse core runtime i status istatus org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime platform org eclipse core runtime safe runner saferunner org eclipse core runtime status org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core runtime content i content description icontentdescription org eclipse core runtime content i content type icontenttype org eclipse core resources i file ifile org eclipse core resources i marker imarker org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources i storage istorage org eclipse core file buf fers filebuffers file buffers filebuffers org eclipse core file buf fers filebuffers i text file buffer itextfilebuffer org eclipse core file buf fers filebuffers i text file buffer manager itextfilebuffermanager org eclipse core file buf fers filebuffers location kind locationkind org eclipse jface action action org eclipse jface action i action iaction org eclipse jface viewers i selection provider iselectionprovider org eclipse jface text bad location exception badlocationexception org eclipse jface text i document idocument org eclipse jface text i region iregion org eclipse jface text region org eclipse jface text text selection textselection org eclipse i editor input ieditorinput org eclipse i editor part ieditorpart org eclipse i editor site ieditorsite org eclipse i file editor input ifileeditorinput org eclipse i workbench iworkbench org eclipse i workbench page iworkbenchpage org eclipse i workbench window iworkbenchwindow org eclipse part init exception partinitexception org eclipse platformui org eclipse actions workspace modify operation workspacemodifyoperation org eclipse ide ide org eclipse ide i goto marker igotomarker org eclipse file editor input fileeditorinput org eclipse multi editor input multieditorinput org eclipse texteditor i document provider idocumentprovider org eclipse texteditor i text editor itexteditor org eclipse texteditor i text editor action definition ids itexteditoractiondefinitionids org eclipse texteditor text editor action texteditoraction org eclipse editors text text file document provider textfiledocumentprovider org eclipse compare range differencer rangedifferencer i range comparator irangecomparator org eclipse compare range differencer rangedifferencer range difference rangedifference org eclipse compare range differencer rangedifferencer range diff erencer rangedifferencer org eclipse jdt core i class file iclassfile org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i source range isourcerange org eclipse jdt core i source reference isourcereference org eclipse jdt core i type root ityperoot org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util messages org eclipse jdt javaui org eclipse jdt preference constants preferenceconstants org eclipse jdt internal i java status constants ijavastatusconstants org eclipse jdt internal java plugin javaplugin org eclipse jdt internal compare java compare utilities javacompareutilities org eclipse jdt internal text line comparator linecomparator number routines working java elements javaelements editors is open in editor isopenineditor test element open editor open in editor openineditor force opening element editor get working copy getworkingcopy working copy element editor element editor utility editorutility tests editor param input element inputelement input element i editor part ieditorpart element open editor i editor part ieditorpart is open in editor isopenineditor object input element inputelement i editor part ieditorpart editor find editor findeditor input element inputelement editor editor i editor input ieditorinput input get editor input geteditorinput input element inputelement input i workbench page iworkbenchpage java plugin javaplugin get active page getactivepage find editor findeditor input opens java editor element code i java element ijavaelement code code i file ifile code code i storage istorage code editor activated param input element inputelement input element open editor code code external editor opened part init exception partinitexception editor opened input element valid status code link i java status constants ijavastatusconstants editor editor input opening editor failed editor input created element i editor part ieditorpart open in editor openineditor object input element inputelement part init exception partinitexception open in editor openineditor input element inputelement opens editor element i java element ijavaelement i file ifile i storage istorage param input element inputelement input element param activate code code editor activated open editor code code external editor opened part init exception partinitexception editor opened input element valid status code link i java status constants ijavastatusconstants editor editor input opening editor failed editor input created element i editor part ieditorpart open in editor openineditor object input element inputelement activate part init exception partinitexception input element inputelement i file ifile i file ifile file i file ifile input element inputelement is class file isclassfile file open in editor openineditor file activate input element inputelement java core javacore create class file from createclassfilefrom file i editor part ieditorpart editor find editor findeditor input element inputelement activate editor editor i editor input ieditorinput input get editor input geteditorinput input element inputelement input throw part init exception throwpartinitexception java editor messages javaeditormessages editor utility editorutility editor input editorinput i java status constants ijavastatusconstants editor editor input open in editor openineditor input get editor d geteditorid input activate find editor input element param input element inputelement input element param activate code code editor activated editor code code i editor part ieditorpart find editor findeditor object input element inputelement activate support navigate primary working copy support navigate active editor xxx file store editor input filestoreeditorinput api https bugs eclipse org bugs bug cgi code creating correct editor input get editor input geteditorinput object input element inputelement i java element ijavaelement i compilation unit icompilationunit i compilation unit icompilationunit i java element ijavaelement input element inputelement get ancestor getancestor i java element ijavaelement compilation unit i workbench page iworkbenchpage java plugin javaplugin get active page getactivepage i editor part ieditorpart editor editor get active editor getactiveeditor editor is compare editor input iscompareeditorinput is compare editor input iscompareeditorinput editor get editor input geteditorinput is compare editor input iscompareeditorinput java model util javamodelutil is primary isprimary i editor input ieditorinput editor input editorinput is compare editor input iscompareeditorinput editor input editorinput editor get adapter getadapter i editor input ieditorinput editor input editorinput editor get editor input geteditorinput i java element ijavaelement editorcu get editor input java element geteditorinputjavaelement editor input editorinput equals editorcu activate get active part getactivepart editor activate editor editor avoid unnecessary loading compare plug is compare plug in activated iscomparepluginactivated nls platform get bundle getbundle org eclipse compare get state getstate bundle active avoid unnecessary loading compare plug is compare editor input iscompareeditorinput i editor input ieditorinput input is compare plug in activated iscomparepluginactivated java compare utilities javacompareutilities is compare editor input iscompareeditorinput input selects java element editor param editor param element java element reveal reveal in editor revealineditor i editor part ieditorpart i java element ijavaelement element element java editor javaeditor java editor javaeditor set selection setselection element support java editor i source range isourcerange range element i compilation unit icompilationunit element i class file iclassfile element i source reference isourcereference range i source reference isourcereference element get name range getnamerange range reveal in editor revealineditor range get offset getoffset range get length getlength java model exception javamodelexception selects reveals region editor param editor param region region reveal in editor revealineditor i editor part ieditorpart i region iregion region region reveal in editor revealineditor region get offset getoffset region get length getlength selects reveals offset length editor param editor editor param offset offset param length length reveal in editor revealineditor i editor part ieditorpart editor offset length editor i text editor itexteditor i text editor itexteditor editor select and reveal selectandreveal offset length support text editor i goto marker igotomarker i goto marker igotomarker goto marker target gotomarkertarget editor i goto marker igotomarker goto marker target gotomarkertarget i goto marker igotomarker editor goto marker target gotomarkertarget editor i goto marker igotomarker editor get adapter getadapter i goto marker igotomarker goto marker target gotomarkertarget i editor input ieditorinput input editor get editor input geteditorinput input i file editor input ifileeditorinput workspace modify operation workspacemodifyoperation workspace modify operation workspacemodifyoperation override execute i progress monitor iprogressmonitor monitor core exception coreexception i marker imarker marker marker i file editor input ifileeditorinput input get file getfile create marker createmarker i marker imarker text marker set attribute setattribute i marker imarker start offset marker set attribute setattribute i marker imarker offset length goto marker target gotomarkertarget goto marker gotomarker marker marker marker delete invocation target exception invocationtargetexception interrupted exception interruptedexception is true istrue operation can celed canceled work around workaround send text selection xxx improved https bugs eclipse org bugs bug cgi editor editor get editor site geteditorsite get selection provider getselectionprovider i editor site ieditorsite site editor get editor site geteditorsite site i selection provider iselectionprovider provider editor get editor site geteditorsite get selection provider getselectionprovider provider provider set selection setselection text selection textselection offset length i editor part ieditorpart open in editor openineditor i file ifile file activate part init exception partinitexception file throw part init exception throwpartinitexception java editor messages javaeditormessages editor utility editorutility file i workbench page iworkbenchpage java plugin javaplugin get active page getactivepage throw part init exception throwpartinitexception java editor messages javaeditormessages editor utility editorutility active workbench page workbenchpage i editor part ieditorpart editor part editorpart ide open editor openeditor file activate initialize highlight range initializehighlightrange editor part editorpart editor part editorpart i editor part ieditorpart open in editor openineditor i editor input ieditorinput input string editorid activate part init exception partinitexception is not null isnotnull input is not null isnotnull editorid i workbench page iworkbenchpage java plugin javaplugin get active page getactivepage throw part init exception throwpartinitexception java editor messages javaeditormessages editor utility editorutility active workbench page workbenchpage i editor part ieditorpart editor part editorpart open editor openeditor input editorid activate initialize highlight range initializehighlightrange editor part editorpart editor part editorpart throw part init exception throwpartinitexception string message code part init exception partinitexception i status istatus status status i status istatus error javaui plugin code message part init exception partinitexception status throw part init exception throwpartinitexception string message part init exception partinitexception throw part init exception throwpartinitexception message i status istatus initialize highlight range initializehighlightrange i editor part ieditorpart editor part editorpart editor part editorpart i text editor itexteditor i action iaction toggle action toggleaction editor part editorpart get editor site geteditorsite get action bars getactionbars get global action handler getglobalactionhandler i text editor action definition ids itexteditoractiondefinitionids toggle selected element enable toggle action toggleaction enable editor part editorpart java editor javaeditor enable java plugin javaplugin get default getdefault get preference store getpreferencestore get boolean getboolean preference constants preferenceconstants editor segments enable enable toggle action toggleaction is enabled isenabled toggle action toggleaction is checked ischecked enable toggle action toggleaction text editor action texteditoraction reset action text editor action texteditoraction toggle action toggleaction set editor seteditor restore action text editor action texteditoraction toggle action toggleaction set editor seteditor i text editor itexteditor editor part editorpart uncheck toggle action toggleaction check toggle action toggleaction string get editor d geteditorid i editor input ieditorinput input part init exception partinitexception is not null isnotnull input input i file editor input ifileeditorinput ide get editor descriptor geteditordescriptor i file editor input ifileeditorinput input get file getfile get id getid string input get name getname input i class file editor input iclassfileeditorinput has source hassource has source hassource i class file editor input iclassfileeditorinput input get class file getclassfile get source range getsourcerange java model exception javamodelexception has source hassource has source hassource source ide get editor descriptor geteditordescriptor get id getid returns editor input java element param editor editor param primary only primaryonly code code primary working copies returned editor input code i type root ityperoot code code code i type root ityperoot get editor input java element geteditorinputjavaelement i editor part ieditorpart editor primary only primaryonly is not null isnotnull editor get editor input java element geteditorinputjavaelement editor get editor input geteditorinput primary only primaryonly i type root ityperoot get editor input java element geteditorinputjavaelement i editor input ieditorinput editor input editorinput primary only primaryonly editor input editorinput i compilation unit icompilationunit java plugin javaplugin get default getdefault get working copy manager getworkingcopymanager get working copy getworkingcopy editor input editorinput primary only primaryonly i java element ijavaelement editor input editorinput get adapter getadapter i java element ijavaelement i type root ityperoot i type root ityperoot i editor input ieditorinput get editor input geteditorinput i java element ijavaelement element element element i compilation unit icompilationunit i compilation unit icompilationunit unit i compilation unit icompilationunit element get primary getprimary i resource iresource resource unit get resource getresource resource i file ifile file editor input fileeditorinput i file ifile resource element i class file iclassfile internal class file editor input internalclassfileeditorinput i class file iclassfile element element element get parent getparent i editor input ieditorinput get editor input geteditorinput object input input i java element ijavaelement get editor input geteditorinput i java element ijavaelement input input i file ifile file editor input fileeditorinput i file ifile input java model util javamodelutil is openable storage isopenablestorage input jar entry editor input jarentryeditorinput i storage istorage input returns java element edited current active editor java element code code active editor doesn edit java element i java element ijavaelement get active editor java input getactiveeditorjavainput i workbench page iworkbenchpage java plugin javaplugin get active page getactivepage i editor part ieditorpart get active editor getactiveeditor i editor input ieditorinput editor input editorinput get editor input geteditorinput editor input editorinput javaui get editor input java element geteditorinputjavaelement editor input editorinput maps local ized localized modifier code manner find modifier findmodifier param modifier name modifiername modifier swt modifier bit code code match find local ized modifier findlocalizedmodifier string modifier name modifiername modifier name modifiername modifier name modifiername equals ignore case equalsignorecase action find modifier string findmodifierstring swt ctrl swt ctrl modifier name modifiername equals ignore case equalsignorecase action find modifier string findmodifierstring swt shift swt shift modifier name modifiername equals ignore case equalsignorecase action find modifier string findmodifierstring swt alt swt alt modifier name modifiername equals ignore case equalsignorecase action find modifier string findmodifierstring swt command swt command returns modifier string swt modifier modifier bits param state mask statemask swt modifier bits modifier string string get modifier string getmodifierstring state mask statemask nls string modifier string modifierstring state mask statemask swt ctrl swt ctrl modifier string modifierstring append modifier string appendmodifierstring modifier string modifierstring swt ctrl state mask statemask swt alt swt alt modifier string modifierstring append modifier string appendmodifierstring modifier string modifierstring swt alt state mask statemask swt shift swt shift modifier string modifierstring append modifier string appendmodifierstring modifier string modifierstring swt shift state mask statemask swt command swt command modifier string modifierstring append modifier string appendmodifierstring modifier string modifierstring swt command modifier string modifierstring appends modifier string swt modifier bit modifier string modifierstring param modifier string modifierstring modifier string param modifier swt modifier bit concat enated concatenated modifier string string append modifier string appendmodifierstring string modifier string modifierstring modifier modifier string modifierstring nls modifier string modifierstring string new modifier string newmodifierstring action find modifier string findmodifierstring modifier modifier string modifierstring length new modifier string newmodifierstring messages format java editor messages javaeditormessages editor utility editorutility concat modifier strings concatmodifierstrings string modifier string modifierstring new modifier string newmodifierstring returns java project editor input code code java project exists param input editor input java project i java project ijavaproject get java project getjavaproject i editor input ieditorinput input i java project ijavaproject j project jproject input i file editor input ifileeditorinput i project iproject project i file editor input ifileeditorinput input get file getfile get project getproject project j project jproject java core javacore create project j project jproject exists j project jproject input i class file editor input iclassfileeditorinput j project jproject i class file editor input iclassfileeditorinput input get class file getclassfile get java project getjavaproject j project jproject returns array editors unsaved content identical content presented editor editor parts result param skip non resource editors skipnonresourceeditors code code editors inputs adapt link i resource iresource saved array dirty editor parts i editor part ieditorpart get dirty editors getdirtyeditors skip non resource editors skipnonresourceeditors i editor input ieditorinput inputs hash set hashset list i editor part ieditorpart result array list arraylist i workbench iworkbench workbench platformui get workbench getworkbench i workbench window iworkbenchwindow windows workbench get workbench windows getworkbenchwindows windows length i workbench page iworkbenchpage windows get pages getpages length i editor part ieditorpart editors get dirty editors getdirtyeditors editors length i editor part ieditorpart editors i editor input ieditorinput input get editor input geteditorinput inputs add input skip non resource editors skipnonresourceeditors is resource editor input isresourceeditorinput input result add result to array toarray i editor part ieditorpart result size is resource editor input isresourceeditorinput i editor input ieditorinput input input multi editor input multieditorinput i editor input ieditorinput inputs multi editor input multieditorinput input get input getinput inputs length inputs get adapter getadapter i resource iresource input get adapter getadapter i resource iresource is class file isclassfile i file ifile file i content description icontentdescription content description contentdescription content description contentdescription file get content description getcontentdescription core exception coreexception content description contentdescription content description contentdescription i content type icontenttype content type contenttype content description contentdescription get content type getcontenttype content type contenttype nls org eclipse jdt core java class javaclass equals content type contenttype get id getid returns editors save performing global java operations param save unknown editors saveunknowneditors code code iff editors unknown buffer management saved editors save i editor part ieditorpart get dirty editors to save getdirtyeditorstosave save unknown editors saveunknowneditors i editor input ieditorinput inputs hash set hashset list i editor part ieditorpart result array list arraylist i workbench iworkbench workbench platformui get workbench getworkbench i workbench window iworkbenchwindow windows workbench get workbench windows getworkbenchwindows windows length i workbench page iworkbenchpage windows get pages getpages length i editor part ieditorpart editors get dirty editors getdirtyeditors editors length i editor part ieditorpart editors i editor input ieditorinput input get editor input geteditorinput must save dirty editor mustsavedirtyeditor input save unknown editors saveunknowneditors inputs add input result add result to array toarray i editor part ieditorpart result size must save dirty editor mustsavedirtyeditor i editor part ieditorpart i editor input ieditorinput input save unknown editors saveunknowneditors goal save editors int erfere interfere refactoring operations save editors compilation units working copies leaving dirty problems file buffer modified java model reconciled code save unknown editors saveunknowneditors code code code save editors implementation based file buf fers buffers i resource iresource resource input get adapter getadapter i resource iresource resource save unknown editors saveunknowneditors i java element ijavaelement java element javaelement java core javacore create resource java element javaelement i compilation unit icompilationunit i compilation unit icompilationunit i compilation unit icompilationunit java element javaelement is working copy isworkingcopy i text editor itexteditor save unknown editors saveunknowneditors i text editor itexteditor text editor texteditor i text editor itexteditor i document provider idocumentprovider document provider documentprovider text editor texteditor get document provider getdocumentprovider document provider documentprovider text file document provider textfiledocumentprovider save unknown editors saveunknowneditors regions lines changed buffer save occurred region result spans size successive lines changed region spans size successive lines regions include delimiters param buffer buffer compare contents param monitor report progress regions changed lines core exception coreexception wrong i region iregion calculate changed line regions calculatechangedlineregions i text file buffer itextfilebuffer buffer i progress monitor iprogressmonitor monitor core exception coreexception i region iregion result i region iregion i status istatus error status errorstatus i status istatus status status safe runner saferunner i safe runnable isaferunnable org eclipse core runtime i safe runnable isaferunnable handle exception handleexception java lang throwable override handle exception handleexception throwable exception java plugin javaplugin log status i status istatus error javaui plugin i java status constants ijavastatusconstants editor changed region calculation exception get local ized message getlocalizedmessage exception string msg java editor messages javaeditormessages compilation unit document provider compilationunitdocumentprovider error calculating changed regions calculatingchangedregions error status errorstatus status i status istatus error javaui plugin i java status constants ijavastatusconstants editor changed region calculation msg exception result org eclipse core runtime i safe runnable isaferunnable override exception monitor begin task begintask java editor messages javaeditormessages compilation unit document provider compilationunitdocumentprovider calculating changed regions calculatingchangedregions message i path ipath location buffer get location getlocation i text file buffer manager itextfilebuffermanager file buffer manager filebuffermanager file buffers filebuffers create text file buffer manager createtextfilebuffermanager file buffer manager filebuffermanager connect location location kind locationkind normalize get sub progress monitor getsubprogressmonitor monitor i document idocument current document currentdocument buffer get document getdocument i document idocument old document olddocument file buffer manager filebuffermanager get text file buffer gettextfilebuffer location location kind locationkind normalize get document getdocument result get changed line regions getchangedlineregions old document olddocument current document currentdocument file buffer manager filebuffermanager disconnect location location kind locationkind normalize get sub progress monitor getsubprogressmonitor monitor monitor regions lines differ comparing code old document olddocument code content code current document currentdocument code content successive lines merged region param old document olddocument document content param current document currentdocument document current content changed regions bad location exception badlocationexception fetching fails i region iregion get changed line regions getchangedlineregions i document idocument old document olddocument i document idocument current document currentdocument bad location exception badlocationexception change type local variables object order prevent loading compare plug load time object left side leftside line comparator linecomparator old document olddocument object right side rightside line comparator linecomparator current document currentdocument range difference rangedifference differences range diff erencer rangedifferencer find diff erences finddifferences i range comparator irangecomparator left side leftside i range comparator irangecomparator right side rightside holds ranges sorted for all forall element differences index of indexof index of indexof right start rightstart right start rightstart successive changed lines merged range difference rangedifference for all forall element differences right start rightstart right start rightstart right end rightend right start rightstart array list arraylist i region iregion regions array list arraylist differences length range difference rangedifference curr differences curr kind range difference rangedifference change curr right length rightlength start line startline curr right start rightstart end line endline curr right end rightend i region iregion start line region startlineregion current document currentdocument get line information getlineinformation start line startline start line startline end line endline regions add start line region startlineregion i region iregion end line region endlineregion current document currentdocument get line information getlineinformation end line endline start offset startoffset start line region startlineregion get offset getoffset end offset endoffset end line region endlineregion get offset getoffset end line region endlineregion get length getlength regions add region start offset startoffset end offset endoffset start offset startoffset regions to array toarray i region iregion regions size error status errorstatus isok core exception coreexception error status errorstatus result creates returns progress monitor parent monitor param monitor parent progress monitor param ticks number work ticks all ocated allocated parent monitor progress monitor i progress monitor iprogressmonitor get sub progress monitor getsubprogressmonitor i progress monitor iprogressmonitor monitor ticks monitor sub progress monitor subprogressmonitor monitor ticks sub progress monitor subprogressmonitor prepend main label subtask null progress monitor nullprogressmonitor