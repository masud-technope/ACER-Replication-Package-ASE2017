copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation jens lukowski gmx contributed code convert prefix postfix expressions combination set ter setter get ter getter calls dmitry stalnov dst alnov dstalnov f usionone fusionone contributed bug encapsulate field fail variables variable declaration https bugs eclipse org bugs bug cgi org eclipse jdt internal corext refactoring sef java util array list arraylist java util hash map hashmap java util iterator java util list java util map org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i file ifile org eclipse text edits multi text edit multitextedit org eclipse text edits text edit group texteditgroup org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring text change textchange org eclipse ltk core refactoring participants resource change checker resourcechangechecker org eclipse jdt core flags org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i field ifield org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i source range isourcerange org eclipse jdt core i type itype org eclipse jdt core java model exception javamodelexception org eclipse jdt core compiler i problem iproblem org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom assignment org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom child list property descriptor childlistpropertydescriptor org eclipse jdt core dom class instance creation classinstancecreation org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom dimension org eclipse jdt core dom expression org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom javadoc org eclipse jdt core dom message org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom modifier org eclipse jdt core dom node finder nodefinder org eclipse jdt core dom return statement returnstatement org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom type org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt core refactoring i java refactorings ijavarefactorings org eclipse jdt core refactoring descriptors encapsulate field descriptor encapsulatefielddescriptor org eclipse jdt core refactoring descriptors java refactoring descriptor javarefactoringdescriptor org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search search pattern searchpattern org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt internal corext code manipulation codemanipulation getter setter util gettersetterutil org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom bindings org eclipse jdt internal corext dom dimension rewrite dimensionrewrite org eclipse jdt internal corext dom variable declaration rewrite variabledeclarationrewrite org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring arguments javarefactoringarguments org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring refactoring scope factory refactoringscopefactory org eclipse jdt internal corext refactoring refactoring search engine refactoringsearchengine org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring dynamic validation refactoring change dynamicvalidationrefactoringchange org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal corext refactoring util resource util resourceutil org eclipse jdt internal corext refactoring util text change manager textchangemanager org eclipse jdt internal corext util java conventions util javaconventionsutil org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util jdt flags jdtflags org eclipse jdt internal corext util messages org eclipse jdt code generation codegeneration org eclipse jdt java element labels javaelementlabels org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor ast provider astprovider org eclipse jdt internal viewsupport basic element labels basicelementlabels org eclipse jdt internal viewsupport binding label provider bindinglabelprovider enc apsulates encapsulates field get ter getter set ter setter calls self encapsulate field refactoring selfencapsulatefieldrefactoring refactoring nls string attribute visibility visibility nls string attribute getter get ter getter nls string attribute setter set ter setter nls string attribute insert ion insertion insertion nls string attribute comments comments nls string attribute declaring declaring i field ifield f field ffield text change manager textchangemanager f change manager fchangemanager compilation unit compilationunit f root froot variable declaration fragment variabledeclarationfragment f field declaration ffielddeclaration ast rewrite astrewrite f rewriter frewriter import rewrite importrewrite f import rewrite fimportrewrite f visibility fvisibility string f getter name fgettername string f setter name fsettername string f arg name fargname f setter must return value fsettermustreturnvalue represents method f insertion index finsertionindex f encapsulate declaring class fencapsulatedeclaringclass f generate javadoc fgeneratejavadoc list i method binding imethodbinding f used read names fusedreadnames list i method binding imethodbinding f used modify names fusedmodifynames f consider visibility fconsidervisibility nls string creates encapsulate field refactoring param field field code code invoked scripting java model exception javamodelexception initialization failed self encapsulate field refactoring selfencapsulatefieldrefactoring i field ifield field java model exception javamodelexception f encapsulate declaring class fencapsulatedeclaringclass f change manager fchangemanager text change manager textchangemanager f field ffield field field initialize field initialize i field ifield field java model exception javamodelexception f getter name fgettername getter setter util gettersetterutil get getter name getgettername field f setter name fsettername getter setter util gettersetterutil get setter name getsettername field string arg base name argbasename stub utility stubutility get base name getbasename field f arg name fargname stub utility stubutility suggest argument name suggestargumentname field get java project getjavaproject arg base name argbasename string check arg name checkargname reinitialize initialize f field ffield java model exception javamodelexception i field ifield get field getfield f field ffield string get getter name getgettername f getter name fgettername set getter name setgettername string f getter name fgettername is not null isnotnull f getter name fgettername string get setter name getsettername f setter name fsettername set setter name setsettername string f setter name fsettername is not null isnotnull f setter name fsettername set insertion index setinsertionindex f insertion index finsertionindex get visibility getvisibility f visibility fvisibility set visibility setvisibility visibility f visibility fvisibility visibility set encapsulate declaring class setencapsulatedeclaringclass encapsulate declaring class encapsulatedeclaringclass f encapsulate declaring class fencapsulatedeclaringclass encapsulate declaring class encapsulatedeclaringclass get encapsulate declaring class getencapsulatedeclaringclass f encapsulate declaring class fencapsulatedeclaringclass get generate javadoc getgeneratejavadoc f generate javadoc fgeneratejavadoc set generate javadoc setgeneratejavadoc f generate javadoc fgeneratejavadoc activation checking override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception f visibility fvisibility f visibility fvisibility f field ffield get flags getflags flags acc public accpublic flags acc protected accprotected flags acc private accprivate refactoring status refactoringstatus result refactoring status refactoringstatus result merge checks check availability checkavailability f field ffield result has fatal error hasfatalerror result f root froot refactoringastparser ast provider astprovider shared ast level parse f field ffield get compilation unit getcompilationunit i source range isourcerange source range sourcerange f field ffield get name range getnamerange ast node astnode node node finder nodefinder perform f root froot source range sourcerange get offset getoffset source range sourcerange get length getlength node mapping error found mappingerrorfound result node f field declaration ffielddeclaration variable declaration fragment variabledeclarationfragment ast nodes astnodes get parent getparent node variable declaration fragment variabledeclarationfragment f field declaration ffielddeclaration mapping error found mappingerrorfound result node f field declaration ffielddeclaration resolve binding resolvebinding process compiler error processcompilererror result node result add fatal error addfatalerror refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield type resolve able resolveable result compute used names computeusednames result refactoring status refactoringstatus mapping error found mappingerrorfound refactoring status refactoringstatus result ast node astnode node node node get flags getflags ast node astnode malformed process compiler error processcompilererror result node result result add fatal error addfatalerror get mapping error message getmappingerrormessage result process compiler error processcompilererror refactoring status refactoringstatus result ast node astnode node message messages ast nodes astnodes get messages getmessages node ast nodes astnodes include paren ts parents messages length result add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield compiler errors field string basic element labels basicelementlabels get java element name getjavaelementname f field ffield get element name getelementname messages get message getmessage string get mapping error message getmappingerrormessage messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield analyze selected field basic element labels basicelementlabels get java element name getjavaelementname f field ffield get element name getelementname input checking refactoring status refactoringstatus check method names checkmethodnames check method names checkmethodnames is using local getter isusinglocalgetter is using local setter isusinglocalsetter refactoring status refactoringstatus check method names checkmethodnames using local getter usinglocalgetter using local setter usinglocalsetter refactoring status refactoringstatus result refactoring status refactoringstatus i type itype declaring type declaringtype f field ffield get declaring type getdeclaringtype check name checkname result f getter name fgettername f used read names fusedreadnames declaring type declaringtype using local getter usinglocalgetter f field ffield check name checkname result f setter name fsettername f used modify names fusedmodifynames declaring type declaringtype using local setter usinglocalsetter f field ffield result check name checkname refactoring status refactoringstatus status string list i method binding imethodbinding used names usednames i type itype type re use existing field reuseexistingfield i field ifield field nls equals status add fatal error addfatalerror refactoring core messages refactoringcoremessages checks choose is static isstatic is static isstatic flags is static isstatic field get flags getflags java model exception javamodelexception java plugin javaplugin log status merge checks check method name checkmethodname field iterator i method binding imethodbinding iter used names usednames iterator iter has next hasnext i method binding imethodbinding method iter string selector method get name getname selector equals re use existing field reuseexistingfield status add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield method exists string binding label provider bindinglabelprovider get binding label getbindinglabel method java element labels javaelementlabels fully qualified basic element labels basicelementlabels get java element name getjavaelementname type get element name getelementname method is static methodisstatic modifier is static isstatic method get modifiers getmodifiers method is static methodisstatic is static isstatic status add warning addwarning messages format refactoring core messages refactoringcoremessages self encapsulate field refactoring selfencapsulatefieldrefactoring method non static nonstatic field string basic element labels basicelementlabels get java element name getjavaelementname method get name getname basic element labels basicelementlabels get java element name getjavaelementname field get element name getelementname method is static methodisstatic is static isstatic status add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages self encapsulate field refactoring selfencapsulatefieldrefactoring non static nonstatic method field string basic element labels basicelementlabels get java element name getjavaelementname method get name getname basic element labels basicelementlabels get java element name getjavaelementname field get element name getelementname re use existing field reuseexistingfield status add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages self encapsulate field refactoring selfencapsulatefieldrefactoring method doesn otexist methoddoesnotexist status fatal error fatalerror string basic element labels basicelementlabels get java element name getjavaelementname basic element labels basicelementlabels get java element name getjavaelementname type get element name getelementname override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception begin task begintask set task name settaskname refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield checking preconditions refactoring status refactoringstatus result refactoring status refactoringstatus f rewriter frewriter ast rewrite astrewrite create f root froot getast f change manager fchangemanager clear using local getter usinglocalgetter is using local getter isusinglocalgetter using local setter usinglocalsetter is using local setter isusinglocalsetter result merge check method names checkmethodnames using local getter usinglocalgetter using local setter usinglocalsetter worked result has fatal error hasfatalerror result set task name settaskname refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield searching cunits sub progress monitor subprogressmonitor sub pm subpm sub progress monitor subprogressmonitor i compilation unit icompilationunit affectedcus refactoring search engine refactoringsearchengine find affected compilation units findaffectedcompilationunits search pattern searchpattern create pattern createpattern f field ffield i java search constants ijavasearchconstants references refactoring scope factory refactoringscopefactory create f field ffield f consider visibility fconsidervisibility sub pm subpm result check in hierarchy checkinhierarchy result using local getter usinglocalgetter using local setter usinglocalsetter result has fatal error hasfatalerror result set task name settaskname refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield analyzing i progress monitor iprogressmonitor sub progress monitor subprogressmonitor begin task begintask affectedcus length i variable binding ivariablebinding field identifier fieldidentifier f field declaration ffielddeclaration resolve binding resolvebinding i type binding itypebinding declaring class declaringclass abstract type declaration abstracttypedeclaration ast nodes astnodes get parent getparent f field declaration ffielddeclaration abstract type declaration abstracttypedeclaration resolve binding resolvebinding list text edit group texteditgroup owner descriptions ownerdescriptions array list arraylist i compilation unit icompilationunit owner f field ffield get compilation unit getcompilationunit f import rewrite fimportrewrite stub utility stubutility create import rewrite createimportrewrite f root froot affectedcus length i compilation unit icompilationunit unit affectedcus sub task subtask basic element labels basicelementlabels get file name getfilename unit compilation unit compilationunit root ast rewrite astrewrite rewriter import rewrite importrewrite import rewrite importrewrite list text edit group texteditgroup descriptions owner equals unit root f root froot rewriter f rewriter frewriter import rewrite importrewrite f import rewrite fimportrewrite descriptions owner descriptions ownerdescriptions root refactoringastparser ast provider astprovider shared ast level parse unit rewriter ast rewrite astrewrite create root getast descriptions array list arraylist import rewrite importrewrite stub utility stubutility create import rewrite createimportrewrite root check compile errors checkcompileerrors result root unit access analyzer accessanalyzer analyzer access analyzer accessanalyzer unit field identifier fieldidentifier declaring class declaringclass rewriter import rewrite importrewrite root accept analyzer result merge analyzer get status getstatus f setter must return value fsettermustreturnvalue f setter must return value fsettermustreturnvalue analyzer get setter must return value getsettermustreturnvalue result has fatal error hasfatalerror f change manager fchangemanager clear result descriptions add all addall analyzer get group descriptions getgroupdescriptions owner equals unit create edits createedits unit rewriter descriptions import rewrite importrewrite worked is canceled iscanceled operation canceled exception operationcanceledexception owner descriptions ownerdescriptions add all addall add getter setter changes addgettersetterchanges f root froot f rewriter frewriter owner find recommended line separator findrecommendedlineseparator using local setter usinglocalsetter using local getter usinglocalgetter create edits createedits owner f rewriter frewriter owner descriptions ownerdescriptions f import rewrite fimportrewrite i file ifile files to be modified filestobemodified resource util resourceutil get files getfiles f change manager fchangemanager get all compilation units getallcompilationunits result merge checks validate modifies files validatemodifiesfiles files to be modified filestobemodified get validation context getvalidationcontext result has fatal error hasfatalerror result resource change checker resourcechangechecker check files to be changed checkfilestobechanged files to be modified filestobemodified sub progress monitor subprogressmonitor result create edits createedits i compilation unit icompilationunit unit ast rewrite astrewrite rewriter list text edit group texteditgroup groups import rewrite importrewrite import rewrite importrewrite core exception coreexception text change textchange change f change manager fchangemanager unit multi text edit multitextedit root multi text edit multitextedit change set edit setedit root root add child addchild import rewrite importrewrite rewrite imports rewriteimports root add child addchild rewriter rewriteast iterator text edit group texteditgroup iter groups iterator iter has next hasnext change add text edit group addtexteditgroup iter override change create change createchange i progress monitor iprogressmonitor core exception coreexception map string string arguments hash map hashmap string project i java project ijavaproject java project javaproject f field ffield get java project getjavaproject java project javaproject project java project javaproject get element name getelementname flags java refactoring descriptor javarefactoringdescriptor jar migration java refactoring descriptor javarefactoringdescriptor jar refactoring refactoring descriptor refactoringdescriptor structural change refactoring descriptor refactoringdescriptor multi change i type itype declaring f field ffield get declaring type getdeclaringtype declaring is anonymous isanonymous declaring is local islocal flags java refactoring descriptor javarefactoringdescriptor jar source attachment java model exception javamodelexception exception java plugin javaplugin log exception string description messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield descriptor description basic element labels basicelementlabels get java element name getjavaelementname f field ffield get element name getelementname string header messages format refactoring core messages refactoringcoremessages self encapsulate field refactoring selfencapsulatefieldrefactoring descriptor description string java element labels javaelementlabels get element label getelementlabel f field ffield java element labels javaelementlabels fully qualified java element labels javaelementlabels get element label getelementlabel declaring java element labels javaelementlabels fully qualified jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header comment add setting addsetting messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield original pattern java element labels javaelementlabels get element label getelementlabel f field ffield java element labels javaelementlabels fully qualified comment add setting addsetting messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield get ter getter pattern basic element labels basicelementlabels get java element name getjavaelementname f getter name fgettername comment add setting addsetting messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield set ter setter pattern basic element labels basicelementlabels get java element name getjavaelementname f setter name fsettername string visibility jdt flags jdtflags get visibility string getvisibilitystring f visibility fvisibility nls equals visibility visibility refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield visibility comment add setting addsetting messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield visibility pattern visibility f encapsulate declaring class fencapsulatedeclaringclass comment add setting addsetting refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield access ors accessors comment add setting addsetting refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield access ors accessors f generate javadoc fgeneratejavadoc comment add setting addsetting refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield generate comments encapsulate field descriptor encapsulatefielddescriptor descriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create encapsulate field descriptor createencapsulatefielddescriptor project description comment as string asstring arguments flags arguments java refactoring descriptor util javarefactoringdescriptorutil attribute input java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f field ffield arguments attribute visibility integer f visibility fvisibility to string tostring arguments attribute insert ion insertion integer f insertion index finsertionindex to string tostring arguments attribute setter f setter name fsettername arguments attribute getter f getter name fgettername arguments attribute comments value of valueof f generate javadoc fgeneratejavadoc to string tostring arguments attribute declaring value of valueof f encapsulate declaring class fencapsulatedeclaringclass to string tostring dynamic validation refactoring change dynamicvalidationrefactoringchange result dynamic validation refactoring change dynamicvalidationrefactoringchange descriptor get name getname text change textchange f change manager fchangemanager get all changes getallchanges begin task begintask length set task name settaskname refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield create length result add worked result override string get name getname refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield helper methods check compile errors checkcompileerrors refactoring status refactoringstatus result compilation unit compilationunit root i compilation unit icompilationunit element i problem iproblem messages root get problems getproblems messages length i problem iproblem problem messages is ignorable problem isignorableproblem problem result add warning addwarning messages format refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield compiler errors update basic element labels basicelementlabels get file name getfilename element java status context javastatuscontext create element check in hierarchy checkinhierarchy refactoring status refactoringstatus status using local getter usinglocalgetter using local setter usinglocalsetter abstract type declaration abstracttypedeclaration declaration abstract type declaration abstracttypedeclaration ast nodes astnodes get parent getparent f field declaration ffielddeclaration abstract type declaration abstracttypedeclaration i type binding itypebinding type declaration resolve binding resolvebinding type i type binding itypebinding field type fieldtype f field declaration ffielddeclaration resolve binding resolvebinding get type gettype check method in hierarchy checkmethodinhierarchy type f getter name fgettername field type fieldtype i type binding itypebinding status using local getter usinglocalgetter check method in hierarchy checkmethodinhierarchy nls type nls f setter name fsettername nls f field declaration ffielddeclaration getast resolve well known type resolvewellknowntype i type binding itypebinding field type fieldtype status using local setter usinglocalsetter check method in hierarchy checkmethodinhierarchy i type binding itypebinding type string method name methodname i type binding itypebinding return type returntype i type binding itypebinding parameters refactoring status refactoringstatus result re use method reusemethod i method binding imethodbinding method bindings find method in hierarchy findmethodinhierarchy type method name methodname parameters method return type clash returntypeclash i type binding itypebinding method return type methodreturntype method get return type getreturntype return type returntype method return type methodreturntype string return type key returntypekey return type returntype get key getkey string method return type key methodreturntypekey method return type methodreturntype get key getkey return type key returntypekey method return type key methodreturntypekey return type clash returntypeclash return type returntype method return type methodreturntype return type key returntypekey method return type key methodreturntypekey return type clash returntypeclash return type key returntypekey equals method return type key methodreturntypekey i type binding itypebinding method get declaring class getdeclaringclass return type clash returntypeclash result add error adderror messages format refactoring core messages refactoringcoremessages checks method name methodname return type clash returntypeclash object basic element labels basicelementlabels get java element name getjavaelementname method name methodname basic element labels basicelementlabels get java element name getjavaelementname get name getname java status context javastatuscontext create method re use method reusemethod result add error adderror messages format refactoring core messages refactoringcoremessages checks method name methodname overrides object basic element labels basicelementlabels get java element name getjavaelementname method name methodname basic element labels basicelementlabels get java element name getjavaelementname get name getname java status context javastatuscontext create method re use method reusemethod result add error adderror messages format refactoring core messages refactoringcoremessages self encapsulate field refactoring selfencapsulatefieldrefactoring nosuchmethod status fatal error fatalerror basic element labels basicelementlabels get java element name getjavaelementname method name methodname java status context javastatuscontext create method compute used names computeusednames f used read names fusedreadnames array list arraylist f used modify names fusedmodifynames array list arraylist i variable binding ivariablebinding binding f field declaration ffielddeclaration resolve binding resolvebinding i type binding itypebinding type binding get type gettype i method binding imethodbinding methods binding get declaring class getdeclaringclass get declared methods getdeclaredmethods methods length i method binding imethodbinding method methods i type binding itypebinding parameters methods get parameter types getparametertypes parameters parameters length f used read names fusedreadnames add method parameters length parameters type f used modify names fusedmodifynames add method list text edit group texteditgroup add getter setter changes addgettersetterchanges compilation unit compilationunit root ast rewrite astrewrite rewriter string line delimiter linedelimiter using local setter usinglocalsetter using local getter usinglocalgetter core exception coreexception list text edit group texteditgroup result array list arraylist ast ast root getast field declaration fielddeclaration decl field declaration fielddeclaration ast nodes astnodes get parent getparent f field declaration ffielddeclaration ast node astnode field declaration position number of methods numberofmethods list body declaration bodydeclaration members ast nodes astnodes get body declarations getbodydeclarations decl get parent getparent iterator body declaration bodydeclaration iter members iterator iter has next hasnext body declaration bodydeclaration element iter element get node type getnodetype ast node astnode method declaration f insertion index finsertionindex f insertion index finsertionindex number of methods numberofmethods position number of methods numberofmethods position text edit group texteditgroup description list rewrite listrewrite rewrite f rewriter frewriter get list rewrite getlistrewrite decl get parent getparent get body declarations property getbodydeclarationsproperty decl get parent getparent using local getter usinglocalgetter description text edit group texteditgroup refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield add get ter getter result add description rewrite insert at insertat create getter method creategettermethod ast rewriter line delimiter linedelimiter position description jdt flags jdtflags is final isfinal f field ffield using local setter usinglocalsetter description text edit group texteditgroup refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield add set ter setter result add description rewrite insert at insertat create setter method createsettermethod ast rewriter line delimiter linedelimiter position description jdt flags jdtflags is private isprivate f field ffield result add make declaration private makedeclarationprivate rewriter decl result text edit group texteditgroup make declaration private makedeclarationprivate ast rewrite astrewrite rewriter field declaration fielddeclaration decl text edit group texteditgroup description text edit group texteditgroup refactoring core messages refactoringcoremessages self encapsulate field selfencapsulatefield change visibility variable declaration fragment variabledeclarationfragment vdfs variable declaration fragment variabledeclarationfragment f field declaration ffielddeclaration included modifiers includedmodifiers modifier excluded modifiers excludedmodifiers modifier modifier variable declaration rewrite variabledeclarationrewrite rewrite modifiers rewritemodifiers decl vdfs included modifiers includedmodifiers excluded modifiers excludedmodifiers rewriter description description child list property descriptor childlistpropertydescriptor get body declarations property getbodydeclarationsproperty ast node astnode declaration declaration anonymous class declaration anonymousclassdeclaration anonymous class declaration anonymousclassdeclaration body declarations property declaration abstract type declaration abstracttypedeclaration abstract type declaration abstracttypedeclaration declaration get body declarations property getbodydeclarationsproperty is true istrue method declaration methoddeclaration create setter method createsettermethod ast ast ast rewrite astrewrite rewriter string line delimiter linedelimiter core exception coreexception field declaration fielddeclaration field field declaration fielddeclaration ast nodes astnodes get parent getparent f field declaration ffielddeclaration field declaration fielddeclaration type type field get type gettype method declaration methoddeclaration result ast new method declaration newmethoddeclaration result set name setname ast new simple name newsimplename f setter name fsettername result modifiers add all addall ast node factory astnodefactory new modifiers newmodifiers ast create modifiers createmodifiers f setter must return value fsettermustreturnvalue result set return type setreturntype type rewriter create copy target createcopytarget type single variable declaration singlevariabledeclaration param ast new single variable declaration newsinglevariabledeclaration result parameters add param param set name setname ast new simple name newsimplename f arg name fargname param set type settype type rewriter create copy target createcopytarget type list dimension extra dimensions extradimensions dimension rewrite dimensionrewrite copy dimensions copydimensions f field declaration ffielddeclaration extra dimensions extradimensions rewriter param extra dimensions extradimensions add all addall extra dimensions extradimensions block block ast new block newblock result set body setbody block string field access fieldaccess create field access createfieldaccess string body code generation codegeneration get setter method body content getsettermethodbodycontent f field ffield get compilation unit getcompilationunit get type name gettypename field get parent getparent f setter name fsettername field access fieldaccess f arg name fargname line delimiter linedelimiter body ast node astnode set ter node setternode rewriter create string placeholder createstringplaceholder body ast node astnode block block statements add set ter node setternode assignment ass ast new assignment newassignment ass set left hand side setlefthandside expression rewriter create string placeholder createstringplaceholder field access fieldaccess ast node astnode qualified ass set right hand side setrighthandside ast new simple name newsimplename f arg name fargname block statements add ass f setter must return value fsettermustreturnvalue return statement returnstatement ast new return statement newreturnstatement set expression setexpression ast new simple name newsimplename f arg name fargname block statements add f generate javadoc fgeneratejavadoc string string code generation codegeneration get setter comment getsettercomment f field ffield get compilation unit getcompilationunit get type name gettypename field get parent getparent f setter name fsettername f field ffield get element name getelementname ast nodes astnodes as string asstring type f arg name fargname stub utility stubutility get base name getbasename f field ffield line delimiter linedelimiter string javadoc javadoc javadoc f rewriter frewriter create string placeholder createstringplaceholder string ast node astnode javadoc result set javadoc setjavadoc javadoc result method declaration methoddeclaration create getter method creategettermethod ast ast ast rewrite astrewrite rewriter string line delimiter linedelimiter core exception coreexception field declaration fielddeclaration field field declaration fielddeclaration ast nodes astnodes get parent getparent f field declaration ffielddeclaration field declaration fielddeclaration type type field get type gettype method declaration methoddeclaration result ast new method declaration newmethoddeclaration result set name setname ast new simple name newsimplename f getter name fgettername result modifiers add all addall ast node factory astnodefactory new modifiers newmodifiers ast create modifiers createmodifiers type return type returntype dimension rewrite dimensionrewrite copy type and add dimensions copytypeandadddimensions type f field declaration ffielddeclaration extra dimensions extradimensions rewriter result set return type setreturntype return type returntype block block ast new block newblock result set body setbody block string body code generation codegeneration get getter method body content getgettermethodbodycontent f field ffield get compilation unit getcompilationunit get type name gettypename field get parent getparent f getter name fgettername f field ffield get element name getelementname line delimiter linedelimiter body ast node astnode get ter node getternode rewriter create string placeholder createstringplaceholder body ast node astnode block block statements add get ter node getternode return statement returnstatement ast new return statement newreturnstatement set expression setexpression ast new simple name newsimplename f field ffield get element name getelementname block statements add f generate javadoc fgeneratejavadoc string string code generation codegeneration get getter comment getgettercomment f field ffield get compilation unit getcompilationunit get type name gettypename field get parent getparent f getter name fgettername f field ffield get element name getelementname ast nodes astnodes as string asstring type stub utility stubutility get base name getbasename f field ffield line delimiter linedelimiter string javadoc javadoc javadoc f rewriter frewriter create string placeholder createstringplaceholder string ast node astnode javadoc result set javadoc setjavadoc javadoc result create modifiers createmodifiers java model exception javamodelexception result flags is public ispublic f visibility fvisibility result modifier flags is protected isprotected f visibility fvisibility result modifier flags is private isprivate f visibility fvisibility result modifier jdt flags jdtflags is static isstatic f field ffield result modifier result string create field access createfieldaccess java model exception javamodelexception string field name fieldname f field ffield get element name getelementname name conflict nameconflict f arg name fargname equals field name fieldname jdt flags jdtflags is static isstatic f field ffield name conflict nameconflict java model util javamodelutil concatenate name concatenatename f field ffield get declaring type getdeclaringtype get element name getelementname field name fieldname name conflict nameconflict stub utility stubutility use this for field access usethisforfieldaccess f field ffield get java project getjavaproject nls nls field name fieldname field name fieldname check arg name checkargname string field name fieldname f field ffield get element name getelementname is static isstatic is static isstatic jdt flags jdtflags is static isstatic f field ffield java model exception javamodelexception java plugin javaplugin log is static isstatic f arg name fargname equals field name fieldname field name fieldname equals f field ffield get declaring type getdeclaringtype get element name getelementname java conventions util javaconventionsutil validate identifier validateidentifier f arg name fargname f field ffield get severity getseverity i status istatus error nls f arg name fargname f arg name fargname string get type name gettypename ast node astnode type type abstract type declaration abstracttypedeclaration abstract type declaration abstracttypedeclaration type get name getname get identifier getidentifier type anonymous class declaration anonymousclassdeclaration class instance creation classinstancecreation node class instance creation classinstancecreation ast nodes astnodes get parent getparent type class instance creation classinstancecreation ast nodes astnodes as string asstring node get type gettype nls is true istrue happen refactoring status refactoringstatus initialize java refactoring arguments javarefactoringarguments arguments string handle arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute input handle i java element ijavaelement element java refactoring descriptor util javarefactoringdescriptorutil handle to element handletoelement arguments get project getproject handle element element exists element get element type getelementtype i java element ijavaelement field java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get name getname i java refactorings ijavarefactorings encapsulate field f field ffield i field ifield element initialize f field ffield java model exception javamodelexception exception java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get name getname i java refactorings ijavarefactorings encapsulate field refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute input string arguments get attribute getattribute attribute getter nls equals f getter name fgettername refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute getter arguments get attribute getattribute attribute setter nls equals f setter name fsettername refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute setter string encapsulate arguments get attribute getattribute attribute declaring encapsulate f encapsulate declaring class fencapsulatedeclaringclass value of valueof encapsulate boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute declaring string matches arguments get attribute getattribute attribute comments matches f generate javadoc fgeneratejavadoc value of valueof matches boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute comments string visibility arguments get attribute getattribute attribute visibility nls visibility equals visibility flag flag integer parse int parseint visibility number format exception numberformatexception exception refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute visibility f visibility fvisibility flag string insertion arguments get attribute getattribute attribute insert ion insertion nls insertion equals insertion integer parse int parseint insertion number format exception numberformatexception exception refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute insert ion insertion f insertion index finsertionindex refactoring status refactoringstatus is using local getter isusinglocalgetter check name checkname f getter name fgettername f used read names fusedreadnames is using local setter isusinglocalsetter check name checkname f setter name fsettername f used modify names fusedmodifynames check name checkname string list i method binding imethodbinding used names usednames iterator i method binding imethodbinding iter used names usednames iterator iter has next hasnext i method binding imethodbinding method iter string selector method get name getname selector equals is ignorable problem isignorableproblem i problem iproblem problem problem getid i problem iproblem not visible field notvisiblefield is consider visibility isconsidervisibility f consider visibility fconsidervisibility set consider visibility setconsidervisibility consider visibility considervisibility f consider visibility fconsidervisibility consider visibility considervisibility