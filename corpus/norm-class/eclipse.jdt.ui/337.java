copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation benjamin muskalla bmuskalla eclipse source eclipsesource extract method extract method https bugs eclipse org bugs bug cgi benjamin muskalla bmuskalla eclipse source eclipsesource extract method ambiguous error message https bugs eclipse org bugs bug cgi org eclipse jdt internal corext refactoring code java util array list arraylist java util hash set hashset java util list java util ibm icu text message format messageformat org eclipse core runtime core exception coreexception org eclipse jface text i region iregion org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core compiler i terminal symbols iterminalsymbols org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast visitor astvisitor org eclipse jdt core dom annotation org eclipse jdt core dom annotation type declaration annotationtypedeclaration org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom assignment org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom break statement breakstatement org eclipse jdt core dom class instance creation classinstancecreation org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom constructor invocation constructorinvocation org eclipse jdt core dom continue statement continuestatement org eclipse jdt core dom do statement dostatement org eclipse jdt core dom enhanced for statement enhancedforstatement org eclipse jdt core dom expression org eclipse jdt core dom field access fieldaccess org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom for statement forstatement org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom initializer org eclipse jdt core dom labeled statement labeledstatement org eclipse jdt core dom lambda expression lambdaexpression org eclipse jdt core dom message org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom org eclipse jdt core dom primitive type primitivetype org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom statement org eclipse jdt core dom structural property descriptor structuralpropertydescriptor org eclipse jdt core dom super constructor invocation superconstructorinvocation org eclipse jdt core dom switch case switchcase org eclipse jdt core dom switch statement switchstatement org eclipse jdt core dom this expression thisexpression org eclipse jdt core dom try statement trystatement org eclipse jdt core dom type org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom variable declaration variabledeclaration org eclipse jdt core dom variable declaration expression variabledeclarationexpression org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom while statement whilestatement org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom bindings org eclipse jdt internal corext dom local variable index localvariableindex org eclipse jdt internal corext dom selection org eclipse jdt internal corext dom token scanner tokenscanner org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring code flow flow context flowcontext org eclipse jdt internal corext refactoring code flow flow info flowinfo org eclipse jdt internal corext refactoring code flow in out flow analyzer inoutflowanalyzer org eclipse jdt internal corext refactoring code flow input flow analyzer inputflowanalyzer org eclipse jdt internal corext refactoring util code analyzer codeanalyzer org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util messages org eclipse jdt java element labels javaelementlabels org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal viewsupport basic element labels basicelementlabels org eclipse jdt internal viewsupport binding label provider bindinglabelprovider extract method analyzer extractmethodanalyzer code analyzer codeanalyzer error undefined expression access local statement statement multiple method declaration initializer body declaration bodydeclaration f enclosing body declaration fenclosingbodydeclaration i method binding imethodbinding f enclosing method binding fenclosingmethodbinding f max variable id fmaxvariableid f return kind freturnkind type f return type freturntype i type binding itypebinding f return type binding freturntypebinding flow info flowinfo f input flow info finputflowinfo flow context flowcontext f input flow context finputflowcontext i variable binding ivariablebinding f arguments farguments i variable binding ivariablebinding f method locals fmethodlocals i type binding itypebinding f type variables ftypevariables i variable binding ivariablebinding f return value freturnvalue i variable binding ivariablebinding f caller locals fcallerlocals i variable binding ivariablebinding f return local freturnlocal i type binding itypebinding f all exceptions fallexceptions i type binding itypebinding f expression binding fexpressionbinding f force static fforcestatic f is last statement selected fislaststatementselected simple name simplename f enclosing loop label fenclosinglooplabel extract method analyzer extractmethodanalyzer i compilation unit icompilationunit unit selection selection core exception coreexception unit selection body declaration bodydeclaration get enclosing body declaration getenclosingbodydeclaration f enclosing body declaration fenclosingbodydeclaration get return kind getreturnkind f return kind freturnkind extra cts expression extractsexpression f return kind freturnkind expression type get return type getreturntype f return type freturntype i type binding itypebinding get return type binding getreturntypebinding f return type binding freturntypebinding generate import generateimport f return kind freturnkind expression i variable binding ivariablebinding get arguments getarguments f arguments farguments i variable binding ivariablebinding get method locals getmethodlocals f method locals fmethodlocals i variable binding ivariablebinding get return value getreturnvalue f return value freturnvalue i variable binding ivariablebinding get caller locals getcallerlocals f caller locals fcallerlocals i variable binding ivariablebinding get return local getreturnlocal f return local freturnlocal i type binding itypebinding get expression binding getexpressionbinding f expression binding fexpressionbinding get force static getforcestatic f force static fforcestatic i type binding itypebinding get type variables gettypevariables f type variables ftypevariables activation checking is valid destination isvaliddestination ast node astnode node is interface isinterface node type declaration typedeclaration type declaration typedeclaration node is interface isinterface node annotation type declaration annotationtypedeclaration is interface isinterface java model util javamodelutil or higher orhigher fcunit get java project getjavaproject refactoring status refactoringstatus check initial conditions checkinitialconditions import rewrite importrewrite rewriter refactoring status refactoringstatus result get status getstatus check expression checkexpression result result has fatal error hasfatalerror result list ast node astnode valid destinations validdestinations array list arraylist ast node astnode destination ast res olving astresolving find parent type findparenttype f enclosing body declaration fenclosingbodydeclaration get parent getparent destination is valid destination isvaliddestination destination valid destinations validdestinations add destination destination ast res olving astresolving find parent type findparenttype destination get parent getparent valid destinations validdestinations size result add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer valid destination type result f return kind freturnkind undefined f max variable id fmaxvariableid local variable index localvariableindex perform f enclosing body declaration fenclosingbodydeclaration analyze selection analyzeselection result has fatal error hasfatalerror result returns f return kind freturnkind f return value freturnvalue f return kind freturnkind access local returns is expression selected isexpressionselected f return kind freturnkind expression returns returns result add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer ambiguous java status context javastatuscontext create fcunit get selection getselection f return kind freturnkind multiple result init return type initreturntype rewriter result check expression checkexpression refactoring status refactoringstatus status ast node astnode nodes get selected nodes getselectednodes nodes nodes length ast node astnode node nodes node type status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract type reference java status context javastatuscontext create fcunit node node get location in parent getlocationinparent switch case switchcase expression property status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract java status context javastatuscontext create fcunit node node annotation ast nodes astnodes get parent getparent node annotation status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract annotation java status context javastatuscontext create fcunit node init return type initreturntype import rewrite importrewrite rewriter ast ast f enclosing body declaration fenclosingbodydeclaration getast f return type freturntype f return type binding freturntypebinding f return kind freturnkind access local variable declaration variabledeclaration declaration ast nodes astnodes find variable declaration findvariabledeclaration f return value freturnvalue f enclosing body declaration fenclosingbodydeclaration f return type freturntype ast node factory astnodefactory new type newtype ast declaration rewriter context sensitive import rewrite context contextsensitiveimportrewritecontext declaration rewriter declaration resolve binding resolvebinding f return type binding freturntypebinding declaration resolve binding resolvebinding get type gettype expression expression expression expression get first selected node getfirstselectednode expression get node type getnodetype ast node astnode instance creation f expression binding fexpressionbinding class instance creation classinstancecreation expression get type gettype resolve binding resolvebinding f expression binding fexpressionbinding expression resolve type binding resolvetypebinding f expression binding fexpressionbinding f expression binding fexpressionbinding is null type isnulltype get status getstatus add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract type java status context javastatuscontext create fcunit expression i type binding itypebinding normalized binding normalizedbinding bindings normalize for declaration use normalizefordeclarationuse f expression binding fexpressionbinding ast normalized binding normalizedbinding import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext f enclosing body declaration fenclosingbodydeclaration rewriter f return type freturntype rewriter add import addimport normalized binding normalizedbinding ast context f return type binding freturntypebinding normalized binding normalizedbinding f return type freturntype ast new primitive type newprimitivetype primitive type primitivetype f return type binding freturntypebinding nls ast resolve well known type resolvewellknowntype nls get status getstatus add error adderror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer determine type java status context javastatuscontext create fcunit expression statement lambda expression lambdaexpression enclosing lambda expr enclosinglambdaexpr ast res olving astresolving find enclosing lambda expression findenclosinglambdaexpression get first selected node getfirstselectednode enclosing lambda expr enclosinglambdaexpr f return type freturntype ast node factory astnodefactory new return type newreturntype enclosing lambda expr enclosinglambdaexpr ast rewriter i method binding imethodbinding method binding methodbinding enclosing lambda expr enclosinglambdaexpr resolve method binding resolvemethodbinding f return type binding freturntypebinding method binding methodbinding method binding methodbinding get return type getreturntype f enclosing body declaration fenclosingbodydeclaration get node type getnodetype ast node astnode method declaration f return type freturntype method declaration methoddeclaration f enclosing body declaration fenclosingbodydeclaration get return type getreturntype f return type binding freturntypebinding f return type freturntype f return type freturntype resolve binding resolvebinding f return type freturntype ast new primitive type newprimitivetype primitive type primitivetype f return type binding freturntypebinding nls ast resolve well known type resolvewellknowntype nls f return type freturntype f return type freturntype ast new primitive type newprimitivetype primitive type primitivetype nls f return type binding freturntypebinding ast resolve well known type resolvewellknowntype extract temp refactoring extracttemprefactoring is literal node selected isliteralnodeselected ast node astnode nodes get selected nodes getselectednodes nodes length ast node astnode node nodes node get node type getnodetype ast node astnode literal ast node astnode character literal ast node astnode literal ast node astnode number literal input checking check input checkinput refactoring status refactoringstatus status string method name methodname ast node astnode destination i type binding itypebinding arguments get argument types getargumenttypes i type binding itypebinding type ast nodes astnodes get enclosing type getenclosingtype destination status merge checks check method in type checkmethodintype type method name methodname arguments i type binding itypebinding super class superclass type get superclass getsuperclass super class superclass status merge checks check method in hierarchy checkmethodinhierarchy super class superclass method name methodname arguments i type binding itypebinding super interface superinterface type get interfaces getinterfaces status merge checks check method in hierarchy checkmethodinhierarchy super interface superinterface method name methodname arguments i type binding itypebinding get argument types getargumenttypes i type binding itypebinding result i type binding itypebinding f arguments farguments length f arguments farguments length result f arguments farguments get type gettype result refactoring status refactoringstatus analyze selection analyzeselection refactoring status refactoringstatus status f input flow context finputflowcontext flow context flowcontext f max variable id fmaxvariableid f input flow context finputflowcontext set consider access mode setconsideraccessmode f input flow context finputflowcontext set compute mode setcomputemode flow context flowcontext arguments in out flow analyzer inoutflowanalyzer flow analyzer flowanalyzer in out flow analyzer inoutflowanalyzer f input flow context finputflowcontext f input flow info finputflowinfo flow analyzer flowanalyzer perform get selected nodes getselectednodes f input flow info finputflowinfo branches string can handle branches problem canhandlebranchesproblem can handle branches canhandlebranches can handle branches problem canhandlebranchesproblem status add fatal error addfatalerror can handle branches problem canhandlebranchesproblem java status context javastatuscontext create fcunit get selection getselection f return kind freturnkind error status f input flow info finputflowinfo is value return isvaluereturn f return kind freturnkind statement f input flow info finputflowinfo is void return isvoidreturn f input flow info finputflowinfo is partial return ispartialreturn is void method isvoidmethod is last statement selected islaststatementselected f return kind freturnkind statement f input flow info finputflowinfo is no return isnoreturn f input flow info finputflowinfo is throw isthrow f input flow info finputflowinfo is undefined isundefined f return kind freturnkind f return kind freturnkind undefined status add error adderror refactoring core messages refactoringcoremessages flow analyzer flowanalyzer execution flow java status context javastatuscontext create fcunit get selection getselection f return kind freturnkind compute input computeinput compute exceptions computeexceptions compute output computeoutput status status has fatal error hasfatalerror status adjust arguments and method locals adjustargumentsandmethodlocals compress arrays compressarrays status string can handle branches canhandlebranches f return value freturnvalue refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer branch mismatch ast node astnode selected nodes selectednodes get selected nodes getselectednodes ast node astnode last selected node lastselectednode selected nodes selectednodes selected nodes selectednodes length statement body get parent loop body getparentloopbody last selected node lastselectednode get parent getparent body block refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer branch mismatch body last selected node lastselectednode block block block body list statement statements block statements ast node astnode last statement in loop laststatementinloop statements statements size last selected node lastselectednode last statement in loop laststatementinloop refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer branch mismatch string continue matches loop problem continuematchesloopproblem selected nodes selectednodes length ast node astnode ast node astnode selected nodes selectednodes ast node astnode accept ast visitor astvisitor array list arraylist string f local loop labels flocallooplabels array list arraylist override visit break statement breakstatement node simple name simplename label node get label getlabel label f local loop labels flocallooplabels label get identifier getidentifier continue matches loop problem continuematchesloopproblem messages format refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer branch mismatch object nls nls label get identifier getidentifier override visit labeled statement labeledstatement node simple name simplename label node get label getlabel label f local loop labels flocallooplabels add label get identifier getidentifier override end visit endvisit continue statement continuestatement node simple name simplename label node get label getlabel label f local loop labels flocallooplabels label get identifier getidentifier f enclosing loop label fenclosinglooplabel label get identifier getidentifier equals f enclosing loop label fenclosinglooplabel get identifier getidentifier continue matches loop problem continuematchesloopproblem messages format refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer branch mismatch object nls nls label get identifier getidentifier continue matches loop problem continuematchesloopproblem statement get parent loop body getparentloopbody ast node astnode node statement stmt ast node astnode start node start start for statement forstatement start do statement dostatement start while statement whilestatement start enhanced for statement enhancedforstatement start switch statement switchstatement start start get parent getparent start for statement forstatement stmt for statement forstatement start get body getbody start do statement dostatement stmt do statement dostatement start get body getbody start while statement whilestatement stmt while statement whilestatement start get body getbody start enhanced for statement enhancedforstatement stmt enhanced for statement enhancedforstatement start get body getbody start start get parent getparent labeled statement labeledstatement labeled statement labeledstatement labeled statement labeledstatement labeled statement labeledstatement start get parent getparent f enclosing loop label fenclosinglooplabel labeled statement labeledstatement get label getlabel stmt is void method isvoidmethod i type binding itypebinding binding lambda expression lambdaexpression enclosing lambda expr enclosinglambdaexpr ast res olving astresolving find enclosing lambda expression findenclosinglambdaexpression get first selected node getfirstselectednode enclosing lambda expr enclosinglambdaexpr i method binding imethodbinding method binding methodbinding enclosing lambda expr enclosinglambdaexpr resolve method binding resolvemethodbinding method binding methodbinding binding method binding methodbinding get return type getreturntype initializer f enclosing method binding fenclosingmethodbinding binding f enclosing method binding fenclosingmethodbinding get return type getreturntype nls f enclosing body declaration fenclosingbodydeclaration getast resolve well known type resolvewellknowntype equals binding is last statement selected islaststatementselected f is last statement selected fislaststatementselected compute last statement selected computelaststatementselected ast node astnode nodes get selected nodes getselectednodes nodes length f is last statement selected fislaststatementselected block body lambda expression lambdaexpression enclosing lambda expr enclosinglambdaexpr ast res olving astresolving find enclosing lambda expression findenclosinglambdaexpression get first selected node getfirstselectednode enclosing lambda expr enclosinglambdaexpr ast node astnode lambda body lambdabody enclosing lambda expr enclosinglambdaexpr get body getbody lambda body lambdabody block body block lambda body lambdabody f is last statement selected fislaststatementselected f enclosing body declaration fenclosingbodydeclaration method declaration methoddeclaration body method declaration methoddeclaration f enclosing body declaration fenclosingbodydeclaration get body getbody f enclosing body declaration fenclosingbodydeclaration initializer body initializer f enclosing body declaration fenclosingbodydeclaration get body getbody body list statement statements body statements statements size f is last statement selected fislaststatementselected nodes nodes length statements statements size f is last statement selected fislaststatementselected compute input computeinput argument mode argumentmode flow info flowinfo read flow info flowinfo read potential flow info flowinfo write potential flow info flowinfo unknown f arguments farguments remove selected declarations removeselecteddeclarations f input flow info finputflowinfo f input flow context finputflowcontext argument mode argumentmode f method locals fmethodlocals remove selected declarations removeselecteddeclarations f input flow info finputflowinfo f input flow context finputflowcontext flow info flowinfo write flow info flowinfo write potential f type variables ftypevariables compute type variables computetypevariables f input flow info finputflowinfo get type variables gettypevariables i variable binding ivariablebinding remove selected declarations removeselecteddeclarations i variable binding ivariablebinding bindings list i variable binding ivariablebinding result array list arraylist bindings length selection selection get selection getselection bindings length ast node astnode decl compilation unit compilationunit f enclosing body declaration fenclosingbodydeclaration get root getroot find declaring node finddeclaringnode bindings selection covers decl result add bindings result to array toarray i variable binding ivariablebinding result size i type binding itypebinding compute type variables computetypevariables i type binding itypebinding bindings selection selection get selection getselection i type binding itypebinding result hash set hashset remove type variables method covered selection compilation unit compilationunit compilation unit compilationunit compilation unit compilationunit f enclosing body declaration fenclosingbodydeclaration get root getroot bindings length ast node astnode decl compilation unit compilationunit find declaring node finddeclaringnode bindings decl selection covers decl decl get parent getparent method declaration methoddeclaration result add bindings type variables needed local variable f arguments farguments length i variable binding ivariablebinding arg f arguments farguments i type binding itypebinding type arg get type gettype type type is type variable istypevariable ast node astnode decl compilation unit compilationunit find declaring node finddeclaringnode type decl selection covers decl decl get parent getparent method declaration methoddeclaration result add type result to array toarray i type binding itypebinding result size compute output computeoutput refactoring status refactoringstatus status find writes selection flow context flowcontext flow context flowcontext flow context flowcontext f max variable id fmaxvariableid flow context flowcontext set consider access mode setconsideraccessmode flow context flowcontext set compute mode setcomputemode flow context flowcontext values flow info flowinfo return info returninfo in out flow analyzer inoutflowanalyzer flow context flowcontext perform get selected nodes getselectednodes i variable binding ivariablebinding return values returnvalues return info returninfo flow context flowcontext flow info flowinfo write flow info flowinfo write potential flow info flowinfo unknown compute selection covers selected nodes i region iregion region get selected node range getselectednoderange selection selection selection create from start length createfromstartlength region get offset getoffset region get length getlength list i variable binding ivariablebinding local reads localreads array list arraylist flow context flowcontext set compute mode setcomputemode flow context flowcontext arguments flow info flowinfo arg info arginfo input flow analyzer inputflowanalyzer flow context flowcontext selection perform f enclosing body declaration fenclosingbodydeclaration i variable binding ivariablebinding reads arg info arginfo flow context flowcontext flow info flowinfo read flow info flowinfo read potential flow info flowinfo unknown return values returnvalues length local reads localreads size return values returnvalues length i variable binding ivariablebinding binding return values returnvalues reads length reads binding local reads localreads add binding f return value freturnvalue binding local reads localreads size f return value freturnvalue f return value freturnvalue string buffer stringbuffer affected locals affectedlocals string buffer stringbuffer local reads localreads size i variable binding ivariablebinding binding local reads localreads string binding name bindingname binding label provider bindinglabelprovider get binding label getbindinglabel binding binding label provider bindinglabelprovider text flags textflags java element labels javaelementlabels pre type signature affected locals affectedlocals append binding name bindingname local reads localreads size affected locals affectedlocals append string message message format messageformat format refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer assignments local object affected locals affectedlocals to string tostring status add fatal error addfatalerror message java status context javastatuscontext create fcunit get selection getselection list i variable binding ivariablebinding caller locals callerlocals array list arraylist flow info flowinfo local info localinfo input flow analyzer inputflowanalyzer flow context flowcontext selection perform f enclosing body declaration fenclosingbodydeclaration i variable binding ivariablebinding writes local info localinfo flow context flowcontext flow info flowinfo write flow info flowinfo write potential flow info flowinfo unknown writes length i variable binding ivariablebinding write writes get selection getselection covers ast nodes astnodes find declaration finddeclaration write f enclosing body declaration fenclosingbodydeclaration caller locals callerlocals add write f caller locals fcallerlocals caller locals callerlocals to array toarray i variable binding ivariablebinding caller locals callerlocals size f return value freturnvalue get selection getselection covers ast nodes astnodes find declaration finddeclaration f return value freturnvalue f enclosing body declaration fenclosingbodydeclaration f return local freturnlocal f return value freturnvalue adjust arguments and method locals adjustargumentsandmethodlocals f arguments farguments length i variable binding ivariablebinding argument f arguments farguments didn exist computed locals arguments compute input computeinput f input flow info finputflowinfo has access mode hasaccessmode f input flow context finputflowcontext argument flow info flowinfo write potential argument f return value freturnvalue f arguments farguments didn remove argument remove local declaration f arguments farguments f method locals fmethodlocals length f method locals fmethodlocals argument f method locals fmethodlocals compress arrays compressarrays f arguments farguments compress array compressarray f arguments farguments f caller locals fcallerlocals compress array compressarray f caller locals fcallerlocals f method locals fmethodlocals compress array compressarray f method locals fmethodlocals i variable binding ivariablebinding compress array compressarray i variable binding ivariablebinding array array size array length array size size array length array i variable binding ivariablebinding result i variable binding ivariablebinding size array length array result array result change creation about t o create change abouttocreatechange exceptions i type binding itypebinding get exceptions getexceptions include runtime exceptions includeruntimeexceptions include runtime exceptions includeruntimeexceptions f all exceptions fallexceptions list i type binding itypebinding result array list arraylist f all exceptions fallexceptions length f all exceptions fallexceptions length i type binding itypebinding exception f all exceptions fallexceptions include runtime exceptions includeruntimeexceptions bindings is runtime exception isruntimeexception exception result add exception result to array toarray i type binding itypebinding result size compute exceptions computeexceptions f all exceptions fallexceptions exception analyzer exceptionanalyzer perform get selected nodes getselectednodes special visitor methods override handle next selected node handlenextselectednode ast node astnode node handle next selected node handlenextselectednode node check parent checkparent node override handle selection ends in handleselectionendsin ast node astnode node invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer does not cover doesnotcover java status context javastatuscontext create fcunit node handle selection ends in handleselectionendsin node check parent checkparent ast node astnode node ast node astnode first parent firstparent get first selected node getfirstselectednode get parent getparent node node get parent getparent node first parent firstparent node invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer parent mismatch override end visit endvisit compilation unit compilationunit node refactoring status refactoringstatus status get status getstatus super call supercall status has fatal error hasfatalerror super call supercall has selected nodes hasselectednodes ast node astnode covering node coveringnode get last covering node getlastcoveringnode covering node coveringnode block covering node coveringnode get parent getparent method declaration methoddeclaration method declaration methoddeclaration method decl methoddecl method declaration methoddeclaration covering node coveringnode get parent getparent message messages ast nodes astnodes get messages getmessages method decl methoddecl ast nodes astnodes node messages length status add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer compile errors basic element labels basicelementlabels get java element name getjavaelementname method decl methoddecl get name getname get identifier getidentifier java status context javastatuscontext create fcunit method decl methoddecl super call supercall status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer invalid selection super call supercall f enclosing body declaration fenclosingbodydeclaration body declaration bodydeclaration ast nodes astnodes get parent getparent get first selected node getfirstselectednode body declaration bodydeclaration f enclosing body declaration fenclosingbodydeclaration f enclosing body declaration fenclosingbodydeclaration get node type getnodetype ast node astnode method declaration f enclosing body declaration fenclosingbodydeclaration get node type getnodetype ast node astnode field declaration f enclosing body declaration fenclosingbodydeclaration get node type getnodetype ast node astnode initializer status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer invalid selection super call supercall ast nodes astnodes get enclosing type getenclosingtype f enclosing body declaration fenclosingbodydeclaration status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer compile errors parent binding super call supercall f enclosing body declaration fenclosingbodydeclaration get node type getnodetype ast node astnode method declaration f enclosing method binding fenclosingmethodbinding method declaration methoddeclaration f enclosing body declaration fenclosingbodydeclaration resolve binding resolvebinding is single expression or statement set issingleexpressionorstatementset status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer single expression super call supercall is expression selected isexpressionselected ast node astnode expression get first selected node getfirstselectednode expression expression resolve binding resolvebinding i type binding itypebinding status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract type reference super call supercall resolve binding resolvebinding i method binding imethodbinding status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract method reference super call supercall resolve binding resolvebinding i variable binding ivariablebinding structural property descriptor structuralpropertydescriptor location in parent locationinparent get location in parent getlocationinparent location in parent locationinparent qualified name qualifiedname property location in parent locationinparent field access fieldaccess property field access fieldaccess get parent getparent get expression getexpression this expression thisexpression status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract qualified super call supercall is simple name issimplename simple name simplename is declaration isdeclaration status add fatal error addfatalerror refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract declaration super call supercall f force static fforcestatic ast nodes astnodes get parent getparent expression ast node astnode constructor invocation ast nodes astnodes get parent getparent expression ast node astnode constructor invocation status merge local type analyzer localtypeanalyzer perform f enclosing body declaration fenclosingbodydeclaration get selection getselection compute last statement selected computelaststatementselected end visit endvisit node override visit anonymous class declaration anonymousclassdeclaration node result visit node is first selected node isfirstselectednode node invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract anonymous type java status context javastatuscontext create fcunit node result override visit assignment node result visit node get selection getselection covers node get left hand side getlefthandside get selection getselection covers node get right hand side getrighthandside get selection getselection covered by coveredby node get left hand side getlefthandside invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer left hand side of assignment lefthandsideofassignment java status context javastatuscontext create fcunit node result override visit do statement dostatement node result visit node action start actionstart get token scanner gettokenscanner get token end offset gettokenendoffset i terminal symbols iterminalsymbols token named o tokennamedo node get start position getstartposition get selection getselection get offset getoffset action start actionstart invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer keyword java status context javastatuscontext create fcunit get selection getselection core exception coreexception result override visit lambda expression lambdaexpression node selection selection get selection getselection selection start selectionstart selection get offset getoffset selection exclusive end selectionexclusiveend selection get exclusive end getexclusiveend lambda start lambdastart node get start position getstartposition lambda exclusive end lambdaexclusiveend lambda start lambdastart node get length getlength ast node astnode body node get body getbody body start bodystart body get start position getstartposition body exclusive end bodyexclusiveend body start bodystart body get length getlength is valid selection isvalidselection body block body start bodystart selection start selectionstart selection exclusive end selectionexclusiveend body exclusive end bodyexclusiveend selection lambda body block is valid selection isvalidselection body expression token scanner tokenscanner scanner token scanner tokenscanner fcunit arrow exclusive end arrowexclusiveend scanner get token end offset gettokenendoffset i terminal symbols iterminalsymbols tokennamearrow lambda start lambdastart selection start selectionstart arrow exclusive end arrowexclusiveend is valid selection isvalidselection core exception coreexception selection start selectionstart lambda start lambdastart selection exclusive end selectionexclusiveend lambda exclusive end lambdaexclusiveend selection covers lambda node is valid selection isvalidselection is valid selection isvalidselection visit node override visit method declaration methoddeclaration node block body node get body getbody body selection selection get selection getselection node start nodestart body get start position getstartposition node exclusive end nodeexclusiveend node start nodestart body get length getlength selection node method body ignore method node start nodestart selection get offset getoffset selection get exclusive end getexclusiveend node exclusive end nodeexclusiveend visit node override visit constructor invocation constructorinvocation node visit constructor invocation visitconstructorinvocation node visit node override visit super constructor invocation superconstructorinvocation node visit constructor invocation visitconstructorinvocation node visit node visit constructor invocation visitconstructorinvocation ast node astnode node super result superresult get selection getselection get visit selection mode getvisitselectionmode node selection selected invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer java status context javastatuscontext create fcunit node super result superresult override visit variable declaration fragment variabledeclarationfragment node result visit node is first selected node isfirstselectednode node node get parent getparent field declaration fielddeclaration invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract variable declaration fragment field java status context javastatuscontext create fcunit node invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract variable declaration fragment java status context javastatuscontext create fcunit node result override end visit endvisit field declaration fielddeclaration node get selected nodes getselectednodes node fragments invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract variable declaration fragment field java status context javastatuscontext create fcunit node end visit endvisit node override end visit endvisit for statement forstatement node get selection getselection get end visit selection mode getendvisitselectionmode node selection node initializers get first selected node getfirstselectednode invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract initializer java status context javastatuscontext create fcunit get selection getselection node update rs updaters get last selected node getlastselectednode invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract update r updater java status context javastatuscontext create fcunit get selection getselection end visit endvisit node override end visit endvisit enhanced for statement enhancedforstatement node get selection getselection get end visit selection mode getendvisitselectionmode node selection node get parameter getparameter get first selected node getfirstselectednode invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract initializer java status context javastatuscontext create fcunit get selection getselection end visit endvisit node override end visit endvisit variable declaration expression variabledeclarationexpression node get selection getselection get end visit selection mode getendvisitselectionmode node selection selected get first selected node getfirstselectednode node node get location in parent getlocationinparent try statement trystatement resources property invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer resource resources java status context javastatuscontext create fcunit get selection getselection check type in declaration checktypeindeclaration node get type gettype end visit endvisit node override end visit endvisit variable declaration statement variabledeclarationstatement node check type in declaration checktypeindeclaration node get type gettype end visit endvisit node is first selected node isfirstselectednode ast node astnode node get selection getselection get visit selection mode getvisitselectionmode node selection selected get first selected node getfirstselectednode node check type in declaration checktypeindeclaration type node get selection getselection get end visit selection mode getendvisitselectionmode node selection selected get first selected node getfirstselectednode node invalid selection invalidselection refactoring core messages refactoringcoremessages extract method analyzer extractmethodanalyzer extract variable declaration java status context javastatuscontext create fcunit get selection getselection is single expression or statement set issingleexpressionorstatementset ast node astnode get first selected node getfirstselectednode expression get selected nodes getselectednodes length