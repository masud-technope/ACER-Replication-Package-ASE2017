copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation dmitry stalnov dst alnov dstalnov f usionone fusionone contributed fixes inline call field initializer https bugs eclipse org bugs bug cgi constructor inlined https bugs eclipse org bugs bug cgi org eclipse jdt internal corext refactoring code java util array list arraylist java util hash map hashmap java util list java util map org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i file ifile org eclipse core resources i resource iresource org eclipse text edits multi text edit multitextedit org eclipse text edits text edit textedit org eclipse text edits text edit group texteditgroup org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring text change textchange org eclipse ltk core refactoring participants resource change checker resourcechangechecker org eclipse jdt core flags org eclipse jdt core i class file iclassfile org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core i method imethod org eclipse jdt core i type itype org eclipse jdt core i type hierarchy itypehierarchy org eclipse jdt core i type root ityperoot org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast node astnode org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom constructor invocation constructorinvocation org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom modifier org eclipse jdt core dom super method invocation supermethodinvocation org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt core refactoring descriptors inline method descriptor inlinemethoddescriptor org eclipse jdt core refactoring descriptors java refactoring descriptor javarefactoringdescriptor org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring availability tester refactoringavailabilitytester org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring base references in binary context referencesinbinarycontext org eclipse jdt internal corext refactoring dynamic validation refactoring change dynamicvalidationrefactoringchange org eclipse jdt internal corext refactoring text change compatibility textchangecompatibility org eclipse jdt internal corext refactoring util java element util javaelementutil org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal corext refactoring util text change manager textchangemanager org eclipse jdt internal corext util messages org eclipse jdt java element labels javaelementlabels org eclipse jdt internal java editor javaeditor ast provider astprovider org eclipse jdt internal viewsupport basic element labels basicelementlabels org eclipse jdt internal viewsupport binding label provider bindinglabelprovider open items generate statements newly generated local variable declarations for bid forbid cases foo foo inlining foo foo inline foo inline method context optimize code method inlined returns argument assigned parameter separate local reverse extract method correctly inline method refactoring inlinemethodrefactoring refactoring nls string attribute mode mode nls string attribute delete delete mode mode mode inline mode mode inline single mode i type root ityperoot f initial type root finitialtyperoot ast node astnode f initial node finitialnode text change manager textchangemanager f change manager fchangemanager source provider sourceprovider f source provider fsourceprovider target provider targetprovider f target provider ftargetprovider f initial unit finitialunit i class file iclassfile f delete source fdeletesource mode f current mode fcurrentmode mode f initial mode finitialmode f selection start fselectionstart f selection length fselectionlength inline method refactoring inlinemethodrefactoring i type root ityperoot type root typeroot ast node astnode node offset length is not null isnotnull type root typeroot is true istrue java element util javaelementutil is source available issourceavailable type root typeroot is not null isnotnull node f initial type root finitialtyperoot type root typeroot f initial node finitialnode node f selection start fselectionstart offset f selection length fselectionlength length inline method refactoring inlinemethodrefactoring i compilation unit icompilationunit unit method invocation methodinvocation node offset length unit ast node astnode node offset length f target provider ftargetprovider target provider targetprovider create unit node f initial mode finitialmode f current mode fcurrentmode mode inline single f delete source fdeletesource inline method refactoring inlinemethodrefactoring i compilation unit icompilationunit unit super method invocation supermethodinvocation node offset length unit ast node astnode node offset length f target provider ftargetprovider target provider targetprovider create unit node f initial mode finitialmode f current mode fcurrentmode mode inline single f delete source fdeletesource inline method refactoring inlinemethodrefactoring i compilation unit icompilationunit unit constructor invocation constructorinvocation node offset length unit ast node astnode node offset length f target provider ftargetprovider target provider targetprovider create unit node f initial mode finitialmode f current mode fcurrentmode mode inline single f delete source fdeletesource inline method refactoring inlinemethodrefactoring i type root ityperoot type root typeroot method declaration methoddeclaration node offset length type root typeroot ast node astnode node offset length f source provider fsourceprovider source provider sourceprovider type root typeroot node f target provider ftargetprovider target provider targetprovider create node f initial mode finitialmode f current mode fcurrentmode mode inline f delete source fdeletesource can enable delete source canenabledeletesource creates inline method refactoring param unit compilation unit file param node compilation unit node param selection start selectionstart start param selection length selectionlength length returns refactoring inline method refactoring inlinemethodrefactoring create i type root ityperoot unit compilation unit compilationunit node selection start selectionstart selection length selectionlength ast node astnode target refactoring availability tester refactoringavailabilitytester get inline able method node getinlineablemethodnode unit node selection start selectionstart selection length selectionlength target target get node type getnodetype ast node astnode method declaration inline method refactoring inlinemethodrefactoring unit method declaration methoddeclaration target selection start selectionstart selection length selectionlength i compilation unit icompilationunit i compilation unit icompilationunit unit target get node type getnodetype ast node astnode method invocation inline method refactoring inlinemethodrefactoring method invocation methodinvocation target selection start selectionstart selection length selectionlength target get node type getnodetype ast node astnode method invocation inline method refactoring inlinemethodrefactoring super method invocation supermethodinvocation target selection start selectionstart selection length selectionlength target get node type getnodetype ast node astnode constructor invocation inline method refactoring inlinemethodrefactoring constructor invocation constructorinvocation target selection start selectionstart selection length selectionlength override string get name getname refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring returns method inline method link check initial conditions checkinitialconditions i progress monitor iprogressmonitor called method code code i method imethod get method getmethod f source provider fsourceprovider i method binding imethodbinding binding f source provider fsourceprovider get declaration getdeclaration resolve binding resolvebinding binding i method imethod binding get java element getjavaelement can enable delete source canenabledeletesource f source provider fsourceprovider get type root gettyperoot i class file iclassfile get delete source getdeletesource f delete source fdeletesource set delete source setdeletesource remove remove is true istrue can enable delete source canenabledeletesource f delete source fdeletesource remove mode get initial mode getinitialmode f initial mode finitialmode refactoring status refactoringstatus set current mode setcurrentmode mode mode java model exception javamodelexception f current mode fcurrentmode mode refactoring status refactoringstatus is true istrue get initial mode getinitialmode mode inline single f current mode fcurrentmode mode mode mode inline single f initial node finitialnode method invocation methodinvocation f target provider ftargetprovider target provider targetprovider create i compilation unit icompilationunit f initial type root finitialtyperoot method invocation methodinvocation f initial node finitialnode f initial node finitialnode super method invocation supermethodinvocation f target provider ftargetprovider target provider targetprovider create i compilation unit icompilationunit f initial type root finitialtyperoot super method invocation supermethodinvocation f initial node finitialnode f initial node finitialnode constructor invocation constructorinvocation f target provider ftargetprovider target provider targetprovider create i compilation unit icompilationunit f initial type root finitialtyperoot constructor invocation constructorinvocation f initial node finitialnode illegal state exception illegalstateexception string value of valueof f initial node finitialnode f target provider ftargetprovider target provider targetprovider create f source provider fsourceprovider get declaration getdeclaration f target provider ftargetprovider check activation checkactivation override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception refactoring status refactoringstatus result refactoring status refactoringstatus f source provider fsourceprovider invocations is invocation isinvocation f initial node finitialnode f source provider fsourceprovider resolve source provider resolvesourceprovider result f initial type root finitialtyperoot f initial node finitialnode result has fatal error hasfatalerror result result merge f source provider fsourceprovider check activation checkactivation result merge f target provider ftargetprovider check activation checkactivation result override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception nls begin task begintask f change manager fchangemanager text change manager textchangemanager refactoring status refactoringstatus result refactoring status refactoringstatus f source provider fsourceprovider initialize f target provider ftargetprovider initialize set task name settaskname refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring searching refactoring status refactoringstatus search status searchstatus refactoring status refactoringstatus string binary refs description binaryrefsdescription messages format refactoring core messages refactoringcoremessages references in binary context referencesinbinarycontext bin aries binaries description basic element labels basicelementlabels get java element name getjavaelementname f source provider fsourceprovider get method name getmethodname references in binary context referencesinbinarycontext binary refs binaryrefs references in binary context referencesinbinarycontext binary refs description binaryrefsdescription i compilation unit icompilationunit units f target provider ftargetprovider get affected compilation units getaffectedcompilationunits search status searchstatus binary refs binaryrefs sub progress monitor subprogressmonitor binary refs binaryrefs add error if necessary adderrorifnecessary search status searchstatus search status searchstatus has fatal error hasfatalerror result merge search status searchstatus result i file ifile files to be modified filestobemodified get files to be modified getfilestobemodified units result merge checks validate modifies files validatemodifiesfiles files to be modified filestobemodified get validation context getvalidationcontext result has fatal error hasfatalerror result result merge resource change checker resourcechangechecker check files to be changed checkfilestobechanged files to be modified filestobemodified sub progress monitor subprogressmonitor check overridden checkoverridden result sub progress monitor subprogressmonitor i progress monitor iprogressmonitor sub progress monitor subprogressmonitor nls begin task begintask units length units length i compilation unit icompilationunit unit units sub task subtask messages format refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring processing basic element labels basicelementlabels get file name getfilename unit call inline r callinliner inliner multi text edit multitextedit root multi text edit multitextedit compilation unit change compilationunitchange change compilation unit change compilationunitchange f change manager fchangemanager unit change set edit setedit root body declaration bodydeclaration bodies f target provider ftargetprovider get affected body declarations getaffectedbodydeclarations unit sub progress monitor subprogressmonitor bodies length inliner call inline r callinliner unit compilation unit compilationunit bodies get root getroot f source provider fsourceprovider bodies length body declaration bodydeclaration body bodies inliner initialize body refactoring status refactoringstatus nested invocations nestedinvocations refactoring status refactoringstatus ast node astnode invocations remove nested calls removenestedcalls nested invocations nestedinvocations unit f target provider ftargetprovider get invocations getinvocations body sub progress monitor subprogressmonitor invocations length ast node astnode invocation invocations result merge inliner initialize invocation f target provider ftargetprovider get status severity getstatusseverity result has fatal error hasfatalerror result get severity getseverity f target provider ftargetprovider get status severity getstatusseverity text edit group texteditgroup group text edit group texteditgroup refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring edit inline change add text edit group addtexteditgroup group result merge inliner perform group f delete source fdeletesource generate modifications nested invocations nestedinvocations isok result merge nested invocations nestedinvocations f delete source fdeletesource f change manager fchangemanager remove unit root add child addchild inliner get modifications getmodifications import rewrite importrewrite rewrite inliner get import edit getimportedit rewrite has recorded changes hasrecordedchanges text edit textedit edit rewrite rewrite imports rewriteimports edit multi text edit multitextedit multi text edit multitextedit edit get children size getchildrensize root add child addchild edit change add text edit group addtexteditgroup text edit group texteditgroup refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring edit text edit textedit edit inliner inliner dispose worked is canceled iscanceled operation canceled exception operationcanceledexception result merge search status searchstatus result override change create change createchange i progress monitor iprogressmonitor core exception coreexception f delete source fdeletesource f current mode fcurrentmode mode inline text change textchange change f change manager fchangemanager i compilation unit icompilationunit f source provider fsourceprovider get type root gettyperoot text edit textedit delete f source provider fsourceprovider get delete edit getdeleteedit text edit group texteditgroup description text edit group texteditgroup refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring edit delete text edit textedit delete text edit textedit root change get edit getedit root todo finding insert position call inliner reuse ast rewriter source provide rewrite ast recursive calls allowed should n shouldn text edit over lap overlap root add child addchild delete text change compatibility textchangecompatibility insert root delete change set edit setedit delete change add text edit group addtexteditgroup description map string string arguments hash map hashmap string project i java project ijavaproject java project javaproject f initial type root finitialtyperoot get java project getjavaproject java project javaproject project java project javaproject get element name getelementname flags refactoring descriptor refactoringdescriptor structural change java refactoring descriptor javarefactoringdescriptor jar refactoring java refactoring descriptor javarefactoringdescriptor jar source attachment i method binding imethodbinding binding f source provider fsourceprovider get declaration getdeclaration resolve binding resolvebinding i type binding itypebinding declaring binding get declaring class getdeclaringclass modifier is private isprivate binding get modifiers getmodifiers flags refactoring descriptor refactoringdescriptor multi change string description messages format refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring descriptor description basic element labels basicelementlabels get java element name getjavaelementname binding get name getname string header messages format refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring descriptor description string binding label provider bindinglabelprovider get binding label getbindinglabel binding java element labels javaelementlabels fully qualified binding label provider bindinglabelprovider get binding label getbindinglabel declaring java element labels javaelementlabels fully qualified jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header comment add setting addsetting messages format refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring original pattern binding label provider bindinglabelprovider get binding label getbindinglabel binding java element labels javaelementlabels fully qualified f delete source fdeletesource comment add setting addsetting refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring remove method f current mode fcurrentmode mode inline comment add setting addsetting refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring replace references inline method descriptor inlinemethoddescriptor descriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create inline method descriptor createinlinemethoddescriptor project description comment as string asstring arguments flags arguments java refactoring descriptor util javarefactoringdescriptorutil attribute input java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f initial type root finitialtyperoot nls arguments java refactoring descriptor util javarefactoringdescriptorutil attribute selection integer f selection start fselectionstart to string tostring integer f selection length fselectionlength to string tostring arguments attribute delete value of valueof f delete source fdeletesource to string tostring arguments attribute mode integer f current mode fcurrentmode mode inline to string tostring dynamic validation refactoring change dynamicvalidationrefactoringchange descriptor refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring edit inline call inlinecall f change manager fchangemanager get all changes getallchanges source provider sourceprovider resolve source provider resolvesourceprovider refactoring status refactoringstatus status i type root ityperoot type root typeroot ast node astnode invocation compilation unit compilationunit root compilation unit compilationunit invocation get root getroot i method binding imethodbinding method binding methodbinding invocations resolve binding resolvebinding invocation method binding methodbinding status add fatal error addfatalerror refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring error no method declaration nomethoddeclaration method declaration methoddeclaration declaration method declaration methoddeclaration root find declaring node finddeclaringnode method binding methodbinding declaration source provider sourceprovider type root typeroot declaration i method imethod method i method imethod method binding methodbinding get java element getjavaelement method compilation unit compilationunit method declaration ast root methoddeclarationastroot i compilation unit icompilationunit method cu methodcu method get compilation unit getcompilationunit method cu methodcu method declaration ast root methoddeclarationastroot refactoringastparser ast provider astprovider shared ast level parse method cu methodcu i class file iclassfile class file classfile method get class file getclassfile java element util javaelementutil is source available issourceavailable class file classfile string method label methodlabel java element labels javaelementlabels get text label gettextlabel method java element labels javaelementlabels fully qualified java element labels javaelementlabels parameter types status add fatal error addfatalerror messages format refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring error class file classfile method label methodlabel method declaration ast root methoddeclarationastroot refactoringastparser ast provider astprovider shared ast level parse class file classfile ast node astnode node method declaration ast root methoddeclarationastroot find declaring node finddeclaringnode method binding methodbinding get method declaration getmethoddeclaration get key getkey node method declaration methoddeclaration source provider sourceprovider method declaration ast root methoddeclarationastroot get type root gettyperoot method declaration methoddeclaration node status add fatal error addfatalerror refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring error no method declaration nomethoddeclaration i file ifile get files to be modified getfilestobemodified i compilation unit icompilationunit units list i file ifile result array list arraylist units length i file ifile file units length file get file getfile units file result add file f delete source fdeletesource file get file getfile i compilation unit icompilationunit f source provider fsourceprovider get type root gettyperoot file result file result add file result to array toarray i file ifile result size i file ifile get file getfile i compilation unit icompilationunit unit unit unit get primary getprimary i resource iresource resource unit get resource getresource resource resource get type gettype i resource iresource file i file ifile resource check overridden checkoverridden refactoring status refactoringstatus status i progress monitor iprogressmonitor java model exception javamodelexception nls begin task begintask set task name settaskname refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring checking overridden method declaration methoddeclaration decl f source provider fsourceprovider get declaration getdeclaration i method imethod method i method imethod decl resolve binding resolvebinding get java element getjavaelement method flags is private isprivate method get flags getflags worked i type itype type method get declaring type getdeclaringtype i type hierarchy itypehierarchy hierarchy type new type hierarchy newtypehierarchy sub progress monitor subprogressmonitor check sub types checksubtypes status method hierarchy get all subtypes getallsubtypes type sub progress monitor subprogressmonitor check super classes checksuperclasses status method hierarchy get all super classes getallsuperclasses type sub progress monitor subprogressmonitor check super interfaces checksuperinterfaces status method hierarchy get all super interfaces getallsuperinterfaces type sub progress monitor subprogressmonitor nls set task name settaskname check sub types checksubtypes refactoring status refactoringstatus result i method imethod method i type itype types i progress monitor iprogressmonitor check types checktypes result method types refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring checking overridden error check super classes checksuperclasses refactoring status refactoringstatus result i method imethod method i type itype types i progress monitor iprogressmonitor check types checktypes result method types refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring checking overrides error check super interfaces checksuperinterfaces refactoring status refactoringstatus result i method imethod method i type itype types i progress monitor iprogressmonitor check types checktypes result method types refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring checking error check types checktypes refactoring status refactoringstatus result i method imethod method i type itype types string key i progress monitor iprogressmonitor nls begin task begintask types length types length worked i method imethod overridden types find methods findmethods method overridden overridden length result add error adderror messages format key java element labels javaelementlabels get element label getelementlabel types java element labels javaelementlabels java status context javastatuscontext create overridden ast node astnode remove nested calls removenestedcalls refactoring status refactoringstatus status i compilation unit icompilationunit unit ast node astnode invocations invocations length invocations ast node astnode parents ast node astnode invocations length invocations length parents invocations get parent getparent invocations length remove nested calls removenestedcalls status unit parents invocations list ast node astnode result array list arraylist invocations length invocations result add invocations result to array toarray ast node astnode result size remove nested calls removenestedcalls refactoring status refactoringstatus status i compilation unit icompilationunit unit ast node astnode parents ast node astnode invocations ast node astnode invocation invocations parents length ast node astnode parent parents parent parent invocation status add error adderror refactoring core messages refactoringcoremessages inline method refactoring inlinemethodrefactoring nested invocation nestedinvocation java status context javastatuscontext create unit parent invocations parent parent get parent getparent