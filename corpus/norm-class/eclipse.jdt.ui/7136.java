copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation dmitry stalnov dst alnov dstalnov f usionone fusionone contributed inline call field initializer https bugs eclipse org bugs bug cgi benjamin muskalla bmuskalla eclipse source eclipsesource extract method missing extra cting extracting code loop https bugs eclipse org bugs bug cgi org eclipse jdt internal corext refactoring code flow org eclipse core runtime org eclipse jface text i region iregion org eclipse jdt core dom ast node astnode org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom conditional expression conditionalexpression org eclipse jdt core dom do statement dostatement org eclipse jdt core dom enhanced for statement enhancedforstatement org eclipse jdt core dom expression org eclipse jdt core dom for statement forstatement org eclipse jdt core dom if statement ifstatement org eclipse jdt core dom return statement returnstatement org eclipse jdt core dom statement org eclipse jdt core dom switch statement switchstatement org eclipse jdt core dom while statement whilestatement org eclipse jdt internal corext dom selection input flow analyzer inputflowanalyzer flow analyzer flowanalyzer loop reentrance visitor loopreentrancevisitor flow analyzer flowanalyzer selection f selection fselection ast node astnode f loop node floopnode loop reentrance visitor loopreentrancevisitor flow context flowcontext context selection selection ast node astnode loop node loopnode context f selection fselection selection f loop node floopnode loop node loopnode override traverse node traversenode ast node astnode node f selection fselection f selection fselection enclosed by enclosedby start override create return flow info createreturnflowinfo return statement returnstatement node statement selected located selection node get start position getstartposition node get length getlength f selection fselection get exclusive end getexclusiveend ast node astnode get loop node getloopnode f loop node floopnode process ast node astnode node f flow context fflowcontext set loop reentrance mode setloopreentrancemode node accept f flow context fflowcontext set loop reentrance mode setloopreentrancemode override end visit endvisit do statement dostatement node skip node skipnode node do while flow info dowhileflowinfo info create do while createdowhile set flow info setflowinfo node info info merge action mergeaction get flow info getflowinfo node get body getbody f flow context fflowcontext merge condition considered input flow analyzer inputflowanalyzer info remove label removelabel override end visit endvisit enhanced for statement enhancedforstatement node skip node skipnode node flow info flowinfo param info paraminfo get flow info getflowinfo node get parameter getparameter flow info flowinfo expression info expressioninfo get flow info getflowinfo node get expression getexpression flow info flowinfo action info actioninfo get flow info getflowinfo node get body getbody enhanced for flow info enhancedforflowinfo for info forinfo create enhanced for createenhancedfor set flow info setflowinfo node for info forinfo action parameter expression eval uated evaluated node f loop node floopnode for info forinfo merge action mergeaction action info actioninfo f flow context fflowcontext loops eval uated evaluated sequence expression parameter action for info forinfo merge expression mergeexpression expression info expressioninfo f flow context fflowcontext for info forinfo merge parameter mergeparameter param info paraminfo f flow context fflowcontext for info forinfo merge action mergeaction action info actioninfo f flow context fflowcontext for info forinfo remove label removelabel override end visit endvisit for statement forstatement node skip node skipnode node flow info flowinfo init info initinfo create sequential createsequential node initializers flow info flowinfo condition info conditioninfo get flow info getflowinfo node get expression getexpression flow info flowinfo increment info incrementinfo create sequential createsequential node update rs updaters flow info flowinfo action info actioninfo get flow info getflowinfo node get body getbody for flow info forflowinfo for info forinfo create for createfor set flow info setflowinfo node for info forinfo increment condition action node f loop node floopnode for info forinfo merge increment mergeincrement increment info incrementinfo f flow context fflowcontext for info forinfo merge condition mergecondition condition info conditioninfo f flow context fflowcontext for info forinfo merge action mergeaction action info actioninfo f flow context fflowcontext merge cases reenter statement immediate lly immediatelly increments condition action reenter loop loop initial izations initializations condtion action conditional flow info initial izations initializations increments condition action generic conditional flow info genericconditionalflowinfo init inc r initincr generic conditional flow info genericconditionalflowinfo init inc r initincr merge init info initinfo f flow context fflowcontext init inc r initincr merge increment info incrementinfo f flow context fflowcontext for info forinfo merge access mode sequential mergeaccessmodesequential init inc r initincr f flow context fflowcontext for info forinfo merge condition mergecondition condition info conditioninfo f flow context fflowcontext for info forinfo merge action mergeaction action info actioninfo f flow context fflowcontext for info forinfo remove label removelabel selection f selection fselection f do loop reentrance fdoloopreentrance loop reentrance visitor loopreentrancevisitor f loop reentrance visitor floopreentrancevisitor input flow analyzer inputflowanalyzer flow context flowcontext context selection selection do loop reentrance doloopreentrance context f selection fselection selection is not null isnotnull f selection fselection f do loop reentrance fdoloopreentrance do loop reentrance doloopreentrance flow info flowinfo perform body declaration bodydeclaration node is true istrue node abstract type declaration abstracttypedeclaration node accept get flow info getflowinfo node override traverse node traversenode ast node astnode node node get start position getstartposition node get length getlength f selection fselection get inclusive end getinclusiveend override create return flow info createreturnflowinfo return statement returnstatement node create info node node get start position getstartposition f selection fselection get inclusive end getinclusiveend override visit do statement dostatement node create loop reentrance visitor createloopreentrancevisitor node visit node override visit enhanced for statement enhancedforstatement node create loop reentrance visitor createloopreentrancevisitor node visit node override visit for statement forstatement node create loop reentrance visitor createloopreentrancevisitor node visit node override visit while statement whilestatement node create loop reentrance visitor createloopreentrancevisitor node visit node create loop reentrance visitor createloopreentrancevisitor ast node astnode node f loop reentrance visitor floopreentrancevisitor f do loop reentrance fdoloopreentrance f selection fselection covered by coveredby node f loop reentrance visitor floopreentrancevisitor loop reentrance visitor loopreentrancevisitor f flow context fflowcontext f selection fselection node override end visit endvisit conditional expression conditionalexpression node skip node skipnode node expression then part thenpart node get then expression getthenexpression expression else part elsepart node get else expression getelseexpression then part thenpart f selection fselection covered by coveredby then part thenpart else part elsepart f selection fselection covered by coveredby else part elsepart generic sequential flow info genericsequentialflowinfo info create sequential createsequential set flow info setflowinfo node info end visit conditional endvisitconditional info node get expression getexpression ast node astnode then part thenpart else part elsepart end visit endvisit node override end visit endvisit do statement dostatement node end visit endvisit node handle loop reentrance handleloopreentrance node override end visit endvisit if statement ifstatement node skip node skipnode node statement then part thenpart node get then statement getthenstatement statement else part elsepart node get else statement getelsestatement then part thenpart f selection fselection covered by coveredby then part thenpart else part elsepart f selection fselection covered by coveredby else part elsepart generic sequential flow info genericsequentialflowinfo info create sequential createsequential set flow info setflowinfo node info end visit conditional endvisitconditional info node get expression getexpression ast node astnode then part thenpart else part elsepart end visit endvisit node override end visit endvisit enhanced for statement enhancedforstatement node end visit endvisit node handle loop reentrance handleloopreentrance node override end visit endvisit for statement forstatement node end visit endvisit node handle loop reentrance handleloopreentrance node override end visit endvisit switch statement switchstatement node skip node skipnode node switch data switchdata data create switch data createswitchdata node i region iregion ranges data get ranges getranges ranges length i region iregion range ranges f selection fselection covered by coveredby range generic sequential flow info genericsequentialflowinfo info create sequential createsequential set flow info setflowinfo node info info merge get flow info getflowinfo node get expression getexpression f flow context fflowcontext info merge data get info getinfo f flow context fflowcontext info remove label removelabel end visit endvisit node data override end visit endvisit while statement whilestatement node end visit endvisit node handle loop reentrance handleloopreentrance node end visit conditional endvisitconditional generic sequential flow info genericsequentialflowinfo info ast node astnode condition ast node astnode branches info merge get flow info getflowinfo condition f flow context fflowcontext branches length ast node astnode branch branches branch f selection fselection covered by coveredby branch info merge get flow info getflowinfo branch f flow context fflowcontext handle loop reentrance handleloopreentrance ast node astnode node f loop reentrance visitor floopreentrancevisitor f loop reentrance visitor floopreentrancevisitor get loop node getloopnode node f loop reentrance visitor floopreentrancevisitor process node generic sequential flow info genericsequentialflowinfo info create sequential createsequential info merge get flow info getflowinfo node f flow context fflowcontext info merge f loop reentrance visitor floopreentrancevisitor get flow info getflowinfo node f flow context fflowcontext set flow info setflowinfo node info