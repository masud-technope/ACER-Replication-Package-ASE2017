copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring reorg java net uri java util array list arraylist java util arrays java util collection java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util org eclipse core runtime org eclipse core runtime i adaptable iadaptable org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse i working set iworkingset org eclipse jdt core i class file iclassfile org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i jar entry resource ijarentryresource org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i source range isourcerange org eclipse jdt core i type itype org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core source range sourcerange org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring util java element util javaelementutil org eclipse jdt internal corext refactoring util resource util resourceutil org eclipse jdt internal corext util messages org eclipse jdt java element labels javaelementlabels org eclipse jdt internal viewsupport basic element labels basicelementlabels reorg utils reorgutils work around workaround bug i source range isourcerange fg unknown range fgunknownrange source range sourcerange reorg utils reorgutils is archive or external member isarchiveorexternalmember i java element ijavaelement elements elements length i java element ijavaelement element elements i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot element get ancestor getancestor i java element ijavaelement fragment root root root is archive isarchive root is external isexternal contains only projects containsonlyprojects list elements elements is empty isempty iterator iter elements iterator iter has next hasnext is project isproject iter is project isproject object element element i java project ijavaproject element i project iproject checks list working sets param elements list elements check code code list working sets code code contains only working sets containsonlyworkingsets list elements elements is empty isempty iterator iter elements iterator iter has next hasnext is working set isworkingset iter checks object working param element element test code code element working code code is working set isworkingset object element element i working set iworkingset is inside compilation unit isinsidecompilationunit i java element ijavaelement element element i compilation unit icompilationunit has ancestor of type hasancestoroftype element i java element ijavaelement compilation unit is inside class file isinsideclassfile i java element ijavaelement element element i class file iclassfile has ancestor of type hasancestoroftype element i java element ijavaelement file has ancestor of type hasancestoroftype i java element ijavaelement element type element get ancestor getancestor type code code i compilation unit icompilationunit get compilation unit getcompilationunit i java element ijavaelement java element javaelement java element javaelement i compilation unit icompilationunit i compilation unit icompilationunit java element javaelement i compilation unit icompilationunit java element javaelement get ancestor getancestor i java element ijavaelement compilation unit returned elements code code i compilation unit icompilationunit get compilation units getcompilationunits i java element ijavaelement java elements javaelements i compilation unit icompilationunit result i compilation unit icompilationunit java elements javaelements length java elements javaelements length result get compilation unit getcompilationunit java elements javaelements result i resource iresource get resource getresource i java element ijavaelement element element i compilation unit icompilationunit i compilation unit icompilationunit element get primary getprimary get resource getresource element get resource getresource i resource iresource get resources getresources i java element ijavaelement elements i resource iresource result i resource iresource elements length elements length result reorg utils reorgutils get resource getresource elements result string get name getname i resource iresource resource string resource label resourcelabel basic element labels basicelementlabels get resource name getresourcename resource resource get type gettype i resource iresource file messages format refactoring core messages refactoringcoremessages reorg utils reorgutils resource label resourcelabel i resource iresource folder messages format refactoring core messages refactoringcoremessages reorg utils reorgutils resource label resourcelabel i resource iresource project messages format refactoring core messages refactoringcoremessages reorg utils reorgutils resource label resourcelabel is true istrue string get name getname i java element ijavaelement element java model exception javamodelexception string pattern create name pattern createnamepattern element string arg java element labels javaelementlabels get element label getelementlabel element java element labels javaelementlabels messages format pattern arg string create name pattern createnamepattern i java element ijavaelement element java model exception javamodelexception element get element type getelementtype i java element ijavaelement file refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement compilation unit refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement field refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement container refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement declaration refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement initializer refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement java project refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement method i method imethod element is constructor isconstructor refactoring core messages refactoringcoremessages reorg utils reorgutils refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement declaration refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement fragment java element util javaelementutil is default package isdefaultpackage element refactoring core messages refactoringcoremessages reorg utils reorgutils refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement fragment root i package fragment root ipackagefragmentroot element is archive isarchive refactoring core messages refactoringcoremessages reorg utils reorgutils is source folder issourcefolder element refactoring core messages refactoringcoremessages reorg utils reorgutils is class folder isclassfolder element refactoring core messages refactoringcoremessages reorg utils reorgutils refactoring core messages refactoringcoremessages reorg utils reorgutils i java element ijavaelement type i type itype type i type itype element type is anonymous isanonymous refactoring core messages refactoringcoremessages reorg utils reorgutils refactoring core messages refactoringcoremessages reorg utils reorgutils is true istrue i resource iresource get resources getresources list elements list i resource iresource resources array list arraylist elements size iterator iter elements iterator iter has next hasnext object element iter element i resource iresource resources add i resource iresource element resources to array toarray i resource iresource resources size i java element ijavaelement get java elements getjavaelements list elements list i java element ijavaelement resources array list arraylist elements size iterator iter elements iterator iter has next hasnext object element iter element i java element ijavaelement resources add i java element ijavaelement element resources to array toarray i java element ijavaelement resources size returns jar entry resources list elements param elements list elements array jar entry resources i jar entry resource ijarentryresource get jar entry resources getjarentryresources list elements list i jar entry resource ijarentryresource resources array list arraylist elements size iterator iter elements iterator iter has next hasnext object element iter element i jar entry resource ijarentryresource resources add i jar entry resource ijarentryresource element resources to array toarray i jar entry resource ijarentryresource resources size i working set iworkingset get working sets getworkingsets list elements list i working set iworkingset result array list arraylist iterator iter elements iterator iter has next hasnext object element iter element i working set iworkingset result add i working set iworkingset element result to array toarray i working set iworkingset result size has source available hassourceavailable i member imember member java model exception javamodelexception member is binary isbinary member get source range getsourcerange fg unknown range fgunknownrange equals member get source range getsourcerange i resource iresource set minus setminus i resource iresource set to remove from settoremovefrom i resource iresource elements to remove elementstoremove i resource iresource set minus setminus hash set hashset set to remove from settoremovefrom length set to remove from settoremovefrom length set minus setminus add all addall arrays as list aslist set to remove from settoremovefrom set minus setminus remove all removeall arrays as list aslist elements to remove elementstoremove set minus setminus to array toarray i resource iresource set minus setminus size i java element ijavaelement set minus setminus i java element ijavaelement set to remove from settoremovefrom i java element ijavaelement elements to remove elementstoremove i java element ijavaelement set minus setminus hash set hashset set to remove from settoremovefrom length set to remove from settoremovefrom length set minus setminus add all addall arrays as list aslist set to remove from settoremovefrom set minus setminus remove all removeall arrays as list aslist elements to remove elementstoremove set minus setminus to array toarray i java element ijavaelement set minus setminus size i java element ijavaelement union i java element ijavaelement i java element ijavaelement lists avoid sequence problems list i java element ijavaelement union array list arraylist length length add all addall union add all addall union union to array toarray i java element ijavaelement union size i resource iresource union i resource iresource i resource iresource lists avoid sequence problems list i resource iresource union array list arraylist length length add all addall reorg utils reorgutils get not nulls getnotnulls union add all addall reorg utils reorgutils get not nulls getnotnulls union union to array toarray i resource iresource union size add all addall array list list array length list array list add array i type itype get main types getmaintypes i java element ijavaelement java elements javaelements java model exception javamodelexception list i java element ijavaelement result array list arraylist java elements javaelements length i java element ijavaelement element java elements javaelements element i type itype java element util javaelementutil is main type ismaintype i type itype element result add element result to array toarray i type itype result size i folder ifolder get folders getfolders i resource iresource resources i resource iresource result get resources of type getresourcesoftype resources i resource iresource folder result to array toarray i folder ifolder result size i file ifile get files getfiles i resource iresource resources i resource iresource result get resources of type getresourcesoftype resources i resource iresource file result to array toarray i file ifile result size result requested type array i resource iresource get resources of type getresourcesoftype i resource iresource resources type mask typemask i resource iresource result hash set hashset resources length resources length is of type isoftype resources type mask typemask result add resources result result requested type array type mask list get elements of type getelementsoftype i java element ijavaelement java elements javaelements type list i java element ijavaelement result array list arraylist java elements javaelements length java elements javaelements length is of type isoftype java elements javaelements type result add java elements javaelements result has elements not of type haselementsnotoftype i resource iresource resources type mask typemask resources length i resource iresource resource resources resource is of type isoftype resource type mask typemask type mask has elements not of type haselementsnotoftype i java element ijavaelement java elements javaelements type java elements javaelements length i java element ijavaelement element java elements javaelements element is of type isoftype element type type mask has elements of type haselementsoftype i java element ijavaelement java elements javaelements type java elements javaelements length i java element ijavaelement element java elements javaelements element is of type isoftype element type has elements of type haselementsoftype i java element ijavaelement java elements javaelements types types length has elements of type haselementsoftype java elements javaelements types has only elements of type hasonlyelementsoftype i java element ijavaelement java elements javaelements types java elements javaelements length i java element ijavaelement element java elements javaelements types length is of type isoftype element types has elements of type haselementsoftype i resource iresource resources type mask typemask resources length i resource iresource resource resources resource is of type isoftype resource type mask typemask is of type isoftype i java element ijavaelement element type mask element get element type getelementtype type is of type isoftype i resource iresource resource type resource is flag set isflagset resource get type gettype type is flag set isflagset flags flag flags flag is source folder issourcefolder i java element ijavaelement java element javaelement java model exception javamodelexception java element javaelement i package fragment root ipackagefragmentroot i package fragment root ipackagefragmentroot java element javaelement get kind getkind i package fragment root ipackagefragmentroot source is class folder isclassfolder i java element ijavaelement java element javaelement java model exception javamodelexception java element javaelement i package fragment root ipackagefragmentroot i package fragment root ipackagefragmentroot java element javaelement get kind getkind i package fragment root ipackagefragmentroot binary is package fragment root ispackagefragmentroot i java project ijavaproject java project javaproject java model exception javamodelexception get corresponding package fragment root getcorrespondingpackagefragmentroot java project javaproject is package fragment root corresponding to project ispackagefragmentrootcorrespondingtoproject i package fragment root ipackagefragmentroot root root get resource getresource i project iproject i package fragment root ipackagefragmentroot get corresponding package fragment root getcorrespondingpackagefragmentroot i java project ijavaproject java model exception javamodelexception i package fragment root ipackagefragmentroot roots get package fragment roots getpackagefragmentroots roots length is package fragment root corresponding to project ispackagefragmentrootcorrespondingtoproject roots roots contains linked resources containslinkedresources i resource iresource resources resources length resources resources is linked islinked contains linked resources containslinkedresources i java element ijavaelement java elements javaelements java elements javaelements length i resource iresource res get resource getresource java elements javaelements res res is linked islinked can be destination for linked resources canbedestinationforlinkedresources i resource iresource resource resource is accessible isaccessible resource i project iproject can be destination for linked resources canbedestinationforlinkedresources i java element ijavaelement java element javaelement java element javaelement i package fragment root ipackagefragmentroot is package fragment root corresponding to project ispackagefragmentrootcorrespondingtoproject i package fragment root ipackagefragmentroot java element javaelement java element javaelement i java project ijavaproject xxx is parent in workspace or on disk isparentinworkspaceorondisk i package fragment ipackagefragment pack i package fragment root ipackagefragmentroot root pack i java element ijavaelement pack parent packparent pack get parent getparent pack parent packparent pack parent packparent equals root i resource iresource package resource packageresource resource util resourceutil get resource getresource pack i resource iresource package root resource packagerootresource resource util resourceutil get resource getresource root is parent in workspace or on disk isparentinworkspaceorondisk package resource packageresource package root resource packagerootresource is parent in workspace or on disk isparentinworkspaceorondisk i package fragment root ipackagefragmentroot root i java project ijavaproject java project javaproject root i java element ijavaelement root parent rootparent root get parent getparent root parent rootparent root parent rootparent equals root i resource iresource package resource packageresource resource util resourceutil get resource getresource root i resource iresource package root resource packagerootresource resource util resourceutil get resource getresource java project javaproject is parent in workspace or on disk isparentinworkspaceorondisk package resource packageresource package root resource packagerootresource is parent in workspace or on disk isparentinworkspaceorondisk i compilation unit icompilationunit i package fragment ipackagefragment dest i java element ijavaelement cu parent cuparent get parent getparent cu parent cuparent cu parent cuparent equals dest i resource iresource cu resource curesource get resource getresource i resource iresource package resource packageresource resource util resourceutil get resource getresource dest is parent in workspace or on disk isparentinworkspaceorondisk cu resource curesource package resource packageresource is parent in workspace or on disk isparentinworkspaceorondisk i resource iresource res i resource iresource may be parent maybeparent res are equal in workspace or on disk areequalinworkspaceorondisk res get parent getparent may be parent maybeparent are equal in workspace or on disk areequalinworkspaceorondisk i resource iresource i resource iresource equals uri location getlocationuri uri location getlocationuri location location location equals location i resource iresource get not nulls getnotnulls i resource iresource resources collection i resource iresource result array list arraylist resources length resources length i resource iresource resource resources resource result resource result add resource result to array toarray i resource iresource result size i resource iresource get not linked getnotlinked i resource iresource resources collection i resource iresource result array list arraylist resources length resources length i resource iresource resource resources resource result resource resource is linked islinked result add resource result to array toarray i resource iresource result size list i java element ijavaelement java elements javaelements i compilation unit icompilationunit list i java element ijavaelement map i compilation unit icompilationunit list i java element ijavaelement group by compilation unit groupbycompilationunit list i java element ijavaelement java elements javaelements map i compilation unit icompilationunit list i java element ijavaelement result hash map hashmap iterator i java element ijavaelement iter java elements javaelements iterator iter has next hasnext i java element ijavaelement element iter i compilation unit icompilationunit reorg utils reorgutils get compilation unit getcompilationunit element result contains key containskey result array list arraylist i java element ijavaelement result add element result split into java elements and resources splitintojavaelementsandresources object elements list i java element ijavaelement java element result javaelementresult list i resource iresource resource result resourceresult elements length object element elements element i java element ijavaelement java element result javaelementresult add i java element ijavaelement element element i resource iresource i resource iresource resource i resource iresource element i java element ijavaelement j element jelement java core javacore create resource j element jelement j element jelement exists java element result javaelementresult add j element jelement resource result resourceresult add resource contains element or parent containselementorparent i adaptable iadaptable elements i java element ijavaelement element i java element ijavaelement curr element elements curr curr curr get parent getparent curr contains element or parent containselementorparent i adaptable iadaptable elements i resource iresource element i resource iresource curr element elements curr i java element ijavaelement j element jelement java core javacore create curr j element jelement j element jelement exists contains element or parent containselementorparent elements j element jelement curr curr get parent getparent curr