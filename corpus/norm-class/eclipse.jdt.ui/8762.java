copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring reorg java util array list arraylist java util arrays java util iterator java util list org eclipse core runtime core exception coreexception org eclipse core resources i container icontainer org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i resource iresource org eclipse core resources mapping i resource change description factory iresourcechangedescriptionfactory org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring participants delete arguments deletearguments org eclipse ltk core refactoring participants participant manager participantmanager org eclipse ltk core refactoring participants refactoring participant refactoringparticipant org eclipse ltk core refactoring participants refactoring processor refactoringprocessor org eclipse ltk core refactoring participants sharable participants sharableparticipants org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i type itype org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt internal corext refactoring util java element util javaelementutil modification collector java element delete operations delete modifications deletemodifications refactoring modifications refactoringmodifications list i java element ijavaelement f delete fdelete actual packages executing code handle package fragment delete handlepackagefragmentdelete code algorithm check parent folder deleted list i package fragment ipackagefragment f packages to delete fpackagestodelete delete modifications deletemodifications f delete fdelete array list arraylist f packages to delete fpackagestodelete array list arraylist delete i resource iresource resource get resource modifications getresourcemodifications add delete adddelete resource delete i resource iresource resources resources length delete resources delete i java element ijavaelement elements core exception coreexception elements length delete elements delete i java element ijavaelement element core exception coreexception element get element type getelementtype i java element ijavaelement java model i java element ijavaelement java project f delete fdelete add element element get resource getresource get resource modifications getresourcemodifications add delete adddelete element get resource getresource i java element ijavaelement fragment root f delete fdelete add element i resource iresource resource element get resource getresource change resource get resource modifications getresourcemodifications add delete adddelete resource i java project ijavaproject referencing projects referencingprojects java element util javaelementutil get ref erencing projects getreferencingprojects i package fragment root ipackagefragmentroot element referencing projects referencingprojects length i file ifile classpath nls referencing projects referencingprojects get project getproject get file getfile nls classpath get resource modifications getresourcemodifications add changed addchanged classpath i java element ijavaelement fragment f delete fdelete add element f packages to delete fpackagestodelete add i package fragment ipackagefragment element i java element ijavaelement compilation unit f delete fdelete add element i type itype types i compilation unit icompilationunit element get types gettypes f delete fdelete add all addall arrays as list aslist types element get resource getresource get resource modifications getresourcemodifications add delete adddelete element get resource getresource f delete fdelete add element list i resources iresources removed deletes core exception coreexception list i resource iresource post process postprocess core exception coreexception array list arraylist i resource iresource resources collector resourcescollector array list arraylist iterator i package fragment ipackagefragment iter f packages to delete fpackagestodelete iterator iter has next hasnext i package fragment ipackagefragment pack iter handle package fragment delete handlepackagefragmentdelete pack resources collector resourcescollector resources collector resourcescollector override build delta builddelta i resource change description factory iresourcechangedescriptionfactory delta factory deltafactory get resource modifications getresourcemodifications build delta builddelta delta factory deltafactory override refactoring participant refactoringparticipant load participants loadparticipants refactoring status refactoringstatus status refactoring processor refactoringprocessor owner string natures sharable participants sharableparticipants shared list refactoring participant refactoringparticipant result array list arraylist iterator i java element ijavaelement iter f delete fdelete iterator iter has next hasnext result add all addall arrays as list aslist participant manager participantmanager load delete participants loaddeleteparticipants status owner iter delete arguments deletearguments natures shared result add all addall arrays as list aslist get resource modifications getresourcemodifications get participants getparticipants status owner natures shared result to array toarray refactoring participant refactoringparticipant result size method collects file folder deletion not ifying notifying participants participants not ified notified deletion deletion files files deleted folder cleaning deletion folder cleared parent removed deleted resources code resources collector resourcescollector code param pack param resources collector resourcescollector collector i resources iresources deleted core exception coreexception handle package fragment delete handlepackagefragmentdelete i package fragment ipackagefragment pack array list arraylist i resource iresource resources collector resourcescollector core exception coreexception i container icontainer container i container icontainer pack get resource getresource container i resource iresource members container members check removed completely cleared removed completely pack is default package isdefaultpackage can remove comp let ely canremovecompletely pack removed completely folder deleted notify participants folder deletion parent folder folder deleted parent is marked parentismarked i package fragment ipackagefragment parent java element util javaelementutil get parent sub package getparentsubpackage pack parent parent deleted physically parent is marked parentismarked parent marked list parent is marked parentismarked f packages to delete fpackagestodelete parent parent is marked parentismarked parent marked deleted cleared can remove comp let ely canremovecompletely parent parent removed completely add folder list parent removed completely folder removed notify participant resources collector resourcescollector add container get resource modifications getresourcemodifications add delete adddelete container parent removed resources collector resourcescollector add container get resource modifications getresourcemodifications add delete adddelete container removed notify participant deleted children members length i resource iresource member members member i file ifile i file ifile file i file ifile member nls equals file get file extension getfileextension nls file is derived isderived pack is default package isdefaultpackage java core javacore is java like file name isjavalikefilename file get name getname resources collector resourcescollector add member get resource modifications getresourcemodifications add delete adddelete member pack is default package isdefaultpackage member i folder ifolder folder children packages packages removed build path notify participant i package fragment ipackagefragment frag i package fragment ipackagefragment java core javacore create member frag resources collector resourcescollector add member get resource modifications getresourcemodifications add delete adddelete member returns init ially initially selected deletable selected packages cleared param pack init ially initially selected deletable java model exception javamodelexception can remove comp let ely canremovecompletely i package fragment ipackagefragment pack java model exception javamodelexception i package fragment ipackagefragment sub packages subpackages java element util javaelementutil get package and sub packages getpackageandsubpackages pack sub packages subpackages length sub packages subpackages equals pack f packages to delete fpackagestodelete sub packages subpackages