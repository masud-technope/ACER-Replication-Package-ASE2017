copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation nikolay metchev nikolaymetchev gmail ctrl shift creates imports methods https bugs eclipse org org eclipse jdt internal corext code manipulation codemanipulation java util array list arraylist java util list org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime status org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core runtime jobs i scheduling rule ischedulingrule org eclipse core resources i workspace runnable iworkspacerunnable org eclipse text edits multi text edit multitextedit org eclipse text edits replace edit replaceedit org eclipse text edits text edit textedit org eclipse jdt core flags org eclipse jdt core i buffer ibuffer org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core java model exception javamodelexception org eclipse jdt core signature org eclipse jdt core dom ast node astnode org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom annotation org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom marker annotation markerannotation org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom modifier org eclipse jdt core dom org eclipse jdt core dom name qualified type namequalifiedtype org eclipse jdt core dom node finder nodefinder org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search i java search scope ijavasearchscope org eclipse jdt core search search engine searchengine org eclipse jdt core search search pattern searchpattern org eclipse jdt core search type name match typenamematch org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext util java conventions util javaconventionsutil org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util messages org eclipse jdt internal corext util type name match collector typenamematchcollector org eclipse jdt sharedastprovider org eclipse jdt internal javauistatus org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal text correction similar elements requestor similarelementsrequestor org eclipse jdt internal viewsupport basic element labels basicelementlabels add imports compilation unit input array full qualified type names elimination unnecessary imports import structure importstructure duplicates compilation unit open editor pass working copy add imports operation addimportsoperation i workspace runnable iworkspacerunnable i choose import query ichooseimportquery selects list choices param open choices openchoices array types param container name containername type imported returns code code cancel operation selected imports type name match typenamematch choose import chooseimport type name match typenamematch open choices openchoices string container name containername i compilation unit icompilationunit f compilation unit fcompilationunit f selection offset fselectionoffset f selection length fselectionlength i choose import query ichooseimportquery f query fquery i status istatus f status fstatus f do save fdosave f apply fapply multi text edit multitextedit f resulting edit fresultingedit generate statements passed java elements elements type i type itype single i package fragment ipackagefragment demand java elements javaelements param compilation unit param selection offset selectionoffset start current text selection param selection length selectionlength current text selection param query query element int eraction interaction code code select multiple pos sibilities possibilities param save result saved add imports operation addimportsoperation i compilation unit icompilationunit selection offset selectionoffset selection length selectionlength i choose import query ichooseimportquery query save selection offset selectionoffset selection length selectionlength query save generate statements passed java elements elements type i type itype single i package fragment ipackagefragment demand java elements javaelements param compilation unit param selection offset selectionoffset start current text selection param selection length selectionlength current text selection param query query element int eraction interaction code code select multiple pos sibilities possibilities param save result saved param apply edit applied add imports operation addimportsoperation i compilation unit icompilationunit selection offset selectionoffset selection length selectionlength i choose import query ichooseimportquery query save apply is not null isnotnull f compilation unit fcompilationunit f selection offset fselectionoffset selection offset selectionoffset f selection length fselectionlength selection length selectionlength f query fquery query f status fstatus status status f do save fdosave save f apply fapply apply returns status i status istatus get status getstatus f status fstatus runs operation param monitor progress monitor core exception coreexception accessing rewritting imports fails operation canceled exception operationcanceledexception runtime error thrown operation can celed canceled override i progress monitor iprogressmonitor monitor core exception coreexception operation canceled exception operationcanceledexception monitor monitor null progress monitor nullprogressmonitor monitor begin task begintask code generation messages codegenerationmessages add imports operation addimportsoperation description compilation unit compilationunit ast root astroot sharedastprovider getast f compilation unit fcompilationunit sharedastprovider wait sub progress monitor subprogressmonitor monitor ast root astroot operation canceled exception operationcanceledexception import rewrite importrewrite import rewrite importrewrite stub utility stubutility create import rewrite createimportrewrite ast root astroot multi text edit multitextedit res multi text edit multitextedit text edit textedit edit evaluate edits evaluateedits ast root astroot import rewrite importrewrite f selection offset fselectionoffset f selection length fselectionlength sub progress monitor subprogressmonitor monitor edit res add child addchild edit text edit textedit imports edit importsedit import rewrite importrewrite rewrite imports rewriteimports sub progress monitor subprogressmonitor monitor res add child addchild imports edit importsedit f resulting edit fresultingedit res f apply fapply java model util javamodelutil apply edit applyedit f compilation unit fcompilationunit res f do save fdosave sub progress monitor subprogressmonitor monitor monitor returns edit edit multi text edit multitextedit get resulting edit getresultingedit f resulting edit fresultingedit text edit textedit evaluate edits evaluateedits compilation unit compilationunit root import rewrite importrewrite import rewrite importrewrite offset length i progress monitor iprogressmonitor monitor java model exception javamodelexception simple name simplename name node namenode ast root ast node astnode node node finder nodefinder perform root offset length node marker annotation markerannotation node annotation node get type name gettypename node qualified name qualifiedname name node namenode qualified name qualifiedname node get name getname node simple name simplename name node namenode simple name simplename node string simple name simplename container name containername qualifier start qualifierstart simple name start simplenamestart name node namenode simple name simplename name node namenode get identifier getidentifier simple name start simplenamestart name node namenode get start position getstartposition name node namenode get location in parent getlocationinparent qualified name qualifiedname property qualifier qualified name qualifiedname name node namenode get parent getparent get qualifier getqualifier container name containername qualifier get fully qualified name getfullyqualifiedname java model util javamodelutil concatenate name concatenatename container name containername simple name simplename qualifier start qualifierstart qualifier get start position getstartposition name node namenode get location in parent getlocationinparent name qualified type namequalifiedtype property name qualified type namequalifiedtype name qualified type namequalifiedtype name qualified type namequalifiedtype name node namenode get parent getparent qualifier name qualified type namequalifiedtype get qualifier getqualifier container name containername qualifier get fully qualified name getfullyqualifiedname java model util javamodelutil concatenate name concatenatename container name containername simple name simplename qualifier start qualifierstart qualifier get start position getstartposition list annotation annotations name qualified type namequalifiedtype annotations don remove annotations annotations is empty isempty simple name start simplenamestart annotations get start position getstartposition name node namenode get location in parent getlocationinparent method invocation methodinvocation property ast node astnode qualifier method invocation methodinvocation name node namenode get parent getparent get expression getexpression qualifier container name containername ast nodes astnodes as string asstring qualifier java model util javamodelutil concatenate name concatenatename container name containername simple name simplename qualifier start qualifierstart qualifier get start position getstartposition nls container name containername nls simple name simplename qualifier start qualifierstart simple name start simplenamestart i binding ibinding binding name node namenode resolve binding resolvebinding binding binding is recovered isrecovered binding i type binding itypebinding i type binding itypebinding type binding typebinding i type binding itypebinding binding get type declaration gettypedeclaration string qualified binding name qualifiedbindingname type binding typebinding get qualified name getqualifiedname container name containername length qualified binding name qualifiedbindingname equals import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext root qualifier start qualifierstart import rewrite importrewrite string res import rewrite importrewrite add import addimport type binding typebinding context container name containername length res equals simple name simplename adding failed f status fstatus javauistatus create error createerror i status istatus error code generation messages codegenerationmessages add imports operation addimportsoperation error import clash importclash container name containername length res equals simple name simplename change replace edit replaceedit qualifier start qualifierstart simple name start simplenamestart qualifier start qualifierstart string java model util javamodelutil or higher orhigher f compilation unit fcompilationunit get java project getjavaproject binding i variable binding ivariablebinding binding i method binding imethodbinding is field isfield binding i variable binding ivariablebinding i type binding itypebinding declaring class declaringclass is field isfield i variable binding ivariablebinding binding get declaring class getdeclaringclass i method binding imethodbinding binding get declaring class getdeclaringclass declaring class declaringclass variable binding variablebinding get declaring class getdeclaringclass array length modifier is static isstatic binding get modifiers getmodifiers container name containername length container name containername equals declaring class declaringclass get name getname container name containername equals declaring class declaringclass get qualified name getqualifiedname ast node astnode node name node namenode get parent getparent is dir ectly accessible isdirectlyaccessible node is type declaration sub type compatible istypedeclarationsubtypecompatible node declaring class declaringclass is dir ectly accessible isdirectlyaccessible node node get parent getparent is dir ectly accessible isdirectlyaccessible modifier is private isprivate declaring class declaringclass get modifiers getmodifiers f status fstatus javauistatus create error createerror i status istatus error messages format code generation messages codegenerationmessages add imports operation addimportsoperation error visible basic element labels basicelementlabels get java element name getjavaelementname declaring class declaringclass get name getname string res import rewrite importrewrite add static import addstaticimport declaring class declaringclass get qualified name getqualifiedname binding get name getname is field isfield res equals simple name simplename adding failed replace edit replaceedit qualifier start qualifierstart nls simple name start simplenamestart nls qualifier start qualifierstart imports packages binding binding get kind getkind i binding ibinding type recovered binding i buffer ibuffer buffer f compilation unit fcompilationunit get buffer getbuffer qualifier start qualifierstart get name start getnamestart buffer offset name end nameend get name end getnameend buffer offset length len name end nameend qualifier start qualifierstart buffer get text gettext qualifier start qualifierstart len trim length simple name simplename signature get simple name getsimplename container name containername signature get qualifier getqualifier i java project ijavaproject java project javaproject f compilation unit fcompilationunit get java project getjavaproject simple name simplename length java conventions util javaconventionsutil validate java type name validatejavatypename simple name simplename java project javaproject matches i status istatus error container name containername length java conventions util javaconventionsutil validate java type name validatejavatypename container name containername java project javaproject matches i status istatus error f status fstatus javauistatus create error createerror i status istatus error code generation messages codegenerationmessages add imports operation addimportsoperation error invalid selection simple name start simplenamestart get simple name start getsimplenamestart buffer qualifier start qualifierstart container name containername res import rewrite importrewrite get default import rewrite context getdefaultimportrewritecontext find in context findincontext container name containername simple name simplename import rewrite context importrewritecontext kind type res import rewrite context importrewritecontext res conflict f status fstatus javauistatus create error createerror i status istatus error code generation messages codegenerationmessages add imports operation addimportsoperation error import clash importclash res import rewrite context importrewritecontext res nls replace edit replaceedit nls qualifier start qualifierstart nls simple name start simplenamestart qualifier start qualifierstart nls i java search scope ijavasearchscope search scope searchscope search engine searchengine create java search scope createjavasearchscope i java element ijavaelement f compilation unit fcompilationunit get java project getjavaproject type name match typenamematch types find all types findalltypes simple name simplename search scope searchscope name node namenode sub progress monitor subprogressmonitor monitor types length f status fstatus javauistatus create error createerror i status istatus error messages format code generation messages codegenerationmessages add imports operation addimportsoperation error not resolved notresolved message basic element labels basicelementlabels get java element name getjavaelementname simple name simplename monitor is canceled iscanceled operation canceled exception operationcanceledexception type name match typenamematch chosen types length f query fquery chosen f query fquery choose import chooseimport types container name containername chosen operation canceled exception operationcanceledexception chosen types import rewrite context importrewritecontext context root context sensitive import rewrite context contextsensitiveimportrewritecontext root simple name start simplenamestart import rewrite importrewrite import rewrite importrewrite add import addimport chosen get fully qualified name getfullyqualifiedname context nls replace edit replaceedit qualifier start qualifierstart simple name start simplenamestart qualifier start qualifierstart is type declaration sub type compatible istypedeclarationsubtypecompatible ast node astnode type declaration typedeclaration i type binding itypebinding supertype type declaration typedeclaration abstract type declaration abstracttypedeclaration i type binding itypebinding binding abstract type declaration abstracttypedeclaration type declaration typedeclaration resolve binding resolvebinding binding binding is sub type compatible issubtypecompatible supertype type declaration typedeclaration anonymous class declaration anonymousclassdeclaration i type binding itypebinding binding anonymous class declaration anonymousclassdeclaration type declaration typedeclaration resolve binding resolvebinding binding binding is sub type compatible issubtypecompatible supertype get name start getnamestart i buffer ibuffer buffer pos pos buffer get char getchar pos character is java identifier part isjavaidentifierpart pos pos pos get name end getnameend i buffer ibuffer doc pos pos character is whitespace iswhitespace doc get char getchar pos pos len doc get length getlength pos len doc get char getchar pos character is java identifier part isjavaidentifierpart pos pos pos get simple name start getsimplenamestart i buffer ibuffer buffer name start namestart string container name containername container len containerlen container name containername length doc len doclen buffer get length getlength container len containerlen name start namestart container len containerlen doc len doclen container len containerlen buffer get char getchar name start namestart container name containername char at charat name start namestart buffer get char getchar name start namestart container len containerlen name start namestart container len containerlen name start namestart get search for constant getsearchforconstant type kinds typekinds classes similar elements requestor similarelementsrequestor classes interfaces similar elements requestor similarelementsrequestor interfaces enums similar elements requestor similarelementsrequestor enums annotations similar elements requestor similarelementsrequestor annotations type kinds typekinds classes interfaces enums annotations classes i java search constants ijavasearchconstants interfaces i java search constants ijavasearchconstants enums i java search constants ijavasearchconstants enum annotations i java search constants ijavasearchconstants annotation type classes interfaces i java search constants ijavasearchconstants classes enums i java search constants ijavasearchconstants enum i java search constants ijavasearchconstants type finds type simple type name match typenamematch find all types findalltypes string simple type name simpletypename i java search scope ijavasearchscope search scope searchscope simple name simplename name node namenode i progress monitor iprogressmonitor monitor java model exception javamodelexception or higher orhigher java model util javamodelutil or higher orhigher f compilation unit fcompilationunit get java project getjavaproject type kinds typekinds similar elements requestor similarelementsrequestor types name node namenode type kinds typekinds ast res olving astresolving get possible type kinds getpossibletypekinds name node namenode or higher orhigher array list arraylist type name match typenamematch type infos typeinfos array list arraylist type name match collector typenamematchcollector requestor type name match collector typenamematchcollector type infos typeinfos match mode matchmode search pattern searchpattern exact match search pattern searchpattern sensitive search engine searchengine search all type names searchalltypenames match mode matchmode simple type name simpletypename to char array tochararray match mode matchmode get search for constant getsearchforconstant type kinds typekinds search scope searchscope requestor i java search constants ijavasearchconstants wait ready search monitor array list arraylist type name match typenamematch type refs found typerefsfound array list arraylist type infos typeinfos size len type infos typeinfos size len type name match typenamematch curr type infos typeinfos imports curr get package name getpackagename length is of kind isofkind curr type kinds typekinds or higher orhigher is visible isvisible curr type refs found typerefsfound add curr type refs found typerefsfound to array toarray type name match typenamematch type refs found typerefsfound size is of kind isofkind type name match typenamematch curr type kinds typekinds or higher orhigher flags curr get modifiers getmodifiers flags is annotation isannotation flags or higher orhigher type kinds typekinds similar elements requestor similarelementsrequestor annotations flags is enum isenum flags or higher orhigher type kinds typekinds similar elements requestor similarelementsrequestor enums flags is interface isinterface flags type kinds typekinds similar elements requestor similarelementsrequestor interfaces type kinds typekinds similar elements requestor similarelementsrequestor classes is visible isvisible type name match typenamematch curr flags curr get modifiers getmodifiers flags is private isprivate flags flags is public ispublic flags flags is protected isprotected flags curr get package name getpackagename equals f compilation unit fcompilationunit get parent getparent get element name getelementname returns scheduling rule operation i scheduling rule ischedulingrule get schedule rule getschedulerule f compilation unit fcompilationunit get java project getjavaproject get resource getresource