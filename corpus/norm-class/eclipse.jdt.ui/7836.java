copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt tests core junit framework test junit framework test suite testsuite org eclipse jdt test plugin testplugin java project helper javaprojecthelper org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse text edits replace edit replaceedit org eclipse ltk core refactoring change org eclipse ltk core refactoring create change operation createchangeoperation org eclipse ltk core refactoring perform change operation performchangeoperation org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt javaui org eclipse jdt sharedastprovider tests ast provider ast provider test astprovidertest core tests coretests add field refactoring addfieldrefactoring refactoring i compilation unit icompilationunit f cu fcu f field number ffieldnumber add field refactoring addfieldrefactoring i compilation unit icompilationunit field number fieldnumber f cu fcu f field number ffieldnumber field number fieldnumber override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception operation canceled exception operationcanceledexception refactoring status refactoringstatus override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception operation canceled exception operationcanceledexception refactoring status refactoringstatus override change create change createchange i progress monitor iprogressmonitor core exception coreexception operation canceled exception operationcanceledexception compilation unit change compilationunitchange result compilation unit change compilationunitchange f cu fcu string text get field name getfieldname f field number ffieldnumber position f field number ffieldnumber text length result set edit setedit replace edit replaceedit position text result override string get name getname add field string get field name getfieldname number get normalize number getnormalizenumber number ast provider test astprovidertest ast provider test astprovidertest i java project ijavaproject fjproject i package fragment root ipackagefragmentroot f source folder fsourcefolder ast provider test astprovidertest string test suite set up test setuptest test suite testsuite test set up test setuptest test test project test setup projecttestsetup test override set up setup exception fjproject project test setup projecttestsetup get project getproject f source folder fsourcefolder java project helper javaprojecthelper add source container addsourcecontainer fjproject src override tear down teardown exception java project helper javaprojecthelper clear fjproject project test setup projecttestsetup get default classpath getdefaultclasspath test bug testbug exception i package fragment ipackagefragment pack f source folder fsourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring javaui open i n editor openineditor string expected get buffer getbuffer get contents getcontents compilation unit compilationunit ast sharedastprovider getast sharedastprovider wait active assert not null assertnotnull ast assert equals assertequals expected ast to string tostring refactoring refactoring add field refactoring addfieldrefactoring refactoring check all conditions checkallconditions null progress monitor nullprogressmonitor perform change operation performchangeoperation operation perform change operation performchangeoperation create change operation createchangeoperation refactoring operation null progress monitor nullprogressmonitor get buffer getbuffer save string get normalize number getnormalizenumber number number number number number number number number