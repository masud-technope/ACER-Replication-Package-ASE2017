copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal java editor javaeditor java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java data input stream datainputstream java data output stream dataoutputstream java i o exception ioexception java lang reflect invocation target exception invocationtargetexception java util array list arraylist java util hash set hashset java util list java util resource bundle resourcebundle org eclipse swt swt error swterror org eclipse swt custom busy indicator busyindicator org eclipse swt dnd byte array transfer bytearraytransfer org eclipse swt dnd clipboard org eclipse swt dnd dnd org eclipse swt dnd rtf transfer rtftransfer org eclipse swt dnd text transfer texttransfer org eclipse swt dnd transfer org eclipse swt dnd transfer data transferdata org eclipse swt widgets display org eclipse swt widgets shell org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime status org eclipse jface operation i runnable with progress irunnablewithprogress org eclipse jface viewers i selection iselection org eclipse jface text i rewrite target irewritetarget org eclipse jface text i text operation target itextoperationtarget org eclipse jface text i text selection itextselection org eclipse jface text region org eclipse i editor part ieditorpart org eclipse i workbench command constants iworkbenchcommandconstants org eclipse i workbench page iworkbenchpage org eclipse i workbench part site iworkbenchpartsite org eclipse platformui org eclipse progress i progress service iprogressservice org eclipse progress i workbench site progress service iworkbenchsiteprogressservice org eclipse texteditor i abstract text editor help context ids iabstracttexteditorhelpcontextids org eclipse texteditor i text editor itexteditor org eclipse texteditor i text editor extension itexteditorextension org eclipse texteditor text editor action texteditoraction org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i type root ityperoot org eclipse jdt core java core javacore org eclipse jdt core signature org eclipse jdt core dom ast node astnode org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom import declaration importdeclaration org eclipse jdt core dom org eclipse jdt core dom simple name simplename org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt internal corext code manipulation codemanipulation import references collector importreferencescollector org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom bindings org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt javaui org eclipse jdt preference constants preferenceconstants org eclipse jdt sharedastprovider org eclipse jdt internal i java status constants ijavastatusconstants org eclipse jdt internal java plugin javaplugin org eclipse jdt internal javauimessages action cut copy paste support adding imports paste clipboard operation action clipboardoperationaction text editor action texteditoraction clipboard data clipboarddata string f origin handle foriginhandle string f type imports ftypeimports string f static imports fstaticimports clipboard data clipboarddata i java element ijavaelement origin string type imports typeimports string static imports staticimports is not null isnotnull origin is not null isnotnull type imports typeimports is not null isnotnull static imports staticimports f type imports ftypeimports type imports typeimports f static imports fstaticimports static imports staticimports f origin handle foriginhandle origin get handle identifier gethandleidentifier clipboard data clipboarddata bytes i o exception ioexception data input stream datainputstream data in datain data input stream datainputstream byte array input stream bytearrayinputstream bytes f origin handle foriginhandle data in datain readutf f type imports ftypeimports read array readarray data in datain f static imports fstaticimports read array readarray data in datain data in datain close string read array readarray data input stream datainputstream data in datain i o exception ioexception count data in datain read int readint string array string count count array data in datain readutf array write array writearray data output stream dataoutputstream data out dataout string array i o exception ioexception data out dataout write int writeint array length array length data out dataout writeutf array string get type imports gettypeimports f type imports ftypeimports string get static imports getstaticimports f static imports fstaticimports is from same isfromsame i java element ijavaelement elem f origin handle foriginhandle equals elem get handle identifier gethandleidentifier serialize i o exception ioexception byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream data output stream dataoutputstream data out dataout data output stream dataoutputstream data out dataout writeutf f origin handle foriginhandle write array writearray data out dataout f type imports ftypeimports write array writearray data out dataout f static imports fstaticimports data out dataout close close to byte array tobytearray clipboard transfer clipboardtransfer byte array transfer bytearraytransfer nls string type source imports transfer format system current time millis currenttimemillis type id typeid register type registertype type override get type ids gettypeids type id typeid override string get type names gettypenames string type override java to native javatonative object data transfer data transferdata transfer data transferdata data clipboard data clipboarddata java to native javatonative clipboard data clipboarddata data serialize transfer data transferdata i o exception ioexception override object native to java nativetojava transfer data transferdata transfer data transferdata bytes native to java nativetojava transfer data transferdata bytes clipboard data clipboarddata bytes i o exception ioexception clipboard transfer clipboardtransfer f g transfer instance fgtransferinstance clipboard transfer clipboardtransfer text operation code f operation code foperationcode text operation target i text operation target itextoperationtarget f operation target foperationtarget creates action param bundle resource bundle param prefix prefix prepended resource code resource action resourceaction code constructor code code param editor text editor param operation code operationcode operation code clipboard operation action clipboardoperationaction resource bundle resourcebundle bundle string prefix i text editor itexteditor editor operation code operationcode bundle prefix editor f operation code foperationcode operation code operationcode operation code operationcode i text operation target itextoperationtarget cut set help context id sethelpcontextid i abstract text editor help context ids iabstracttexteditorhelpcontextids cut action set action definition id setactiondefinitionid i workbench command constants iworkbenchcommandconstants edit cut operation code operationcode i text operation target itextoperationtarget copy set help context id sethelpcontextid i abstract text editor help context ids iabstracttexteditorhelpcontextids copy action set action definition id setactiondefinitionid i workbench command constants iworkbenchcommandconstants edit copy operation code operationcode i text operation target itextoperationtarget paste set help context id sethelpcontextid i abstract text editor help context ids iabstracttexteditorhelpcontextids paste action set action definition id setactiondefinitionid i workbench command constants iworkbenchcommandconstants edit paste nls is true istrue invalid operation code update is read only operation isreadonlyoperation f operation code foperationcode i text operation target itextoperationtarget copy override f operation code foperationcode f operation target foperationtarget i text editor itexteditor editor get text editor gettexteditor editor is read only operation isreadonlyoperation validate editor input state validateeditorinputstate busy indicator busyindicator show while showwhile get display getdisplay runnable override internal do operation internaldooperation shell get shell getshell i text editor itexteditor editor get text editor gettexteditor editor i workbench part site iworkbenchpartsite site editor get site getsite shell shell site get shell getshell shell shell is disposed isdisposed shell display get display getdisplay shell shell get shell getshell shell shell get display getdisplay returns smart insert mode selected code code smart insert mode selected is smart insert mode issmartinsertmode i workbench page iworkbenchpage java plugin javaplugin get active page getactivepage i editor part ieditorpart get active editor getactiveeditor i text editor extension itexteditorextension i text editor extension itexteditorextension extension i text editor extension itexteditorextension extension get insert mode getinsertmode i text editor extension itexteditorextension smart insert editor utility editorutility is compare editor input iscompareeditorinput get editor input geteditorinput i text editor extension itexteditorextension extension get adapter getadapter i text editor extension itexteditorextension extension extension get insert mode getinsertmode i text editor extension itexteditorextension smart insert internal do operation internaldooperation preference constants preferenceconstants get preference store getpreferencestore get boolean getboolean preference constants preferenceconstants editor imports paste is smart insert mode issmartinsertmode f operation code foperationcode i text operation target itextoperationtarget paste do paste with imports operation dopastewithimportsoperation do cut copy with imports operation docutcopywithimportsoperation f operation target foperationtarget do operation dooperation f operation code foperationcode override update update is read only operation isreadonlyoperation can modify editor canmodifyeditor set enabled setenabled i text editor itexteditor editor get text editor gettexteditor f operation target foperationtarget editor f operation code foperationcode f operation target foperationtarget editor get adapter getadapter i text operation target itextoperationtarget is enabled isenabled f operation target foperationtarget f operation target foperationtarget can do operation candooperation f operation code foperationcode set enabled setenabled is enabled isenabled override set editor seteditor i text editor itexteditor editor set editor seteditor editor f operation target foperationtarget do cut copy with imports operation docutcopywithimportsoperation i text editor itexteditor editor get text editor gettexteditor i type root ityperoot input element inputelement javaui get editor input type root geteditorinputtyperoot editor get editor input geteditorinput i selection iselection selection editor get selection provider getselectionprovider get selection getselection object clipboard data clipboarddata input element inputelement selection i text selection itextselection selection is empty isempty i text selection itextselection text selection textselection i text selection itextselection selection is non trivial selection isnontrivialselection text selection textselection clipboard data clipboarddata get clipboard data getclipboarddata input element inputelement text selection textselection get offset getoffset text selection textselection get length getlength f operation target foperationtarget do operation dooperation f operation code foperationcode clipboard data clipboarddata assumptions styled text widget sets https bugs eclipse org bugs bug cgi clipboard clipboard clipboard get display getdisplay object text data textdata clipboard get contents getcontents text transfer texttransfer get instance getinstance don add didn text data clipboard https bugs eclipse org bugs bug cgi https bugs eclipse org bugs bug cgi text data textdata array list arraylist object datas array list arraylist array list arraylist byte array transfer bytearraytransfer transfers array list arraylist datas add text data textdata transfers add text transfer texttransfer get instance getinstance object rtf data rtfdata clipboard get contents getcontents rtf transfer rtftransfer get instance getinstance rtf data rtfdata datas add rtf data rtfdata transfers add rtf transfer rtftransfer get instance getinstance datas add clipboard data clipboarddata transfers add f g transfer instance fgtransferinstance transfer data types datatypes transfers to array toarray transfer transfers size object data datas to array toarray set clipboard contents setclipboardcontents clipboard data data types datatypes clipboard dispose set clipboard contents setclipboardcontents clipboard clipboard object datas transfer transfers clipboard set contents setcontents datas transfers swt error swterror code dnd error clipboard is non trivial selection isnontrivialselection i text selection itextselection selection selection get length getlength string text selection get text gettext text text length character is java identifier part isjavaidentifierpart text char at charat clipboard data clipboarddata get clipboard data getclipboarddata i type root ityperoot input element inputelement offset length compilation unit compilationunit ast root astroot sharedastprovider getast input element inputelement sharedastprovider wait active ast root astroot process selection spans declaration list import declaration importdeclaration list ast root astroot imports list is empty isempty offset ast node astnode list list size get start position getstartposition ast root astroot get package getpackage offset ast node astnode ast root astroot get package getpackage get start position getstartposition array list arraylist simple name simplename type imports refs typeimportsrefs array list arraylist array list arraylist simple name simplename static imports refs staticimportsrefs array list arraylist import references collector importreferencescollector collect ast root astroot input element inputelement get java project getjavaproject region offset length type imports refs typeimportsrefs static imports refs staticimportsrefs type imports refs typeimportsrefs is empty isempty static imports refs staticimportsrefs is empty isempty hash set hashset string names to import namestoimport hash set hashset type imports refs typeimportsrefs size type imports refs typeimportsrefs size curr type imports refs typeimportsrefs i binding ibinding binding curr resolve binding resolvebinding binding binding get kind getkind i binding ibinding type i type binding itypebinding type binding typebinding i type binding itypebinding binding type binding typebinding is array isarray type binding typebinding type binding typebinding get element type getelementtype removed bug fixed type binding typebinding is type variable istypevariable type binding typebinding is capture iscapture type binding typebinding is wildcard type iswildcardtype type binding typebinding is member ismember type binding typebinding is top level istoplevel string bindings get raw qualified name getrawqualifiedname type binding typebinding length names to import namestoimport add hash set hashset string statics to import staticstoimport hash set hashset static imports refs staticimportsrefs size static imports refs staticimportsrefs size curr static imports refs staticimportsrefs i binding ibinding binding curr resolve binding resolvebinding binding string buffer stringbuffer buf string buffer stringbuffer bindings get import name getimportname binding binding get kind getkind i binding ibinding method nls buf append statics to import staticstoimport add buf to string tostring names to import namestoimport is empty isempty statics to import staticstoimport is empty isempty string type imports typeimports names to import namestoimport to array toarray string names to import namestoimport size string static imports staticimports statics to import staticstoimport to array toarray string statics to import staticstoimport size clipboard data clipboarddata input element inputelement type imports typeimports static imports staticimports do paste with imports operation dopastewithimportsoperation i text editor itexteditor editor get text editor gettexteditor i java element ijavaelement input element inputelement javaui get editor input type root geteditorinputtyperoot editor get editor input geteditorinput clipboard clipboard clipboard get display getdisplay clipboard data clipboarddata imports data importsdata clipboard data clipboarddata clipboard get contents getcontents f g transfer instance fgtransferinstance imports data importsdata input element inputelement i compilation unit icompilationunit imports data importsdata is from same isfromsame input element inputelement combine operation adding imports i rewrite target irewritetarget target editor get adapter getadapter i rewrite target irewritetarget target target begin compound change begincompoundchange f operation target foperationtarget do operation dooperation f operation code foperationcode add imports addimports i compilation unit icompilationunit input element inputelement imports data importsdata core exception coreexception java plugin javaplugin log target target end compound change endcompoundchange f operation target foperationtarget do operation dooperation f operation code foperationcode clipboard dispose add imports addimports i compilation unit icompilationunit unit clipboard data clipboarddata data core exception coreexception import rewrite importrewrite rewrite stub utility stubutility create import rewrite createimportrewrite unit string imports data get type imports gettypeimports imports length string type imports type index of indexof java model util javamodelutil is version less than isversionlessthan unit get java project getjavaproject get option getoption java core javacore compiler compliance java core javacore version rewrite add import addimport type string static imports staticimports data get static imports getstaticimports static imports staticimports length string signature get simple name getsimplename static imports staticimports nls is field isfield ends with endswith is field isfield substring length string qualifier signature get qualifier getqualifier static imports staticimports rewrite add static import addstaticimport qualifier is field isfield get progress service getprogressservice busy cursor while busycursorwhile i runnable with progress irunnablewithprogress override i progress monitor iprogressmonitor monitor invocation target exception invocationtargetexception interrupted exception interruptedexception java model util javamodelutil apply edit applyedit unit rewrite rewrite imports rewriteimports monitor core exception coreexception invocation target exception invocationtargetexception invocation target exception invocationtargetexception throwable get cause getcause core exception coreexception core exception coreexception core exception coreexception status i status istatus error javaui plugin i java status constants ijavastatusconstants internal error javauimessages java plugin javaplugin internal error interrupted exception interruptedexception i progress service iprogressservice get progress service getprogressservice i editor part ieditorpart editor get text editor gettexteditor editor i workbench part site iworkbenchpartsite site editor get site getsite site editor get site getsite get adapter getadapter i workbench site progress service iworkbenchsiteprogressservice platformui get workbench getworkbench get progress service getprogressservice