copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal package view packageview java lang reflect invocation target exception invocationtargetexception java util array list arraylist java util hash set hashset java util iterator java util list java util org eclipse swt dnd dnd org eclipse swt dnd drag source adapter dragsourceadapter org eclipse swt dnd drag source event dragsourceevent org eclipse swt dnd file transfer filetransfer org eclipse swt dnd transfer org eclipse swt widgets shell org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i adaptable iadaptable org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime multi status multistatus org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse jface dialogs progress monitor dialog progressmonitordialog org eclipse jface operation i runnable with progress irunnablewithprogress org eclipse jface util transfer drag source listener transferdragsourcelistener org eclipse jface viewers i selection iselection org eclipse jface viewers i selection provider iselectionprovider org eclipse jface viewers i structured selection istructuredselection org eclipse actions workspace modify operation workspacemodifyoperation org eclipse jdt core i java element ijavaelement org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt internal corext util resources org eclipse jdt internal java plugin javaplugin org eclipse jdt internal util exception handler exceptionhandler org eclipse jdt internal viewsupport basic element labels basicelementlabels drag support drag ging dragging files folder packages view application file transfer drag adapter filetransferdragadapter drag source adapter dragsourceadapter transfer drag source listener transferdragsourcelistener i selection provider iselectionprovider f provider fprovider file transfer drag adapter filetransferdragadapter i selection provider iselectionprovider provider f provider fprovider provider is not null isnotnull f provider fprovider override transfer get transfer gettransfer file transfer filetransfer get instance getinstance override drag start dragstart drag source event dragsourceevent event event doit is drag able isdragable f provider fprovider get selection getselection is drag able isdragable i selection iselection i structured selection istructuredselection i structured selection istructuredselection selection i structured selection istructuredselection iterator iter selection iterator iter has next hasnext object element iter element i java element ijavaelement i java element ijavaelement j element jelement i java element ijavaelement element type j element jelement get element type getelementtype projects eclipse type i java element ijavaelement fragment root type i java element ijavaelement compilation unit type i java element ijavaelement type i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot j element jelement get ancestor getancestor i java element ijavaelement fragment root root root is archive isarchive root is external isexternal element i project iproject list i resource iresource resources convert into resources convertintoresources selection resources size selection size override drag set data dragsetdata drag source event dragsourceevent event list i resource iresource elements get resources getresources elements elements size event data event data get resource locations getresourcelocations elements string get resource locations getresourcelocations list i resource iresource resources resources getlocationosstrings resources to array toarray i resource iresource resources size override drag finished dragfinished drag source event dragsourceevent event event doit event detail dnd drop move http bugs eclipse org bugs bug cgi handle drop move handledropmove event event detail dnd drop target move handle refresh handlerefresh handle drop move handledropmove list i resource iresource elements get resources getresources elements elements size workspace modify operation workspacemodifyoperation workspace modify operation workspacemodifyoperation override execute i progress monitor iprogressmonitor monitor core exception coreexception monitor begin task begintask packages messages packagesmessages drag adapter dragadapter deleting elements size multi status multistatus status create multi status createmultistatus iterator i resource iresource iter elements iterator iter has next hasnext i resource iresource resource iter monitor sub task subtask basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath resource delete core exception coreexception status add get status getstatus monitor worked status isok core exception coreexception status monitor run operation runoperation handle refresh handlerefresh i resource iresource roots collect roots collectroots get resources getresources workspace modify operation workspacemodifyoperation workspace modify operation workspacemodifyoperation override execute i progress monitor iprogressmonitor monitor core exception coreexception monitor begin task begintask packages messages packagesmessages drag adapter dragadapter ref res hing refreshing roots size multi status multistatus status create multi status createmultistatus iterator i resource iresource iter roots iterator iter has next hasnext i resource iresource iter refresh local refreshlocal i resource iresource depth sub progress monitor subprogressmonitor monitor core exception coreexception status add get status getstatus status isok core exception coreexception status monitor run operation runoperation i resource iresource collect roots collectroots list i resource iresource elements i resource iresource roots hash set hashset iterator i resource iresource iter elements iterator iter has next hasnext i resource iresource resource iter i resource iresource parent resource get parent getparent parent roots add resource roots add parent roots list i resource iresource get resources getresources i selection iselection f provider fprovider get selection getselection i structured selection istructuredselection convert into resources convertintoresources i structured selection istructuredselection list i resource iresource convert into resources convertintoresources i structured selection istructuredselection selection list i resource iresource result array list arraylist selection size iterator iter selection iterator iter has next hasnext object iter i resource iresource i resource iresource i resource iresource i adaptable iadaptable i adaptable iadaptable get adapter getadapter i resource iresource local file system get location getlocation result add result multi status multistatus create multi status createmultistatus multi status multistatus java plugin javaplugin get plugin id getpluginid i status istatus packages messages packagesmessages drag adapter dragadapter problem run operation runoperation i runnable with progress irunnablewithprogress for k fork cancel able cancelable shell parent java plugin javaplugin get active workbench shell getactiveworkbenchshell progress monitor dialog progressmonitordialog parent for k fork cancel able cancelable invocation target exception invocationtargetexception string message packages messages packagesmessages drag adapter dragadapter problem string title packages messages packagesmessages drag adapter dragadapter problem title problemtitle exception handler exceptionhandler handle title message interrupted exception interruptedexception