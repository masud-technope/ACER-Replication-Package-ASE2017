copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring java io exception ioexception java input stream inputstream java input stream reader inputstreamreader java unsupported encoding exception unsupportedencodingexception java util hash map hashmap java util iterator java util map entry org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime status org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i file ifile org eclipse core resources i resource iresource org eclipse core file buf fers filebuffers file buffers filebuffers org eclipse core file buf fers filebuffers i text file buffer manager itextfilebuffermanager org eclipse core file buf fers filebuffers location kind locationkind org eclipse text edits replace edit replaceedit org eclipse ide undo resource description resourcedescription org eclipse ltk core refactoring change org eclipse ltk core refactoring composite change compositechange org eclipse ltk core refactoring null change nullchange org eclipse ltk core refactoring text file change textfilechange org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt internal corext core xt corext org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring reorg i package fragment root manipulation query ipackagefragmentrootmanipulationquery org eclipse jdt internal corext refactoring util java element util javaelementutil org eclipse jdt internal corext util messages org eclipse jdt java element labels javaelementlabels org eclipse jdt internal java plugin javaplugin org eclipse jdt internal viewsupport basic element labels basicelementlabels delete package fragment root change deletepackagefragmentrootchange abstract delete change abstractdeletechange string f handle fhandle i package fragment root manipulation query ipackagefragmentrootmanipulationquery f update classpath query fupdateclasspathquery delete package fragment root change deletepackagefragmentrootchange i package fragment root ipackagefragmentroot root is execute change isexecutechange i package fragment root manipulation query ipackagefragmentrootmanipulationquery update classpath query updateclasspathquery is not null isnotnull root is true istrue root is external isexternal f handle fhandle root get handle identifier gethandleidentifier f update classpath query fupdateclasspathquery update classpath query updateclasspathquery is execute change isexecutechange don check read resources prompt user dialog confirm deletion read resource change set validation method setvalidationmethod validate dirty set validation method setvalidationmethod validate dirty validate read override string get name getname string root name rootname java element labels javaelementlabels get element label getelementlabel get root getroot java element labels javaelementlabels messages format refactoring core messages refactoringcoremessages delete package fragment root change deletepackagefragmentrootchange delete root name rootname override object get modified element getmodifiedelement get root getroot override i resource iresource get modified resource getmodifiedresource get root getroot get resource getresource i package fragment root ipackagefragmentroot get root getroot i package fragment root ipackagefragmentroot java core javacore create f handle fhandle override change do delete dodelete i progress monitor iprogressmonitor core exception coreexception confirm delete if referenced confirmdeleteifreferenced null change nullchange resource update flags resourceupdateflags i resource iresource history j core update flags jcoreupdateflags i package fragment root ipackagefragmentroot originating project classpath i package fragment root ipackagefragmentroot ref erring referring projects classpath nls begin task begintask i package fragment root ipackagefragmentroot root get root getroot i resource iresource root resource rootresource root get resource getresource composite change compositechange result composite change compositechange get name getname resource description resourcedescription root description rootdescription resource description resourcedescription from resource fromresource root resource rootresource i java project ijavaproject referencing projects referencingprojects java element util javaelementutil get ref erencing projects getreferencingprojects root hash map hashmap i file ifile string classpath files contents classpathfilescontents hash map hashmap referencing projects referencingprojects length i java project ijavaproject java project javaproject referencing projects referencingprojects nls i file ifile classpath file classpathfile java project javaproject get project getproject get file getfile classpath classpath file classpathfile exists classpath files contents classpathfilescontents classpath file classpathfile get file contents getfilecontents classpath file classpathfile root delete resource update flags resourceupdateflags j core update flags jcoreupdateflags sub progress monitor subprogressmonitor root description rootdescription record state from history recordstatefromhistory root resource rootresource sub progress monitor subprogressmonitor iterator entry i file ifile string iterator classpath files contents classpathfilescontents entry set entryset iterator iterator has next hasnext entry i file ifile string entry iterator i file ifile file entry get key getkey string contents entry get value getvalue restore time stamps sort undo text file change undotextfilechange text file change textfilechange classpath undo classpathundo text file change textfilechange messages format refactoring core messages refactoringcoremessages delete package fragment root change deletepackagefragmentrootchange restore file basic element labels basicelementlabels get path label getpathlabel file get full path getfullpath file classpath undo classpathundo set edit setedit replace edit replaceedit get file length getfilelength file contents result add classpath undo classpathundo result add undo delete resource change undodeleteresourcechange root description rootdescription result string get file contents getfilecontents i file ifile file core exception coreexception i text file buffer manager itextfilebuffermanager manager file buffers filebuffers get text file buffer manager gettextfilebuffermanager i path ipath path file get full path getfullpath manager connect path location kind locationkind ifile null progress monitor nullprogressmonitor manager get text file buffer gettextfilebuffer path location kind locationkind ifile get document getdocument manager disconnect path location kind locationkind ifile null progress monitor nullprogressmonitor get file length getfilelength i file ifile file core exception coreexception file buf fers buffers sync point input stream inputstream contents file get contents getcontents input stream reader inputstreamreader reader reader input stream reader inputstreamreader contents file get charset getcharset unsupported encoding exception unsupportedencodingexception java plugin javaplugin log reader input stream reader inputstreamreader contents reader skip integer max io exception ioexception core exception coreexception status i status istatus error core xt corext get plugin id getpluginid get message getmessage reader close io exception ioexception confirm delete if referenced confirmdeleteifreferenced java model exception javamodelexception i package fragment root ipackagefragmentroot root get root getroot source folders don root is archive isarchive root is external isexternal f update classpath query fupdateclasspathquery i java project ijavaproject referencing projects referencingprojects java element util javaelementutil get ref erencing projects getreferencingprojects get root getroot referencing projects referencingprojects length f update classpath query fupdateclasspathquery confirm manipulation confirmmanipulation get root getroot referencing projects referencingprojects