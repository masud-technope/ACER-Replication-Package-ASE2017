copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal model java util array list arraylist java util hash set hashset java util iterator java util linked list linkedlist java util list java util org eclipse team core diff fast diff filter fastdifffilter org eclipse team core diff i diff idiff org eclipse team core diff i diff change event idiffchangeevent org eclipse team core diff i diff tree idifftree org eclipse team core diff i diff visitor idiffvisitor org eclipse team core mapping i resource diff tree iresourcedifftree org eclipse team core mapping i synchronization context isynchronizationcontext org eclipse team core mapping i synchronization scope isynchronizationscope org eclipse team core mapping provider resource diff tree resourcedifftree org eclipse swt custom busy indicator busyindicator org eclipse swt widgets control org eclipse swt widgets tree org eclipse swt widgets tree item treeitem org eclipse core runtime core exception coreexception org eclipse core runtime i adaptable iadaptable org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources resources plugin resourcesplugin org eclipse core resources mapping resource mapping resourcemapping org eclipse core resources mapping resource mapping context resourcemappingcontext org eclipse core resources mapping resource traversal resourcetraversal org eclipse jface viewers i tree content provider itreecontentprovider org eclipse jface viewers tree viewer treeviewer org eclipse navigator i pipelined tree content provider ipipelinedtreecontentprovider org eclipse navigator pipelined shape modification pipelinedshapemodification org eclipse navigator pipelined viewer update pipelinedviewerupdate org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring descriptor proxy refactoringdescriptorproxy org eclipse ltk core refactoring history refactoring history refactoringhistory org eclipse ltk refactoring model abstract synchronization content provider abstractsynchronizationcontentprovider org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt internal corext util java element resource mapping javaelementresourcemapping org eclipse jdt internal java plugin javaplugin java aware synchronization content provider java synchronization content provider javasynchronizationcontentprovider abstract synchronization content provider abstractsynchronizationcontentprovider i pipelined tree content provider ipipelinedtreecontentprovider ref actorings refactorings folder string refactoring folder ref actorings refactorings nls returns diffs element param context synchronization context param element element array diffs i diff idiff get d iffs getdiffs i synchronization context isynchronizationcontext context object element context get diff tree getdifftree get d iffs getdiffs get resource traversals getresourcetraversals element returns resource mapping element param element element resource mapping resource mapping resource mapping resourcemapping get resource mapping getresourcemapping object element element i java element ijavaelement java element resource mapping javaelementresourcemapping create i java element ijavaelement element element i adaptable iadaptable i adaptable iadaptable adaptable i adaptable iadaptable element object adapted adaptable get adapter getadapter resource mapping resourcemapping adapted resource mapping resourcemapping resource mapping resourcemapping adapted returns resource traversals element param element element resource traversals resource traversals resource traversal resourcetraversal get resource traversals getresourcetraversals object element resource mapping resourcemapping mapping get resource mapping getresourcemapping element mapping mapping get traversals gettraversals resource mapping context resourcemappingcontext local context null progress monitor nullprogressmonitor core exception coreexception exception java plugin javaplugin log exception resource traversal resourcetraversal content provider code code i tree content provider itreecontentprovider f content provider fcontentprovider model root code code object f model root fmodelroot returns java element project param project project code code java element code code project java project i java project ijavaproject as java project asjavaproject i project iproject project project project get description getdescription has nature hasnature java core javacore nature java core javacore create project core exception coreexception exception project is accessible isaccessible java plugin javaplugin log exception converts shape modification java elements param modification shape modification convert convert to java elements converttojavaelements pipelined shape modification pipelinedshapemodification modification object parent modification get parent getparent parent i resource iresource i java element ijavaelement project as java project asjavaproject i resource iresource parent get project getproject project modification get children getchildren clear parent i synchronization context isynchronizationcontext i java element ijavaelement result hash set hashset iterator i adaptable iadaptable iterator modification get children getchildren iterator iterator has next hasnext object element iterator element i project iproject i java element ijavaelement project as java project asjavaproject i project iproject element project iterator remove result add project modification get children getchildren add all addall result converts viewer update java elements param update viewer update convert code code elements converted code code convert to java elements converttojavaelements pipelined viewer update pipelinedviewerupdate update i java element ijavaelement result hash set hashset iterator i adaptable iadaptable iterator update get refresh targets getrefreshtargets iterator iterator has next hasnext object element iterator element i project iproject i java element ijavaelement project as java project asjavaproject i project iproject element project iterator remove result add project update get refresh targets getrefreshtargets add all addall result result is empty isempty override diffs changed diffschanged i diff change event idiffchangeevent event i progress monitor iprogressmonitor monitor sync exec syncexec runnable override handle change handlechange event get viewer getviewer get control getcontrol returns existing projects add itions additions removals deletions param event event projects i java project ijavaproject get changed projects getchangedprojects i diff change event idiffchangeevent event i java project ijavaproject result hash set hashset i diff idiff event get changes getchanges length i resource iresource resource resource diff tree resourcedifftree get resource for getresourcefor resource i java project ijavaproject project as java project asjavaproject resource get project getproject project result add project i diff idiff add itions additions event get add itions getadditions add itions additions length i resource iresource resource resource diff tree resourcedifftree get resource for getresourcefor add itions additions resource i java project ijavaproject project as java project asjavaproject resource get project getproject project result add project i path ipath removals event get removals getremovals removals length i path ipath path removals path segment count segmentcount i project iproject project resources plugin resourcesplugin get workspace getworkspace get root getroot get project getproject path segment projects exist project exists i java project ijavaproject java project javaproject as java project asjavaproject project get project getproject java project javaproject result add java project javaproject result to array toarray i java project ijavaproject result size override object get children in context getchildrenincontext i synchronization context isynchronizationcontext context object parent object children object elements get children in context getchildrenincontext context parent children parent i package fragment ipackagefragment get package fragment children getpackagefragmentchildren context parent elements parent i package fragment root ipackagefragmentroot get package fragment root children getpackagefragmentrootchildren context parent elements parent i java project ijavaproject get java project children getjavaprojectchildren context parent elements parent refactoring history refactoringhistory refactoring history refactoringhistory parent get descriptors getdescriptors source folder filtered get filtered elements getfilteredelements parent elements returns filtered elements param parent parent element param children child elements filtered elements object get filtered elements getfilteredelements object parent object children list object result array list arraylist children length children length children i folder ifolder java core javacore create i folder ifolder children i package fragment root ipackagefragmentroot result add children result add children result to array toarray override i tree content provider itreecontentprovider get delegate content provider getdelegatecontentprovider f content provider fcontentprovider f content provider fcontentprovider java model content provider javamodelcontentprovider f content provider fcontentprovider returns projects diff tree deleted workspace param event event deleted projects i project iproject get deleted projects getdeletedprojects i diff change event idiffchangeevent event i project iproject result hash set hashset i path ipath deletions event get removals getremovals deletions length i path ipath path deletions path segment count segmentcount i project iproject project resources plugin resourcesplugin get workspace getworkspace get root getroot get project getproject path segment project is accessible isaccessible result add project result content provider overrides resource content provider method invoked resource content provider disabled java projects root view inherit doc inheritdoc override object get elements getelements object parent parent i synchronization context isynchronizationcontext resource projects context parent get model root getmodelroot get elements getelements parent returns java project children current scope param context synchronization context param parent parent element param children child elements java project children object get java project children getjavaprojectchildren i synchronization context isynchronizationcontext context object parent object children linked list linkedlist object list linked list linkedlist children length children i package fragment ipackagefragment i package fragment ipackagefragment fragment i package fragment ipackagefragment children get children getchildren fragment length check folder fragment children bug children i folder ifolder i folder ifolder folder i folder ifolder children get children getchildren folder length list add children i resource iresource resource java model provider javamodelprovider get resource getresource parent resource i resource diff tree iresourcedifftree tree context get diff tree getdifftree i resource iresource members tree members resource members length i resource iresource child members is visible isvisible context child has phantom folder hasphantomfolder tree child contains as resource containsasresource list child add phantom resources visible list add child members i folder ifolder i folder ifolder folder i folder ifolder members folder get name getname equals refactoring folder refactoring history refactoringhistory history get refactorings getrefactorings context i project iproject resource history is empty isempty list remove folder list add first addfirst history list to array toarray object list size contains as resource containsasresource list object list i resource iresource child iterator object iter list iterator iter has next hasnext object element iter child equals element element i java element ijavaelement i java element ijavaelement java child javachild i java element ijavaelement element child equals java child javachild get corresponding resource getcorrespondingresource java model exception javamodelexception has phantom folder hasphantomfolder i resource diff tree iresourcedifftree tree i resource iresource child child exists tree accept child get full path getfullpath i diff visitor idiffvisitor override visit i diff idiff delta i resource iresource tree resource treeresource resource diff tree resourcedifftree get resource for getresourcefor delta tree resource treeresource get type gettype i resource iresource file tree resource treeresource get parent getparent exists i resource iresource depth infinite override string get model provider id getmodelproviderid java model provider javamodelprovider java model provider override object get model root getmodelroot f model root fmodelroot f model root fmodelroot java core javacore create resources plugin resourcesplugin get workspace getworkspace get root getroot f model root fmodelroot returns fragment children current scope param context synchronization context param parent parent element param children child elements fragment children object get package fragment children getpackagefragmentchildren i synchronization context isynchronizationcontext context object parent object children object hash set hashset children length add children i package fragment ipackagefragment package fragment packagefragment i package fragment ipackagefragment parent i resource iresource resource package fragment packagefragment get resource getresource resource i resource diff tree iresourcedifftree tree context get diff tree getdifftree i resource iresource members tree members resource members length type members get type gettype type i resource iresource file i diff idiff diff tree get diff getdiff members diff is visible isvisible diff is in scope isinscope context get scope getscope parent members i java element ijavaelement element java core javacore create members element package fragment packagefragment is default package isdefaultpackage add members add element to array toarray object size returns fragment root children current scope param context synchronization context param parent parent element param children child elements fragment root children object get package fragment root children getpackagefragmentrootchildren i synchronization context isynchronizationcontext context object parent object children object hash set hashset children length children i package fragment ipackagefragment i package fragment ipackagefragment fragment i package fragment ipackagefragment children fragment is open isopen get children getchildren fragment length don add children add children i resource iresource resource java model provider javamodelprovider get resource getresource parent resource i resource diff tree iresourcedifftree tree context get diff tree getdifftree i resource iresource members tree members resource members length type members get type gettype contained is in scope isinscope context get scope getscope parent members visible is visible isvisible context members type i resource iresource file contained visible file compilation unit add compilation units children packages don i java element ijavaelement element java core javacore create i file ifile members element add members type i resource iresource folder contained visible tree get diff getdiff members folder sync add i java element ijavaelement element java core javacore create members element add element type i resource iresource folder folder java elements add i folder ifolder folder i folder ifolder members tree accept folder get full path getfullpath i diff visitor idiffvisitor override visit i diff idiff diff is visible isvisible diff i resource iresource current tree get resource getresource diff current kind current get type gettype kind i resource iresource file i java element ijavaelement element java core javacore create current get parent getparent element add element i java element ijavaelement element java core javacore create current element add element i resource iresource depth infinite to array toarray object size children override get pipelined children getpipelinedchildren object parent children parent i synchronization context isynchronizationcontext context root resource content provider returns projects direct children replace projects java projects i java project ijavaproject i java element ijavaelement result hash set hashset children size iterator object iterator children iterator iterator has next hasnext object element iterator element i project iproject i java element ijavaelement java as java project asjavaproject i project iproject element java iterator remove result add java element i folder ifolder i folder ifolder folder i folder ifolder element i java element ijavaelement java element javaelement java core javacore create folder folder java element javaelement i package fragment root ipackagefragmentroot iterator remove children add all addall result parent i synchronization scope isynchronizationscope root scope java model provider model providers root viewer children add get model provider getmodelprovider parent i folder ifolder don iterator object iterator children iterator iterator has next hasnext object element iterator element i folder ifolder i folder ifolder folder i folder ifolder element i java element ijavaelement java element javaelement java core javacore create folder java element javaelement i package fragment root ipackagefragmentroot iterator remove override get pipelined elements getpipelinedelements object element elements get pipelined children getpipelinedchildren element elements override object get pipelined parent getpipelinedparent object element object parent element i java element ijavaelement get parent getparent element parent override resource traversal resourcetraversal get traversals gettraversals i synchronization context isynchronizationcontext context object object get resource traversals getresourcetraversals object returns visible projects visible projects i java project ijavaproject get visible projects getvisibleprojects tree item treeitem children tree viewer treeviewer get viewer getviewer get tree gettree get items getitems i java project ijavaproject result hash set hashset children length object data children get data getdata data i java project ijavaproject result add i java project ijavaproject data result handles diff change event param event event handle change handlechange i diff change event idiffchangeevent event i java project ijavaproject existing get visible projects getvisibleprojects existing open projects determine project add remove refresh i java project ijavaproject changed get changed projects getchangedprojects event list i java project ijavaproject ref res hes refreshes array list arraylist changed length list i java project ijavaproject add itions additions array list arraylist changed length list i java project ijavaproject removals array list arraylist changed length changed length i java project ijavaproject project changed has visible changes hasvisiblechanges event get tree gettree project existing project ref res hes refreshes add project add itions additions add project removals add project remove java projects correspond deleted closed projects i project iproject removed get deleted projects getdeletedprojects event iterator i java project ijavaproject iterator existing iterator iterator has next hasnext i java project ijavaproject element iterator removed element get resource getresource removals add element removals is empty isempty add itions additions is empty isempty ref res hes refreshes is empty isempty tree viewer treeviewer viewer tree viewer treeviewer get viewer getviewer tree tree viewer get tree gettree tree set redraw setredraw add itions additions is empty isempty viewer add viewer get input getinput add itions additions to array toarray removals is empty isempty viewer remove viewer get input getinput removals to array toarray ref res hes refreshes is empty isempty iterator i java project ijavaproject iter ref res hes refreshes iterator iter has next hasnext viewer refresh iter tree set redraw setredraw override has children haschildren object element element i compilation unit icompilationunit element i file ifile element refactoring descriptor proxy refactoringdescriptorproxy element refactoring descriptor refactoringdescriptor has children haschildren element returns element children current scope param scope synchronization scope param element element param resource resource code code children code code has children in scope haschildreninscope i synchronization scope isynchronizationscope scope object element i resource iresource resource i resource iresource roots scope get roots getroots i path ipath path resource get full path getfullpath element i package fragment ipackagefragment roots length path equals roots get full path getfullpath remove last segments removelastsegments roots length path is prefix of isprefixof roots get full path getfullpath java project visible param tree diff tree param project java project code code visible code code has visible changes hasvisiblechanges i diff tree idifftree tree i java project ijavaproject project tree has matching d iffs hasmatchingdiffs project get resource getresource get full path getfullpath fast diff filter fastdifffilter override select i diff idiff diff is visible isvisible diff override pipelined shape modification pipelinedshapemodification int ercept add interceptadd pipelined shape modification pipelinedshapemodification modification convert to java elements converttojavaelements modification modification override int ercept refresh interceptrefresh pipelined viewer update pipelinedviewerupdate update convert to java elements converttojavaelements update override pipelined shape modification pipelinedshapemodification int ercept remove interceptremove pipelined shape modification pipelinedshapemodification modification convert to java elements converttojavaelements modification modification override int ercept update interceptupdate pipelined viewer update pipelinedviewerupdate an update synchronization anupdatesynchronization convert to java elements converttojavaelements an update synchronization anupdatesynchronization override is in scope isinscope i synchronization scope isynchronizationscope scope object parent object element i resource iresource resource java model provider javamodelprovider get resource getresource element resource scope resource has children in scope haschildreninscope scope element resource executes runnable param runnable runnable param control control sync exec syncexec runnable runnable control control control control is disposed isdisposed control get display getdisplay sync exec syncexec runnable override control is disposed isdisposed busy indicator busyindicator show while showwhile control get display getdisplay runnable