copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext java util array list arraylist java util iterator java util list org eclipse core runtime core exception coreexception org eclipse core runtime i status istatus org eclipse text edits text edit group texteditgroup org eclipse jdt core i java project ijavaproject org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast visitor astvisitor org eclipse jdt core dom assignment org eclipse jdt core dom block org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom enhanced for statement enhancedforstatement org eclipse jdt core dom expression org eclipse jdt core dom field access fieldaccess org eclipse jdt core dom for statement forstatement org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom modifier org eclipse jdt core dom org eclipse jdt core dom null literal nullliteral org eclipse jdt core dom simple name simplename org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom statement org eclipse jdt core dom type org eclipse jdt core dom variable declaration expression variabledeclarationexpression org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom modifier rewrite modifierrewrite org eclipse jdt internal corext refactoring structure compilation unit rewrite compilationunitrewrite org eclipse jdt internal corext refactoring structure import remove r importremover org eclipse jdt internal corext refactoring util tight source range computer tightsourcerangecomputer org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util messages org eclipse jdt internal dialogs status info statusinfo org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal viewsupport basic element labels basicelementlabels operation convert loops iter ables iterables enhanced loops convert iterable loop operation convertiterableloopoperation convert loop operation convertloopoperation status info statusinfo semantic change warning status status info statusinfo i status istatus warning fix messages fixmessages convert iterable loop operation convertiterableloopoperation semantic change warning semanticchangewarning returns supertype type qualified param binding binding type param qualified supertype supertype code code i type binding itypebinding get super type getsupertype i type binding itypebinding binding string binding is array isarray binding is primitive isprimitive binding get qualified name getqualifiedname starts with startswith binding i type binding itypebinding type binding get superclass getsuperclass type i type binding itypebinding result get super type getsupertype type result result i type binding itypebinding types binding get interfaces getinterfaces types length i type binding itypebinding result get super type getsupertype types result result element variable assigned statement f assigned fassigned binding element variable i binding ibinding f element variable felementvariable node iterable expression expression f expression fexpression type binding iterable expression i binding ibinding f iterable fiterable iterator method invoked code code f this fthis binding iterator variable i variable binding ivariablebinding f iterator variable fiteratorvariable nodes element variable occurrences list expression f occurrences foccurrences array list arraylist enhanced for statement enhancedforstatement f enhanced for loop fenhancedforloop f make final fmakefinal convert iterable loop operation convertiterableloopoperation for statement forstatement statement statement string convert iterable loop operation convertiterableloopoperation for statement forstatement statement string used names usednames make final makefinal statement used names usednames f make final fmakefinal make final makefinal override string get introduce d variable name getintroducedvariablename f element variable felementvariable f element variable felementvariable get name getname get variable name proposals getvariablenameproposals string get variable name proposals getvariablenameproposals string variable names variablenames get used variable names getusedvariablenames string element suggestions elementsuggestions stub utility stubutility get local name suggestions getlocalnamesuggestions get java project getjavaproject loop element identifier variable names variablenames i type binding itypebinding binding f iterator variable fiteratorvariable get type gettype binding binding is parameterized type isparameterizedtype string type binding get type arguments gettypearguments get name getname string type suggestions typesuggestions stub utility stubutility get local name suggestions getlocalnamesuggestions get java project getjavaproject type variable names variablenames string result string element suggestions elementsuggestions length type suggestions typesuggestions length system arraycopy type suggestions typesuggestions result type suggestions typesuggestions length system arraycopy element suggestions elementsuggestions result type suggestions typesuggestions length element suggestions elementsuggestions length result element suggestions elementsuggestions i java project ijavaproject get java project getjavaproject get root getroot get java element getjavaelement get java project getjavaproject compilation unit compilationunit get root getroot compilation unit compilationunit get for statement getforstatement get root getroot returns expression enhanced statement param rewrite ast rewrite expression node code code expression get expression getexpression ast rewrite astrewrite rewrite f this fthis rewrite getast new this expression newthisexpression f expression fexpression method invocation methodinvocation method invocation methodinvocation rewrite create move target createmovetarget f expression fexpression expression ast node astnode copy subtree copysubtree rewrite getast f expression fexpression returns type elements returned iterator param iterator iterator type binding code code element type i type binding itypebinding get element type getelementtype i type binding itypebinding iterator iterator i type binding itypebinding bindings iterator get type arguments gettypearguments bindings length i type binding itypebinding arg bindings arg is wildcard type iswildcardtype arg ast res olving astresolving normalize wildcard type normalizewildcardtype arg get root getroot getast arg nls get root getroot getast resolve well known type resolvewellknowntype java lang object override rewriteast compilation unit rewrite compilationunitrewrite cu rewrite curewrite linked proposal model linkedproposalmodel position groups positiongroups core exception coreexception text edit group texteditgroup group create text edit group createtexteditgroup fix messages fixmessages java convert t o enhanced for loop converttoenhancedforloop description cu rewrite curewrite ast rewrite astrewrite ast rewrite astrewrite cu rewrite curewrite getastrewrite tight source range computer tightsourcerangecomputer range computer rangecomputer ast rewrite astrewrite get extended source range computer getextendedsourcerangecomputer tight source range computer tightsourcerangecomputer range computer rangecomputer tight source range computer tightsourcerangecomputer ast rewrite astrewrite get extended source range computer getextendedsourcerangecomputer range computer rangecomputer tight source range computer tightsourcerangecomputer range computer rangecomputer add tight source node addtightsourcenode get for statement getforstatement ast rewrite astrewrite set target source range computer settargetsourcerangecomputer range computer rangecomputer statement statement convert cu rewrite curewrite group position groups positiongroups ast rewrite astrewrite replace get for statement getforstatement statement group override statement convert compilation unit rewrite compilationunitrewrite cu rewrite curewrite text edit group texteditgroup group linked proposal model linkedproposalmodel position groups positiongroups core exception coreexception ast ast cu rewrite curewrite getast ast rewrite astrewrite ast rewrite astrewrite cu rewrite curewrite getastrewrite import rewrite importrewrite import rewrite importrewrite cu rewrite curewrite get import rewrite getimportrewrite import remove r importremover remove r remover cu rewrite curewrite get import remove r getimportremover f enhanced for loop fenhancedforloop ast new enhanced for statement newenhancedforstatement string names get variable name proposals getvariablenameproposals string f element variable felementvariable f element variable felementvariable get name getname names linked proposal position group linkedproposalpositiongroup position groups positiongroups get position group getpositiongroup f element variable felementvariable add proposal addproposal names length add proposal addproposal names statement body get for statement getforstatement get body getbody body list rewrite listrewrite list body block list ast rewrite astrewrite get list rewrite getlistrewrite body block statements property iterator expression iterator f occurrences foccurrences iterator iterator has next hasnext statement parent statement ast nodes astnodes get parent getparent iterator statement parent list get rewritten list getrewrittenlist parent list remove parent remove r remover register removed node registerremovednode parent list string text body accept ast visitor astvisitor replace expression expression simple name simplename node ast new simple name newsimplename text ast rewrite astrewrite replace expression node group remove r remover register removed node registerremovednode expression add position addposition ast rewrite astrewrite track node override visit method invocation methodinvocation node i method binding imethodbinding binding node resolve method binding resolvemethodbinding nls nls binding binding get name getname equals binding get name getname equals next element nextelement expression expression node get expression getexpression expression i binding ibinding result expression resolve binding resolvebinding result result equals f iterator variable fiteratorvariable replace node expression field access fieldaccess i binding ibinding result field access fieldaccess expression resolve field binding resolvefieldbinding result result equals f iterator variable fiteratorvariable replace node visit node override visit simple name simplename node f element variable felementvariable i binding ibinding binding node resolve binding resolvebinding binding binding equals f element variable felementvariable statement parent statement ast nodes astnodes get parent getparent node statement parent list list get rewritten list getrewrittenlist parent add position addposition ast rewrite astrewrite track node f enhanced for loop fenhancedforloop set body setbody get body getbody cu rewrite curewrite group position groups positiongroups single variable declaration singlevariabledeclaration declaration ast new single variable declaration newsinglevariabledeclaration simple name simplename simple ast new simple name newsimplename add position addposition ast rewrite astrewrite track simple declaration set name setname simple i type binding itypebinding element type elementtype get element type getelementtype f iterator variable fiteratorvariable get type gettype type import type importtype import type importtype element type elementtype get for statement getforstatement import rewrite importrewrite get root getroot remove r remover register added imports registeraddedimports import type importtype declaration set type settype import type importtype f make final fmakefinal modifier rewrite modifierrewrite create ast rewrite astrewrite declaration set modifiers setmodifiers modifier group remove r remover register added import registeraddedimport element type elementtype get qualified name getqualifiedname f enhanced for loop fenhancedforloop set parameter setparameter declaration f enhanced for loop fenhancedforloop set expression setexpression get expression getexpression ast rewrite astrewrite iterator expression iterator get for statement getforstatement initializers iterator iterator has next hasnext ast node astnode node iterator node variable declaration expression variabledeclarationexpression variable declaration expression variabledeclarationexpression variable declaration expression variabledeclarationexpression variable declaration expression variabledeclarationexpression node remove r remover register removed node registerremovednode variable declaration expression variabledeclarationexpression get type gettype remove r remover register removed node registerremovednode node iterator expression iterator get for statement getforstatement update rs updaters iterator iterator has next hasnext ast node astnode node iterator remove r remover register removed node registerremovednode node f enhanced for loop fenhancedforloop proposal applicable status severity code i status istatus error code applicable override i status istatus satisfies preconditions satisfiespreconditions i status istatus result status resultstatus status info statusinfo status java model util javamodelutil or higher orhigher get java project getjavaproject result status resultstatus check expression condition checkexpressioncondition result status resultstatus get severity getseverity i status istatus error result status resultstatus list expression update expressions updateexpressions get for statement getforstatement update rs updaters update expressions updateexpressions size result status resultstatus status info statusinfo i status istatus warning messages format fix messages fixmessages convert iterable loop operation convertiterableloopoperation remove update expression removeupdateexpression warning basic element labels basicelementlabels get java code string getjavacodestring update expressions updateexpressions to string tostring update expressions updateexpressions size result status resultstatus status info statusinfo i status istatus warning fix messages fixmessages convert iterable loop operation convertiterableloopoperation remove update expressions removeupdateexpressions warning iterator expression get for statement getforstatement initializers iterator has next hasnext expression initializer initializer variable declaration expression variabledeclarationexpression variable declaration expression variabledeclarationexpression declaration variable declaration expression variabledeclarationexpression initializer list variable declaration fragment variabledeclarationfragment fragments declaration fragments fragments size nls status info statusinfo nls i status istatus error nls variable declaration fragment variabledeclarationfragment fragment fragments fragment accept ast visitor astvisitor override visit method invocation methodinvocation node i method binding imethodbinding binding node resolve method binding resolvemethodbinding binding i type binding itypebinding type binding get return type getreturntype type string qualified type get qualified name getqualifiedname qualified starts with startswith java util enumeration nls nls qualified starts with startswith nls nls java util iterator expression qualifier node get expression getexpression qualifier i type binding itypebinding resolved qualifier resolve type binding resolvetypebinding resolved i type binding itypebinding nls iterable nls get super type getsupertype resolved java lang iterable iterable f expression fexpression qualifier f iterable fiterable resolved i type binding itypebinding declaring binding get declaring class getdeclaringclass declaring i type binding itypebinding nls super binding superbinding nls get super type getsupertype declaring java lang iterable super binding superbinding f iterable fiterable super binding superbinding f this fthis override visit variable declaration fragment variabledeclarationfragment node i variable binding ivariablebinding binding node resolve binding resolvebinding binding i type binding itypebinding type binding get type gettype type i type binding itypebinding iterator get super type getsupertype nls type nls java util iterator iterator f iterator variable fiteratorvariable binding iterator get super type getsupertype nls type nls java util enumeration iterator f iterator variable fiteratorvariable binding statement statement get for statement getforstatement get body getbody other invocation then next otherinvocationthennext next invocation count nextinvocationcount statement f iterator variable fiteratorvariable i type binding itypebinding element type elementtype get element type getelementtype f iterator variable fiteratorvariable get type gettype statement accept ast visitor astvisitor override visit simple name simplename node i binding ibinding node binding nodebinding node resolve binding resolvebinding f element variable felementvariable f element variable felementvariable equals node binding nodebinding f make final fmakefinal node binding nodebinding f iterator variable fiteratorvariable node get location in parent getlocationinparent method invocation methodinvocation expression property method invocation methodinvocation invocation method invocation methodinvocation node get parent getparent string invocation get name getname get identifier getidentifier nls nls equals nls nls equals next element nextelement next invocation count nextinvocationcount expression left invocation get location in parent getlocationinparent assignment hand side property left assignment invocation get parent getparent get left hand side getlefthandside invocation get location in parent getlocationinparent variable declaration fragment variabledeclarationfragment initializer property left variable declaration fragment variabledeclarationfragment invocation get parent getparent get name getname visit element variable visitelementvariable left other invocation then next otherinvocationthennext visit element variable visitelementvariable expression node node i type binding itypebinding binding node resolve type binding resolvetypebinding binding element type elementtype equals binding node node i binding ibinding result resolve binding resolvebinding result f occurrences foccurrences add node f element variable felementvariable result node field access fieldaccess field access fieldaccess access field access fieldaccess node i binding ibinding result access resolve field binding resolvefieldbinding result f occurrences foccurrences add node f element variable felementvariable result other invocation then next otherinvocationthennext error status next invocation count nextinvocationcount error status f element variable felementvariable statement accept ast visitor astvisitor override visit variable declaration fragment variabledeclarationfragment node node get initializer getinitializer null literal nullliteral simple name simplename node get name getname element type elementtype equals resolve type binding resolvetypebinding f element variable felementvariable equals resolve binding resolvebinding f occurrences foccurrences add ast node astnode root get for statement getforstatement get root getroot root root accept ast visitor astvisitor override visit for statement forstatement node override visit simple name simplename node i binding ibinding binding node resolve binding resolvebinding binding binding equals f element variable felementvariable f assigned fassigned f expression fexpression f this fthis f iterable fiterable f iterator variable fiteratorvariable f assigned fassigned result status resultstatus error status i status istatus check expression condition checkexpressioncondition expression expression get for statement getforstatement get expression getexpression expression method invocation methodinvocation semantic change warning status method invocation methodinvocation invoc method invocation methodinvocation expression i method binding imethodbinding method binding methodbinding invoc resolve method binding resolvemethodbinding method binding methodbinding error status i type binding itypebinding declaring class declaringclass method binding methodbinding get declaring class getdeclaringclass declaring class declaringclass error status string qualified name qualifiedname declaring class declaringclass get qualified name getqualifiedname string method name methodname invoc get name getname get identifier getidentifier nls qualified name qualifiedname starts with startswith java util enumeration nls method name methodname equals has more elements hasmoreelements semantic change warning status nls qualified name qualifiedname starts with startswith java util iterator nls method name methodname equals has next hasnext semantic change warning status check iterator condition checkiteratorcondition semantic change warning status status info statusinfo status i status istatus check iterator condition checkiteratorcondition list expression initializers get for statement getforstatement initializers initializers size semantic change warning status expression expression initializers expression variable declaration expression variabledeclarationexpression semantic change warning status variable declaration expression variabledeclarationexpression declaration variable declaration expression variabledeclarationexpression expression list variable declaration fragment variabledeclarationfragment variable declaration fragments variabledeclarationfragments declaration fragments variable declaration fragments variabledeclarationfragments size semantic change warning status variable declaration fragment variabledeclarationfragment declaration fragment declarationfragment variable declaration fragments variabledeclarationfragments expression initializer declaration fragment declarationfragment get initializer getinitializer initializer method invocation methodinvocation semantic change warning status method invocation methodinvocation method invocation methodinvocation method invocation methodinvocation initializer string method name methodname method invocation methodinvocation get name getname get identifier getidentifier nls iterator equals method name methodname method invocation methodinvocation arguments size semantic change warning status status info statusinfo status