copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring java util array list arraylist java util arrays java util comparator java util iterator java util list java util map org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse jdt core flags org eclipse jdt core i buffer ibuffer org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i field ifield org eclipse jdt core i import container iimportcontainer org eclipse jdt core i java element ijavaelement org eclipse jdt core i source reference isourcereference org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt internal corext refactoring reorg reorg utils reorgutils org eclipse jdt internal corext refactoring structure ast node search util astnodesearchutil org eclipse jdt internal corext util strings org eclipse jdt internal java editor javaeditor ast provider astprovider tuple source element type i java element ijavaelement org eclipse jdt core i source reference isourcereference type d source typedsource source tuple sourcetuple source tuple sourcetuple i compilation unit icompilationunit unit unit unit i compilation unit icompilationunit unit compilation unit compilationunit node string f source fsource f type ftype type d source typedsource string source type is not null isnotnull source is true istrue can create for type cancreatefortype type f source fsource source f type ftype type type d source typedsource create string source type source can create for type cancreatefortype type type d source typedsource source type string get source getsource f source fsource get type gettype f type ftype override equals object type d source typedsource type d source typedsource type d source typedsource get source getsource equals get source getsource get type gettype get type gettype override hash code hashcode get source getsource hash code hashcode get type gettype can create for type cancreatefortype type type i java element ijavaelement field type i java element ijavaelement type type i java element ijavaelement container type i java element ijavaelement declaration type i java element ijavaelement initializer type i java element ijavaelement method type i java element ijavaelement declaration sort by type sortbytype type d source typedsource type d sources typedsources arrays sort type d sources typedsources create type comparator createtypecomparator comparator type d source typedsource create type comparator createtypecomparator comparator type d source typedsource override compare type d source typedsource arg type d source typedsource arg arg get type gettype arg get type gettype type d source typedsource create type d sources createtypedsources i java element ijavaelement java elements javaelements core exception coreexception map i compilation unit icompilationunit list i java element ijavaelement map i compilation unit icompilationunit list i java element ijavaelement grouped reorg utils reorgutils group by compilation unit groupbycompilationunit arrays as list aslist java elements javaelements list type d source typedsource result array list arraylist java elements javaelements length iterator i compilation unit icompilationunit iter grouped key set keyset iterator iter has next hasnext i compilation unit icompilationunit iter iterator i java element ijavaelement iterator grouped iterator iterator has next hasnext source tuple sourcetuple tuple source tuple sourcetuple type d source typedsource create type d sources createtypedsources iterator tuple result add all addall arrays as list aslist result to array toarray type d source typedsource result size type d source typedsource create type d sources createtypedsources i java element ijavaelement elem source tuple sourcetuple tuple core exception coreexception reorg utils reorgutils is inside compilation unit isinsidecompilationunit elem elem get element type getelementtype i java element ijavaelement container create type d sources for import container createtypedsourcesforimportcontainer tuple i import container iimportcontainer elem elem get element type getelementtype i java element ijavaelement field type d source typedsource create get field source getfieldsource i field ifield elem tuple elem get element type getelementtype type d source typedsource create get source of decl araration node getsourceofdeclararationnode elem tuple unit elem get element type getelementtype type d source typedsource create type d sources for import container createtypedsourcesforimportcontainer source tuple sourcetuple tuple i import container iimportcontainer container java model exception javamodelexception core exception coreexception i java element ijavaelement imports container get children getchildren list type d source typedsource result array list arraylist imports length imports length result add all addall arrays as list aslist create type d sources createtypedsources imports tuple result to array toarray type d source typedsource result size string get field source getfieldsource i field ifield field source tuple sourcetuple tuple core exception coreexception flags is enum isenum field get flags getflags string source field get source getsource source source tuple node ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level parser set source setsource tuple unit tuple node compilation unit compilationunit parser createast field declaration fielddeclaration declaration ast node search util astnodesearchutil get field declaration node getfielddeclarationnode field tuple node declaration fragments size get source of decl araration node getsourceofdeclararationnode field tuple unit variable declaration fragment variabledeclarationfragment declaration fragment declarationfragment ast node search util astnodesearchutil get field declaration fragment node getfielddeclarationfragmentnode field tuple node i buffer ibuffer buffer tuple unit get buffer getbuffer string buffer stringbuffer buf f buff string buffer stringbuffer buf f buff append buffer get text gettext declaration get start position getstartposition ast node astnode declaration fragments get start position getstartposition declaration get start position getstartposition buf f buff append buffer get text gettext declaration fragment declarationfragment get start position getstartposition declaration fragment declarationfragment get length getlength nls buf f buff append buf f buff to string tostring nls string get source of decl araration node getsourceofdeclararationnode i java element ijavaelement elem i compilation unit icompilationunit java model exception javamodelexception core exception coreexception is true istrue elem get element type getelementtype i java element ijavaelement container elem i source reference isourcereference i source reference isourcereference reference i source reference isourcereference elem string source reference get source getsource source strings trim indentation trimindentation source get java project getjavaproject nls