copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation matt chapman mpchapman gmail jdt java agnostic ferenc hechler ferenc hechler users source for ge sourceforge net jar exporter deploy java application executable jar org eclipse jdt internal jar package r jarpackager java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java file java i o exception ioexception java input stream inputstream java lang reflect invocation target exception invocationtargetexception java net uri java util array list arraylist java util arrays java util collections java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util java util jar manifest java util zip zip exception zipexception java util zip zip file zipfile org eclipse swt widgets shell org eclipse core file system filesystem efs org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime multi status multistatus org eclipse core runtime status org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i container icontainer org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i marker imarker org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources incremental project builder incrementalprojectbuilder org eclipse core resources resources plugin resourcesplugin org eclipse jface operation modal context modalcontext org eclipse actions workspace modify operation workspacemodifyoperation org eclipse jdt core i class file iclassfile org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java element ijavaelement org eclipse jdt core i java model marker ijavamodelmarker org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i region iregion org eclipse jdt core i type root ityperoot org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core tool factory toolfactory org eclipse jdt core util i class file reader iclassfilereader org eclipse jdt core util i source attribute isourceattribute org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util messages org eclipse jdt internal corext util resources org eclipse jdt java element labels javaelementlabels org eclipse jdt standard java element content provider standardjavaelementcontentprovider org eclipse jdt jar package r jarpackager i jar builder ijarbuilder org eclipse jdt jar package r jarpackager i jar builder extension ijarbuilderextension org eclipse jdt jar package r jarpackager i jar description writer ijardescriptionwriter org eclipse jdt jar package r jarpackager i jar export runnable ijarexportrunnable org eclipse jdt jar package r jarpackager jar package data jarpackagedata org eclipse jdt refactoring refactoring save helper refactoringsavehelper org eclipse jdt internal i java status constants ijavastatusconstants org eclipse jdt internal java plugin javaplugin org eclipse jdt internal util busy indicator runnable context busyindicatorrunnablecontext org eclipse jdt internal viewsupport basic element labels basicelementlabels operation exporting resource children jar file jar file export operation jarfileexportoperation workspace modify operation workspacemodifyoperation i jar export runnable ijarexportrunnable message multi status messagemultistatus multi status multistatus message multi status messagemultistatus string plugin id pluginid code string message throwable exception plugin id pluginid code message exception change message override set message setmessage string message set message setmessage message i jar builder ijarbuilder f jar builder fjarbuilder jar package data jarpackagedata f jar package fjarpackage jar package data jarpackagedata f jar packages fjarpackages shell f parent shell fparentshell map string array list arraylist i resource iresource f java name to class files map fjavanametoclassfilesmap i container icontainer f class files map container fclassfilesmapcontainer i container icontainer f exported class containers fexportedclasscontainers message multi status messagemultistatus f status fstatus standard java element content provider standardjavaelementcontentprovider f java element content provider fjavaelementcontentprovider f files saved ffilessaved creates instance param jar package jarpackage jar specification param parent parent dialog code code dialog presented jar file export operation jarfileexportoperation jar package data jarpackagedata jar package jarpackage shell parent jar package data jarpackagedata jar package jarpackage parent creates instance param jar packages jarpackages array jar data objects param parent parent dialog code code dialog presented jar file export operation jarfileexportoperation jar package data jarpackagedata jar packages jarpackages shell parent parent f jar packages fjarpackages jar packages jarpackages jar file export operation jarfileexportoperation shell parent f parent shell fparentshell parent nls f status fstatus message multi status messagemultistatus java plugin javaplugin get plugin id getpluginid i status istatus f java element content provider fjavaelementcontentprovider standard java element content provider standardjavaelementcontentprovider add to status addtostatus core exception coreexception i status istatus status get status getstatus string message get local ized message getlocalizedmessage message message length message jar packager messages jarpackagermessages jar file export operation jarfileexportoperation core error during export coreerrorduringexport status status status get severity getseverity status get plugin getplugin status get code getcode message f status fstatus add status adds info list passed export operation continues warning param message message param error throwable caused warning code code add info addinfo string message throwable error f status fstatus add status i status istatus info java plugin javaplugin get plugin id getpluginid i java status constants ijavastatusconstants internal error message error adds warning list passed export operation continues warning param message message param error throwable caused warning code code add warning addwarning string message throwable error f status fstatus add status i status istatus warning java plugin javaplugin get plugin id getpluginid i java status constants ijavastatusconstants internal error message error adds error list passed error terminates export operation param message message param error throwable caused error code code add error adderror string message throwable error f status fstatus add status i status istatus error java plugin javaplugin get plugin id getpluginid i java status constants ijavastatusconstants internal error message error answers number file resources jar count selected elements countselectedelements i java project ijavaproject enclosing java projects enclosingjavaprojects hash set hashset count f jar package fjarpackage get elements getelements length object element f jar package fjarpackage get elements getelements i java project ijavaproject java project javaproject get enclosing java project getenclosingjavaproject element java project javaproject enclosing java projects enclosingjavaprojects add java project javaproject i resource iresource resource element i java element ijavaelement i java element ijavaelement i java element ijavaelement element resource get resource getresource resource element i package fragment root ipackagefragmentroot i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot element root is archive isarchive zip file zipfile file file jar packager util jarpackagerutil get archive file getarchivefile root get path getpath file count file size core exception coreexception java plugin javaplugin log file file close i o exception ioexception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation close zip file error closezipfileerror message object java element labels javaelementlabels get element label getelementlabel root java element labels javaelementlabels get local ized message getlocalizedmessage root is external isexternal count get class file count getclassfilecount root get children getchildren java model exception javamodelexception java plugin javaplugin log element i resource iresource resource i resource iresource element resource resource get type gettype i resource iresource file count count get total child count gettotalchildcount i container icontainer resource f jar package fjarpackage are output folders exported areoutputfoldersexported f jar package fjarpackage are java files exported arejavafilesexported count iterator i java project ijavaproject iter enclosing java projects enclosingjavaprojects iterator iter has next hasnext i java project ijavaproject java project javaproject iter i container icontainer output containers outputcontainers output containers outputcontainers get output containers getoutputcontainers java project javaproject core exception coreexception add to status addtostatus output containers outputcontainers length count get total child count gettotalchildcount output containers outputcontainers count get class file count getclassfilecount i java element ijavaelement children java model exception javamodelexception result children length children i class file iclassfile result children i package fragment ipackagefragment i package fragment ipackagefragment fragment i package fragment ipackagefragment children result get class file count getclassfilecount fragment get children getchildren result get total child count gettotalchildcount i container icontainer container i resource iresource members members container members core exception coreexception count members length members get type gettype i resource iresource file count count get total child count gettotalchildcount i container icontainer members count exports passed resource jar file param element resource java element javaelement export param progress monitor progressmonitor progress monitor interrupted exception interruptedexception thrown cancel export element exportelement object element i progress monitor iprogressmonitor progress monitor progressmonitor interrupted exception interruptedexception lead segments to remove leadsegmentstoremove i package fragment root ipackagefragmentroot pkg root pkgroot is in java project isinjavaproject i resource iresource resource i type root ityperoot type root element typerootelement i java project ijavaproject j project jproject element i java element ijavaelement is in java project isinjavaproject i java element ijavaelement i java element ijavaelement element i type root ityperoot export java element exportjavaelement progress monitor progressmonitor type root element typerootelement i type root ityperoot j project jproject type root element typerootelement get java project getjavaproject pkg root pkgroot java model util javamodelutil get package fragment root getpackagefragmentroot resource type root element typerootelement get resource getresource element i resource iresource resource i resource iresource element resource is accessible isaccessible add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation resource not found resourcenotfound basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath resource get type gettype i resource iresource file is in java project isinjavaproject check java resource is in java project isinjavaproject resource get project getproject has nature hasnature java core javacore nature core exception coreexception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation project nature not determinable projectnaturenotdeterminable basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath is in java project isinjavaproject i java element ijavaelement java core javacore create resource i type root ityperoot exists export element exportelement progress monitor progressmonitor j project jproject java core javacore create resource get project getproject i package fragment ipackagefragment pkg fragment pkgfragment j project jproject find package fragment findpackagefragment resource get full path getfullpath remove last segments removelastsegments pkg fragment pkgfragment pkg root pkgroot java model util javamodelutil get package fragment root getpackagefragmentroot pkg fragment pkgfragment pkg root pkgroot find package fragment root findpackagefragmentroot j project jproject resource get full path getfullpath remove last segments removelastsegments java model exception javamodelexception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation java package not determinable javapackagenotdeterminable basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath pkg root pkgroot j project jproject lead segments to remove leadsegmentstoremove pkg root pkgroot get path getpath segment count segmentcount is on build path isonbuildpath is on build path isonbuildpath j project jproject is on classpath isonclasspath resource is on build path isonbuildpath must use source folder hierarchy mustusesourcefolderhierarchy pkg root pkgroot get element name getelementname equals i package fragment root ipackagefragmentroot package root packageroot path lead segments to remove leadsegmentstoremove i path ipath destination path destinationpath resource get full path getfullpath remove first segments removefirstsegments lead segments to remove leadsegmentstoremove type root element typerootelement export class files exportclassfiles progress monitor progressmonitor type root element typerootelement destination path destinationpath export resource exportresource progress monitor progressmonitor pkg root pkgroot is in java project isinjavaproject resource destination path destinationpath progress monitor progressmonitor worked modal context modalcontext check canceled checkcanceled progress monitor progressmonitor export container exportcontainer progress monitor progressmonitor i container icontainer resource export java element exportjavaelement i progress monitor iprogressmonitor progress monitor progressmonitor i java element ijavaelement interrupted exception interruptedexception get element type getelementtype i java element ijavaelement fragment root i package fragment root ipackagefragmentroot is archive isarchive i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot zip file zipfile jar file jarfile jar file jarfile jar packager util jarpackagerutil get archive file getarchivefile root get path getpath f jar builder fjarbuilder write archive writearchive jar file jarfile progress monitor progressmonitor core exception coreexception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation open zip file error openzipfileerror message object java element labels javaelementlabels get element label getelementlabel root java element labels javaelementlabels get local ized message getlocalizedmessage jar file jarfile jar file jarfile close i o exception ioexception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation close zip file error closezipfileerror message object java element labels javaelementlabels get element label getelementlabel root java element labels javaelementlabels get local ized message getlocalizedmessage get element type getelementtype i java element ijavaelement fragment root i package fragment root ipackagefragmentroot is external isexternal external folder f jar builder fjarbuilder i jar builder extension ijarbuilderextension export external class folder exportexternalclassfolder i package fragment root ipackagefragmentroot progress monitor progressmonitor add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation can not export external class folder cannotexportexternalclassfolder warning basic element labels basicelementlabels get path label getpathlabel get path getpath object children f java element content provider fjavaelementcontentprovider get children getchildren children length export element exportelement children progress monitor progressmonitor export external class folder exportexternalclassfolder i package fragment root ipackagefragmentroot class folder classfolder i progress monitor iprogressmonitor progress monitor progressmonitor interrupted exception interruptedexception i java element ijavaelement children class folder classfolder get children getchildren children length export external class folder element exportexternalclassfolderelement children class folder classfolder get path getpath progress monitor progressmonitor java model exception javamodelexception add to status addtostatus export external class folder element exportexternalclassfolderelement i java element ijavaelement java element javaelement i path ipath class folder path classfolderpath i progress monitor iprogressmonitor progress monitor progressmonitor java model exception javamodelexception interrupted exception interruptedexception java element javaelement i class file iclassfile i class file iclassfile class file classfile i class file iclassfile java element javaelement i path ipath path class file classfile get path getpath i path ipath destination path remove first segments removefirstsegments class folder path classfolderpath segment count segmentcount set device setdevice i jar builder extension ijarbuilderextension f jar builder fjarbuilder write file writefile path to file tofile destination core exception coreexception handle core exception on export handlecoreexceptiononexport progress monitor progressmonitor worked modal context modalcontext check canceled checkcanceled progress monitor progressmonitor java element javaelement i package fragment ipackagefragment i java element ijavaelement children i package fragment ipackagefragment java element javaelement get children getchildren children length export external class folder element exportexternalclassfolderelement children class folder path classfolderpath progress monitor progressmonitor export resource exportresource i progress monitor iprogressmonitor progress monitor progressmonitor i resource iresource resource leading segments to remove leadingsegmentstoremove interrupted exception interruptedexception resource i container icontainer i container icontainer container i container icontainer resource i resource iresource children children container members core exception coreexception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation error during export errorduringexport basic element labels basicelementlabels get path label getpathlabel container get full path getfullpath children length export resource exportresource progress monitor progressmonitor children leading segments to remove leadingsegmentstoremove resource i file ifile i path ipath destination path destinationpath resource get full path getfullpath remove first segments removefirstsegments leading segments to remove leadingsegmentstoremove progress monitor progressmonitor sub task subtask messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation exporting basic element labels basicelementlabels get path label getpathlabel destination path destinationpath f jar builder fjarbuilder write file writefile i file ifile resource destination path destinationpath core exception coreexception handle core exception on export handlecoreexceptiononexport progress monitor progressmonitor worked modal context modalcontext check canceled checkcanceled progress monitor progressmonitor export container exportcontainer i progress monitor iprogressmonitor progress monitor progressmonitor i container icontainer container interrupted exception interruptedexception container get type gettype i resource iresource folder is output folder isoutputfolder i folder ifolder container i resource iresource children children container members core exception coreexception exception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation error during export errorduringexport basic element labels basicelementlabels get path label getpathlabel container get full path getfullpath exception children i java project ijavaproject java project javaproject java core javacore create container get project getproject is on p isoncp java project javaproject is on classpath isonclasspath container children length i resource iresource child children is on p isoncp java project javaproject is on classpath isonclasspath child is internal jar isinternaljar child export element exportelement child progress monitor progressmonitor tells resource internal jar param resource resource test code code internal jar code code is internal jar isinternaljar i resource iresource resource resource get type gettype i resource iresource file i java element ijavaelement java core javacore create resource get element type getelementtype i java element ijavaelement fragment root i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot root is archive isarchive root is external isexternal i package fragment root ipackagefragmentroot find package fragment root findpackagefragmentroot i java project ijavaproject j project jproject i path ipath path java model exception javamodelexception j project jproject path path segment count segmentcount i package fragment root ipackagefragmentroot pkg root pkgroot j project jproject find package fragment root findpackagefragmentroot path pkg root pkgroot pkg root pkgroot find package fragment root findpackagefragmentroot j project jproject path remove last segments removelastsegments export resource exportresource i progress monitor iprogressmonitor progress monitor progressmonitor i package fragment root ipackagefragmentroot pkg root pkgroot is in java project isinjavaproject i resource iresource resource i path ipath destination path destinationpath handle meta inf manifest exported files nls f jar package fjarpackage are class files exported areclassfilesexported destination path destinationpath to string tostring equals meta inf manifest f jar package fjarpackage is manifest generated ismanifestgenerated add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation did not add manifest to jar didnotaddmanifesttojar basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath is non java resource isnonjavaresource is in java project isinjavaproject pkg root pkgroot is in class folder isinclassfolder is in class folder isinclassfolder pkg root pkgroot pkg root pkgroot is archive isarchive pkg root pkgroot get kind getkind i package fragment root ipackagefragmentroot binary java model exception javamodelexception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation can t get root kind cantgetrootkind basic element labels basicelementlabels get path label getpathlabel resource get full path getfullpath f jar package fjarpackage are class files exported areclassfilesexported is non java resource isnonjavaresource pkg root pkgroot is java file isjavafile resource is class file isclassfile resource is in class folder isinclassfolder is class file isclassfile resource f jar package fjarpackage are java files exported arejavafilesexported is non java resource isnonjavaresource pkg root pkgroot is class file isclassfile resource is in class folder isinclassfolder is class file isclassfile resource f jar package fjarpackage are class files exported areclassfilesexported progress monitor progressmonitor sub task subtask messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation exporting basic element labels basicelementlabels get path label getpathlabel destination path destinationpath f jar builder fjarbuilder write file writefile i file ifile resource destination path destinationpath core exception coreexception handle core exception on export handlecoreexceptiononexport is output folder isoutputfolder i folder ifolder folder i java project ijavaproject java project javaproject java core javacore create folder get project getproject i path ipath output folder path outputfolderpath java project javaproject get output location getoutputlocation folder get full path getfullpath equals output folder path outputfolderpath java model exception javamodelexception export class files exportclassfiles i progress monitor iprogressmonitor progress monitor progressmonitor i type root ityperoot type root element typerootelement i path ipath destination path destinationpath f jar package fjarpackage are class files exported areclassfilesexported type root element typerootelement exists find file classpath export iterator i resource iresource iter files on classpath filesonclasspath type root element typerootelement destination path destinationpath progress monitor progressmonitor i path ipath base destination path basedestinationpath destination path destinationpath remove last segments removelastsegments iter has next hasnext i file ifile file i file ifile iter i path ipath class file path classfilepath base destination path basedestinationpath append file get name getname progress monitor progressmonitor sub task subtask messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation exporting basic element labels basicelementlabels get path label getpathlabel class file path classfilepath f jar builder fjarbuilder write file writefile file class file path classfilepath core exception coreexception handle core exception on export handlecoreexceptiononexport core exception coreexception add to status addtostatus exports resources jar param progress monitor progressmonitor progress monitor interrupted exception interruptedexception thrown can celled cancelled export selected elements exportselectedelements i progress monitor iprogressmonitor progress monitor progressmonitor interrupted exception interruptedexception f exported class containers fexportedclasscontainers hash set hashset i java project ijavaproject enclosing java projects enclosingjavaprojects hash set hashset f jar package fjarpackage get elements getelements length object element f jar package fjarpackage get elements getelements export element exportelement element progress monitor progressmonitor f jar package fjarpackage are output folders exported areoutputfoldersexported i java project ijavaproject java project javaproject get enclosing java project getenclosingjavaproject element java project javaproject enclosing java projects enclosingjavaprojects add java project javaproject f jar package fjarpackage are output folders exported areoutputfoldersexported export output folders exportoutputfolders progress monitor progressmonitor enclosing java projects enclosingjavaprojects i java project ijavaproject get enclosing java project getenclosingjavaproject object element element i java element ijavaelement i java element ijavaelement element get java project getjavaproject element i resource iresource i project iproject project i resource iresource element get project getproject project has nature hasnature java core javacore nature java core javacore create project core exception coreexception add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation project nature not determinable projectnaturenotdeterminable basic element labels basicelementlabels get path label getpathlabel project get full path getfullpath export output folders exportoutputfolders i progress monitor iprogressmonitor progress monitor progressmonitor i java project ijavaproject java projects javaprojects interrupted exception interruptedexception java projects javaprojects iterator i java project ijavaproject iter java projects javaprojects iterator iter has next hasnext i java project ijavaproject java project javaproject iter i container icontainer output containers outputcontainers output containers outputcontainers get output containers getoutputcontainers java project javaproject core exception coreexception add to status addtostatus output containers outputcontainers length export resource exportresource progress monitor progressmonitor output containers outputcontainers output containers outputcontainers get full path getfullpath segment count segmentcount i container icontainer get output containers getoutputcontainers i java project ijavaproject java project javaproject core exception coreexception i path ipath output paths outputpaths hash set hashset include default output path includedefaultoutputpath i package fragment root ipackagefragmentroot roots java project javaproject get package fragment roots getpackagefragmentroots roots length roots i classpath entry iclasspathentry cp entry cpentry roots get raw classpath entry getrawclasspathentry cp entry cpentry get entry kind getentrykind i classpath entry iclasspathentry cpe source i path ipath location cp entry cpentry get output location getoutputlocation location output paths outputpaths add location include default output path includedefaultoutputpath include default output path includedefaultoutputpath output location output paths outputpaths add java project javaproject get output location getoutputlocation convert paths containers i container icontainer output containers outputcontainers hash set hashset output paths outputpaths size iterator i path ipath iter output paths outputpaths iterator iter has next hasnext i path ipath path iter java project javaproject get project getproject get full path getfullpath equals path output containers outputcontainers add java project javaproject get project getproject i folder ifolder output folder outputfolder create folder handle createfolderhandle path output folder outputfolder output folder outputfolder is accessible isaccessible string msg jar packager messages jarpackagermessages jar file export operation jarfileexportoperation output container not accessible outputcontainernotaccessible add to status addtostatus core exception coreexception status i status istatus error java plugin javaplugin get plugin id getpluginid i java status constants ijavastatusconstants internal error msg output containers outputcontainers add output folder outputfolder output containers outputcontainers to array toarray i container icontainer output containers outputcontainers size returns iterator list files correspond passed file classpath project param type root element typerootelement file compilation unit evaluate files param path in jar pathinjar path file jar project source folder segments removed param progress monitor progressmonitor progress monitor progressmonitor iterator classpath files file core exception coreexception exception occurs files iterator i resource iresource files on classpath filesonclasspath i type root ityperoot type root element typerootelement i path ipath path in jar pathinjar i progress monitor iprogressmonitor progress monitor progressmonitor core exception coreexception i file ifile file i file ifile type root element typerootelement get resource getresource i java project ijavaproject java project javaproject type root element typerootelement get java project getjavaproject i package fragment root ipackagefragmentroot pkg root pkgroot java model util javamodelutil get package fragment root getpackagefragmentroot type root element typerootelement jar provide str ategy strategy i file ifile class files classfiles f jar package fjarpackage find class files for findclassfilesfor file class files classfiles arrays as list aslist class files classfiles iterator is java file isjavafile file collections empty list iterator i path ipath output path outputpath pkg root pkgroot i classpath entry iclasspathentry cp entry cpentry pkg root pkgroot get raw classpath entry getrawclasspathentry cp entry cpentry get entry kind getentrykind i classpath entry iclasspathentry cpe source output path outputpath cp entry cpentry get output location getoutputlocation output path outputpath output location output path outputpath java project javaproject get output location getoutputlocation i container icontainer output container outputcontainer java project javaproject get project getproject get full path getfullpath equals output path outputpath output container outputcontainer java project javaproject get project getproject output container outputcontainer create folder handle createfolderhandle output path outputpath output container outputcontainer output container outputcontainer is accessible isaccessible string msg jar packager messages jarpackagermessages jar file export operation jarfileexportoperation output container not accessible outputcontainernotaccessible core exception coreexception status i status istatus error java plugin javaplugin get plugin id getpluginid i java status constants ijavastatusconstants internal error msg java search files has errors haserrors has compile errors hascompileerrors file has warnings haswarnings has compile warnings hascompilewarnings file can be exported canbeexported can be exported canbeexported has errors haserrors has warnings haswarnings report possible compile problems reportpossiblecompileproblems file has errors haserrors has warnings haswarnings can be exported canbeexported can be exported canbeexported collections empty list iterator i container icontainer class container classcontainer output container outputcontainer path in jar pathinjar segment count segmentcount class container classcontainer output container outputcontainer get folder getfolder path in jar pathinjar remove last segments removelastsegments f exported class containers fexportedclasscontainers class container classcontainer collections empty list iterator java core javacore generate equals java project javaproject get option getoption java core javacore compiler source file attr i region iregion region java core javacore new region newregion region add type root element typerootelement i resource iresource generated resources generatedresources java core javacore get generated resources getgeneratedresources region generated resources generatedresources length arrays as list aslist generated resources generatedresources iterator code chance f class files map container fclassfilesmapcontainer f class files map container fclassfilesmapcontainer equals class container classcontainer f java name to class files map fjavanametoclassfilesmap build java to class map buildjavatoclassmap class container classcontainer progress monitor progressmonitor f java name to class files map fjavanametoclassfilesmap fully build map fallback export directory string container name containername basic element labels basicelementlabels get path label getpathlabel class container classcontainer get full path getfullpath string msg messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation missing source file attribute exported all missingsourcefileattributeexportedall container name containername add info addinfo msg f exported class containers fexportedclasscontainers add class container classcontainer get classes in getclassesin class container classcontainer f class files map container fclassfilesmapcontainer class container classcontainer array list arraylist i resource iresource class file list classfilelist f java name to class files map fjavanametoclassfilesmap file get name getname class file list classfilelist class file list classfilelist is empty isempty string msg messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation class file on classpath not accessible classfileonclasspathnotaccessible basic element labels basicelementlabels get path label getpathlabel file get full path getfullpath core exception coreexception status i status istatus error java plugin javaplugin get plugin id getpluginid i java status constants ijavastatusconstants internal error msg class file list classfilelist iterator iterator i resource iresource get classes in getclassesin i container icontainer class container classcontainer core exception coreexception i resource iresource resources class container classcontainer members list i resource iresource files array list arraylist resources length resources length resources get type gettype i resource iresource file is class file isclassfile resources files add resources files iterator answers resource java file resource file file ends java extension defined java source param file file test code code resource java file is java file isjavafile i resource iresource file file file get type gettype i resource iresource file file get file extension getfileextension java core javacore is java like file name isjavalikefilename file get name getname answers resource file resource file file ends param file file test code code resource file is class file isclassfile i resource iresource file file file get type gettype i resource iresource file file get file extension getfileextension nls file get file extension getfileextension equals ignore case equalsignorecase builds returns map files java file directory map string array list arraylist i resource iresource build java to class map buildjavatoclassmap i container icontainer container i progress monitor iprogressmonitor monitor core exception coreexception container container is accessible isaccessible hash map hashmap xxx bug files java file i class file reader iclassfilereader cf reader cfreader i resource iresource members container members map string array list arraylist i resource iresource map hash map hashmap members length members length is class file isclassfile members i file ifile class file classfile i file ifile members uri location class file classfile getlocationuri location input stream inputstream contents contents efs get store getstore location open input stream openinputstream efs monitor cf reader cfreader tool factory toolfactory create default class file reader createdefaultclassfilereader contents i class file reader iclassfilereader class file classfile attributes contents contents close i o exception ioexception core exception coreexception status i status istatus error java plugin javaplugin get plugin id getpluginid i status istatus error messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation error cannot close connection errorcannotcloseconnection basic element labels basicelementlabels geturlpart resources get location string getlocationstring class file classfile cf reader cfreader i source attribute isourceattribute source attribute sourceattribute cf reader cfreader get source file attribute getsourcefileattribute source attribute sourceattribute fully build map file source file add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation class file without source file attribute classfilewithoutsourcefileattribute basic element labels basicelementlabels geturlpart resources get location string getlocationstring class file classfile string java name javaname string source attribute sourceattribute get source file name getsourcefilename array list arraylist i resource iresource class files classfiles map java name javaname class files classfiles class files classfiles array list arraylist map java name javaname class files classfiles class files classfiles add class file classfile map creates folder resource handle folder workspace path param folder path folderpath path folder create handle folder resource handle i folder ifolder create folder handle createfolderhandle i path ipath folder path folderpath folder path folderpath is valid path isvalidpath folder path folderpath to string tostring folder path folderpath segment count segmentcount java plugin javaplugin get workspace getworkspace get root getroot get folder getfolder folder path folderpath handles core exceptions thrown link i jar builder ijarbuilder write file writefile i file ifile i path ipath param core exception handle core exception on export handlecoreexceptiononexport core exception coreexception throwable real ex realex get status getstatus get exception getexception real ex realex zip exception zipexception real ex realex get message getmessage nls hardcoded message string java util zip zip output stream zipoutputstream put next entry putnextentry zip entry zipentry real ex realex get message getmessage starts with startswith duplicate entry add warning addwarning get message getmessage real ex realex add to status addtostatus returns status operation result status object individual status objects status operation override i status istatus get status getstatus string message f status fstatus get severity getseverity i status istatus nls message i status istatus info message jar packager messages jarpackagermessages jar file export operation jarfileexportoperation export finished with info exportfinishedwithinfo i status istatus warning message jar packager messages jarpackagermessages jar file export operation jarfileexportoperation export finished with warnings exportfinishedwithwarnings i status istatus error f jar packages fjarpackages length message jar packager messages jarpackagermessages jar file export operation jarfileexportoperation creation of some rs failed creationofsomejarsfailed message jar packager messages jarpackagermessages jar file export operation jarfileexportoperation jar creation failed jarcreationfailed def ensive defensive code severity defined nls message f status fstatus set message setmessage message f status fstatus can be exported canbeexported has errors haserrors has warnings haswarnings has errors haserrors has warnings haswarnings has errors haserrors f jar package fjarpackage are errors exported areerrorsexported has warnings haswarnings f jar package fjarpackage export warnings exportwarnings report possible compile problems reportpossiblecompileproblems i file ifile file has errors haserrors has warnings haswarnings can be exported canbeexported has errors haserrors can be exported canbeexported add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation exported with compile errors exportedwithcompileerrors basic element labels basicelementlabels get path label getpathlabel file get full path getfullpath add error adderror messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation not exported due to compile errors notexportedduetocompileerrors basic element labels basicelementlabels get path label getpathlabel file get full path getfullpath has warnings haswarnings can be exported canbeexported add warning addwarning messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation exported with compile warnings exportedwithcompilewarnings basic element labels basicelementlabels get path label getpathlabel file get full path getfullpath add error adderror messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation not exported due to compile warnings notexportedduetocompilewarnings basic element labels basicelementlabels get path label getpathlabel file get full path getfullpath exports resources jar param progress monitor progressmonitor progress monitor displays progress invocation target exception invocationtargetexception thrown ecxeption occurred interrupted exception interruptedexception thrown can celled cancelled get status getstatus override execute i progress monitor iprogressmonitor progress monitor progressmonitor invocation target exception invocationtargetexception interrupted exception interruptedexception count f jar packages fjarpackages length nls progress monitor progressmonitor begin task begintask count count sub progress monitor subprogressmonitor sub progress monitor subprogressmonitor sub progress monitor subprogressmonitor progress monitor progressmonitor sub progress monitor subprogressmonitor prepend main label subtask f jar package fjarpackage f jar packages fjarpackages f jar package fjarpackage single run singlerun sub progress monitor subprogressmonitor progress monitor progressmonitor single run singlerun i progress monitor iprogressmonitor progress monitor progressmonitor invocation target exception invocationtargetexception interrupted exception interruptedexception preconditionsok invocation target exception invocationtargetexception jar packager messages jarpackagermessages jar file export operation jarfileexportoperation jar creation failed see details jarcreationfailedseedetails total work totalwork count selected elements countselectedelements f jar package fjarpackage are generated files exported aregeneratedfilesexported is auto building isautobuilding f jar package fjarpackage is building if needed isbuildingifneeded is auto building isautobuilding f files saved ffilessaved sub monitor ticks submonitorticks total work totalwork total work totalwork sub monitor ticks submonitorticks nls progress monitor progressmonitor begin task begintask nls nls total work totalwork sub progress monitor subprogressmonitor sub progress monitor subprogressmonitor sub progress monitor subprogressmonitor progress monitor progressmonitor sub monitor ticks submonitorticks sub progress monitor subprogressmonitor prepend main label subtask build projects buildprojects sub progress monitor subprogressmonitor nls progress monitor progressmonitor begin task begintask nls nls total work totalwork f jar builder fjarbuilder f jar package fjarpackage get jar builder getjarbuilder f jar builder fjarbuilder open f jar package fjarpackage f parent shell fparentshell f status fstatus export selected elements exportselectedelements progress monitor progressmonitor get status getstatus get severity getseverity i status istatus error progress monitor progressmonitor sub task subtask jar packager messages jarpackagermessages jar file export operation jarfileexportoperation saving files savingfiles save files savefiles core exception coreexception add to status addtostatus f jar builder fjarbuilder f jar builder fjarbuilder close core exception coreexception add to status addtostatus progress monitor progressmonitor preconditionsok f jar package fjarpackage are generated files exported aregeneratedfilesexported f jar package fjarpackage are java files exported arejavafilesexported add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation no export type chosen noexporttypechosen f jar package fjarpackage get elements getelements f jar package fjarpackage get elements getelements length add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation no resources selected noresourcesselected f jar package fjarpackage get absolute jar location getabsolutejarlocation add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation invalid jar location invalidjarlocation file target file targetfile f jar package fjarpackage get absolute jar location getabsolutejarlocation to file tofile target file targetfile exists target file targetfile can write canwrite add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation jar file exists and not writable jarfileexistsandnotwritable f jar package fjarpackage is manifest accessible ismanifestaccessible add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation manifest does not exist manifestdoesnotexist f jar package fjarpackage is main class valid ismainclassvalid busy indicator runnable context busyindicatorrunnablecontext add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation invalid main class invalidmainclass f parent shell fparentshell res f parent shell fparentshell get display getdisplay sync exec syncexec runnable override refactoring save helper refactoringsavehelper refactoring save helper refactoringsavehelper refactoring save helper refactoringsavehelper refactoring save helper refactoringsavehelper save res refactoring save helper refactoringsavehelper save editors saveeditors f parent shell fparentshell f files saved ffilessaved refactoring save helper refactoringsavehelper did save files didsavefiles res add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation file unsaved fileunsaved save files savefiles save manifest f jar package fjarpackage are generated files exported aregeneratedfilesexported f jar package fjarpackage is manifest generated ismanifestgenerated f jar package fjarpackage is manifest saved ismanifestsaved save manifest savemanifest core exception coreexception add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation error saving manifest errorsavingmanifest i o exception ioexception add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation error saving manifest errorsavingmanifest save description f jar package fjarpackage is description saved isdescriptionsaved save description savedescription core exception coreexception add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation error saving description errorsavingdescription i o exception ioexception add error adderror jar packager messages jarpackagermessages jar file export operation jarfileexportoperation error saving description errorsavingdescription save description savedescription core exception coreexception i o exception ioexception adjust jar attributes f jar package fjarpackage is manifest reuse d ismanifestreused f jar package fjarpackage set generate manifest setgeneratemanifest byte array output stream bytearrayoutputstream object stream output objectstreamoutput byte array output stream bytearrayoutputstream i file ifile description file descriptionfile f jar package fjarpackage get description file getdescriptionfile nls string encoding utf encoding description file descriptionfile get charset getcharset core exception coreexception exception java plugin javaplugin log exception i jar description writer ijardescriptionwriter writer f jar package fjarpackage create jar description writer createjardescriptionwriter object stream output objectstreamoutput encoding byte array input stream bytearrayinputstream file input fileinput writer write f jar package fjarpackage file input fileinput byte array input stream bytearrayinputstream object stream output objectstreamoutput to byte array tobytearray description file descriptionfile is accessible isaccessible f jar package fjarpackage allow overwrite allowoverwrite jar packager util jarpackagerutil ask for overwrite permission askforoverwritepermission f parent shell fparentshell description file descriptionfile get full path getfullpath description file descriptionfile set contents setcontents file input fileinput description file descriptionfile create file input fileinput file input fileinput file input fileinput close writer writer close save manifest savemanifest core exception coreexception i o exception ioexception byte array output stream bytearrayoutputstream manifest output manifestoutput byte array output stream bytearrayoutputstream manifest manifest f jar package fjarpackage get manifest provider getmanifestprovider create f jar package fjarpackage manifest write manifest output manifestoutput byte array input stream bytearrayinputstream file input fileinput byte array input stream bytearrayinputstream manifest output manifestoutput to byte array tobytearray i file ifile manifest file manifestfile f jar package fjarpackage get manifest file getmanifestfile manifest file manifestfile is accessible isaccessible f jar package fjarpackage allow overwrite allowoverwrite jar packager util jarpackagerutil ask for overwrite permission askforoverwritepermission f parent shell fparentshell manifest file manifestfile get full path getfullpath manifest file manifestfile set contents setcontents file input fileinput manifest file manifestfile create file input fileinput is auto building isautobuilding resources plugin resourcesplugin get workspace getworkspace get description getdescription is auto building isautobuilding build projects buildprojects i progress monitor iprogressmonitor progress monitor progressmonitor i project iproject built projects builtprojects hash set hashset object elements f jar package fjarpackage get elements getelements elements length i project iproject project object element elements element i resource iresource project i resource iresource element get project getproject element i java element ijavaelement project i java element ijavaelement element get java project getjavaproject get project getproject project built projects builtprojects project project build incremental project builder incrementalprojectbuilder incremental build progress monitor progressmonitor core exception coreexception string message messages format jar packager messages jarpackagermessages jar file export operation jarfileexportoperation error during project build errorduringprojectbuild basic element labels basicelementlabels get resource name getresourcename project add error adderror message don build project time failed built projects builtprojects add project tells resource children compile errors method acts current build recompile param resource resource check errors code code resource children error free core exception coreexception org eclipse core runtime core exception coreexception marker problem has compile errors hascompileerrors i resource iresource resource core exception coreexception i marker imarker problem markers problemmarkers resource find markers findmarkers i java model marker ijavamodelmarker java model problem marker i resource iresource depth infinite problem markers problemmarkers length problem markers problemmarkers get attribute getattribute i marker imarker severity i marker imarker severity error tells resource children compile errors method acts current build recompile param resource resource check errors code code resource children error free core exception coreexception org eclipse core runtime core exception coreexception marker problem has compile warnings hascompilewarnings i resource iresource resource core exception coreexception i marker imarker problem markers problemmarkers resource find markers findmarkers i java model marker ijavamodelmarker java model problem marker i resource iresource depth infinite problem markers problemmarkers length problem markers problemmarkers get attribute getattribute i marker imarker severity i marker imarker severity warning must use source folder hierarchy mustusesourcefolderhierarchy f jar package fjarpackage use source folder hierarchy usesourcefolderhierarchy f jar package fjarpackage are java files exported arejavafilesexported f jar package fjarpackage are generated files exported aregeneratedfilesexported