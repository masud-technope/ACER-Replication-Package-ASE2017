copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring rename java util collections java util linked list linkedlist java util map org eclipse core runtime org eclipse jdt core i field ifield org eclipse jdt core i initializer iinitializer org eclipse jdt core i java element ijavaelement org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i type itype org eclipse jdt core signature helper transplant i java element ijavaelement handle java model workspace include type rename number field renames number method renames including signature returned handle exists target model refactoring handle transplanter refactoringhandletransplanter i type itype f old type foldtype i type itype f new type fnewtype map i java element ijavaelement string f ref act ored similar elements frefactoredsimilarelements param old type oldtype type param new type newtype renamed type param ref actored similar elements refactoredsimilarelements map element i java element ijavaelement string code code refactoring handle transplanter refactoringhandletransplanter i type itype old type oldtype i type itype new type newtype map i java element ijavaelement string ref actored similar elements refactoredsimilarelements f old type foldtype old type oldtype f new type fnewtype new type newtype ref actored similar elements refactoredsimilarelements f ref act ored similar elements frefactoredsimilarelements collections empty map emptymap f ref act ored similar elements frefactoredsimilarelements ref actored similar elements refactoredsimilarelements converts handle handle exist source reference param handle handle i member imember transplant handle transplanthandle i member imember handle create list handles top level type handle linked list linkedlist i member imember old elements oldelements linked list linkedlist add elements addelements handle old elements oldelements step elements locate parents i member imember new elements newelements convert elements convertelements old elements oldelements to array toarray i member imember new elements newelements new elements newelements length add elements addelements i member imember element linked list linkedlist i member imember chain chain add first addfirst element i java element ijavaelement parent element get parent getparent parent i member imember add elements addelements i member imember parent chain i member imember convert elements convertelements i member imember old elements oldelements i member imember new elements newelements i member imember old elements oldelements length i member imember old elements oldelements is true istrue i type itype equals f old type foldtype renamed top level type new elements newelements f new type fnewtype new elements newelements old elements oldelements length i java element ijavaelement new parent newparent new elements newelements i java element ijavaelement current element currentelement old elements oldelements new parent newparent get element type getelementtype i java element ijavaelement type current element currentelement get element type getelementtype i java element ijavaelement type string new name newname resolve type name resolvetypename i type itype current element currentelement new elements newelements i type itype new parent newparent get type gettype new name newname i java element ijavaelement method string new name newname resolve element name resolveelementname current element currentelement string new parameter types newparametertypes resolve parameter types resolveparametertypes i method imethod current element currentelement new elements newelements i type itype new parent newparent get method getmethod new name newname new parameter types newparametertypes i java element ijavaelement initializer i initializer iinitializer initializer i initializer iinitializer current element currentelement new elements newelements i type itype new parent newparent get initializer getinitializer initializer get occurrence count getoccurrencecount i java element ijavaelement field string new name newname resolve element name resolveelementname current element currentelement new elements newelements i type itype new parent newparent get field getfield new name newname i java element ijavaelement method current element currentelement get element type getelementtype i java element ijavaelement type new elements newelements resolve type in member resolvetypeinmember i method imethod new parent newparent i type itype current element currentelement i java element ijavaelement initializer current element currentelement get element type getelementtype i java element ijavaelement type new elements newelements resolve type in member resolvetypeinmember i initializer iinitializer new parent newparent i type itype current element currentelement i java element ijavaelement field current element currentelement get element type getelementtype i java element ijavaelement type anonymous type field declaration new elements newelements resolve type in member resolvetypeinmember i field ifield new parent newparent i type itype current element currentelement new elements newelements string resolve parameter types resolveparametertypes i method imethod method string old parameter types oldparametertypes method get parameter types getparametertypes string new params newparams string old parameter types oldparametertypes length string possible old sigs possibleoldsigs string possible old sigs possibleoldsigs signature create type signature createtypesignature f old type foldtype get element name getelementname possible old sigs possibleoldsigs signature create type signature createtypesignature f old type foldtype get element name getelementname possible old sigs possibleoldsigs signature create type signature createtypesignature f old type foldtype get fully qualified name getfullyqualifiedname possible old sigs possibleoldsigs signature create type signature createtypesignature f old type foldtype get fully qualified name getfullyqualifiedname string possible new sigs possiblenewsigs string possible new sigs possiblenewsigs signature create type signature createtypesignature f new type fnewtype get element name getelementname possible new sigs possiblenewsigs signature create type signature createtypesignature f new type fnewtype get element name getelementname possible new sigs possiblenewsigs signature create type signature createtypesignature f new type fnewtype get fully qualified name getfullyqualifiedname possible new sigs possiblenewsigs signature create type signature createtypesignature f new type fnewtype get fully qualified name getfullyqualifiedname handles stuff map some class someclass some class someclass old parameter types oldparametertypes length new params newparams old parameter types oldparametertypes possible old sigs possibleoldsigs length new params newparams replace all replaceall new params newparams possible old sigs possibleoldsigs possible new sigs possiblenewsigs new params newparams string resolve element name resolveelementname i java element ijavaelement element string new name newname f ref act ored similar elements frefactoredsimilarelements element new name newname new name newname element get element name getelementname i member imember resolve type in member resolvetypeinmember i member imember new parent newparent i type itype old child oldchild local type anonymous type local types renamed nls string new name newname old child oldchild get element name getelementname length new name newname resolve type name resolvetypename old child oldchild new parent newparent get type gettype new name newname old child oldchild get occurrence count getoccurrencecount string resolve type name resolvetypename i type itype type type equals f old type foldtype f new type fnewtype get element name getelementname type get element name getelementname string replace all replaceall string source string replace from replacefrom string replace to replaceto string buffer stringbuffer buf string buffer stringbuffer source length current index currentindex match index matchindex match index matchindex source index of indexof replace from replacefrom current index currentindex buf append source substring current index currentindex match index matchindex buf append replace to replaceto current index currentindex match index matchindex replace from replacefrom length buf append source substring current index currentindex buf to string tostring