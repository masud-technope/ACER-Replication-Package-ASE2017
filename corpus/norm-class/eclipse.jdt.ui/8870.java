copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring util java util array list arraylist java util iterator java util list org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring refactoring status context refactoringstatuscontext org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i source range isourcerange org eclipse jdt core source range sourcerange org eclipse jdt core compiler i scanner iscanner org eclipse jdt core dom ast node astnode org eclipse jdt core dom catch clause catchclause org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom do statement dostatement org eclipse jdt core dom expression org eclipse jdt core dom for statement forstatement org eclipse jdt core dom statement org eclipse jdt core dom switch case switchcase org eclipse jdt core dom switch statement switchstatement org eclipse jdt core dom synchronized statement synchronizedstatement org eclipse jdt core dom try statement trystatement org eclipse jdt core dom while statement whilestatement org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom selection org eclipse jdt internal corext dom selection analyzer selectionanalyzer org eclipse jdt internal corext dom token scanner tokenscanner org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring base java status context javastatuscontext analyzer check selection covers valid statements syntax tree selection valid iff start middle comment extract characters empty statement included selection statement analyzer statementanalyzer selection analyzer selectionanalyzer i compilation unit icompilationunit fcunit token scanner tokenscanner f scanner fscanner refactoring status refactoringstatus f status fstatus statement analyzer statementanalyzer i compilation unit icompilationunit cunit selection selection traverse selected node traverseselectednode core exception coreexception selection traverse selected node traverseselectednode is not null isnotnull cunit fcunit cunit f status fstatus refactoring status refactoringstatus f scanner fscanner token scanner tokenscanner fcunit check selected nodes checkselectednodes ast node astnode nodes get selected nodes getselectednodes nodes length ast node astnode node nodes selection offset selectionoffset get selection getselection get offset getoffset start f scanner fscanner get next start offset getnextstartoffset selection offset selectionoffset start node get start position getstartposition last node end lastnodeend ast nodes astnodes get exclusive end getexclusiveend nodes nodes length pos f scanner fscanner get next start offset getnextstartoffset last node end lastnodeend selection end selectionend get selection getselection get inclusive end getinclusiveend pos selection end selectionend i scanner iscanner scanner f scanner fscanner get scanner getscanner https bugs eclipse org token scanner get current token source getcurrenttokensource start last node end lastnodeend token length token token set selection setselection selection create from start end createfromstartend start last node end lastnodeend i source range isourcerange range source range sourcerange last node end lastnodeend pos last node end lastnodeend invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer selection java status context javastatuscontext create fcunit range success core exception coreexception i source range isourcerange range source range sourcerange selection offset selectionoffset node get start position getstartposition selection offset selectionoffset invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer selection java status context javastatuscontext create fcunit range refactoring status refactoringstatus get status getstatus f status fstatus i compilation unit icompilationunit get compilation unit getcompilationunit fcunit token scanner tokenscanner get token scanner gettokenscanner f scanner fscanner override end visit endvisit compilation unit compilationunit node has selected nodes hasselectednodes end visit endvisit node ast node astnode selected node selectednode get first selected node getfirstselectednode selection selection get selection getselection node selected node selectednode ast node astnode parent selected node selectednode get parent getparent f status fstatus merge comment analyzer commentanalyzer perform selection f scanner fscanner get scanner getscanner parent get start position getstartposition parent get length getlength f status fstatus has fatal error hasfatalerror check selected nodes checkselectednodes end visit endvisit node override end visit endvisit do statement dostatement node ast node astnode selected nodes selectednodes get selected nodes getselectednodes do after validation doaftervalidation node selected nodes selectednodes selected nodes selectednodes node get body getbody selected nodes selectednodes node get expression getexpression invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer body expression end visit endvisit node override end visit endvisit for statement forstatement node ast node astnode selected nodes selectednodes get selected nodes getselectednodes do after validation doaftervalidation node selected nodes selectednodes contains expression containsexpression selected nodes selectednodes node get expression getexpression contains update rs containsupdaters selected nodes selectednodes node update rs updaters selected nodes selectednodes node initializers contains expression containsexpression invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer initializer expression contains expression containsexpression contains update rs containsupdaters invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer expression update r updater contains update rs containsupdaters selected nodes selectednodes node get body getbody invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer update r updater body end visit endvisit node override end visit endvisit switch statement switchstatement node ast node astnode selected nodes selectednodes get selected nodes getselectednodes do after validation doaftervalidation node selected nodes selectednodes list switch case switchcase cases get switch cases getswitchcases node selected nodes selectednodes length ast node astnode top node topnode selected nodes selectednodes cases top node topnode invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer statement end visit endvisit node override end visit endvisit synchronized statement synchronizedstatement node ast node astnode first selected node firstselectednode get first selected node getfirstselectednode get selection getselection get end visit selection mode getendvisitselectionmode node selection selected first selected node firstselectednode node get body getbody invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer statement end visit endvisit node override end visit endvisit try statement trystatement node ast node astnode first selected node firstselectednode get first selected node getfirstselectednode get selection getselection get end visit selection mode getendvisitselectionmode node selection first selected node firstselectednode node get body getbody first selected node firstselectednode node get finally getfinally invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer statement list catch clause catchclause catch clauses catchclauses node catch clauses catchclauses iterator catch clause catchclause iterator catch clauses catchclauses iterator iterator has next hasnext catch clause catchclause element iterator element first selected node firstselectednode element get body getbody first selected node firstselectednode invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer statement element get exception getexception first selected node firstselectednode invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer argument end visit endvisit node override end visit endvisit while statement whilestatement node ast node astnode selected nodes selectednodes get selected nodes getselectednodes do after validation doaftervalidation node selected nodes selectednodes selected nodes selectednodes node get expression getexpression selected nodes selectednodes node get body getbody invalid selection invalidselection refactoring core messages refactoringcoremessages statement analyzer statementanalyzer expression body end visit endvisit node do after validation doaftervalidation ast node astnode node ast node astnode selected nodes selectednodes selected nodes selectednodes length node selected nodes selectednodes get parent getparent get selection getselection get end visit selection mode getendvisitselectionmode node selection invalid selection invalidselection string message f status fstatus add fatal error addfatalerror message reset invalid selection invalidselection string message refactoring status context refactoringstatuscontext context f status fstatus add fatal error addfatalerror message context reset list switch case switchcase get switch cases getswitchcases switch statement switchstatement node list switch case switchcase result array list arraylist iterator statement iter node statements iterator iter has next hasnext object element iter element switch case switchcase result add switch case switchcase element result ast node astnode nodes ast node astnode node nodes length nodes node ast node astnode nodes list expression list nodes length list nodes