copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring code java util array list arraylist java util arrays java util collection java util hash map hashmap java util iterator java util list java util map java util string tokenizer stringtokenizer org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime sub progress monitor subprogressmonitor org eclipse text edits text edit group texteditgroup org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring change descriptor refactoringchangedescriptor org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring refactoring status entry refactoringstatusentry org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core java model exception javamodelexception org eclipse jdt core naming conventions namingconventions org eclipse jdt core source range sourcerange org eclipse jdt core compiler i problem iproblem org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom annotation org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom enum declaration enumdeclaration org eclipse jdt core dom expression org eclipse jdt core dom expression statement expressionstatement org eclipse jdt core dom field access fieldaccess org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom i extended modifier iextendedmodifier org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom initializer org eclipse jdt core dom javadoc org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom modifier org eclipse jdt core dom org eclipse jdt core dom null literal nullliteral org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom switch case switchcase org eclipse jdt core dom type org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt core refactoring i java refactorings ijavarefactorings org eclipse jdt core refactoring descriptors extract constant descriptor extractconstantdescriptor org eclipse jdt core refactoring descriptors java refactoring descriptor javarefactoringdescriptor org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt internal corext core xt corext org eclipse jdt internal corext source range factory sourcerangefactory org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom bindings org eclipse jdt internal corext dom scope analyzer scopeanalyzer org eclipse jdt internal corext dom fragments ast fragment factory astfragmentfactory org eclipse jdt internal corext dom fragments iast fragment iastfragment org eclipse jdt internal corext dom fragments i expression fragment iexpressionfragment org eclipse jdt internal corext linked proposal model linkedproposalmodel org eclipse jdt internal corext linked proposal position group linkedproposalpositiongroup org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring arguments javarefactoringarguments org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring base java string status context javastringstatuscontext org eclipse jdt internal corext refactoring base refactoring status codes refactoringstatuscodes org eclipse jdt internal corext refactoring rename refactoring analyze util refactoringanalyzeutil org eclipse jdt internal corext refactoring structure compilation unit rewrite compilationunitrewrite org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal corext util jdt flags jdtflags org eclipse jdt internal corext util messages org eclipse jdt code generation codegeneration org eclipse jdt internal java editor javaeditor ast provider astprovider org eclipse jdt internal preferences java preferences settings javapreferencessettings org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal text correction modifier correction sub processor modifiercorrectionsubprocessor org eclipse jdt internal viewsupport basic element labels basicelementlabels extract constant refactoring extractconstantrefactoring refactoring nls string attribute replace replace nls string attribute qualify qualify nls string attribute visibility visibility nls string modifier nls string key nls string key type type compilation unit rewrite compilationunitrewrite f cu rewrite fcurewrite f selection start fselectionstart f selection length fselectionlength i compilation unit icompilationunit f cu fcu i expression fragment iexpressionfragment f selected expression fselectedexpression type f constant type cache fconstanttypecache f replace all occurrences freplacealloccurrences f qualify references with declaring class name fqualifyreferenceswithdeclaringclassname string f visibility fvisibility jdt flags jdtflags visibility string f target is interface ftargetisinterface string f constant name fconstantname string f excluded variable names fexcludedvariablenames f selection all static final fselectionallstaticfinal f all static final check performed fallstaticfinalcheckperformed constant declaration location body declaration bodydeclaration f to insert after ftoinsertafter f insert first finsertfirst compilation unit change compilationunitchange f change fchange string f guessed const names fguessedconstnames linked proposal model linkedproposalmodel f linked proposal model flinkedproposalmodel f check result for compile problems fcheckresultforcompileproblems creates extract constant refactoring param unit compilation unit code code invoked scripting param selection start selectionstart start param selection length selectionlength length extract constant refactoring extractconstantrefactoring i compilation unit icompilationunit unit selection start selectionstart selection length selectionlength is true istrue selection start selectionstart is true istrue selection length selectionlength f selection start fselectionstart selection start selectionstart f selection length fselectionlength selection length selectionlength f cu fcu unit f cu rewrite fcurewrite f linked proposal model flinkedproposalmodel nls f constant name fconstantname f check result for compile problems fcheckresultforcompileproblems extract constant refactoring extractconstantrefactoring compilation unit compilationunit ast root astroot selection start selectionstart selection length selectionlength is true istrue selection start selectionstart is true istrue selection length selectionlength is true istrue ast root astroot get type root gettyperoot i compilation unit icompilationunit f selection start fselectionstart selection start selectionstart f selection length fselectionlength selection length selectionlength f cu fcu i compilation unit icompilationunit ast root astroot get type root gettyperoot f cu rewrite fcurewrite compilation unit rewrite compilationunitrewrite f cu fcu ast root astroot f linked proposal model flinkedproposalmodel nls f constant name fconstantname f check result for compile problems fcheckresultforcompileproblems extract constant refactoring extractconstantrefactoring java refactoring arguments javarefactoringarguments arguments refactoring status refactoringstatus status i compilation unit icompilationunit refactoring status refactoringstatus initialize status initializestatus initialize arguments status merge initialize status initializestatus set check result for compile problems setcheckresultforcompileproblems check result for compile problems checkresultforcompileproblems f check result for compile problems fcheckresultforcompileproblems check result for compile problems checkresultforcompileproblems set linked proposal model setlinkedproposalmodel linked proposal model linkedproposalmodel linked proposal model linkedproposalmodel f linked proposal model flinkedproposalmodel linked proposal model linkedproposalmodel override string get name getname refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring replace all occurrences replacealloccurrences f replace all occurrences freplacealloccurrences set replace all occurrences setreplacealloccurrences replace all occurrences replacealloccurrences f replace all occurrences freplacealloccurrences replace all occurrences replacealloccurrences set visibility setvisibility string is true istrue jdt flags jdtflags visibility string jdt flags jdtflags visibility string jdt flags jdtflags visibility string jdt flags jdtflags visibility string f visibility fvisibility string get visibility getvisibility f visibility fvisibility get target is interface gettargetisinterface f target is interface ftargetisinterface qualify references with declaring class name qualifyreferenceswithdeclaringclassname f qualify references with declaring class name fqualifyreferenceswithdeclaringclassname set qualify references with declaring class name setqualifyreferenceswithdeclaringclassname qualify f qualify references with declaring class name fqualifyreferenceswithdeclaringclassname qualify string guess constant name guessconstantname string proposals guess constant names guessconstantnames proposals length proposals f constant name fconstantname proposed variable names empty proposal guess exists string guess constant names guessconstantnames f guessed const names fguessedconstnames expression expression get selected expression getselectedexpression get associated expression getassociatedexpression expression i type binding itypebinding binding guess binding for reference guessbindingforreference expression f guessed const names fguessedconstnames stub utility stubutility get variable name suggestions getvariablenamesuggestions naming conventions namingconventions field f cu fcu get java project getjavaproject binding expression arrays as list aslist get excluded variable names getexcludedvariablenames java model exception javamodelexception f guessed const names fguessedconstnames f guessed const names fguessedconstnames string f guessed const names fguessedconstnames string get excluded variable names getexcludedvariablenames f excluded variable names fexcludedvariablenames i expression fragment iexpressionfragment expr get selected expression getselectedexpression collection string taken names takennames scope analyzer scopeanalyzer f cu rewrite fcurewrite get root getroot get used variable names getusedvariablenames expr get start position getstartposition expr get length getlength f excluded variable names fexcludedvariablenames taken names takennames to array toarray string taken names takennames size java model exception javamodelexception f excluded variable names fexcludedvariablenames string f excluded variable names fexcludedvariablenames override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception nls begin task begintask refactoring status refactoringstatus result checks validate edit validateedit f cu fcu get validation context getvalidationcontext result has fatal error hasfatalerror result worked f cu rewrite fcurewrite compilation unit compilationunit cu node cunode refactoringastparser parsewithastprovider f cu fcu sub progress monitor subprogressmonitor f cu rewrite fcurewrite compilation unit rewrite compilationunitrewrite f cu fcu cu node cunode worked result merge check selection checkselection sub progress monitor subprogressmonitor result has fatal error hasfatalerror result is literal node selected isliteralnodeselected f replace all occurrences freplacealloccurrences is in type declaration annotation isintypedeclarationannotation get selected expression getselectedexpression get associated node getassociatednode f visibility fvisibility jdt flags jdtflags visibility string i type binding itypebinding target type targettype get containing type binding getcontainingtypebinding target type targettype is interface isinterface f target is interface ftargetisinterface f visibility fvisibility jdt flags jdtflags visibility string result selection all static final selectionallstaticfinal is true istrue f all static final check performed fallstaticfinalcheckperformed f selection all static final fselectionallstaticfinal check all static final checkallstaticfinal java model exception javamodelexception f selection all static final fselectionallstaticfinal constant checks constantchecks is static final constant isstaticfinalconstant get selected expression getselectedexpression f all static final check performed fallstaticfinalcheckperformed refactoring status refactoringstatus check selection checkselection i progress monitor iprogressmonitor java model exception javamodelexception nls begin task begintask i expression fragment iexpressionfragment selected expression selectedexpression get selected expression getselectedexpression selected expression selectedexpression string message refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring select expression code refactoring util coderefactoringutil check method syntax errors checkmethodsyntaxerrors f selection start fselectionstart f selection length fselectionlength f cu rewrite fcurewrite get root getroot message worked refactoring status refactoringstatus result refactoring status refactoringstatus result merge check expression checkexpression result has fatal error hasfatalerror result worked result refactoring status refactoringstatus check expression binding checkexpressionbinding java model exception javamodelexception check expression fragment is value checkexpressionfragmentisrvalue refactoring status refactoringstatus check expression fragment is value checkexpressionfragmentisrvalue java model exception javamodelexception moved functionality checks sharing extract temp refactoring extracttemprefactoring checks check expression is value checkexpressionisrvalue get selected expression getselectedexpression get associated expression getassociatedexpression checks rvalue misc refactoring status refactoringstatus create status createstatus refactoring status refactoringstatus fatal refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring select expression core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes expression rvalue checks rvalue refactoring status refactoringstatus create status createstatus refactoring status refactoringstatus fatal refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring core xt corext get plugin id getpluginid refactoring status codes refactoringstatuscodes expression rvalue checks rvalue guessed checks rvalue refactoring status refactoringstatus is true istrue i type binding itypebinding guess binding for reference guessbindingforreference expression expression i type binding itypebinding binding expression resolve type binding resolvetypebinding binding binding ast res olving astresolving guess binding for reference guessbindingforreference expression binding extract temp refactoring extracttemprefactoring is literal node selected isliteralnodeselected java model exception javamodelexception i expression fragment iexpressionfragment fragment get selected expression getselectedexpression fragment expression expression fragment get associated expression getassociatedexpression expression expression get node type getnodetype ast node astnode literal ast node astnode character literal ast node astnode literal ast node astnode number literal refactoring status refactoringstatus check expression checkexpression java model exception javamodelexception refactoring status refactoringstatus result refactoring status refactoringstatus result merge check expression binding checkexpressionbinding result has fatal error hasfatalerror result check all static final checkallstaticfinal i expression fragment iexpressionfragment selected expression selectedexpression get selected expression getselectedexpression expression associated expression associatedexpression selected expression selectedexpression get associated expression getassociatedexpression associated expression associatedexpression null literal nullliteral result merge refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring literals constant checks constantchecks is load time constant isloadtimeconstant selected expression selectedexpression result merge refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring load time constant associated expression associatedexpression simple name simplename associated expression associatedexpression get parent getparent qualified name qualifiedname associated expression associatedexpression get location in parent getlocationinparent qualified name qualifiedname property associated expression associatedexpression get parent getparent field access fieldaccess associated expression associatedexpression get location in parent getlocationinparent field access fieldaccess property refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring select expression result set constant name setconstantname string new name newname is not null isnotnull new name newname f constant name fconstantname new name newname string get constant name getconstantname f constant name fconstantname method performs checks constant quick performed time input component contents changed status java model exception javamodelexception thrown operation executed refactoring status refactoringstatus check constant name on change checkconstantnameonchange java model exception javamodelexception arrays as list aslist get excluded variable names getexcludedvariablenames f constant name fconstantname refactoring status refactoringstatus create error status createerrorstatus messages format refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring variable basic element labels basicelementlabels get java element name getjavaelementname get constant name getconstantname checks check constant name checkconstantname f constant name fconstantname f cu fcu extract temp refactoring extracttemprefactoring equivalent string get constant signature preview getconstantsignaturepreview java model exception javamodelexception nls string space get visibility getvisibility space modifier space get constant type name getconstanttypename space f constant name fconstantname compilation unit change compilationunitchange create text change createtextchange i progress monitor iprogressmonitor core exception coreexception create constant declaration createconstantdeclaration replace expressions with constant replaceexpressionswithconstant f cu rewrite fcurewrite create change createchange refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring change override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception begin task begintask refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring checking preconditions refactoring status refactoringstatus result refactoring status refactoringstatus create constant declaration createconstantdeclaration replace expressions with constant replaceexpressionswithconstant f change fchange f cu rewrite fcurewrite create change createchange refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring change sub progress monitor subprogressmonitor f check result for compile problems fcheckresultforcompileproblems check source checksource sub progress monitor subprogressmonitor result result f constant type cache fconstanttypecache f cu rewrite fcurewrite clearastandimportrewrites check source checksource sub progress monitor subprogressmonitor monitor refactoring status refactoringstatus result core exception coreexception string new cu source newcusource f change fchange get preview content getpreviewcontent null progress monitor nullprogressmonitor compilation unit compilationunit newcunode refactoringastparser ast provider astprovider shared ast level parse new cu source newcusource f cu fcu monitor i problem iproblem new problems newproblems refactoring analyze util refactoringanalyzeutil get introduce d compile problems getintroducedcompileproblems newcunode f cu rewrite fcurewrite get root getroot new problems newproblems length i problem iproblem problem new problems newproblems problem is error iserror result add entry addentry refactoring status entry refactoringstatusentry problem is error iserror refactoring status refactoringstatus error refactoring status refactoringstatus warning problem get message getmessage java string status context javastringstatuscontext new cu source newcusource source range factory sourcerangefactory create problem create constant declaration createconstantdeclaration core exception coreexception type type get constant type getconstanttype i expression fragment iexpressionfragment fragment get selected expression getselectedexpression expression initializer get selected expression getselectedexpression create copy target createcopytarget f cu rewrite fcurewrite getastrewrite ast ast f cu rewrite fcurewrite getast variable declaration fragment variabledeclarationfragment variable declaration fragment variabledeclarationfragment ast new variable declaration fragment newvariabledeclarationfragment variable declaration fragment variabledeclarationfragment set name setname ast new simple name newsimplename f constant name fconstantname variable declaration fragment variabledeclarationfragment set initializer setinitializer initializer field declaration fielddeclaration field declaration fielddeclaration ast new field declaration newfielddeclaration variable declaration fragment variabledeclarationfragment field declaration fielddeclaration set type settype type modifier modifier keyword modifierkeyword access modifier accessmodifier modifier modifier keyword modifierkeyword to keyword tokeyword f visibility fvisibility access modifier accessmodifier field declaration fielddeclaration modifiers add ast new modifier newmodifier access modifier accessmodifier field declaration fielddeclaration modifiers add ast new modifier newmodifier modifier modifier keyword modifierkeyword keyword field declaration fielddeclaration modifiers add ast new modifier newmodifier modifier modifier keyword modifierkeyword keyword create comments createcomments java preferences settings javapreferencessettings get code generation settings getcodegenerationsettings f cu fcu get java project getjavaproject create comments createcomments create comments createcomments string comment code generation codegeneration get field comment getfieldcomment f cu fcu get constant type name getconstanttypename f constant name fconstantname stub utility stubutility get line delimiter used getlinedelimiterused f cu fcu comment comment length javadoc doc javadoc f cu rewrite fcurewrite getastrewrite create string placeholder createstringplaceholder comment ast node astnode javadoc field declaration fielddeclaration set javadoc setjavadoc doc abstract type declaration abstracttypedeclaration parent get containing type declaration node getcontainingtypedeclarationnode list rewrite listrewrite list rewrite listrewrite f cu rewrite fcurewrite getastrewrite get list rewrite getlistrewrite parent parent get body declarations property getbodydeclarationsproperty text edit group texteditgroup msg f cu rewrite fcurewrite create group description creategroupdescription refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring declare constant insert first insertfirst list rewrite listrewrite insert first insertfirst field declaration fielddeclaration msg list rewrite listrewrite insert after insertafter field declaration fielddeclaration get node to insert constant declaration after getnodetoinsertconstantdeclarationafter msg f linked proposal model flinkedproposalmodel ast rewrite astrewrite rewrite f cu rewrite fcurewrite getastrewrite linked proposal position group linkedproposalpositiongroup name group namegroup f linked proposal model flinkedproposalmodel get position group getpositiongroup key name group namegroup add position addposition rewrite track variable declaration fragment variabledeclarationfragment get name getname string name suggestions namesuggestions guess constant names guessconstantnames name suggestions namesuggestions length name suggestions namesuggestions equals f constant name fconstantname name group namegroup add proposal addproposal f constant name fconstantname name suggestions namesuggestions length name suggestions namesuggestions length name group namegroup add proposal addproposal name suggestions namesuggestions name suggestions namesuggestions length linked proposal position group linkedproposalpositiongroup type group typegroup f linked proposal model flinkedproposalmodel get position group getpositiongroup key type type group typegroup add position addposition rewrite track type i type binding itypebinding type binding typebinding guess binding for reference guessbindingforreference fragment get associated expression getassociatedexpression type binding typebinding i type binding itypebinding rel axing types relaxingtypes ast res olving astresolving get narrowing types getnarrowingtypes ast type binding typebinding rel axing types relaxingtypes length type group typegroup add proposal addproposal rel axing types relaxingtypes f cu rewrite fcurewrite get cu getcu rel axing types relaxingtypes length is interface isinterface parent resolve binding resolvebinding parent resolve binding resolvebinding is interface isinterface modifier correction sub processor modifiercorrectionsubprocessor install linked visibility proposals installlinkedvisibilityproposals f linked proposal model flinkedproposalmodel rewrite field declaration fielddeclaration modifiers is interface isinterface type get constant type getconstanttype java model exception javamodelexception f constant type cache fconstanttypecache i expression fragment iexpressionfragment fragment get selected expression getselectedexpression i type binding itypebinding type binding typebinding guess binding for reference guessbindingforreference fragment get associated expression getassociatedexpression ast ast f cu rewrite fcurewrite getast type binding typebinding bindings normalize for declaration use normalizefordeclarationuse type binding typebinding ast import rewrite importrewrite import rewrite importrewrite f cu rewrite fcurewrite get import rewrite getimportrewrite import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext f cu rewrite fcurewrite get root getroot f selection start fselectionstart import rewrite importrewrite f constant type cache fconstanttypecache import rewrite importrewrite add import addimport type binding typebinding ast context f constant type cache fconstanttypecache override change create change createchange i progress monitor iprogressmonitor monitor core exception coreexception extract constant descriptor extractconstantdescriptor descriptor create refactoring descriptor createrefactoringdescriptor f change fchange set descriptor setdescriptor refactoring change descriptor refactoringchangedescriptor descriptor f change fchange extract constant descriptor extractconstantdescriptor create refactoring descriptor createrefactoringdescriptor map string string arguments hash map hashmap string project i java project ijavaproject java project javaproject f cu fcu get java project getjavaproject java project javaproject project java project javaproject get element name getelementname flags java refactoring descriptor javarefactoringdescriptor jar refactoring java refactoring descriptor javarefactoringdescriptor jar source attachment jdt flags jdtflags get visibility code getvisibilitycode f visibility fvisibility modifier flags refactoring descriptor refactoringdescriptor structural change string expression ast nodes astnodes as string asstring f selected expression fselectedexpression get associated expression getassociatedexpression string description messages format refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring descriptor description basic element labels basicelementlabels get java element name getjavaelementname f constant name fconstantname string header messages format refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring descriptor description string basic element labels basicelementlabels get java element name getjavaelementname f constant name fconstantname basic element labels basicelementlabels get java code string getjavacodestring expression jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header comment add setting addsetting messages format refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring constant pattern basic element labels basicelementlabels get java element name getjavaelementname f constant name fconstantname comment add setting addsetting messages format refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring constant expression pattern basic element labels basicelementlabels get java code string getjavacodestring expression string visibility f visibility fvisibility nls equals visibility visibility refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring visibility comment add setting addsetting messages format refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring visibility pattern visibility f replace all occurrences freplacealloccurrences comment add setting addsetting refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring replace occurrences f qualify references with declaring class name fqualifyreferenceswithdeclaringclassname comment add setting addsetting refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring qualify references arguments java refactoring descriptor util javarefactoringdescriptorutil attribute input java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f cu fcu arguments java refactoring descriptor util javarefactoringdescriptorutil attribute f constant name fconstantname nls arguments java refactoring descriptor util javarefactoringdescriptorutil attribute selection integer f selection start fselectionstart to string tostring integer f selection length fselectionlength to string tostring arguments attribute replace value of valueof f replace all occurrences freplacealloccurrences to string tostring arguments attribute qualify value of valueof f qualify references with declaring class name fqualifyreferenceswithdeclaringclassname to string tostring arguments attribute visibility integer jdt flags jdtflags get visibility code getvisibilitycode f visibility fvisibility to string tostring extract constant descriptor extractconstantdescriptor descriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create extract constant descriptor createextractconstantdescriptor project description comment as string asstring arguments flags descriptor replace expressions with constant replaceexpressionswithconstant java model exception javamodelexception ast rewrite astrewrite ast rewrite astrewrite f cu rewrite fcurewrite getastrewrite ast ast ast rewrite astrewrite getast iast fragment iastfragment fragments to replace fragmentstoreplace get fragments to replace getfragmentstoreplace fragments to replace fragmentstoreplace length iast fragment iastfragment fragment fragments to replace fragmentstoreplace ast node astnode node fragment get associated node getassociatednode in type declaration annotation intypedeclarationannotation is in type declaration annotation isintypedeclarationannotation node in type declaration annotation intypedeclarationannotation jdt flags jdtflags visibility string get visibility getvisibility simple name simplename ast new simple name newsimplename f constant name fconstantname replacement qualify reference qualifyreference qualify references with declaring class name qualifyreferenceswithdeclaringclassname qualify reference qualifyreference qualify reference qualifyreference in type declaration annotation intypedeclarationannotation qualify reference qualifyreference replacement ast new qualified name newqualifiedname ast new simple name newsimplename get containing type binding getcontainingtypebinding get name getname text edit group texteditgroup description f cu rewrite fcurewrite create group description creategroupdescription refactoring core messages refactoringcoremessages extract constant refactoring extractconstantrefactoring replace fragment replace ast rewrite astrewrite replacement description f linked proposal model flinkedproposalmodel f linked proposal model flinkedproposalmodel get position group getpositiongroup key add position addposition ast rewrite astrewrite track is in type declaration annotation isintypedeclarationannotation ast node astnode node java model exception javamodelexception ast node astnode enclosing annotation enclosingannotation ast nodes astnodes get parent getparent node annotation enclosing annotation enclosingannotation enclosing annotation enclosingannotation get parent getparent get containing type declaration node getcontainingtypedeclarationnode compute constant declaration location computeconstantdeclarationlocation java model exception javamodelexception is declaration location computed isdeclarationlocationcomputed body declaration bodydeclaration last static dependency laststaticdependency iterator body declaration bodydeclaration decls get containing type declaration node getcontainingtypedeclarationnode body declarations bodydeclarations iterator decls has next hasnext body declaration bodydeclaration decl decls modifiers decl field declaration fielddeclaration modifiers field declaration fielddeclaration decl get modifiers getmodifiers decl initializer modifiers initializer decl get modifiers getmodifiers declaration field declaration initializer placement constant declaration relative matter modifier is static isstatic modifiers depends get selected expression getselectedexpression decl last static dependency laststaticdependency decl last static dependency laststaticdependency f insert first finsertfirst f to insert after ftoinsertafter last static dependency laststaticdependency field declaration initializer depends i expression fragment iexpressionfragment selected body declaration bodydeclaration field declaration fielddeclaration field declaration fielddeclaration field decl fielddecl field declaration fielddeclaration iterator variable declaration fragment variabledeclarationfragment fragments field decl fielddecl fragments iterator fragments has next hasnext variable declaration fragment variabledeclarationfragment fragment fragments simple name simplename static field name staticfieldname fragment get name getname selected get sub fragments matching getsubfragmentsmatching ast fragment factory astfragmentfactory create fragment for full subtree createfragmentforfullsubtree static field name staticfieldname length is declaration location computed isdeclarationlocationcomputed f insert first finsertfirst f to insert after ftoinsertafter insert first insertfirst java model exception javamodelexception is declaration location computed isdeclarationlocationcomputed compute constant declaration location computeconstantdeclarationlocation f insert first finsertfirst body declaration bodydeclaration get node to insert constant declaration after getnodetoinsertconstantdeclarationafter java model exception javamodelexception is declaration location computed isdeclarationlocationcomputed compute constant declaration location computeconstantdeclarationlocation f to insert after ftoinsertafter string get constant type name getconstanttypename java model exception javamodelexception ast nodes astnodes as string asstring get constant type getconstanttype is static field or static initializer isstaticfieldorstaticinitializer body declaration bodydeclaration node node method declaration methoddeclaration node abstract type declaration abstracttypedeclaration modifiers node field declaration fielddeclaration modifiers field declaration fielddeclaration node get modifiers getmodifiers node initializer modifiers initializer node get modifiers getmodifiers is true istrue modifier is static isstatic modifiers elements returned body declaration bodydeclaration annotation instances iterator ast node astnode get replacement scope getreplacementscope java model exception javamodelexception decl predecessor reached declpredecessorreached collection ast node astnode scope array list arraylist abstract type declaration abstracttypedeclaration containing type containingtype get containing type declaration node getcontainingtypedeclarationnode containing type containingtype enum declaration enumdeclaration replace enum constants bodies enum declaration enumdeclaration enum declaration enumdeclaration enum declaration enumdeclaration containing type containingtype scope add all addall enum declaration enumdeclaration enum constants enumconstants iterator i extended modifier iextendedmodifier iter containing type containingtype modifiers iterator iter has next hasnext i extended modifier iextendedmodifier modifier iter modifier annotation scope add ast node astnode modifier iterator body declaration bodydeclaration body declarations bodydeclarations containing type containingtype body declarations bodydeclarations iterator body declarations bodydeclarations has next hasnext body declaration bodydeclaration body declaration bodydeclaration body declarations bodydeclarations body declaration bodydeclaration get node to insert constant declaration after getnodetoinsertconstantdeclarationafter decl predecessor reached declpredecessorreached insert first insertfirst decl predecessor reached declpredecessorreached is static field or static initializer isstaticfieldorstaticinitializer body declaration bodydeclaration scope add body declaration bodydeclaration scope iterator iast fragment iastfragment get fragments to replace getfragmentstoreplace java model exception javamodelexception list iast fragment iastfragment to replace toreplace array list arraylist f replace all occurrences freplacealloccurrences iterator ast node astnode replacement scope replacementscope get replacement scope getreplacementscope replacement scope replacementscope has next hasnext ast node astnode scope replacement scope replacementscope iast fragment iastfragment all matches allmatches ast fragment factory astfragmentfactory create fragment for full subtree createfragmentforfullsubtree scope get sub fragments matching getsubfragmentsmatching get selected expression getselectedexpression iast fragment iastfragment replace able matches replaceablematches retain only rep lacable matches retainonlyreplacablematches all matches allmatches replace able matches replaceablematches length to replace toreplace add replace able matches replaceablematches can replace canreplace get selected expression getselectedexpression to replace toreplace add get selected expression getselectedexpression to replace toreplace to array toarray iast fragment iastfragment to replace toreplace size extract temp refactoring extracttemprefactoring iast fragment iastfragment retain only rep lacable matches retainonlyreplacablematches iast fragment iastfragment all matches allmatches list iast fragment iastfragment result array list arraylist all matches allmatches length all matches allmatches length can replace canreplace all matches allmatches result add all matches allmatches result to array toarray iast fragment iastfragment result size extract temp refactoring extracttemprefactoring can replace canreplace iast fragment iastfragment fragment ast node astnode node fragment get associated node getassociatednode ast node astnode parent node get parent getparent parent variable declaration fragment variabledeclarationfragment variable declaration fragment variabledeclarationfragment vdf variable declaration fragment variabledeclarationfragment parent node equals vdf get name getname parent expression statement expressionstatement parent switch case switchcase node node i type binding itypebinding type binding typebinding resolve type binding resolvetypebinding type binding typebinding type binding typebinding is enum isenum i expression fragment iexpressionfragment get selected expression getselectedexpression java model exception javamodelexception f selected expression fselectedexpression f selected expression fselectedexpression iast fragment iastfragment selected fragment selectedfragment ast fragment factory astfragmentfactory create fragment for source range createfragmentforsourcerange source range sourcerange f selection start fselectionstart f selection length fselectionlength f cu rewrite fcurewrite get root getroot f cu fcu selected fragment selectedfragment i expression fragment iexpressionfragment checks is inside javadoc isinsidejavadoc selected fragment selectedfragment get associated node getassociatednode f selected expression fselectedexpression i expression fragment iexpressionfragment selected fragment selectedfragment f selected expression fselectedexpression checks is enum case isenumcase f selected expression fselectedexpression get associated expression getassociatedexpression get parent getparent f selected expression fselectedexpression f selected expression fselectedexpression returns type constant anonymous parent type add constant java model exception javamodelexception should n shouldn happen abstract type declaration abstracttypedeclaration get containing type declaration node getcontainingtypedeclarationnode java model exception javamodelexception abstract type declaration abstracttypedeclaration result abstract type declaration abstracttypedeclaration ast nodes astnodes get parent getparent get selected expression getselectedexpression get associated node getassociatednode abstract type declaration abstracttypedeclaration is not null isnotnull result result i type binding itypebinding get containing type binding getcontainingtypebinding java model exception javamodelexception i type binding itypebinding result get containing type declaration node getcontainingtypedeclarationnode resolve binding resolvebinding is not null isnotnull result result refactoring status refactoringstatus initialize java refactoring arguments javarefactoringarguments arguments string selection arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute selection selection offset length string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer selection tokenizer has more tokens hasmoretokens offset integer value of valueof tokenizer next token nexttoken int value intvalue tokenizer has more tokens hasmoretokens length integer value of valueof tokenizer next token nexttoken int value intvalue offset length f selection start fselectionstart offset f selection length fselectionlength length refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring illegal argument object selection java refactoring descriptor util javarefactoringdescriptorutil attribute selection refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute selection string handle arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute input handle i java element ijavaelement element java refactoring descriptor util javarefactoringdescriptorutil handle to element handletoelement arguments get project getproject handle element element exists element get element type getelementtype i java element ijavaelement compilation unit java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get name getname i java refactorings ijavarefactorings extract constant f cu fcu i compilation unit icompilationunit element refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute input string visibility arguments get attribute getattribute attribute visibility nls visibility equals visibility flag flag integer parse int parseint visibility number format exception numberformatexception exception refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute visibility f visibility fvisibility jdt flags jdtflags get visibility string getvisibilitystring flag string arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute nls equals f constant name fconstantname refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute string replace arguments get attribute getattribute attribute replace replace f replace all occurrences freplacealloccurrences value of valueof replace boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute replace string declare final declarefinal arguments get attribute getattribute attribute qualify declare final declarefinal f qualify references with declaring class name fqualifyreferenceswithdeclaringclassname value of valueof declare final declarefinal boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute qualify refactoring status refactoringstatus