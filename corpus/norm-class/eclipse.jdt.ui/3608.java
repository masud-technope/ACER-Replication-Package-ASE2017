copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation nikolay metchev nikolaymetchev gmail int roduce introduce indirection class cast exception classcastexception intro ducing introducing indirection method https bugs eclipse org nikolay metchev nikolaymetchev gmail int roduce introduce indirection adds unneccessary parameter surrounding https bugs eclipse org org eclipse jdt tests refactoring java io exception ioexception junit framework test junit framework test suite testsuite org eclipse jdt test plugin testplugin java project helper javaprojecthelper org eclipse core runtime core exception coreexception org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i source range isourcerange org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt internal corext refactoring code introduce indirection refactoring introduceindirectionrefactoring org eclipse jdt tests refactoring infra text range util textrangeutil introduce indirection tests introduceindirectiontests refactoring test refactoringtest introduce indirection tests introduceindirectiontests clazz introduce indirection tests introduceindirectiontests string refactoring path introduce indirection introduceindirection introduce indirection tests introduceindirectiontests string override string get refactoring path getrefactoringpath refactoring path test suite refactoring test setup refactoringtestsetup test suite testsuite clazz test set up test setuptest test test refactoring test setup refactoringtestsetup test invokes int roduce introduce indirection point ers pointers param top level name toplevelname array fully qualified top level type names prefix foo simple names correspond java files invocation refactoring pos itioning positioning param new name newname indirection method param q type name qtypename qualified type type indirection method cus top level name toplevelname param start line startline starting selection top level name toplevelname param start column startcolumn starting column selection top level name toplevelname param end line endline selection top level name toplevelname param end column endcolumn column selection top level name toplevelname param update references updatereferences references updated param should warn shouldwarn warnings expected result param should error shoulderror errors expected result param should fail shouldfail fatal errors expected result exception java model exception javamodelexception core exception coreexception io exception ioexception helper string top level name toplevelname string new name newname string q type name qtypename start line startline start column startcolumn end line endline end column endcolumn update references updatereferences should warn shouldwarn should error shoulderror should fail shouldfail exception java model exception javamodelexception core exception coreexception io exception ioexception i compilation unit icompilationunit i compilation unit icompilationunit top level name toplevelname length top level name toplevelname length string pack name packname top level name toplevelname substring top level name toplevelname index of indexof string class name classname top level name toplevelname substring top level name toplevelname index of indexof i package fragment ipackagefragment c package cpackage get root getroot create package fragment createpackagefragment pack name packname create ufrom test file createcufromtestfile c package cpackage class name classname i source range isourcerange selection text range util textrangeutil get selection getselection start line startline start column startcolumn end line endline end column endcolumn introduce indirection refactoring introduceindirectionrefactoring introduce indirection refactoring introduceindirectionrefactoring selection get offset getoffset selection get length getlength set enable update references setenableupdatereferences update references updatereferences q type name qtypename set int ermediary type name setintermediarytypename q type name qtypename new name newname set int ermediary method name setintermediarymethodname new name newname failed refactoring status refactoringstatus status perform refactoring with status performrefactoringwithstatus status has fatal error hasfatalerror assert true asserttrue failed should n shouldn status get message matching severity getmessagematchingseverity refactoring status refactoringstatus fatal should fail shouldfail failed assert false assertfalse didn fail expected should fail shouldfail failed status has error haserror assert true asserttrue errors should n shouldn status get message matching severity getmessagematchingseverity refactoring status refactoringstatus error should error shoulderror assert false assertfalse error expected should error shoulderror status has warning haswarning assert true asserttrue warnings should n shouldn status get message matching severity getmessagematchingseverity refactoring status refactoringstatus warning should warn shouldwarn assert false assertfalse warning expected should warn shouldwarn top level name toplevelname length string class name classname top level name toplevelname substring top level name toplevelname index of indexof assert equal lines assertequallines invalid output get file contents getfilecontents get output test file name getoutputtestfilename class name classname get source getsource top level name toplevelname length java project helper javaprojecthelper delete helper pass helperpass string top level name toplevelname string new name newname string target start line startline start column startcolumn end line endline end column endcolumn exception helper top level name toplevelname new name newname target start line startline start column startcolumn end line endline end column endcolumn helper warn helperwarn string top level name toplevelname string new name newname string target start line startline start column startcolumn end line endline end column endcolumn exception helper top level name toplevelname new name newname target start line startline start column startcolumn end line endline end column endcolumn helper err helpererr string top level name toplevelname string new name newname string target start line startline start column startcolumn end line endline end column endcolumn exception helper top level name toplevelname new name newname target start line startline start column startcolumn end line endline end column endcolumn helper fail helperfail string top level name toplevelname string new name newname string target start line startline start column startcolumn end line endline end column endcolumn exception helper top level name toplevelname new name newname target start line startline start column startcolumn end line endline end column endcolumn test exception simple test helper pass helperpass string foo bar foo test exception warning call helper warn helperwarn string bar test exception add imports target helper pass helperpass string foo bar bar bar test exception qualification type method declaration type helper pass helperpass string foo bar foo test exception qualification type method declaration type type helper pass helperpass string foo bar bar foo test exception qualification current type method declaration type current type helper pass helperpass string foo bar bar foo test exception test qualification anonymous type warning don update helper warn helperwarn string bar test exception open hierarchy failure helper fail helperfail string sea level sealevel eiger moench bar sea level sealevel test exception create int ermediary intermediary helper pass helperpass string foo bar foo test exception error method exists helper err helpererr string foo bar foo foo test exception test clash existing argument helper pass helperpass string foo bar foo test exception int ermediary intermediary type helper fail helperfail string foo bar foo test exception create int ermediary intermediary nested types helper pass helperpass string foo bar bar foo more inner moreinner test exception raise visibility target int ermediary intermediary sees helper warn helperwarn string foo bar bar bar test exception raise visibility int ermediary intermediary type existing references helper warn helperwarn string foo bar bar bar test exception test reference mode method invocation selected helper string bar foo bar bar test exception target method helper pass helperpass string foo bar foo test exception simple test type unused get root getroot get java project getjavaproject set option setoption java core javacore compiler missing javadoc tags method type parameters java core javacore enabled helper pass helperpass string foo bar foo get root getroot get java project getjavaproject set option setoption java core javacore compiler missing javadoc tags method type parameters java core javacore disabled test exception simple test type helper pass helperpass string foo bar foo test exception complex type parameters method parameters helper pass helperpass string foo bar foo test exception call updating type arguments helper warn helperwarn string foo bar foo test exception method type parameters enclosing types helper pass helperpass string foo bar foo test exception warn incorrect qualified calls don update helper warn helperwarn string foo bar foo test exception assure common type hierarchy branches helper pass helperpass string foo bar foo test exception inc rease increase visibility overridden methods helper warn helperwarn string foo sub foo subfoo bar bar bar test exception ensure exceptions copied helper pass helperpass string foo bar foo test exception complex visibility adjustment target method target type overridden target type inc reased increased overridden methods inc reased increased helper warn helperwarn string foo real foo realfoo non original sub foo nonoriginalsubfoo very super foo verysuperfoo bar bar bar test exception template int ermediary intermediary method real target parameter names exceptions helper warn helperwarn string foo bar bar foo test exception don adjust visibility helper warn helperwarn string test bar test exception multiple ins tantiations instantiations helper pass helperpass string multi generics multigenerics bar multi generics multigenerics test exception test bug helper pass helperpass string test foo test test exception test bug helper pass helperpass string test foo test test exception test bug helper string test foo test test exception test bug helper pass helperpass string test foo test test exception test bug helper pass helperpass string test foo test test exception test bug helper pass helperpass string test foo test test exception test bug helper pass helperpass string test foo test test exception test bug helper pass helperpass string test foo test