copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann offer command annotate class file editor classfileeditor https bugs eclipse org org eclipse jdt internal text correction java util array list arraylist java util iterator org eclipse swt graphics point org eclipse swt widgets shell org eclipse core runtime org eclipse jface text bad location exception badlocationexception org eclipse jface text default information control defaultinformationcontrol org eclipse jface text i document idocument org eclipse jface text i information control iinformationcontrol org eclipse jface text i information control creator iinformationcontrolcreator org eclipse jface text i region iregion org eclipse jface text i text viewer itextviewer org eclipse jface text position org eclipse jface text contentassist content assist event contentassistevent org eclipse jface text contentassist i completion listener icompletionlistener org eclipse jface text contentassist i completion proposal icompletionproposal org eclipse jface text quickassist i quick assist assistant iquickassistassistant org eclipse jface text quickassist i quick assist processor iquickassistprocessor org eclipse jface text quickassist quick assist assistant quickassistassistant org eclipse jface text source annotation org eclipse jface text source i annotation model iannotationmodel org eclipse jface text source i source viewer isourceviewer org eclipse i editor part ieditorpart org eclipse i workbench preference constants iworkbenchpreferenceconstants org eclipse platformui org eclipse texteditor i document provider idocumentprovider org eclipse texteditor i text editor itexteditor org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt javaui org eclipse jdt sharedastprovider org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor class file editor classfileeditor java correction assistant javacorrectionassistant quick assist assistant quickassistassistant i text viewer itextviewer f viewer fviewer i text editor itexteditor f editor feditor position f position fposition annotation f current annotations fcurrentannotations quick assist light bulb updater quickassistlightbulbupdater f light bulb updater flightbulbupdater f is completion active fiscompletionactive f is problem location available fisproblemlocationavailable constructor java correction assistant javacorrectionassistant param editor editor java correction assistant javacorrectionassistant i text editor itexteditor editor is not null isnotnull editor f editor feditor editor i quick assist processor iquickassistprocessor processor editor class file editor classfileeditor processor external null annotation quick assist processor externalnullannotationquickassistprocessor processor java correction processor javacorrectionprocessor set quick assist processor setquickassistprocessor processor enable colored labels enablecoloredlabels platformui get preference store getpreferencestore get boolean getboolean i workbench preference constants iworkbenchpreferenceconstants colored labels set information control creator setinformationcontrolcreator get information control creator getinformationcontrolcreator add completion listener addcompletionlistener i completion listener icompletionlistener override assist session ended assistsessionended content assist event contentassistevent event f is completion active fiscompletionactive override assist session started assistsessionstarted content assist event contentassistevent event f is completion active fiscompletionactive override selection changed selectionchanged i completion proposal icompletionproposal proposal smart toggle smarttoggle i editor part ieditorpart get editor geteditor f editor feditor i information control creator iinformationcontrolcreator get information control creator getinformationcontrolcreator i information control creator iinformationcontrolcreator override i information control iinformationcontrol create information control createinformationcontrol shell parent default information control defaultinformationcontrol parent java plugin javaplugin get additional info affordance string getadditionalinfoaffordancestring override install i source viewer isourceviewer source viewer sourceviewer install source viewer sourceviewer f viewer fviewer source viewer sourceviewer f light bulb updater flightbulbupdater quick assist light bulb updater quickassistlightbulbupdater f editor feditor source viewer sourceviewer f light bulb updater flightbulbupdater install override uninstall f light bulb updater flightbulbupdater f light bulb updater flightbulbupdater uninstall f light bulb updater flightbulbupdater uninstall org eclipse jface text quickassist quick assist assistant quickassistassistant show possible quick assists showpossiblequickassists completions caret position current position quick fixes quick moving left rest arting restarting reached i quick assist assistant iquickassistassistant show possible quick assists showpossiblequickassists override string show possible quick assists showpossiblequickassists is reinvoked isreinvoked f is problem location available fisproblemlocationavailable f is completion active fiscompletionactive is updated offset isupdatedoffset is reinvoked isreinvoked restore position restoreposition hide f is problem location available fisproblemlocationavailable f position fposition f current annotations fcurrentannotations f viewer fviewer f viewer fviewer get document getdocument superclass deal show possible quick assists showpossiblequickassists array list arraylist annotation resulting annotations resultingannotations array list arraylist point selected range selectedrange f viewer fviewer get selected range getselectedrange curr offset curroffset selected range selectedrange curr length currlength selected range selectedrange go to closest gotoclosest curr length currlength is reinvoked isreinvoked new offset newoffset collect quick fix able annotations collectquickfixableannotations f editor feditor curr offset curroffset go to closest gotoclosest resulting annotations resultingannotations new offset newoffset curr offset curroffset store position storeposition curr offset curroffset curr length currlength f viewer fviewer set selected range setselectedrange new offset newoffset f viewer fviewer reveal range revealrange new offset newoffset f is problem location available fisproblemlocationavailable f is completion active fiscompletionactive hide bad location exception badlocationexception java plugin javaplugin log f current annotations fcurrentannotations resulting annotations resultingannotations to array toarray annotation resulting annotations resultingannotations size show possible quick assists showpossiblequickassists i region iregion get region of int erest getregionofinterest i text editor itexteditor editor invocation location invocationlocation bad location exception badlocationexception i document provider idocumentprovider document provider documentprovider editor get document provider getdocumentprovider document provider documentprovider i document idocument document document provider documentprovider get document getdocument editor get editor input geteditorinput document document get line information of offset getlineinformationofoffset invocation location invocationlocation collect quick fix able annotations collectquickfixableannotations i text editor itexteditor editor invocation location invocationlocation go to closest gotoclosest array list arraylist annotation resulting annotations resultingannotations bad location exception badlocationexception i annotation model iannotationmodel model javaui get document provider getdocumentprovider get annotation model getannotationmodel editor get editor input geteditorinput model invocation location invocationlocation ensure updated annotations ensureupdatedannotations editor iterator annotation iter model get annotation iterator getannotationiterator go to closest gotoclosest i region iregion line info lineinfo get region of int erest getregionofinterest editor invocation location invocationlocation line info lineinfo invocation location invocationlocation range start rangestart line info lineinfo get offset getoffset range end rangeend range start rangestart line info lineinfo get length getlength array list arraylist annotation all annotations allannotations array list arraylist array list arraylist position all positions allpositions array list arraylist best offset bestoffset integer max iter has next hasnext annotation annot iter java correction processor javacorrectionprocessor is quick fix able type isquickfixabletype annot position pos model get position getposition annot range pos is inside isinside pos offset range start rangestart range end rangeend all annotations allannotations add annot all positions allpositions add pos best offset bestoffset process annotation processannotation annot pos invocation location invocationlocation best offset bestoffset best offset bestoffset integer max best offset bestoffset invocation location invocationlocation all positions allpositions size position pos all positions allpositions is inside isinside best offset bestoffset pos offset pos offset pos length resulting annotations resultingannotations add all annotations allannotations best offset bestoffset iter has next hasnext annotation annot iter java correction processor javacorrectionprocessor is quick fix able type isquickfixabletype annot position pos model get position getposition annot pos is inside isinside invocation location invocationlocation pos offset pos offset pos length resulting annotations resultingannotations add annot invocation location invocationlocation ensure updated annotations ensureupdatedannotations i text editor itexteditor editor object input element inputelement editor get editor input geteditorinput get adapter getadapter i java element ijavaelement input element inputelement i compilation unit icompilationunit sharedastprovider getast i compilation unit icompilationunit input element inputelement sharedastprovider wait active process annotation processannotation annotation annot position pos invocation location invocationlocation best offset bestoffset pos begin posbegin pos offset pos end posend pos begin posbegin pos length covers invocation location is inside isinside invocation location invocationlocation pos begin posbegin pos end posend java correction processor javacorrectionprocessor has corrections hascorrections annot invocation location invocationlocation best offset bestoffset invocation location invocationlocation new closest position newclosestposition compute best offset computebestoffset pos begin posbegin invocation location invocationlocation best offset bestoffset new closest position newclosestposition new closest position newclosestposition best offset bestoffset jump proposals java correction processor javacorrectionprocessor has corrections hascorrections annot new closest position newclosestposition best offset bestoffset is inside isinside offset start handle length ranges offset start offset offset start offset computes returns invocation offset position initial offset invocation offset closest offset left initial offset offset left closest param new offset newoffset offset llok param invocation location invocationlocation invocation location param best offset bestoffset current offset returned offset close r closer offset compute best offset computebestoffset new offset newoffset invocation location invocationlocation best offset bestoffset new offset newoffset invocation location invocationlocation best offset bestoffset invocation location invocationlocation closest prefer left new offset newoffset best offset bestoffset new offset newoffset close r closer equal new offset newoffset new offset newoffset best offset bestoffset close r closer equal new offset newoffset org eclipse jface text contentassist content assistant contentassistant possible comp letions closed possiblecompletionsclosed override possible comp letions closed possiblecompletionsclosed possible comp letions closed possiblecompletionsclosed restore position restoreposition store position storeposition curr offset curroffset curr length currlength f position fposition position curr offset curroffset curr length currlength restore position restoreposition f position fposition f position fposition is deleted isdeleted f viewer fviewer get document getdocument f viewer fviewer set selected range setselectedrange f position fposition offset f position fposition length f viewer fviewer reveal range revealrange f position fposition offset f position fposition length f position fposition returns invoked completion called updated offset code code invoked completion called updated offset is updated offset isupdatedoffset f position fposition code code problem exist current completion invoked problem location is problem location available isproblemlocationavailable f is problem location available fisproblemlocationavailable returns annotations current offset annotations offset annotation get annotations at offset getannotationsatoffset f current annotations fcurrentannotations