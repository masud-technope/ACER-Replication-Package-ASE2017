copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal browsing java util array list arraylist java util arrays java util iterator java util list org eclipse swt widgets control org eclipse swt widgets display org eclipse core runtime core exception coreexception org eclipse core runtime i adaptable iadaptable org eclipse core resources i folder ifolder org eclipse core resources i resource iresource org eclipse jface viewers i tree content provider itreecontentprovider org eclipse jface viewers structured viewer structuredviewer org eclipse jface viewers tree viewer treeviewer org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java element delta ijavaelementdelta org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt internal java plugin javaplugin tree content provider hierarchical layout packages view xxx standard java browsing content provider calls browsing view doesn required packages view hierarchical content provider packagesviewhierarchicalcontentprovider logical packages provider logicalpackagesprovider i tree content provider itreecontentprovider packages view hierarchical content provider packagesviewhierarchicalcontentprovider structured viewer structuredviewer viewer viewer org eclipse jface viewers i tree content provider itreecontentprovider get children getchildren object override object get children getchildren object parent element parentelement parent element parentelement i java element ijavaelement i java element ijavaelement i java element ijavaelement i java element ijavaelement parent element parentelement type i java element ijavaelement get element type getelementtype type i java element ijavaelement java project create element mapping f map to logical package fmaptologicalpackage clear f map to package fragments fmaptopackagefragments clear i java project ijavaproject project i java project ijavaproject parent element parentelement i package fragment ipackagefragment top level children toplevelchildren get top level children by element name gettoplevelchildrenbyelementname project get package fragments getpackagefragments list i package fragment ipackagefragment list array list arraylist top level children toplevelchildren length i package fragment ipackagefragment fragment top level children toplevelchildren i java element ijavaelement fragment get parent getparent i package fragment root ipackagefragmentroot i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot root is archive isarchive root is external isexternal list add fragment i package fragment root ipackagefragmentroot package fragment roots packagefragmentroots project get package fragment roots getpackagefragmentroots list object folders array list arraylist package fragment roots packagefragmentroots length i package fragment root ipackagefragmentroot root package fragment roots packagefragmentroots i resource iresource resource root get underlying resource getunderlyingresource resource resource i folder ifolder folders add all addall get folders getfolders i folder ifolder resource members object logical packages logicalpackages combine same packages into logial packages combinesamepackagesintologialpackages list to array toarray i package fragment ipackagefragment list size folders size logical packages logicalpackages length folders add all addall arrays as list aslist logical packages logicalpackages folders to array toarray logical packages logicalpackages i java element ijavaelement fragment root i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot parent element parentelement create element mapping f map to logical package fmaptologicalpackage clear f map to package fragments fmaptopackagefragments clear i resource iresource resource root get underlying resource getunderlyingresource root is archive isarchive root is external isexternal i package fragment ipackagefragment fragments i package fragment ipackagefragment i java element ijavaelement els root get children getchildren fragments get top level children by element name gettoplevelchildrenbyelementname els add fragments to map addfragmentstomap fragments fragments resource resource i folder ifolder list i adaptable iadaptable children get folders and elements getfoldersandelements i folder ifolder resource members i package fragment ipackagefragment nls default package defaultpackage nls root get package fragment getpackagefragment default package defaultpackage exists children add default package defaultpackage add fragments to map addfragmentstomap children children to array toarray children i java element ijavaelement fragment i package fragment ipackagefragment package fragment packagefragment i package fragment ipackagefragment parent element parentelement package fragment packagefragment is default package isdefaultpackage children i package fragment root ipackagefragmentroot parent i package fragment root ipackagefragmentroot package fragment packagefragment get parent getparent i package fragment ipackagefragment fragments find next level children by element name findnextlevelchildrenbyelementname parent package fragment packagefragment add fragments to map addfragmentstomap fragments object non java resources nonjavaresources package fragment packagefragment get non java resources getnonjavaresources non java resources nonjavaresources length fragments array list arraylist object combined array list arraylist combined add all addall arrays as list aslist fragments non java resources nonjavaresources length object curr non java resources nonjavaresources curr i folder ifolder combined add curr combined to array toarray improve rewrite concatenate parent element parentelement logical package logicalpackage list i package fragment ipackagefragment children array list arraylist logical package logicalpackage logical package logicalpackage logical package logicalpackage parent element parentelement i package fragment ipackagefragment elements logical package logicalpackage get fragments getfragments elements length i package fragment ipackagefragment fragment elements i package fragment ipackagefragment objects find next level children by element name findnextlevelchildrenbyelementname i package fragment root ipackagefragmentroot fragment get parent getparent fragment children add all addall arrays as list aslist objects combine same packages into logial packages combinesamepackagesintologialpackages children to array toarray i package fragment ipackagefragment children size parent element parentelement i folder ifolder i folder ifolder folder i folder ifolder parent element parentelement i resource iresource resources folder members list i adaptable iadaptable children get folders and elements getfoldersandelements resources add fragments to map addfragmentstomap children children to array toarray java model exception javamodelexception children core exception coreexception children children add fragments to map addfragmentstomap list i adaptable iadaptable elements list i package fragment ipackagefragment package fragments packagefragments array list arraylist iterator i adaptable iadaptable iter elements iterator iter has next hasnext object elem iter elem i package fragment ipackagefragment package fragments packagefragments add i package fragment ipackagefragment elem add fragments to map addfragmentstomap package fragments packagefragments to array toarray i package fragment ipackagefragment package fragments packagefragments size list i adaptable iadaptable get folders and elements getfoldersandelements i resource iresource resources list i adaptable iadaptable list array list arraylist resources length i resource iresource resource resources resource i folder ifolder i folder ifolder folder i folder ifolder resource i java element ijavaelement element java core javacore create folder element i package fragment ipackagefragment list add element list add folder list list i folder ifolder get folders getfolders i resource iresource resources list i folder ifolder list array list arraylist resources length i resource iresource resource resources resource i folder ifolder i folder ifolder folder i folder ifolder resource i java element ijavaelement element java core javacore create folder element list add folder list i package fragment ipackagefragment find next level children by element name findnextlevelchildrenbyelementname i package fragment root ipackagefragmentroot parent i package fragment ipackagefragment fragment list i package fragment ipackagefragment list array list arraylist i java element ijavaelement children parent get children getchildren string fragment name fragmentname fragment get element name getelementname children length i java element ijavaelement element children element i package fragment ipackagefragment i package fragment ipackagefragment frag i package fragment ipackagefragment element string element get element name getelementname length fragment name fragmentname length char at charat fragment name fragmentname length frag exists i package fragment ipackagefragment equals fragment name fragmentname starts with startswith fragment name fragmentname equals fragment name fragmentname string tail substring fragment name fragmentname length i package fragment ipackagefragment equals tail tail index of indexof list add frag java model exception javamodelexception java plugin javaplugin log list to array toarray i package fragment ipackagefragment list size i package fragment ipackagefragment get top level children by element name gettoplevelchildrenbyelementname i java element ijavaelement elements list i java element ijavaelement top level elements toplevelelements array list arraylist elements length i java element ijavaelement i java element ijavaelement elements package fragment packagefragment top level separators i java element ijavaelement i package fragment ipackagefragment i java element ijavaelement get element name getelementname index of indexof top level elements toplevelelements add i java element ijavaelement top level elements toplevelelements to array toarray i package fragment ipackagefragment top level elements toplevelelements size org eclipse jface viewers i tree content provider itreecontentprovider get parent getparent object override object get parent getparent object element element i package fragment ipackagefragment i package fragment ipackagefragment fragment i package fragment ipackagefragment element fragment exists object parent get hierarchical parent gethierarchicalparent fragment parent i package fragment ipackagefragment i package fragment ipackagefragment pkg fragment pkgfragment i package fragment ipackagefragment parent logical package logicalpackage logical pkg logicalpkg find logical package findlogicalpackage pkg fragment pkgfragment logical pkg logicalpkg logical pkg logicalpkg logical package logicalpackage create logical package createlogicalpackage pkg fragment pkgfragment pkg fragment pkgfragment parent element logical package logicalpackage logical package logicalpackage logical package logicalpackage element i package fragment ipackagefragment fragment get fragments getfragments object parent get hierarchical parent gethierarchicalparent fragment parent i package fragment ipackagefragment i package fragment ipackagefragment pkg fragment pkgfragment i package fragment ipackagefragment parent logical package logicalpackage logical pkg logicalpkg find logical package findlogicalpackage pkg fragment pkgfragment logical pkg logicalpkg logical pkg logicalpkg logical package logicalpackage create logical package createlogicalpackage pkg fragment pkgfragment pkg fragment pkgfragment fragment get java project getjavaproject element i folder ifolder i folder ifolder folder i folder ifolder element i resource iresource res folder get parent getparent i java element ijavaelement java core javacore create res res check i package fragment ipackagefragment member logical package logicalpackage creates logical package logicalpackage adds map logical package logicalpackage create logical package createlogicalpackage i package fragment ipackagefragment pkg fragment pkgfragment f input is project finputisproject list i package fragment ipackagefragment fragments array list arraylist i package fragment root ipackagefragmentroot roots pkg fragment pkgfragment get java project getjavaproject get package fragment roots getpackagefragmentroots roots length i package fragment root ipackagefragmentroot root roots i package fragment ipackagefragment fragment root get package fragment getpackagefragment pkg fragment pkgfragment get element name getelementname fragment exists fragment equals pkg fragment pkgfragment fragments add fragment fragments is empty isempty logical package logicalpackage logical package logicalpackage logical package logicalpackage pkg fragment pkgfragment f map to logical package fmaptologicalpackage get key getkey pkg fragment pkgfragment logical package logicalpackage iterator i package fragment ipackagefragment iter fragments iterator iter has next hasnext i package fragment ipackagefragment iter logical package logicalpackage belongs logical package logicalpackage add f map to logical package fmaptologicalpackage get key getkey logical package logicalpackage logical package logicalpackage java model exception javamodelexception java plugin javaplugin log object get hierarchical parent gethierarchicalparent i package fragment ipackagefragment fragment i java element ijavaelement parent fragment get parent getparent parent i package fragment root ipackagefragmentroot parent exists i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot parent root is archive isarchive root is external isexternal fragment exists find next level parent by element name findnextlevelparentbyelementname fragment i resource iresource resource fragment get resource getresource resource resource i folder ifolder i folder ifolder folder i folder ifolder resource i resource iresource res folder get parent getparent i java element ijavaelement java core javacore create res res parent object find next level parent by element name findnextlevelparentbyelementname i package fragment ipackagefragment child string child get element name getelementname last index of lastindexof string real parent name realparentname substring i package fragment ipackagefragment element i package fragment root ipackagefragmentroot child get parent getparent get package fragment getpackagefragment real parent name realparentname element exists element child get parent getparent org eclipse jface viewers i tree content provider itreecontentprovider has children haschildren object override has children haschildren object element element i package fragment ipackagefragment i package fragment ipackagefragment fragment i package fragment ipackagefragment element fragment is default package isdefaultpackage fragment exists get children getchildren element length org eclipse jface viewers i structured content provider istructuredcontentprovider get elements getelements object override object get elements getelements object input element inputelement get children getchildren input element inputelement override process delta processdelta i java element delta ijavaelementdelta delta java model exception javamodelexception kind delta get kind getkind i java element ijavaelement element delta get element getelement is class path change isclasspathchange delta object input f viewer fviewer get input getinput input f input is project finputisproject input equals element get java project getjavaproject post refresh postrefresh input f input is project finputisproject input equals element element exists post refresh postrefresh input post remove postremove input kind i java element delta ijavaelementdelta removed object input f viewer fviewer get input getinput input input equals element post remove postremove input element i package fragment ipackagefragment i package fragment ipackagefragment frag i package fragment ipackagefragment element remove kind i java element delta ijavaelementdelta removed remove element removeelement frag kind i java element delta ijavaelementdelta object parent get parent getparent frag add element addelement frag parent kind i java element delta ijavaelementdelta changed refresh logical package logicalpackage logical pkg logicalpkg find logical package findlogicalpackage frag changed object filtered logical pkg logicalpkg post refresh postrefresh find element to refresh findelementtorefresh logical pkg logicalpkg post refresh postrefresh find element to refresh findelementtorefresh frag process affected children processaffectedchildren delta object find element to refresh findelementtorefresh object object object to be ref res hed toberefreshed object f viewer fviewer test find item testfinditem object object parent get parent getparent object parent i package fragment root ipackagefragmentroot f input is project finputisproject parent i package fragment root ipackagefragmentroot parent get java project getjavaproject parent to be ref res hed toberefreshed parent to be ref res hed toberefreshed process affected children processaffectedchildren i java element delta ijavaelementdelta delta java model exception javamodelexception i java element delta ijavaelementdelta affected children affectedchildren delta get affected children getaffectedchildren affected children affectedchildren length affected children affectedchildren i compilation unit icompilationunit process delta processdelta affected children affectedchildren post add postadd object child object parent post runnable postrunnable runnable override control ctrl f viewer fviewer get control getcontrol ctrl ctrl is disposed isdisposed tree viewer treeviewer f viewer fviewer add parent child post remove postremove object object post runnable postrunnable runnable override control ctrl f viewer fviewer get control getcontrol ctrl ctrl is disposed isdisposed tree viewer treeviewer f viewer fviewer remove object post refresh postrefresh object object post runnable postrunnable runnable override control ctrl f viewer fviewer get control getcontrol ctrl ctrl is disposed isdisposed tree viewer treeviewer f viewer fviewer refresh object post runnable postrunnable runnable control ctrl f viewer fviewer get control getcontrol ctrl ctrl is disposed isdisposed f browsing part fbrowsingpart set process selection events setprocessselectionevents display current display currentdisplay display get current getcurrent current display currentdisplay current display currentdisplay equals ctrl get display getdisplay ctrl get display getdisplay sync exec syncexec ctrl get display getdisplay async exec asyncexec f browsing part fbrowsingpart set process selection events setprocessselectionevents add element addelement i package fragment ipackagefragment frag object parent string key get key getkey frag logical package logicalpackage f map to logical package fmaptologicalpackage key fragment existing logical package logicalpackage belongs frag add frag logical package logicalpackage created i package fragment ipackagefragment i package fragment ipackagefragment f map to package fragments fmaptopackagefragments key i package fragment ipackagefragment i package fragment ipackagefragment equals frag logical package logicalpackage i package fragment ipackagefragment add frag add logical package logicalpackage logical packages logicalpackages map f map to logical package fmaptologicalpackage key determine refresh parent i package fragment root ipackagefragmentroot i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot parent f input is project finputisproject post refresh postrefresh root get java project getjavaproject post refresh postrefresh root improve replaced refresh post add postadd parent post remove postremove i package fragment ipackagefragment fragment f map to package fragments fmaptopackagefragments key frag determine refresh parent i package fragment root ipackagefragmentroot i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot parent f input is project finputisproject post add postadd frag root get java project getjavaproject post add postadd frag root post add postadd frag parent remove element removeelement i package fragment ipackagefragment frag string key get key getkey frag logical package logicalpackage f map to logical package fmaptologicalpackage key remove frag package fragment packagefragment map get fragments getfragments length i package fragment ipackagefragment fragment get fragments getfragments f map to package fragments fmaptopackagefragments key fragment f map to logical package fmaptologicalpackage remove key remove logical package logicalpackage viewer post remove postremove object parent get parent getparent fragment parent i package fragment root ipackagefragmentroot parent i package fragment root ipackagefragmentroot parent get java project getjavaproject post add postadd fragment parent remove fragment fragment map viewer i package fragment ipackagefragment fragment f map to package fragments fmaptopackagefragments key fragment fragment equals frag f map to package fragments fmaptopackagefragments remove key post remove postremove frag