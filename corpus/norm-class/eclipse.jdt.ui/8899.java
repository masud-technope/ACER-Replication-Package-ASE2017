copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring structure java util array list arraylist java util arrays java util collection java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util java util string tokenizer stringtokenizer org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime sub progress monitor subprogressmonitor org eclipse text edits multi text edit multitextedit org eclipse text edits text edit group texteditgroup org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i field ifield org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom expression org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom node finder nodefinder org eclipse jdt core dom parameterized type parameterizedtype org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom type org eclipse jdt core dom union type uniontype org eclipse jdt core dom variable declaration expression variabledeclarationexpression org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite target source range computer targetsourcerangecomputer org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt core refactoring i java refactorings ijavarefactorings org eclipse jdt core refactoring descriptors generalize type descriptor generalizetypedescriptor org eclipse jdt core refactoring descriptors java refactoring descriptor javarefactoringdescriptor org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search i java search scope ijavasearchscope org eclipse jdt core search search pattern searchpattern org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast node factory astnodefactory org eclipse jdt internal corext dom bindings org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring collecting search requestor collectingsearchrequestor org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring arguments javarefactoringarguments org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring refactoring scope factory refactoringscopefactory org eclipse jdt internal corext refactoring refactoring search engine refactoringsearchengine org eclipse jdt internal corext refactoring search result group searchresultgroup org eclipse jdt internal corext refactoring dynamic validation refactoring change dynamicvalidationrefactoringchange org eclipse jdt internal corext refactoring rename method checks methodchecks org eclipse jdt internal corext refactoring rename ripple method finder ripplemethodfinder org eclipse jdt internal corext refactoring type constraints typeconstraints ast creator astcreator org eclipse jdt internal corext refactoring type constraints typeconstraints composite or type constraint compositeortypeconstraint org eclipse jdt internal corext refactoring type constraints typeconstraints constraint collector constraintcollector org eclipse jdt internal corext refactoring type constraints typeconstraints constraint operator constraintoperator org eclipse jdt internal corext refactoring type constraints typeconstraints constraint variable constraintvariable org eclipse jdt internal corext refactoring type constraints typeconstraints constraint variable factory constraintvariablefactory org eclipse jdt internal corext refactoring type constraints typeconstraints expression variable expressionvariable org eclipse jdt internal corext refactoring type constraints typeconstraints full constraint creator fullconstraintcreator org eclipse jdt internal corext refactoring type constraints typeconstraints i type constraint itypeconstraint org eclipse jdt internal corext refactoring type constraints typeconstraints parameter type variable parametertypevariable org eclipse jdt internal corext refactoring type constraints typeconstraints return type variable returntypevariable org eclipse jdt internal corext refactoring type constraints typeconstraints simple type constraint simpletypeconstraint org eclipse jdt internal corext refactoring type constraints typeconstraints type constraint factory typeconstraintfactory org eclipse jdt internal corext refactoring type constraints typeconstraints type variable typevariable org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal corext refactoring util resource util resourceutil org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util messages org eclipse jdt internal corext util search utils searchutils org eclipse jdt java element labels javaelementlabels org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor ast provider astprovider org eclipse jdt internal viewsupport basic element labels basicelementlabels org eclipse jdt internal viewsupport binding label provider bindinglabelprovider author change type refactoring changetyperefactoring refactoring nls string attribute type type map i compilation unit icompilationunit list i type constraint itypeconstraint f constraint cache fconstraintcache offset selected text area f selection start fselectionstart length selected text area f selection length fselectionlength offset effective selection f effective selection start feffectiveselectionstart length effective selection f effective selection length feffectiveselectionlength i compilation unit icompilationunit selection i compilation unit icompilationunit f cu fcu selection corresponds method parameter type field stores reference i method binding imethodbinding field remains search references cu s cus determining constraint variable constraintvariable corresponds selection i method binding imethodbinding f method binding fmethodbinding selection corresponds method parameter field stores parameter parameter methods non static nonstatic methods stored field selection corresponds method type f param index fparamindex selected parameter code code string f param name fparamname selection corresponds field field stores reference i variable binding ivariablebinding field remains search references cu s cus i variable binding ivariablebinding f field binding ffieldbinding compilation units constraint variables selection i compilation unit icompilationunit f affected units faffectedunits constraint variables int erest interest refactoring includes constraint text selection additional elements method overriding method calls collection constraint variable constraintvariable f relevant vars frelevantvars types original type selected ast node astnode collection i type binding itypebinding f valid types fvalidtypes type constraints selected ast node astnode collection i type constraint itypeconstraint f relevant constraints frelevantconstraints type constraints compilation units collection i type constraint itypeconstraint f all constraints fallconstraints type selected declaration string f selected type name fselectedtypename type selected declaration i type binding itypebinding f selected type fselectedtype org anizes organizes search results searchresults compilation unit compilationunit map i compilation unit icompilationunit search result group searchresultgroup f cu to search result group fcutosearchresultgroup hash map hashmap i type binding itypebinding java lang object i type binding itypebinding f object fobject i type binding itypebinding get object getobject f object fobject control debug ging debugging output debug constraint variable constraintvariable f cv fcv i binding ibinding f selection binding fselectionbinding i type binding itypebinding f selection type binding fselectiontypebinding constraint collector constraintcollector f collector fcollector change type refactoring changetyperefactoring i compilation unit icompilationunit selection start selectionstart selection length selectionlength selection start selectionstart selection length selectionlength constructor change type refactoring changetyperefactoring invoked tests param compilation unit param selection start selectionstart selection offset param selection length selectionlength selection length param selected type selectedtype selected type change type refactoring changetyperefactoring i compilation unit icompilationunit selection start selectionstart selection length selectionlength string selected type selectedtype is true istrue selection start selectionstart is true istrue selection length selectionlength f selection start fselectionstart selection start selectionstart f selection length fselectionlength selection length selectionlength f effective selection start feffectiveselectionstart selection start selectionstart f effective selection length feffectiveselectionlength selection length selectionlength f cu fcu selected type selectedtype f selected type name fselectedtypename selected type selectedtype f constraint cache fconstraintcache hash map hashmap f valid types fvalidtypes hash set hashset change type refactoring changetyperefactoring java refactoring arguments javarefactoringarguments arguments refactoring status refactoringstatus status refactoring status refactoringstatus initialize status initializestatus initialize arguments status merge initialize status initializestatus org eclipse jdt internal corext refactoring base refactoring check activation checkactivation org eclipse core runtime i progress monitor iprogressmonitor override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception f cu fcu f cu fcu is structure known isstructureknown refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring invalid selection invalidselection check selection checkselection sub progress monitor subprogressmonitor set selection ranges setselectionranges expression exp f effective selection start feffectiveselectionstart exp get start position getstartposition f effective selection length feffectiveselectionlength exp get length getlength f selection binding fselectionbinding expression variable expressionvariable resolve binding resolvebinding exp set original type setoriginaltype exp resolve type binding resolvetypebinding check type ast node selected create type hierarchy typehierarchy needed bring wizard param progress monitor returns status refactoring status refactoringstatus check selection checkselection i progress monitor iprogressmonitor nls begin task begintask ast node astnode node get target node gettargetnode f cu fcu f selection start fselectionstart f selection length fselectionlength debug system println nls selection f selection start fselectionstart nls f selection start fselectionstart f selection length fselectionlength nls f cu fcu get element name getelementname nls nls system println node node type node get class getclass get name getname type constraint factory typeconstraintfactory type constraint factory typeconstraintfactory type constraint factory typeconstraintfactory override filter constraint variable constraintvariable constraint variable constraintvariable constraint operator constraintoperator todo exp lain explain excluded is str ict sub type operator isstrictsubtypeoperator don create constraint f selection type binding fselectiontypebinding involved get binding getbinding get binding getbinding bindings equals get binding getbinding f selection type binding fselectiontypebinding bindings equals get binding getbinding f selection type binding fselectiontypebinding print stats f nr filtered fnrfiltered filter f collector fcollector constraint collector constraintcollector full constraint creator fullconstraintcreator constraint variable factory constraintvariablefactory type constraint factory typeconstraintfactory string selection valid selectionvalid determine selection determineselection node selection valid selectionvalid debug system println nls invalid selection nls selection valid selectionvalid refactoring status refactoringstatus create fatal error status createfatalerrorstatus selection valid selectionvalid f method binding fmethodbinding i method imethod selected method selectedmethod i method imethod f method binding fmethodbinding get java element getjavaelement selected method selectedmethod refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring inside local types not supported insidelocaltypesnotsupported worked refactoring status refactoringstatus result refactoring status refactoringstatus debug nls system println nls f selection type binding fselectiontypebinding f selection type binding fselectiontypebinding get name getname produce error message array primitive type selected f selection type binding fselectiontypebinding is array isarray refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring arrays not supported arraysnotsupported f selection type binding fselectiontypebinding is primitive isprimitive refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring primitives not supported primitivesnotsupported check overridden binary methods checkoverriddenbinarymethods refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring not supported on binary notsupportedonbinary f selection type binding fselectiontypebinding is local islocal refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring local types not supported localtypesnotsupported f field binding ffieldbinding f field binding ffieldbinding get declaring class getdeclaringclass is local islocal refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring inside local types not supported insidelocaltypesnotsupported f selection type binding fselectiontypebinding is type variable istypevariable refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring type parameters not supported typeparametersnotsupported f selection type binding fselectiontypebinding is enum isenum refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring enums not supported enumsnotsupported worked invoked unit test compute valid types f selected type fselectedtype compute valid types computevalidtypes null progress monitor nullprogressmonitor result check overridden binary methods checkoverriddenbinarymethods f method binding fmethodbinding i type binding itypebinding declaring super types declaringsupertypes get declaring super types getdeclaringsupertypes f method binding fmethodbinding iterator i type binding itypebinding iter declaring super types declaringsupertypes iterator iter has next hasnext i type binding itypebinding super type supertype iter i method binding imethodbinding overridden method overriddenmethod find method findmethod f method binding fmethodbinding super type supertype asked declaring types is not null isnotnull overridden method overriddenmethod i method imethod i method imethod i method imethod overridden method overriddenmethod get java element getjavaelement i method imethod is binary isbinary copied full constraint creator fullconstraintcreator i method binding imethodbinding find method findmethod i method binding imethodbinding method binding methodbinding i type binding itypebinding type method binding methodbinding get declaring class getdeclaringclass equals type method binding methodbinding bindings find overridden method in type findoverriddenmethodintype type method binding methodbinding copied full constraint creator fullconstraintcreator i type binding itypebinding get declaring super types getdeclaringsupertypes i method binding imethodbinding method binding methodbinding i type binding itypebinding all super types allsupertypes bindings get all super types getallsupertypes method binding methodbinding get declaring class getdeclaringclass i type binding itypebinding result hash set hashset all super types allsupertypes length i type binding itypebinding type all super types allsupertypes find method findmethod method binding methodbinding type result add type result actual work computing allow able allowable types invoke d invoked wizard compute button pressed param progress monitor valid types collection i type binding itypebinding compute valid types computevalidtypes i progress monitor iprogressmonitor begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring checking preconditions f cv fcv find constraint variable for selected node findconstraintvariableforselectednode sub progress monitor subprogressmonitor debug system println nls selected f cv fcv nls nls f cv fcv get class getclass get name getname nls is canceled iscanceled operation canceled exception operationcanceledexception f relevant vars frelevantvars find relevant constraint vars findrelevantconstraintvars f cv fcv sub progress monitor subprogressmonitor debug print collection printcollection nls relevant vars nls f relevant vars frelevantvars is canceled iscanceled operation canceled exception operationcanceledexception f relevant constraints frelevantconstraints find relevant constraints findrelevantconstraints f relevant vars frelevantvars sub progress monitor subprogressmonitor is canceled iscanceled operation canceled exception operationcanceledexception f valid types fvalidtypes add all addall compute valid types computevalidtypes f selection type binding fselectiontypebinding f relevant vars frelevantvars f relevant constraints frelevantconstraints sub progress monitor subprogressmonitor debug print collection printcollection nls valid types nls get valid type names getvalidtypenames core exception coreexception java plugin javaplugin log error message logerrormessage error occurred computation valid types to string tostring f valid types fvalidtypes clear f valid types fvalidtypes org eclipse jdt internal corext refactoring base refactoring check input checkinput org eclipse core runtime i progress monitor iprogressmonitor override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring checking preconditions refactoring status refactoringstatus result checks validate modifies files validatemodifiesfiles resource util resourceutil get files getfiles f affected units faffectedunits get validation context getvalidationcontext result todo sanity check refactoring files org eclipse jdt internal corext refactoring base i refactoring irefactoring create change createchange org eclipse core runtime i progress monitor iprogressmonitor override change create change createchange i progress monitor iprogressmonitor core exception coreexception begin task begintask refactoring core messages refactoringcoremessages change type messages changetypemessages create changes for change type createchangesforchangetype map i compilation unit icompilationunit constraint variable constraintvariable relevant vars by unit relevantvarsbyunit hash map hashmap group changes by compilation unit groupchangesbycompilationunit relevant vars by unit relevantvarsbyunit map string string arguments hash map hashmap string project i java project ijavaproject java project javaproject f cu fcu get java project getjavaproject java project javaproject project java project javaproject get element name getelementname string description refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring descriptor description string header messages format refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring descriptor description string binding label provider bindinglabelprovider get binding label getbindinglabel f selection binding fselectionbinding java element labels javaelementlabels fully qualified binding label provider bindinglabelprovider get binding label getbindinglabel f selected type fselectedtype java element labels javaelementlabels fully qualified jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header comment add setting addsetting messages format refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring original element pattern binding label provider bindinglabelprovider get binding label getbindinglabel f selection binding fselectionbinding java element labels javaelementlabels fully qualified comment add setting addsetting messages format refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring original type pattern binding label provider bindinglabelprovider get binding label getbindinglabel get original type getoriginaltype java element labels javaelementlabels fully qualified comment add setting addsetting messages format refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring ref actored refactored type pattern binding label provider bindinglabelprovider get binding label getbindinglabel f selected type fselectedtype java element labels javaelementlabels fully qualified generalize type descriptor generalizetypedescriptor descriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create generalize type descriptor creategeneralizetypedescriptor project description comment as string asstring arguments refactoring descriptor refactoringdescriptor structural change java refactoring descriptor javarefactoringdescriptor jar refactoring java refactoring descriptor javarefactoringdescriptor jar source attachment arguments java refactoring descriptor util javarefactoringdescriptorutil attribute input java refactoring descriptor util javarefactoringdescriptorutil element to handle elementtohandle project f cu fcu nls arguments java refactoring descriptor util javarefactoringdescriptorutil attribute selection integer f selection start fselectionstart to string tostring integer f selection length fselectionlength to string tostring arguments attribute type f selected type fselectedtype get qualified name getqualifiedname dynamic validation refactoring change dynamicvalidationrefactoringchange result dynamic validation refactoring change dynamicvalidationrefactoringchange descriptor refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring all changes allchanges iterator i compilation unit icompilationunit relevant vars by unit relevantvarsbyunit key set keyset iterator has next hasnext i compilation unit icompilationunit icu constraint variable constraintvariable c vars cvars relevant vars by unit relevantvarsbyunit icu compilation unit change compilationunitchange cu change cuchange compilation unit change compilationunitchange get name getname icu add all changes for addallchangesfor icu c vars cvars cu change cuchange result add cu change cuchange worked is canceled iscanceled operation canceled exception operationcanceledexception result apply single i compilation unit icompilationunit param icu compilation unit param vars param unit change unitchange core exception coreexception add all changes for addallchangesfor i compilation unit icompilationunit icu constraint variable constraintvariable vars compilation unit change compilationunitchange unit change unitchange core exception coreexception compilation unit compilationunit unit refactoringastparser ast provider astprovider shared ast level parse icu ast rewrite astrewrite unit rewriter unitrewriter ast rewrite astrewrite create unit getast multi text edit multitextedit root multi text edit multitextedit adam sez don unit change unitchange add group description addgroupdescription fails assert ion assertion unit change unitchange set edit setedit root string type name typename update imports updateimports unit root update cu updatecu unit vars unit change unitchange unit rewriter unitrewriter type name typename root add child addchild unit rewriter unitrewriter rewriteast source range computer sourcerangecomputer target source range computer targetsourcerangecomputer override source range sourcerange compute source range computesourcerange ast node astnode node source range sourcerange node get start position getstartposition node get length getlength update cu updatecu compilation unit compilationunit unit constraint variable constraintvariable vars compilation unit change compilationunitchange unit change unitchange ast rewrite astrewrite unit rewriter unitrewriter string type name typename java model exception javamodelexception custom source range computer sourcerangecomputer avoid losing comments unit rewriter unitrewriter set target source range computer settargetsourcerangecomputer source range computer sourcerangecomputer iterator constraint variable constraintvariable vars iterator has next hasnext constraint variable constraintvariable ast node astnode decl find declaration finddeclaration unit decl simple name simplename decl qualified name qualifiedname expression variable expressionvariable ast node astnode decl get parent getparent get parent getparent local variable parameter update type updatetype unit get type gettype unit change unitchange unit rewriter unitrewriter type name typename decl method declaration methoddeclaration decl field declaration fielddeclaration method field type update type updatetype unit get type gettype decl unit change unitchange unit rewriter unitrewriter type name typename decl parameterized type parameterizedtype update type updatetype unit get type gettype decl unit change unitchange unit rewriter unitrewriter type name typename update type updatetype compilation unit compilationunit type old type oldtype compilation unit change compilationunitchange unit change unitchange ast rewrite astrewrite unit rewriter unitrewriter string type name typename string old name oldname f selection type binding fselectiontypebinding get name getname string basic element labels basicelementlabels get java element name getjavaelementname old name oldname basic element labels basicelementlabels get java element name getjavaelementname type name typename string description messages format refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring type change typechange text edit group texteditgroup text edit group texteditgroup description ast ast getast ast node astnode node to replace nodetoreplace old type oldtype f selection type binding fselectiontypebinding is parameterized type isparameterizedtype f selection type binding fselectiontypebinding is raw type israwtype old type oldtype is simple type issimpletype node to replace nodetoreplace old type oldtype get parent getparent todo handle types simple parameterized arrays is true istrue f selected type fselectedtype is class isclass f selected type fselectedtype is interface isinterface type new type newtype f selected type fselectedtype is parameterized type isparameterizedtype new type newtype ast new simple type newsimpletype ast node factory astnodefactory new name newname ast type name typename new type newtype create parameterized type createparameterizedtype ast f selected type fselectedtype unit rewriter unitrewriter replace node to replace nodetoreplace new type newtype unit change unitchange add text edit group addtexteditgroup creates parameterized type parameterizedtype node recursion needed handle nested vector vector string param ast param type binding typebinding created type type create parameterized type createparameterizedtype ast ast i type binding itypebinding type binding typebinding type binding typebinding is parameterized type isparameterizedtype type binding typebinding is raw type israwtype type base type basetype ast new simple type newsimpletype ast node factory astnodefactory new name newname ast type binding typebinding get erasure geterasure get name getname parameterized type parameterizedtype new type newtype ast new parameterized type newparameterizedtype base type basetype type binding typebinding get type arguments gettypearguments length i type binding itypebinding type arg typearg type binding typebinding get type arguments gettypearguments recursive call type arg type argtype create parameterized type createparameterizedtype ast type arg typearg new type newtype type arguments typearguments add arg type argtype new type newtype type binding typebinding is type variable istypevariable ast new simple type newsimpletype ast node factory astnodefactory new name newname ast type binding typebinding get erasure geterasure get name getname ast new simple type newsimpletype ast new simple name newsimplename type binding typebinding get name getname group changes by compilation unit groupchangesbycompilationunit map i compilation unit icompilationunit constraint variable constraintvariable relevant vars by unit relevantvarsbyunit iterator constraint variable constraintvariable f relevant vars frelevantvars iterator has next hasnext constraint variable constraintvariable expression variable expressionvariable return type variable returntypevariable i compilation unit icompilationunit icu expression variable expressionvariable expression variable expressionvariable expression variable expressionvariable icu get compilation unit range getcompilationunitrange get compilation unit getcompilationunit return type variable returntypevariable return type variable returntypevariable rtv return type variable returntypevariable i method binding imethodbinding rtv get method binding getmethodbinding icu i method imethod get java element getjavaelement get compilation unit getcompilationunit relevant vars by unit relevantvarsbyunit contains key containskey icu relevant vars by unit relevantvarsbyunit icu hash set hashset constraint variable constraintvariable relevant vars by unit relevantvarsbyunit icu add ast node astnode find declaration finddeclaration compilation unit compilationunit root constraint variable constraintvariable java model exception javamodelexception f field binding ffieldbinding i field ifield i field ifield f field binding ffieldbinding get java element getjavaelement ast node search util astnodesearchutil get field declaration node getfielddeclarationnode root expression variable expressionvariable iterator i type constraint itypeconstraint iter f all constraints fallconstraints iterator iter has next hasnext i type constraint itypeconstraint constraint iter constraint is simple type constraint issimpletypeconstraint simple type constraint simpletypeconstraint stc simple type constraint simpletypeconstraint constraint stc is defines constraint isdefinesconstraint stc get left getleft equals constraint variable constraintvariable stc get right getright type variable typevariable type variable typevariable type variable typevariable type variable typevariable node finder nodefinder perform root type variable typevariable get compilation unit range getcompilationunitrange get source range getsourcerange return type variable returntypevariable return type variable returntypevariable rtv return type variable returntypevariable i method binding imethodbinding rtv get method binding getmethodbinding i method imethod i method imethod get java element getjavaelement ast node search util astnodesearchutil get method declaration node getmethoddeclarationnode root type get type gettype ast node astnode node node get node type getnodetype ast node astnode single variable declaration single variable declaration singlevariabledeclaration node get type gettype ast node astnode field declaration field declaration fielddeclaration node get type gettype ast node astnode variable declaration statement variable declaration statement variabledeclarationstatement node get type gettype ast node astnode variable declaration expression variable declaration expression variabledeclarationexpression node get type gettype ast node astnode method declaration method declaration methoddeclaration node get return type getreturntype ast node astnode parameterized type parameterized type parameterizedtype node get type gettype is true istrue org eclipse jdt internal corext refactoring base i refactoring irefactoring get name getname override string get name getname refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring method exam ining examining suitable kind ast node astnode selected node parents ast stored fields f binding fbinding the method themethod the field thefield determines kind ast node astnode selected param node node string error message returned change type refactoring changetyperefactoring refactoring applied selected ast node astnode valid selection string determine selection determineselection ast node astnode node node refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring invalid selection invalidselection nls debug system println node node type nodetype node get class getclass get name getname nls debug system println parent node type nodetype node get parent getparent get class getclass get name getname nls debug system println grand parent grandparent node type nodetype node get parent getparent get parent getparent get class getclass get name getname ast node astnode parent node get parent getparent ast node astnode grand parent grandparent parent get parent getparent grand parent grandparent node type not supported nodetypenotsupported adjustment needed parameterized type selected grand parent grandparent get node type getnodetype ast node astnode parameterized type node grand parent grandparent adjustment needed qualified selected ast node astnode current node get node type getnodetype ast node astnode qualified current node current get node type getnodetype ast node astnode qualified current current get parent getparent current get node type getnodetype ast node astnode simple type node type not supported nodetypenotsupported node current get parent getparent parent get node type getnodetype ast node astnode qualified current parent current get node type getnodetype ast node astnode qualified current current get parent getparent current get node type getnodetype ast node astnode simple type node type not supported nodetypenotsupported node current get parent getparent nls f object fobject node getast resolve well known type resolvewellknowntype java lang object node get node type getnodetype ast node astnode simple simple name selected simplenameselected simple name simplename node ast node astnode variable declaration statement variable declaration statement selected variabledeclarationstatementselected variable declaration statement variabledeclarationstatement node ast node astnode field declaration field declaration selected fielddeclarationselected field declaration fielddeclaration node ast node astnode single variable declaration single variable declaration selected singlevariabledeclarationselected single variable declaration singlevariabledeclaration node ast node astnode parameterized type parameterized type selected parameterizedtypeselected parameterized type parameterizedtype node node type not supported nodetypenotsupported selection corresponds ast node astnode change type refactoring changetyperefactoring defined message string node type not supported nodetypenotsupported refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring not supported on node type notsupportedonnodetype selection corresponds single variable declaration singlevariabledeclaration param svd message string single variable declaration selected singlevariabledeclarationselected single variable declaration singlevariabledeclaration svd simple name simplename svd get name getname set selection ranges setselectionranges simple name selected simplenameselected selection corresponds parameterized type parameterizedtype type method param type message string parameterized type selected parameterizedtypeselected parameterized type parameterizedtype ast node astnode parent get parent getparent parent get node type getnodetype ast node astnode method declaration f method binding fmethodbinding method declaration methoddeclaration parent resolve binding resolvebinding f param index fparamindex f effective selection start feffectiveselectionstart get start position getstartposition f effective selection length feffectiveselectionlength get length getlength set original type setoriginaltype resolve binding resolvebinding parent get node type getnodetype ast node astnode single variable declaration single variable declaration selected singlevariabledeclarationselected single variable declaration singlevariabledeclaration parent parent get node type getnodetype ast node astnode variable declaration statement variable declaration statement selected variabledeclarationstatementselected variable declaration statement variabledeclarationstatement parent parent get node type getnodetype ast node astnode field declaration field declaration selected fielddeclarationselected field declaration fielddeclaration parent node type not supported nodetypenotsupported selection corresponds variable declaration statement variabledeclarationstatement param vds message string variable declaration statement selected variabledeclarationstatementselected variable declaration statement variabledeclarationstatement vds vds fragments size refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring multi declarations not supported multideclarationsnotsupported variable declaration fragment variabledeclarationfragment elem variable declaration fragment variabledeclarationfragment vds fragments iterator simple name simplename elem get name getname set selection ranges setselectionranges simple name selected simplenameselected selection corresponds field declaration fielddeclaration param field declaration fielddeclaration field message string field declaration selected fielddeclarationselected field declaration fielddeclaration field declaration fielddeclaration field declaration fielddeclaration fragments size refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring multi declarations not supported multideclarationsnotsupported variable declaration fragment variabledeclarationfragment elem variable declaration fragment variabledeclarationfragment field declaration fielddeclaration fragments iterator f field binding ffieldbinding elem resolve binding resolvebinding simple name simplename elem get name getname set selection ranges setselectionranges simple name selected simplenameselected selection corresponds simple name simplename param simple name simplename message string simple name selected simplenameselected simple name simplename simple name simplename ast node astnode parent simple name simplename get parent getparent ast node astnode grand parent grandparent parent get parent getparent parent get node type getnodetype ast node astnode variable declaration statement variable declaration statement variabledeclarationstatement vds variable declaration statement variabledeclarationstatement parent vds fragments size refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring multi declarations not supported multideclarationsnotsupported parent get node type getnodetype ast node astnode variable declaration fragment grand parent grandparent get node type getnodetype ast node astnode variable declaration statement variable declaration statement variabledeclarationstatement vds variable declaration statement variabledeclarationstatement grand parent grandparent vds fragments size refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring multi declarations not supported multideclarationsnotsupported set selection ranges setselectionranges simple name simplename grand parent grandparent get node type getnodetype ast node astnode variable declaration expression variable declaration expression variabledeclarationexpression vde variable declaration expression variabledeclarationexpression grand parent grandparent vde fragments size refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring multi declarations not supported multideclarationsnotsupported set selection ranges setselectionranges simple name simplename grand parent grandparent get node type getnodetype ast node astnode field declaration field declaration fielddeclaration field declaration fielddeclaration grand parent grandparent fragments size refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring multi declarations not supported multideclarationsnotsupported variable declaration fragment variabledeclarationfragment fragment variable declaration fragment variabledeclarationfragment parent f field binding ffieldbinding fragment resolve binding resolvebinding set selection ranges setselectionranges fragment get name getname refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring not supported on node type notsupportedonnodetype parent get node type getnodetype ast node astnode single variable declaration single variable declaration singlevariabledeclaration single variable declaration singlevariabledeclaration single variable declaration singlevariabledeclaration parent single variable declaration singlevariabledeclaration get type gettype union type uniontype refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring union type not supported uniontypenotsupported grand parent grandparent get node type getnodetype ast node astnode method declaration f method binding fmethodbinding method declaration methoddeclaration grand parent grandparent resolve binding resolvebinding set original type setoriginaltype simple name simplename resolve type binding resolvetypebinding f param index fparamindex method declaration methoddeclaration grand parent grandparent parameters index of indexof parent f param name fparamname single variable declaration singlevariabledeclaration get name getname get identifier getidentifier set selection ranges setselectionranges single variable declaration singlevariabledeclaration get name getname parent get node type getnodetype ast node astnode simple type grand parent grandparent get node type getnodetype ast node astnode single variable declaration ast node astnode great grand parent greatgrandparent grand parent grandparent get parent getparent single variable declaration singlevariabledeclaration single variable declaration singlevariabledeclaration single variable declaration singlevariabledeclaration grand parent grandparent single variable declaration singlevariabledeclaration get extra dimensions getextradimensions single variable declaration singlevariabledeclaration is varargs isvarargs refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring arrays not supported arraysnotsupported great grand parent greatgrandparent great grand parent greatgrandparent get node type getnodetype ast node astnode method declaration f method binding fmethodbinding method declaration methoddeclaration great grand parent greatgrandparent resolve binding resolvebinding f param index fparamindex method declaration methoddeclaration great grand parent greatgrandparent parameters index of indexof grand parent grandparent f param name fparamname single variable declaration singlevariabledeclaration get name getname get identifier getidentifier set selection ranges setselectionranges simple name simplename set selection ranges setselectionranges single variable declaration singlevariabledeclaration get name getname parent get node type getnodetype ast node astnode simple type grand parent grandparent get node type getnodetype ast node astnode method declaration f method binding fmethodbinding method declaration methoddeclaration grand parent grandparent resolve binding resolvebinding set original type setoriginaltype f method binding fmethodbinding get return type getreturntype f param index fparamindex parent get node type getnodetype ast node astnode method declaration grand parent grandparent get node type getnodetype ast node astnode type declaration method declaration methoddeclaration method declaration methoddeclaration method declaration methoddeclaration parent method declaration methoddeclaration get name getname equals simple name simplename refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring not supported on node type notsupportedonnodetype f method binding fmethodbinding method declaration methoddeclaration parent resolve binding resolvebinding f param index fparamindex parent get node type getnodetype ast node astnode simple type grand parent grandparent get node type getnodetype ast node astnode variable declaration statement variable declaration statement selected variabledeclarationstatementselected variable declaration statement variabledeclarationstatement grand parent grandparent parent get node type getnodetype ast node astnode expression ast node astnode decl find declaration finddeclaration parent get root getroot f selection start fselectionstart f selection length fselectionlength variable declaration fragment variabledeclarationfragment fragment variable declaration fragment variabledeclarationfragment decl simple name simplename fragment get name getname set selection ranges setselectionranges parent get node type getnodetype ast node astnode simple type grand parent grandparent get node type getnodetype ast node astnode field declaration field declaration selected fielddeclarationselected field declaration fielddeclaration grand parent grandparent parent get node type getnodetype ast node astnode simple type grand parent grandparent get node type getnodetype ast node astnode array type refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring arrays not supported arraysnotsupported parent get node type getnodetype ast node astnode qualified set selection ranges setselectionranges simple name simplename refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring not supported on node type notsupportedonnodetype methods exam ining examining solving type constraints includes loc ating locating constraint variable constraintvariable selected ast node astnode f inding finding constraint variables constraintvariables overriding method calls field access find i type constraints itypeconstraints int erest interest mention constraint variables constraintvariables determining i types itypes i type constraints itypeconstraints satisfied find constraint variable constraintvariable corresponds selected ast node astnode param constraint variable constraintvariable constraint variable constraintvariable find constraint variable for selected node findconstraintvariableforselectednode i progress monitor iprogressmonitor begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring analyzing message analyzingmessage search selection i compilation unit icompilationunit cus f cu fcu debug nls nls system println effective selection f effective selection start feffectiveselectionstart f effective selection length feffectiveselectionlength collection i type constraint itypeconstraint all constraints allconstraints get constraints getconstraints cus sub progress monitor subprogressmonitor i progress monitor iprogressmonitor sub monitor submonitor sub progress monitor subprogressmonitor sub monitor submonitor begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring analyzing message analyzingmessage all constraints allconstraints size iterator i type constraint itypeconstraint all constraints allconstraints iterator has next hasnext sub monitor submonitor worked i type constraint itypeconstraint simple type constraint simpletypeconstraint simple type constraint simpletypeconstraint stc simple type constraint simpletypeconstraint matches selection matchesselection stc get left getleft stc get left getleft matches selection matchesselection stc get right getright stc get right getright sub monitor submonitor is true istrue refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring no matching constraint variable nomatchingconstraintvariable determine constraint variable constraintvariable matches selected ast node astnode param constraint variable constraintvariable code code constraint variable constraintvariable matches selected ast node astnode matches selection matchesselection constraint variable constraintvariable expression variable expressionvariable expression variable expressionvariable expression variable expressionvariable f selection binding fselectionbinding bindings equals f selection binding fselectionbinding get expression binding getexpressionbinding parameter type variable parametertypevariable parameter type variable parametertypevariable ptv parameter type variable parametertypevariable f method binding fmethodbinding bindings equals ptv get method binding getmethodbinding f method binding fmethodbinding ptv get parameter index getparameterindex f param index fparamindex return type variable returntypevariable return type variable returntypevariable rtv return type variable returntypevariable f method binding fmethodbinding bindings equals rtv get method binding getmethodbinding f method binding fmethodbinding f param index fparamindex determine constraint variables selected expression add ition addition expression consists expression defines equal expression equal param param constraint variables core exception coreexception collection constraint variable constraintvariable find relevant constraint vars findrelevantconstraintvars constraint variable constraintvariable i progress monitor iprogressmonitor core exception coreexception begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring analyzing message analyzingmessage collection constraint variable constraintvariable result hash set hashset result add i compilation unit icompilationunit cus collect affected units collectaffectedunits sub progress monitor subprogressmonitor collection i type constraint itypeconstraint all constraints allconstraints get constraints getconstraints cus sub progress monitor subprogressmonitor list constraint variable constraintvariable work list worklist array list arraylist result work list worklist is empty isempty worked constraint variable constraintvariable work list worklist remove iterator i type constraint itypeconstraint iter all constraints allconstraints iterator iter has next hasnext worked i type constraint itypeconstraint type constraint typeconstraint iter type constraint typeconstraint is simple type constraint issimpletypeconstraint simple type constraint simpletypeconstraint stc simple type constraint simpletypeconstraint type constraint typeconstraint stc is defines constraint isdefinesconstraint stc is equals constraint isequalsconstraint constraint variable constraintvariable match match stc get left getleft stc get right getright match expression variable expressionvariable match parameter type variable parametertypevariable match return type variable returntypevariable result match work list worklist add match result add match result constraint variable constraintvariable match constraint variable constraintvariable matchee constraint variable constraintvariable left constraint variable constraintvariable matchee equals left matchee equals left select type constraints involve selected ast node astnode param relevant constraint vars relevantconstraintvars param result core exception coreexception collection i type constraint itypeconstraint find relevant constraints findrelevantconstraints collection constraint variable constraintvariable relevant constraint vars relevantconstraintvars i progress monitor iprogressmonitor core exception coreexception i compilation unit icompilationunit cus collect affected units collectaffectedunits sub progress monitor subprogressmonitor f all constraints fallconstraints get constraints getconstraints cus sub progress monitor subprogressmonitor begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring analyzing message analyzingmessage f all constraints fallconstraints size nls debug print collection printcollection type constraints f all constraints fallconstraints collection i type constraint itypeconstraint result array list arraylist iterator i type constraint itypeconstraint f all constraints fallconstraints iterator has next hasnext i type constraint itypeconstraint is simple type constraint issimpletypeconstraint simple type constraint simpletypeconstraint stc simple type constraint simpletypeconstraint stc is defines constraint isdefinesconstraint stc is equals constraint isequalsconstraint stc get left getleft equals stc get right getright is null isnull stc get left getleft relevant constraint vars relevantconstraintvars stc get left getleft relevant constraint vars relevantconstraintvars stc get right getright result add composite or type constraint compositeortypeconstraint cotc composite or type constraint compositeortypeconstraint i type constraint itypeconstraint components cotc get constraints getconstraints components length i type constraint itypeconstraint component components simple type constraint simpletypeconstraint simple component simplecomponent simple type constraint simpletypeconstraint component relevant constraint vars relevantconstraintvars simple component simplecomponent get left getleft result add worked debug nls print collection printcollection selected constraints result result finds declaration ast node astnode ast offset length param root ast param start start param length length declaring node ast node astnode find declaration finddeclaration ast node astnode root start length ast node astnode node node finder nodefinder perform root start length is true istrue node simple name simplename string value of valueof node get node type getnodetype is true istrue root compilation unit compilationunit string value of valueof root get node type getnodetype compilation unit compilationunit root find declaring node finddeclaringnode simple name simplename node resolve binding resolvebinding debug ging debugging string print collection i type binding itypebinding types types is empty isempty nls nls string result iterator i type binding itypebinding types iterator has next hasnext i type binding itypebinding type result type get qualified name getqualifiedname has next hasnext nls result nls result nls result determines types type constraints satisfied param original type originaltype param relevant vars relevantvars param relevant constraints relevantconstraints param valid types java model exception javamodelexception collection i type binding itypebinding compute valid types computevalidtypes i type binding itypebinding original type originaltype collection constraint variable constraintvariable relevant vars relevantvars collection i type constraint itypeconstraint relevant constraints relevantconstraints i progress monitor iprogressmonitor java model exception javamodelexception collection i type binding itypebinding result hash set hashset collection i type binding itypebinding all types alltypes hash set hashset all types alltypes add all addall get all super types getallsupertypes original type originaltype begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring analyzing message analyzingmessage all types alltypes size iterator i type binding itypebinding all types alltypes iterator has next hasnext i type binding itypebinding type is valid isvalid type relevant vars relevantvars relevant constraints relevantconstraints sub progress monitor subprogressmonitor result add type changing original type result remove original type originaltype todo remove types visible check visibility cu s cus relevant constraint variables result determines type satisfies type constraints param type param relevant vars relevantvars param constraints param code code type satisfies type constraints java model exception javamodelexception is valid isvalid i type binding itypebinding type collection constraint variable constraintvariable relevant vars relevantvars collection i type constraint itypeconstraint constraints i progress monitor iprogressmonitor java model exception javamodelexception begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring analyzing message analyzingmessage constraints size i compilation unit icompilationunit f affected units faffectedunits java model util javamodelutil is visible in hierarchy isvisibleinhierarchy i member imember type get java element getjavaelement i package fragment ipackagefragment get parent getparent iterator i type constraint itypeconstraint constraints iterator has next hasnext i type constraint itypeconstraint simple type constraint simpletypeconstraint is valid simple constraint isvalidsimpleconstraint type relevant vars relevantvars simple type constraint simpletypeconstraint composite or type constraint compositeortypeconstraint is valid or constraint isvalidorconstraint type relevant vars relevantvars composite or type constraint compositeortypeconstraint worked is valid simple constraint isvalidsimpleconstraint i type binding itypebinding type collection constraint variable constraintvariable relevant vars relevantvars simple type constraint simpletypeconstraint stc upper bound relevant vars relevantvars stc get left getleft is sub type of issubtypeof type find type findtype stc get right getright is valid or constraint isvalidorconstraint i type binding itypebinding type collection constraint variable constraintvariable relevant vars relevantvars composite or type constraint compositeortypeconstraint cotc i type constraint itypeconstraint components cotc get constraints getconstraints components length components simple type constraint simpletypeconstraint simple type constraint simpletypeconstraint simple type constraint simpletypeconstraint components upper bound relevant vars relevantvars get left getleft is sub type of issubtypeof type find type findtype get right getright bound relevant vars relevantvars get right getright is sub type of issubtypeof find type findtype get left getleft type i type binding itypebinding find type findtype constraint variable constraintvariable get binding getbinding gather constraints compilation units param ref erring cus referringcus param constraints collection i type constraint itypeconstraint get constraints getconstraints i compilation unit icompilationunit ref erring cus referringcus i progress monitor iprogressmonitor begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring analyzing message analyzingmessage ref erring cus referringcus length collection i type constraint itypeconstraint result array list arraylist ref erring cus referringcus length result add all addall get constraints getconstraints ref erring cus referringcus worked is canceled iscanceled operation canceled exception operationcanceledexception result list i type constraint itypeconstraint get constraints getconstraints i compilation unit icompilationunit unit f constraint cache fconstraintcache contains key containskey unit f constraint cache fconstraintcache unit compilation unit compilationunit ast creator astcreator createast unit generate type constraints relevant method declaration methoddeclaration sub trees subtrees f method binding fmethodbinding f cu to search result group fcutosearchresultgroup contains key containskey unit search result group searchresultgroup group f cu to search result group fcutosearchresultgroup unit ast node astnode nodes ast node search util astnodesearchutil get ast nodes getastnodes group get search results getsearchresults nodes length ast node astnode node nodes f method binding fmethodbinding find method declaration methoddeclaration tree ast node astnode node method declaration methoddeclaration get parent getparent method declaration methoddeclaration method declaration methoddeclaration accept f collector fcollector accept f collector fcollector list i type constraint itypeconstraint constraints arrays as list aslist f collector fcollector get constraints getconstraints f constraint cache fconstraintcache unit constraints constraints update compilation unit compilationunit imports changing type declarations param ast root astroot ast param root edit rootedit edit type core exception coreexception string update imports updateimports compilation unit compilationunit ast root astroot multi text edit multitextedit root edit rootedit core exception coreexception import rewrite importrewrite rewrite stub utility stubutility create import rewrite createimportrewrite ast root astroot context sensitive import rewrite context contextsensitiveimportrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext ast root astroot f selection start fselectionstart rewrite string type name typename rewrite add import addimport f selected type fselectedtype get qualified name getqualifiedname context root edit rootedit add child addchild rewrite rewrite imports rewriteimports type name typename misc ellaneous miscellaneous helper methods returns collection types selected declaration valid type bindings collection i type binding itypebinding get valid types getvalidtypes f valid types fvalidtypes i type binding itypebinding get original type getoriginaltype f selection type binding fselectiontypebinding set original type setoriginaltype i type binding itypebinding original type originaltype f selection type binding fselectiontypebinding original type originaltype f selected type fselectedtype find super type by name findsupertypebyname original type originaltype f selected type name fselectedtypename string get target gettarget nls nls string type name typename f selection type binding fselectiontypebinding f selection type binding fselectiontypebinding get name getname f field binding ffieldbinding type name typename f field binding ffieldbinding get name getname f method binding fmethodbinding f param index fparamindex nls type name typename f method binding fmethodbinding get name getname nls type name typename f param name fparamname f selection binding fselectionbinding type name typename f selection binding fselectionbinding get name getname type name typename returns collection string names types selected declaration tests collection string names types selected declaration collection string get valid type names getvalidtypenames collection string type names typenames array list arraylist iterator i type binding itypebinding f valid types fvalidtypes iterator has next hasnext i type binding itypebinding type type names typenames add type get qualified name getqualifiedname type names typenames find ast node astnode source text selection type declaration param unit compilation unit selection param offset param length ast node astnode ast node astnode get target node gettargetnode i compilation unit icompilationunit unit offset length compilation unit compilationunit root ast creator astcreator createast unit ast node astnode node node finder nodefinder perform root offset length node determines compilation units ris e rise type constraints int erested interested involves searching overriding overridden methods method calls field accesses param monitor units core exception coreexception i compilation unit icompilationunit collect affected units collectaffectedunits i progress monitor iprogressmonitor core exception coreexception bug type constraints generated methods override result relevant variables begin task begintask refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring analyzing message analyzingmessage f affected units faffectedunits nls debug print collection printcollection units arrays as list aslist f affected units faffectedunits worked f affected units faffectedunits f method binding fmethodbinding f method binding fmethodbinding i method imethod selected method selectedmethod i method imethod f method binding fmethodbinding get java element getjavaelement selected method selectedmethod happen checked f ront front check initial conditions is true istrue refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring method code fragment appears source memory leak repeatedly applied i method imethod root selected method selectedmethod root get declaring type getdeclaringtype is interface isinterface method checks methodchecks is virtual isvirtual root sub progress monitor subprogressmonitor sub monitor submonitor sub progress monitor subprogressmonitor i method imethod in interface ininterface method checks methodchecks is declared in interface isdeclaredininterface root root get declaring type getdeclaringtype new type hierarchy newtypehierarchy sub progress monitor subprogressmonitor sub monitor submonitor sub monitor submonitor in interface ininterface in interface ininterface equals root root in interface ininterface code fragment i method imethod ripple methods ripplemethods ripple method finder ripplemethodfinder get related methods getrelatedmethods root sub progress monitor subprogressmonitor search pattern searchpattern pattern refactoring search engine refactoringsearchengine create or pattern createorpattern ripple methods ripplemethods i java search constants ijavasearchconstants occurrences compute scope selected method start wrong project i java search scope ijavasearchscope scope refactoring scope factory refactoringscopefactory create selected method selectedmethod collecting search requestor collectingsearchrequestor csr collecting search requestor collectingsearchrequestor search result group searchresultgroup groups refactoring search engine refactoringsearchengine search pattern scope csr sub progress monitor subprogressmonitor todo deal errors matches refactoring status refactoringstatus f affected units faffectedunits get cus getcus groups f field binding ffieldbinding i field ifield i field ifield i field ifield f field binding ffieldbinding get java element getjavaelement i field ifield happen checked f ront front check initial conditions is true istrue refactoring core messages refactoringcoremessages change type refactoring changetyperefactoring file d filed search pattern searchpattern pattern search pattern searchpattern create pattern createpattern i field ifield i java search constants ijavasearchconstants occurrences search utils searchutils generics agnostic match rule i java search scope ijavasearchscope scope refactoring scope factory refactoringscopefactory create i field ifield collecting search requestor collectingsearchrequestor csr collecting search requestor collectingsearchrequestor search result group searchresultgroup groups refactoring search engine refactoringsearchengine search pattern scope csr sub progress monitor subprogressmonitor todo deal errors matches refactoring status refactoringstatus f affected units faffectedunits get cus getcus groups selection local variable search selection f affected units faffectedunits i compilation unit icompilationunit f cu fcu debug nls system println determining cu s cus f affected units faffectedunits length nls system println nls f affected units faffectedunits get element name getelementname f affected units faffectedunits set selected type setselectedtype i type binding itypebinding type f selected type fselectedtype type todo utility methods moved determines constraint variable corresponds constant param code code constraint variable corresponds constant is null isnull constraint variable constraintvariable expression variable expressionvariable expression variable expressionvariable get expression type getexpressiontype ast node astnode literal debug ging debugging print collection printcollection string title collection nls system println size title iterator iterator has next hasnext nls system println returns compilation units search param groups cu s cus i compilation unit icompilationunit get cus getcus search result group searchresultgroup groups list i compilation unit icompilationunit result array list arraylist groups length groups length search result group searchresultgroup group groups i compilation unit icompilationunit group get compilation unit getcompilationunit result add f cu to search result group fcutosearchresultgroup group result to array toarray i compilation unit icompilationunit result size includes type include type object type object param type types i type binding itypebinding get all super types getallsupertypes i type binding itypebinding type i type binding itypebinding result hash set hashset result add type type get superclass getsuperclass result add all addall get all super types getallsupertypes type get superclass getsuperclass i type binding itypebinding interfaces type get interfaces getinterfaces interfaces length result add all addall get all super types getallsupertypes interfaces type f object fobject result f object fobject result add f object fobject result i type binding itypebinding find super type by name findsupertypebyname i type binding itypebinding type string super type name supertypename i type binding itypebinding super types supertypes get all super types getallsupertypes type iterator i type binding itypebinding super types supertypes iterator has next hasnext i type binding itypebinding get qualified name getqualifiedname equals super type name supertypename is sub type of issubtypeof i type binding itypebinding type i type binding itypebinding type ensure comparable string considered subtype raw comparable type is parameterized type isparameterizedtype type get type declaration gettypedeclaration is equal to isequalto type get type declaration gettypedeclaration i type binding itypebinding super types supertypes get all super types getallsupertypes type super types supertypes type collection i type binding itypebinding i type binding itypebinding binding iterator i type binding itypebinding iterator has next hasnext i type binding itypebinding bindings equals binding refactoring status refactoringstatus initialize java refactoring arguments javarefactoringarguments arguments string selection arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute selection selection offset length string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer selection tokenizer has more tokens hasmoretokens offset integer value of valueof tokenizer next token nexttoken int value intvalue tokenizer has more tokens hasmoretokens length integer value of valueof tokenizer next token nexttoken int value intvalue offset length f selection start fselectionstart offset f selection length fselectionlength length refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring illegal argument object selection java refactoring descriptor util javarefactoringdescriptorutil attribute selection refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute selection string handle arguments get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute input handle i java element ijavaelement element java refactoring descriptor util javarefactoringdescriptorutil handle to element handletoelement arguments get project getproject handle element element exists element get element type getelementtype i java element ijavaelement compilation unit java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get name getname i java refactorings ijavarefactorings generalize type f cu fcu i compilation unit icompilationunit element refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute input string type arguments get attribute getattribute attribute type nls type equals type f selected type name fselectedtypename type refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute type refactoring status refactoringstatus