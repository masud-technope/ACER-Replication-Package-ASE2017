copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse ltk internal core refactoring java util linked list linkedlist org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime status org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i file ifile org eclipse core file buf fers filebuffers file buffers filebuffers org eclipse core file buf fers filebuffers i text file buffer itextfilebuffer org eclipse core file buf fers filebuffers i text file buffer manager itextfilebuffermanager org eclipse core file buf fers filebuffers location kind locationkind org eclipse text edits text edit textedit org eclipse text edits undo edit undoedit org eclipse jface text bad location exception badlocationexception org eclipse jface text i document idocument org eclipse ltk core refactoring change org eclipse ltk core refactoring content stamp contentstamp org eclipse ltk core refactoring null change nullchange org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring text file change textfilechange change perform reverse change link org eclipse ltk core refactoring multi state text file change multistatetextfilechange intended instantiated clients created code multi state text file change multistatetextfilechange code object subclassed clients sub cla ssi ng subclassing code multi state text file change multistatetextfilechange code provide proper undo change object multi state undo change multistateundochange change content stamp contentstamp f content stamp to restore fcontentstamptorestore f dirty fdirty i file ifile f file ffile string f name fname f save mode fsavemode undo edit undoedit f undos fundos buffer validation state buffervalidationstate f validation state fvalidationstate create multi undo change object param human readable change param file file change working param stamp content stamp restore undo executed param undos edit representing undo modifications param save mode savemode save mode link text file change textfilechange text file change textfilechange save text file change textfilechange force save text file change textfilechange leave dirty multi state undo change multistateundochange string i file ifile file undo edit undoedit undos content stamp contentstamp stamp save mode savemode is not null isnotnull is not null isnotnull file is not null isnotnull undos f name fname f file ffile file f undos fundos undos f content stamp to restore fcontentstamptorestore stamp f save mode fsavemode save mode savemode hook create undo change undo edit hook called performing change construct undo change object subclasses override create undo change param edits link undo edit undoedit undo edit create undo change param stamp to restore stamptorestore content stamp restore undo edit executed undo change core exception coreexception undo change created change create undo change createundochange undo edit undoedit edits content stamp contentstamp stamp to restore stamptorestore core exception coreexception multi state undo change multistateundochange get name getname f file ffile edits stamp to restore stamptorestore f save mode fsavemode override dispose f validation state fvalidationstate f validation state fvalidationstate dispose override object get affected objects getaffectedobjects object modified element modifiedelement get modified element getmodifiedelement modified element modifiedelement object modified element modifiedelement override object get modified element getmodifiedelement f file ffile override string get name getname f name fname returns change save mode change save mode text file change textfilechange save text file change textfilechange force save text file change textfilechange leave dirty get save mode getsavemode f save mode fsavemode override initialize validation data initializevalidationdata i progress monitor iprogressmonitor null progress monitor nullprogressmonitor nls begin task begintask f validation state fvalidationstate buffer validation state buffervalidationstate create f file ffile override refactoring status refactoringstatus is valid isvalid i progress monitor iprogressmonitor core exception coreexception null progress monitor nullprogressmonitor nls begin task begintask f validation state fvalidationstate nls core exception coreexception nls status i status istatus error refactoring core plugin refactoringcoreplugin get plugin id getpluginid multi state undo change multistateundochange initial ialized initialialized i text file buffer itextfilebuffer buffer file buffers filebuffers get text file buffer manager gettextfilebuffermanager get text file buffer gettextfilebuffer f file ffile get full path getfullpath location kind locationkind ifile f dirty fdirty buffer buffer is dirty isdirty f validation state fvalidationstate is valid isvalid needs saving needssaving needs saving needssaving f save mode fsavemode text file change textfilechange force save f dirty fdirty f save mode fsavemode text file change textfilechange save override change perform i progress monitor iprogressmonitor core exception coreexception f validation state fvalidationstate f validation state fvalidationstate is valid isvalid needs saving needssaving has fatal error hasfatalerror null change nullchange null progress monitor nullprogressmonitor i text file buffer manager itextfilebuffermanager manager file buffers filebuffers get text file buffer manager gettextfilebuffermanager nls begin task begintask i text file buffer itextfilebuffer buffer manager connect f file ffile get full path getfullpath location kind locationkind ifile sub progress monitor subprogressmonitor buffer manager get text file buffer gettextfilebuffer f file ffile get full path getfullpath location kind locationkind ifile i document idocument document buffer get document getdocument content stamp contentstamp current stamp currentstamp content stamps contentstamps f file ffile document perform linked list linkedlist undo edit undoedit list linked list linkedlist f undos fundos length undo edit undoedit edit f undos fundos undo edit undoedit redo edit apply document text edit textedit create undo list add first addfirst redo restore document content stamp success content stamps contentstamps document f content stamp to restore fcontentstamptorestore needs saving needssaving buffer commit success were n weren restore document stamp save restore file stamp content stamps contentstamps f file ffile f content stamp to restore fcontentstamptorestore create undo change createundochange list to array toarray undo edit undoedit list size current stamp currentstamp bad location exception badlocationexception as core exception ascoreexception buffer manager disconnect f file ffile get full path getfullpath location kind locationkind ifile sub progress monitor subprogressmonitor