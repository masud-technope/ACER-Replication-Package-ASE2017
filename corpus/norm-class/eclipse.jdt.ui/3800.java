copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse ltk core refactoring java util array list arraylist java util arrays java util list org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime sub progress monitor subprogressmonitor org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits multi text edit multitextedit org eclipse text edits text edit textedit org eclipse text edits text edit copier texteditcopier org eclipse text edits text edit group texteditgroup org eclipse text edits text edit processor texteditprocessor org eclipse text edits undo edit undoedit org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text document rewrite session documentrewritesession org eclipse jface text document rewrite session type documentrewritesessiontype org eclipse jface text i document idocument org eclipse jface text i document extension idocumentextension org eclipse jface text i region iregion org eclipse jface text region org eclipse jface text link linked mode model linkedmodemodel org eclipse ltk internal core refactoring text change special change object applies link text edit textedit text edit tree document text change manages text edit tree access document concrete subclasses method link acquire document acquiredocument i progress monitor iprogressmonitor aquire document aquiredocument link commit i document idocument document i progress monitor iprogressmonitor commit document commitdocument link release document releasedocument i document idocument i progress monitor iprogressmonitor release document releasedocument text change off ers offers ability access original content document creating preview change edit tree copied creating kind preview region updating original edit tree takes place req uesting requesting preview region updating link text edit textedit text edit textedit region tracking required preview enabled call method link set keep preview edits setkeeppreviewedits set keep preview edits setkeeppreviewedits enabled text change copied edit tree executed preview allowing clients map original edit executed edit executed edit determine position preview note intended subclassed refactoring framework noextend intended subclassed clients text change textchange text edit based change texteditbasedchange text edit textedit f edit fedit text edit copier texteditcopier f copier fcopier creates text change human readable displayed users unique code code text type text change code txt code param text change set text type settexttype string text change textchange string edit management sets root text edit applied document represented text change param edit root text edit root text edit set edit setedit text edit textedit edit nls is true istrue f edit fedit root edit is true istrue edit f edit fedit edit returns root text edit root text edit code code root edit text edit textedit get edit getedit f edit fedit adds link text edit group texteditgroup text edit group method convenience method calling code change add text edit change group addtexteditchangegroup text edit change group texteditchangegroup change group code param group text edit group add override add text edit group addtexteditgroup text edit group texteditgroup group add text edit change group addtexteditchangegroup text edit change group texteditchangegroup group adds link text edit change group texteditchangegroup text edit change group calling method requires root edit method link set edit setedit text edit textedit set edit setedit edits managed text edit change group change root edit param group text edit change group add add text edit change group addtexteditchangegroup text edit change group texteditchangegroup group nls is true istrue f edit fedit add description root edit exists add change group addchangegroup group returns link text edit change group texteditchangegroup text edit change groups managed text change text edit change groups text edit change group texteditchangegroup get text edit change groups gettexteditchangegroups text edit based change group texteditbasedchangegroup groups get change groups getchangegroups text edit change group texteditchangegroup result text edit change group texteditchangegroup groups length system arraycopy groups result groups length result adds edit edit tree edit top level edit param edit text edit add malformed tree exception malformedtreeexception edit reason over laps overlaps existing edit add edit addedit text edit textedit edit malformed tree exception malformedtreeexception nls is true istrue f edit fedit root exist add edit f edit fedit add child addchild edit document management acquires reference document changed text change document acquired call released call link release document releasedocument i document idocument i progress monitor iprogressmonitor method code release document releasedocument code called times code aquire document aquiredocument code called param progress monitor reference document changed core exception coreexception document acquired i document idocument acquire document acquiredocument i progress monitor iprogressmonitor core exception coreexception commits document acquired call link acquire document acquiredocument i progress monitor iprogressmonitor aquire document aquiredocument impl ementors implementors method decide commit ting committing document typically content document written file system param document document commit param progress monitor core exception coreexception document committed commit i document idocument document i progress monitor iprogressmonitor core exception coreexception releases document acquired call link acquire document acquiredocument i progress monitor iprogressmonitor aquire document aquiredocument param document document release param progress monitor core exception coreexception document released release document releasedocument i document idocument document i progress monitor iprogressmonitor core exception coreexception hook create undo change undo edit hook called performing change construct undo change object param edit link undo edit undoedit create undo change undo change code code undo change created returning code code fact change tree undo ne undone returning code code recommended exception occurred creation undo change change create undo change createundochange undo edit undoedit edit override change perform i progress monitor iprogressmonitor core exception coreexception nls begin task begintask i document idocument document document acquire document acquiredocument sub progress monitor subprogressmonitor undo edit undoedit undo perform edits performedits document commit document sub progress monitor subprogressmonitor create undo change createundochange undo bad location exception badlocationexception as core exception ascoreexception malformed tree exception malformedtreeexception as core exception ascoreexception release document releasedocument document sub progress monitor subprogressmonitor executes text edits document subclasses override method call code perform edits performedits document code param document document object representing undo executed edits exception malformed tree exception malformedtreeexception thrown edit tree isn valid exception thrown edit executed document original exception bad location exception badlocationexception thrown edits tree executed document undefined exception thrown undo edit undoedit perform edits performedits i document idocument document bad location exception badlocationexception malformed tree exception malformedtreeexception document rewrite session documentrewritesession session document i document extension idocumentextension session i document extension idocumentextension document start rewrite session startrewritesession document rewrite session type documentrewritesessiontype unrestricted linked mode model linkedmodemodel close all models closeallmodels document text edit processor texteditprocessor processor create text edit processor createtexteditprocessor document text edit textedit create undo processor perform edits performedits session i document extension idocumentextension document stop rewrite session stoprewritesession session method access current content text change returns document text change document returned computed point time method called calling method multiple times document instances returned document modified client result unexpected behavior change performed param progress monitor report progress code code progress reporting desired document change working core exception coreexception document acquired i document idocument get current document getcurrentdocument i progress monitor iprogressmonitor core exception coreexception null progress monitor nullprogressmonitor i document idocument result nls begin task begintask result acquire document acquiredocument sub progress monitor subprogressmonitor result release document releasedocument result sub progress monitor subprogressmonitor result override string get current content getcurrentcontent i progress monitor iprogressmonitor core exception coreexception get current document getcurrentdocument override string get current content getcurrentcontent i region iregion region expand region to full line expandregiontofullline surrounding lines surroundinglines i progress monitor iprogressmonitor core exception coreexception is not null isnotnull region is true istrue surrounding lines surroundinglines i document idocument document get current document getcurrentdocument is true istrue document get length getlength region get offset getoffset region get length getlength get content getcontent document region expand region to full line expandregiontofullline surrounding lines surroundinglines method access preview content text change returns edit executed preview generation original method requires code set keep preview edits setkeeppreviewedits code code code preview requested code get preview getpreview code methods method returns code code original isn managed text change param original original edit managed text change edit executed preview generation text edit textedit get preview edit getpreviewedit text edit textedit original is true istrue get keep preview edits getkeeppreviewedits f copier fcopier original f copier fcopier get copy getcopy original returns edits executed preview generation array original edits method requires code set keep preview edits setkeeppreviewedits code code code preview requested code get preview getpreview code methods method returns empty array original edits managed text change param originals array original edits managed text change array edits edits executed preview generation text edit textedit get preview edits getpreviewedits text edit textedit originals is true istrue get keep preview edits getkeeppreviewedits f copier fcopier originals originals length text edit textedit list text edit textedit result array list arraylist originals length originals length text edit textedit copy f copier fcopier get copy getcopy originals copy result add copy result to array toarray text edit textedit result size returns document preview text change preview computed executing managed text edits method considers active link text edit change group texteditchangegroup text edit change groups param progress monitor report progress code code progress reporting desired document preview text change core exception coreexception preview created i document idocument get preview document getpreviewdocument i progress monitor iprogressmonitor core exception coreexception preview and region previewandregion result get preview document getpreviewdocument edits result document override string get preview content getpreviewcontent i progress monitor iprogressmonitor core exception coreexception get preview document getpreviewdocument returns preview text change clipped specific region preview created app lying applying text edits managed array link text edit change group texteditchangegroup text edit change groups region determined code expand region to full line expandregiontofullline code code code parameter code region code determines clipping code expand region to full line expandregiontofullline code code code region determined parameter code region code extended cover full lines code surrounding lines surroundinglines code number surrounding lines code surrounding lines surroundinglines code considered code expand region to full line expandregiontofullline code code code param change groups changegroups change groups preview generated param region starting region clipping param expand region to full line expandregiontofullline code code passed region extended cover full lines param surrounding lines surroundinglines number surrounding lines clipping region considered code expand region to full line expandregiontofullline code code code param progress monitor report progress code code progress reporting desired current content text change clipped region determined parameters core exception coreexception exception occurs generating preview get current content getcurrentcontent i region iregion i progress monitor iprogressmonitor string get preview content getpreviewcontent text edit change group texteditchangegroup change groups changegroups i region iregion region expand region to full line expandregiontofullline surrounding lines surroundinglines i progress monitor iprogressmonitor core exception coreexception get preview content getpreviewcontent text edit based change group texteditbasedchangegroup change groups changegroups region expand region to full line expandregiontofullline surrounding lines surroundinglines returns preview text change clipped specific region preview created app lying applying text edits managed array link text edit change group texteditchangegroup text edit change groups region determined code expand region to full line expandregiontofullline code code code parameter code region code determines clipping code expand region to full line expandregiontofullline code code code region determined parameter code region code extended cover full lines code surrounding lines surroundinglines code number surrounding lines code surrounding lines surroundinglines code considered code expand region to full line expandregiontofullline code code code param change groups changegroups change groups preview generated param region starting region clipping param expand region to full line expandregiontofullline code code passed region extended cover full lines param surrounding lines surroundinglines number surrounding lines clipping region considered code expand region to full line expandregiontofullline code code code param progress monitor report progress code code progress reporting desired current content text change clipped region determined parameters core exception coreexception exception occurs generating preview get current content getcurrentcontent i region iregion i progress monitor iprogressmonitor override string get preview content getpreviewcontent text edit based change group texteditbasedchangegroup change groups changegroups i region iregion region expand region to full line expandregiontofullline surrounding lines surroundinglines i progress monitor iprogressmonitor core exception coreexception i region iregion current region currentregion get region getregion change groups changegroups is true istrue region get offset getoffset current region currentregion get offset getoffset current region currentregion get offset getoffset current region currentregion get length getlength region get offset getoffset region get length getlength edits change groups rooted edit text change stand text edit textedit root get edit getedit nls is not null isnotnull root root edit change groups changegroups length text edit based change group texteditbasedchangegroup group change groups changegroups text edit textedit edits group get text edits gettextedits edits length todo enable bug fixed https bugs eclipse org bugs bug cgi is true istrue root edits get root getroot wrong root edit nls preview and region previewandregion result get preview document getpreviewdocument change groups changegroups delta edits delete edits region result region delta current region currentregion get length getlength delta result region get length getlength current region currentregion get length getlength get content getcontent result document region region get offset getoffset region get length getlength delta expand region to full line expandregiontofullline surrounding lines surroundinglines helper methods preview and region previewandregion get preview document getpreviewdocument text edit based change group texteditbasedchangegroup i progress monitor iprogressmonitor core exception coreexception i document idocument document document get current document getcurrentdocument track changes trackchanges get keep preview edits getkeeppreviewedits set keep preview edits setkeeppreviewedits text edit processor texteditprocessor processor edits create text edit processor createtexteditprocessor document text edit textedit create text edit processor createtexteditprocessor document text edit textedit processor perform edits performedits preview and region previewandregion document get new region getnewregion bad location exception badlocationexception as core exception ascoreexception set keep preview edits setkeeppreviewedits track changes trackchanges text edit processor texteditprocessor create text edit processor createtexteditprocessor i document idocument document flags preview f edit fedit text edit processor texteditprocessor document multi text edit multitextedit flags list text edit textedit excludes array list arraylist text edit based change group texteditbasedchangegroup groups get change groups getchangegroups groups length text edit based change group texteditbasedchangegroup edit groups edit is enabled isenabled excludes add all addall arrays as list aslist edit get text edit group gettexteditgroup get text edits gettextedits preview f copier fcopier text edit copier texteditcopier f edit fedit text edit textedit copied edit copiededit f copier fcopier perform get keep preview edits getkeeppreviewedits flags flags text edit textedit update regions local text edit processor localtexteditprocessor result local text edit processor localtexteditprocessor document copied edit copiededit flags result set excludes setexcludes map edits mapedits excludes to array toarray text edit textedit excludes size f copier fcopier f copier fcopier result local text edit processor localtexteditprocessor result local text edit processor localtexteditprocessor document f edit fedit flags text edit textedit update regions result set excludes setexcludes excludes to array toarray text edit textedit excludes size result text edit processor texteditprocessor create text edit processor createtexteditprocessor i document idocument document flags text edit based change group texteditbasedchangegroup f edit fedit text edit processor texteditprocessor document multi text edit multitextedit flags list text edit textedit includes array list arraylist length text edit based change group texteditbasedchangegroup change is true istrue change get text edit change gettexteditchange change is enabled isenabled includes add all addall arrays as list aslist change get text edit group gettexteditgroup get text edits gettextedits f copier fcopier text edit copier texteditcopier f edit fedit text edit textedit copied edit copiededit f copier fcopier perform get keep preview edits getkeeppreviewedits flags flags text edit textedit update regions local text edit processor localtexteditprocessor result local text edit processor localtexteditprocessor document copied edit copiededit flags result set includes setincludes map edits mapedits includes to array toarray text edit textedit includes size f copier fcopier f copier fcopier result i region iregion get region getregion text edit based change group texteditbasedchangegroup edits f edit fedit f edit fedit get region getregion list text edit textedit edits array list arraylist length edits add all addall arrays as list aslist get text edit group gettexteditgroup get text edits gettextedits edits size text edit textedit get coverage getcoverage edits to array toarray text edit textedit edits size i region iregion get new region getnewregion text edit based change group texteditbasedchangegroup edits f edit fedit f copier fcopier get copy getcopy f edit fedit get region getregion list text edit textedit result array list arraylist length text edit textedit edits get text edit group gettexteditgroup get text edits gettextedits edits length text edit textedit copy f copier fcopier get copy getcopy edits copy result add copy result size text edit textedit get coverage getcoverage result to array toarray text edit textedit result size override set keep preview edits setkeeppreviewedits set keep preview edits setkeeppreviewedits f copier fcopier