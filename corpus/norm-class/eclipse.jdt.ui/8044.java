copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal text java util arrays org eclipse core runtime org eclipse jface text bad location exception badlocationexception org eclipse jface text i document idocument org eclipse jface text i region iregion org eclipse jface text i type d region itypedregion org eclipse jface text region org eclipse jface text text utilities textutilities org eclipse jface text type d region typedregion org eclipse jdt text i java partitions ijavapartitions utility methods heuristic based java manipulations incomplete java source file instance holds internal position document threads afe threadsafe java heuristic scanner javaheuristicscanner symbols returned methods requested position link bad location exception badlocationexception thrown scanning special bound parameter scanning code f document fdocument get length getlength code scanning unbound character constants lbrace rbrace lparen rparen semicolon colon comma lbracket rbracket questionmark equal lang le langle rangle specifies condition code scanxxx code methods decide scanning implemented clients stop condition stopcondition ins truc ts instructs scanner current position param current position param position current position param iteration direction code code condition met position asks condition position query previous position param position position param code code position returned position scan next position nextposition position position position stops whitespace defined link character is whitespace iswhitespace character non whitespace nonwhitespace stop condition stopcondition org eclipse jdt internal text java heuristic scanner javaheuristicscanner stop condition stopcondition override position character is whitespace iswhitespace stops whitespace character partition java heuristic scanner javaheuristicscanner non whitespace nonwhitespace non whitespace default partition nonwhitespacedefaultpartition non whitespace nonwhitespace org eclipse jdt internal text java heuristic scanner javaheuristicscanner stop condition stopcondition override position position is default partition isdefaultpartition position org eclipse jdt internal text java heuristic scanner javaheuristicscanner stop condition stopcondition next position nextposition override next position nextposition position i type d region itypedregion partition get partition getpartition position f partition fpartition equals partition get type gettype next position nextposition position partition get offset getoffset partition get length getlength position offset partition get offset getoffset position offset offset next position nextposition position stops java identifier defined link character is java identifier part isjavaidentifierpart character non java identifier part nonjavaidentifierpart stop condition stopcondition org eclipse jdt internal text java heuristic scanner javaheuristicscanner stop condition stopcondition override position character is java identifier part isjavaidentifierpart stops java identifier character partition java heuristic scanner javaheuristicscanner non java identifier part nonjavaidentifierpart non java identifier part default partition nonjavaidentifierpartdefaultpartition non java identifier part nonjavaidentifierpart org eclipse jdt internal text java heuristic scanner javaheuristicscanner stop condition stopcondition override position position is default partition isdefaultpartition position org eclipse jdt internal text java heuristic scanner javaheuristicscanner stop condition stopcondition next position nextposition override next position nextposition position i type d region itypedregion partition get partition getpartition position f partition fpartition equals partition get type gettype next position nextposition position partition get offset getoffset partition get length getlength position offset partition get offset getoffset position offset offset next position nextposition position stops character partition matches character list character match charactermatch stop condition stopcondition f chars fchars creates instance param single character match character match charactermatch creates instance param chars chars match character match charactermatch chars is not null isnotnull chars is true istrue chars length f chars fchars chars arrays sort chars org eclipse jdt internal text java heuristic scanner javaheuristicscanner stop condition stopcondition override position arrays binary search binarysearch f chars fchars is default partition isdefaultpartition position org eclipse jdt internal text java heuristic scanner javaheuristicscanner stop condition stopcondition next position nextposition override next position nextposition position i type d region itypedregion partition get partition getpartition position f partition fpartition equals partition get type gettype next position nextposition position partition get offset getoffset partition get length getlength position offset partition get offset getoffset position offset offset next position nextposition position document scanned i document idocument f document fdocument partitioning scanning string f partitioning fpartitioning partition scan string f partition fpartition internal scan read character f char fchar read position f pos fpos partition nls i type d region itypedregion f cached partition fcachedpartition type d region typedregion partition preset conditions stop condition stopcondition f non default part fnonwsdefaultpart non whitespace default partition nonwhitespacedefaultpartition stop condition stopcondition f non s fnonws non whitespace nonwhitespace stop condition stopcondition f non ident fnonident non java identifier part default partition nonjavaidentifierpartdefaultpartition creates instance param document document scan param partitioning partitioning scanning param partition partition scan java heuristic scanner javaheuristicscanner i document idocument document string partitioning string partition is legal islegal document is legal islegal partitioning is legal islegal partition f document fdocument document f partitioning fpartitioning partitioning f partition fpartition partition calls code document i java partitions ijavapartitions java partitioning i document idocument content type code param document document scan java heuristic scanner javaheuristicscanner i document idocument document document i java partitions ijavapartitions java partitioning i document idocument content type returns internal scan position internal scan position get position getposition f pos fpos returns token direction starting code start code extending code bound code constants defined link symbols call link get position getposition position scanned token position scanned param start character position document param bound position constant link symbols describing token next token nexttoken start bound pos scan forward scanforward start bound f non default part fnonwsdefaultpart pos tokeneof f pos fpos f char fchar lbrace tokenlbrace rbrace tokenrbrace lbracket tokenlbracket rbracket tokenrbracket lparen tokenlparen rparen tokenrparen semicolon tokensemicolon colon tokencolon comma tokencomma questionmark tokenquestionmark equal tokenequal lang le langle tokenlessthan rangle tokengreaterthan tokenplus tokenat character is java identifier part isjavaidentifierpart f char fchar assume identifier keyword pos pos scan forward scanforward pos bound f non ident fnonident pos bound unbound f document fdocument get length getlength bound pos string ident or keyword identorkeyword ident or keyword identorkeyword f document fdocument bad location exception badlocationexception tokeneof get token gettoken ident or keyword identorkeyword operators number literals tokenother returns token direction starting code start code extending code bound code constants defined link symbols call link get position getposition position scanned token starts position scanned param start character position document param bound position constant link symbols describing previous token previous token previoustoken start bound pos scan backward scanbackward start bound f non default part fnonwsdefaultpart pos tokeneof f pos fpos f char fchar lbrace tokenlbrace rbrace tokenrbrace lbracket tokenlbracket rbracket tokenrbracket lparen tokenlparen rparen tokenrparen semicolon tokensemicolon colon tokencolon comma tokencomma questionmark tokenquestionmark equal tokenequal lang le langle tokenlessthan rangle tokengreaterthan tokenplus tokenat character is java identifier part isjavaidentifierpart f char fchar assume ident keyword pos pos scan backward scanbackward pos bound f non ident fnonident pos bound unbound bound pos string ident or keyword identorkeyword ident or keyword identorkeyword f document fdocument bad location exception badlocationexception tokeneof get token gettoken ident or keyword identorkeyword operators number literals tokenother returns keyword constants code tokenident code scanned identifier param scanned identifier constants defined link symbols get token gettoken string is not null isnotnull length nls equals nls tokenif nls equals nls tokendo nls equals nls tokenfor nls equals nls tokentry nls equals nls tokennew nls equals nls tokencase nls equals nls tokenelse nls enum equals nls tokenenum nls equals nls tokengoto nls equals nls tokenbreak nls equals nls tokencatch nls equals nls tokenclass nls equals nls tokenwhile nls equals nls tokenreturn nls equals nls tokenstatic nls equals nls tokenswitch nls equals nls tokenthrows nls equals nls tokendefault nls equals nls tokenfinally nls equals nls tokeninterface nls equals nls tokensynchronized tokenident returns position closing peer character search scopes int roduced introduced opening peers skipped peers accounted reside partition note code start code point opening peer character searched param start start position param opening peer openingpeer opening peer character param closing peer closingpeer closing peer character matching peer character position code code find closing peer findclosingpeer start opening peer openingpeer closing peer closingpeer find closing peer findclosingpeer start unbound opening peer openingpeer closing peer closingpeer returns position closing peer character search scopes int roduced introduced opening peers skipped peers accounted reside partition note code start code point opening peer character searched param start start position param bound bound param opening peer openingpeer opening peer character param closing peer closingpeer closing peer character matching peer character position code code find closing peer findclosingpeer start bound opening peer openingpeer closing peer closingpeer is legal islegal start character match charactermatch match character match charactermatch opening peer openingpeer closing peer closingpeer depth start start scan forward scanforward start bound match start f document fdocument get char getchar start opening peer openingpeer depth depth depth start bad location exception badlocationexception returns position opening peer character search scopes int roduced introduced closing peers skipped peers accounted reside partition note code start code point closing peer character searched param start start position param opening peer openingpeer opening peer character param closing peer closingpeer closing peer character matching peer character position code code find opening peer findopeningpeer start opening peer openingpeer closing peer closingpeer find opening peer findopeningpeer start unbound opening peer openingpeer closing peer closingpeer returns position opening peer character search scopes int roduced introduced closing peers skipped peers accounted reside partition note code start code point closing peer character searched param start start position param bound bound param opening peer openingpeer opening peer character param closing peer closingpeer closing peer character matching peer character position code code find opening peer findopeningpeer start bound opening peer openingpeer closing peer closingpeer is legal islegal start f document fdocument get length getlength character match charactermatch match character match charactermatch opening peer openingpeer closing peer closingpeer depth start start scan backward scanbackward start bound match start f document fdocument get char getchar start closing peer closingpeer depth depth depth start bad location exception badlocationexception computes surrounding block code offset code search started code offset code opening brace code offset code surrounding block closing brace param offset offset surrounding block computed region describing surrounding block code code i region iregion find surrounding block findsurroundingblock offset offset offset f document fdocument get length getlength find opening peer findopeningpeer offset lbrace rbrace find closing peer findclosingpeer offset lbrace rbrace region finds smallest position code f document fdocument code position code position code code bound code code character is whitespace iswhitespace f document fdocument get char getchar pos code eval uates evaluates code code position partition param position character position code f document fdocument code considered param bound position code f document fdocument code code bound code code position code code unbound code smallest position whitespace character code position code code bound code res ides resides java partition code code find non whitespace forward findnonwhitespaceforward position bound scan forward scanforward position bound f non default part fnonwsdefaultpart finds smallest position code f document fdocument code position code position code code bound code code character is whitespace iswhitespace f document fdocument get char getchar pos code eval uates evaluates code code param position character position code f document fdocument code considered param bound position code f document fdocument code code bound code code position code code unbound code smallest position whitespace character code position code code bound code code code find non whitespace forward in any partition findnonwhitespaceforwardinanypartition position bound scan forward scanforward position bound f non s fnonws finds highest position code f document fdocument code position code position code code bound code code character is whitespace iswhitespace f document fdocument get char getchar pos code eval uates evaluates code code position partition param position character position code f document fdocument code considered param bound position code f document fdocument code code bound code code position code code unbound code highest position whitespace character code bound code code position code res ides resides java partition code code find non whitespace backward findnonwhitespacebackward position bound scan backward scanbackward position bound f non default part fnonwsdefaultpart finds highest position code f document fdocument code position code position code code bound code code character is whitespace iswhitespace f document fdocument get char getchar pos code eval uates evaluates code code position partition param position character position code f document fdocument code considered param bound position code f document fdocument code code bound code code position code code unbound code highest position whitespace character code bound code code position code res ides resides java partition code code find non whitespace backward in any partition findnonwhitespacebackwardinanypartition position bound scan backward scanbackward position bound f non s fnonws finds lowest position code code code f document fdocument code code start code code bound code code condition f document fdocument get char getchar code eval uates evaluates code code param start character position code f document fdocument code considered param bound position code f document fdocument code code bound code code start code code unbound code param condition code stop condition stopcondition code check lowest position code start code code bound code code condition code holds code code scan forward scanforward start bound stop condition stopcondition condition is legal islegal start bound unbound bound f document fdocument get length getlength is legal islegal bound f document fdocument get length getlength f pos fpos start f pos fpos bound f char fchar f document fdocument get char getchar f pos fpos condition f char fchar f pos fpos f pos fpos f pos fpos condition next position nextposition f pos fpos bad location exception badlocationexception finds lowest position code f document fdocument code position code position code code bound code code f document fdocument get char getchar position code eval uates evaluates code code position partition param position character position code f document fdocument code considered param bound position code f document fdocument code code bound code code position code code unbound code param code code search lowest position code code code bound code code position code res ides resides java partition code code scan forward scanforward position bound scan forward scanforward position bound character match charactermatch finds lowest position code f document fdocument code position code position code code bound code code f document fdocument get char getchar position code eval uates evaluates code code code chars code position partition param position character position code f document fdocument code considered param bound position code f document fdocument code code bound code code position code code unbound code param chars array code code search lowest position whitespace character code position code code bound code res ides resides java partition code code scan forward scanforward position bound chars scan forward scanforward position bound character match charactermatch chars finds highest position code code code f document fdocument code code bound code code code code start code code condition f document fdocument get char getchar code eval uates evaluates code code param start character position code f document fdocument code considered param bound position code f document fdocument code code bound code code start code code unbound code param condition code stop condition stopcondition code check highest position code bound code code start code code condition code holds code code scan backward scanbackward start bound stop condition stopcondition condition bound unbound bound is legal islegal bound is legal islegal start f document fdocument get length getlength f pos fpos start f pos fpos bound f char fchar f document fdocument get char getchar f pos fpos condition f char fchar f pos fpos f pos fpos f pos fpos condition next position nextposition f pos fpos bad location exception badlocationexception finds highest position code f document fdocument code position code position code code bound code code f document fdocument get char getchar position code eval uates evaluates code code code chars code position partition param position character position code f document fdocument code considered param bound position code f document fdocument code code bound code code position code code unbound code param code code search highest position element code chars code code bound code code position code res ides resides java partition code code scan backward scanbackward position bound scan backward scanbackward position bound character match charactermatch finds highest position code f document fdocument code position code position code code bound code code f document fdocument get char getchar position code eval uates evaluates code code code chars code position partition param position character position code f document fdocument code considered param bound position code f document fdocument code code bound code code position code code unbound code param chars array code code search highest position element code chars code code bound code code position code res ides resides java partition code code scan backward scanbackward position bound chars scan backward scanbackward position bound character match charactermatch chars checks code position code res ides resides java partition code f document fdocument code param position position checked code code code position code partition code f document fdocument code code code is default partition isdefaultpartition position f partition fpartition equals get partition getpartition position get type gettype returns partition code position code param position position partition partition code position code dummy length partition accessing document fails i type d region itypedregion get partition getpartition position f cached partition fcachedpartition position is true istrue position is true istrue position f document fdocument get length getlength f cached partition fcachedpartition text utilities textutilities get partition getpartition f document fdocument f partitioning fpartitioning position bad location exception badlocationexception f cached partition fcachedpartition type d region typedregion position partition f cached partition fcachedpartition returns code code code region code code position code param region region param position offset code code code region code code position code i region iregion region position offset region get offset getoffset offset position position offset region get length getlength checks open condition block statement statement pre condition do stuff dostuff pre algorithm comment code condition condition expression statement param position insert position character param bound lowest position code code code conditional statement loop block code code is brace less block start isbracelessblockstart position bound position previous token previoustoken position bound tokendo tokenelse tokenrparen position find opening peer findopeningpeer f pos fpos lparen rparen position previous token previoustoken position bound tokenif tokenfor tokenwhile returns code code document scanned code start code appears instance creation qualified preceded code code keyword code start code type signature constructor parameter list heuristic code code code start code positions pre java util array list arraylist string array list arraylist comment array list arraylist pre pre java util array list arraylist string java util array list arraylist string array list arraylist array list arraylist pre param start position type instance creation sup pos edly supposedly ends param bound position code f document fdocument code code bound code code start code code unbound code code code current position type instance creation looks like class instance creation backward lookslikeclassinstancecreationbackward start bound token previous token previoustoken start bound type token symbols tokenident token previous token previoustoken get position getposition bound dot qualification token symbols tokenother token previous token previoustoken get position getposition bound qualification token symbols tokenident token previous token previoustoken get position getposition bound token symbols tokennew returns code code code identifier code type variable type code code heuristic param identifier identifier check code code code identifier code type variable type code code is generic starter isgenericstarter char sequence charsequence identifier heuristic identifiers start upper fail comparison constants max foo find matching fail types type variables length identifier length length character is upper case isuppercase identifier char at charat length identifier char at charat