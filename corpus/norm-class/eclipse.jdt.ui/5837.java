copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring surround java util array list arraylist java util arrays java util iterator java util list org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse text edits multi text edit multitextedit org eclipse text edits text edit textedit org eclipse text edits text edit group texteditgroup org eclipse jface text i text selection itextselection org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring text file change textfilechange org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom assignment org eclipse jdt core dom block org eclipse jdt core dom catch clause catchclause org eclipse jdt core dom child list property descriptor childlistpropertydescriptor org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom expression org eclipse jdt core dom expression statement expressionstatement org eclipse jdt core dom i extended modifier iextendedmodifier org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom lambda expression lambdaexpression org eclipse jdt core dom method reference methodreference org eclipse jdt core dom modifier org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom statement org eclipse jdt core dom try statement trystatement org eclipse jdt core dom type org eclipse jdt core dom union type uniontype org eclipse jdt core dom variable declaration variabledeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt core refactoring compilation unit change compilationunitchange org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom code scope builder codescopebuilder org eclipse jdt internal corext dom selection org eclipse jdt internal corext linked proposal model linkedproposalmodel org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal corext refactoring util resource util resourceutil org eclipse jdt internal corext refactoring util selection aware source range computer selectionawaresourcerangecomputer org eclipse jdt internal corext util strings org eclipse jdt internal java editor javaeditor ast provider astprovider org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal text correction quick assist processor quickassistprocessor surround statements block multi block special url url file tourl variable declaration statement convert declaration initializer body block consists assignments move selected nodes declaration block surround with try catch refactoring surroundwithtrycatchrefactoring refactoring nls string group exc type exc type nls string group exc exc selection f selection fselection surround with try catch analyzer surroundwithtrycatchanalyzer f analyzer fanalyzer f leave dirty fleavedirty i compilation unit icompilationunit fcunit compilation unit compilationunit f root node frootnode ast rewrite astrewrite f rewriter frewriter import rewrite importrewrite f import rewrite fimportrewrite code scope builder codescopebuilder scope f scope fscope ast node astnode f selected nodes fselectednodes linked proposal model linkedproposalmodel f linked proposal model flinkedproposalmodel f is multi catch fismulticatch surround with try catch refactoring surroundwithtrycatchrefactoring i compilation unit icompilationunit selection selection is multi catch ismulticatch fcunit f selection fselection selection f is multi catch fismulticatch is multi catch ismulticatch f leave dirty fleavedirty surround with try catch refactoring surroundwithtrycatchrefactoring create i compilation unit icompilationunit i text selection itextselection selection create selection surround with try catch refactoring surroundwithtrycatchrefactoring create i compilation unit icompilationunit offset length create offset length surround with try catch refactoring surroundwithtrycatchrefactoring create i compilation unit icompilationunit i text selection itextselection selection is multi catch ismulticatch surround with try catch refactoring surroundwithtrycatchrefactoring selection create from start length createfromstartlength selection get offset getoffset selection get length getlength is multi catch ismulticatch surround with try catch refactoring surroundwithtrycatchrefactoring create i compilation unit icompilationunit offset length is multi catch ismulticatch surround with try catch refactoring surroundwithtrycatchrefactoring selection create from start length createfromstartlength offset length is multi catch ismulticatch linked proposal model linkedproposalmodel get linked proposal model getlinkedproposalmodel f linked proposal model flinkedproposalmodel set leave dirty setleavedirty leave dirty leavedirty f leave dirty fleavedirty leave dirty leavedirty stop execution stopexecution f analyzer fanalyzer i type binding itypebinding exceptions f analyzer fanalyzer get exceptions getexceptions exceptions exceptions length java doc i refactoring irefactoring get name getname override string get name getname refactoring core messages refactoringcoremessages surround with try catch refactoring surroundwithtrycatchrefactoring refactoring status refactoringstatus check activation basics checkactivationbasics compilation unit compilationunit root node rootnode core exception coreexception refactoring status refactoringstatus result refactoring status refactoringstatus f root node frootnode root node rootnode f analyzer fanalyzer surround with try catch analyzer surroundwithtrycatchanalyzer fcunit f selection fselection f root node frootnode accept f analyzer fanalyzer result merge f analyzer fanalyzer get status getstatus i type binding itypebinding exceptions f analyzer fanalyzer get exceptions getexceptions f is multi catch fismulticatch exceptions exceptions length result merge refactoring status refactoringstatus create warning status createwarningstatus refactoring core messages refactoringcoremessages surround with try catch refactoring surroundwithtrycatchrefactoring not multiple exceptions notmultipleexceptions result refactoring check activation checkactivation i progress monitor iprogressmonitor override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception compilation unit compilationunit root node rootnode refactoringastparser ast provider astprovider shared ast level parse fcunit check activation basics checkactivationbasics root node rootnode refactoring check input checkinput i progress monitor iprogressmonitor override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception checks validate modifies files validatemodifiesfiles resource util resourceutil get files getfiles i compilation unit icompilationunit fcunit get validation context getvalidationcontext java doc i refactoring irefactoring create change createchange i progress monitor iprogressmonitor override change create change createchange i progress monitor iprogressmonitor core exception coreexception nls string null progress monitor nullprogressmonitor begin task begintask compilation unit change compilationunitchange result compilation unit change compilationunitchange get name getname fcunit f leave dirty fleavedirty result set save mode setsavemode text file change textfilechange leave dirty multi text edit multitextedit root multi text edit multitextedit result set edit setedit root f rewriter frewriter ast rewrite astrewrite create f analyzer fanalyzer get enclosing body declaration getenclosingbodydeclaration getast f rewriter frewriter set target source range computer settargetsourcerangecomputer selection aware source range computer selectionawaresourcerangecomputer f analyzer fanalyzer get selected nodes getselectednodes fcunit get buffer getbuffer f selection fselection get offset getoffset f selection fselection get length getlength f import rewrite fimportrewrite stub utility stubutility create import rewrite createimportrewrite f root node frootnode f linked proposal model flinkedproposalmodel linked proposal model linkedproposalmodel f scope fscope code scope builder codescopebuilder perform f analyzer fanalyzer get enclosing body declaration getenclosingbodydeclaration f selection fselection find scope findscope f selection fselection get offset getoffset f selection fselection get length getlength f scope fscope set cursor setcursor f selection fselection get offset getoffset f selected nodes fselectednodes f analyzer fanalyzer get selected nodes getselectednodes create try catch statement createtrycatchstatement fcunit get buffer getbuffer fcunit find recommended line separator findrecommendedlineseparator f import rewrite fimportrewrite has recorded changes hasrecordedchanges text edit textedit edit f import rewrite fimportrewrite rewrite imports rewriteimports root add child addchild edit result add text edit group addtexteditgroup text edit group texteditgroup text edit textedit edit text edit textedit change f rewriter frewriter rewriteast root add child addchild change result add text edit group addtexteditgroup text edit group texteditgroup text edit textedit change result ast getast f root node frootnode getast create try catch statement createtrycatchstatement org eclipse jdt core i buffer ibuffer buffer string line delimiter linedelimiter core exception coreexception list statement result array list arraylist try statement trystatement try statement trystatement getast new try statement newtrystatement i type binding itypebinding exceptions f analyzer fanalyzer get exceptions getexceptions import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext f analyzer fanalyzer get enclosing body declaration getenclosingbodydeclaration f import rewrite fimportrewrite f is multi catch fismulticatch exceptions length i type binding itypebinding exception exceptions catch clause catchclause catch clause catchclause getast new catch clause newcatchclause try statement trystatement catch clauses catchclauses add catch clause catchclause single variable declaration singlevariabledeclaration decl getast new single variable declaration newsinglevariabledeclaration string var name varname stub utility stubutility get exception variable name getexceptionvariablename fcunit get java project getjavaproject string f scope fscope create name createname var name varname decl set name setname getast new simple name newsimplename type type f import rewrite fimportrewrite add import addimport exception getast context decl set type settype type catch clause catchclause set exception setexception decl statement get catch body getcatchbody ast nodes astnodes get qualified type name getqualifiedtypename type line delimiter linedelimiter catch clause catchclause get body getbody statements add f linked proposal model flinkedproposalmodel get position group getpositiongroup group exc type add position addposition f rewriter frewriter track decl get type gettype f linked proposal model flinkedproposalmodel get position group getpositiongroup group exc add position addposition f rewriter frewriter track decl get name getname list i type binding itypebinding filtered exceptions filteredexceptions filter sub type exceptions filtersubtypeexceptions exceptions catch clause catchclause catch clause catchclause getast new catch clause newcatchclause single variable declaration singlevariabledeclaration decl getast new single variable declaration newsinglevariabledeclaration string var name varname stub utility stubutility get exception variable name getexceptionvariablename fcunit get java project getjavaproject string f scope fscope create name createname var name varname decl set name setname getast new simple name newsimplename union type uniontype union type uniontype getast new union type newuniontype list type types union type uniontype types i type binding itypebinding exception filtered exceptions filteredexceptions type type f import rewrite fimportrewrite add import addimport exception getast context types add type f linked proposal model flinkedproposalmodel get position group getpositiongroup group exc type add position addposition f rewriter frewriter track type decl set type settype union type uniontype catch clause catchclause set exception setexception decl f linked proposal model flinkedproposalmodel get position group getpositiongroup group exc add position addposition f rewriter frewriter track decl get name getname nls statement get catch body getcatchbody exception line delimiter linedelimiter catch clause catchclause get body getbody statements add try statement trystatement catch clauses catchclauses add catch clause catchclause list ast node astnode variable declarations variabledeclarations get special variable declaration statements getspecialvariabledeclarationstatements list rewrite listrewrite statements f rewriter frewriter get list rewrite getlistrewrite try statement trystatement get body getbody block statements property selected node removed selectednoderemoved ast node astnode expression statement expressionstatement f selected nodes fselectednodes length ast node astnode node f selected nodes fselectednodes node variable declaration statement variabledeclarationstatement variable declarations variabledeclarations node ast ast getast variable declaration statement variabledeclarationstatement statement variable declaration statement variabledeclarationstatement node create copy remove initializer variable declaration statement variabledeclarationstatement copy variable declaration statement variabledeclarationstatement ast node astnode copy subtree copysubtree ast statement list i extended modifier iextendedmodifier modifiers copy modifiers iterator i extended modifier iextendedmodifier iter modifiers iterator iter has next hasnext i extended modifier iextendedmodifier modifier iter modifier is modifier ismodifier modifier is final isfinal modifier modifier get keyword getkeyword to flag value toflagvalue iter remove list variable declaration fragment variabledeclarationfragment fragments copy fragments iterator variable declaration fragment variabledeclarationfragment iter fragments iterator iter has next hasnext variable declaration fragment variabledeclarationfragment fragment iter fragment set initializer setinitializer compilation unit compilationunit root compilation unit compilationunit statement get root getroot extended start extendedstart root get extended start position getextendedstartposition statement leading comment comment covered selection extended start extendedstart statement get start position getstartposition extended start extendedstart f selection fselection get offset getoffset string comment token commenttoken buffer get text gettext extended start extendedstart statement get start position getstartposition extended start extendedstart comment token commenttoken strings trim trailing tabs and spaces trimtrailingtabsandspaces comment token commenttoken type type statement get type gettype string type name typename buffer get text gettext type get start position getstartposition type get length getlength copy set type settype type f rewriter frewriter create string placeholder createstringplaceholder comment token commenttoken type name typename type get node type getnodetype result add copy convert fragments expression statements fragments statement fragments fragments is empty isempty list expression statement expressionstatement new expression statements newexpressionstatements array list arraylist iterator variable declaration fragment variabledeclarationfragment iter fragments iterator iter has next hasnext variable declaration fragment variabledeclarationfragment fragment iter expression initializer fragment get initializer getinitializer initializer assignment assignment ast new assignment newassignment assignment set left hand side setlefthandside expression f rewriter frewriter create copy target createcopytarget fragment get name getname assignment set right hand side setrighthandside expression f rewriter frewriter create copy target createcopytarget initializer new expression statements newexpressionstatements add ast new expression statement newexpressionstatement assignment new expression statements newexpressionstatements is empty isempty f selected nodes fselectednodes length expression statement expressionstatement f rewriter frewriter create group node creategroupnode new expression statements newexpressionstatements to array toarray ast node astnode new expression statements newexpressionstatements size f rewriter frewriter replace statement f rewriter frewriter create group node creategroupnode new expression statements newexpressionstatements to array toarray ast node astnode new expression statements newexpressionstatements size f rewriter frewriter remove statement selected node removed selectednoderemoved f rewriter frewriter remove statement selected node removed selectednoderemoved result add try statement trystatement ast node astnode replacement node replacementnode result size replacement node replacementnode result replacement node replacementnode f rewriter frewriter create group node creategroupnode result to array toarray ast node astnode result size f selected nodes fselectednodes length ast node astnode selected node selectednode f selected nodes fselectednodes selected node selectednode method reference methodreference method reference methodreference method reference methodreference method reference methodreference selected node selectednode i method binding imethodbinding functional method functionalmethod quick assist processor quickassistprocessor get functional method for method reference getfunctionalmethodformethodreference method reference methodreference functional method functionalmethod exception analyzer exceptionanalyzer handle method reference handlemethodreference method reference methodreference node is true istrue functional method functionalmethod functional method functionalmethod is generic method isgenericmethod lambda expression lambdaexpression lambda quick assist processor quickassistprocessor convert method refer nce t o lambda convertmethodreferncetolambda method reference methodreference functional method functionalmethod f root node frootnode f rewriter frewriter ast node astnode statement in block statementinblock ast node astnode block lambda get body getbody statements f rewriter frewriter replace statement in block statementinblock replacement node replacementnode statements insert last insertlast statement in block statementinblock lambda expression lambdaexpression enclosing lambda enclosinglambda ast res olving astresolving find enclosing lambda expression findenclosinglambdaexpression selected node selectednode enclosing lambda enclosinglambda selected node selectednode get location in parent getlocationinparent lambda expression lambdaexpression body property enclosing lambda enclosinglambda resolve method binding resolvemethodbinding quick assist processor quickassistprocessor change lambda body t o block changelambdabodytoblock enclosing lambda enclosinglambda getast f rewriter frewriter block block body blockbody block f rewriter frewriter enclosing lambda enclosinglambda lambda expression lambdaexpression body property ast node astnode statement in block statementinblock ast node astnode block body blockbody statements f rewriter frewriter replace statement in block statementinblock replacement node replacementnode statements insert last insertlast statement in block statementinblock expression statement expressionstatement statements insert last insertlast expression statement expressionstatement selected node removed selectednoderemoved statements insert last insertlast f rewriter frewriter create move target createmovetarget selected node selectednode f rewriter frewriter replace selected node selectednode replacement node replacementnode list rewrite listrewrite source f rewriter frewriter get list rewrite getlistrewrite f selected nodes fselectednodes get parent getparent child list property descriptor childlistpropertydescriptor f selected nodes fselectednodes get location in parent getlocationinparent ast node astnode to move tomove source create move target createmovetarget f selected nodes fselectednodes f selected nodes fselectednodes f selected nodes fselectednodes length replacement node replacementnode statements insert last insertlast to move tomove list i type binding itypebinding filter sub type exceptions filtersubtypeexceptions i type binding itypebinding exceptions list i type binding itypebinding filtered exceptions filteredexceptions array list arraylist filtered exceptions filteredexceptions add all addall arrays as list aslist exceptions iterator i type binding itypebinding subtype iterator subtypeiterator filtered exceptions filteredexceptions iterator subtype iterator subtypeiterator has next hasnext i type binding itypebinding i type binding itypebinding subtype iterator subtypeiterator iterator i type binding itypebinding supertype iterator supertypeiterator filtered exceptions filteredexceptions iterator supertype iterator supertypeiterator has next hasnext i type binding itypebinding super type binding supertypebinding supertype iterator supertypeiterator i type binding itypebinding equals super type binding supertypebinding i type binding itypebinding is sub type compatible issubtypecompatible super type binding supertypebinding subtype iterator subtypeiterator remove filtered exceptions filteredexceptions list ast node astnode get special variable declaration statements getspecialvariabledeclarationstatements list ast node astnode result array list arraylist variable declaration variabledeclaration locals f analyzer fanalyzer get affected locals getaffectedlocals locals length ast node astnode parent locals get parent getparent parent variable declaration statement variabledeclarationstatement result parent result add parent result statement get catch body getcatchbody string type string string line separator lineseparator core exception coreexception string stub utility stubutility get catch body content getcatchbodycontent fcunit type f selected nodes fselectednodes line separator lineseparator statement f rewriter frewriter create string placeholder createstringplaceholder ast node astnode statement