copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring nls java util array list arraylist java util list java util properties java util sorted map sortedmap java util tree map treemap org eclipse osgi util nls org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core file buf fers filebuffers file buffers filebuffers org eclipse core file buf fers filebuffers i text file buffer itextfilebuffer org eclipse core file buf fers filebuffers i text file buffer manager itextfilebuffermanager org eclipse core file buf fers filebuffers location kind locationkind org eclipse jface text bad location exception badlocationexception org eclipse jface text i document idocument org eclipse jface text region org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core java model exception javamodelexception org eclipse jdt core signature org eclipse jdt core compiler invalid input exception invalidinputexception org eclipse jdt core dom ast visitor astvisitor org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt sharedastprovider cal culates calculates hints nls refactoring compilation unit fragments accessor resource bundle accessor resource bundle nls hint nlshint string f accessor name faccessorname i package fragment ipackagefragment f accessor package faccessorpackage string f resource bundle name fresourcebundlename i package fragment ipackagefragment f resource bundle package fresourcebundlepackage nls substitution nlssubstitution f substitutions fsubstitutions nls hint nlshint i compilation unit icompilationunit compilation unit compilationunit ast root astroot is not null isnotnull is not null isnotnull ast root astroot i package fragment ipackagefragment cu package cupackage i package fragment ipackagefragment get ancestor getancestor i java element ijavaelement fragment f accessor name faccessorname nls refactoring nlsrefactoring access or accessor class name classname f accessor package faccessorpackage cu package cupackage f resource bundle name fresourcebundlename nls refactoring nlsrefactoring property filename nls refactoring nlsrefactoring property file ext f resource bundle package fresourcebundlepackage cu package cupackage i java project ijavaproject project get java project getjavaproject nls line nlsline lines create raw lines createrawlines accessor class reference accessorclassreference access class ref accessclassref find first accessor reference findfirstaccessorreference lines ast root astroot access class ref accessclassref eclipse nls app roach approach list nls line nlsline eclipsenlslines array list arraylist access class ref accessclassref createeclipsenlslines get document getdocument ast root astroot eclipsenlslines eclipsenlslines is empty isempty nls line nlsline raw lines rawlines lines raw lines length rawlineslength raw lines rawlines length eclipse lines length eclipselineslength eclipsenlslines size lines nls line nlsline raw lines length rawlineslength eclipse lines length eclipselineslength raw lines length rawlineslength lines raw lines rawlines eclipse lines length eclipselineslength lines raw lines length rawlineslength eclipsenlslines properties props access class ref accessclassref props nls hint helper nlshinthelper get properties getproperties project access class ref accessclassref props props properties f substitutions fsubstitutions create substitutions createsubstitutions lines props ast root astroot access class ref accessclassref f accessor name faccessorname access class ref accessclassref get name getname i type binding itypebinding accessor class binding accessorclassbinding access class ref accessclassref get binding getbinding i package fragment ipackagefragment accessor pack accessorpack nls hint helper nlshinthelper get package of accessor class getpackageofaccessorclass project accessor class binding accessorclassbinding accessor pack accessorpack f accessor package faccessorpackage accessor pack accessorpack string full bundle name fullbundlename access class ref accessclassref get resource bundle name getresourcebundlename full bundle name fullbundlename f resource bundle name fresourcebundlename signature get simple name getsimplename full bundle name fullbundlename nls refactoring nlsrefactoring property file ext string pack name packname signature get qualifier getqualifier full bundle name fullbundlename i package fragment ipackagefragment pack nls hint helper nlshinthelper get resource bundle package getresourcebundlepackage project pack name packname f resource bundle name fresourcebundlename pack f resource bundle package fresourcebundlepackage pack java model exception javamodelexception accessor class reference accessorclassreference createeclipsenlslines i document idocument document compilation unit compilationunit ast root astroot list nls line nlsline nls lines nlslines accessor class reference accessorclassreference first accessor firstaccessor accessor class reference accessorclassreference sorted map sortedmap integer nls line nlsline linetonlsline tree map treemap ast root astroot accept ast visitor astvisitor i compilation unit icompilationunit f cache fcache compilation unit compilationunit f cache fcache ast override visit qualified name qualifiedname node i type binding itypebinding type node get qualifier getqualifier resolve type binding resolvetypebinding type i type binding itypebinding super type supertype type get superclass getsuperclass super type supertype nls get name getname equals super type supertype get qualified name getqualifiedname integer integer document get line of offset getlineofoffset node get start position getstartposition bad location exception badlocationexception nls line nlsline nls line nlsline linetonlsline nls line nlsline nls line nlsline nls line nlsline int value intvalue linetonlsline nls line nlsline simple name simplename node get name getname nls element nlselement element nls element nlselement node get name getname get identifier getidentifier get start position getstartposition get length getlength nls line nlsline size nls line nlsline add element string bundle name bundlename i compilation unit icompilationunit bundlecu i compilation unit icompilationunit type get java element getjavaelement get ancestor getancestor i java element ijavaelement compilation unit f cache fcache f cache fcache equals bundlecu f cache fcache ast f cache fcache bundlecu f cache fcache f cache fcache ast sharedastprovider getast f cache fcache sharedastprovider wait f cache fcache ast bundle name bundlename nls hint helper nlshinthelper get resource bundle name getresourcebundlename f cache fcache ast element set accessor class reference setaccessorclassreference accessor class reference accessorclassreference type bundle name bundlename region node get start position getstartposition node get length getlength first accessor firstaccessor first accessor firstaccessor element get accessor class reference getaccessorclassreference nls lines nlslines add all addall linetonlsline values first accessor firstaccessor i document idocument get document getdocument i compilation unit icompilationunit i path ipath path get path getpath i text file buffer manager itextfilebuffermanager manager file buffers filebuffers get text file buffer manager gettextfilebuffermanager manager connect path location kind locationkind normalize core exception coreexception i text file buffer itextfilebuffer buffer manager get text file buffer gettextfilebuffer path location kind locationkind normalize buffer buffer get document getdocument manager disconnect path location kind locationkind normalize core exception coreexception nls substitution nlssubstitution create substitutions createsubstitutions nls line nlsline lines properties props compilation unit compilationunit ast root astroot list nls substitution nlssubstitution result array list arraylist lines length nls element nlselement elements lines get elements getelements elements length nls element nlselement nls element nlselement elements nls element nlselement has tag hastag accessor class reference accessorclassreference accessor class reference accessorclassreference nls hint helper nlshinthelper get accessor class reference getaccessorclassreference ast root astroot nls element nlselement accessor class reference accessorclassreference accessor translated result add nls substitution nlssubstitution nls substitution nlssubstitution str ip quotes stripquotes nls element nlselement get value getvalue nls element nlselement string key str ip quotes stripquotes nls element nlselement get value getvalue string props get property getproperty key result add nls substitution nlssubstitution nls substitution nlssubstitution externalized key nls element nlselement accessor class reference accessorclassreference nls element nlselement iseclipsenls string key nls element nlselement get value getvalue result add nls substitution nlssubstitution nls substitution nlssubstitution externalized key props get property getproperty key nls element nlselement nls element nlselement get accessor class reference getaccessorclassreference result add nls substitution nlssubstitution nls substitution nlssubstitution internal ized internalized str ip quotes stripquotes nls element nlselement get value getvalue nls element nlselement result to array toarray nls substitution nlssubstitution result size accessor class reference accessorclassreference find first accessor reference findfirstaccessorreference nls line nlsline lines compilation unit compilationunit ast root astroot lines length nls element nlselement elements lines get elements getelements elements length nls element nlselement nls element nlselement elements nls element nlselement has tag hastag accessor class reference accessorclassreference accessor class reference accessorclassreference nls hint helper nlshinthelper get accessor class reference getaccessorclassreference ast root astroot nls element nlselement accessor class reference accessorclassreference accessor class reference accessorclassreference find access missing nls tag bug lines length nls element nlselement elements lines get elements getelements elements length nls element nlselement nls element nlselement elements nls element nlselement has tag hastag accessor class reference accessorclassreference accessor class reference accessorclassreference nls hint helper nlshinthelper get accessor class reference getaccessorclassreference ast root astroot nls element nlselement accessor class reference accessorclassreference accessor class reference accessorclassreference string str ip quotes stripquotes string str str substring str length nls line nlsline create raw lines createrawlines i compilation unit icompilationunit nls scanner nlsscanner scan java model exception javamodelexception nls line nlsline invalid input exception invalidinputexception nls line nlsline bad location exception badlocationexception nls line nlsline string get accessor class name getaccessorclassname f accessor name faccessorname iseclipsenls f is eclipse s fiseclipsenls i package fragment ipackagefragment get accessor class package getaccessorclasspackage f accessor package faccessorpackage string get resource bundle name getresourcebundlename f resource bundle name fresourcebundlename i package fragment ipackagefragment get resource bundle package getresourcebundlepackage f resource bundle package fresourcebundlepackage nls substitution nlssubstitution get substitutions getsubstitutions f substitutions fsubstitutions