copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation nikolay metchev fixed https bugs eclipse org bugs bug cgi tom eicher avaloq e vol ution evolution block selection mode org eclipse jdt internal text java org eclipse core runtime org eclipse jface preference i preference store ipreferencestore org eclipse jface text bad location exception badlocationexception org eclipse jface text default indent line auto edit strategy defaultindentlineautoeditstrategy org eclipse jface text document org eclipse jface text document command documentcommand org eclipse jface text document rewrite session documentrewritesession org eclipse jface text document rewrite session type documentrewritesessiontype org eclipse jface text i document idocument org eclipse jface text i region iregion org eclipse jface text i type d region itypedregion org eclipse jface text region org eclipse jface text text utilities textutilities org eclipse jface text rules fast partitioner fastpartitioner org eclipse jface text source i source viewer isourceviewer org eclipse i editor part ieditorpart org eclipse i workbench page iworkbenchpage org eclipse texteditor i text editor extension itexteditorextension org eclipse jdt core i java project ijavaproject org eclipse jdt core java core javacore org eclipse jdt core tool factory toolfactory org eclipse jdt core compiler i problem iproblem org eclipse jdt core compiler i scanner iscanner org eclipse jdt core compiler i terminal symbols iterminalsymbols org eclipse jdt core compiler invalid input exception invalidinputexception org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom do statement dostatement org eclipse jdt core dom expression org eclipse jdt core dom for statement forstatement org eclipse jdt core dom if statement ifstatement org eclipse jdt core dom node finder nodefinder org eclipse jdt core dom statement org eclipse jdt core dom while statement whilestatement org eclipse jdt core formatter default code formatter constants defaultcodeformatterconstants org eclipse jdt internal corext util code formatter util codeformatterutil org eclipse jdt preference constants preferenceconstants org eclipse jdt text i java partitions ijavapartitions org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor ast provider astprovider org eclipse jdt internal java editor javaeditor editor utility editorutility org eclipse jdt internal text fast java partition scanner fastjavapartitionscanner org eclipse jdt internal text java heuristic scanner javaheuristicscanner org eclipse jdt internal text java indenter javaindenter org eclipse jdt internal text symbols auto indent str ategy strategy sensitive brackets java auto indent strategy javaautoindentstrategy default indent line auto edit strategy defaultindentlineautoeditstrategy comment introduce r introducer nls string comment compilation unit info compilationunitinfo buffer delta compilation unit info compilationunitinfo buffer delta buffer buffer delta delta f close brace fclosebrace f is smart mode fissmartmode f is smart tab fissmarttab f is smart indent after new line fissmartindentafternewline string f partitioning fpartitioning i java project ijavaproject f project fproject i scanner iscanner fg scanner fgscanner tool factory toolfactory create scanner createscanner viewer i source viewer isourceviewer f viewer fviewer creates java auto indent str ategy strategy document partitioning param partitioning document partitioning param project project for matting formatting preferences preferences param viewer source viewer str ategy strategy attached java auto indent strategy javaautoindentstrategy string partitioning i java project ijavaproject project i source viewer isourceviewer viewer f partitioning fpartitioning partitioning f project fproject project f viewer fviewer viewer get bracket count getbracketcount i document idocument start offset startoffset end offset endoffset ignore close brackets ignoreclosebrackets bad location exception badlocationexception bracket count bracketcount start offset startoffset end offset endoffset curr get char getchar start offset startoffset start offset startoffset curr start offset startoffset end offset endoffset get char getchar start offset startoffset comment starts advance comment start offset startoffset get comment end getcommentend start offset startoffset end offset endoffset comment start offset startoffset end offset endoffset start offset startoffset end offset endoffset get char getchar start offset startoffset comment for get forget read bracket count bracketcount start offset startoffset bracket count bracketcount ignore close brackets ignoreclosebrackets ignore close brackets ignoreclosebrackets bracket count bracketcount start offset startoffset get string end getstringend start offset startoffset end offset endoffset curr bracket count bracketcount bracket counting get comment end getcommentend i document idocument offset end offset endoffset bad location exception badlocationexception offset end offset endoffset curr get char getchar offset offset curr offset end offset endoffset get char getchar offset offset end offset endoffset string get indent of line getindentofline i document idocument bad location exception badlocationexception start get line offset getlineoffset start get line length getlinelength white end whiteend find end of white space findendofwhitespace start start white end whiteend start nls get string end getstringend i document idocument offset end offset endoffset bad location exception badlocationexception offset end offset endoffset curr get char getchar offset offset curr offset curr offset end offset endoffset smart indent after closing bracket smartindentafterclosingbracket i document idocument document command documentcommand offset get length getlength offset get length getlength offset offset get line of offset getlineofoffset start get line offset getlineoffset whiteend find end of white space findendofwhitespace start offset java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner java indenter javaindenter indenter java indenter javaindenter scanner f project fproject whiteend offset reference indenter find reference position findreferenceposition offset ind line indline get line of offset getlineofoffset reference ind line indline ind line indline string buffer stringbuffer replace text replacetext string buffer stringbuffer get indent of line getindentofline ind line indline replace text replacetext append whiteend offset whiteend replace text replacetext append text length offset start offset start text replace text replacetext to string tostring bad location exception badlocationexception java plugin javaplugin log smart indent after opening bracket smartindentafteropeningbracket i document idocument document command documentcommand offset get length getlength java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner offset get length getlength offset offset get line of offset getlineofoffset line offset lineoffset get line offset getlineoffset line offset lineoffset line offset lineoffset trim length java code pos scanner find non whitespace backward findnonwhitespacebackward java heuristic scanner javaheuristicscanner unbound pos last line lastline get line of offset getlineofoffset pos shift java brace less braceless block candidate last line lastline java indenter javaindenter indenter java indenter javaindenter scanner f project fproject string buffer stringbuffer indent indenter compute indentation computeindentation string to delete todelete line offset lineoffset offset line offset lineoffset indent indent to string tostring equals to delete todelete text indent append text to string tostring length offset line offset lineoffset offset line offset lineoffset bad location exception badlocationexception java plugin javaplugin log smart indent after new line smartindentafternewline i document idocument document command documentcommand java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner java indenter javaindenter indenter java indenter javaindenter scanner f project fproject string buffer stringbuffer indent indenter compute indentation computeindentation offset indent indent string buffer stringbuffer doc length doclength get length getlength offset doc length doclength offset doc length doclength offset offset get line of offset getlineofoffset string buffer stringbuffer buf string buffer stringbuffer text indent i region iregion reg get line information getlineinformation line end lineend reg get offset getoffset reg get length getlength content start contentstart find end of white space findendofwhitespace offset line end lineend length math max content start contentstart offset start reg get offset getoffset i type d region itypedregion region text utilities textutilities get partition getpartition f partitioning fpartitioning start i java partitions ijavapartitions java doc equals region get type gettype start get line information of offset getlineinformationofoffset region get offset getoffset get offset getoffset insert closing brace unclosed opening brace get bracket count getbracketcount start offset close brace closebrace is closed isclosed offset length caret offset caretoffset offset buf length shifts c are t shiftscaret pos offset get char getchar pos pos get char getchar pos offset copy content copycontent pos f partitioning fpartitioning line end lineend line end lineend content start contentstart length line end lineend offset buf append content start contentstart line end lineend content start contentstart to char array tochararray buf append text utilities textutilities get default line delimiter getdefaultlinedelimiter string buffer stringbuffer reference nonws find end of white space findendofwhitespace start line end lineend nonws offset get char getchar nonws reference string buffer stringbuffer start nonws start reference indenter get reference indentation getreferenceindentation offset reference buf append reference buf append insert extra braces offset start content start contentstart line end lineend get char getchar content start contentstart first char pos firstcharpos scanner find non whitespace backward findnonwhitespacebackward offset start first char pos firstcharpos java heuristic scanner javaheuristicscanner get char getchar first char pos firstcharpos caret offset caretoffset offset buf length shifts c are t shiftscaret string buffer stringbuffer reference nonws find end of white space findendofwhitespace start line end lineend nonws offset get char getchar nonws reference string buffer stringbuffer start nonws start reference indenter get reference indentation getreferenceindentation offset buf append text utilities textutilities get default line delimiter getdefaultlinedelimiter reference buf append reference text buf to string tostring bad location exception badlocationexception java plugin javaplugin log checks required copy content caret position inserting closing brace param document document modified param offset offset caret position relative start param partitioning document partitioning param max max position code code content caret position copied inserting closing brace code code copy content copycontent i document idocument document offset string partitioning max find opening parenthesis closing parenthesis current offset method declaration expression statement java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner document pos offset length max scan to scanto scanner scan for ward scanforward pos length scan to scanto scan to scanto length closing paren closingparen find closing paren to left findclosingparentoleft scanner pos opening paren openingparen start scan startscan closing paren closingparen closing paren closingparen scanner scan for ward scanforward start scan startscan scan to scanto closing paren closingparen opening paren openingparen find end of white space findendofwhitespace document pos scan to scanto document get char getchar bad location exception badlocationexception opening paren openingparen scanner find opening peer findopeningpeer closing paren closingparen expression document opening paren openingparen select insert positions parenthesis embracing caret opening paren openingparen pos opening paren openingparen looks like anonymous class def lookslikeanonymousclassdef document partitioning scanner opening paren openingparen finds closing parenthesis left code position code document parenthesis separated whitespace code position code parenthesis code position code returned param scanner java heuristic scanner document param position character position code document code considered position closing parenthesis left code position code separated whitespace code position code parenthesis find closing paren to left findclosingparentoleft java heuristic scanner javaheuristicscanner scanner position position position scanner previous token previoustoken position java heuristic scanner javaheuristicscanner unbound symbols tokenrparen scanner get position getposition position checks content code document code range code offset code code length code code code keyword param document document modified param offset character position code document code considered param length length character range considered param partitioning document partitioning code code character range code code keyword code code is new match isnewmatch i document idocument document offset length string partitioning is true istrue length is true istrue offset is true istrue offset length document get length getlength string text document offset length nls pos text index of indexof pos is default partition isdefaultpartition document pos offset partitioning pos nls text index of indexof nls nls pos pos pos character is java identifier part isjavaidentifierpart text char at charat pos pos length character is java identifier part isjavaidentifierpart text char at charat pos bad location exception badlocationexception checks content code document code code position code anonymous definition code position code left opening parenthesis definition parameter list param document document modified param partitioning document partitioning param scanner scanner param position character position code document code considered code code content code document code anonymous definition code code looks like anonymous class def lookslikeanonymousclassdef i document idocument document string partitioning java heuristic scanner javaheuristicscanner scanner position previous comma paren equal previouscommaparenequal scanner scan backward scanbackward position java heuristic scanner javaheuristicscanner unbound borders previous comma paren equal previouscommaparenequal position previous comma paren equal previouscommaparenequal is new match isnewmatch document previous comma paren equal previouscommaparenequal position previous comma paren equal previouscommaparenequal partitioning checks code position code res ides resides java partition code document code param document document modified param position position checked param partitioning document partitioning code code code position code partition code document code code code is default partition isdefaultpartition i document idocument document position string partitioning is true istrue position is true istrue position document get length getlength i type d region itypedregion region text utilities textutilities get partition getpartition document partitioning position region get type gettype equals i document idocument content type bad location exception badlocationexception is closed isclosed i document idocument document offset length compilation unit info compilationunitinfo info get compilation unit for method getcompilationunitformethod document offset info compilation unit compilationunit compilation unit compilationunit ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level parser set source setsource info buffer compilation unit compilationunit compilation unit compilationunit parser createast array index out of bounds exception arrayindexoutofboundsexception i problem iproblem problems compilation unit compilationunit get problems getproblems problems length problems getid i problem iproblem unmatched bracket unmatchedbracket relative offset relativeoffset offset info delta ast node astnode node node finder nodefinder perform compilation unit compilationunit relative offset relativeoffset length length node relative offset relativeoffset node get start position getstartposition relative offset relativeoffset node get start position getstartposition node get length getlength node node get parent getparent node node get node type getnodetype ast node astnode block get block balance getblockbalance document offset f partitioning fpartitioning ast node astnode statement if statement ifstatement if statement ifstatement if statement ifstatement node expression expression if statement ifstatement get expression getexpression i region iregion expression region expressionregion create region createregion expression info delta statement then statement thenstatement if statement ifstatement get then statement getthenstatement i region iregion then region thenregion create region createregion then statement thenstatement info delta expression statement expression region expressionregion get offset getoffset expression region expressionregion get length getlength offset offset length then region thenregion get offset getoffset then statement thenstatement statement else statement elsestatement if statement ifstatement get else statement getelsestatement i region iregion else region elseregion create region createregion else statement elsestatement info delta else statement elsestatement source offset sourceoffset then region thenregion get offset getoffset then region thenregion get length getlength source length sourcelength else region elseregion get offset getoffset source offset sourceoffset i region iregion else token elsetoken get token gettoken document region source offset sourceoffset source length sourcelength i terminal symbols iterminalsymbols token name else tokennameelse else token elsetoken else token elsetoken get offset getoffset else token elsetoken get length getlength offset offset length else region elseregion get offset getoffset ast node astnode statement ast node astnode statement expression expression node get node type getnodetype ast node astnode statement while statement whilestatement node get expression getexpression for statement forstatement node get expression getexpression i region iregion expression region expressionregion create region createregion expression info delta statement body node get node type getnodetype ast node astnode statement while statement whilestatement node get body getbody for statement forstatement node get body getbody i region iregion body region bodyregion create region createregion body info delta expression body statement expression region expressionregion get offset getoffset expression region expressionregion get length getlength offset offset length body region bodyregion get offset getoffset body ast node astnode statement do statement dostatement do statement dostatement do statement dostatement node i region iregion do region doregion create region createregion do statement dostatement info delta statement body do statement dostatement get body getbody i region iregion body region bodyregion create region createregion body info delta do region doregion get offset getoffset do region doregion get length getlength offset offset length body region bodyregion get offset getoffset body installs java part itioner partitioner code document code param document document install java stuff installjavastuff document document string types string i java partitions ijavapartitions java doc i java partitions ijavapartitions java multi comment i java partitions ijavapartitions java single comment i java partitions ijavapartitions java string i java partitions ijavapartitions java character i document idocument content type fast partitioner fastpartitioner part itioner partitioner fast partitioner fastpartitioner fast java partition scanner fastjavapartitionscanner types part itioner partitioner connect document document set document partitioner setdocumentpartitioner i java partitions ijavapartitions java partitioning part itioner partitioner installs java part itioner partitioner code document code param document document remove java stuff removejavastuff document document document set document partitioner setdocumentpartitioner i java partitions ijavapartitions java partitioning smart paste smartpaste i document idocument document document command documentcommand command new offset newoffset command offset new length newlength command length string new text newtext command text java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner document java indenter javaindenter indenter java indenter javaindenter document scanner f project fproject offset new offset newoffset reference position indent ref offset refoffset indenter find reference position findreferenceposition offset ref offset refoffset java heuristic scanner javaheuristicscanner peer offset peeroffset get peer position getpeerposition document command peer offset peeroffset indenter find reference position findreferenceposition peer offset peeroffset peer offset peeroffset java heuristic scanner javaheuristicscanner ref offset refoffset math min ref offset refoffset peer offset peeroffset eat insertion don format content first line firstline i region iregion document get line information of offset getlineinformationofoffset offset string not selected notselected document get offset getoffset offset get offset getoffset not selected notselected trim length new length newlength not selected notselected length new offset newoffset get offset getoffset first line firstline prefix for matting formatting won paste i region iregion ref line refline document get line information of offset getlineinformationofoffset ref offset refoffset string prefix document ref line refline get offset getoffset new offset newoffset ref line refline get offset getoffset handle indentation computation temporary document document temp document prefix new text newtext document rewrite session documentrewritesession session temp start rewrite session startrewritesession document rewrite session type documentrewritesessiontype strictly seq uential sequential scanner java heuristic scanner javaheuristicscanner temp indenter java indenter javaindenter temp scanner f project fproject install java stuff installjavastuff temp indent compute relative indentation difference part ially partially selected indent lines is indent detected isindentdetected string buffer stringbuffer add ition addition string buffer stringbuffer insert length insertlength first line insert length firstlineinsertlength first line indent firstlineindent don format document compute number of lines computenumberoflines prefix first line firstline lines temp get number of lines getnumberoflines tab length tablength get visual tab length preference getvisualtablengthpreference changed don change number lines adding indents don change number lines adding indents lines don change number lines adding indents i region iregion temp get line information getlineinformation line offset lineoffset get offset getoffset line length linelength get length getlength don modify empty lines line length linelength is indent detected isindentdetected indent pasted string current get current indent getcurrentindent temp string buffer stringbuffer correct indenter compute indentation computeindentation line offset lineoffset correct bail insert length insertlength sub tract indent subtractindent correct current add ition addition tab length tablength first line insert length firstlineinsertlength insert length insertlength first line indent firstlineindent current length temp line offset lineoffset line length linelength trim length is indent detected isindentdetected first line indent firstlineindent current length insert length insertlength first line insert length firstlineinsertlength insert length insertlength adjustment needed bail first line firstline adjust command offset new offset newoffset command length new length newlength changed leading indent changed insert length insertlength indent pasted lines insert length insertlength add indent addindent temp add ition addition tab length tablength insert length insertlength cut indent cutindent temp insert length insertlength tab length tablength remove java stuff removejavastuff temp temp stop rewrite session stoprewritesession session new text newtext temp prefix length temp get length getlength prefix length command offset new offset newoffset command length new length newlength command text new text newtext bad location exception badlocationexception java plugin javaplugin log returns indentation code code code document code returned string pairs leading slashes considered indentation space ast erisk asterisk javadoc comment considered indentation param document document param indentation code code code document code bad location exception badlocationexception document changed concurrently string get current indent getcurrentindent document document bad location exception badlocationexception i region iregion region document get line information getlineinformation region get offset getoffset end offset endoffset region get offset getoffset region get length getlength comments end offset endoffset document equals comment end offset endoffset document get char getchar character is whitespace iswhitespace don count space javadoc ast erisk asterisk style comment lines nls end offset endoffset document equals string type text utilities textutilities get content type getcontenttype document i java partitions ijavapartitions java partitioning type equals i java partitions ijavapartitions java doc type equals i java partitions ijavapartitions java multi comment document computes difference indent ations indentations returns difference length current correct positive code add ition addition code initialized substring length code correct code param correct correct indentation param current current indentation whitespace param difference string buffer positive cleared substring code current code length param tab length tablength length tab difference length code correct code code current code sub tract indent subtractindent char sequence charsequence correct char sequence charsequence current string buffer stringbuffer difference tab length tablength compute visual length computevisuallength correct tab length tablength compute visual length computevisuallength current tab length tablength diff diff diff difference set length setlength len len diff correct char at charat difference append len compute visual length computevisuallength tab length tablength diff indents code code code document code code indent code leaves leading comment sig ns signs param document document param param indent indentation insert param tab length tablength length tab bad location exception badlocationexception concurrent document modification add indent addindent document document char sequence charsequence indent tab length tablength bad location exception badlocationexception i region iregion region document get line information getlineinformation insert region get offset getoffset end offset endoffset region get offset getoffset region get length getlength compute insert leading comment markers new insert newinsert insert new insert newinsert end offset endoffset document new insert newinsert equals comment new insert newinsert heuristic check commented code comment new insert newinsert insert whitespace count whitespacecount new insert newinsert end offset endoffset document char at charat character is whitespace iswhitespace whitespace count whitespacecount whitespace count whitespacecount compute visual length computevisuallength tab length tablength whitespace count whitespacecount whitespace count whitespacecount code formatter util codeformatterutil get indent width getindentwidth f project fproject insert new insert newinsert insert indent document replace insert indent to string tostring cuts visual equivalent code to delete todelete code characters indentation code code code document code leaves leading comment sig ns signs param document document param param to delete todelete number space equivalents delete param tab length tablength length tab bad location exception badlocationexception concurrent document modification cut indent cutindent document document to delete todelete tab length tablength bad location exception badlocationexception i region iregion region document get line information getlineinformation region get offset getoffset end offset endoffset region get offset getoffset region get length getlength comments end offset endoffset document equals comment to delete todelete end offset endoffset document get char getchar character is whitespace iswhitespace to delete todelete compute visual length computevisuallength tab length tablength to delete todelete nls document replace returns visual length code char sequence charsequence code account visual tab ulator tabulator length param seq string measure param tab length tablength length tab visual length code seq code compute visual length computevisuallength char sequence charsequence seq tab length tablength size seq length seq char at charat tab length tablength size tab length tablength size tab length tablength size stays size size returns visual length character account visual tab ulator tabulator length param character measure param tab length tablength length tab visual length code code compute visual length computevisuallength tab length tablength tab length tablength preference setting visual tab ulator tabulator display number spaces displayed tab ulator tabulator editor get visual tab length preference getvisualtablengthpreference code formatter util codeformatterutil get tab width gettabwidth f project fproject preference setting tells insert spaces pressing tab key code code spaces inserted pressing tab key is ins erting spaces for tab isinsertingspacesfortab java core javacore space equals get core option getcoreoption f project fproject default code formatter constants defaultcodeformatterconstants formatter tab returns code project code specific core preference defined code key code param project project preference code code global preference param key key preference preference string get core option getcoreoption i java project ijavaproject project string key project java core javacore get option getoption key project get option getoption key get peer position getpeerposition i document idocument document document command documentcommand command document get length getlength search scope close rs closers pasted text find opening peers document document pasted document command text install java stuff installjavastuff pasted first peer firstpeer command offset java heuristic scanner javaheuristicscanner p scanner pscanner java heuristic scanner javaheuristicscanner pasted java heuristic scanner javaheuristicscanner d scanner dscanner java heuristic scanner javaheuristicscanner document add scope relevant context peer search after token aftertoken d scanner dscanner next token nexttoken command offset command length java heuristic scanner javaheuristicscanner unbound after token aftertoken symbols tokenrbrace nls pasted replace nls pasted get length getlength nls nls symbols tokenrparen nls pasted replace nls pasted get length getlength nls nls symbols tokenrbracket nls pasted replace nls pasted get length getlength nls nls bad location exception badlocationexception is true istrue paste text position inc reasing increasing p pos ppos document position decreasing paste offset d pos dpos math max command offset token p scanner pscanner next token nexttoken p pos ppos java heuristic scanner javaheuristicscanner unbound p pos ppos p scanner pscanner get position getposition token symbols tokenlbrace symbols tokenlbracket symbols tokenlparen p pos ppos skip scope skipscope p scanner pscanner p pos ppos token p pos ppos java heuristic scanner javaheuristicscanner first peer firstpeer closed scope searching symbols tokenrbrace peer d scanner dscanner find opening peer findopeningpeer d pos dpos d pos dpos peer peer java heuristic scanner javaheuristicscanner first peer firstpeer first peer firstpeer peer searching symbols tokenrbracket peer d scanner dscanner find opening peer findopeningpeer d pos dpos d pos dpos peer peer java heuristic scanner javaheuristicscanner first peer firstpeer first peer firstpeer peer searching symbols tokenrparen peer d scanner dscanner find opening peer findopeningpeer d pos dpos d pos dpos peer peer java heuristic scanner javaheuristicscanner first peer firstpeer first peer firstpeer peer searching symbols tokencase symbols tokendefault java indenter javaindenter indenter java indenter javaindenter document d scanner dscanner f project fproject peer indenter find reference position findreferenceposition d pos dpos peer java heuristic scanner javaheuristicscanner first peer firstpeer first peer firstpeer peer searching symbols tokeneof first peer firstpeer skips scope opened code token code param scanner scanner param start start position param token token position scope code java heuristic scanner javaheuristicscanner code skip scope skipscope java heuristic scanner javaheuristicscanner scanner start token open token opentoken token close token closetoken token symbols tokenlparen close token closetoken symbols tokenrparen symbols tokenlbracket close token closetoken symbols tokenrbracket symbols tokenlbrace close token closetoken symbols tokenrbrace is true istrue dummy depth start tok scanner next token nexttoken java heuristic scanner javaheuristicscanner unbound scanner get position getposition tok open token opentoken depth tok close token closetoken depth depth tok symbols tokeneof java heuristic scanner javaheuristicscanner is line delimiter islinedelimiter i document idocument document string text string delimiters document get legal line delimiters getlegallinedelimiters delimiters text utilities textutilities equals delimiters text smart indent on key press smartindentonkeypress i document idocument document document command documentcommand command command text char at charat smart indent after closing bracket smartindentafterclosingbracket document command smart indent after opening bracket smartindentafteropeningbracket document command smart indent upon e smartindentupone document command smart indent upon e smartindentupone i document idocument document command documentcommand offset get length getlength string content offset nls content equals els java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner offset current get line of offset getlineofoffset line offset lineoffset get line offset getlineoffset don leading comments line offset lineoffset line offset lineoffset trim length java code pos scanner find non whitespace backward findnonwhitespacebackward java heuristic scanner javaheuristicscanner unbound pos last line lastline get line of offset getlineofoffset pos shift java brace less braceless block candidate last line lastline java indenter javaindenter indenter java indenter javaindenter scanner f project fproject indenter find reference position findreferenceposition java heuristic scanner javaheuristicscanner ref line refline get line of offset getlineofoffset string indent get indent of line getindentofline ref line refline indent text nls indent to string tostring nls length offset line offset lineoffset offset line offset lineoffset nls content equals cas java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner offset current get line of offset getlineofoffset line offset lineoffset get line offset getlineoffset don leading comments line offset lineoffset line offset lineoffset trim length java code pos scanner find non whitespace backward findnonwhitespacebackward java heuristic scanner javaheuristicscanner unbound pos last line lastline get line of offset getlineofoffset pos shift java brace less braceless block candidate last line lastline java indenter javaindenter indenter java indenter javaindenter scanner f project fproject indenter find reference position findreferenceposition java heuristic scanner javaheuristicscanner ref line refline get line of offset getlineofoffset next token nexttoken scanner next token nexttoken java heuristic scanner javaheuristicscanner unbound string indent next token nexttoken symbols tokencase next token nexttoken symbols tokendefault indent get indent of line getindentofline ref line refline brace indent indenter compute indentation computeindentation to string tostring indent text nls indent to string tostring nls length offset line offset lineoffset offset line offset lineoffset bad location exception badlocationexception java plugin javaplugin log org eclipse jface text i auto indent strategy iautoindentstrategy customize document command customizedocumentcommand org eclipse jface text i document idocument org eclipse jface text document command documentcommand override customize document command customizedocumentcommand i document idocument document command documentcommand doit clear cached values clearcachedvalues f is smart mode fissmartmode customize document command customizedocumentcommand f is smart tab fissmarttab is rep res enting tab isrepresentingtab text length text is line delimiter islinedelimiter text f is smart indent after new line fissmartindentafternewline smart indent after new line smartindentafternewline customize document command customizedocumentcommand text length smart indent on key press smartindentonkeypress text length get preference store getpreferencestore get boolean getboolean preference constants preferenceconstants editor smart paste f viewer fviewer f viewer fviewer get text widget gettextwidget f viewer fviewer get text widget gettextwidget get block selection getblockselection smart back space backspace paste smart paste smartpaste tells inserted string represents hit ting hitting tab key param text text check code code text represents hit ting hitting tab key is rep res enting tab isrepresentingtab string text text is ins erting spaces for tab isinsertingspacesfortab text length text length get visual tab length preference getvisualtablengthpreference text length text char at charat text length text char at charat i preference store ipreferencestore get preference store getpreferencestore java plugin javaplugin get default getdefault get combined preference store getcombinedpreferencestore close brace closebrace f close brace fclosebrace clear cached values clearcachedvalues i preference store ipreferencestore preference store preferencestore get preference store getpreferencestore f close brace fclosebrace preference store preferencestore get boolean getboolean preference constants preferenceconstants editor close braces f is smart tab fissmarttab preference store preferencestore get boolean getboolean preference constants preferenceconstants editor smart tab f is smart indent after new line fissmartindentafternewline preference store preferencestore get boolean getboolean preference constants preferenceconstants editor smart indent new line newline f is smart mode fissmartmode compute smart mode computesmartmode compute smart mode computesmartmode i workbench page iworkbenchpage java plugin javaplugin get active page getactivepage i editor part ieditorpart get active editor getactiveeditor i text editor extension itexteditorextension i text editor extension itexteditorextension extension i text editor extension itexteditorextension extension get insert mode getinsertmode i text editor extension itexteditorextension smart insert editor utility editorutility is compare editor input iscompareeditorinput get editor input geteditorinput i text editor extension itexteditorextension extension get adapter getadapter i text editor extension itexteditorextension extension extension get insert mode getinsertmode i text editor extension itexteditorextension smart insert compilation unit info compilationunitinfo get compilation unit for method getcompilationunitformethod i document idocument document offset java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner document i region iregion source range sourcerange scanner find s urrounding block findsurroundingblock offset source range sourcerange string source document source range sourcerange get offset getoffset source range sourcerange get length getlength string buffer stringbuffer contents string buffer stringbuffer nls contents append method offset methodoffset contents length contents append source contents append buffer contents to string tostring to char array tochararray compilation unit info compilationunitinfo buffer source range sourcerange get offset getoffset method offset methodoffset bad location exception badlocationexception java plugin javaplugin log returns block balance blocks balanced code offset code negative number closing opening braces positive number opening closing braces param document document param offset offset param partitioning partitioning block balance get block balance getblockbalance i document idocument document offset string partitioning offset offset document get length getlength offset offset java heuristic scanner javaheuristicscanner scanner java heuristic scanner javaheuristicscanner document scanner find opening peer findopeningpeer scanner find closing peer findclosingpeer i region iregion create region createregion ast node astnode node delta node region node get start position getstartposition delta node get length getlength i region iregion get token gettoken i document idocument document i region iregion scan region scanregion token id tokenid string source document scan region scanregion get offset getoffset scan region scanregion get length getlength fg scanner fgscanner set source setsource source to char array tochararray fg scanner fgscanner get next token getnexttoken i terminal symbols iterminalsymbols tokennameeof token id tokenid fg scanner fgscanner get next token getnexttoken i terminal symbols iterminalsymbols tokennameeof token offset tokenoffset fg scanner fgscanner get current token start position getcurrenttokenstartposition inclusive token length tokenlength fg scanner fgscanner get current token end position getcurrenttokenendposition token offset tokenoffset region token offset tokenoffset scan region scanregion get offset getoffset token length tokenlength invalid input exception invalidinputexception bad location exception badlocationexception