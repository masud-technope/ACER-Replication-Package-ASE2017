copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt tests refactoring java io exception ioexception java input stream inputstream org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core resources i resource change event iresourcechangeevent org eclipse core resources i resource change listener iresourcechangelistener org eclipse core resources i workspace iworkspace org eclipse core resources resources plugin resourcesplugin org eclipse jface text i text selection itextselection org eclipse jface text text selection textselection org eclipse ltk core refactoring change org eclipse ltk core refactoring check conditions operation checkconditionsoperation org eclipse ltk core refactoring i undo manager iundomanager org eclipse ltk core refactoring perform refactoring operation performrefactoringoperation org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring core refactoringcore org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core java core javacore org eclipse jdt tests refactoring infra abstractcutestcase org eclipse jdt tests refactoring infra refactoring test plugin refactoringtestplugin selection file read link get file contents getfilecontents input stream inputstream marked excluding marker comments including comments abstract selection test case abstractselectiontestcase abstractcutestcase string square bracket open square bracket open length square bracket open length string square bracket close square bracket close length square bracket close length valid selection invalid selection compare output f ignore selection marker fignoreselectionmarker f selection fselection f is pre delta test fispredeltatest abstract selection test case abstractselectiontestcase string abstract selection test case abstractselectiontestcase string ignore selection marker ignoreselectionmarker f ignore selection marker fignoreselectionmarker ignore selection marker ignoreselectionmarker override set up setup exception set up setup f is pre delta test fispredeltatest get selection getselection f selection fselection i text selection itextselection get text selection gettextselection get selection getselection text selection textselection override input stream inputstream get file input stream getfileinputstream string file name filename io exception ioexception refactoring test plugin refactoringtestplugin get default getdefault get test resource stream gettestresourcestream file name filename override string get file contents getfilecontents input stream inputstream io exception ioexception string result get file contents getfilecontents initialize selection initializeselection result f ignore selection marker fignoreselectionmarker result result replace all replaceall result result replace all replaceall result perform test performtest i compilation unit icompilationunit unit refactoring refactoring mode string do undo doundo exception i progress monitor iprogressmonitor null progress monitor nullprogressmonitor mode valid selection assert true asserttrue check preconditions checkpreconditions refactoring isok invalid selection assert true asserttrue check preconditions checkpreconditions refactoring isok compare output i undo manager iundomanager undo manager undomanager refactoring core refactoringcore get undo manager getundomanager undo manager undomanager flush string original unit get source getsource perform refactoring operation performrefactoringoperation perform refactoring operation performrefactoringoperation refactoring get checking style getcheckingstyle f is pre delta test fispredeltatest i workspace iworkspace workspace resources plugin resourcesplugin get workspace getworkspace i resource change listener iresourcechangelistener listener i resource change listener iresourcechangelistener override resource changed resourcechanged i resource change event iresourcechangeevent event test model provider testmodelprovider assert true asserttrue event get delta getdelta clear pre delta clearpredelta workspace check point checkpoint workspace add resource change listener addresourcechangelistener listener java core javacore null progress monitor nullprogressmonitor workspace remove resource change listener removeresourcechangelistener listener java core javacore null progress monitor nullprogressmonitor assert true asserttrue precondition check failed get condition status getconditionstatus to string tostring get condition status getconditionstatus has fatal error hasfatalerror assert true asserttrue validation check failed get condition status getconditionstatus to string tostring get validation status getvalidationstatus has fatal error hasfatalerror assert not null assertnotnull undo get undo change getundochange compare source comparesource unit get source getsource change undo get undo change getundochange assert not null assertnotnull undo doesn exist undo assert true asserttrue undo manager empty undo manager undomanager anything to undo anythingtoundo do undo doundo undo manager undomanager perform undo performundo null progress monitor nullprogressmonitor assert true asserttrue undo manager undo undo manager undomanager anything to undo anythingtoundo assert true asserttrue undo manager empty undo manager undomanager anything to redo anythingtoredo compare source comparesource original unit get source getsource refactoring status refactoringstatus check preconditions checkpreconditions refactoring refactoring i progress monitor iprogressmonitor core exception coreexception check conditions operation checkconditionsoperation check conditions operation checkconditionsoperation refactoring get checking style getcheckingstyle get status getstatus get checking style getcheckingstyle check conditions operation checkconditionsoperation conditions clear pre delta clearpredelta test model provider testmodelprovider clear delta cleardelta initialize selection initializeselection string source start including start includingstart source index of indexof square bracket open excluding start excludingstart source index of indexof square bracket close including end includingend source last index of lastindexof square bracket close excluding end excludingend source last index of lastindexof square bracket open including start includingstart excluding start excludingstart excluding start excludingstart including start includingstart excluding start excludingstart including start includingstart including start includingstart excluding start excludingstart including end includingend excluding end excludingend including end includingend excluding end excludingend including end includingend excluding end excludingend including start includingstart start including start includingstart start excluding start excludingstart square bracket close length excluding end excludingend excluding end excludingend including end includingend square bracket close length assert true asserttrue selection invalid start start f selection fselection start f ignore selection marker fignoreselectionmarker square bracket close length start system println source substring result result result