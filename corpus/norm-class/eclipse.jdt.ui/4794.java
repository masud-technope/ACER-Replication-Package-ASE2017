copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring rename java util array list arraylist java util arrays java util collection java util hash map hashmap java util hash set hashset java util iterator java util list java util map entry java util org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i container icontainer org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i resource iresource org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits replace edit replaceedit org eclipse text edits text edit textedit org eclipse jface util util org eclipse ltk core refactoring change org eclipse ltk core refactoring composite change compositechange org eclipse ltk core refactoring i resource mapper iresourcemapper org eclipse ltk core refactoring refactoring descriptor refactoringdescriptor org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring refactoring status context refactoringstatuscontext org eclipse ltk core refactoring participants check conditions context checkconditionscontext org eclipse ltk core refactoring participants rename arguments renamearguments org eclipse jdt core flags org eclipse jdt core i class file iclassfile org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i import declaration iimportdeclaration org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i method imethod org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i type itype org eclipse jdt core java model exception javamodelexception org eclipse jdt core signature org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core refactoring i java element mapper ijavaelementmapper org eclipse jdt core refactoring i java refactorings ijavarefactorings org eclipse jdt core refactoring descriptors java refactoring descriptor javarefactoringdescriptor org eclipse jdt core refactoring descriptors rename java element descriptor renamejavaelementdescriptor org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search i java search scope ijavasearchscope org eclipse jdt core search search engine searchengine org eclipse jdt core search search match searchmatch org eclipse jdt core search search pattern searchpattern org eclipse jdt core search search requestor searchrequestor org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring collecting search requestor collectingsearchrequestor org eclipse jdt internal corext refactoring cu collecting search requestor cucollectingsearchrequestor org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring java refactoring arguments javarefactoringarguments org eclipse jdt internal corext refactoring java refactoring descriptor util javarefactoringdescriptorutil org eclipse jdt internal corext refactoring refactoring availability tester refactoringavailabilitytester org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring refactoring scope factory refactoringscopefactory org eclipse jdt internal corext refactoring refactoring search engine refactoringsearchengine org eclipse jdt internal corext refactoring search result group searchresultgroup org eclipse jdt internal corext refactoring base java status context javastatuscontext org eclipse jdt internal corext refactoring base references in binary context referencesinbinarycontext org eclipse jdt internal corext refactoring dynamic validation refactoring change dynamicvalidationrefactoringchange org eclipse jdt internal corext refactoring rename package change renamepackagechange org eclipse jdt internal corext refactoring text change compatibility textchangecompatibility org eclipse jdt internal corext refactoring participants java processors javaprocessors org eclipse jdt internal corext refactoring rename rename package processor renamepackageprocessor imports manager importsmanager import change importchange org eclipse jdt internal corext refactoring tag ging tagging i qualified name updating iqualifiednameupdating org eclipse jdt internal corext refactoring tag ging tagging i reference updating ireferenceupdating org eclipse jdt internal corext refactoring tag ging tagging i text updating itextupdating org eclipse jdt internal corext refactoring util org eclipse jdt internal corext refactoring util comment analyzer commentanalyzer org eclipse jdt internal corext refactoring util java element util javaelementutil org eclipse jdt internal corext refactoring util qualified name finder qualifiednamefinder org eclipse jdt internal corext refactoring util qualified name search result qualifiednamesearchresult org eclipse jdt internal corext refactoring util resource util resourceutil org eclipse jdt internal corext refactoring util text change manager textchangemanager org eclipse jdt internal corext util messages org eclipse jdt internal corext util resources org eclipse jdt internal corext util search utils searchutils org eclipse jdt java element labels javaelementlabels org eclipse jdt refactoring refactoring save helper refactoringsavehelper org eclipse jdt internal java plugin javaplugin org eclipse jdt internal viewsupport basic element labels basicelementlabels rename package processor renamepackageprocessor java rename processor javarenameprocessor i reference updating ireferenceupdating i text updating itextupdating i qualified name updating iqualifiednameupdating i resource mapper iresourcemapper i java element mapper ijavaelementmapper nls string attribute qualified qualified nls string attribute textual matches text ual textual nls string attribute patterns patterns nls string attribute hierarchical hierarchical i package fragment ipackagefragment f package fpackage text change manager textchangemanager f change manager fchangemanager imports manager importsmanager f imports manager fimportsmanager qualified name search result qualifiednamesearchresult f qualified name search result fqualifiednamesearchresult f update references fupdatereferences f update text ual matches fupdatetextualmatches f update qualified names fupdatequalifiednames string f file patterns ffilepatterns f rename subpackages frenamesubpackages nls string identifier org eclipse jdt rename package processor renamepackageprocessor rename package change renamepackagechange f rename package change frenamepackagechange creates rename processor param fragment fragment code code invoked scripting rename package processor renamepackageprocessor i package fragment ipackagefragment fragment f package fpackage fragment f package fpackage set new element name setnewelementname f package fpackage get element name getelementname f update references fupdatereferences f update text ual matches fupdatetextualmatches f rename subpackages frenamesubpackages rename package processor renamepackageprocessor java refactoring arguments javarefactoringarguments arguments refactoring status refactoringstatus status status merge initialize arguments override string get identifier getidentifier identifier override is applicable isapplicable core exception coreexception refactoring availability tester refactoringavailabilitytester is rename available isrenameavailable f package fpackage override string get processor name getprocessorname refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring override string get affected project natures getaffectedprojectnatures core exception coreexception java processors javaprocessors compute affected natures computeaffectednatures f package fpackage override object get elements getelements object f package fpackage override rename modifications renamemodifications compute rename modifications computerenamemodifications core exception coreexception rename modifications renamemodifications result rename modifications renamemodifications result rename f package fpackage rename arguments renamearguments get new element name getnewelementname get update references getupdatereferences f rename subpackages frenamesubpackages result override i file ifile get changed files getchangedfiles core exception coreexception i file ifile combined hash set hashset combined add all addall arrays as list aslist resource util resourceutil get files getfiles f change manager fchangemanager get all compilation units getallcompilationunits f rename subpackages frenamesubpackages i package fragment ipackagefragment all packages allpackages java element util javaelementutil get package and subpackages getpackageandsubpackages f package fpackage all packages allpackages length combined add all addall arrays as list aslist resource util resourceutil get files getfiles all packages allpackages get compilation units getcompilationunits combined add all addall arrays as list aslist resource util resourceutil get files getfiles f package fpackage get compilation units getcompilationunits f qualified name search result fqualifiednamesearchresult combined add all addall arrays as list aslist f qualified name search result fqualifiednamesearchresult get all files getallfiles combined to array toarray i file ifile combined size override get save mode getsavemode refactoring save helper refactoringsavehelper save i text updating itextupdating override can enable text updating canenabletextupdating override get update text ual matches getupdatetextualmatches f update text ual matches fupdatetextualmatches override set update text ual matches setupdatetextualmatches update f update text ual matches fupdatetextualmatches update i reference updating ireferenceupdating override set update references setupdatereferences update f update references fupdatereferences update override get update references getupdatereferences f update references fupdatereferences i qualified name updating iqualifiednameupdating override can enable qualified name updating canenablequalifiednameupdating f package fpackage is default package isdefaultpackage override get update qualified names getupdatequalifiednames f update qualified names fupdatequalifiednames override set update qualified names setupdatequalifiednames update f update qualified names fupdatequalifiednames update override string get file patterns getfilepatterns f file patterns ffilepatterns override set file patterns setfilepatterns string patterns is not null isnotnull patterns f file patterns ffilepatterns patterns i resource mapper iresourcemapper override i resource iresource get ref act ored resource getrefactoredresource i resource iresource element i folder ifolder package folder packagefolder i folder ifolder f package fpackage get resource getresource package folder packagefolder element i container icontainer new package folder newpackagefolder i container icontainer get new package getnewpackage get resource getresource package folder packagefolder equals element new package folder newpackagefolder i path ipath package path packagepath package folder packagefolder get project relative path getprojectrelativepath i path ipath element path elementpath element get project relative path getprojectrelativepath package path packagepath is prefix of isprefixof element path elementpath f rename subpackages frenamesubpackages element i file ifile package folder packagefolder equals element get parent getparent i path ipath path in package pathinpackage element path elementpath remove first segments removefirstsegments package path packagepath segment count segmentcount element i file ifile new package folder newpackagefolder get file getfile path in package pathinpackage new package folder newpackagefolder get folder getfolder path in package pathinpackage element i java element mapper ijavaelementmapper override i java element ijavaelement get ref act ored java element getrefactoredjavaelement i java element ijavaelement original generic refactoring handle transplanter genericrefactoringhandletransplanter override i package fragment ipackagefragment transplant handle transplanthandle i package fragment root ipackagefragmentroot parent i package fragment ipackagefragment element f rename subpackages frenamesubpackages f package fpackage equals element get new package getnewpackage string pack name packname element get element name getelementname string package name packagename f package fpackage get element name getelementname f package fpackage get parent getparent equals parent pack name packname starts with startswith package name packagename string new pack name newpackname get new element name getnewelementname pack name packname substring package name packagename length get package fragment root getpackagefragmentroot get package fragment getpackagefragment new pack name newpackname transplant handle transplanthandle parent element override i method imethod transplant handle transplanthandle i type itype parent i method imethod element string parameter types parametertypes resolve parameter types resolveparametertypes element parent get method getmethod element get element name getelementname parameter types parametertypes string resolve parameter types resolveparametertypes i method imethod method string old parameter types oldparametertypes method get parameter types getparametertypes string new params newparams string old parameter types oldparametertypes length string possible old sigs possibleoldsigs string type signature signature possible old sigs possibleoldsigs signature create type signature createtypesignature f package fpackage get element name getelementname possible old sigs possibleoldsigs signature create type signature createtypesignature f package fpackage get element name getelementname string possible new sigs possiblenewsigs string possible new sigs possiblenewsigs signature create type signature createtypesignature get new element name getnewelementname possible new sigs possiblenewsigs signature create type signature createtypesignature get new element name getnewelementname handles stuff map some class someclass some class someclass old parameter types oldparametertypes length new params newparams old parameter types oldparametertypes possible old sigs possibleoldsigs length new params newparams util replace all replaceall new params newparams possible old sigs possibleoldsigs possible new sigs possiblenewsigs new params newparams transplant handle transplanthandle original can enable rename subpackages canenablerenamesubpackages java model exception javamodelexception f package fpackage has subpackages hassubpackages get rename subpackages getrenamesubpackages f rename subpackages frenamesubpackages set rename subpackages setrenamesubpackages rename f rename subpackages frenamesubpackages rename i rename processor irenameprocessor override string get current element name getcurrentelementname f package fpackage get element name getelementname override string get current element qualifier getcurrentelementqualifier nls override refactoring status refactoringstatus check new element name checknewelementname string new name newname core exception coreexception nls is not null isnotnull new name newname refactoring status refactoringstatus result checks check package name checkpackagename new name newname f package fpackage result has fatal error hasfatalerror result checks is already name d isalreadynamed f package fpackage new name newname result add fatal error addfatalerror refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring result result merge check package in current root checkpackageincurrentroot new name newname result override object get new element getnewelement get new package getnewpackage i package fragment ipackagefragment get new package getnewpackage i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot root get package fragment getpackagefragment get new element name getnewelementname override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception refactoring status refactoringstatus override refactoring status refactoringstatus do check final conditions docheckfinalconditions i progress monitor iprogressmonitor check conditions context checkconditionscontext context core exception coreexception nls begin task begintask f update qualified names fupdatequalifiednames f update text ual matches fupdatetextualmatches set task name settaskname refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring checking refactoring status refactoringstatus result refactoring status refactoringstatus result merge check new element name checknewelementname get new element name getnewelementname worked result merge check for main and native methods checkformainandnativemethods worked f package fpackage is read only isreadonly string message messages format refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring package red packagered get element label getelementlabel f package fpackage result add fatal error addfatalerror message resources is read only isreadonly f package fpackage get resource getresource string message messages format refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring resource read get element label getelementlabel f package fpackage result add error adderror message result merge check package name checkpackagename get new element name getnewelementname result has fatal error hasfatalerror result f change manager fchangemanager text change manager textchangemanager f imports manager fimportsmanager imports manager importsmanager sub progress monitor subprogressmonitor sub pm subpm sub progress monitor subprogressmonitor f rename subpackages frenamesubpackages i package fragment ipackagefragment all subpackages allsubpackages java element util javaelementutil get package and subpackages getpackageandsubpackages f package fpackage nls sub pm subpm begin task begintask nls nls all subpackages allsubpackages length all subpackages allsubpackages length package rename r packagerenamer all subpackages allsubpackages f change manager fchangemanager f imports manager fimportsmanager do rename dorename sub progress monitor subprogressmonitor sub pm subpm result sub pm subpm package rename r packagerenamer f package fpackage f change manager fchangemanager f imports manager fimportsmanager do rename dorename sub pm subpm result f imports manager fimportsmanager rewrite imports rewriteimports f change manager fchangemanager sub progress monitor subprogressmonitor f update text ual matches fupdatetextualmatches sub task subtask refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring searching text text match updater textmatchupdater perform sub progress monitor subprogressmonitor refactoring scope factory refactoringscopefactory create f package fpackage f change manager fchangemanager search result group searchresultgroup f update qualified names fupdatequalifiednames compute qualified name matches computequalifiednamematches sub progress monitor subprogressmonitor result i package fragment ipackagefragment get package getpackage f package fpackage refactoring status refactoringstatus check for main and native methods checkformainandnativemethods core exception coreexception refactoring status refactoringstatus result refactoring status refactoringstatus f rename subpackages frenamesubpackages i package fragment ipackagefragment all subpackages allsubpackages java element util javaelementutil get package and subpackages getpackageandsubpackages f package fpackage all subpackages allsubpackages length i compilation unit icompilationunit cus all subpackages allsubpackages get compilation units getcompilationunits cus length result merge checks check for main and native methods checkformainandnativemethods cus i compilation unit icompilationunit cus f package fpackage get compilation units getcompilationunits cus length result merge checks check for main and native methods checkformainandnativemethods cus result returns root fragment exists java resources is package name ok in root ispackagenameokinroot string new name newname i package fragment root ipackagefragmentroot root core exception coreexception i package fragment ipackagefragment pack root get package fragment getpackagefragment new name newname pack exists pack contains java resources containsjavaresources pack get non java resources getnonjavaresources length refactoring status refactoringstatus check package in current root checkpackageincurrentroot string new name newname core exception coreexception f rename subpackages frenamesubpackages string current name currentname get current element name getcurrentelementname is ancestor package isancestorpackage current name currentname new name newname renaming sub package subpackage sub packages subpackages renamed is ancestor package isancestorpackage new name newname current name currentname renaming unrelated is package name ok in root ispackagenameokinroot new name newname get package fragment root getpackagefragmentroot refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring exists renaming super package superpackage iff sub package subpackage collide sub package subpackage collides exists collide i package fragment ipackagefragment packs to rename packstorename java element util javaelementutil get package and subpackages getpackageandsubpackages f package fpackage packs to rename packstorename length i package fragment ipackagefragment pack packs to rename packstorename string new pack newpack new name newname pack get element name getelementname substring current name currentname length is ancestor package isancestorpackage current name currentname new pack newpack is package name ok in root ispackagenameokinroot new pack newpack get package fragment root getpackagefragmentroot string msg messages format refactoring core messages refactoringcoremessages rename package processor renamepackageprocessor sub package subpackage collides basic element labels basicelementlabels get java element name getjavaelementname new pack newpack refactoring status refactoringstatus create fatal error status createfatalerrorstatus msg is package name ok in root ispackagenameokinroot new name newname get package fragment root getpackagefragmentroot refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring exists is ancestor package isancestorpackage string ancestor string descendant ancestor length descendant length descendant char at charat descendant starts with startswith ancestor i package fragment root ipackagefragmentroot get package fragment root getpackagefragmentroot i package fragment root ipackagefragmentroot f package fpackage get parent getparent refactoring status refactoringstatus check package name checkpackagename string new name newname core exception coreexception refactoring status refactoringstatus status refactoring status refactoringstatus i package fragment root ipackagefragmentroot roots f package fpackage get java project getjavaproject get package fragment roots getpackagefragmentroots string top level type names topleveltypenames get top level type names gettopleveltypenames roots length i package fragment root ipackagefragmentroot root roots is package name ok in root ispackagenameokinroot new name newname root string root label rootlabel java element labels javaelementlabels get element label getelementlabel root java element labels javaelementlabels string new package name newpackagename basic element labels basicelementlabels get java element name getjavaelementname get new element name getnewelementname string message messages format refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring aleady exists object new package name newpackagename root label rootlabel status merge refactoring status refactoringstatus create warning status createwarningstatus message status merge check type name conflicts checktypenameconflicts root new name newname top level type names topleveltypenames status string get top level type names gettopleveltypenames core exception coreexception i compilation unit icompilationunit cus f package fpackage get compilation units getcompilationunits string result hash set hashset cus length cus length result add all addall get top level type names gettopleveltypenames cus result collection string get top level type names gettopleveltypenames i compilation unit icompilationunit i compilation unit icompilationunit core exception coreexception i type itype types i compilation unit icompilationunit get types gettypes list string result array list arraylist types length types length result add types get element name getelementname result refactoring status refactoringstatus check type name conflicts checktypenameconflicts i package fragment root ipackagefragmentroot root string new name newname string top level type names topleveltypenames core exception coreexception i package fragment ipackagefragment other pack otherpack root get package fragment getpackagefragment new name newname f package fpackage equals other pack otherpack i compilation unit icompilationunit cus other pack otherpack get compilation units getcompilationunits refactoring status refactoringstatus result refactoring status refactoringstatus cus length result merge check type name conflicts checktypenameconflicts cus top level type names topleveltypenames result refactoring status refactoringstatus check type name conflicts checktypenameconflicts i compilation unit icompilationunit i compilation unit icompilationunit string top level type names topleveltypenames core exception coreexception refactoring status refactoringstatus result refactoring status refactoringstatus i type itype types i compilation unit icompilationunit get types gettypes types length string types get element name getelementname top level type names topleveltypenames string get element label getelementlabel i compilation unit icompilationunit get parent getparent get element label getelementlabel types string msg messages format refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring type refactoring status context refactoringstatuscontext context java status context javastatuscontext create types result add error adderror msg context result override change create change createchange i progress monitor iprogressmonitor monitor core exception coreexception monitor begin task begintask refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring creating change rename java element descriptor renamejavaelementdescriptor descriptor create refactoring descriptor createrefactoringdescriptor dynamic validation refactoring change dynamicvalidationrefactoringchange result dynamic validation refactoring change dynamicvalidationrefactoringchange descriptor refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring change result add all addall f change manager fchangemanager get all changes getallchanges f rename package change frenamepackagechange rename package change renamepackagechange f package fpackage get new element name getnewelementname f rename subpackages frenamesubpackages result add f rename package change frenamepackagechange monitor worked result f change manager fchangemanager f imports manager fimportsmanager monitor rename java element descriptor renamejavaelementdescriptor create refactoring descriptor createrefactoringdescriptor string project i java project ijavaproject java project javaproject f package fpackage get java project getjavaproject java project javaproject project java project javaproject get element name getelementname flags java refactoring descriptor javarefactoringdescriptor jar migration java refactoring descriptor javarefactoringdescriptor jar refactoring refactoring descriptor refactoringdescriptor structural change refactoring descriptor refactoringdescriptor multi change string description messages format refactoring core messages refactoringcoremessages rename package processor renamepackageprocessor descriptor description get element label getelementlabel f package fpackage string header messages format refactoring core messages refactoringcoremessages rename package processor renamepackageprocessor descriptor description string get element label getelementlabel f package fpackage get new element name getnewelementname jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment jdt refactoring descriptor comment jdtrefactoringdescriptorcomment project header f rename subpackages frenamesubpackages comment add setting addsetting refactoring core messages refactoringcoremessages rename package processor renamepackageprocessor rename sub packages subpackages rename java element descriptor renamejavaelementdescriptor descriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create rename java element descriptor createrenamejavaelementdescriptor i java refactorings ijavarefactorings rename descriptor set project setproject project descriptor set description setdescription description descriptor set comment setcomment comment as string asstring descriptor set flags setflags flags descriptor set java element setjavaelement f package fpackage descriptor set new name setnewname get new element name getnewelementname descriptor set update references setupdatereferences f update references fupdatereferences descriptor set update text ual occurrences setupdatetextualoccurrences f update text ual matches fupdatetextualmatches descriptor set update qualified names setupdatequalifiednames f update qualified names fupdatequalifiednames nls f update qualified names fupdatequalifiednames f file patterns ffilepatterns equals f file patterns ffilepatterns descriptor set file name patterns setfilenamepatterns f file patterns ffilepatterns descriptor set update hierarchy setupdatehierarchy f rename subpackages frenamesubpackages descriptor string get element label getelementlabel i java element ijavaelement java element javaelement java element labels javaelementlabels get element label getelementlabel java element javaelement java element labels javaelementlabels override change post create change postcreatechange change participant changes participantchanges i progress monitor iprogressmonitor core exception coreexception f qualified name search result fqualifiednamesearchresult composite change compositechange parent composite change compositechange f rename package change frenamepackagechange get parent getparent sneak text rename ensure modified files original location https bugs eclipse org bugs bug cgi parent remove f rename package change frenamepackagechange parent add f qualified name search result fqualifiednamesearchresult get single change getsinglechange get modified files getmodifiedfiles participant changes participantchanges f qualified name search result fqualifiednamesearchresult parent add f rename package change frenamepackagechange f rename package change frenamepackagechange compute qualified name matches computequalifiednamematches i progress monitor iprogressmonitor f qualified name search result fqualifiednamesearchresult f qualified name search result fqualifiednamesearchresult qualified name search result qualifiednamesearchresult qualified name finder qualifiednamefinder process f qualified name search result fqualifiednamesearchresult f package fpackage get element name getelementname get new element name getnewelementname f file patterns ffilepatterns f package fpackage get java project getjavaproject get project getproject string get new package name getnewpackagename string old sub package name oldsubpackagename string old package name oldpackagename get package getpackage get element name getelementname get new element name getnewelementname old sub package name oldsubpackagename substring old package name oldpackagename length package rename r packagerenamer i package fragment ipackagefragment f package fpackage rename package processor renamepackageprocessor f processor fprocessor text change manager textchangemanager f text change manager ftextchangemanager imports manager importsmanager f imports manager fimportsmanager references f package fpackage include star imports name sake namesake fragments search result group searchresultgroup f occurrences foccurrences references cu s cus f occurrences foccurrences f package fpackage types name sake namesake packages f occurrences foccurrences names akes namesakes shared star star updated f occurrences foccurrences f package fpackage unimported references types name sake namesake packages unused imports name sake namesake packages mutable list search result group searchresultgroup list search result group searchresultgroup f references to types in names akes freferencestotypesinnamesakes references cu s cus name sake namesake packages types f package fpackage mutable list search result group searchresultgroup list search result group searchresultgroup f references to types in package freferencestotypesinpackage package rename r packagerenamer i package fragment ipackagefragment pack rename package processor renamepackageprocessor processor text change manager textchangemanager text change manager textchangemanager imports manager importsmanager imports manager importsmanager f package fpackage pack f processor fprocessor processor f text change manager ftextchangemanager text change manager textchangemanager f imports manager fimportsmanager imports manager importsmanager do rename dorename i progress monitor iprogressmonitor refactoring status refactoringstatus result core exception coreexception nls begin task begintask f processor fprocessor get update references getupdatereferences set task name settaskname refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring searching string binary refs description binaryrefsdescription messages format refactoring core messages refactoringcoremessages references in binary context referencesinbinarycontext bin aries binaries description get element label getelementlabel f package fpackage references in binary context referencesinbinarycontext binary refs binaryrefs references in binary context referencesinbinarycontext binary refs description binaryrefsdescription f occurrences foccurrences get references getreferences sub progress monitor subprogressmonitor binary refs binaryrefs result f references to types in names akes freferencestotypesinnamesakes get references to types in names akes getreferencestotypesinnamesakes sub progress monitor subprogressmonitor result f references to types in package freferencestotypesinpackage get references to types in package getreferencestotypesinpackage sub progress monitor subprogressmonitor binary refs binaryrefs result binary refs binaryrefs add error if necessary adderrorifnecessary result set task name settaskname refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring checking result merge analyze affected compilation units analyzeaffectedcompilationunits worked f occurrences foccurrences search result group searchresultgroup worked result has fatal error hasfatalerror f processor fprocessor get update references getupdatereferences add reference updates addreferenceupdates sub progress monitor subprogressmonitor worked search result group searchresultgroup get references getreferences i progress monitor iprogressmonitor references in binary context referencesinbinarycontext binary refs binaryrefs refactoring status refactoringstatus status core exception coreexception i java search scope ijavasearchscope scope refactoring scope factory refactoringscopefactory create f package fpackage search pattern searchpattern pattern search pattern searchpattern create pattern createpattern f package fpackage i java search constants ijavasearchconstants references collecting search requestor collectingsearchrequestor requestor cu collecting search requestor cucollectingsearchrequestor binary refs binaryrefs refactoring search engine refactoringsearchengine search pattern scope requestor status add reference updates addreferenceupdates i progress monitor iprogressmonitor core exception coreexception nls begin task begintask f occurrences foccurrences length f references to types in package freferencestotypesinpackage size f references to types in names akes freferencestotypesinnamesakes size f occurrences foccurrences length i compilation unit icompilationunit f occurrences foccurrences get compilation unit getcompilationunit search match searchmatch f occurrences foccurrences get search results getsearchresults length search match searchmatch result i java element ijavaelement enclosing element enclosingelement search utils searchutils get enclosing java element getenclosingjavaelement result enclosing element enclosingelement i import declaration iimportdeclaration i import declaration iimportdeclaration import declaration importdeclaration i import declaration iimportdeclaration enclosing element enclosingelement string updated import updatedimport get updated import getupdatedimport import declaration importdeclaration update import updateimport import declaration importdeclaration updated import updatedimport reference text change compatibility textchangecompatibility add text edit addtextedit f text change manager ftextchangemanager refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring update reference create text change createtextchange result f references to types in names akes freferencestotypesinnamesakes size search result group searchresultgroup type refs requiring old name import typerefsrequiringoldnameimport extract group for extractgroupfor f references to types in names akes freferencestotypesinnamesakes type refs requiring old name import typerefsrequiringoldnameimport add type imports addtypeimports type refs requiring old name import typerefsrequiringoldnameimport f references to types in package freferencestotypesinpackage size search result group searchresultgroup type refs requiring new name import typerefsrequiringnewnameimport extract group for extractgroupfor f references to types in package freferencestotypesinpackage type refs requiring new name import typerefsrequiringnewnameimport update type imports updatetypeimports type refs requiring new name import typerefsrequiringnewnameimport worked f references to types in names akes freferencestotypesinnamesakes size iterator search result group searchresultgroup iter f references to types in names akes freferencestotypesinnamesakes iterator iter has next hasnext search result group searchresultgroup references to types in names akes referencestotypesinnamesakes iter add type imports addtypeimports references to types in names akes referencestotypesinnamesakes worked f references to types in package freferencestotypesinpackage size iterator search result group searchresultgroup iter f references to types in package freferencestotypesinpackage iterator iter has next hasnext search result group searchresultgroup name sake references to package namesakereferencestopackage iter update type imports updatetypeimports name sake references to package namesakereferencestopackage worked removes search result group searchresultgroup list iff param param search result groups searchresultgroups list search result group searchresultgroup search result group searchresultgroup iff search result group searchresultgroup extract group for extractgroupfor i compilation unit icompilationunit list search result group searchresultgroup search result groups searchresultgroups iterator search result group searchresultgroup iter search result groups searchresultgroups iterator iter has next hasnext search result group searchresultgroup group iter equals group get compilation unit getcompilationunit iter remove group text edit textedit create text change createtextchange search match searchmatch search result searchresult replace edit replaceedit search result searchresult get offset getoffset search result searchresult get length getlength get new package name getnewpackagename refactoring status refactoringstatus analyze affected compilation units analyzeaffectedcompilationunits core exception coreexception todo f references to freferencesto check refactoring status refactoringstatus result refactoring status refactoringstatus f occurrences foccurrences checks exclude compilation units excludecompilationunits f occurrences foccurrences result result has fatal error hasfatalerror result result merge checks check compile errors in affected files checkcompileerrorsinaffectedfiles f occurrences foccurrences result search scope f package fpackage cu s cus f occurrences foccurrences name sake namesake i java search scope ijavasearchscope get package and occurrences without names akes scope getpackageandoccurrenceswithoutnamesakesscope list i java element ijavaelement scope list scopelist array list arraylist scope list scopelist add f package fpackage f occurrences foccurrences length i compilation unit icompilationunit f occurrences foccurrences get compilation unit getcompilationunit i package fragment ipackagefragment pack i package fragment ipackagefragment get parent getparent pack get element name getelementname equals f package fpackage get element name getelementname scope list scopelist add search engine searchengine create java search scope createjavasearchscope scope list scopelist to array toarray i java element ijavaelement scope list scopelist size list search result group searchresultgroup get references to types in names akes getreferencestotypesinnamesakes i progress monitor iprogressmonitor refactoring status refactoringstatus status core exception coreexception nls begin task begintask renaming project requires goal find cu s cus f occurrences foccurrences find name sake namesake packages scope packages referenced cu s cus f occurrences foccurrences f package fpackage i java element ijavaelement elements i java element ijavaelement f occurrences foccurrences length f occurrences foccurrences length elements f occurrences foccurrences get compilation unit getcompilationunit elements f occurrences foccurrences length f package fpackage i java search scope ijavasearchscope name sake packages scope namesakepackagesscope refactoring scope factory refactoringscopefactory create reference d scope createreferencedscope elements i package fragment ipackagefragment name sake packages namesakepackages get names ake packages getnamesakepackages name sake packages scope namesakepackagesscope sub progress monitor subprogressmonitor name sake packages namesakepackages length array list arraylist find f occurrences foccurrences f package fpackage name sake namesake packages f occurrences foccurrences names akes namesakes shared star f package fpackage unimported references types name sake namesake packages i type itype types to search typestosearch get types in packages gettypesinpackages name sake packages namesakepackages types to search typestosearch length array list arraylist search pattern searchpattern pattern refactoring search engine refactoringsearchengine create or pattern createorpattern types to search typestosearch i java search constants ijavasearchconstants references i java search scope ijavasearchscope scope get package and occurrences without names akes scope getpackageandoccurrenceswithoutnamesakesscope search result group searchresultgroup refactoring search engine refactoringsearchengine search pattern scope sub progress monitor subprogressmonitor status array list arraylist arrays as list aslist list search result group searchresultgroup get references to types in package getreferencestotypesinpackage i progress monitor iprogressmonitor references in binary context referencesinbinarycontext binary refs binaryrefs refactoring status refactoringstatus status core exception coreexception nls begin task begintask i java search scope ijavasearchscope referenced from names akes scope referencedfromnamesakesscope refactoring scope factory refactoringscopefactory create f package fpackage i package fragment ipackagefragment name sake packages namesakepackages get names ake packages getnamesakepackages referenced from names akes scope referencedfromnamesakesscope sub progress monitor subprogressmonitor name sake packages namesakepackages length array list arraylist i java search scope ijavasearchscope scope search engine searchengine create java search scope createjavasearchscope name sake packages namesakepackages i type itype types to search typestosearch get types in package gettypesinpackage f package fpackage types to search typestosearch length array list arraylist search pattern searchpattern pattern refactoring search engine refactoringsearchengine create or pattern createorpattern types to search typestosearch i java search constants ijavasearchconstants references collecting search requestor collectingsearchrequestor requestor cu collecting search requestor cucollectingsearchrequestor binary refs binaryrefs search result group searchresultgroup refactoring search engine refactoringsearchengine search pattern scope requestor sub progress monitor subprogressmonitor status array list arraylist arrays as list aslist i type itype get types in package gettypesinpackage i package fragment ipackagefragment package fragment packagefragment java model exception javamodelexception list i type itype types array list arraylist add contained types addcontainedtypes package fragment packagefragment types types to array toarray i type itype types size param scope search scope param mrogress monitor fragments code scope code code f package fpackage code excluding f package fpackage core exception coreexception search failed i package fragment ipackagefragment get names ake packages getnamesakepackages i java search scope ijavasearchscope scope i progress monitor iprogressmonitor core exception coreexception search pattern searchpattern pattern search pattern searchpattern create pattern createpattern f package fpackage get element name getelementname i java search constants ijavasearchconstants i java search constants ijavasearchconstants declarations search pattern searchpattern exact match search pattern searchpattern sensitive hash set hashset i package fragment ipackagefragment package fragments packagefragments hash set hashset search requestor searchrequestor requestor search requestor searchrequestor override accept search match acceptsearchmatch search match searchmatch match core exception coreexception i java element ijavaelement enclosing element enclosingelement search utils searchutils get enclosing java element getenclosingjavaelement match enclosing element enclosingelement i package fragment ipackagefragment i package fragment ipackagefragment pack i package fragment ipackagefragment enclosing element enclosingelement f package fpackage equals pack package fragments packagefragments add pack search engine searchengine search pattern search utils searchutils get default search participants getdefaultsearchparticipants scope requestor package fragments packagefragments to array toarray i package fragment ipackagefragment package fragments packagefragments size i type itype get types in packages gettypesinpackages i package fragment ipackagefragment package fragments packagefragments java model exception javamodelexception list i type itype types array list arraylist package fragments packagefragments length i package fragment ipackagefragment pack package fragments packagefragments add contained types addcontainedtypes pack types types to array toarray i type itype types size add contained types addcontainedtypes i package fragment ipackagefragment pack list i type itype types collector typescollector java model exception javamodelexception i java element ijavaelement children pack get children getchildren children length i java element ijavaelement child children child i compilation unit icompilationunit types collector typescollector add all addall arrays as list aslist i compilation unit icompilationunit child get types gettypes child i class file iclassfile types collector typescollector add i class file iclassfile child get type gettype update import updateimport i compilation unit icompilationunit i import declaration iimportdeclaration import declaration importdeclaration string updated import updatedimport java model exception javamodelexception import change importchange import change importchange f imports manager fimportsmanager get import change getimportchange flags is static isstatic import declaration importdeclaration get flags getflags import change importchange remove static import removestaticimport import declaration importdeclaration get element name getelementname import change importchange add static import addstaticimport signature get qualifier getqualifier updated import updatedimport signature get simple name getsimplename updated import updatedimport import change importchange remove import removeimport import declaration importdeclaration get element name getelementname import change importchange add import addimport updated import updatedimport add imports types code type references typereferences code code f package fpackage code param type references typereferences type references core exception coreexception happen add type imports addtypeimports search result group searchresultgroup type references typereferences core exception coreexception search match searchmatch search results searchresults type references typereferences get search results getsearchresults search results searchresults length search match searchmatch result search results searchresults i java element ijavaelement enclosing element enclosingelement search utils searchutils get enclosing java element getenclosingjavaelement result enclosing element enclosingelement i import declaration iimportdeclaration string reference get normalized type reference getnormalizedtypereference result reference starts with startswith f package fpackage get element name getelementname unqualified reference cut o f f inner types cutoffinnertypes reference import change importchange import change importchange f imports manager fimportsmanager get import change getimportchange type references typereferences get compilation unit getcompilationunit import change importchange add import addimport f package fpackage get element name getelementname reference add imports types code type references typereferences code code f new element name fnewelementname code remove code f package fpackage code param type references typereferences type references core exception coreexception happen update type imports updatetypeimports search result group searchresultgroup type references typereferences core exception coreexception search match searchmatch search results searchresults type references typereferences get search results getsearchresults search results searchresults length search match searchmatch result search results searchresults i java element ijavaelement enclosing element enclosingelement search utils searchutils get enclosing java element getenclosingjavaelement result enclosing element enclosingelement i import declaration iimportdeclaration i import declaration iimportdeclaration import declaration importdeclaration i import declaration iimportdeclaration enclosing element enclosingelement update import updateimport type references typereferences get compilation unit getcompilationunit import declaration importdeclaration get updated import getupdatedimport import declaration importdeclaration string reference get normalized type reference getnormalizedtypereference result reference starts with startswith f package fpackage get element name getelementname reference cut o f f inner types cutoffinnertypes reference import change importchange import change importchange f imports manager fimportsmanager get import change getimportchange type references typereferences get compilation unit getcompilationunit import change importchange remove import removeimport f package fpackage get element name getelementname reference import change importchange add import addimport get new package name getnewpackagename reference updated reference search string get normalized type reference getnormalizedtypereference search match searchmatch search result searchresult java model exception javamodelexception i compilation unit icompilationunit search utils searchutils get compilation unit getcompilationunit search result searchresult string reference get buffer getbuffer get text gettext search result searchresult get offset getoffset search result searchresult get length getlength reference qualified normalize remove comments comment analyzer commentanalyzer normalize reference normalizereference reference string cut o f f inner types cutoffinnertypes string reference cut types dot pos dotpos reference index of indexof dot pos dotpos reference reference substring dot pos dotpos reference string get updated import getupdatedimport i import declaration iimportdeclaration import declaration importdeclaration string fully qualified import type fullyqualifiedimporttype import declaration importdeclaration get element name getelementname offset of dot before type name offsetofdotbeforetypename f package fpackage get element name getelementname length string result get new package name getnewpackagename fully qualified import type fullyqualifiedimporttype substring offset of dot before type name offsetofdotbeforetypename result string get new package name getnewpackagename f processor fprocessor get new package name getnewpackagename f package fpackage get element name getelementname collector add itions additions removals saves pass rewrite imports manager importsmanager import change importchange array list arraylist string f static to remove fstatictoremove array list arraylist array list arraylist string f static to add fstatictoadd array list arraylist array list arraylist string f to remove ftoremove array list arraylist array list arraylist string f to add ftoadd array list arraylist remove static import removestaticimport string element name elementname f static to remove fstatictoremove add element name elementname add static import addstaticimport string declaring type declaringtype string member name membername f static to add fstatictoadd add string declaring type declaringtype member name membername remove import removeimport string element name elementname f to remove ftoremove add element name elementname add import addimport string element name elementname f to add ftoadd add element name elementname hash map hashmap i compilation unit icompilationunit import change importchange f import changes fimportchanges hash map hashmap import change importchange get import change getimportchange i compilation unit icompilationunit import change importchange import change importchange f import changes fimportchanges import change importchange import change importchange import change importchange f import changes fimportchanges import change importchange import change importchange rewrite imports rewriteimports text change manager textchangemanager change manager changemanager i progress monitor iprogressmonitor core exception coreexception iterator entry i compilation unit icompilationunit import change importchange iter f import changes fimportchanges entry set entryset iterator iter has next hasnext entry i compilation unit icompilationunit import change importchange entry iter i compilation unit icompilationunit entry get key getkey import change importchange import change importchange entry get value getvalue import rewrite importrewrite import rewrite importrewrite stub utility stubutility create import rewrite createimportrewrite import rewrite importrewrite set filter implicit imports setfilterimplicitimports iterator string iterator import change importchange f static to remove fstatictoremove iterator iterator has next hasnext import rewrite importrewrite remove static import removestaticimport iterator iterator string iterator import change importchange f to remove ftoremove iterator iterator has next hasnext import rewrite importrewrite remove import removeimport iterator iterator string iterator import change importchange f static to add fstatictoadd iterator iterator has next hasnext string to add toadd iterator import rewrite importrewrite add static import addstaticimport to add toadd to add toadd iterator string iterator import change importchange f to add ftoadd iterator iterator has next hasnext import rewrite importrewrite add import addimport iterator import rewrite importrewrite has recorded changes hasrecordedchanges text edit textedit import edit importedit import rewrite importrewrite rewrite imports rewriteimports string refactoring core messages refactoringcoremessages rename package refactoring renamepackagerefactoring update imports text change compatibility textchangecompatibility add text edit addtextedit change manager changemanager import edit importedit malformed tree exception malformedtreeexception java plugin javaplugin log error message logerrormessage malformed tree exception malformedtreeexception processing refactoring status refactoringstatus initialize java refactoring arguments javarefactoringarguments extended string handle extended get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute input handle i java element ijavaelement element java refactoring descriptor util javarefactoringdescriptorutil handle to element handletoelement extended get project getproject handle element element exists element get element type getelementtype i java element ijavaelement fragment java refactoring descriptor util javarefactoringdescriptorutil create input fatal status createinputfatalstatus element get processor name getprocessorname i java refactorings ijavarefactorings rename f package fpackage i package fragment ipackagefragment element refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute input string extended get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute nls equals set new element name setnewelementname refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute string patterns extended get attribute getattribute attribute patterns nls patterns equals patterns f file patterns ffilepatterns patterns nls f file patterns ffilepatterns string references extended get attribute getattribute java refactoring descriptor util javarefactoringdescriptorutil attribute references references f update references fupdatereferences value of valueof references boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist java refactoring descriptor util javarefactoringdescriptorutil attribute references string matches extended get attribute getattribute attribute textual matches matches f update text ual matches fupdatetextualmatches value of valueof matches boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute textual matches string qualified extended get attribute getattribute attribute qualified qualified f update qualified names fupdatequalifiednames value of valueof qualified boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute qualified string hierarchical extended get attribute getattribute attribute hierarchical hierarchical f rename subpackages frenamesubpackages value of valueof hierarchical boolean value booleanvalue refactoring status refactoringstatus create fatal error status createfatalerrorstatus messages format refactoring core messages refactoringcoremessages initializable refactoring initializablerefactoring argument exist attribute hierarchical refactoring status refactoringstatus