copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation nikolay metchev nikolaymetchev gmail extract extract refactoring field yields compilation error https bugs eclipse org samrat dhillon sam rat samrat dhillon gmail extract extract field type yields compilation error https bugs eclipse org bugs bug cgi org eclipse jdt tests refactoring java io exception ioexception java util hash map hashmap java util map junit framework test junit framework test suite testsuite org eclipse core runtime null progress monitor nullprogressmonitor org eclipse jface preference i preference store ipreferencestore org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring refactoring status entry refactoringstatusentry org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i type itype org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core refactoring descriptors extract class descriptor extractclassdescriptor org eclipse jdt core refactoring descriptors extract class descriptor extractclassdescriptor field org eclipse jdt internal core refactoring descriptors refactoring signature descriptor factory refactoringsignaturedescriptorfactory org eclipse jdt preference constants preferenceconstants org eclipse jdt internal java plugin javaplugin extract class tests extractclasstests refactoring test refactoringtest string refactoring path extract class extractclass i package fragment ipackagefragment f pack fpack extract class descriptor extractclassdescriptor f descriptor fdescriptor extract class tests extractclasstests string test suite refactoring test setup refactoringtestsetup test suite testsuite extract class tests extractclasstests test set up test setuptest test some test sometest refactoring test setup refactoringtestsetup some test sometest i type itype setup type setuptype exception i compilation unit icompilationunit create ufrom test file createcufromtestfile get package p getpackagep getcuname i type itype type get type gettype getcuname assert not null assertnotnull type assert true asserttrue type exists type override string get refactoring path getrefactoringpath refactoring path check additional file checkadditionalfile string file name filename exception java model exception javamodelexception io exception ioexception i compilation unit icompilationunit f pack fpack get compilation unit getcompilationunit file name filename java assert not null assertnotnull assert true asserttrue get path getpath exist exists string actual get source getsource string expected get file contents getfilecontents get output test file name getoutputtestfilename file name filename assert equal lines assertequallines expected actual create additional file createadditionalfile string file name filename exception i compilation unit icompilationunit create ufrom test file createcufromtestfile f pack fpack file name filename assert not null assertnotnull assert true asserttrue exists create additional file createadditionalfile string sub dir subdir string file name filename exception i package fragment ipackagefragment pack get sub package getsubpackage sub dir subdir i compilation unit icompilationunit create ufrom test file createcufromtestfile pack file name filename assert not null assertnotnull assert true asserttrue exists i package fragment ipackagefragment get sub package getsubpackage string sub dir subdir exception i package fragment ipackagefragment pack get package p getpackagep sub dir subdir string package name packagename pack get element name getelementname sub dir subdir pack get root getroot get package fragment getpackagefragment package name packagename pack exists i package fragment ipackagefragment create get root getroot create package fragment createpackagefragment package name packagename null progress monitor nullprogressmonitor assert not null assertnotnull create assert true asserttrue create exists create pack string getcuname string buffer stringbuffer string buffer stringbuffer string get name getname starts with startswith test substring append character to upper case touppercase char at charat substring to string tostring string getcufilename string buffer stringbuffer string buffer stringbuffer append getcuname append java to string tostring refactoring status refactoringstatus run refactoring runrefactoring expect error expecterror exception refactoring status refactoringstatus status perform refactoring performrefactoring f descriptor fdescriptor expect error expecterror assert not null assertnotnull status status status status assert true asserttrue status status get entry with highest severity getentrywithhighestseverity get severity getseverity refactoring status refactoringstatus warning string expected get file contents getfilecontents get output test file name getoutputtestfilename getcuname assert not null assertnotnull expected i compilation unit icompilationunit resultcu f pack fpack get compilation unit getcompilationunit getcufilename assert not null assertnotnull resultcu assert true asserttrue resultcu exists string result resultcu get source getsource assert not null assertnotnull result assert equal lines assertequallines expected result f descriptor fdescriptor is create top level iscreatetoplevel expect error expecterror string package name packagename f descriptor fdescriptor get package getpackage package name packagename f pack fpack get root getroot get package fragment getpackagefragment package name packagename assert not null assertnotnull f pack fpack string parameter class file parameterclassfile f descriptor fdescriptor get class name getclassname java i compilation unit icompilationunit unit f pack fpack get compilation unit getcompilationunit parameter class file parameterclassfile assert not null assertnotnull unit assert true asserttrue unit exists expected get file contents getfilecontents get output test file name getoutputtestfilename f descriptor fdescriptor get class name getclassname result unit get source getsource assert not null assertnotnull result assert equal lines assertequallines expected result status override set up setup exception set up setup i preference store ipreferencestore store java plugin javaplugin get default getdefault get preference store getpreferencestore store set value setvalue preference constants preferenceconstants codegen add comments f descriptor fdescriptor refactoring signature descriptor factory refactoringsignaturedescriptorfactory create extract class descriptor createextractclassdescriptor f descriptor fdescriptor set field name setfieldname parameter object parameterobject f pack fpack get package p getpackagep override tear down teardown exception tear down teardown f descriptor fdescriptor f pack fpack i preference store ipreferencestore store java plugin javaplugin get default getdefault get preference store getpreferencestore store set to default settodefault preference constants preferenceconstants codegen add comments test complex extract testcomplexextract exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set class name setclassname complex extract parameter complexextractparameter run refactoring runrefactoring test initializer problem testinitializerproblem exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set class name setclassname initializer problem parameter initializerproblemparameter run refactoring runrefactoring test method update testmethodupdate exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set class name setclassname method update parameter methodupdateparameter run refactoring runrefactoring test inheritance update testinheritanceupdate exception create additional file createadditionalfile inheritance update impl inheritanceupdateimpl f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set class name setclassname inheritance update parameter inheritanceupdateparameter run refactoring runrefactoring check additional file checkadditionalfile inheritance update impl inheritanceupdateimpl test inheritance update getter setter testinheritanceupdategettersetter exception create additional file createadditionalfile inheritance update impl getter setter inheritanceupdateimplgettersetter f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname inheritance update getter setter parameter inheritanceupdategettersetterparameter run refactoring runrefactoring check additional file checkadditionalfile inheritance update impl getter setter inheritanceupdateimplgettersetter test complex extract getter setter testcomplexextractgettersetter exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname complex extract getter setter parameter complexextractgettersetterparameter run refactoring runrefactoring test complex extract nested testcomplexextractnested exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create top level setcreatetoplevel f descriptor fdescriptor set class name setclassname complex extract nested parameter complexextractnestedparameter run refactoring runrefactoring test static instance fields teststaticinstancefields exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set class name setclassname static instance fields parameter staticinstancefieldsparameter refactoring status refactoringstatus status run refactoring runrefactoring refactoring status entry refactoringstatusentry entries status get entries getentries warning i fields ifields moved assert equals assertequals entries length entries length refactoring status entry refactoringstatusentry refactoring status entry refactoringstatusentry entries assert equals assertequals status refactoring status entry refactoringstatusentry refactoring status entry refactoringstatusentry is fatal error isfatalerror test import remove testimportremove exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set class name setclassname import remove parameter importremoveparameter run refactoring runrefactoring test switch case testswitchcase exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set class name setclassname switch case parameter switchcaseparameter refactoring status refactoringstatus status run refactoring runrefactoring refactoring status entry refactoringstatusentry entries status get entries getentries error usage assert equals assertequals entries length entries length refactoring status entry refactoringstatusentry refactoring status entry refactoringstatusentry entries assert equals assertequals refactoring status entry refactoringstatusentry is error iserror test copy modifier annotations testcopymodifierannotations exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set class name setclassname copy modifier annotations parameter copymodifierannotationsparameter refactoring status refactoringstatus status run refactoring runrefactoring refactoring status entry refactoringstatusentry entries status get entries getentries warning warning assert equals assertequals entries length entries length refactoring status entry refactoringstatusentry refactoring status entry refactoringstatusentry entries assert equals assertequals refactoring status entry refactoringstatusentry is warning iswarning testufogetter exception f descriptor fdescriptor set type settype setup type setuptype field fields extract class descriptor extractclassdescriptor get fields getfields f descriptor fdescriptor get type gettype fields length field field fields home planet homeplanet equals field get field name getfieldname field set create field setcreatefield f descriptor fdescriptor set fields setfields fields f descriptor fdescriptor set class name setclassname position f descriptor fdescriptor set field name setfieldname position f descriptor fdescriptor set create getter setter setcreategettersetter run refactoring runrefactoring test control body updates testcontrolbodyupdates exception i java project ijavaproject java project javaproject get root getroot get java project getjavaproject map string string original options originaloptions java project javaproject get options getoptions hash map hashmap string string new options newoptions hash map hashmap original options originaloptions new options newoptions java core javacore codeassist field prefixes java project javaproject set options setoptions new options newoptions f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname control body updates parameter controlbodyupdatesparameter run refactoring runrefactoring java project javaproject set options setoptions original options originaloptions test array initializer testarrayinitializer exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname array initializer parameter arrayinitializerparameter run refactoring runrefactoring test variable declaration initializer testvariabledeclarationinitializer exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname variable declaration initializer parameter variabledeclarationinitializerparameter run refactoring runrefactoring test update simple name testupdatesimplename exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname update simple name parameter updatesimplenameparameter run refactoring runrefactoring test array length access testarraylengthaccess exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname array length access parameter arraylengthaccessparameter run refactoring runrefactoring test inner documented class testinnerdocumentedclass exception i type itype setup type setuptype i type itype get type gettype inner class innerclass assert true asserttrue exists f descriptor fdescriptor set type settype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname inner class parameter innerclassparameter run refactoring runrefactoring test package references testpackagereferences exception create additional file createadditionalfile sub pack subpack pack ex packex f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname package references parameter packagereferencesparameter refactoring status refactoringstatus status run refactoring runrefactoring refactoring status entry refactoringstatusentry entries status get entries getentries error private inner privateinner reference error other package pro teced otherpackageproteced reference assert equals assertequals entries length entries length refactoring status entry refactoringstatusentry refactoring status entry refactoringstatusentry entries assert equals assertequals refactoring status entry refactoringstatusentry is error iserror test duplicate param name testduplicateparamname exception i java project ijavaproject java project javaproject get root getroot get java project getjavaproject map string string original options originaloptions java project javaproject get options getoptions hash map hashmap string string new options newoptions hash map hashmap original options originaloptions new options newoptions java core javacore codeassist field prefixes java project javaproject set options setoptions new options newoptions f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname duplicate param name parameter duplicateparamnameparameter run refactoring runrefactoring java project javaproject set options setoptions original options originaloptions test lowest visibility testlowestvisibility exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname lowest visibility parameter lowestvisibilityparameter run refactoring runrefactoring test switch case updates testswitchcaseupdates exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname switch case updates parameter switchcaseupdatesparameter run refactoring runrefactoring test fields with javadoc testfieldswithjavadoc exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set field name setfieldname data f descriptor fdescriptor set create getter setter setcreategettersetter run refactoring runrefactoring test qualified inc rements testqualifiedincrements exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create getter setter setcreategettersetter f descriptor fdescriptor set class name setclassname qualified inc rements parameter qualifiedincrementsparameter refactoring status refactoringstatus status run refactoring runrefactoring refactoring status entry refactoringstatusentry entries status get entries getentries warning semantic change assert equals assertequals entries length entries length refactoring status entry refactoringstatusentry refactoring status entry refactoringstatusentry entries assert equals assertequals refactoring status entry refactoringstatusentry is warning iswarning test comment testcomment exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create top level setcreatetoplevel run refactoring runrefactoring bug test nested testnested exception i type itype setup type setuptype i type itype get type gettype assert true asserttrue exists f descriptor fdescriptor set type settype f descriptor fdescriptor set class name setclassname extra cted extracted f descriptor fdescriptor set create top level setcreatetoplevel run refactoring runrefactoring bug test nested testnested exception i type itype setup type setuptype i type itype get type gettype assert true asserttrue exists f descriptor fdescriptor set type settype f descriptor fdescriptor set class name setclassname extra cted extracted f descriptor fdescriptor set create top level setcreatetoplevel run refactoring runrefactoring bug test type parameter testtypeparameter exception f descriptor fdescriptor set type settype setup type setuptype f descriptor fdescriptor set create top level setcreatetoplevel f descriptor fdescriptor set field name setfieldname data f descriptor fdescriptor set class name setclassname foo parameter fooparameter run refactoring runrefactoring