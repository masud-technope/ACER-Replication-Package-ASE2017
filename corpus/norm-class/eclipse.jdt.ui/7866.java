copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation eric rizzo externalize strings wizard defaults legacy mechanism http bugs eclipse org org eclipse jdt internal corext refactoring nls java util array list arraylist java util list org eclipse osgi util nls org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i file ifile org eclipse core resources i resource iresource org eclipse core resources resources plugin resourcesplugin org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring refactoring status context refactoringstatuscontext org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i type itype org eclipse jdt core java model exception javamodelexception org eclipse jdt core source range sourcerange org eclipse jdt core dom compilation unit compilationunit org eclipse jdt internal corext refactoring checks org eclipse jdt internal corext refactoring base java string status context javastringstatuscontext org eclipse jdt internal corext refactoring dynamic validation state change dynamicvalidationstatechange org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util messages org eclipse jdt sharedastprovider org eclipse jdt internal viewsupport basic element labels basicelementlabels nls refactoring nlsrefactoring refactoring nls string bundle field bundle nls string property file ext properties nls string access or accessor class name classname messages nls string key key nls nls string subst pattern get string getstring key nls string property filename messages i path ipath f property file path fpropertyfilepath string f accessor class name faccessorclassname i package fragment ipackagefragment f accessor class package faccessorclasspackage string f resource bundle name fresourcebundlename i package fragment ipackagefragment f resource bundle package fresourcebundlepackage string f substitution pattern fsubstitutionpattern i compilation unit icompilationunit f cu fcu nls substitution nlssubstitution f substitutions fsubstitutions string f prefix fprefix code code standard resource bundle mechanism code code nl sing nlsing eclipse f is eclipse s fiseclipsenls nls refactoring nlsrefactoring i compilation unit icompilationunit is not null isnotnull f cu fcu compilation unit compilationunit ast root astroot sharedastprovider getast f cu fcu sharedastprovider wait nls hint nlshint nls hint nlshint nls hint nlshint f cu fcu ast root astroot f substitutions fsubstitutions nls hint nlshint get substitutions getsubstitutions set accessor class name setaccessorclassname nls hint nlshint get accessor class name getaccessorclassname set accessor class package setaccessorclasspackage nls hint nlshint get accessor class package getaccessorclasspackage set is eclipse s setiseclipsenls detect is eclipse s detectiseclipsenls set resource bundle name setresourcebundlename nls hint nlshint get resource bundle name getresourcebundlename set resource bundle package setresourcebundlepackage nls hint nlshint get resource bundle package getresourcebundlepackage set substitution pattern setsubstitutionpattern subst pattern string cu name cuname f cu fcu get element name getelementname f is eclipse s fiseclipsenls java nls set prefix setprefix cu name cuname substring cu name cuname length java set prefix setprefix cu name cuname substring cu name cuname length nls refactoring nlsrefactoring create i compilation unit icompilationunit exists nls refactoring nlsrefactoring iseclipsenlsavailable get cu getcu i java project ijavaproject java project javaproject get cu getcu get java project getjavaproject java project javaproject java project javaproject exists nls java project javaproject find type findtype org eclipse osgi util nls java model exception javamodelexception validation param pattern messages get string getstring key code code nls refactoring nlsrefactoring key key occurrence key set substitution pattern setsubstitutionpattern string pattern is not null isnotnull pattern f substitution pattern fsubstitutionpattern pattern pattern substitution pattern string get substitution pattern getsubstitutionpattern f is eclipse s fiseclipsenls key f substitution pattern fsubstitutionpattern i compilation unit icompilationunit get cu getcu f cu fcu override string get name getname messages format nls messages nlsmessages nls refactoring nlsrefactoring compilation unit basic element labels basicelementlabels get file name getfilename f cu fcu override refactoring status refactoringstatus check initial conditions checkinitialconditions i progress monitor iprogressmonitor core exception coreexception f substitutions fsubstitutions length string message messages format nls messages nlsmessages nls refactoring nlsrefactoring strings basic element labels basicelementlabels get file name getfilename f cu fcu refactoring status refactoringstatus create fatal error status createfatalerrorstatus message refactoring status refactoringstatus override refactoring status refactoringstatus check final conditions checkfinalconditions i progress monitor iprogressmonitor core exception coreexception check parameters checkparameters begin task begintask nls messages nlsmessages nls refactoring nlsrefactoring checking refactoring status refactoringstatus result refactoring status refactoringstatus result merge check if any thing to do checkifanythingtodo result has fatal error hasfatalerror result worked result merge validate modifies files validatemodifiesfiles result has fatal error hasfatalerror result worked is canceled iscanceled operation canceled exception operationcanceledexception result merge check substitution pattern checksubstitutionpattern worked is canceled iscanceled operation canceled exception operationcanceledexception result merge check keys checkkeys worked is canceled iscanceled operation canceled exception operationcanceledexception property file exists propertyfileexists will modify property file willmodifypropertyfile string msg messages format nls messages nlsmessages nls refactoring nlsrefactoring created basic element labels basicelementlabels get path label getpathlabel get property file path getpropertyfilepath result add info addinfo msg worked result override change create change createchange i progress monitor iprogressmonitor core exception coreexception check parameters checkparameters nls begin task begintask dynamic validation state change dynamicvalidationstatechange result dynamic validation state change dynamicvalidationstatechange nls messages nlsmessages nls refactoring nlsrefactoring change create accessor class createaccessorclass will create accessor class willcreateaccessorclass nls substitution nlssubstitution count items countitems f substitutions fsubstitutions nls substitution nlssubstitution externalized create accessor class createaccessorclass create accessor class createaccessorclass result add accessor class creator accessorclasscreator create f cu fcu f accessor class name faccessorclassname getaccessorcupath f accessor class package faccessorclasspackage get property file path getpropertyfilepath f is eclipse s fiseclipsenls f substitutions fsubstitutions get substitution pattern getsubstitutionpattern sub progress monitor subprogressmonitor worked will modify source willmodifysource result add nls source modifier nlssourcemodifier create get cu getcu f substitutions fsubstitutions get substitution pattern getsubstitutionpattern f accessor class package faccessorclasspackage f accessor class name faccessorclassname f is eclipse s fiseclipsenls worked will modify property file willmodifypropertyfile result add nls property file modifier nlspropertyfilemodifier create f substitutions fsubstitutions get property file path getpropertyfilepath iseclipsenls create accessor class createaccessorclass change change accessor class modifier accessorclassmodifier create get accessor cu getaccessorcu f substitutions fsubstitutions change result add change worked result check parameters checkparameters is not null isnotnull f substitutions fsubstitutions is not null isnotnull f accessor class package faccessorclasspackage values defaults is not null isnotnull f accessor class name faccessorclassname is not null isnotnull get substitution pattern getsubstitutionpattern i file ifile get all files to modify getallfilestomodify list i resource iresource files array list arraylist will modify source willmodifysource i resource iresource resource f cu fcu get resource getresource resource exists files add resource will modify property file willmodifypropertyfile i file ifile file get property file handle getpropertyfilehandle file exists files add file will modify accessor class willmodifyaccessorclass i file ifile file get accessor class file handle getaccessorclassfilehandle file exists files add file files to array toarray i file ifile files size i file ifile get property file handle getpropertyfilehandle resources plugin resourcesplugin get workspace getworkspace get root getroot get file getfile get property file path getpropertyfilepath i path ipath get property file path getpropertyfilepath f resource bundle package fresourcebundlepackage get path getpath append f resource bundle name fresourcebundlename i file ifile get accessor class file handle getaccessorclassfilehandle resources plugin resourcesplugin get workspace getworkspace get root getroot get file getfile get accessor class file path getaccessorclassfilepath i path ipath get accessor class file path getaccessorclassfilepath getaccessorcupath refactoring status refactoringstatus validate modifies files validatemodifiesfiles checks validate modifies files validatemodifiesfiles get all files to modify getallfilestomodify get validation context getvalidationcontext checking fatal error refactoring status refactoringstatus check if any thing to do checkifanythingtodo java model exception javamodelexception nls substitution nlssubstitution count items countitems f substitutions fsubstitutions nls substitution nlssubstitution externalized will create accessor class willcreateaccessorclass will modify property file willmodifypropertyfile will modify source willmodifysource refactoring status refactoringstatus result refactoring status refactoringstatus result add fatal error addfatalerror nls messages nlsmessages nls refactoring nlsrefactoring result property file exists propertyfileexists get property file handle getpropertyfilehandle exists refactoring status refactoringstatus check substitution pattern checksubstitutionpattern string pattern get substitution pattern getsubstitutionpattern refactoring status refactoringstatus result refactoring status refactoringstatus pattern trim length result add error adderror nls messages nlsmessages nls refactoring nlsrefactoring pattern empty pattern index of indexof key string msg messages format nls messages nlsmessages nls refactoring nlsrefactoring pattern key result add warning addwarning msg pattern index of indexof key pattern last index of lastindexof key string msg messages format nls messages nlsmessages nls refactoring nlsrefactoring occurrence key result add warning addwarning msg result refactoring status refactoringstatus check keys checkkeys refactoring status refactoringstatus result refactoring status refactoringstatus nls substitution nlssubstitution subs f substitutions fsubstitutions subs length nls substitution nlssubstitution substitution subs substitution get state getstate nls substitution nlssubstitution externalized substitution has state changed hasstatechanged result merge check key checkkey substitution get key getkey result refactoring status refactoringstatus check key checkkey string key refactoring status refactoringstatus result refactoring status refactoringstatus key result add fatal error addfatalerror nls messages nlsmessages nls refactoring nlsrefactoring nls nls key starts with startswith key starts with startswith refactoring status context refactoringstatuscontext context java string status context javastringstatuscontext key source range sourcerange result add warning addwarning nls messages nlsmessages nls refactoring nlsrefactoring warning context nls equals key trim result add fatal error addfatalerror nls messages nlsmessages nls refactoring nlsrefactoring empty string unwanted strings unwanted strings length key index of indexof unwanted strings string args key unwanted strings string msg messages format nls messages nlsmessages nls refactoring nlsrefactoring args result add error adderror msg result will create accessor class willcreateaccessorclass java model exception javamodelexception i compilation unit icompilationunit compilation unit compilationunit get accessor cu getaccessorcu compilation unit compilationunit exists type name exists in package typenameexistsinpackage f accessor class package faccessorclasspackage f accessor class name faccessorclassname checks resource exists resourceexists getaccessorcupath i compilation unit icompilationunit get accessor cu getaccessorcu f accessor class package faccessorclasspackage get compilation unit getcompilationunit getaccessorcuname will modify source willmodifysource nls substitution nlssubstitution subs f substitutions fsubstitutions subs length subs has source change hassourcechange will modify property file willmodifypropertyfile nls substitution nlssubstitution subs f substitutions fsubstitutions subs length nls substitution nlssubstitution substitution subs substitution has property file change haspropertyfilechange will modify accessor class willmodifyaccessorclass iseclipsenls nls substitution nlssubstitution subs f substitutions fsubstitutions subs length nls substitution nlssubstitution substitution subs substitution has accessor class change hasaccessorclasschange type name exists in package typenameexistsinpackage i package fragment ipackagefragment pack string java model exception javamodelexception checks find type in package findtypeinpackage pack string getaccessorcuname get accessor class name getaccessorclassname java model util javamodelutil suffix i path ipath getaccessorcupath f accessor class package faccessorclasspackage get path getpath append getaccessorcuname nls substitution nlssubstitution get substitutions getsubstitutions f substitutions fsubstitutions string get prefix getprefix f prefix fprefix set prefix setprefix string prefix f prefix fprefix prefix f substitutions fsubstitutions f substitutions fsubstitutions length f substitutions fsubstitutions set prefix setprefix prefix set accessor class name setaccessorclassname string is not null isnotnull f accessor class name faccessorclassname set accessor class package setaccessorclasspackage i package fragment ipackagefragment package fragment packagefragment is not null isnotnull package fragment packagefragment f accessor class package faccessorclasspackage package fragment packagefragment set is eclipse s setiseclipsenls iseclipsenls f is eclipse s fiseclipsenls iseclipsenls set resource bundle package setresourcebundlepackage i package fragment ipackagefragment resource bundle package resourcebundlepackage is not null isnotnull resource bundle package resourcebundlepackage f resource bundle package fresourcebundlepackage resource bundle package resourcebundlepackage set resource bundle name setresourcebundlename string resource bundle name resourcebundlename is not null isnotnull resource bundle name resourcebundlename f resource bundle name fresourcebundlename resource bundle name resourcebundlename i package fragment ipackagefragment get accessor class package getaccessorclasspackage f accessor class package faccessorclasspackage detect is eclipse s detectiseclipsenls i compilation unit icompilationunit accessorcu get accessor class package getaccessorclasspackage get compilation unit getcompilationunit getaccessorcuname i type itype type accessorcu get type gettype get accessor class name getaccessorclassname type exists string superclass name superclassname type get superclass name getsuperclassname nls equals superclass name superclassname nls get name getname equals superclass name superclassname i type itype superclass type new supertype hierarchy newsupertypehierarchy get superclass getsuperclass type superclass nls get name getname equals superclass get fully qualified name getfullyqualifiedname java model exception javamodelexception iseclipsenlsavailable iseclipsenls f is eclipse s fiseclipsenls i package fragment ipackagefragment get resource bundle package getresourcebundlepackage f resource bundle package fresourcebundlepackage string get accessor class name getaccessorclassname f accessor class name faccessorclassname string get resource bundle name getresourcebundlename f resource bundle name fresourcebundlename