copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring util java util hash set hashset java util iterator java util list org eclipse jdt core dom ast node astnode org eclipse jdt core dom child list property descriptor childlistpropertydescriptor org eclipse jdt core dom structural property descriptor structuralpropertydescriptor org eclipse jdt core dom rewrite target source range computer targetsourcerangecomputer org eclipse jdt internal corext dom ast nodes astnodes source range compute r computer shortest source range nodes nodes extended source range link target source range computer targetsourcerangecomputer compute source range computesourcerange ast node astnode nodes tight nodes source range extended source range violate over lapping overlapping condition superclass tight source range computer tightsourcerangecomputer target source range computer targetsourcerangecomputer hash set hashset ast node astnode f tight source range nodes ftightsourcerangenodes hash set hashset add node tight nodes param reference node add tight source node addtightsourcenode ast node astnode reference f tight source range nodes ftightsourcerangenodes add reference list structural property descriptor structuralpropertydescriptor properties reference structural properties for type structuralpropertiesfortype iterator structural property descriptor structuralpropertydescriptor iterator properties iterator iterator has next hasnext structural property descriptor structuralpropertydescriptor descriptor iterator descriptor is child property ischildproperty ast node astnode child ast node astnode reference get structural property getstructuralproperty descriptor child is ext ending isextending child reference add tight source node addtightsourcenode child descriptor is child list property ischildlistproperty list ast node astnode children ast nodes astnodes get child list property getchildlistproperty reference child list property descriptor childlistpropertydescriptor descriptor iterator ast node astnode iterator children iterator iterator has next hasnext ast node astnode child iterator is ext ending isextending child reference add tight source node addtightsourcenode child override source range sourcerange compute source range computesourcerange ast node astnode node f tight source range nodes ftightsourcerangenodes node target source range computer targetsourcerangecomputer source range sourcerange node get start position getstartposition node get length getlength bug compute source range computesourcerange node is ext ending isextending ast node astnode child ast node astnode parent source range sourcerange extended range extendedrange compute source range computesourcerange child parent start parentstart parent get start position getstartposition extended start extendedstart extended range extendedrange get start position getstartposition parent start parentstart extended start extendedstart parent end parentend parent start parentstart parent get length getlength extended end extendedend extended start extendedstart extended range extendedrange get length getlength parent end parentend extended end extendedend