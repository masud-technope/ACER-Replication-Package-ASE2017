copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring structure constraints java util array list arraylist java util arrays java util collection java util hash map hashmap java util iterator java util linked list linkedlist java util map org eclipse core runtime org eclipse jdt core i compilation unit icompilationunit org eclipse jdt internal corext refactoring type constraints typeconstraints types t type ttype org eclipse jdt internal corext refactoring type constraints typeconstraints cast variable castvariable org eclipse jdt internal corext refactoring type constraints typeconstraints constraint variable constraintvariable org eclipse jdt internal corext refactoring type constraints typeconstraints i type constraint itypeconstraint org eclipse jdt internal corext refactoring type constraints typeconstraints i type constraint variable itypeconstraintvariable org eclipse jdt internal corext refactoring type constraints typeconstraints i type set itypeset org eclipse jdt internal corext refactoring type constraints typeconstraints immutable type variable immutabletypevariable org eclipse jdt internal corext refactoring type constraints typeconstraints type equivalence set typeequivalenceset type constraint solver solve supertype constraint models super type constraints solver supertypeconstraintssolver type estimate data type code t type ttype code nls string data type estimate type constraint model solve super type constraints model supertypeconstraintsmodel f model fmodel obsolete casts element type code i compilation unit icompilationunit collection cast variable castvariable code map i compilation unit icompilationunit collection cast variable castvariable f obsolete c asts fobsoletecasts list constraint variables processed linked list linkedlist constraint variable constraintvariable f process able fprocessable type occurrences element type code i compilation unit icompilationunit collection i type constraint variable itypeconstraintvariable code map i compilation unit icompilationunit collection i type constraint variable itypeconstraintvariable f type occurrences ftypeoccurrences creates type constraints solver param model model solve super type constraints solver supertypeconstraintssolver super type constraints model supertypeconstraintsmodel model is not null isnotnull model f model fmodel model computes equality constraints conditional expressions param constraints type constraints element type code i type constraint itypeconstraint code param level compliance level compute conditional type constraints computeconditionaltypeconstraints collection i type constraint itypeconstraint constraints level i type constraint itypeconstraint constraint iterator i type constraint itypeconstraint iterator constraints iterator iterator has next hasnext constraint iterator constraint conditional type constraint conditionaltypeconstraint conditional type constraint conditionaltypeconstraint conditional conditional type constraint conditionaltypeconstraint constraint f model fmodel create equality constraint createequalityconstraint constraint get left getleft constraint get right getright f model fmodel create equality constraint createequalityconstraint conditional get expression getexpression constraint get left getleft f model fmodel create equality constraint createequalityconstraint conditional get expression getexpression constraint get right getright computes equality constraints covariant types param constraints type constraints element type code i type constraint itypeconstraint code param level compliance level compute non covariant constraints computenoncovariantconstraints collection i type constraint itypeconstraint constraints level level i type constraint itypeconstraint constraint iterator i type constraint itypeconstraint iterator constraints iterator iterator has next hasnext constraint iterator constraint covariant type constraint covarianttypeconstraint f model fmodel create equality constraint createequalityconstraint constraint get left getleft constraint get right getright computes obsolete casts variables param variables variables element type code cast variable castvariable code compute obsolete c asts computeobsoletecasts collection cast variable castvariable variables f obsolete c asts fobsoletecasts hash map hashmap cast variable castvariable variable iterator cast variable castvariable iterator variables iterator iterator has next hasnext variable iterator t type ttype type t type ttype variable get expression variable getexpressionvariable get data getdata data type estimate type type can assign to canassignto variable get type gettype i compilation unit icompilationunit unit variable get compilation unit getcompilationunit collection cast variable castvariable casts f obsolete c asts fobsoletecasts unit casts casts add variable casts array list arraylist casts add variable f obsolete c asts fobsoletecasts unit casts computes initial type estimate constraint variable param variable constraint variable initial type estimate i type set itypeset compute type estimate computetypeestimate constraint variable constraintvariable variable t type ttype type variable get type gettype variable immutable type variable immutabletypevariable type get erasure geterasure equals f model fmodel get sub type getsubtype get erasure geterasure super type set supertypeset create type set createtypeset type super type set supertypeset create type set createtypeset type f model fmodel get super type getsupertype computes initial type estimates variables param variables constraint variables element type code constraint variable constraintvariable code compute type estimates computetypeestimates collection constraint variable constraintvariable variables constraint variable constraintvariable variable iterator constraint variable constraintvariable iterator variables iterator iterator has next hasnext variable iterator type equivalence set typeequivalenceset variable get type equivalence set gettypeequivalenceset type equivalence set typeequivalenceset variable set type estimate settypeestimate compute type estimate computetypeestimate variable variable set type equivalence set settypeequivalenceset i type set itypeset estimate variable get type estimate gettypeestimate estimate constraint variable constraintvariable contributing get contributing variables getcontributingvariables estimate super type set supertypeset get universe getuniverse contributing length estimate estimate restricted to restrictedto compute type estimate computetypeestimate contributing set type estimate settypeestimate estimate computes single type constraint variables param variables constraint variables element type code constraint variable constraintvariable code compute type occurrences computetypeoccurrences collection constraint variable constraintvariable variables f type occurrences ftypeoccurrences hash map hashmap t type ttype super erasure supererasure f model fmodel get super type getsupertype get erasure geterasure t type ttype estimated type estimatedtype i type set itypeset i compilation unit icompilationunit unit constraint variable constraintvariable variable i type constraint variable itypeconstraintvariable declaration t type ttype variable type variabletype iterator constraint variable constraintvariable iterator variables iterator iterator has next hasnext variable iterator variable i type constraint variable itypeconstraintvariable declaration i type constraint variable itypeconstraintvariable variable variable type variabletype variable get type gettype declaration get type estimate gettypeestimate estimated type estimatedtype choose single type choosesingletype estimated type estimatedtype t type ttype type erasure typeerasure estimated type estimatedtype get erasure geterasure type erasure typeerasure equals variable type variabletype get erasure geterasure type erasure typeerasure equals super erasure supererasure declaration set data setdata data type estimate estimated type estimatedtype unit declaration get compilation unit getcompilationunit unit collection i type constraint variable itypeconstraintvariable matches f type occurrences ftypeoccurrences unit matches matches add declaration matches array list arraylist matches add declaration f type occurrences ftypeoccurrences unit matches returns computed obsolete casts obsolete casts element type code i compilation unit icompilationunit collection cast variable castvariable code map i compilation unit icompilationunit collection cast variable castvariable get obsolete c asts getobsoletecasts f obsolete c asts fobsoletecasts returns computed type occurrences type occurrences element type code i compilation unit icompilationunit collection i declared constraint variable ideclaredconstraintvariable code map i compilation unit icompilationunit collection i type constraint variable itypeconstraintvariable get type occurrences gettypeoccurrences f type occurrences ftypeoccurrences processes constraints constraint variable prop agates propagates param constraints type constraints process element type code i type constraint itypeconstraint code process constraints processconstraints collection i type constraint itypeconstraint constraints level f model fmodel get compliance getcompliance i type constraint itypeconstraint constraint iterator i type constraint itypeconstraint iterator constraints iterator iterator has next hasnext constraint iterator level constraint covariant type constraint covarianttypeconstraint constraint conditional type constraint conditionaltypeconstraint constraint variable constraintvariable left variable leftvariable constraint get left getleft i type set itypeset left estimate leftestimate left variable leftvariable get type estimate gettypeestimate type equivalence set typeequivalenceset left variable leftvariable get type equivalence set gettypeequivalenceset i type set itypeset new estimate newestimate left estimate leftestimate restricted to restrictedto constraint get right getright get type estimate gettypeestimate left estimate leftestimate new estimate newestimate set type estimate settypeestimate new estimate newestimate f process able fprocessable add all addall arrays as list aslist get contributing variables getcontributingvariables sol ves solves constraints model solve constraints solveconstraints f process able fprocessable linked list linkedlist collection constraint variable constraintvariable variables f model fmodel get constraint variables getconstraintvariables collection i type constraint itypeconstraint constraints f model fmodel get type constraints gettypeconstraints level f model fmodel get compliance getcompliance compute non covariant constraints computenoncovariantconstraints constraints level todo specific common type ast jls compute conditional type constraints computeconditionaltypeconstraints constraints level compute type estimates computetypeestimates variables f process able fprocessable add all addall variables collection i type constraint itypeconstraint usage constraint variable constraintvariable variable f process able fprocessable is empty isempty variable f process able fprocessable remove first removefirst usage super type constraints model supertypeconstraintsmodel get variable usage getvariableusage variable usage is empty isempty process constraints processconstraints usage variable set data setdata data type estimate variable get type estimate gettypeestimate choose single type choosesingletype compute type occurrences computetypeoccurrences variables compute obsolete c asts computeobsoletecasts f model fmodel get cast variables getcastvariables