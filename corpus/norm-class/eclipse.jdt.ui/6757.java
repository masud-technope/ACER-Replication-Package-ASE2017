copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation tom eicher avaloq evolution block selection mode org eclipse jdt internal java editor javaeditor java util resource bundle resourcebundle org eclipse swt custom styled text styledtext org eclipse swt widgets event org eclipse core runtime org eclipse jface text bad location exception badlocationexception org eclipse jface text i document idocument org eclipse jface text i region iregion org eclipse jface text i rewrite target irewritetarget org eclipse jface text i text selection itextselection org eclipse jface text i text viewer itextviewer org eclipse jface text i text viewer extension itextviewerextension org eclipse jface text region org eclipse jface text text selection textselection org eclipse jface text text utilities textutilities org eclipse jface text source i line range ilinerange org eclipse jface text source i source viewer isourceviewer org eclipse jface text source line range linerange org eclipse i editor input ieditorinput org eclipse texteditor i editor status line ieditorstatusline org eclipse texteditor i text editor itexteditor org eclipse texteditor i text editor action definition ids itexteditoractiondefinitionids org eclipse texteditor text editor action texteditoraction org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor indent util indentutil indent result indentresult action moving selected lines java editor java move lines action javamovelinesaction text editor action texteditoraction shared move copy lines action quadruple shared state sharedstate compilation unit editor actions operate compilation unit editor compilationuniteditor f editor feditor indent token shared actions indent result indentresult f result fresult code code compound move copy f edit in progress feditinprogress exit str ategy strategy detect compound edit compound edit exit strategy compoundeditexitstrategy f exit strategy fexitstrategy shared state sharedstate compilation unit editor compilationuniteditor editor f editor feditor editor f exit strategy fexitstrategy compound edit exit strategy compoundeditexitstrategy string i text editor action definition ids itexteditoractiondefinitionids move lines i text editor action definition ids itexteditoractiondefinitionids move lines i text editor action definition ids itexteditoractiondefinitionids copy lines i text editor action definition ids itexteditoractiondefinitionids copy lines f exit strategy fexitstrategy add compound listener addcompoundlistener i compound edit listener icompoundeditlistener override end compound edit endcompoundedit shared state sharedstate end compound edit endcompoundedit ends compound change begin compound edit begincompoundedit f edit in progress feditinprogress f editor feditor f edit in progress feditinprogress f exit strategy fexitstrategy arm f editor feditor get viewer getviewer i rewrite target irewritetarget target f editor feditor get adapter getadapter i rewrite target irewritetarget target target begin compound change begincompoundchange ends compound change end compound edit endcompoundedit f edit in progress feditinprogress f editor feditor f exit strategy fexitstrategy disarm i rewrite target irewritetarget target f editor feditor get adapter getadapter i rewrite target irewritetarget target target end compound change endcompoundchange f result fresult f edit in progress feditinprogress key status message illegal move variables define action code code lines shifted code code f upwards fupwards code code lines copied moved f copy fcopy shared move copy action quadruple shared state sharedstate f shared state fsharedstate creates quadruple move copy actions returned array actions order move move copy duplicate copy duplicate select param bundle resource bundle param editor editor quadruple actions java move lines action javamovelinesaction create move copy action set createmovecopyactionset resource bundle resourcebundle bundle compilation unit editor compilationuniteditor editor shared state sharedstate shared state sharedstate editor java move lines action javamovelinesaction actions java move lines action javamovelinesaction nls actions java move lines action javamovelinesaction bundle editor move lines up movelinesup nls actions java move lines action javamovelinesaction bundle editor move lines down movelinesdown nls actions java move lines action javamovelinesaction bundle editor copy line up copylineup nls actions java move lines action javamovelinesaction bundle editor copy line down copylinedown actions org eclipse texteditor text editor action texteditoraction set editor seteditor org eclipse texteditor i text editor itexteditor override set editor seteditor i text editor itexteditor editor is true istrue editor compilation unit editor compilationuniteditor set editor seteditor editor f shared state fsharedstate f shared state fsharedstate f editor feditor compilation unit editor compilationuniteditor editor creates initial izes initializes action text editor action config ures configures visual representation resource bundle param bundle resource bundle param prefix prefix prepended resource code resource action resourceaction code constructor code code param code code selected lines moved code code param copy code code action copy lines moving param shared text editor action texteditoraction text editor action texteditoraction resource bundle resourcebundle string i text editor itexteditor java move lines action javamovelinesaction resource bundle resourcebundle bundle string prefix copy shared state sharedstate bundle prefix f editor feditor f upwards fupwards f copy fcopy copy f shared state fsharedstate update checks code selection code contained visible region code viewer code special selection considered contained visible region extension stays part ially partially contained white space param selection selection checked param viewer viewer displaying visible region code selection code document code code code selection code contained code code contained by visible region containedbyvisibleregion i text selection itextselection selection i source viewer isourceviewer viewer min selection get offset getoffset max min selection get length getlength i document idocument document viewer get document getdocument i region iregion visible viewer i text viewer extension itextviewerextension visible i text viewer extension itextviewerextension viewer get model coverage getmodelcoverage visible viewer get visible region getvisibleregion vis offset visoffset visible get offset getoffset vis offset visoffset min document get line of offset getlineofoffset vis offset visoffset selection get start line getstartline is whitespace iswhitespace document min vis offset visoffset min show status showstatus vis end visend vis offset visoffset visible get length getlength vis end visend max document get line of offset getlineofoffset vis end visend selection get end line getendline is whitespace iswhitespace document vis end visend max vis end visend show status showstatus bad location exception badlocationexception selection document comp utes computes lines fully part ially partially covered code selection code document considered covered code selection code comp rises comprises characters including terminating delimiter note selection considered covered selection comp rises comprises delimiter considered special selection empty considered covered caret position including delimiter start delimiter considered covered param document document code selection code ref ers refers param selection selection code document code param viewer code i source viewer isourceviewer code displaying code document code selection describing range lines part ially partially covered code selection code terminating delimiters bad location exception badlocationexception selection bounds underlying document changed call i text selection itextselection get moving selection getmovingselection i document idocument document i text selection itextselection selection i source viewer isourceviewer viewer bad location exception badlocationexception document get line offset getlineoffset selection get start line getstartline end line endline selection get end line getendline high document get line offset getlineoffset end line endline document get line length getlinelength end line endline delimiter string delim document get line delimiter getlinedelimiter end line endline delim high delim length text selection textselection document high computes region skipped text block moved code f upwards fupwards code code code code selection code selected param document document code selection code ref ers refers param selection selection code document code moved region comp rising comprising code selection code moved terminating delimiter i text selection itextselection get skipped line getskippedline i document idocument document i text selection itextselection selection skipped line n skippedlinen f upwards fupwards selection get start line getstartline selection get end line getendline skipped line n skippedlinen document get number of lines getnumberoflines f copy fcopy skipped line n skippedlinen skipped line n skippedlinen document get number of lines getnumberoflines f copy fcopy skipped line n skippedlinen skipped line n skippedlinen i region iregion document get line information getlineinformation skipped line n skippedlinen text selection textselection document get offset getoffset get length getlength bad location exception badlocationexception checks white space string param string string checked code code code code code string code white space code code code code is whitespace iswhitespace string string string string trim length org eclipse jface action i action iaction override run with event runwithevent event event involved objects f shared state fsharedstate f editor feditor validate editor input state validateeditorinputstate i source viewer isourceviewer viewer f shared state fsharedstate f editor feditor get viewer getviewer viewer i document idocument document viewer get document getdocument document styled text styledtext widget viewer get text widget gettextwidget widget selection i text selection itextselection sel i text selection itextselection viewer get selection provider getselectionprovider get selection getselection sel is empty isempty i text selection itextselection skipped line skippedline get skipped line getskippedline document sel skipped line skippedline i text selection itextselection moving area movingarea get moving selection getmovingselection document sel viewer visible area bail contained by visible region containedbyvisibleregion moving area movingarea viewer contained by visible region containedbyvisibleregion skipped line skippedline viewer content moved moving selected area skipped string moving moving area movingarea get text gettext string skipped skipped line skippedline get text gettext moving skipped document get length getlength string delim string insertion offset f upwards fupwards delim document get line delimiter getlinedelimiter skipped line skippedline get end line getendline f copy fcopy delim text utilities textutilities get default line delimiter getdefaultlinedelimiter document insertion moving delim offset moving area movingarea get offset getoffset is not null isnotnull delim insertion moving delim skipped offset skipped line skippedline get offset getoffset delim document get line delimiter getlinedelimiter moving area movingarea get end line getendline f copy fcopy delim delim text utilities textutilities get default line delimiter getdefaultlinedelimiter document insertion delim moving insertion moving delim offset skipped line skippedline get offset getoffset is not null isnotnull delim insertion skipped delim moving offset moving area movingarea get offset getoffset len ght lenght f copy fcopy insertion length modify document i line range ilinerange selection before selectionbefore get line range getlinerange document moving area movingarea f copy fcopy f shared state fsharedstate end compound edit endcompoundedit f shared state fsharedstate begin compound edit begincompoundedit document replace offset len ght lenght insertion i line range ilinerange selection after selectionafter f upwards fupwards f copy fcopy selection after selectionafter selection before selectionbefore f upwards fupwards selection after selectionafter line range linerange selection before selectionbefore get start line getstartline selection before selectionbefore get number of lines getnumberoflines f copy fcopy selection after selectionafter line range linerange selection before selectionbefore get start line getstartline selection before selectionbefore get number of lines getnumberoflines selection before selectionbefore get number of lines getnumberoflines selection after selectionafter line range linerange selection before selectionbefore get start line getstartline selection before selectionbefore get number of lines getnumberoflines f shared state fsharedstate f result fresult indent util indentutil indent lines indentlines document selection after selectionafter get project getproject f shared state fsharedstate f result fresult move selection i region iregion region get region getregion document selection after selectionafter select and reveal selectandreveal viewer region get offset getoffset region get length getlength bad location exception badlocationexception f copy fcopy f shared state fsharedstate end compound edit endcompoundedit i java project ijavaproject get project getproject i editor input ieditorinput editor input editorinput f shared state fsharedstate f editor feditor get editor input geteditorinput i compilation unit icompilationunit unit java plugin javaplugin get default getdefault get working copy manager getworkingcopymanager get working copy getworkingcopy editor input editorinput unit unit get java project getjavaproject i line range ilinerange get line range getlinerange i document idocument document i text selection itextselection selection bad location exception badlocationexception offset selection get offset getoffset start line startline document get line of offset getlineofoffset offset end offset endoffset offset selection get length getlength end line endline document get line of offset getlineofoffset end offset endoffset n lines nlines end line endline start line startline line range linerange start line startline n lines nlines i region iregion get region getregion i document idocument document i line range ilinerange line range linerange bad location exception badlocationexception start line startline line range linerange get start line getstartline offset document get line offset getlineoffset start line startline number of lines numberoflines line range linerange get number of lines getnumberoflines number of lines numberoflines region offset end line endline start line startline number of lines numberoflines end offset endoffset f shared state fsharedstate f editor feditor is block selection mode enabled isblockselectionmodeenabled block selection mode don select delimiter count empty selected i region iregion end line info endlineinfo document get line information getlineinformation end line endline end offset endoffset end line info endlineinfo get offset getoffset end line info endlineinfo get length getlength end offset endoffset document get line offset getlineoffset end line endline document get line length getlinelength end line endline region offset end offset endoffset offset performs abstract text editor abstracttexteditor select and reveal selectandreveal update viewers highlight area param viewer viewer select param offset offset selection param length length selection select and reveal selectandreveal i text viewer itextviewer viewer offset length invert selection avoid jumping selection show selection showselection viewer set selected range setselectedrange offset length length viewer reveal range revealrange offset length trigger jumping styled text styledtext viewer get text widget gettextwidget minimal scr olling scrolling show selection showselection displays status move show status showstatus i editor status line ieditorstatusline status f shared state fsharedstate f editor feditor get adapter getadapter i editor status line ieditorstatusline status status set message setmessage java editor messages javaeditormessages editor move lines movelines illegal move illegalmove status org eclipse texteditor i update iupdate update override update update is enabled isenabled set enabled setenabled can modify editor canmodifyeditor