copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt wizards java file java file input stream fileinputstream java file output stream fileoutputstream java i o exception ioexception java input stream inputstream java output stream outputstream java lang reflect invocation target exception invocationtargetexception java net uri java net uri syntax exception urisyntaxexception java util array list arraylist java util arrays java util hash set hashset java util iterator java util list org eclipse core file system filesystem efs org eclipse core file system filesystem i file info ifileinfo org eclipse core file system filesystem i file store ifilestore org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime path org eclipse core runtime status org eclipse core runtime sub progress monitor subprogressmonitor org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources i resource status iresourcestatus org eclipse core resources i workspace root iworkspaceroot org eclipse core resources resources plugin resourcesplugin org eclipse jface dialogs error dialog errordialog org eclipse jface operation i runnable with progress irunnablewithprogress org eclipse actions workspace modify delegating operation workspacemodifydelegatingoperation org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java project ijavaproject org eclipse jdt core java core javacore org eclipse jdt internal corext util messages org eclipse jdt javaui org eclipse jdt internal java plugin javaplugin org eclipse jdt internal dialogs status info statusinfo org eclipse jdt internal util core utility coreutility org eclipse jdt internal util exception handler exceptionhandler org eclipse jdt internal wizards class path detector classpathdetector org eclipse jdt internal wizards new wizard messages newwizardmessages java project wizard configure build path output location add ition addition link java capability configuration page javacapabilityconfigurationpage wizard early project creation linked folders defined existing external location detects path clients instantiate subclass new java project wizard page two newjavaprojectwizardpagetwo java capability configuration page javacapabilityconfigurationpage nls string filename project project nls string filename classpath classpath new java project wizard page one newjavaprojectwizardpageone f first page ffirstpage location platform location uri f curr project location fcurrprojectlocation i project iproject f curr project fcurrproject f keep content fkeepcontent file f dot project backup fdotprojectbackup file f dot classpath backup fdotclasspathbackup f is auto build fisautobuild hash set hashset i file store ifilestore f orginal folders forginalfolders constructor link new java project wizard page two newjavaprojectwizardpagetwo param main page mainpage wizard new java project wizard page two newjavaprojectwizardpagetwo new java project wizard page one newjavaprojectwizardpageone main page mainpage f first page ffirstpage main page mainpage f curr project location fcurrprojectlocation f curr project fcurrproject f keep content fkeepcontent f dot project backup fdotprojectbackup f dot classpath backup fdotclasspathbackup f is auto build fisautobuild override use new source page usenewsourcepage override set visible setvisible visible is shown first time isshownfirsttime visible f curr project fcurrproject visible entering is shown first time isshownfirsttime create provisonal project createprovisonalproject leaving get container getcontainer get current page getcurrentpage f first page ffirstpage remove provisonal project removeprovisonalproject set visible setvisible visible is shown first time isshownfirsttime set focus setfocus has existing content hasexistingcontent uri real location reallocation core exception coreexception i file store ifilestore file efs get store getstore real location reallocation file fetch info fetchinfo exists i status istatus change to new project changetonewproject update runnable updaterunnable i runnable with progress irunnablewithprogress i status istatus info status infostatus status status override i progress monitor iprogressmonitor monitor invocation target exception invocationtargetexception interrupted exception interruptedexception f is auto build fisautobuild f is auto build fisautobuild value of valueof core utility coreutility set auto building setautobuilding info status infostatus update project updateproject monitor core exception coreexception invocation target exception invocationtargetexception operation canceled exception operationcanceledexception interrupted exception interruptedexception monitor update runnable updaterunnable update runnable updaterunnable get container getcontainer workspace modify delegating operation workspacemodifydelegatingoperation info status infostatus invocation target exception invocationtargetexception string title new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo error title string message new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo error message exception handler exceptionhandler handle get shell getshell title message interrupted exception interruptedexception uri get real location getreallocation string project name projectname uri location workspace location uri root location rootlocation resources plugin resourcesplugin get workspace getworkspace get root getroot getlocationuri location uri root location rootlocation get scheme getscheme path from portable string fromportablestring root location rootlocation get path getpath append project name projectname to string tostring uri syntax exception urisyntaxexception is true istrue happen location i status istatus update project updateproject i progress monitor iprogressmonitor monitor core exception coreexception interrupted exception interruptedexception i status istatus result status info statusinfo status monitor monitor null progress monitor nullprogressmonitor monitor begin task begintask new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo operation initialize monitor is canceled iscanceled operation canceled exception operationcanceledexception string project name projectname f first page ffirstpage get project name getprojectname f curr project fcurrproject resources plugin resourcesplugin get workspace getworkspace get root getroot get project getproject project name projectname f curr project location fcurrprojectlocation f first page ffirstpage get project location i getprojectlocationuri uri real location reallocation get real location getreallocation project name projectname f curr project location fcurrprojectlocation f keep content fkeepcontent has existing content hasexistingcontent real location reallocation monitor is canceled iscanceled operation canceled exception operationcanceledexception f keep content fkeepcontent remember existing files rememberexistingfiles real location reallocation remember exisiting folders rememberexisitingfolders real location reallocation monitor is canceled iscanceled operation canceled exception operationcanceledexception create project createproject f curr project fcurrproject f curr project location fcurrprojectlocation sub progress monitor subprogressmonitor monitor core exception coreexception get status getstatus get code getcode i resource status iresourcestatus failed read metadata result status info statusinfo i status istatus info messages format new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo delete corrupt project file deletecorruptprojectfile message get local ized message getlocalizedmessage delete project file deleteprojectfile real location reallocation f curr project fcurrproject exists f curr project fcurrproject delete create project createproject f curr project fcurrproject f curr project location fcurrprojectlocation monitor is canceled iscanceled operation canceled exception operationcanceledexception initialize build path initializebuildpath java core javacore create f curr project fcurrproject sub progress monitor subprogressmonitor monitor create java project source folder configure java project configurejavaproject sub progress monitor subprogressmonitor monitor monitor result eval uates evaluates build path output folder settings build path calling link init i java project ijavaproject i path ipath i classpath entry iclasspathentry clients override method param java project javaproject project created method called param monitor progress monitor core exception coreexception thrown initial izing initializing build path failed initialize build path initializebuildpath i java project ijavaproject java project javaproject i progress monitor iprogressmonitor monitor core exception coreexception monitor monitor null progress monitor nullprogressmonitor monitor begin task begintask new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo monitor init build path i classpath entry iclasspathentry entries i path ipath output location outputlocation i project iproject project java project javaproject get project getproject f keep content fkeepcontent project get file getfile filename classpath exists class path detector classpathdetector detector class path detector classpathdetector f curr project fcurrproject sub progress monitor subprogressmonitor monitor entries detector get classpath getclasspath output location outputlocation detector get output location getoutputlocation entries length entries monitor worked list i classpath entry iclasspathentry cp entries cpentries array list arraylist i workspace root iworkspaceroot root project get workspace getworkspace get root getroot i classpath entry iclasspathentry source classpath entries sourceclasspathentries f first page ffirstpage get source classpath entries getsourceclasspathentries source classpath entries sourceclasspathentries length i path ipath path source classpath entries sourceclasspathentries get path getpath path segment count segmentcount i folder ifolder folder root get folder getfolder path core utility coreutility create folder createfolder folder sub progress monitor subprogressmonitor monitor cp entries cpentries add source classpath entries sourceclasspathentries cp entries cpentries add all addall arrays as list aslist f first page ffirstpage get default classpath entries getdefaultclasspathentries entries cp entries cpentries to array toarray i classpath entry iclasspathentry cp entries cpentries size output location outputlocation f first page ffirstpage get output location getoutputlocation output location outputlocation segment count segmentcount i folder ifolder folder root get folder getfolder output location outputlocation core utility coreutility create derived folder createderivedfolder folder sub progress monitor subprogressmonitor monitor monitor is canceled iscanceled operation canceled exception operationcanceledexception init java project javaproject output location outputlocation entries monitor delete project file deleteprojectfile uri project location projectlocation core exception coreexception i file store ifilestore file efs get store getstore project location projectlocation file fetch info fetchinfo exists i file store ifilestore project file projectfile file get child getchild filename project project file projectfile fetch info fetchinfo exists project file projectfile delete efs remember exisiting folders rememberexisitingfolders uri project location projectlocation f orginal folders forginalfolders hash set hashset i file store ifilestore children efs get store getstore project location projectlocation child stores childstores efs children length i file store ifilestore child children i file info ifileinfo info child fetch info fetchinfo info is directory isdirectory info exists f orginal folders forginalfolders child get name getname f orginal folders forginalfolders add child core exception coreexception java plugin javaplugin log restore existing folders restoreexistingfolders uri project location projectlocation hash set hashset i file store ifilestore folders to keep folderstokeep hash set hashset f orginal folders forginalfolders work around workaround bug eclipse deletes files cancel project creation symlink project location path i file store ifilestore original file store originalfilestore f orginal folders forginalfolders file local file localfile original file store originalfilestore to local file tolocalfile efs local file localfile file canonical file canonicalfile local file localfile get canonical file getcanonicalfile i file store ifilestore canonical file store canonicalfilestore original file store originalfilestore get file system getfilesystem from local file fromlocalfile canonical file canonicalfile original file store originalfilestore equals canonical file store canonicalfilestore folders to keep folderstokeep add canonical file store canonicalfilestore i o exception ioexception core exception coreexception i file store ifilestore children efs get store getstore project location projectlocation child stores childstores efs children length i file store ifilestore child children i file info ifileinfo info child fetch info fetchinfo info is directory isdirectory info exists folders to keep folderstokeep child child delete efs f orginal folders forginalfolders remove child iterator i file store ifilestore iterator f orginal folders forginalfolders iterator iterator has next hasnext i file store ifilestore deleted iterator deleted mkdir efs core exception coreexception java plugin javaplugin log remember existing files rememberexistingfiles uri project location projectlocation core exception coreexception f dot project backup fdotprojectbackup f dot classpath backup fdotclasspathbackup i file store ifilestore file efs get store getstore project location projectlocation file fetch info fetchinfo exists i file store ifilestore project file projectfile file get child getchild filename project project file projectfile fetch info fetchinfo exists f dot project backup fdotprojectbackup create backup createbackup nls project file projectfile nls project desc i file store ifilestore classpath file classpathfile file get child getchild filename classpath classpath file classpathfile fetch info fetchinfo exists f dot classpath backup fdotclasspathbackup create backup createbackup nls classpath file classpathfile nls classpath desc restore existing files restoreexistingfiles uri project location projectlocation i progress monitor iprogressmonitor monitor core exception coreexception ticks f dot project backup fdotprojectbackup f dot classpath backup fdotclasspathbackup nls monitor begin task begintask ticks i file store ifilestore project file projectfile efs get store getstore project location projectlocation get child getchild filename project project file projectfile delete efs sub progress monitor subprogressmonitor monitor f dot project backup fdotprojectbackup copy file copyfile f dot project backup fdotprojectbackup project file projectfile sub progress monitor subprogressmonitor monitor i o exception ioexception i status istatus status status i status istatus error javaui plugin i status istatus error new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo problem restore project core exception coreexception status i file store ifilestore classpath file classpathfile efs get store getstore project location projectlocation get child getchild filename classpath classpath file classpathfile delete efs sub progress monitor subprogressmonitor monitor f dot classpath backup fdotclasspathbackup copy file copyfile f dot classpath backup fdotclasspathbackup classpath file classpathfile sub progress monitor subprogressmonitor monitor i o exception ioexception i status istatus status status i status istatus error javaui plugin i status istatus error new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo problem restore classpath core exception coreexception status file create backup createbackup i file store ifilestore source string core exception coreexception nls nls file bak file create temp file createtempfile eclipse bak copy file copyfile source bak bak i o exception ioexception i status istatus status status i status istatus error javaui plugin i status istatus error messages format new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo problem backup core exception coreexception status copy file copyfile i file store ifilestore source file target i o exception ioexception core exception coreexception input stream inputstream source open input stream openinputstream efs file output stream fileoutputstream file output stream fileoutputstream target copy file copyfile copy file copyfile file source i file store ifilestore target i progress monitor iprogressmonitor monitor i o exception ioexception core exception coreexception file input stream fileinputstream file input stream fileinputstream source output stream outputstream target open output stream openoutputstream efs monitor copy file copyfile copy file copyfile input stream inputstream output stream outputstream i o exception ioexception buffer bytes read bytesread read buffer bytes read bytesread write buffer bytes read bytesread close close called wizard finish param monitor progress monitor core exception coreexception thrown project creation configuration failed interrupted exception interruptedexception thrown user can celled cancelled project creation perform finish performfinish i progress monitor iprogressmonitor monitor core exception coreexception interrupted exception interruptedexception monitor begin task begintask new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo operation create f curr project fcurrproject update project updateproject sub progress monitor subprogressmonitor monitor string new project compliance newprojectcompliance f keep content fkeepcontent f first page ffirstpage get compiler compliance getcompilercompliance configure java project configurejavaproject new project compliance newprojectcompliance sub progress monitor subprogressmonitor monitor monitor f curr project fcurrproject f is auto build fisautobuild core utility coreutility set auto building setautobuilding f is auto build fisautobuild boolean value booleanvalue f is auto build fisautobuild creates provisional project wizard working provisional project typically created entered time early project creation required configure linked folders provisional project i project iproject create provisonal project createprovisonalproject i status istatus status change to new project changetonewproject status status isok error dialog errordialog open error openerror get shell getshell new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo error title status f curr project fcurrproject removes provisional project provisional project typically removed user can cels cancels wizard remove provisonal project removeprovisonalproject f curr project fcurrproject exists f curr project fcurrproject i runnable with progress irunnablewithprogress i runnable with progress irunnablewithprogress override i progress monitor iprogressmonitor monitor invocation target exception invocationtargetexception interrupted exception interruptedexception do remove project doremoveproject monitor get container getcontainer workspace modify delegating operation workspacemodifydelegatingoperation invocation target exception invocationtargetexception string title new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo error remove title string message new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo error remove message exception handler exceptionhandler handle get shell getshell title message interrupted exception interruptedexception do remove project doremoveproject i progress monitor iprogressmonitor monitor invocation target exception invocationtargetexception workspace no progress monitor noprogressmonitor f curr project location fcurrprojectlocation monitor no progress monitor noprogressmonitor monitor null progress monitor nullprogressmonitor monitor begin task begintask new wizard messages newwizardmessages new java project wizard page two newjavaprojectwizardpagetwo operation remove uri proj loc projloc f curr project fcurrproject getlocationuri remove content removecontent f keep content fkeepcontent f curr project fcurrproject is synchronized issynchronized i resource iresource depth infinite remove content removecontent restore existing folders restoreexistingfolders proj loc projloc f curr project fcurrproject delete remove content removecontent sub progress monitor subprogressmonitor monitor restore existing files restoreexistingfiles proj loc projloc sub progress monitor subprogressmonitor monitor f is auto build fisautobuild core utility coreutility set auto building setautobuilding f is auto build fisautobuild boolean value booleanvalue f is auto build fisautobuild core exception coreexception invocation target exception invocationtargetexception monitor f curr project fcurrproject f keep content fkeepcontent called wizard cancel perform cancel performcancel f curr project fcurrproject remove provisonal project removeprovisonalproject