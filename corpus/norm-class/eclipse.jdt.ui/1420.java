copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal java editor javaeditor java util array list arraylist java util list org eclipse swt widgets display org eclipse swt widgets shell org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime status org eclipse core runtime jobs job org eclipse jface text i document idocument org eclipse jface text i text input listener itextinputlistener org eclipse jface text position org eclipse jface text text presentation textpresentation org eclipse jface text source i source viewer isourceviewer org eclipse i workbench part site iworkbenchpartsite org eclipse jdt core i type root ityperoot org eclipse jdt core dom ast node astnode org eclipse jdt core dom boolean literal booleanliteral org eclipse jdt core dom character literal characterliteral org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom constructor invocation constructorinvocation org eclipse jdt core dom expression org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom number literal numberliteral org eclipse jdt core dom simple name simplename org eclipse jdt core dom super constructor invocation superconstructorinvocation org eclipse jdt internal corext dom generic visitor genericvisitor org eclipse jdt sharedastprovider org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor semantic highlighting manager semantichighlightingmanager highlighted position highlightedposition org eclipse jdt internal java editor javaeditor semantic highlighting manager semantichighlightingmanager highlighting org eclipse jdt internal java editor javaeditor semantic highlightings semantichighlightings deprecated member highlighting deprecatedmemberhighlighting org eclipse jdt internal text java i java reconciling listener ijavareconcilinglistener semantic highlighting reconciler background thread implementation semantic highlighting reconciler semantichighlightingreconciler i java reconciling listener ijavareconcilinglistener i text input listener itextinputlistener collects positions ast position collector positioncollector generic visitor genericvisitor semantic token semantic token semantictoken f token ftoken semantic token semantictoken org eclipse jdt internal corext dom generic visitor genericvisitor visit node visitnode org eclipse jdt core dom ast node astnode override visit node visitnode ast node astnode node node get flags getflags ast node astnode malformed ast node astnode malformed retain positions retainpositions node get start position getstartposition node get length getlength org eclipse jdt core dom ast visitor astvisitor visit org eclipse jdt core dom boolean literal booleanliteral override visit boolean literal booleanliteral node visit literal visitliteral node org eclipse jdt core dom ast visitor astvisitor visit org eclipse jdt core dom character literal characterliteral override visit character literal characterliteral node visit literal visitliteral node org eclipse jdt core dom ast visitor astvisitor visit org eclipse jdt core dom number literal numberliteral override visit number literal numberliteral node visit literal visitliteral node visit literal visitliteral expression node f token ftoken update node f job semantic highlightings fjobsemantichighlightings length semantic highlighting semantichighlighting semantic highlighting semantichighlighting f job semantic highlightings fjobsemantichighlightings f job highlightings fjobhighlightings is enabled isenabled semantic highlighting semantichighlighting consumes literal consumesliteral f token ftoken offset node get start position getstartposition length node get length getlength offset length add position addposition offset length f job highlightings fjobhighlightings f token ftoken clear org eclipse jdt internal corext dom generic visitor genericvisitor visit org eclipse jdt core dom constructor invocation constructorinvocation override visit constructor invocation constructorinvocation node xxx hack performance reasons loop f job semantic highlightings fjobsemantichighlightings call consumes f job deprecated member highlighting fjobdeprecatedmemberhighlighting i method binding imethodbinding constructor binding constructorbinding node resolve constructor binding resolveconstructorbinding constructor binding constructorbinding constructor binding constructorbinding is deprecated isdeprecated offset node get start position getstartposition length offset length add position addposition offset length f job deprecated member highlighting fjobdeprecatedmemberhighlighting org eclipse jdt internal corext dom generic visitor genericvisitor visit org eclipse jdt core dom constructor invocation constructorinvocation override visit super constructor invocation superconstructorinvocation node xxx hack performance reasons loop f job semantic highlightings fjobsemantichighlightings call consumes f job deprecated member highlighting fjobdeprecatedmemberhighlighting i method binding imethodbinding constructor binding constructorbinding node resolve constructor binding resolveconstructorbinding constructor binding constructorbinding constructor binding constructorbinding is deprecated isdeprecated offset node get start position getstartposition length offset length add position addposition offset length f job deprecated member highlighting fjobdeprecatedmemberhighlighting org eclipse jdt core dom ast visitor astvisitor visit org eclipse jdt core dom simple name simplename override visit simple name simplename node f token ftoken update node f job semantic highlightings fjobsemantichighlightings length semantic highlighting semantichighlighting semantic highlighting semantichighlighting f job semantic highlightings fjobsemantichighlightings f job highlightings fjobhighlightings is enabled isenabled semantic highlighting semantichighlighting consumes f token ftoken offset node get start position getstartposition length node get length getlength offset length add position addposition offset length f job highlightings fjobhighlightings f token ftoken clear add position range highlighting iff exist param offset range offset param length range length param highlighting highlighting add position addposition offset length highlighting highlighting is existing isexisting todo binary search f removed positions fremovedpositions size highlighted position highlightedposition position highlighted position highlightedposition f removed positions fremovedpositions position position is equal isequal offset length highlighting is existing isexisting f removed positions fremovedpositions f of removed positions fnofremovedpositions is existing isexisting position position f job presenter fjobpresenter create highlighted position createhighlightedposition offset length highlighting f added positions faddedpositions add position retain positions completely contained range param offset range offset param length range length retain positions retainpositions offset length todo binary search f removed positions fremovedpositions size highlighted position highlightedposition position highlighted position highlightedposition f removed positions fremovedpositions position position is contained iscontained offset length f removed positions fremovedpositions f of removed positions fnofremovedpositions position collector position collector positioncollector f collector fcollector position collector positioncollector java editor semantic highlighting reconciler installed java editor javaeditor f editor feditor source viewer semantic highlighting reconciler installed i source viewer isourceviewer f source viewer fsourceviewer semantic highlighting presenter semantic highlighting presenter semantichighlightingpresenter f presenter fpresenter semantic highlightings semantic highlighting semantichighlighting f semantic highlightings fsemantichighlightings highlightings highlighting f highlightings fhighlightings background job highlighted positions list position f added positions faddedpositions array list arraylist background job removed highlighted positions list position f removed positions fremovedpositions array list arraylist number removed positions f of removed positions fnofremovedpositions background job job f job fjob background job lock object f job lock fjoblock object reconcile operation lock object f reconcile lock freconcilelock object code code thread executing code reconcile code code code f is reconciling fisreconciling semantic highlighting presenter cache background thread valid link reconciled compilation unit compilationunit i progress monitor iprogressmonitor semantic highlighting presenter semantichighlightingpresenter f job presenter fjobpresenter semantic highlightings cache background thread valid link reconciled compilation unit compilationunit i progress monitor iprogressmonitor semantic highlighting semantichighlighting f job semantic highlightings fjobsemantichighlightings highlightings cache background thread valid link reconciled compilation unit compilationunit i progress monitor iprogressmonitor highlighting f job highlightings fjobhighlightings xxx hack performance reasons loop f job semantic highlightings fjobsemantichighlightings call consumes highlighting f job deprecated member highlighting fjobdeprecatedmemberhighlighting org eclipse jdt internal text java i java reconciling listener ijavareconcilinglistener about to be reconcile d abouttobereconciled override about to be reconcile d abouttobereconciled org eclipse jdt internal text java i java reconciling listener ijavareconcilinglistener reconciled compilation unit compilationunit i progress monitor iprogressmonitor override reconciled compilation unit compilationunit ast for ced forced i progress monitor iprogressmonitor progress monitor progressmonitor ensure thread reconciling time f reconcile lock freconcilelock f is reconciling fisreconciling f is reconciling fisreconciling f job presenter fjobpresenter f presenter fpresenter f job semantic highlightings fjobsemantichighlightings f semantic highlightings fsemantichighlightings f job highlightings fjobhighlightings f highlightings fhighlightings f job presenter fjobpresenter f job semantic highlightings fjobsemantichighlightings f job highlightings fjobhighlightings f job presenter fjobpresenter set canceled setcanceled progress monitor progressmonitor is canceled iscanceled ast f job presenter fjobpresenter is canceled iscanceled ast node astnode subtrees get affected sub trees getaffectedsubtrees ast subtrees length start reconciling positions startreconcilingpositions f job presenter fjobpresenter is canceled iscanceled f job deprecated member highlighting fjobdeprecatedmemberhighlighting f job semantic highlightings fjobsemantichighlightings length semantic highlighting semantichighlighting semantic highlighting semantichighlighting f job semantic highlightings fjobsemantichighlightings f job highlightings fjobhighlightings is enabled isenabled semantic highlighting semantichighlighting deprecated member highlighting deprecatedmemberhighlighting f job deprecated member highlighting fjobdeprecatedmemberhighlighting f job highlightings fjobhighlightings reconcile positions reconcilepositions subtrees text presentation textpresentation text presentation textpresentation f job presenter fjobpresenter is canceled iscanceled text presentation textpresentation f job presenter fjobpresenter create presentation createpresentation f added positions faddedpositions f removed positions fremovedpositions f job presenter fjobpresenter is canceled iscanceled update presentation updatepresentation text presentation textpresentation f added positions faddedpositions f removed positions fremovedpositions stop reconciling positions stopreconcilingpositions f job presenter fjobpresenter f job semantic highlightings fjobsemantichighlightings f job highlightings fjobhighlightings f job deprecated member highlighting fjobdeprecatedmemberhighlighting f reconcile lock freconcilelock f is reconciling fisreconciling param node root node array subtrees document ast node astnode get affected sub trees getaffectedsubtrees ast node astnode node todo nodes document require anchor concept distant effects account ast node astnode node start reconciling positions start reconciling positions startreconcilingpositions f job presenter fjobpresenter add all positions addallpositions f removed positions fremovedpositions f of removed positions fnofremovedpositions f removed positions fremovedpositions size reconcile positions based ast subtrees param subtrees ast subtrees reconcile positions reconcilepositions ast node astnode subtrees subtrees length subtrees accept f collector fcollector list position old positions oldpositions f removed positions fremovedpositions list position new positions newpositions array list arraylist f of removed positions fnofremovedpositions old positions oldpositions size position current old positions oldpositions current new positions newpositions add current f removed positions fremovedpositions new positions newpositions update presentation param text presentation textpresentation text presentation param added positions addedpositions positions param removed positions removedpositions removed positions update presentation updatepresentation text presentation textpresentation text presentation textpresentation list position added positions addedpositions list position removed positions removedpositions runnable runnable f job presenter fjobpresenter create update runnable createupdaterunnable text presentation textpresentation added positions addedpositions removed positions removedpositions runnable java editor javaeditor editor f editor feditor editor i workbench part site iworkbenchpartsite site editor get site getsite site shell shell site get shell getshell shell shell is disposed isdisposed display display shell get display getdisplay display display is disposed isdisposed display async exec asyncexec runnable reconciling positions stop reconciling positions stopreconcilingpositions f removed positions fremovedpositions clear f of removed positions fnofremovedpositions f added positions faddedpositions clear install reconciler editor presenter highlightings param editor editor param source viewer sourceviewer source viewer param presenter semantic highlighting presenter param semantic highlightings semantichighlightings semantic highlightings param highlightings highlightings install java editor javaeditor editor i source viewer isourceviewer source viewer sourceviewer semantic highlighting presenter semantichighlightingpresenter presenter semantic highlighting semantichighlighting semantic highlightings semantichighlightings highlighting highlightings f presenter fpresenter presenter f semantic highlightings fsemantichighlightings semantic highlightings semantichighlightings f highlightings fhighlightings highlightings f editor feditor editor f source viewer fsourceviewer source viewer sourceviewer f editor feditor compilation unit editor compilationuniteditor compilation unit editor compilationuniteditor f editor feditor add reconcile listener addreconcilelistener f editor feditor f source viewer fsourceviewer add text input listener addtextinputlistener schedule job schedulejob uninstall reconciler editor uninstall f presenter fpresenter f presenter fpresenter set canceled setcanceled f editor feditor f editor feditor compilation unit editor compilationuniteditor compilation unit editor compilationuniteditor f editor feditor remove reconcile listener removereconcilelistener f source viewer fsourceviewer remove text input listener removetextinputlistener f editor feditor f source viewer fsourceviewer f semantic highlightings fsemantichighlightings f highlightings fhighlightings f presenter fpresenter schedule background job retrieving ast reconciling semantic highlighting model schedule job schedulejob i type root ityperoot element f editor feditor get input java element getinputjavaelement f job lock fjoblock job old job oldjob f job fjob f job fjob f job fjob cancel f job fjob element f job fjob job java editor messages javaeditormessages semantic highlighting semantichighlighting job override i status istatus i progress monitor iprogressmonitor monitor old job oldjob old job oldjob join interrupted exception interruptedexception java plugin javaplugin log status cancel status monitor is canceled iscanceled status cancel status compilation unit compilationunit ast sharedastprovider getast element sharedastprovider wait monitor reconciled ast monitor f job lock fjoblock job f job fjob f job fjob status status f job fjob set system setsystem f job fjob set priority setpriority job decorate f job fjob schedule org eclipse jface text i text input listener itextinputlistener input document about to be changed inputdocumentabouttobechanged org eclipse jface text i document idocument org eclipse jface text i document idocument override input document about to be changed inputdocumentabouttobechanged i document idocument old input oldinput i document idocument new input newinput f job lock fjoblock f job fjob f job fjob cancel f job fjob org eclipse jface text i text input listener itextinputlistener input document changed inputdocumentchanged org eclipse jface text i document idocument org eclipse jface text i document idocument override input document changed inputdocumentchanged i document idocument old input oldinput i document idocument new input newinput new input newinput schedule job schedulejob ref res hes refreshes highlighting refresh schedule job schedulejob