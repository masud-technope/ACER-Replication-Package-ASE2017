copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt tests quickfix java io exception ioexception java util array list arraylist java util collection java util iterator java util list org eclipse jdt test plugin testplugin java project helper javaprojecthelper org eclipse jdt test plugin testplugin string asserts stringasserts org eclipse core runtime core exception coreexception org eclipse core runtime i status istatus org eclipse core resources i file ifile org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text i document idocument org eclipse jface text i region iregion org eclipse jface text contentassist i completion proposal icompletionproposal org eclipse ltk core refactoring text file change textfilechange org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i problem requestor iproblemrequestor org eclipse jdt core i type itype org eclipse jdt core working copy owner workingcopyowner org eclipse jdt core compiler i problem iproblem org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt tests core project test setup projecttestsetup org eclipse jdt text java i invocation context iinvocationcontext org eclipse jdt text java i java completion proposal ijavacompletionproposal org eclipse jdt text java i problem location iproblemlocation org eclipse jdt text java correction cu correction proposal cucorrectionproposal org eclipse jdt text java correction i command access icommandaccess org eclipse jdt internal text correction ast res olving astresolving org eclipse jdt internal text correction assist context assistcontext org eclipse jdt internal text correction getter setter correction sub processor gettersettercorrectionsubprocessor self encapsulate field proposal selfencapsulatefieldproposal org eclipse jdt internal text correction java correction processor javacorrectionprocessor org eclipse jdt internal text correction problem location problemlocation org eclipse jdt internal text correction reorg corrections sub processor reorgcorrectionssubprocessor org eclipse jdt internal text correction proposals linked names assist proposal linkednamesassistproposal org eclipse jdt internal text correction proposals new using wizard proposal newcuusingwizardproposal org eclipse jdt internal text correction proposals rename refactoring proposal renamerefactoringproposal org eclipse jdt internal text template contentassist surround with template proposal surroundwithtemplateproposal junit framework test junit framework test case testcase junit framework test suite testsuite quick fix test quickfixtest test case testcase test suite test suite testsuite suite test suite testsuite quick fix test quickfixtest get name getname suite add test addtest quick fix test quickfixtest suite suite add test addtest serial version quick fix test serialversionquickfixtest suite suite add test addtest utilities test utilitiestest suite suite add test addtest unresolved types quick fix test unresolvedtypesquickfixtest suite suite add test addtest unresolved variables quick fix test unresolvedvariablesquickfixtest suite suite add test addtest unresolved methods quick fix test unresolvedmethodsquickfixtest suite suite add test addtest unresolved methods quick fix test unresolvedmethodsquickfixtest suite suite add test addtest return type quick fix test returntypequickfixtest suite suite add test addtest local corrections quick fix test localcorrectionsquickfixtest suite suite add test addtest local corrections quick fix test localcorrectionsquickfixtest suite suite add test addtest local corrections quick fix test localcorrectionsquickfixtest suite suite add test addtest type mismatch quick fix tests typemismatchquickfixtests suite suite add test addtest reorg quick fix test reorgquickfixtest suite suite add test addtest modifier corrections quick fix test modifiercorrectionsquickfixtest suite suite add test addtest modifier corrections quick fix test modifiercorrectionsquickfixtest suite suite add test addtest getter setter quick fix test gettersetterquickfixtest suite suite add test addtest assist quick fix test assistquickfixtest suite suite add test addtest assist quick fix test assistquickfixtest suite suite add test addtest assist quick fix test assistquickfixtest suite suite add test addtest change non static to static test changenonstatictostatictest suite suite add test addtest marker resolution test markerresolutiontest suite suite add test addtest javadoc quick fix test javadocquickfixtest suite suite add test addtest convert for loop quick fix test convertforloopquickfixtest suite suite add test addtest convert iterable loop quick fix test convertiterableloopquickfixtest suite suite add test addtest advanced quick assist test advancedquickassisttest suite suite add test addtest advanced quick assist test advancedquickassisttest suite suite add test addtest advanced quick assist test advancedquickassisttest suite suite add test addtest clean up test case cleanuptestcase suite suite add test addtest quick fix enablement test quickfixenablementtest suite suite add test addtest surround with template test surroundwithtemplatetest suite suite add test addtest type parameter mismatch test typeparametermismatchtest suite suite add test addtest properties file quick assist test propertiesfilequickassisttest suite suite add test addtest null annotations quick fix test nullannotationsquickfixtest suite suite add test addtest null annotations quick fix test nullannotationsquickfixtest mix suite suite add test addtest annotate assist test annotateassisttest suite suite add test addtest annotate assist test annotateassisttest suite project test setup projecttestsetup suite quick fix test quickfixtest string assert correct labels assertcorrectlabels list i completion proposal icompletionproposal proposals proposals size i completion proposal icompletionproposal proposal proposals string proposal get display string getdisplaystring length char at charat index of indexof index of indexof assert true asserttrue wrong proposal label proposal get image getimage assert true asserttrue wrong proposal image assert correct context assertcorrectcontext i invocation context iinvocationcontext context problem location problemlocation problem problem get problem id getproblemid java correction processor javacorrectionprocessor has corrections hascorrections context get compilation unit getcompilationunit problem get problem id getproblemid problem get marker type getmarkertype assert true asserttrue problem type marked light bulb problem assert number of assertnumberof string n problems nproblems n problems expected nproblemsexpected assert true asserttrue wrong number n problems nproblems expected n problems expected nproblemsexpected n problems nproblems n problems expected nproblemsexpected assert equal string assertequalstring string actual string expected string asserts stringasserts assert equal string assertequalstring actual expected assert equal string ignore delim assertequalstringignoredelim string actual string expected io exception ioexception string asserts stringasserts assert equal string ignore delim assertequalstringignoredelim actual expected assert equal strings ignore order assertequalstringsignoreorder string actuals string expecteds string asserts stringasserts assert equal strings ignore order assertequalstringsignoreorder actuals expecteds assert equal strings ignore order assertequalstringsignoreorder collection string actuals collection string expecteds string actuals to array toarray string actuals size string exp expecteds to array toarray string actuals size string asserts stringasserts assert equal strings ignore order assertequalstringsignoreorder exp assert expected exist in proposals assertexpectedexistinproposals list i java completion proposal ijavacompletionproposal actual proposals actualproposals string expecteds core exception coreexception bad location exception badlocationexception string asserts stringasserts assert expected exist in proposals assertexpectedexistinproposals get preview contents getpreviewcontents actual proposals actualproposals expecteds assert command id does not exist assertcommandiddoesnotexist list i completion proposal icompletionproposal actual proposals actualproposals string command id commandid assert true asserttrue find proposal by command id findproposalbycommandid command id commandid actual proposals actualproposals assert proposal does not exist assertproposaldoesnotexist list i completion proposal icompletionproposal actual proposals actualproposals string proposal name proposalname assert true asserttrue find proposal by name findproposalbyname proposal name proposalname actual proposals actualproposals assert proposal exists assertproposalexists list i completion proposal icompletionproposal actual proposals actualproposals string proposal name proposalname assert true asserttrue find proposal by name findproposalbyname proposal name proposalname actual proposals actualproposals type declaration typedeclaration find type declaration findtypedeclaration compilation unit compilationunit ast root astroot string simple type name simpletypename list abstract type declaration abstracttypedeclaration types ast root astroot types types size type declaration typedeclaration elem type declaration typedeclaration types simple type name simpletypename equals elem get name getname get identifier getidentifier elem method declaration methoddeclaration find method declaration findmethoddeclaration type declaration typedeclaration type decl typedecl string method name methodname method declaration methoddeclaration methods type decl typedecl get methods getmethods methods length method name methodname equals methods get name getname get identifier getidentifier methods variable declaration fragment variabledeclarationfragment find field declaration findfielddeclaration type declaration typedeclaration type decl typedecl string field name fieldname field declaration fielddeclaration fields type decl typedecl get fields getfields fields length list variable declaration fragment variabledeclarationfragment list fields fragments list size variable declaration fragment variabledeclarationfragment fragment list field name fieldname equals fragment get name getname get identifier getidentifier fragment assist context assistcontext get correction context getcorrectioncontext i compilation unit icompilationunit offset length assist context assistcontext context assist context assistcontext offset length context array list arraylist i java completion proposal ijavacompletionproposal collect corrections collectcorrections i compilation unit icompilationunit compilation unit compilationunit ast root astroot core exception coreexception collect corrections collectcorrections ast root astroot bad design collects correct ions corrections problem param param ast root astroot param n problems nproblems core exception coreexception array list arraylist i java completion proposal ijavacompletionproposal collect corrections collectcorrections i compilation unit icompilationunit compilation unit compilationunit ast root astroot n problems nproblems core exception coreexception collect corrections collectcorrections ast root astroot n problems nproblems array list arraylist i java completion proposal ijavacompletionproposal collect corrections collectcorrections i compilation unit icompilationunit compilation unit compilationunit ast root astroot n problems nproblems problem core exception coreexception collect corrections collectcorrections ast root astroot n problems nproblems problem bad design collects correct ions corrections problem param param ast root astroot param n problems nproblems param context core exception coreexception array list arraylist i java completion proposal ijavacompletionproposal collect corrections collectcorrections i compilation unit icompilationunit compilation unit compilationunit ast root astroot n problems nproblems assist context assistcontext context core exception coreexception collect corrections collectcorrections ast root astroot n problems nproblems context array list arraylist i java completion proposal ijavacompletionproposal collect corrections collectcorrections i compilation unit icompilationunit compilation unit compilationunit ast root astroot n problems nproblems problem assist context assistcontext context core exception coreexception i problem iproblem problems ast root astroot get problems getproblems assert number of problems assertnumberofproblems n problems nproblems problems collect corrections collectcorrections problems problem context array list arraylist i completion proposal icompletionproposal collect all corrections collectallcorrections i compilation unit icompilationunit compilation unit compilationunit ast root astroot n problems nproblems core exception coreexception i problem iproblem problems ast root astroot get problems getproblems assert number of problems assertnumberofproblems n problems nproblems problems array list arraylist i completion proposal icompletionproposal correct ions corrections array list arraylist n problems nproblems correct ions corrections add all addall collect corrections collectcorrections problems correct ions corrections assert number of problems assertnumberofproblems n problems nproblems i problem iproblem problems problems length n problems nproblems string buffer stringbuffer buf string buffer stringbuffer wrong number problems buf append problems length append expected append n problems nproblems append problems length buf append problems buf append append problems get source start getsourcestart append append problems get source end getsourceend append buf append assert true asserttrue buf to string tostring bad design collects correct ions corrections problem param param n problems nproblems core exception coreexception array list arraylist i java completion proposal ijavacompletionproposal collect corrections collectcorrections i compilation unit icompilationunit n problems nproblems core exception coreexception array list arraylist i problem iproblem problems list problemslist array list arraylist i problem requestor iproblemrequestor requestor i problem requestor iproblemrequestor override accept problem acceptproblem i problem iproblem problem problems list problemslist add problem override begin reporting beginreporting problems list problemslist clear override end reporting endreporting override is active isactive working copy owner workingcopyowner working copy owner workingcopyowner working copy owner workingcopyowner override i problem requestor iproblemrequestor get problem requestor getproblemrequestor i compilation unit icompilationunit working copy workingcopy requestor i compilation unit icompilationunit get working copy getworkingcopy working copy owner workingcopyowner reconcile i compilation unit icompilationunit ast get owner getowner discard working copy discardworkingcopy i problem iproblem problems problems list problemslist to array toarray i problem iproblem problems list problemslist size assert number of problems assertnumberofproblems n problems nproblems problems collect corrections collectcorrections problems array list arraylist i java completion proposal ijavacompletionproposal collect corrections collectcorrections i compilation unit icompilationunit i problem iproblem curr i invocation context iinvocationcontext context core exception coreexception offset curr get source start getsourcestart length curr get source end getsourceend offset context context assist context assistcontext offset length problem location problemlocation problem problem location problemlocation curr array list arraylist i java completion proposal ijavacompletionproposal proposals collect corrections collectcorrections context problem proposals is empty isempty assert correct context assertcorrectcontext context problem proposals array list arraylist i java completion proposal ijavacompletionproposal collect corrections collectcorrections i invocation context iinvocationcontext context i problem location iproblemlocation problem core exception coreexception array list arraylist i java completion proposal ijavacompletionproposal proposals array list arraylist i status istatus status java correction processor javacorrectionprocessor collect corrections collectcorrections context i problem location iproblemlocation problem proposals assert status ok assertstatusok status proposals assert status ok assertstatusok i status istatus status core exception coreexception status isok find status exception status get exception getexception i status istatus children status get children getchildren children length i status istatus child children child get exception getexception core exception coreexception child array list arraylist i java completion proposal ijavacompletionproposal collect assists collectassists i invocation context iinvocationcontext context filtered types filteredtypes core exception coreexception array list arraylist i java completion proposal ijavacompletionproposal proposals array list arraylist i status istatus status java correction processor javacorrectionprocessor collect assists collectassists context i problem location iproblemlocation proposals assert status ok assertstatusok status proposals is empty isempty assert true asserttrue marked assist java correction processor javacorrectionprocessor has assists hasassists context filtered types filteredtypes filtered types filteredtypes length iterator i java completion proposal ijavacompletionproposal iter proposals iterator iter has next hasnext is filtered isfiltered iter filtered types filteredtypes iter remove proposals is filtered isfiltered object curr filtered types filteredtypes filtered types filteredtypes length filtered types filteredtypes is instance isinstance curr array list arraylist i java completion proposal ijavacompletionproposal collect assists collectassists i invocation context iinvocationcontext context include linked rename includelinkedrename core exception coreexception filtered types filteredtypes include linked rename includelinkedrename linked names assist proposal linkednamesassistproposal rename refactoring proposal renamerefactoringproposal collect assists collectassists context filtered types filteredtypes compilation unit compilationunit getastroot i compilation unit icompilationunit ast res olving astresolving create quick fix t createquickfixast add preview and expected addpreviewandexpected list i java completion proposal ijavacompletionproposal proposals string buffer stringbuffer expected array list arraylist string expecteds array list arraylist string prev iews previews core exception coreexception cu correction proposal cucorrectionproposal proposal cu correction proposal cucorrectionproposal proposals expecteds size prev iews previews add get preview content getpreviewcontent proposal expecteds add expected to string tostring string get preview contents getpreviewcontents list i java completion proposal ijavacompletionproposal proposals core exception coreexception bad location exception badlocationexception string res string proposals size proposals size object curr proposals curr reorg corrections sub processor reorgcorrectionssubprocessor classpath fix correction proposal classpathfixcorrectionproposal ignore curr cu correction proposal cucorrectionproposal res get preview content getpreviewcontent cu correction proposal cucorrectionproposal curr curr new using wizard proposal newcuusingwizardproposal res get wizard preview content getwizardpreviewcontent new using wizard proposal newcuusingwizardproposal curr curr surround with template proposal surroundwithtemplateproposal res get template preview content gettemplatepreviewcontent surround with template proposal surroundwithtemplateproposal curr curr self encapsulate field proposal selfencapsulatefieldproposal res getsefpreviewcontent self encapsulate field proposal selfencapsulatefieldproposal curr res string getsefpreviewcontent self encapsulate field proposal selfencapsulatefieldproposal sefp core exception coreexception i compilation unit icompilationunit compilation unit compilationunit sefp get field getfield get compilation unit getcompilationunit text file change textfilechange change sefp get change getchange i file ifile compilation unit compilationunit get resource getresource change change get preview content getpreviewcontent string get template preview content gettemplatepreviewcontent surround with template proposal surroundwithtemplateproposal proposal proposal get preview content getpreviewcontent string get preview content getpreviewcontent cu correction proposal cucorrectionproposal proposal core exception coreexception proposal get preview content getpreviewcontent string get wizard preview content getwizardpreviewcontent new using wizard proposal newcuusingwizardproposal newcuwizard core exception coreexception bad location exception badlocationexception newcuwizard set show dialog setshowdialog newcuwizard apply i type itype created type createdtype newcuwizard get created type getcreatedtype assert true asserttrue created created type createdtype exists string preview created type createdtype get compilation unit getcompilationunit get source getsource i java element ijavaelement parent created type createdtype get parent getparent parent i type itype created type createdtype delete java project helper javaprojecthelper delete parent string buffer stringbuffer res string buffer stringbuffer i document idocument doc document preview n lines nlines doc get number of lines getnumberoflines n lines nlines i region iregion line information lineinformation doc get line information getlineinformation res append doc line information lineinformation get offset getoffset line information lineinformation get length getlength n lines nlines res append res to string tostring assert number of proposals assertnumberofproposals list i completion proposal icompletionproposal proposals expected proposals expectedproposals proposals size expected proposals expectedproposals string buffer stringbuffer buf string buffer stringbuffer buf append wrong number proposals append proposals size append expected append expected proposals expectedproposals append proposals size i completion proposal icompletionproposal curr proposals buf append append curr get display string getdisplaystring append curr cu correction proposal cucorrectionproposal append source appendsource cu correction proposal cucorrectionproposal curr buf assert true asserttrue buf to string tostring i command access icommandaccess find proposal by command id findproposalbycommandid string command id commandid list i completion proposal icompletionproposal proposals proposals size object curr proposals curr i command access icommandaccess command id commandid equals i command access icommandaccess curr get command id getcommandid i command access icommandaccess curr i completion proposal icompletionproposal find proposal by name findproposalbyname string list i completion proposal icompletionproposal proposals proposals size object curr proposals curr i completion proposal icompletionproposal equals i completion proposal icompletionproposal curr get display string getdisplaystring i completion proposal icompletionproposal curr append source appendsource cu correction proposal cucorrectionproposal proposal string buffer stringbuffer buf buf append proposal get preview content getpreviewcontent core exception coreexception assert no errors assertnoerrors i invocation context iinvocationcontext context i problem iproblem problems context getastroot get problems getproblems problems length problems is error iserror assert true asserttrue source error problems get message getmessage string get prev iews in buf append getpreviewsinbufappend i compilation unit icompilationunit core exception coreexception bad location exception badlocationexception compilation unit compilationunit ast root astroot getastroot list i java completion proposal ijavacompletionproposal proposals collect corrections collectcorrections ast root astroot proposals is empty isempty get prev iews in buf append getpreviewsinbufappend proposals string get prev iews in buf append getpreviewsinbufappend i compilation unit icompilationunit list i java completion proposal ijavacompletionproposal proposals core exception coreexception bad location exception badlocationexception string buffer stringbuffer buf string buffer stringbuffer string preview contents previewcontents get preview contents getpreviewcontents proposals buf append test x testx exception buf append i package fragment ipackagefragment pack f source folder fsourcefolder create package fragment createpackagefragment append get parent getparent get element name getelementname append buf append string buffer stringbuffer buf string buffer stringbuffer wrap in buf append wrapinbufappend get buffer getbuffer get contents getcontents buf buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit append get element name getelementname append buf to string tostring buf append compilation unit compilationunit ast root astroot getastroot buf append array list arraylist i java completion proposal ijavacompletionproposal proposals collect corrections collectcorrections ast root astroot buf append assert correct labels assertcorrectlabels proposals buf append assert number of proposals assertnumberofproposals proposals append preview contents previewcontents length append buf append string expected string append preview contents previewcontents length append preview contents previewcontents length string curr preview contents previewcontents curr buf append buf string buffer stringbuffer wrap in buf append wrapinbufappend curr buf buf append expected buf to string tostring buf append assert expected exist in proposals assertexpectedexistinproposals proposals expected buf append buf to string tostring wrap in buf append wrapinbufappend string curr string buffer stringbuffer buf buf append buf append curr length curr char at charat buf append buf append buf append ignore spaces buf append spaces buf append append buf append buf length buf char at charat buf length buf append