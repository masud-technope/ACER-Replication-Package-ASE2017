copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann stephan berlin refactoring pull destination type creates bogus nested type https bugs eclipse org org eclipse jdt internal corext refactoring structure constraints java util array list arraylist java util collection java util collections java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime sub progress monitor subprogressmonitor org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits text edit textedit org eclipse text edits text edit group texteditgroup org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text i document idocument org eclipse ltk core refactoring group category groupcategory org eclipse ltk core refactoring group category set groupcategoryset org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring participants refactoring processor refactoringprocessor org eclipse jdt core binding key bindingkey org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i field ifield org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i type itype org eclipse jdt core i type parameter itypeparameter org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core working copy owner workingcopyowner org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom ast requestor astrequestor org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom array type arraytype org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom cast expression castexpression org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom node finder nodefinder org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom type org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom type parameter typeparameter org eclipse jdt core dom variable declaration variabledeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt core formatter code formatter codeformatter org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search search match searchmatch org eclipse jdt core search search pattern searchpattern org eclipse jdt internal corext code manipulation codemanipulation code generation settings codegenerationsettings org eclipse jdt internal corext code manipulation codemanipulation context sensitive import rewrite context contextsensitiveimportrewritecontext org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext refactoring jdt refactoring descriptor comment jdtrefactoringdescriptorcomment org eclipse jdt internal corext refactoring refactoring core messages refactoringcoremessages org eclipse jdt internal corext refactoring refactoring scope factory refactoringscopefactory org eclipse jdt internal corext refactoring refactoring search engine refactoringsearchengine org eclipse jdt internal corext refactoring search result group searchresultgroup org eclipse jdt internal corext refactoring structure ast node search util astnodesearchutil org eclipse jdt internal corext refactoring structure compilation unit rewrite compilationunitrewrite org eclipse jdt internal corext refactoring structure import rewrite util importrewriteutil org eclipse jdt internal corext refactoring type constraints typeconstraints compilation unit range compilationunitrange org eclipse jdt internal corext refactoring type constraints typeconstraints types t type ttype org eclipse jdt internal corext refactoring type constraints typeconstraints types type environment typeenvironment org eclipse jdt internal corext refactoring type constraints typeconstraints cast variable castvariable org eclipse jdt internal corext refactoring type constraints typeconstraints i type constraint variable itypeconstraintvariable org eclipse jdt internal corext refactoring util refactoringastparser org eclipse jdt internal corext refactoring util text edit based change manager texteditbasedchangemanager org eclipse jdt internal corext util code formatter util codeformatterutil org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util jdt flags jdtflags org eclipse jdt internal corext util search utils searchutils org eclipse jdt code generation codegeneration org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor ast provider astprovider partial implementation refactoring processor solving supertype constraint models super type refactoring processor supertyperefactoringprocessor refactoring processor refactoringprocessor nls string attribute nls string attribute replace replace type group category group category set groupcategoryset type group category set groupcategoryset nls group category groupcategory nls org eclipse jdt internal corext super type supertype refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor category refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor category description number compilation units parse size batch returns ast node type param rewrite compilation unit rewrite param type type param node node ast node ast node astnode create corresponding node createcorrespondingnode compilation unit rewrite compilationunitrewrite rewrite t type ttype type ast node astnode node import rewrite importrewrite import rewrite importrewrite rewrite get import rewrite getimportrewrite import rewrite context importrewritecontext context context sensitive import rewrite context contextsensitiveimportrewritecontext node import rewrite importrewrite import rewrite importrewrite add import from signature addimportfromsignature binding key bindingkey type get binding key getbindingkey to signature tosignature rewrite getast context type occurrences rewritten f instance of finstanceof obsolete casts element type code i compilation unit icompilationunit collection cast variable castvariable code map i compilation unit icompilationunit collection cast variable castvariable f obsolete c asts fobsoletecasts working copy owner working copy owner workingcopyowner f owner fowner working copy owner workingcopyowner occurrences type replaced supertype f replace freplace code generation settings code code code generation settings codegenerationsettings f settings fsettings bindings i binding ibinding f static bindings fstaticbindings hash set hashset type bindings i type binding itypebinding f type bindings ftypebindings hash set hashset type occurrences element type code i compilation unit icompilationunit collection i declared constraint variable ideclaredconstraintvariable code map i compilation unit icompilationunit collection i type constraint variable itypeconstraintvariable f type occurrences ftypeoccurrences creates supertype refactoring processor param settings code generation settings code code super type refactoring processor supertyperefactoringprocessor code generation settings codegenerationsettings settings f settings fsettings settings adds refactoring settings comment param comment java refactoring descriptor comment param add use supertype addusesupertype code code add supertype setting code code add super type settings addsupertypesettings jdt refactoring descriptor comment jdtrefactoringdescriptorcomment comment add use supertype addusesupertype is not null isnotnull comment f replace freplace add use supertype addusesupertype comment add setting addsetting refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor user supertype setting f instance of finstanceof comment add setting addsetting refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor setting creates type constraint solver solve model param model model create solver created type constraint solver super type constraints solver supertypeconstraintssolver create contraint solver createcontraintsolver super type constraints model supertypeconstraintsmodel model creates declarations supertype members param source rewrite sourcerewrite source compilation unit rewrite param target rewrite targetrewrite target rewrite param target declaration targetdeclaration target type declaration core exception coreexception buffer retrieved create member declarations creatememberdeclarations compilation unit rewrite compilationunitrewrite source rewrite sourcerewrite ast rewrite astrewrite target rewrite targetrewrite abstract type declaration abstracttypedeclaration target declaration targetdeclaration core exception coreexception creates declaration supertype excluding comments declaration param source rewrite sourcerewrite source compilation unit rewrite param sub type subtype subtype param super name supername supertype param source declaration sourcedeclaration type declaration source type param buffer string buffer declaration param is interface isinterface code code type declaration code code param status refactoring status param monitor progress monitor core exception coreexception error occurs create type declaration createtypedeclaration compilation unit rewrite compilationunitrewrite source rewrite sourcerewrite i type itype sub type subtype string super name supername abstract type declaration abstracttypedeclaration source declaration sourcedeclaration string buffer stringbuffer buffer is interface isinterface refactoring status refactoringstatus status i progress monitor iprogressmonitor monitor core exception coreexception is not null isnotnull source rewrite sourcerewrite is not null isnotnull sub type subtype is not null isnotnull super name supername is not null isnotnull source declaration sourcedeclaration is not null isnotnull buffer is not null isnotnull status is not null isnotnull monitor nls monitor begin task begintask monitor set task name settaskname refactoring core messages refactoringcoremessages extract interface processor extractinterfaceprocessor creating string delimiter stub utility stubutility get line delimiter used getlinedelimiterused sub type subtype get java project getjavaproject jdt flags jdtflags is public ispublic sub type subtype buffer append jdt flags jdtflags visibility string nls buffer append nls is interface isinterface nls buffer append nls nls buffer append nls buffer append super name supername nls buffer append buffer append delimiter buffer append delimiter buffer append i document idocument document document buffer to string tostring ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level parser set source setsource document to char array tochararray compilation unit compilationunit unit compilation unit compilationunit parser createast sub progress monitor subprogressmonitor monitor ast rewrite astrewrite target rewrite targetrewrite ast rewrite astrewrite create unit getast abstract type declaration abstracttypedeclaration target declaration targetdeclaration abstract type declaration abstracttypedeclaration unit types create type parameters createtypeparameters target rewrite targetrewrite sub type subtype source declaration sourcedeclaration target declaration targetdeclaration create member declarations creatememberdeclarations source rewrite sourcerewrite target rewrite targetrewrite target declaration targetdeclaration text edit textedit edit target rewrite targetrewrite rewriteast document sub type subtype get java project getjavaproject get options getoptions edit apply document text edit textedit update regions malformed tree exception malformedtreeexception exception java plugin javaplugin log exception bad location exception badlocationexception exception java plugin javaplugin log exception buffer set length setlength buffer append document monitor creates imports extracted supertype param unit working copy supertype param monitor progress monitor generated declaration core exception coreexception imports generated string create type imports createtypeimports i compilation unit icompilationunit unit i progress monitor iprogressmonitor monitor core exception coreexception is not null isnotnull unit is not null isnotnull monitor nls monitor begin task begintask monitor set task name settaskname refactoring core messages refactoringcoremessages extract interface processor extractinterfaceprocessor creating import rewrite importrewrite rewrite stub utility stubutility create import rewrite createimportrewrite unit i type binding itypebinding type iterator i type binding itypebinding iterator f type bindings ftypebindings iterator iterator has next hasnext type iterator type is type variable istypevariable i type binding itypebinding bounds type get type bounds gettypebounds bounds length rewrite add import addimport bounds rewrite add import addimport type i binding ibinding binding iterator i binding ibinding iterator f static bindings fstaticbindings iterator iterator has next hasnext binding iterator rewrite add static import addstaticimport binding i document idocument document document rewrite rewrite imports rewriteimports sub progress monitor subprogressmonitor monitor apply document malformed tree exception malformedtreeexception exception java plugin javaplugin log exception bad location exception badlocationexception exception java plugin javaplugin log exception core exception coreexception exception java plugin javaplugin log exception f type bindings ftypebindings clear f static bindings fstaticbindings clear document monitor creates type parameters supertype param target rewrite targetrewrite target compilation unit rewrite param sub type subtype subtype param source declaration sourcedeclaration type declaration source type param target declaration targetdeclaration type declaration target type create type parameters createtypeparameters ast rewrite astrewrite target rewrite targetrewrite i type itype sub type subtype abstract type declaration abstracttypedeclaration source declaration sourcedeclaration abstract type declaration abstracttypedeclaration target declaration targetdeclaration is not null isnotnull target rewrite targetrewrite is not null isnotnull source declaration sourcedeclaration is not null isnotnull target declaration targetdeclaration source declaration sourcedeclaration type declaration typedeclaration type parameter typeparameter parameter list rewrite listrewrite rewrite target rewrite targetrewrite get list rewrite getlistrewrite target declaration targetdeclaration type declaration typedeclaration type parameters property iterator type parameter typeparameter iterator type declaration typedeclaration source declaration sourcedeclaration type parameters typeparameters iterator iterator has next hasnext parameter iterator rewrite insert last insertlast ast node astnode copy subtree copysubtree target rewrite targetrewrite getast parameter import rewrite util importrewriteutil collect imports collectimports sub type subtype get java project getjavaproject source declaration sourcedeclaration f type bindings ftypebindings f static bindings fstaticbindings creates source compilation unit supertype param copy working copy supertype param sub type subtype subtype param super name supername supertype param source rewrite sourcerewrite source compilation unit rewrite param declaration type declaration param status refactoring status param monitor progress monitor display progress source compilation unit code code core exception coreexception error occurs string create type source createtypesource i compilation unit icompilationunit copy i type itype sub type subtype string super name supername compilation unit rewrite compilationunitrewrite source rewrite sourcerewrite abstract type declaration abstracttypedeclaration declaration refactoring status refactoringstatus status i progress monitor iprogressmonitor monitor core exception coreexception is not null isnotnull copy is not null isnotnull sub type subtype is not null isnotnull super name supername is not null isnotnull source rewrite sourcerewrite is not null isnotnull declaration is not null isnotnull status is not null isnotnull monitor string source nls monitor begin task begintask monitor set task name settaskname refactoring core messages refactoringcoremessages extract interface processor extractinterfaceprocessor creating string delimiter stub utility stubutility get line delimiter used getlinedelimiterused sub type subtype get java project getjavaproject string type comment typecomment string file comment filecomment f settings fsettings create comments createcomments i type parameter itypeparameter parameters sub type subtype get type parameters gettypeparameters string names string parameters length parameters length names parameters get element name getelementname type comment typecomment code generation codegeneration get type comment gettypecomment copy super name supername names delimiter file comment filecomment code generation codegeneration get file comment getfilecomment copy delimiter string buffer stringbuffer buffer string buffer stringbuffer create type declaration createtypedeclaration source rewrite sourcerewrite sub type subtype super name supername declaration buffer status sub progress monitor subprogressmonitor monitor string imports create type imports createtypeimports copy sub progress monitor subprogressmonitor monitor source create type template createtypetemplate copy imports file comment filecomment type comment typecomment buffer to string tostring source sub type subtype get package fragment getpackagefragment is default package isdefaultpackage imports length buffer insert imports nls nls buffer insert sub type subtype get package fragment getpackagefragment get element name getelementname source buffer to string tostring i document idocument document document source text edit textedit edit code formatter util codeformatterutil format code formatter codeformatter compilation unit source delimiter copy get java project getjavaproject get options getoptions edit edit apply document text edit textedit update regions malformed tree exception malformedtreeexception exception java plugin javaplugin log exception status merge refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages extract interface processor extractinterfaceprocessor internal error bad location exception badlocationexception exception java plugin javaplugin log exception status merge refactoring status refactoringstatus create fatal error status createfatalerrorstatus refactoring core messages refactoringcoremessages extract interface processor extractinterfaceprocessor internal error source document monitor source creates type template based code generation settings param unit working copy supertype param imports generated imports declaration param file comment filecomment file comment param comment type comment param content type content template supertype code code core exception coreexception template eval uated evaluated string create type template createtypetemplate i compilation unit icompilationunit unit string imports string file comment filecomment string comment string content core exception coreexception is not null isnotnull unit is not null isnotnull imports is not null isnotnull content i package fragment ipackagefragment fragment i package fragment ipackagefragment unit get parent getparent string buffer stringbuffer buffer string buffer stringbuffer string delimiter stub utility stubutility get line delimiter used getlinedelimiterused unit get java project getjavaproject fragment is default package isdefaultpackage nls nls buffer append fragment get element name getelementname buffer append delimiter buffer append delimiter imports length buffer append imports stub utility stubutility get compilation unit content getcompilationunitcontent unit buffer to string tostring file comment filecomment comment content delimiter override finalize throwable reset working copies resetworkingcopies returns field corresponds variable declaration fragment param fragment variable declaration fragment field java model exception javamodelexception error occurs i field ifield get corresponding field getcorrespondingfield variable declaration fragment variabledeclarationfragment fragment java model exception javamodelexception i binding ibinding binding fragment get name getname resolve binding resolvebinding binding i variable binding ivariablebinding i variable binding ivariablebinding variable i variable binding ivariablebinding binding variable is field isfield i compilation unit icompilationunit unit refactoringastparser get compilation unit getcompilationunit fragment i java element ijavaelement element unit get element at getelementat fragment get start position getstartposition element i field ifield i field ifield element computes compilation units fields referencing type occurrences param units compilation unit map element type code i java project ijavaproject i compilation unit icompilationunit code param nodes ast nodes representing type occurrences java model exception javamodelexception error occurs get field ref erencing compilation units getfieldreferencingcompilationunits map i java project ijavaproject i compilation unit icompilationunit units ast node astnode nodes java model exception javamodelexception ast node astnode node i field ifield field i java project ijavaproject project nodes length node nodes project refactoringastparser get compilation unit getcompilationunit node get java project getjavaproject project list i field ifield fields get ref erencing fields getreferencingfields node project offset offset fields size offset field fields offset i compilation unit icompilationunit units project hash set hashset units project i compilation unit icompilationunit unit field get compilation unit getcompilationunit unit add unit computes compilation units methods referencing type occurrences param units compilation unit map element type code i java project ijavaproject i compilation unit icompilationunit code param nodes ast nodes representing type occurrences java model exception javamodelexception error occurs get method ref erencing compilation units getmethodreferencingcompilationunits map i java project ijavaproject i compilation unit icompilationunit units ast node astnode nodes java model exception javamodelexception ast node astnode node i method imethod method i java project ijavaproject project nodes length node nodes project refactoringastparser get compilation unit getcompilationunit node get java project getjavaproject project method get ref erencing method getreferencingmethod node method i compilation unit icompilationunit units project hash set hashset units project i compilation unit icompilationunit unit method get compilation unit getcompilationunit unit add unit computes compilation units referencing subtype replace param type subtype param monitor progress monitor param status refactoring status referenced compilation units element type code i java project ijavaproject collection search result group searchresultgroup code java model exception javamodelexception error occurs map i java project ijavaproject search result group searchresultgroup get ref erencing compilation units getreferencingcompilationunits i type itype type i progress monitor iprogressmonitor monitor refactoring status refactoringstatus status java model exception javamodelexception nls monitor begin task begintask monitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating refactoring search engine refactoringsearchengine engine refactoring search engine refactoringsearchengine engine set owner setowner f owner fowner engine set filtering setfiltering engine set status setstatus status engine set scope setscope refactoring scope factory refactoringscopefactory create type engine set pattern setpattern search pattern searchpattern create pattern createpattern type i java search constants ijavasearchconstants references search utils searchutils generics agnostic match rule engine search pattern searchpattern sub progress monitor subprogressmonitor monitor suppress warnings suppresswarnings unchecked map i java project ijavaproject search result group searchresultgroup result map i java project ijavaproject search result group searchresultgroup engine get affected projects getaffectedprojects result monitor returns fields reference ast node param node ast node param project java project referencing fields java model exception javamodelexception error occurs list i field ifield get ref erencing fields getreferencingfields ast node astnode node i java project ijavaproject project java model exception javamodelexception list i field ifield result collections empty list emptylist node type body declaration bodydeclaration parent body declaration bodydeclaration ast nodes astnodes get parent getparent node body declaration bodydeclaration parent field declaration fielddeclaration list variable declaration fragment variabledeclarationfragment fragments field declaration fielddeclaration parent fragments result array list arraylist fragments size variable declaration fragment variabledeclarationfragment fragment iterator variable declaration fragment variabledeclarationfragment iterator fragments iterator iterator has next hasnext fragment iterator i field ifield field get corresponding field getcorrespondingfield fragment field result add field result returns method references ast node param node ast node referencing method java model exception javamodelexception error occurs i method imethod get ref erencing method getreferencingmethod ast node astnode node java model exception javamodelexception node type body declaration bodydeclaration parent body declaration bodydeclaration ast nodes astnodes get parent getparent node body declaration bodydeclaration parent method declaration methoddeclaration i method binding imethodbinding binding method declaration methoddeclaration parent resolve binding resolvebinding binding i compilation unit icompilationunit unit refactoringastparser get compilation unit getcompilationunit node i java element ijavaelement element unit get element at getelementat node get start position getstartposition element i method imethod i method imethod element i compilation unit icompilationunit get shared working copy getsharedworkingcopy i compilation unit icompilationunit unit i progress monitor iprogressmonitor monitor java model exception javamodelexception i compilation unit icompilationunit copy unit find working copy findworkingcopy f owner fowner copy copy unit get working copy getworkingcopy f owner fowner monitor copy monitor returns type occurrences rewritten code code rewritten code code is instance of isinstanceof f instance of finstanceof occurrences subtype replaced supertype code code subtype replaced code code is replace isreplace f replace freplace performs pass processing compilation units param creator constraints creator param units compilation unit map element type code i java project ijavaproject i compilation unit icompilationunit code param groups search result group map element type code i compilation unit icompilationunit search result group searchresultgroup code param unit compilation unit subtype param node compilation unit node subtype param monitor progress monitor perform first pass performfirstpass super type constraints creator supertypeconstraintscreator creator map i java project ijavaproject i compilation unit icompilationunit units map i compilation unit icompilationunit search result group searchresultgroup groups i compilation unit icompilationunit unit compilation unit compilationunit node i progress monitor iprogressmonitor monitor nls monitor begin task begintask monitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating node accept creator monitor worked search result group searchresultgroup group groups unit group ast node astnode nodes ast node search util astnodesearchutil get ast nodes getastnodes group get search results getsearchresults node get method ref erencing compilation units getmethodreferencingcompilationunits units nodes monitor worked get field ref erencing compilation units getfieldreferencingcompilationunits units nodes monitor worked java model exception javamodelexception exception java plugin javaplugin log exception monitor performs pass processing compilation units param creator constraints creator param unit compilation unit subtype param node compilation unit node subtype param monitor progress monitor perform second pass performsecondpass super type constraints creator supertypeconstraintscreator creator i compilation unit icompilationunit unit compilation unit compilationunit node i progress monitor iprogressmonitor monitor nls monitor begin task begintask monitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating node accept creator monitor worked monitor resets working copies reset working copies resetworkingcopies i compilation unit icompilationunit units java core javacore get working copies getworkingcopies f owner fowner units length i compilation unit icompilationunit unit units unit discard working copy discardworkingcopy exception exception resets working copies param unit compilation unit discard reset working copies resetworkingcopies i compilation unit icompilationunit unit i compilation unit icompilationunit units java core javacore get working copies getworkingcopies f owner fowner units length units equals unit units discard working copy discardworkingcopy exception exception units get buffer getbuffer set contents setcontents unit get primary getprimary get buffer getbuffer get contents getcontents java model util javamodelutil reconcile units java model exception javamodelexception exception java plugin javaplugin log exception creates text edits replace subtype occurrence supertype param range compilation unit range param estimate type estimate param requestor ast requestor param rewrite compilation unit rewrite param copy compilation unit node working copy ast param replacements variable binding for mal formal parameters replaced param group text edit group rewrite type occurrence rewritetypeoccurrence compilation unit range compilationunitrange range t type ttype estimate ast requestor astrequestor requestor compilation unit rewrite compilationunitrewrite rewrite compilation unit compilationunit copy string replacements text edit group texteditgroup group ast node astnode node i binding ibinding binding compilation unit compilationunit target rewrite get root getroot node node finder nodefinder perform copy range get source range getsourcerange node node ast nodes astnodes get normal ized node getnormalizednode node get parent getparent node variable declaration variabledeclaration binding variable declaration variabledeclaration node resolve binding resolvebinding node target find declaring node finddeclaringnode binding get key getkey node single variable declaration singlevariabledeclaration rewrite type occurrence rewritetypeoccurrence estimate rewrite single variable declaration singlevariabledeclaration node get type gettype group node get parent getparent method declaration methoddeclaration binding variable declaration variabledeclaration node resolve binding resolvebinding binding replacements add binding get key getkey node variable declaration statement variabledeclarationstatement binding variable declaration variabledeclaration variable declaration statement variabledeclarationstatement node fragments resolve binding resolvebinding node target find declaring node finddeclaringnode binding get key getkey node variable declaration fragment variabledeclarationfragment rewrite type occurrence rewritetypeoccurrence estimate rewrite variable declaration statement variabledeclarationstatement variable declaration fragment variabledeclarationfragment node get parent getparent get type gettype group node method declaration methoddeclaration binding method declaration methoddeclaration node resolve binding resolvebinding node target find declaring node finddeclaringnode binding get key getkey node method declaration methoddeclaration rewrite type occurrence rewritetypeoccurrence estimate rewrite method declaration methoddeclaration node get return type getreturntype group node field declaration fielddeclaration binding variable declaration variabledeclaration field declaration fielddeclaration node fragments resolve binding resolvebinding node target find declaring node finddeclaringnode binding get key getkey node variable declaration fragment variabledeclarationfragment node node get parent getparent node field declaration fielddeclaration rewrite type occurrence rewritetypeoccurrence estimate rewrite field declaration fielddeclaration node get type gettype group node array type arraytype ast node astnode type node node node method declaration methoddeclaration node variable declaration fragment variabledeclarationfragment node node get parent getparent node delta node get start position getstartposition node get length getlength type get start position getstartposition node method declaration methoddeclaration binding method declaration methoddeclaration node resolve binding resolvebinding node variable declaration fragment variabledeclarationfragment binding variable declaration fragment variabledeclarationfragment node resolve binding resolvebinding binding node target find declaring node finddeclaringnode binding get key getkey node method declaration methoddeclaration node variable declaration fragment variabledeclarationfragment node node finder nodefinder perform target node get start position getstartposition node get length getlength delta node simple name simplename rewrite type occurrence rewritetypeoccurrence estimate rewrite node group node qualified name qualifiedname ast node astnode node node node method declaration methoddeclaration node variable declaration fragment variabledeclarationfragment node node get parent getparent node delta node get start position getstartposition node get length getlength get start position getstartposition node method declaration methoddeclaration binding method declaration methoddeclaration node resolve binding resolvebinding node variable declaration fragment variabledeclarationfragment binding variable declaration fragment variabledeclarationfragment node resolve binding resolvebinding binding node target find declaring node finddeclaringnode binding get key getkey node simple name simplename node method declaration methoddeclaration node variable declaration fragment variabledeclarationfragment node node finder nodefinder perform target node get start position getstartposition node get length getlength delta node simple name simplename rewrite type occurrence rewritetypeoccurrence estimate rewrite node group node cast expression castexpression ast node astnode expression node node node method declaration methoddeclaration node node get parent getparent node delta node get start position getstartposition node get length getlength expression get start position getstartposition binding method declaration methoddeclaration node resolve binding resolvebinding node target find declaring node finddeclaringnode binding get key getkey node method declaration methoddeclaration node node finder nodefinder perform target node get start position getstartposition node get length getlength delta node cast expression castexpression rewrite type occurrence rewritetypeoccurrence estimate rewrite cast expression castexpression node get type gettype group creates text edits replace subtype occurrence supertype param estimate type estimate param rewrite ast rewrite param node ast node rewrite param group text edit group rewrite type occurrence rewritetypeoccurrence t type ttype estimate compilation unit rewrite compilationunitrewrite rewrite ast node astnode node text edit group texteditgroup group rewrite get import remove r getimportremover register removed node registerremovednode node rewrite getastrewrite replace node create corresponding node createcorrespondingnode rewrite estimate node group creates text edits replace subtype occurrence supertype param manager text change manager param requestor ast requestor param rewrite compilation unit rewrite subtype working copy mode param unit compilation unit param node compilation unit node param replacements variable binding for mal formal parameters replaced param monitor progress monitor core exception coreexception change generated rewrite type occurrences rewritetypeoccurrences text edit based change manager texteditbasedchangemanager manager ast requestor astrequestor requestor compilation unit rewrite compilationunitrewrite rewrite i compilation unit icompilationunit unit compilation unit compilationunit node string replacements i progress monitor iprogressmonitor monitor core exception coreexception creates text edits replace subtype occurrences supertype param manager text change manager param source rewrite sourcerewrite compilation unit rewrite subtype working copy mode param source requestor sourcerequestor ast requestor subtype code code param sub unit subunit compilation unit subtype code code param sub node subnode compilation unit node subtype code code param replacements variable binding for mal formal parameters replaced param status refactoring status param monitor progress monitor rewrite type occurrences rewritetypeoccurrences text edit based change manager texteditbasedchangemanager manager ast requestor astrequestor source requestor sourcerequestor compilation unit rewrite compilationunitrewrite source rewrite sourcerewrite i compilation unit icompilationunit sub unit subunit compilation unit compilationunit sub node subnode string replacements refactoring status refactoringstatus status i progress monitor iprogressmonitor monitor nls monitor begin task begintask monitor set task name settaskname refactoring core messages refactoringcoremessages extract interface processor extractinterfaceprocessor creating f type occurrences ftypeoccurrences i compilation unit icompilationunit units hash set hashset f type occurrences ftypeoccurrences key set keyset sub unit subunit units remove sub unit subunit map i java project ijavaproject collection i compilation unit icompilationunit projects hash map hashmap collection i compilation unit icompilationunit collection i java project ijavaproject project i compilation unit icompilationunit current iterator i compilation unit icompilationunit iterator units iterator iterator has next hasnext current iterator project current get java project getjavaproject collection projects project collection collection array list arraylist projects project collection collection add current ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level i progress monitor iprogressmonitor sub monitor submonitor sub progress monitor subprogressmonitor monitor i java project ijavaproject key set keyset projects key set keyset sub monitor submonitor begin task begintask nls key set keyset size nls sub monitor submonitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating iterator i java project ijavaproject iterator key set keyset iterator iterator has next hasnext project iterator collection projects project parser set working copy owner setworkingcopyowner f owner fowner parser set resolve bindings setresolvebindings parser set project setproject project parser set compiler options setcompileroptions refactoringastparser get compiler options getcompileroptions project i progress monitor iprogressmonitor subsub monitor subsubmonitor sub progress monitor subprogressmonitor sub monitor submonitor subsub monitor subsubmonitor begin task begintask nls collection size nls subsub monitor subsubmonitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating parser createasts collection to array toarray i compilation unit icompilationunit collection size string ast requestor astrequestor override acceptast i compilation unit icompilationunit unit compilation unit compilationunit node i progress monitor iprogressmonitor sub subsub monitor subsubsubmonitor sub progress monitor subprogressmonitor subsub monitor subsubmonitor nls sub subsub monitor subsubsubmonitor begin task begintask sub subsub monitor subsubsubmonitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating source rewrite sourcerewrite rewrite type occurrences rewritetypeoccurrences manager source rewrite sourcerewrite unit node replacements sub progress monitor subprogressmonitor sub subsub monitor subsubsubmonitor core exception coreexception exception status merge refactoring status refactoringstatus create fatal error status createfatalerrorstatus exception get local ized message getlocalizedmessage sub subsub monitor subsubsubmonitor override accept binding acceptbinding string key i binding ibinding binding sub progress monitor subprogressmonitor subsub monitor subsubmonitor subsub monitor subsubmonitor sub unit subunit sub node subnode source rewrite sourcerewrite source requestor sourcerequestor rewrite type occurrences rewritetypeoccurrences manager source requestor sourcerequestor source rewrite sourcerewrite sub unit subunit sub node subnode replacements sub progress monitor subprogressmonitor sub monitor submonitor core exception coreexception exception status merge refactoring status refactoringstatus create fatal error status createfatalerrorstatus exception get local ized message getlocalizedmessage sub monitor submonitor monitor determines type occurrences rewritten param rewrite code code rewrite code code set instance of setinstanceof rewrite f instance of finstanceof rewrite determines occurrences subtype replaced supertype param replace code code replace occurrences code code set replace setreplace replace f replace freplace replace sol ves solves supertype constraints replace subtype supertype param sub unit subunit compilation unit subtype code code param sub node subnode compilation unit node subtype code code param sub type subtype java element subtype param sub binding subbinding type binding subtype replace param super binding superbinding type binding supertype replacement param monitor progress monitor param status refactoring status java model exception javamodelexception error occurs solve super type constraints solvesupertypeconstraints i compilation unit icompilationunit sub unit subunit compilation unit compilationunit sub node subnode i type itype sub type subtype i type binding itypebinding sub binding subbinding i type binding itypebinding super binding superbinding i progress monitor iprogressmonitor monitor refactoring status refactoringstatus status java model exception javamodelexception is not null isnotnull sub type subtype is not null isnotnull sub binding subbinding is not null isnotnull super binding superbinding is not null isnotnull monitor is not null isnotnull status level type environment typeenvironment environment type environment typeenvironment super type constraints model supertypeconstraintsmodel model super type constraints model supertypeconstraintsmodel environment environment create sub binding subbinding environment create super binding superbinding super type constraints creator supertypeconstraintscreator creator super type constraints creator supertypeconstraintscreator model f instance of finstanceof nls monitor begin task begintask monitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating map i java project ijavaproject search result group searchresultgroup first pass firstpass get ref erencing compilation units getreferencingcompilationunits sub type subtype sub progress monitor subprogressmonitor monitor status map i java project ijavaproject i compilation unit icompilationunit second pass secondpass hash map hashmap i java project ijavaproject project collection search result group searchresultgroup collection ast parser astparser parser ast parser astparser new parser newparser ast provider astprovider shared ast level object element i compilation unit icompilationunit current search result group searchresultgroup group search match searchmatch matches map i compilation unit icompilationunit search result group searchresultgroup groups hash map hashmap iterator i java project ijavaproject first pass firstpass key set keyset iterator has next hasnext project level java model util javamodelutil or higher orhigher project level collection first pass firstpass project collection iterator search result group searchresultgroup collection iterator has next hasnext group matches group get search results getsearchresults matches length element matches get element getelement element i member imember current i member imember element get compilation unit getcompilationunit current groups current group i compilation unit icompilationunit units i compilation unit icompilationunit processed hash set hashset sub unit subunit processed add sub unit subunit model begin creation begincreation i progress monitor iprogressmonitor sub monitor submonitor sub progress monitor subprogressmonitor monitor i java project ijavaproject key set keyset first pass firstpass key set keyset sub monitor submonitor begin task begintask nls key set keyset size nls sub monitor submonitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating iterator i java project ijavaproject key set keyset iterator has next hasnext project collection first pass firstpass project collection units hash set hashset collection size iterator search result group searchresultgroup collection iterator has next hasnext group matches group get search results getsearchresults matches length element matches get element getelement element i member imember current i member imember element get compilation unit getcompilationunit current units add current list i compilation unit icompilationunit batches array list arraylist units size batches size iter ations iterations size size batch i progress monitor iprogressmonitor subsub monitor subsubmonitor sub progress monitor subprogressmonitor sub monitor submonitor nls subsub monitor subsubmonitor begin task begintask nls nls iter ations iterations subsub monitor subsubmonitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating map string string options refactoringastparser get compiler options getcompileroptions project iter ations iterations list i compilation unit icompilationunit iteration batches sub list sublist size batch math min size size batch parser set working copy owner setworkingcopyowner f owner fowner parser set resolve bindings setresolvebindings parser set project setproject project parser set compiler options setcompileroptions options i progress monitor iprogressmonitor sub subsub monitor subsubsubmonitor sub progress monitor subprogressmonitor subsub monitor subsubmonitor count iteration size nls sub subsub monitor subsubsubmonitor begin task begintask nls nls count sub subsub monitor subsubsubmonitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating parser createasts iteration to array toarray i compilation unit icompilationunit count string ast requestor astrequestor override acceptast i compilation unit icompilationunit unit compilation unit compilationunit node processed unit perform first pass performfirstpass creator second pass secondpass groups unit node sub progress monitor subprogressmonitor sub subsub monitor subsubsubmonitor processed add unit sub subsub monitor subsubsubmonitor worked override accept binding acceptbinding string key i binding ibinding binding null progress monitor nullprogressmonitor sub subsub monitor subsubsubmonitor subsub monitor subsubmonitor first pass firstpass clear sub monitor submonitor sub unit subunit sub node subnode perform first pass performfirstpass creator second pass secondpass groups sub unit subunit sub node subnode sub progress monitor subprogressmonitor sub monitor submonitor sub monitor submonitor sub progress monitor subprogressmonitor monitor i java project ijavaproject key set keyset second pass secondpass key set keyset sub monitor submonitor begin task begintask nls key set keyset size nls sub monitor submonitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating iterator i java project ijavaproject iterator key set keyset iterator iterator has next hasnext project iterator level java model util javamodelutil or higher orhigher project level collection i compilation unit icompilationunit cu collection cucollection cu collection cucollection second pass secondpass project cu collection cucollection parser set working copy owner setworkingcopyowner f owner fowner parser set resolve bindings setresolvebindings parser set project setproject project parser set compiler options setcompileroptions refactoringastparser get compiler options getcompileroptions project i progress monitor iprogressmonitor subsub monitor subsubmonitor sub progress monitor subprogressmonitor sub monitor submonitor nls subsub monitor subsubmonitor begin task begintask nls nls cu collection cucollection size subsub monitor subsubmonitor set task name settaskname refactoring core messages refactoringcoremessages super type refactoring processor supertyperefactoringprocessor creating parser createasts cu collection cucollection to array toarray i compilation unit icompilationunit cu collection cucollection size string ast requestor astrequestor override acceptast i compilation unit icompilationunit unit compilation unit compilationunit node processed unit perform second pass performsecondpass creator unit node sub progress monitor subprogressmonitor subsub monitor subsubmonitor subsub monitor subsubmonitor worked override accept binding acceptbinding string key i binding ibinding binding null progress monitor nullprogressmonitor subsub monitor subsubmonitor second pass secondpass clear sub monitor submonitor model end creation endcreation model set compliance setcompliance level super type constraints solver supertypeconstraintssolver solver create contraint solver createcontraintsolver model solver solve constraints solveconstraints f type occurrences ftypeoccurrences solver get type occurrences gettypeoccurrences f obsolete c asts fobsoletecasts solver get obsolete c asts getobsoletecasts monitor