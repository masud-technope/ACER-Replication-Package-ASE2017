copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal java editor javaeditor java util array list arraylist java util arrays java util list org eclipse swt custom style range stylerange org eclipse jface text bad location exception badlocationexception org eclipse jface text bad position category exception badpositioncategoryexception org eclipse jface text document event documentevent org eclipse jface text i document idocument org eclipse jface text i document listener idocumentlistener org eclipse jface text i position updater ipositionupdater org eclipse jface text i region iregion org eclipse jface text is ynchronizable isynchronizable org eclipse jface text i text input listener itextinputlistener org eclipse jface text i text presentation listener itextpresentationlistener org eclipse jface text position org eclipse jface text region org eclipse jface text text presentation textpresentation org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor semantic highlighting manager semantichighlightingmanager highlighted position highlightedposition org eclipse jdt internal java editor javaeditor semantic highlighting manager semantichighlightingmanager highlighting org eclipse jdt internal text java presentation reconciler javapresentationreconciler semantic highlighting presenter thread implementation semantic highlighting presenter semantichighlightingpresenter i text presentation listener itextpresentationlistener i text input listener itextinputlistener i document listener idocumentlistener semantic highlighting position update r updater highlighting position updater highlightingpositionupdater i position updater ipositionupdater position category string f category fcategory creates update r updater code category code param category category highlighting position updater highlightingpositionupdater string category f category fcategory category org eclipse jface text i position updater ipositionupdater update org eclipse jface text document event documentevent override update document event documentevent event event offset eventoffset event get offset getoffset event old length eventoldlength event get length getlength event end eventend event offset eventoffset event old length eventoldlength position positions event get document getdocument get positions getpositions f category fcategory positions length highlighted position highlightedposition position highlighted position highlightedposition positions update deleted positions deleted background thread removed invalid ated invalidated runnable position is deleted isdeleted offset position get offset getoffset length position get length getlength offset length offset event end eventend update with preceding event updatewithprecedingevent position event event offset eventoffset update with succeeding event updatewithsucceedingevent position event offset event offset eventoffset event end eventend update with included event updatewithincludedevent position event offset event offset eventoffset update with over end event updatewithoverendevent position event event end eventend update with over start event updatewithoverstartevent position event update with inc luding event updatewithincludingevent position event bad position category exception badpositioncategoryexception update position event event precedes position param position position param event event update with preceding event updatewithprecedingevent highlighted position highlightedposition position document event documentevent event string new text newtext event get text gettext event new length eventnewlength new text newtext new text newtext length delta length deltalength event new length eventnewlength event get length getlength position set offset setoffset position get offset getoffset delta length deltalength update position event event succeeds position param position position param event event update with succeeding event updatewithsucceedingevent highlighted position highlightedposition position document event documentevent event update position event event included position param position position param event event update with included event updatewithincludedevent highlighted position highlightedposition position document event documentevent event event offset eventoffset event get offset getoffset string new text newtext event get text gettext new text newtext nls new text newtext event new length eventnewlength new text newtext length delta length deltalength event new length eventnewlength event get length getlength offset position get offset getoffset length position get length getlength offset length included length includedlength included length includedlength event new length eventnewlength character is java identifier part isjavaidentifierpart new text newtext char at charat included length includedlength included length includedlength included length includedlength event new length eventnewlength position set length setlength length delta length deltalength new left length newleftlength event offset eventoffset offset included length includedlength excluded length excludedlength event new length eventnewlength excluded length excludedlength character is java identifier part isjavaidentifierpart new text newtext char at charat excluded length excludedlength excluded length excludedlength new right offset newrightoffset event offset eventoffset excluded length excludedlength new right length newrightlength delta length deltalength new right offset newrightoffset new right length newrightlength position set length setlength new left length newleftlength new left length newleftlength position update new right offset newrightoffset new right length newrightlength position set length setlength new left length newleftlength add position from i addpositionfromui new right offset newrightoffset new right length newrightlength position get highlighting gethighlighting update position event event over laps overlaps position param position position param event event update with over end event updatewithoverendevent highlighted position highlightedposition position document event documentevent event string new text newtext event get text gettext new text newtext nls new text newtext event new length eventnewlength new text newtext length included length includedlength included length includedlength event new length eventnewlength character is java identifier part isjavaidentifierpart new text newtext char at charat included length includedlength included length includedlength position set length setlength event get offset getoffset position get offset getoffset included length includedlength update position event event over laps overlaps start position param position position param event event update with over start event updatewithoverstartevent highlighted position highlightedposition position document event documentevent event event offset eventoffset event get offset getoffset event end eventend event offset eventoffset event get length getlength string new text newtext event get text gettext new text newtext nls new text newtext event new length eventnewlength new text newtext length excluded length excludedlength event new length eventnewlength excluded length excludedlength character is java identifier part isjavaidentifierpart new text newtext char at charat excluded length excludedlength excluded length excludedlength deleted event end eventend position get offset getoffset inserted event new length eventnewlength excluded length excludedlength position update event offset eventoffset excluded length excludedlength position get length getlength deleted inserted update position event event includes position param position position param event event update with inc luding event updatewithincludingevent highlighted position highlightedposition position document event documentevent event position delete position update event get offset getoffset position update r updater i position updater ipositionupdater f position updater fpositionupdater highlighting position updater highlightingpositionupdater get position category getpositioncategory source viewer semantic highlighting reconciler installed java source viewer javasourceviewer f source viewer fsourceviewer background presentation reconciler java presentation reconciler javapresentationreconciler f presentation reconciler fpresentationreconciler current highlighted positions code code elements list position f positions fpositions array list arraylist position lock object f position lock fpositionlock object code code iff current reconcile canceled f is canceled fiscanceled creates returns highlighted position offset length highlighting note called background thread param offset offset param length length param highlighting highlighting highlighted position highlighted position highlightedposition create highlighted position createhighlightedposition offset length highlighting highlighting todo reuse deleted positions highlighted position highlightedposition offset length highlighting f position updater fpositionupdater adds current positions list note called background thread param list list add all positions addallpositions list position list f position lock fpositionlock list add all addall f positions fpositions create text presentation background note called background thread param added positions addedpositions positions param removed positions removedpositions removed positions text presentation code code reconciliation canceled text presentation textpresentation create presentation createpresentation list position added positions addedpositions list position removed positions removedpositions java source viewer javasourceviewer source viewer sourceviewer f source viewer fsourceviewer java presentation reconciler javapresentationreconciler presentation reconciler presentationreconciler f presentation reconciler fpresentationreconciler source viewer sourceviewer presentation reconciler presentationreconciler is canceled iscanceled i document idocument document source viewer sourceviewer get document getdocument document min start minstart integer max max end maxend integer min removed positions removedpositions size position position removed positions removedpositions offset position get offset getoffset min start minstart math min min start minstart offset max end maxend math max max end maxend offset position get length getlength added positions addedpositions size position position added positions addedpositions offset position get offset getoffset min start minstart math min min start minstart offset max end maxend math max max end maxend offset position get length getlength min start minstart max end maxend presentation reconciler presentationreconciler create repair description createrepairdescription region min start minstart max end maxend min start minstart document runtime exception runtimeexception create runnable updating presentation note called background thread param text presentation textpresentation text presentation param added positions addedpositions positions param removed positions removedpositions removed positions runnable code code reconciliation canceled runnable create update runnable createupdaterunnable text presentation textpresentation text presentation textpresentation list position added positions addedpositions list position removed positions removedpositions f source viewer fsourceviewer text presentation textpresentation todo clustering positions post multiple fast run nables runnables highlighted position highlightedposition semantic highlighting manager semantichighlightingmanager highlighted position highlightedposition added positions addedpositions size added positions addedpositions to array toarray semantic highlighting manager semantichighlightingmanager highlighted position highlightedposition removed semantic highlighting manager semantichighlightingmanager highlighted position highlightedposition removed positions removedpositions size removed positions removedpositions to array toarray removed is canceled iscanceled runnable runnable runnable override update presentation updatepresentation text presentation textpresentation removed runnable invalid ate invalidate presentation positions based positions existing deleted positions unregisters deleted positions document pat ches patches positions presenter note indirectly called background thread runnable param text presentation textpresentation text presentation code code presentation computed thread param added positions addedpositions positions param removed positions removedpositions removed positions update presentation updatepresentation text presentation textpresentation text presentation textpresentation highlighted position highlightedposition added positions addedpositions highlighted position highlightedposition removed positions removedpositions f source viewer fsourceviewer todo reuse removed positions is canceled iscanceled i document idocument document f source viewer fsourceviewer get document getdocument document string position category positioncategory get position category getpositioncategory list highlighted position highlightedposition removed positions list removedpositionslist arrays as list aslist removed positions removedpositions f position lock fpositionlock list position old positions oldpositions f positions fpositions new size newsize math max f positions fpositions size added positions addedpositions length removed positions removedpositions length loop kind merge sort merges list position sorted position offset list previous list positions old positions oldpositions deleted positions removed fly list positions result stored new positions newpositions list position new positions newpositions array list arraylist new size newsize position position position added position addedposition old positions oldpositions size added positions addedpositions length position added position addedposition find deleted position list position position old positions oldpositions position is deleted isdeleted removed positions list removedpositionslist position document remove position removeposition position category positioncategory position position find position list added position addedposition added position addedposition added positions addedpositions document add position addposition position category positioncategory added position addedposition merge add position added position addedposition offset position added position addedposition position get offset getoffset added position addedposition get offset getoffset new positions newpositions add position position new positions newpositions add added position addedposition added position addedposition new positions newpositions add position position added position addedposition new positions newpositions add added position addedposition added position addedposition f positions fpositions new positions newpositions bad position category exception badpositioncategoryexception java plugin javaplugin log bad location exception badlocationexception java plugin javaplugin log text presentation textpresentation f source viewer fsourceviewer change text presentation changetextpresentation text presentation textpresentation f source viewer fsourceviewer invalid ate text presentation invalidatetextpresentation check ordering checkordering string list positions position previous positions size position current position positions previous previous get offset getoffset previous get length getlength current get offset getoffset returns code code iff positions position param positions positions ordered offset overlap param position position code code iff positions position list position positions position position index of indexof positions position returns position positions code code param positions positions ordered offset overlap param position position index of indexof list position positions position position compute index at offset computeindexatoffset positions position get offset getoffset size positions size size positions position insert position code f positions fpositions code offsets remain linear order param position position insertion insert position insertposition position position compute index after offset computeindexafteroffset f positions fpositions position get offset getoffset f positions fpositions add position returns position offset greater offset param positions positions ordered offset overlap param offset offset position offset greater offset compute index after offset computeindexafteroffset list position positions offset positions size position position positions position get offset getoffset offset returns position offset equal greater offset param positions positions ordered offset overlap param offset offset position offset equal greater offset compute index at offset computeindexatoffset list position positions offset positions size position position positions position get offset getoffset offset org eclipse jface text i text presentation listener itextpresentationlistener apply text presentation applytextpresentation org eclipse jface text text presentation textpresentation override apply text presentation applytextpresentation text presentation textpresentation text presentation textpresentation i region iregion region text presentation textpresentation get extent getextent compute index at offset computeindexatoffset f positions fpositions region get offset getoffset compute index at offset computeindexatoffset f positions fpositions region get offset getoffset region get length getlength list style range stylerange ranges array list arraylist highlighted position highlightedposition position highlighted position highlightedposition f positions fpositions position is deleted isdeleted ranges add position create style range createstylerange style range stylerange array style range stylerange ranges size array ranges to array toarray array text presentation textpresentation replace style ranges replacestyleranges array highlighted position highlightedposition position highlighted position highlightedposition f positions fpositions position is deleted isdeleted text presentation textpresentation replace style range replacestylerange position create style range createstylerange org eclipse jface text i text input listener itextinputlistener input document about to be changed inputdocumentabouttobechanged org eclipse jface text i document idocument org eclipse jface text i document idocument override input document about to be changed inputdocumentabouttobechanged i document idocument old input oldinput i document idocument new input newinput set canceled setcanceled release document releasedocument old input oldinput reset state resetstate org eclipse jface text i text input listener itextinputlistener input document changed inputdocumentchanged org eclipse jface text i document idocument org eclipse jface text i document idocument override input document changed inputdocumentchanged i document idocument old input oldinput i document idocument new input newinput manage document managedocument new input newinput org eclipse jface text i document listener idocumentlistener document about to be changed documentabouttobechanged org eclipse jface text document event documentevent override document about to be changed documentabouttobechanged document event documentevent event set canceled setcanceled org eclipse jface text i document listener idocumentlistener document changed documentchanged org eclipse jface text document event documentevent override document changed documentchanged document event documentevent event returns code code iff current reconcile canceled note called background thread is canceled iscanceled i document idocument document f source viewer fsourceviewer f source viewer fsourceviewer get document getdocument document f is canceled fiscanceled get lock object getlockobject document f is canceled fiscanceled current reconcile canceled param is canceled iscanceled code code iff current reconcile canceled set canceled setcanceled is canceled iscanceled i document idocument document f source viewer fsourceviewer f source viewer fsourceviewer get document getdocument document f is canceled fiscanceled is canceled iscanceled get lock object getlockobject document f is canceled fiscanceled is canceled iscanceled param document document document lock object object get lock object getlockobject i document idocument document document is ynchronizable isynchronizable object lock is ynchronizable isynchronizable document get lock object getlockobject lock lock document install presenter source viewer background presentation reconciler param source viewer sourceviewer source viewer param background presentation reconciler backgroundpresentationreconciler background presentation reconciler code code link semantic highlighting presenter semantichighlightingpresenter create presentation createpresentation list list called install java source viewer javasourceviewer source viewer sourceviewer java presentation reconciler javapresentationreconciler background presentation reconciler backgroundpresentationreconciler f source viewer fsourceviewer source viewer sourceviewer f presentation reconciler fpresentationreconciler background presentation reconciler backgroundpresentationreconciler f source viewer fsourceviewer prepend text presentation listener prependtextpresentationlistener f source viewer fsourceviewer add text input listener addtextinputlistener manage document managedocument f source viewer fsourceviewer get document getdocument uninstall presenter uninstall set canceled setcanceled f source viewer fsourceviewer f source viewer fsourceviewer remove text presentation listener removetextpresentationlistener release document releasedocument f source viewer fsourceviewer get document getdocument invalid ate text presentation invalidatetextpresentation reset state resetstate f source viewer fsourceviewer remove text input listener removetextinputlistener f source viewer fsourceviewer invalid ate invalidate text presentation positions highlighting param highlighting highlighting highlighting style changed highlightingstylechanged highlighting highlighting f positions fpositions size highlighted position highlightedposition position highlighted position highlightedposition f positions fpositions position get highlighting gethighlighting highlighting f source viewer fsourceviewer invalid ate text presentation invalidatetextpresentation position get offset getoffset position get length getlength invalid ate invalidate text presentation positions invalid ate text presentation invalidatetextpresentation f positions fpositions size position position f positions fpositions f source viewer fsourceviewer invalid ate text presentation invalidatetextpresentation position get offset getoffset position get length getlength add position range highlighting unconditionally thread position registered document text presentation invalid ated invalidated param offset range offset param length range length param highlighting highlighting add position from i addpositionfromui offset length highlighting highlighting position position create highlighted position createhighlightedposition offset length highlighting f position lock fpositionlock insert position insertposition position i document idocument document f source viewer fsourceviewer get document getdocument document string position category positioncategory get position category getpositioncategory document add position addposition position category positioncategory position bad location exception badlocationexception java plugin javaplugin log bad position category exception badpositioncategoryexception java plugin javaplugin log reset initial reset state resetstate f position lock fpositionlock f positions fpositions clear start managing document param document document manage document managedocument i document idocument document document document add position category addpositioncategory get position category getpositioncategory document add position updater addpositionupdater f position updater fpositionupdater document add document listener adddocumentlistener managing document param document document release document releasedocument i document idocument document document document remove document listener removedocumentlistener document remove position updater removepositionupdater f position updater fpositionupdater document remove position category removepositioncategory get position category getpositioncategory bad position category exception badpositioncategoryexception java plugin javaplugin log semantic reconciler position category string get position category getpositioncategory to string tostring