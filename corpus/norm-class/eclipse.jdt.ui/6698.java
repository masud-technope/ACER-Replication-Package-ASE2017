copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring rename java util array list arraylist java util arrays java util collection java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime sub progress monitor subprogressmonitor org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i region iregion org eclipse jdt core i type itype org eclipse jdt core i type hierarchy itypehierarchy org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core working copy owner workingcopyowner org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search i java search scope ijavasearchscope org eclipse jdt core search search engine searchengine org eclipse jdt core search search match searchmatch org eclipse jdt core search search participant searchparticipant org eclipse jdt core search search pattern searchpattern org eclipse jdt core search search requestor searchrequestor org eclipse jdt internal corext refactoring refactoring scope factory refactoringscopefactory org eclipse jdt internal corext refactoring base references in binary context referencesinbinarycontext org eclipse jdt internal corext util java model util javamodelutil org eclipse jdt internal corext util search utils searchutils ripple method finder ripplemethodfinder i method imethod f method fmethod list i method imethod f declarations fdeclarations i type hierarchy itypehierarchy f hierarchy fhierarchy map i type itype i method imethod f type to method ftypetomethod i type itype f root types froottypes multi map multimap i type itype i type itype f root reps frootreps map i type itype i type hierarchy itypehierarchy f root hierarchies froothierarchies union find unionfind f union find funionfind f exclude binaries fexcludebinaries references in binary context referencesinbinarycontext f binary refs fbinaryrefs map i method imethod search match searchmatch f declaration to match fdeclarationtomatch multi map multimap hash map hashmap collection f implementation fimplementation hash map hashmap key collection collection f implementation fimplementation key collection collection hash set hashset f implementation fimplementation key collection collection add collection key f implementation fimplementation key union find unionfind hash map hashmap i type itype i type itype f element to representative felementtorepresentative hash map hashmap init i type itype type f element to representative felementtorepresentative type type path compression i type itype find i type itype element i type itype root element i type itype rep f element to representative felementtorepresentative root rep rep equals root root rep rep f element to representative felementtorepresentative root rep rep f element to representative felementtorepresentative element rep equals root i type itype temp element element rep f element to representative felementtorepresentative temp root rep f element to representative felementtorepresentative element root str aightforward straightforward i type itype find i type itype element i type itype current element i type itype rep i type itype f element to representative felementtorepresentative current rep rep equals current current rep rep i type itype f element to representative felementtorepresentative current rep current union i type itype rep i type itype rep f element to representative felementtorepresentative rep rep ripple method finder ripplemethodfinder i method imethod method exclude binaries excludebinaries f method fmethod method f exclude binaries fexcludebinaries exclude binaries excludebinaries f binary refs fbinaryrefs ripple method finder ripplemethodfinder i method imethod method references in binary context referencesinbinarycontext binary refs binaryrefs f method fmethod method f exclude binaries fexcludebinaries f declaration to match fdeclarationtomatch hash map hashmap f binary refs fbinaryrefs binary refs binaryrefs i method imethod get related methods getrelatedmethods i method imethod method exclude binaries excludebinaries i progress monitor iprogressmonitor working copy owner workingcopyowner owner core exception coreexception method checks methodchecks is virtual isvirtual method i method imethod method ripple method finder ripplemethodfinder method exclude binaries excludebinaries get all ripple methods getallripplemethods owner i method imethod get related methods getrelatedmethods i method imethod method i progress monitor iprogressmonitor working copy owner workingcopyowner owner core exception coreexception get related methods getrelatedmethods method owner i method imethod get related methods getrelatedmethods i method imethod method references in binary context referencesinbinarycontext binary refs binaryrefs i progress monitor iprogressmonitor working copy owner workingcopyowner owner core exception coreexception method checks methodchecks is virtual isvirtual method i method imethod method ripple method finder ripplemethodfinder method binary refs binaryrefs get all ripple methods getallripplemethods owner i method imethod get all ripple methods getallripplemethods i progress monitor iprogressmonitor working copy owner workingcopyowner owner core exception coreexception i method imethod ripple methods ripplemethods find all ripple methods findallripplemethods owner f declaration to match fdeclarationtomatch ripple methods ripplemethods list i method imethod ripple methods list ripplemethodslist array list arraylist arrays as list aslist ripple methods ripplemethods iterator i method imethod iter ripple methods list ripplemethodslist iterator iter has next hasnext object match f declaration to match fdeclarationtomatch iter match iter remove f binary refs fbinaryrefs add search match searchmatch match f declaration to match fdeclarationtomatch ripple methods list ripplemethodslist to array toarray i method imethod ripple methods list ripplemethodslist size i method imethod find all ripple methods findallripplemethods i progress monitor iprogressmonitor working copy owner workingcopyowner owner core exception coreexception nls begin task begintask find all declarations findalldeclarations sub progress monitor subprogressmonitor owner check bug f declarations fdeclarations f method fmethod nls is true istrue search method declaration find original element f method fmethod to string tostring create hierarchy of declarations createhierarchyofdeclarations sub progress monitor subprogressmonitor owner create type to method createtypetomethod create union find createunionfind is canceled iscanceled operation canceled exception operationcanceledexception f hierarchy fhierarchy f root types froottypes map i type itype list i type itype partitioning hash map hashmap iterator i type itype iter f type to method ftypetomethod key set keyset iterator iter has next hasnext i type itype type iter i type itype rep f union find funionfind find type list i type itype types partitioning rep types types array list arraylist types add type partitioning rep types is true istrue partitioning size partitioning size f declarations fdeclarations to array toarray i method imethod f declarations fdeclarations size multiple part itions partitions nasty marriage cases types inheriting method ancestors redeclaring i type itype method type rep methodtyperep f union find funionfind find f method fmethod get declaring type getdeclaringtype list i type itype related types relatedtypes partitioning method type rep methodtyperep has related interfaces hasrelatedinterfaces list i method imethod related methods relatedmethods array list arraylist iterator i type itype iter related types relatedtypes iterator iter has next hasnext i type itype related type relatedtype iter related methods relatedmethods add f type to method ftypetomethod related type relatedtype related type relatedtype is interface isinterface has related interfaces hasrelatedinterfaces definition alien type type type alien types dim ini shes diminishes types marry related type relatedtype list i method imethod alien declarations aliendeclarations array list arraylist f declarations fdeclarations f declarations fdeclarations alien declarations aliendeclarations remove all removeall related methods relatedmethods list i type itype alien types alientypes array list arraylist has alien interfaces hasalieninterfaces iterator i method imethod iter alien declarations aliendeclarations iterator iter has next hasnext i method imethod alien declaration aliendeclaration iter i type itype alien type alientype alien declaration aliendeclaration get declaring type getdeclaringtype alien types alientypes add alien type alientype alien type alientype is interface isinterface has alien interfaces hasalieninterfaces nasty marriage scenarios types marry alien types alientypes size related methods relatedmethods to array toarray i method imethod related methods relatedmethods size nasty marriage scenarios interfaces has related interfaces hasrelatedinterfaces has alien interfaces hasalieninterfaces related methods relatedmethods to array toarray i method imethod related methods relatedmethods size find subtypes types hash set hashset i type itype related sub types relatedsubtypes hash set hashset list i type itype related types to process relatedtypestoprocess array list arraylist related types relatedtypes related types to process relatedtypestoprocess size todo subtype hierarchies top ripple related types to process relatedtypestoprocess iterator i type itype iter related types to process relatedtypestoprocess iterator iter has next hasnext is canceled iscanceled operation canceled exception operationcanceledexception i type itype related type relatedtype iter i type hierarchy itypehierarchy hierarchy get cached hierarchy getcachedhierarchy related type relatedtype owner sub progress monitor subprogressmonitor hierarchy hierarchy related type relatedtype new type hierarchy newtypehierarchy owner sub progress monitor subprogressmonitor i type itype all sub types allsubtypes hierarchy get all subtypes getallsubtypes related type relatedtype all sub types allsubtypes length related sub types relatedsubtypes add all sub types allsubtypes processed loop terminates related types to process relatedtypestoprocess clear hash set hashset i type itype married alien type reps marriedalientypereps hash set hashset iterator i type itype iter alien types alientypes iterator iter has next hasnext is canceled iscanceled operation canceled exception operationcanceledexception i type itype alien type alientype iter i method imethod alien method alienmethod f type to method ftypetomethod alien type alientype i type hierarchy itypehierarchy hierarchy get cached hierarchy getcachedhierarchy alien type alientype owner sub progress monitor subprogressmonitor hierarchy hierarchy alien type alientype new type hierarchy newtypehierarchy owner sub progress monitor subprogressmonitor i type itype all subtypes allsubtypes hierarchy get all subtypes getallsubtypes alien type alientype all subtypes allsubtypes length i type itype subtype all subtypes allsubtypes related sub types relatedsubtypes subtype java model util javamodelutil is visible in hierarchy isvisibleinhierarchy alien method alienmethod subtype get package fragment getpackagefragment married alien type reps marriedalientypereps add f union find funionfind find alien type alientype overridden married alien type reps marriedalientypereps size related methods relatedmethods to array toarray i method imethod related methods relatedmethods size iterator i type itype iter married alien type reps marriedalientypereps iterator iter has next hasnext i type itype married alien type rep marriedalientyperep iter list i type itype married alien types marriedalientypes partitioning married alien type rep marriedalientyperep iterator i type itype iterator married alien types marriedalientypes iterator iterator has next hasnext i type itype married alien interface type marriedalieninterfacetype iterator related methods relatedmethods add f type to method ftypetomethod married alien interface type marriedalieninterfacetype alien alien types alientypes remove all removeall married alien types marriedalientypes process f res hly freshly married types related types to process relatedtypestoprocess add all addall married alien types marriedalientypes f root reps frootreps f root hierarchies froothierarchies f type to method ftypetomethod f union find funionfind related methods relatedmethods to array toarray i method imethod related methods relatedmethods size i type hierarchy itypehierarchy get cached hierarchy getcachedhierarchy i type itype type working copy owner workingcopyowner owner i progress monitor iprogressmonitor monitor java model exception javamodelexception i type itype rep f union find funionfind find type rep collection i type itype collection f root reps frootreps rep iterator i type itype iter collection iterator iter has next hasnext i type itype root iter i type hierarchy itypehierarchy hierarchy f root hierarchies froothierarchies root hierarchy hierarchy root new type hierarchy newtypehierarchy owner sub progress monitor subprogressmonitor monitor f root hierarchies froothierarchies root hierarchy hierarchy type hierarchy find all declarations findalldeclarations i progress monitor iprogressmonitor monitor working copy owner workingcopyowner owner core exception coreexception f declarations fdeclarations array list arraylist method requestor methodrequestor search requestor searchrequestor override accept search match acceptsearchmatch search match searchmatch match core exception coreexception i method imethod method i method imethod match get element getelement is binary isbinary method is binary isbinary f binary refs fbinaryrefs f exclude binaries fexcludebinaries is binary isbinary f declarations fdeclarations add method is binary isbinary f binary refs fbinaryrefs f declaration to match fdeclarationtomatch method match limit to limitto i java search constants ijavasearchconstants declarations i java search constants ijavasearchconstants ignore declaring type i java search constants ijavasearchconstants ignore type match rule matchrule search pattern searchpattern erasure match search pattern searchpattern sensitive search pattern searchpattern pattern search pattern searchpattern create pattern createpattern f method fmethod limit to limitto match rule matchrule search participant searchparticipant participants search utils searchutils get default search participants getdefaultsearchparticipants i java search scope ijavasearchscope scope refactoring scope factory refactoringscopefactory create related projects scope createrelatedprojectsscope f method fmethod get java project getjavaproject i java search scope ijavasearchscope sources i java search scope ijavasearchscope application libraries i java search scope ijavasearchscope system libraries method requestor methodrequestor requestor method requestor methodrequestor search engine searchengine search engine searchengine owner search engine searchengine owner search engine searchengine search engine searchengine search pattern participants scope requestor monitor create hierarchy of declarations createhierarchyofdeclarations i progress monitor iprogressmonitor working copy owner workingcopyowner owner java model exception javamodelexception i region iregion region java core javacore new region newregion iterator i method imethod iter f declarations fdeclarations iterator iter has next hasnext i type itype declaring type declaringtype iter get declaring type getdeclaringtype region add declaring type declaringtype f hierarchy fhierarchy java core javacore new type hierarchy newtypehierarchy region owner create type to method createtypetomethod f type to method ftypetomethod hash map hashmap iterator i method imethod iter f declarations fdeclarations iterator iter has next hasnext i method imethod declaration iter f type to method ftypetomethod declaration get declaring type getdeclaringtype declaration create union find createunionfind java model exception javamodelexception f root types froottypes hash set hashset f type to method ftypetomethod key set keyset f union find funionfind union find unionfind iterator i type itype iter f type to method ftypetomethod key set keyset iterator iter has next hasnext i type itype type iter f union find funionfind init type iterator i type itype iter f type to method ftypetomethod key set keyset iterator iter has next hasnext i type itype type iter unit e with super types unitewithsupertypes type type f root reps frootreps multi map multimap iterator i type itype iter f root types froottypes iterator iter has next hasnext i type itype type iter i type itype rep f union find funionfind find type rep f root reps frootreps rep type f root hierarchies froothierarchies hash map hashmap unit e with super types unitewithsupertypes i type itype anchor i type itype type java model exception javamodelexception i type itype super types supertypes f hierarchy fhierarchy get super types getsupertypes type super types supertypes length i type itype supertype super types supertypes i type itype super rep superrep f union find funionfind find supertype super rep superrep type doesn declare method super types supertypes unit e with super types unitewithsupertypes anchor supertype check method supertype overridden i member imember super method supermethod f type to method ftypetomethod supertype java model util javamodelutil is visible in hierarchy isvisibleinhierarchy super method supermethod anchor get package fragment getpackagefragment i type itype rep f union find funionfind find anchor f union find funionfind union rep super rep superrep current type root f root types froottypes remove anchor unit e with super types unitewithsupertypes supertype supertype overridden overriding chain ends