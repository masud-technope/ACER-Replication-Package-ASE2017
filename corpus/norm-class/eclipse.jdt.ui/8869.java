copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal corext refactoring reorg java util array list arraylist java util arrays java util list org eclipse core runtime org eclipse core runtime core exception coreexception org eclipse core resources i container icontainer org eclipse core resources i file ifile org eclipse core resources i resource iresource org eclipse core resources mapping i resource change description factory iresourcechangedescriptionfactory org eclipse core resources mapping resource mapping resourcemapping org eclipse ltk core refactoring refactoring status refactoringstatus org eclipse ltk core refactoring participants copy arguments copyarguments org eclipse ltk core refactoring participants i participant descriptor filter iparticipantdescriptorfilter org eclipse ltk core refactoring participants participant manager participantmanager org eclipse ltk core refactoring participants refactoring arguments refactoringarguments org eclipse ltk core refactoring participants refactoring participant refactoringparticipant org eclipse ltk core refactoring participants refactoring processor refactoringprocessor org eclipse ltk core refactoring participants sharable participants sharableparticipants org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt internal corext refactoring participants resource modifications resourcemodifications org eclipse jdt internal corext util java element resource mapping javaelementresourcemapping copy modifications copymodifications refactoring modifications refactoringmodifications list object f copies fcopies list refactoring arguments refactoringarguments f copy arguments fcopyarguments list i participant descriptor filter iparticipantdescriptorfilter f participant descriptor filter fparticipantdescriptorfilter copy modifications copymodifications f copies fcopies array list arraylist f copy arguments fcopyarguments array list arraylist f participant descriptor filter fparticipantdescriptorfilter array list arraylist copy i resource iresource resource copy arguments copyarguments args add resource args copy i java element ijavaelement element copy arguments copyarguments java args javaargs copy arguments copyarguments resource args resourceargs core exception coreexception element get element type getelementtype i java element ijavaelement fragment root copy i package fragment root ipackagefragmentroot element java args javaargs resource args resourceargs i java element ijavaelement fragment copy i package fragment ipackagefragment element java args javaargs resource args resourceargs i java element ijavaelement compilation unit copy i compilation unit icompilationunit element java args javaargs resource args resourceargs add element java args javaargs copy i package fragment root ipackagefragmentroot source folder sourcefolder copy arguments copyarguments java args javaargs copy arguments copyarguments resource args resourceargs add source folder sourcefolder java args javaargs resource mapping resourcemapping mapping java element resource mapping javaelementresourcemapping create source folder sourcefolder mapping add mapping resource args resourceargs i resource iresource source resource sourceresource source folder sourcefolder get resource getresource source resource sourceresource get resource modifications getresourcemodifications add copy delta addcopydelta source resource sourceresource resource args resourceargs i file ifile classpath get classpath file getclasspathfile i resource iresource resource args resourceargs get destination getdestination classpath get resource modifications getresourcemodifications add changed addchanged classpath copy i package fragment ipackagefragment pack copy arguments copyarguments java args javaargs copy arguments copyarguments resource args resourceargs core exception coreexception add pack java args javaargs resource mapping resourcemapping mapping java element resource mapping javaelementresourcemapping create pack mapping add mapping resource args resourceargs i package fragment root ipackagefragmentroot java destination javadestination i package fragment root ipackagefragmentroot java args javaargs get destination getdestination java destination javadestination get resource getresource i package fragment ipackagefragment new pack newpack java destination javadestination get package fragment getpackagefragment pack get element name getelementname current pack has sub packages hassubpackages new pack newpack exists pack equals new pack newpack simple move i container icontainer resource destination resourcedestination new pack newpack get resource getresource get parent getparent create inc luding parents createincludingparents resource destination resourcedestination get resource modifications getresourcemodifications add copy delta addcopydelta pack get resource getresource resource args resourceargs i container icontainer resource destination resourcedestination i container icontainer new pack newpack get resource getresource create inc luding parents createincludingparents resource destination resourcedestination copy arguments copyarguments arguments copy arguments copyarguments resource destination resourcedestination resource args resourceargs get execution log getexecutionlog i resource iresource resources to copy resourcestocopy collect resources of int erest collectresourcesofinterest pack resources to copy resourcestocopy length i resource iresource to copy tocopy resources to copy resourcestocopy get resource modifications getresourcemodifications add copy delta addcopydelta to copy tocopy arguments copy i compilation unit icompilationunit unit copy arguments copyarguments java args javaargs copy arguments copyarguments resource args resourceargs add unit java args javaargs resource mapping resourcemapping mapping java element resource mapping javaelementresourcemapping create unit mapping add mapping resource args resourceargs unit get resource getresource get resource modifications getresourcemodifications add copy delta addcopydelta unit get resource getresource resource args resourceargs override build delta builddelta i resource change description factory iresourcechangedescriptionfactory builder f copies fcopies size object element f copies fcopies element i resource iresource resource modifications resourcemodifications build copy delta buildcopydelta builder i resource iresource element copy arguments copyarguments f copy arguments fcopyarguments get resource modifications getresourcemodifications build delta builddelta builder override refactoring participant refactoringparticipant load participants loadparticipants refactoring status refactoringstatus status refactoring processor refactoringprocessor owner string natures sharable participants sharableparticipants shared list refactoring participant refactoringparticipant result array list arraylist f copies fcopies size result add all addall arrays as list aslist participant manager participantmanager load copy participants loadcopyparticipants status owner f copies fcopies copy arguments copyarguments f copy arguments fcopyarguments f participant descriptor filter fparticipantdescriptorfilter natures shared result add all addall arrays as list aslist get resource modifications getresourcemodifications get participants getparticipants status owner natures shared result to array toarray refactoring participant refactoringparticipant result size add object element refactoring arguments refactoringarguments args i participant descriptor filter iparticipantdescriptorfilter filter is not null isnotnull element is not null isnotnull args f copies fcopies add element f copy arguments fcopyarguments add args f participant descriptor filter fparticipantdescriptorfilter add filter