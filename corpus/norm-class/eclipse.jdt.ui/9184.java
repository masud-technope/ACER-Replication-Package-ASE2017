copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse ltk internal core refactoring org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core file buf fers filebuffers file buffers filebuffers org eclipse core file buf fers filebuffers i text file buffer itextfilebuffer org eclipse core file buf fers filebuffers i text file buffer manager itextfilebuffermanager org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits text edit textedit org eclipse text edits undo edit undoedit org eclipse jface text bad location exception badlocationexception org eclipse jface text i document idocument org eclipse ltk core refactoring change org eclipse ltk core refactoring refactoring status refactoringstatus undo document change undodocumentchange change string f name fname undo edit undoedit f undo fundo i document idocument f document fdocument f length flength undo document change undodocumentchange string i document idocument document undo edit undoedit undo f name fname f undo fundo undo f document fdocument document override string get name getname f name fname override object get modified element getmodifiedelement override initialize validation data initializevalidationdata i progress monitor iprogressmonitor f length flength f document fdocument get length getlength override refactoring status refactoringstatus is valid isvalid i progress monitor iprogressmonitor core exception coreexception null progress monitor nullprogressmonitor nls begin task begintask refactoring status refactoringstatus result text changes textchanges is valid isvalid f document fdocument f length flength worked result override change perform i progress monitor iprogressmonitor core exception coreexception undo edit undoedit redo perform edits performedits change result undo document change undodocumentchange get name getname f document fdocument redo result malformed tree exception malformedtreeexception as core exception ascoreexception bad location exception badlocationexception as core exception ascoreexception undo edit undoedit perform edits performedits bad location exception badlocationexception malformed tree exception malformedtreeexception i text file buffer manager itextfilebuffermanager file buffer manager filebuffermanager file buffers filebuffers get text file buffer manager gettextfilebuffermanager i text file buffer itextfilebuffer file buffer filebuffer file buffer manager filebuffermanager get text file buffer gettextfilebuffer f document fdocument file buffer filebuffer file buffer filebuffer is synchronization context requested issynchronizationcontextrequested f undo fundo apply f document fdocument text edit textedit create undo lock waiting computation thread complete lock completion lock completionlock lock undo edit undoedit result undo edit undoedit bad location exception badlocationexception exception bad location exception badlocationexception runnable runnable runnable override completion lock completionlock result f undo fundo apply f document fdocument text edit textedit create undo bad location exception badlocationexception exception completion lock completionlock f done fdone completion lock completionlock notify all notifyall completion lock completionlock file buffer manager filebuffermanager execute runnable completion lock completionlock f done fdone completion lock completionlock wait interrupted exception interruptedexception exception exception result