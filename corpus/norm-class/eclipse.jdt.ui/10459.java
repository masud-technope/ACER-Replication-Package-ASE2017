copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal text java hover java i o exception ioexception org eclipse swt swt org eclipse swt swt exception swtexception org eclipse swt custom styled text styledtext org eclipse swt graphics point org eclipse swt graphics rectangle org eclipse swt widgets display org eclipse swt widgets shell org eclipse core runtime core exception coreexception org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse jface text i document idocument org eclipse jface text i information control iinformationcontrol org eclipse jface text i information control creator iinformationcontrolcreator org eclipse jface text i region iregion org eclipse jface text i text viewer itextviewer org eclipse i editor part ieditorpart org eclipse i workbench part orientation iworkbenchpartorientation org eclipse editors text editorsui org eclipse jdt core i java element ijavaelement org eclipse jdt core i local variable ilocalvariable org eclipse jdt core i member imember org eclipse jdt core i source reference isourcereference org eclipse jdt core i type parameter itypeparameter org eclipse jdt core i type root ityperoot org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast node astnode org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom if statement ifstatement org eclipse jdt core dom javadoc org eclipse jdt core dom node finder nodefinder org eclipse jdt core dom statement org eclipse jdt core dom switch statement switchstatement org eclipse jdt internal corext code manipulation codemanipulation stub utility stubutility org eclipse jdt internal corext dom ast nodes astnodes org eclipse jdt internal corext dom token scanner tokenscanner org eclipse jdt internal corext util messages org eclipse jdt internal corext util strings org eclipse jdt sharedastprovider org eclipse jdt internal java plugin javaplugin org eclipse jdt internal java editor javaeditor java editor javaeditor org eclipse jdt internal java editor javaeditor java source viewer javasourceviewer org eclipse jdt internal text java code reader javacodereader org eclipse jdt internal text java pair matcher javapairmatcher hover info source selected java element javaelement source matching opening curly brace java source hover javasourcehover abstract java editor text hover abstractjavaeditortexthover upward shift location lines bracket hover f upward shift in lines fupwardshiftinlines status text bracket hover string f bracket hover status fbrackethoverstatus java element hover javaelementhover override deprecated string get hover info gethoverinfo i text viewer itextviewer text viewer textviewer i region iregion region i java element ijavaelement result get java elements at getjavaelementsat text viewer textviewer region f upward shift in lines fupwardshiftinlines f bracket hover status fbrackethoverstatus result result length get bracket hover info getbrackethoverinfo text viewer textviewer region result length i java element ijavaelement curr result curr i member imember curr i local variable ilocalvariable curr i type parameter itypeparameter curr i source reference isourcereference string source i source reference isourcereference curr get source getsource string source lines sourcelines get trimmed source gettrimmedsource source curr source lines sourcelines string delim stub utility stubutility get line delimiter used getlinedelimiterused curr source strings concatenate source lines sourcelines delim source java model exception javamodelexception string get bracket hover info getbrackethoverinfo i text viewer itextviewer text viewer textviewer i region iregion region is else part iselsepart i editor part ieditorpart editor get editor geteditor i type root ityperoot editor input editorinput get editor input java element geteditorinputjavaelement editor java editor javaeditor editor input editorinput offset region get offset getoffset i document idocument document text viewer textviewer get document getdocument document document get char getchar offset java pair matcher javapairmatcher matcher java editor javaeditor editor get bracket matcher getbracketmatcher matcher i region iregion match matcher match document offset match string delim stub utility stubutility get line delimiter used getlinedelimiterused editor input editorinput compilation unit compilationunit ast sharedastprovider getast editor input editorinput sharedastprovider wait ast ast node astnode bracket node bracketnode node finder nodefinder perform ast match get offset getoffset match get length getlength bracket node bracketnode ast node astnode node ast node astnode parent bracket node bracketnode get parent getparent parent if statement ifstatement if statement ifstatement parent if stmt parentifstmt if statement ifstatement parent parent if stmt parentifstmt get else statement getelsestatement ast nodes astnodes get inclusive end getinclusiveend parent if stmt parentifstmt get else statement getelsestatement offset parent if stmt parentifstmt get location in parent getlocationinparent if statement ifstatement statement property ast nodes astnodes get inclusive end getinclusiveend parent if stmt parentifstmt get then statement getthenstatement offset is else part iselsepart parent get location in parent getlocationinparent if statement ifstatement statement property parent parent get parent getparent bracket node bracketnode block parent block parent switch statement switchstatement node parent node bracket node bracketnode node start nodestart node length nodelength node body declaration bodydeclaration body declaration bodydeclaration declaration body declaration bodydeclaration node javadoc javadoc declaration get javadoc getjavadoc length of javadoc lengthofjavadoc javadoc javadoc get length getlength delim length node start nodestart node get start position getstartposition length of javadoc lengthofjavadoc node length nodelength node get length getlength length of javadoc lengthofjavadoc node start nodestart node get start position getstartposition node length nodelength ast nodes astnodes get exclusive end getexclusiveend bracket node bracketnode node start nodestart document get line of offset getlineofoffset node start nodestart source offset sourceoffset document get line offset getlineoffset document get line of offset getlineofoffset node start nodestart node length nodelength hovered line hoveredline document get line of offset getlineofoffset offset hovered line hoveredline hovered line hoveredline check visible top index topindex styled text styledtext text widget textwidget text viewer textviewer get text widget gettextwidget text widget textwidget display display display text widget textwidget get display getdisplay swt exception swtexception code swt error widget disposed display sync exec syncexec runnable override top index topindex text viewer textviewer get top index gettopindex top line topline top index topindex top line topline no of source lines noofsourcelines i region iregion end line endline skipped lines skippedlines w line wline java source viewer javasourceviewer text viewer textviewer model line modelline widget line widgetline w line wline java source viewer javasourceviewer text viewer textviewer model line modelline widget line widgetline top line topline w line wline w line wline w line wline match visible content f olded folded bug is else part iselsepart bug get bracket hover info getbrackethoverinfo if statement ifstatement node bracket node bracketnode document editor input editorinput delim no of source lines noofsourcelines no of source lines noofsourcelines no of source lines noofsourcelines skipped lines skippedlines math abs no of source lines noofsourcelines skipped lines skippedlines no of source lines noofsourcelines skipped lines skippedlines end line endline document get line information getlineinformation no of source lines noofsourcelines f upward shift in lines fupwardshiftinlines no of source lines noofsourcelines skipped lines skippedlines f bracket hover status fbrackethoverstatus messages format java hover messages javahovermessages java source hover javasourcehover skipped lines skippedlines integer skipped lines skippedlines no of source lines noofsourcelines end line endline document get line information getlineinformation f upward shift in lines fupwardshiftinlines f upward shift in lines fupwardshiftinlines source length sourcelength end line endline get offset getoffset end line endline get length getlength source offset sourceoffset string source document source offset sourceoffset source length sourcelength string source lines sourcelines get trimmed source gettrimmedsource source editor input editorinput source lines sourcelines string str string no of source lines noofsourcelines system arraycopy source lines sourcelines str no of source lines noofsourcelines source strings concatenate str delim skipped lines skippedlines source source concat delim concat java hover messages javahovermessages java source hover javasourcehover skipped lines symbol skippedlinessymbol f upward shift in lines fupwardshiftinlines source bad location exception badlocationexception java plugin javaplugin log creates hover text closing bracket cases stitching headers visible text editor param if node ifnode node structure param bracket node bracketnode node closing bracket hover text required param document input document text viewer hover popup param editor input editorinput editor input link i type root ityperoot param delim delimiter editor input editorinput hover text closing bracket cases bad location exception badlocationexception attempt performed access existing position document string get bracket hover info getbrackethoverinfo if statement ifstatement if node ifnode ast node astnode bracket node bracketnode i document idocument document i type root ityperoot editor input editorinput string delim bad location exception badlocationexception total skipped lines totalskippedlines string hover text hovertext statement current statement currentstatement if node ifnode get then statement getthenstatement node start nodestart if node ifnode get start position getstartposition current statement currentstatement node length nodelength ast nodes astnodes get exclusive end getexclusiveend current statement currentstatement node start nodestart document get line of offset getlineofoffset node start nodestart source offset sourceoffset document get line offset getlineoffset document get line of offset getlineofoffset node start nodestart node length nodelength current statement currentstatement bracket node bracketnode if node ifnode if node ifnode get else statement getelsestatement else start offset elsestartoffset get next else offset getnextelseoffset if node ifnode get then statement getthenstatement editor input editorinput else start offset elsestartoffset document get line of offset getlineofoffset else start offset elsestartoffset no of total lines nooftotallines no of source lines noofsourcelines no of total lines nooftotallines no of source lines noofsourcelines no of source lines noofsourcelines no of total lines nooftotallines no of skipped lines noofskippedlines no of total lines nooftotallines no of source lines noofsourcelines no of skipped lines noofskippedlines no of source lines noofsourcelines no of skipped lines noofskippedlines no of source lines noofsourcelines i region iregion end line endline document get line information getlineinformation no of source lines noofsourcelines source length sourcelength end line endline get offset getoffset end line endline get length getlength source offset sourceoffset string source document source offset sourceoffset source length sourcelength string source lines sourcelines get trimmed source gettrimmedsource source editor input editorinput source lines sourcelines source strings concatenate source lines sourcelines delim no of skipped lines noofskippedlines source source concat delim concat java hover messages javahovermessages java source hover javasourcehover skipped lines symbol skippedlinessymbol f upward shift in lines fupwardshiftinlines f upward shift in lines fupwardshiftinlines no of source lines noofsourcelines total skipped lines totalskippedlines no of skipped lines noofskippedlines hover text hovertext hover text hovertext source hover text hovertext hover text hovertext concat delim concat source advance if node ifnode reached current statement currentstatement bracket node bracketnode statement then statement thenstatement if node ifnode get then statement getthenstatement statement next statement nextstatement if node ifnode get else statement getelsestatement next statement nextstatement if statement ifstatement current statement currentstatement if statement ifstatement next statement nextstatement get then statement getthenstatement if node ifnode if statement ifstatement next statement nextstatement current statement currentstatement next statement nextstatement if node ifnode update node start nodestart start offset next start offset nextstartoffset get next else offset getnextelseoffset then statement thenstatement editor input editorinput next start offset nextstartoffset node start nodestart next start offset nextstartoffset node start nodestart next statement nextstatement get start position getstartposition current statement currentstatement f upward shift in lines fupwardshiftinlines total skipped lines totalskippedlines f bracket hover status fbrackethoverstatus messages format java hover messages javahovermessages java source hover javasourcehover skipped lines skippedlines integer total skipped lines totalskippedlines hover text hovertext get next else offset getnextelseoffset statement i type root ityperoot editor input editorinput then end thenend ast nodes astnodes get exclusive end getexclusiveend token scanner tokenscanner scanner token scanner tokenscanner editor input editorinput scanner get next start offset getnextstartoffset then end thenend core exception coreexception returns trimmed source lines param source source string code code param java element javaelement java element trimmed source lines code code string get trimmed source gettrimmedsource string source i java element ijavaelement java element javaelement source source remove leading comments removeleadingcomments source string source lines sourcelines strings convert into lines convertintolines source strings trim indentation trimindentation source lines sourcelines java element javaelement get java project getjavaproject source lines sourcelines string remove leading comments removeleadingcomments string source java code reader javacodereader reader java code reader javacodereader i document idocument document document source reader configure for ward reader configureforwardreader document document get length getlength reader read reader read reader get offset getoffset reader close i o exception ioexception reader close i o exception ioexception java plugin javaplugin log source source substring org eclipse jface text i text hover extension itexthoverextension get hover control creator gethovercontrolcreator override i information control creator iinformationcontrolcreator get hover control creator gethovercontrolcreator f upward shift in lines fupwardshiftinlines create information control creator createinformationcontrolcreator f bracket hover status fbrackethoverstatus create information control creator createinformationcontrolcreator editorsui get tooltip affordance string gettooltipaffordancestring org eclipse jdt internal text java hover abstract java editor text hover abstractjavaeditortexthover get information presenter control creator getinformationpresentercontrolcreator override i information control creator iinformationcontrolcreator get information presenter control creator getinformationpresentercontrolcreator f upward shift in lines fupwardshiftinlines create information control creator createinformationcontrolcreator f bracket hover status fbrackethoverstatus create information control creator createinformationcontrolcreator editorsui get tooltip affordance string gettooltipaffordancestring returns control creator param is resizable isresizable code code res izable resizable param status field text statusfieldtext text optional status field code code status field hidden param do shift up doshiftup code code iff link f upward shift in lines fupwardshiftinlines considered control creator i information control creator iinformationcontrolcreator create information control creator createinformationcontrolcreator is resizable isresizable string status field text statusfieldtext do shift up doshiftup i information control creator iinformationcontrolcreator override i information control iinformationcontrol create information control createinformationcontrol shell parent i editor part ieditorpart editor get editor geteditor orientation swt editor i workbench part orientation iworkbenchpartorientation orientation i workbench part orientation iworkbenchpartorientation editor get orientation getorientation source viewer information control sourceviewerinformationcontrol parent is resizable isresizable orientation status field text statusfieldtext override set location setlocation point location point loc location do shift up doshiftup f upward shift in lines fupwardshiftinlines point size compute size constraints computesizeconstraints f upward shift in lines fupwardshiftinlines bracket hover rendered abstract information control manager abstractinformationcontrolmanager f margin y fmarginy location size rectangle trim compute trim computetrim loc point location trim get viewer getviewer get text widget gettextwidget get left margin getleftmargin trim height trim set location setlocation loc override point compute size constraints computesizeconstraints width in chars widthinchars height in chars heightinchars do shift up doshiftup f upward shift in lines fupwardshiftinlines point size constraints sizeconstraints compute size constraints computesizeconstraints width in chars widthinchars height in chars heightinchars height ensure selection bottom anchor abstract information control manager abstractinformationcontrolmanager compute information control location computeinformationcontrollocation point size constraints sizeconstraints compute size constraints computesizeconstraints width in chars widthinchars height in chars heightinchars override set size setsize width height do shift up doshiftup f upward shift in lines fupwardshiftinlines compute correct height hover compute size constraints computesizeconstraints point size compute size constraints computesizeconstraints f upward shift in lines fupwardshiftinlines rectangle trim compute trim computetrim set size setsize width size trim height trim set size setsize width height override i information control creator iinformationcontrolcreator get information presenter control creator getinformationpresentercontrolcreator do shift up doshiftup f upward shift in lines fupwardshiftinlines requests implement aspect stack trace element stacktraceelement element thread current thread currentthread get stack trace getstacktrace nls can move into information control canmoveintoinformationcontrol equals nls element get method name getmethodname nls org eclipse jface text abstract hover information control manager abstracthoverinformationcontrolmanager equals nls element get class name getclassname enrich bracket hover java source hover javasourcehover create information control creator createinformationcontrolcreator is resizable isresizable is resizable isresizable status field text statusfieldtext get information presenter control creator getinformationpresentercontrolcreator