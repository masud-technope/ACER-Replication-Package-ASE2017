licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr compiler impl java buffered reader bufferedreader java io exception ioexception java input stream inputstream java input stream reader inputstreamreader java reader java string reader stringreader java string writer stringwriter java util array list arraylist java util hash map hashmap java util list java util map javax jcr property javax jcr repository exception repositoryexception javax jcr session org apache felix scr annotations component org apache felix scr annotations reference org apache felix scr annotations service org apache sling commons compiler compilation result compilationresult org apache sling commons compiler compilation unit compilationunit org apache sling commons compiler compiler message compilermessage org apache sling commons compiler java compiler javacompiler org apache sling commons compiler options org apache sling jcr api sling repository slingrepository org apache sling jcr compiler jcr java compiler jcrjavacompiler code jcr java compiler impl jcrjavacompilerimpl code component service jcr java compiler jcrjavacompiler jcr java compiler impl jcrjavacompilerimpl jcr java compiler jcrjavacompiler reference java compiler javacompiler compiler reference sling repository slingrepository repository org apache sling jcr compiler jcr java compiler jcrjavacompiler compile java lang string java lang string org apache sling commons compiler options compilation result compilationresult compile string src files srcfiles string output dir outputdir options compiler options compileroptions exception compile src files srcfiles compiler options compileroptions org apache sling jcr compiler jcr java compiler jcrjavacompiler compile java lang string org apache sling commons compiler options compilation result compilationresult compile string src files srcfiles options compiler options compileroptions exception options options options compiler options compileroptions options options compiler options compileroptions open session session session session repository login administrative loginadministrative create compilation units compilation unit compilationunit units compilation unit compilationunit src files srcfiles length units length units create compile unit createcompileunit src files srcfiles session compile map result mapresult compiler compile units options src files srcfiles units session session log out logout map source errors compilation result compilationresult map result mapresult compilation result compilationresult result string src files srcfiles compilation unit compilationunit units result result get errors geterrors result get warnings getwarnings result map string string mapping hash map hashmap string string src files srcfiles length mapping units get main class name getmainclassname java src files srcfiles compilation result compilationresult list compiler message compilermessage map messages mapmessages list compiler message compilermessage msgs msgs msgs size msgs list compiler message compilermessage new msgs newmsgs array list arraylist compiler message compilermessage compiler message compilermessage msg msgs string mapped mapping msg get file getfile new msgs newmsgs add compiler message compilermessage mapped msg get file getfile mapped msg get line getline msg get column getcolumn msg get message getmessage new msgs newmsgs load compiled class loadcompiledclass string class name classname class not found exception classnotfoundexception result load compiled class loadcompiledclass class name classname list compiler message compilermessage get warnings getwarnings map messages mapmessages result get warnings getwarnings list compiler message compilermessage get errors geterrors map messages mapmessages result get errors geterrors did compile didcompile result did compile didcompile misc helpers compilation unit compilationunit create compile unit createcompileunit string source file sourcefile session session repository exception repositoryexception io exception ioexception source source read text resource readtextresource source file sourcefile session string package name packagename extract package name extractpackagename source contents compilation unit compilationunit org apache sling commons compiler compilation unit compilationunit get main class name getmainclassname string get main class name getmainclassname package name packagename get main type name getmaintypename org apache sling commons compiler compilation unit compilationunit get source getsource reader get source getsource io exception ioexception string reader stringreader source contents org apache sling commons compiler compilation unit compilationunit get last modified getlastmodified get last modified getlastmodified source last modified lastmodified string get main type name getmaintypename string class name classname pos source file sourcefile last index of lastindexof java pos class name classname source file sourcefile substring pos trim class name classname source file sourcefile trim pos class name classname last index of lastindexof pos class name classname class name classname substring pos string extract package name extractpackagename string contents buffered reader bufferedreader reader buffered reader bufferedreader string reader stringreader contents string reader read line readline trim starts with startswith substring length substring last index of lastindexof trim io exception ioexception declaration source read text resource readtextresource string resource path resourcepath session session repository exception repositoryexception io exception ioexception source source source string rel prop path relproppath resource path resourcepath substring jcr content jcr data input stream inputstream session get root node getrootnode get property getproperty rel prop path relproppath get stream getstream reader reader input stream reader inputstreamreader utf string writer stringwriter writer string writer stringwriter buffer read read reader read buffer writer write buffer read writer close source contents writer to string tostring string last mod path lastmodpath resource path resourcepath jcr content jcr last modified lastmodified source last modified lastmodified session item exists itemexists last mod path lastmodpath property session get item getitem last mod path lastmodpath get long getlong source reader close io exception ioexception ignore source string contents last modified lastmodified