licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling core impl executor java util collection java util hash map hashmap java util iterator java util linked list linkedlist java util list java util map java util java util tree set treeset java util concurrent concurrent hash map concurrenthashmap org apache commons lang string utils stringutils org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations reference org apache felix scr annotations service org apache sling commons scheduler scheduler org apache sling api health check healthcheck org apache sling api result org apache sling api execution health check execution result healthcheckexecutionresult org apache sling core impl executor health check future healthcheckfuture callback org apache sling util health check filter healthcheckfilter org apache sling util health check metadata healthcheckmetadata org osgi framework bundle context bundlecontext org osgi framework service event serviceevent org osgi framework service listener servicelistener org osgi framework service reference servicereference org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory runs health checks configured cron expression asynchronous execution health check executor healthcheckexecutor service async health check executor asynchealthcheckexecutor component async health check executor asynchealthcheckexecutor service listener servicelistener logger log logger factory loggerfactory get logger getlogger async health check executor asynchealthcheckexecutor reference scheduler scheduler map health check metadata healthcheckmetadata execution result executionresult async results by descriptor asyncresultsbydescriptor concurrent hash map concurrenthashmap health check metadata healthcheckmetadata execution result executionresult map health check metadata healthcheckmetadata health check async job healthcheckasyncjob registered jobs registeredjobs hash map hashmap health check metadata healthcheckmetadata health check async job healthcheckasyncjob bundle context bundlecontext bundle context bundlecontext activate activate component context componentcontext component context componentcontext bundle context bundlecontext component context componentcontext get bundle context getbundlecontext bundle context bundlecontext add service listener addservicelistener count health check filter healthcheckfilter health check filter healthcheckfilter health check filter healthcheckfilter bundle context bundlecontext service reference servicereference health check references healthcheckreferences health check filter healthcheckfilter get tag ged health check service references gettaggedhealthcheckservicereferences string service reference servicereference service reference servicereference health check references healthcheckreferences health check metadata healthcheckmetadata health check metadata healthcheckmetadata health check metadata healthcheckmetadata service reference servicereference is async isasync health check metadata healthcheckmetadata schedule health check schedulehealthcheck health check metadata healthcheckmetadata count log debug scheduled jobs asynchronous health checks count deactivate deactivate component context componentcontext component context componentcontext bundle context bundlecontext remove service listener removeservicelistener bundle context bundlecontext log debug unscheduling jobs asynchronous health checks registered jobs registeredjobs size health check metadata healthcheckmetadata health check descriptor healthcheckdescriptor linked list linkedlist health check metadata healthcheckmetadata registered jobs registeredjobs key set keyset unschedule health check unschedulehealthcheck health check descriptor healthcheckdescriptor override service changed servicechanged service event serviceevent event bundle context bundlecontext deactivated service reference servicereference service reference servicereference event get service reference getservicereference is health check ishealthcheck service reference servicereference is assignable to isassignableto bundle context bundlecontext get bundle getbundle health check healthcheck get name getname is health check ishealthcheck health check metadata healthcheckmetadata health check metadata healthcheckmetadata health check metadata healthcheckmetadata service reference servicereference event type eventtype event get type gettype log debug received service event type health check event type eventtype health check metadata healthcheckmetadata event type eventtype service event serviceevent registered schedule health check schedulehealthcheck health check metadata healthcheckmetadata event type eventtype service event serviceevent unregistering unschedule health check unschedulehealthcheck health check metadata healthcheckmetadata event type eventtype service event serviceevent modified unschedule health check unschedulehealthcheck health check metadata healthcheckmetadata schedule health check schedulehealthcheck health check metadata healthcheckmetadata schedule health check schedulehealthcheck health check metadata healthcheckmetadata descriptor is async isasync descriptor health check async job healthcheckasyncjob health check async job healthcheckasyncjob health check async job healthcheckasyncjob descriptor log debug scheduling job cron expression health check async job healthcheckasyncjob descriptor get async cron expression getasynccronexpression concurrent scheduler add job addjob health check async job healthcheckasyncjob get job id getjobid health check async job healthcheckasyncjob descriptor get async cron expression getasynccronexpression concurrent registered jobs registeredjobs descriptor health check async job healthcheckasyncjob exception log warn schedule job descriptor exec eption exeception unschedule health check unschedulehealthcheck health check metadata healthcheckmetadata descriptor check is async isasync ensure scheduled async checks correctly unschedule d unscheduled changed async sync health check async job healthcheckasyncjob job registered jobs registeredjobs remove descriptor job log debug unscheduling job cron expression job descriptor get async cron expression getasynccronexpression scheduler remove job removejob job get job id getjobid exception log warn unschedule job job exec eption exeception collect async results collectasyncresults list health check metadata healthcheckmetadata health check descriptors healthcheckdescriptors collection health check execution result healthcheckexecutionresult iterator health check metadata healthcheckmetadata checks it checksit health check descriptors healthcheckdescriptors iterator execution result executionresult async results asyncresults tree set treeset execution result executionresult checks it checksit has next hasnext health check metadata healthcheckmetadata health check metadata healthcheckmetadata checks it checksit is async isasync health check metadata healthcheckmetadata execution result executionresult result async results by descriptor asyncresultsbydescriptor health check metadata healthcheckmetadata result result execution result executionresult health check metadata healthcheckmetadata result result status info async health check cron expression health check metadata healthcheckmetadata get async cron expression getasynccronexpression executed async results asyncresults add result async results asyncresults add result remove collection execute check health check executor impl healthcheckexecutorimpl checks it checksit remove log debug adding async async results asyncresults size add all addall async results asyncresults update with updatewith health check execution result healthcheckexecutionresult result is async isasync result get health check metadata gethealthcheckmetadata async results by descriptor asyncresultsbydescriptor result get health check metadata gethealthcheckmetadata execution result executionresult result log debug updated result async result get health check metadata gethealthcheckmetadata result is async isasync health check metadata healthcheckmetadata health check metadata healthcheckmetadata string utils stringutils is not blank isnotblank health check metadata healthcheckmetadata get async cron expression getasynccronexpression health check async job healthcheckasyncjob runnable health check metadata healthcheckmetadata health check descriptor healthcheckdescriptor health check async job healthcheckasyncjob health check metadata healthcheckmetadata health check descriptor healthcheckdescriptor health check descriptor healthcheckdescriptor health check descriptor healthcheckdescriptor string get job id getjobid string job id jobid job health check descriptor healthcheckdescriptor get service id getserviceid job id jobid override log debug running job health check future healthcheckfuture health check future healthcheckfuture health check future healthcheckfuture health check descriptor healthcheckdescriptor bundle context bundlecontext callback override finished health check execution result healthcheckexecutionresult result update with updatewith result thread async scheduler health check future healthcheckfuture override string to string tostring async job health check descriptor healthcheckdescriptor