licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling apt parser internal java string reader stringreader java string writer stringwriter java util hash map hashmap java util map junit framework test case testcase org apache maven doxia macro macro org apache maven doxia macro macro execution exception macroexecutionexception org apache maven doxia macro macro request macrorequest org apache maven doxia sink sink org apache sling apt parser sling apt parser slingaptparser test sling apt parser impl slingaptparserimpl http maven apache org doxia references apt format html apt syntax reference don test details assume tested doxia module nice verify under standin g understanding doxia apt syntax sling apt parser impl test slingaptparserimpltest test case testcase macro resolver macroresolver sling apt parser impl slingaptparserimpl parser sling apt parser impl slingaptparserimpl map string object options string eol system get property getproperty separator options hash map hashmap string object options sling apt parser slingaptparser opt html skeleton sling test macro slingtestmacro macro execute sink sink macro request macrorequest request macro execution exception macroexecutionexception sink text macro get class getclass get simple name getsimplename sink text request get parameter getparameter macro resolve macro resolvemacro string macro id macroid sling test macro slingtestmacro get simple name getsimplename equals macro id macroid sling test macro slingtestmacro parse string input string expected map string object options exception string writer stringwriter string writer stringwriter parser parse string reader stringreader input options assert equals assertequals expected to string tostring trim parse string input string expected exception parse input expected options test null reader testnullreader exception string writer stringwriter string writer stringwriter parser parse fail expected null pointer exception nullpointerexception input reader null pointer exception nullpointerexception fine thats what we expect finethatswhatweexpect test empty testempty exception parse test para a testparaa exception parse para para para para test para b testparab exception parse para para para para test link a testlinka exception parse para http per du perdu para href http per du perdu http per du perdu test link b testlinkb exception parse para http per du perdu text para href http per du perdu text test head a testheada exception parse heading para heading para test macro testmacro exception parse sling test macro slingtestmacro foo macro sling test macro slingtestmacro foo test sections testsections exception parse top para top eol para test list testlist exception parse para para para para test macro not found testmacronotfound exception string bad name badname macro that does not exist macrothatdoesnotexist parse bad name badname apt macro bad name badname test title testtitle exception string input test title title string expected html eol head eol title test title title eol head eol body title eol body eol html parse input expected