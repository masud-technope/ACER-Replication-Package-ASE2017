licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad tests ervices testservices events java io exception ioexception java util hash map hashmap java util map java util concurrent atomic atomic integer atomicinteger javax servlet servlet exception servletexception org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations service org apache sling api sling constants slingconstants org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api servlets sling safe methods servlet slingsafemethodsservlet org apache sling commons json json exception jsonexception org apache sling commons json json writer jsonwriter org osgi service event event org osgi service event event handler eventhandler org slf logger org slf logger factory loggerfactory count number osg i osgi events receive specific topics report clients suppress warnings suppresswarnings serial component metatype service properties property service description paths test servlet property service vendor apache software foundation property sling servlet paths testing events counter eventscounter property sling servlet extensions json property org osgi service event event constants eventconstants event topic sling constants slingconstants topic resource sling constants slingconstants topic resource resolver mapping changed events counter impl eventscounterimpl sling safe methods servlet slingsafemethodsservlet event handler eventhandler events counter eventscounter map string atomic integer atomicinteger count ers counters hash map hashmap string atomic integer atomicinteger logger log logger factory loggerfactory get logger getlogger get class getclass handle event handleevent event event string topic event get topic gettopic atomic integer atomicinteger counter count ers counters topic counter counter atomic integer atomicinteger count ers counters topic counter counter increment and get incrementandget log debug counter topic counter get events count geteventscount string topic atomic integer atomicinteger counter count ers counters topic counter log debug get events count geteventscount returns counter topic counter override do get doget sling http servlet request slinghttpservletrequest request sling http servlet response slinghttpservletresponse response servlet exception servletexception io exception ioexception response set content type setcontenttype application json response set character encoding setcharacterencoding utf json writer jsonwriter json writer jsonwriter response get writer getwriter set tidy settidy object map entry string atomic integer atomicinteger entry count ers counters entry set entryset key entry get key getkey entry get value getvalue end object endobject json exception jsonexception io exception ioexception io exception ioexception json exception jsonexception do get doget init cause initcause