licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide eclipse core internal java file java io exception ioexception java input stream inputstream java util arrays java util collections java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util org apache sling ide eclipse core project util projectutil org apache sling ide eclipse core resource util resourceutil org apache sling ide filter filter org apache sling ide filter filter result filterresult org apache sling ide log logger org apache sling ide serialization serialization data builder serializationdatabuilder org apache sling ide serialization serialization exception serializationexception org apache sling ide serialization serialization kind serializationkind org apache sling ide serialization serialization kind manager serializationkindmanager org apache sling ide serialization serialization manager serializationmanager org apache sling ide transport command org apache sling ide transport command context commandcontext org apache sling ide transport file info fileinfo org apache sling ide transport repository org apache sling ide transport repository exception repositoryexception org apache sling ide transport resource proxy resourceproxy org apache sling ide util path util pathutil org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources resources plugin resourcesplugin org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i status istatus org eclipse core runtime path org eclipse core runtime status org eclipse status handlers statushandlers status manager statusmanager resource change command factory resourcechangecommandfactory creates link command commands correspoding resource add ition addition change removal resource change command factory resourcechangecommandfactory string ignored file names ignoredfilenames hash set hashset ignored file names ignoredfilenames add vlt ignored file names ignoredfilenames add vlt ignore vltignore serialization manager serializationmanager serialization manager serializationmanager resource change command factory resourcechangecommandfactory serialization manager serializationmanager serialization manager serializationmanager serialization manager serializationmanager serialization manager serializationmanager command new command for added or updated newcommandforaddedorupdated repository repository i resource iresource added or updated addedorupdated core exception coreexception add file command addfilecommand repository added or updated addedorupdated io exception ioexception core exception coreexception status status error activator plugin failed updating added or updated addedorupdated command add file command addfilecommand repository repository i resource iresource resource core exception coreexception io exception ioexception resource and info resourceandinfo rai build resource and info buildresourceandinfo resource repository rai command context commandcontext context command context commandcontext project util projectutil load filter loadfilter resource get project getproject rai is only when missing isonlywhenmissing repository new add or update node command newaddorupdatenodecommand context rai get info getinfo rai get resource getresource repository command execution flag commandexecutionflag create missing repository new add or update node command newaddorupdatenodecommand context rai get info getinfo rai get resource getresource convenience method builds resource and info resourceandinfo info specific i resource iresource param resource resource process param repository repository extract serialization resource types build object built core exception coreexception serialization exception serializationexception io exception ioexception resource and info resourceandinfo build resource and info buildresourceandinfo i resource iresource resource repository repository core exception coreexception io exception ioexception ignored file names ignoredfilenames resource get name getname modification timestamp modificationtimestamp resource get session property getsessionproperty resource util resourceutil modification timestamp modification timestamp modificationtimestamp modification timestamp modificationtimestamp resource get modification stamp getmodificationstamp activator get default getdefault get plugin logger getpluginlogger trace change resource timestamp modification timestamp resource modification timestamp modificationtimestamp resource get modification stamp getmodificationstamp resource is team private member isteamprivatemember i resource iresource check ancestors activator get default getdefault get plugin logger getpluginlogger trace skip ping skipping team resource resource file info fileinfo info create file info createfileinfo resource activator get default getdefault get plugin logger getpluginlogger trace built file info fileinfo resource info file sync directory as file syncdirectoryasfile project util projectutil get sync directory full path getsyncdirectoryfullpath resource get project getproject to file tofile i folder ifolder sync directory syncdirectory project util projectutil get sync directory getsyncdirectory resource get project getproject filter filter project util projectutil load filter loadfilter resource get project getproject resource proxy resourceproxy resource proxy resourceproxy serialization manager serializationmanager is serialization file isserializationfile resource get location getlocation toosstring i file ifile file i file ifile resource input stream inputstream contents file get contents getcontents string resource location resourcelocation file get full path getfullpath make relative to makerelativeto sync directory syncdirectory get full path getfullpath to portable string toportablestring resource proxy resourceproxy serialization manager serializationmanager read serialization data readserializationdata resource location resourcelocation contents nor malise resource children normaliseresourcechildren file resource proxy resourceproxy sync directory syncdirectory repository todo correct refer file info fileinfo serialization file file resource nodes overwrite file contents string primary type primarytype string resource proxy resourceproxy get properties getproperties repository jcr primary type repository file equals primary type primarytype todo move logic serialization manager serializationmanager file location file locationfile file info get location getlocation string location file parent locationfileparent location file locationfile get parent getparent end index endindex location file parent locationfileparent length dir length file actual file actualfile file location file parent locationfileparent substring end index endindex string new location newlocation actual file actualfile get absolute path getabsolutepath string new name newname actual file actualfile get name getname string new relative location newrelativelocation actual file actualfile get absolute path getabsolutepath substring sync directory as file syncdirectoryasfile get absolute path getabsolutepath length info file info fileinfo new location newlocation new relative location newrelativelocation new name newname activator get default getdefault get plugin logger getpluginlogger trace adjusted original location resource location resourcelocation new location newlocation io exception ioexception status status status warning activator plugin failed reading file resource get full path getfullpath status manager statusmanager get manager getmanager handle status manager statusmanager log status manager statusmanager dir serialization holder resource get type gettype i resource iresource folder resource get name getname ends with endswith dir i folder ifolder folder i folder ifolder resource i resource iresource content xml contentxml folder find member findmember content xml dir serialization holder process content xml trigger actual work content xml contentxml content xml contentxml exists serialization manager serializationmanager is serialization file isserializationfile content xml contentxml get location getlocation toosstring resource proxy resourceproxy build resource proxy for plain file or folder buildresourceproxyforplainfileorfolder resource sync directory syncdirectory repository filter result filterresult filter result filterresult get filter result getfilterresult resource resource proxy resourceproxy filter filter result filterresult resource and info resourceandinfo resource proxy resourceproxy info prerequisite create root node assume exists resource proxy resourceproxy get path getpath equals suite d suited typically unstructured resource and info resourceandinfo resource proxy resourceproxy resource proxy resourceproxy get path getpath falls deny file info fileinfo create file info createfileinfo i resource iresource resource core exception coreexception resource get type gettype i resource iresource file i project iproject project resource get project getproject i folder ifolder sync folder syncfolder project get folder getfolder project util projectutil get sync directory value getsyncdirectoryvalue project i path ipath relative path relativepath resource get full path getfullpath make relative to makerelativeto sync folder syncfolder get full path getfullpath file info fileinfo info file info fileinfo resource get location getlocation toosstring relative path relativepath toosstring resource get name getname activator get default getdefault get plugin logger getpluginlogger trace built file info fileinfo resource info info filter result resource resource proxy combination resource proxy resourceproxy typically resource deleted filter combinations included file d filed allowed param resource resource filter code code param resource proxy resourceproxy resource proxy filter code code param filter filter filtering result code code filter result filterresult get filter result getfilterresult i resource iresource resource resource proxy resourceproxy resource proxy resourceproxy filter filter filter filter result filterresult file content sync root contentsyncroot project util projectutil get sync directory file getsyncdirectoryfile resource get project getproject string repository path repositorypath resource proxy resourceproxy resource proxy resourceproxy get path getpath get repository path for deleted resource getrepositorypathfordeletedresource resource content sync root contentsyncroot filter result filterresult filter result filterresult filter filter repository path repositorypath activator get default getdefault get plugin logger getpluginlogger trace filter result repository path repositorypath filter result filterresult filter result filterresult string get repository path for deleted resource getrepositorypathfordeletedresource i resource iresource resource file content sync root contentsyncroot i folder ifolder sync folder syncfolder project util projectutil get sync directory getsyncdirectory resource get project getproject i path ipath relative path relativepath resource get full path getfullpath make relative to makerelativeto sync folder syncfolder get full path getfullpath string abs file path absfilepath file content sync root contentsyncroot relative path relativepath toosstring get absolute path getabsolutepath string file path filepath serialization manager serializationmanager get base resource path getbaseresourcepath abs file path absfilepath i path ipath os path ospath path fromosstring file path filepath string repository path repositorypath serialization manager serializationmanager get repository path getrepositorypath os path ospath make relative to makerelativeto sync folder syncfolder get location getlocation make absolute makeabsolute to portable string toportablestring activator get default getdefault get plugin logger getpluginlogger trace repository path deleted resource resource repository path repositorypath repository path repositorypath resource proxy resourceproxy build resource proxy for plain file or folder buildresourceproxyforplainfileorfolder i resource iresource changed resource changedresource i folder ifolder sync directory syncdirectory repository repository core exception coreexception io exception ioexception serialization kind serializationkind serialization kind serializationkind string fallback node type fallbacknodetype changed resource changedresource get type gettype i resource iresource file serialization kind serializationkind serialization kind serializationkind file fallback node type fallbacknodetype repository file i resource iresource folder serialization kind serializationkind serialization kind serializationkind folder fallback node type fallbacknodetype repository folder string resource location resourcelocation changed resource changedresource get full path getfullpath make relative to makerelativeto sync directory syncdirectory get full path getfullpath to portable string toportablestring i path ipath serialization file path serializationfilepath path fromosstring serialization manager serializationmanager get serialization file path getserializationfilepath resource location resourcelocation serialization kind serializationkind i resource iresource serialization resource serializationresource sync directory syncdirectory find member findmember serialization file path serializationfilepath serialization resource serializationresource changed resource changedresource get type gettype i resource iresource folder resource proxy resourceproxy data from covering parent datafromcoveringparent find serialization data from covering parent findserializationdatafromcoveringparent changed resource changedresource sync directory syncdirectory resource location resourcelocation serialization file path serializationfilepath data from covering parent datafromcoveringparent data from covering parent datafromcoveringparent build resource proxy buildresourceproxy resource location resourcelocation serialization resource serializationresource sync directory syncdirectory fallback node type fallbacknodetype repository find serialization data resource covering parent serialization resource valid serialization resource higher file system filesystem serialization resource covers resource param changed resource changedresource resource changed param sync directory syncdirectory content sync directory resource project param resource location resourcelocation resource location relative sync directory param serialization file path serializationfilepath location resource proxy resourceproxy covering parent core exception coreexception io exception ioexception resource proxy resourceproxy find serialization data from covering parent findserializationdatafromcoveringparent i resource iresource changed resource changedresource i folder ifolder sync directory syncdirectory string resource location resourcelocation i path ipath serialization file path serializationfilepath core exception coreexception io exception ioexception todo abst racted abstracted service layer eclipse specific code logger logger activator get default getdefault get plugin logger getpluginlogger logger trace plain folder candidate find covering resource changed resource changedresource get project relative path getprojectrelativepath don is root isroot prevent infinite loop path serialization file path serializationfilepath segment count segmentcount serialization file path serializationfilepath serialization file path serializationfilepath remove last segments removelastsegments i folder ifolder folder with possible serialization file folderwithpossibleserializationfile i folder ifolder sync directory syncdirectory find member findmember serialization file path serializationfilepath folder with possible serialization file folderwithpossibleserializationfile logger trace folder moving level serialization file path serializationfilepath safe specific serialization kind serializationkind scenario valid metadata partial coverage string possible serialization file path possibleserializationfilepath serialization manager serializationmanager get serialization file path getserializationfilepath i folder ifolder folder with possible serialization file folderwithpossibleserializationfile get location getlocation toosstring serialization kind serializationkind metadata partial logger trace serialization data possible serialization file path possibleserializationfilepath serialization manager serializationmanager is serialization file isserializationfile possible serialization file path possibleserializationfilepath i path ipath parent serialization file path parentserializationfilepath path fromosstring possible serialization file path possibleserializationfilepath make relative to makerelativeto sync directory syncdirectory get location getlocation i file ifile possible serialization file possibleserializationfile sync directory syncdirectory get file getfile parent serialization file path parentserializationfilepath possible serialization file possibleserializationfile exists logger trace potential serialization data file exist moving level possible serialization file possibleserializationfile get full path getfullpath resource proxy resourceproxy serialization data serializationdata input stream inputstream contents possible serialization file possibleserializationfile get contents getcontents serialization data serializationdata serialization manager serializationmanager read serialization data readserializationdata parent serialization file path parentserializationfilepath to portable string toportablestring contents string repository path repositorypath serialization manager serializationmanager get repository path getrepositorypath resource location resourcelocation string potential path potentialpath serialization data serializationdata get path getpath covered serialization data serializationdata covers repository path repositorypath logger trace serialization data resource resource covered parent serialization file path parentserializationfilepath potential path potentialpath repository path repositorypath covered resource covered serialization data serializationdata get child getchild repository path repositorypath resource proxy resourceproxy build resource proxy buildresourceproxy string resource location resourcelocation i resource iresource serialization resource serializationresource i folder ifolder sync directory syncdirectory string fallback primary type fallbackprimarytype repository repository core exception coreexception io exception ioexception serialization resource serializationresource i file ifile i file ifile serialization file serializationfile i file ifile serialization resource serializationresource input stream inputstream contents serialization file serializationfile get contents getcontents string serialization file path serializationfilepath serialization resource serializationresource get full path getfullpath make relative to makerelativeto sync directory syncdirectory get full path getfullpath to portable string toportablestring resource proxy resourceproxy resource proxy resourceproxy serialization manager serializationmanager read serialization data readserializationdata serialization file path serializationfilepath contents nor malise resource children normaliseresourcechildren serialization file serializationfile resource proxy resourceproxy sync directory syncdirectory repository resource proxy resourceproxy resource proxy resourceproxy serialization manager serializationmanager get repository path getrepositorypath resource location resourcelocation collections singleton map singletonmap repository jcr primary type object fallback primary type fallbackprimarytype normal ises normalises resource proxy resourceproxy comparing serialization data file system filesystem data param serialization file serializationfile file serialization data param resource proxy resourceproxy resource proxy param sync directory syncdirectory sync directory param repository todo core exception coreexception nor malise resource children normaliseresourcechildren i file ifile serialization file serializationfile resource proxy resourceproxy resource proxy resourceproxy i folder ifolder sync directory syncdirectory repository repository core exception coreexception todo logic moved serialization manager serializationmanager serialization kind manager serializationkindmanager skm serialization kind manager serializationkindmanager skm init repository string primary type primarytype string resource proxy resourceproxy get properties getproperties repository jcr primary type list string mixin types list mixintypeslist get mixin types getmixintypes resource proxy resourceproxy serialization kind serializationkind serialization kind serializationkind skm get serialization kind getserializationkind primary type primarytype mixin types list mixintypeslist serialization kind serializationkind serialization kind serializationkind metadata full repository exception repositoryexception core exception coreexception status i status istatus error activator plugin failed creating serialization data builder serializationdatabuilder get name getname i path ipath serialization directory path serializationdirectorypath serialization file serializationfile get full path getfullpath remove last segments removelastsegments iterator resource proxy resourceproxy child iterator childiterator resource proxy resourceproxy get children getchildren iterator map string i resource iresource extra child resources extrachildresources hash map hashmap i resource iresource member serialization file serializationfile get parent getparent members member equals serialization file serializationfile extra child resources extrachildresources member get name getname member child iterator childiterator has next hasnext resource proxy resourceproxy child child iterator childiterator string child name childname path util pathutil get name getname child get path getpath string os path ospath serialization manager serializationmanager get os path getospath child name childname covered children representation depending child nodes accept directory maps extra child resources extrachildresources remove os path ospath covered children file system filesystem representation resource proxy resourceproxy covers child get path getpath i path ipath child path childpath serialization directory path serializationdirectorypath append os path ospath i resource iresource child resource childresource resources plugin resourcesplugin get workspace getworkspace get root getroot find member findmember child path childpath child resource childresource activator get default getdefault get plugin logger getpluginlogger trace resource serialization data serialized child resource exist file system filesystem serialization file serializationfile child path childpath child iterator childiterator remove i resource iresource extra child resource extrachildresource extra child resources extrachildresources values i path ipath extra child resource path extrachildresourcepath extra child resource extrachildresource get full path getfullpath make relative to makerelativeto sync directory syncdirectory get full path getfullpath make absolute makeabsolute resource proxy resourceproxy add child addchild resource proxy resourceproxy serialization manager serializationmanager get repository path getrepositorypath extra child resource path extrachildresourcepath to portable string toportablestring activator get default getdefault get plugin logger getpluginlogger trace resource serialization data child resource listed serialized child resources serialization file serializationfile extra child resource extrachildresource list string get mixin types getmixintypes resource proxy resourceproxy resource proxy resourceproxy object mixin types prop mixintypesprop resource proxy resourceproxy get properties getproperties repository jcr mixin types mixin types prop mixintypesprop collections empty list emptylist mixin types prop mixintypesprop string collections singleton list singletonlist string mixin types prop mixintypesprop arrays as list aslist string mixin types prop mixintypesprop command new command for removed resources newcommandforremovedresources repository repository i resource iresource removed core exception coreexception remove file command removefilecommand repository removed io exception ioexception core exception coreexception status status error activator plugin failed removing removed command remove file command removefilecommand repository repository i resource iresource resource core exception coreexception io exception ioexception resource is team private member isteamprivatemember i resource iresource check ancestors activator get default getdefault get plugin logger getpluginlogger trace skip ping skipping team resource resource ignored file names ignoredfilenames resource get name getname i folder ifolder sync directory syncdirectory project util projectutil get sync directory getsyncdirectory resource get project getproject filter filter project util projectutil load filter loadfilter sync directory syncdirectory get project getproject filter result filterresult filter result filterresult get filter result getfilterresult resource filter filter result filterresult filter result filterresult deny filter result filterresult filter result filterresult prerequisite string resource location resourcelocation get repository path for deleted resource getrepositorypathfordeletedresource resource project util projectutil get sync directory file getsyncdirectoryfile resource get project getproject verify resource deleted signal content structure rearranged covering parent aggregate i path ipath serialization file path serializationfilepath path fromosstring serialization manager serializationmanager get serialization file path getserializationfilepath resource location resourcelocation serialization kind serializationkind folder resource proxy resourceproxy covering parent data coveringparentdata find serialization data from covering parent findserializationdatafromcoveringparent resource sync directory syncdirectory resource location resourcelocation serialization file path serializationfilepath covering parent data coveringparentdata activator get default getdefault get plugin logger getpluginlogger trace covering resource data repository path resource skip ping skipping deletion performing update covering parent data coveringparentdata get path getpath resource get full path getfullpath file info fileinfo info create file info createfileinfo resource repository new add or update node command newaddorupdatenodecommand command context commandcontext filter info covering parent data coveringparentdata repository new delete node command newdeletenodecommand serialization manager serializationmanager get repository path getrepositorypath resource location resourcelocation command new reorder child nodes command newreorderchildnodescommand repository repository i resource iresource res core exception coreexception resource and info resourceandinfo rai build resource and info buildresourceandinfo res repository rai rai is only when missing isonlywhenmissing repository new reorder child nodes command newreorderchildnodescommand rai get resource getresource io exception ioexception core exception coreexception status status error activator plugin failed reordering child nodes res