licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp jasper xml parser xmlparser java util array list arraylist java util collections java util hash map hashmap java util iterator tree node treenode construct node parent param node tree node treenode string construct node parent param node param parent node parent node tree node treenode string tree node treenode parent parent parent parent parent add child addchild instance variables attributes node keyed attribute instantiate d instantiated required hash map hashmap attributes body text node string body children node instantiated required array list arraylist children node string parent node node tree node treenode parent methods add attribute node replacing existing attribute param attribute add param attribute add attribute addattribute string string attributes attributes hash map hashmap attributes add child node node param node child node add child addchild tree node treenode node children children array list arraylist children add node node attribute exists code code param requested attribute string find attribute findattribute string attributes string attributes iterator attribute names node attributes empty iterator returned iterator find attributes findattributes attributes collections empty list iterator attributes key set keyset iterator child node node code code param desired child element tree node treenode find child findchild string children iterator items children iterator items has next hasnext tree node treenode item tree node treenode items equals item get name getname item iterator children node children empty iterator returned iterator find children findchildren children collections empty list iterator children iterator iterator children node children empty iterator returned param select children iterator find children findchildren string children collections empty list iterator array list arraylist array list arraylist iterator items children iterator items has next hasnext tree node treenode item tree node treenode items equals item get name getname add item iterator body text node string get body getbody body node string get name getname remove existing attribute param attribute remove remove attribute removeattribute string attributes attributes remove remove child node node param node child node remove remove node removenode tree node treenode node children children remove node body text node param body body text set body setbody string body body body string representation tree node treenode string to string tostring string buffer stringbuffer string buffer stringbuffer to string tostring to string tostring methods append string buffer stringbuffer character representation node amount indentation param string buffer stringbuffer append param indent number characters indentation param node tree node treenode printed to string tostring string buffer stringbuffer indent tree node treenode node indent indent reconstruct opening node indent append append append node get name getname iterator names node find attributes findattributes names has next hasnext append string string names append append string node find attribute findattribute append append append reconstruct body text node string body node get body getbody body body length indent append append body append reconstruct child nodes extra indentation iterator children node find children findchildren children has next hasnext tree node treenode child tree node treenode children to string tostring indent child reconstruct closing node marker indent append append append node get name getname append