licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal java byte array input stream bytearrayinputstream java input stream inputstream java serializable java util array list arraylist java util calendar java util java util hash map hashmap java util hash set hashset java util list java util map java util javax jcr node javax jcr repository exception repositoryexception javax jcr node type nodetype node type nodetype org apache commons io utils ioutils org apache jackrabbit util text org apache sling api resource modifiable value map modifiablevaluemap org apache sling api resource value map valuemap org apache sling commons testing jcr repository test base repositorytestbase org apache sling jcr resource jcr resource util jcrresourceutil jcr modifiable value map test jcrmodifiablevaluemaptest repository test base repositorytestbase string root path rootpath node root node rootnode test array string test array string string test array override set up setup exception set up setup root path rootpath test system current time millis currenttimemillis root node rootnode get session getsession get root node getrootnode add node addnode root path rootpath substring unstructured map string object values initial set initialset map entry string object entry values entry set entryset jcr resource util jcrresourceutil set property setproperty root node rootnode entry get key getkey to string tostring entry get value getvalue get session getsession save override tear down teardown exception root node rootnode root node rootnode remove get session getsession save tear down teardown helper data helperdata get helper data gethelperdata exception helper data helperdata path mapper impl pathmapperimpl map string object initial set initialset map string object values hash map hashmap string object values string test values values bool values test streams teststreams exception modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap root node rootnode get helper data gethelperdata input stream inputstream stream byte array input stream bytearrayinputstream test array pvm binary stream get session getsession save modifiable value map modifiablevaluemap modifiable value map modifiablevaluemap jcr modifiable value map jcrmodifiablevaluemap root node rootnode get helper data gethelperdata assert true asserttrue read stream wrote io utils ioutils to string tostring modifiable value map modifiablevaluemap binary input stream inputstream equals test array string test put testput exception get session getsession refresh modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap root node rootnode get helper data gethelperdata assert contains assertcontains pvm initial set initialset assert null assertnull pvm values check pvm pvm string overwrite map string object currently stored currentlystored initial set initialset currently stored currentlystored currently stored currentlystored string overwrite assert contains assertcontains pvm currently stored currentlystored get session getsession save assert contains assertcontains pvm currently stored currentlystored modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap root node rootnode get helper data gethelperdata assert contains assertcontains pvm currently stored currentlystored test serializable testserializable exception root node rootnode get session getsession refresh modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap root node rootnode get helper data gethelperdata assert contains assertcontains pvm initial set initialset assert null assertnull pvm serializable object list string strings array list arraylist string strings add strings add pvm strings check list suppress warnings suppresswarnings unchecked list string strings list string pvm assert equals assertequals strings strings get session getsession save modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap root node rootnode get helper data gethelperdata check list suppress warnings suppresswarnings unchecked list string strings list string pvm serializable assert equals assertequals strings strings test exceptions testexceptions exception root node rootnode get session getsession refresh modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap root node rootnode get helper data gethelperdata pvm fail key null pointer exception nullpointerexception iae pvm fail null pointer exception nullpointerexception iae pvm pvm fail serializable illegal argument exception illegalargumentexception iae string get mixin node types getmixinnodetypes node node repository exception repositoryexception string mixin types mixintypes hash set hashset string node type nodetype mixin node type mixinnodetype node get mixin node types getmixinnodetypes mixin types mixintypes add mixin node type mixinnodetype get name getname mixin types mixintypes test mixins testmixins exception root node rootnode get session getsession refresh node test node testnode root node rootnode add node addnode test mixins testmixins system current time millis currenttimemillis test node testnode get session getsession save modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap test node testnode get helper data gethelperdata string types pvm jcr mixin types mixintypes string string ex node types exnodetypes get mixin node types getmixinnodetypes test node testnode assert equals assertequals ex node types exnodetypes size types types length types string types assert true asserttrue ex node types exnodetypes string new types newtypes string types length system arraycopy types new types newtypes types length new types newtypes types length mix reference able referenceable pvm jcr mixin types mixintypes new types newtypes pvm jcr mixin types mixintypes mix reference able referenceable get session getsession save string new node types newnodetypes get mixin node types getmixinnodetypes test node testnode assert equals assertequals new node types newnodetypes size ex node types exnodetypes size string test path string string string string title string prop prop string prop prop string prop jcr title test names reverse testnamesreverse exception root node rootnode get session getsession refresh node test node testnode root node rootnode add node addnode name test nametest system current time millis currenttimemillis test node testnode get session getsession save modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap test node testnode get helper data gethelperdata pvm test path pvm prop pvm prop pvm prop get session getsession save read property map value map valuemap jcr modifiable value map jcrmodifiablevaluemap test node testnode get helper data gethelperdata assert equals assertequals test path assert equals assertequals prop assert equals assertequals prop assert equals assertequals prop read properties assert equals assertequals test node testnode get property getproperty test path get string getstring assert equals assertequals test node testnode get property getproperty prop get string getstring assert equals assertequals test node testnode get property getproperty prop get string getstring assert equals assertequals test node testnode get property getproperty prop get string getstring checks property names encoding sling test names update testnamesupdate exception root node rootnode get session getsession refresh node test node testnode root node rootnode add node addnode name update test nameupdatetest system current time millis currenttimemillis test node testnode set property setproperty prop test node testnode get session getsession save modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap test node testnode get helper data gethelperdata pvm prop pvm jcr pvm jcr get session getsession save read property map value map valuemap jcr modifiable value map jcrmodifiablevaluemap test node testnode get helper data gethelperdata assert equals assertequals prop assert equals assertequals jcr assert equals assertequals jcr read properties assert equals assertequals test node testnode get property getproperty prop get string getstring assert equals assertequals test node testnode get property getproperty jcr text escape illegal jcr chars escapeillegaljcrchars get string getstring assert equals assertequals test node testnode get property getproperty text escape illegal jcr chars escapeillegaljcrchars jcr get string getstring assert false assertfalse test node testnode has property hasproperty text escape illegal jcr chars escapeillegaljcrchars prop assert false assertfalse test node testnode has property hasproperty text escape illegal jcr chars escapeillegaljcrchars jcr check map supplied values assert contains assertcontains value map valuemap map map string object values map entry string object entry values entry set entryset object stored map entry get key getkey assert equals assertequals values entry get key getkey stored test conversions calendar vice versa reading writing maps test date conversion testdateconversion exception root node rootnode get session getsession refresh prepare values date value datevalue calendar calendar value calendarvalue calendar get instance getinstance calendar value calendarvalue set time settime date value datevalue date value datevalue calendar calendar value calendarvalue calendar get instance getinstance calendar value calendarvalue set time settime date value datevalue date value datevalue calendar calendar value calendarvalue calendar get instance getinstance calendar value calendarvalue set time settime date value datevalue write property node test node testnode root node rootnode add node addnode date conversion test dateconversiontest system current time millis currenttimemillis test node testnode set property setproperty prop calendar value calendarvalue test node testnode get session getsession save write property map modifiable value map modifiablevaluemap pvm jcr modifiable value map jcrmodifiablevaluemap test node testnode get helper data gethelperdata pvm prop date value datevalue pvm prop calendar value calendarvalue get session getsession save read property map value map valuemap jcr modifiable value map jcrmodifiablevaluemap test node testnode get helper data gethelperdata assert equals assertequals date value datevalue prop assert equals assertequals calendar value calendarvalue prop calendar assert equals assertequals date value datevalue prop assert equals assertequals calendar value calendarvalue prop calendar assert equals assertequals date value datevalue prop assert equals assertequals calendar value calendarvalue prop calendar check types assert true asserttrue prop calendar assert true asserttrue prop input stream inputstream assert true asserttrue prop calendar read properties assert equals assertequals calendar value calendarvalue test node testnode get property getproperty prop get date getdate assert equals assertequals calendar value calendarvalue test node testnode get property getproperty prop get date getdate