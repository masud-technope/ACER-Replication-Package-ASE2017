licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution java io exception ioexception java util array list arraylist java util hash map hashmap java util iterator java util list java util map java util objects java util uuid junit framework org apache http name value pair namevaluepair org apache http client entity url encoded form entity urlencodedformentity org apache http entity byte array entity bytearrayentity org apache http message basic name value pair basicnamevaluepair org apache jackrabbit util text org apache sling commons json json array jsonarray org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling commons json json t okener jsontokener org apache sling distribution distribution request type distributionrequesttype org apache sling testing tools http request org apache sling testing tools sling sling client slingclient org apache sling testing tools sling sling instance slinginstance org junit assert equals assertequals org junit assert false assertfalse org junit assert true asserttrue utils distribution distribution utils distributionutils string json selector json string distribution root path libs sling distribution string distributor user test distributor user testdistributoruser string distributor password json object jsonobject get resource getresource sling instance slinginstance sling instance slinginstance string path io exception ioexception json exception jsonexception path ends with endswith json selector path json selector request request sling instance slinginstance get request builder getrequestbuilder build get request buildgetrequest path with credentials withcredentials sling instance slinginstance get server username getserverusername sling instance slinginstance get server password getserverpassword list tests json format string content sling instance slinginstance get request executor getrequestexecutor execute request assert status assertstatus assert content type assertcontenttype application json get content getcontent parse json response precise testing json object jsonobject json json object jsonobject json t okener jsontokener content json string assert post resource with parameters assertpostresourcewithparameters sling instance slinginstance sling instance slinginstance status string path string parameters io exception ioexception request request sling instance slinginstance get request builder getrequestbuilder build post request buildpostrequest path parameters assert equals assertequals parameters length list name value pair namevaluepair value pair list valuepairlist array list arraylist name value pair namevaluepair parameters length value pair list valuepairlist add basic name value pair basicnamevaluepair parameters parameters url encoded form entity urlencodedformentity entity url encoded form entity urlencodedformentity value pair list valuepairlist request with entity withentity entity sling instance slinginstance get request executor getrequestexecutor execute request with credentials withcredentials distributor user distributor password assert status assertstatus status get content getcontent string assert post resource assertpostresource sling instance slinginstance sling instance slinginstance status string path bytes io exception ioexception request request sling instance slinginstance get request builder getrequestbuilder build post request buildpostrequest path bytes byte array entity bytearrayentity entity byte array entity bytearrayentity bytes request with entity withentity entity sling instance slinginstance get request executor getrequestexecutor execute request with credentials withcredentials sling instance slinginstance get server username getserverusername sling instance slinginstance get server password getserverpassword assert status assertstatus status get content getcontent set array properties setarrayproperties sling instance slinginstance sling instance slinginstance string resource string property string values io exception ioexception list string parameters array list arraylist string string values parameters add property parameters add assert post resource with parameters assertpostresourcewithparameters sling instance slinginstance resource parameters to array toarray string assert response contains assertresponsecontains sling instance slinginstance sling instance slinginstance string resource string parameters io exception ioexception resource ends with endswith json selector resource json selector string content sling instance slinginstance get request executor getrequestexecutor execute sling instance slinginstance get request builder getrequestbuilder build get request buildgetrequest resource with credentials withcredentials sling instance slinginstance get server username getserverusername sling instance slinginstance get server password getserverpassword get content getcontent replace all replaceall trim string parameter parameters assert true asserttrue parameter contained content content parameter distribute sling instance slinginstance sling instance slinginstance string agent name agentname distribution request type distributionrequesttype action string paths io exception ioexception string agent resource agentresource agent url agenturl agent name agentname execute distribution request executedistributionrequest sling instance slinginstance agent resource agentresource action paths distribute deep distributedeep sling instance slinginstance sling instance slinginstance string agent name agentname distribution request type distributionrequesttype action string paths io exception ioexception string agent resource agentresource agent url agenturl agent name agentname execute distribution request executedistributionrequest sling instance slinginstance agent resource agentresource action paths string execute distribution request executedistributionrequest sling instance slinginstance sling instance slinginstance status string resource distribution request type distributionrequesttype action deep string paths io exception ioexception list string args array list arraylist string args add action args add action to string tostring deep args add deep args add paths string path paths args add path args add path assert post resource with parameters assertpostresourcewithparameters sling instance slinginstance status resource args to array toarray string args size string do export doexport sling instance slinginstance sling instance slinginstance string exporter name exportername distribution request type distributionrequesttype action string paths io exception ioexception string exporter url exporterurl exporter url exporterurl exporter name exportername execute distribution request executedistributionrequest sling instance slinginstance exporter url exporterurl action paths string do import doimport sling instance slinginstance sling instance slinginstance string importer name importername bytes io exception ioexception string agent resource agentresource importer url importerurl importer name importername assert post resource assertpostresource sling instance slinginstance agent resource agentresource bytes delete node deletenode sling instance slinginstance sling instance slinginstance string path io exception ioexception assert post resource with parameters assertpostresourcewithparameters sling instance slinginstance path operation delete assert exists assertexists sling client slingclient sling client slingclient string path exception retries sling client slingclient exists path retries thread sleep assert true asserttrue path path doesn exist sling client slingclient exists path assert not exists assertnotexists sling client slingclient sling client slingclient string path exception retries sling client slingclient exists path retries thread sleep assert false assertfalse path path exists sling client slingclient exists path string create random node createrandomnode sling client slingclient sling client slingclient string parent path parentpath exception string node path nodepath parent path parentpath uuid randomuuid sling client slingclient exists parent path parentpath create node createnode sling client slingclient parent path parentpath sling client slingclient create node createnode node path nodepath jcr primary type primarytype unstructured prop name propname prop value propvalue node path nodepath create node createnode sling client slingclient sling client slingclient string path io exception ioexception sling client slingclient exists path string parent path parentpath text get relative parent getrelativeparent path create node createnode sling client slingclient parent path parentpath sling client slingclient create node createnode path jcr primary type primarytype unstructured string agent root url agentrooturl distribution root path services agents string agent url agenturl string agent name agentname agent root url agentrooturl agent name agentname string queue url queueurl string agent name agentname agent url agenturl agent name agentname queues string log url logurl string agent name agentname agent url agenturl agent name agentname log string author agent config url authoragentconfigurl string agent name agentname distribution root path settings agents agent name agentname string publish agent config url publishagentconfigurl string agent name agentname distribution root path settings agents agent name agentname string importer root url importerrooturl distribution root path services import ers importers string importer url importerurl string importer name importername importer root url importerrooturl importer name importername string exporter root url exporterrooturl distribution root path services export ers exporters string exporter url exporterurl string exporter name exportername exporter root url exporterrooturl exporter name exportername string importer config url importerconfigurl string importer name importername distribution root path settings import ers importers importer name importername string exporter config url exporterconfigurl string exporter name exportername distribution root path settings export ers exporters exporter name exportername string trigger root url triggerrooturl distribution root path services triggers string trigger url triggerurl string trigger name triggername trigger root url triggerrooturl trigger name triggername string trigger event url triggereventurl string trigger name triggername trigger root url triggerrooturl trigger name triggername event assert empty folder assertemptyfolder sling instance slinginstance instance sling client slingclient client string path io exception ioexception json exception jsonexception client exists path list string children get children for folder getchildrenforfolder instance path assert equals assertequals children size list string get children for folder getchildrenforfolder sling instance slinginstance instance string path io exception ioexception json exception jsonexception list string result array list arraylist string json object jsonobject author json authorjson get resource getresource instance path json iterator string author json authorjson has next hasnext string key key result add key result map string map string object get queues getqueues sling instance slinginstance instance string agent name agentname io exception ioexception json exception jsonexception map string map string object result hash map hashmap string map string object json object jsonobject json get resource getresource instance queue url queueurl agent name agentname infinity json array jsonarray items json getjsonarray items items length string queue name queuename items get string getstring map string object queue properties queueproperties hash map hashmap string object json object jsonobject queue json getjsonobject queue name queuename queue properties queueproperties empty queue get boolean getboolean empty queue properties queueproperties items count itemscount queue items count itemscount result queue name queuename queue properties queueproperties result list map string object get queue items getqueueitems sling instance slinginstance instance string queue url queueurl io exception ioexception json exception jsonexception list map string object result array list arraylist map string object json object jsonobject json get resource getresource instance queue url queueurl infinity json array jsonarray items json getjsonarray items items length string item id itemid items get string getstring json object jsonobject queue item queueitem json getjsonobject item id itemid map string object item properties itemproperties hash map hashmap string object item properties itemproperties queue item queueitem item properties itemproperties paths queue item queueitem paths item properties itemproperties action queue item queueitem action item properties itemproperties user id userid queue item queueitem user id userid item properties itemproperties attempts queue item queueitem attempts item properties itemproperties time queue item queueitem time item properties itemproperties queue item queueitem result add item properties itemproperties result