licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling models impl org junit org mockito mockito java util collections java util hash map hashmap java util hashtable java util map org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource resource org apache sling api resource value map valuemap org apache sling api scripting sling bindings slingbindings org apache sling api scripting sling script helper slingscripthelper org apache sling api wrappers value map decorator valuemapdecorator org apache sling models impl injectors bindings injector bindingsinjector org apache sling models impl injectors child resource injector childresourceinjector org apache sling models impl injectors os gi service injector osgiserviceinjector org apache sling models impl injectors request attribute injector requestattributeinjector org apache sling models impl injectors value map injector valuemapinjector org apache sling models test models testmodels classes injector specific annotation model injectorspecificannotationmodel org junit org junit test org junit runner run with runwith org mockito mock org mockito mockito org mockito run ners runners mockito unit runner mockitojunitrunner org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework invalid syntax exception invalidsyntaxexception org osgi framework service reference servicereference org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory run with runwith mockito unit runner mockitojunitrunner injector specific annotation test injectorspecificannotationtest mock component context componentcontext component ctx componentctx mock bundle context bundlecontext bundle context bundlecontext mock sling http servlet request slinghttpservletrequest request mock logger log model adapter factory modeladapterfactory factory os gi service injector osgiserviceinjector osgi injector osgiinjector setup component ctx componentctx get bundle context getbundlecontext then return thenreturn bundle context bundlecontext component ctx componentctx get properties getproperties then return thenreturn hashtable string object factory model adapter factory modeladapterfactory factory activate component ctx componentctx osgi injector osgiinjector os gi service injector osgiserviceinjector osgi injector osgiinjector activate component ctx componentctx bindings injector bindingsinjector bindings injector bindingsinjector bindings injector bindingsinjector value map injector valuemapinjector value map injector valuemapinjector value map injector valuemapinjector child resource injector childresourceinjector child resource injector childresourceinjector child resource injector childresourceinjector request attribute injector requestattributeinjector request attribute injector requestattributeinjector request attribute injector requestattributeinjector factory bind injector bindinjector bindings injector bindingsinjector collections string object singleton map singletonmap constants service factory bind injector bindinjector value map injector valuemapinjector collections string object singleton map singletonmap constants service factory bind injector bindinjector child resource injector childresourceinjector collections string object singleton map singletonmap constants service factory bind injector bindinjector request attribute injector requestattributeinjector collections string object singleton map singletonmap constants service factory bind injector bindinjector osgi injector osgiinjector collections string object singleton map singletonmap constants service factory bind static inject annotation processor factory bindstaticinjectannotationprocessorfactory bindings injector bindingsinjector collections string object singleton map singletonmap constants service factory bind inject annotation processor factory bindinjectannotationprocessorfactory value map injector valuemapinjector collections string object singleton map singletonmap constants service factory bind inject annotation processor factory bindinjectannotationprocessorfactory child resource injector childresourceinjector collections string object singleton map singletonmap constants service factory bind static inject annotation processor factory bindstaticinjectannotationprocessorfactory request attribute injector requestattributeinjector collections string object singleton map singletonmap constants service factory bind static inject annotation processor factory bindstaticinjectannotationprocessorfactory osgi injector osgiinjector collections string object singleton map singletonmap constants service sling bindings slingbindings bindings sling bindings slingbindings bindings set log setlog log mockito request get attribute getattribute sling bindings slingbindings get name getname then return thenreturn bindings test test simple value model field testsimplevaluemodelfield map string object map hash map hashmap string object map map value map valuemap value map decorator valuemapdecorator map resource res mock resource res adapt to adaptto value map valuemap then return thenreturn request get resource getresource then return thenreturn res injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals model get first getfirst assert equals assertequals model get second getsecond test test order for value annotation field testorderforvalueannotationfield correct injection log adapted map coming request attribute logger log from value map logfromvaluemap logger factory loggerfactory get logger getlogger get class getclass map string object map hash map hashmap string object map map log log from value map logfromvaluemap value map valuemap value map decorator valuemapdecorator map resource res mock resource res adapt to adaptto value map valuemap then return thenreturn request get resource getresource then return thenreturn res injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals model get first getfirst assert equals assertequals log from value map logfromvaluemap model get log getlog test test gi service field testosgiservicefield invalid syntax exception invalidsyntaxexception service reference servicereference mock service reference servicereference logger log mock logger bundle context bundlecontext get service references getservicereferences logger get name getname then return thenreturn service reference servicereference bundle context bundlecontext get service getservice then return thenreturn log injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals log model get service getservice test test script variable field testscriptvariablefield invalid syntax exception invalidsyntaxexception sling bindings slingbindings bindings sling bindings slingbindings sling script helper slingscripthelper helper mock sling script helper slingscripthelper bindings set sling setsling helper request get attribute getattribute sling bindings slingbindings get name getname then return thenreturn bindings injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals helper model get helper gethelper test test request attribute field testrequestattributefield invalid syntax exception invalidsyntaxexception object attribute object request get attribute getattribute attribute then return thenreturn attribute injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals attribute model get request attribute getrequestattribute test test child resource field testchildresourcefield resource res mock resource resource child mock resource res get child getchild child then return thenreturn child request get resource getresource then return thenreturn res injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals child model get child resource getchildresource test test simple value model constructor testsimplevaluemodelconstructor map string object map hash map hashmap string object map map value map valuemap value map decorator valuemapdecorator map resource res mock resource res adapt to adaptto value map valuemap then return thenreturn request get resource getresource then return thenreturn res org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals model get first getfirst assert equals assertequals model get second getsecond test test order for value annotation constructor testorderforvalueannotationconstructor correct injection log adapted map coming request attribute logger log from value map logfromvaluemap logger factory loggerfactory get logger getlogger get class getclass map string object map hash map hashmap string object map map log log from value map logfromvaluemap value map valuemap value map decorator valuemapdecorator map resource res mock resource res adapt to adaptto value map valuemap then return thenreturn request get resource getresource then return thenreturn res org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals model get first getfirst assert equals assertequals log from value map logfromvaluemap model get log getlog test test gi service constructor testosgiserviceconstructor invalid syntax exception invalidsyntaxexception service reference servicereference mock service reference servicereference logger log mock logger bundle context bundlecontext get service references getservicereferences logger get name getname then return thenreturn service reference servicereference bundle context bundlecontext get service getservice then return thenreturn log org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals log model get service getservice test test script variable constructor testscriptvariableconstructor invalid syntax exception invalidsyntaxexception sling bindings slingbindings bindings sling bindings slingbindings sling script helper slingscripthelper helper mock sling script helper slingscripthelper bindings set sling setsling helper request get attribute getattribute sling bindings slingbindings get name getname then return thenreturn bindings org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals helper model get helper gethelper test test request attribute constructor testrequestattributeconstructor invalid syntax exception invalidsyntaxexception object attribute object request get attribute getattribute attribute then return thenreturn attribute org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals attribute model get request attribute getrequestattribute test test child resource constructor testchildresourceconstructor resource res mock resource resource child mock resource res get child getchild child then return thenreturn child request get resource getresource then return thenreturn res org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel model factory get adapter getadapter request org apache sling models test models testmodels classes constructorinjection injector specific annotation model injectorspecificannotationmodel assert not null assertnotnull instanciate model model assert equals assertequals child model get child resource getchildresource