licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting ruby java buffered reader bufferedreader java reader javax script bindings javax script script context scriptcontext javax script script exception scriptexception org apache sling api scripting sling bindings slingbindings org apache sling api scripting sling script helper slingscripthelper org apache sling scripting api abstract sling script engine abstractslingscriptengine org jruby ruby org jruby ruby module rubymodule org jruby ruby symbol rubysymbol org jruby java support javasupport java embed utils javaembedutils org jruby runtime built in builtin i ruby object irubyobject j ruby jruby script engine scriptengine erb script engine erbscriptengine abstract sling script engine abstractslingscriptengine ruby runtime ruby symbol rubysymbol binding sym bindingsym ruby module rubymodule erb module erbmodule erb script engine erbscriptengine erb script engine factory erbscriptenginefactory factory factory class loader classloader old class loader oldclassloader thread current thread currentthread get context class loader getcontextclassloader thread current thread currentthread set context class loader setcontextclassloader get class getclass get class loader getclassloader runtime ruby new instance newinstance runtime eval script let evalscriptlet require java require erb send include erb util erb def binding binding attr reader props def props props props instance eval def props erb module erbmodule runtime get class from path getclassfrompath erb binding sym bindingsym ruby symbol rubysymbol new symbol newsymbol runtime binding thread current thread currentthread set context class loader setcontextclassloader old class loader oldclassloader object eval reader script script context scriptcontext script context scriptcontext script exception scriptexception bindings bindings script context scriptcontext get bindings getbindings script context scriptcontext engine scope sling script helper slingscripthelper helper sling script helper slingscripthelper bindings sling bindings slingbindings sling helper script exception scriptexception sling script helper slingscripthelper missing bindings ensure request helper get request getrequest equals helper get request getrequest get method getmethod script exception scriptexception j ruby jruby scripting supports requests class loader classloader old class loader oldclassloader thread current thread currentthread get context class loader getcontextclassloader thread current thread currentthread set context class loader setcontextclassloader get class getclass get class loader getclassloader string buffer stringbuffer script string scriptstring string buffer stringbuffer buffered reader bufferedreader buf fered script bufferedscript buffered reader bufferedreader script string next line nextline buf fered script bufferedscript read line readline next line nextline script string scriptstring append next line nextline script string scriptstring append next line nextline buf fered script bufferedscript read line readline i ruby object irubyobject script ruby string scriptrubystring java embed utils javaembedutils java to ruby javatoruby runtime script string scriptstring to string tostring i ruby object irubyobject erb i ruby object irubyobject java embed utils javaembedutils invoke method invokemethod runtime erb module erbmodule object script ruby string scriptrubystring i ruby object irubyobject java embed utils javaembedutils invoke method invokemethod runtime erb props object java embed utils javaembedutils java to ruby javatoruby runtime bindings i ruby object irubyobject i ruby object irubyobject binding i ruby object irubyobject java embed utils javaembedutils invoke method invokemethod runtime erb send object binding sym bindingsym i ruby object irubyobject script context scriptcontext get writer getwriter write string java embed utils javaembedutils invoke method invokemethod runtime erb result object binding string throwable script exception scriptexception script exception scriptexception failure running ruby script init cause initcause thread current thread currentthread set context class loader setcontextclassloader old class loader oldclassloader