licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide impl resource serialization java byte array output stream bytearrayoutputstream java file java io exception ioexception java input stream inputstream java util hash map hashmap java util map java util map entry java util java util tree map treemap javax xml parsers parser configuration exception parserconfigurationexception javax xml parsers sax parser saxparser javax xml parsers sax parser factory saxparserfactory javax xml transform output keys outputkeys javax xml transform transformer javax xml transform transformer configuration exception transformerconfigurationexception javax xml transform transformer factory configuration error transformerfactoryconfigurationerror javax xml transform sax sax transformer factory saxtransformerfactory javax xml transform sax transformer handler transformerhandler javax xml transform stream stream result streamresult org apache sling ide serialization serialization data serializationdata org apache sling ide serialization serialization data builder serializationdatabuilder org apache sling ide serialization serialization exception serializationexception org apache sling ide serialization serialization kind serializationkind org apache sling ide serialization serialization manager serializationmanager org apache sling ide transport repository org apache sling ide transport resource proxy resourceproxy org xml sax attributes org xml sax input source inputsource org xml sax sax exception saxexception org xml sax helpers attributes impl attributesimpl org xml sax helpers default handler defaulthandler simple xml serialization manager simplexmlserializationmanager serialization manager serializationmanager serialization data builder serializationdatabuilder string tag property property string att property string tag resource resource string content xml content xml override is serialization file isserializationfile string file path filepath file path filepath ends with endswith content xml override string get serialization file path getserializationfilepath string base file path basefilepath serialization kind serializationkind serialization kind serializationkind base file path basefilepath file separator char separatorchar content xml override string get base resource path getbaseresourcepath string serialization file path serializationfilepath serialization file path serializationfilepath ends with endswith content xml illegal argument exception illegalargumentexception file path serialization file path serializationfilepath file separator char separatorchar content xml content xml equals serialization file path serializationfilepath serialization file path serializationfilepath substring serialization file path serializationfilepath length content xml length override resource proxy resourceproxy read serialization data readserializationdata string file path filepath input stream inputstream source io exception ioexception sax parser factory saxparserfactory factory sax parser factory saxparserfactory new instance newinstance sax parser saxparser sax parser saxparser factory newsaxparser serialization data handler serializationdatahandler serialization data handler serializationdatahandler sax parser saxparser parse input source inputsource source resource proxy resourceproxy file path filepath get result getresult parser configuration exception parserconfigurationexception sax exception saxexception runtime exception runtimeexception override serialization data builder serializationdatabuilder new builder newbuilder repository repository file content sync root contentsyncroot serialization exception serializationexception override serialization data serializationdata build serialization data buildserializationdata file content sync root contentsyncroot resource proxy resourceproxy resource serialization exception serializationexception resource map string object content resource get properties getproperties content content is empty isempty sax transformer factory saxtransformerfactory sax transformer factory saxtransformerfactory sax transformer factory saxtransformerfactory new instance newinstance byte array output stream bytearrayoutputstream result byte array output stream bytearrayoutputstream stream result streamresult stream result streamresult result transformer handler transformerhandler handler new transformer handler newtransformerhandler transformer handler get transformer gettransformer set output property setoutputproperty output keys outputkeys indent handler set result setresult handler start document startdocument start element startelement handler tag resource entry string object entry set entryset tree map treemap content entry set entryset map entry string object property entry set entryset object property get value getvalue string string tag name tagname property get key getkey string tag value tagvalue string attributes impl attributesimpl attributes attributes impl attributesimpl attributes add attribute addattribute att property att property tag name tagname handler start element startelement tag property tag property attributes handler characters tag value tagvalue to char array tochararray tag value tagvalue length handler end element endelement tag property tag property todo multi value d valued properties primitives system err println handle property property get key getkey type get class getclass end element endelement handler tag resource handler end document enddocument todo add serialization type serialization data serializationdata resource get path getpath content xml result to byte array tobytearray transformer configuration exception transformerconfigurationexception transformer factory configuration error transformerfactoryconfigurationerror sax exception saxexception runtime exception runtimeexception override string get repository path getrepositorypath string os path ospath os path ospath override string get os path getospath string repository path repositorypath repository path repositorypath start element startelement transformer handler transformerhandler handler string tag name tagname sax exception saxexception handler start element startelement tag name tagname tag name tagname end element endelement transformer handler transformerhandler handler string tag name tagname sax exception saxexception handler end element endelement tag name tagname tag name tagname javadoc org apache sling ide serialization serialization manager serializationmanager destroy destroy serialization data handler serializationdatahandler default handler defaulthandler map string object result string property name propertyname override start document startdocument sax exception saxexception result hash map hashmap override start element startelement string uri string local name localname string q name qname attributes attributes sax exception saxexception tag property equals q name qname property name propertyname attributes get value getvalue att property override characters start length sax exception saxexception property name propertyname result property name propertyname string start length override end element endelement string uri string local name localname string q name qname sax exception saxexception tag property equals q name qname property name propertyname map string object get result getresult result