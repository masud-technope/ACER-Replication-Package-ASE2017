licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling nosql mongodb resource provider resourceprovider impl java util array list arraylist java util iterator java util list java util regex pattern org apache sling api resource resource util resourceutil org apache sling nosql adapter abstract no sql adapter abstractnosqladapter org apache sling nosql adapter multi value mode multivaluemode org apache sling nosql adapter no sql data nosqldata org bson document org slf logger org slf logger factory loggerfactory mongodb duplicate key exception duplicatekeyexception mongodb mongo client mongoclient mongodb client find iterable finditerable mongodb client mongo collection mongocollection mongodb client mongo cursor mongocursor mongodb client mongo data base mongodatabase mongodb client model filters mongodb client model index options indexoptions mongodb client model update options updateoptions mongodb client result delete result deleteresult mongodb client result update result updateresult link org apache sling nosql adapter no sql adapter nosqladapter implementation mongodb mongo no sql adapter mongodbnosqladapter abstract no sql adapter abstractnosqladapter string path string parent path parent path parentpath string data data mongo collection mongocollection document collection logger log logger factory loggerfactory get logger getlogger mongo no sql adapter mongodbnosqladapter param mongo client mongoclient mongodb client param database mongodb database param collection mongodb collection mongo no sql adapter mongodbnosqladapter mongo client mongoclient mongo client mongoclient string database string collection mongo data base mongodatabase mongo client mongoclient get data base getdatabase database collection get collection getcollection collection create parent path field exist document paren path t index parenpathtindex document parent path parentpath collection create index createindex paren path t index parenpathtindex duplicate key exception duplicatekeyexception throwable log error unable create parent path parentpath get message getmessage create unique path field exist document path index pathindex document path index options indexoptions idx options idxoptions index options indexoptions idx options idxoptions unique collection create index createindex path index pathindex idx options idxoptions duplicate key exception duplicatekeyexception throwable log error unable create unique path get message getmessage override no sql data nosqldata string path document env elope envelope collection find filters path path env elope envelope no sql data nosqldata path env elope envelope data document multi value mode multivaluemode lists override iterator no sql data nosqldata get children getchildren string parent path parentpath list no sql data nosqldata children array list arraylist find iterable finditerable document result collection find filters parent path parent path parentpath mongo cursor mongocursor document env elopes envelopes result iterator env elopes envelopes has next hasnext document env elope envelope env elopes envelopes string path env elope envelope path string document data env elope envelope data document children add no sql data nosqldata path data multi value mode multivaluemode lists children iterator override store no sql data nosqldata data document env elope envelope document env elope envelope path data get path getpath env elope envelope data document data get properties getproperties multi value mode multivaluemode lists list children query efficiency store parent path string parent path parentpath resource util resourceutil get parent getparent data get path getpath parent path parentpath env elope envelope parent path parent path parentpath update result updateresult result collection replace one replaceone filters path data get path getpath env elope envelope update options updateoptions upsert entry inserted existing replaced result get matched count getmatchedcount override delete recursive deleterecursive string path pattern desc end ants and self descendantsandself pattern compile pattern quote path delete result deleteresult result collection delete many deletemany filters regex path desc end ants and self descendantsandself document deleted result get deleted count getdeletedcount