licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets resolver internal helper java util iterator java util org apache commons lang array utils arrayutils org apache commons lang string utils stringutils org apache sling api sling http servlet request slinghttpservletrequest org apache sling api request request path info requestpathinfo org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling servlets resolver internal servlet resolver constants servletresolverconstants org apache sling servlets resolver internal resource servlet resource provider factory servletresourceproviderfactory code resource collector resourcecollector code single method link get servlets getservlets resource resolver resourceresolver find ordered collection code resource code instances find servlet script handle request resource resource collector resourcecollector abstract resource collector abstractresourcecollector special returned link calculate prefix method weight calculateprefixmethodweight resource string resource suitable handle request location prefix request selectors request extension code integer min code weight match integer min request method script string method name methodname request selectors string converted real tive realtive path request selectors string request selectors requestselectors number request selectors request num request selectors numrequestselectors request head is get isget request head extension html is default extension isdefaultextension string suff ext suffext string suff method suffmethod string suff ext method suffextmethod creates code resource collector resourcecollector code code request code request head request special ized specialized instance returned takes request selectors request extension account finding servlet resources instance returned takes resource type request method account param request code sling http servlet request slinghttpservletrequest code code resource collector resourcecollector code code resource collector resourcecollector code find servlets scripts suitable handling code request code resource collector resourcecollector create sling http servlet request slinghttpservletrequest request string execution paths executionpaths string default extensions defaultextensions request path info requestpathinfo request path info requestpathinfo request get request path info getrequestpathinfo is default extension isdefaultextension array utils arrayutils default extensions defaultextensions request path info requestpathinfo get extension getextension resource collector resourcecollector request get resource getresource request path info requestpathinfo get extension getextension execution paths executionpaths is default extension isdefaultextension request get method getmethod request path info requestpathinfo get selectors getselectors resource collector resourcecollector create resource resource string extension string execution paths executionpaths string default extensions defaultextensions string method name methodname string selectors is default extension isdefaultextension array utils arrayutils default extensions defaultextensions extension resource collector resourcecollector resource extension execution paths executionpaths is default extension isdefaultextension method name methodname selectors creates code resource collector resourcecollector code finding servlets scripts code method name methodname code param method name methodname code method name methodname code find scripts code code param base resource type baseresourcetype basic resource type resource type code code link org apache sling servlets resolver internal servlet resolver constants servletresolverconstants servlet assumed param resource resource invoke resource type resource type resource resource collector resourcecollector string method name methodname string base resource type baseresourcetype resource resource string execution paths executionpaths base resource type baseresourcetype base resource type baseresourcetype servlet resolver constants servletresolverconstants servlet resource get resource type getresourcetype resource get resource super type getresourcesupertype execution paths executionpaths method name methodname method name methodname request selectors requestselectors string num request selectors numrequestselectors is get isget is default extension isdefaultextension suff ext suffext extension suff method suffmethod method name methodname suff ext method suffextmethod suff ext suffext suff method suffmethod create hash code string key method name methodname base resource type baseresourcetype extension resource type resourcetype resource type resourcetype resource super type resourcesupertype resource super type resourcesupertype hash code hashcode key hash code hashcode creates code resource collector resourcecollector code finding servlets scripts code resource code param method name methodname code method name methodname code find scripts code code param base resource type baseresourcetype basic resource type resource type code code link org apache sling servlets resolver internal servlet resolver constants servletresolverconstants servlet assumed resource collector resourcecollector resource resource string extension string execution paths executionpaths is default extension isdefaultextension string method name methodname string selectors servlet resolver constants servletresolverconstants servlet resource get resource type getresourcetype resource get resource super type getresourcesupertype extension execution paths executionpaths method name methodname method name methodname suff ext suffext extension suff method suffmethod method name methodname suff ext method suffextmethod suff ext suffext suff method suffmethod request selectors requestselectors selectors num request selectors numrequestselectors request selectors requestselectors length is get isget equals method name methodname head equals method name methodname is default extension isdefaultextension is default extension isdefaultextension create hash code string key method name methodname base resource type baseresourcetype extension string utils stringutils join request selectors requestselectors resource type resourcetype resource type resourcetype resource super type resourcesupertype resource super type resourcesupertype hash code hashcode key hash code hashcode override get weighted resources getweightedresources resource resources resource location resource resolver resourceresolver resolver location get resource resolver getresourceresolver resource current location string parent name parentname current get name getname sel idx selidx string selector selector sel idx selidx num request selectors numrequestselectors request selectors requestselectors sel idx selidx iterator resource children resolver list children listchildren current children has next hasnext resource child children is path allowed ispathallowed child get path getpath string script name scriptname child get name getname last dot lastdot script name scriptname last index of lastindexof last dot lastdot extension script script name scriptname script name scriptname substring last dot lastdot is get isget check script name checkscriptname script name scriptname selector parent name parentname suff ext suffext resources child sel idx selidx check script name checkscriptname script name scriptname selector parent name parentname suff ext method suffextmethod suff method suffmethod resources child sel idx selidx compatibility selector matches script name scriptname selector suff method suffmethod add weighted resource addweightedresource resources child sel idx selidx weighted resource weightedresource weight script name scriptname equals method name methodname add weighted resource addweightedresource resources child sel idx selidx weighted resource weightedresource weight selector current resolver get resource getresource current selector parent name parentname selector sel idx selidx selector current special treatment servlets registered method extensions selectors add location servlet addlocationservlet resources location checks code script name scriptname code matches number combinations code selector code code parent name parentname code code suffix code code html suffix htmlsuffix code match link add weighted resource addweightedresource resource method called register script resource selection weight param script name scriptname script script extension check compliance param selector current selector check script code code param parent name parentname parent folder code code param suffix expected script selector parent code code applicable request method param html suffix htmlsuffix expected script selector parent code code applicable head methods param resources weighted resource weighted resource match param child resource representing script param sel idx selidx selector weight code code match weighted resource code resources code check script name checkscriptname string script name scriptname string selector string parent name parentname string suffix string html suffix htmlsuffix resource resources resource child sel idx selidx selector matches script name scriptname selector suffix add weighted resource addweightedresource resources child sel idx selidx weighted resource weightedresource weight extension matches script name scriptname parent name parentname suffix add weighted resource addweightedresource resources child sel idx selidx weighted resource weightedresource weight extension weighted resource weightedresource weight prefix script name scriptname equals suffix substring add weighted resource addweightedresource resources child sel idx selidx weighted resource weightedresource weight extension is default extension isdefaultextension selector matches script name scriptname selector html suffix htmlsuffix add weighted resource addweightedresource resources child sel idx selidx weighted resource weightedresource weight matches script name scriptname parent name parentname html suffix htmlsuffix add weighted resource addweightedresource resources child sel idx selidx weighted resource weightedresource weight prefix matches string script name scriptname string string suffix suffix script name scriptname equals len script name lenscriptname script name scriptname length len name lenname length len suffix lensuffix suffix length script name scriptname region matches regionmatches len name lenname script name scriptname region matches regionmatches len name lenname suffix len suffix lensuffix len script name lenscriptname len name lenname len suffix lensuffix add location servlet addlocationservlet resource resources resource location string path location get path getpath servlet resource provider factory servletresourceproviderfactory servlet path extension is path allowed ispathallowed path resource servlet location get resource resolver getresourceresolver get resource getresource path servlet add weighted resource addweightedresource resources servlet weighted resource weightedresource weight res sort ressort override equals object obj obj resource collector resourcecollector obj equals obj resource collector resourcecollector resource collector resourcecollector obj is get isget is get isget is default extension isdefaultextension is default extension isdefaultextension num request selectors numrequestselectors num request selectors numrequestselectors string equals stringequals method name methodname method name methodname compare selectors num request selectors numrequestselectors string equals stringequals request selectors requestselectors request selectors requestselectors