licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest java io exception ioexception java util hash map hashmap java util map org apache commons http client httpclient methods get method getmethod org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling commons testing int egration integration http test base httptestbase org apache sling servlets post sling post constants slingpostconstants test redirects redirect test redirecttest http test base httptestbase string post url posturl override set up setup exception set up setup create test node path specific collisions post url posturl http base url get class getclass get simple name getsimplename system current time millis currenttimemillis sling post constants slingpostconstants create suffix test redirect to index html testredirecttoindexhtml string redir node url redirnodeurl status code statuscode io exception ioexception created node redirects get method getmethod get method getmethod redir node url redirnodeurl set follow redirects setfollowredirects status http client httpclient execute method executemethod expect redirect assert equals assertequals status code statuscode status html string location get response header getresponseheader location get value getvalue assert not null assertnotnull location assert true asserttrue location ends with endswith html created node redirects get method getmethod redir node url redirnodeurl html set follow redirects setfollowredirects status http client httpclient execute method executemethod expect redirect assert equals assertequals status code statuscode status html location get response header getresponseheader location get value getvalue assert not null assertnotnull location assert true asserttrue location ends with endswith html html created node redirects get method getmethod redir node url redirnodeurl param set follow redirects setfollowredirects status http client httpclient execute method executemethod expect redirect assert equals assertequals status code statuscode status html location get response header getresponseheader location get value getvalue assert not null assertnotnull location assert true asserttrue location ends with endswith html param test redirect test redirect testredirect io exception ioexception create node redirecting status code map string string props hash map hashmap string string props sling resource type resourcetype sling redirect props sling target html string redir node url redirnodeurl test client testclient create node createnode post url posturl props test redirect to index html testredirecttoindexhtml redir node url redirnodeurl test sling status test redirect testredirect io exception ioexception create node redirecting status code map string string props hash map hashmap string string props sling resource type resourcetype sling redirect props sling target html props sling status string redir node url redirnodeurl test client testclient create node createnode post url posturl props test redirect to index html testredirecttoindexhtml redir node url redirnodeurl test response existing sling target test redirect testredirect absolute io exception ioexception create node redirecting map string string props hash map hashmap string string props sling resource type resourcetype sling redirect props sling target http host html string redir node url redirnodeurl test client testclient create node createnode post url posturl props created node redirects get method getmethod get method getmethod redir node url redirnodeurl set follow redirects setfollowredirects status http client httpclient execute method executemethod expect temporary redirect assert equals assertequals status html string location get response header getresponseheader location get value getvalue assert not null assertnotnull location assert true asserttrue location equals http host html created node redirects get method getmethod redir node url redirnodeurl html set follow redirects setfollowredirects status http client httpclient execute method executemethod expect temporary redirect assert equals assertequals status html location get response header getresponseheader location get value getvalue assert not null assertnotnull location assert true asserttrue location equals http host html html created node redirects get method getmethod redir node url redirnodeurl param set follow redirects setfollowredirects status http client httpclient execute method executemethod expect temporary redirect assert equals assertequals status html location get response header getresponseheader location get value getvalue assert not null assertnotnull location assert true asserttrue location equals http host html param test response sling target missing test redirect testredirect io exception ioexception create sling redirect node target map string string props hash map hashmap string string props sling resource type resourcetype sling redirect string redir node url redirnodeurl test client testclient create node createnode post url posturl props created node redirects get method getmethod get method getmethod redir node url redirnodeurl set follow redirects setfollowredirects status http client httpclient execute method executemethod expect assert equals assertequals status created node redirects get method getmethod redir node url redirnodeurl html set follow redirects setfollowredirects status http client httpclient execute method executemethod expect assert equals assertequals status test json result json requests sling target test redirect json testredirectjson json exception jsonexception io exception ioexception create sling redirect node target map string string props hash map hashmap string string props sling resource type resourcetype sling redirect props sling target html string redir node url redirnodeurl test client testclient create node createnode post url posturl props created node redirects get method getmethod get method getmethod redir node url redirnodeurl json set follow redirects setfollowredirects status http client httpclient execute method executemethod expect json data assert equals assertequals status assert true asserttrue get response header getresponseheader content type get value getvalue starts with startswith content type json json data string json string jsonstring get response body as string getresponsebodyasstring json object jsonobject json json object jsonobject json string jsonstring assert equals assertequals sling redirect json sling resource type resourcetype assert equals assertequals html json sling target test json result json requests sling target test redirect json testredirectjson json exception jsonexception io exception ioexception create sling redirect node target map string string props hash map hashmap string string props sling resource type resourcetype sling redirect string redir node url redirnodeurl test client testclient create node createnode post url posturl props created node redirects get method getmethod get method getmethod redir node url redirnodeurl json set follow redirects setfollowredirects status http client httpclient execute method executemethod expect json data assert equals assertequals status assert true asserttrue get response header getresponseheader content type get value getvalue starts with startswith content type json json data string json string jsonstring get response body as string getresponsebodyasstring json object jsonobject json json object jsonobject json string jsonstring assert equals assertequals sling redirect json sling resource type resourcetype