licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer provider jcr impl javax jcr node org apache sling installer provider jcr impl jcr installer jcrinstaller org osgi service component component context componentcontext test updated removed resources correctly translated osgi installer osgiinstaller registration calls resource detection test resourcedetectiontest jcr install test base jcrinstalltestbase test initial resource detection testinitialresourcedetection exception assert registered paths assertregisteredpaths content helper contenthelper fake resources assert registered paths assertregisteredpaths content helper contenthelper fake configs needs test content needstestcontent test add files testaddfiles exception string paths libs foo bar install system current time millis currenttimemillis jar libs foo wii install system current time millis currenttimemillis jar libs foo wii install system current time millis currenttimemillis properties libs foo wii install system current time millis currenttimemillis cfg libs foo wii install system current time millis currenttimemillis bad extension badextension libs foo wii install starts with dot startswithdot system current time millis currenttimemillis jar string path paths content helper contenthelper create or update file createorupdatefile path misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer assert registered paths assertregisteredpaths paths test add configs testaddconfigs exception string paths libs foo bar install system current time millis currenttimemillis jar libs foo wii install system current time millis currenttimemillis jar libs foo wii install system current time millis currenttimemillis properties libs foo wii install system current time millis currenttimemillis cfg libs foo wii install system current time millis currenttimemillis bad extension badextension libs foo wii install starts with dot startswithdot system current time millis currenttimemillis jar string path paths content helper contenthelper create config createconfig path misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer assert registered paths assertregisteredpaths paths test delete resources testdeleteresources exception assert registered paths assertregisteredpaths content helper contenthelper fake resources assert registered paths assertregisteredpaths content helper contenthelper fake configs osgi installer osgiinstaller clear recorded calls clearrecordedcalls assert true asserttrue expecting recorded calls empty osgi installer osgiinstaller get recorded calls getrecordedcalls is empty isempty to remove toremove content helper contenthelper delete content helper contenthelper fake resources to remove toremove content helper contenthelper delete content helper contenthelper fake configs to remove toremove misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer content helper contenthelper fake resources length assert registered assertregistered content helper contenthelper fake resources to remove toremove content helper contenthelper fake configs length assert registered assertregistered content helper contenthelper fake configs to remove toremove assert equals assertequals expecting remove calls resources deleted osgi installer osgiinstaller get recorded calls getrecordedcalls size test stop and restart teststopandrestart exception assert registered paths assertregisteredpaths content helper contenthelper fake resources assert registered paths assertregisteredpaths content helper contenthelper fake configs component context componentcontext misc util miscutil get mock component context getmockcomponentcontext installer deactivated remove resources add osgi installer osgiinstaller clear recorded calls clearrecordedcalls installer deactivate assert equals assertequals expected calls osgi installer osgiinstaller deactivating jcr installer jcrinstaller osgi installer osgiinstaller get recorded calls getrecordedcalls size to remove toremove content helper contenthelper delete content helper contenthelper fake resources to remove toremove content helper contenthelper delete content helper contenthelper fake configs to remove toremove string to add toadd libs foo bar install system current time millis currenttimemillis jar libs foo wii install system current time millis currenttimemillis properties libs foo wii install system current time millis currenttimemillis cfg string path to add toadd content helper contenthelper create or update file createorupdatefile path verify calls osg i osgi installer event helper eventhelper wait for events waitforevents timeout thread sleep jcr installer jcrinstaller loop delay msec assert equals assertequals expected calls osgi installer osgiinstaller jcr installer jcrinstaller stopped osgi installer osgiinstaller get recorded calls getrecordedcalls size restart jcr installer jcrinstaller verify remaining resources registered installer activate misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer content helper contenthelper fake resources length string path content helper contenthelper fake resources to remove toremove assert false assertfalse path absent recorded calls osgi installer osgiinstaller get recorded calls getrecordedcalls path assert recorded call assertrecordedcall register path content helper contenthelper fake configs length string path content helper contenthelper fake configs to remove toremove assert false assertfalse path absent recorded calls osgi installer osgiinstaller get recorded calls getrecordedcalls path assert recorded call assertrecordedcall register path string path to add toadd assert recorded call assertrecordedcall register path test folder removal testfolderremoval exception assert registered paths assertregisteredpaths content helper contenthelper fake resources assert registered paths assertregisteredpaths content helper contenthelper fake configs removing folder resources unregistered content helper contenthelper delete libs misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer string path content helper contenthelper fake resources assert registered assertregistered path path starts with startswith libs string path content helper contenthelper fake configs assert registered assertregistered path path starts with startswith libs test file update testfileupdate exception string path content helper contenthelper fake resources assert registered assertregistered path change influence file digest verify osg i osgi registrations result n calls ncalls osgi installer osgiinstaller get recorded calls getrecordedcalls size node session get item getitem path jcr content set property setproperty jcr mime type mimetype application get class getclass get name getname session save misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer assert equals assertequals expected osgi installer osgiinstaller calls impact file change n calls ncalls osgi installer osgiinstaller get recorded calls getrecordedcalls size content change resource registered osgi installer osgiinstaller clear recorded calls clearrecordedcalls content helper contenthelper create or update file createorupdatefile path system current time millis currenttimemillis misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer assert equals assertequals expected osgi installer osgiinstaller call file content change osgi installer osgiinstaller get recorded calls getrecordedcalls size assert recorded call assertrecordedcall add path test config update testconfigupdate exception string path content helper contenthelper fake configs assert registered assertregistered path setup config osgi installer osgiinstaller clear recorded calls clearrecordedcalls string key foo system current time millis currenttimemillis string system current time millis currenttimemillis node session get item getitem path set property setproperty key session save misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer assert equals assertequals expected osgi installer osgiinstaller call initial config change osgi installer osgiinstaller get recorded calls getrecordedcalls size change influence configs digest verify osg i osgi registrations result osgi installer osgiinstaller clear recorded calls clearrecordedcalls node session get item getitem path set property setproperty key session save misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer assert equals assertequals expected osgi installer osgiinstaller calls impact config change osgi installer osgiinstaller get recorded calls getrecordedcalls osgi installer osgiinstaller get recorded calls getrecordedcalls size content change resource registered osgi installer osgiinstaller clear recorded calls clearrecordedcalls node session get item getitem path set property setproperty key changed misc util miscutil wait after content changes waitaftercontentchanges event helper eventhelper installer assert equals assertequals expected osgi installer osgiinstaller call config content change osgi installer osgiinstaller get recorded calls getrecordedcalls size assert recorded call assertrecordedcall add path