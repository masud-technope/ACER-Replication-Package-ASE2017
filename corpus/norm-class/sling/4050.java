licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons scheduler impl org apache sling commons scheduler scheduler org apache sling testing mock osgi mock osgi mockosgi org junit org junit org junit test org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service reference servicereference org osgi util tracker service tracker servicetracker org osgi util tracker service tracker customizer servicetrackercustomizer org quartz job key jobkey org quartz scheduler exception schedulerexception java lang reflect field java util dictionary java util hashtable org junit assert not null assertnotnull org junit assert null assertnull whiteboard handler test whiteboardhandlertest whiteboard handler whiteboardhandler handler bundle context bundlecontext context quartz scheduler quartzscheduler quartz scheduler quartzscheduler test whiteboard handler whiteboardhandler methods service tracker customizer servicetrackercustomizer methods service tracker customizer servicetrackercustomizer custom izer customizer set up setup exception context mock osgi mockosgi new bundle context newbundlecontext handler whiteboard handler whiteboardhandler field injection field scheduler field schedulerfield whiteboard handler whiteboardhandler get declared field getdeclaredfield scheduler scheduler field schedulerfield set accessible setaccessible creating quartz scheduler quartzscheduler field act ivating activating quartz scheduler quartzscheduler activated quartz scheduler factory activatedquartzschedulerfactory create context test name testname injecting quartz scheduler quartzscheduler whiteboard handler whiteboardhandler scheduler field schedulerfield handler quartz scheduler quartzscheduler handler activate context field tracker field trackerfield whiteboard handler whiteboardhandler get declared field getdeclaredfield service tracker servicetracker tracker field trackerfield set accessible setaccessible service tracker servicetracker service tracker servicetracker service tracker servicetracker tracker field trackerfield handler field custom izer field customizerfield service tracker servicetracker get declared field getdeclaredfield custom izer customizer custom izer field customizerfield set accessible setaccessible custom izer customizer service tracker customizer servicetrackercustomizer custom izer field customizerfield service tracker servicetracker test test adding service testaddingservice scheduler exception schedulerexception org quartz scheduler quartz scheduler quartzscheduler get scheduler getscheduler thread service thread string service name servicename service name servicename string scheduler name schedulername test scheduler testscheduler period integer times dictionary string object service props serviceprops hashtable string object service props serviceprops scheduler property scheduler scheduler leader service props serviceprops scheduler property scheduler concurrent service props serviceprops scheduler property scheduler service props serviceprops scheduler property scheduler scheduler name schedulername service props serviceprops scheduler property scheduler period period service props serviceprops scheduler property scheduler times times service props serviceprops constants service pid service props serviceprops constants service register service reference reference needed test method context register service registerservice service name servicename service service props serviceprops service reference servicereference reference context get service reference getservicereference service name servicename job key jobkey job key jobkey job key jobkey job key jobkey scheduler name schedulername reference get property getproperty constants service assert null assertnull get job detail getjobdetail job key jobkey custom izer customizer adding service addingservice reference assert not null assertnotnull get job detail getjobdetail job key jobkey test test unregister service testunregisterservice scheduler exception schedulerexception org quartz scheduler quartz scheduler quartzscheduler get scheduler getscheduler thread service thread string service name servicename service name servicename string scheduler name schedulername test scheduler testscheduler period integer times dictionary string object service props serviceprops hashtable string object service props serviceprops scheduler property scheduler scheduler leader service props serviceprops scheduler property scheduler expression service props serviceprops scheduler property scheduler concurrent service props serviceprops scheduler property scheduler service props serviceprops scheduler property scheduler scheduler name schedulername service props serviceprops scheduler property scheduler period period service props serviceprops scheduler property scheduler times times service props serviceprops constants service pid service props serviceprops constants service register service reference reference needed test method context register service registerservice service name servicename service service props serviceprops service reference servicereference reference context get service reference getservicereference service name servicename job key jobkey job key jobkey job key jobkey job key jobkey scheduler name schedulername reference get property getproperty constants service assert null assertnull get job detail getjobdetail job key jobkey custom izer customizer adding service addingservice reference assert not null assertnotnull get job detail getjobdetail job key jobkey custom izer customizer removed service removedservice reference service assert null assertnull get job detail getjobdetail job key jobkey deactivate scheduler deactivatescheduler handler deactivate quartz scheduler quartzscheduler deactivate context