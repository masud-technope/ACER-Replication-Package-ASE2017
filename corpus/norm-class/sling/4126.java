licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons content detection contentdetection internal org junit assert equals assertequals org junit assert not null assertnotnull org junit assert true asserttrue java buffered input stream bufferedinputstream java byte array input stream bytearrayinputstream java io exception ioexception java input stream inputstream javax inject inject org apache commons io utils ioutils org apache sling commons content detection contentdetection content aware mime type service contentawaremimetypeservice org junit test org junit runner run with runwith org ops pax exam option org ops pax exam junit pax exam paxexam run with runwith pax exam paxexam content aware mime type service impl t contentawaremimetypeserviceimplit inject content aware mime type service contentawaremimetypeservice content aware mime type service contentawaremimetypeservice non mark able stream nonmarkablestream buffered input stream bufferedinputstream non mark able stream nonmarkablestream input stream inputstream override mark read limit readlimit override reset io exception ioexception override mark supported marksupported test detect from extension detectfromextension io exception ioexception string mime type name mimetypename test string mime type mimetype audio mpeg assert equals assertequals expecting type input stream inputstream parameter mime type mimetype content aware mime type service contentawaremimetypeservice get mime type getmimetype mime type name mimetypename assert equals assertequals expecting type input stream inputstream parameter mime type mimetype content aware mime type service contentawaremimetypeservice get mime type getmimetype mime type name mimetypename test detect from content detectfromcontent io exception ioexception string filename wav file string path filename input stream inputstream buffered input stream bufferedinputstream get class getclass get resource as stream getresourceasstream path assert not null assertnotnull expecting stream filename input stream inputstream original stream originalstream assert equals assertequals audio wav content aware mime type service contentawaremimetypeservice get mime type getmimetype filename original stream originalstream get class getclass get resource as stream getresourceasstream path assert not null assertnotnull expecting stream filename original stream originalstream assert true asserttrue expecting content unchanged io utils ioutils content equals contentequals original stream originalstream io utils ioutils close quietly closequietly io utils ioutils close quietly closequietly original stream originalstream test expected illegal argument exception illegalargumentexception non mark able stream detection should fail nonmarkablestreamdetectionshouldfail io exception ioexception input stream inputstream nms non mark able stream nonmarkablestream byte array input stream bytearrayinputstream get bytes getbytes content aware mime type service contentawaremimetypeservice get mime type getmimetype foo txt nms io utils ioutils close quietly closequietly nms org ops pax exam configuration option config pax config paxconfig