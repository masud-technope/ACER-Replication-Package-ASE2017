licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling event org junit assert equals assertequals org junit assert not null assertnotnull java io exception ioexception java util collection java util dictionary java util hash map hashmap java util hashtable java util map org apache sling event impl jobs config configuration constants configurationconstants org apache sling event jobs job org apache sling event jobs job manager jobmanager org apache sling event jobs queue configuration queueconfiguration org apache sling event jobs consumer job execution context jobexecutioncontext org apache sling event jobs consumer job execution result jobexecutionresult org apache sling event jobs consumer job executor jobexecutor org junit org junit org junit test org junit runner run with runwith org ops pax exam junit pax exam paxexam org ops pax exam spi reactors exam reactor strategy examreactorstrategy org ops pax exam spi reactors per method permethod org osgi framework service registration serviceregistration run with runwith pax exam paxexam exam reactor strategy examreactorstrategy per method permethod history test historytest abstract job handling test abstractjobhandlingtest string topic sling test history string prop counter counter string queue conf pid queueconfpid override setup io exception ioexception setup create test queue ordered queue stable processing order jobs history org osgi service configuration config config admin configadmin create factory configuration createfactoryconfiguration org apache sling event jobs queue configuration queueconfiguration dictionary string object props hashtable string object props configuration constants configurationconstants prop test props configuration constants configurationconstants prop type queue configuration queueconfiguration type ordered props configuration constants configurationconstants prop topics string topic props configuration constants configurationconstants prop retries props configuration constants configurationconstants prop retry delay props configuration constants configurationconstants prop jobs config update props queue conf pid queueconfpid config get pid getpid sleep clean up cleanup io exception ioexception remove configuration removeconfiguration queue conf pid queueconfpid cleanup job add job addjob counter map string object props hash map hashmap string object props prop counter counter get job manager getjobmanager add job addjob topic props test history start jobs cancel succeed test timeout test timeout test history testhistory exception service registration serviceregistration reg register job executor registerjobexecutor topic job executor jobexecutor override job execution result jobexecutionresult process job job job execution context jobexecutioncontext context sleep count job get property getproperty prop counter count count count context result message job job state jobstate error can celled cancelled context result message job job state jobstate succeeded succeeded collection job col add job addjob sleep get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype history topic map string object size sleep col get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype history topic map string object assert equals assertequals col size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype active topic map string object size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype queued topic map string object size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype topic map string object size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype cancel led cancelled topic map string object size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype dropped topic map string object size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype error topic map string object size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype topic map string object size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype stopped topic map string object size assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype succeeded topic map string object size find topics assert equals assertequals get job manager getjobmanager find jobs findjobs job manager jobmanager query type querytype succeeded map string object size verify order message job col assert not null assertnotnull get finished date getfinisheddate count get property getproperty prop counter assert equals assertequals count count count count assert equals assertequals job job state jobstate error get job state getjobstate assert equals assertequals job job state jobstate succeeded get job state getjobstate assert equals assertequals get job state getjobstate get result message getresultmessage col job col get job manager getjobmanager remove job by id removejobbyid get id getid reg unregister