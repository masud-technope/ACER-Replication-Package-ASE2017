licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jmx impl java util array list arraylist java util collections java util dictionary java util hash map hashmap java util hashtable java util list java util map javax management dynamicmbean org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations reference org apache sling api health check healthcheck org apache sling core impl executor extended health check executor extendedhealthcheckexecutor org osgi framework bundle context bundlecontext org osgi framework service reference servicereference org osgi framework service registration serviceregistration org osgi util tracker service tracker servicetracker org slf logger org slf logger factory loggerfactory creates link health check mbean healthcheckmbean link health check bean healthcheckmbean service component health check bean creator healthcheckmbeancreator string jmx type health check healthcheck string jmx domain org apache sling health check healthcheck logger logger logger factory loggerfactory get logger getlogger get class getclass map service reference servicereference registration registered services registeredservices hash map hashmap service reference servicereference registration map string list service reference servicereference sorted registrations sortedregistrations hash map hashmap string list service reference servicereference service tracker servicetracker hc tracker hctracker reference extended health check executor extendedhealthcheckexecutor executor activate activate bundle context bundlecontext btx hc tracker hctracker service tracker servicetracker btx health check healthcheck get name getname override object adding service addingservice service reference servicereference reference registerhcmbean btx reference override modified service modifiedservice service reference servicereference reference object service unregisterhcmbean btx reference registerhcmbean btx reference override removed service removedservice service reference servicereference reference object service unregisterhcmbean btx reference hc tracker hctracker open deactivate deactivate hc tracker hctracker hc tracker hctracker close hc tracker hctracker register mbean health check service mbean registered service mbean registration property service higher service ranking param bundle context bundlecontext bundle context param reference service reference health check service registered mbean code code object registerhcmbean bundle context bundlecontext bundle context bundlecontext service reference servicereference reference registration reg registration get registration getregistration executor reference reg registered services registeredservices reference reg list service reference servicereference registered sorted registrations sortedregistrations reg registered registered array list arraylist service reference servicereference sorted registrations sortedregistrations reg registered registered add reference sort orders references lowest ranking highest collections sort registered last index lastindex registered size registered last index lastindex equals reference registered size service reference servicereference prev ref prevref registered last index lastindex registration prev reg prevreg registered services registeredservices prev ref prevref prev reg prevreg unregister logger reg register logger bundle context bundlecontext reg unregisterhcmbean bundle context bundlecontext bundle context bundlecontext service reference servicereference registration reg registered services registeredservices remove reg register first registerfirst reg unregister logger list service reference servicereference registered sorted registrations sortedregistrations reg registered remove registered size sorted registrations sortedregistrations remove reg register first registerfirst service reference servicereference new ref newref registered registration new reg newreg registered services registeredservices new ref newref new reg newreg register logger bundle context bundlecontext bundle context bundlecontext unget service ungetservice registration string health check bean healthcheckmbean mbean service registration serviceregistration registration registration string health check bean healthcheckmbean mbean mbean mbean registration get registration getregistration extended health check executor extendedhealthcheckexecutor executor service reference servicereference object name obj nameobj get property getproperty health check healthcheck mbean name obj nameobj health check bean healthcheckmbean mbean health check bean healthcheckmbean executor registration name obj nameobj to string tostring replace mbean register logger logger bundle context bundlecontext btx string builder stringbuilder string builder stringbuilder jmx domain append type append jmx type append append string object name objectname to string tostring dictionary string string mbean props mbeanprops hashtable string string mbean props mbeanprops jmx object name objectname object name objectname registration btx register service registerservice dynamicmbean get name getname mbean mbean props mbeanprops logger debug registered health check mbean mbean object name objectname unregister logger logger registration registration unregister registration logger debug unregistered health check mbean mbean