licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling mailarchiveserver impl org junit assert equals assertequals org junit assert false assertfalse org junit fail java file java file input stream fileinputstream java file output stream fileoutputstream java io exception ioexception org apache sling mailarchiveserver impl mime j mbox parser impl jmboxparserimpl mime j parser iterator jparseriterator org apache sling mailarchiveserver util org junit ignore org junit test org slf logger org slf logger factory loggerfactory test parses big file execute mime j mbox parser impl str eaming test jmboxparserimplstreamingtest mime j mbox parser impl jmboxparserimpl parser mime j mbox parser impl jmboxparserimpl logger log logger factory loggerfactory get logger getlogger get class getclass string test file mbox tomcat dev mbox test file ratio ignore todo fails running tests lots memory test test parser is str eaming testparserisstreaming io exception ioexception file temp f tempf file input stream fileinputstream fis file output stream fileoutputstream fos max mem maxmem runtime get runtime getruntime max memory maxmemory log info max memory reading max mem maxmem test file log info todo test fails size exc eeds exceeds integer max max mem maxmem limit file file to sample filetosample file test folder test file count max mem maxmem test file ratio file to sample filetosample length fis file input stream fileinputstream file to sample filetosample sample file to sample filetosample length assert equals assertequals expecting correct number bytes read fis read sample file to sample filetosample length temp f tempf file create temp file createtempfile mas mbox fos file output stream fileoutputstream temp f tempf count fos write sample fos flush fos close fos parser parse file input stream fileinputstream temp f tempf out of memory error outofmemoryerror fail out of memory error outofmemoryerror parser str eaming streaming temp f tempf temp f tempf delete fis fis close fos fos close test test temp file is deleted testtempfileisdeleted io exception ioexception file test file testfile file test folder test file mime j parser iterator jparseriterator iter mime j parser iterator jparseriterator parser parse file input stream fileinputstream test file testfile assert false assertfalse expecting temp file deleted file iter temp file abs path tempfileabspath exists