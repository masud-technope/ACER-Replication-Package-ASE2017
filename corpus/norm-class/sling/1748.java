licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling junit script able scriptable java util array list arraylist java util arrays java util linked list linkedlist java util list javax jcr node iterator nodeiterator javax jcr repository exception repositoryexception javax jcr session javax jcr observation event javax jcr observation event iterator eventiterator javax jcr observation event listener eventlistener javax jcr query query org apache felix scr annotations component org apache felix scr annotations reference org apache felix scr annotations service org apache sling api resource resource resolver resourceresolver org apache sling engine sling request processor slingrequestprocessor org apache sling jcr api sling repository slingrepository org apache sling jcr resource jcr resource resolver factory jcrresourceresolverfactory org apache sling junit tests provider testsprovider org osgi framework constants org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory tests provider testsprovider test classes repository nodes sling test mixin component service scriptable tests provider scriptabletestsprovider tests provider testsprovider logger log logger factory loggerfactory get logger getlogger get class getclass string pid session session resource resolver resourceresolver resolver last modified lastmodified system current time millis currenttimemillis last reloaded lastreloaded list resource paths point tests list string test paths testpaths linked list linkedlist string string sling test node type nodetype sling test string test scriptable tests provider scriptabletestsprovider get name getname context passed test all paths testallpaths test context testcontext list string test paths testpaths sling request processor slingrequestprocessor request processor requestprocessor resource resolver resourceresolver resource resolver resourceresolver test context testcontext list string sling request processor slingrequestprocessor resource resolver resourceresolver test paths testpaths request processor requestprocessor resource resolver resourceresolver thread local threadlocal pass context j unit junit ins tantiates instantiates test classes easily decorate afaik thread local threadlocal test context testcontext test context testcontext thread local threadlocal test context testcontext test resources search path jcr resource resolver paths supposed secured admin stuff admin users prev ented prevented creating test nodes string allowed roots allowedroots reference sling repository slingrepository repository reference sling request processor slingrequestprocessor request processor requestprocessor reference jcr resource resolver factory jcrresourceresolverfactory resolver factory resolverfactory listener root path list event listener eventlistener listeners array list arraylist event listener eventlistener root listener rootlistener event listener eventlistener string path root listener rootlistener string path path path on event onevent event iterator eventiterator log debug change detected reload list test paths path last modified lastmodified system current time millis currenttimemillis activate component context componentcontext ctx exception pid string ctx get properties getproperties constants service pid session repository login administrative loginadministrative repository get default workspace getdefaultworkspace resolver resolver factory resolverfactory get resource resolver getresourceresolver session copy resource resolver paths string paths resolver get search path getsearchpath allowed roots allowedroots string paths length system arraycopy paths allowed roots allowedroots paths length allowed roots allowedroots length allowed roots allowedroots ends with endswith allowed roots allowedroots listen sling test nodes allowed roots event types eventtypes event node event node removed event property event property changed event property removed is deep isdeep no local nolocal string node types nodetypes sling test node type nodetype string uuid string path allowed roots allowedroots event listener eventlistener listener root listener rootlistener path listeners add listener session get workspace getworkspace get observation manager getobservationmanager add event listener addeventlistener listener event types eventtypes path is deep isdeep uuid node types nodetypes no local nolocal log debug list ening listening jcr events path log info activated test resources arrays as list aslist allowed roots allowedroots deactivate component context componentcontext ctx repository exception repositoryexception resolver session event listener eventlistener listener listeners session get workspace getworkspace get observation manager getobservationmanager remove event listener removeeventlistener listener listeners clear session log out logout session create test class createtestclass string test name testname class not found exception classnotfoundexception test name testname equals test class not found exception classnotfoundexception test name testname valid test may be query test resources maybequerytestresources exception runtime exception runtimeexception exception may be query test resources maybequerytestresources test paths testpaths size exp lain tests explaintests test context testcontext test context testcontext test paths testpaths request processor requestprocessor resolver test all paths testallpaths string get service pid getservicepid pid list string get test names gettestnames single test test test resource harder sling compiler generate test classes list string result linked list linkedlist string result add test result list string may be query test resources maybequerytestresources repository exception repositoryexception last modified lastmodified last reloaded lastreloaded log debug detected keeping existing list test resources test paths testpaths size test paths testpaths log info detected reloading list test resources reload time reloadtime system current time millis currenttimemillis list string new list newlist linked list linkedlist string string root allowed roots allowedroots string statement jcr root root element sling test node type nodetype log debug querying test nodes statement session refresh query session get workspace getworkspace get query manager getquerymanager create query createquery statement query xpath node iterator nodeiterator execute get nodes getnodes has next hasnext string path next node nextnode get path getpath new list newlist add path log debug test resource path log info list test resources updated resource new list newlist size arrays as list aslist allowed roots allowedroots test paths testpaths test paths testpaths clear test paths testpaths add all addall new list newlist last reloaded lastreloaded reload time reloadtime test paths testpaths last modified lastmodified last modified lastmodified test context testcontext get test context gettestcontext test context testcontext