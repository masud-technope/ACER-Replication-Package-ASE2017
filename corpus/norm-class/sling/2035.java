licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock sling builder java util map org apache commons lang string utils stringutils org apache jackrabbit jcr constants jcrconstants org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource util resourceutil org apache sling api resource value map valuemap google common collect immutable map immutablemap helper building test content resource hierarchy boilerplate code content builder contentbuilder string dummy template apps sample templates template resource resolver resourceresolver resource resolver resourceresolver param resource resolver resourceresolver resource resolver content builder contentbuilder resource resolver resourceresolver resource resolver resourceresolver resource resolver resourceresolver resource resolver resourceresolver create resource parent resource exist created automatically code unstructured code nodes param path path resource object resource resource string path resource path value map valuemap empty create resource parent resource exist created automatically code unstructured code nodes param path path param properties properties resource resource object resource resource string path map string object properties string parent path parentpath resource util resourceutil get parent getparent path resource parent resource parentresource ensure resource exists ensureresourceexists parent path parentpath string resource util resourceutil get name getname path resource resolver resourceresolver create parent resource parentresource properties persistence exception persistenceexception runtime exception runtimeexception unable create resource path ensure resource exists path created code unstructured code node type param path resource path resource path existing newly created resource ensure resource exists ensureresourceexists string path string utils stringutils is empty isempty path string utils stringutils equals path resource resolver resourceresolver get resource getresource resource resource resource resolver resourceresolver get resource getresource path resource resource string parent path parentpath resource util resourceutil get parent getparent path string resource util resourceutil get name getname path resource parent resource parentresource ensure resource exists ensureresourceexists parent path parentpath resource resource resolver resourceresolver create parent resource parentresource immutable map immutablemap string object builder jcr constants jcrconstants jcr primarytype jcr constants jcrconstants unstructured build resource resolver resourceresolver commit resource persistence exception persistenceexception runtime exception runtimeexception unable create resource path