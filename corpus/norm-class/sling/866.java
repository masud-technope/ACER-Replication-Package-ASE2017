licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide impl vlt serialization org hamcrest matchers org junit assert that assertthat java file java file output stream fileoutputstream java io exception ioexception java input stream inputstream org apache commons io utils ioutils org junit assume org junit org junit rule org junit test org junit rules temporary folder temporaryfolder vlt serialization manager test vltserializationmanagertest vlt serialization manager vltserializationmanager serialization manager serializationmanager rule temporary folder temporaryfolder trash temporary folder temporaryfolder init serialization manager serializationmanager vlt serialization manager vltserializationmanager test get serialization file path getserializationfilepath root file root find files ystem root findfilesystemroot assert that assertthat serialization manager serializationmanager get base resource path getbaseresourcepath file root content xml get absolute path getabsolutepath root get absolute path getabsolutepath file find files ystem root findfilesystemroot file roots file list roots listroots assume assume true assumetrue file system filesystem roots roots roots length roots test get serialization file path getserializationfilepath nested path nestedpath file new file newfile find files ystem root findfilesystemroot apps sling servlet content xml assert that assertthat serialization manager serializationmanager get base resource path getbaseresourcepath get absolute path getabsolutepath get parent file getparentfile get absolute path getabsolutepath file new file newfile file parent string segments file current parent string segment segments current file current segment current test get serialization file path getserializationfilepath full coverage aggerate fullcoverageaggerate io exception ioexception file content file contentfile trash new file newfile xml input stream inputstream get class getclass get resource as stream getresourceasstream simple content xml file output stream fileoutputstream file output stream fileoutputstream content file contentfile io utils ioutils copy assert that assertthat serialization manager serializationmanager get base resource path getbaseresourcepath content file contentfile get absolute path getabsolutepath file content file contentfile get parent getparent get absolute path getabsolutepath test get serialization file path getserializationfilepath xml file xmlfile io exception ioexception file content file contentfile trash new file newfile file xml input stream inputstream get class getclass get resource as stream getresourceasstream file xml file output stream fileoutputstream file output stream fileoutputstream content file contentfile io utils ioutils copy assert that assertthat serialization manager serializationmanager get base resource path getbaseresourcepath content file contentfile get absolute path getabsolutepath content file contentfile get absolute path getabsolutepath test get os path getospath clean name cleanname assert that assertthat serialization manager serializationmanager get os path getospath content test content test test get os path getospath m angle d name mangledname assert that assertthat serialization manager serializationmanager get os path getospath content test jcr content content test jcr content test get repository path getrepositorypath clean name cleanname assert that assertthat serialization manager serializationmanager get repository path getrepositorypath content test content test test get repository path getrepositorypath m angle d name mangledname assert that assertthat serialization manager serializationmanager get repository path getrepositorypath content test jcr content content test jcr content test get repository path getrepositorypath serialization dir serializationdir assert that assertthat serialization manager serializationmanager get repository path getrepositorypath content test dir file content test file test get base resource path getbaseresourcepath missing xml file missingxmlfile file new file newfile find files ystem root findfilesystemroot apps sling servlet config xml assert that assertthat serialization manager serializationmanager get base resource path getbaseresourcepath get absolute path getabsolutepath get absolute path getabsolutepath replace xml