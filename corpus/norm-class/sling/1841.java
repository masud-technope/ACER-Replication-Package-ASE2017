licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution servlet javax annotation nonnull javax annotation nullable javax servlet servlet exception servletexception java io exception ioexception java print writer printwriter java util arrays org apache felix scr annotations sling sling servlet slingservlet org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api resource resource resolver resourceresolver org apache sling api servlets sling all methods servlet slingallmethodsservlet org apache sling distribution distribution request distributionrequest org apache sling distribution common distribution exception distributionexception org apache sling distribution resources distribution resource types distributionresourcetypes org apache sling distribution trigger distribution request handler distributionrequesthandler org apache sling distribution trigger distribution trigger distributiontrigger org slf logger org slf logger factory loggerfactory triggers server events servlet sling servlet slingservlet resource types resourcetypes distribution resource types distributionresourcetypes trigger resource type extensions event methods distribution trigger servlet distributiontriggerservlet sling all methods servlet slingallmethodsservlet logger log logger factory loggerfactory get logger getlogger get class getclass number seconds max number seconds override do get doget sling http servlet request slinghttpservletrequest request sling http servlet response slinghttpservletresponse response servlet exception servletexception io exception ioexception string seconds parameter secondsparameter request get parameter getparameter seconds seconds parameter secondsparameter seconds parameter secondsparameter length integer parse int parseint seconds parameter secondsparameter number seconds seconds max number seconds seconds max number seconds seconds seconds number seconds distribution trigger distributiontrigger distribution trigger distributiontrigger request get resource getresource adapt to adaptto distribution trigger distributiontrigger setup sse headers response set content type setcontenttype text event stream response set character encoding setcharacterencoding utf response set header setheader cache control cache response set header setheader connection alive needed java script javascript event source eventsource api call author server listen events response set header setheader access control origin request get header getheader origin allowed origins explicitly configured response set header setheader access control credentials print writer printwriter writer response get writer getwriter distribution request handler distributionrequesthandler distribution request handler distributionrequesthandler distribution request handler distributionrequesthandler handle nullable resource resolver resourceresolver resource resolver resourceresolver nonnull distribution request distributionrequest request write event writeevent writer request distribution trigger distributiontrigger register distribution request handler distributionrequesthandler thread sleep seconds interrupted exception interruptedexception log error thread int errupted interrupted distribution trigger distributiontrigger unregister distribution request handler distributionrequesthandler distribution exception distributionexception response set status setstatus response get writer getwriter write error registering trigger to string tostring write single server event response stream event message write event writeevent print writer printwriter writer distribution request distributionrequest distribution request distributionrequest write event type include new line newline writer write system current time millis currenttimemillis write actual data simple text json encoded text client dec odes decodes writer write data distribution request distributionrequest get request type getrequesttype arrays to string tostring distribution request distributionrequest get paths getpaths flush buf fers buffers container sends bytes writer flush log debug sse event object distribution request distributionrequest get request type getrequesttype distribution request distributionrequest get paths getpaths