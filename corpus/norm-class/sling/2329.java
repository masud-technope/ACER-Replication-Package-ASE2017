licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling query resource java util array list arraylist java util list javax jcr node javax jcr repository exception repositoryexception org apache commons lang string utils stringutils org apache sling api resource resource org apache sling query api predicate org apache sling query resource jcr jcr type resolver jcrtyperesolver org apache sling query selector parser attribute org slf logger org slf logger factory loggerfactory resource predicate resourcepredicate predicate resource logger log logger factory loggerfactory get logger getlogger resource predicate resourcepredicate string resource type resourcetype string resource name resourcename list predicate resource sub predicates subpredicates jcr type resolver jcrtyperesolver type resolver typeresolver resource predicate resourcepredicate string resource type resourcetype string resource name resourcename list attribute attributes jcr type resolver jcrtyperesolver type resolver typeresolver resource type resourcetype resource type resourcetype resource name resourcename resource name resourcename sub predicates subpredicates array list arraylist predicate resource attribute attributes sub predicates subpredicates add resource property predicate resourcepropertypredicate type resolver typeresolver type resolver typeresolver override accepts resource resource string utils stringutils is not blank isnotblank resource name resourcename resource get name getname equals resource name resourcename is resource type isresourcetype resource resource type resourcetype predicate resource predicate sub predicates subpredicates predicate accepts resource is resource type isresourcetype resource resource string resource type resourcetype string utils stringutils is blank isblank resource type resourcetype resource is resource type isresourcetype resource type resourcetype is valid type isvalidtype resource type resourcetype node node resource adapt to adaptto node node node is node type isnodetype resource type resourcetype repository exception repositoryexception log error check node type is valid type isvalidtype string type type resolver typeresolver is jcr type isjcrtype type