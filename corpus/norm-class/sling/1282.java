licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons log logback internal util java string writer stringwriter javax xml transform output keys outputkeys javax xml transform source javax xml transform transformer javax xml transform transformer factory transformerfactory javax xml transform sax sax source saxsource javax xml transform stream stream result streamresult org slf logger org slf logger factory loggerfactory org xml sax input source inputsource xml util xmlutil logger log logger factory loggerfactory get logger getlogger xml util xmlutil string pretty print prettyprint input source inputsource transformer transformer transformer factory transformerfactory new instance newinstance new transformer newtransformer transformer set output property setoutputproperty output keys outputkeys indent transformer set output property setoutputproperty http xml apache org xslt indent amount initialize stream result streamresult file object save file stream result streamresult result stream result streamresult string writer stringwriter source source sax source saxsource transformer transform source result result get writer getwriter to string tostring exception log warn error occurred tra nsforming transforming xml util close source string escape xml escapexml string input input string builder stringbuilder string builder stringbuilder input length input length input char at charat append amp append append append quot append apos append to string tostring replace all replaceall