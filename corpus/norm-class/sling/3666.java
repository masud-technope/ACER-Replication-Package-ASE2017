licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling junit rules java util arrays java util collections java util list org osgi framework bundle context bundlecontext org osgi framework invalid syntax exception invalidsyntaxexception org osgi framework service reference servicereference logic service service getter servicegetter service reference servicereference service reference servicereference object service suppress warnings suppresswarnings unchecked service getter servicegetter bundle context bundlecontext bundle context bundlecontext service class serviceclass string ldap filter ldapfilter object service class serviceclass equals bundle context bundlecontext special provide bundle context bundlecontext tests service class serviceclass bundle context bundlecontext service reference servicereference ldap filter ldapfilter ldap filter ldapfilter is empty isempty service reference servicereference services bundle context bundlecontext get service references getservicereferences service class serviceclass get name getname ldap filter ldapfilter services service reference servicereference prefer services higher ranking list service reference servicereference sorted arrays as list aslist services collections sort sorted service reference servicereference sorted sorted size invalid syntax exception invalidsyntaxexception illegal state exception illegalstateexception invalid filter syntax ldap filter ldapfilter service reference servicereference bundle context bundlecontext get service reference getservicereference service class serviceclass get name getname service reference servicereference illegal state exception illegalstateexception unable service reference service class serviceclass get name getname filter ldap filter ldapfilter object service bundle context bundlecontext get service getservice service reference servicereference service illegal state exception illegalstateexception unable instance service service class serviceclass service service