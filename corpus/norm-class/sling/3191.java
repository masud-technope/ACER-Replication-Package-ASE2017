licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad app java file java file output stream fileoutputstream java io exception ioexception java print writer printwriter java net server socket serversocket java util hash map hashmap java util concurrent locks reentrant lock reentrantlock junit framework test case testcase org apache sling launchpad base shared shared constants sharedconstants control listener test controllistenertest test case testcase string sling target sling test string sling target sling test string ctl conf control port controlport file ctl file ctlfile file sling ctl file ctl file ctlfile file sling ctl override tear down teardown exception ctl file ctlfile delete ctl file ctlfile delete tear down teardown test start status port get port getport my main mymain main my main mymain sling control listener controllistener control listener controllistener main string value of valueof port test case testcase assert true asserttrue listen wait sever start delay test case testcase assert true asserttrue ctl file ctlfile can read canread test case testcase assert equals assertequals control listener controllistener main status server statusserver test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver test case testcase assert true asserttrue main stop called stopcalled delay test case testcase assert false assertfalse ctl file ctlfile exists test start status port get port getport my main mymain main my main mymain sling control listener controllistener control listener controllistener main string value of valueof port test case testcase assert true asserttrue listen wait sever start delay test case testcase assert true asserttrue ctl file ctlfile can read canread test case testcase assert equals assertequals control listener controllistener main status server statusserver test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver test case testcase assert true asserttrue main stop called stopcalled test case testcase assert equals assertequals control listener controllistener main status server statusserver thread monitor deadlocking thread monitordeadlockingthread thread monitor deadlocking thread monitordeadlockingthread start start thread synchronizer deadlocking thread synchronizerdeadlockingthread thread synchronizer deadlocking thread synchronizerdeadlockingthread start start thread sleep interrupted exception interruptedexception test case testcase assert equals assertequals control listener controllistener main dump threads dumpthreads test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver shutdown int errupt interrupt int errupt interrupt int errupt interrupt int errupt interrupt main trigger delay test case testcase assert false assertfalse ctl file ctlfile exists monitor deadlocking thread monitordeadlockingthread thread object object object object flag monitor deadlocking thread monitordeadlockingthread flag flag flag set daemon setdaemon override flag thread sleep interrupted exception interruptedexception system println thread current thread currentthread get name getname locked thread sleep interrupted exception interruptedexception system println thread current thread currentthread get name getname locked synchronizer deadlocking thread synchronizerdeadlockingthread thread reentrant lock reentrantlock reentrant lock reentrantlock reentrant lock reentrantlock reentrant lock reentrantlock flag synchronizer deadlocking thread synchronizerdeadlockingthread flag flag flag set daemon setdaemon override flag lock thread sleep interrupted exception interruptedexception lock unlock unlock lock thread sleep interrupted exception interruptedexception lock unlock unlock test parallel start status port get port getport my main mymain main my main mymain sling control listener controllistener server control listener controllistener main string value of valueof port test case testcase assert true asserttrue server listen wait sever start delay port get port getport my main mymain main my main mymain sling control listener controllistener server control listener controllistener main string value of valueof port test case testcase assert true asserttrue server listen wait sever start delay test case testcase assert true asserttrue ctl file ctlfile can read canread test case testcase assert true asserttrue ctl file ctlfile can read canread test case testcase assert equals assertequals control listener controllistener main status server statusserver test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver wait sever start delay test case testcase assert equals assertequals control listener controllistener main status server statusserver test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver wait sever start delay test case testcase assert true asserttrue main stop called stopcalled test case testcase assert true asserttrue main stop called stopcalled delay test case testcase assert false assertfalse ctl file ctlfile exists test case testcase assert false assertfalse ctl file ctlfile exists test start sling port get port getport my main mymain main my main mymain sling control listener controllistener server control listener controllistener main string value of valueof port test case testcase assert true asserttrue server listen wait sever start delay port get port getport my main mymain main my main mymain sling control listener controllistener server control listener controllistener main string value of valueof port test case testcase assert false assertfalse server listen wait sever start delay test case testcase assert true asserttrue ctl file ctlfile can read canread test case testcase assert false assertfalse ctl file ctlfile can read canread test case testcase assert equals assertequals control listener controllistener main status server statusserver test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver test case testcase assert true asserttrue main stop called stopcalled delay test case testcase assert false assertfalse ctl file ctlfile exists retry test case testcase assert true asserttrue server listen wait sever start delay test case testcase assert equals assertequals control listener controllistener main status server statusserver test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver test case testcase assert true asserttrue main stop called stopcalled delay test case testcase assert false assertfalse ctl file ctlfile exists test status io exception ioexception port get port getport my main mymain main my main mymain sling test case testcase assert false assertfalse ctl file ctlfile exists ctl file ctlfile get parent file getparentfile mkdirs file output stream fileoutputstream file output stream fileoutputstream ctl file ctlfile print writer printwriter print writer printwriter println port println password close test case testcase assert true asserttrue file sling ctl can read canread test case testcase assert equals assertequals control listener controllistener main status server statusserver test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver test case testcase assert false assertfalse main stop called stopcalled test case testcase assert true asserttrue ctl file ctlfile exists test configuration status port get port getport my main mymain main my main mymain sling test case testcase assert false assertfalse ctl file ctlfile exists test case testcase assert equals assertequals control listener controllistener main string value of valueof port status server statusserver test case testcase assert equals assertequals control listener controllistener main string value of valueof port shutdown server shutdownserver test case testcase assert false assertfalse main stop called stopcalled test case testcase assert false assertfalse ctl file ctlfile exists test key status io exception ioexception port get port getport my main mymain main my main mymain sling test case testcase assert false assertfalse ctl file ctlfile exists ctl file ctlfile get parent file getparentfile mkdirs file output stream fileoutputstream file output stream fileoutputstream ctl file ctlfile print writer printwriter print writer printwriter println port close test case testcase assert true asserttrue file sling ctl can read canread test case testcase assert equals assertequals control listener controllistener main status server statusserver test case testcase assert equals assertequals control listener controllistener main shutdown server shutdownserver test case testcase assert false assertfalse main stop called stopcalled test case testcase assert true asserttrue ctl file ctlfile exists get port getport server socket serversocket server socket serversocket get local port getlocalport io exception ioexception ignore close io exception ioexception test case testcase fail acquire port compiler satisfaction delay thread sleep interrupted exception interruptedexception my main mymain main stop called stopcalled my main mymain string sling home slinghome hash map hashmap string string shared constants sharedconstants sling sling home slinghome override do stop dostop stop called stopcalled override terminatevm status my main mymain my main mymain object trigger object my main mymain string sling home slinghome sling home slinghome override do stop dostop do stop dostop shutdown seconds trigger trigger wait interrupted exception interruptedexception trigger trigger trigger notify all notifyall