licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting sightly impl html dom java string reader stringreader java util list org apache commons lang string utils stringutils org apache sling scripting sightly impl html dom template org junit test org powermock reflect white box whitebox org junit assert equals assertequals org junit assert true asserttrue html parser test htmlparsertest pretty print template node structure debug ging debugging failed tests param indentation indentation level method recursively param node template node print print indentation template node templatenode node node list template node templatenode children string unknown node get class getclass template template template template node children template get children getchildren template get name getname node get class getclass template element node templateelementnode template element node templateelementnode element template element node templateelementnode node children element get children getchildren element element get name getname node get class getclass template text node templatetextnode text template text node templatetextnode node get text gettext node get class getclass template comment node templatecommentnode comment template comment node templatecommentnode node get text gettext system print string utils stringutils repeat indentation system println replace replace children template node templatenode child children print indentation child helper compare template node str uctures structures param reference reference node structure param parsed parsed node structure assert same structure assertsamestructure template node templatenode reference template node templatenode parsed parsed reference assert true asserttrue expecting parsed reference assert equals assertequals expecting reference get class getclass parsed get class getclass list template node templatenode parsed children parsedchildren reference children referencechildren parsed get class getclass template template parsed template parsedtemplate template parsed template reference template referencetemplate template reference assert equals assertequals expecting reference template referencetemplate get name getname parsed template parsedtemplate get name getname parsed children parsedchildren parsed template parsedtemplate get children getchildren reference children referencechildren reference template referencetemplate get children getchildren parsed get class getclass template element node templateelementnode template element node templateelementnode parsed element parsedelement template element node templateelementnode parsed template element node templateelementnode reference element referenceelement template element node templateelementnode reference assert equals assertequals expecting reference element referenceelement get name getname parsed element parsedelement get name getname parsed children parsedchildren parsed element parsedelement get children getchildren reference children referencechildren reference element referenceelement get children getchildren parsed get class getclass template text node templatetextnode assert equals assertequals expecting content template text node templatetextnode reference get text gettext template text node templatetextnode parsed get text gettext parsed get class getclass template comment node templatecommentnode assert equals assertequals expecting content template comment node templatecommentnode reference get text gettext template comment node templatecommentnode parsed get text gettext parsed children parsedchildren reference children referencechildren assert true asserttrue expecting children parsed children parsedchildren reference children referencechildren assert equals assertequals expecting number children parsed children parsedchildren size reference children referencechildren size parsed children parsedchildren size assert same structure assertsamestructure parsed children parsedchildren reference children referencechildren create basic template node structure text node comment node param text and comment textandcomment string text optional comment template create reference createreference string text and comment textandcomment comment ix commentix text and comment textandcomment index of indexof comment ix commentix comment ix commentix text and comment textandcomment length index out of bounds exception indexoutofboundsexception string text comment template reference template comment ix commentix reference add child addchild template text node templatetextnode text and comment textandcomment substring comment ix commentix reference add child addchild template comment node templatecommentnode text and comment textandcomment substring comment ix commentix reference test test parse comment span ning across char buffer testparsecommentspanningacrosscharbuffer exception string test strings teststrings string comment comment comment comment comment comment comment comment comment comment comment comment template reference parsed white box whitebox set internal state setinternalstate html parser htmlparser buf size string test test strings teststrings string reader stringreader reader string reader stringreader test reference create reference createreference test template parser templateparser template parser context templateparsercontext context template parser templateparser template parser context templateparsercontext html parser htmlparser parse reader context parsed context get template gettemplate assert same structure assertsamestructure parsed reference assertion error assertionerror system println reference print reference system println parse d parsed print parsed