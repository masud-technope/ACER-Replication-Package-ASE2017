licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license sandroboehme jsnodetypes org mockito mockito mock org mockito mockito java buffered reader bufferedreader java file reader filereader java io exception ioexception java net url javax jcr property type propertytype javax jcr repository exception repositoryexception javax jcr value format exception valueformatexception javax jcr node type nodetype node definition nodedefinition javax jcr node type nodetype node type nodetype javax jcr node type nodetype property definition propertydefinition javax servlet servlet exception servletexception org apache sling commons json json exception jsonexception org junit org junit test sandroboehme jsnodetypes mock mock node type generator mocknodetypegenerator tests json generated values default node type test defaultnodetypetest mock node type generator mocknodetypegenerator set up setup repository exception repositoryexception io exception ioexception set up setup string getdefaultntjson io exception ioexception url file uri fileuri mock node type generator mocknodetypegenerator get resource getresource sling inf libs jsnodetypes defaultnt defaultnt json buffered reader bufferedreader buffered reader bufferedreader file reader filereader file uri fileuri get file getfile string current line currentline string builder stringbuilder file content filecontent string builder stringbuilder current line currentline read line readline file content filecontent append current line currentline file content filecontent to string tostring simulates node type repository values checks generated json file test test if defaults are omitted with servlet testifdefaultsareomittedwithservlet json exception jsonexception servlet exception servletexception io exception ioexception value format exception valueformatexception illegal state exception illegalstateexception repository exception repositoryexception node type nodetype get simple node type with name getsimplenodetypewithname test node type testnodetype node type iterator nodetypeiterator next node type nextnodetype then return thenreturn node type iterator nodetypeiterator has next hasnext then return thenreturn node type nodetype nt base ntbase mock node type nodetype nt base ntbase get name getname then return thenreturn base node definition nodedefinition child node def childnodedef mock node definition nodedefinition node type nodetype req primary types reqprimarytypes nt base ntbase child node def childnodedef get required primary types getrequiredprimarytypes then return thenreturn req primary types reqprimarytypes child node def childnodedef get name getname then return thenreturn child node def childnodedef node definition nodedefinition child node defs childnodedefs child node def childnodedef get declared child node definitions getdeclaredchildnodedefinitions then return thenreturn child node defs childnodedefs string property name propertyname string property def stringpropertydef property definition propertydefinition property def propertydef mock property definition propertydefinition property def propertydef get required type getrequiredtype then return thenreturn property type propertytype string property def propertydef get name getname then return thenreturn property name propertyname get declared property definitions getdeclaredpropertydefinitions then return thenreturn property definition propertydefinition property def propertydef assert equals with servlet result assertequalswithservletresult test if defaults are omitted with servlet testifdefaultsareomittedwithservlet