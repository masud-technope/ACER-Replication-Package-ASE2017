licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock sling resource org junit assert array equals assertarrayequals org junit assert equals assertequals org junit assert false assertfalse org junit assert not null assertnotnull org junit assert true asserttrue java byte array input stream bytearrayinputstream java io exception ioexception java input stream inputstream java util calendar java util java util hash map hashmap java util list java util map org apache commons io utils ioutils org apache commons lang string utils stringutils org apache jackrabbit jcr constants jcrconstants org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource util resourceutil org apache sling api resource value map valuemap org apache sling testing mock sling resource resolver type resourceresolvertype org apache sling testing mock sling builder content builder contentbuilder org apache sling testing mock sling junit sling context slingcontext org junit org junit rule org junit test google common collect immutable list immutablelist google common collect immutable map immutablemap google common collect lists simple write read resource values test sling crud api create test data abstract sling crud resource resolver test abstractslingcrudresourceresolvertest rule sling context slingcontext context sling context slingcontext get resource resolver type getresourceresolvertype string string string string array string integer calendar calendar calendar get instance getinstance binary resource test root testroot resource resolver type resourceresolvertype get resource resolver type getresourceresolvertype set up setup io exception ioexception prepare test data sling crud api resource root node rootnode get test root resource gettestrootresource map string object props hash map hashmap string object props jcr constants jcrconstants jcr primarytype jcr constants jcrconstants unstructured props string prop stringprop string props string array prop stringarrayprop string array props int eger prop integerprop integer props double prop doubleprop props boolean prop booleanprop props date prop dateprop props calendar prop calendarprop calendar props binary prop binaryprop byte array input stream bytearrayinputstream binary resource node context resource resolver resourceresolver create root node rootnode node props context resource resolver resourceresolver create node node immutable map immutablemap string object builder string prop stringprop string build context resource resolver resourceresolver create node node value map valuemap empty context resource resolver resourceresolver commit test root resource created demand unique path persistence exception persistenceexception resource get test root resource gettestrootresource persistence exception persistenceexception test root testroot test root testroot context resource resolver resourceresolver get resource getresource context unique root uniqueroot content test root testroot test test simple properties testsimpleproperties io exception ioexception resource resource context resource resolver resourceresolver get resource getresource get test root resource gettestrootresource get path getpath node assert not null assertnotnull resource assert equals assertequals node resource get name getname value map valuemap props resource util resourceutil get value map getvaluemap resource assert equals assertequals string props string prop stringprop string assert array equals assertarrayequals string array props string array prop stringarrayprop string assert equals assertequals integer integer props int eger prop integerprop integer assert equals assertequals props double prop doubleprop assert equals assertequals props boolean prop booleanprop test test simple properties testsimpleproperties deep path access deeppathaccess io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath assert not null assertnotnull resource assert equals assertequals test root testroot get name getname resource get name getname value map valuemap props resource util resourceutil get value map getvaluemap resource assert equals assertequals string props node string prop stringprop string assert array equals assertarrayequals string array props node string array prop stringarrayprop string assert equals assertequals integer integer props node int eger prop integerprop integer assert equals assertequals props node double prop doubleprop assert equals assertequals props node boolean prop booleanprop assert equals assertequals string props node node string prop stringprop string test test date property testdateproperty io exception ioexception resource resource context resource resolver resourceresolver get resource getresource get test root resource gettestrootresource get path getpath node value map valuemap props resource util resourceutil get value map getvaluemap resource writing objects sling get resource resolver type getresourceresolvertype resource resolver type resourceresolvertype jcr mock get resource resolver type getresourceresolvertype resource resolver type resourceresolvertype jcr jackrabbit get resource resolver type getresourceresolvertype resource resolver type resourceresolvertype jcr oak assert equals assertequals props date prop dateprop test test date property to calendar testdatepropertytocalendar io exception ioexception resource resource context resource resolver resourceresolver get resource getresource get test root resource gettestrootresource get path getpath node value map valuemap props resource util resourceutil get value map getvaluemap resource writing objects sling get resource resolver type getresourceresolvertype resource resolver type resourceresolvertype jcr mock get resource resolver type getresourceresolvertype resource resolver type resourceresolvertype jcr jackrabbit get resource resolver type getresourceresolvertype resource resolver type resourceresolvertype jcr oak calendar calendar value calendarvalue props date prop dateprop calendar assert not null assertnotnull calendar value calendarvalue assert equals assertequals calendar value calendarvalue get time gettime test test calendar property testcalendarproperty io exception ioexception resource resource context resource resolver resourceresolver get resource getresource get test root resource gettestrootresource get path getpath node value map valuemap props resource util resourceutil get value map getvaluemap resource assert equals assertequals calendar get time gettime props calendar prop calendarprop calendar get time gettime test test calendar property to date testcalendarpropertytodate io exception ioexception resource resource context resource resolver resourceresolver get resource getresource get test root resource gettestrootresource get path getpath node value map valuemap props resource util resourceutil get value map getvaluemap resource date value datevalue props calendar prop calendarprop assert not null assertnotnull date value datevalue assert equals assertequals calendar get time gettime date value datevalue test test list children testlistchildren io exception ioexception resource resource context resource resolver resourceresolver get resource getresource get test root resource gettestrootresource get path getpath node list resource children immutable list immutablelist copy of copyof resource list children listchildren assert equals assertequals children size assert equals assertequals node children get name getname assert equals assertequals node children get name getname test test list children testlistchildren root node rootnode io exception ioexception resource resource context resource resolver resourceresolver get resource getresource list resource children lists new array list newarraylist resource list children listchildren assert false assertfalse children is empty isempty assert true asserttrue contains resource containsresource children get test root resource gettestrootresource get parent getparent children lists new array list newarraylist resource get children getchildren assert false assertfalse children is empty isempty assert true asserttrue contains resource containsresource children get test root resource gettestrootresource get parent getparent contains resource containsresource list resource children resource resource resource child children string utils stringutils equals child get path getpath resource get path getpath test test binary data testbinarydata io exception ioexception resource resource context resource resolver resourceresolver get resource getresource get test root resource gettestrootresource get path getpath node resource binary prop resource binarypropresource resource get child getchild binary prop binaryprop input stream inputstream binary prop resource binarypropresource adapt to adaptto input stream inputstream data from resource datafromresource io utils ioutils to byte array tobytearray close assert array equals assertarrayequals binary data from resource datafromresource read time ensure original input stream returned time syntax input stream inputstream resource util resourceutil get value map getvaluemap resource binary prop binaryprop input stream inputstream data from resource datafromresource io utils ioutils to byte array tobytearray close assert array equals assertarrayequals binary data from resource datafromresource test test primary type resource type testprimarytyperesourcetype persistence exception persistenceexception resource resource context resource resolver resourceresolver get resource getresource get test root resource gettestrootresource get path getpath node assert equals assertequals jcr constants jcrconstants unstructured resource get resource type getresourcetype test test get root resource by null path testgetrootresourcebynullpath resource root resource rootresource context resource resolver resourceresolver resolve string assert not null assertnotnull root resource rootresource assert equals assertequals root resource rootresource get path getpath test test search path testsearchpath content builder contentbuilder builder content builder contentbuilder context resource resolver resourceresolver builder resource libs path resource resource context resource resolver resourceresolver get resource getresource path assert not null assertnotnull resource assert equals assertequals libs path resource get path getpath builder resource apps path resource context resource resolver resourceresolver get resource getresource path assert not null assertnotnull resource assert equals assertequals apps path resource get path getpath test test pending changes commit testpendingchangescommit persistence exception persistenceexception skip test jcr mock track pending get resource resolver type getresourceresolvertype resource resolver type resourceresolvertype jcr mock context resource resolver resourceresolver delete get test root resource gettestrootresource assert true asserttrue context resource resolver resourceresolver has changes haschanges context resource resolver resourceresolver commit assert false assertfalse context resource resolver resourceresolver has changes haschanges