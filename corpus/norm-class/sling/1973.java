licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide test impl java util collections singleton map singletonmap org hamcrest core matchers corematchers equal to equalto org hamcrest core matchers corematchers null value nullvalue org junit assert that assertthat java input stream inputstream java util hash map hashmap java util list java util map org apache sling ide eclipse core internal resource change command factory resourcechangecommandfactory org apache sling ide test impl helpers project adapter projectadapter org apache sling ide test impl helpers spy command spycommand org apache sling ide test impl helpers spy repository spyrepository org apache sling ide test impl helpers temporary project temporaryproject org apache sling ide transport repository org apache sling ide transport resource proxy resourceproxy org apache sling ide util path util pathutil org eclipse core resources i project iproject org eclipse core runtime core exception coreexception org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime path org junit org junit rule org junit test resource change command factory test resourcechangecommandfactorytest rule temporary project temporaryproject project rule projectrule temporary project temporaryproject i project iproject content project contentproject project adapter projectadapter project resource change command factory resourcechangecommandfactory factory repository spy repo spyrepo set up setup exception create faceted project content project contentproject project rule projectrule get project getproject project project adapter projectadapter content project contentproject project add natures addnatures org eclipse wst common project facet core nature install content facet project install facet installfacet sling content factory resource change command factory resourcechangecommandfactory activator get default getdefault get serialization manager getserializationmanager spy repo spyrepo spy repository spyrepository test command for added or updated nt folder commandforaddedorupdatedntfolder core exception coreexception create sling folder content test root nested input stream inputstream child content xml childcontentxml get class getclass get resource as stream getresourceasstream sling folder node type nodetype xml project create or update file createorupdatefile path from portable string fromportablestring jcr root content test root nested content xml child content xml childcontentxml spy command spycommand command spy command spycommand factory new command for added or updated newcommandforaddedorupdated spy repo spyrepo content project contentproject find member findmember jcr root content test root assert that assertthat command path command get path getpath null value nullvalue assert that assertthat command resource path command get resource proxy getresourceproxy get path getpath equal to equalto content test root assert that assertthat command resource properties command get resource proxy getresourceproxy get properties getproperties equal to equalto singleton map singletonmap jcr primary type primarytype object folder assert that assertthat command file info fileinfo command get file info getfileinfo null value nullvalue assert that assertthat command kind command get spy kind getspykind equal to equalto spy command spycommand kind add update test command for added or updated sling folder commandforaddedorupdatedslingfolder core exception coreexception create sling folder content test root nested input stream inputstream child content xml childcontentxml get class getclass get resource as stream getresourceasstream sling folder node type nodetype title xml project create or update file createorupdatefile path from portable string fromportablestring jcr root content test root nested content xml child content xml childcontentxml spy command spycommand command spy command spycommand factory new command for added or updated newcommandforaddedorupdated spy repo spyrepo content project contentproject find member findmember jcr root content test root nested map string object props hash map hashmap props jcr primary type primarytype sling folder props jcr title folder assert that assertthat command path command get path getpath null value nullvalue assert that assertthat command resource path command get resource proxy getresourceproxy get path getpath equal to equalto content test root nested assert that assertthat command resource properties command get resource proxy getresourceproxy get properties getproperties equal to equalto props assert that assertthat command file info fileinfo command get file info getfileinfo null value nullvalue assert that assertthat command kind command get spy kind getspykind equal to equalto spy command spycommand kind add update test command for sling ordered folder commandforslingorderedfolder children core exception coreexception create sling ordered folder orderedfolder content test root project create or update file createorupdatefile path from portable string fromportablestring jcr root content test root content xml get class getclass get resource as stream getresourceasstream sling ordered folder children xml create child folder listed content xml file content project contentproject get folder getfolder jcr root content test root folder create null progress monitor nullprogressmonitor spy command spycommand command spy command spycommand factory new command for added or updated newcommandforaddedorupdated spy repo spyrepo content project contentproject find member findmember jcr root content test root list resource proxy resourceproxy children command get resource proxy getresourceproxy get children getchildren assert that assertthat command resource children size children size equal to equalto test command for sling ordered folder commandforslingorderedfolder children missing from files ystem childrenmissingfromfilesystem core exception coreexception create sling ordered folder orderedfolder content test root project create or update file createorupdatefile path from portable string fromportablestring jcr root content test root content xml get class getclass get resource as stream getresourceasstream sling ordered folder children xml spy command spycommand command spy command spycommand factory new command for added or updated newcommandforaddedorupdated spy repo spyrepo content project contentproject find member findmember jcr root content test root list resource proxy resourceproxy children command get resource proxy getresourceproxy get children getchildren assert that assertthat command resource children size children size equal to equalto test command for sling ordered folder commandforslingorderedfolder extra children in the files ystem extrachildreninthefilesystem core exception coreexception create sling ordered folder orderedfolder content test root project create or update file createorupdatefile path from portable string fromportablestring jcr root content test root content xml get class getclass get resource as stream getresourceasstream sling ordered folder children xml create child folder listed content xml file content project contentproject get folder getfolder jcr root content test root folder create null progress monitor nullprogressmonitor create extra folder listed content xml file content project contentproject get folder getfolder jcr root content test root folder create null progress monitor nullprogressmonitor spy command spycommand command spy command spycommand factory new command for added or updated newcommandforaddedorupdated spy repo spyrepo content project contentproject find member findmember jcr root content test root list resource proxy resourceproxy children command get resource proxy getresourceproxy get children getchildren assert that assertthat command resource children size children size equal to equalto assert that assertthat command resource children path util pathutil get name getname children get path getpath equal to equalto folder