licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock osgi org junit assert array equals assertarrayequals org junit assert equals assertequals org junit assert not null assertnotnull org junit assert same assertsame java util dictionary java util hashtable org apache sling testing mock osgi osgi metadata util test osgimetadatautiltest service with metadata servicewithmetadata org junit org junit test org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service reference servicereference mock service reference test mockservicereferencetest bundle context bundlecontext bundle context bundlecontext service reference servicereference service reference servicereference object service set up setup bundle context bundlecontext mock osgi mockosgi new bundle context newbundlecontext service object string clazz string get name getname dictionary string object props hashtable string object props custom prop customprop bundle context bundlecontext register service registerservice clazz service props service reference servicereference bundle context bundlecontext get service reference getservicereference clazz test test bundle testbundle assert same assertsame bundle context bundlecontext get bundle getbundle service reference servicereference get bundle getbundle test test service id testserviceid assert not null assertnotnull service reference servicereference get property getproperty constants service test test properties testproperties assert equals assertequals service reference servicereference get property keys getpropertykeys length assert equals assertequals service reference servicereference get property getproperty custom prop customprop mandatory properties container assert not null assertnotnull service reference servicereference get property getproperty constants service assert array equals assertarrayequals string service reference servicereference get property getproperty constants object class objectclass string string get name getname test test with osgi metadata testwithosgimetadata service with metadata servicewithmetadata service with metadata servicewithmetadata osgi metadata util test osgimetadatautiltest service with metadata servicewithmetadata bundle context bundlecontext register service registerservice string service with metadata servicewithmetadata service reference servicereference reference bundle context bundlecontext get service reference getservicereference comparable get name getname assert equals assertequals reference get property getproperty constants service ranking assert equals assertequals apache software foundation reference get property getproperty constants service vendor assert equals assertequals org apache sling testing mock osgi osgi metadata util test osgimetadatautiltest service with metadata servicewithmetadata reference get property getproperty constants service pid