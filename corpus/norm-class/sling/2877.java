licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting core impl java lang soft reference softreference java util arrays java util dictionary java util hash set hashset java util hashtable java util map java util java util concurrent locks lock java util concurrent locks reentrant read write lock reentrantreadwritelock javax script comp ilable compilable javax script compiled script compiledscript javax script script engine scriptengine javax script script engine factory scriptenginefactory org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations reference policy referencepolicy org apache felix scr annotations service org apache sling api sling constants slingconstants org apache sling api resource login exception loginexception org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling commons osgi properties util propertiesutil org apache sling commons threads thread pool threadpool org apache sling commons threads thread pool manager threadpoolmanager org apache sling scripting api cached script cachedscript org apache sling scripting api script cache scriptcache org apache sling scripting core impl helper caching map cachingmap org osgi framework bundle context bundlecontext org osgi framework service registration serviceregistration org osgi service component component context componentcontext org osgi service event event org osgi service event event constants eventconstants org osgi service event event handler eventhandler org slf logger org slf logger factory loggerfactory component metatype label apache sling script cache description script cache running compiled scripts properties property script cache impl scriptcacheimpl prop cache size int value intvalue script cache impl scriptcacheimpl cache size label cache size description cache size defines maximum number compiled script references stored cache internal map property script cache impl scriptcacheimpl prop additional extensions label additional extensions description scripts search paths extensions monitored clean cache cache unbounded property unbounded propertyunbounded array service script cache scriptcache reference script engine factory scriptenginefactory cardinality reference cardinality referencecardinality optional multiple reference interface referenceinterface script engine factory scriptenginefactory policy reference policy referencepolicy dynamic suppress warnings suppresswarnings unused script cache impl scriptcacheimpl code script cache scriptcache stores link compiled script compiledscript instances eval uated evaluated link script engine scriptengine implement link comp ilable compilable event handler eventhandler script cache scriptcache logger logger logger factory loggerfactory get logger getlogger script cache impl scriptcacheimpl cache size string prop cache size org apache sling scripting cache size string prop additional extensions org apache sling scripting cache additional extensions bundle context bundlecontext bundle context bundlecontext map string soft reference softreference cached script cachedscript internal map internalmap service registration serviceregistration event handler service registration eventhandlerserviceregistration string extensions hash set hashset string string additional extensions additionalextensions string string search paths searchpaths policy rec onfigure reconfigure watched script files search paths changed reference policy reference policy referencepolicy resource resolver factory resourceresolverfactory rrf reference thread pool manager threadpoolmanager thread pool manager threadpoolmanager thread pool threadpool thread pool threadpool reentrant read write lock reentrantreadwritelock rwl reentrant read write lock reentrantreadwritelock lock read lock readlock rwl read lock readlock lock write lock writelock rwl write lock writelock active script cache impl scriptcacheimpl internal map internalmap caching map cachingmap cached script cachedscript cache size override cached script cachedscript get script getscript string script path scriptpath read lock readlock lock soft reference softreference cached script cachedscript reference reference internal map internalmap script path scriptpath read lock readlock unlock reference reference override put script putscript cached script cachedscript script write lock writelock lock string search path searchpath search paths searchpaths script get script path getscriptpath starts with startswith search path searchpath soft reference softreference cached script cachedscript reference soft reference softreference cached script cachedscript script internal map internalmap script get script path getscriptpath reference write lock writelock unlock override clear write lock writelock lock internal map internalmap clear write lock writelock unlock override remove script removescript string script path scriptpath write lock writelock lock soft reference softreference cached script cachedscript reference internal map internalmap remove script path scriptpath reference write lock writelock unlock override handle event handleevent event event events trigger synch ronised synchronised map operation remove handle events async hronously asynchronously don block event processing string topic event get topic gettopic sling constants slingconstants topic resource changed equals topic sling constants slingconstants topic resource removed equals topic runnable event task eventtask runnable override string path string event get property getproperty sling constants slingconstants property path write lock writelock lock internal map internalmap remove path logger debug detected script change removed entry cache path write lock writelock unlock thread pool threadpool execute event task eventtask string get cached scripts getcachedscripts read lock readlock lock internal map internalmap key set keyset read lock readlock unlock activate suppress warnings suppresswarnings unused activate component context componentcontext component context componentcontext thread pool threadpool thread pool manager threadpoolmanager script cache thread pool bundle context bundlecontext component context componentcontext get bundle context getbundlecontext dictionary properties component context componentcontext get properties getproperties additional extensions additionalextensions properties util propertiesutil to string array tostringarray properties prop additional extensions new max cache size newmaxcachesize properties util propertiesutil to integer tointeger properties prop cache size cache size new max cache size newmaxcachesize cache size change map configuration change cache max size caching map cachingmap cached script cachedscript new map newmap caching map cachingmap cached script cachedscript new max cache size newmaxcachesize new map newmap put all putall internal map internalmap internal map internalmap new map newmap resource resolver resourceresolver resolver resolver rrf get administrative resource resolver getadministrativeresourceresolver search paths searchpaths resolver get search path getsearchpath login exception loginexception logger error unable store search paths resolver resolver close configure cache configurecache active suppress warnings suppresswarnings unchecked configure cache configurecache write lock writelock lock resource resolver resourceresolver admin resolver adminresolver event handler service registration eventhandlerserviceregistration event handler service registration eventhandlerserviceregistration unregister event handler service registration eventhandlerserviceregistration internal map internalmap clear extensions add all addall arrays as list aslist additional extensions additionalextensions extensions size admin resolver adminresolver rrf get administrative resource resolver getadministrativeresourceresolver string builder stringbuilder event handler filter eventhandlerfilter string builder stringbuilder string search path searchpath admin resolver adminresolver get search path getsearchpath string extension extensions event handler filter eventhandlerfilter append path append search path searchpath append append extension append event handler filter eventhandlerfilter append dictionary event handler properties eventhandlerproperties hashtable event handler properties eventhandlerproperties event constants eventconstants event filter event handler filter eventhandlerfilter to string tostring event handler properties eventhandlerproperties event constants eventconstants event topic string sling constants slingconstants topic resource changed sling constants slingconstants topic resource removed event handler service registration eventhandlerserviceregistration bundle context bundlecontext register service registerservice event handler eventhandler get name getname event handler properties eventhandlerproperties login exception loginexception logger error unable auto mated automated cache invalidation script cache scriptcache admin resolver adminresolver admin resolver adminresolver close write lock writelock unlock deactivate suppress warnings suppresswarnings unused deactivate component context componentcontext component context componentcontext internal map internalmap clear event handler service registration eventhandlerserviceregistration event handler service registration eventhandlerserviceregistration unregister event handler service registration eventhandlerserviceregistration thread pool threadpool thread pool manager threadpoolmanager release thread pool threadpool thread pool threadpool active bind script engine factory bindscriptenginefactory script engine factory scriptenginefactory script engine factory scriptenginefactory map string object properties script engine scriptengine engine script engine factory scriptenginefactory get script engine getscriptengine engine comp ilable compilable care creating event handler eventhandler monitors scripts generated script engines implement comp ilable compilable string extension script engine factory scriptenginefactory get extensions getextensions extensions add extension active configure cache configurecache unbind script engine factory unbindscriptenginefactory script engine factory scriptenginefactory script engine factory scriptenginefactory map string object properties string extension script engine factory scriptenginefactory get extensions getextensions extensions remove extension active configure cache configurecache