licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution resources impl common javax jcr session java util hash map hashmap java util hash set hashset java util map java util org apache sling api resource modifying resource provider modifyingresourceprovider org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver modifying link org apache sling api resource resource provider resourceprovider distribution abstract modifying resource provider abstractmodifyingresourceprovider abstract readable resource provider abstractreadableresourceprovider modifying resource provider modifyingresourceprovider map string map string object changed resources changedresources hash map hashmap string map string object string deleted resources deletedresources hash set hashset string abstract modifying resource provider abstractmodifyingresourceprovider string resource root resourceroot resource root resourceroot resource create resource resolver resourceresolver resolver string path map string object properties persistence exception persistenceexception simple path info simplepathinfo path info pathinfo extract path info extractpathinfo path path info pathinfo persistence exception persistenceexception invalid path path has permission haspermission resolver path info pathinfo get resource path getresourcepath session action add node persistence exception persistenceexception permissions string resource name resourcename path info pathinfo get main resource name getmainresourcename add to changed resources addtochangedresources resource name resourcename properties persistence exception persistenceexception resource exists path resource name resourcename build main resource buildmainresource resolver path info pathinfo properties delete resource resolver resourceresolver resolver string request path requestpath persistence exception persistenceexception simple path info simplepathinfo path info pathinfo extract path info extractpathinfo request path requestpath path info pathinfo persistence exception persistenceexception invalid path request path requestpath has permission haspermission resolver path info pathinfo get resource path getresourcepath session action remove persistence exception persistenceexception permissions string resource name resourcename path info pathinfo get main resource name getmainresourcename deleted resources deletedresources resource name resourcename deleted resources deletedresources add resource name resourcename changed resources changedresources remove resource name resourcename revert resource resolver resourceresolver resolver changed resources changedresources clear deleted resources deletedresources clear commit resource resolver resourceresolver resolver persistence exception persistenceexception has changes haschanges resolver save resolver changed resources changedresources deleted resources deletedresources revert resolver has changes haschanges resource resolver resourceresolver resolver changed resources changedresources size deleted resources deletedresources size change resource resolver resourceresolver resource resolver resourceresolver string request path requestpath map string object properties simple path info simplepathinfo path info pathinfo extract path info extractpathinfo request path requestpath path info pathinfo has permission haspermission resource resolver resourceresolver path info pathinfo get resource path getresourcepath session action property string resource name resourcename path info pathinfo get main resource name getmainresourcename add to changed resources addtochangedresources resource name resourcename properties add to changed resources addtochangedresources string resource name resourcename map string object new properties newproperties fail if already exists failifalreadyexists deleted deleted resources deletedresources remove resource name resourcename map string object existing resource existingresource get main resource properties getmainresourceproperties resource name resourcename fail if already exists failifalreadyexists deleted existing resource existingresource map string object properties hash map hashmap string object existing resource existingresource properties put all putall existing resource existingresource new properties newproperties properties put all putall new properties newproperties changed resources changedresources resource name resourcename properties map string object get main resource properties getmainresourceproperties string resource name resourcename deleted resources deletedresources resource name resourcename changed resources changedresources contains key containskey resource name resourcename changed resources changedresources resource name resourcename simple path info simplepathinfo path info pathinfo simple path info simplepathinfo parse path info parsepathinfo resource root resourceroot resource root resourceroot resource name resourcename get resource properties getresourceproperties path info pathinfo resource build main resource buildmainresource resource resolver resourceresolver resource resolver resourceresolver simple path info simplepathinfo path info pathinfo map string object properties object adapters simple modifiable resource simplemodifiableresource resource resolver resourceresolver path info pathinfo get resource path getresourcepath properties save resource resolver resourceresolver resource resolver resourceresolver map string map string object changed resources changedresources string deleted resources deletedresources persistence exception persistenceexception