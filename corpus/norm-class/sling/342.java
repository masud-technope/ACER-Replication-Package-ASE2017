licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling fsprovider internal java file java util dictionary java util hashtable java util timer java util timer task timertask org apache sling api sling constants slingconstants org osgi service event event admin eventadmin org slf logger org slf logger factory loggerfactory monitor file system per iodically periodically checks file monitor filemonitor timer task timertask logger logger logger logger factory loggerfactory get logger getlogger get class getclass timer timer timer stopped monitor able monitorable root fs resource provider fsresourceprovider provider creates instance param provider resource provider param int erval interval int erval interval executions task milliseconds file monitor filemonitor fs resource provider fsresourceprovider provider int erval interval provider provider root monitor able monitorable provider get provider root getproviderroot provider get root file getrootfile create status createstatus root logger debug starting file monitor int erval interval root file int erval interval timer schedule int erval interval per iodically periodically executing task task executing current execution simply timer cancel timer cancel int errupted interrupted stopped timer wait interrupted exception interruptedexception int errupted interrupted int errupted interrupted thread current thread currentthread int errupt interrupt logger debug stopped file monitor root file java util timer task timertask timer stopped stopped timer notify all notifyall don event admin skip check event admin eventadmin localea provider get event admin geteventadmin localea check root localea exception timer stopped timer notify all notifyall check monitorable param monitorable monitorable check param localea event admin check monitor able monitorable monitorable event admin eventadmin localea logger debug checking monitorable file file existing check read ded readded monitorable status non existing status nonexistingstatus monitorable file exists file reset status create status createstatus monitorable send events sendevents monitorable sling constants slingconstants topic resource localea check file removed monitorable file exists removed file update status send events sendevents monitorable sling constants slingconstants topic resource removed localea monitorable status non existing status nonexistingstatus singleton check file status filestatus file status filestatus monitorable status changed last modified lastmodified monitorable file last modified lastmodified last modified lastmodified monitorable file last modified lastmodified changed send events sendevents monitorable sling constants slingconstants topic resource changed localea changed dir status dirstatus directory dir status dirstatus dir status dirstatus children length check children localea dir changed update changed update file files monitorable file list files listfiles files monitor able monitorable children monitor able monitorable files length files length search list children length children file equals files children children children children monitor able monitorable monitorable path files get name getname files children status non existing status nonexistingstatus singleton check children localea children children children monitor able monitorable send event async event admin send events sendevents monitor able monitorable monitorable string topic event admin eventadmin localea logger is debug enabled isdebugenabled logger debug detected change resource monitorable path topic dictionary string string properties hashtable string string properties sling constants slingconstants property path monitorable path string type monitorable status file status filestatus fs resource fsresource resource type file fs resource fsresource resource type folder properties sling constants slingconstants property resource type type localea post event postevent org osgi service event event topic properties create status object monitorable create status createstatus monitor able monitorable monitorable monitorable file exists monitorable status non existing status nonexistingstatus singleton monitorable file is file isfile monitorable status file status filestatus monitorable file monitorable status dir status dirstatus monitorable file monitorable path monitorable hold resource path file status monitor able monitorable string path file file object status monitor able monitorable string path file file path path file file status files file status filestatus last modified lastmodified file status filestatus file file last modified lastmodified file last modified lastmodified status directories dir status dirstatus file status filestatus monitor able monitorable children dir status dirstatus file dir string path dir file files dir list files listfiles files children monitor able monitorable files length files length children monitor able monitorable path files get name getname files file monitor filemonitor create status createstatus children children monitor able monitorable status existing files non existing status nonexistingstatus non existing status nonexistingstatus singleton non existing status nonexistingstatus