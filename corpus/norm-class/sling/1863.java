licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing tools jar exec jarexec java util timer java util timer task timertask org apache commons exec process dest royer processdestroyer org slf logger org slf logger factory loggerfactory simple process dest royer processdestroyer single process meant jar executor jarexecutor shutdown hook single process dest royer shutdownhooksingleprocessdestroyer process dest royer processdestroyer runnable logger log logger factory loggerfactory get logger getlogger get class getclass thread shutdown hook thread shutdownhookthread process process timeout seconds timeoutseconds string process info processinfo wait on shutdown waitonshutdown shutdown hook single process dest royer shutdownhooksingleprocessdestroyer string process info processinfo timeout seconds timeoutseconds process info processinfo process info processinfo timeout seconds timeoutseconds timeout seconds timeoutseconds get wait on shutdown getwaitonshutdown wait on shutdown waitonshutdown set wait on shutdown setwaitonshutdown wait on shutdown waitonshutdown wait on shutdown waitonshutdown wait on shutdown waitonshutdown add process process illegal state exception illegalstateexception process process shutdown hook thread shutdownhookthread shutdown hook thread shutdownhookthread thread get class getclass get simple name getsimplename runtime get runtime getruntime add shutdown hook addshutdownhook shutdown hook thread shutdownhookthread process remove process size destroy process destroyprocess wait on shutdown waitonshutdown destroy process destroyprocess wait for it waitforit process to destroy todestroy to destroy todestroy process process to destroy todestroy to destroy todestroy destroy wait for it waitforit log info waiting dest royed destroyed process exit timeout seconds process info processinfo timeout seconds timeoutseconds thread main thread mainthread thread current thread currentthread timer timer timer task timertask task timer task timertask override main thread mainthread int errupt interrupt schedule task timeout seconds timeoutseconds to destroy todestroy wait for waitfor exit to destroy todestroy exit value exitvalue log info process ended exit code process info processinfo exit illegal state exception illegalstateexception ise log error failed destroy process process info processinfo interrupted exception interruptedexception log error timeout waiting process process info processinfo exit cancel