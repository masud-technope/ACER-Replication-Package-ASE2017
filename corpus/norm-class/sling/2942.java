licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling models impl org mockito mockito java util hash map hashmap java util hashtable java util map org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource resource org apache sling api resource value map valuemap org apache sling api wrappers value map decorator valuemapdecorator org apache sling models annotations model org apache sling models annotations injectorspecific org apache sling models factory invalid adaptable exception invalidadaptableexception org apache sling models factory model class exception modelclassexception org apache sling models factory missing elements exception missingelementsexception org apache sling models impl injectors self injector selfinjector org apache sling models impl injectors value map injector valuemapinjector org apache sling models test models testmodels classes constructor with exception model constructorwithexceptionmodel org apache sling models test models testmodels classes default string model defaultstringmodel org apache sling models test models testmodels classes invalid model with missing annotation invalidmodelwithmissingannotation org apache sling models test models testmodels classes resource model with required field resourcemodelwithrequiredfield org junit org junit org junit test org junit runner run with runwith org mockito mock org mockito run ners runners mockito unit runner mockitojunitrunner org osgi framework bundle context bundlecontext org osgi service component component context componentcontext run with runwith mockito unit runner mockitojunitrunner adapter factory test adapterfactorytest mock component context componentcontext component ctx componentctx mock bundle context bundlecontext bundle context bundlecontext mock resource resource mock sling http servlet request slinghttpservletrequest request model adapter factory modeladapterfactory factory setup component ctx componentctx get bundle context getbundlecontext then return thenreturn bundle context bundlecontext component ctx componentctx get properties getproperties then return thenreturn hashtable string object factory model adapter factory modeladapterfactory factory activate component ctx componentctx factory bind injector bindinjector value map injector valuemapinjector service properties map servicepropertiesmap factory bind injector bindinjector self injector selfinjector service properties map servicepropertiesmap test test is model class testismodelclass assert true asserttrue factory is model class ismodelclass resource default string model defaultstringmodel assert false assertfalse factory is model class ismodelclass resource invalid model with missing annotation invalidmodelwithmissingannotation test test can create from adaptable testcancreatefromadaptable assert true asserttrue factory can create from adaptable cancreatefromadaptable resource default string model defaultstringmodel assert false assertfalse factory can create from adaptable cancreatefromadaptable request default string model defaultstringmodel test expected model class exception modelclassexception test can create from adaptable with invalid model testcancreatefromadaptablewithinvalidmodel factory can create from adaptable cancreatefromadaptable resource invalid model with missing annotation invalidmodelwithmissingannotation test expected model class exception modelclassexception test create from non model class testcreatefromnonmodelclass factory create model createmodel resource invalid model with missing annotation invalidmodelwithmissingannotation test expected invalid adaptable exception invalidadaptableexception test create from invalid adaptable testcreatefrominvalidadaptable factory create model createmodel request default string model defaultstringmodel test expected runtime exception runtimeexception test create with constructor exception testcreatewithconstructorexception int ernally internally exceptions wrapped runtime exceptions runtimeexceptions factory create model createmodel resource constructor with exception model constructorwithexceptionmodel model adaptables sling http servlet request slinghttpservletrequest nested model with invalid adaptable nestedmodelwithinvalidadaptable default string model defaultstringmodel nested model nestedmodel test expected missing elements exception missingelementsexception test created nested model with invalid adaptable testcreatednestedmodelwithinvalidadaptable nested model adapted adaptable factory create model createmodel request nested model with invalid adaptable nestedmodelwithinvalidadaptable model adaptables sling http servlet request slinghttpservletrequest nested model with invalid adaptable nestedmodelwithinvalidadaptable invalid model with missing annotation invalidmodelwithmissingannotation nested model nestedmodel test expected missing elements exception missingelementsexception test created nested model with invalid adaptable testcreatednestedmodelwithinvalidadaptable nested model fact valid model factory create model createmodel request nested model with invalid adaptable nestedmodelwithinvalidadaptable model adaptables resource nested model nestedmodel resource model with required field resourcemodelwithrequiredfield nested model nestedmodel resource model with required field resourcemodelwithrequiredfield get nested model getnestedmodel nested model nestedmodel test test created nested model testcreatednestedmodel map string object map hash map hashmap string object map required required value map valuemap value map decorator valuemapdecorator map resource adapt to adaptto value map valuemap then return thenreturn nested model nestedmodel model factory create model createmodel resource nested model nestedmodel assert not null assertnotnull model assert equals assertequals required model get nested model getnestedmodel get required getrequired test expected missing elements exception missingelementsexception test created nested model with missing elements testcreatednestedmodelwithmissingelements map string object map hash map hashmap string object map invalid required value map valuemap value map decorator valuemapdecorator map resource adapt to adaptto value map valuemap then return thenreturn factory create model createmodel resource nested model nestedmodel