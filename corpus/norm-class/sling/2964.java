licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling xing oauth impl java io exception ioexception java util dictionary javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax servlet http http session httpsession google gson field naming policy fieldnamingpolicy google gson gson google gson gson builder gsonbuilder org apache commons lang string utils stringutils org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations modified org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations service org apache sling core spi authentication handler authenticationhandler org apache sling core spi authentication info authenticationinfo org apache sling core spi default authentication feedback handler defaultauthenticationfeedbackhandler org apache sling xing api xing user xinguser org apache sling xing api users use rs users org apache sling xing oauth xing oauth xingoauth org apache sling commons osgi properties util propertiesutil org osgi framework constants org osgi service component component context componentcontext org scribe builder service builder servicebuilder org scribe builder api xing api xingapi org scribe model o auth constants oauthconstants org scribe model o auth request oauthrequest org scribe model response org scribe model token org scribe model verb org scribe model verifier org scribe oauth o auth service oauthservice org slf logger org slf logger factory loggerfactory component label apache sling authentication xing o auth oauth â€œ authentication â€œauthentication handler â€ handlerâ€ description authentication handler sling authentication xing o auth oauth metatype service properties property constants service vendor xing oauth xingoauth service vendor property constants service description authentication handler sling authentication xing o auth oauth property constants service ranking int value intvalue property private propertyprivate property authentication handler authenticationhandler path property unbounded property unbounded propertyunbounded array property authentication handler authenticationhandler type property xing oauth xingoauth type property private propertyprivate xing oauth authentication handler xingoauthauthenticationhandler default authentication feedback handler defaultauthenticationfeedbackhandler authentication handler authenticationhandler o auth service oauthservice o auth service oauthservice string consumer key consumerkey string consumer secret consumersecret string callback url callbackurl string users me url usersmeurl string use rs users url https api xing users json property string consumer key parameter org apache sling xing oauth impl xing oauth authentication handler xingoauthauthenticationhandler consumer key consumerkey property string consumer secret parameter org apache sling xing oauth impl xing oauth authentication handler xingoauthauthenticationhandler consumer secret consumersecret property string callback url parameter org apache sling xing oauth impl xing oauth authentication handler xingoauthauthenticationhandler callback url callbackurl property use rs users url string use rs users url parameter org apache sling xing oauth impl xing oauth authentication handler xingoauthauthenticationhandler users me url usersmeurl string user session attribute xing user logger logger logger factory loggerfactory get logger getlogger xing oauth authentication handler xingoauthauthenticationhandler xing oauth authentication handler xingoauthauthenticationhandler activate activate component context componentcontext component context componentcontext logger debug activate configure component context componentcontext modified modified component context componentcontext component context componentcontext logger debug modified configure component context componentcontext deactivate deactivate component context componentcontext component context componentcontext logger debug deactivate configure component context componentcontext component context componentcontext dictionary properties component context componentcontext get properties getproperties consumer key consumerkey properties util propertiesutil to string tostring properties consumer key parameter trim consumer secret consumersecret properties util propertiesutil to string tostring properties consumer secret parameter trim callback url callbackurl properties util propertiesutil to string tostring properties callback url parameter trim users me url usersmeurl properties util propertiesutil to string tostring properties use rs users url parameter use rs users url trim string utils stringutils is empty isempty consumer key consumerkey logger warn configured consumer key empty string utils stringutils is empty isempty consumer secret consumersecret logger warn configured consumer secret empty string utils stringutils is empty isempty callback url callbackurl logger warn configured callback url empty string utils stringutils is empty isempty users me url usersmeurl logger warn configured users url empty string utils stringutils is empty isempty consumer key consumerkey string utils stringutils is empty isempty consumer secret consumersecret string utils stringutils is empty isempty callback url callbackurl o auth service oauthservice service builder servicebuilder provider xing api xingapi api key apikey consumer key consumerkey api secret apisecret consumer secret consumersecret callback callback url callbackurl build o auth service oauthservice logger info configured consumer key callback url users url consumer key consumerkey callback url callbackurl users me url usersmeurl o auth oauth access token user xing users override authentication info authenticationinfo extract credentials extractcredentials http servlet request httpservletrequest request http servlet response httpservletresponse response logger debug extract credentials o auth service oauthservice logger error o auth service oauthservice check configuration http session httpsession http session httpsession request get session getsession token access token accesstoken token http session httpsession get attribute getattribute o auth constants oauthconstants access token xing user xinguser xing user xinguser xing user xinguser http session httpsession get attribute getattribute user session attribute access token accesstoken request token verifier access token token request token requesttoken token http session httpsession get attribute getattribute o auth constants oauthconstants token string verifier request get parameter getparameter o auth constants oauthconstants verifier request token requesttoken verifier access token accesstoken o auth service oauthservice get access token getaccesstoken request token requesttoken verifier verifier logger debug access token access token accesstoken http session httpsession set attribute setattribute o auth constants oauthconstants access token access token accesstoken xing user xinguser xing user xinguser fetch user fetchuser access token accesstoken logger debug xing user xing user xinguser http session httpsession set attribute setattribute user session attribute xing user xinguser authentication info authenticationinfo authentication info authenticationinfo authentication info authenticationinfo xing oauth xingoauth type xing user xinguser get id getid authentication info authenticationinfo xing oauth xingoauth authentication credentials access token key access token accesstoken authentication info authenticationinfo xing oauth xingoauth authentication credentials user key xing user xinguser authentication info authenticationinfo exception logger error get message getmessage remove auth from session removeauthfromsession request override request credentials requestcredentials http servlet request httpservletrequest request http servlet response httpservletresponse response io exception ioexception logger debug request credentials o auth service oauthservice logger error o auth service oauthservice check configuration token request token requesttoken o auth service oauthservice get request token getrequesttoken logger debug received request token request token requesttoken http session httpsession http session httpsession request get session getsession http session httpsession set attribute setattribute o auth constants oauthconstants token request token requesttoken string auth url authurl o auth service oauthservice get authorization url getauthorizationurl request token requesttoken logger debug redirecting url auth url authurl response send redirect sendredirect auth url authurl exception logger error get message getmessage override drop credentials dropcredentials http servlet request httpservletrequest request http servlet response httpservletresponse response io exception ioexception logger debug drop credentials remove auth from session removeauthfromsession request xing user xinguser fetch user fetchuser token access token accesstoken exception o auth request oauthrequest request o auth request oauthrequest verb users me url usersmeurl o auth service oauthservice sign request signrequest access token accesstoken request response response request send gson gson gson builder gsonbuilder set field naming policy setfieldnamingpolicy field naming policy fieldnamingpolicy underscores create use rs users users gson from json fromjson response get body getbody use rs users users get use rs getusers remove auth from session removeauthfromsession http servlet request httpservletrequest request http session httpsession http session httpsession request get session getsession http session httpsession remove attribute removeattribute o auth constants oauthconstants token http session httpsession remove attribute removeattribute o auth constants oauthconstants access token http session httpsession remove attribute removeattribute user session attribute exception logger error get message getmessage