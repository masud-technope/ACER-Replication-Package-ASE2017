licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer factories configuration impl java util dictionary java util hash map hashmap java util map org apache sling installer api installable resource installableresource org apache sling installer api resource change listener resourcechangelistener org apache sling installer api tasks change state task changestatetask org apache sling installer api tasks install task installtask org apache sling installer api tasks install task factory installtaskfactory org apache sling installer api tasks registered resource registeredresource org apache sling installer api tasks resource state resourcestate org apache sling installer api tasks resource transformer resourcetransformer org apache sling installer api tasks task resource taskresource org apache sling installer api tasks task resource group taskresourcegroup org apache sling installer api tasks transformation result transformationresult org apache sling installer factories configuration configuration constants configurationconstants org osgi framework constants org osgi service configuration org osgi service configuration admin configurationadmin org osgi service configuration event configurationevent org osgi service configuration listener configurationlistener org slf logger org slf logger factory loggerfactory task creator configurations config task creator configtaskcreator install task factory installtaskfactory configuration listener configurationlistener resource transformer resourcetransformer logger logger logger logger factory loggerfactory get logger getlogger get class getclass configuration admin configuration admin configurationadmin config admin configadmin resource change listener resource change listener resourcechangelistener change listener changelistener config task creator configtaskcreator resource change listener resourcechangelistener listener configuration admin configurationadmin config admin configadmin change listener changelistener listener config admin configadmin config admin configadmin create task install uninstall configuration org apache sling installer api tasks install task factory installtaskfactory create task createtask org apache sling installer api tasks task resource group taskresourcegroup install task installtask create task createtask task resource group taskresourcegroup group task resource taskresource to activate toactivate group get active resource getactiveresource to activate toactivate get type gettype equals installable resource installableresource type config install task installtask result to activate toactivate get state getstate resource state resourcestate uninstall uninstall check install older version update uninstall install task resource taskresource group get next active resource getnextactiveresource get state getstate resource state resourcestate get state getstate resource state resourcestate installed get state getstate resource state resourcestate install get dictionary getdictionary get dictionary getdictionary installable resource installableresource resource template result change state task changestatetask group resource state resourcestate uninstalled result config remove task configremovetask group config admin configadmin result config install task configinstalltask group config admin configadmin result org osgi service configuration listener configurationlistener configuration event configurationevent org osgi service configuration event configurationevent suppress warnings suppresswarnings unchecked configuration event configurationevent configuration event configurationevent event coordinator shared string string pid event get factory pid getfactorypid event get pid getpid pid pid event get pid getpid starts with startswith event get factory pid getfactorypid event get pid getpid substring event get factory pid getfactorypid length event get pid getpid event get factory pid getfactorypid event get pid getpid event get type gettype configuration event configurationevent delete d deleted coordinator operation coordinator shared event get pid getpid event get factory pid getfactorypid change listener changelistener resource removed resourceremoved installable resource installableresource type config logger debug ignoring configuration event event get pid getpid event get factory pid getfactorypid event get type gettype configuration event configurationevent updated configuration config config util configutil get configuration getconfiguration config admin configadmin event get factory pid getfactorypid event get pid getpid coordinator operation coordinator shared event get pid getpid event get factory pid getfactorypid config persist config util configutil to boolean toboolean config get properties getproperties configuration constants configurationconstants property per sistence persistence dictionary string object dict config util configutil clean configuration cleanconfiguration config get properties getproperties map string object attrs hash map hashmap string object persist attrs resource change listener resourcechangelistener resource per sist persist attrs constants service pid event get pid getpid event get factory pid getfactorypid attrs installable resource installableresource resource uri hint pid attrs installable resource installableresource resource uri hint event get factory pid getfactorypid pid config get bundle location getbundlelocation attrs installable resource installableresource installation hint config get bundle location getbundlelocation factory event get factory pid getfactorypid attrs configuration admin configurationadmin service factorypid event get factory pid getfactorypid change listener changelistener resource added or updated resourceaddedorupdated installable resource installableresource type config dict attrs logger debug ignoring configuration event event get pid getpid event get factory pid getfactorypid exception ignore org apache sling installer api tasks resource transformer resourcetransformer transform org apache sling installer api tasks registered resource registeredresource transformation result transformationresult transform registered resource registeredresource resource resource get type gettype equals installable resource installableresource type properties check configuration checkconfiguration resource check registered resource configuration param resource resource transformation result transformationresult check configuration checkconfiguration registered resource registeredresource resource string url separators to unix separatorstounix resource geturl string last id part lastidpart url pos last id part lastidpart last index of lastindexof pos last id part lastidpart last id part lastidpart substring pos string pid remove extension is config extension isconfigextension get extension getextension last id part lastidpart last dot lastdot last id part lastidpart last index of lastindexof pid last id part lastidpart substring last dot lastdot pid last id part lastidpart split pid factory pid alias string factory pid factorypid string config pid configpid pid index of indexof quick check existing configuration string f string fstring pid substring string c string cstring pid substring use extended pid useextendedpid config util configutil get configuration getconfiguration config admin configadmin f string fstring f string fstring c string cstring use extended pid useextendedpid exception ignore use extended pid useextendedpid config pid configpid f string fstring c string cstring config pid configpid pid substring factory pid factorypid pid substring factory pid factorypid config pid configpid pid map string object attr hash map hashmap string object attr constants service pid config pid configpid factory factory pid factorypid attr configuration admin configurationadmin service factorypid factory pid factorypid transformation result transformationresult transformation result transformationresult string factory pid factorypid factory pid factorypid config pid configpid set id setid set resource type setresourcetype installable resource installableresource type config set attributes setattributes attr transformation result transformationresult compute extension string get extension getextension string url pos url last index of lastindexof pos url substring pos is config extension isconfigextension string extension extension equals cfg extension equals config extension equals xml extension equals properties converts separators unix separator slash param path path changed updated path string separators to unix separatorstounix string path path path index of indexof path path replace