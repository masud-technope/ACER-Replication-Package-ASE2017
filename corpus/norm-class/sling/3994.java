licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling junit bridge junitbridge tests org junit assert equals assertequals org junit assert not null assertnotnull org junit assert true asserttrue java util array list arraylist java util dictionary java util hash map hashmap java util hashtable java util list java util map java util random org apache sling api health check healthcheck org apache sling api result org apache sling junit bridge junitbridge health check tests provider healthchecktestsprovider org apache sling util formatting result log formattingresultlog org apache sling junit tests provider testsprovider org junit org junit test org junit runner j unit core junitcore org mockito mockito org mockito invocation invocation on mock invocationonmock org mockito stub bin g stubbing answer org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework invalid syntax exception invalidsyntaxexception org osgi framework service reference servicereference org osgi service component component context componentcontext test health check tests provider healthchecktestsprovider health check tests provider test healthchecktestsprovidertest tests provider testsprovider provider setup timestamp setuptimestamp random random random hc log setter hclogsetter formatting result log formattingresultlog set log setlog formatting result log formattingresultlog log map string hc log setter hclogsetter log setters hash map hashmap string hc log setter hclogsetter log setters pass hc log setter hclogsetter override formatting result log formattingresultlog set log setlog formatting result log formattingresultlog log log info pass log log setters hc log setter hclogsetter override formatting result log formattingresultlog set log setlog formatting result log formattingresultlog log log debug log log setters fail hc log setter hclogsetter override formatting result log formattingresultlog set log setlog formatting result log formattingresultlog log log warn fail log log setters bad hc log setter hclogsetter override formatting result log formattingresultlog set log setlog formatting result log formattingresultlog log log warn bad log fake tags represent number passing failing fake hc s hcs string tag groups tags just one justone string test name testname string tag group taggroup health check tests provider healthchecktestsprovider test prefix tag group taggroup health check tests provider healthchecktestsprovider test suffix service references servicereferences point test health checks healthchecks service reference servicereference get mock references getmockreferences bundle context bundlecontext string osg i filter osgifilter list service reference servicereference array list arraylist service reference servicereference string key log setters key set keyset osg i filter osgifilter key hc log setter hclogsetter hls log setters key service reference servicereference mockito mock service reference servicereference mockito get property getproperty constants service then return thenreturn random next long nextlong mockito get property getproperty health check healthcheck then return thenreturn some test sometest health check healthcheck health check healthcheck override result execute formatting result log formattingresultlog log formatting result log formattingresultlog result hls set log setlog log mockito get service getservice then return thenreturn add to array toarray service reference servicereference setup invalid syntax exception invalidsyntaxexception setup timestamp setuptimestamp system current time millis currenttimemillis component context componentcontext ctx mockito mock component context componentcontext context properties dictionary string object props hashtable string object props health check tests provider healthchecktestsprovider prop tag groups tag groups props constants service pid get class getclass get name getname mockito ctx get properties getproperties then return thenreturn props bundle context bundle context bundlecontext mockito mock bundle context bundlecontext mockito ctx get bundle context getbundlecontext then return thenreturn health check healthcheck service references servicereferences mocks mockito get service references getservicereferences mockito any string anystring mockito any string anystring then answer thenanswer answer service reference servicereference override service reference servicereference answer invocation on mock invocationonmock invocation throwable get mock references getmockreferences string invocation get arguments getarguments provider health check tests provider healthchecktestsprovider activate ctx test test get test names testgettestnames list string names provider get test names gettestnames assert equals assertequals tag groups length names size string tag tag groups string expected test name testname tag assert true asserttrue expecting test names expected names names expected test test service pid testservicepid assert equals assertequals get class getclass get name getname provider get service pid getservicepid test test last modified testlastmodified assert true asserttrue provider last modified lastmodified setup timestamp setuptimestamp test test no failures health check testnofailureshealthcheck class not found exception classnotfoundexception provider create test class createtestclass test name testname pass assert not null assertnotnull expecting test org junit runner result j unit core junitcore run classes runclasses assert equals assertequals get failure count getfailurecount assert equals assertequals get run count getruncount test test failing health check testfailinghealthcheck class not found exception classnotfoundexception provider create test class createtestclass test name testname fail bad assert not null assertnotnull expecting test org junit runner result j unit core junitcore run classes runclasses assert equals assertequals get failure count getfailurecount assert equals assertequals get run count getruncount test test pass and fail health check testpassandfailhealthcheck class not found exception classnotfoundexception provider create test class createtestclass test name testname fail pass bad assert not null assertnotnull expecting test org junit runner result j unit core junitcore run classes runclasses assert equals assertequals get failure count getfailurecount assert equals assertequals get run count getruncount test expected runtime exception runtimeexception test invalid test name testinvalidtestname class not found exception classnotfoundexception provider create test class createtestclass foo