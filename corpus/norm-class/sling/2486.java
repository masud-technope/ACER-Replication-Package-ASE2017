licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr base internal loader java i o exception ioexception java input stream inputstream java input stream reader inputstreamreader java net url java util array list arraylist java util hash map hashmap java util iterator java util list java util map java util string tokenizer stringtokenizer javax jcr name space exception namespaceexception javax jcr repository exception repositoryexception javax jcr session org apache sling jcr api name space mapper namespacemapper org apache sling jcr api sling repository slingrepository org apache sling jcr base node type loader nodetypeloader org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework bundle event bundleevent org osgi framework bundle listener bundlelistener org slf logger org slf logger factory loggerfactory code loader code todo loader name space mapper namespacemapper bundle listener bundlelistener string node types nodetypes bundle header sling node types nodetypes string names paces namespaces bundle header sling names paces namespaces log logger log logger factory loggerfactory get logger getlogger loader bundle context bundlecontext bundle context bundlecontext sling repository slingrepository sling repository slingrepository bundles registration failed ret ried retried list bundle delayed bundles delayedbundles name space namespace prefix table map name space entry namespaceentry namespace table namespacetable hash map hashmap name space entry namespaceentry loader sling repository slingrepository repository bundle context bundlecontext bundle context bundlecontext bundle context bundlecontext bundle context bundlecontext sling repository slingrepository repository delayed bundles delayedbundles array list arraylist bundle scan existing bundles bundle context bundlecontext add bundle listener addbundlelistener bundle bundle bundle context bundlecontext get bundles getbundles bundle get state getstate bundle uninstalled register bundle registerbundle bundle dispose bundle context bundlecontext remove bundle listener removebundlelistener delayed bundles delayedbundles delayed bundles delayedbundles clear name space mapper namespacemapper define name space prefixes definenamespaceprefixes session session repository exception repositoryexception iterator name space entry namespaceentry iter namespace table namespacetable values iterator iter has next hasnext name space entry namespaceentry entries iter entries length namespace pref ixing prefixing bit tricky string mapped prefix mappedprefix check namespace registered prefix mapped prefix mappedprefix session get name space prefix getnamespaceprefix entries namespace name space exception namespaceexception mapped prefix mappedprefix entries prefix session get name space i getnamespaceuri entries prefix name space exception namespaceexception mapped prefix mappedprefix entries prefix session get workspace getworkspace get name space registry getnamespaceregistry register name space registernamespace mapped prefix mappedprefix entries namespace remap mapped prefix mappedprefix mapped prefix mappedprefix equals entries prefix check prefix string old uri olduri old uri olduri session get name space i getnamespaceuri entries prefix session set name space prefix setnamespaceprefix entries prefix old uri olduri name space exception namespaceexception prefix session set name space prefix setnamespaceprefix entries prefix entries namespace bundle listener bundlelistener loads unloads components bundle changed bundle started components loaded bundle components unloaded param event code bundle event bundleevent code representing bundle change bundle changed bundlechanged bundle event bundleevent event care sync hronous synchronous care block system event get type gettype bundle event bundleevent installed register types bundle installed register bundle registerbundle event get bundle getbundle bundle event bundleevent uninstalled unregister bundle unregisterbundle event get bundle getbundle bundle event bundleevent updated update bundle updatebundle event get bundle getbundle internal register bundle registerbundle bundle bundle register names paces registernamespaces bundle register bundle internal registerbundleinternal bundle handle delayed bundles current size currentsize delayed bundles delayedbundles size current size currentsize delayed bundles delayedbundles size delayed bundles delayedbundles is empty isempty iterator bundle delayed bundles delayedbundles iterator has next hasnext bundle delayed register bundle internal registerbundleinternal delayed remove current size currentsize delayed bundles delayedbundles size delayed bundles delayedbundles delayed bundles delayedbundles add bundle unregister bundle unregisterbundle bundle bundle unregister names paces unregisternamespaces bundle delayed bundles delayedbundles delayed bundles delayedbundles remove bundle update bundle updatebundle bundle bundle unregister bundle unregisterbundle bundle register bundle registerbundle bundle register names paces namespaces defined bundle namespace table param bundle bundle register names paces registernamespaces bundle bundle string definition string bundle get headers getheaders names paces namespaces bundle header definition log debug register names paces registernamespaces bundle register bundle get symbolic name getsymbolicname definition string tokenizer stringtokenizer string tokenizer stringtokenizer definition list name space entry namespaceentry entries array list arraylist name space entry namespaceentry has more tokens hasmoretokens string token next token nexttoken trim pos token index of indexof pos log warn register names paces registernamespaces bundle invalid namespace manifest header entry bundle get symbolic name getsymbolicname token string prefix token substring pos trim string namespace token substring pos trim entries add name space entry namespaceentry prefix namespace entries size namespace table namespacetable bundle get bundle id getbundleid entries to array toarray name space entry namespaceentry entries size unregister names paces namespaces defined bundle param bundle bundle unregister names paces unregisternamespaces bundle bundle namespace table namespacetable remove bundle get bundle id getbundleid register bundle internal registerbundleinternal bundle bundle is retry isretry register node types registernodetypes bundle is retry isretry repository exception repositoryexception is retry isretry log error register node types bundle bundle get symbolic name getsymbolicname log debug retrying register node types failed bundle bundle get symbolic name getsymbolicname register node types registernodetypes bundle bundle is retry isretry repository exception repositoryexception todo define header ref erring referring mapper files string types header typesheader string bundle get headers getheaders node types nodetypes bundle header types header typesheader node types bundle success log debug register node types registernodetypes bundle node types nodetypes bundle get symbolic name getsymbolicname success session session get session getsession string tokenizer stringtokenizer tokener string tokenizer stringtokenizer types header typesheader tokener has more tokens hasmoretokens string node type file nodetypefile tokener next token nexttoken trim map string string node type file params nodetypefileparams hash map hashmap string string node type file params nodetypefileparams reregister node type file nodetypefile idx node type file nodetypefile index of indexof string node type file param nodetypefileparam node type file nodetypefile substring idx string params node type file param nodetypefileparam split node type file params nodetypefileparams params params node type file nodetypefile node type file nodetypefile substring idx url mappingurl bundle get entry getentry node type file nodetypefile mappingurl ret rying retrying log ged logged message won log is retry isretry log warn custom node type definition bundle node type file nodetypefile bundle get symbolic name getsymbolicname input stream inputstream ins laod node types ins mappingurl open stream openstream string reregister node type file params nodetypefileparams reregister reregister bool reregisterbool value of valueof reregister node type loader nodetypeloader register node type registernodetype session mappingurl to string tostring input stream reader inputstreamreader ins reregister bool reregisterbool log message retry successful is retry isretry log info retrying register node types bundle succeeded object node type file nodetypefile bundle get symbolic name getsymbolicname i o exception ioexception ioe success is retry isretry log warn read node types bundle object node type file nodetypefile bundle get symbolic name getsymbolicname ioe log warn stack trace stacktrace ioe exception success is retry isretry log error error loading node types bundle object node type file nodetypefile bundle get symbolic name getsymbolicname log error stack trace stacktrace ins ins close i o exception ioexception ioe unget session ungetsession session success session get session getsession repository exception repositoryexception todo login service loginservice sling repository slingrepository login administrative loginadministrative unget session ungetsession session session session session log out logout name space entry namespaceentry string prefix string namespace name space entry namespaceentry string string prefix namespace