licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer core impl tasks java util array list arraylist java util hash set hashset java util list java util org apache sling installer api tasks installation context installationcontext org osgi framework bundle refresh bundles refresh bundles task refreshbundlestask abstract bundle task abstractbundletask string ref resh refresh packages order global bundles refresh bundle ids hash set hashset mark bundle for refresh markbundleforrefresh installation context installationcontext ctx task support tasksupport btc bundle bundle bundle ids bundle ids add bundle get bundle id getbundleid ctx add task to current cycle addtasktocurrentcycle refresh bundles task refreshbundlestask btc refresh bundles task refreshbundlestask task support tasksupport btc btc override string get sort key getsortkey ref resh refresh packages order override string to string tostring get class getclass get simple name getsimplename org apache sling installer api tasks install task installtask execute org apache sling installer api tasks installation context installationcontext override execute installation context installationcontext ctx do full refresh dofullrefresh list bundle bundles array list arraylist bundle bundle ids bundle ids bundle get bundle context getbundlecontext get bundle getbundle get logger getlogger debug refresh bundle bundles add get logger getlogger debug bundle full refresh do full refresh dofullrefresh bundle ids clear do full refresh dofullrefresh bundles size check installer bundle get bundle ref res her getbundlerefresher is installer bundle affected isinstallerbundleaffected bundles get bundle ref res her getbundlerefresher refresh bundles refreshbundles ctx do full refresh dofullrefresh bundles ctx log installer bundle bundle refresh init iating initiating asynchronous refresh ctx add task to current cycle addtasktocurrentcycle async refresh bundles task asyncrefreshbundlestask get task support gettasksupport do full refresh dofullrefresh bundles async refresh bundles task asyncrefreshbundlestask abstract bundle task abstractbundletask list bundle bundles async refresh bundles task asyncrefreshbundlestask task support tasksupport btc list bundle bundles btc bundles bundles override execute installation context installationcontext ctx get bundle ref res her getbundlerefresher refresh bundles refreshbundles ctx bundles override string get sort key getsortkey override is async hronous task isasynchronoustask