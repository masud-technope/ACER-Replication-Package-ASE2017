licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling models impl org junit org mockito mockito java util collections java util hashtable java util map org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource resource org apache sling api resource value map valuemap org apache sling api wrappers value map decorator valuemapdecorator org apache sling models annotations model org apache sling models factory invalid adaptable exception invalidadaptableexception org apache sling models factory model class exception modelclassexception org apache sling models impl injectors child resource injector childresourceinjector org apache sling models impl injectors value map injector valuemapinjector org junit org junit test org junit runner run with runwith org mockito mock org mockito run ners runners mockito unit runner mockitojunitrunner org osgi framework bundle context bundlecontext org osgi service component component context componentcontext run with runwith mockito unit runner mockitojunitrunner invalid adapt ations test invalidadaptationstest mock component context componentcontext component ctx componentctx mock bundle context bundlecontext bundle context bundlecontext model adapter factory modeladapterfactory factory setup component ctx componentctx get bundle context getbundlecontext then return thenreturn bundle context bundlecontext component ctx componentctx get properties getproperties then return thenreturn hashtable string object factory model adapter factory modeladapterfactory factory activate component ctx componentctx factory bind injector bindinjector value map injector valuemapinjector service properties map servicepropertiesmap factory bind injector bindinjector child resource injector childresourceinjector service properties map servicepropertiesmap test test non model class testnonmodelclass map string object empty map emptymap collections string object empty map emptymap resource res mock resource res adapt to adaptto value map valuemap then return thenreturn value map decorator valuemapdecorator empty map emptymap assert null assertnull factory get adapter getadapter res non model nonmodel test expected model class exception modelclassexception test non model class exception testnonmodelclassexception map string object empty map emptymap collections string object empty map emptymap resource res mock resource res adapt to adaptto value map valuemap then return thenreturn value map decorator valuemapdecorator empty map emptymap assert null assertnull factory create model createmodel res non model nonmodel test test wrong adaptable class testwrongadaptableclass map string object empty map emptymap collections string object empty map emptymap resource res mock resource res adapt to adaptto value map valuemap then return thenreturn value map decorator valuemapdecorator empty map emptymap assert null assertnull factory get adapter getadapter res request model requestmodel test expected invalid adaptable exception invalidadaptableexception test wrong adaptable class exception testwrongadaptableclassexception map string object empty map emptymap collections string object empty map emptymap resource res mock resource res adapt to adaptto value map valuemap then return thenreturn value map decorator valuemapdecorator empty map emptymap assert null assertnull factory create model createmodel res request model requestmodel non model nonmodel model adaptables sling http servlet request slinghttpservletrequest request model requestmodel