org apache sling crankstart launcher org junit assert equals assertequals org junit assert not null assertnotnull java io exception ioexception org apache commons io utils ioutils org apache http http response httpresponse org apache http auth scope authscope org apache http username password credentials usernamepasswordcredentials org apache http client client protocol exception clientprotocolexception org apache http client methods http get httpget org apache http client methods http uri request httpurirequest org apache http impl client default http client defaulthttpclient org apache http util entity utils entityutils org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling testing tools http request builder requestbuilder org apache sling testing tools http request executor requestexecutor general testing util ities utilities constants string admin admin todo timeout seconds timeout msec timeout seconds std interval string sling api bundle org apache sling api set admin credentials setadmincredentials default http client defaulthttpclient get credentials provider getcredentialsprovider set credentials setcredentials auth scope authscope username password credentials usernamepasswordcredentials admin admin add request interceptor addrequestinterceptor preemptive auth interceptor preemptiveauthinterceptor close connection closeconnection http response httpresponse io exception ioexception get entity getentity entity utils entityutils consume get entity getentity json bundle data webconsole json object jsonobject get bundle data getbundledata crankstart setup crankstartsetup default http client defaulthttpclient client string symbolic name symbolicname client protocol exception clientprotocolexception io exception ioexception json exception jsonexception request builder requestbuilder request builder requestbuilder get base url getbaseurl request executor requestexecutor request executor requestexecutor client json object jsonobject execute build get request buildgetrequest system console bundles symbolic name symbolicname json with credentials withcredentials admin admin assert status assertstatus get content getcontent assert http get asserthttpget crankstart setup crankstartsetup default http client defaulthttpclient client string path string expected content expectedcontent exception http uri request httpurirequest http get httpget get base url getbaseurl path http response httpresponse response response client execute assert equals assertequals expecting response path response get status line getstatusline get status code getstatuscode assert not null assertnotnull expecting response entity response get entity getentity string encoding utf response get entity getentity get content encoding getcontentencoding encoding response get entity getentity get content encoding getcontentencoding get value getvalue string content io utils ioutils to string tostring response get entity getentity get content getcontent encoding assert equals assertequals expected content expectedcontent content close connection closeconnection response