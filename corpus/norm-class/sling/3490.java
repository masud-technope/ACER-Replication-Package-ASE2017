licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting java script javascript wrapper java util array list arraylist java util calendar java util gregorian calendar gregoriancalendar java util hash map hashmap java util iterator java util list java util map javax jcr item javax jcr name space exception namespaceexception javax jcr node javax jcr node iterator nodeiterator javax jcr property javax jcr property iterator propertyiterator javax jcr property type propertytype javax jcr repository exception repositoryexception javax jcr org apache jackrabbit jcr constants jcrconstants org apache sling api sling constants slingconstants org apache sling api resource resource org apache sling api resource resource metadata resourcemetadata org apache sling api resource resource resolver resourceresolver org apache sling api resource resource util resourceutil org apache sling api resource value map valuemap org apache sling api wrappers value map decorator valuemapdecorator org apache sling commons testing sling mock resource resolver mockresourceresolver org apache sling jcr resource jcr resource constants jcrresourceconstants org apache sling scripting java script javascript repository scripting test base repositoryscriptingtestbase org apache sling scripting java script javascript internal script engine helper scriptenginehelper org mozilla java script javascript wrapper org slf logger org slf logger factory loggerfactory scriptable resource test scriptableresourcetest repository scripting test base repositoryscriptingtestbase node node resource resolver resourceresolver resource resolver mock resource resolver mockresourceresolver string resource type test wrapped resource type testwrappedresourcetype string resource type test wrapped resource super type testwrappedresourcesupertype logger logger logger factory loggerfactory get logger getlogger scriptable resource test scriptableresourcetest override set up setup exception set up setup node get new node getnewnode node get session getsession get workspace getworkspace get name space registry getnamespaceregistry register name space registernamespace sling constants slingconstants name space namespace prefix jcr resource constants jcrresourceconstants sling name space namespace uri name space exception namespaceexception test default value path testdefaultvaluepath exception script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node path resource assert equals assertequals node get path getpath script eval to string evaltostring print resource data assert equals assertequals node get path getpath script eval resource path data assert equals assertequals node get path getpath script eval resource get path getpath data test resource type testresourcetype exception resource resource type node set property setproperty jcr resource constants jcrresourceconstants sling resource type property resource type node set property setproperty jcr resource constants jcrresourceconstants sling resource type property resource type script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node resource type resourcetype resource assert equals assertequals resource type script eval resource type data assert equals assertequals resource type script eval resource resource type resourcetype data assert equals assertequals resource type script eval resource get resource type getresourcetype data test children testchildren exception node add node addnode child node add node addnode child script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node assert equals assertequals script eval resource get children getchildren length data assert equals assertequals child script eval resource get children getchildren data test list children testlistchildren exception node first child firstchild node add node addnode child node add node addnode child script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node assert equals assertequals script eval resource list children listchildren length data assert equals assertequals first child firstchild get path getpath script eval resource list children listchildren path data test get child testgetchild exception node child node add node addnode child script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node assert equals assertequals child get path getpath script eval resource get child getchild child path data test get parent testgetparent exception node child node add node addnode child node grand child grandchild child add node addnode grandchild script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource grand child grandchild assert equals assertequals child get path getpath script eval resource get parent getparent get path getpath data test parent testparent exception node child node add node addnode child node grand child grandchild child add node addnode grandchild script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource grand child grandchild assert equals assertequals child get path getpath script eval resource parent path data test is resource type testisresourcetype exception script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node assert equals assertequals script eval resource is resource type isresourcetype resource type data test resource super type testresourcesupertype exception resource resource type node set property setproperty jcr resource constants jcrresourceconstants sling resource type property resource type node set property setproperty jcr resource constants jcrresourceconstants sling resource type property resource type script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node resource type resourcetype resource assert equals assertequals resource type script eval resource resource super type resourcesupertype data assert equals assertequals resource type script eval resource get resource super type getresourcesupertype data test resource metadata testresourcemetadata exception script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node off icial official api assert resource meta data assertresourcemetadata script eval resource resource metadata resourcemetadata data assert resource meta data assertresourcemetadata script eval resource get resource metadata getresourcemetadata data deprecated mappings assert resource meta data assertresourcemetadata script eval resource meta data assert resource meta data assertresourcemetadata script eval resource get metadata getmetadata data test resource resolver testresourceresolver exception script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node off icial official api assert equals assertequals resource resolver script eval resource resource resolver resourceresolver data assert equals assertequals resource resolver script eval resource get resource resolver getresourceresolver data test adapt to node testadapttonode exception script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node node resource adapts assert equals assertequals node script eval resource adapt to adaptto javax jcr node data assert equals assertequals node script eval resource adapt to adaptto packages javax jcr node data test adapt to not hing testadapttonothing exception script engine helper scriptenginehelper data data script engine helper scriptenginehelper data data resource test resource testresource node node resource adapts assert equals assertequals script eval resource adapt to adaptto undefined data assert equals assertequals script eval resource adapt to adaptto undefined data assert equals assertequals script eval resource adapt to adaptto undefined undefined data assert equals assertequals script eval resource adapt to adaptto packages java util undefined data test properties testproperties exception script engine helper scriptenginehelper data data script engine helper scriptenginehelper data calendar gregorian calendar gregoriancalendar node set property setproperty jcr constants jcrconstants jcr last modified lastmodified node set property setproperty test test properties testproperties node get session getsession save data resource test resource testresource node assert equals assertequals get time in millis gettimeinmillis script eval resource properties jcr last modified lastmodified get time in millis gettimeinmillis data assert equals assertequals test properties testproperties script eval resource properties test data assert equals assertequals node expected object actual actual wrapper actual wrapper actual unwrap assert equals assertequals expected actual assert resource meta data assertresourcemetadata object meta data metadata exception meta data metadata resource metadata resourcemetadata resource metadata resourcemetadata resource metadata resourcemetadata meta data metadata get resolution path getresolutionpath equals node get path getpath fail expected resource metadata resourcemetadata meta data metadata test resource testresource resource node node string path resource metadata resourcemetadata metadata test resource testresource node node repository exception repositoryexception node node path node get path getpath metadata resource metadata resourcemetadata metadata set resolution path setresolutionpath path string get path getpath path resource metadata resourcemetadata get resource metadata getresourcemetadata metadata resource resolver resourceresolver get resource resolver getresourceresolver resource resolver string get resource type getresourcetype resource type string get resource super type getresourcesupertype resource type suppress warnings suppresswarnings unchecked adapter type adaptertype adapter type adaptertype adapt to adaptto adapter type adaptertype type type node type item adapter type adaptertype node type value map valuemap property iterator propertyiterator iterator node get properties getproperties map string object properties hash map hashmap string object iterator has next hasnext property prop iterator next property nextproperty prop is multiple ismultiple values prop get values getvalues object array object values length values get type gettype property type propertytype binary array get binary getbinary property type propertytype array get boolean getboolean property type propertytype array get date getdate property type propertytype decimal array get decimal getdecimal property type propertytype array get double getdouble property type propertytype array get long getlong array get string getstring properties prop get name getname array prop get value getvalue get type gettype property type propertytype binary properties prop get name getname get binary getbinary property type propertytype properties prop get name getname get boolean getboolean property type propertytype properties prop get name getname get date getdate property type propertytype decimal properties prop get name getname get decimal getdecimal property type propertytype properties prop get name getname get double getdouble property type propertytype properties prop get name getname get long getlong properties prop get name getname get string getstring adapter type adaptertype value map decorator valuemapdecorator properties repository exception repositoryexception logger error unable adapt resource get path getpath value map valuemap string get name getname resource util resourceutil get name getname get path getpath resource get child getchild string rel path relpath node child node childnode node get node getnode rel path relpath child node childnode test resource testresource child node childnode repository exception repositoryexception resource get parent getparent node parent node parentnode node get parent getparent parent node parentnode test resource testresource parent node parentnode repository exception repositoryexception is resource type isresourcetype string resource type resourcetype get resource type getresourcetype equals resource type resourcetype iterator resource list children listchildren list resource child list childlist array list arraylist resource node iterator nodeiterator node get nodes getnodes has next hasnext node next node nextnode next node nextnode child list childlist add test resource testresource next node nextnode child list childlist iterator repository exception repositoryexception