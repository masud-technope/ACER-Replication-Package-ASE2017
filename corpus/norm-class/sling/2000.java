licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer core impl util java util list org apache sling installer api tasks installation context installationcontext org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework framework event frameworkevent org osgi framework framework listener frameworklistener org osgi service package admin packageadmin package admin packageadmin org slf logger org slf logger factory loggerfactory implementation admin pa bundle ref res her pabundlerefresher bundle ref res her bundlerefresher framework listener frameworklistener logger logger logger factory loggerfactory get logger getlogger get class getclass max time allowed refresh packages max ref resh refresh packages wait seconds counter refresh events refresh event count refresheventcount package admin packageadmin pck admin pckadmin refresh dependencies util refreshdependenciesutil rdu bundle context bundlecontext bundle context bundlecontext lock object syncing object lock object pa bundle ref res her pabundlerefresher package admin packageadmin bundle context bundlecontext bundle context bundlecontext pck admin pckadmin bundle context bundlecontext bundle context bundlecontext rdu refresh dependencies util refreshdependenciesutil org apache sling installer core impl util bundle ref res her bundlerefresher refresh bundles refreshbundles org apache sling installer api tasks installation context installationcontext java util list refresh bundles refreshbundles installation context installationcontext ctx list bundle bundles wait bundles bundles size bundles ctx log full ref res hing refreshing ctx log ref res hing refreshing bundles bundles size bundles wait pck admin pckadmin refresh packages refreshpackages bundles bundles to array toarray bundle bundles size refresh event count refresheventcount bundle context bundlecontext add framework listener addframeworklistener refresh event count refresheventcount pck admin pckadmin refresh packages refreshpackages bundles bundles to array toarray bundle bundles size system current time millis currenttimemillis max ref resh refresh packages wait seconds lock wait time waittime system current time millis currenttimemillis refresh event count refresheventcount wait time waittime ctx log waiting seconds bundles refresh max ref resh refresh packages wait seconds lock wait wait time waittime interrupted exception interruptedexception ignore system current time millis currenttimemillis refresh event count refresheventcount logger warn framework event frameworkevent packages ref reshed refreshed event received seconds refresh aborting wait max ref resh refresh packages wait seconds refresh event count refresheventcount refresh event count refresheventcount bundle context bundlecontext remove framework listener removeframeworklistener bundles ctx log full refresh ctx log ref res hing refreshing bundles bundles size check bundle refresh affect installer bundle org apache sling installer core impl util bundle ref res her bundlerefresher is installer bundle affected isinstallerbundleaffected java util list is installer bundle affected isinstallerbundleaffected list bundle bundles rdu is bundle affected isbundleaffected bundle context bundlecontext get bundle getbundle bundles org osgi framework framework listener frameworklistener framework event frameworkevent org osgi framework framework event frameworkevent framework event frameworkevent framework event frameworkevent event event get type gettype framework event frameworkevent packages ref reshed refreshed logger debug framework event frameworkevent packages ref reshed refreshed lock refresh event count refresheventcount lock notify