licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad base impl java lang reflect invocation target exception invocationtargetexception java lang reflect method java util dictionary java util hash set hashset java util hashtable java util java util concurrent blocking queue blockingqueue java util concurrent linked blocking queue linkedblockingqueue java util concurrent atomic atomic boolean atomicboolean java util concurrent atomic atomic integer atomicinteger org apache felix framework logger org apache sling launchpad api startup handler startuphandler org apache sling launchpad api startup listener startuplistener org apache sling launchpad api startup mode startupmode org apache sling launchpad api startup service startupservice org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework bundle event bundleevent org osgi framework bundle listener bundlelistener org osgi framework constants org osgi framework framework event frameworkevent org osgi framework framework listener frameworklistener org osgi framework service reference servicereference org osgi framework service registration serviceregistration org osgi service start level startlevel start level startlevel org osgi util tracker service tracker servicetracker org osgi util tracker service tracker customizer servicetrackercustomizer installation listener list ening listening framework events events services not ifies notifies listeners finish startup app roximate approximate progress startup handler startuphandler startup listener startuplistener suppress warnings suppresswarnings deprecation default startup handler defaultstartuphandler startup handler startuphandler bundle listener bundlelistener framework listener frameworklistener runnable logger logger logger marker finished atomic boolean atomicboolean finished atomic boolean atomicboolean marker startup wait atomic integer atomicinteger startup should wait startupshouldwait atomic integer atomicinteger queue inc reasing increasing start level blocking queue blockingqueue queue linked blocking queue linkedblockingqueue start level service start level startlevel start level service startlevelservice target start level target start level targetstartlevel startup mode startup mode startupmode startup mode startupmode service tracker startup listeners service tracker servicetracker startup listener startuplistener startup listener startuplistener listener tracker listenertracker expected bundle counts expected bundles count expectedbundlescount active bundle string active bundles activebundles hash set hashset string bundle context bundle context bundlecontext bundle context bundlecontext incremental start level handling use incremental useincremental m bean mbean startup listener startup listener startuplistener mbean startup listener mbeanstartuplistener started time started at startedat object log service logservice registration startup service service registration serviceregistration startup service startupservice startup service reg startupservicereg constructor param context bundle context param logger logger param manager startup manager default startup handler defaultstartuphandler bundle context bundlecontext context logger logger startup manager startupmanager manager started at startedat logger logger bundle context bundlecontext context started at startedat started at startedat startup mode startupmode manager get mode getmode target start level targetstartlevel manager get target start level gettargetstartlevel startup listener startuplistener listener listener m bean startup listener mbeanstartuplistener exception ignore mbean startup listener mbeanstartuplistener listener listener tracker listenertracker service tracker servicetracker startup listener startuplistener startup listener startuplistener context startup listener startuplistener service tracker customizer servicetrackercustomizer startup listener startuplistener startup listener startuplistener override removed service removedservice service reference servicereference startup listener startuplistener reference startup listener startuplistener service context unget service ungetservice reference override modified service modifiedservice service reference servicereference startup listener startuplistener reference startup listener startuplistener service override startup listener startuplistener adding service addingservice service reference servicereference startup listener startuplistener reference startup listener startuplistener listener context get service getservice reference listener listener info rm inform startup mode startupmode finished throwable logger log logger log error error calling startup listener startuplistener listener listener listener tracker listenertracker open start level service startlevelservice start level startlevel context get service getservice context get service reference getservicereference start level startlevel get name getname context add framework listener addframeworklistener use incremental useincremental startup mode startupmode startup mode startupmode restart manager is incremental startup enabled isincrementalstartupenabled use incremental useincremental bundle bundles context get bundles getbundles expected bundles count expectedbundlescount bundles bundles length bundles length context add bundle listener addbundlelistener expected bundles count expectedbundlescount bundle context bundlecontext register service registerservice startup handler startuphandler get name getname log logger log info started startup handler target start level string value of valueof target start level targetstartlevel expected bundle count string value of valueof expected bundles count expectedbundlescount thread thread start org apache sling launchpad api startup handler startuphandler get mode getmode override startup mode startupmode get mode getmode startup mode startupmode org apache sling launchpad api startup handler startuphandler is finished isfinished override is finished isfinished finished java lang runnable override finished do inc doinc do inc doinc queue interrupted exception interruptedexception do inc doinc do inc doinc time start start level changed startup should wait startupshouldwait sleep wait installer idle startup should wait startupshouldwait sleep inc start level incstartlevel increment current start level inc start level incstartlevel new level newlevel start level service startlevelservice get start level getstartlevel log logger log debug inc reasing increasing start level string value of valueof new level newlevel start level service startlevelservice set start level setstartlevel new level newlevel org apache sling launchpad api startup handler startuphandler wait with startup waitwithstartup override wait with startup waitwithstartup flag log logger log debug wait startup flag flag startup should wait startupshouldwait increment and get incrementandget startup should wait startupshouldwait decrement and get decrementandget sleep bit param time sleeping time sleep time thread sleep time interrupted exception interruptedexception task queue param info add queue enqueue info queue info interrupted exception interruptedexception org osgi framework framework listener frameworklistener framework event frameworkevent org osgi framework framework event frameworkevent override framework event frameworkevent framework event frameworkevent event finished log logger log debug received framework event event use incremental useincremental restart event get type gettype framework event frameworkevent started startup finished startupfinished startup update event get type gettype framework event frameworkevent started enqueue event get type gettype framework event frameworkevent start level startlevel changed start level service startlevelservice get start level getstartlevel target start level targetstartlevel startup finished startupfinished enqueue start level startlevel start level service startlevelservice get start level getstartlevel log logger log debug startup progress string value of valueof start level startlevel string value of valueof target start level targetstartlevel ratio start level startlevel target start level targetstartlevel startup progress startupprogress ratio log level string msg log level msg log level string msg throwable log level msg log service reference servicereference s ref sref level string msg throwable log ged with service loggedwithservice log service logservice service reference servicereference bundle context bundlecontext get service reference getservicereference org osgi service log log service logservice object bundle context bundlecontext get service getservice for mal params formalparams service reference servicereference integer type string throwable method log method logmethod get class getclass get method getmethod log for mal params formalparams log method logmethod set accessible setaccessible log service logservice object log method logmethod no such method exception nosuchmethodexception log service logservice object params s ref sref integer level msg method log service logservice invoke log service logservice params log ged with service loggedwithservice invocation target exception invocationtargetexception illegal access exception illegalaccessexception log ged with service loggedwithservice logger log level msg notify finished startup startup finished startupfinished log logger log info startup finished string value of valueof system current time millis currenttimemillis started at startedat finished startup listener startuplistener listener listener tracker listenertracker get services getservices startup listener startuplistener listener startup finished startupfinished startup mode startupmode throwable log logger log error error calling startup listener startuplistener listener mbean startup listener mbeanstartuplistener mbean startup listener mbeanstartuplistener startup finished startupfinished startup mode startupmode queue enqueue clear bundle active bundles activebundles clear unregister listeners use incremental useincremental bundle context bundlecontext remove bundle listener removebundlelistener bundle context bundlecontext remove framework listener removeframeworklistener register startup service dictionary string object service props serviceprops hashtable string object service props serviceprops startup mode startupmode get name getname startup mode startupmode service props serviceprops constants service description apache sling startup service service props serviceprops constants service vendor apache software foundation startup service reg startupservicereg bundle context bundlecontext register service registerservice startup service startupservice startup service startupservice override startup mode startupmode get startup mode getstartupmode startup mode startupmode service props serviceprops notify startup progress param ratio ratio startup progress startupprogress ratio startup listener startuplistener listener listener tracker listenertracker get services getservices startup listener startuplistener listener startup progress startupprogress ratio throwable log logger log error error calling startup listener startuplistener listener mbean startup listener mbeanstartuplistener mbean startup listener mbeanstartuplistener startup progress startupprogress ratio org osgi framework bundle listener bundlelistener bundle changed bundlechanged org osgi framework bundle event bundleevent override bundle changed bundlechanged bundle event bundleevent event finished log logger log debug received bundle event event event get type gettype bundle event bundleevent resolved event get type gettype bundle event bundleevent started add existing bundle active bundles refresh progress bar active bundles activebundles add event get bundle getbundle get symbolic name getsymbolicname log logger log debug startup progress string value of valueof active bundles activebundles size string value of valueof expected bundles count expectedbundlescount ratio active bundles activebundles size expected bundles count expectedbundlescount startup progress startupprogress ratio event get type gettype bundle event bundleevent stopped remove bundle active bundles refresh progress bar prevent progress bar active bundles activebundles remove event get bundle getbundle get symbolic name getsymbolicname