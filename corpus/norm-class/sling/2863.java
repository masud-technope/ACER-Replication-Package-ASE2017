licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jst java io exception ioexception java string reader stringreader java string writer stringwriter junit framework test case testcase org apache sling commons testing util test string util teststringutil test body only script filtered copy bodyonlyscriptfilteredcopy body only script filtered copy test bodyonlyscriptfilteredcopytest test case testcase body only script filtered copy bodyonlyscriptfilteredcopy bfc body only script filtered copy bodyonlyscriptfilteredcopy run test runtest string input string expected io exception ioexception string writer stringwriter string writer stringwriter bfc copy string reader stringreader input assert equals assertequals test string util teststringutil flatten expected test string util teststringutil flatten to string tostring test no changes testnochanges io exception ioexception string input write statements lines string expected run test runtest input expected test basic template testbasictemplate io exception ioexception string input write body write body foo write template code write body write body string expected write template code run test runtest input expected test open close testopenclose io exception ioexception string input write body foo write script script write body string expected write write script write script run test runtest input expected test sling io exception ioexception string input write meta decorator content tssdotcom head body write body write body html string expected write body run test runtest input expected