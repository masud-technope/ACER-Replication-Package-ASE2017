licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad base impl bootstrap commands bootstrapcommands org junit assert equals assertequals org junit assert false assertfalse org junit assert true asserttrue org junit fail java byte array input stream bytearrayinputstream java file java file writer filewriter java io exception ioexception java print writer printwriter java util hashtable java util list org apache felix framework logger org jmock expectations org jmock mockery org jmock int egration integration junit j mock jmock org jmock int egration integration junit j unit junit mockery org junit org junit org junit test org junit runner run with runwith org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework bundle exception bundleexception org osgi framework version run with runwith j mock jmock bootstrap command file test bootstrapcommandfiletest logger logger logger file non existent file nonexistentfile file none xistent nonexistent system current time millis currenttimemillis mockery mockery j unit junit mockery file data file datafile file cmd file cmdfile bundle context bundlecontext bundle context bundlecontext set up setup io exception ioexception bundle exception bundleexception data file datafile file create temp file createtempfile get class getclass get simple name getsimplename txt bundle mockery mock bundle mockery checking expectations allowing get symbolic name getsymbolicname return value returnvalue some bundle somebundle allowing get headers getheaders return value returnvalue hashtable string string allowing get version getversion return value returnvalue version allowing uninstall bundle bundles bundle context bundlecontext mockery mock bundle context bundlecontext mockery checking expectations allowing bundle context bundlecontext get data file getdatafile string return value returnvalue data file datafile allowing bundle context bundlecontext get bundles getbundles return value returnvalue bundles allowing bundle context bundlecontext get service reference getservicereference string return value returnvalue cmd file cmdfile file create temp file createtempfile get class getclass get simple name getsimplename cmd print writer printwriter print writer printwriter file writer filewriter cmd file cmdfile println test command file comment println uninstall some bundle somebundle println comment println uninstall other bundle otherbundle flush close tear down teardown io exception ioexception data file datafile delete cmd file cmdfile delete test test no file no execution testnofilenoexecution bootstrap command file bootstrapcommandfile bcf bootstrap command file bootstrapcommandfile logger non existent file nonexistentfile assert false assertfalse expecting anything to execute anythingtoexecute existing file bcf anything to execute anythingtoexecute bundle context bundlecontext test test execute once only testexecuteonceonly io exception ioexception bootstrap command file bootstrapcommandfile bcf bootstrap command file bootstrapcommandfile logger cmd file cmdfile assert true asserttrue expecting anything to execute anythingtoexecute existing file bcf anything to execute anythingtoexecute bundle context bundlecontext assert equals assertequals expecting commands executed bcf execute bundle context bundlecontext assert false assertfalse expecting anything to execute anythingtoexecute execution bcf anything to execute anythingtoexecute bundle context bundlecontext test test parsing testparsing io exception ioexception bootstrap command file bootstrapcommandfile bcf bootstrap command file bootstrapcommandfile logger cmd file cmdfile string cmd string cmdstring comment uninstall symbolic name symbolicname comment uninstall symbolic name symbolicname list command bcf parse byte array input stream bytearrayinputstream cmd string cmdstring get bytes getbytes assert equals assertequals expecting commands parsing size command cmd assert true asserttrue expecting uninstall bundle command uninstallbundlecommand cmd uninstall bundle command uninstallbundlecommand test test syntax error testsyntaxerror io exception ioexception bootstrap command file bootstrapcommandfile bcf bootstrap command file bootstrapcommandfile logger cmd file cmdfile string cmd string cmdstring comment uninstall field comment uninstall symbolic name symbolicname comment uninstall args bcf parse byte array input stream bytearrayinputstream cmd string cmdstring get bytes getbytes fail expecting io exception ioexception syntax error io exception ioexception ioe assert true asserttrue exception message ioe get message getmessage command ioe get message getmessage args test test invalid command testinvalidcommand io exception ioexception bootstrap command file bootstrapcommandfile bcf bootstrap command file bootstrapcommandfile logger cmd file cmdfile string cmd string cmdstring foo bcf parse byte array input stream bytearrayinputstream cmd string cmdstring get bytes getbytes fail expecting io exception ioexception invalid command io exception ioexception ioe assert true asserttrue exception message ioe get message getmessage command ioe get message getmessage foo