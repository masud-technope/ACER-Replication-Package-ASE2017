licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling mailarchiveserver impl org apache sling mailarchiveserver impl message store impl repository test util messagestoreimplrepositorytestutil assert value map assertvaluemap org apache sling mailarchiveserver impl message store impl repository test util messagestoreimplrepositorytestutil get resource path getresourcepath org apache sling mailarchiveserver impl message store impl repository test util messagestoreimplrepositorytestutil read text file readtextfile org apache sling mailarchiveserver impl message store impl repository test util messagestoreimplrepositorytestutil special path from file path specialpathfromfilepath org junit assert not null assertnotnull org junit assert true asserttrue java file java file input stream fileinputstream java file not found exception filenotfoundexception java io exception ioexception java util array list arraylist java util list org apache james mime mime exception mimeexception org apache james mime dom message org apache james mime dom message builder messagebuilder org apache james mime message default message builder defaultmessagebuilder org apache sling api resource modifiable value map modifiablevaluemap org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling discovery impl setup mocked resource resolver mockedresourceresolver org apache sling mailarchiveserver api mbox parser mboxparser org apache sling mailarchiveserver util mail archive server constants mailarchiveserverconstants org apache sling mailarchiveserver util org junit org junit org junit test message store impl repository test messagestoreimplrepositorytest resource resolver resourceresolver resolver resource test root testroot message store impl messagestoreimpl store string test key sling resource type resourcetype string body suffix body string headers suffix headers string single part singlepart file single part singlepart txt string multipart file multipart txt string wrongbody file wrong body wrongbody txt string mbox file messages mbox code http svn apache org repos asf sling trunk launchpad test services src main java org apache sling launchpad tests ervices testservices server side tests serversidetests write able resources test writeableresourcestest java setup exception resolver mocked resource resolver mockedresourceresolver assert not null assertnotnull expecting resource resolver resourceresolver resolver resource root resolver get resource getresource assert not null assertnotnull expecting root resource root string path get class getclass get simple name getsimplename system current time millis currenttimemillis test root testroot resolver create root path resolver commit store message store impl messagestoreimpl resource resolver resourceresolver get resource resolver getresourceresolver resolver store thread key gen threadkeygen thread key generator impl threadkeygeneratorimpl store archive path archivepath test root testroot get path getpath store resource type key resourcetypekey test key cleanup exception resolver close resolver test root testroot store test test save message testsavemessage file not found exception filenotfoundexception mime exception mimeexception io exception ioexception assert save message assertsavemessage single part singlepart file assert save message assertsavemessage multipart file assert save message assertsavemessage wrongbody file test test structure teststructure io exception ioexception mbox parser mboxparser parser mime j mbox parser impl jmboxparserimpl file file file test folder mbox file store save all saveall parser parse file input stream fileinputstream file assert structure assertstructure assert save message assertsavemessage string message file messagefile mime exception mimeexception io exception ioexception file not found exception filenotfoundexception message builder messagebuilder builder default message builder defaultmessagebuilder message msg builder parse message parsemessage file input stream fileinputstream file test folder message file messagefile store save msg resource resolver get resource getresource get resource path getresourcepath msg store assert not null assertnotnull expecting resource modifiable value map modifiablevaluemap adapt to adaptto modifiable value map modifiablevaluemap file body file bodyfile file test folder special path from file path specialpathfromfilepath message file messagefile body suffix body file bodyfile exists string expected body expectedbody read text file readtextfile body file bodyfile assert value map assertvaluemap body expected body expectedbody file headers file headersfile file test folder special path from file path specialpathfromfilepath message file messagefile headers suffix headers file headersfile exists message store impl repository test util messagestoreimplrepositorytestutil assert headers assertheaders headers file headersfile test assert true asserttrue headers file headersfile exists body file bodyfile exists assert structure assertstructure list string types array list arraylist string types add mail archive server constants mailarchiveserverconstants domain types add mail archive server constants mailarchiveserverconstants list types add types add types add mail archive server constants mailarchiveserverconstants thread types add mail archive server constants mailarchiveserverconstants message message store impl repository test util messagestoreimplrepositorytestutil assert layer assertlayer test root testroot types