licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp jasper compiler java util javax servlet jsp tagext org apache sling scripting jsp jasper jasper exception jasperexception responsible determining scripting variables custom action declare author jan luehe scripting variable r scriptingvariabler integer max scope integer integer max assigns identifier type int eger integer custom tag order identify custom tag scripting variables declare custom tag counter customtagcounter node visitor count node custom tag customtag parent visit node custom tag customtag jasper exception jasperexception set custom tag parent setcustomtagparent parent node custom tag customtag tmp parent tmpparent parent parent visit body visitbody parent tmp parent tmpparent set num count setnumcount integer count custom tag determines scripting variables declare scripting variable visitor scriptingvariablevisitor node visitor error dispatcher errordispatcher err hashtable script vars scriptvars scripting variable visitor scriptingvariablevisitor error dispatcher errordispatcher err err err script vars scriptvars hashtable visit node custom tag customtag jasper exception jasperexception set scripting vars setscriptingvars variable info variableinfo set scripting vars setscriptingvars variable info variableinfo nested visit body visitbody set scripting vars setscriptingvars variable info variableinfo set scripting vars setscriptingvars node custom tag customtag scope jasper exception jasperexception tag variable info tagvariableinfo tag var infos tagvarinfos get tag variable infos gettagvariableinfos variable info variableinfo var infos varinfos get variable infos getvariableinfos tag var infos tagvarinfos length var infos varinfos length vector vec vector integer own range ownrange scope variable info variableinfo scope variable info variableinfo node custom tag customtag parent get custom tag parent getcustomtagparent parent own range ownrange max scope own range ownrange parent get num count getnumcount nested own range ownrange get num count getnumcount var infos varinfos length var infos varinfos length var infos varinfos get scope getscope scope var infos varinfos get declare getdeclare string var name varname var infos varinfos get var name getvarname integer current range currentrange integer script vars scriptvars var name varname current range currentrange own range ownrange compare to compareto current range currentrange script vars scriptvars var name varname own range ownrange vec add var infos varinfos tag var infos tagvarinfos length tag var infos tagvarinfos get scope getscope scope tag var infos tagvarinfos get declare getdeclare string var name varname tag var infos tagvarinfos get name given getnamegiven var name varname var name varname get tag data gettagdata get attribute string getattributestring tag var infos tagvarinfos get name from attribute getnamefromattribute var name varname err jsp error jsperror jsp error scripting variable missing tag var infos tagvarinfos get name from attribute getnamefromattribute integer current range currentrange integer script vars scriptvars var name varname current range currentrange own range ownrange compare to compareto current range currentrange script vars scriptvars var name varname own range ownrange vec add tag var infos tagvarinfos set scripting vars setscriptingvars vec scope node nodes error dispatcher errordispatcher err jasper exception jasperexception visit custom tag counter customtagcounter visit scripting variable visitor scriptingvariablevisitor err