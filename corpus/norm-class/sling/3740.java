licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp jasper compiler java file java file permission filepermission java net url java security code source codesource java security permission collection permissioncollection java security policy java security cert certificate java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util java util concurrent concurrent hash map concurrenthashmap java util concurrent locks lock java util concurrent locks reentrant lock reentrantlock javax servlet servlet javax servlet servlet context servletcontext javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet jsp jsp application context jspapplicationcontext javax servlet jsp jsp engine info jspengineinfo javax servlet jsp jsp factory jspfactory javax servlet jsp page context pagecontext org apache juli logging log org apache juli logging log factory logfactory org apache sling scripting jsp jasper constants org apache sling scripting jsp jasper io provider ioprovider org apache sling scripting jsp jasper options org apache sling scripting jsp jasper runtime jsp factory impl jspfactoryimpl org apache sling scripting jsp jasper security security class load securityclassload org apache sling scripting jsp jasper servlet jsp servlet wrapper jspservletwrapper tracking jsp compile time file dependencies include file directive background thread per iodically periodically checks files jsp dependent dpendent file jsp included recompiled web application context directory author g len n glenn nielsen version revision jsp runtime context jspruntimecontext logger log log log factory logfactory get log getlog jsp runtime context jspruntimecontext link io provider ioprovider access output io provider ioprovider io provider ioprovider delegate for warding forwarding factory original depending factory flag jsp factory handler jspfactoryhandler jsp factory jspfactory jsp factory jspfactory original jsp factory jspfactory jsp factory handler jspfactoryhandler jsp factory jspfactory orig jsp factory jspfactory original orig jsp factory handler jspfactoryhandler jsp factory handler jspfactoryhandler orig original orig jsp factory jspfactory get factory getfactory integer use own factory useownfactory factory use own factory useownfactory use own factory useownfactory int value intvalue original override page context pagecontext get page context getpagecontext servlet param servlet paramservlet servlet request servletrequest param servlet request paramservletrequest servlet response servletresponse param servlet response paramservletresponse string param string paramstring param boolean paramboolean param int paramint param boolean paramboolean get factory getfactory get page context getpagecontext param servlet paramservlet param servlet request paramservletrequest param servlet response paramservletresponse param string paramstring param boolean paramboolean param int paramint param boolean paramboolean override release page context releasepagecontext page context pagecontext param page context parampagecontext get factory getfactory release page context releasepagecontext param page context parampagecontext override jsp engine info jspengineinfo get engine info getengineinfo get factory getfactory get engine info getengineinfo override jsp application context jspapplicationcontext get jsp application context getjspapplicationcontext servlet context servletcontext param servlet context paramservletcontext get factory getfactory get jsp application context getjspapplicationcontext param servlet context paramservletcontext reset jsp factory destroy jsp factory jspfactory current jsp factory jspfactory get default factory getdefaultfactory current jsp factory jspfactory set default factory setdefaultfactory original inc usage incusage integer count jsp runtime context jspruntimecontext factory new count newcount count new count newcount count jsp runtime context jspruntimecontext factory new count newcount dec usage decusage integer count jsp runtime context jspruntimecontext factory jsp runtime context jspruntimecontext factory count reset usage resetusage integer count jsp runtime context jspruntimecontext factory jsp runtime context jspruntimecontext factory count set usage setusage count jsp runtime context jspruntimecontext factory count preload classes required runtime jsp servlet don define class in package defineclassinpackage security exception jsp factory jsp factory handler jspfactoryhandler init factory handler initfactoryhandler jsp factory impl jspfactoryimpl factory jsp factory impl jspfactoryimpl security class load securityclassload security class load securityclassload factory get class getclass get class loader getclassloader system get security manager getsecuritymanager string base package basepackage org apache sling scripting jsp jasper factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime jsp factory impl jspfactoryimpl privileged get page context privilegedgetpagecontext factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime jsp factory impl jspfactoryimpl privileged release page context privilegedreleasepagecontext factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime jsp runtime library jspruntimelibrary factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime jsp runtime library jspruntimelibrary privileged intro spec t helper privilegedintrospecthelper factory get class getclass get class loader getclassloader load class loadclass base package basepackage runtime servlet response wrapper include servletresponsewrapperinclude factory get class getclass get class loader getclassloader load class loadclass base package basepackage servlet jsp servlet wrapper jspservletwrapper class not found exception classnotfoundexception illegal state exception illegalstateexception jsp factory handler jspfactoryhandler key jsp factory handler jspfactoryhandler jsp factory jspfactory get default factory getdefaultfactory factory jsp factory jspfactory set default factory setdefaultfactory key key thread local threadlocal integer factory thread local threadlocal integer create jsp runtime context jspruntimecontext web application context loads generated dependencies file param context servlet context servletcontext web application jsp runtime context jspruntimecontext servlet context servletcontext context options options io provider ioprovider io provider ioprovider context context options options io provider ioprovider io provider ioprovider constants security enabled init security initsecurity instance variables web applications servlet context servletcontext servlet context servletcontext context options options permission collection permissioncollection permission collection permissioncollection maps jsp jsp servlet wrapper jspservletwrapper concurrent hash map concurrenthashmap string jsp servlet wrapper jspservletwrapper jsps concurrent hash map concurrenthashmap string jsp servlet wrapper jspservletwrapper maps dependencies jsp map string string dep to jsp deptojsp hash map hashmap string string locks loading tag files concurrent hash map concurrenthashmap string lock tag file loading locks tagfileloadinglocks concurrent hash map concurrenthashmap string lock methods add jsp dependencies addjspdependencies jsp servlet wrapper jspservletwrapper jsw list string deps deps string jsp uri jspuri jsw get jsp uri getjspuri dep to jsp deptojsp string dep deps string dep to jsp deptojsp dep hash set hashset string dep to jsp deptojsp dep add jsp uri jspuri handle jsp modifications handle modification handlemodification string script name scriptname log is debug enabled isdebugenabled log debug handling modification script name scriptname jsp servlet wrapper jspservletwrapper wrapper jsps remove script name scriptname check jsps removed invalid ate invalidate wrapper string deps dep to jsp deptojsp deps dep to jsp deptojsp remove script name scriptname deps string dep deps wrapper jsps remove dep removed invalid ate invalidate wrapper removed invalid ate invalidate wrapper destroy invalid ate invalidate jsp servlet wrapper jspservletwrapper wrapper wrapper log is debug enabled isdebugenabled log debug invalid ating invalidating jsp wrapper get jsp uri getjspuri wrapper destroy add wrapper param jsp uri jspuri jsp uri param jsw servlet wrapper jsp jsp servlet wrapper jspservletwrapper add wrapper addwrapper string jsp uri jspuri jsp servlet wrapper jspservletwrapper jsw jsp servlet wrapper jspservletwrapper previous jsps put if absent putifabsent jsp uri jspuri jsw previous add jsp dependencies addjspdependencies jsw jsw get dependants getdependants jsw previous existing jsp servlet wrapper jspservletwrapper param jsp uri jspuri jsp uri jsp servlet wrapper jspservletwrapper jsp jsp servlet wrapper jspservletwrapper get wrapper getwrapper string jsp uri jspuri jsps jsp uri jspuri locks tag file path loading param tag file path tagfilepath tag file path lock tag file loading locktagfileloading string tag file path tagfilepath lock lock get tag file loading lock gettagfileloadinglock tag file path tagfilepath lock lock unlocks tag file path loading param tag file path tagfilepath tag file path unlock tag file loading unlocktagfileloading string tag file path tagfilepath lock lock get tag file loading lock gettagfileloadinglock tag file path tagfilepath lock unlock process destroy event web application context destroy iterator jsp servlet wrapper jspservletwrapper servlets jsps values iterator servlets has next hasnext servlets destroy jsps clear dep to jsp deptojsp dep to jsp deptojsp clear returns current link io provider ioprovider context io provider ioprovider getioprovider io provider ioprovider methods method initialize security manager securitymanager data init security initsecurity setup permission collection permissioncollection web app context based permissions configured root web app context directory add file read permission directory policy policy policy get policy getpolicy policy permissions web app context string doc base docbase context get real path getrealpath doc base docbase doc base docbase options get scratch dir getscratchdir to string tostring string code base codebase doc base docbase code base codebase ends with endswith file separator code base codebase code base codebase file separator file context dir contextdir file code base codebase url url context dir contextdir get canonical file getcanonicalfile tourl code source codesource code source codesource code source codesource url certificate permission collection permissioncollection policy get per missions getpermissions code source codesource create file read permission web app context directory doc base docbase ends with endswith file separator permission collection permissioncollection add file permission filepermission doc base docbase read doc base docbase doc base docbase file separator permission collection permissioncollection add file permission filepermission doc base docbase substring doc base docbase length read doc base docbase doc base docbase permission collection permissioncollection add file permission filepermission doc base docbase read create file read permission web app temp dir tempdir work directory string work dir workdir options get scratch dir getscratchdir to string tostring work dir workdir ends with endswith file separator permission collection permissioncollection add file permission filepermission work dir workdir read work dir workdir work dir workdir file separator work dir workdir work dir workdir permission collection permissioncollection add file permission filepermission work dir workdir read jsp access org apache sling scripting jsp jasper runtime http jsp base httpjspbase permission collection permissioncollection add runtime permission runtimepermission access class in package accessclassinpackage org apache jasper runtime exception context log security init context failed returns option ally optionally creates lock load tag file lock get tag file loading lock gettagfileloadinglock string tag file path tagfilepath lock lock tag file loading locks tagfileloadinglocks tag file path tagfilepath lock lock reentrant lock reentrantlock lock existing lock existinglock tag file loading locks tagfileloadinglocks put if absent putifabsent tag file path tagfilepath lock existing lock existinglock lock existing lock existinglock lock