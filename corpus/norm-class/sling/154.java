licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling core impl servlet org junit assert equals assertequals org mockito matchers any string anystring org mockito matchers arg that argthat org mockito matchers org mockito matchers org mockito mockito do return doreturn org mockito mockito verify org mockito mockito verify zero int eractions verifyzerointeractions java io exception ioexception java print writer printwriter java util array list arraylist java util list java util map javax servlet servlet exception servletexception javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org apache sling api result org apache sling api result status org apache sling api execution health check execution options healthcheckexecutionoptions org apache sling api execution health check execution result healthcheckexecutionresult org apache sling api execution health check executor healthcheckexecutor org apache sling core impl executor execution result executionresult org apache sling util health check metadata healthcheckmetadata org hamcrest description org junit org junit test org mockito argument matcher argumentmatcher org mockito mock org mockito mockito annotations mockitoannotations org osgi framework constants org osgi framework service reference servicereference health check executor servlet test healthcheckexecutorservlettest health check executor servlet healthcheckexecutorservlet health check executor servlet healthcheckexecutorservlet mock http servlet request httpservletrequest request mock http servlet response httpservletresponse response mock health check executor healthcheckexecutor health check executor healthcheckexecutor mock result html serializer resulthtmlserializer html serializer htmlserializer mock result json serializer resultjsonserializer json serializer jsonserializer mock result txt serializer resulttxtserializer txt serializer txtserializer mock service reference servicereference hc service ref hcserviceref mock print writer printwriter writer setup io exception ioexception health check executor servlet healthcheckexecutorservlet health check executor servlet healthcheckexecutorservlet mockito annotations mockitoannotations init mocks initmocks health check executor servlet healthcheckexecutorservlet health check executor healthcheckexecutor health check executor healthcheckexecutor health check executor servlet healthcheckexecutorservlet html serializer htmlserializer html serializer htmlserializer health check executor servlet healthcheckexecutorservlet json serializer jsonserializer json serializer jsonserializer health check executor servlet healthcheckexecutorservlet txt serializer txtserializer txt serializer txtserializer do return doreturn hc service ref hcserviceref get property getproperty constants service do return doreturn writer response get writer getwriter test test do get html testdogethtml servlet exception servletexception io exception ioexception string test tag testtag test tag testtag do return doreturn test tag testtag request get parameter getparameter health check executor servlet healthcheckexecutorservlet param tags do return doreturn request get parameter getparameter health check executor servlet healthcheckexecutorservlet param combine tags list health check execution result healthcheckexecutionresult execution results executionresults get execution results getexecutionresults result status critical do return doreturn execution results executionresults health check executor healthcheckexecutor execute health check execution options healthcheckexecutionoptions test tag testtag health check executor servlet healthcheckexecutorservlet do get doget request response verify zero int eractions verifyzerointeractions json serializer jsonserializer verify zero int eractions verifyzerointeractions txt serializer txtserializer verify html serializer htmlserializer serialize result equals resultequals result result status critical status critical execution results executionresults supported url parameters test test do get json testdogetjson servlet exception servletexception io exception ioexception string test tag testtag test tag testtag do return doreturn request get parameter getparameter health check executor servlet healthcheckexecutorservlet param combine tags timeout do return doreturn timeout request get parameter getparameter health check executor servlet healthcheckexecutorservlet param override global timeout do return doreturn test tag testtag json request get path info getpathinfo list health check execution result healthcheckexecutionresult execution results executionresults get execution results getexecutionresults result status warn health check execution options healthcheckexecutionoptions options health check execution options healthcheckexecutionoptions options set combine tags with or setcombinetagswithor options set override global timeout setoverrideglobaltimeout timeout do return doreturn execution results executionresults health check executor healthcheckexecutor execute options test tag testtag health check executor servlet healthcheckexecutorservlet do get doget request response verify zero int eractions verifyzerointeractions html serializer htmlserializer verify zero int eractions verifyzerointeractions txt serializer txtserializer verify json serializer jsonserializer serialize result equals resultequals result result status warn status warn execution results executionresults any string anystring test test do get txt testdogettxt servlet exception servletexception io exception ioexception string test tag testtag test tag testtag do return doreturn test tag testtag request get parameter getparameter health check executor servlet healthcheckexecutorservlet param tags do return doreturn txt request get parameter getparameter health check executor servlet healthcheckexecutorservlet param format do return doreturn request get parameter getparameter health check executor servlet healthcheckexecutorservlet param combine tags timeout do return doreturn timeout request get parameter getparameter health check executor servlet healthcheckexecutorservlet param override global timeout list health check execution result healthcheckexecutionresult execution results executionresults get execution results getexecutionresults result status warn health check execution options healthcheckexecutionoptions options health check execution options healthcheckexecutionoptions options set combine tags with or setcombinetagswithor options set override global timeout setoverrideglobaltimeout timeout do return doreturn execution results executionresults health check executor healthcheckexecutor execute options test tag testtag health check executor servlet healthcheckexecutorservlet do get doget request response verify zero int eractions verifyzerointeractions html serializer htmlserializer verify zero int eractions verifyzerointeractions json serializer jsonserializer verify txt serializer txtserializer serialize result equals resultequals result result status warn status warn list health check execution result healthcheckexecutionresult get execution results getexecutionresults result status worst status worststatus list health check execution result healthcheckexecutionresult array list arraylist health check execution result healthcheckexecutionresult add execution result executionresult health check metadata healthcheckmetadata hc service ref hcserviceref result worst status worststatus worst status worststatus add execution result executionresult health check metadata healthcheckmetadata hc service ref hcserviceref result result status test test get status mapping testgetstatusmapping servlet exception servletexception map status integer status mapping statusmapping health check executor servlet healthcheckexecutorservlet get status mapping getstatusmapping critical assert equals assertequals status mapping statusmapping result status integer assert equals assertequals status mapping statusmapping result status warn integer assert equals assertequals status mapping statusmapping result status critical integer assert equals assertequals status mapping statusmapping result status health check error integer status mapping statusmapping health check executor servlet healthcheckexecutorservlet get status mapping getstatusmapping assert equals assertequals status mapping statusmapping result status integer assert equals assertequals status mapping statusmapping result status warn integer assert equals assertequals status mapping statusmapping result status critical integer assert equals assertequals status mapping statusmapping result status health check error integer status mapping statusmapping health check executor servlet healthcheckexecutorservlet get status mapping getstatusmapping warn critical health check error assert equals assertequals status mapping statusmapping result status integer assert equals assertequals status mapping statusmapping result status warn integer assert equals assertequals status mapping statusmapping result status critical integer assert equals assertequals status mapping statusmapping result status health check error integer status mapping statusmapping health check executor servlet healthcheckexecutorservlet get status mapping getstatusmapping critical health check error assert equals assertequals status mapping statusmapping result status integer assert equals assertequals status mapping statusmapping result status warn integer assert equals assertequals status mapping statusmapping result status critical integer assert equals assertequals status mapping statusmapping result status health check error integer test expected servlet exception servletexception test get status mapping invalid token testgetstatusmappinginvalidtoken servlet exception servletexception health check executor servlet healthcheckexecutorservlet get status mapping getstatusmapping critical test expected servlet exception servletexception test get status mapping invalid status testgetstatusmappinginvalidstatus servlet exception servletexception health check executor servlet healthcheckexecutorservlet get status mapping getstatusmapping invalid test expected servlet exception servletexception test get status mapping invalid status code testgetstatusmappinginvalidstatuscode servlet exception servletexception health check executor servlet healthcheckexecutorservlet get status mapping getstatusmapping critical xxx result result equals resultequals result expected arg that argthat result matcher resultmatcher expected result matcher resultmatcher argument matcher argumentmatcher result result expected result expectedresult result matcher resultmatcher result expected expected result expectedresult expected override matches object actual result actual result actualresult result actual simple status matching sufficient test actual result actualresult get status getstatus equals expected result expectedresult get status getstatus override describe to describeto description description description append text appendtext expected result expectedresult expected result expectedresult to string tostring