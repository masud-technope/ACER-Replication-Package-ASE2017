licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr class loader classloader internal java io exception ioexception java net url java security access controller accesscontroller java security privileged exception action privilegedexceptionaction java security secure class loader secureclassloader java util collections java util enumeration java util hash set hashset java util list java util no such element exception nosuchelementexception java util javax jcr node javax jcr repository exception repositoryexception javax jcr session org apache sling commons class loader classloader dynamic class loader dynamicclassloader org apache sling jcr class loader classloader internal net jcr url handler jcrurlhandler org slf logger org slf logger factory loggerfactory code repository class loader repositoryclassloader code functionality load classes resources jcr repository add itionally additionally supports not ion notion dirty resource loaded loader modified repository loader marks dirty flag retrieved repository class loader repositoryclassloader secure class loader secureclassloader dynamic class loader dynamicclassloader logger logger logger logger factory loggerfactory get logger getlogger get class getclass get name getname loaded resources classes string used resources usedresources hash set hashset string flag indicating loaded classes expired invalid ated invalidated modified dirty path classpath string repository path repositorypath code class loader writer impl classloaderwriterimpl code grants access repository field cleared loader destroyed class loader writer impl classloaderwriterimpl writer flag indicating link destroy method called code code code code destroyed creates code repository class loader repositoryclassloader code repository path param class path classpath path making path loader param writer loader write jcr session param parent parent code class loader classloader code code code null pointer exception nullpointerexception session class path classpath code code repository class loader repositoryclassloader string class path classpath class loader writer impl classloaderwriterimpl writer class loader classloader parent initialize empty path parent check writer class path classpath writer null pointer exception nullpointerexception writer class path classpath null pointer exception nullpointerexception class path classpath fields writer writer repository path repositorypath class path classpath logger debug repository class loader repositoryclassloader ready dest roys destroys loader process enc ompasses encompasses steps needed remove references loader note method clears internal fields path render loader unusable implementation exceptions destroy expect called dest royal destroyal destroyed logger debug instance destroyed dest royal destroyal guard destroyed used resources usedresources used resources usedresources clear finds loads path param class not found exception classnotfoundexception named loader destroyed override find class findclass string class not found exception classnotfoundexception writer is activate isactivate class not found exception classnotfoundexception class loader classloader destroyed logger debug find class findclass find access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction class not found exception classnotfoundexception find class privileged findclassprivileged java security privileged action exception privilegedactionexception pae class not found exception classnotfoundexception pae get exception getexception finds resource search path param resource code url code resource code code resource loader destroyed override url find resource findresource string writer is activate isactivate logger warn destroyed loader find resource illegal state exception illegalstateexception logger debug find resource findresource find resource string path repository path repositorypath find class loader resource findclassloaderresource path logger debug find resource findresource resource path jcr url handler jcrurlhandler createurl writer path exception logger warn find resource findresource geturl returns enumeration url s urls representing resources search path param resource code enumeration code code url code empty enumeration resources loader loader destroyed override enumeration url find resources findresources string writer is activate isactivate logger warn destroyed loader find resources illegal state exception illegalstateexception enumeration url has more elements hasmoreelements url next element nextelement no such element exception nosuchelementexception entries logger debug find resources findresources find resources url url find resource findresource list url list collections singleton list singletonlist url url list add url enumeration list collections enumeration list find path code privileged action privilegedaction code code class not found exception classnotfoundexception code param class not found exception classnotfoundexception null pointer exception nullpointerexception loader destroyed find class privileged findclassprivileged string class not found exception classnotfoundexception prepare logger debug find class privileged findclassprivileged find path string path repository path repositorypath replace defining error aborts data find class loader class findclassloaderclass path data logger debug find class privileged findclassprivileged loading bytes data length define class defineclass data logger warn define class defineclass returned class not found exception classnotfoundexception io exception ioexception ioe logger debug define class defineclass failed ioe class not found exception classnotfoundexception ioe throwable logger debug define class defineclass failed class not found exception classnotfoundexception class not found exception classnotfoundexception returns contents code path code code code existing param path repository path resource contents code code null pointer exception nullpointerexception loader destroyed find class loader resource findclassloaderresource string path io exception ioexception session session res session writer create session createsession session item exists itemexists path logger debug resource path res logger debug classpath entry path repository exception repositoryexception logger debug error node path session session log out logout res returns contents code path code code code existing param path repository path resource contents code code null pointer exception nullpointerexception loader destroyed find class loader class findclassloaderclass string path io exception ioexception session session res session writer create session createsession session item exists itemexists path node node node session get item getitem path logger debug resource path res util get bytes getbytes node logger debug classpath entry path repository exception repositoryexception logger debug error node path session session log out logout dirty used resources usedresources used resources usedresources add path res defines bytes param fully qualified param contents bytes repository exception repositoryexception problem occurrs data io exception ioexception problem occurrs reading bytes resource class format error classformaterror bytes read resource valid define class defineclass string contents logger debug define class defineclass contents length clazz define class defineclass contents contents length clazz org apache sling commons class loader classloader dynamic class loader dynamicclassloader is live islive is live islive destroyed dirty writer is activate isactivate handle modification event handle event handleevent string path used resources usedresources used resources usedresources path logger debug handle event handleevent item modified marking loader dirty path dirty object overwrite returns string representation loader override string to string tostring string builder stringbuilder buf string builder stringbuilder get class getclass get name getname destroyed buf append destroyed buf append parent buf append get parent getparent buf append live buf append is live islive buf to string tostring