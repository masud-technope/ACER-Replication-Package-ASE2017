licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing tools server setup serversetup java util array list arraylist java util arrays java util collections java util hash map hashmap java util hash set hashset java util list java util map java util properties java util junit framework assertion failed error assertionfailederror org slf logger org slf logger factory loggerfactory evolution sling test base slingtestbase jar executor jarexecutor combination revision control server side int egration integration tests number startup shutdown phases defined executes order property lists names flexibility startup shutdown phases creating test scenarios auto mated automated testing system upgrades pre start runnable jar wait ready install bundles wait ready create content version jar start runnable jar wait ready tests jar verify upgrade pre running time debug ging debugging upgrade tests restart saved step steps steps setup phase setupphase objects identified partial list names test speeding dev elopment development troubleshooting todo comp anion companion samples int egration integration tests module updated setup sling server tests sling test base slingtestbase server setup serversetup logger log logger factory loggerfactory get logger getlogger get class getclass context setup phase setupphase objects exc hange exchange data map string object context hash map hashmap string object list string phases to run phasestorun array list arraylist string configuration properties config prefix property names string prop prefix server setup config property comma separated list phases string phases prop prop prefix phases standard suffix shutdown tasks id s ids string shutdown suffix shutdown setup phases setupphases keyed unique map string setup phase setupphase phases hash map hashmap string setup phase setupphase list phases string done phases donephases hash set hashset string list phases failed string failed phases failedphases hash set hashset string context attribute server access url string server base url server base url shutdown hook thread thread shutdown hook shutdownhook suppress warnings suppresswarnings serial setup exception setupexception exception setup exception setupexception string reason reason setup exception setupexception string reason throwable reason runs startup phases exception call junit fail method fails failed previous call method called times setup phases setup test server setuptestserver exception call list phases done phases donephases is empty isempty log is info enabled isinfoenabled list string ids array list arraylist string ids add all addall phases key set keyset collections sort ids log info setup phases setupphases phases to run phasestorun ids startup phases didn run remaining phases runremainingphases setup shutdown hook shutdown hook shutdownhook shutdown hook shutdownhook thread get class getclass get simple name getsimplename shutdown shutdown exception log warn exception shutdown hook runtime get runtime getruntime add shutdown hook addshutdownhook shutdown hook shutdownhook log info shutdown hook shutdown phases phases have n haven run remaining phases runremainingphases is startup isstartup exception string mode is startup isstartup startup shutdown shutdown mode safe r safer cleanup phases is startup isstartup failed phases failedphases is empty isempty setup exception setupexception setup phases setupphases failed failed phases failedphases string phases to run phasestorun setup phase setupphase phases done phases donephases log debug setup phase setupphase mode log info setup phase setupphase mode done phases donephases add is startup phase isstartupphase is startup isstartup log info exec uting executing phase mode exception failed phases failedphases add assertion failed error assertionfailederror failed phases failedphases add exception assertion failed error assertionfailederror run remaining phases runremainingphases done phases donephases add called shutdown hook shutdown phases called explicitly shutdown phase runs shutdown exception run remaining phases runremainingphases context setup phase setupphase communicate map string object get context getcontext context configuration reset lists phases failed set config setconfig properties props config props string str props get property getproperty phases prop phases to run phasestorun clear string phases str string str split phases length phases phases trim phases to run phasestorun add all addall arrays as list aslist phases phases to run phasestorun is empty isempty log warn setup phases defined empty purpose phases prop done phases donephases clear failed phases failedphases clear configuration properties link set config setconfig properties get config getconfig config id s ids phases list string get phases to run getphasestorun collections unmodifiable list unmodifiablelist phases to run phasestorun add setup phase setupphase list unique list add setup phase addsetupphase setup phase setupphase setup exception setupexception phases contains key containskey get id getid setup exception setupexception setup phase setupphase get id getid list phases key set keyset phases get id getid