licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling resource resolver resourceresolver impl mapping java util array list arraylist java util arrays java util list java util regex matcher java util regex pattern org apache sling api resource resource org apache sling api resource value map valuemap org apache sling resource resolver resourceresolver impl resource resolver impl resourceresolverimpl org slf logger org slf logger factory loggerfactory code map entry mapentry code represents mapping entry mapping configuration tree code map code http cwiki apache org sling flexible resource resolution html map entry mapentry comparable map entry mapentry log logger log logger factory loggerfactory get logger getlogger get class getclass pattern url port match pattern compile http pattern compile https string url port replacement http https pattern path url match pattern compile http pattern compile https pattern compile pattern compile string path url replacement http https pattern url pattern urlpattern string redirect status order string append slash appendslash string path path ends with endswith path path concat path returns string matching map entries request uri parts param scheme uri scheme param host host param port port number negative scheme https param path absolute path request path string scheme host port path string geturi string scheme string host port string path string builder stringbuilder string builder stringbuilder append scheme append append host port port http equals scheme port https equals scheme append append port append path to string tostring string fix uri path fixuripath string uri path uripath url port match length matcher url port match matcher uri path uripath find replace all replaceall url port replacement uri path uripath converts resolution path form http host path uri form http host path potential port http https removed path regular path path method returns code code string touri string uri path uripath path url match length matcher path url match matcher uri path uripath find replace all replaceall path url replacement map entry mapentry create resolve entry createresolveentry string url resource resource trailing slash trailingslash value map valuemap props resource adapt to adaptto value map valuemap props ensure url port number url fix uri path fixuripath url string redirect props map entries mapentries prop redirect external string redirect status props map entries mapentries prop redirect external status map entry mapentry url status trailing slash trailingslash redirect string internal redirect props internalredirectprops props resource resolver impl resourceresolverimpl prop redirect internal string string internal redirect internalredirect filter reg exp filterregexp internal redirect props internalredirectprops internal redirect internalredirect map entry mapentry url trailing slash trailingslash internal redirect internalredirect list map entry mapentry create map entry createmapentry string url resource resource trailing slash trailingslash value map valuemap props resource adapt to adaptto value map valuemap props string redirect props map entries mapentries prop redirect external string redirect ignoring external redirects mapping logger factory loggerfactory get logger getlogger map entry mapentry info create map entry createmapentry configuration external redirect creating mapping configuration redirect resource get path getpath ignore potential regular expression url is reg exp isregexp url logger factory loggerfactory get logger getlogger map entry mapentry info create map entry createmapentry url regular expression creating mapping configuration url resource get path getpath check url match hooked string string end hook endhook url ends with endswith end hook endhook url url substring url length check url scheme host url starts with startswith map entries mapentries scheme host url url substring map entries mapentries scheme host length string internal redirect internalredirect props resource resolver impl resourceresolverimpl prop redirect internal string internal redirect internalredirect check url considered external internal status string path uri pathuri touri url path uri pathuri url path uri pathuri status list map entry mapentry prep entries prepentries array list arraylist map entry mapentry internal redirect internalredirect length string redir internal redirect internalredirect redir map entry mapentry map entry mapentry map entry mapentry map entry mapentry redir concat end hook endhook status trailing slash trailingslash url illegal argument exception illegalargumentexception iae logger factory loggerfactory get logger getlogger map entry mapentry debug ignoring mapping exception iae get message getmessage iae map entry mapentry prep entries prepentries add map entry mapentry prep entries prepentries size prep entries prepentries map entry mapentry string url status trailing slash trailingslash order string redirect ends trailing slash trailing slash trailingslash url append slash appendslash url redirect length redirect append slash appendslash redirect ensure pattern hooked start string url starts with startswith url concat url url pattern urlpattern pattern compile url exception illegal argument exception illegalargumentexception bad url pattern url redirect redirect status status order order returns replacement match string replace string matcher url pattern urlpattern matcher find string redirects get redirect getredirect string string redirects length redirects length replace first replacefirst redirects string index out of bounds exception stringindexoutofboundsexception siob log debug exception replacing ignoring entry redirects siob illegal argument exception illegalargumentexception iae log debug exception replacing ignoring entry redirects iae string get pattern getpattern url pattern urlpattern to string tostring string get redirect getredirect redirect is internal isinternal get status getstatus get status getstatus status comparable compare to compareto map entry mapentry string own pattern string ownpatternstring url pattern urlpattern to string tostring string m pattern string mpatternstring url pattern urlpattern to string tostring tlen own pattern string ownpatternstring length mlen m pattern string mpatternstring length tlen mlen tlen mlen len gths lengths equal entries order based pattern string comparison stringcomparison own pattern string ownpatternstring to string tostring compare to compareto m pattern string mpatternstring string comparison stringcomparison order order order order string comparison stringcomparison object overwrite override string to string tostring string builder stringbuilder buf string builder stringbuilder buf append map entry mapentry match append url pattern urlpattern buf append replacement get redirect getredirect length buf append get redirect getredirect buf append arrays as list aslist get redirect getredirect is internal isinternal buf append internal buf append status append get status getstatus buf to string tostring helper returns code code string unescaped regular expression special characters param string is reg exp isregexp string string string length string char at charat index of indexof string filter reg exp filterregexp string strings strings strings length array list arraylist string list array list arraylist string strings length string string strings is reg exp isregexp string list add string list is empty isempty string list to array toarray string list size set order setorder order order order