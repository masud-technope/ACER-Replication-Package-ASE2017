licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets post impl operations java util iterator java util list javax jcr node javax jcr repository exception repositoryexception javax jcr version version javax jcr version version history versionhistory javax jcr version version manager versionmanager javax servlet http http servlet response httpservletresponse org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource resource org apache sling servlets post abstract post operation abstractpostoperation org apache sling servlets post modification org apache sling servlets post post response postresponse org apache sling servlets post sling post constants slingpostconstants code restore operation restoreoperation code link org apache sling servlets post sling post constants slingpostconstants operation res tore restore restore operation sling post servlet restore operation restoreoperation abstract post operation abstractpostoperation override do run dorun sling http servlet request slinghttpservletrequest request post response postresponse response list modification repository exception repositoryexception string version request get parameter getparameter sling post constants slingpostconstants version version version length illegal argument exception illegalargumentexception unable process restore missing version string remove string removestring request get parameter getparameter sling post constants slingpostconstants remove existing remove existing removeexisting parse boolean parseboolean remove string removestring iterator resource res get apply to resources getapplytoresources request res resource resource request get resource getresource node node resource adapt to adaptto node node response set status setstatus http servlet response httpservletresponse missing source resource restore restore node version remove existing removeexisting add modification on restore onrestore resource get path getpath version res has next hasnext resource resource res node node resource adapt to adaptto node node restore node version remove existing removeexisting add modification on restore onrestore resource get path getpath version restore node node string version spec ifier versionspecifier remove existing removeexisting repository exception repositoryexception version manager versionmanager node get session getsession get workspace getworkspace get version manager getversionmanager version history versionhistory history get version history getversionhistory node get path getpath version version history has version label hasversionlabel version spec ifier versionspecifier version history get version by label getversionbylabel version spec ifier versionspecifier history has node hasnode version spec ifier versionspecifier version history get version getversion version spec ifier versionspecifier illegal argument exception illegalargumentexception unable process restore invalid version version spec ifier versionspecifier restore version remove existing removeexisting