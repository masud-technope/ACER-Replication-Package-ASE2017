licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr contentloader internal java input stream inputstream java unsupported encoding exception unsupportedencodingexception java security message digest messagedigest java security no such algorithm exception nosuchalgorithmexception java security principal java text parse exception parseexception java text simple date format simpledateformat java util array list arraylist java util calendar java util java util hash map hashmap java util iterator java util list java util map java util map entry java util java util stack java util string tokenizer stringtokenizer java util regex pattern javax jcr item javax jcr item not found exception itemnotfoundexception javax jcr node javax jcr property type propertytype javax jcr repository exception repositoryexception javax jcr session javax jcr javax jcr value factory valuefactory org apache jackrabbit api security principal principal manager principalmanager org apache jackrabbit api security user authorizable org apache jackrabbit api security user group org apache jackrabbit api security user user org apache jackrabbit api security user user manager usermanager org apache sling jcr base util access control util accesscontrolutil org apache sling jcr contentloader content creator contentcreator org apache sling jcr contentloader content import listener contentimportlistener org apache sling jcr contentloader content reader contentreader org apache sling jcr contentloader import options importoptions org slf logger org slf logger factory loggerfactory code content loader contentloader code creates nodes properties default content creator defaultcontentcreator content creator contentcreator logger log logger factory loggerfactory get logger getlogger default content creator defaultcontentcreator import options importoptions configuration pattern json date pattern jsondatepattern pattern compile simple date format simpledateformat json date format jsondateformat simple date format simpledateformat yyyy sssz stack node parent node stack parentnodestack stack node list version ables versionables list node version ables versionables array list arraylist node delayed references content loading reference property map string list string delayed references delayedreferences hash map hashmap string list string map string string delayed multiple references delayedmultiplereferences hash map hashmap string string string default name defaultname node created root node createdrootnode is parent node import isparentnodeimport ignore overwrite flag ignoreoverwriteflag content type create file createfile string content type application octet stream helper mime type file content helper contenthelper content helper contenthelper list active content read ers readers mapped extension map string content reader contentreader content read ers contentreaders optional list created nodes uninstall list string created nodes creatednodes optional listener not ified notified content import listener contentimportlistener import listener importlistener time see d seed randomize user location instance seed system current time millis currenttimemillis number levels folder store user configuration option storage levels constructor param content helper contenthelper helper mime type file default content creator defaultcontentcreator content helper contenthelper content helper contenthelper content helper contenthelper content helper contenthelper initialize component param path entry pathentry configuration param default content read ers defaultcontentreaders list content read ers readers param created nodes creatednodes optional list store nodes uninstall init import options importoptions path entry pathentry map string content reader contentreader default content read ers defaultcontentreaders list string created nodes creatednodes content import listener contentimportlistener import listener importlistener configuration path entry pathentry create list allowed content read ers readers content read ers contentreaders hash map hashmap string content reader contentreader iterator map entry string content reader contentreader entry iter entryiter default content read ers defaultcontentreaders entry set entryset iterator entry iter entryiter has next hasnext map entry string content reader contentreader current entry iter entryiter configuration is ignored import provider isignoredimportprovider current get key getkey content read ers contentreaders current get key getkey current get value getvalue created nodes creatednodes created nodes creatednodes import listener importlistener import listener importlistener default name defaultname parent node mode param parent node parentnode param default name defaultname prepare parsing prepareparsing node parent node parentnode string default name defaultname parent node stack parentnodestack clear parent node stack parentnodestack push parent node parentnode default name defaultname default name defaultname is parent node import isparentnodeimport default name defaultname created root node createdrootnode list version able versionable nodes list node get version ables getversionables version ables versionables clear content loader clear version ables versionables clear ignore overwrite flag param flag set ignore overwrite flag setignoreoverwriteflag flag ignore overwrite flag ignoreoverwriteflag flag created root node node get created root node getcreatedrootnode created root node createdrootnode active content read ers readers map read ers readers map string content reader contentreader get content read ers getcontentreaders content read ers contentreaders org apache sling jcr contentloader content creator contentcreator create node createnode java lang string java lang string java lang string create node createnode string string primary node type primarynodetype string mixin node types mixinnodetypes repository exception repositoryexception node parent node parentnode parent node stack parentnodestack peek is parent import isparentimport is parent node import isparentnodeimport parent node stack parentnodestack size repository exception repositoryexception node default name defaultname parent node mode don create root top level node is parent import isparentimport parent node stack parentnodestack size node exists overwritten delete ignore overwrite flag ignoreoverwriteflag configuration is overwrite isoverwrite parent node parentnode has node hasnode check out if necessary checkoutifnecessary parent node parentnode parent node parentnode get node getnode remove ensure repository node node node parent node parentnode has node hasnode existing node node parent node parentnode get node getnode primary node type primarynodetype explicit node type repository check out if necessary checkoutifnecessary parent node parentnode node parent node parentnode add node addnode add node to created list addnodetocreatedlist node import listener importlistener import listener importlistener on create oncreate node get path getpath explicit primary node type check out if necessary checkoutifnecessary parent node parentnode node parent node parentnode add node addnode primary node type primarynodetype add node to created list addnodetocreatedlist node import listener importlistener import listener importlistener on create oncreate node get path getpath amend mixin node types mixin node types mixinnodetypes string mixin mixin node types mixinnodetypes node is node type isnodetype mixin node add mixin addmixin mixin check node version able versionable add to version ables addtoversionables configuration is check in ischeckin node is node type isnodetype mix version able versionable add to version ables addtoversionables version ables versionables add node parent node stack parentnodestack push node created root node createdrootnode created root node createdrootnode node org apache sling jcr contentloader content creator contentcreator create property createproperty java lang string java lang string create property createproperty string property type propertytype string repository exception repositoryexception node node parent node stack parentnodestack peek check property exists is property overwrite ispropertyoverwrite don overwrite node has property hasproperty configuration is property overwrite ispropertyoverwrite node get property getproperty is new isnew property type propertytype property type propertytype reference resolve reference string prop path proppath node get path getpath string uuid getuuid node get session getsession prop path proppath get abs path getabspath node uuid check out if necessary checkoutifnecessary node node set property setproperty uuid property type propertytype import listener importlistener import listener importlistener on create oncreate node get property getproperty get path getpath jcr is checked out ischeckedout equals don write property record check in checkin checked out checkedout value of valueof checked out checkedout version ables versionables node version ables versionables add node property type propertytype property type propertytype check out if necessary checkoutifnecessary node node set property setproperty parse date string parsedatestring parse exception parseexception node set property setproperty property type propertytype import listener importlistener import listener importlistener on create oncreate node get property getproperty get path getpath check out if necessary checkoutifnecessary node property type propertytype property type propertytype undefined node set property setproperty node set property setproperty property type propertytype import listener importlistener import listener importlistener on create oncreate node get property getproperty get path getpath org apache sling jcr contentloader content creator contentcreator create property createproperty java lang string java lang string create property createproperty string property type propertytype string values repository exception repositoryexception node node parent node stack parentnodestack peek check property exists is property overwrite ispropertyoverwrite don overwrite node has property hasproperty configuration is property overwrite ispropertyoverwrite node get property getproperty is new isnew property type propertytype property type propertytype reference string prop path proppath node get path getpath has all hasall string uuids string values length string uuid or paths uuidorpaths string values length values length uuids getuuid node get session getsession prop path proppath get abs path getabspath node values uuid or paths uuidorpaths uuids uuids get abs path getabspath node values uuids has all hasall check out if necessary checkoutifnecessary node node set property setproperty uuids property type propertytype import listener importlistener import listener importlistener on create oncreate node get property getproperty get path getpath has all hasall delayed multiple references delayedmultiplereferences prop path proppath uuid or paths uuidorpaths property type propertytype property type propertytype check out if necessary checkoutifnecessary node modification remove colon json time zone timezone value factory valuefactory value factory valuefactory node get session getsession get value factory getvaluefactory jcr values jcrvalues values length values length jcr values jcrvalues value factory valuefactory create value createvalue parse date string parsedatestring values node set property setproperty jcr values jcrvalues property type propertytype parse exception parseexception log warn create dates property falling defaults node set property setproperty values property type propertytype import listener importlistener import listener importlistener on create oncreate node get property getproperty get path getpath check out if necessary checkoutifnecessary node property type propertytype property type propertytype undefined node set property setproperty values node set property setproperty values property type propertytype import listener importlistener import listener importlistener on create oncreate node get property getproperty get path getpath create value createvalue value factory valuefactory factory object factory create value createvalue calendar calendar get instance getinstance set time settime factory create value createvalue calendar factory create value createvalue calendar factory create value createvalue factory create value createvalue input stream inputstream factory create value createvalue input stream inputstream factory create value createvalue to string tostring org apache sling jcr contentloader content creator contentcreator create property createproperty java lang string java lang object create property createproperty string object repository exception repositoryexception create property createproperty org apache sling jcr contentloader content creator contentcreator create property createproperty java lang string java lang object create property createproperty string object values repository exception repositoryexception create property createproperty values org apache sling jcr contentloader content creator contentcreator finish node finishnode finish node finishnode repository exception repositoryexception node node parent node stack parentnodestack pop resolve reference property values pointing node resolve references resolvereferences node add node to created list addnodetocreatedlist node node repository exception repositoryexception created nodes creatednodes created nodes creatednodes add node get session getsession get workspace getworkspace get name getname node get path getpath string get abs path getabspath node node string path repository exception repositoryexception path starts with startswith path path starts with startswith path path substring node node get parent getparent path starts with startswith path path substring node get path getpath path string getuuid session session string prop path proppath string reference path referencepath repository exception repositoryexception session item exists itemexists reference path referencepath item item session get item getitem reference path referencepath item is node isnode node ref node refnode node item ref node refnode is node type isnodetype mix reference able referenceable ref node refnode getuuid existing delayed setting list string current delayed references delayedreferences reference path referencepath current current array list arraylist string delayed references delayedreferences reference path referencepath current current add prop path proppath uuid resolve references resolvereferences node node repository exception repositoryexception list string props delayed references delayedreferences remove node get path getpath props props size check node is node type isnodetype mix reference able referenceable session session node get session getsession string uuid node getuuid string property props string get name getname property node parent node parentnode get parent node getparentnode session property parent node parentnode check out if necessary checkoutifnecessary parent node parentnode parent node parentnode has property hasproperty parent node parentnode get property getproperty get definition getdefinition is multiple ismultiple has all hasall string uuid or paths uuidorpaths delayed multiple references delayedmultiplereferences property string uuids string uuid or paths uuidorpaths length uuid or paths uuidorpaths length reference path uuid or paths uuidorpaths starts with startswith uuid or paths uuidorpaths equals node get path getpath uuid or paths uuidorpaths uuid uuids uuid uuids has all hasall uuids uuid or paths uuidorpaths parent node parentnode set property setproperty uuids property type propertytype reference import listener importlistener import listener importlistener on create oncreate parent node parentnode get property getproperty get path getpath has all hasall delayed multiple references delayedmultiplereferences remove property parent node parentnode set property setproperty uuid property type propertytype reference import listener importlistener import listener importlistener on create oncreate parent node parentnode get property getproperty get path getpath code path code path slash complete path slash contained param path path extract string get name getname string path last slash lastslash path last index of lastindexof string last slash lastslash path path substring last slash lastslash node get parent node getparentnode session session string path repository exception repositoryexception last slash lastslash path last index of lastindexof absolute path find parent last slash lastslash node root last slash lastslash session get root node getrootnode item hierarchy path path substring last slash lastslash session item exists itemexists path item item session get item getitem path item is node isnode node item calendar parse date string parsedatestring string parse exception parseexception json date pattern jsondatepattern matcher matches string modified json date modifiedjsondate match java version last index of lastindexof modified json date modifiedjsondate substring substring calendar cal calendar get instance getinstance cal set time settime json date format jsondateformat parse modified json date modifiedjsondate cal create property createproperty string object overwrite existing overwriteexisting repository exception repositoryexception node node parent node stack parentnodestack peek check property exists don overwrite node has property hasproperty node get property getproperty is new isnew overwrite existing overwriteexisting node has property hasproperty check out if necessary checkoutifnecessary node string prop path proppath node get property getproperty get path getpath node get property getproperty remove import listener importlistener import listener importlistener on delete ondelete prop path proppath check out if necessary checkoutifnecessary node jcr value jcrvalue create value createvalue node get session getsession get value factory getvaluefactory node set property setproperty jcr value jcrvalue import listener importlistener import listener importlistener on modify onmodify node get property getproperty get path getpath create property createproperty string object values overwrite existing overwriteexisting repository exception repositoryexception node node parent node stack parentnodestack peek check property exists don overwrite node has property hasproperty node get property getproperty is new isnew overwrite existing overwriteexisting values values length node has property hasproperty check out if necessary checkoutifnecessary node string prop path proppath node get property getproperty get path getpath node get property getproperty remove import listener importlistener import listener importlistener on delete ondelete prop path proppath check out if necessary checkoutifnecessary node jcr values jcrvalues values length values length jcr values jcrvalues create value createvalue node get session getsession get value factory getvaluefactory values node set property setproperty jcr values jcrvalues import listener importlistener import listener importlistener on modify onmodify node get property getproperty get path getpath org apache sling jcr contentloader content creator contentcreator create file and resource node createfileandresourcenode java lang string java input stream inputstream java lang string create file and resource node createfileandresourcenode string input stream inputstream data string mime type mimetype last modified lastmodified repository exception repositoryexception last slash lastslash last index of lastindexof last slash lastslash substring last slash lastslash node parent node parentnode parent node stack parentnodestack peek node exists overwritten delete parent node parentnode has node hasnode parent node stack parentnodestack push parent node parentnode get node getnode node content node contentnode parent node parentnode get node getnode get node getnode jcr content parent node stack parentnodestack push content node contentnode node last modified nodelastmodified content node contentnode has property hasproperty jcr last modified lastmodified node last modified nodelastmodified content node contentnode get property getproperty jcr last modified lastmodified get date getdate get time in millis gettimeinmillis configuration is overwrite isoverwrite node last modified nodelastmodified last modified lastmodified log info updating last modified lastmodified content last modified lastmodified object parent node parentnode get node getnode get path getpath node last modified nodelastmodified last modified lastmodified create node createnode file create node createnode jcr content resource ensure content type mime type mimetype mime type mimetype content helper contenthelper get mime type getmimetype mime type mimetype log info create file createfile find content type content type mime type mimetype content type ensure modification last modified lastmodified last modified lastmodified system current time millis currenttimemillis create property createproperty jcr mime type mimetype mime type mimetype create property createproperty jcr last modified lastmodified last modified lastmodified create property createproperty jcr data data org apache sling jcr contentloader content creator contentcreator switch current node switchcurrentnode java lang string java lang string switch current node switchcurrentnode string sub path subpath string new node type newnodetype repository exception repositoryexception sub path subpath starts with startswith sub path subpath sub path subpath substring string tokenizer stringtokenizer string tokenizer stringtokenizer sub path subpath node node parent node stack parentnodestack peek has more tokens hasmoretokens string token next token nexttoken node has node hasnode token new node type newnodetype check out if necessary checkoutifnecessary node node node add node addnode token new node type newnodetype add node to created list addnodetocreatedlist import listener importlistener import listener importlistener on create oncreate node get path getpath node node get node getnode token parent node stack parentnodestack push node javadoc org apache sling jcr contentloader content creator contentcreator create group creategroup java lang string java lang string java util map create group creategroup string string members map string object extra properties extraproperties repository exception repositoryexception node parent node parentnode parent node stack parentnodestack peek session session parent node parentnode get session getsession user manager usermanager user manager usermanager access control util accesscontrolutil get user manager getusermanager session authorizable authorizable user manager usermanager get authorizable getauthorizable authorizable principal exist create group group user manager usermanager create group creategroup principal string get name getname hash path hashpath authorizable group principal exists check expected type authorizable is group isgroup repository exception repositoryexception user exists requested group exists update update group members members group group group authorizable string member members authorizable member authorizable memberauthorizable user manager usermanager get authorizable getauthorizable member member authorizable memberauthorizable group add member addmember member authorizable memberauthorizable extra properties extraproperties value factory valuefactory value factory valuefactory session get value factory getvaluefactory entry string object entry set entryset extra properties extraproperties entry set entryset entry string object entry entry set entryset create value createvalue value factory valuefactory entry get value getvalue authorizable set property setproperty entry get key getkey javadoc org apache sling jcr contentloader content creator contentcreator create user createuser java lang string java lang string java util map create user createuser string string password map string object extra properties extraproperties repository exception repositoryexception node parent node parentnode parent node stack parentnodestack peek session session parent node parentnode get session getsession user manager usermanager user manager usermanager access control util accesscontrolutil get user manager getusermanager session authorizable authorizable user manager usermanager get authorizable getauthorizable authorizable principal exist create user user user manager usermanager create user createuser password principal string get name getname hash path hashpath authorizable user principal exists check expected type authorizable is group isgroup repository exception repositoryexception group exists requested user exists update extra properties extraproperties value factory valuefactory value factory valuefactory session get value factory getvaluefactory entry string object entry set entryset extra properties extraproperties entry set entryset entry string object entry entry set entryset create value createvalue value factory valuefactory entry get value getvalue authorizable set property setproperty entry get key getkey param item parent path fragment item string hash path hashpath string item repository exception repositoryexception string hash digest sha instance seed item get bytes getbytes utf string builder stringbuilder string builder stringbuilder storage levels append hash append to string tostring no such algorithm exception nosuchalgorithmexception repository exception repositoryexception unable hash path unsupported encoding exception unsupportedencodingexception repository exception repositoryexception unable hash path javadoc org apache sling jcr contentloader content creator contentcreator create ace createace java lang string java lang string java lang string java lang string create ace createace string principal id principalid string granted privilege names grantedprivilegenames string denied privilege names deniedprivilegenames string order repository exception repositoryexception node parent node parentnode parent node stack parentnodestack peek session session parent node parentnode get session getsession principal manager principalmanager principal manager principalmanager access control util accesscontrolutil get principal manager getprincipalmanager session principal principal principal manager principalmanager get principal getprincipal principal id principalid principal repository exception repositoryexception principal principal id principalid string resource path resourcepath parent node parentnode get path getpath granted privilege names grantedprivilegenames denied privilege names deniedprivilegenames access control util accesscontrolutil replace access control entry replaceaccesscontrolentry session resource path resourcepath principal granted privilege names grantedprivilegenames denied privilege names deniedprivilegenames order hex table hextable abc def abcdef to char array tochararray digest plain string algorithm param algorithm alogrithm digest algorithm supported message digest messagedigest param data data digest algorithm digested plain text string represented hex digits java security no such algorithm exception nosuchalgorithmexception desired algorithm supported message digest messagedigest string digest string algorithm data no such algorithm exception nosuchalgorithmexception message digest messagedigest message digest messagedigest get instance getinstance algorithm digest digest data string buffer stringbuffer res string buffer stringbuffer digest length digest length digest res append hex table hextable res append hex table hextable res to string tostring find ancestor version able versionable node find version able ancestor findversionableancestor node node repository exception repositoryexception node is version able isversionable node node node node get parent getparent find version able ancestor findversionableancestor node item not found exception itemnotfoundexception is version able isversionable node node repository exception repositoryexception node is node type isnodetype mix version able versionable check out checkout node needed check out if necessary checkoutifnecessary node node repository exception repositoryexception configuration is auto check out isautocheckout node version able node versionablenode find version able ancestor findversionableancestor node version able node versionablenode version able node versionablenode is checked out ischeckedout version able node versionablenode check out checkout import listener importlistener import listener importlistener on check out oncheckout version able node versionablenode get path getpath