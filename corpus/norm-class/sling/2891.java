licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide eclipse core internal java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java input stream inputstream java util jar jar file jarfile java util jar jar output stream jaroutputstream java util jar manifest java util zip def later deflater java util zip zip entry zipentry java util zip zip output stream zipoutputstream org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i resource iresource org eclipse core runtime core exception coreexception org eclipse core runtime i status istatus org eclipse core runtime status jar builder jarbuilder creates jar file directory structure eclipse api s apis jar builder jarbuilder input stream inputstream build jar buildjar i folder ifolder source dir sourcedir core exception coreexception byte array output stream bytearrayoutputstream store byte array output stream bytearrayoutputstream i resource iresource manifest resource manifestresource source dir sourcedir find member findmember jar file jarfile manifest manifest resource manifestresource manifest resource manifestresource get type gettype i resource iresource file core exception coreexception status i status istatus error activator plugin file named jar file jarfile manifest source dir sourcedir jar output stream jaroutputstream zos jar output stream jaroutputstream store input stream inputstream manifest input manifestinput i file ifile manifest resource manifestresource get contents getcontents manifest manifest manifest manifest input manifestinput zos set level setlevel def later deflater compression manifest zip entry zipentry an entry anentry zip entry zipentry jar file jarfile manifest zos put next entry putnextentry an entry anentry manifest write zos zos close entry closeentry zip dir zipdir source dir sourcedir zos io exception ioexception core exception coreexception status i status istatus error activator plugin get message getmessage byte array input stream bytearrayinputstream store to byte array tobytearray zip dir zipdir i folder ifolder source dir sourcedir zip output stream zipoutputstream zos string path core exception coreexception io exception ioexception i resource iresource source dir sourcedir members get type gettype i resource iresource folder string prefix path get name getname zos put next entry putnextentry zip entry zipentry prefix zip dir zipdir i folder ifolder zos prefix get type gettype i resource iresource file string entry path get name getname jar file jarfile manifest equals entry input stream inputstream fis i file ifile get contents getcontents read buffer readbuffer bytes in bytesin zip entry zipentry an entry anentry zip entry zipentry entry zos put next entry putnextentry an entry anentry bytes in bytesin fis read read buffer readbuffer zos write read buffer readbuffer bytes in bytesin