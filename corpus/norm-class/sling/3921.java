licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling resource resolver resourceresolver impl providers java util array list arraylist java util collections java util dictionary java util hash map hashmap java util hash set hashset java util hashtable java util iterator java util list java util map java util java util concurrent concurrent hash map concurrenthashmap org apache sling api sling constants slingconstants org apache sling api resource path org apache sling api resource path set pathset org apache sling api resource observation resource change resourcechange org apache sling api resource observation resource change resourcechange change type changetype org apache sling api resource runtime dto failure reason failurereason org apache sling api resource runtime dto resourceproviderdto org apache sling api resource runtime dto resource provider failure o resourceproviderfailuredto org apache sling api resource runtime dto runtimedto org apache sling resource resolver resourceresolver impl legacy legacy resource provider white board legacyresourceproviderwhiteboard org apache sling spi resource provider observation reporter observationreporter org apache sling spi resource provider resource provider resourceprovider org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service reference servicereference org osgi service event event org osgi service event event admin eventadmin org osgi util tracker service tracker servicetracker org osgi util tracker service tracker customizer servicetrackercustomizer org slf logger org slf logger factory loggerfactory service track resource providers resource provider tracker resourceprovidertracker observation reporter generator observationreportergenerator observation reporter observationreporter create path path path set pathset excludes observation reporter observationreporter create provider reporter createproviderreporter change listener changelistener provider changed providerchanged string pid logger logger logger factory loggerfactory get logger getlogger get class getclass map service reference servicereference resource provider info resourceproviderinfo infos concurrent hash map concurrenthashmap service reference servicereference resource provider info resourceproviderinfo bundle context bundlecontext bundle context bundlecontext service tracker servicetracker tracker map string list resource provider handler resourceproviderhandler handlers hash map hashmap string list resource provider handler resourceproviderhandler map resource provider info resourceproviderinfo failure reason failurereason invalid providers invalidproviders concurrent hash map concurrenthashmap resource provider info resourceproviderinfo failure reason failurereason event admin eventadmin event admin eventadmin observation reporter generator observationreportergenerator reporter generator reportergenerator resource provider storage resourceproviderstorage storage observation reporter observationreporter provider reporter providerreporter change listener changelistener listener activate bundle context bundlecontext bundle context bundlecontext event admin eventadmin event admin eventadmin change listener changelistener listener bundle context bundlecontext bundle context bundlecontext event admin eventadmin event admin eventadmin listener listener tracker service tracker servicetracker bundle context bundlecontext resource provider resourceprovider get name getname service tracker customizer servicetrackercustomizer override removed service removedservice service reference servicereference reference object service service reference servicereference service reference servicereference service resource provider info resourceproviderinfo info infos remove info unregister info override modified service modifiedservice service reference servicereference reference object service removed service removedservice reference service adding service addingservice reference override object adding service addingservice service reference servicereference reference resource provider info resourceproviderinfo info resource provider info resourceproviderinfo reference infos reference info register info reference tracker open deactivate tracker tracker close tracker infos clear handlers clear invalid providers invalidproviders clear listener set observation reporter generator setobservationreportergenerator observation reporter generator observationreportergenerator generator provider reporter providerreporter generator create provider reporter createproviderreporter handlers reporter generator reportergenerator generator list resource provider handler resourceproviderhandler list handlers values resource provider handler resourceproviderhandler list update provider context updateprovidercontext update register resource provider param info resource provider info register resource provider info resourceproviderinfo info info is valid isvalid logger debug registering resource provider info list provider event providerevent events array list arraylist resource provider tracker resourceprovidertracker provider event providerevent handlers list resource provider handler resourceproviderhandler matching handlers matchinghandlers handlers info get path getpath matching handlers matchinghandlers matching handlers matchinghandlers array list arraylist resource provider handler resourceproviderhandler handlers info get path getpath matching handlers matchinghandlers resource provider handler resourceproviderhandler handler resource provider handler resourceproviderhandler bundle context bundlecontext info matching handlers matchinghandlers add handler collections sort matching handlers matchinghandlers matching handlers matchinghandlers handler activate handler matching handlers matchinghandlers remove handler matching handlers matchinghandlers is empty isempty handlers remove info get path getpath events add provider event providerevent info matching handlers matchinghandlers size deactivate matching handlers matchinghandlers events add provider event providerevent matching handlers matchinghandlers get info getinfo storage post events postevents events logger warn ignoring invalid resource provider info invalid providers invalidproviders info failure reason failurereason invalid unregister resource provider param info resource provider info unregister resource provider info resourceproviderinfo info is invalid isinvalid invalid providers invalidproviders is invalid isinvalid invalid providers invalidproviders remove info is invalid isinvalid logger debug unregistering resource provider info list provider event providerevent events array list arraylist resource provider tracker resourceprovidertracker provider event providerevent handlers list resource provider handler resourceproviderhandler matching handlers matchinghandlers handlers info get path getpath matching handlers matchinghandlers do activate next doactivatenext matching handlers matchinghandlers get info getinfo info do activate next doactivatenext deactivate matching handlers matchinghandlers events add provider event providerevent matching handlers matchinghandlers get info getinfo remove handler by info removehandlerbyinfo info matching handlers matchinghandlers do activate next doactivatenext matching handlers matchinghandlers is empty isempty activate matching handlers matchinghandlers do activate next doactivatenext events add provider event providerevent matching handlers matchinghandlers get info getinfo matching handlers matchinghandlers remove matching handlers matchinghandlers is empty isempty handlers remove info get path getpath storage post events postevents events logger debug unregistering invalid resource provider info search info list handlers param info provider info param infos list handlers code info removed remove handler by info removehandlerbyinfo resource provider info resourceproviderinfo info list resource provider handler resourceproviderhandler infos iterator resource provider handler resourceproviderhandler infos iterator removed has next hasnext get info getinfo info remove removed removed activate resource provider param handler provider handler activate resource provider handler resourceproviderhandler handler update provider context updateprovidercontext handler handler activate logger warn act ivating activating resource provider failed handler get info getinfo invalid providers invalidproviders handler get info getinfo failure reason failurereason service get table gettable logger debug activated resource provider handler get info getinfo deactivate resource provider param handler provider handler deactivate resource provider handler resourceproviderhandler handler handler deactivate logger debug deactivated resource provider handler get info getinfo post change event event admin param event postosgievent provider event providerevent event dictionary string object event props eventprops hashtable string object event props eventprops sling constants slingconstants property path event path event pid event props eventprops constants service pid event pid event admin eventadmin post event postevent event event is add isadd sling constants slingconstants topic resource provider sling constants slingconstants topic resource provider removed event props eventprops post change event resource provider change param type change type param info resource provider post resource provider change postresourceproviderchange provider event providerevent event resource change resourcechange change resource change resourcechange event is add isadd change type changetype provider change type changetype provider removed event path provider reporter providerreporter report changes reportchanges collections singleton list singletonlist change fill runtimedto dto list resourceproviderdto dtos array list arraylist resourceproviderdto list resource provider failure o resourceproviderfailuredto failures array list arraylist resource provider failure o resourceproviderfailuredto handlers list resource provider handler resourceproviderhandler handlers handlers values is first isfirst resource provider handler resourceproviderhandler handlers resourceproviderdto is first isfirst resourceproviderdto dtos add is first isfirst resource provider failure o resourceproviderfailuredto resource provider failure o resourceproviderfailuredto reason failure reason failurereason shadowed failures add resource provider failure o resourceproviderfailuredto fill invalid providers invalidproviders map entry resource provider info resourceproviderinfo failure reason failurereason entry invalid providers invalidproviders entry set entryset resource provider failure o resourceproviderfailuredto resource provider failure o resourceproviderfailuredto fill entry get key getkey reason entry get value getvalue dto providers dtos to array toarray resourceproviderdto dtos size dto failed providers failedproviders failures to array toarray resource provider failure o resourceproviderfailuredto failures size resource provider storage resourceproviderstorage get resource provider storage getresourceproviderstorage resource provider storage resourceproviderstorage result storage result handlers storage list resource provider handler resourceproviderhandler handler list handlerlist array list arraylist resource provider handler resourceproviderhandler list resource provider handler resourceproviderhandler list handlers values resource provider handler resourceproviderhandler list handler list handlerlist add storage resource provider storage resourceproviderstorage handler list handlerlist result storage result fill resourceproviderdto resource provider info resourceproviderinfo info adaptable info is adaptable isadaptable attr ibutable attributable info is attr ibutable isattributable auth type authtype info get auth type getauthtype modifiable info is modifiable ismodifiable info get name getname path info get path getpath refresh able refreshable info is refresh able isrefreshable service id serviceid info get service reference getservicereference get property getproperty constants service supportsjcrquery supports query supportsquery use resource access security useresourceaccesssecurity info get use resource access security getuseresourceaccesssecurity fill resourceproviderdto resource provider handler resourceproviderhandler handler fill handler get info getinfo resource provider resourceprovider provider handler get resource provider getresourceprovider provider supportsjcrquery provider getjcrqueryprovider supports query supportsquery provider get query provider getqueryprovider update provider context updateprovidercontext resource provider handler resourceproviderhandler handler string excluded paths excludedpaths hash set hashset string path handler path handlerpath path handler get path getpath string other path otherpath handlers key set keyset handler get path getpath equals other path otherpath handler path handlerpath matches other path otherpath excluded paths excludedpaths add other path otherpath path set pathset excluded path set excludedpathset path set pathset from string collection fromstringcollection excluded paths excludedpaths handler get provider context getprovidercontext update reporter generator reportergenerator create handler path handlerpath excluded path set excludedpathset excluded path set excludedpathset post events postevents list provider event providerevent events events is empty isempty thread thread runnable override provider event providerevent events postosgievent post resource provider change postresourceproviderchange pid listener provider changed providerchanged pid set name setname apache sling resource provider change not ifier notifier set daemon setdaemon start provider event providerevent is add isadd string pid string path provider event providerevent is add isadd resource provider info resourceproviderinfo info is add isadd is add isadd path info get path getpath string pid string info get service reference getservicereference get property getproperty constants service pid pid pid string info get service reference getservicereference get property getproperty legacy resource provider white board legacyresourceproviderwhiteboard original service pid pid pid