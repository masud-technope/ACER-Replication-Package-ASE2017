licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting core impl org junit assert not null assertnotnull org junit assert null assertnull java file java file output stream fileoutputstream java i o exception ioexception java util dictionary javax script script engine manager scriptenginemanager org jmock expectations org jmock mockery org jmock int egration integration junit j mock jmock org jmock int egration integration junit j unit junit mockery org junit org junit test org junit runner run with runwith org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework bundle event bundleevent org osgi framework bundle listener bundlelistener org osgi framework service listener servicelistener org osgi framework service reference servicereference org osgi framework service registration serviceregistration org osgi service component component context componentcontext test script engine manager factory scriptenginemanagerfactory run with runwith j mock jmock script engine manager factory test scriptenginemanagerfactorytest script engine factory dummy script engine factory dummyscriptenginefactory mockery context j unit junit mockery component context componentcontext component ctx componentctx bundle context bundlecontext bundle ctx bundlectx setup exception component ctx componentctx context mock component context componentcontext bundle ctx bundlectx context mock bundle context bundlecontext context checking expectations at least atleast component ctx componentctx get bundle context getbundlecontext return value returnvalue bundle ctx bundlectx allowing bundle ctx bundlectx create filter createfilter string allowing bundle ctx bundlectx add service listener addservicelistener service listener servicelistener allowing bundle ctx bundlectx add service listener addservicelistener service listener servicelistener string allowing bundle ctx bundlectx get service references getservicereferences string a null anull string allowing bundle ctx bundlectx get service references getservicereferences a null anull string a null anull string allowing bundle ctx bundlectx get service references getservicereferences string string allowing bundle ctx bundlectx get service references getservicereferences a null anull string string bundle ctx bundlectx add bundle listener addbundlelistener bundle listener bundlelistener bundle ctx bundlectx get bundles getbundles return value returnvalue bundle allowing bundle ctx bundlectx register service registerservice equal org apache sling scripting core impl script engine console plugin scriptengineconsoleplugin object dictionary return value returnvalue mock service registration mockserviceregistration test check non null manager after activate checknonnullmanagerafteractivate exception context checking expectations bundle ctx bundlectx register service registerservice equal string javax script script engine manager scriptenginemanager org apache sling scripting core impl helper sling script engine manager slingscriptenginemanager object dictionary return value returnvalue mock service registration mockserviceregistration script engine manager factory scriptenginemanagerfactory factory script engine manager factory scriptenginemanagerfactory factory activate component ctx componentctx assert not null assertnotnull factory get script engine manager getscriptenginemanager test check adding script bundle checkaddingscriptbundle exception context checking expectations bundle ctx bundlectx register service registerservice equal string javax script script engine manager scriptenginemanager org apache sling scripting core impl helper sling script engine manager slingscriptenginemanager object dictionary return value returnvalue mock service registration mockserviceregistration script engine manager factory scriptenginemanagerfactory factory script engine manager factory scriptenginemanagerfactory factory activate component ctx componentctx script engine manager scriptenginemanager factory get script engine manager getscriptenginemanager assert null assertnull get engine by name getenginebyname dummy bundle bundle context mock bundle file factory file factoryfile create factory file createfactoryfile context checking expectations at least atleast bundle get entry getentry meta inf services javax script script engine factory scriptenginefactory return value returnvalue factory file factoryfile touri tourl at least atleast bundle load class loadclass script engine factory get name getname return value returnvalue script engine factory factory bundle changed bundlechanged bundle event bundleevent bundle event bundleevent started bundle script engine manager scriptenginemanager factory get script engine manager getscriptenginemanager assert not null assertnotnull get engine by name getenginebyname dummy file create factory file createfactoryfile i o exception ioexception file temp file tempfile file create temp file createtempfile script engine scriptengine tmp temp file tempfile delete on exit deleteonexit file output stream fileoutputstream fos fos file output stream fileoutputstream temp file tempfile fos write test comment get bytes getbytes fos write script engine factory get name getname get bytes getbytes fos fos close temp file tempfile mock service registration mockserviceregistration service registration serviceregistration service reference servicereference get reference getreference unsupported operation exception unsupportedoperationexception suppress warnings suppresswarnings unchecked set properties setproperties dictionary properties unregister