licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling samples impl java util java util concurrent atomic atomic integer atomicinteger org apache felix scr annotations configuration policy configurationpolicy org apache felix scr annotations service org apache sling annotations sling health check slinghealthcheck org apache sling api health check healthcheck org apache sling api result org apache sling util formatting result log formattingresultlog org slf logger org slf logger factory loggerfactory sling health check slinghealthcheck configuration factory configurationfactory configuration policy configurationpolicy configuration policy configurationpolicy require metatype service async health check sample asynchealthchecksample health check healthcheck logger log logger factory loggerfactory get logger getlogger async health check sample asynchealthchecksample factories instance returned service reference atomic integer atomicinteger counter atomic integer atomicinteger period seconds override result execute to wait towait math random period seconds log info waiting seconds simulate expensive operation to wait towait thread sleep to wait towait interrupted exception interruptedexception iex log warn sleep int errupted interrupted iex counter increment and get incrementandget log info counter formatting result log formattingresultlog result log resultlog formatting result log formattingresultlog result log resultlog info counter result log resultlog warn counter result result log resultlog