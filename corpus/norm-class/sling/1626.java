licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license sandroboehme jsnodetypes org mockito mockito java io exception ioexception javax jcr repository exception repositoryexception javax jcr node type nodetype node definition nodedefinition javax jcr node type nodetype node type nodetype javax servlet servlet exception servletexception org apache sling commons json json exception jsonexception org junit org junit test sandroboehme jsnodetypes mock mock node type generator mocknodetypegenerator tests servlet generates combinations child node definitions correct json format child node def generation test childnodedefgenerationtest mock node type generator mocknodetypegenerator set up setup repository exception repositoryexception io exception ioexception set up setup test test one simple child node definition testonesimplechildnodedefinition servlet exception servletexception io exception ioexception json exception jsonexception node type nodetype nt with child node defs ntwithchildnodedefs get simple node type with name getsimplenodetypewithname nt with child node defs ntwithchildnodedefs node definition nodedefinition child node defs childnodedefs get simple child node def getsimplechildnodedef child node def childnodedef nt with child node defs ntwithchildnodedefs get declared child node definitions getdeclaredchildnodedefinitions then return thenreturn child node defs childnodedefs node type iterator nodetypeiterator next node type nextnodetype then return thenreturn nt with child node defs ntwithchildnodedefs node type iterator nodetypeiterator has next hasnext then return thenreturn assert equals with servlet result assertequalswithservletresult test one simple child node definition testonesimplechildnodedefinition test test simple child node definitions testsimplechildnodedefinitions servlet exception servletexception io exception ioexception json exception jsonexception node type nodetype nt with child node defs ntwithchildnodedefs get simple node type with name getsimplenodetypewithname nt with child node defs ntwithchildnodedefs node definition nodedefinition child node def childnodedef get simple child node def getsimplechildnodedef child node def childnodedef node definition nodedefinition child node def childnodedef get simple child node def getsimplechildnodedef child node def childnodedef node definition nodedefinition child node defs childnodedefs child node def childnodedef child node def childnodedef nt with child node defs ntwithchildnodedefs get declared child node definitions getdeclaredchildnodedefinitions then return thenreturn child node defs childnodedefs node type iterator nodetypeiterator next node type nextnodetype then return thenreturn nt with child node defs ntwithchildnodedefs node type iterator nodetypeiterator has next hasnext then return thenreturn assert equals with servlet result assertequalswithservletresult test simple child node definitions testsimplechildnodedefinitions test test complete child node definitions testcompletechildnodedefinitions servlet exception servletexception io exception ioexception json exception jsonexception node type nodetype nt with child node defs ntwithchildnodedefs get simple node type with name getsimplenodetypewithname nt with child node defs ntwithchildnodedefs node definition nodedefinition child node def childnodedef get complete child node def getcompletechildnodedef child node def childnodedef node definition nodedefinition child node def childnodedef get complete child node def getcompletechildnodedef child node def childnodedef node definition nodedefinition child node defs childnodedefs child node def childnodedef child node def childnodedef nt with child node defs ntwithchildnodedefs get declared child node definitions getdeclaredchildnodedefinitions then return thenreturn child node defs childnodedefs node type iterator nodetypeiterator next node type nextnodetype then return thenreturn nt with child node defs ntwithchildnodedefs node type iterator nodetypeiterator has next hasnext then return thenreturn assert equals with servlet result assertequalswithservletresult test complete child node definitions testcompletechildnodedefinitions test test res idual child node definitions testresidualchildnodedefinitions json exception jsonexception servlet exception servletexception io exception ioexception node type nodetype nt with child ode defs ntwithchildnodedefs get simple node type with name getsimplenodetypewithname nt with child node defs ntwithchildnodedefs node definition nodedefinition child node def childnodedef get simple child node def getsimplechildnodedef node definition nodedefinition child node def childnodedef get simple child node def getsimplechildnodedef node definition nodedefinition child node def childnodedef get simple child node def getsimplechildnodedef child node def childnodedef node definition nodedefinition child node defs childnodedefs child node def childnodedef child node def childnodedef child node def childnodedef nt with child ode defs ntwithchildnodedefs get declared child node definitions getdeclaredchildnodedefinitions then return thenreturn child node defs childnodedefs node type iterator nodetypeiterator next node type nextnodetype then return thenreturn nt with child ode defs ntwithchildnodedefs node type iterator nodetypeiterator has next hasnext then return thenreturn assert equals with servlet result assertequalswithservletresult test res idual child node definitions testresidualchildnodedefinitions