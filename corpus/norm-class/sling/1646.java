licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling samples path based rtp pathbasedrtp java util dictionary javax jcr node javax jcr repository exception repositoryexception javax servlet http http servlet request httpservletrequest org apache felix scr annotations component org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations service org apache sling api resource resource org apache sling api resource resource decorator resourcedecorator org apache sling api resource resource wrapper resourcewrapper org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory resource type provider component node path define resource type number mappings configured content node content foo bar foo resource type doesn content select nodes mapping applies based path component resource type component metatype label default rtp defaultrtp description default rtp defaultrtp description service property service description sling sample resource decorator path based resource decorator pathbasedresourcedecorator resource decorator resourcedecorator config urable configurable property defines mappings values path component content path add definition sling test pbrt path int egration integration testing property content sling test pbrt unbounded property unbounded propertyunbounded array string prop path mapping path mapping logger log logger factory loggerfactory get logger getlogger get class getclass mapping mappings org apache sling api resource resource decorator resourcedecorator decorate org apache sling api resource resource javax servlet http http servlet request httpservletrequest resource decorate resource resource http servlet request httpservletrequest request decorate resource resource type node mapping applies resource decorate resource resource string result mappings check apply mapping resource star resource apply string resource type resourcetype resource get path getpath ends with endswith apply resource type resourcetype mapping node type primary node type equals resource type node node resource adapt to adaptto node node node get primary node type getprimarynodetype get name getname equals resource get resource type getresourcetype apply resource type resourcetype resource get resource type getresourcetype repository exception repositoryexception apply string path resource get path getpath mapping mappings result get resource type getresourcetype path resource type resourcetype result log debug resource type resource result path result log is debug enabled isdebugenabled log debug mapping applies node resource type resource get path getpath result string resource type resourcetype result resource wrapper resourcewrapper resource override string get resource type getresourcetype resource type resourcetype resource activates component called scr registering service activate component context componentcontext component context componentcontext dictionary properties component context componentcontext get properties getproperties string mapping list mappinglist string properties prop path mapping mapping list mappinglist mapping list mappinglist length mappings mappings mapping mapping list mappinglist length mapping list mappinglist length mappings mapping mapping list mappinglist log debug mappings