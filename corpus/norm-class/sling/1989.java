licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling security impl java util dictionary java util hashtable java util map java util java util concurrent atomic atomic integer atomicinteger junit x junitx util private accessor privateaccessor org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api resource resource org apache sling api resource value map valuemap org apache sling security impl content disposition filter contentdispositionfilter rewriter response rewriterresponse org jmock expectations org jmock mockery org jmock int egration integration junit j unit junit mockery org junit org junit test org osgi service component component context componentcontext content disposition filter test contentdispositionfiltertest content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter mockery context j unit junit mockery string prop jcr data jcr data string jcr content leaf jcr content test test activator throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx string content disposition paths contentdispositionpaths string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths contentdispositionpaths assert equals assertequals content disposition paths contentdispositionpaths size string content disposition paths pfx contentdispositionpathspfx string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths pfx contentdispositionpathspfx assert equals assertequals content disposition paths pfx contentdispositionpathspfx length map string string content types mapping contenttypesmapping map string string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content types mapping contenttypesmapping assert equals assertequals content types mapping contenttypesmapping size test test activator throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx string content disposition paths contentdispositionpaths string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths contentdispositionpaths assert equals assertequals content disposition paths contentdispositionpaths size string content disposition paths pfx contentdispositionpathspfx string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths pfx contentdispositionpathspfx assert equals assertequals content disposition paths pfx contentdispositionpathspfx length map string string content types mapping contenttypesmapping map string string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content types mapping contenttypesmapping assert equals assertequals content types mapping contenttypesmapping size test test activator throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string libs content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx string content disposition paths contentdispositionpaths string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths contentdispositionpaths assert equals assertequals content disposition paths contentdispositionpaths size string content disposition paths pfx contentdispositionpathspfx string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths pfx contentdispositionpathspfx assert equals assertequals content disposition paths pfx contentdispositionpathspfx length map string string content types mapping contenttypesmapping map string string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content types mapping contenttypesmapping assert equals assertequals content types mapping contenttypesmapping size test test activator throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx string content disposition paths contentdispositionpaths string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths contentdispositionpaths assert equals assertequals content disposition paths contentdispositionpaths size string content disposition paths pfx contentdispositionpathspfx string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths pfx contentdispositionpathspfx assert equals assertequals content disposition paths pfx contentdispositionpathspfx length map string string content types mapping contenttypesmapping map string string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content types mapping contenttypesmapping assert equals assertequals content types mapping contenttypesmapping size test test activator throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string libs props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx string content disposition paths contentdispositionpaths string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths contentdispositionpaths assert equals assertequals content disposition paths contentdispositionpaths size string content disposition paths pfx contentdispositionpathspfx string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths pfx contentdispositionpathspfx assert equals assertequals content disposition paths pfx contentdispositionpathspfx length map string string content types mapping contenttypesmapping map string string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content types mapping contenttypesmapping assert equals assertequals content types mapping contenttypesmapping size test test activator throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string libs text html text plain content usergenerated image jpeg props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx string content disposition paths contentdispositionpaths string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths contentdispositionpaths assert equals assertequals content disposition paths contentdispositionpaths size string content disposition paths pfx contentdispositionpathspfx string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition paths pfx contentdispositionpathspfx assert equals assertequals content disposition paths pfx contentdispositionpathspfx length map string string content types mapping contenttypesmapping map string string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content types mapping contenttypesmapping assert equals assertequals content types mapping contenttypesmapping size string libs mapping libsmapping content types mapping contenttypesmapping libs assert equals assertequals libs mapping libsmapping size libs mapping libsmapping text html libs mapping libsmapping text plain string user generated mapping usergeneratedmapping content types mapping contenttypesmapping content usergenerated assert equals assertequals user generated mapping usergeneratedmapping size user generated mapping usergeneratedmapping image jpeg test test activator throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string libs text html text plain content usergenerated image jpeg props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx string content disposition excluded paths contentdispositionexcludedpaths string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition excluded paths contentdispositionexcludedpaths assert equals assertequals content disposition excluded paths contentdispositionexcludedpaths size test test activator throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string libs text html text plain content usergenerated image jpeg props sling content disposition excluded paths string content libs context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx string content disposition excluded paths contentdispositionexcludedpaths string private accessor privateaccessor get field getfield content disposition filter contentdispositionfilter content disposition excluded paths contentdispositionexcludedpaths assert equals assertequals content disposition excluded paths contentdispositionexcludedpaths size test test get content types getcontenttypes throwable content types string content type contenttype string content types set contenttypesset string private accessor privateaccessor invoke content disposition filter contentdispositionfilter get content types getcontenttypes string object content type contenttype assert equals assertequals content types set contenttypesset size empty content types content type contenttype content types set contenttypesset string private accessor privateaccessor invoke content disposition filter contentdispositionfilter get content types getcontenttypes string object content type contenttype assert equals assertequals content types set contenttypesset size content type contenttype text html content types set contenttypesset string private accessor privateaccessor invoke content disposition filter contentdispositionfilter get content types getcontenttypes string object content type contenttype assert equals assertequals content types set contenttypesset size content type contenttype text html text plain content types set contenttypesset string private accessor privateaccessor invoke content disposition filter contentdispositionfilter get content types getcontenttypes string object content type contenttype assert equals assertequals content types set contenttypesset size test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue libs allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated author allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue allowing response contains header containsheader content disposition return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue libs allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue allowing response contains header containsheader content disposition return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated author allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue allowing response contains header containsheader content disposition return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated text html text plain props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue libs allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated text html text plain props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated author allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated text html text plain props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated text html text plain props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue allowing response contains header containsheader content disposition return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute image jpeg allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype image jpeg content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype image jpeg assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated text html text plain props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue libs allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated text html text plain props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated author allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated text html text plain props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx context checking expectations allowing request get method getmethod return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated author allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response rewriter response rewriterresponse set content type setcontenttype text html test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated text html text plain props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue allowing response contains header containsheader content disposition return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute image jpeg allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated author allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype image jpeg content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype image jpeg assert equals assertequals counter int value intvalue test repeated set content type setcontenttype calls don add multiple headers reset ting resetting mime type mimetype throwable test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue allowing response contains header containsheader content disposition return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue text html allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test repeated set content type setcontenttype calls don add multiple headers changing mime type throwable test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue response contains header containsheader content disposition return value returnvalue response contains header containsheader content disposition return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue text html allowing request set attribute setattribute rewriter response rewriterresponse attribute text xml allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html allowing response set content type setcontenttype text xml content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html rewriter response rewriterresponse set content type setcontenttype text xml assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string props sling content disposition paths context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue response contains header containsheader content disposition return value returnvalue response contains header containsheader content disposition return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue text html allowing request set attribute setattribute rewriter response rewriterresponse attribute text xml allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html allowing response set content type setcontenttype text xml content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string props sling content disposition paths context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue response contains header containsheader content disposition return value returnvalue response contains header containsheader content disposition return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue text html allowing request set attribute setattribute rewriter response rewriterresponse attribute text xml allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html allowing response set content type setcontenttype text xml content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string content props sling content disposition paths context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue response contains header containsheader content disposition return value returnvalue response contains header containsheader content disposition return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue text html allowing request set attribute setattribute rewriter response rewriterresponse attribute text xml allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html allowing response set content type setcontenttype text xml content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string content props sling content disposition paths context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue response contains header containsheader content disposition return value returnvalue response contains header containsheader content disposition return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue text html allowing request set attribute setattribute rewriter response rewriterresponse attribute text xml allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html allowing response set content type setcontenttype text xml content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string content context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue allowing response contains header containsheader content disposition return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test do filter dofilter throwable sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource resource value map valuemap properties context mock value map valuemap content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter component context componentcontext ctx context mock component context componentcontext dictionary props hashtable string string props sling content disposition paths string content usergenerated props sling content disposition excluded paths string content usergenerated context checking expectations allowing ctx get properties getproperties return value returnvalue props private accessor privateaccessor invoke content disposition filter contentdispositionfilter activate component context componentcontext object ctx atomic integer atomicinteger counter atomic integer atomicinteger context checking expectations allowing request get method getmethod return value returnvalue allowing response contains header containsheader content disposition return value returnvalue allowing request get attribute getattribute rewriter response rewriterresponse attribute return value returnvalue allowing request set attribute setattribute rewriter response rewriterresponse attribute text html allowing request get resource getresource return value returnvalue resource allowing resource get path getpath return value returnvalue content usergenerated allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing response set content type setcontenttype text html content disposition response add header addheader content disposition attachment content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response add header addheader string string counter increment and get incrementandget rewriter response rewriterresponse set content type setcontenttype text html assert equals assertequals counter int value intvalue test test is jcr data isjcrdata throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context checking expectations allowing request get resource getresource return value returnvalue resource content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response result private accessor privateaccessor invoke rewriter response rewriterresponse is jcr data isjcrdata resource object resource assert false assertfalse result test test is jcr data isjcrdata throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource context checking expectations allowing request get resource getresource return value returnvalue resource content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response value map valuemap properties context mock value map valuemap context checking expectations allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue result private accessor privateaccessor invoke rewriter response rewriterresponse is jcr data isjcrdata resource object resource assert true asserttrue result test test is jcr data isjcrdata throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource value map valuemap properties context mock value map valuemap context checking expectations allowing request get resource getresource return value returnvalue resource allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing resource get child getchild jcr content leaf return value returnvalue content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response result private accessor privateaccessor invoke rewriter response rewriterresponse is jcr data isjcrdata resource object resource assert false assertfalse result test test is jcr data isjcrdata throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource child context mock resource child resource resource context mock resource resource value map valuemap properties context mock value map valuemap value map valuemap child propoerties childpropoerties context mock value map valuemap child propoerties childpropoerties context checking expectations allowing request get resource getresource return value returnvalue resource allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing resource get child getchild jcr content leaf return value returnvalue child allowing child adapt to adaptto value map valuemap return value returnvalue child propoerties childpropoerties allowing child propoerties childpropoerties contains key containskey prop jcr data return value returnvalue content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response result private accessor privateaccessor invoke rewriter response rewriterresponse is jcr data isjcrdata resource object resource assert false assertfalse result test test is jcr data isjcrdata throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource child context mock resource child resource resource context mock resource resource value map valuemap properties context mock value map valuemap value map valuemap child propoerties childpropoerties context mock value map valuemap child propoerties childpropoerties context checking expectations allowing request get resource getresource return value returnvalue resource allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing resource get child getchild jcr content leaf return value returnvalue child allowing child adapt to adaptto value map valuemap return value returnvalue child propoerties childpropoerties allowing child propoerties childpropoerties contains key containskey prop jcr data return value returnvalue content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response result private accessor privateaccessor invoke rewriter response rewriterresponse is jcr data isjcrdata resource object resource assert true asserttrue result test test is jcr data isjcrdata throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource resource context mock resource value map valuemap properties context mock value map valuemap context checking expectations allowing request get resource getresource return value returnvalue resource allowing resource adapt to adaptto value map valuemap return value returnvalue allowing resource get child getchild jcr content leaf return value returnvalue content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response result private accessor privateaccessor invoke rewriter response rewriterresponse is jcr data isjcrdata resource object resource assert false assertfalse result test test is jcr data isjcrdata throwable content disposition filter contentdispositionfilter content disposition filter contentdispositionfilter sling http servlet request slinghttpservletrequest request context mock sling http servlet request slinghttpservletrequest sling http servlet response slinghttpservletresponse response context mock sling http servlet response slinghttpservletresponse resource child context mock resource child resource resource context mock resource resource value map valuemap properties context mock value map valuemap value map valuemap child propoerties childpropoerties context mock value map valuemap child propoerties childpropoerties context checking expectations allowing request get resource getresource return value returnvalue resource allowing resource adapt to adaptto value map valuemap return value returnvalue properties allowing properties contains key containskey prop jcr data return value returnvalue allowing resource get child getchild jcr content leaf return value returnvalue child allowing child adapt to adaptto value map valuemap return value returnvalue content disposition filter contentdispositionfilter rewriter response rewriterresponse rewriter response rewriterresponse content disposition filter contentdispositionfilter rewriter response rewriterresponse request response result private accessor privateaccessor invoke rewriter response rewriterresponse is jcr data isjcrdata resource object resource assert false assertfalse result