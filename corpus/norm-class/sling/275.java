licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling test org ops pax exam constants start level system bundles org ops pax exam core options coreoptions bundle org ops pax exam core options coreoptions composite org ops pax exam core options coreoptions maven bundle mavenbundle org ops pax exam core options coreoptions options org ops pax exam core options coreoptions provision org ops pax exam core options coreoptions system property systemproperty org ops pax exam core options coreoptions wrapped bundle wrappedbundle java file java file name filter filenamefilter java net url java net url class loader urlclassloader java util dictionary java util enumeration org ops pax exam option org ops pax exam test probe builder testprobebuilder org ops pax exam junit configuration org ops pax exam junit probe builder probebuilder org ops pax exam options abstract delegate provision option abstractdelegateprovisionoption org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service reference servicereference spi n spin cache container verify working system parts shamelessly borrowed int egration integration test commons class loader classloader abstractosgirunner system property providing bundle file installed tested string bundle jar sys prop project bundle file probe builder probebuilder test probe builder testprobebuilder extend probe extendprobe test probe builder testprobebuilder builder system err println parent builder string imports get imports getimports imports starts with startswith imports imports builder set header setheader constants org osgi framework org apache sling test imports builder set header setheader constants dynamic import dynamicimport org ops pax exam org junit javax inject org ops pax exam options builder set header setheader bundle manifest version manifestversion builder artifact assist determining correct jar load target string get artifact name getartifactname string additional imports builder string get imports getimports option get options getoptions options configuration option configuration string bundle file name bundlefilename get bundle file name getbundlefilename file bundle file bundlefile file bundle file name bundlefilename bundle file bundlefile can read canread illegal argument exception illegalargumentexception read bundle file bundle file name bundlefilename bundle jar sys prop system property options composite get options getoptions provision url resolution pax maven bundle mavenbundle org ops pax url pax url mvn support decl arative declarative services maven bundle mavenbundle org apache felix org apache felix scr bound servlet api maven bundle mavenbundle org apache felix javax servlet bundle maven bundle mavenbundle commons collections commons collections maven bundle mavenbundle commons commons export wrapped bundle wrappedbundle maven bundle mavenbundle org apache sling org apache sling commons cache container test exports abstractosgirunner get package getpackage get name getname add project tested bundle bundle file bundlefile touri to string tostring build server issue directurljunitbundlesoption system property systemproperty pax exam invoke r invoker junit bundle link classpath meta inf links org ops pax exam invoke r invoker junit link string get bundle file name getbundlefilename string bundle file name bundlefilename system get property getproperty bundle jar sys prop bundle file name bundlefilename ide guess jar file target file target string artifact name artifactname get artifact name getartifactname system err println listing files target get absolute path getabsolutepath artifact name artifactname file jars target list files listfiles file name filter filenamefilter accept file dir string ends with endswith jar ends with endswith sources jar starts with startswith artifact name artifactname jars length bundle file name bundlefilename jars get absolute path getabsolutepath bundle file name bundlefilename check get class getclass get class loader getclassloader load class loadclass javax transaction transaction manager transactionmanager system err println loaded class loader classloader get class loader getclassloader class loader classloader get class loader getclassloader url class loader urlclassloader url class loader urlclassloader url class loader urlclassloader url url geturls system err println class load r classloadr url url class not found exception classnotfoundexception runtime exception runtimeexception load bundle turn param bundle context bundlecontext param class name classname find class home findclasshome bundle context bundlecontext bundle context bundlecontext string class name classname system err println bundle bundle context bundlecontext bundle bundle context bundlecontext get bundles getbundles system err println bundle bundle context bundlecontext class name classname load class loadclass class name classname class loader classloader get class loader getclassloader system err println loaded exception list bundles showing services headers param bundle context bundlecontext list bundles listbundles bundle context bundlecontext bundle context bundlecontext system err println bundle bundle context bundlecontext bundle bundle context bundlecontext get bundles getbundles system err println bundle bundle context bundlecontext dictionary string string headers get headers getheaders enumeration string headers has more elements hasmoreelements string key next element nextelement system err println header key headers key service reference servicereference srs get registered services getregisteredservices srs service reference servicereference srs system err println service bundle context bundlecontext code commons class loader classloader dynamic class loader t dynamicclassloaderit clone pax exam junit bundles option junitbundlesoption direct url spring source springsource j unit junit bundle avoid weird repository issues apache build server directurljunitbundlesoption abstract delegate provision option abstractdelegateprovisionoption directurljunitbundlesoption constructor directurljunitbundlesoption bundle http repository springsource ivy bundles external org junit springsource org junit springsource org junit jar no update noupdate start level startlevel start level system bundles inherit doc inheritdoc override string to string tostring string format directurljunitbundlesoption url geturl inherit doc inheritdoc directurljunitbundlesoption