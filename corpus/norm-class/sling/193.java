licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery oak java lang management management factory managementfactory java util collection java util javax management m bean server mbeanserver javax management object name objectname org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations reference org apache felix scr annotations service org apache sling discovery base connectors announcement announcement org apache sling discovery base connectors announcement announcement registry announcementregistry org apache sling api health check healthcheck org apache sling api result org apache sling util formatting result log formattingresultlog org apache sling settings sling settings service slingsettingsservice org slf logger org slf logger factory loggerfactory health check healthcheck builds top document node store documentnodestore determine server time difference millis determineservertimedifferencemillis method checks local time differs document store documentstore time applies high water marks time difference higher high water mark issues critical high water higher water mark issues warn water mark issues info component metatype label apache sling discovery oak clocks sync health check properties property health check healthcheck sling discovery oak clocks in sync c slingdiscoveryoakclocksinsynchc description health check label property health check healthcheck tags unbounded property unbounded propertyunbounded array description health check tags label tags property health check healthcheck mbean sling discovery oak clocks in sync slingdiscoveryoakclocksinsync description health check m bean mbean label m bean mbean service health check healthcheck clocks in sync health check clocksinsynchealthcheck health check healthcheck logger logger logger factory loggerfactory get logger getlogger get class getclass string document node store mbean org apache jackrabbit oak type document node store documentnodestore string time diff method determine server time difference millis determineservertimedifferencemillis intra cluster high water mark intra cluster water mark inter cluster high water mark inter cluster water mark reference announcement registry announcementregistry announcement registry announcementregistry reference sling settings service slingsettingsservice settings service settingsservice override result execute formatting result log formattingresultlog result log resultlog formatting result log formattingresultlog result log resultlog debug checking cluster internal clocks m bean server mbeanserver jmx server jmxserver management factory managementfactory get platform bean server getplatformmbeanserver object name objectname object name objectname document node store mbean object name objectname names jmx server jmxserver query names querynames names size result log resultlog info int ra intra cluster test document node store documentnodestore m bean mbean object name objectname first name firstname names iterator object jmx server jmxserver invoke first name firstname time diff method object string logger debug returns object first name firstname time diff method result log resultlog debug returns first name firstname time diff method diff millis diffmillis math abs diff millis diffmillis intra cluster high water mark logger warn execute clocks local cluster sync equal higher high water mark diff millis diffmillis intra cluster high water mark result log resultlog critical clocks heavily sync local cluster time difference document store documentstore server equal larger high water mark diff millis diffmillis intra cluster high water mark math abs diff millis diffmillis intra cluster water mark logger warn execute clocks local cluster sync equal higher water mark diff millis diffmillis intra cluster water mark result log resultlog warn clocks notice ably noticeably sync local cluster time difference document store documentstore server equal larger water mark diff millis diffmillis intra cluster water mark logger debug execute clocks local cluster sync diff water mark diff millis diffmillis intra cluster water mark result log resultlog info clocks sync local cluster time difference document store documentstore server water mark diff millis diffmillis intra cluster water mark exception logger warn execute jmx method invocation failed object document node store mbean time diff method result log resultlog health check error healthcheckerror jmx method invocation failed document node store mbean time diff method string sling id slingid settings service settingsservice settings service settingsservice get sling id getslingid announcement registry announcementregistry logger warn execute announcement registry announcementregistry announcement registry announcementregistry result log resultlog warn determine topology clocks announcement registry announcementregistry announcement registry announcementregistry collection announcement local announcements localannouncements announcement registry announcementregistry list local announcements listlocalannouncements local announcements localannouncements is empty isempty logger info execute topology connectors connected local instance result log resultlog info topology connectors connected local instance announcement ann local announcements localannouncements string peer sling id peerslingid ann is inherited isinherited ann get server info getserverinfo ann get owner id getownerid originally created at originallycreatedat ann get origin ally created at getoriginallycreatedat received at receivedat ann get received at getreceivedat diff millis diffmillis math abs originally created at originallycreatedat received at receivedat math abs diff millis diffmillis inter cluster high water mark logger warn execute clocks local instance sling id slingid remote instance sling id slingid sync equal higher high water mark object sling id slingid peer sling id peerslingid diff millis diffmillis inter cluster high water mark result log resultlog critical clocks heavily sync local instance sling id slingid remote instance sling id slingid equal larger high water mark object sling id slingid peer sling id peerslingid diff millis diffmillis inter cluster high water mark math abs diff millis diffmillis inter cluster water mark logger warn execute clocks sync local instance sling id slingid remote instance sling id slingid equal higher water mark object sling id slingid peer sling id peerslingid diff millis diffmillis inter cluster high water mark result log resultlog warn clocks notice ably noticeably sync local instance sling id slingid remote instance sling id slingid equal larger water mark object sling id slingid peer sling id peerslingid diff millis diffmillis inter cluster high water mark logger debug execute clocks sync local instance sling id slingid remote instance sling id slingid diff water mark object sling id slingid peer sling id peerslingid diff millis diffmillis inter cluster high water mark result log resultlog info clocks sync local instance sling id slingid remote instance sling id slingid diff water mark object sling id slingid peer sling id peerslingid diff millis diffmillis inter cluster high water mark result result log resultlog