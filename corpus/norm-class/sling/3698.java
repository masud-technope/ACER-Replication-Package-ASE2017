licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery base connectors announcement java util collection java util hash map hashmap java util iterator java util linked list linkedlist java util list java util map java util map entry org apache sling api resource modifiable value map modifiablevaluemap org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling commons json json array jsonarray org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling discovery cluster view clusterview org apache sling discovery instance description instancedescription org apache sling discovery commons providers default cluster view defaultclusterview org apache sling discovery commons providers default instance description defaultinstancedescription org apache sling discovery commons providers non local instance description nonlocalinstancedescription announcement exc hanged exchanged topology connector clusters instances topology connector client servlet joining worlds announcement exc hanged exchanged json format carries timeout announcement protocol version announcement represents mismatching protocol versions detect incompatible topology connectors protocol version sling owner announcement owner announcement string owner id ownerid announcement protocol version protocol version protocolversion local cluster view cluster view clusterview local cluster localcluster incoming instances list announcement incomings linked list linkedlist announcement anno ucement annoucement inherited response connect incoming connect inherited server announcement string server info serverinfo announcement represents loop detected topology connectors loop sling sets backoff interval backoffinterval connector servlets passes client heartbeat interval heartbeatinterval backoff interval backoffinterval sling reset backoff resetbackoff flag client server client start backoff scr atch scratch reset backoff resetbackoff originally created at originallycreatedat received at receivedat system current time millis currenttimemillis announcement string owner id ownerid owner id ownerid protocol version announcement string owner id ownerid protocol version protocolversion owner id ownerid owner id ownerid length illegal argument exception illegalargumentexception owner id ownerid empty owner id ownerid owner id ownerid protocol version protocolversion protocol version protocolversion override string to string tostring string builder stringbuilder incoming list incominglist string builder stringbuilder iterator announcement incomings iterator has next hasnext announcement an incoming announcement anincomingannouncement incoming list incominglist length incoming list incominglist append incoming list incominglist append an incoming announcement anincomingannouncement announcement owner id ownerid get owner id getownerid protocol version protocolversion protocol version protocolversion inherited is inherited isinherited loop loop incomings incoming list incominglist check announcement valid protocol version is correct version iscorrectversion protocol version protocolversion protocol version check valid announcement minimal is valid isvalid owner id ownerid owner id ownerid length loop is correct version iscorrectversion local cluster localcluster list instance description instancedescription instances local cluster localcluster get instances getinstances instances instances size is owner member of local cluster isownermemberoflocalcluster iterator instance description instancedescription instances iterator has next hasnext instance description instancedescription instance description instancedescription instance description instancedescription get sling id getslingid equals owner id ownerid is owner member of local cluster isownermemberoflocalcluster is owner member of local cluster isownermemberoflocalcluster exception ise inherited flag announcement response topology connect set inherited setinherited inherited inherited inherited returns inherited flag announcement response topology connect is inherited isinherited inherited sets loop falg announcement represent loop detected topology connectors set loop setloop loop loop loop sets backoff interval backoffinterval connector servlets passes client heartbeat interval heartbeatinterval set backoff interval setbackoffinterval backoff interval backoffinterval backoff interval backoffinterval backoff interval backoffinterval backoff interval backoffinterval connector servlets passes client heartbeat interval heartbeatinterval get backoff interval getbackoffinterval backoff interval backoffinterval get origin ally created at getoriginallycreatedat originally created at originallycreatedat get received at getreceivedat received at receivedat sets reset backoff resetbackoff flag set reset backoff setresetbackoff reset backoff resetbackoff reset backoff resetbackoff reset backoff resetbackoff reset backoff resetbackoff flag get reset backoff getresetbackoff reset backoff resetbackoff returns loop flag announcement represents loop detected topology connectors is loop isloop loop returns protocol version protocolversion announcement get protocol version getprotocolversion protocol version protocolversion sets server announcement set server info setserverinfo string server info serverinfo server info serverinfo server info serverinfo server announcement string get server info getserverinfo server info serverinfo returns sling id slingid owner announcement owner instance init iated initiated topology connection string get owner id getownerid owner id ownerid convert announcement json object json object jsonobject asjsonobject json exception jsonexception asjsonobject convert announcement json object json object jsonobject asjsonobject filter times filtertimes json exception jsonexception json object jsonobject announcement json object jsonobject announcement owner id ownerid owner id ownerid announcement protocol version protocolversion protocol version protocolversion compatibility filter times filtertimes announcement created system current time millis currenttimemillis announcement inherited inherited loop announcement loop loop server info serverinfo announcement server info serverinfo server info serverinfo local cluster localcluster announcement local cluster view localclusterview asjson local cluster localcluster filter times filtertimes backoff interval backoffinterval announcement backoff interval backoffinterval backoff interval backoffinterval reset backoff resetbackoff announcement reset backoff resetbackoff reset backoff resetbackoff json array jsonarray incoming announcements incomingannouncements json array jsonarray iterator announcement incomings iterator has next hasnext announcement incoming incoming announcements incomingannouncements incoming asjsonobject filter times filtertimes announcement topology announcements topologyannouncements incoming announcements incomingannouncements announcement create announcement form json announcement fromjson string topologyannouncementjson json exception jsonexception json object jsonobject announcement json object jsonobject topologyannouncementjson string owner id ownerid announcement get string getstring owner id ownerid protocol version protocolversion announcement protocol version protocolversion protocol version protocolversion protocol version protocolversion announcement get int getint protocol version protocolversion announcement result announcement owner id ownerid protocol version protocolversion announcement created result originally created at originallycreatedat announcement get long getlong created announcement backoff interval backoffinterval backoff interval backoffinterval announcement get long getlong backoff interval backoffinterval result backoff interval backoffinterval backoff interval backoffinterval announcement reset backoff resetbackoff reset backoff resetbackoff announcement get boolean getboolean reset backoff resetbackoff result reset backoff resetbackoff reset backoff resetbackoff announcement loop announcement get boolean getboolean loop result set loop setloop result string localclusterviewjson announcement get string getstring local cluster view localclusterview cluster view clusterview local cluster view localclusterview as cluster view asclusterview localclusterviewjson json array jsonarray sub announcements subannouncements announcement getjsonarray topology announcements topologyannouncements announcement inherited inherited announcement get boolean getboolean inherited result inherited inherited announcement server info serverinfo string server info serverinfo announcement get string getstring server info serverinfo result server info serverinfo server info serverinfo result set local cluster setlocalcluster local cluster view localclusterview sub announcements subannouncements length string subannouncementjson sub announcements subannouncements get string getstring result add incoming topology announcement addincomingtopologyannouncement fromjson subannouncementjson result create cluster view clusterview json cluster view clusterview as cluster view asclusterview string localclusterviewjson json exception jsonexception json object jsonobject obj json object jsonobject localclusterviewjson default cluster view defaultclusterview cluster view clusterview default cluster view defaultclusterview obj get string getstring json array jsonarray instances obj instancesobj obj getjsonarray instances instances obj instancesobj length json object jsonobject an instance aninstance instances obj instancesobj getjsonobject cluster view clusterview add instance description addinstancedescription as instance asinstance an instance aninstance cluster view clusterview convert cluster view clusterview json json object jsonobject asjson cluster view clusterview cluster view clusterview json exception jsonexception json object jsonobject obj json object jsonobject obj cluster view clusterview get id getid json array jsonarray instances obj instancesobj json array jsonarray list instance description instancedescription instances cluster view clusterview get instances getinstances iterator instance description instancedescription instances iterator has next hasnext instance description instancedescription instance description instancedescription instances obj instancesobj asjson instance description instancedescription obj instances instances obj instancesobj obj create instance description instancedescription json default instance description defaultinstancedescription as instance asinstance json object jsonobject an instance aninstance json exception jsonexception is leader isleader an instance aninstance get boolean getboolean is leader isleader string sling id slingid an instance aninstance get string getstring sling id slingid json object jsonobject properties obj propertiesobj an instance aninstance getjsonobject properties iterator string properties obj propertiesobj map string string properties hash map hashmap string string has next hasnext string key properties key properties obj propertiesobj get string getstring key non local instance description nonlocalinstancedescription instance non local instance description nonlocalinstancedescription is leader isleader sling id slingid properties instance convert instance description json object json object jsonobject asjson instance description instancedescription instance description instancedescription json exception jsonexception json object jsonobject obj json object jsonobject obj sling id slingid instance description instancedescription get sling id getslingid obj is leader isleader instance description instancedescription is leader isleader cluster view clusterview cluster instance description instancedescription get cluster view getclusterview cluster obj cluster cluster get id getid json object jsonobject properties obj propertiesobj json object jsonobject map string string properties map propertiesmap instance description instancedescription get properties getproperties iterator entry string string properties map propertiesmap entry set entryset iterator has next hasnext entry string string entry properties obj propertiesobj entry get key getkey entry get value getvalue obj properties properties obj propertiesobj obj sets local cluster view clusterview set local cluster setlocalcluster cluster view clusterview local cluster localcluster local cluster localcluster local cluster localcluster adds incoming announcement announcement add incoming topology announcement addincomingtopologyannouncement announcement incoming topology announcement incomingtopologyannouncement incomings add incoming topology announcement incomingtopologyannouncement convert announcement json string asjson json exception jsonexception asjsonobject to string tostring key unique announcement string get primary key getprimarykey owner id ownerid returns list instances contained announcement collection instance description instancedescription list instances listinstances collection instance description instancedescription instances linked list linkedlist instance description instancedescription instances add all addall local cluster localcluster get instances getinstances iterator announcement incomings iterator has next hasnext announcement incoming announcement incomingannouncement instances add all addall incoming announcement incomingannouncement list instances listinstances instances per sists persists announcement announcements resource node primary key created persist to persistto resource announcements resource announcementsresource persistence exception persistenceexception json exception jsonexception resource announcement child resource announcementchildresource announcements resource announcementsresource get child getchild get primary key getprimarykey sling int roduce introduce reset ting resetting created time order machine clock independent intro duction introduction sling don t dont store announcement heartbeat dates reset ting resetting unnecessary string announcement json announcementjson asjson announcement child resource announcementchildresource resource resolver resourceresolver resource resolver resourceresolver announcements resource announcementsresource get resource resolver getresourceresolver map string object properties hash map hashmap string object properties topology announcement topologyannouncement announcement json announcementjson resource resolver resourceresolver create announcements resource announcementsresource get primary key getprimarykey properties modifiable value map modifiablevaluemap announcement child map announcementchildmap announcement child resource announcementchildresource adapt to adaptto modifiable value map modifiablevaluemap announcement child map announcementchildmap topology announcement topologyannouncement announcement json announcementjson remove announcements match owner remove inherited removeinherited string owner id ownerid iterator announcement incomings iterator has next hasnext announcement an incoming announcement anincomingannouncement an incoming announcement anincomingannouncement is inherited isinherited an incoming announcement anincomingannouncement get owner id getownerid equals owner id ownerid filter remove compare announcement ignoring created property json object automatically sling wire compatibility backoff interval backoffinterval int roduced introduced sling corresponds to correspondsto announcement announcement json exception jsonexception json object jsonobject my json myjson asjsonobject json object jsonobject other json otherjson announcement asjsonobject my json myjson to string tostring equals other json otherjson to string tostring register ping registerping announcement incoming announcement incomingannouncement originally created at originallycreatedat incoming announcement incomingannouncement originally created at originallycreatedat received at receivedat incoming announcement incomingannouncement received at receivedat