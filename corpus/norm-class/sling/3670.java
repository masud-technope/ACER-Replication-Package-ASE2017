licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling impl java io exception ioexception java input stream inputstream java util array list arraylist java util collections java util enumeration java util hash set hashset java util iterator java util linked hash map linkedhashmap java util linked hash set linkedhashset java util list java util locale java util map java util resource bundle resourcebundle java util org apache jackrabbit commons json json handler jsonhandler org apache jackrabbit commons json json parser jsonparser org apache sling api resource resource org apache sling api resource resource metadata resourcemetadata org apache sling api resource resource resolver resourceresolver org apache sling api resource value map valuemap org slf logger org slf logger factory loggerfactory jcr resource bundle jcrresourcebundle resource bundle resourcebundle logger log logger factory loggerfactory get logger getlogger jcr resource bundle jcrresourcebundle primary type resource type message entry dictionaries string message entry sling message entry messageentry string mixin message sling message string mixin language mix language string prop key sling key string prop sling message string prop base name basename sling base name basename string prop language jcr language string prop mixins jcr mixin types mixintypes string query language roots element mix language jcr language map string object resources locale locale string base name basename string language roots languageroots hash set hashset string jcr resource bundle jcrresourcebundle locale locale string base name basename resource resolver resourceresolver resource resolver resourceresolver locale locale base name basename base name basename log info finding dictionaries base name basename locale base name basename base name basename start system current time millis currenttimemillis resource resolver resourceresolver refresh string roots load potential language roots loadpotentiallanguageroots resource resolver resourceresolver locale base name basename resources load fully loadfully resource resolver resourceresolver roots language roots languageroots system current time millis currenttimemillis log is info enabled isinfoenabled log info finished loading entries base name basename object resources size locale base name basename base name basename start string get language root paths getlanguagerootpaths language roots languageroots override set parent setparent resource bundle resourcebundle parent set parent setparent parent resource bundle resourcebundle get parent getparent parent override locale get locale getlocale locale string get base name getbasename base name basename returns resource resource bundle method java method implement resource bundle resourcebundle key set keyset method resources resource bundle override string handle key set handlekeyset resources key set keyset override enumeration string get keys getkeys enumeration string parent keys parentkeys parent parent get keys getkeys resource bundle enumeration resourcebundleenumeration resources key set keyset parent keys parentkeys override object handle get object handlegetobject string key log is debug enabled isdebugenabled log debug requesting key resource bundle base name basename locale object key base name basename locale resources key fully loads resource bundle storage method adds entries code language roots languageroots strings method called concurrently thread safe param resolver storage access code param roots potential dictionary subtrees code empty resources loaded param language roots languageroots dictionary subtrees processing resources subtrees listed code roots resources code null pointer exception nullpointerexception parameters code suppress warnings suppresswarnings deprecation map string object load fully loadfully resource resolver resourceresolver resolver string roots string language roots languageroots string search path searchpath resolver get search path getsearchpath search path entry list maps dictionaries search path apps dict dict dict apps dict dict libs dict dict dict list list map string object dictionaries by search path dictionariesbysearchpath array list arraylist list map string object search path searchpath length search path searchpath length dictionaries by search path dictionariesbysearchpath add array list arraylist map string object string root roots resource dictionary resource dictionaryresource resolver get resource getresource root dictionary resource dictionaryresource log warn dictionary root search accessible root linked hash map order function ally functionally helpful dictionary debug ging debugging map string object dictionary linked hash map linkedhashmap string object find search path dict belongs search path bucket list list map string object target list targetlist dictionaries by search path dictionariesbysearchpath search path searchpath length search path searchpath length root starts with startswith search path searchpath target list targetlist dictionaries by search path dictionariesbysearchpath target list targetlist add dictionary check type dictionary dictionary resource dictionaryresource get name getname ends with endswith json load json dictionary loadjsondictionary dictionary resource dictionaryresource dictionary load sling message dictionary loadslingmessagedictionary dictionary resource dictionaryresource dictionary dictionary is empty isempty language roots languageroots add root linked hash map order function ally functionally helpful dictionary debug ging debugging map string object result linked hash map linkedhashmap string object result overwrite map string object dict dictionaries by search path dictionariesbysearchpath search path searchpath length result put all putall dict single result strings apps overlay libs search path searchpath length map string object dict dictionaries by search path dictionariesbysearchpath result put all putall dict result load json dictionary loadjsondictionary resource resource map string object target dictionary targetdictionary log info loading json dictionary resource get path getpath str eaming streaming parser don dict memory json parser jsonparser parser json parser jsonparser json handler jsonhandler string key override key string key io exception ioexception key key override string io exception ioexception target dictionary targetdictionary key override object io exception ioexception override end object endobject io exception ioexception override array io exception ioexception override end array endarray io exception ioexception override io exception ioexception override io exception ioexception override io exception ioexception input stream inputstream stream resource adapt to adaptto input stream inputstream stream string encoding utf resource metadata resourcemetadata metadata resource get resource metadata getresourcemetadata metadata get character encoding getcharacterencoding encoding metadata get character encoding getcharacterencoding parser parse stream encoding io exception ioexception log warn parse json dictionary resource get path getpath get message getmessage stream close io exception ioexception ignore log warn json file resource get path getpath depth traversal resource tree scan for sling messages scanforslingmessages resource rsrc map string object target dictionary targetdictionary value map valuemap rsrc adapt to adaptto value map valuemap string prop string string key prop key rsrc get name getname target dictionary targetdictionary key resource rsrc get children getchildren scan for sling messages scanforslingmessages target dictionary targetdictionary load sling message dictionary loadslingmessagedictionary resource dictionary resource dictionaryresource map string object target dictionary targetdictionary log info loading sling message dictionary dictionary resource dictionaryresource get path getpath scan for sling messages scanforslingmessages dictionary resource dictionaryresource target dictionary targetdictionary string load potential language roots loadpotentiallanguageroots resource resolver resourceresolver resource resolver resourceresolver locale locale string base name basename string locale string localestring locale to string tostring string locale string lower localestringlower locale string localestring to lower case tolowercase string localerfc string torfc string locale string localerfc string lower stringlower localerfc string to lower case tolowercase string paths linked hash set linkedhashset string iterator resource bundles resource resolver resourceresolver find resources findresources query language roots xpath bundles has next hasnext resource bundle bundles value map valuemap properties bundle adapt to adaptto value map valuemap string language properties prop language string language language length language equals locale string localestring language equals locale string lower localestringlower language equals localerfc string language equals localerfc string lower stringlower base name basename base name basename equals properties prop base name basename paths add bundle get path getpath collections unmodifiable set unmodifiableset paths nice locale to string tostring output rfc doesn string torfc string locale locale locale to string tostring replace override string to string tostring jcr resource bundle jcrresourcebundle locale locale base name basename base name basename language roots languageroots language roots languageroots parent parent