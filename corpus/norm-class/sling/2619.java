licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide impl vlt serialization java byte array output stream bytearrayoutputstream java file java io exception ioexception java util array list arraylist java util collections java util list java util list iterator listiterator javax jcr credentials javax jcr node javax jcr path not found exception pathnotfoundexception javax jcr repository javax jcr repository exception repositoryexception javax jcr session javax jcr javax jcr value format exception valueformatexception javax jcr node type nodetype node type nodetype org apache jackrabbit vault api aggregate org apache jackrabbit vault api aggregator org apache jackrabbit vault api repository address repositoryaddress org apache jackrabbit vault api vault file vaultfile org apache jackrabbit vault api vault file system vaultfilesystem org apache jackrabbit vault config configuration exception configurationexception org apache jackrabbit vault impl aggregator file aggregator fileaggregator org apache jackrabbit vault impl aggregator generic aggregator genericaggregator org apache jackrabbit vault impl doc view serializer docviewserializer org apache jackrabbit vault util constants org apache jackrabbit vault util jcr constants jcrconstants org apache jackrabbit vault util mime types mimetypes org apache jackrabbit vault util platform name format platformnameformat org apache jackrabbit vault util text org apache sling ide impl vlt activator org apache sling ide impl vlt vault fs locator vaultfslocator org apache sling ide jcr repository utils repositoryutils org apache sling ide serialization serialization data serializationdata org apache sling ide serialization serialization data builder serializationdatabuilder org apache sling ide serialization serialization exception serializationexception org apache sling ide serialization serialization kind serializationkind org apache sling ide serialization serialization kind manager serializationkindmanager org apache sling ide transport resource proxy resourceproxy vlt serialization data builder vltserializationdatabuilder serialization data builder serializationdatabuilder vault fs locator vaultfslocator fs locator fslocator serialization kind manager serializationkindmanager skm org apache sling ide transport repository repo session session vault file system vaultfilesystem init org apache sling ide transport repository repository file content sync root contentsyncroot serialization exception serializationexception repo repository skm serialization kind manager serializationkindmanager skm init repository content sync root contentsyncroot exists illegal argument exception illegalargumentexception content sync root contentsyncroot exist content sync root contentsyncroot repository jcr repo jcrrepo repository utils repositoryutils get repository getrepository repo get repository info getrepositoryinfo credentials credentials repository utils repositoryutils get credentials getcredentials repo get repository info getrepositoryinfo session jcr repo jcrrepo login credentials repository address repositoryaddress add ress address repository utils repositoryutils get repository address getrepositoryaddress repo get repository info getrepositoryinfo fs locator fslocator get file system getfilesystem add ress address content sync root contentsyncroot session org apache sling ide transport repository exception repositoryexception serialization exception serializationexception repository exception repositoryexception serialization exception serializationexception io exception ioexception serialization exception serializationexception configuration exception configurationexception serialization exception serializationexception override destroy session session log out logout override serialization data serializationdata build serialization data buildserializationdata file content sync root contentsyncroot resource proxy resourceproxy resource serialization exception serializationexception list aggregate chain find aggregate chain findaggregatechain resource chain aggregate aggregate chain chain size string file or folder path hint fileorfolderpathhint calculate file or folder path hint calculatefileorfolderpathhint chain string name hint namehint platform name format platformnameformat get platform name getplatformname aggregate get name getname serialization kind serializationkind serialization kind serializationkind get serialization kind getserializationkind aggregate resource get path getpath equals serialization kind serializationkind serialization kind serializationkind metadata partial serialization kind serializationkind serialization kind serializationkind file serialization kind serializationkind serialization kind serializationkind folder name hint namehint constants dot content xml serialization kind serializationkind serialization kind serializationkind metadata full name hint namehint xml activator get default getdefault get plugin logger getpluginlogger trace location path file or folder path hint fileorfolderpathhint resource get path getpath needs dir needsdir aggregate serialization data serializationdata empty file or folder path hint fileorfolderpathhint serialization kind serializationkind doc view serializer docviewserializer doc view serializer docviewserializer aggregate byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream write content writecontent result to byte array tobytearray serialization data serializationdata file or folder path hint fileorfolderpathhint name hint namehint result serialization kind serializationkind repository exception repositoryexception serialization exception serializationexception io exception ioexception serialization exception serializationexception serialization kind serializationkind get serialization kind getserializationkind aggregate aggregate repository exception repositoryexception node type nodetype mixin node types mixinnodetypes aggregate get node getnode get mixin node types getmixinnodetypes list string mixin node type names mixinnodetypenames array list arraylist mixin node types mixinnodetypes length node type nodetype node type nodetype mixin node types mixinnodetypes mixin node type names mixinnodetypenames add node type nodetype get name getname skm get serialization kind getserializationkind aggregate get node getnode get primary node type getprimarynodetype get name getname mixin node type names mixinnodetypenames needs dir needsdir aggregate aggregate repository exception repositoryexception path not found exception pathnotfoundexception value format exception valueformatexception aggregator aggregator get aggregate manager getaggregatemanager get aggregator getaggregator aggregate get node getnode needs dir needsdir aggregator file aggregator fileaggregator needs dir needsdir todo copy pasted file aggregator fileaggregator belong node content aggregate get node getnode content is node type isnodetype jcr constants jcrconstants file content content get node getnode jcr constants jcrconstants jcr content string mime type mimetype content has property hasproperty jcr constants jcrconstants jcr mimetype mime type mimetype content get property getproperty jcr constants jcrconstants jcr mimetype get string getstring repository exception repositoryexception mime type mimetype guess mime type mime type mimetype mime types mimetypes get mime type getmimetype aggregate get node getnode get name getname mime types mimetypes application octet stream needs dir needsdir mime types mimetypes matches aggregate get node getnode get name getname mime type mimetype mime types mimetypes application octet stream needs dir needsdir content has property hasproperty jcr constants jcrconstants jcr mixintypes content get property getproperty jcr constants jcrconstants jcr mixintypes get values getvalues get string getstring equals jcr constants jcrconstants mix lock able lockable needs dir needsdir todo copy pasted generic aggregator genericaggregator aggregator generic aggregator genericaggregator is plain nt folder isplainntfolder aggregate needs dir needsdir needs dir needsdir string calculate file or folder path hint calculatefileorfolderpathhint list aggregate chain repository exception repositoryexception list iterator listiterator aggregate aggs chain list iterator listiterator string builder stringbuilder string builder stringbuilder aggs has next hasnext aggregate cur aggs aggs previous index previousindex append platform name format platformnameformat get platform path getplatformpath cur get path getpath append append platform name format platformnameformat get platform path getplatformpath cur get rel path getrelpath needs dir needsdir cur serialization kind serializationkind serialization kind serializationkind get serialization kind getserializationkind cur serialization kind serializationkind serialization kind serializationkind file append dir aggs has next hasnext serialization kind serializationkind serialization kind serializationkind metadata full delete last index of lastindexof length to string tostring is plain nt folder isplainntfolder aggregate agg repository exception repositoryexception agg get node getnode get primary node type getprimarynodetype get name getname equals folder agg get node getnode get mixin node types getmixinnodetypes length returns aggregates specific resource simplest single element returned chain sign alling signalling aggregate top level leaf aggregates list top aggregates ends leaf param resource resource find aggregate chain list aggregates io exception ioexception repository exception repositoryexception list aggregate find aggregate chain findaggregatechain resource proxy resourceproxy resource io exception ioexception repository exception repositoryexception vault file vaultfile vault file vaultfile get file getfile platform name format platformnameformat get platform path getplatformpath resource get path getpath vault file vaultfile vault file vaultfile get aggregate getaggregate file leaf aggregate vault file vaultfile higher resource path parent higher string parent path parentpath text get relative parent getrelativeparent resource get path getpath parent path parentpath equals vault file vaultfile parent file parentfile get file getfile platform name format platformnameformat get platform path getplatformpath parent path parentpath parent file parentfile aggregate parent aggregate parentaggregate parent file parentfile get aggregate getaggregate array list arraylist aggregate parents array list arraylist parents add parent aggregate parentaggregate list aggregate chain look for aggregate in leaves lookforaggregateinleaves resource parent aggregate parentaggregate parents chain chain parent path parentpath text get relative parent getrelativeparent parent path parentpath collections singleton list singletonlist vault file vaultfile get aggregate getaggregate recursively aggregate matching resource path starting parent aggregate parentaggregate returned chain aggregate resource contained stand aggregate multiple aggregates matching aggregate leaf param resource resource param parent aggregate parentaggregate parent aggregate matches resource param chain chain record int ermediate intermediate aggregates aggregate chain repository exception repositoryexception list aggregate look for aggregate in leaves lookforaggregateinleaves resource proxy resourceproxy resource aggregate parent aggregate parentaggregate list aggregate chain repository exception repositoryexception parent aggregate parentaggregate list aggregate leaves parent aggregate parentaggregate get leaves getleaves leaves aggregate leaf leaves leaf get path getpath equals resource get path getpath chain add leaf chain text is desc end ant isdescendant leaf get path getpath resource get path getpath chain add leaf look for aggregate in leaves lookforaggregateinleaves resource leaf chain set locator setlocator vault fs locator vaultfslocator locator fs locator fslocator locator