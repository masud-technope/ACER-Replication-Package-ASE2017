licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons json sling java util iterator java util linked list linkedlist org apache sling api request recursion too deep exception recursiontoodeepexception org apache sling api resource resource org apache sling api resource resource util resourceutil org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject resource traversor resourcetraversor entry resource resource json object jsonobject json entry resource json object jsonobject resource json count max resources maxresources max recursion levels maxrecursionlevels json object jsonobject start object startobject linked list linkedlist entry current queue currentqueue linked list linkedlist entry next queue nextqueue resource start resource startresource resource traversor resourcetraversor levels max resources maxresources resource resource tidy json exception jsonexception max resources maxresources max resources maxresources max recursion levels maxrecursionlevels levels start resource startresource resource current queue currentqueue linked list linkedlist entry next queue nextqueue linked list linkedlist entry start object startobject adapt resource recursive descent start resource startresource collecting json objects jsonobjects start object startobject recursion too deep exception recursiontoodeepexception maximum number nodes reached deep traversal deep level greater fine positive value w valuew resource child nodes allowed json exception jsonexception collect resources collectresources recursion too deep exception recursiontoodeepexception json exception jsonexception collect children collectchildren start resource startresource start object startobject param resource param current level currentlevel json exception jsonexception collect children collectchildren resource resource json object jsonobject json obj jsonobj current level currentlevel json exception jsonexception max recursion levels maxrecursionlevels current level currentlevel max recursion levels maxrecursionlevels iterator resource children resource util resourceutil list children listchildren resource children has next hasnext count resource res children dos limitation deeper traversals count max resources maxresources max recursion levels maxrecursionlevels current level currentlevel json object jsonobject json collect resource collectresource res json obj jsonobj next queue nextqueue add last addlast entry res json current queue currentqueue is empty isempty next queue nextqueue is empty isempty current queue currentqueue is empty isempty current level currentlevel current queue currentqueue next queue nextqueue next queue nextqueue linked list linkedlist entry entry next resource nextresource current queue currentqueue remove first removefirst max level maxlevel collect children collectchildren next resource nextresource resource next resource nextresource json current level currentlevel max level maxlevel max level maxlevel adds resource json tree param resource resource add param level level resource located json exception jsonexception json object jsonobject collect resource collectresource resource resource json object jsonobject parent json exception jsonexception json object jsonobject adapt resource parent resource util resourceutil get name getname resource adapt resource json object param resource resource adapt json representation resource json exception jsonexception json object jsonobject adapt resource resource json exception jsonexception json object creator jsonobjectcreator create resource number resources visitor get count getcount count json object jsonobject getjsonobject start object startobject