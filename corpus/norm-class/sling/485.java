licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal org apache jackrabbit oak spi whiteboard whiteboard utils whiteboardutils register observer registerobserver org mockito matchers org mockito matchers any map anymap org mockito matchers any string anystring org mockito mockito mock org mockito mockito java util dictionary java util concurrent executor service executorservice java util concurrent executors javax jcr repository javax jcr session org apache jackrabbit oak oak org apache jackrabbit oak jcr jcr org apache jackrabbit oak plugins segment segment node store segmentnodestore org apache jackrabbit oak spi commit observer org apache jackrabbit oak spi whiteboard whiteboard org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling commons testing jcr repository util repositoryutil repository wrapper repositorywrapper org apache sling jcr api sling repository slingrepository org apache sling jcr resource internal helper jcr jcr test node resource jcrtestnoderesource org junit org junit org mockito invocation invocation on mock invocationonmock org mockito stub bin g stubbing answer org osgi framework bundle context bundlecontext org osgi framework service registration serviceregistration org osgi service event event org osgi service event event admin eventadmin org osgi util tracker service tracker servicetracker test oak resource listener oakresourcelistener oak resource listener test oakresourcelistenertest abstract listener test abstractlistenertest session session sync hronous oak resource listener synchronousoakresourcelistener listener executor service executorservice executor whiteboard whiteboard sling repository slingrepository sling repository slingrepository set up setup exception executor executors new single thread executor newsinglethreadexecutor oak oak oak segment node store segmentnodestore whiteboard oak get whiteboard getwhiteboard repository repository jcr oak create repository createrepository sling repository slingrepository repository wrapper repositorywrapper repository session sling repository slingrepository login administrative loginadministrative resource resolver resourceresolver resolver mock resource resolver resourceresolver resolver adapt to adaptto then return thenreturn session resolver get resource getresource any string anystring then return thenreturn jcr test node resource jcrtestnoderesource resolver session get node getnode resource resolver factory resourceresolverfactory factory mock resource resolver factory resourceresolverfactory factory get administrative resource resolver getadministrativeresourceresolver any map anymap then return thenreturn resolver event admin eventadmin mockea event admin eventadmin post event postevent event event add event addevent event send event sendevent event event add event addevent event service tracker servicetracker tracker mock service tracker servicetracker tracker get service getservice then return thenreturn mockea bundle context bundlecontext bundle context bundlecontext mock bundle context bundlecontext bundle context bundlecontext create filter createfilter string then return thenreturn bundle context bundlecontext get service reference getservicereference string then return thenreturn bundle context bundlecontext get service getservice then return thenreturn mockea bundle context bundlecontext register service registerservice string object dictionary then answer thenanswer answer service registration serviceregistration service registration serviceregistration answer invocation on mock invocationonmock invocation throwable object arguments invocation get arguments getarguments register observer registerobserver whiteboard observer arguments mock service registration serviceregistration listener sync hronous oak resource listener synchronousoakresourcelistener sling repository slingrepository bundle context bundlecontext resolver tracker executor tear down teardown exception listener dispose session log out logout executor shutdown override sling repository slingrepository get repository getrepository sling repository slingrepository