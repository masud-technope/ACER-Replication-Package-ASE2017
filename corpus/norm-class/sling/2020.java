licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery commons providers spi base org slf logger org slf logger factory loggerfactory base concept background check backgroundcheck thread periodically executes check succeeds abstract service with background check abstractservicewithbackgroundcheck logger logger logger factory loggerfactory get logger getlogger get class getclass string sling id slingid background check runnable backgroundcheckrunnable details calling background check backgroundcheck check looping returns background check runnable backgroundcheckrunnable runnable runnable callback background check backgroundcheck check timeout millis timeoutmillis cancelled string thread name threadname testing object wait obj waitobj object wait cnt waitcnt wait interval waitinterval background check runnable backgroundcheckrunnable runnable callback background check backgroundcheck check timeout millis timeoutmillis wait interval waitinterval string thread name threadname callback callback check check timeout millis timeoutmillis timeout millis timeoutmillis wait interval waitinterval illegal argument exception illegalargumentexception wait interval waitinterval greater wait interval waitinterval wait interval waitinterval wait interval waitinterval thread name threadname thread name threadname is done isdone wait obj waitobj override logger debug background check backgroundcheck start start system current time millis currenttimemillis cancelled check check callback callback timeout millis timeoutmillis system current time millis currenttimemillis start timeout millis timeoutmillis callback logger info background check backgroundcheck timeout hit callback invoke logger info background check backgroundcheck timeout hit invoking callback callback logger trace background check backgroundcheck waiting wait obj waitobj wait cnt waitcnt wait obj waitobj notify wait obj waitobj wait wait interval waitinterval interrupted exception interruptedexception logger debug background check backgroundcheck int errupted interrupted logger debug background check backgroundcheck cancelled check runtime exception runtimeexception logger error background check backgroundcheck runtime exception runtimeexception callback logger info background check backgroundcheck runtime exception runtimeexception invoking callback callback error logger error background check backgroundcheck error logger info background check backgroundcheck invoking callback logger debug background check backgroundcheck wait obj waitobj wait obj waitobj notify cancelled cancelled cancel logger info cancel thread name threadname cancelled trigger check triggercheck wait obj waitobj wait cnt at start waitcntatstart wait cnt waitcnt wait obj waitobj notify wait cnt waitcnt wait cnt at start waitcntatstart wait obj waitobj wait interrupted exception interruptedexception runtime exception runtimeexception int errupted interrupted background check backgroundcheck periodically checked event ually eventually returns background check backgroundcheck check background check runnable backgroundcheckrunnable background check runnable backgroundcheckrunnable cancel ongoing background check ongoing cancel previous background check cancelpreviousbackgroundcheck background check runnable backgroundcheckrunnable current background check runnable backgroundcheckrunnable current current cancel leave background check runnable backgroundcheckrunnable field represent memory leak problem invoke cancel multiple times properly sync hronizing synchronizing setting background check runnable backgroundcheckrunnable error pro ne prone over kill overkill start background check backgroundcheck separate thread periodically calls background check backgroundcheck check completion calls callback param thread name threadname thread identifying thread param check background check backgroundcheck periodically invoke check param callback runnable invoke successful check param timeout millis timeoutmillis timeout point background check backgroundcheck terminated callback invoked note unnoticed moment feedback background check term ianted termianted callback invoked timeout hit left todo needed start background check startbackgroundcheck string thread name threadname background check backgroundcheck check runnable callback timeout millis timeoutmillis wait millis waitmillis cancel current running cancel previous background check cancelpreviousbackgroundcheck check check callback logger info background check backgroundcheck background check backgroundcheck successful invoking callback callback logger info background check backgroundcheck background check backgroundcheck successful callback invoke logger info background check backgroundcheck spawning background thread thread name threadname background check runnable backgroundcheckrunnable background check runnable backgroundcheckrunnable callback check timeout millis timeoutmillis wait millis waitmillis thread name threadname thread thread background check runnable backgroundcheckrunnable set name setname thread name threadname set daemon setdaemon start testing trigger background check triggerbackgroundcheck background check runnable backgroundcheckrunnable background op backgroundop background check runnable backgroundcheckrunnable background op backgroundop background op backgroundop trigger check triggercheck