licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr prefs impl java util array list arraylist java util iterator java util list java util map javax jcr name space exception namespaceexception javax jcr node javax jcr node iterator nodeiterator javax jcr property javax jcr property iterator propertyiterator javax jcr repository exception repositoryexception javax jcr session org apache felix prefs backing store backingstore org apache felix prefs backing store manager backingstoremanager org apache felix prefs preferences description preferencesdescription org apache felix prefs preferences impl preferencesimpl org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations reference org apache felix scr annotations service org apache sling jcr api sling repository slingrepository org osgi service component component context componentcontext org osgi service prefs backing store exception backingstoreexception component service backing store backingstore properties org apache felix scr annotations property sling preferences jcr path preferences org apache felix scr annotations property sling preferences jcr namespace http osgi org service prefs preferences org apache felix scr annotations property sling preferences jcr prefix osgi pref osgipref jcr backing store jcrbackingstore backing store backingstore string uri http osgi org service prefs preferences string path property sling preferences jcr path string name space namespace property sling preferences jcr namespace string name space namespace prefix property sling preferences jcr prefix reference sling repository slingrepository repository initialized string root node path rootnodepath preferences string namespace prefix namespaceprefix osgi pref osgipref string namespace prefix sep namespaceprefixsep namespace prefix namespaceprefix string namespace uri session get session getsession repository exception repositoryexception repository login administrative loginadministrative activate component property configuration param component context componentcontext activate component context componentcontext component context componentcontext object component context componentcontext get properties getproperties path property root node path rootnodepath to string tostring component context componentcontext get properties getproperties name space namespace property namespace to string tostring component context componentcontext get properties getproperties name space namespace prefix property namespace prefix namespaceprefix to string tostring namespace prefix sep namespaceprefixsep namespace prefix namespaceprefix check repository initialized fresh user session method called service method session check initialized checkinitialized initialized init repository initrepository repository login administrative loginadministrative repository exception repositoryexception runtime exception runtimeexception unable login create session create node path createnodepath node parent string rel path relpath repository exception repositoryexception pos rel path relpath index of indexof string node name nodename pos rel path relpath rel path relpath substring pos parent has node hasnode node name nodename parent add node addnode node name nodename unstructured pos create node path createnodepath parent get node getnode node name nodename rel path relpath substring pos initialize repository register component event listener create root node init repository initrepository initialized session session session repository login administrative loginadministrative session item exists itemexists root node path rootnodepath create node path createnodepath session get root node getrootnode root node path rootnodepath substring session save string prefix session get workspace getworkspace get name space registry getnamespaceregistry get prefix getprefix namespace namespace prefix namespaceprefix prefix namespace prefix sep namespaceprefixsep prefix name space exception namespaceexception session get workspace getworkspace get name space registry getnamespaceregistry register name space registernamespace namespace prefix namespaceprefix namespace repository exception repositoryexception runtime exception runtimeexception unable root node create root node session session logout initialized node path preferences tree param desc string get node path getnodepath preferences impl preferencesimpl prefs preferences description preferencesdescription desc prefs get description getdescription string builder stringbuilder buffer string builder stringbuilder root node path rootnodepath buffer append buffer append desc get bundle id getbundleid buffer append desc get identifier getidentifier buffer append users buffer append buffer append desc get identifier getidentifier buffer append system buffer append buffer append preferences string abs path abspath prefs absolute path absolutepath abs path abspath length buffer append abs path abspath buffer to string tostring node path preferences tree param desc string get node path getnodepath preferences description preferencesdescription desc string builder stringbuilder buffer string builder stringbuilder root node path rootnodepath buffer append buffer append desc get bundle id getbundleid buffer append desc get identifier getidentifier buffer append users buffer append buffer append desc get identifier getidentifier buffer append system buffer append buffer append preferences buffer to string tostring load preferences node suppress warnings suppresswarnings unchecked read preferences readpreferences preferences impl preferencesimpl prefs session session node node repository exception repositoryexception property iterator propertyiterator iterator node get properties getproperties iterator has next hasnext property prop iterator next property nextproperty prop get name getname starts with startswith namespace prefix sep namespaceprefixsep prefs get properties getproperties prop get name getname prop get string getstring save preferences node suppress warnings suppresswarnings unchecked write preferences writepreferences preferences impl preferencesimpl prefs session session repository exception repositoryexception string path get node path getnodepath prefs session item exists itemexists path create node path createnodepath session get root node getrootnode path substring node node node session get item getitem path process change map properties prefs get properties getproperties iterator string remove properties prefs get change set getchangeset get removed properties getremovedproperties iterator has next hasnext string node has property hasproperty namespace prefix sep namespaceprefixsep node get property getproperty namespace prefix sep namespaceprefixsep remove update properties prefs get change set getchangeset get changed properties getchangedproperties iterator has next hasnext string node set property setproperty namespace prefix sep namespaceprefixsep string properties remove children prefs get change set getchangeset get removed children getremovedchildren iterator has next hasnext string node has node hasnode node get node getnode remove adding children writing child preferences session save read preferences repository read tree readtree preferences impl preferencesimpl prefs session session node node repository exception repositoryexception read preferences readpreferences prefs session node node iterator nodeiterator iterator node get nodes getnodes iterator has next hasnext node current iterator next node nextnode preferences impl preferencesimpl impl preferences impl preferencesimpl prefs node current get name getname read tree readtree impl session current org apache felix prefs backing store backingstore available bundles availablebundles available bundles availablebundles session session check initialized checkinitialized result list bundle ids bundleids array list arraylist node iterator nodeiterator iterator session get root node getrootnode get nodes getnodes root node path rootnodepath iterator has next hasnext node current iterator next node nextnode value of valueof current get name getname bundle ids bundleids add number format exception numberformatexception nfe result bundle ids bundleids to array toarray bundle ids bundleids size repository exception repositoryexception session logout result org apache felix prefs backing store backingstore load org apache felix prefs backing store manager backingstoremanager org apache felix prefs preferences description preferencesdescription preferences impl preferencesimpl load backing store manager backingstoremanager manager preferences description preferencesdescription desc backing store exception backingstoreexception session session check initialized checkinitialized string path get node path getnodepath desc session item exists itemexists path preferences impl preferencesimpl root preferences impl preferencesimpl desc manager read tree readtree root session node session get item getitem path root repository exception repositoryexception backing store exception backingstoreexception unable load preferences session logout org apache felix prefs backing store backingstore load all loadall org apache felix prefs backing store manager backingstoremanager java lang preferences impl preferencesimpl load all loadall backing store manager backingstoremanager manager bundle id bundleid backing store exception backingstoreexception session session check initialized checkinitialized list preferences impl preferencesimpl list array list arraylist preferences impl preferencesimpl check system preferences preferences description preferencesdescription system desc systemdesc preferences description preferencesdescription bundle id bundleid string system path systempath get node path getnodepath system desc systemdesc session item exists itemexists system path systempath node root node rootnode node session get item getitem system path systempath preferences impl preferencesimpl root preferences impl preferencesimpl system desc systemdesc manager read tree readtree root session root node rootnode user preferences string user path userpath root node path rootnodepath bundle id bundleid users session item exists itemexists user path userpath node iterator nodeiterator iterator node session get item getitem user path userpath get nodes getnodes iterator has next hasnext node current iterator next node nextnode preferences description preferencesdescription desc preferences description preferencesdescription bundle id bundleid current get name getname preferences impl preferencesimpl root preferences impl preferencesimpl desc manager read tree readtree root session current list add root list to array toarray preferences impl preferencesimpl list size repository exception repositoryexception backing store exception backingstoreexception unable load preferences session logout org apache felix prefs backing store backingstore remove java lang remove bundle id bundleid backing store exception backingstoreexception session session check initialized checkinitialized string node path nodepath root node path rootnodepath bundle id bundleid session item exists itemexists node path nodepath node node node session get node getnode node path nodepath node parent node get parent getparent node remove parent save repository exception repositoryexception backing store exception backingstoreexception unable remove preferences session logout org apache felix prefs backing store backingstore store org apache felix prefs preferences impl preferencesimpl store preferences impl preferencesimpl prefs backing store exception backingstoreexception session session check initialized checkinitialized store prefs session repository exception repositoryexception backing store exception backingstoreexception unable store preferences session logout store preferences impl preferencesimpl prefs session session backing store exception backingstoreexception repository exception repositoryexception store prefs get change set getchangeset has changes haschanges load existing data preferences impl preferencesimpl saved data saveddata load prefs get backing store manager getbackingstoremanager prefs get description getdescription saved data saveddata merge saved version preferences impl preferencesimpl saved data saveddata get or create node getorcreatenode prefs absolute path absolutepath apply changes applychanges prefs prefs write preferences writepreferences prefs session process children suppress warnings suppresswarnings unchecked iterator preferences impl preferencesimpl prefs get children getchildren iterator has next hasnext preferences impl preferencesimpl store session org apache felix prefs backing store backingstore update org apache felix prefs preferences impl preferencesimpl update preferences impl preferencesimpl prefs backing store exception backingstoreexception preferences impl preferencesimpl root load prefs get backing store manager getbackingstoremanager prefs get description getdescription root update root node exists nodeexists prefs absolute path absolutepath preferences impl preferencesimpl updated preferences impl preferencesimpl root node prefs absolute path absolutepath prefs update updated