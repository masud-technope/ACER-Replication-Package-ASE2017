licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons fsclassloader impl java file java file input stream fileinputstream java file not found exception filenotfoundexception java file output stream fileoutputstream java i o exception ioexception java input stream inputstream java output stream outputstream java net malformedurlexception java net url java util array list arraylist java util list org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations service org apache sling commons class loader classloader class loader writer classloaderwriter org apache sling commons class loader classloader dynamic class loader manager dynamicclassloadermanager org osgi framework bundle org osgi framework constants org osgi framework service reference servicereference org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory code fs class loader provider fsclassloaderprovider code dynamic loader provider file system store read files component service class loader writer classloaderwriter service factory servicefactory property constants service ranking int value intvalue fs class loader provider fsclassloaderprovider class loader writer classloaderwriter file root file root file root url url rooturl current loader fs dynamic class loader fsdynamicclassloader loader logger logger logger factory loggerfactory get logger getlogger get class getclass reference reference interface referenceinterface dynamic class loader manager dynamicclassloadermanager bind bind dynamic class loader manager binddynamicclassloadermanager unbind unbind dynamic class loader manager unbinddynamicclassloadermanager service reference servicereference dynamic class loader manager dynamicclassloadermanager bundle service instance bundle caller bundle callerbundle activate component create root directory param component context componentcontext malformedurlexception activate activate component context componentcontext component context componentcontext malformedurlexception file root root file component context componentcontext get bundle context getbundlecontext get data file getdatafile classes root mkdirs rooturl root touri tourl caller bundle callerbundle component context componentcontext get using bundle getusingbundle deactivate component create root directory deactivate deactivate root rooturl destroy class loader destroyclassloader called handle binding dynamic class loader manager dynamicclassloadermanager service reference suppress warnings suppresswarnings unused bind dynamic class loader manager binddynamicclassloadermanager service reference servicereference dynamic class loader manager dynamicclassloadermanager called handle unbinding dynamic class loader manager dynamicclassloadermanager service reference suppress warnings suppresswarnings unused unbind dynamic class loader manager unbinddynamicclassloadermanager service reference servicereference dynamic class loader manager dynamicclassloadermanager dynamic class loader manager dynamicclassloadermanager destroy class loader destroyclassloader class loader classloader rcl loader rcl loader service reference servicereference local dynamic class loader manager localdynamicclassloadermanager dynamic class loader manager dynamicclassloadermanager bundle local caller bundle localcallerbundle caller bundle callerbundle local dynamic class loader manager localdynamicclassloadermanager local caller bundle localcallerbundle local caller bundle localcallerbundle get bundle context getbundlecontext unget service ungetservice local dynamic class loader manager localdynamicclassloadermanager org apache sling commons class loader classloader class loader writer classloaderwriter get class loader getclassloader class loader classloader get class loader getclassloader loader loader is live islive destroy class loader destroyclassloader dynamic loader bundle loader writer dynamic class loader manager dynamicclassloadermanager dclm dynamic class loader manager dynamicclassloadermanager caller bundle callerbundle get bundle context getbundlecontext get service getservice dynamic class loader manager dynamicclassloadermanager loader fs dynamic class loader fsdynamicclassloader url rooturl dclm get dynamic class loader getdynamicclassloader loader check class loader checkclassloader string file path filepath file path filepath ends with endswith remove store directory string path file path filepath substring root get absolute path getabsolutepath length file path filepath length convert string class name classname path replace file separator char separatorchar fs dynamic class loader fsdynamicclassloader current loader currentloader loader current loader currentloader current loader currentloader check class name classname scr int egration integration delete recursive deleterecursive file list string names is directory isdirectory file list files listfiles delete recursive deleterecursive names names add get absolute path getabsolutepath delete org apache sling commons class loader classloader class loader writer classloaderwriter delete java lang string delete string string path clean path cleanpath file file file path file exists list string names array list arraylist string result delete recursive deleterecursive file names logger debug deleted result result string names check class loader checkclassloader result file exist org apache sling commons class loader classloader class loader writer classloaderwriter get output stream getoutputstream java lang string output stream outputstream get output stream getoutputstream string logger debug stream string path clean path cleanpath file file file path file parent dir parentdir file get parent file getparentfile parent dir parentdir exists parent dir parentdir mkdirs file exists check class loader checkclassloader path file output stream fileoutputstream path file not found exception filenotfoundexception runtime exception runtimeexception org apache sling commons class loader classloader class loader writer classloaderwriter rename java lang string java lang string rename string old name oldname string new name newname logger debug rename old name oldname new name newname string old path oldpath clean path cleanpath old name oldname string new path newpath clean path cleanpath new name newname file file old path oldpath result rename to renameto file new path newpath result check class loader checkclassloader old path oldpath check class loader checkclassloader new path newpath result clean path converting slashes correct format pref ixing prefixing root directory param path path file path string clean path cleanpath string path replace back slash backslash slash path path replace path ends with endswith path path substring path length file separator char separatorchar path path replace file separator char separatorchar root get absolute path getabsolutepath path input stream inputstream get input stream getinputstream string i o exception ioexception logger debug input stream string path clean path cleanpath file file file path file input stream fileinputstream file get last modified getlastmodified string logger debug modified string path clean path cleanpath file file file path file exists file last modified lastmodified