licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp jasper compiler java util javax servlet jsp tagext function info functioninfo org apache sling scripting jsp jasper jasper exception jasperexception el function mapper elfunctionmapper curr func currfunc codes initialize functions map pers mappers string buffer stringbuffer declarations functions map pers mappers string buffer stringbuffer creates functions map pers mappers expressions jsp param compiler current compiler accessing error dispatcher param current compilation unit map compiler compiler node nodes jasper exception jasperexception el function mapper elfunctionmapper map el function mapper elfunctionmapper map string buffer stringbuffer map string buffer stringbuffer visit map el function visitor elfunctionvisitor append declarations root node string map to string tostring length node root get root getroot node declaration map to string tostring root node declaration root visitor places allowed scanned functions functions map pers mappers created el function visitor elfunctionvisitor node visitor global map facilitate reuse function maps key prefix function uri hash map hashmap string string g map gmap hash map hashmap string string visit node param action paramaction jasper exception jasperexception do map domap get value getvalue visit body visitbody visit node include action includeaction jasper exception jasperexception do map domap get page getpage visit body visitbody visit node for ward action forwardaction jasper exception jasperexception do map domap get page getpage visit body visitbody visit node set property setproperty jasper exception jasperexception do map domap get value getvalue visit body visitbody visit node use bean usebean jasper exception jasperexception do map domap get bean name getbeanname visit body visitbody visit node plug in plugin jasper exception jasperexception do map domap get height getheight do map domap get width getwidth visit body visitbody visit node jsp element jspelement jasper exception jasperexception node jsp attribute jspattribute attrs get jsp attributes getjspattributes attrs attrs length do map domap attrs do map domap get name attribute getnameattribute visit body visitbody visit node uninterpreted tag uninterpretedtag jasper exception jasperexception node jsp attribute jspattribute attrs get jsp attributes getjspattributes attrs attrs length do map domap attrs visit body visitbody visit node custom tag customtag jasper exception jasperexception node jsp attribute jspattribute attrs get jsp attributes getjspattributes attrs attrs length do map domap attrs visit body visitbody visit node el expression elexpression jasper exception jasperexception do map domap getel do map domap node jsp attribute jspattribute attr jasper exception jasperexception attr do map domap attr getel creates function map pers mappers needed el nodes elnodes do map domap el node elnode nodes jasper exception jasperexception care functions el node elnode fvisitor el node elnode visitor array list arraylist el node elnode function funcs array list arraylist el node elnode function hash map hashmap string string key map keymap hash map hashmap string string visit el node elnode function jasper exception jasperexception string key get prefix getprefix get name getname key map keymap contains key containskey key key map keymap key funcs add locate unique functions fvisitor fvisitor visit array list arraylist functions funcs functions size reuse previous map string dec name decname match map matchmap functions dec name decname set map name setmapname dec name decname generate declaration map static ally statically dec name decname get map name getmapname append org apache sling scripting jsp jasper runtime protected function mapper protectedfunctionmapper dec name decname append dec name decname append org apache sling scripting jsp jasper runtime protected function mapper protectedfunctionmapper special function map string func method funcmethod functions size func method funcmethod get map for function getmapforfunction append get instance getinstance func method funcmethod dec name decname map function mapfunction setup arguments get map for function getmapforfunction map function mapfunction functions size el node elnode function el node elnode function functions function info functioninfo func info funcinfo get function info getfunctioninfo string key get prefix getprefix get name getname append func method funcmethod key func info funcinfo get function class getfunctionclass get method name getmethodname string params get parameters getparameters params length append i array iarray params index of indexof i array iarray append params string base type basetype params substring i array iarray append java lang reflect array new instance newinstance append base type basetype append count number array dimension a count acount i array iarray params length params char at charat a count acount a count acount append get class getclass append a count acount get class getclass append current global function map g map gmap get prefix getprefix get name getname get uri geturi dec name decname set map name setmapname dec name decname find function mapper reuse generated param functions array list arraylist el node elnode function instances represents functions previous generated function mapper string match map matchmap array list arraylist functions string map name mapname functions size el node elnode function el node elnode function functions string tem name temname string g map gmap get prefix getprefix get name getname get uri geturi tem name temname map name mapname map name mapname tem name temname tem name temname equals map name mapname previous match match map name mapname unique function mapper string get map name getmapname jspx fnmap curr func currfunc