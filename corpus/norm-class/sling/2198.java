licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide test impl helpers java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java input stream inputstream java util array list arraylist java util hash set hashset java util list java util map java util java util jar manifest org apache commons io utils ioutils org apache maven artifact artifact org eclipse core resources i container icontainer org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core resources i project description iprojectdescription org eclipse core resources i resource iresource org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime path org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java project ijavaproject org eclipse jdt core java core javacore org eclipse jdt launching java runtime javaruntime org eclipse core maven plugin mavenplugin org eclipse wst common project facet core i face ted project ifacetedproject org eclipse wst common project facet core i project facet iprojectfacet org eclipse wst common project facet core i project facet version iprojectfacetversion org eclipse wst common project facet core project facets manager projectfacetsmanager project adapter projectadapter adapts eclipse project resource api s apis simple r simpler testing purposes project adapter projectadapter i project iproject project i java project ijavaproject java project javaproject project adapter projectadapter i project iproject project project project add natures addnatures string natures to add naturestoadd core exception coreexception i project description iprojectdescription desc project get description getdescription string natures desc get nature ids getnatureids string new natures newnatures string natures length natures to add naturestoadd length system arraycopy natures new natures newnatures natures length natures to add naturestoadd length new natures newnatures natures length natures to add naturestoadd desc set nature ids setnatureids new natures newnatures project set description setdescription desc null progress monitor nullprogressmonitor configure as java project configureasjavaproject maven dependency mavendependency dependencies core exception coreexception dependency required artifacts list artifact resolved artifacts resolvedartifacts array list arraylist dependencies length maven dependency mavendependency dependencies resolved artifacts resolvedartifacts add maven plugin mavenplugin get maven getmaven resolve get group id getgroupid get artifact id getartifactid get version getversion jar maven plugin mavenplugin get maven getmaven get artifact repositories getartifactrepositories null progress monitor nullprogressmonitor create java project java project javaproject java core javacore create project i classpath entry iclasspathentry entries hash set hashset entries add java runtime javaruntime getdefaultjrecontainerentry artifact artifact resolved artifacts resolvedartifacts entries add java core javacore new library entry newlibraryentry path fromosstring artifact get file getfile get absolute path getabsolutepath i folder ifolder src project get folder getfolder src src create null progress monitor nullprogressmonitor entries add java core javacore new source entry newsourceentry src get full path getfullpath java project javaproject set raw classpath setrawclasspath entries to array toarray i classpath entry iclasspathentry entries size null progress monitor nullprogressmonitor i folder ifolder bin project get folder getfolder bin bin exists todo exists bin create null progress monitor nullprogressmonitor java project javaproject set output location setoutputlocation bin get full path getfullpath null progress monitor nullprogressmonitor creates updates existing file param file location filelocation path resource created updated param contents contents write file stream closed core exception coreexception create or update file createorupdatefile i path ipath file location filelocation input stream inputstream contents core exception coreexception contents illegal argument exception illegalargumentexception resource as stream resourceasstream i container icontainer holder ensure directory exists ensuredirectoryexists file location filelocation remove last segments removelastsegments i path ipath file name filename path from portable string fromportablestring file location filelocation last segment lastsegment i file ifile file holder get file getfile file name filename file exists file set contents setcontents contents null progress monitor nullprogressmonitor file create contents null progress monitor nullprogressmonitor io utils ioutils close quietly closequietly contents ensures directory exists param path path directory exist created existing directory core exception coreexception i container icontainer ensure directory exists ensuredirectoryexists i path ipath path core exception coreexception i container icontainer current project path segment count segmentcount string current segment currentsegment path segment i resource iresource container current find member findmember current segment currentsegment container container get type gettype i container icontainer folder illegal argument exception illegalargumentexception resource container exists folder unable create file path path current i container icontainer container i folder ifolder new folder newfolder i container icontainer current get folder getfolder path from portable string fromportablestring current segment currentsegment new folder newfolder create null progress monitor nullprogressmonitor current new folder newfolder current create vlt filter with roots createvltfilterwithroots string roots core exception coreexception string builder stringbuilder builder string builder stringbuilder builder append workspace filter workspacefilter vesion string root roots builder append filter root append root append builder append workspace filter workspacefilter create or update file createorupdatefile path from portable string fromportablestring meta inf vault filter xml byte array input stream bytearrayinputstream builder to string tostring get bytes getbytes create osgi bundle manifest createosgibundlemanifest osgi bundle manifest osgibundlemanifest osgi manifest osgimanifest core exception coreexception io exception ioexception manifest manifest map entry string string entry osgi manifest osgimanifest get attributes getattributes entry set entryset get main attributes getmainattributes put value putvalue entry get key getkey entry get value getvalue byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream write create or update file createorupdatefile path from portable string fromportablestring src meta inf manifest byte array input stream bytearrayinputstream to byte array tobytearray install facet installfacet string facet id facetid string facet version facetversion core exception coreexception i face ted project ifacetedproject faceted project facetedproject project facets manager projectfacetsmanager create project i project facet iprojectfacet sling bundle facet slingbundlefacet project facets manager projectfacetsmanager get project facet getprojectfacet facet id facetid i project facet version iprojectfacetversion project facet version projectfacetversion sling bundle facet slingbundlefacet get version getversion facet version facetversion faceted project facetedproject install project facet installprojectfacet project facet version projectfacetversion null progress monitor nullprogressmonitor delete member deletemember i path ipath path core exception coreexception i resource iresource member project find member findmember path member member delete null progress monitor nullprogressmonitor