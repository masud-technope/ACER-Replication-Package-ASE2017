licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling resource resolver resourceresolver impl mapping java data input stream datainputstream java file java file input stream fileinputstream java file output stream fileoutputstream java io exception ioexception java net malformedurlexception java net url java util array list arraylist java util collection java util collections java util dictionary java util hash map hashmap java util hashtable java util iterator java util linked hash map linkedhashmap java util list java util map java util map entry java util no such element exception nosuchelementexception java util sorted map sortedmap java util timer java util timer task timertask java util tree map treemap java util tree set treeset java util concurrent concurrent hash map concurrenthashmap java util concurrent time unit timeunit java util concurrent atomic atomic long atomiclong java util concurrent locks reentrant lock reentrantlock javax servlet http http servlet response httpservletresponse org apache sling api sling constants slingconstants org apache sling api resource login exception loginexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource util resourceutil org apache sling api resource value map valuemap org apache sling resource resolver resourceresolver impl resource resolver impl resourceresolverimpl org apache sling resource resolver resourceresolver impl mapping map configuration provider mapconfigurationprovider vanity path config vanitypathconfig org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service registration serviceregistration org osgi service event event org osgi service event event admin eventadmin org osgi service event event constants eventconstants org osgi service event event handler eventhandler org slf logger org slf logger factory loggerfactory map entries mapentries event handler eventhandler map entries mapentries empty map entries mapentries string prop reg exp sling match string prop redirect external sling redirect string prop redirect external status sling status string prop redirect external redirect status sling redirect status redirectstatus string prop vanity path sling vanity path vanitypath string prop vanity order sling vanity order vanityorder string vanity bloom filter vanity bloom filter vanitybloomfilter txt vanity bloom filter max entries key global list string global list key string map root map vanity path redirect status http servlet response httpservletresponse string jcr system prefix jcr system string scheme host log logger log logger factory loggerfactory get logger getlogger get class getclass map configuration provider mapconfigurationprovider factory resource resolver resourceresolver resolver string map root maproot map string list map entry mapentry resolve maps map resolvemapsmap collection map entry mapentry map maps mapmaps map string list string vanity targets vanitytargets map string map string string alias map aliasmap service registration serviceregistration registration event admin eventadmin event admin eventadmin reentrant lock reentrantlock initializing reentrant lock reentrantlock enabled vanity paths enabledvanitypaths max cached vanity path entries maxcachedvanitypathentries max cached vanity path entries startup maxcachedvanitypathentriesstartup vanity bloom filter max bytes vanitybloomfiltermaxbytes enable optimize alias resolution enableoptimizealiasresolution vanity path precedence vanitypathprecedence list vanity path config vanitypathconfig vanity path config vanitypathconfig atomic long atomiclong vanity counter vanitycounter file vanity bloom filter file vanitybloomfilterfile vanity bloom filter vanitybloomfilter timer timer update bloom filter file updatebloomfilterfile suppress warnings suppresswarnings unchecked map entries mapentries factory resolver map root maproot map root resolve maps map resolvemapsmap collections singleton map singletonmap global list key list map entry mapentry collections empty list map maps mapmaps collections map entry mapentry empty list emptylist vanity targets vanitytargets collections string list string empty map emptymap alias map aliasmap collections string map string string empty map emptymap registration event admin eventadmin enabled vanity paths enabledvanitypaths max cached vanity path entries maxcachedvanitypathentries max cached vanity path entries startup maxcachedvanitypathentriesstartup vanity bloom filter max bytes vanitybloomfiltermaxbytes enable optimize alias resolution enableoptimizealiasresolution vanity path config vanitypathconfig vanity path precedence vanitypathprecedence vanity counter vanitycounter atomic long atomiclong vanity bloom filter file vanitybloomfilterfile suppress warnings suppresswarnings unchecked deprecation map entries mapentries map configuration provider mapconfigurationprovider factory bundle context bundlecontext bundle context bundlecontext event admin eventadmin event admin eventadmin login exception loginexception io exception ioexception resolver factory get administrative resource resolver getadministrativeresourceresolver factory factory map root maproot factory get map root getmaproot enabled vanity paths enabledvanitypaths factory is vanity path enabled isvanitypathenabled max cached vanity path entries maxcachedvanitypathentries factory get max cached vanity path entries getmaxcachedvanitypathentries max cached vanity path entries startup maxcachedvanitypathentriesstartup factory is max cached vanity path entries startup ismaxcachedvanitypathentriesstartup vanity bloom filter max bytes vanitybloomfiltermaxbytes factory get vanity bloom filter max bytes getvanitybloomfiltermaxbytes vanity path config vanitypathconfig factory get vanity path config getvanitypathconfig enable optimize alias resolution enableoptimizealiasresolution factory is optimize alias resolution enabled isoptimizealiasresolutionenabled vanity path precedence vanitypathprecedence factory has vanity path precedence hasvanitypathprecedence event admin eventadmin event admin eventadmin resolve maps map resolvemapsmap collections singleton map singletonmap global list key list map entry mapentry collections empty list map maps mapmaps collections map entry mapentry empty list emptylist vanity targets vanitytargets collections string list string empty map emptymap alias map aliasmap collections string map string string empty map emptymap do init doinit dictionary string string props hashtable string string props event constants eventconstants event topic org apache sling api resource props event constants eventconstants event filter create filter createfilter enabled vanity paths enabledvanitypaths props constants service description map entries observation props constants service vendor apache software foundation registration bundle context bundlecontext register service registerservice event handler eventhandler get name getname props vanity counter vanitycounter atomic long atomiclong vanity bloom filter file vanitybloomfilterfile bundle context bundlecontext get data file getdatafile vanity bloom filter initialize vanity paths initializevanitypaths actual initializer guards concurrent reentrant lock reentrantlock resource resolver do init doinit initializing lock resource resolver resourceresolver resolver resolver map configuration provider mapconfigurationprovider factory factory resolver factory map string list map entry mapentry new resolve maps map newresolvemapsmap concurrent hash map concurrenthashmap string list map entry mapentry optimization sling enable optimize alias resolution enableoptimizealiasresolution map string map string string alias map aliasmap load aliases loadaliases resolver alias map aliasmap alias map aliasmap resolve maps map resolvemapsmap new resolve maps map newresolvemapsmap do update configuration doupdateconfiguration send change event sendchangeevent exception log warn do init doinit unexpected problem initialization initializing unlock actual vanity paths initializer guards concurrent reentrant lock reentrantlock resource resolver io exception ioexception initialize vanity paths initializevanitypaths io exception ioexception initializing lock enabled vanity paths enabledvanitypaths vanity bloom filter file vanitybloomfilterfile runtime exception runtimeexception platform file system support create vanity bloom filter createvanitybloomfilter vanity bloom filter file vanitybloomfilterfile exists log debug creating bloom filter file vanity bloom filter file vanitybloomfilterfile get absolute path getabsolutepath vanity bloom filter vanitybloomfilter create vanity bloom filter createvanitybloomfilter persist bloom filter persistbloomfilter create vanity bloom filter createvanitybloomfilter initialize bloom filter disk vanity bloom filter vanitybloomfilter vanity bloom filter file vanitybloomfilterfile length data input stream datainputstream dis data input stream datainputstream file input stream fileinputstream vanity bloom filter file vanitybloomfilterfile dis read fully readfully vanity bloom filter vanitybloomfilter dis close task per sisting persisting bloom filter minute exist timer timer timer schedule bloom filter task bloomfiltertask map string list string vanity targets vanitytargets load vanity paths loadvanitypaths create vanity bloom filter createvanitybloomfilter vanity targets vanitytargets vanity targets vanitytargets initializing unlock do node added donodeadded string path ref reshed refreshed initializing lock new refreshed newrefreshed ref reshed refreshed new refreshed newrefreshed resolver refresh new refreshed newrefreshed resource resource resolver get resource getresource path resource value map valuemap props resource adapt to adaptto value map valuemap props contains key containskey prop vanity path do add vanity doaddvanity path props contains key containskey resource resolver impl resourceresolverimpl prop alias do add alias doaddalias path path starts with startswith map root maproot do update configuration doupdateconfiguration send change event sendchangeevent initializing unlock new refreshed newrefreshed do add attributes doaddattributes string path string added attributes addedattributes ref reshed refreshed initializing lock new refreshed newrefreshed ref reshed refreshed new refreshed newrefreshed resolver refresh new refreshed newrefreshed string changed attribute changedattribute added attributes addedattributes prop vanity path equals changed attribute changedattribute do add vanity doaddvanity path prop vanity order equals changed attribute changedattribute do update vanity order doupdatevanityorder path prop redirect external equals changed attribute changedattribute prop redirect external redirect status equals changed attribute changedattribute do update redirect status doupdateredirectstatus path resource resolver impl resourceresolverimpl prop alias equals changed attribute changedattribute enable optimize alias resolution enableoptimizealiasresolution do add alias doaddalias path path starts with startswith map root maproot do update configuration doupdateconfiguration send change event sendchangeevent initializing unlock new refreshed newrefreshed do update attributes doupdateattributes string path string changed attributes changedattributes ref reshed refreshed initializing lock new refreshed newrefreshed ref reshed refreshed new refreshed newrefreshed resolver refresh new refreshed newrefreshed string changed attribute changedattribute changed attributes changedattributes prop vanity path equals changed attribute changedattribute do update vanity doupdatevanity path prop vanity order equals changed attribute changedattribute do update vanity order doupdatevanityorder path prop redirect external equals changed attribute changedattribute prop redirect external redirect status equals changed attribute changedattribute do update redirect status doupdateredirectstatus path resource resolver impl resourceresolverimpl prop alias equals changed attribute changedattribute enable optimize alias resolution enableoptimizealiasresolution do remove alias doremovealias path do add alias doaddalias path do update alias doupdatealias path path starts with startswith map root maproot do update configuration doupdateconfiguration send change event sendchangeevent initializing unlock new refreshed newrefreshed do remove attributes doremoveattributes string path string removed attributes removedattributes node deletion nodedeletion ref reshed refreshed initializing lock new refreshed newrefreshed ref reshed refreshed new refreshed newrefreshed resolver refresh new refreshed newrefreshed string changed attribute changedattribute removed attributes removedattributes prop vanity path equals changed attribute changedattribute do remove vanity doremovevanity path prop vanity order equals changed attribute changedattribute do update vanity order doupdatevanityorder path prop redirect external equals changed attribute changedattribute prop redirect external redirect status equals changed attribute changedattribute do update redirect status doupdateredirectstatus path resource resolver impl resourceresolverimpl prop alias equals changed attribute changedattribute enable optimize alias resolution enableoptimizealiasresolution do remove alias doremovealias path node deletion nodedeletion do update alias doupdatealias path node deletion nodedeletion path starts with startswith map root maproot do update configuration doupdateconfiguration send change event sendchangeevent initializing unlock new refreshed newrefreshed do update configuration doupdateconfiguration ref reshed refreshed initializing lock new refreshed newrefreshed ref reshed refreshed new refreshed newrefreshed resolver refresh new refreshed newrefreshed do update configuration doupdateconfiguration send change event sendchangeevent initializing unlock new refreshed newrefreshed do update configuration doupdateconfiguration list map entry mapentry global resolve map globalresolvemap array list arraylist map entry mapentry sorted map sortedmap string map entry mapentry new map maps newmapmaps tree map treemap string map entry mapentry load map entries maps load resolver map loadresolvermap resolver global resolve map globalresolvemap new map maps newmapmaps load configuration resolver map load configuration loadconfiguration factory global resolve map globalresolvemap load configuration mapper map load map configuration loadmapconfiguration factory new map maps newmapmaps sort global list add map collections sort global resolve map globalresolvemap resolve maps map resolvemapsmap global list key global resolve map globalresolvemap map maps mapmaps collections unmodifiable set unmodifiableset tree set treeset map entry mapentry new map maps newmapmaps values do add vanity doaddvanity string path resource resource resolver get resource getresource path is all vanity path entries cached isallvanitypathentriescached vanity counter vanitycounter long value longvalue max cached vanity path entries maxcachedvanitypathentries fill cache bloom filter load vanity path loadvanitypath resource resolve maps map resolvemapsmap vanity targets vanitytargets fill bloom filter load vanity path loadvanitypath resource resolve maps map resolvemapsmap vanity targets vanitytargets update bloom filter file updatebloomfilterfile do update vanity doupdatevanity string path do remove vanity doremovevanity path do add vanity doaddvanity path do remove vanity doremovevanity string path string actual content path actualcontentpath get actual content path getactualcontentpath path list string vanity targets vanitytargets actual content path actualcontentpath string list map entry mapentry entries resolve maps map resolvemapsmap entries iterator map entry mapentry iterator entries iterator iterator has next hasnext map entry mapentry entry iterator string redirect get map entry redirect getmapentryredirect entry redirect redirect equals actual content path actualcontentpath iterator remove entries entries is empty isempty resolve maps map resolvemapsmap remove vanity targets vanitytargets remove actual content path actualcontentpath vanity counter vanitycounter long value longvalue vanity counter vanitycounter add and get addandget do update vanity order doupdatevanityorder string path deletion resource resource resolver get resource getresource path value map valuemap props resource adapt to adaptto value map valuemap vanity order vanityorder deletion vanity order vanityorder vanity order vanityorder props prop vanity order string actual content path actualcontentpath get actual content path getactualcontentpath path list string vanity paths vanitypaths vanity targets vanitytargets actual content path actualcontentpath vanity paths vanitypaths updated order updatedorder string vanity target vanitytarget vanity paths vanitypaths list map entry mapentry entries resolve maps map resolvemapsmap vanity target vanitytarget map entry mapentry entry entries string redirect get map entry redirect getmapentryredirect entry redirect redirect equals actual content path actualcontentpath entry set order setorder vanity order vanityorder updated order updatedorder updated order updatedorder collections sort entries do update redirect status doupdateredirectstatus string path string actual content path actualcontentpath get actual content path getactualcontentpath path list string vanity paths vanitypaths vanity targets vanitytargets actual content path actualcontentpath vanity paths vanitypaths do update vanity doupdatevanity path do add alias doaddalias string path resource resource resolver get resource getresource path load alias loadalias resource alias map aliasmap do update alias doupdatealias string path node deletion nodedeletion node deletion nodedeletion path ends with endswith jcr content path path substring path length jcr content length resource resource resolver get resource getresource path resource path resource get path getpath value map valuemap props resource adapt to adaptto value map valuemap props resource resolver impl resourceresolverimpl prop alias string do add alias doaddalias path resource resource resolver get resource getresource path resource resource get name getname equals jcr content resource parent resource get parent getparent path parent get path getpath value map valuemap props parent adapt to adaptto value map valuemap props resource resolver impl resourceresolverimpl prop alias string do add alias doaddalias path resource get child getchild jcr content resource jcr content jcrcontent resource get child getchild jcr content path jcr content jcrcontent get path getpath value map valuemap props jcr content jcrcontent adapt to adaptto value map valuemap props resource resolver impl resourceresolverimpl prop alias string do add alias doaddalias path do remove alias doremovealias string path node deletion nodedeletion string resource name resourcename node deletion nodedeletion equals path path ends with endswith jcr content path path substring path length jcr content length resource name resourcename path substring path last index of lastindexof path resource util resourceutil get parent getparent path resource name resourcename resource resource resolver get resource getresource path resource get name getname equals jcr content resource containing resource containingresource resource get parent getparent path containing resource containingresource get parent getparent get path getpath resource name resourcename containing resource containingresource get name getname path resource get parent getparent get path getpath resource name resourcename resource get name getname map string string alias map entry aliasmapentry alias map aliasmap path alias map entry aliasmapentry iterator string iterator alias map entry aliasmapentry key set keyset iterator iterator has next hasnext string key iterator resource name resourcename equals alias map entry aliasmapentry key iterator remove alias map entry aliasmapentry alias map entry aliasmapentry is empty isempty alias map aliasmap remove path is optimize alias resolution enabled isoptimizealiasresolutionenabled enable optimize alias resolution enableoptimizealiasresolution cleans dispose persist bloom filter persistbloomfilter io exception ioexception log error error saving bloom filter disk registration registration unregister registration cooperation do init doinit lock do init doinit acquired prev enting preventing do init doinit running waiting concurrent do init doinit terminate lock acquired resource resolver causing init terminate triggered prevent do init doinit method wait seconds not ifcation notifcation initialization init locked initlocked init locked initlocked initializing try lock trylock time unit timeunit seconds interrupted exception interruptedexception init locked initlocked init locked initlocked log warn dispose acquire initialization lock seconds ongoing int ialization intialization fail resolver field dispose d disposed sig nals signals event handler working resource resolver resourceresolver old resolver oldresolver resolver resolver old resolver oldresolver old resolver oldresolver close log warn dispose resource resolver resourceresolver cleared duplicate call dispose init locked initlocked initializing unlock clear fields factory event admin eventadmin web console plugin list map entry mapentry get resolve maps getresolvemaps list map entry mapentry entries array list arraylist map entry mapentry list map entry mapentry list resolve maps map resolvemapsmap values entries add all addall list collections sort entries collections unmodifiable list unmodifiablelist entries calculate resolve maps entries sorted pattern length create list relevant entries iterator map entry mapentry get resolve maps iterator getresolvemapsiterator string request path requestpath string key first index firstindex request path requestpath index of indexof second index secondindex request path requestpath index of indexof first index firstindex second index secondindex key request path requestpath substring second index secondindex map entry iterator mapentryiterator key resolve maps map resolvemapsmap vanity path precedence vanitypathprecedence collection map entry mapentry get map maps getmapmaps map maps mapmaps map string string get alias map getaliasmap string parent path parentpath alias map aliasmap parent path parentpath map enty mapenty nodes specific vanity path vanitypath list map entry mapentry get map entry list getmapentrylist string vanity path vanitypath list map entry mapentry map entries mapentries bloom filter utils bloomfilterutils probably contains probablycontains vanity bloom filter vanitybloomfilter vanity path vanitypath map entries mapentries resolve maps map resolvemapsmap vanity path vanitypath map entries mapentries map string list map entry mapentry map entry mapentry get vanity paths getvanitypaths vanity path vanitypath map entries mapentries map entry mapentry vanity path vanitypath map entries mapentries event listener eventlistener handles change node properties relevant vanity url mappings link map entries mapentries resource resolver factory impl resourceresolverfactoryimpl bundle context bundlecontext event admin eventadmin constructor event listener registered events handle event handleevent event event check path tests object event get property getproperty sling constants slingconstants property path string path string path string log debug handle event handleevent topic path event get topic gettopic path log debug handle event handleevent topic path event event get topic gettopic don care system area path starts with startswith jcr system prefix was resolver refreshed wasresolverrefreshed removal node handled differently sling constants slingconstants topic resource removed equals event get topic gettopic string actual content path actualcontentpath get actual content path getactualcontentpath path string target vanity targets vanitytargets key set keyset target starts with startswith actual content path actualcontentpath was resolver refreshed wasresolverrefreshed do remove attributes doremoveattributes path string prop vanity path was resolver refreshed wasresolverrefreshed string target alias map aliasmap key set keyset actual content path actualcontentpath starts with startswith target was resolver refreshed wasresolverrefreshed do remove attributes doremoveattributes path string resource resolver impl resourceresolverimpl prop alias was resolver refreshed wasresolverrefreshed path starts with startswith map root maproot update configuration was resolver refreshed wasresolverrefreshed do update configuration doupdateconfiguration was resolver refreshed wasresolverrefreshed session move handled differently sling sling constants slingconstants topic resource equals event get topic gettopic event get property getproperty sling constants slingconstants property attributes was resolver refreshed wasresolverrefreshed do node added donodeadded path was resolver refreshed wasresolverrefreshed string added attributes addedattributes string event get property getproperty sling constants slingconstants property attributes added attributes addedattributes log is debug enabled isdebugenabled log debug attributes added attributes addedattributes was resolver refreshed wasresolverrefreshed do add attributes doaddattributes path added attributes addedattributes was resolver refreshed wasresolverrefreshed string changed attributes changedattributes string event get property getproperty sling constants slingconstants property changed attributes changed attributes changedattributes log is debug enabled isdebugenabled log debug changed attributes changed attributes changedattributes was resolver refreshed wasresolverrefreshed do update attributes doupdateattributes path changed attributes changedattributes was resolver refreshed wasresolverrefreshed string removed attributes removedattributes string event get property getproperty sling constants slingconstants property removed attributes removed attributes removedattributes log is debug enabled isdebugenabled log debug removed attributes removed attributes removedattributes was resolver refreshed wasresolverrefreshed do remove attributes doremoveattributes path removed attributes removedattributes was resolver refreshed wasresolverrefreshed internal create vanity bloom filter createvanitybloomfilter io exception ioexception bloom filter bloomfilter vanity bloom filter vanitybloomfilter bloom filter bloomfilter bloom filter utils bloomfilterutils create filter createfilter vanity bloom filter max entries vanity bloom filter max bytes vanitybloomfiltermaxbytes bloom filter bloomfilter persist bloom filter persistbloomfilter io exception ioexception vanity bloom filter file vanitybloomfilterfile vanity bloom filter vanitybloomfilter file output stream fileoutputstream file output stream fileoutputstream vanity bloom filter file vanitybloomfilterfile write vanity bloom filter vanitybloomfilter close is all vanity path entries cached isallvanitypathentriescached max cached vanity path entries maxcachedvanitypathentries escapes illegal x path xpath search characters string search string test parse exception parseexception doc umented documented http issues apache org jira browse jcr param string encode escaped string string escape illegal xpath search chars escapeillegalxpathsearchchars string string builder stringbuilder string builder stringbuilder length append substring length char at charat length note sync escaped append append to string tostring suppress warnings suppresswarnings deprecation map string list map entry mapentry get vanity paths getvanitypaths string vanity path vanitypath map string list map entry mapentry entry map entrymap hash map hashmap string list map entry mapentry string query string querystring select sling vanity path vanitypath sling redirect sling redirect status redirectstatus sling vanity path vanitypath sling vanity path vanitypath escape illegal xpath search chars escapeillegalxpathsearchchars vanity path vanitypath replace all replaceall sling vanity path vanitypath escape illegal xpath search chars escapeillegalxpathsearchchars vanity path vanitypath substring replace all replaceall order sling vanity order vanityorder desc resource resolver resourceresolver query resolver queryresolver query resolver queryresolver factory get administrative resource resolver getadministrativeresourceresolver iterator resource query resolver queryresolver find resources findresources query string querystring sql has next hasnext resource resource max cached vanity path entries startup maxcachedvanitypathentriesstartup vanity counter vanitycounter long value longvalue max cached vanity path entries maxcachedvanitypathentries load vanity path loadvanitypath resource resolve maps map resolvemapsmap vanity targets vanitytargets entry map entrymap resolve maps map resolvemapsmap map string list string target paths targetpaths hash map hashmap string list string load vanity path loadvanitypath resource entry map entrymap target paths targetpaths login exception loginexception log error exception obtaining query resolver queryresolver query resolver queryresolver query resolver queryresolver close entry map entrymap is valid vanity path isvalidvanitypath resource resource resource get path getpath starts with startswith jcr system prefix log debug is valid vanity path isvalidvanitypath valid resource vanity path config vanitypathconfig allowed vanity path config vanitypathconfig config vanity path config vanitypathconfig resource get path getpath starts with startswith config prefix allowed config is exclude isexclude allowed log debug is valid vanity path isvalidvanitypath valid white list resource value map valuemap props resource adapt to adaptto value map valuemap props log debug is valid vanity path isvalidvanitypath valid properties resource string get actual content path getactualcontentpath string path string check path checkpath path ends with endswith jcr content check path checkpath path substring path length jcr content length check path checkpath path check path checkpath string get map entry redirect getmapentryredirect map entry mapentry map entry mapentry string redirect map entry mapentry get redirect getredirect redirect length log warn wrong restart bundle string path redirect path ends with endswith path path substring path length length path ends with endswith html path path substring path length html length path send change event sendchangeevent event admin eventadmin event event event sling constants slingconstants topic resource resolver mapping changed dictionary event admin eventadmin post event postevent event load resolver map loadresolvermap resource resolver resourceresolver resolver list map entry mapentry entries map string map entry mapentry map entries mapentries resource res resolver get resource getresource map root maproot res gather resolver entries map entries mapentries res gather resource resolver resourceresolver resolver list map entry mapentry entries map string map entry mapentry map entries mapentries resource parent string parent path parentpath iterator resource children parent list children listchildren children has next hasnext resource child children value map valuemap resource util resourceutil get value map getvaluemap child string prop reg exp string trailing slash trailingslash child get name getname concat trailing slash trailingslash string child path childpath parent path parentpath concat child path childpath ends with endswith string child parent childparent child path childpath trailing slash trailingslash child parent childparent child parent childparent concat gather resolver entries map entries mapentries child child parent childparent map entry mapentry child resolve entry childresolveentry child resolve entry childresolveentry map entry mapentry create resolve entry createresolveentry child path childpath child trailing slash trailingslash illegal argument exception illegalargumentexception iae log debug entry exception iae child resolve entry childresolveentry entries add child resolve entry childresolveentry list map entry mapentry child map entries childmapentries map entry mapentry create map entry createmapentry child path childpath child trailing slash trailingslash child map entries childmapentries map entry mapentry map entry mapentry child map entries childmapentries add map entry addmapentry map entries mapentries map entry mapentry get pattern getpattern map entry mapentry get redirect getredirect map entry mapentry get status getstatus add entry addentry map string list map entry mapentry entry map entrymap string key map entry mapentry entry entry list map entry mapentry entries entry map entrymap key entries entries array list arraylist map entry mapentry entries add entry collections sort entries entry map entrymap key entries list map entry mapentry entries copy entriescopy array list arraylist map entry mapentry entries entries copy entriescopy add entry collections sort entries copy entriescopy entry map entrymap key entries copy entriescopy map string map string string load aliases loadaliases resource resolver resourceresolver resolver map string map string string map concurrent hash map concurrenthashmap string map string string string query string querystring select sling alias base sling alias iterator resource resolver find resources findresources query string querystring sql has next hasnext resource resource load alias loadalias resource map map load alias loadalias resource resource map string map string string map resource get path getpath starts with startswith jcr system prefix log debug load aliases loadaliases ignoring resource value map valuemap props resource adapt to adaptto value map valuemap props log debug load aliases loadaliases ignoring properties resource string resource name resourcename string parent path parentpath resource get name getname equals jcr content resource containing resource containingresource resource get parent getparent parent path parentpath containing resource containingresource get parent getparent get path getpath resource name resourcename containing resource containingresource get name getname parent path parentpath resource get parent getparent get path getpath resource name resourcename resource get name getname map string string parent map parentmap map parent path parentpath string alias props resource resolver impl resourceresolverimpl prop alias string parent map parentmap parent map parentmap contains key containskey alias log warn encountered duplicate alias parent path ref using refusing replace current target object alias parent path parentpath parent map parentmap alias resource name resourcename invalid alias equals alias equals invalid alias to char array tochararray invalid invalid log warn encountered invalid alias parent path ref using refusing alias parent path parentpath parent map parentmap parent map parentmap linked hash map linkedhashmap string string map parent path parentpath parent map parentmap parent map parentmap alias resource name resourcename map string list string load vanity paths loadvanitypaths create vanity bloom filter createvanitybloomfilter map string list string target paths targetpaths concurrent hash map concurrenthashmap string list string string query string querystring select sling vanity path vanitypath sling redirect sling redirect status redirectstatus sling vanity path vanitypath sling vanity path vanitypath iterator resource resolver find resources findresources query string querystring sql has next hasnext create vanity bloom filter createvanitybloomfilter is all vanity path entries cached isallvanitypathentriescached vanity counter vanitycounter long value longvalue max cached vanity path entries maxcachedvanitypathentries resource resource is all vanity path entries cached isallvanitypathentriescached vanity counter vanitycounter long value longvalue max cached vanity path entries maxcachedvanitypathentries load vanity path loadvanitypath resource resolve maps map resolvemapsmap target paths targetpaths create vanity bloom filter createvanitybloomfilter load vanity path loadvanitypath resource resolve maps map resolvemapsmap target paths targetpaths create vanity bloom filter createvanitybloomfilter target paths targetpaths load vanity path loadvanitypath resource resource map string list map entry mapentry entry map entrymap map string list string target paths targetpaths add to cache addtocache new vanity newvanity is valid vanity path isvalidvanitypath resource value map valuemap props resource adapt to adaptto value map valuemap vanity order vanityorder props contains key containskey prop vanity order vanity order vanityorder props prop vanity order string p vanity paths pvanitypaths props prop vanity path string string p vanity path pvanitypath p vanity paths pvanitypaths string result get vanity path definition getvanitypathdefinition p vanity path pvanitypath result string url result result resource redirect target redirecttarget resource get name getname equals jcr content redirect target redirecttarget resource get parent getparent redirect target redirecttarget resource string redirect redirect target redirecttarget get path getpath string redirect name redirectname redirect target redirecttarget get name getname status props prop redirect external props prop redirect external redirect status factory get default vanity path redirect status getdefaultvanitypathredirectstatus string check path checkpath result added entry addedentry add to cache addtocache redirect name redirectname index of indexof add entry addentry entry map entrymap check path checkpath get map entry getmapentry url status vanity order vanityorder redirect idx redirect name redirectname last index of lastindexof string extension redirect name redirectname substring idx added entry addedentry add entry addentry entry map entrymap check path checkpath get map entry getmapentry url extension status vanity order vanityorder redirect add entry addentry entry map entrymap check path checkpath get map entry getmapentry url status vanity order vanityorder redirect html added entry addedentry add entry addentry entry map entrymap check path checkpath get map entry getmapentry url status vanity order vanityorder redirect added entry addedentry update target paths updatetargetpaths target paths targetpaths redirect check path checkpath entry map entrymap resolve maps map resolvemapsmap vanity counter vanitycounter add and get addandget new vanity newvanity bloom filter utils bloomfilterutils add vanity bloom filter vanitybloomfilter check path checkpath new vanity newvanity bloom filter utils bloomfilterutils add vanity bloom filter vanitybloomfilter check path checkpath update target paths updatetargetpaths map string list string target paths targetpaths string key string entry entry list string entries target paths targetpaths key entries entries array list arraylist string target paths targetpaths key entries entries add entry string get vanity path definition getvanitypathdefinition string p vanity path pvanitypath string result p vanity path pvanitypath string info p vanity path pvanitypath trim info length string prefix string path info index of indexof url url info prefix get protocol getprotocol get host gethost get port getport path get path getpath malformedurlexception log warn ignoring malformed vanity path p vanity path pvanitypath prefix scheme host info starts with startswith path info path info prefix last slash lastslash path last index of lastindexof first dot firstdot path index of indexof last slash lastslash first dot firstdot path path substring first dot firstdot log warn removing extension vanity path p vanity path pvanitypath result string prefix path result load configuration loadconfiguration map configuration provider mapconfigurationprovider factory list map entry mapentry entries map virtuals factory getvirtualurlmap virtuals entry virtual entry virtualentry virtuals entry set entryset string ext path extpath string virtual entry virtualentry get key getkey string int path intpath string virtual entry virtualentry get value getvalue ext path extpath equals int path intpath string url scheme host ext path extpath string redirect int path intpath map entry mapentry map entry mapentry get map entry getmapentry url redirect map entry mapentry entries add map entry mapentry mapping mappings factory get map pings getmappings mappings map string list string map hash map hashmap string list string mapping mapping mappings mapping maps inbound mapsinbound string url mapping get to getto string alias mapping get from getfrom url length list string alias list aliaslist map url alias list aliaslist alias list aliaslist array list arraylist string map url alias list aliaslist alias list aliaslist add alias entry string list string entry map entry set entryset map entry mapentry map entry mapentry get map entry getmapentry scheme host entry get key getkey entry get value getvalue to array toarray string map entry mapentry entries add map entry mapentry load map configuration loadmapconfiguration map configuration provider mapconfigurationprovider factory map string map entry mapentry entries mapping mappings factory get map pings getmappings mappings mappings length mapping mapping mappings mapping maps outbound mapsoutbound string url mapping get to getto string alias mapping get from getfrom url equals alias add map entry addmapentry entries alias url map virtuals factory getvirtualurlmap virtuals entry virtual entry virtualentry virtuals entry set entryset string ext path extpath string virtual entry virtualentry get key getkey string int path intpath string virtual entry virtualentry get value getvalue ext path extpath equals int path intpath string path int path intpath string url ext path extpath add map entry addmapentry entries path url add map entry addmapentry map string map entry mapentry entries string path string url status map entry mapentry entry entries path entry entry get map entry getmapentry path status url string redir entry get redirect getredirect string new redir newredir string redir length system arraycopy redir new redir newredir redir length new redir newredir redir length url entry get map entry getmapentry entry get pattern getpattern entry get status getstatus new redir newredir entry entries path entry string create filter createfilter vanity path enabled vanitypathenabled string node props nodeprops prop redirect external redirect status prop redirect external resource resolver impl resourceresolverimpl prop redirect internal prop redirect external status prop reg exp resource resolver impl resourceresolverimpl prop alias string event props eventprops sling constants slingconstants property attributes sling constants slingconstants property changed attributes sling constants slingconstants property removed attributes string builder stringbuilder filter string builder stringbuilder filter append string event prop eventprop event props eventprops filter append vanity path enabled vanitypathenabled filter append append event prop eventprop append append prop vanity path append filter append append event prop eventprop append append prop vanity order append string node prop nodeprop node props nodeprops filter append append event prop eventprop append append node prop nodeprop append filter append filter append append event constants eventconstants event topic append append sling constants slingconstants topic resource removed append filter append append event constants eventconstants event topic append append sling constants slingconstants topic resource append filter append filter to string tostring map entry iterator mapentryiterator iterator map entry mapentry map string list map entry mapentry resolve maps map resolvemapsmap string key map entry mapentry iterator map entry mapentry global list iterator globallistiterator map entry mapentry next global nextglobal iterator map entry mapentry special iterator specialiterator map entry mapentry next special nextspecial vanity path precedence vanitypathprecedence map entry iterator mapentryiterator string start key startkey map string list map entry mapentry resolve maps map resolvemapsmap vanity path precedence vanitypathprecedence key start key startkey resolve maps map resolvemapsmap resolve maps map resolvemapsmap global list iterator globallistiterator resolve maps map resolvemapsmap global list key iterator vanity path precedence vanitypathprecedence vanity path precedence vanitypathprecedence see k seek has next hasnext map entry mapentry no such element exception nosuchelementexception map entry mapentry result see k seek result remove unsupported operation exception unsupportedoperationexception see k seek next global nextglobal global list iterator globallistiterator has next hasnext next global nextglobal global list iterator globallistiterator next special nextspecial special iterator specialiterator special iterator specialiterator has next hasnext special iterator specialiterator special iterator specialiterator key last slash pos lastslashpos key last index of lastindexof last dot pos lastdotpos key index of indexof last slash pos lastslashpos last dot pos lastdotpos key key substring last dot pos lastdotpos list map entry mapentry special map entries mapentries is all vanity path entries cached isallvanitypathentriescached special resolve maps map resolvemapsmap key special map entries mapentries get map entry list getmapentrylist key special special iterator specialiterator special iterator key length last slash lastslash key last index of lastindexof last slash lastslash key key key substring last slash lastslash key special iterator specialiterator special iterator specialiterator has next hasnext next special nextspecial special iterator specialiterator next special nextspecial next global nextglobal next global nextglobal vanity path precedence vanitypathprecedence next global nextglobal next special nextspecial next special nextspecial next global nextglobal get pattern getpattern length next special nextspecial get pattern getpattern length next global nextglobal next global nextglobal next special nextspecial next special nextspecial next special nextspecial next special nextspecial map entry mapentry get map entry getmapentry string url status trailing slash trailingslash string redirect map entry mapentry map entry mapentry map entry mapentry map entry mapentry url status trailing slash trailingslash redirect illegal argument exception illegalargumentexception iae log debug entry exception iae map entry mapentry map entry mapentry get map entry getmapentry string url status trailing slash trailingslash order string redirect map entry mapentry map entry mapentry map entry mapentry map entry mapentry url status trailing slash trailingslash order redirect illegal argument exception illegalargumentexception iae log debug entry exception iae map entry mapentry bloom filter task bloomfiltertask timer task timertask override update bloom filter file updatebloomfilterfile persist bloom filter persistbloomfilter update bloom filter file updatebloomfilterfile io exception ioexception runtime exception runtimeexception error saving bloom filter disk