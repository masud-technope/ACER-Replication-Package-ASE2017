licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery commons java util arrays java util collection java util collections java util list java util map junit framework test case testcase org apache sling discovery cluster view clusterview org apache sling discovery instance description instancedescription org apache sling discovery instance filter instancefilter org junit test org mockito mockito instances diff test instancesdifftest test expected illegal argument exception illegalargumentexception test duplicate d sling ids testduplicatedslingids list instance arrays as list aslist instance duplicated instance instance duplicated instances diff instancesdiff empty test test empty collections testemptycollections instances diff instancesdiff diff instances diff instancesdiff empty empty test case testcase assert equals assertequals diff size test case testcase assert equals assertequals diff size test case testcase assert equals assertequals diff removed size test case testcase assert equals assertequals diff retained size test test added from empty testaddedfromempty exception instances diff instancesdiff diff instances diff instancesdiff empty arrays as list aslist instance instance test case testcase assert equals assertequals diff size test test added with empty testaddedwithempty exception instances diff instancesdiff diff instances diff instancesdiff arrays as list aslist instance instance empty test case testcase assert equals assertequals diff size test test added without intersection testaddedwithoutintersection exception instances diff instancesdiff diff instances diff instancesdiff collections singleton list singletonlist instance collections singleton list singletonlist instance test case testcase assert equals assertequals diff size test case testcase assert equals assertequals diff iterator get sling id getslingid test test added with intersection testaddedwithintersection exception instances diff instancesdiff diff instances diff instancesdiff arrays as list aslist instance instance arrays as list aslist instance instance test case testcase assert equals assertequals diff size test case testcase assert equals assertequals diff iterator get sling id getslingid test test all testall exception instances diff instancesdiff diff instances diff instancesdiff collections singleton list singletonlist instance arrays as list aslist instance instance test case testcase assert equals assertequals diff size test test all retained collection testallretainedcollection exception instance old instance oldinstance instance instance new instance newinstance instance instances diff instancesdiff diff instances diff instancesdiff collections singleton list singletonlist old instance oldinstance collections singleton list singletonlist new instance newinstance test case testcase assert equals assertequals diff size test case testcase assert equals assertequals new instance newinstance diff iterator test case testcase assert equals assertequals diff size test case testcase assert equals assertequals old instance oldinstance diff iterator removed test test removed from empty testremovedfromempty exception instances diff instancesdiff diff instances diff instancesdiff empty arrays as list aslist instance instance test case testcase assert equals assertequals diff removed size test test removed with empty testremovedwithempty exception instances diff instancesdiff diff instances diff instancesdiff arrays as list aslist instance instance empty test case testcase assert equals assertequals diff removed size test test removed without intersection testremovedwithoutintersection exception instances diff instancesdiff diff instances diff instancesdiff collections singleton list singletonlist instance collections singleton list singletonlist instance test case testcase assert equals assertequals diff removed size test case testcase assert equals assertequals diff removed iterator get sling id getslingid test test removed with intersection testremovedwithintersection exception instances diff instancesdiff diff instances diff instancesdiff arrays as list aslist instance instance arrays as list aslist instance instance test case testcase assert equals assertequals diff removed size test case testcase assert equals assertequals diff removed iterator get sling id getslingid retained test test retained without intersection testretainedwithoutintersection exception instances diff instancesdiff diff instances diff instancesdiff empty arrays as list aslist instance instance test case testcase assert equals assertequals diff retained size test test retained with intersection testretainedwithintersection exception instances diff instancesdiff diff instances diff instancesdiff arrays as list aslist instance instance arrays as list aslist instance instance test case testcase assert equals assertequals diff retained size test case testcase assert equals assertequals diff retained iterator get sling id getslingid test test retained collection testretainedcollection exception instance old instance oldinstance instance instance new instance newinstance instance instances diff instancesdiff diff instances diff instancesdiff collections singleton list singletonlist old instance oldinstance collections singleton list singletonlist new instance newinstance test case testcase assert equals assertequals diff retained size test case testcase assert equals assertequals new instance newinstance diff retained iterator test case testcase assert equals assertequals old instance oldinstance diff retained iterator test test retained by properties testretainedbyproperties exception instances diff instancesdiff diff instances diff instancesdiff arrays as list aslist instance collections singleton map singletonmap instance collections singleton map singletonmap arrays as list aslist instance collections singleton map singletonmap instance collections singleton map singletonmap test case testcase assert equals assertequals diff retained size test case testcase assert equals assertequals diff retained iterator get sling id getslingid test case testcase assert equals assertequals diff retained size test case testcase assert equals assertequals diff retained iterator get sling id getslingid filters test test empty result testemptyresult exception collection instance description instancedescription instances instances diff instancesdiff arrays as list aslist instance instance empty filter with filterwith instance filter instancefilter accept instance description instancedescription instance description instancedescription test case testcase assert equals assertequals instances size test test filter with testfilterwith exception collection instance description instancedescription instances instances diff instancesdiff arrays as list aslist instance instance empty filter with filterwith instance filter instancefilter accept instance description instancedescription instance description instancedescription equals instance description instancedescription get sling id getslingid test case testcase assert equals assertequals instances size test case testcase assert equals assertequals instances iterator get sling id getslingid test test is leader testisleader exception collection instance description instancedescription instances instances diff instancesdiff arrays as list aslist instance collections string string empty map emptymap view id viewid instance collections string string empty map emptymap view id viewid empty is leader isleader test case testcase assert equals assertequals instances size test case testcase assert equals assertequals instances iterator get sling id getslingid test test is not leader testisnotleader exception collection instance description instancedescription instances instances diff instancesdiff arrays as list aslist instance collections string string empty map emptymap view id viewid instance collections string string empty map emptymap view id viewid empty is not leader isnotleader test case testcase assert equals assertequals instances size test case testcase assert equals assertequals instances iterator get sling id getslingid test test is local testislocal exception collection instance description instancedescription instances instances diff instancesdiff arrays as list aslist instance collections string string empty map emptymap view id viewid instance collections string string empty map emptymap view id viewid empty is local islocal test case testcase assert equals assertequals instances size test case testcase assert equals assertequals instances iterator get sling id getslingid test test is not local testisnotlocal exception collection instance description instancedescription instances instances diff instancesdiff arrays as list aslist instance collections string string empty map emptymap view id viewid instance collections string string empty map emptymap view id viewid empty is not local isnotlocal test case testcase assert equals assertequals instances size test case testcase assert equals assertequals instances iterator get sling id getslingid test test is in cluster view testisinclusterview exception cluster view clusterview cluster view clusterview cluster view clusterview view id viewid collection instance description instancedescription instances instances diff instancesdiff arrays as list aslist instance collections string string empty map emptymap other view otherview instance collections string string empty map emptymap view id viewid empty is in cluster view isinclusterview cluster view clusterview test case testcase assert equals assertequals instances size test case testcase assert equals assertequals instances iterator get sling id getslingid test test is not in cluster view testisnotinclusterview exception cluster view clusterview cluster view clusterview cluster view clusterview view collection instance description instancedescription instances instances diff instancesdiff arrays as list aslist instance collections string string empty map emptymap other view otherview instance collections string string empty map emptymap view id viewid empty is in cluster view isinclusterview cluster view clusterview test case testcase assert equals assertequals instances size list instance empty collections instance empty list emptylist instance instance description instancedescription string sling id slingid leader local map string string properties cluster view clusterview cluster view clusterview instance string sling id slingid sling id slingid collections string string empty map emptymap instance string sling id slingid map string string properties sling id slingid properties instance string sling id slingid leader local map string string properties string cluster view id clusterviewid sling id slingid sling id slingid leader leader local local properties properties cluster view clusterview cluster view clusterview cluster view id clusterviewid cluster view clusterview get cluster view getclusterview cluster view clusterview is leader isleader leader is local islocal local string get sling id getslingid sling id slingid string get property getproperty string properties map string string get properties getproperties properties cluster view clusterview cluster view clusterview string cluster view id clusterviewid cluster view clusterview cluster view clusterview mockito mock cluster view clusterview mockito cluster view clusterview get id getid then return thenreturn cluster view id clusterviewid cluster view clusterview