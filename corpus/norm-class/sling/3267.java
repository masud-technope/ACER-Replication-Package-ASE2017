licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling open id openid impl javax servlet http http servlet request httpservletrequest junit framework test case testcase org apache sling open id openid impl openidauthenticationhandler org jmock expectations org jmock mockery open authentication handler test openidauthenticationhandlertest test case testcase string server string http http string https https string port port port port string ctx test get base url getbaseurl mockery ctx mockery http servlet request httpservletrequest request ctx mock http servlet request httpservletrequest ctx checking expectations general setup calls allowing request get server name getservername return value returnvalue allowing request get context path getcontextpath return value returnvalue ctx http request get scheme getscheme return value returnvalue http request get server port getserverport return value returnvalue port https request get scheme getscheme return value returnvalue https request get server port getserverport return value returnvalue port http request get scheme getscheme return value returnvalue http request get server port getserverport return value returnvalue port https request get scheme getscheme return value returnvalue https request get server port getserverport return value returnvalue port request get scheme getscheme return value returnvalue request get server port getserverport return value returnvalue port request get scheme getscheme return value returnvalue request get server port getserverport return value returnvalue port request get scheme getscheme return value returnvalue request get server port getserverport return value returnvalue port http request get scheme getscheme return value returnvalue http request get server port getserverport return value returnvalue port https request get scheme getscheme return value returnvalue https request get server port getserverport return value returnvalue port request get scheme getscheme return value returnvalue request get server port getserverport return value returnvalue port openidauthenticationhandler handler openidauthenticationhandler http assert equals assertequals http handler get base url getbaseurl request https assert equals assertequals https handler get base url getbaseurl request http assert equals assertequals http port handler get base url getbaseurl request https assert equals assertequals https port handler get base url getbaseurl request assert equals assertequals port handler get base url getbaseurl request assert equals assertequals port handler get base url getbaseurl request assert equals assertequals port handler get base url getbaseurl request http assert equals assertequals http handler get base url getbaseurl request https assert equals assertequals https handler get base url getbaseurl request assert equals assertequals handler get base url getbaseurl request