licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution serialization impl javax annotation nonnull java io exception ioexception java input stream inputstream java util collections org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling distribution serialization distribution package distributionpackage org apache sling distribution serialization distribution package info distributionpackageinfo org apache sling distribution pack aging packaging shared distribution package shareddistributionpackage org slf logger org slf logger factory loggerfactory resource shared distribution package resourceshareddistributionpackage shared distribution package shareddistributionpackage logger log logger factory loggerfactory get logger getlogger get class getclass string reference root node object lock resource resolver resourceresolver resource resolver resourceresolver string package path packagepath distribution package distributionpackage distribution package distributionpackage string package name packagename resource shared distribution package resourceshareddistributionpackage object lock resource resolver resourceresolver resource resolver resourceresolver string package name packagename string package path packagepath distribution package distributionpackage distribution package distributionpackage resource resolver resourceresolver resource resolver resourceresolver package name packagename package name packagename package path packagepath package path packagepath distribution package distributionpackage distribution package distributionpackage lock lock acquire nonnull string holder name holdername holder name holdername length illegal argument exception illegalargumentexception holder empty create holder resource createholderresource holder name holdername log debug acquired holder object package path packagepath holder name holdername persistence exception persistenceexception log error acquire release nonnull string holder name holdername holder name holdername length illegal argument exception illegalargumentexception holder empty delete holder resource deleteholderresource holder name holdername do package delete dopackagedelete delete if empty deleteifempty do package delete dopackagedelete distribution package distributionpackage delete log debug released holder delete object package path packagepath holder name holdername do package delete dopackagedelete persistence exception persistenceexception log error release nonnull string get id getid package name packagename nonnull string get type gettype distribution package distributionpackage get type gettype nonnull input stream inputstream create input stream createinputstream io exception ioexception distribution package distributionpackage create input stream createinputstream close distribution package distributionpackage close delete delete holder root deleteholderroot persistence exception persistenceexception log error delete shared resource distribution package distributionpackage delete nonnull distribution package info distributionpackageinfo get info getinfo distribution package distributionpackage get info getinfo distribution package distributionpackage get package getpackage distribution package distributionpackage resource get proxy resource getproxyresource string holder path holderpath package path packagepath resource resolver resourceresolver refresh resource resource resource resolver resourceresolver get resource getresource holder path holderpath resource resource get holder root resource getholderrootresource resource resource get proxy resource getproxyresource resource holder root holderroot resource get child getchild reference root node holder root holderroot holder root holderroot create holder resource createholderresource string holder name holdername persistence exception persistenceexception lock resource holder root holderroot get holder root resource getholderrootresource holder root holderroot resource holder holder root holderroot get child getchild holder name holdername holder resource resolver resourceresolver create holder root holderroot holder name holdername collections singleton map singletonmap resource resolver resourceresolver property resource type object sling folder resource resolver resourceresolver commit delete holder resource deleteholderresource string holder name holdername persistence exception persistenceexception lock resource holder root holderroot get holder root resource getholderrootresource holder root holderroot resource holder holder root holderroot get child getchild holder name holdername holder resource resolver resourceresolver delete holder resource resolver resourceresolver commit delete holder root deleteholderroot persistence exception persistenceexception lock resource resource get proxy resource getproxyresource resource resolver resourceresolver delete resource resource resolver resourceresolver commit delete if empty deleteifempty persistence exception persistenceexception lock resource holder root holderroot get holder root resource getholderrootresource holder root holderroot holder root holderroot has children haschildren delete holder root deleteholderroot