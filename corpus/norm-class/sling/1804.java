licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad installer impl org junit assert equals assertequals org junit assert true asserttrue org junit fail java byte array input stream bytearrayinputstream java input stream inputstream java net malformedurlexception java net url java util array list arraylist java util arrays java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util org apache sling installer api installable resource installableresource org apache sling installer api osgi installer osgiinstaller org apache sling launchpad api launchpad content provider launchpadcontentprovider org junit org junit test org mockito matchers org mockito mockito org mockito invocation invocation on mock invocationonmock org mockito stub bin g stubbing answer launchpad config installer test launchpadconfiginstallertest osgi installer osgiinstaller installer string registered get children returns null getchildrenreturnsnull check resource types checkresourcetypes string modes hash set hashset string launchpad content provider launchpadcontentprovider provider launchpad content provider launchpadcontentprovider map string string children hash map hashmap string string children resources config bundles install install dev install dev test install test dev install dev test install children config cfg config some file somefile properties dev cfg mode b cfgmodeb children dev cfg dev cfgdev properties children cfg mode b cfgmodeb cfg b cfgb properties children install install cfg install children install five a fivea cfg five b fiveb properties children install dev mars config april properties children install dev test dev test devtest cfg children install test dev test dev testdev cfg children install dev test another no anotherno cfg children install another yes anotheryes cfg children bundles foo jar bar jar wii jar iterator string get children getchildren string path get children returns null getchildrenreturnsnull simulate style provider list string result array list arraylist string string kids children path kids string kids split result add result iterator url get resource getresource string path url file path malformedurlexception mfe fail invalid url mfe input stream inputstream get resource as stream getresourceasstream string path byte array input stream bytearrayinputstream path get bytes getbytes assert registered assertregistered string resources list string expected arrays as list aslist resources string expected assert true asserttrue expecting registered registered registered delta registered size resources length delta list string unexpected array list arraylist string string registered expected unexpected add fail expected resources don match registered unexpected unexpected setup installer mockito mock osgi installer osgiinstaller registered hash set hashset string get children returns null getchildrenreturnsnull check resource types checkresourcetypes answer r collector rcollector answer answer invocation on mock invocationonmock invocation throwable assert equals assertequals launchpad invocation get arguments getarguments installable resource installableresource resources installable resource installableresource invocation get arguments getarguments installable resource installableresource resources string get id getid object hint get dictionary getdictionary get dictionary getdictionary installable resource installableresource installation hint hint hint get priority getpriority check resource types checkresourcetypes get type gettype registered add mockito do answer doanswer r collector rcollector installer register resources registerresources matchers any string anystring matchers installable resource installableresource test test no run modes testnorunmodes launchpad config installer launchpadconfiginstaller install installer provider modes assert registered assertregistered cfg config some file somefile properties install cfg five a fivea cfg five b fiveb properties test test another mode testanothermode string run modes runmodes hash set hashset string run modes runmodes add launchpad config installer launchpadconfiginstaller install installer provider run modes runmodes assert registered assertregistered cfg config some file somefile properties install cfg five a fivea cfg five b fiveb properties another yes anotheryes cfg test test dev run mode testdevrunmode check resource types checkresourcetypes string run modes runmodes hash set hashset string run modes runmodes add dev launchpad config installer launchpadconfiginstaller install installer provider run modes runmodes assert registered assertregistered cfg tproperties config tproperties some file somefile tproperties properties tproperties install cfg tfile five a fivea cfg tfile five b fiveb properties tfile cfg dev cfgdev properties tproperties mars config tfile april properties tfile test test dev test run modes testdevtestrunmodes string run modes runmodes hash set hashset string run modes runmodes add dev run modes runmodes add test launchpad config installer launchpadconfiginstaller install installer provider run modes runmodes assert registered assertregistered cfg config some file somefile properties install cfg cfg dev cfgdev properties five a fivea cfg five b fiveb properties mars config april properties dev test devtest cfg test dev testdev cfg test test old style testoldstyle get children returns null getchildrenreturnsnull launchpad config installer launchpadconfiginstaller install installer provider modes assert registered assertregistered