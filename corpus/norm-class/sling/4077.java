licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons json sling org junit assert equals assertequals org mockito matchers org mockito mockito java byte array input stream bytearrayinputstream java input stream inputstream java text date format dateformat java text simple date format simpledateformat java util array list arraylist java util calendar java util hash map hashmap java util list java util locale java util map java util time zone timezone java util uuid org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource value map valuemap org apache sling api wrappers value map decorator valuemapdecorator org apache sling commons json json array jsonarray org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org junit org junit test org junit runner run with runwith org mockito mock org mockito mockito org mockito run ners runners mockito unit runner mockitojunitrunner run with runwith mockito unit runner mockitojunitrunner json object creator test jsonobjectcreatortest mock resource resource mock resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver child resource resolver childresourceresolver map string object props string resource test resource testresource string path resource object object nchildren string ecma format eee mmm yyyy gmt setup props hash map hashmap string object props default property defaultproperty default value defaultvalue list resource empty array list arraylist resource child resource resolver childresourceresolver list children listchildren resource then return thenreturn empty iterator list resource children array list arraylist resource nchildren map string object child props childprops hash map hashmap string object string child child props childprops resource mockito mock resource adapt to adaptto value map valuemap then return thenreturn value map decorator valuemapdecorator child props childprops get resource resolver getresourceresolver then return thenreturn child resource resolver childresourceresolver get path getpath then return thenreturn path children add resource resolver resourceresolver list children listchildren resource then return thenreturn children iterator resource get resource resolver getresourceresolver then return thenreturn resource resolver resourceresolver resource get path getpath then return thenreturn path assert get assertget object data json exception jsonexception assert get assertget data assert get assertget object data object expected json exception jsonexception string key uuid randomuuid to string tostring props clear props key data resource adapt to adaptto value map valuemap then return thenreturn value map decorator valuemapdecorator props json object jsonobject json object creator jsonobjectcreator create resource string get key getkey data input stream inputstream key key object to expect toexpect expected data expected to expect toexpect string assert equals assertequals to expect toexpect get key getkey to string tostring assert equals assertequals to expect toexpect get key getkey test test simple types testsimpletypes json exception jsonexception assert get assertget bar assert get assertget assert get assertget assert get assertget assert get assertget system current time millis currenttimemillis test test string value teststringvalue json exception jsonexception string string resource adapt to adaptto string then return thenreturn json object jsonobject json object creator jsonobjectcreator create resource assert equals assertequals resource test test string array teststringarray json exception jsonexception string values resource adapt to adaptto string then return thenreturn values json object jsonobject json object creator jsonobjectcreator create resource assert equals assertequals getjsonarray resource assert equals assertequals getjsonarray resource test test array testarray json exception jsonexception string values json array jsonarray json array jsonarray assert get assertget values to string tostring test test empty array testemptyarray json exception jsonexception values assert get assertget values test test calendar testcalendar json exception jsonexception calendar now calendar nowcalendar calendar get instance getinstance string now string nowstring simple date format simpledateformat ecma format json object creator jsonobjectcreator format locale format now calendar nowcalendar get time gettime assert get assertget now calendar nowcalendar now string nowstring test test calendar time zones testcalendartimezones json exception jsonexception offsets offset offsets string tz id tzid time zone timezone get available ds getavailableids offset time zone timezone time zone timezone get time zone gettimezone tz id tzid calendar cal calendar get instance getinstance date format dateformat fmt simple date format simpledateformat ecma format locale english fmt set time zone settimezone string now string nowstring fmt format cal get time gettime assert get assertget cal now string nowstring test test stream teststream json exception jsonexception bytes get bytes getbytes input stream inputstream stream byte array input stream bytearrayinputstream bytes todo don actual length assert get assertget stream test test children testchildren json exception jsonexception resource adapt to adaptto value map valuemap then return thenreturn value map decorator valuemapdecorator props json object jsonobject json object creator jsonobjectcreator create resource nchildren string child assert equals assertequals getjsonobject