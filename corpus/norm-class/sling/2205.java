licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets post impl operations java util iterator java util list javax jcr item javax jcr node javax jcr repository exception repositoryexception javax jcr session javax servlet http http servlet response httpservletresponse org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource resource org apache sling api resource resource util resourceutil org apache sling servlets post abstract post operation abstractpostoperation org apache sling servlets post modification org apache sling servlets post post response postresponse org apache sling servlets post sling post constants slingpostconstants org apache sling servlets post versioning configuration versioningconfiguration code abstract copy move operation abstractcopymoveoperation code base close link copy operation copyoperation link move operation moveoperation classes implementing common g commong behaviour abstract copy move operation abstractcopymoveoperation abstract post operation abstractpostoperation override do run dorun sling http servlet request slinghttpservletrequest request post response postresponse response list modification repository exception repositoryexception session session request get resource resolver getresourceresolver adapt to adaptto session versioning configuration versioningconfiguration versioning configuration versioningconfiguration get versioning configuration getversioningconfiguration request resource resource request get resource getresource string source resource get path getpath ensure dest empty absolute string dest request get parameter getparameter sling post constants slingpostconstants dest dest dest length illegal argument exception illegalargumentexception unable process get operation name getoperationname missing destination register path ends trailing slash trailing slash trailingslash dest ends with endswith ensure destination absolute normalized path dest starts with startswith dest resource util resourceutil get parent getparent source dest dest resource util resourceutil normalize dest dest remove and validate workspace removeandvalidateworkspace dest session destination parent string dst parent dstparent trailing slash trailingslash dest resource util resourceutil get parent getparent dest delete destination exists trailing slash trailingslash session item exists itemexists dest string replace string replacestring request get parameter getparameter sling post constants slingpostconstants replace is replace isreplace equals ignore case equalsignorecase replace string replacestring is replace isreplace response set status setstatus http servlet response httpservletresponse precondition failed get operation name getoperationname resource dest destination exists check out if necessary checkoutifnecessary session get item getitem dest get parent getparent versioning configuration versioningconfiguration descendant current node dst parent dstparent equals session item exists itemexists dst parent dstparent check out if necessary checkoutifnecessary node session get item getitem dst parent dstparent versioning configuration versioningconfiguration response set status setstatus http servlet response httpservletresponse precondition failed get operation name getoperationname resource dest parent destination exist destination newly created create request response set create request setcreaterequest iterator resource resources get apply to resources getapplytoresources request item dest item destitem resources ensure item underlying request resource item item resource adapt to adaptto item item response set status setstatus http servlet response httpservletresponse missing source resource get operation name getoperationname string dst name dstname trailing slash trailingslash resource util resourceutil get name getname dest dest item destitem execute item dst parent dstparent dst name dstname versioning configuration versioningconfiguration multiple apply to applyto requires trailing slash destination trailing slash trailingslash illegal argument exception illegalargumentexception app lying applying get operation name getoperationname multiple resources requires trailing slash destination multiple copy created response set create request setcreaterequest resources has next hasnext resource apply to applyto resources item item apply to applyto adapt to adaptto item item execute item dst parent dstparent versioning configuration versioningconfiguration dest item destitem session get item getitem dest apply ordering parameter order node ordernode request dest item destitem returns log status messages string get operation name getoperationname executes operation param response code html response htmlresponse code record success operation param source source item param dest parent destparent absolute path parent target item param dest name destname target item code dest parent destparent code code code code source code target item repository exception repositoryexception thrown error occurrs executing operation item execute list modification item source string dest parent destparent string dest name destname versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception