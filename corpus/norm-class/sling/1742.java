licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing tools sling org junit assert not null assertnotnull java i o exception ioexception java input stream inputstream java unsupported encoding exception unsupportedencodingexception java net uri java util hash map hashmap java util map java util stack org apache http header org apache http http entity httpentity org apache http http response httpresponse org apache http client methods http delete httpdelete org apache http client methods http put httpput org apache http client methods http request base httprequestbase org apache http entity input stream entity inputstreamentity org apache http entity mime multipart entity multipartentity org apache http entity mime content string body stringbody org apache http impl client default http client defaulthttpclient org apache sling testing tools http request builder requestbuilder org apache sling testing tools http request executor requestexecutor simple sling client created int egration integration tests general purpose sling client slingclient string location header location string http prefix http request executor requestexecutor executor request builder requestbuilder builder string sling server url slingserverurl string username string password http any method httpanymethod http request base httprequestbase uri uri string method http any method httpanymethod string method string uri string uristring uri uri create uri string uristring method method override string get method getmethod method override uri geturi uri sling client slingclient string sling server url slingserverurl string username string password sling server url slingserverurl sling server url slingserverurl username username password password builder request builder requestbuilder sling server url slingserverurl executor request executor requestexecutor default http client defaulthttpclient create node path optional properties list string arguments odd values arguments values string create node createnode string path string properties i o exception ioexception map string object props extract map extractmap properties create node createnode path props create node path optional properties param path post request sling server param properties properties created node actual path node created string create node createnode string path map string object properties unsupported encoding exception unsupportedencodingexception i o exception ioexception string actual path actualpath multipart entity multipartentity entity multipart entity multipartentity add sling post options entity add part addpart redirect string body stringbody entity add part addpart display extension displayextension string body stringbody add user properties properties map entry string object properties entry set entryset entity add part addpart get key getkey string body stringbody get value getvalue to string tostring http response httpresponse response executor execute builder build post request buildpostrequest path with entity withentity entity with credentials withcredentials username password assert status assertstatus get response getresponse header location response get first header getfirstheader location header assert not null assertnotnull expecting location header response location actual path actualpath location to path locationtopath location get value getvalue actual path actualpath convert location node path string location to path locationtopath string location header value locationheadervalue location header value locationheadervalue starts with startswith sling server url slingserverurl location header value locationheadervalue substring sling server url slingserverurl length location header value locationheadervalue starts with startswith http prefix illegal argument exception illegalargumentexception unexpected location header location header value locationheadervalue start sling server url slingserverurl starting http prefix location header value locationheadervalue map string object extract map extractmap string properties map string object props properties properties length props hash map hashmap string object properties length illegal argument exception illegalargumentexception odd number properties invalid properties length properties length props properties properties props updates node path optional properties list string arguments odd values arguments values set properties setproperties string path string properties i o exception ioexception map string object props extract map extractmap properties set properties setproperties path props updates node path optional properties set properties setproperties string path map string object properties i o exception ioexception multipart entity multipartentity entity multipart entity multipartentity add user properties properties map entry string object properties entry set entryset entity add part addpart get key getkey string body stringbody get value getvalue to string tostring http response httpresponse response executor execute builder build post request buildpostrequest path with entity withentity entity with credentials withcredentials username password assert status assertstatus get response getresponse delete supplied path delete string path i o exception ioexception executor execute builder build other request buildotherrequest http delete httpdelete builder build url buildurl path with credentials withcredentials username password assert status assertstatus upload request param path path uploaded file param data content param length unknown param create folders createfolders int ermediate intermediate folders created mkdirs upload string path input stream inputstream data length create folders createfolders i o exception ioexception http entity httpentity input stream entity inputstreamentity data length create folders createfolders mkdirs get parent path getparentpath path executor execute builder build other request buildotherrequest http put httpput builder build url buildurl path with entity withentity with credentials withcredentials username password assert status assertstatus create path parent folders mkcol mkdirs string path i o exception ioexception call mkdir parent paths starting top most topmost stack string parents stack string path get parent path getparentpath path path length exists path parents push path path get parent path getparentpath path parents is empty isempty mkdir parents pop create path mkcol mkdir string path i o exception ioexception exists path executor execute builder build other request buildotherrequest http any method httpanymethod mkcol builder build url buildurl path with credentials withcredentials username password assert status assertstatus exists string path i o exception ioexception status executor execute builder build get request buildgetrequest path json with credentials withcredentials username password get response getresponse get status line getstatusline get status code getstatuscode status parent path path empty string path string get parent path getparentpath string path pos path last index of lastindexof pos path substring pos