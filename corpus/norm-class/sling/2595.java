licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal org mockito matchers any string anystring org mockito mockito mock org mockito mockito javax jcr repository exception repositoryexception javax jcr session javax jcr workspace javax jcr observation event javax jcr observation event iterator eventiterator javax jcr observation observation manager observationmanager org apache sling jcr api sling repository slingrepository org junit org junit ignore org junit test org osgi framework bundle context bundlecontext org osgi framework invalid syntax exception invalidsyntaxexception org osgi framework service reference servicereference org osgi service event event admin eventadmin test asserts jcr resource listener jcrresourcelistener scales arbitrary number events jcr resource listener scala bility test jcrresourcelistenerscalabilitytest jcr resource listener jcrresourcelistener jcr resource listener jcrresourcelistener event iterator eventiterator events set up setup repository exception repositoryexception invalid syntax exception invalidsyntaxexception observation manager observationmanager observation manager observationmanager mock observation manager observationmanager workspace workspace mock workspace workspace get observation manager getobservationmanager then return thenreturn observation manager observationmanager session session mock session session get workspace getworkspace then return thenreturn workspace sling repository slingrepository repository mock sling repository slingrepository repository login administrative loginadministrative then return thenreturn session event admin eventadmin event admin eventadmin mock event admin eventadmin service reference servicereference service ref serviceref mock service reference servicereference service reference servicereference service refs servicerefs service reference servicereference service ref serviceref bundle context bundlecontext bundle context bundlecontext mock bundle context bundlecontext bundle context bundlecontext get service references getservicereferences any string anystring any string anystring then return thenreturn service refs servicerefs bundle context bundlecontext get service getservice service ref serviceref then return thenreturn event admin eventadmin jcr resource listener jcrresourcelistener jcr resource listener jcrresourcelistener observation listener support observationlistenersupport bundle context bundlecontext repository path mapper impl pathmapperimpl event event mock mock event mockevent events mock event iterator eventiterator events has next hasnext then return thenreturn event get path getpath then call real method thencallrealmethod event get type gettype then return thenreturn event node events next event nextevent then return thenreturn event fixme sling ignore sling test test many events testmanyevents repository exception repositoryexception interrupted exception interruptedexception invalid syntax exception invalidsyntaxexception jcr resource listener jcrresourcelistener on event onevent events mock event mockevent event count override string get path getpath repository exception repositoryexception path count