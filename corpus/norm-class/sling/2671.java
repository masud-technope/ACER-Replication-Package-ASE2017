licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad app java buffered reader bufferedreader java buffered writer bufferedwriter java file java file reader filereader java file writer filewriter java io exception ioexception java input stream reader inputstreamreader java line number reader linenumberreader java output stream writer outputstreamwriter java lang management lock info lockinfo java lang management management factory managementfactory java lang management monitor info monitorinfo java lang management thread info threadinfo java lang management threadmxbean java net connect exception connectexception java net inet socket address inetsocketaddress java net server socket serversocket java net socket java util array list arraylist java util arrays java util hash set hashset java util random java util code control listener controllistener code helper link main support sling standalone application process communication client server sides tcp based communication channel control running sling application server side list ens listens commands config urable configurable host port end ash endash code localhost code end ash endash supporting commands table command description code status code request status connection created server client assumes sling running code code requests sling shutdown table control listener controllistener runnable command client sling shutdown string command command client check status server string command status status command client request thread dump string command threads threads response server command executed string response status response server shutting string response stopping stopping listen string listen port listen connect select randomly listen port reference main shutdown request main sling main slingmain string listen spec listenspec string secret key secretkey inet socket address inetsocketaddress socket address socketaddress thread shutdown thread shutdownthread creates instance control support host address port number socket defined code listen spec listenspec code parameter parameter defined code host port code parameter empty code code defaults localhost host missing defaults localhost param sling main slingmain main reference required instance server side listen remote commands argument code code param listen spec listenspec specification host port socket connection format parameter control listener controllistener main sling main slingmain string listen spec listenspec sling main slingmain sling main slingmain socket address socketaddress get socket address getsocketaddress listen spec listenspec select new port selectnewport listen spec listenspec listen spec listenspec server side control connection starting thread list ening listening host port configured setup instance listen file config file configfile get config file getconfigfile config file configfile can read canread status server statusserver server running fail main error sling active sling main slingmain get sling home getslinghome config file configfile delete thread listener thread listener set daemon setdaemon listener set name setname apache sling control listener inactive listener start client side control connection sending command shutdown sling shutdown server shutdownserver send command sendcommand command client side control connection sending command check sling active status server statusserver send command sendcommand command status client side control connection sending command retrieve thread dump dump threads dumpthreads send command sendcommand command threads runnable server thread receiving commands clients acting configure server socket serversocket server server server socket serversocket server bind socket address socketaddress write port to config file writeporttoconfigfile get config file getconfigfile inet socket address inetsocketaddress server get inet address getinetaddress server get local port getlocalport secret key secretkey thread current thread currentthread set name setname apache sling control listener server get inet address getinetaddress server get local port getlocalport main info apache sling control listener started io exception ioexception ioe main error failed start apache sling control listener ioe delay socket server accept io exception ioexception ioe delay processing unsuccessful attempts delay main info get remote socket address getremotesocketaddress delay delay thread sleep delay interrupted exception interruptedexception string command line commandline read line readline command line commandline string msg err missing command write line writeline msg blank command line commandline index of indexof blank string msg err missing key write line writeline msg secret key secretkey equals command line commandline substring blank string msg err wrong key write line writeline msg delay delay delay string command command line commandline substring blank main info get remote socket address getremotesocketaddress command command equals command shutdown thread shutdownthread write line writeline response stopping shutdown thread shutdownthread thread apache sling control listener shutdown sling main slingmain do stop dostop server close io exception ioexception ignore shutdown thread shutdownthread start write line writeline response command status equals command write line writeline shutdown thread shutdownthread response response stopping command threads equals command dump threads dumpthreads string msg err command write line writeline msg close io exception ioexception ignore io exception ioexception ioe main error failure reading client ioe server close io exception ioexception ignore get config file getconfigfile delete stopped thread terminates daemon threads active happen force main info apache sling terminated exiting java sling main slingmain terminatevm socket support dump threads dumpthreads socket socket io exception ioexception threadmxbean thread bean threadbean management factory managementfactory getthreadmxbean thread info threadinfo thread infos threadinfos thread bean threadbean dump all threads dumpallthreads thread info threadinfo thread thread infos threadinfos print thread printthread socket thread add locked sync hronizers synchronizers lock info lockinfo locks thread get locked synchronize rs getlockedsynchronizers write line writeline socket write line writeline socket locked own able ownable sync hronizers synchronizers locks length lock info lockinfo locks write line writeline socket string format locked format lock info formatlockinfo get class name getclassname get identity hash code getidentityhashcode write line writeline socket empty separator write line writeline socket dead locked deadlocked thread bean threadbean is synchronizer usage supported issynchronizerusagesupported dead locked deadlocked thread bean threadbean find dead locked threads finddeadlockedthreads dead locked deadlocked thread bean threadbean find monitor dead locked threads findmonitordeadlockedthreads dead locked deadlocked thread info threadinfo thread bean threadbean get thread info getthreadinfo dead locked deadlocked thread info threadinfo dl set dlset hash set hashset thread info threadinfo arrays as list aslist deadlock count deadlockcount thread info threadinfo current dl set dlset remove current find record single deadlock array list arraylist thread info threadinfo loop array list arraylist thread info threadinfo loop add current thread info threadinfo can d cand can d cand get thread id getthreadid current get lock owner id getlockownerid current dl set dlset remove can d cand can d cand current deadlock count deadlockcount print deadlock write line writeline socket java level deadlock write line writeline socket thread info threadinfo thread loop write line writeline socket string format thread get thread name getthreadname thread get thread id getthreadid write line writeline socket string format waiting format lock info formatlockinfo thread get lock info getlockinfo get class name getclassname thread get lock info getlockinfo get identity hash code getidentityhashcode write line writeline socket string format held thread get lock owner name getlockownername thread get lock owner id getlockownerid write line writeline socket write line writeline socket java stack threads listed write line writeline socket thread info threadinfo thread loop print thread printthread socket thread write line writeline socket thread waiting lock monitor object java lang object held thread thread waiting lock monitor object java lang object held thread write line writeline socket string format dead locks deadlocks deadlock count deadlockcount write line writeline socket response string format lock info formatlockinfo string class name classname object id objectid string format object id objectid class name classname print thread printthread socket socket thread info threadinfo thread io exception ioexception write line writeline socket string format thread get thread name getthreadname thread get thread id getthreadid write line writeline socket string format java lang thread thread get thread state getthreadstate monitor info monitorinfo monitors thread get locked monitors getlockedmonitors stack trace element stacktraceelement trace thread get stack trace getstacktrace trace length stack trace element stacktraceelement ste trace ste is native method isnativemethod write line writeline socket string format method ste get class name getclassname ste get method name getmethodname write line writeline socket string format ste get class name getclassname ste get method name getmethodname ste get file name getfilename ste get line number getlinenumber thread get lock info getlockinfo write line writeline socket string format waiting format lock info formatlockinfo thread get lock info getlockinfo get class name getclassname thread get lock info getlockinfo get identity hash code getidentityhashcode thread get lock owner id getlockownerid string format owned thread get lock owner name getlockownername thread get lock owner id getlockownerid monitor info monitorinfo monitors get locked stack depth getlockedstackdepth write line writeline socket string format locked format lock info formatlockinfo get class name getclassname get identity hash code getidentityhashcode s ends sends command server configured socket address logs reply param command command send code indicating success sending command send command sendcommand string command configure secret key secretkey main info missing secret key protect sending command socket address socketaddress lsb code unknown status socket socket socket socket socket connect socket address socketaddress write line writeline socket secret key secretkey command string result read line readline socket main info command socket address socketaddress result lsb code fine connect exception connectexception main info apache sling running socket address socketaddress io exception ioexception ioe main error failed sending command socket address socketaddress ioe socket socket close io exception ioexception ignore main info socket address send command lsb code unknown status string read line readline socket socket io exception ioexception buffered reader bufferedreader buffered reader bufferedreader input stream reader inputstreamreader socket get input stream getinputstream utf string builder stringbuilder string builder stringbuilder string read line readline starts with startswith substring length append append to string tostring write line writeline socket socket string io exception ioexception main info socket get remote socket address getremotesocketaddress write line writeline socket write line writeline socket socket string io exception ioexception buffered writer bufferedwriter buffered writer bufferedwriter output stream writer outputstreamwriter socket get output stream getoutputstream utf write write flush read port config file port configure from config file fromconfigfile result from config file fromconfigfile file config file configfile get config file getconfigfile config file configfile can read canread file reader filereader file reader filereader config file configfile line number reader linenumberreader lnr line number reader linenumberreader socket address socketaddress get socket address getsocketaddress lnr read line readline secret key secretkey lnr read line readline result io exception ioexception ignore close io exception ioexception ignore socket address socketaddress get socket address getsocketaddress listen spec listenspec secret key secretkey generate key generatekey result result string generate key generatekey string abc def ghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz len length random random system current time millis currenttimemillis system nano time nanotime length char at charat next int nextint len string control port file file get config file getconfigfile file config dir configdir file sling main slingmain get sling home getslinghome conf file config dir configdir control port controlport inet socket address inetsocketaddress get socket address getsocketaddress string listen spec listenspec string address port listen spec listenspec address listen port listen port colon listen spec listenspec index of indexof colon address listen port integer parse int parseint listen spec listenspec address listen spec listenspec substring colon port integer parse int parseint listen spec listenspec substring colon inet socket address inetsocketaddress add r addr inet socket address inetsocketaddress address port add r addr is unresolved isunresolved add r addr main error unknown host listen spec listenspec number format exception numberformatexception nfe main error parse port number listen spec listenspec write port to config file writeporttoconfigfile file config file configfile inet socket address inetsocketaddress socket address socketaddress string secret key secretkey config file configfile get parent file getparentfile mkdirs file writer filewriter file writer filewriter config file configfile write socket address socketaddress get address getaddress get host address gethostaddress write write string value of valueof socket address socketaddress get port getport write write secret key secretkey write io exception ioexception ignore close io exception ioexception ignore