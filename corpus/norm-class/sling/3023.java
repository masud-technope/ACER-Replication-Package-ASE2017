licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr base util java util hashtable javax jcr repository javax naming initial context initialcontext org apache jackrabbit rmi client client repository factory clientrepositoryfactory org apache jackrabbit rmi client local adapter factory localadapterfactory org apache jackrabbit rmi jackrabbit jackrabbit client adapter factory jackrabbitclientadapterfactory org apache jackrabbit rmi remote remote repository remoterepository org slf logger org slf logger factory loggerfactory access repository jndi rmi repository accessor repositoryaccessor logger log logger factory loggerfactory get logger getlogger get class getclass prefix rmi repository url s urls string rmi prefix rmi prefix jndi repository url s urls string jndi prefix jndi property jcr client server bundles override configuration settings connect repository sling sling string repository url override property sling repository url access repository jndi jndi context jndicontext successful rmi param repository name repositoryname jndi rmi url start rmi repository param jndi context jndicontext jndi repository repository get repository getrepository string repository name repositoryname hashtable string object jndi context jndicontext repository result string jndi context jndicontext jndi context jndicontext size log info jndi context jndicontext empty jndi log debug acquire repository repository name repositoryname jndi context jndi context jndicontext jndi class loader classloader thread current thread currentthread get context class loader getcontextclassloader thread current thread currentthread set context class loader setcontextclassloader get class getclass get class loader getclassloader initial context initialcontext initial context initialcontext initial context initialcontext jndi context jndicontext object repo object repoobject initial context initialcontext lookup repository name repositoryname repo object repoobject repository result repository repo object repoobject log info acquired repository repository name repositoryname jndi repo object repoobject remote repository remoterepository remote repository remoterepository remote repo remoterepo remote repository remoterepository repo object repoobject local adapter factory localadapterfactory laf get local adapter factory getlocaladapterfactory result laf get repository getrepository remote repo remoterepo log info acquired remote repository remoterepository repository name repositoryname jndi log info repository repository name repositoryname acquired jdni implement required interfaces repo object repoobject get class getclass get name getname throwable log info unable acquire repository repository name repositoryname jndi context jndi context jndicontext thread current thread currentthread set context class loader setcontextclassloader result repository name repositoryname repository name repositoryname starts with startswith rmi prefix log info repository start rmi prefix rmi rmi log debug acquire repository repository name repositoryname rmi client repository factory clientrepositoryfactory crf get client repository factory getclientrepositoryfactory result crf get repository getrepository repository name repositoryname log info acquired repository repository name repositoryname rmi throwable log info unable acquire repository repository name repositoryname rmi result log info unable acquire repository repository name repositoryname result acquire repository url param url rmi rmi url jndi jndi jndi repository colon comma separated list jndi context values pre jndi jackrabbit java naming factory initial org some class someclass java naming provider url http foo pre null pointer exception nullpointerexception code url code code code repository get repository from l getrepositoryfromurl string url url null pointer exception nullpointerexception url url starts with startswith jndi prefix parse jndi url extract repository context string hashtable string object jndi context jndicontext hashtable string object string url no prefix urlnoprefix url substring jndi prefix length colon pos colonpos url no prefix urlnoprefix index of indexof colon pos colonpos url no prefix urlnoprefix url no prefix urlnoprefix substring colon pos colonpos string entry str entrystr url no prefix urlnoprefix substring colon pos colonpos split string entry entry str entrystr split entry length jndi context jndicontext entry entry get repository getrepository jndi context jndicontext url get repository getrepository url returns code local adapter factory localadapterfactory code convert jackrabbit jcr rmi remote objects local jcr api objects method returns instance code jackrabbit client adapter factory jackrabbitclientadapterfactory code accessing jackrabbit jackrabbit based repositories rmi extensions overwrite method implementation local adapter factory localadapterfactory get local adapter factory getlocaladapterfactory jackrabbit client adapter factory jackrabbitclientadapterfactory returns code client repository factory clientrepositoryfactory code access remote jcr repository rmi method creates instance code client repository factory clientrepositoryfactory code initialized code local adapter factory localadapterfactory code returned link get local adapter factory getlocaladapterfactory method extensions overwrite method extension jackrabbit jcr rmi code client repository factory clientrepositoryfactory code client repository factory clientrepositoryfactory get client repository factory getclientrepositoryfactory client repository factory clientrepositoryfactory get local adapter factory getlocaladapterfactory