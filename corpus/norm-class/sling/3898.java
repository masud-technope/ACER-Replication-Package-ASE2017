licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock osgi org junit assert equals assertequals org junit assert not null assertnotnull org junit assert null assertnull org junit assert same assertsame org mockito mockito mock java util dictionary java util hashtable org junit org junit test org osgi framework bundle org osgi framework service reference servicereference org osgi service component component context componentcontext mock component context test mockcomponentcontexttest component context componentcontext under test undertest set up setup under test undertest mock osgi mockosgi new component context newcomponentcontext test test bundle context testbundlecontext assert not null assertnotnull under test undertest get bundle context getbundlecontext test test initial properties testinitialproperties assert equals assertequals under test undertest get properties getproperties size test test provided properties testprovidedproperties dictionary string object props hashtable string object props prop props prop component context componentcontext component context with properties componentcontextwithproperties mock osgi mockosgi new component context newcomponentcontext props dictionary context props contextprops component context with properties componentcontextwithproperties get properties getproperties assert equals assertequals context props contextprops size assert equals assertequals context props contextprops prop assert equals assertequals context props contextprops prop test test loc ate service testlocateservice prepare test service string clazz string get name getname object service object under test undertest get bundle context getbundlecontext register service registerservice clazz service service reference servicereference under test undertest get bundle context getbundlecontext get service reference getservicereference clazz test locate service object located service locatedservice under test undertest locate service locateservice assert same assertsame service located service locatedservice test test ignored methods testignoredmethods under test undertest enable component enablecomponent my component mycomponent under test undertest disable component disablecomponent my component mycomponent test test get using bundle testgetusingbundle test context bundle assert null assertnull under test undertest get using bundle getusingbundle test context bundle bundle using bundle usingbundle mock bundle component context componentcontext context with using bundle contextwithusingbundle mock osgi mockosgi component context componentcontext using bundle usingbundle using bundle usingbundle build assert same assertsame using bundle usingbundle context with using bundle contextwithusingbundle get using bundle getusingbundle