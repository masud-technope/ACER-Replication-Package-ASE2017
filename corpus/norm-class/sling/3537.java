licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr base java lang reflect invocation handler invocationhandler java lang reflect invocation target exception invocationtargetexception java lang reflect method java lang reflect proxy java util dictionary javax jcr credentials javax jcr login exception loginexception javax jcr no such workspace exception nosuchworkspaceexception javax jcr repository javax jcr repository exception repositoryexception javax jcr session javax jcr simple credentials simplecredentials javax jcr javax jcr workspace org apache felix scr annotations component org apache felix scr annotations property org apache felix scr annotations reference org apache sling jcr api sling repository slingrepository org apache sling jcr base util repository accessor repositoryaccessor org apache sling service user mapping serviceusermapping service user mapper serviceusermapper org osgi framework bundle org osgi framework service factory servicefactory org osgi framework service registration serviceregistration org osgi service component component context componentcontext org osgi service log log service logservice org slf logger factory loggerfactory a qute aqute bnd annotation provider type providertype code abstract sling repository abstractslingrepository code implementation link sling repository slingrepository support attached repositories ensuring live repository connection rec onnecting reconnecting needed impl ementations implementations code sling repository slingrepository code extend benefit implementation version bundle version registration repository services based base works diff erently differently calling bundle implement link login service loginservice string string method service registered service factory component registered service component decl arative declarative services handling registration code service factory servicefactory simply create instances solution service factory create proxy actual component object method calls routed exception link login service loginservice string string method routed internal method calling bundle additional argument support registration mechanism link register service registerservice method link get service registration interfaces getserviceregistrationinterfaces link get service registration properties getserviceregistrationproperties methods overwritten implementations link register service registerservice method calls methods interfaces properties service registration impl ementations implementations overwriting link register service registerservice method replace overwritten method overwriting link get service registration interfaces getserviceregistrationinterfaces link get service registration properties getserviceregistrationproperties methods deprecated api version bundle version link abstract sling repository manager abstractslingrepositorymanager link abstract sling repository abstractslingrepository deprecated provider type providertype component component abstract componentabstract abstract sling repository abstractslingrepository abstract name space mapping repository abstractnamespacemappingrepository sling repository slingrepository runnable string anonymous user anonymous string anonymous pass anonymous string admin user admin string admin pass admin compatibility login administrative loginadministrative enabled releases change login admin enabled property string property workspace default workspace defaultworkspace property anonymous user string property anonymous user anonymous property anonymous pass string property anonymous pass anonymous password property admin user string property admin user admin property admin pass string property admin pass admin password property bool value boolvalue login admin enabled string property login admin enabled admin login enabled number seconds wait consecutive checks repository active poll active number seconds wait consecutive checks repository active poll inactive property int value intvalue poll active string property poll active poll active property int value intvalue poll inactive string property poll inactive poll inactive minimum number seconds allowed poll times min poll reference log service logservice log reference service user mapper serviceusermapper service user mapper serviceusermapper component context componentcontext component context componentcontext repository repository service registration serviceregistration repository service repositoryservice string default workspace defaultworkspace string anon user anonuser anon pass anonpass string admin user adminuser admin pass adminpass disable login administrative disableloginadministrative poll int erval interval repository active poll time in active seconds polltimeinactiveseconds poll int erval interval repository active poll time active seconds polltimeactiveseconds repository checker task active field managed start repository pinger startrepositorypinger stop repository pinger stoprepositorypinger methods running background thread const antly constantly checking repository thread repository pinger repositorypinger abstract sling repository abstractslingrepository returns workspace code code meaning repository workspace declared sling rule enforced override string get default workspace getdefaultworkspace default workspace defaultworkspace set default workspace setdefaultworkspace string default workspace defaultworkspace bla nks blanks trimmed empty default workspace defaultworkspace default workspace defaultworkspace default workspace defaultworkspace trim default workspace defaultworkspace length default workspace defaultworkspace log log service logservice log debug set default workspace setdefaultworkspace setting workspace default workspace defaultworkspace default workspace defaultworkspace default workspace defaultworkspace logs anonymous user implementation simply returns result calling link login credentials string override session login login exception loginexception repository exception repositoryexception login override session login administrative loginadministrative string workspace repository exception repositoryexception disable login administrative disableloginadministrative log log service logservice log error sling repository slingrepository login administrative loginadministrative disabled sling repository slingrepository login service loginservice login exception loginexception log log service logservice log warning sling repository slingrepository login administrative loginadministrative deprecated sling repository slingrepository login service loginservice login administrative internal loginadministrativeinternal workspace method code login exception loginexception calling bundle disposition decide required service method overwritten extensions comments full details works bundle version override session login service loginservice string sub service name subservicename string workspace login exception loginexception repository exception repositoryexception log log service logservice log error login service loginservice bundle sling repository slingrepository service service factory servicefactory login exception loginexception override session login credentials credentials login exception loginexception repository exception repositoryexception login credentials override session login string workspace login exception loginexception no such workspace exception nosuchworkspaceexception repository exception repositoryexception login workspace override session login credentials credentials string workspace login exception loginexception no such workspace exception nosuchworkspaceexception repository exception repositoryexception stopped don retrieve session component context componentcontext get repository getrepository repository exception repositoryexception sling repository ready credentials credentials get anon credentials getanoncredentials anon user anonuser check workspace workspace workspace get default workspace getdefaultworkspace log log service logservice log debug login logging workspace workspace session session get repository getrepository login credentials workspace workspace workspace workspace string default workspace defaultworkspace session get workspace getworkspace get name getname log log service logservice log debug login default workspace defaultworkspace workspace set default workspace setdefaultworkspace default workspace defaultworkspace get name space aware session getnamespaceawaresession session no such workspace exception nosuchworkspaceexception nswe workspace workspace equals get default workspace getdefaultworkspace create workspace createworkspace workspace get repository getrepository login credentials workspace nswe runtime exception runtimeexception repository exception repositoryexception get message getmessage actual implementation link login service loginservice string string method account bundle calling method method overwritten extensions comments full details works param using bundle usingbundle bundle req uesting requesting access param sub service name subservicename sub service subservice code param workspace workspace access session authenticated service user login exception loginexception authentication fails user defined req uesting requesting service bundle repository exception repositoryexception general error occurrs creating session bundle version session login service loginservice bundle using bundle usingbundle string sub service name subservicename string workspace login exception loginexception repository exception repositoryexception string user name username service user mapper serviceusermapper get service user d getserviceuserid using bundle usingbundle sub service name subservicename user name username login exception loginexception derive user bundle using bundle usingbundle service sub service name subservicename simple credentials simplecredentials creds simple credentials simplecredentials user name username session admin admin login administrative internal loginadministrativeinternal workspace admin impersonate creds admin admin log out logout actual unprotected implementation administrative login methods int ernally internally admin istratively administratively login param workspace workspace login code link get default workspace getdefaultworkspace workspace administrative session repository exception repositoryexception error occurrs session login administrative internal loginadministrativeinternal string workspace repository exception repositoryexception credentials get administrative credentials getadministrativecredentials admin user adminuser login workspace param anon user anonuser user anon user credentials implementation represents anon user credentials get anon credentials getanoncredentials string anon user anonuser method overridden jackrabbit service bundle avoid anon password sling simple credentials simplecredentials anon user anonuser anon pass anonpass param admin user adminuser administrative user credentials implementation represents administrative user credentials get administrative credentials getadministrativecredentials string admin user adminuser method overridden jackrabbit service bundle avoid admin password sling simple credentials simplecredentials admin user adminuser admin pass adminpass javadoc javax jcr repository get descriptor getdescriptor java lang string override string get descriptor getdescriptor string repository repo get repository getrepository repo repo get descriptor getdescriptor log log service logservice log error get descriptor getdescriptor repository javadoc javax jcr repository get descriptor keys getdescriptorkeys override string get descriptor keys getdescriptorkeys repository repo get repository getrepository repo repo get descriptor keys getdescriptorkeys log log service logservice log error get descriptor keys getdescriptorkeys repository string inherit doc inheritdoc override get descriptor value getdescriptorvalue string key repository repo get repository getrepository repo repo get descriptor value getdescriptorvalue key log log service logservice log error get descriptor value getdescriptorvalue repository inherit doc inheritdoc override get descriptor values getdescriptorvalues string key repository repo get repository getrepository repo repo get descriptor values getdescriptorvalues key log log service logservice log error get descriptor values getdescriptorvalues repository inherit doc inheritdoc override is single value descriptor issinglevaluedescriptor string key repository repo get repository getrepository repo repo is single value descriptor issinglevaluedescriptor key log log service logservice log error is single value descriptor issinglevaluedescriptor repository inherit doc inheritdoc override is standard descriptor isstandarddescriptor string key repository repo get repository getrepository repo repo is standard descriptor isstandarddescriptor key log log service logservice log error is standard descriptor isstandarddescriptor repository logging log level string message log level message log level string message throwable log service logservice log log log component context componentcontext log log component context componentcontext get service reference getservicereference level message log log level message repository access returns instance link repository accessor repositoryaccessor access repository rmi jndi extensions method extension link repository accessor repositoryaccessor provide extended functionality repository accessor repositoryaccessor get repository accessor getrepositoryaccessor repository accessor repositoryaccessor acquires repository calling link org apache sling jcr base util repository accessor repositoryaccessor get repository from l getrepositoryfromurl string link org apache sling jcr base util repository accessor repositoryaccessor repository url override property framework configuration property property exists repository accessed property repository returned code code returned extensions overwrite method implementation specific acquisition semantics call base method implementation sees fit method code throwable code returns code code repository problems acquire repository caught log ged logged acquired jcr code repository code code code repository acquired repository acquire repository acquirerepository environment repository override url settings string override url overrideurl string component context componentcontext get properties getproperties repository accessor repositoryaccessor repository url override property override url overrideurl override url overrideurl component context componentcontext get bundle context getbundlecontext get property getproperty repository accessor repositoryaccessor repository url override property override url overrideurl override url overrideurl length log log service logservice log info acquire repository acquirerepository embedded repository property repository accessor repositoryaccessor repository url override property override url overrideurl acquiring repository url get repository accessor getrepositoryaccessor get repository from l getrepositoryfromurl override url overrideurl log log service logservice log debug acquire repository acquirerepository existing repository access method called repository acquired link acquire repository acquirerepository repository registered service impl ementations implementations overwrite method call base implementation param repository jcr code repository code setup setup repository setuprepository repository repository setup component context componentcontext get bundle context getbundlecontext registers component osg i osgi service types link get service registration interfaces getserviceregistrationinterfaces method properties link get service registration properties getserviceregistrationproperties method version bundle version method overwritten mechanism service registration service factory required fully implement link login service loginservice string string method comments full details works osg i osgi code service registration serviceregistration code object representing registered service service registration serviceregistration register service registerservice dictionary string object props get service registration properties getserviceregistrationproperties string interfaces get service registration interfaces getserviceregistrationinterfaces component context componentcontext get bundle context getbundlecontext register service registerservice interfaces service factory servicefactory override object get service getservice bundle bundle service registration serviceregistration registration sling repository proxy handler slingrepositoryproxyhandler create proxy createproxy interfaces abstract sling repository abstractslingrepository bundle override unget service ungetservice bundle bundle service registration serviceregistration registration object service work props service registration properties register repository service link register service registerservice method overwritten additional service registration properties recommended include properties returned method service registration properties register repository service link register service registerservice bundle version suppress warnings suppresswarnings unchecked dictionary string object get service registration properties getserviceregistrationproperties component context componentcontext get properties getproperties returns service types register repository service link register service registerservice interfaces returned accessible loader instance method overwritten additional types types returned base implementation included service types register repository service link register service registerservice bundle version string get service registration interfaces getserviceregistrationinterfaces string sling repository slingrepository get name getname repository get name getname returns repository underlying instance code code repository repository get repository getrepository repository checks code repository code implementation code repository spec desc code descriptor repository returns code code returned code code extensions overwrite method implement access checks contract method obeyed sense code code returned code repository code usable param repository jcr code repository code check availability code code code repository code code code accessible ping repository pingrepository repository repository repository repository get descriptor getdescriptor repository spec desc throwable log log service logservice log debug ping repository pingrepository repository repository fall unavailable ping current repository check admin login required sling works ping and check pingandcheck repository illegal state exception illegalstateexception repository result ping repository pingrepository repository session login administrative internal loginadministrativeinternal get default workspace getdefaultworkspace log out logout result repository exception repositoryexception log log log service logservice log info ping and check pingandcheck login administrative loginadministrative failed result unregisters service represented code service registration serviceregistration code method overwritten extensions service registration unregistered unregister service unregisterservice service registration serviceregistration service registration serviceregistration service registration serviceregistration unregister performs clean ups cleanups repository disposed link dispose repository disposerepository repository method method meant cleanup tasks repository disposed extensions overwrite call base implementation param repository tear down teardown repository repository tear down teardown disposes code repository code base implementation extensions overwrite special disposal operation required param repository dispose repository disposerepository repository repository scr int egration integration component context componentcontext get component context getcomponentcontext component context componentcontext method called overwritten implementations derived classes exception activate component context componentcontext component context componentcontext exception component context componentcontext component context componentcontext suppress warnings suppresswarnings unchecked dictionary string object properties component context componentcontext get properties getproperties set default workspace setdefaultworkspace get property getproperty properties property workspace anon user anonuser get property getproperty properties property anonymous user anonymous user anon pass anonpass get property getproperty properties property anonymous pass anonymous pass to char array tochararray admin user adminuser get property getproperty properties property admin user admin user admin pass adminpass get property getproperty properties property admin pass admin pass to char array tochararray disable login administrative disableloginadministrative get property getproperty properties property login admin enabled login admin enabled set poll time active setpolltimeactive get int property getintproperty properties property poll active set poll time in active setpolltimeinactive get int property getintproperty properties property poll inactive component instance start repository startrepository log log service logservice log info repository started log log service logservice log warning repository startup failed throwable log log service logservice log warning activate unexpected problem starting repository launch background repository checker start repository pinger startrepositorypinger method called overwritten implementations param component context componentcontext deactivate component context componentcontext component context componentcontext background thread stop repository pinger stoprepositorypinger ensure repository disposed repository repository service repositoryservice log log service logservice log info deactivate repository running for cing forcing shutdown stop repository stoprepository throwable log log service logservice log warning deactivate unexpected problem stop ping stopping repository component context componentcontext bind log bindlog log service logservice log log log unbind log unbindlog log service logservice log log log log internal string get property getproperty dictionary string object properties string string default value defaultvalue object prop properties prop string string prop default value defaultvalue get int property getintproperty dictionary string object properties string object prop properties prop number number prop int value intvalue prop integer decode string value of valueof prop int value intvalue number format exception numberformatexception nfe get property getproperty dictionary string object properties string default value defaultvalue object prop properties prop prop boolean value booleanvalue prop string value of valueof string prop default value defaultvalue create workspace createworkspace string workspace log log service logservice log info create workspace createworkspace requested workspace workspace exist create session tmp session tmpsession credentials get administrative credentials getadministrativecredentials admin user adminuser tmp session tmpsession get repository getrepository login workspace default ws defaultws tmp session tmpsession get workspace getworkspace default ws defaultws create workspace createworkspace workspace throwable log log service logservice log error create workspace createworkspace create requested workspace workspace tmp session tmpsession tmp session tmpsession log out logout fall failure background operation checking repository availability set poll time active setpolltimeactive seconds seconds min poll seconds poll active poll time active seconds polltimeactiveseconds seconds set poll time in active setpolltimeinactive seconds seconds min poll seconds poll inactive poll time in active seconds polltimeinactiveseconds seconds start repository pinger startrepositorypinger repository pinger repositorypinger ping running running create start thread repository pinger repositorypinger thread repository pinger repository pinger repositorypinger start stop repository pinger stoprepositorypinger thread terminating running thread running thread rp thread rpthread repository pinger repositorypinger rp thread rpthread clear repository pinger repositorypinger thread field repository pinger repositorypinger notify thread shut rp thread rpthread rp thread rpthread notify all notifyall wait seconds thread terminate rp thread rpthread join interrupted exception interruptedexception error thread running rp thread rpthread is alive isalive log log service logservice log error stop repository pinger stoprepositorypinger time d timed waiting thread rp thread rpthread terminate start repository startrepository log log service logservice log debug start repository startrepository calling acquire repository acquirerepository repository new repo newrepo acquire repository acquirerepository new repo newrepo ensure repository log log service logservice log debug start repository startrepository repository calling ping repository pingrepository ping repository pingrepository new repo newrepo repository new repo newrepo ping and check pingandcheck log log service logservice log debug start repository startrepository ping repository pingrepository ping and check pingandcheck successful calling setup repository setuprepository setup repository setuprepository new repo newrepo log log service logservice log debug start repository startrepository calling register service registerservice repository service repositoryservice register service registerservice log log service logservice log debug register service registerservice successful registration repository service repositoryservice ping succeeded ping and check pingandcheck fail drop repository situation restart scr atch scratch log log service logservice log debug ping repository pingrepository successful ping and check pingandcheck fails calling dispose repository disposerepository drop reference repository repository fail startup log log service logservice log debug start repository startrepository ping repository pingrepository failed calling dispose repository disposerepository ping ping and check pingandcheck failed dispose repository dispose repository disposerepository new repo newrepo throwable log log service logservice log error start repository startrepository uncaught throwable access repository calling stop repository stoprepository stop repository stoprepository stop repository stoprepository repository service repositoryservice log log service logservice log debug unregistering sling repository slingrepository service registration repository service repositoryservice unregister service unregisterservice repository service repositoryservice throwable log log service logservice log info stop repository stoprepository uncaught problem unregistering repository service repository service repositoryservice repository repository old repo oldrepo repository repository tear down teardown old repo oldrepo throwable log log service logservice log info stop repository stoprepository uncaught problem tearing repository dispose repository disposerepository old repo oldrepo throwable log log service logservice log info stop repository stoprepository uncaught problem disposing repository override start polling small faster system startup inc rease increase polling time poll time msec polltimemsec msec poll time factor polltimefactor object wait lock waitlock repository pinger repositorypinger running wait starting check wait lock waitlock debug logging sling log log service logservice log debug waiting poll time polltime seconds checking repository wait lock waitlock wait poll time msec polltimemsec interrupted exception interruptedexception new poll time newpolltime poll time msec polltimemsec running repository repo repository repo repository start start repository startrepository log log service logservice log info repository started new poll time newpolltime poll time active seconds polltimeactiveseconds msec ramp poll time max configured times new poll time newpolltime math min poll time msec polltimemsec poll time factor polltimefactor math max poll time in active seconds polltimeinactiveseconds poll time active seconds polltimeactiveseconds msec ping and check pingandcheck new poll time newpolltime poll time active seconds polltimeactiveseconds msec repository disappeared log log service logservice log info repository accessible unregistering service stop repository stoprepository new poll time newpolltime poll time in active seconds polltimeinactiveseconds msec new poll time newpolltime poll time msec polltimemsec poll time msec polltimemsec new poll time newpolltime log log service logservice log debug repository pinger int erval interval poll time msec polltimemsec msec repository thread terminating running log log service logservice log info repository pinger stop ping stopping request throwable log log service logservice log error repository pinger caught unexpected issue repository disposed thread log log service logservice log info stopping repository shutdown stop repository stoprepository code sling repository proxy handler slingrepositoryproxyhandler code proxy service interfaces link abstract sling repository abstractslingrepository implementation registered calls handed object code login service loginservice call routed code abstract sling repository abstractslingrepository login service loginservice bundle string string method influence logging calling bundle bundle version sling repository proxy handler slingrepositoryproxyhandler invocation handler invocationhandler method route string login service login service loginservice delegatee object calls routed abstract sling repository abstractslingrepository delegatee bundle proxy service instance bundle using bundle usingbundle creates proxy instance code delegatee object proxy handled instance code sling repository proxy handler slingrepositoryproxyhandler handler param interface names interfacenames list interfaces implement expose proxy param delegatee object route method calls param using bundle usingbundle bundle making proxy proxy client code code service interfaces loaded loader code delegatee object object create proxy createproxy string interface names interfacenames abstract sling repository abstractslingrepository delegatee bundle using bundle usingbundle classes create proxy class loader classloader delegatee get class getclass get class loader getclassloader interfaces interface names interfacenames length interfaces length interfaces load class loadclass interface names interfacenames class not found exception classnotfoundexception logger factory loggerfactory get logger getlogger sling repository proxy handler slingrepositoryproxyhandler error create proxy createproxy load interface names interfacenames create proxy invocation handler invocationhandler handler sling repository proxy handler slingrepositoryproxyhandler delegatee using bundle usingbundle proxy new proxy instance newproxyinstance interfaces handler sling repository proxy handler slingrepositoryproxyhandler abstract sling repository abstractslingrepository delegatee bundle using bundle usingbundle delegatee delegatee using bundle usingbundle using bundle usingbundle override object invoke object proxy method method object args throwable sling repository proxy handler slingrepositoryproxyhandler login service equals method get name getname args args length delegatee login service loginservice using bundle usingbundle string args string args abstract sling repository abstractslingrepository implementation method invoke delegatee args invocation target exception invocationtargetexception ite ite get target exception gettargetexception