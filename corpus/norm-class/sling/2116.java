licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons mime internal java buffered reader bufferedreader java io exception ioexception java input stream inputstream java input stream reader inputstreamreader java print stream printstream java net url java util array list arraylist java util dictionary java util hash map hashmap java util hashtable java util list java util map org apache felix scr annotations component org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations reference policy referencepolicy org apache felix scr annotations service org apache sling commons mime mime type provider mimetypeprovider org apache sling commons mime mime type service mimetypeservice org apache sling commons osgi osgi util osgiutil org osgi framework bundle org osgi framework bundle event bundleevent org osgi framework bundle listener bundlelistener org osgi framework constants org osgi framework service registration serviceregistration org osgi service component component context componentcontext org osgi service log log service logservice code mime type service impl mimetypeserviceimpl code off icial official implementation link mime type service mimetypeservice component metatype label mime service description mime service description service mime type service mimetypeservice property constants service description apache sling mime type service reference mime type provider mimetypeprovider reference interface referenceinterface mime type provider mimetypeprovider cardinality reference cardinality referencecardinality optional multiple policy reference policy referencepolicy dynamic mime type service impl mimetypeserviceimpl mime type service mimetypeservice bundle listener bundlelistener string core mime types meta inf core mime types string mime types meta inf mime types property unbounded property unbounded propertyunbounded array string prop mime types mime types reference cardinality reference cardinality referencecardinality optional unary policy reference policy referencepolicy dynamic log service logservice log service logservice map string string mime tab mimetab hash map hashmap string string map string string extension map extensionmap hash map hashmap string string mime type provider mimetypeprovider type providers typeproviders list mime type provider mimetypeprovider type provider list typeproviderlist array list arraylist mime type provider mimetypeprovider service registration serviceregistration web console plugin service webconsolepluginservice mime type service mimetypeservice string get mime type getmimetype string string ext substring last index of lastindexof ext ext to lower case tolowercase string type mime tab mimetab ext type mime type provider mimetypeprovider mtp get mime type providers getmimetypeproviders type mtp length type mtp get mime type getmimetype ext type string get extension getextension string mime type mimetype mime type mimetype compare lowercase mime type mimetype mime type mimetype to lower case tolowercase string ext extension map extensionmap mime type mimetype ext mime type provider mimetypeprovider mtp get mime type providers getmimetypeproviders ext mtp length ext mtp get extension getextension mime type mimetype ext register mime type registermimetype string mime type mimetype string extensions mime type mimetype mime type mimetype length extensions extensions length mime type mimetype mime type mimetype to lower case tolowercase string default extension defaultextension extension map extensionmap mime type mimetype string extension extensions extension extension length extension extension to lower case tolowercase string old mime type oldmimetype mime tab mimetab extension old mime type oldmimetype log log service logservice log debug register mime type registermimetype add mapping extension mime type mimetype mime tab mimetab extension mime type mimetype default extension defaultextension default extension defaultextension extension log log service logservice log info register mime type registermimetype ignoring mapping extension mime type mimetype mapping extension old mime type oldmimetype exists default extension defaultextension extension map extensionmap mime type mimetype default extension defaultextension register mime type registermimetype input stream inputstream mime tab stream mimetabstream io exception ioexception buffered reader bufferedreader buffered reader bufferedreader input stream reader inputstreamreader mime tab stream mimetabstream iso string read line readline ignore comment lines starts with startswith register mime type registermimetype scr implementation activate component context componentcontext context context get bundle context getbundlecontext add bundle listener addbundlelistener register core sling mime types bundle bundle context get bundle context getbundlecontext get bundle getbundle register mime type registermimetype bundle get entry getentry core mime types register mime type registermimetype bundle get entry getentry mime types register maps existing bundles bundle bundles context get bundle context getbundlecontext get bundles getbundles bundles length bundles get state getstate bundle resolved bundle starting bundle active bundle stopping bundles get bundle id getbundleid bundle get bundle id getbundleid register mime type registermimetype bundles get entry getentry mime types register configuration properties string config types configtypes osgi util osgiutil to string array tostringarray context get properties getproperties prop mime types config types configtypes string config type configtype config types configtypes register mime type registermimetype config type configtype mime type web console plugin mimetypewebconsoleplugin plugin mime type web console plugin mimetypewebconsoleplugin dictionary string string props hashtable string string props felix webconsole label mime type web console plugin mimetypewebconsoleplugin label props felix webconsole title mime type web console plugin mimetypewebconsoleplugin title props felix webconsole category sling props felix webconsole css mime type web console plugin mimetypewebconsoleplugin css web console plugin service webconsolepluginservice context get bundle context getbundlecontext register service registerservice javax servlet servlet plugin props throwable deactivate component context componentcontext context context get bundle context getbundlecontext remove bundle listener removebundlelistener web console plugin service webconsolepluginservice web console plugin service webconsolepluginservice unregister web console plugin service webconsolepluginservice bind mime type provider bindmimetypeprovider mime type provider mimetypeprovider mime type provider mimetypeprovider type provider list typeproviderlist type provider list typeproviderlist add mime type provider mimetypeprovider type providers typeproviders unbind mime type provider unbindmimetypeprovider mime type provider mimetypeprovider mime type provider mimetypeprovider type provider list typeproviderlist type provider list typeproviderlist remove mime type provider mimetypeprovider type providers typeproviders bundle listener bundlelistener bundle changed bundlechanged bundle event bundleevent event event get type gettype bundle event bundleevent resolved register mime type registermimetype event get bundle getbundle get entry getentry mime types plugin support map string string get mime map getmimemap mime tab mimetab map string string get extension map getextensionmap extension map extensionmap internal mime type provider mimetypeprovider get mime type providers getmimetypeproviders mime type provider mimetypeprovider list type providers typeproviders list type provider list typeproviderlist type providers typeproviders type provider list typeproviderlist to array toarray mime type provider mimetypeprovider type provider list typeproviderlist size list type providers typeproviders list register mime type registermimetype url mime types mimetypes mime types mimetypes input stream inputstream ins ins mime types mimetypes open stream openstream register mime type registermimetype ins io exception ioexception ioe log log service logservice log warning error occurred reading mime types mimetypes ioe ins ins close io exception ioexception ioe splits code code whitespace registers mime type mappings whitespace separated fields null pointer exception nullpointerexception code code code code register mime type registermimetype string string parts split parts length string extensions string parts length system arraycopy parts extensions extensions length register mime type registermimetype parts extensions log level string message throwable log service logservice log log service logservice log log log level message print stream printstream level log service logservice log error system err system println message print stack trace printstacktrace