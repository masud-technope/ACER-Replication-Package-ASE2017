licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock jcr org junit assert equals assertequals org junit assert false assertfalse org junit assert null assertnull java util list javax jcr node javax jcr repository exception repositoryexception javax jcr session javax jcr query invalid query exception invalidqueryexception javax jcr query query javax jcr query query manager querymanager javax jcr query query result queryresult javax jcr query row org apache commons lang string utils stringutils org junit org junit test google common collect immutable list immutablelist mock query manager test mockquerymanagertest session session query manager querymanager query manager querymanager list node sample nodes samplenodes set up setup repository exception repositoryexception session mock jcr mockjcr new session newsession query manager querymanager session get workspace getworkspace get query manager getquerymanager node root node rootnode session get root node getrootnode sample nodes samplenodes immutable list immutablelist root node rootnode add node addnode node root node rootnode add node addnode node root node rootnode add node addnode node sample nodes samplenodes size node node sample nodes samplenodes node set property setproperty string prop stringprop node set property setproperty int prop intprop sample nodes samplenodes set property setproperty optional string prop optionalstringprop opt value optvalue test test no query results testnoqueryresults repository exception repositoryexception query query query manager querymanager create query createquery dummy query jcr sql query result queryresult result query execute assert false assertfalse result get nodes getnodes has next hasnext test expected invalid query exception invalidqueryexception test invalid query language testinvalidquerylanguage repository exception repositoryexception query manager querymanager create query createquery dummy wurst suppress warnings suppresswarnings unchecked test test query results testqueryresults all querys allquerys repository exception repositoryexception mock jcr mockjcr set query result setqueryresult query manager querymanager sample nodes samplenodes query query query manager querymanager create query createquery query query jcr sql query result queryresult result query execute assert equals assertequals sample nodes samplenodes immutable list immutablelist copy of copyof result get nodes getnodes query query manager querymanager create query createquery query query jcr sql result query execute assert equals assertequals sample nodes samplenodes immutable list immutablelist copy of copyof result get nodes getnodes suppress warnings suppresswarnings unchecked test test query results testqueryresults specific query specificquery repository exception repositoryexception mock jcr mockjcr set query result setqueryresult query manager querymanager query query jcr sql sample nodes samplenodes query query query manager querymanager create query createquery query query jcr sql query result queryresult result query execute assert equals assertequals sample nodes samplenodes immutable list immutablelist copy of copyof result get nodes getnodes query query manager querymanager create query createquery query query jcr sql result query execute assert false assertfalse result get nodes getnodes has next hasnext suppress warnings suppresswarnings unchecked test test query results testqueryresults result handler resulthandler repository exception repositoryexception mock jcr mockjcr add query result handler addqueryresulthandler query manager querymanager mock query result handler mockqueryresulthandler override mock query result mockqueryresult execute query executequery mock query mockquery query string utils stringutils equals query get statement getstatement query mock query result mockqueryresult sample nodes samplenodes query query query manager querymanager create query createquery query query jcr sql query result queryresult result query execute assert equals assertequals sample nodes samplenodes immutable list immutablelist copy of copyof result get nodes getnodes query query manager querymanager create query createquery query query jcr sql result query execute assert false assertfalse result get nodes getnodes has next hasnext suppress warnings suppresswarnings unchecked test test query results testqueryresults multiple result handlers multipleresulthandlers repository exception repositoryexception list node sample nodes samplenodes immutable list immutablelist sample nodes samplenodes mock jcr mockjcr add query result handler addqueryresulthandler session mock query result handler mockqueryresulthandler override mock query result mockqueryresult execute query executequery mock query mockquery query string utils stringutils equals query get statement getstatement query mock query result mockqueryresult sample nodes samplenodes mock jcr mockjcr add query result handler addqueryresulthandler session mock query result handler mockqueryresulthandler override mock query result mockqueryresult execute query executequery mock query mockquery query string utils stringutils equals query get statement getstatement query mock query result mockqueryresult sample nodes samplenodes query query query manager querymanager create query createquery query query jcr sql query result queryresult result query execute assert equals assertequals sample nodes samplenodes immutable list immutablelist copy of copyof result get nodes getnodes query query manager querymanager create query createquery query query jcr sql result query execute assert equals assertequals sample nodes samplenodes immutable list immutablelist copy of copyof result get nodes getnodes query query manager querymanager create query createquery query query jcr sql result query execute assert false assertfalse result get nodes getnodes has next hasnext suppress warnings suppresswarnings unchecked test test query results testqueryresults result handler resulthandler rows repository exception repositoryexception list string column names columnnames immutable list immutablelist string prop stringprop int prop intprop optional string prop optionalstringprop mock jcr mockjcr add query result handler addqueryresulthandler query manager querymanager mock query result handler mockqueryresulthandler override mock query result mockqueryresult execute query executequery mock query mockquery query mock query result mockqueryresult sample nodes samplenodes column names columnnames query query query manager querymanager create query createquery query query jcr sql query result queryresult result query execute assert equals assertequals sample nodes samplenodes immutable list immutablelist copy of copyof result get nodes getnodes assert equals assertequals column names columnnames immutable list immutablelist copy of copyof result get column names getcolumnnames list row rows immutable list immutablelist copy of copyof result get rows getrows assert equals assertequals rows get value getvalue string prop stringprop get string getstring assert equals assertequals rows get value getvalue int prop intprop get long getlong assert equals assertequals opt value optvalue rows get value getvalue optional string prop optionalstringprop get string getstring assert equals assertequals rows get values getvalues get string getstring assert equals assertequals rows get values getvalues get long getlong assert null assertnull rows get values getvalues assert equals assertequals rows get values getvalues get string getstring assert equals assertequals rows get values getvalues get long getlong assert null assertnull rows get values getvalues