licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest util java io exception ioexception org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling commons testing int egration integration http test httptest org apache sling commons testing int egration integration http test base httptestbase org apache sling testing tools retry retry loop retryloop org apache sling testing tools retry retry loop retryloop condition access info test services events counter servlet eventscounterservlet events counter util eventscounterutil get events count geteventscount http test base httptestbase string topic json exception jsonexception io exception ioexception json object jsonobject json json object jsonobject get content getcontent http test httptest http base url testing events counter eventscounter json http test httptest content type json json topic json get int getint topic wait for event waitforevent http test base httptestbase string topic timeout seconds timeoutseconds previous count previouscount condition condition string get description getdescription wait osg i osgi event topic topic is true istrue exception get events count geteventscount topic previous count previouscount retry loop retryloop timeout seconds timeoutseconds