licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling service user mapping serviceusermapping impl java print writer printwriter java util array list arraylist java util list java util map java util sorted map sortedmap java util tree map treemap org apache felix inventory format org apache felix inventory inventory printer inventoryprinter org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations service org apache sling commons json json exception jsonexception org apache sling commons json json writer jsonwriter inventory printer inventoryprinter service user mappings component service inventory printer inventoryprinter properties property inventory printer inventoryprinter format json text property inventory printer inventoryprinter sling service users slingserviceusers property inventory printer inventoryprinter title sling service user mappings property inventory printer inventoryprinter web console webconsole bool value boolvalue mapping inventory printer mappinginventoryprinter inventory printer inventoryprinter reference service user mapper impl serviceusermapperimpl mapper override print print writer printwriter format format is zip iszip format equals format json render json renderjson format equals format text render text rendertext exception print stack trace printstacktrace string get mapped user getmappeduser mapping map get service name getservicename get sub service name getsubservicename sorted map sortedmap string list mapping get mappings by user getmappingsbyuser list mapping mappings sorted map sortedmap string list mapping result tree map treemap string list mapping mapping mappings string user get mapped user getmappeduser list mapping list result user list list array list arraylist mapping result user list list add result asjson json writer jsonwriter mapping json exception jsonexception object key service name servicename get service name getservicename key sub service name subservicename get sub service name getsubservicename key user get mapped user getmappeduser end object endobject render json renderjson print writer printwriter json exception jsonexception list mapping data mapper get active mappings getactivemappings map string list mapping by user byuser get mappings by user getmappingsbyuser data json writer jsonwriter json writer jsonwriter set tidy settidy object key title service user mappings key mappings count mappingscount data size key unique use rs count uniqueuserscount by user byuser key set keyset size key mappings by user mappingsbyuser object map entry string list mapping by user byuser entry set entryset key get key getkey array mapping get value getvalue asjson end array endarray end object endobject end object endobject as text astext print writer printwriter mapping string indent string sep print indent print get service name getservicename print sep string get sub service name getsubservicename print print sep println get mapped user getmappeduser render text rendertext print writer printwriter list mapping data mapper get active mappings getactivemappings map string list mapping by user byuser get mappings by user getmappingsbyuser data string format info formatinfo format service service user print mappings user print by user byuser key set keyset size print users println format info formatinfo map entry string list mapping by user byuser entry set entryset print println get key getkey mapping get value getvalue as text astext