licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling feature flags featureflags impl java io exception ioexception java print writer printwriter java util array list arraylist java util collections java util hash map hashmap java util list java util map javax servlet filter javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet servlet javax servlet servlet config servletconfig javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org apache felix scr annotations component org apache felix scr annotations configuration policy configurationpolicy org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations reference policy referencepolicy org apache felix scr annotations service org apache sling api request response util responseutil org apache sling feature flags featureflags feature org apache sling feature flags featureflags features org osgi framework constants org slf logger org slf logger factory loggerfactory service feature handling track link feature services component policy configuration policy configurationpolicy ignore service reference feature cardinality reference cardinality referencecardinality optional multiple policy reference policy referencepolicy dynamic reference interface referenceinterface feature properties property felix webconsole label features property felix webconsole title features property felix webconsole category sling property pattern property service ranking int value intvalue feature manager featuremanager features filter servlet logger logger logger factory loggerfactory get logger getlogger get class getclass thread local threadlocal execution context impl executioncontextimpl per thread client context perthreadclientcontext thread local threadlocal execution context impl executioncontextimpl map string list feature description featuredescription all features allfeatures hash map hashmap string list feature description featuredescription map string feature active features activefeatures collections empty map emptymap servlet config servletconfig servlet config servletconfig features feature get features getfeatures map string feature active features activefeatures active features activefeatures active features activefeatures values to array toarray feature active features activefeatures size feature get feature getfeature string active features activefeatures is enabled isenabled string feature name featurename feature feature get feature getfeature feature name featurename feature get current execution context getcurrentexecutioncontext is enabled isenabled feature filter override init filter config filterconfig filter config filterconfig todo override do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain io exception ioexception servlet exception servletexception push context pushcontext http servlet request httpservletrequest request chain do filter dofilter request response pop context popcontext override destroy method shared servlet filter servlet config servletconfig servlet override init servlet config servletconfig config servlet config servletconfig config override servlet config servletconfig get servlet config getservletconfig servlet config servletconfig override string get servlet info getservletinfo features override service servlet request servletrequest req servlet response servletresponse res io exception ioexception equals http servlet request httpservletrequest req get method getmethod print writer printwriter res get writer getwriter feature features get features getfeatures features features length println statline highlight features defined printf statline highlight feature defined features length println table nicetable println description enabled execution context impl executioncontextimpl ctx get current execution context getcurrentexecutioncontext feature feature features printf response util responseutil escape xml escapexml feature get name getname response util responseutil escape xml escapexml feature get description getdescription ctx is enabled isenabled feature println table http servlet response httpservletresponse res send error senderror http servlet response httpservletresponse method all owed allowed res flush buffer flushbuffer feature binding bind method feature services suppress warnings suppresswarnings unused bind feature bindfeature feature map string object props all features allfeatures string get name getname feature description featuredescription info feature description featuredescription props list feature description featuredescription candidates all features allfeatures candidates candidates array list arraylist feature description featuredescription all features allfeatures candidates candidates add info collections sort candidates calculate active providers calculateactiveproviders unbind method feature services suppress warnings suppresswarnings unused unbind feature unbindfeature feature map string object props all features allfeatures string get name getname feature description featuredescription info feature description featuredescription props list feature description featuredescription candidates all features allfeatures candidates sanity check candidates remove info candidates size all features allfeatures remove calculate active providers calculateactiveproviders cal culates calculates map active features eliminating feature collisions called all features allfeatures calculate active providers calculateactiveproviders map string feature active map activemap hash map hashmap string feature map entry string list feature description featuredescription entry all features allfeatures entry set entryset feature description featuredescription desc entry get value getvalue active map activemap entry get key getkey desc feature entry get value getvalue size logger warn feature service feature entry get key getkey active features activefeatures active map activemap client context management access push context pushcontext http servlet request httpservletrequest request per thread client context perthreadclientcontext execution context impl executioncontextimpl request pop context popcontext per thread client context perthreadclientcontext execution context impl executioncontextimpl get current execution context getcurrentexecutioncontext execution context impl executioncontextimpl ctx per thread client context perthreadclientcontext ctx ctx execution context impl executioncontextimpl internal caching feature meta data service ranking feature description featuredescription comparable feature description featuredescription ranking service id serviceid feature feature feature description featuredescription feature feature map string object props feature feature object props constants service ranking integer ranking integer ranking service id serviceid props constants service override compare to compareto feature description featuredescription ranking ranking ranking ranking ranks equal sort service desc ending descending order service id serviceid service id serviceid override equals object obj obj feature description featuredescription feature description featuredescription obj service id serviceid service id serviceid override hash code hashcode prime result result prime result service id serviceid service id serviceid result