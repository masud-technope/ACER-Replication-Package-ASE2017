licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution org apache sling commons json json array jsonarray org apache sling commons json json object jsonobject org apache sling distribution distribution request type distributionrequesttype org junit org junit org junit test java io exception ioexception java util list java util map junit framework assert equals assertequals junit framework assert not null assertnotnull org apache sling distribution distribution utils distributionutils assert exists assertexists org apache sling distribution distribution utils distributionutils assert post resource with parameters assertpostresourcewithparameters org apache sling distribution distribution utils distributionutils create random node createrandomnode org apache sling distribution distribution utils distributionutils distribute org apache sling distribution distribution utils distributionutils get resource getresource org apache sling distribution distribution utils distributionutils queue url queueurl int egration integration test distribution multiple queue distribution test multiplequeuedistributiontest distribution int egration test base distributionintegrationtestbase string delete limit test test queues testqueues exception map string map string object queues distribution utils distributionutils get queues getqueues author queue multiple assert equals assertequals queues size assert not null assertnotnull queues endpoint assert equals assertequals queues endpoint empty assert not null assertnotnull queues endpoint assert equals assertequals queues endpoint empty test test distribute queues testdistributequeues exception string node path nodepath create random node createrandomnode author client authorclient content add system nano time nanotime assert exists assertexists author client authorclient node path nodepath add items queues distribute author queue multiple distribution request type distributionrequesttype add node path nodepath distribute author queue multiple distribution request type distributionrequesttype delete node path nodepath map string map string object queues distribution utils distributionutils get queues getqueues author queue multiple list map string object first queue items firstqueueitems distribution utils distributionutils get queue items getqueueitems author queue url queueurl queue multiple endpoint list map string object second queue items secondqueueitems distribution utils distributionutils get queue items getqueueitems author queue url queueurl queue multiple endpoint assert equals assertequals queues size assert equals assertequals queues endpoint empty assert equals assertequals queues endpoint items count itemscount assert equals assertequals queues endpoint empty assert equals assertequals queues endpoint items count itemscount assert equals assertequals first queue items firstqueueitems size assert equals assertequals add first queue items firstqueueitems action assert equals assertequals distribution utils distributionutils distributor user first queue items firstqueueitems user id userid assert equals assertequals delete first queue items firstqueueitems action assert equals assertequals second queue items secondqueueitems size assert equals assertequals add second queue items secondqueueitems action assert equals assertequals delete second queue items secondqueueitems action string second id secondid string first queue items firstqueueitems delete item endpoint assert post resource with parameters assertpostresourcewithparameters author queue url queueurl queue multiple endpoint operation delete second id secondid queues distribution utils distributionutils get queues getqueues author queue multiple assert equals assertequals queues endpoint empty assert equals assertequals queues endpoint items count itemscount assert equals assertequals add first queue items firstqueueitems action assert equals assertequals queues endpoint empty assert equals assertequals queues endpoint items count itemscount delete items endpoint assert post resource with parameters assertpostresourcewithparameters author queue url queueurl queue multiple endpoint operation delete limit queues distribution utils distributionutils get queues getqueues author queue multiple assert equals assertequals queues endpoint empty assert equals assertequals queues endpoint items count itemscount assert equals assertequals queues endpoint empty assert equals assertequals queues endpoint items count itemscount test test copy distribute queues testcopydistributequeues exception string node path nodepath create random node createrandomnode author client authorclient content add system nano time nanotime assert exists assertexists author client authorclient node path nodepath add items queues distribute author queue multiple distribution request type distributionrequesttype add node path nodepath map string map string object queues distribution utils distributionutils get queues getqueues author queue multiple assert equals assertequals queues endpoint items count itemscount assert equals assertequals queues endpoint items count itemscount assert post resource with parameters assertpostresourcewithparameters author queue url queueurl queue multiple endpoint operation delete limit delete limit queues distribution utils distributionutils get queues getqueues author queue multiple assert equals assertequals queues endpoint items count itemscount assert equals assertequals queues endpoint items count itemscount list map string object first queue items firstqueueitems distribution utils distributionutils get queue items getqueueitems author queue url queueurl queue multiple endpoint list map string object second queue items secondqueueitems distribution utils distributionutils get queue items getqueueitems author queue url queueurl queue multiple endpoint assert equals assertequals first queue items firstqueueitems size assert equals assertequals second queue items secondqueueitems size string second queue item id secondqueueitemid string second queue items secondqueueitems assert post resource with parameters assertpostresourcewithparameters author queue url queueurl queue multiple endpoint operation copy second queue item id secondqueueitemid endpoint first queue items firstqueueitems distribution utils distributionutils get queue items getqueueitems author queue url queueurl queue multiple endpoint second queue items secondqueueitems distribution utils distributionutils get queue items getqueueitems author queue url queueurl queue multiple endpoint assert equals assertequals first queue items firstqueueitems size assert equals assertequals second queue items secondqueueitems size clean io exception ioexception assert post resource with parameters assertpostresourcewithparameters author queue url queueurl queue multiple endpoint operation delete limit delete limit assert post resource with parameters assertpostresourcewithparameters author queue url queueurl queue multiple endpoint operation delete limit delete limit