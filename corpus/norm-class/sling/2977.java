licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets post impl operations java util list javax jcr item javax jcr node javax jcr node iterator nodeiterator javax jcr property javax jcr property iterator propertyiterator javax jcr repository exception repositoryexception javax jcr node type nodetype node type nodetype org apache sling servlets post modification org apache sling servlets post versioning configuration versioningconfiguration code copy operation copyoperation code link org apache sling servlets post sling post constants slingpostconstants operation copy copy operation sling post servlet copy operation copyoperation abstract copy move operation abstractcopymoveoperation override string get operation name getoperationname copy override item execute list modification item source string dest parent destparent string dest name destname versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception item dest item destitem copy source node source get session getsession get item getitem dest parent destparent dest name destname string dest dest parent destparent dest name destname add modification on copied oncopied source get path getpath dest log debug copy source dest dest item destitem copy code src code item code dst parent dstparent code node newly created item code code param src item copy location param dst parent dstparent node code src code node copied param newly created item code code item code src code item repository exception repositoryexception thrown problem copying content copy node node string copy property node string item copy item src node dst parent dstparent string repository exception repositoryexception src is node isnode copy node src dst parent dstparent copy property src dst parent dstparent copy code src code node code dst parent dstparent code node newly created node code code method recursive deep copy subtree rooted source node destination child nodes properties copied param src node copy location param dst parent dstparent node code src code node copied param newly created node code code node code src code node repository exception repositoryexception thrown problem copying content item copy node src node dst parent dstparent string repository exception repositoryexception is ancestor or same node isancestororsamenode src dst parent dstparent repository exception repositoryexception copy ancestor src get path getpath descendant dst parent dstparent get path getpath ensure destination src get name getname ensure node creation dst parent dstparent has node hasnode dst parent dstparent get node getnode remove create node node dst dst parent dstparent add node addnode src get primary node type getprimarynodetype get name getname node type nodetype mix src get mixin node types getmixinnodetypes dst add mixin addmixin mix get name getname copy properties property iterator propertyiterator iter src get properties getproperties iter has next hasnext copy iter next property nextproperty dst copy child nodes node iterator nodeiterator iter src get nodes getnodes iter has next hasnext node iter next node nextnode get definition getdefinition is protected isprotected copy dst dst src ancestor node dest node is ancestor or same node isancestororsamenode node src node dest repository exception repositoryexception src get path getpath equals src get path getpath equals dest get path getpath dest get path getpath starts with startswith src get path getpath copy code src code property code dst parent dstparent code node newly created property code code source property method param src property copy location param dst parent dstparent node code src code property copied param newly created property code code property code src code property repository exception repositoryexception thrown problem copying content item copy property src node dst parent dstparent string repository exception repositoryexception src get definition getdefinition is protected isprotected src get name getname ensure property creation dst parent dstparent has property hasproperty dst parent dstparent get property getproperty remove src get definition getdefinition is multiple ismultiple dst parent dstparent set property setproperty src get values getvalues dst parent dstparent set property setproperty src get value getvalue