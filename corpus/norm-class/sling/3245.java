licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide eclipse core internal java io exception ioexception java input stream inputstream java net uri syntax exception urisyntaxexception java util array list arraylist java util arrays java util hash set hashset java util list java util org apache sling ide artifacts embedded artifact embeddedartifact org apache sling ide artifacts embedded artifact locator embeddedartifactlocator org apache sling ide eclipse core i sling launchpad server islinglaunchpadserver org apache sling ide eclipse core server util serverutil org apache sling ide log logger org apache sling ide osgi osgi client osgiclient org apache sling ide osgi osgi client exception osgiclientexception org apache sling ide serialization serialization exception serializationexception org apache sling ide transport batcher org apache sling ide transport command org apache sling ide transport repository org apache sling ide transport repository info repositoryinfo org apache sling ide transport resource proxy resourceproxy org apache sling ide transport result org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime null progress monitor nullprogressmonitor org eclipse core runtime status org eclipse debug core i launch ilaunch org eclipse debug core i launch manager ilaunchmanager org eclipse jdt core i java project ijavaproject org eclipse wst server core i module imodule org eclipse wst server core i server iserver org eclipse wst server core model i module resource imoduleresource org eclipse wst server core model i module resource delta imoduleresourcedelta org eclipse wst server core model server behaviour delegate serverbehaviourdelegate org osgi framework version sling launchpad behaviour slinglaunchpadbehaviour server behaviour delegate with module publish support serverbehaviourdelegatewithmodulepublishsupport resource change command factory resourcechangecommandfactory command factory commandfactory i launch ilaunch launch jvm debug ger connection jvmdebuggerconnection debug ger connection debuggerconnection override force debug ger connection debuggerconnection debug ger connection debuggerconnection force set server state setserverstate i server iserver stopped server util serverutil stop repository stoprepository get server getserver null progress monitor nullprogressmonitor core exception coreexception activator get default getdefault get plugin logger getpluginlogger warn failed repository start i progress monitor iprogressmonitor monitor core exception coreexception success result resource proxy resourceproxy result monitor begin task begintask starting server repository repository repository server util serverutil connect repository connectrepository get server getserver monitor core exception coreexception set server state setserverstate i server iserver stopped monitor worked get server getserver get mode getmode equals i launch manager ilaunchmanager debug mode debug ger connection debuggerconnection jvm debug ger connection jvmdebuggerconnection success debug ger connection debuggerconnection connect in debug mode connectindebugmode launch get server getserver monitor monitor worked command resource proxy resourceproxy command repository new list children node command newlistchildrennodecommand result command execute success result is success issuccess monitor worked repository info repositoryinfo repository info repositoryinfo repository info repositoryinfo server util serverutil get repository info getrepositoryinfo get server getserver monitor osgi client osgiclient client activator get default getdefault get osgi client factory getosgiclientfactory create osgi client createosgiclient repository info repositoryinfo embedded artifact locator embeddedartifactlocator artifact locator artifactlocator activator get default getdefault get artifact locator getartifactlocator version remote version remoteversion client get bundle version getbundleversion embedded artifact locator embeddedartifactlocator support bundle symbolic monitor worked embedded artifact embeddedartifact support bundle supportbundle artifact locator artifactlocator load tooling support bundle loadtoolingsupportbundle version embedded version embeddedversion version support bundle supportbundle get version getversion i sling launchpad server islinglaunchpadserver launchpad server launchpadserver i sling launchpad server islinglaunchpadserver get server getserver load adapter loadadapter sling launchpad server slinglaunchpadserver monitor remote version remoteversion remote version remoteversion compare to compareto embedded version embeddedversion input stream inputstream contents support bundle supportbundle open input stream openinputstream client install bundle installbundle contents support bundle supportbundle get name getname remote version remoteversion embedded version embeddedversion launchpad server launchpadserver set bundle version setbundleversion embedded artifact locator embeddedartifactlocator support bundle symbolic remote version remoteversion monitor monitor worked io exception ioexception activator get default getdefault get plugin logger getpluginlogger warn failed reading installation support bundle uri syntax exception urisyntaxexception activator get default getdefault get plugin logger getpluginlogger warn failed retrieving installation support bundle osgi client exception osgiclientexception activator get default getdefault get plugin logger getpluginlogger warn failed retrieving installation support bundle success set server state setserverstate i server iserver started set server state setserverstate i server iserver stopped string message unable connect server server instance running result message result to string tostring core exception coreexception status i status istatus error activator plugin message monitor todo refine signature setup launch setuplaunch i launch ilaunch launch string launch mode launchmode i progress monitor iprogressmonitor monitor core exception coreexception todo check ports free launch launch set server restart state setserverrestartstate set server state setserverstate i server iserver starting set mode setmode launch mode launchmode override publish module publishmodule kind delta kind deltakind i module imodule module i progress monitor iprogressmonitor monitor core exception coreexception logger logger activator get default getdefault get plugin logger getpluginlogger command factory commandfactory command factory commandfactory resource change command factory resourcechangecommandfactory activator get default getdefault get serialization manager getserializationmanager logger trace trace operation traceoperation kind delta kind deltakind module get server getserver get server state getserverstate i server iserver stopped logger trace ignoring request publish module server stopped set module publish state setmodulepublishstate module i server iserver publish kind i server iserver publish auto kind i server iserver publish incremental delta kind deltakind server behaviour delegate serverbehaviourdelegate change logger trace ignoring request publish module resources changed module changed set module publish state setmodulepublishstate module i server iserver publish kind i server iserver publish full delta kind deltakind server behaviour delegate serverbehaviourdelegate removed logger trace ignoring request unpublish module resources set module publish state setmodulepublishstate module i server iserver publish project helper projecthelper is bundle project isbundleproject module get project getproject string server mode servermode get server getserver get mode getmode server mode servermode equals i launch manager ilaunchmanager debug mode kind i server iserver publish clean debug mode rely hot code hotcode replacement feature eclipse jvm profile modes explicitly publish bundle module todo config urable configurable server config sling publish clean bundle deployment mechanism triggered publish bundle module publishbundlemodule module monitor bundle state helper bundlestatehelper reset bundle state resetbundlestate get server getserver module get project getproject project helper projecthelper is content project iscontentproject module get project getproject publish content module publishcontentmodule kind delta kind deltakind module monitor bundle state helper bundlestatehelper reset bundle state resetbundlestate get server getserver module get project getproject serialization exception serializationexception core exception coreexception status i status istatus error activator plugin serialization error trace operation traceoperation kind delta kind deltakind module to string tostring io exception ioexception core exception coreexception status i status istatus error activator plugin error trace operation traceoperation kind delta kind deltakind module to string tostring string trace operation traceoperation kind delta kind deltakind i module imodule module string builder stringbuilder trace string builder stringbuilder trace append sling launchpad behaviour slinglaunchpadbehaviour publish module publishmodule kind i server iserver publish clean trace append publish clean i server iserver publish incremental trace append publish incremental i server iserver publish auto trace append publish auto i server iserver publish full trace append publish full trace append unknown append kind append delta kind deltakind server behaviour delegate serverbehaviourdelegate trace append server behaviour delegate serverbehaviourdelegate changed trace append changed server behaviour delegate serverbehaviourdelegate change trace append change server behaviour delegate serverbehaviourdelegate removed trace append removed trace append unkonwn append delta kind deltakind append get server getserver get server state getserverstate i server iserver started trace append started i server iserver starting trace append starting i server iserver stopped trace append stopped i server iserver stopping trace append stopping trace append unkonwn append get server getserver get server state getserverstate append trace append arrays to string tostring module append trace to string tostring publish bundle module publishbundlemodule i module imodule module i progress monitor iprogressmonitor monitor core exception coreexception i project iproject project module get project getproject install locally installlocally get server getserver get attribute getattribute i sling launchpad server islinglaunchpadserver prop install locally monitor begin task begintask dep loying deploying local install osgi client osgiclient osgi client osgiclient activator get default getdefault get osgi client factory getosgiclientfactory create osgi client createosgiclient server util serverutil get repository info getrepositoryinfo get server getserver monitor version support bundle version supportbundleversion osgi client osgiclient get bundle version getbundleversion embedded artifact locator embeddedartifactlocator support bundle symbolic monitor worked support bundle version supportbundleversion core exception coreexception status status error activator plugin support bundle install server properties i java project ijavaproject java project javaproject project helper projecthelper as java project asjavaproject project i folder ifolder output folder outputfolder i folder ifolder project get workspace getworkspace get root getroot find member findmember java project javaproject get output location getoutputlocation i path ipath output location outputlocation output folder outputfolder get location getlocation ensure manifest exists doesn publish fail warn error i resource iresource manifest output folder outputfolder find member findmember meta inf manifest manifest activator get default getdefault get plugin logger getpluginlogger warn project project meta inf manifest publishing time activator get default getdefault issue console log issueconsolelog install bundle installbundle output folder outputfolder get location getlocation toosstring project project meta inf manifest publishing time monitor set module publish state setmodulepublishstate module i server iserver publish full monitor worked osgi client osgiclient timeout install locally installlocally osgi client osgiclient install local bundle installlocalbundle output location outputlocation toosstring monitor worked jar builder jarbuilder builder jar builder jarbuilder input stream inputstream bundle builder build jar buildjar output folder outputfolder monitor worked osgi client osgiclient install local bundle installlocalbundle bundle output folder outputfolder get location getlocation toosstring monitor worked set module publish state setmodulepublishstate module i server iserver publish uri syntax exception urisyntaxexception core exception coreexception status i status istatus error activator plugin get message getmessage osgi client exception osgiclientexception core exception coreexception status i status istatus error activator plugin failed installing bundle get message getmessage monitor publish content module publishcontentmodule kind delta kind deltakind i module imodule module i progress monitor iprogressmonitor monitor core exception coreexception serialization exception serializationexception io exception ioexception logger logger activator get default getdefault get plugin logger getpluginlogger repository repository server util serverutil get connected repository getconnectedrepository get server getserver monitor repository core exception coreexception status i status istatus error activator plugin unable find repository server get server getserver batcher batcher activator get default getdefault get batcher factory getbatcherfactory create batcher createbatcher todo efficient module filter mapping simple r simpler implement sling content module adapter slingcontentmoduleadapter behaviour resources filtered deletion incorrect sup rising suprising behaviour dev elopment development time list i module resource imoduleresource added or updated resources addedorupdatedresources array list arraylist i module resource imoduleresource all resources allresources get resources getresources module i path ipath handled paths handledpaths hash set hashset delta kind deltakind server behaviour delegate serverbehaviourdelegate changed i module resource delta imoduleresourcedelta resource delta resourcedelta get published resource delta getpublishedresourcedelta module string builder stringbuilder delta trace deltatrace string builder stringbuilder delta trace deltatrace append processing delta kind resource delta resourcedelta get kind getkind i module resource delta imoduleresourcedelta delta trace deltatrace append i module resource delta imoduleresourcedelta changed delta trace deltatrace append changed i module resource delta imoduleresourcedelta change delta trace deltatrace append change i module resource delta imoduleresourcedelta removed delta trace deltatrace append removed delta trace deltatrace append unknown append resource delta resourcedelta get kind getkind delta trace deltatrace append resource append resource delta resourcedelta get module resource getmoduleresource logger trace delta trace deltatrace to string tostring resource delta resourcedelta get kind getkind i module resource delta imoduleresourcedelta i module resource delta imoduleresourcedelta changed todo needed i module resource delta imoduleresourcedelta change command command add file command addfilecommand repository resource delta resourcedelta get module resource getmoduleresource command ensure parent is published ensureparentispublished resource delta resourcedelta get module resource getmoduleresource repository all resources allresources handled paths handledpaths batcher added or updated resources addedorupdatedresources add resource delta resourcedelta get module resource getmoduleresource enqueue batcher command i module resource delta imoduleresourcedelta removed enqueue batcher remove file command removefilecommand repository resource delta resourcedelta get module resource getmoduleresource server behaviour delegate serverbehaviourdelegate todo correct server behaviour delegate serverbehaviourdelegate change i module resource imoduleresource resource get resources getresources module command command add file command addfilecommand repository resource enqueue batcher command command added or updated resources addedorupdatedresources add resource server behaviour delegate serverbehaviourdelegate removed i module resource imoduleresource resource get resources getresources module enqueue batcher remove file command removefilecommand repository resource reorder child nodes create update deletes processed i module resource imoduleresource resource added or updated resources addedorupdatedresources enqueue batcher reorder child nodes command reorderchildnodescommand repository resource execute batcher published publish module publishmodule kind delta kind deltakind module monitor set module publish state setmodulepublishstate module i server iserver publish set server publish state setserverpublishstate i server iserver publish execute batcher batcher core exception coreexception command command batcher result result command execute result is success issuccess todo proper error logging core exception coreexception status status error activator plugin failed publishing path command get path getpath result result to string tostring ensures parent resource published repository note parents explicitly child nodes reordered happen published resource change param module resource moduleresource current resource param repository repository publish param all resources allresources module resources param handled paths handledpaths paths handled publish operation registered published param batcher io exception ioexception serialization exception serializationexception core exception coreexception ensure parent is published ensureparentispublished i module resource imoduleresource module resource moduleresource repository repository i module resource imoduleresource all resources allresources i path ipath handled paths handledpaths batcher batcher core exception coreexception serialization exception serializationexception io exception ioexception logger logger activator get default getdefault get plugin logger getpluginlogger i path ipath current path currentpath module resource moduleresource get module relative path getmodulerelativepath logger trace ensuring parent path published current path currentpath assume root published current path currentpath segment count segmentcount logger trace path parent skip ping skipping current path currentpath i path ipath parent path parentpath current path currentpath remove last segments removelastsegments published parent resource published execution handled paths handledpaths parent path parentpath logger trace parent path handled skip ping skipping parent path parentpath i module resource imoduleresource may be parent maybeparent all resources allresources may be parent maybeparent get module relative path getmodulerelativepath equals parent path parentpath handle parent parent needed ensure parent is published ensureparentispublished may be parent maybeparent repository all resources allresources handled paths handledpaths batcher create resource enqueue batcher add file command addfilecommand repository may be parent maybeparent handled paths handledpaths add may be parent maybeparent get module relative path getmodulerelativepath logger trace ensure d ensured resource path published parent path parentpath illegal argument exception illegalargumentexception resource module resource moduleresource get module relative path getmodulerelativepath parent path parent path parentpath resource path module resources enqueue batcher batcher command command command batcher add command command add file command addfilecommand repository repository i module resource imoduleresource resource core exception coreexception serialization exception serializationexception io exception ioexception i resource iresource res get resource getresource resource res command factory commandfactory new command for added or updated newcommandforaddedorupdated repository res command reorder child nodes command reorderchildnodescommand repository repository i module resource imoduleresource resource core exception coreexception serialization exception serializationexception io exception ioexception i resource iresource res get resource getresource resource res command factory commandfactory new reorder child nodes command newreorderchildnodescommand repository res i resource iresource get resource getresource i module resource imoduleresource resource i resource iresource file i file ifile resource get adapter getadapter i file ifile file file i folder ifolder resource get adapter getadapter i folder ifolder file server startup safe ignore activator get default getdefault get plugin logger getpluginlogger trace i file ifile get simple name getsimplename i folder ifolder get simple name getsimplename resource file command remove file command removefilecommand repository repository i module resource imoduleresource resource serialization exception serializationexception io exception ioexception core exception coreexception i resource iresource deleted resource deletedresource get resource getresource resource deleted resource deletedresource command factory commandfactory new command for removed resources newcommandforremovedresources repository deleted resource deletedresource