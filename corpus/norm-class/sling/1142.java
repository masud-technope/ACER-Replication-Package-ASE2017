licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets post impl operations java util arrays java util hash map hashmap java util hash set hashset java util linked hash map linkedhashmap java util list java util map java util random java util java util regex pattern javax jcr node javax jcr repository exception repositoryexception javax jcr session javax jcr node type nodetype node type nodetype org apache sling api sling http servlet request slinghttpservletrequest org apache sling api request request parameter requestparameter org apache sling api request request parameter map requestparametermap org apache sling api resource modifiable value map modifiablevaluemap org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource util resourceutil org apache sling servlets post abstract post operation abstractpostoperation org apache sling servlets post modification org apache sling servlets post node name generator nodenamegenerator org apache sling servlets post post response postresponse org apache sling servlets post sling post constants slingpostconstants org apache sling servlets post versioning configuration versioningconfiguration org apache sling servlets post impl helper chunk org apache sling servlets post impl helper default node name generator defaultnodenamegenerator org apache sling servlets post impl helper request property requestproperty abstract create operation abstractcreateoperation abstract post operation abstractpostoperation random random collision index randomcollisionindex random node generator node name generator nodenamegenerator default node name generator defaultnodenamegenerator utility generating node names node name generator nodenamegenerator extra node name generators extranodenamegenerators regular expression parameters ignore pattern ignored parameter name pattern ignoredparameternamepattern abstract create operation abstractcreateoperation default node name generator defaultnodenamegenerator default node name generator defaultnodenamegenerator ignored parameter name pattern ignoredparameternamepattern set default node name generator setdefaultnodenamegenerator node name generator nodenamegenerator default node name generator defaultnodenamegenerator default node name generator defaultnodenamegenerator default node name generator defaultnodenamegenerator set extra node name generators setextranodenamegenerators node name generator nodenamegenerator extra node name generators extranodenamegenerators extra node name generators extranodenamegenerators extra node name generators extranodenamegenerators set ignored parameter name pattern setignoredparameternamepattern pattern ignored parameter name pattern ignoredparameternamepattern ignored parameter name pattern ignoredparameternamepattern ignored parameter name pattern ignoredparameternamepattern create node current request repository exception repositoryexception repository error occurs process create processcreate resource resolver resourceresolver resolver map string request property requestproperty req properties reqproperties post response postresponse response list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration persistence exception persistenceexception repository exception repositoryexception string path response get path getpath resource resource resolver get resource getresource path resource resource util resourceutil is synthetic resource issyntheticresource resource deep get or create node deepgetorcreatenode resolver path req properties reqproperties versioning configuration versioningconfiguration response set create request setcreaterequest update node type updatenodetype resolver path req properties reqproperties versioning configuration versioningconfiguration update mixins updatemixins resolver path req properties reqproperties versioning configuration versioningconfiguration update node type updatenodetype resource resolver resourceresolver resolver string path map string request property requestproperty req properties reqproperties list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception string node type nodetype get primary type getprimarytype req properties reqproperties path node type nodetype resource rsrc resolver get resource getresource path modifiable value map modifiablevaluemap mvm rsrc adapt to adaptto modifiable value map modifiablevaluemap mvm node node rsrc adapt to adaptto node was version able wasversionable node is version able isversionable node node check out if necessary checkoutifnecessary node versioning configuration versioningconfiguration node set primary type setprimarytype node type nodetype mvm jcr primary type primarytype node type nodetype node mix version able versionable mixin implicit check out checkout was version able wasversionable versioning configuration versioningconfiguration is check in on new version able node ischeckinonnewversionablenode is version able isversionable node add modification on check out oncheckout path update mixins updatemixins resource resolver resourceresolver resolver string path map string request property requestproperty req properties reqproperties list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception string mixins get mixin types getmixintypes req properties reqproperties path mixins resource rsrc resolver get resource getresource path modifiable value map modifiablevaluemap mvm rsrc adapt to adaptto modifiable value map modifiablevaluemap mvm node node rsrc adapt to adaptto node string new mixins newmixins hash set hashset string new mixins newmixins add all addall arrays as list aslist mixins clear existing mixins node check out if necessary checkoutifnecessary node versioning configuration versioningconfiguration node type nodetype mixin node get mixin node types getmixinnodetypes string mixin name mixinname mixin get name getname new mixins newmixins remove mixin name mixinname node remove mixin removemixin mixin name mixinname add mixins string mixin new mixins newmixins node add mixin addmixin mixin mix version able versionable mixin implicit check out checkout mixin equals mix version able versionable versioning configuration versioningconfiguration is check in on new version able node ischeckinonnewversionablenode add modification on check out oncheckout path mvm jcr mixin types mixintypes mixins collects properties form content written resource tree repository exception repositoryexception repository error occurs servlet exception servletexception internal error occurs map string request property requestproperty collect content collectcontent sling http servlet request slinghttpservletrequest request post response postresponse response require item prefix requireitemprefix require item path prefix requireitempathprefix request walk request parameters collect properties linked hash map linkedhashmap string request property requestproperty req properties reqproperties linked hash map linkedhashmap string request property requestproperty map entry string request parameter requestparameter request get request parameter map getrequestparametermap entry set entryset string param name paramname get key getkey ignore parameter ignoreparameter param name paramname skip parameters start save prefix require item prefix requireitemprefix has item path prefix hasitempathprefix param name paramname ensure param name paramname absolute property string prop path proppath to property path topropertypath param name paramname response set property setproperty property type prop path proppath ends with endswith sling post constants slingpostconstants type hint suffix request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants type hint suffix request parameter requestparameter get value getvalue length prop set type hint value settypehintvalue get string getstring default value defaultvalue prop path proppath ends with endswith sling post constants slingpostconstants suffix request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix prop set default values setdefaultvalues get value getvalue full text fulltext form field prop path proppath ends with endswith sling post constants slingpostconstants suffix request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix value from valuefrom params get value getvalue length string ref name refname get value getvalue get string getstring request parameter requestparameter ref values refvalues request get request parameters getrequestparameters ref name refname ref values refvalues prop set values setvalues ref values refvalues jcr text property deleted update prop path proppath ends with endswith sling post constants slingpostconstants suffix delete request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix delete prop set delete setdelete property text prop path proppath ends with endswith sling post constants slingpostconstants suffix move request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix move move from movefrom params get value getvalue length string source path sourcepath get value getvalue get string getstring prop set repository source setrepositorysource source path sourcepath property text prop path proppath ends with endswith sling post constants slingpostconstants suffix copy request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix copy move from movefrom params get value getvalue length string source path sourcepath get value getvalue get string getstring prop set repository source setrepositorysource source path sourcepath property text prop path proppath ends with endswith sling post constants slingpostconstants suffix ignore blanks request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix ignore blanks get value getvalue length prop set ignore blanks setignoreblanks prop path proppath ends with endswith sling post constants slingpostconstants suffix missing request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix missing get value getvalue length prop set use default when missing setusedefaultwhenmissing input tags orange type hidden prop path proppath ends with endswith sling post constants slingpostconstants suffix patch request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix patch prop set patch setpatch prop path proppath ends with endswith sling post constants slingpostconstants suffix offset request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix offset get value getvalue length chunk chunk prop get chunk getchunk chunk chunk chunk chunk set offset value setoffsetvalue parse long parselong get value getvalue to string tostring prop set chunk setchunk chunk prop path proppath ends with endswith sling post constants slingpostconstants suffix completed request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix completed get value getvalue length chunk chunk prop get chunk getchunk chunk chunk chunk chunk set completed setcompleted parse boolean parseboolean get value getvalue to string tostring prop set chunk setchunk chunk prop path proppath ends with endswith sling post constants slingpostconstants suffix length request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath sling post constants slingpostconstants suffix length get value getvalue length chunk chunk prop get chunk getchunk chunk chunk chunk chunk set length setlength parse long parselong get value getvalue to string tostring prop set chunk setchunk chunk plain property create values request property requestproperty prop get or create request property getorcreaterequestproperty req properties reqproperties prop path proppath prop set values setvalues get value getvalue req properties reqproperties returns code code parameter ignore parameter ignoreparameter string param name paramname store parameters names starting sling post param name paramname starts with startswith sling post constants slingpostconstants prefix sling skip form encoding parameter param name paramname equals charset sling ignore parameter match ignored parameter name pattern ignoredparameternamepattern ignored parameter name pattern ignoredparameternamepattern ignored parameter name pattern ignoredparameternamepattern matcher param name paramname matches returns code param name paramname code absolute unnormalized property path prepending response path code response get path getpath code parameter absolute string to property path topropertypath string param name paramname post response postresponse response param name paramname starts with startswith param name paramname resource util resourceutil normalize response get path getpath param name paramname param name paramname returns request property property path request property exist created stored code props code param props map request properties param param name paramname absolute path property including code suffix code looked param suffix optional suffix remove code param name paramname code link request property requestproperty code param name paramname code request property requestproperty get or create request property getorcreaterequestproperty map string request property requestproperty props string param name paramname string suffix suffix param name paramname ends with endswith suffix param name paramname param name paramname substring param name paramname length suffix length request property requestproperty prop props param name paramname prop prop request property requestproperty param name paramname props param name paramname prop prop deep creates node parent padding nodes nodes path empty parent node returned param path path node deep created param checked out nodes checkedoutnodes node path repository exception repositoryexception error occurs illegal argument exception illegalargumentexception path relative parent code code resource deep get or create node deepgetorcreatenode resource resolver resourceresolver resolver string path map string request property requestproperty req properties reqproperties list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration persistence exception persistenceexception repository exception repositoryexception log is debug enabled isdebugenabled log debug deep creating resource path path path starts with startswith illegal argument exception illegalargumentexception path absolute path starting resource string starting resource path startingresourcepath path resource starting resource startingresource starting resource startingresource starting resource path startingresourcepath equals starting resource startingresource resolver get resource getresource starting resource startingresource persistence exception persistenceexception access denied root resource resource created path resource resolver get resource getresource starting resource path startingresourcepath resource util resourceutil is synthetic resource issyntheticresource starting resource startingresource resolver get resource getresource starting resource path startingresourcepath update node type updatenodetype resolver starting resource path startingresourcepath req properties reqproperties versioning configuration versioningconfiguration update mixins updatemixins resolver starting resource path startingresourcepath req properties reqproperties versioning configuration versioningconfiguration pos starting resource path startingresourcepath last index of lastindexof pos starting resource path startingresourcepath starting resource path startingresourcepath substring pos starting resource path startingresourcepath searched resource existing starting resource path startingresourcepath length path length starting resource startingresource create nodes starting resource path startingresourcepath length starting resource path startingresourcepath length resource resource starting resource startingresource path index of indexof string path substring path substring resource exist test sanety check resource child resource get child getchild child resource util resourceutil is synthetic resource issyntheticresource child resource child update node type updatenodetype resolver resource get path getpath req properties reqproperties versioning configuration versioningconfiguration update mixins updatemixins resolver resource get path getpath req properties reqproperties versioning configuration versioningconfiguration string tmp path tmppath path path substring check node type string node type nodetype get primary type getprimarytype req properties reqproperties tmp path tmppath node node resource adapt to adaptto node node check out if necessary checkoutifnecessary node versioning configuration versioningconfiguration map string object props hash map hashmap string object node type nodetype props jcr primary type primarytype node type nodetype check mixin types string mixin types mixintypes get mixin types getmixintypes req properties reqproperties tmp path tmppath mixin types mixintypes props jcr mixin types mixintypes mixin types mixintypes resource resolver create resource props persistence exception persistenceexception log error unable create resource named resource get path getpath add modification on created oncreated resource get path getpath resource checks collected content jcr primary type primarytype property path param path path check primary type code code string get primary type getprimarytype map string request property requestproperty req properties reqproperties string path request property requestproperty prop req properties reqproperties path jcr primary type primarytype prop prop get string values getstringvalues checks collected content jcr mixin types mixintypes property path param path path check mixin types code code string get mixin types getmixintypes map string request property requestproperty req properties reqproperties string path request property requestproperty prop req properties reqproperties path jcr mixin types mixintypes prop prop has values hasvalues prop get string values getstringvalues string generate name generatename sling http servlet request slinghttpservletrequest request string base path basepath repository exception repositoryexception sling parameter supplied parameter unmodified node illegally for med formed resp ect respect jcr requirements exception thrown create node assumption parameter caller sup plying supplying exact result request parameter map requestparametermap parameters request get request parameter map getrequestparametermap request parameter requestparameter special param specialparam parameters get value getvalue sling post constants slingpostconstants node special param specialparam special param specialparam get string getstring special param specialparam get string getstring length path ends create node parent generated node base path basepath base path basepath special param specialparam get string getstring path exists report error session session request get resource resolver getresourceresolver adapt to adaptto session string jcr path jcrpath remove and validate workspace removeandvalidateworkspace base path basepath session request get resource resolver getresourceresolver get resource getresource jcr path jcrpath repository exception repositoryexception collision node names path base path basepath base path basepath supplied generate require prefix requireprefix require item path prefix requireitempathprefix request string generated name generatedname extra node name generators extranodenamegenerators node name generator nodenamegenerator generator extra node name generators extranodenamegenerators generated name generatedname generator get node name getnodename request base path basepath require prefix requireprefix default node name generator defaultnodenamegenerator generated name generatedname generated name generatedname generated name generatedname default node name generator defaultnodenamegenerator get node name getnodename request base path basepath require prefix requireprefix default node name generator defaultnodenamegenerator path ends create node parent generated node base path basepath generated name generatedname base path basepath ensure unique path ensureuniquepath request base path basepath base path basepath generate unique path node generator didn string ensure unique path ensureuniquepath sling http servlet request slinghttpservletrequest request string base path basepath repository exception repositoryexception path exists add suffix session session request get resource resolver getresourceresolver adapt to adaptto session resource resolver resourceresolver resolver request get resource resolver getresourceresolver base path basepath workspace prefix remove test existence string jcr path jcrpath remove and validate workspace removeandvalidateworkspace base path basepath session path exists add random suffix max resolver get resource getresource jcr path jcrpath max unique index uniqueindex math abs random collision index randomcollisionindex next int nextint string new path newpath jcr path jcrpath unique index uniqueindex resolver get resource getresource new path newpath base path basepath base path basepath unique index uniqueindex jcr path jcrpath new path newpath max resolver get resource getresource jcr path jcrpath repository exception repositoryexception collision generated node names base path basepath generated path jcr path jcrpath exists base path basepath