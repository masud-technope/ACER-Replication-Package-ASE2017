licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons scheduler impl org apache sling commons scheduler job org apache sling testing mock osgi mock osgi mockosgi org junit org junit org junit rule org junit test org junit rules expected exception expectedexception org junit runner run with runwith org mockito mock org mockito run ners runners mockito unit runner mockitojunitrunner org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework bundle event bundleevent org quartz job key jobkey org quartz scheduler org quartz scheduler exception schedulerexception org quartz trigger builder triggerbuilder java serializable java lang reflect field java util java util hash map hashmap org junit org mockito mockito run with runwith mockito unit runner mockitojunitrunner quartz scheduler test quartzschedulertest scheduler bundle context bundlecontext context quartz scheduler quartzscheduler quartz scheduler quartzscheduler mock bundle bundle rule expected exception expectedexception thrown expected exception expectedexception set up setup exception context mock osgi mockosgi new bundle context newbundlecontext quartz scheduler quartzscheduler activated quartz scheduler factory activatedquartzschedulerfactory create context test name testname quartz scheduler quartzscheduler get scheduler getscheduler test test run now testrunnow internal schedule options internalscheduleoptions schedule options scheduleoptions internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert not null assertnotnull trigger schedule options scheduleoptions trigger assert null assertnull illegal argument exception illegalargumentexception schedule options scheduleoptions argument exception argumentexception schedule options scheduleoptions internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert equals assertequals times argument higher schedule options scheduleoptions argument exception argumentexception get message getmessage schedule options scheduleoptions internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert equals assertequals period argument higher schedule options scheduleoptions argument exception argumentexception get message getmessage schedule options scheduleoptions internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert null assertnull schedule options scheduleoptions argument exception argumentexception assert not null assertnotnull schedule options scheduleoptions trigger schedule options scheduleoptions internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert null assertnull schedule options scheduleoptions argument exception argumentexception assert not null assertnotnull schedule options scheduleoptions trigger test test add job with incorrect job object testaddjobwithincorrectjobobject scheduler exception schedulerexception thrown expect illegal argument exception illegalargumentexception thrown expect message expectmessage job object instance runnable get name getname job get name getname quartz scheduler quartzscheduler add job addjob test name testname object hash map hashmap string serializable test test add job without cron expression testaddjobwithoutcronexpression scheduler exception schedulerexception thrown expect illegal argument exception illegalargumentexception thrown expect message expectmessage expression quartz scheduler quartzscheduler add job addjob test name testname thread hash map hashmap string serializable test test add job with invalid cron expression testaddjobwithinvalidcronexpression scheduler exception schedulerexception string invalid expression invalidexpression invalid expression invalidexpression thrown expect illegal argument exception illegalargumentexception thrown expect message expectmessage expression is expressionis invalid invalid expression invalidexpression quartz scheduler quartzscheduler add job addjob test name testname thread hash map hashmap string serializable invalid expression invalidexpression test test without scheduler testwithoutscheduler exception set internal scheduler to null setinternalschedulertonull thrown expect illegal state exception illegalstateexception thrown expect message expectmessage scheduler quartz scheduler quartzscheduler add job addjob test name testname thread hash map hashmap string serializable return internal scheduler back returninternalschedulerback test test add job testaddjob scheduler exception schedulerexception quartz scheduler quartzscheduler add job addjob test name testname thread hash map hashmap string serializable assert true asserttrue check exists checkexists job key jobkey job key jobkey test name testname assert false assertfalse check exists checkexists job key jobkey job key jobkey wrong name wrongname test test add job twice testaddjobtwice scheduler exception schedulerexception quartz scheduler quartzscheduler add job addjob test name testname thread hash map hashmap string serializable assert true asserttrue check exists checkexists job key jobkey job key jobkey test name testname add job check conflicts previous quartz scheduler quartzscheduler add job addjob test name testname thread hash map hashmap string serializable assert true asserttrue check exists checkexists job key jobkey job key jobkey test name testname test test remove job testremovejob scheduler exception schedulerexception string job name jobname test name testname quartz scheduler quartzscheduler add job addjob job name jobname thread hash map hashmap string serializable assert true asserttrue check exists checkexists job key jobkey job key jobkey job name jobname quartz scheduler quartzscheduler remove job removejob job name jobname assert false assertfalse check exists checkexists job key jobkey job key jobkey job name jobname test test at date time testatdatetime internal schedule options internalscheduleoptions options internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert equals assertequals options argument exception argumentexception get message getmessage options internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert equals assertequals times argument higher options argument exception argumentexception get message getmessage options internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert equals assertequals period argument higher options argument exception argumentexception get message getmessage options internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert null assertnull illegal argument exception illegalargumentexception options argument exception argumentexception assert not null assertnotnull trigger options trigger options internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert null assertnull illegal argument exception illegalargumentexception options argument exception argumentexception assert not null assertnotnull trigger options trigger test test at time testattime internal schedule options internalscheduleoptions options internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert not null assertnotnull options argument exception argumentexception assert equals assertequals options argument exception argumentexception get message getmessage assert null assertnull options trigger options internal schedule options internalscheduleoptions quartz scheduler quartzscheduler assert not null assertnotnull options trigger assert null assertnull options argument exception argumentexception test test periodic with incorrect period testperiodicwithincorrectperiod scheduler exception schedulerexception thrown expect illegal argument exception illegalargumentexception thrown expect message expectmessage period argument higher quartz scheduler quartzscheduler add periodic job addperiodicjob any name anyname thread hash map hashmap test test periodic testperiodic scheduler exception schedulerexception string job name jobname any name anyname string other job name otherjobname any other name anyothername quartz scheduler quartzscheduler add periodic job addperiodicjob job name jobname thread hash map hashmap assert true asserttrue job exists check exists checkexists job key jobkey job key jobkey job name jobname quartz scheduler quartzscheduler add periodic job addperiodicjob other job name otherjobname thread hash map hashmap assert true asserttrue job exists check exists checkexists job key jobkey job key jobkey other job name otherjobname test test schedule testschedule assert true asserttrue quartz scheduler quartzscheduler schedule thread internal schedule options internalscheduleoptions trigger builder triggerbuilder new trigger newtrigger assert false assertfalse quartz scheduler quartzscheduler schedule thread internal schedule options internalscheduleoptions illegal argument exception illegalargumentexception test test unschedule testunschedule exception string job name jobname job to unschedule jobtounschedule quartz scheduler quartzscheduler add job addjob job name jobname thread hash map hashmap string serializable assert true asserttrue quartz scheduler quartzscheduler unschedule job name jobname quartz scheduler quartzscheduler add job addjob job name jobname thread hash map hashmap string serializable assert false assertfalse quartz scheduler quartzscheduler unschedule assert false assertfalse quartz scheduler quartzscheduler unschedule incorrect name incorrectname set internal scheduler to null setinternalschedulertonull assert false assertfalse quartz scheduler quartzscheduler unschedule job name jobname return internal scheduler back returninternalschedulerback test test bundle changed with stopped bundle testbundlechangedwithstoppedbundle scheduler exception schedulerexception string first job firstjob test name testname string second job secondjob test name testname bundle get bundle id getbundleid then return thenreturn quartz scheduler quartzscheduler add job addjob first job firstjob thread hash map hashmap string serializable quartz scheduler quartzscheduler add job addjob second job secondjob thread hash map hashmap string serializable bundle event bundleevent event bundle event bundleevent bundle event bundleevent stopped bundle quartz scheduler quartzscheduler bundle changed bundlechanged event assert true asserttrue check exists checkexists job key jobkey job key jobkey first job firstjob assert false assertfalse check exists checkexists job key jobkey job key jobkey second job secondjob test test bundle changed with started bundle testbundlechangedwithstartedbundle scheduler exception schedulerexception string first job firstjob test name testname string second job secondjob test name testname bundle get bundle id getbundleid then return thenreturn quartz scheduler quartzscheduler add job addjob first job firstjob thread hash map hashmap string serializable quartz scheduler quartzscheduler add job addjob second job secondjob thread hash map hashmap string serializable bundle event bundleevent event bundle event bundleevent bundle event bundleevent started bundle quartz scheduler quartzscheduler bundle changed bundlechanged event assert true asserttrue check exists checkexists job key jobkey job key jobkey first job firstjob assert true asserttrue check exists checkexists job key jobkey job key jobkey second job secondjob test test bundle changed without scheduler testbundlechangedwithoutscheduler exception string first job firstjob test name testname string second job secondjob test name testname bundle id to remove bundleidtoremove bundle get bundle id getbundleid then return thenreturn bundle id to remove bundleidtoremove quartz scheduler quartzscheduler add job addjob first job firstjob thread hash map hashmap string serializable quartz scheduler quartzscheduler add job addjob bundle id to remove bundleidtoremove second job secondjob thread hash map hashmap string serializable set internal scheduler to null setinternalschedulertonull bundle event bundleevent event bundle event bundleevent bundle event bundleevent stopped bundle quartz scheduler quartzscheduler bundle changed bundlechanged event assert true asserttrue check exists checkexists job key jobkey job key jobkey first job firstjob assert true asserttrue check exists checkexists job key jobkey job key jobkey second job secondjob return internal scheduler back returninternalschedulerback deactivate scheduler deactivatescheduler no such field exception nosuchfieldexception illegal access exception illegalaccessexception quartz scheduler quartzscheduler get scheduler getscheduler return internal scheduler back returninternalschedulerback quartz scheduler quartzscheduler deactivate context set internal scheduler to null setinternalschedulertonull no such field exception nosuchfieldexception illegal access exception illegalaccessexception field s field sfield quartz scheduler quartzscheduler get declared field getdeclaredfield scheduler s field sfield set accessible setaccessible s field sfield quartz scheduler quartzscheduler return internal scheduler back returninternalschedulerback no such field exception nosuchfieldexception illegal access exception illegalaccessexception field s field sfield quartz scheduler quartzscheduler get declared field getdeclaredfield scheduler s field sfield set accessible setaccessible quartz scheduler quartzscheduler get scheduler getscheduler s field sfield quartz scheduler quartzscheduler