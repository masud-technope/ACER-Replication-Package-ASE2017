licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer factories deploy pck deploypck impl java io exception ioexception java input stream inputstream org apache sling installer api tasks install task installtask org apache sling installer api tasks installation context installationcontext org apache sling installer api tasks resource state resourcestate org apache sling installer api tasks task resource taskresource org apache sling installer api tasks task resource group taskresourcegroup org osgi framework version org osgi service deployment admin deploymentadmin deployment admin deploymentadmin org osgi service deployment admin deploymentadmin deployment exception deploymentexception org osgi service deployment admin deploymentadmin deployment package deploymentpackage org slf logger org slf logger factory loggerfactory deploy pck task deploypcktask install task installtask string install order deployment admin deploymentadmin deployment admin deploymentadmin logger logger logger factory loggerfactory get logger getlogger get class getclass deploy pck task deploypcktask task resource group taskresourcegroup grp deployment admin deploymentadmin grp deployment admin deploymentadmin override execute installation context installationcontext ctx task resource taskresource get resource getresource check symbolic string symbolic name symbolicname string get attribute getattribute deployment package installer deploymentpackageinstaller deploymentpackage symbol icmame symbolicmame symbolic name symbolicname logger error resource symbolic ignoring get resource group getresourcegroup set finish state setfinishstate resource state resourcestate deployment package deploymentpackage deployment admin deploymentadmin get deployment package getdeploymentpackage symbolic name symbolicname get state getstate resource state resourcestate install input stream inputstream get input stream getinputstream wrong logger error resource provide input stream get resource group getresourcegroup set finish state setfinishstate resource state resourcestate version new version newversion version string get attribute getattribute deployment package installer deploymentpackageinstaller deploymentpackage version check version compare get version getversion compare to compareto new version newversion compare installed version update deployment admin deploymentadmin install deployment package installdeploymentpackage ctx log installed deployment symbolic name symbolicname new version newversion get resource group getresourcegroup set finish state setfinishstate resource state resourcestate installed compare logger debug deployment symbolic name symbolicname new version newversion installed higher version installed deployment admin deploymentadmin install deployment package installdeploymentpackage ctx log installed deployment symbolic name symbolicname new version newversion get resource group getresourcegroup set finish state setfinishstate resource state resourcestate installed deployment exception deploymentexception logger error unable install deployment resource symbolic name symbolicname get resource group getresourcegroup set finish state setfinishstate resource state resourcestate io exception ioexception ioe logger error unable install deployment resource symbolic name symbolicname get resource group getresourcegroup set finish state setfinishstate resource state resourcestate close io exception ioexception ignore uninstall uninstall deployment exception deploymentexception logger error unable uninstall deployment resource symbolic name symbolicname logger info unable find deployment symbolic uninstalling symbolic name symbolicname get resource group getresourcegroup set finish state setfinishstate resource state resourcestate uninstalled override string get sort key getsortkey install order get resource getresource geturl