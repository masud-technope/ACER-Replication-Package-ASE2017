licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr repository org junit assert equals assertequals org junit assert not null assertnotnull org junit assert true asserttrue org junit fail org ops pax exam core options coreoptions junit bundles junitbundles org ops pax exam core options coreoptions maven bundle mavenbundle org ops pax exam core options coreoptions system property systemproperty org ops pax exam core options coreoptions vm options vmoptions java reader java string reader stringreader java util collection java util hash set hashset java util linked list linkedlist java util list java util java util concurrent atomic atomic integer atomicinteger javax inject inject javax jcr credentials javax jcr item javax jcr node javax jcr node iterator nodeiterator javax jcr property javax jcr repository exception repositoryexception javax jcr session javax jcr simple credentials simplecredentials javax jcr observation event iterator eventiterator javax jcr observation event listener eventlistener javax jcr observation observation manager observationmanager javax jcr query query org apache jackrabbit commons cnd cnd importer cndimporter org apache sling api sling constants slingconstants org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling jcr api sling repository slingrepository org junit org junit test org ops pax exam option org osgi framework bundle context bundlecontext org osgi framework service reference servicereference org osgi framework service registration serviceregistration org osgi util tracker service tracker servicetracker org slf logger org slf logger factory loggerfactory base sling repository slingrepository tests tests apply implementations pax exam parameterized paxexamparameterized theory single tests implementations quick test didn work variable config annotations common tests commontests logger log logger factory loggerfactory get logger getlogger get class getclass sling repository slingrepository repository inject bundle context bundlecontext bundle context bundlecontext check repository descriptors testing expected implementation todo sling template method pattern removed do check repository descriptors docheckrepositorydescriptors list string to delete todelete linked list linkedlist string atomic integer atomicinteger unique name counter uniquenamecounter atomic integer atomicinteger integer test scale integer get integer getinteger test scale string message cnd sling http sling apache org jcr sling mix language mixin jcr language string sling message mixin sling key string sling message undefined sling message entry messageentry hierarchy node hierarchynode sling message jcr events counter jcreventscounter event listener eventlistener session jcr events counter jcreventscounter jcr events counter jcreventscounter repository exception repositoryexception repository login administrative loginadministrative observation manager observationmanager get workspace getworkspace get observation manager getobservationmanager recommended common event types eventtypes deep string uuid string node type names nodetypenames string mix language sling message n o local nolocal string root add event listener addeventlistener event types eventtypes root deep uuid node type names nodetypenames n o local nolocal close logout override on event onevent event iterator eventiterator has next hasnext next event nextevent jcr events counter jcreventscounter jcr events counter jcreventscounter collection option common options commonoptions string tika version tikaversion system get property getproperty tika version tika version string local repo localrepo system get property getproperty maven repo local string pax vm options paxvmoptions system get property getproperty pax options webconsole equals system get property getproperty webconsole active list option opt linked list linkedlist option local repo localrepo length opt add system property systemproperty org ops pax url mvn local repository localrepository local repo localrepo pax vm options paxvmoptions length opt add vm options vmoptions pax vm options paxvmoptions option ally optionally add webconsole webconsole opt add maven bundle mavenbundle org apache felix org apache felix webconsole opt add maven bundle mavenbundle org apache felix org apache felix webconsole plugins opt add maven bundle mavenbundle org apache felix org apache felix webconsole plugins package admin packageadmin opt add maven bundle mavenbundle org apache felix org apache felix webconsole plugins event opt add maven bundle mavenbundle org apache sling org apache sling jcr webconsole opt add maven bundle mavenbundle org apache geronimo bundles json string slf version opt add maven bundle mavenbundle org slf slf api slf version opt add maven bundle mavenbundle org slf jcl slf slf version opt add maven bundle mavenbundle org slf log slf slf version opt add maven bundle mavenbundle org apache sling org apache sling fragment xml opt add maven bundle mavenbundle org apache sling org apache sling fragment transaction opt add maven bundle mavenbundle org apache sling org apache sling fragment activation opt add maven bundle mavenbundle org apache sling org apache sling fragment opt add maven bundle mavenbundle org apache sling org apache sling commons log opt add maven bundle mavenbundle org apache sling org apache sling commons logs ervice logservice opt add maven bundle mavenbundle commons commons opt add maven bundle mavenbundle commons file upload fileupload commons file upload fileupload opt add maven bundle mavenbundle commons collections commons collections opt add maven bundle mavenbundle commons code c codec commons code c codec opt add maven bundle mavenbundle commons lang commons lang opt add maven bundle mavenbundle commons pool commons pool opt add maven bundle mavenbundle org apache service mix servicemix bundles org apache service mix servicemix bundles concurrent opt add maven bundle mavenbundle org apache geronimo bundles commons http client httpclient opt add maven bundle mavenbundle org apache tika tika core tika version tikaversion opt add maven bundle mavenbundle org apache tika tika bundle tika version tikaversion opt add maven bundle mavenbundle org apache felix org apache felix http jetty opt add maven bundle mavenbundle org apache felix org apache felix event admin eventadmin opt add maven bundle mavenbundle org apache felix org apache felix scr opt add maven bundle mavenbundle org apache felix org apache felix config admin configadmin opt add maven bundle mavenbundle org apache felix org apache felix inventory opt add maven bundle mavenbundle org apache sling org apache sling commons osgi opt add maven bundle mavenbundle org apache sling org apache sling commons json opt add maven bundle mavenbundle org apache sling org apache sling commons mime opt add maven bundle mavenbundle org apache sling org apache sling commons class loader classloader opt add maven bundle mavenbundle org apache sling org apache sling commons scheduler opt add maven bundle mavenbundle org apache sling org apache sling commons threads opt add maven bundle mavenbundle org apache sling org apache sling launchpad api opt add maven bundle mavenbundle org apache sling org apache sling core opt add maven bundle mavenbundle org apache sling org apache sling discovery api opt add maven bundle mavenbundle org apache sling org apache sling discovery standalone opt add maven bundle mavenbundle org apache sling org apache sling api opt add maven bundle mavenbundle org apache sling org apache sling settings opt add maven bundle mavenbundle org apache sling org apache sling resource resolver resourceresolver opt add maven bundle mavenbundle org apache sling org apache sling adapter opt add maven bundle mavenbundle org apache sling org apache sling jcr resource opt add maven bundle mavenbundle org apache sling org apache sling jcr class loader classloader opt add maven bundle mavenbundle org apache sling org apache sling jcr content loader contentloader opt add maven bundle mavenbundle org apache sling org apache sling engine opt add maven bundle mavenbundle org apache sling org apache sling event opt add maven bundle mavenbundle org apache sling org apache sling service user mapper serviceusermapper opt add maven bundle mavenbundle org apache sling org apache sling testing tools opt add maven bundle mavenbundle org apache http components httpcomponents http core httpcore osgi opt add maven bundle mavenbundle org apache http components httpcomponents http client httpclient osgi opt add maven bundle mavenbundle org apache sling org apache sling jcr jcr wrapper opt add maven bundle mavenbundle org apache sling org apache sling jcr api opt add maven bundle mavenbundle org apache sling org apache sling jcr base opt add junit bundles junitbundles opt item type itemtype item item type itemtype delete after tests deleteaftertests item type itemtype repository exception repositoryexception to delete todelete add get path getpath verify admin create retrieve node type path test node created string assert create retrieve node assertcreateretrievenode string node type nodetype repository exception repositoryexception session repository login administrative loginadministrative node root get root node getrootnode string unique name uniquename assert create retrieve node assertcreateretrievenode string prop name propname string prop value propvalue node child node type nodetype root add node addnode root add node addnode node type nodetype child set property setproperty prop name propname prop value propvalue child set property setproperty foo child get path getpath save logout repository login administrative loginadministrative node get node getnode assert not null assertnotnull assert equals assertequals prop value propvalue get property getproperty prop name propname get string getstring get path getpath logout string unique name uniquename string hint hint unique name counter uniquenamecounter increment and get incrementandget system current time millis currenttimemillis delete test items deletetestitems repository exception repositoryexception to delete todelete is empty isempty session repository login administrative loginadministrative string path to delete todelete item exists itemexists path get item getitem path remove save to delete todelete clear logout test test repository present testrepositorypresent assert not null assertnotnull repository test test login administrative testloginadministrative repository exception repositoryexception session repository login administrative loginadministrative assert not null assertnotnull logout test test explicit admin login testexplicitadminlogin repository exception repositoryexception credentials creds simple credentials simplecredentials admin admin to char array tochararray repository login creds logout test expected repository exception repositoryexception test wrong login testwronglogin repository exception repositoryexception credentials creds simple credentials simplecredentials bad name badname bad ass word badpassword to char array tochararray repository login creds test test anonymous login a testanonymouslogina repository exception repositoryexception session repository login assert not null assertnotnull logout test test anonymous login b testanonymousloginb repository exception repositoryexception session repository login assert not null assertnotnull logout test test create retrieve node testcreateretrievenode repository exception repositoryexception assert create retrieve node assertcreateretrievenode test test create retrieve sling folder testcreateretrieveslingfolder repository exception repositoryexception assert create retrieve node assertcreateretrievenode sling folder test test anonymous has read access testanonymoushasreadaccess repository exception repositoryexception string path assert create retrieve node assertcreateretrievenode session repository login assert true asserttrue expecting anonymous path item exists itemexists path node get node getnode path assert equals assertequals expecting anonymous foo property path get property getproperty foo get string getstring logout test test sql query testsqlquery repository exception repositoryexception session repository login administrative loginadministrative string system current time millis currenttimemillis string prop name propname prop string nodes nodes node root get root node getrootnode root add node addnode set property setproperty prop name propname save string stmt select base prop name propname suppress warnings suppresswarnings deprecation query get workspace getworkspace get query manager getquerymanager create query createquery stmt query sql node iterator nodeiterator execute get nodes getnodes count has next hasnext count assert equals assertequals expected nodes result query stmt nodes count logout test test x path query with mixin testxpathquerywithmixin repository exception repositoryexception session repository login administrative loginadministrative string path xpath query system current time millis currenttimemillis string abs path abspath path node delete after tests deleteaftertests get root node getrootnode add node addnode path add mixin addmixin mix title save string statement jcr root element mix title suppress warnings suppresswarnings deprecation query get workspace getworkspace get query manager getquerymanager create query createquery statement query xpath node iterator nodeiterator execute get nodes getnodes assert true asserttrue expecting empty result has next hasnext has next hasnext next node nextnode get path getpath equals abs path abspath assert true asserttrue expecting test node abs path abspath logout todo sling template method pattern removed test check repository descriptors checkrepositorydescriptors do check repository descriptors docheckrepositorydescriptors test test single value input stream testsinglevalueinputstream repository exception repositoryexception session repository login administrative loginadministrative string path get class getclass get simple name getsimplename system current time millis currenttimemillis node child delete after tests deleteaftertests get root node getrootnode add node addnode path property child set property setproperty foo bar save assert not null assertnotnull get binary getbinary get stream getstream logout test test multi value input stream testmultivalueinputstream repository exception repositoryexception session repository login administrative loginadministrative string path get class getclass get simple name getsimplename system current time millis currenttimemillis node child delete after tests deleteaftertests get root node getrootnode add node addnode path property child set property setproperty foo string bar wii save get binary getbinary get stream getstream fail expecting get stream getstream fail multi property repository exception repositoryexception as expected asexpected logout test test osgi resource events testosgiresourceevents repository exception repositoryexception resource event listener resourceeventlistener listener resource event listener resourceeventlistener service registration serviceregistration reg listener register bundle context bundlecontext sling constants slingconstants topic resource session repository login administrative loginadministrative n paths npaths test scale timeout msec timeoutmsec n paths npaths string prefix unique name uniquename test osgi resource events testosgiresourceevents n paths npaths get root node getrootnode add node addnode prefix save log info nodes checking resource event listener resourceeventlistener n paths npaths timeout system current time millis currenttimemillis timeout msec timeoutmsec string missing hash set hashset string system current time millis currenttimemillis timeout missing clear string paths listener get paths getpaths n paths npaths string path prefix paths path missing add path missing is empty isempty missing is empty isempty string missing str missingstr missing size missing size paths missing missing to string tostring fail osg i osgi add resource events missing missing size n paths npaths paths timeout msec timeoutmsec msec missing str missingstr reg unregister logout log info success fuly successfuly detected osg i osgi observation events n paths npaths paths test test node type observation testnodetypeobservation exception session repository login administrative loginadministrative reader cnd string reader stringreader message cnd jcr events counter jcreventscounter counter string path unique name uniquename observation add sling message entry messageentry verify jcr events cnd importer cndimporter register node types registernodetypes cnd counter jcr events counter jcreventscounter node get root node getrootnode add node addnode path substring sling message entry messageentry to delete todelete add get path getpath set property setproperty sling key foo set property setproperty sling message bar save jcr events counter jcreventscounter counter retry override exec exception assert true asserttrue expecting jcr events adding path logout cnd close counter counter close separate session modify node verify events counter jcr events counter jcreventscounter repository login administrative loginadministrative node get node getnode path set property setproperty sling message changed save jcr events counter jcreventscounter counter retry override exec exception assert true asserttrue expecting jcr events modifying path logout cnd close counter close setup exception service tracker servicetracker service tracker servicetracker bundle context bundlecontext sling repository slingrepository get name getname open repository sling repository slingrepository wait for service waitforservice interrupted exception interruptedexception jcr resource provider jcrresourceprovider initialized set ups setups conversion jcr osg i osgi events tests injecting resource resolver factory resourceresolverfactory fails have n haven timeout timeout at timeoutat system current time millis currenttimemillis timeout service reference servicereference system current time millis currenttimemillis timeout at timeoutat bundle context bundlecontext get service reference getservicereference resource resolver factory resourceresolverfactory get name getname assert not null assertnotnull expecting resource resolver factory resourceresolverfactory timeout seconds resource resolver resourceresolver resource resolver factory resourceresolverfactory resource resolver factory resourceresolverfactory bundle context bundlecontext get service getservice get administrative resource resolver getadministrativeresourceresolver get resource getresource close bundle context bundlecontext unget service ungetservice