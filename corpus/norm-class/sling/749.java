licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp jasper runtime java i o exception ioexception java writer java security access controller accesscontroller java security privileged action privilegedaction java security privileged action exception privilegedactionexception java security privileged exception action privilegedexceptionaction java util enumeration java util hash map hashmap javax el context elcontext javax expression factory expressionfactory javax value expression valueexpression javax servlet servlet javax servlet servlet config servletconfig javax servlet servlet context servletcontext javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax servlet http http session httpsession javax servlet jsp jsp exception jspexception javax servlet jsp jsp factory jspfactory javax servlet jsp jsp writer jspwriter javax servlet jsp page context pagecontext javax servlet jsp el exception elexception javax servlet jsp expression evaluator expressionevaluator javax servlet jsp variable resolver variableresolver javax servlet jsp tagext body content bodycontent org apache juli logging log org apache juli logging log factory logfactory org apache sling scripting jsp sling page exception slingpageexception org apache sling scripting jsp jasper constants org apache sling scripting jsp jasper compiler localizer org apache sling scripting jsp jasper el context impl elcontextimpl org apache sling scripting jsp jasper expression evaluator impl expressionevaluatorimpl org apache sling scripting jsp jasper function mapper impl functionmapperimpl org apache sling scripting jsp jasper variable resolver impl variableresolverimpl org apache sling scripting jsp jasper security security util securityutil org apache sling scripting jsp jasper util enum erator enumerator implementation page context pagecontext jsp spec doubles variable resolver variableresolver author anil vijendran author l arry larry cable author hans bergsten author pierre delisle author mark roth author jan luehe author jacob hookom page context impl pagecontextimpl page context pagecontext log log log factory logfactory get log getlog page context impl pagecontextimpl body content impl bodycontentimpl outs depth servlet servlet servlet servlet config servletconfig config servlet context servletcontext context jsp application context impl jspapplicationcontextimpl application context applicationcontext string errorpageurl scope attributes hash map hashmap string object attributes request servlet request servletrequest request servlet response servletresponse response http session httpsession session el context impl elcontextimpl el context elcontext is included isincluded initial output stream jsp writer jspwriter jsp writer impl jspwriterimpl base out baseout constructor page context impl pagecontextimpl outs body content impl bodycontentimpl attributes hash map hashmap string object depth initialize servlet servlet servlet request servletrequest request servlet response servletresponse response string errorpageurl needs session needssession buffer size buffersize auto flush autoflush i o exception ioexception initialize servlet request response errorpageurl needs session needssession buffer size buffersize auto flush autoflush initialize servlet servlet servlet request servletrequest request servlet response servletresponse response string errorpageurl needs session needssession buffer size buffersize auto flush autoflush i o exception ioexception initialize servlet servlet config internal servlet config wrapper internalservletconfigwrapper servlet get servlet config getservletconfig context config get servlet context getservletcontext errorpageurl errorpageurl request request response response initialize application context application context applicationcontext jsp application context impl jspapplicationcontextimpl get instance getinstance context setup session required request http servlet request httpservletrequest needs session needssession session http servlet request httpservletrequest request get session getsession needs session needssession session illegal state exception illegalstateexception session initialize initial depth base out baseout base out baseout jsp writer impl jspwriterimpl response buffer size buffersize auto flush autoflush base out baseout init response buffer size buffersize auto flush autoflush base out baseout register names values spec set attribute setattribute set attribute setattribute request request set attribute setattribute response response session set attribute setattribute session session set attribute setattribute servlet set attribute setattribute config config set attribute setattribute page context pagecontext set attribute setattribute application context is included isincluded request get attribute getattribute javax servlet include servlet path release base out baseout is included isincluded jsp writer impl jspwriterimpl flush buffer flushbuffer push including jsp writer jspwriter code flush flush buffer included main servlet flush close stream jsp writer impl jspwriterimpl flush buffer flushbuffer i o exception ioexception illegal state exception illegalstateexception ise illegal state exception illegalstateexception localizer get message getmessage jsp error flush ise servlet config context application context applicationcontext el context elcontext errorpageurl request response depth base out baseout recycle session attributes clear object get attribute getattribute string null pointer exception nullpointerexception localizer get message getmessage jsp error attribute security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction object do get attribute dogetattribute do get attribute dogetattribute object do get attribute dogetattribute string attributes object get attribute getattribute string scope null pointer exception nullpointerexception localizer get message getmessage jsp error attribute security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction object do get attribute dogetattribute scope do get attribute dogetattribute scope object do get attribute dogetattribute string scope scope scope attributes request scope request get attribute getattribute session scope session illegal state exception illegalstateexception localizer get message getmessage jsp error no session nosession session get attribute getattribute application scope context get attribute getattribute illegal argument exception illegalargumentexception invalid scope set attribute setattribute string object attribute null pointer exception nullpointerexception localizer get message getmessage jsp error attribute security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction object do set attribute dosetattribute attribute do set attribute dosetattribute attribute do set attribute dosetattribute string object attribute attribute attributes attribute remove attribute removeattribute scope set attribute setattribute string object scope null pointer exception nullpointerexception localizer get message getmessage jsp error attribute security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction object do set attribute dosetattribute scope do set attribute dosetattribute scope do set attribute dosetattribute string object scope scope scope attributes request scope request set attribute setattribute session scope session illegal state exception illegalstateexception localizer get message getmessage jsp error no session nosession session set attribute setattribute application scope context set attribute setattribute illegal argument exception illegalargumentexception invalid scope remove attribute removeattribute scope remove attribute removeattribute string scope null pointer exception nullpointerexception localizer get message getmessage jsp error attribute security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction object do remove attribute doremoveattribute scope do remove attribute doremoveattribute scope do remove attribute doremoveattribute string scope scope scope attributes remove request scope request remove attribute removeattribute session scope session illegal state exception illegalstateexception localizer get message getmessage jsp error no session nosession session remove attribute removeattribute application scope context remove attribute removeattribute illegal argument exception illegalargumentexception invalid scope get attributes scope getattributesscope string null pointer exception nullpointerexception localizer get message getmessage jsp error attribute security util securityutil is package protection enabled ispackageprotectionenabled integer access controller accesscontroller do privileged doprivileged privileged action privilegedaction object integer do get attribute scope dogetattributescope int value intvalue do get attribute scope dogetattributescope do get attribute scope dogetattributescope string attributes scope request get attribute getattribute request scope session session get attribute getattribute session scope context get attribute getattribute application scope object find attribute findattribute string security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction object null pointer exception nullpointerexception localizer get message getmessage jsp error attribute do find attribute dofindattribute null pointer exception nullpointerexception localizer get message getmessage jsp error attribute do find attribute dofindattribute object do find attribute dofindattribute string object attributes request get attribute getattribute session session get attribute getattribute context get attribute getattribute enumeration string get attribute names in scope getattributenamesinscope scope security util securityutil is package protection enabled ispackageprotectionenabled enumeration access controller accesscontroller do privileged doprivileged privileged action privilegedaction object do get attribute names in scope dogetattributenamesinscope scope do get attribute names in scope dogetattributenamesinscope scope enumeration do get attribute names in scope dogetattributenamesinscope scope scope scope enum erator enumerator attributes key set keyset iterator request scope request get attribute names getattributenames session scope session illegal state exception illegalstateexception localizer get message getmessage jsp error no session nosession session get attribute names getattributenames application scope context get attribute names getattributenames illegal argument exception illegalargumentexception invalid scope remove attribute removeattribute string null pointer exception nullpointerexception localizer get message getmessage jsp error attribute security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged action privilegedaction object do remove attribute doremoveattribute do remove attribute doremoveattribute do remove attribute doremoveattribute string remove attribute removeattribute scope remove attribute removeattribute request scope session remove attribute removeattribute session scope remove attribute removeattribute application scope exception jsp writer jspwriter get out getout http session httpsession get session getsession session servlet get servlet getservlet servlet servlet config servletconfig get servlet config getservletconfig config servlet context servletcontext get servlet context getservletcontext config get servlet context getservletcontext servlet request servletrequest get request getrequest request servlet response servletresponse get response getresponse response returns exception context wrapping throw ables throwables avoid class cast exception classcastexception bug zilla bugzilla details exception context exception get exception getexception throwable jsp runtime library jspruntimelibrary get throwable getthrowable request wrap needed exception jsp exception jspexception exception object get page getpage servlet string get absolute path relative to context getabsolutepathrelativetocontext string relative url path relativeurlpath string path relative url path relativeurlpath path starts with startswith string uri string request get attribute getattribute javax servlet include servlet path uri uri http servlet request httpservletrequest request get servlet path getservletpath string baseuri uri substring uri last index of lastindexof path baseuri path path include string relative url path relativeurlpath servlet exception servletexception i o exception ioexception jsp runtime library jspruntimelibrary include request response relative url path relativeurlpath include string relative url path relativeurlpath flush servlet exception servletexception i o exception ioexception security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction object exception do include doinclude relative url path relativeurlpath flush privileged action exception privilegedactionexception exception get exception getexception i o exception ioexception i o exception ioexception servlet exception servletexception do include doinclude relative url path relativeurlpath flush do include doinclude string relative url path relativeurlpath flush servlet exception servletexception i o exception ioexception jsp runtime library jspruntimelibrary include request response relative url path relativeurlpath flush variable resolver variableresolver get variable resolver getvariableresolver variable resolver impl variableresolverimpl getelcontext string relative url path relativeurlpath servlet exception servletexception i o exception ioexception security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction object exception do for ward doforward relative url path relativeurlpath privileged action exception privilegedactionexception exception get exception getexception i o exception ioexception i o exception ioexception servlet exception servletexception do for ward doforward relative url path relativeurlpath do for ward doforward string relative url path relativeurlpath servlet exception servletexception i o exception ioexception jsp buffer flushed illegal state exception illegalstateexception clear i o exception ioexception illegal state exception illegalstateexception ise illegal state exception illegalstateexception localizer get message getmessage jsp error attempt clear flushed buffer ise init cause initcause ise response object wrapper include response servlet response wrapper include servletresponsewrapperinclude response servlet response wrapper include servletresponsewrapperinclude response get response getresponse string path get absolute path relative to context getabsolutepathrelativetocontext relative url path relativeurlpath string include uri includeuri string request get attribute getattribute constants servlet path include uri includeuri request remove attribute removeattribute constants servlet path context get request dispatcher getrequestdispatcher path request response include uri includeuri request set attribute setattribute constants servlet path include uri includeuri for ward to error page forwardtoerrorpage string relative url path relativeurlpath servlet exception servletexception i o exception ioexception security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction object exception do for ward to error page doforwardtoerrorpage relative url path relativeurlpath privileged action exception privilegedactionexception exception get exception getexception i o exception ioexception i o exception ioexception servlet exception servletexception do for ward to error page doforwardtoerrorpage relative url path relativeurlpath do for ward to error page doforwardtoerrorpage string relative url path relativeurlpath servlet exception servletexception i o exception ioexception jsp buffer flushed illegal state exception illegalstateexception clear i o exception ioexception illegal state exception illegalstateexception ise illegal state exception illegalstateexception localizer get message getmessage jsp error attempt clear flushed buffer ise init cause initcause ise response object wrapper include response servlet response wrapper include servletresponsewrapperinclude response servlet response wrapper include servletresponsewrapperinclude response get response getresponse string path get absolute path relative to context getabsolutepathrelativetocontext relative url path relativeurlpath sling page exception slingpageexception path body content bodycontent push body pushbody body content bodycontent push body pushbody jsp writer jspwriter push body pushbody writer writer depth depth outs length body content impl bodycontentimpl new outs newouts body content impl bodycontentimpl depth outs length new outs newouts outs new outs newouts depth body content impl bodycontentimpl outs new outs newouts outs depth set writer setwriter writer outs depth update attribute scope attribute namespace page context pagecontext set attribute setattribute outs depth jsp writer jspwriter pop body popbody depth depth outs depth base out baseout update attribute scope attribute namespace page context pagecontext set attribute setattribute program matic programmatic access expression evaluator expressionevaluator jsp container valid instance expression evaluator expressionevaluator parse expressions expression evaluator expressionevaluator get expression evaluator getexpressionevaluator expression evaluator impl expressionevaluatorimpl application context applicationcontext get expression factory getexpressionfactory handle page exception handlepageexception exception i o exception ioexception servlet exception servletexception called handle exception handleexception called throwable generated servlet handle page exception handlepageexception throwable handle page exception handlepageexception throwable i o exception ioexception servlet exception servletexception null pointer exception nullpointerexception throwable security util securityutil is package protection enabled ispackageprotectionenabled access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction object exception do handle page exception dohandlepageexception privileged action exception privilegedactionexception exception get exception getexception i o exception ioexception i o exception ioexception servlet exception servletexception do handle page exception dohandlepageexception do handle page exception dohandlepageexception throwable i o exception ioexception servlet exception servletexception errorpageurl errorpageurl equals request attributes javax servlet error exception attribute generated servlet code error order prevent error report valve errorreportvalve invoked for warding forwarding request error throwing response committed response committed error jsp request set attribute setattribute javax servlet jsp jsp exception jspexception request set attribute setattribute javax servlet error status code integer http servlet response httpservletresponse internal server error request set attribute setattribute javax servlet error request uri http servlet request httpservletrequest request getrequesturi request set attribute setattribute javax servlet error servlet config get servlet name getservletname for ward to error page forwardtoerrorpage errorpageurl illegal state exception illegalstateexception ise include errorpageurl error include object new exception newexception request get attribute getattribute javax servlet error exception attribute new exception newexception new exception newexception request remove attribute removeattribute javax servlet error exception clear error code prevent handling request remove attribute removeattribute javax servlet error status code request remove attribute removeattribute javax servlet error request uri request remove attribute removeattribute javax servlet error status code request remove attribute removeattribute javax servlet jsp jsp exception jspexception stack trace real problem i o exception ioexception i o exception ioexception servlet exception servletexception servlet exception servletexception runtime exception runtimeexception runtime exception runtimeexception throwable root cause rootcause jsp exception jspexception root cause rootcause jsp exception jspexception get root cause getrootcause el exception elexception root cause rootcause el exception elexception get root cause getrootcause root cause rootcause servlet exception servletexception get class getclass get name getname get message getmessage root cause rootcause servlet exception servletexception string xml escape xmlescape string string buffer stringbuffer string buffer stringbuffer length char at charat append append apos append apos append amp quot append quot append to string tostring prop rietary proprietary method evaluate expressions xxx method int erpreter interpreter moves jstl project standard machinery slow param expression expression eval uated evaluated param expected type expectedtype expected type param page context pagecontext context param function map functionmap maps prefix method result evaluation object prop rietary evaluate proprietaryevaluate string expression expected type expectedtype page context pagecontext page context pagecontext protected function mapper protectedfunctionmapper function map functionmap escape el exception elexception object ret value retvalue expression factory expressionfactory expr factory exprfactory jsp factory jspfactory get default factory getdefaultfactory get jsp application context getjspapplicationcontext page context pagecontext get servlet context getservletcontext get expression factory getexpressionfactory security util securityutil is package protection enabled ispackageprotectionenabled ret value retvalue access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction object exception el context impl elcontextimpl ctx el context impl elcontextimpl page context pagecontext getelcontext ctx set function mapper setfunctionmapper function mapper impl functionmapperimpl function map functionmap value expression valueexpression expr factory exprfactory create value expression createvalueexpression ctx expression expected type expectedtype get value getvalue ctx privileged action exception privilegedactionexception exception real ex realex get exception getexception real ex realex el exception elexception el exception elexception real ex realex el exception elexception real ex realex el context impl elcontextimpl ctx el context impl elcontextimpl page context pagecontext getelcontext ctx set function mapper setfunctionmapper function mapper impl functionmapperimpl function map functionmap value expression valueexpression expr factory exprfactory create value expression createvalueexpression ctx expression expected type expectedtype ret value retvalue get value getvalue ctx escape ret value retvalue ret value retvalue xml escape xmlescape ret value retvalue to string tostring ret value retvalue el context elcontext getelcontext el context elcontext el context elcontext application context applicationcontext createelcontext el context elcontext