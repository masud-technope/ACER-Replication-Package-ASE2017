licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons log logback internal util java io exception ioexception java unsupported encoding exception unsupportedencodingexception java nio charset charset java util map java util concurrent concurrent hash map concurrenthashmap qos logback classic spi i logging event iloggingevent qos logback core layout qos logback core pattern pattern layout encoder base patternlayoutencoderbase org apache sling commons log logback internal log config logconfig logger specific encoder loggerspecificencoder pattern layout encoder base patternlayoutencoderbase i logging event iloggingevent map string layout i logging event iloggingevent layout by category layoutbycategory concurrent hash map concurrenthashmap string layout i logging event iloggingevent layout i logging event iloggingevent default layout defaultlayout logger specific encoder loggerspecificencoder layout i logging event iloggingevent default layout defaultlayout default layout defaultlayout default layout defaultlayout do encode doencode i logging event iloggingevent event io exception ioexception string txt get layout getlayout event get logger name getloggername do layout dolayout event output stream outputstream write convert to bytes converttobytes txt is immediate flush isimmediateflush output stream outputstream flush layout i logging event iloggingevent get layout getlayout string logger name loggername todo handle layout inheritance wrt logger names layout i logging event iloggingevent layout layout by category layoutbycategory logger name loggername layout layout default layout defaultlayout layout convert to bytes converttobytes string charset charset get charset getcharset charset get bytes getbytes get bytes getbytes charset unsupported encoding exception unsupportedencodingexception illegal state exception illegalstateexception existing charset unsupported add log config addlogconfig log config logconfig config layout i logging event iloggingevent layout config create layout createlayout string category config get categories getcategories layout by category layoutbycategory category layout