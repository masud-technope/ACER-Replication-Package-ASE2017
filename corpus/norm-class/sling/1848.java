licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad base shared java file java i o exception ioexception java net malformedurlexception java net url java net url class loader urlclassloader java util array list arraylist java util enumeration java util hash set hashset java util list java util java util jar jar entry jarentry java util jar jar file jarfile code launcher class loader launcherclassloader code standard java code url class loader urlclassloader code classes resources contained launcher jar file looked parent loader loader shields sling osg i osgi framework completely environment classes resources contained packages launcher jar file looked launcher jar file classes resources environment framework framework configured code org osgi framework boot del egation bootdelegation code code org osgi framework system packages systempackages code framework properties point sling deployed container packages sling launcher jar file glassfish prelude application service runs felix osg i osgi framework sort leaks classes web application general prevent leaking classes osg i osgi core comp endium compendium libraries sling loader bar rier barrier leaking shields sling environment explicitly configured leaking instances loader setup launcher jar file contents code url class loaders urlclassloaders code path loader parent loader launcher class loader launcherclassloader url class loader urlclassloader packages environment contained forms java form segments separated dots org osgi framework resource form segments separated slash org osgi framework checking packages classes resources equaly simple req uiring requiring mangling string launcher packages launcherpackages launcher class loader launcherclassloader file launcher jar launcherjar file ext jars extjars malformedurlexception url launcher jar launcherjar touri tourl launcher class loader launcherclassloader get class loader getclassloader string collected packages collectedpackages hash set hashset string process launcher jar process jar packages processjarpackages launcher jar launcherjar collected packages collectedpackages process extension jars list file ext jar file list extjarfilelist get ext jar file list getextjarfilelist ext jars extjars add external jars class loader classloader file ext jar file extjarfile ext jar file list extjarfilelist addurl ext jar file extjarfile touri tourl process jar packages processjarpackages ext jar file extjarfile collected packages collectedpackages launcher packages launcherpackages collected packages collectedpackages process jar packages processjarpackages file jar file jarfile string package set packageset jar file jarfile jar jar jar file jarfile jar file jarfile enumeration jar entry jarentry entries jar entries entries has more elements hasmoreelements string entry name entryname entries next element nextelement get name getname entry name entryname ends with endswith entry name entryname starts with startswith meta inf entry name entryname starts with startswith javax string package name packagename get package name getpackagename entry name entryname package name packagename package set packageset add package name packagename package set packageset add package name packagename replace i o exception ioexception ioe jar jar close i o exception ioexception ignore list file get ext jar file list getextjarfilelist file ext jars extjars malformedurlexception list file jar list jarlist array list arraylist file file ext jar file extjarfile ext jars extjars ext jar file extjarfile ext jar file extjarfile exists jar list jarlist add ext jar file extjarfile jar list jarlist load option ally optionally resolve method checks contained launcher jar file launcher jar file looked loading fails standard loading str ategy strategy applied calling base implementation override load class loadclass string resolve class not found exception classnotfoundexception check loaded find loaded class findloadedclass contains package containspackage finds class not found exception classnotfoundexception jar file find class findclass load class loadclass resolve resolve resolve class resolveclass url requested resource method checks resource contained launcher jar file launcher jar file looked resource resource access fails standard resource access str ategy strategy applied calling base implementation override url get resource getresource string file resource contains package containspackage find resource findresource parent loader checked packages get resource getresource returns fully qualified code separator code segment separator code code separator contained root method returns code code called org osgi framework bundle method returns org osgi framework param fully qualified resource check param separator separator segments string get package name getpackagename string separator spe idx speidx last index of lastindexof separator spe idx speidx substring spe idx speidx returns code code launcher jar file named resource belongs param fully qualified resource check param separator separator segments contains package containspackage string separator string package name packagename get package name getpackagename separator package name packagename launcher packages launcherpackages package name packagename