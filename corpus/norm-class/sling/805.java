licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling nosql resource impl org junit assert false assertfalse org junit assert not null assertnotnull org junit assert true asserttrue java io exception ioexception java util list org apache commons lang string utils stringutils org apache jackrabbit jcr constants jcrconstants org apache sling api resource modifiable value map modifiablevaluemap org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource util resourceutil org apache sling testing mock sling resource resolver type resourceresolvertype org apache sling testing mock sling junit sling context slingcontext org junit org junit org junit rule org junit test google common collect immutable map immutablemap google common collect lists test monting no sql resource provider nosqlresourceprovider root resource provider abstract no sql resource provider root test abstractnosqlresourceproviderroottest rule sling context slingcontext context sling context slingcontext resource resolver type resourceresolvertype register resource provider factory as root registerresourceproviderfactoryasroot set up setup exception register resource provider factory as root registerresourceproviderfactoryasroot tear down teardown context resource resolver resourceresolver revert test test root testroot resource root context resource resolver resourceresolver get resource getresource assert not null assertnotnull root assert true asserttrue root no sql resource nosqlresource test test create path testcreatepath persistence exception persistenceexception resource util resourceutil get or create resource getorcreateresource context resource resolver resourceresolver test test immutable map immutablemap string object jcr constants jcrconstants jcr primarytype jcr constants jcrconstants unstructured jcr constants jcrconstants unstructured resource test context resource resolver resourceresolver get resource getresource test assert not null assertnotnull test resource test context resource resolver resourceresolver get resource getresource test test assert not null assertnotnull test context resource resolver resourceresolver delete test test test list children testlistchildren root node rootnode io exception ioexception resource test resource testresource resource util resourceutil get or create resource getorcreateresource context resource resolver resourceresolver test immutable map immutablemap string object jcr constants jcrconstants jcr primarytype jcr constants jcrconstants unstructured jcr constants jcrconstants unstructured resource root context resource resolver resourceresolver get resource getresource list resource children lists new array list newarraylist root list children listchildren assert false assertfalse children is empty isempty assert true asserttrue contains resource containsresource children test resource testresource children lists new array list newarraylist root get children getchildren assert false assertfalse children is empty isempty assert true asserttrue contains resource containsresource children test resource testresource context resource resolver resourceresolver delete test resource testresource contains resource containsresource list resource children resource resource resource child children string utils stringutils equals child get path getpath resource get path getpath test expected persistence exception persistenceexception test delete root path testdeleterootpath persistence exception persistenceexception resource root context resource resolver resourceresolver get resource getresource context resource resolver resourceresolver delete root test expected throwable test update root path testupdaterootpath persistence exception persistenceexception resource root context resource resolver resourceresolver get resource getresource modifiable value map modifiablevaluemap props root adapt to adaptto modifiable value map modifiablevaluemap props prop context resource resolver resourceresolver commit