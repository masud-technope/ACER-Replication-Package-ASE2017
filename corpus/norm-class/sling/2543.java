licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets impl helpers org junit assert equals assertequals org junit assert false assertfalse org junit assert true asserttrue java io exception ioexception org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api request request path info requestpathinfo org apache sling api resource resource org junit org junit test org mockito matchers org mockito mockito org mockito invocation invocation on mock invocationonmock org mockito stub bin g stubbing answer json renderer servlet test jsonrendererservlettest sling http servlet request slinghttpservletrequest request sling http servlet response slinghttpservletresponse response string selectors json renderer servlet jsonrendererservlet jrs setup request mockito mock sling http servlet request slinghttpservletrequest request path info requestpathinfo rpi mockito mock request path info requestpathinfo mockito request get request path info getrequestpathinfo then return thenreturn rpi mockito rpi get selectors getselectors then answer thenanswer answer string string answer invocation on mock invocationonmock invocation selectors resource resource mockito mock resource mockito request get resource getresource then return thenreturn resource response mockito mock sling http servlet response slinghttpservletresponse jrs json renderer servlet jsonrendererservlet test test recursion level a testrecursionlevela selectors string assert equals assertequals jrs get max recursion level getmaxrecursionlevel request assert false assertfalse jrs is tidy istidy request test expected illegal argument exception illegalargumentexception test recursion level b testrecursionlevelb selectors string jrs get max recursion level getmaxrecursionlevel request test expected illegal argument exception illegalargumentexception test recursion level c testrecursionlevelc selectors string jrs get max recursion level getmaxrecursionlevel request test test recursion level d testrecursionleveld selectors string tidy assert equals assertequals jrs get max recursion level getmaxrecursionlevel request test test recursion level e testrecursionlevele level selector selector tidy error historical reasons selectors string tidy assert equals assertequals jrs get max recursion level getmaxrecursionlevel request test test recursion level f testrecursionlevelf selectors string tidy assert equals assertequals jrs get max recursion level getmaxrecursionlevel request assert true asserttrue jrs is tidy istidy request test test bad request testbadrequest io exception ioexception selectors string bad selectors jrs do get doget request response mockito verify response mockito times send error senderror matchers any int anyint matchers any string anystring