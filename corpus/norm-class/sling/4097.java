licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock sling java util dictionary java util hashtable org apache sling api adapter adapter manager adaptermanager org apache sling testing mock osgi mock osgi mockosgi org osgi framework bundle context bundlecontext org osgi framework service reference servicereference wrapper link mock adapter manager mockadaptermanager multiple unit tests running parallel conflict link mock adapter manager mockadaptermanager thread thread safe mock adapter manager wrapper threadsafemockadaptermanagerwrapper adapter manager adaptermanager thread local threadlocal adapter manager bundle context factory adaptermanagerbundlecontextfactory thread local thread local threadlocal adapter manager bundle context factory adaptermanagerbundlecontextfactory override adapter manager bundle context factory adaptermanagerbundlecontextfactory initial value initialvalue adapter manager bundle context factory adaptermanagerbundlecontextfactory override adapter type adaptertype adapter type adaptertype get adapter getadapter object adaptable adapter type adaptertype type adapter manager adaptermanager adapter manager adaptermanager thread local get adapter manager getadaptermanager adapter manager adaptermanager get adapter getadapter adaptable type sets bundle context param bundle context bundlecontext bundle context set bundle context setbundlecontext bundle context bundlecontext bundle context bundlecontext adapter manager bundle context factory adaptermanagerbundlecontextfactory adapter manager adaptermanager thread local adapter manager adaptermanager set bundle context setbundlecontext bundle context bundlecontext removes bundle context reference clear bundle context clearbundlecontext adapter manager bundle context factory adaptermanagerbundlecontextfactory adapter manager adaptermanager thread local adapter manager adaptermanager clear bundle context clearbundlecontext adapter manager bundle context factory adaptermanagerbundlecontextfactory bundle context bundlecontext bundle context bundlecontext set bundle context setbundlecontext bundle context bundlecontext bundle context bundlecontext bundle context bundlecontext bundle context bundlecontext register adapter manager mock adapter manager impl mockadaptermanagerimpl adapter manager impl adaptermanagerimpl mock adapter manager impl mockadaptermanagerimpl dictionary string object properties hashtable string object mock osgi mockosgi inject services injectservices adapter manager impl adaptermanagerimpl bundle context bundlecontext mock osgi mockosgi activate adapter manager impl adaptermanagerimpl bundle context bundlecontext properties bundle context bundlecontext register service registerservice adapter manager adaptermanager get name getname adapter manager impl adaptermanagerimpl properties clear bundle context clearbundlecontext bundle context bundlecontext adapter manager adaptermanager get adapter manager getadaptermanager bundle context bundlecontext set bundle context setbundlecontext mock osgi mockosgi new bundle context newbundlecontext service reference servicereference service reference servicereference bundle context bundlecontext get service reference getservicereference adapter manager adaptermanager get name getname service reference servicereference adapter manager adaptermanager bundle context bundlecontext get service getservice service reference servicereference runtime exception runtimeexception adapter manager adaptermanager registered bundle context