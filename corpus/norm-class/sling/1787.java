licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr content loader contentloader internal java io exception ioexception java input stream inputstream javax jcr invalid serialized data exception invalidserializeddataexception javax jcr node javax jcr repository exception repositoryexception javax jcr session org slf logger org slf logger factory loggerfactory javax jcr importuuidbehavior uuid collision replace existing javax jcr importuuidbehavior uuid create org apache sling jcr content loader contentloader content type util contenttypeutil ext jcr xml jcr xml importer jcrxmlimporter logger logger logger factory loggerfactory get logger getlogger jcr xml importer jcrxmlimporter jcr xml importer jcrxmlimporter xml file jcr system document view xml file valid system document view export file code code returned param parent parent node param resource param content stream contentstream xml content param replace replace subtree node exists code code succeeds code code fails xml format errors io exception ioexception error occurrs reading xml file node import jcr xml importjcrxml node parent string input stream inputstream content stream contentstream replace io exception ioexception string node name nodename ends with endswith ext jcr xml substring length ext jcr xml length ensure empty node name nodename length io exception ioexception node empty extension check existence replacement parent has node hasnode node name nodename node existing node existingnode parent get node getnode node name nodename replace logger debug import jcr xml importjcrxml removing existing node node name nodename existing node existingnode remove logger debug import jcr xml importjcrxml node xml exists node name nodename existing node existingnode uuid behavior uuidbehavior replace uuid behavior uuidbehavior uuid collision replace existing uuid behavior uuidbehavior uuid create session session parent get session getsession session importxml parent get path getpath content stream contentstream uuid behavior uuidbehavior add itionally additionally check expected child node exists parent has node hasnode node name nodename parent get node getnode node name nodename invalid serialized data exception invalidserializeddataexception isde logger info import jcr xml importjcrxml xml system document view isde to string tostring repository exception repositoryexception logger info import jcr xml importjcrxml repository issue loading xml to string tostring