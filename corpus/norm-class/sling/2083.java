licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jst java buffered reader bufferedreader java io exception ioexception java input stream inputstream java print writer printwriter java string reader stringreader java string writer stringwriter javax jcr node javax jcr repository exception repositoryexception junit framework test case testcase org apache sling api sling http servlet request slinghttpservletrequest org apache sling commons testing jcr mock node mocknode org apache sling commons testing sling mock resource mockresource org apache sling commons testing sling mock sling http servlet request mockslinghttpservletrequest test js code generator jscodegenerator html code generator test htmlcodegeneratortest test case testcase string encoding utf string test resources path html code htmlcode html code generator htmlcodegenerator generator html code generator htmlcodegenerator pass input jst test file html code generator htmlcodegenerator verify result matches expected html file run test runtest exception string script path scriptpath test resources path html code htmlcode input jst input stream inputstream script stream scriptstream get class getclass get resource as stream getresourceasstream script path scriptpath script stream scriptstream test files assert not null assertnotnull script path scriptpath script stream scriptstream string expected code expectedcode string util stringutil read class resource readclassresource get class getclass test resources path html code htmlcode expected html encoding string writer stringwriter result string writer stringwriter sling http servlet request slinghttpservletrequest request get mock request getmockrequest generator generate html generatehtml request script path scriptpath script stream scriptstream print writer printwriter result compare line by line comparelinebyline expected code expectedcode to string tostring result to string tostring read blank string read line readline buffered reader bufferedreader io exception ioexception string result result read line readline result result result trim result index of indexof todo test result length result compare line by line comparelinebyline string expected string actual io exception ioexception buffered reader bufferedreader buffered reader bufferedreader string reader stringreader expected trim buffered reader bufferedreader buffered reader bufferedreader string reader stringreader actual trim string ex line exline read line readline string ac line acline read line readline ex line exline ac line acline ex line exline ac line acline fail actual code lines expected assert equals assertequals match ex line exline ac line acline system err println expected code expected system err println actual code actual sling http servlet request slinghttpservletrequest get mock request getmockrequest string resource path resourcepath foo mock sling http servlet request mockslinghttpservletrequest mock sling http servlet request mockslinghttpservletrequest resource path resourcepath override string get context path getcontextpath context override string get servlet path getservletpath servlet string path foo node mock node mocknode mock node mocknode path set property setproperty title test title set property setproperty desc test desc repository exception repositoryexception mock resource mockresource mock resource mockresource path suppress warnings suppresswarnings unchecked type type adapt to adaptto type type type equals node type set resource setresource test html code test files testhtmlcodetestfiles exception max test files maxtestfiles expected tests expectedtests counter max test files maxtestfiles run test runtest counter assert true asserttrue expected tests expectedtests counter expected tests expectedtests test title building testtitlebuilding repository exception repositoryexception string path foo title mock node mocknode mock node mocknode path mock resource mockresource mock resource mockresource path assert equals assertequals foo title generator get title gettitle set property setproperty description description assert equals assertequals description generator get title gettitle set property setproperty assert equals assertequals generator get title gettitle set property setproperty title title assert equals assertequals title generator get title gettitle