licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr jackrabbit access manager accessmanager post java security principal java util enumeration java util hash map hashmap java util hash set hashset java util list java util map java util java util map entry javax jcr item javax jcr repository exception repositoryexception javax jcr session javax servlet servlet org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations service org apache jackrabbit api security principal principal manager principalmanager org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource resource not found exception resourcenotfoundexception org apache sling api servlets html response htmlresponse org apache sling jcr base util access control util accesscontrolutil org apache sling jcr jackrabbit access manager accessmanager modify ace modifyace org apache sling servlets post abstract post response abstractpostresponse org apache sling servlets post modification sling post servlet implementation modifying ace s aces principal jcr resource service description modify principal ace s aces node identified resource request url resource modify ace modifyace html methods post post parameters principal id principalid principal ace s aces modify acl path privilege privileges granted denied applied removed node acl permissions existing ace principal request left untouched response success resource failure html exp lains explains failure notes principal id principalid assumed refer authorizable direct user manager usermanager group user group denied permissions group group granted privileges component service servlet modify ace modifyace properties property sling servlet resource types resourcetypes sling servlet property sling servlet methods post property sling servlet selectors modify ace modifyace modify ace servlet modifyaceservlet abstract access post servlet abstractaccesspostservlet modify ace modifyace serialversionuid javadoc org apache sling jackrabbit access manager accessmanager post abstract access post servlet abstractaccesspostservlet handle operation handleoperation org apache sling api sling http servlet request slinghttpservletrequest org apache sling api servlets html response htmlresponse java util list override handle operation handleoperation sling http servlet request slinghttpservletrequest request abstract post response abstractpostresponse response list modification repository exception repositoryexception session session request get resource resolver getresourceresolver adapt to adaptto session string resource path resourcepath request get resource getresource get path getpath string principal id principalid request get parameter getparameter principal id principalid map string string privileges hash map hashmap string string enumeration parameter names parameternames request get parameter names getparameternames parameter names parameternames has more elements hasmoreelements object next element nextelement parameter names parameternames next element nextelement next element nextelement string string param name paramname string next element nextelement param name paramname starts with startswith privilege string privilege name privilegename param name paramname substring string parameter value parametervalue request get parameter getparameter param name paramname privileges privilege name privilegename parameter value parametervalue string order request get parameter getparameter order modify ace modifyace session resource path resourcepath principal id principalid privileges order javadoc org apache sling jcr jackrabbit access manager accessmanager modify ace modifyace modify ace modifyace javax jcr session java lang string java lang string java util map java lang string modify ace modifyace session jcr session jcrsession string resource path resourcepath string principal id principalid map string string privileges string order repository exception repositoryexception jcr session jcrsession repository exception repositoryexception jcr session principal id principalid repository exception repositoryexception principal id principalid sub mitted submitted principal manager principalmanager principal manager principalmanager access control util accesscontrolutil get principal manager getprincipalmanager jcr session jcrsession principal principal principal manager principalmanager get principal getprincipal principal id principalid resource path resourcepath resource not found exception resourcenotfoundexception resource path supplied item item jcr session jcrsession get item getitem resource path resourcepath item resource path resourcepath item get path getpath resource not found exception resourcenotfoundexception resource jcr node collect modified privileges request string granted privilege names grantedprivilegenames hash set hashset string string denied privilege names deniedprivilegenames hash set hashset string string removed privilege names removedprivilegenames hash set hashset string entry string string entry set entryset privileges entry set entryset entry string string entry entry set entryset string privilege name privilegename entry get key getkey privilege name privilegename starts with startswith privilege privilege name privilegename privilege name privilegename substring string parameter value parametervalue entry get value getvalue parameter value parametervalue parameter value parametervalue length granted equals parameter value parametervalue granted privilege names grantedprivilegenames add privilege name privilegename denied equals parameter value parametervalue denied privilege names deniedprivilegenames add privilege name privilegename equals parameter value parametervalue removed privilege names removedprivilegenames add privilege name privilegename actual access control util accesscontrolutil replace access control entry replaceaccesscontrolentry jcr session jcrsession resource path resourcepath principal granted privilege names grantedprivilegenames to array toarray string granted privilege names grantedprivilegenames size denied privilege names deniedprivilegenames to array toarray string denied privilege names deniedprivilegenames size removed privilege names removedprivilegenames to array toarray string removed privilege names removedprivilegenames size order jcr session jcrsession has pending changes haspendingchanges jcr session jcrsession save repository exception repositoryexception repository exception repositoryexception failed create ace