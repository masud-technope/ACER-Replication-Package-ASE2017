licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons scheduler impl org apache sling commons scheduler job org apache sling commons scheduler job context jobcontext org apache sling testing mock osgi mock osgi mockosgi org junit org junit org junit test org junit runner run with runwith org mockito mock org mockito run ners runners mockito unit runner mockitojunitrunner org osgi framework bundle context bundlecontext org quartz java serializable java lang reflect field java util hash map hashmap java util map org apache sling commons scheduler scheduler leader org apache sling commons scheduler scheduler single org junit assert false assertfalse org junit assert true asserttrue org mockito mockito run with runwith mockito unit runner mockitojunitrunner quartz job executor test quartzjobexecutortest scheduler scheduler bundle context bundlecontext context quartz job executor quartzjobexecutor job executor jobexecutor quartz scheduler quartzscheduler quartz scheduler quartzscheduler is runnable pseudo job completed isrunnablepseudojobcompleted mock job execution context jobexecutioncontext execution context executioncontext set up setup exception context mock osgi mockosgi new bundle context newbundlecontext job executor jobexecutor quartz job executor quartzjobexecutor quartz scheduler quartzscheduler activated quartz scheduler factory activatedquartzschedulerfactory create context test name testname field scheduler field schedulerfield quartz scheduler quartzscheduler get declared field getdeclaredfield scheduler scheduler field schedulerfield set accessible setaccessible scheduler scheduler scheduler field schedulerfield quartz scheduler quartzscheduler test test runnable job testrunnablejob scheduler exception schedulerexception interrupted exception interruptedexception thread job thread simple runnable job simplerunnablejob string job name jobname test name testname map string serializable job config jobconfig hash map hashmap string serializable adding job receive job detail jobdetail object needed testing quartz scheduler quartzscheduler add job addjob job name jobname job job config jobconfig job detail jobdetail job detail jobdetail scheduler get job detail getjobdetail job key jobkey job key jobkey job name jobname execution context executioncontext get job detail getjobdetail then return thenreturn job detail jobdetail is runnable pseudo job completed isrunnablepseudojobcompleted job executor jobexecutor execute execution context executioncontext job is alive isalive job job is alive isalive job join assert true asserttrue is runnable pseudo job completed isrunnablepseudojobcompleted test test job testjob scheduler exception schedulerexception job job simple job simplejob string job name jobname test name testname map string serializable job config jobconfig hash map hashmap string serializable adding job receive job detail jobdetail object needed testing quartz scheduler quartzscheduler add job addjob job name jobname job job config jobconfig job detail jobdetail job detail jobdetail scheduler get job detail getjobdetail job key jobkey job key jobkey job name jobname execution context executioncontext get job detail getjobdetail then return thenreturn job detail jobdetail is runnable pseudo job completed isrunnablepseudojobcompleted job executor jobexecutor execute execution context executioncontext assert true asserttrue is runnable pseudo job completed isrunnablepseudojobcompleted test test job not executed testjobnotexecuted scheduler exception schedulerexception job job simple job simplejob string job name jobname test name testname map string serializable job config jobconfig hash map hashmap string serializable adding job receive job detail jobdetail object needed testing quartz scheduler quartzscheduler add job addjob job name jobname job job config jobconfig job detail jobdetail job detail jobdetail scheduler get job detail getjobdetail job key jobkey job key jobkey job name jobname execution context executioncontext get job detail getjobdetail then return thenreturn job detail jobdetail job config executed job detail jobdetail get job data map getjobdatamap quartz scheduler quartzscheduler data map string leader is runnable pseudo job completed isrunnablepseudojobcompleted job executor jobexecutor execute execution context executioncontext assert false assertfalse is runnable pseudo job completed isrunnablepseudojobcompleted test test job not executed with two run on params testjobnotexecutedwithtworunonparams scheduler exception schedulerexception job job simple job simplejob string job name jobname test name testname map string serializable job config jobconfig hash map hashmap string serializable adding job receive job detail jobdetail object needed testing quartz scheduler quartzscheduler add job addjob job name jobname job job config jobconfig job detail jobdetail job detail jobdetail scheduler get job detail getjobdetail job key jobkey job key jobkey job name jobname execution context executioncontext get job detail getjobdetail then return thenreturn job detail jobdetail job config executed job detail jobdetail get job data map getjobdatamap quartz scheduler quartzscheduler data map string leader single quartz job executor quartzjobexecutor sling string equal leader single test is runnable pseudo job completed isrunnablepseudojobcompleted job executor jobexecutor execute execution context executioncontext assert false assertfalse is runnable pseudo job completed isrunnablepseudojobcompleted test test job executed with two run on params testjobexecutedwithtworunonparams scheduler exception schedulerexception job job simple job simplejob string job name jobname test name testname map string serializable job config jobconfig hash map hashmap string serializable adding job receive job detail jobdetail object needed testing quartz scheduler quartzscheduler add job addjob job name jobname job job config jobconfig job detail jobdetail job detail jobdetail scheduler get job detail getjobdetail job key jobkey job key jobkey job name jobname execution context executioncontext get job detail getjobdetail then return thenreturn job detail jobdetail job config executed job detail jobdetail get job data map getjobdatamap quartz scheduler quartzscheduler data map string leader single sling equal values job executed quartz job executor quartzjobexecutor sling single is runnable pseudo job completed isrunnablepseudojobcompleted job executor jobexecutor execute execution context executioncontext assert true asserttrue is runnable pseudo job completed isrunnablepseudojobcompleted test test references testreferences string test name testname test name testname map string serializable test map testmap hash map hashmap string serializable quartz job executor quartzjobexecutor job context impl jobcontextimpl under test undertest quartz job executor quartzjobexecutor job context impl jobcontextimpl test name testname test map testmap assert true asserttrue under test undertest get configuration getconfiguration equals test map testmap assert true asserttrue under test undertest get name getname equals test name testname deactivate scheduler deactivatescheduler quartz scheduler quartzscheduler deactivate context simple job simplejob job execute job context jobcontext context is runnable pseudo job completed isrunnablepseudojobcompleted simple runnable job simplerunnablejob runnable is runnable pseudo job completed isrunnablepseudojobcompleted