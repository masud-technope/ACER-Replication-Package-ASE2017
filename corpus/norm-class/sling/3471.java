licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal helper java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java input stream inputstream java object input stream objectinputstream java object output stream objectoutputstream java object stream class objectstreamclass java serializable java lang reflect array java math big decimal bigdecimal java util array list arraylist java util calendar java util java util list javax jcr node javax jcr property javax jcr property type propertytype javax jcr repository exception repositoryexception javax jcr session javax jcr javax jcr value format exception valueformatexception org apache commons lang array utils arrayutils org apache sling jcr resource jcr property map jcrpropertymap org apache sling jcr resource jcr resource util jcrresourceutil org slf logger org slf logger factory loggerfactory jcr property map cache entry jcrpropertymapcacheentry global logger logger logger logger factory loggerfactory get logger getlogger jcr property map jcrpropertymap jcr property existing values property property array single is array isarray object object property value propertyvalue create cache entry property param prop property repository exception repositoryexception property converted java object jcr property map cache entry jcrpropertymapcacheentry property prop repository exception repositoryexception property prop is array isarray prop is multiple ismultiple property get type gettype property type propertytype binary property value propertyvalue jcr resource util jcrresourceutil to java object tojavaobject prop property value propertyvalue create cache entry param param node node repository exception repositoryexception stored jcr property map cache entry jcrpropertymapcacheentry object node node repository exception repositoryexception property property value propertyvalue is array isarray get class getclass is array isarray check values stored jcr is array isarray object values convert to object array converttoobjectarray values length fail if cannot store failifcannotstore values node fail if cannot store failifcannotstore node fail if cannot store failifcannotstore object node node repository exception repositoryexception input stream inputstream eats contents val create value createvalue node val illegal argument exception illegalargumentexception stored repository create object type supported jcr property type created serializable serialized object stream returned param obj object param node node converted create value createvalue object obj node node repository exception repositoryexception session session node get session getsession jcr resource util jcrresourceutil create value createvalue obj session obj serializable byte array output stream bytearrayoutputstream baos byte array output stream bytearrayoutputstream object output stream objectoutputstream oos object output stream objectoutputstream baos oos write object writeobject obj oos close byte array input stream bytearrayinputstream bais byte array input stream bytearrayinputstream baos to byte array tobytearray session get value factory getvaluefactory create value createvalue session get value factory getvaluefactory create binary createbinary bais io exception ioexception ioe convert object array param array object array object convert to object array converttoobjectarray object object values values array utils arrayutils to object toobject values array utils arrayutils to object toobject values array utils arrayutils to object toobject values array utils arrayutils to object toobject values array utils arrayutils to object toobject values array utils arrayutils to object toobject values array utils arrayutils to object toobject values array utils arrayutils to object toobject values object values array code array is array isarray is array isarray current property current repository exception repositoryexception wrong object get property value getpropertyvalue repository exception repositoryexception property value propertyvalue property value propertyvalue jcr resource util jcrresourceutil to java object tojavaobject property current property current code object get property value or null getpropertyvalueornull get property value getpropertyvalue repository exception repositoryexception convert type param type type param node node param dynamic class loader dynamicclassloader class loader classloader param type converted object suppress warnings suppresswarnings unchecked convert to type converttotype type node node class loader classloader dynamic class loader dynamicclassloader result target is array targetisarray type is array isarray is array isarray object source array sourcearray convert to object array converttoobjectarray get property value getpropertyvalue target is array targetisarray result convert to array converttoarray source array sourcearray type get component type getcomponenttype node dynamic class loader dynamicclassloader source array sourcearray length result convert to type converttotype source array sourcearray type node dynamic class loader dynamicclassloader object source object sourceobject get property value getpropertyvalue target is array targetisarray result convert to array converttoarray object source object sourceobject type get component type getcomponenttype node dynamic class loader dynamicclassloader result convert to type converttotype source object sourceobject type node dynamic class loader dynamicclassloader number format exception numberformatexception vfe logger info conver to type convertotype convert get property value or null getpropertyvalueornull type vfe illegal argument exception illegalargumentexception vfe logger info conver to type convertotype convert get property value or null getpropertyvalueornull type vfe value format exception valueformatexception vfe logger info conver to type convertotype convert get property value or null getpropertyvalueornull type vfe repository exception repositoryexception logger info conver to type convertotype get property value or null getpropertyvalueornull fall result convert to array converttoarray object source array sourcearray type node node class loader classloader dynamic class loader dynamicclassloader repository exception repositoryexception list values array list arraylist source array sourcearray length convert to type converttotype source array sourcearray type node dynamic class loader dynamicclassloader values add suppress warnings suppresswarnings unchecked result array new instance newinstance type values size values to array toarray result suppress warnings suppresswarnings unchecked convert to type converttotype object initial value initialvalue type node node class loader classloader dynamic class loader dynamicclassloader repository exception repositoryexception type is instance isinstance initial value initialvalue initial value initialvalue object initial value initialvalue special input stream input stream inputstream object input stream object input stream objectinputstream is assignable from isassignablefrom type property object input stream propertyobjectinputstream input stream inputstream dynamic class loader dynamicclassloader io exception ioexception ioe number length binary number is assignable from isassignablefrom type value of valueof property get length getlength value of valueof property get len gths getlengths string read binary string type input stream inputstream input stream inputstream byte array output stream bytearrayoutputstream baos byte array output stream bytearrayoutputstream buffer read buffer baos write buffer string baos to byte array tobytearray utf io exception ioexception illegal argument exception illegalargumentexception close io exception ioexception ignore serializable serializable is assignable from isassignablefrom type object input stream objectinputstream ois ois property object input stream propertyobjectinputstream input stream inputstream dynamic class loader dynamicclassloader object obj ois read object readobject type is instance isinstance obj obj obj class not found exception classnotfoundexception cnfe io exception ioexception ioe ois ois close io exception ioexception ignore string type get converter getconverter to string tostring type get converter getconverter to byte tobyte type get converter getconverter to short toshort integer type get converter getconverter to integer tointeger type get converter getconverter to long tolong type get converter getconverter to float tofloat type get converter getconverter to double todouble big decimal bigdecimal type get converter getconverter to big decimal tobigdecimal type get converter getconverter to boolean toboolean type get converter getconverter to date todate calendar type get converter getconverter to calendar tocalendar type create value createvalue node property type property fallback unsupported type create converter object param object convert converter code converter get converter getconverter object number big decimal bigdecimal number converter numberconverter number boolean converter booleanconverter date converter dateconverter calendar calendar converter calendarconverter calendar string based string converter stringconverter extended version object input stream thread context loader property object input stream propertyobjectinputstream object input stream objectinputstream class loader classloader class loader classloader property object input stream propertyobjectinputstream input stream inputstream class loader classloader class loader classloader io exception ioexception class loader classloader class loader classloader java object input stream objectinputstream resolve class resolveclass java object stream class objectstreamclass override resolve class resolveclass object stream class objectstreamclass class desc classdesc io exception ioexception class not found exception classnotfoundexception class loader classloader class loader classloader load class loadclass class desc classdesc get name getname resolve class resolveclass class desc classdesc