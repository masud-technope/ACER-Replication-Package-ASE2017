licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide impl vlt org apache jackrabbit vault util jcr constants jcrconstants jcr content org apache jackrabbit vault util jcr constants jcrconstants jcr data org apache jackrabbit vault util jcr constants jcrconstants jcr lastmodified org apache jackrabbit vault util jcr constants jcrconstants jcr primarytype org apache jackrabbit vault util jcr constants jcrconstants resource org apache sling ide transport repository file java file java file input stream fileinputstream java file not found exception filenotfoundexception java io exception ioexception java math big decimal bigdecimal java util array list arraylist java util arrays java util calendar java util hash map hashmap java util hash set hashset java util list java util map java util java util uuid javax jcr binary javax jcr credentials javax jcr node javax jcr node iterator nodeiterator javax jcr property javax jcr property iterator propertyiterator javax jcr property type propertytype javax jcr repository javax jcr repository exception repositoryexception javax jcr session javax jcr javax jcr value factory valuefactory javax jcr node type nodetype node type nodetype javax jcr node type nodetype property definition propertydefinition org apache jackrabbit vault util jcr constants jcrconstants org apache jackrabbit vault util text org apache sling ide filter filter result filterresult org apache sling ide log logger org apache sling ide transport command context commandcontext org apache sling ide transport file info fileinfo org apache sling ide transport repository command execution flag commandexecutionflag org apache sling ide transport resource proxy resourceproxy org apache sling ide util path util pathutil add or update node command addorupdatenodecommand jcr command jcrcommand resource proxy resourceproxy resource file info fileinfo file info fileinfo command context commandcontext context add or update node command addorupdatenodecommand repository jcr repo jcrrepo credentials credentials command context commandcontext context file info fileinfo file info fileinfo resource proxy resourceproxy resource logger logger command execution flag commandexecutionflag flags jcr repo jcrrepo credentials resource get path getpath logger flags context context file info fileinfo file info fileinfo resource resource override execute session session repository exception repositoryexception io exception ioexception update resource session update resource proxy resourceproxy resource session session repository exception repositoryexception io exception ioexception string path resource get path getpath node exists nodeexists session node exists nodeexists path node node node exists nodeexists node session get node getnode path get logger getlogger trace existing node primary type primarytype path node get primary node type getprimarynodetype get name getname node create node createnode resource session get logger getlogger trace created node primary type primarytype path node get primary node type getprimarynodetype get name getname node exists nodeexists get flags getflags command execution flag commandexecutionflag create missing update node updatenode node resource process deleted nodes processdeletednodes node resource resource proxy resourceproxy child resource get covered children getcoveredchildren update child session process deleted nodes processdeletednodes node node resource proxy resourceproxy resource repository exception repositoryexception todo don support sns places list resource proxy resourceproxy resource children resourcechildren resource get children getchildren resource children resourcechildren size get logger getlogger trace resource children skip ping skipping deleted nodes processing resource get path getpath map string resource proxy resourceproxy resource children paths resourcechildrenpaths hash map hashmap resource children resourcechildren size resource proxy resourceproxy child resource children resourcechildren resource children paths resourcechildrenpaths child get path getpath child node iterator nodeiterator node get nodes getnodes has next hasnext node child next node nextnode resource children paths resourcechildrenpaths contains key containskey child get path getpath don resource covers child get path getpath process deleted nodes processdeletednodes child resource children paths resourcechildrenpaths child get path getpath context filter context filter filter child get path getpath filter result filterresult deny get logger getlogger trace deleting node included filter child get path getpath get logger getlogger trace deleting node longer local check out checkout child get path getpath child remove node create node createnode resource proxy resourceproxy resource session session repository exception repositoryexception file not found exception filenotfoundexception string parent location parentlocation text get relative parent getrelativeparent resource get path getpath parent location parentlocation is empty isempty parent location parentlocation session node exists nodeexists parent location parentlocation repository exception repositoryexception parent parent location parentlocation needed create node resource get path getpath string primary type primarytype string resource get properties getproperties jcr primarytype node parent session get node getnode parent location parentlocation string child name childname path util pathutil get name getname resource get path getpath primary type primarytype parent add node addnode child name childname parent add node addnode child name childname primary type primarytype update node updatenode node node resource proxy resourceproxy resource repository exception repositoryexception io exception ioexception node get path getpath equals get path getpath file info fileinfo update file like node types updatefilelikenodetypes node string properties to remove propertiestoremove hash set hashset property iterator propertyiterator properties node get properties getproperties properties has next hasnext property property properties next property nextproperty property get definition getdefinition is protected isprotected property get definition getdefinition is auto created isautocreated property get definition getdefinition get required type getrequiredtype property type propertytype binary properties to remove propertiestoremove add property get name getname properties to remove propertiestoremove remove all removeall resource get properties getproperties key set keyset session session node get session getsession update mixin types type cont raints contraints enforced session committed object mixin types mixintypes resource get properties getproperties jcr constants jcrconstants jcr mixintypes mixin types mixintypes update mixins updatemixins node mixin types mixintypes supports scenario node type changed per missive permissive string property to remove propertytoremove properties to remove propertiestoremove node get property getproperty property to remove propertytoremove remove get logger getlogger trace removed property node property to remove propertytoremove node get path getpath string primary type primarytype string resource get properties getproperties jcr constants jcrconstants jcr primarytype primary type primarytype node get primary node type getprimarynodetype get name getname equals primary type primarytype node get depth getdepth node set primary type setprimarytype primary type primarytype session save get logger getlogger trace primary type node primary type primarytype node get path getpath todo review comp let eness completeness file vault filevault compatibility map entry string object entry resource get properties getproperties entry set entryset string property name propertyname entry get key getkey object property value propertyvalue entry get value getvalue property property node has property hasproperty property name propertyname property node get property getproperty property name propertyname property property get definition getdefinition is protected isprotected value factory valuefactory value factory valuefactory session get value factory getvaluefactory values property value propertyvalue string value factory valuefactory create value createvalue string property value propertyvalue ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype string property value propertyvalue string values to value array tovaluearray string property value propertyvalue session ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype string property value propertyvalue value factory valuefactory create value createvalue property value propertyvalue ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype property value propertyvalue values to value array tovaluearray property value propertyvalue session ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype property value propertyvalue calendar value factory valuefactory create value createvalue calendar property value propertyvalue ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype property value propertyvalue calendar values to value array tovaluearray calendar property value propertyvalue session ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype property value propertyvalue value factory valuefactory create value createvalue property value propertyvalue ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype property value propertyvalue values to value array tovaluearray property value propertyvalue session ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype property value propertyvalue big decimal bigdecimal value factory valuefactory create value createvalue big decimal bigdecimal property value propertyvalue ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype decimal property value propertyvalue big decimal bigdecimal values to value array tovaluearray big decimal bigdecimal property value propertyvalue session ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype decimal property value propertyvalue value factory valuefactory create value createvalue property value propertyvalue ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype property value propertyvalue values to value array tovaluearray property value propertyvalue session ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype todo distinguish weak strong references property value propertyvalue uuid node reference session get node by identifier getnodebyidentifier uuid property value propertyvalue to string tostring value factory valuefactory create value createvalue reference ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype reference property value propertyvalue uuid values to value array tovaluearray uuid property value propertyvalue session ensure property definition matchers ensurepropertydefinitionmatchers property property type propertytype reference illegal argument exception illegalargumentexception unable handle property value propertyvalue property property name propertyname object arguments property name propertyname property value propertyvalue node get path getpath get logger getlogger trace setting property raw node arguments node set property setproperty property name propertyname get logger getlogger trace property raw node arguments values object arguments property name propertyname values property value propertyvalue node get path getpath get logger getlogger trace setting property values raw node arguments node set property setproperty property name propertyname values get logger getlogger trace property values raw node arguments illegal argument exception illegalargumentexception unable extract array property property name propertyname property value propertyvalue ensure property definition matchers ensurepropertydefinitionmatchers property property expected type expectedtype expected multiplicity expectedmultiplicity repository exception repositoryexception property property definition propertydefinition definition property get definition getdefinition definition get required type getrequiredtype expected type expectedtype definition get required type getrequiredtype property type propertytype undefined get logger getlogger trace removing property type type property get name getname definition get required type getrequiredtype expected type expectedtype property remove definition is multiple ismultiple expected multiplicity expectedmultiplicity get logger getlogger trace removing property multiplicity type property get name getname definition is multiple ismultiple expected multiplicity expectedmultiplicity property remove update mixins updatemixins node node object mixin value mixinvalue repository exception repositoryexception list string new mixins newmixins array list arraylist mixin value mixinvalue string new mixins newmixins add string mixin value mixinvalue new mixins newmixins add all addall arrays as list aslist string mixin value mixinvalue list string old mixins oldmixins array list arraylist node type nodetype mixinnt node get mixin node types getmixinnodetypes old mixins oldmixins add mixinnt get name getname list string mixins to add mixinstoadd array list arraylist new mixins newmixins mixins to add mixinstoadd remove all removeall old mixins oldmixins list string mixins to remove mixinstoremove array list arraylist old mixins oldmixins mixins to remove mixinstoremove remove all removeall new mixins newmixins string mixin to add mixintoadd mixins to add mixinstoadd node add mixin addmixin mixin to add mixintoadd get logger getlogger trace mixin node path mixin to add mixintoadd node get path getpath string mixin to remove mixintoremove mixins to remove mixinstoremove node remove mixin removemixin mixin to remove mixintoremove get logger getlogger trace removed mixin node path mixin to remove mixintoremove node get path getpath update file like node types updatefilelikenodetypes node node repository exception repositoryexception io exception ioexception todo handling file nodes serialization kind serializationkind todo avoid file file file file info fileinfo get location getlocation has file like primary node type hasfilelikeprimarynodetype node node content node contentnode node has node hasnode jcr content content node contentnode node get node getnode jcr content node get property getproperty jcr primarytype get string getstring equals resource content node contentnode node content node contentnode node add node addnode jcr content resource get logger getlogger trace updating property node jcr data content node contentnode get path getpath file input stream fileinputstream input stream inputstream file input stream fileinputstream file binary binary node get session getsession get value factory getvaluefactory create binary createbinary input stream inputstream content node contentnode set property setproperty jcr data binary todo diff erently differently client server clocks differ modified server time content node contentnode set property setproperty jcr lastmodified calendar get instance getinstance has file like primary node type hasfilelikeprimarynodetype node node repository exception repositoryexception has primary node type hasprimarynodetype node file resource has primary node type hasprimarynodetype node node string node type names nodetypenames repository exception repositoryexception string primary node type name primarynodetypename node get primary node type getprimarynodetype get name getname string node type name nodetypename node type names nodetypenames primary node type name primarynodetypename equals node type name nodetypename node type nodetype supertype node get primary node type getprimarynodetype get super types getsupertypes string super type name supertypename supertype get name getname string node type name nodetypename node type names nodetypenames super type name supertypename equals node type name nodetypename to value array tovaluearray string strings session session repository exception repositoryexception values strings length strings length values session get value factory getvaluefactory create value createvalue strings values to value array tovaluearray booleans session session repository exception repositoryexception values booleans length booleans length values session get value factory getvaluefactory create value createvalue booleans values to value array tovaluearray calendar calendars session session repository exception repositoryexception values calendars length calendars length values session get value factory getvaluefactory create value createvalue calendars values to value array tovaluearray doubles session session repository exception repositoryexception values doubles length doubles length values session get value factory getvaluefactory create value createvalue doubles values to value array tovaluearray big decimal bigdecimal big decimals bigdecimals session session repository exception repositoryexception values big decimals bigdecimals length big decimals bigdecimals length values session get value factory getvaluefactory create value createvalue big decimals bigdecimals values to value array tovaluearray longs session session repository exception repositoryexception values longs length longs length values session get value factory getvaluefactory create value createvalue longs values to value array tovaluearray uuid uuids session session repository exception repositoryexception values uuids length uuids length node reference session get node by identifier getnodebyidentifier uuids to string tostring values session get value factory getvaluefactory create value createvalue reference values override kind get kind getkind kind add update