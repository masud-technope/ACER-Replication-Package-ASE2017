licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons osgi java util array list arraylist java util arrays java util collections java util list org osgi framework bundle context bundlecontext org osgi framework service reference servicereference org osgi util tracker service tracker servicetracker implementation providing sorted list services service ranking sorting service tracker sortingservicetracker service tracker servicetracker last count lastcount last ref count lastrefcount list sorted service cache sortedservicecache list service reference servicereference sorted references sortedreferences constructor param context bundle context param clazz sorting service tracker sortingservicetracker bundle context bundlecontext context string clazz context clazz org osgi util tracker service tracker servicetracker removed service removedservice org osgi framework service reference servicereference java lang object override removed service removedservice service reference servicereference reference object service sorted service cache sortedservicecache sorted references sortedreferences context unget service ungetservice reference org osgi util tracker service tracker customizer servicetrackercustomizer modified service modifiedservice org osgi framework service reference servicereference java lang object override modified service modifiedservice service reference servicereference reference object service sorted service cache sortedservicecache sorted references sortedreferences org osgi util tracker service tracker customizer servicetrackercustomizer adding service addingservice org osgi framework service reference servicereference override object adding service addingservice service reference servicereference reference sorted service cache sortedservicecache sorted references sortedreferences context get service getservice reference sorted list services service list list get sorted services getsortedservices list result sorted service cache sortedservicecache result last count lastcount get tracking count gettrackingcount last count lastcount get tracking count gettrackingcount service reference servicereference references get service references getservicereferences references references length result collections empty list emptylist arrays sort references result array list arraylist references length suppress warnings suppresswarnings unchecked service get service getservice references references length service result add service sorted service cache sortedservicecache result result sorted list services references service list list service reference servicereference get sorted service references getsortedservicereferences list service reference servicereference result sorted references sortedreferences result last ref count lastrefcount get tracking count gettrackingcount last ref count lastrefcount get tracking count gettrackingcount service reference servicereference references get service references getservicereferences references references length result collections empty list emptylist arrays sort references result array list arraylist service reference servicereference references length result add references references length sorted references sortedreferences result result