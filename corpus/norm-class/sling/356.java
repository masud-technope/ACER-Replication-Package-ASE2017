licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons thread dump threaddump internal java print stream printstream java print writer printwriter java util linked list linkedlist java util string tokenizer stringtokenizer org apache felix shell command thread dump command threaddumpcommand base thread dumper basethreaddumper command string cmd threads string opt stack string get name getname cmd string get short description getshortdescription dumps jvm threads string get usage getusage cmd opt stack execute string command print stream printstream print stream printstream err cut leading command command starts with startswith cmd command command substring cmd length long listing longlisting linked list linkedlist thread ids threadids linked list linkedlist string tokenizer stringtokenizer tokener string tokenizer stringtokenizer command tokener has more tokens hasmoretokens string token tokener next token nexttoken trim opt stack equals token long listing longlisting thread id threadid parse long parselong token thread ids threadids add thread id threadid number format exception numberformatexception nfe no such thread nosuchthread err token print writer printwriter print writer printwriter thread ids threadids is empty isempty print threads printthreads long listing longlisting thread ids threadids is empty isempty thread id threadid thread ids threadids remove first removefirst print thread printthread thread id threadid long listing longlisting no such thread nosuchthread err thread id threadid flush no such thread nosuchthread print stream printstream err object thread id threadid err println thread thread id threadid err flush