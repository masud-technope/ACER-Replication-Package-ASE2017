licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling models impl org junit org mockito mockito java util collections java util hashtable java util iterator javax inject inject org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource resource org apache sling models annotations model org apache sling models impl injectors request attribute injector requestattributeinjector org junit org junit test org junit runner run with runwith org mockito mock org mockito run ners runners mockito unit runner mockitojunitrunner org osgi framework bundle context bundlecontext org osgi service component component context componentcontext run with runwith mockito unit runner mockitojunitrunner parameterized type from request attribute test parameterizedtypefromrequestattributetest model adapter factory modeladapterfactory factory mock component context componentcontext component ctx componentctx mock bundle context bundlecontext bundle context bundlecontext mock sling http servlet request slinghttpservletrequest request setup component ctx componentctx get bundle context getbundlecontext then return thenreturn bundle context bundlecontext component ctx componentctx get properties getproperties then return thenreturn hashtable string object factory model adapter factory modeladapterfactory factory activate component ctx componentctx request attribute injector requestattributeinjector injector request attribute injector requestattributeinjector factory bind injector bindinjector injector service properties map servicepropertiesmap test test iterator resource collections resource empty set emptyset iterator request get attribute getattribute some resources someresources then return thenreturn test model testmodel model factory get adapter getadapter request test model testmodel assert not null assertnotnull model assert equals assertequals model get some resources getsomeresources model adaptables sling http servlet request slinghttpservletrequest test model testmodel inject iterator resource some resources someresources iterator resource get some resources getsomeresources some resources someresources