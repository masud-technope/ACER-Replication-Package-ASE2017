licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide impl vlt serialization java buffered input stream bufferedinputstream java file java file input stream fileinputstream java io exception ioexception java input stream inputstream java net uri syntax exception urisyntaxexception javax jcr repository javax jcr repository exception repositoryexception javax jcr session javax jcr simple credentials simplecredentials javax xml parsers parser configuration exception parserconfigurationexception javax xml parsers sax parser saxparser javax xml parsers sax parser factory saxparserfactory org apache jackrabbit vault mounter org apache jackrabbit vault api repository address repositoryaddress org apache jackrabbit vault api serialization type serializationtype org apache jackrabbit vault api vault file vaultfile org apache jackrabbit vault api vault file system vaultfilesystem org apache jackrabbit vault impl xml analyzer xmlanalyzer org apache jackrabbit vault util constants org apache jackrabbit vault util platform name format platformnameformat org apache jackrabbit vault util repository provider repositoryprovider org apache jackrabbit vault util text org apache sling ide impl vlt vault fs locator vaultfslocator org apache sling ide serialization serialization data builder serializationdatabuilder org apache sling ide serialization serialization exception serializationexception org apache sling ide serialization serialization kind serializationkind org apache sling ide serialization serialization manager serializationmanager org apache sling ide transport resource proxy resourceproxy org xml sax input source inputsource org xml sax sax exception saxexception vlt serialization manager vltserializationmanager serialization manager serializationmanager string extension xml xml vlt serialization data builder vltserializationdatabuilder builder main string args repository exception repositoryexception uri syntax exception urisyntaxexception io exception ioexception repository address repositoryaddress address repository address repositoryaddress http localhost server root repository repo repository provider repositoryprovider get repository getrepository address session session repo login simple credentials simplecredentials admin admin to char array tochararray vault file system vaultfilesystem mounter mount address session string attempts string rep policy string attempt attempts vault file vaultfile vault file vaultfile get file getfile attempt system println attempt vault file vaultfile string attempt attempts attempt platform name format platformnameformat get platform path getplatformpath attempt extension xml vault file vaultfile vault file vaultfile get file getfile attempt system println attempt vault file vaultfile override destroy override is serialization file isserializationfile string file path filepath file file file file path filepath string file name filename file get name getname file name filename equals constants dot content xml file name filename ends with endswith extension xml input stream inputstream buffered input stream bufferedinputstream file input stream fileinputstream file serialization type serializationtype ser type sertype xml analyzer xmlanalyzer analyze input source inputsource ser type sertype serialization type serializationtype xml doc view docview io exception ioexception runtime exception runtimeexception override string get base resource path getbaseresourcepath string serialization file path serializationfilepath file file file serialization file path serializationfilepath string file name filename file get name getname file name filename equals constants dot content xml file get parent getparent file name filename ends with endswith extension xml file get absolute path getabsolutepath todo generate file exists get path without xml extension getpathwithoutxmlextension file input stream inputstream buffered input stream bufferedinputstream file input stream fileinputstream file serialization type serializationtype ser type sertype xml analyzer xmlanalyzer analyze input source inputsource ser type sertype serialization type serializationtype xml doc view docview get path without xml extension getpathwithoutxmlextension file file get absolute path getabsolutepath io exception ioexception runtime exception runtimeexception string get path without xml extension getpathwithoutxmlextension file file file get absolute path getabsolutepath substring file get absolute path getabsolutepath length extension xml length override string get serialization file path getserializationfilepath string base file path basefilepath serialization kind serializationkind serialization kind serializationkind serialization kind serializationkind folder metadata partial base file path basefilepath file separator char separatorchar constants dot content xml metadata full base file path basefilepath file base file path basefilepath dir file separator char separatorchar constants dot content xml illegal argument exception illegalargumentexception unsupported serialization kind serialization kind serializationkind override string get repository path getrepositorypath string os path ospath string repository path repositorypath string text get name getname os path ospath equals constants dot content xml todo bit ris ky risky clean legitimate directories dir string parent path parentpath text get relative parent getrelativeparent os path ospath parent path parentpath parent path parentpath ends with endswith dir parent path parentpath parent path parentpath substring parent path parentpath length dir length repository path repositorypath platform name format platformnameformat get repository path getrepositorypath parent path parentpath todo assume full coverage aggregate os path ospath ends with endswith extension xml repository path repositorypath platform name format platformnameformat get repository path getrepositorypath os path ospath substring os path ospath length extension xml length repository path repositorypath platform name format platformnameformat get repository path getrepositorypath os path ospath replace dir todo extract path utils pathutils repository path repositorypath length repository path repositorypath char at charat repository path repositorypath repository path repositorypath repository path repositorypath length repository path repositorypath repository path repositorypath override string get os path getospath string repository path repositorypath platform name format platformnameformat get platform path getplatformpath repository path repositorypath bind vault fs locator bindvaultfslocator vault fs locator vaultfslocator fs locator fslocator get builder getbuilder set locator setlocator fs locator fslocator unbind vault fs locator unbindvaultfslocator vault fs locator vaultfslocator fs locator fslocator get builder getbuilder set locator setlocator vlt serialization data builder vltserializationdatabuilder get builder getbuilder builder builder vlt serialization data builder vltserializationdatabuilder builder override serialization data builder serializationdatabuilder new builder newbuilder org apache sling ide transport repository repository file content sync root contentsyncroot serialization exception serializationexception vlt serialization data builder vltserializationdatabuilder get builder getbuilder init repository content sync root contentsyncroot override resource proxy resourceproxy read serialization data readserializationdata string file path filepath input stream inputstream source io exception ioexception source string repository path repositorypath get repository path getrepositorypath file path filepath sax parser factory saxparserfactory factory sax parser factory saxparserfactory new instance newinstance factory set name space aware setnamespaceaware factory set feature setfeature http xml org sax features namespace prefixes sax parser saxparser parser factory newsaxparser content xml handler contentxmlhandler handler content xml handler contentxmlhandler repository path repositorypath parser parse source handler handler get root getroot sax exception saxexception parser configuration exception parserconfigurationexception io exception ioexception