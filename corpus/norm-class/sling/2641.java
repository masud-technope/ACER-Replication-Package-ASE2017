licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide impl resource serialization org custom monkey custommonkey xml unit xmlunit xml assert xmlassert assertxmlequal org hamcrest core matchers corematchers org hamcrest core matchers corematchers null value nullvalue org junit assert that assertthat java byte array input stream bytearrayinputstream java file java io exception ioexception java input stream inputstream java util hash map hashmap java util map org apache sling ide serialization serialization data serializationdata org apache sling ide serialization serialization exception serializationexception org apache sling ide serialization serialization kind serializationkind org apache sling ide transport resource proxy resourceproxy org custom monkey custommonkey xml unit xmlunit xml unit xmlunit org junit org junit before class beforeclass org junit test org xml sax input source inputsource org xml sax sax exception saxexception simple xml serialization manager test simplexmlserializationmanagertest simple xml serialization manager simplexmlserializationmanager before class beforeclass configure xml unit configurexmlunit xml unit xmlunit set ignore whitespace setignorewhitespace prepare simple xml serialization manager simplexmlserializationmanager test empty serialized data emptyserializeddata serialization exception serializationexception sax exception saxexception serialization data serializationdata serialization data serializationdata new builder newbuilder build serialization data buildserializationdata new resource with properties newresourcewithproperties hash map hashmap string object assert that assertthat serialization data serializationdata null value nullvalue resource proxy resourceproxy new resource with properties newresourcewithproperties map string object properties resource proxy resourceproxy resource resource proxy resourceproxy map entry string object entry properties entry set entryset resource add property addproperty entry get key getkey entry get value getvalue resource test null serialized data nullserializeddata serialization exception serializationexception sax exception saxexception serialization data serializationdata serialization data serializationdata new builder newbuilder build serialization data buildserializationdata assert that assertthat serialization data serializationdata null value nullvalue test string serialized data stringserializeddata serialization exception serializationexception sax exception saxexception io exception ioexception map string object data hash map hashmap data jcr created by createdby admin data jcr last modified by lastmodifiedby author serialization data serializationdata serialization data serializationdata new builder newbuilder build serialization data buildserializationdata new resource with properties newresourcewithproperties data string method name methodname string serialized data stringserializeddata assert xml output is equal to assertxmloutputisequalto serialization data serializationdata get contents getcontents method name methodname assert xml output is equal to assertxmloutputisequalto serialization data serializationdata string method name methodname sax exception saxexception serialization exception serializationexception io exception ioexception input stream inputstream doc read serialization data file readserializationdatafile method name methodname assertxmlequal input source inputsource doc input source inputsource byte array input stream bytearrayinputstream serialization data serializationdata input stream inputstream read serialization data file readserializationdatafile string method name methodname string get class getclass get simple name getsimplename method name methodname xml input stream inputstream doc get class getclass get resource as stream getresourceasstream doc runtime exception runtimeexception test file method name methodname doc test serialized data is escaped serializeddataisescaped serialization exception serializationexception sax exception saxexception io exception ioexception map string object data hash map hashmap data jcr description active serialization data serializationdata serialization data serializationdata new builder newbuilder build serialization data buildserializationdata new resource with properties newresourcewithproperties data string method name methodname serialized data is escaped serializeddataisescaped assert xml output is equal to assertxmloutputisequalto serialization data serializationdata get contents getcontents method name methodname test read serialized data readserializeddata io exception ioexception sax exception saxexception map string object serialization data serializationdata read serialization data readserializationdata read serialization data file readserializationdatafile string serialized data stringserializeddata get properties getproperties map string object expected hash map hashmap expected jcr created by createdby admin expected jcr last modified by lastmodifiedby author assert that assertthat serialization data serializationdata expected test serialization file matches serializationfilematches assert that assertthat is serialization file isserializationfile content xml test serialization file does not match serializationfiledoesnotmatch assert that assertthat is serialization file isserializationfile content json test serialization file location serializationfilelocation string serialization file path serializationfilepath get serialization file path getserializationfilepath jcr root serialization kind serializationkind folder assert that assertthat serialization file path serializationfilepath jcr root file separator char separatorchar content xml test base resource path baseresourcepath string base path basepath get base resource path getbaseresourcepath jcr root file separator char separatorchar content xml assert that assertthat base path basepath jcr root test base resource path is empty baseresourcepathisempty string base path basepath get base resource path getbaseresourcepath content xml assert that assertthat base path basepath