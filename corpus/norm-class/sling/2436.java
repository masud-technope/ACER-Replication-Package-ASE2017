licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling models impl org junit org mockito mockito java lang reflect annotated element annotatedelement java util hashtable javax inject inject org apache sling api sling http servlet request slinghttpservletrequest org apache sling api scripting sling bindings slingbindings org apache sling models annotations model org apache sling models annotations source org apache sling models impl injectors bindings injector bindingsinjector org apache sling models impl injectors request attribute injector requestattributeinjector org apache sling models spi disposal callback registry disposalcallbackregistry org junit org junit test org junit runner run with runwith org mockito mock org mockito spy org mockito run ners runners mockito unit runner mockitojunitrunner org osgi framework bundle context bundlecontext org osgi service component component context componentcontext run with runwith mockito unit runner mockitojunitrunner multiple injector test multipleinjectortest spy bindings injector bindingsinjector bindings injector bindingsinjector spy request attribute injector requestattributeinjector attributes injector attributesinjector mock sling http servlet request slinghttpservletrequest request mock component context componentcontext component ctx componentctx mock bundle context bundlecontext bundle context bundlecontext model adapter factory modeladapterfactory factory sling bindings slingbindings bindings setup component ctx componentctx get bundle context getbundlecontext then return thenreturn bundle context bundlecontext component ctx componentctx get properties getproperties then return thenreturn hashtable string object bindings sling bindings slingbindings factory model adapter factory modeladapterfactory factory activate component ctx componentctx factory bind injector bindinjector bindings injector bindingsinjector service properties map servicepropertiesmap factory bind injector bindinjector attributes injector attributesinjector service properties map servicepropertiesmap factory bind static inject annotation processor factory bindstaticinjectannotationprocessorfactory bindings injector bindingsinjector service properties map servicepropertiesmap request get attribute getattribute sling bindings slingbindings get name getname then return thenreturn bindings test test injector order testinjectororder string bindings value bindingsvalue bindings bindings first attribute firstattribute bindings value bindingsvalue string attribute value attributevalue attribute request get attribute getattribute first attribute firstattribute then return thenreturn attribute value attributevalue for two inject ors fortwoinjectors obj factory get adapter getadapter request for two inject ors fortwoinjectors assert not null assertnotnull obj assert equals assertequals obj first attribute firstattribute bindings value bindingsvalue verify bindings injector bindingsinjector create annotation processor createannotationprocessor annotated element annotatedelement verify bindings injector bindingsinjector get value getvalue request first attribute firstattribute string annotated element annotatedelement disposal callback registry disposalcallbackregistry test test injector order with source testinjectororderwithsource string bindings value bindingsvalue bindings bindings first attribute firstattribute bindings value bindingsvalue string attribute value attributevalue attribute request get attribute getattribute first attribute firstattribute then return thenreturn attribute value attributevalue for two inject ors with source fortwoinjectorswithsource obj factory get adapter getadapter request for two inject ors with source fortwoinjectorswithsource assert not null assertnotnull obj assert equals assertequals obj first attribute firstattribute attribute value attributevalue verify bindings injector bindingsinjector get name getname verify bindings injector bindingsinjector create annotation processor createannotationprocessor annotated element annotatedelement verify no more int eractions verifynomoreinteractions bindings injector bindingsinjector model adaptables sling http servlet request slinghttpservletrequest for two inject ors fortwoinjectors inject string first attribute firstattribute model adaptables sling http servlet request slinghttpservletrequest for two inject ors with source fortwoinjectorswithsource inject source request attributes string first attribute firstattribute