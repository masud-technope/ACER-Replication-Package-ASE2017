licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer provider file impl java file java file input stream fileinputstream java i o exception ioexception java input stream inputstream java util array list arraylist java util dictionary java util hashtable java util list java util org apache sling installer api installable resource installableresource org apache sling installer api osgi installer osgiinstaller org apache sling settings sling settings service slingsettingsservice org slf logger org slf logger factory loggerfactory code installer code service calling osg i osgi installer installer file changes listener filechangeslistener logger logger logger logger factory loggerfactory get logger getlogger get class getclass osg i osgi installer service osgi installer osgiinstaller installer settings service string active run modes activerunmodes scheme string scheme prefix string prefix installer osgi installer osgiinstaller installer sling settings service slingsettingsservice settings string root string scheme file installer fileinstaller scheme prefix installer installer active run modes activerunmodes settings get run modes getrunmodes prefix file root get absolute path getabsolutepath file separator org apache sling installer provider file impl file changes listener filechangeslistener get scheme getscheme string get scheme getscheme scheme org apache sling installer provider file impl file changes listener filechangeslistener initial set initialset java util list initial set initialset list file files logger debug initial scheme list installable resource installableresource resources array list arraylist installable resource installableresource file files logger debug initial file installable resource installableresource resource create resource createresource resource resources add resource installer register resources registerresources scheme resources to array toarray installable resource installableresource resources size org apache sling installer provider file impl file changes listener filechangeslistener updated java util list java util list java util list updated list file list file changed list file removed list installable resource installableresource updated size changed changed size updated array list arraylist installable resource installableresource file logger debug file installable resource installableresource resource create resource createresource resource updated add resource changed file changed logger debug changed file installable resource installableresource resource create resource createresource resource updated add resource updated string removed urls removedurls removed removed size removed urls removedurls string removed size file removed removed urls removedurls get absolute path getabsolutepath logger debug removed file removed urls removedurls removed urls removedurls updated removed urls removedurls installer update resources updateresources scheme updated updated to array toarray installable resource installableresource updated size removed urls removedurls installable resource installableresource create resource createresource file file check modes string file get absolute path getabsolutepath substring prefix length replace file separator char separatorchar is active isactive integer prio pos index of indexof pos starts with startswith install string run modes runmodes substring pos active modes activemodes is active isactive run modes runmodes active modes activemodes prio installable resource installableresource priority active modes activemodes is active isactive is active isactive input stream inputstream file input stream fileinputstream file string digest string value of valueof file last modified lastmodified bundle check start level directory dictionary string object dict hashtable string object file get name getname ends with endswith jar file get name getname ends with endswith war string parent name parentname file get parent file getparentfile get name getname start level startlevel integer value of valueof parent name parentname start level startlevel dict installable resource installableresource bundle start level start level startlevel number format exception numberformatexception nfe dict installable resource installableresource resource uri hint file touri to string tostring installable resource installableresource file get absolute path getabsolutepath dict digest prio logger info ignoring inactive resource file i o exception ioexception logger error unable read file file is active isactive string run modes string runmodesstring string run modes runmodes run modes string runmodesstring split active string mode run modes runmodes active run modes activerunmodes mode active active run modes runmodes length