licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting xproc xpl impl java lang reflect field java util hash map hashmap java util linked list linkedlist java util map java util map entry java util regex matcher java util regex pattern javax xml namespace q name qname org apache sling api scripting sling script helper slingscripthelper org apache sling scripting xproc xpl api xpl element xplelement org slf logger org slf logger factory loggerfactory abstract xpl element impl abstractxplelementimpl xpl element xplelement logger log logger factory loggerfactory get logger getlogger get class getclass sling script helper slingscripthelper sling map string string attributes hash map hashmap string string xpl element xplelement parent linked list linkedlist xpl element xplelement children linked list linkedlist xpl element xplelement depth linked list linkedlist xpl element xplelement get children getchildren children add child addchild xpl element xplelement child child string msg element get class getclass get name getname received child log error msg illegal argument exception illegalargumentexception msg field child field childfield get child field getchildfield child child field childfield child field childfield set accessible setaccessible child field childfield child illegal argument exception illegalargumentexception log error failed child field child child get class getclass get name getname illegal access exception illegalaccessexception log error failed child field child child get class getclass get name getname child set depth setdepth get depth getdepth children add child child set parent setparent set attributes setattributes map string string attributes attributes attributes is empty isempty check special attribute fields map string field attribute fields attributefields get attribute fields getattributefields entry string string entry attributes entry set entryset string key entry get key getkey string entry get value getvalue field attribute field attributefield attribute fields attributefields key attribute field attributefield attribute field attributefield set accessible setaccessible attribute field attributefield illegal argument exception illegalargumentexception string message failed attribute field key log error message runtime exception runtimeexception message illegal access exception illegalaccessexception string message failed attribute field key log error message runtime exception runtimeexception message attribute processing process attribute processattribute key sling script helper slingscripthelper get sling getsling sling q name qname getqname xpl element xplelement get parent getparent parent set parent setparent xpl element xplelement parent parent parent get depth getdepth depth set depth setdepth depth depth depth override string to string tostring string buffer stringbuffer sb xpl element sbxplelement string buffer stringbuffer add tabs addtabs sb xpl element sbxplelement get depth getdepth sb xpl element sbxplelement append sb xpl element sbxplelement append getqname get local part getlocalpart get depth getdepth sb xpl element sbxplelement append xml ns xmlns http org xproc string attribute attributes key set keyset sb xpl element sbxplelement append sb xpl element sbxplelement append attribute attributes attribute get children getchildren size sb xpl element sbxplelement append sb xpl element sbxplelement to string tostring sb xpl element sbxplelement append xpl element xplelement child get children getchildren sb xpl element sbxplelement append sb xpl element sbxplelement append child to string tostring sb xpl element sbxplelement append add tabs addtabs sb xpl element sbxplelement get depth getdepth sb xpl element sbxplelement append sb xpl element sbxplelement append getqname get local part getlocalpart sb xpl element sbxplelement append sb xpl element sbxplelement to string tostring add tabs addtabs string buffer stringbuffer num num append process attribute processattribute string key string attributes key field get child field getchildfield xpl element xplelement child current class currentclass get class getclass field declared fields declaredfields current class currentclass get declared fields getdeclaredfields field declared field declaredfield declared fields declaredfields declared field declaredfield get type gettype is assignable from isassignablefrom child get class getclass declared field declaredfield map string field get attribute fields getattributefields map string field attribute fields attributefields hash map hashmap string field current class currentclass get class getclass current class currentclass field declared fields declaredfields current class currentclass get declared fields getdeclaredfields field declared field declaredfield declared fields declaredfields string field name fieldname convert camel case convertcamelcase declared field declaredfield get name getname attribute fields attributefields field name fieldname declared field declaredfield current class currentclass current class currentclass get superclass getsuperclass attribute fields attributefields string convert camel case convertcamelcase string pattern camel case pattern camelcasepattern pattern compile matcher matcher camel case pattern camelcasepattern matcher last match lastmatch string builder stringbuilder result string builder stringbuilder matcher find result append substring last match lastmatch matcher start result append matcher group result append result append matcher group to lower case tolowercase last match lastmatch matcher result append substring last match lastmatch length result to string tostring