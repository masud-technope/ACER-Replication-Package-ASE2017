licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr content loader contentloader org junit assert false assertfalse org junit assert not null assertnotnull java file java file output stream fileoutputstream java io exception ioexception java input stream inputstream java util array list arraylist java util list java util uuid javax inject inject javax jcr session org apache commons io utils ioutils org apache sling commons testing junit retry rule retryrule org apache sling jcr api sling repository slingrepository org apache sling launchpad api startup handler startuphandler org apache sling launchpad api startup mode startupmode org junit after class afterclass org junit org junit before class beforeclass org junit rule org junit runner run with runwith org ops pax exam option org ops pax exam junit pax exam paxexam org ops pax tinybundles core tiny bundle tinybundle org ops pax tinybundles core tiny bundles tinybundles org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework bundle exception bundleexception org osgi framework constants org slf logger org slf logger factory loggerfactory base testing bundles provide initial content run with runwith pax exam paxexam content bundle test base contentbundletestbase logger log logger factory loggerfactory get logger getlogger get class getclass rule retry rule retryrule retry retry rule retryrule retry timeout retry interval inject bundle context bundlecontext bundle context bundlecontext inject sling repository slingrepository repository session session string bundle symbolic name bundlesymbolicname string content root path contentrootpath list bundle bundles to remove bundlestoremove array list arraylist bundle retry timeout retry interval string sling initial content header sling initial content string path bundle test initial content org ops pax exam configuration option config pax exam utilities paxexamutilities pax config paxconfig before class beforeclass setup class setupclass bundle symbolic name bundlesymbolicname test uuid randomuuid content root path contentrootpath test content bundle symbolic name bundlesymbolicname setup exception register startup handler registerstartuphandler session repository login administrative loginadministrative install test bundle bundles to remove bundlestoremove is empty isempty assert false assertfalse expecting content test session item exists itemexists content root path contentrootpath create install start bundle initial content input stream inputstream get test bundle stream gettestbundlestream bundle bundle context bundlecontext install bundle installbundle bundle symbolic name bundlesymbolicname bundles to remove bundlestoremove add start close may be dump test bundle maybedumptestbundle option ally optionally dump test bundle troubleshooting may be dump test bundle maybedumptestbundle exception do dump dodump value of valueof system get property getproperty dump test bundles do dump dodump file target file create temp file createtempfile bundle symbolic name bundlesymbolicname jar file output stream fileoutputstream fos file output stream fileoutputstream target io utils ioutils copy get test bundle stream gettestbundlestream fos log info dumped test bundle troubleshooting target get absolute path getabsolutepath io utils ioutils close quietly closequietly fos input stream inputstream get test bundle stream gettestbundlestream exception setup test bundle setuptestbundle tiny bundles tinybundles bundle constants bundle symbolicname bundle symbolic name bundlesymbolicname build tiny bundles tinybundles with bnd withbnd tiny bundle tinybundle setup test bundle setuptestbundle tiny bundle tinybundle exception add content test bundle add content addcontent tiny bundle tinybundle string path in bundle pathinbundle string resource path resourcepath io exception ioexception path in bundle pathinbundle resource path resourcepath resource path resourcepath initial content resource path resourcepath input stream inputstream get class getclass get resource as stream getresourceasstream resource path resourcepath assert not null assertnotnull expecting resource resource path resourcepath log info adding resource bundle path resource path in bundle pathinbundle resource path resourcepath add path in bundle pathinbundle close after class afterclass cleanup class cleanupclass bundle exception bundleexception bundle bundles to remove bundlestoremove uninstall bundles to remove bundlestoremove clear session log out logout session register startup handler registerstartuphandler sling org apache sling pax exam paxexam util sling setup test slingsetuptest sling launchpad sling settings slingsettings service requires startup handler startuphandler launchpad bootstrap code sup ply supply starts properly todo utility bootstrap bundle startup handler startuphandler startup handler startuphandler wait with startup waitwithstartup is finished isfinished startup mode startupmode get mode getmode startup mode startupmode install bundle context bundlecontext register service registerservice startup handler startuphandler get name getname