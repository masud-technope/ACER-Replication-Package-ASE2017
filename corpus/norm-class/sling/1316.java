licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery oak cluster java util collections java util comparator java util hash map hashmap java util iterator java util linked list linkedlist java util list java util map org apache felix scr annotations component org apache felix scr annotations reference org apache felix scr annotations service org apache sling api resource login exception loginexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling api resource value map valuemap org apache sling discovery instance description instancedescription org apache sling discovery base commons cluster view service clusterviewservice org apache sling discovery base commons undefined cluster view exception undefinedclusterviewexception org apache sling discovery base commons undefined cluster view exception undefinedclusterviewexception reason org apache sling discovery commons providers default instance description defaultinstancedescription org apache sling discovery commons providers spi local cluster view localclusterview org apache sling discovery commons providers spi base discovery lite descriptor discoverylitedescriptor org apache sling discovery commons providers spi base id map service idmapservice org apache sling discovery oak config org apache sling settings sling settings service slingsettingsservice org slf logger org slf logger factory loggerfactory oak based implementation cluster view service clusterviewservice component service cluster view service clusterviewservice oak cluster view service oakclusterviewservice cluster view service clusterviewservice logger logger logger factory loggerfactory get logger getlogger get class getclass reference sling settings service slingsettingsservice settings service settingsservice reference resource resolver factory resourceresolverfactory resource resolver factory resourceresolverfactory reference config config reference id map service idmapservice id map service idmapservice sequence number read oak discovery lite descriptor last seq num lastseqnum oak cluster view service oakclusterviewservice test constructor testconstructor sling settings service slingsettingsservice settings service settingsservice resource resolver factory resourceresolverfactory resource resolver factory resourceresolverfactory id map service idmapservice id map service idmapservice config config oak cluster view service oakclusterviewservice service oak cluster view service oakclusterviewservice service settings service settingsservice settings service settingsservice service resource resolver factory resourceresolverfactory resource resolver factory resourceresolverfactory service config config service id map service idmapservice id map service idmapservice service string get sling id getslingid settings service settingsservice settings service settingsservice get sling id getslingid resource resolver resourceresolver get resource resolver getresourceresolver login exception loginexception resource resolver factory resourceresolverfactory get administrative resource resolver getadministrativeresourceresolver local cluster view localclusterview get local cluster view getlocalclusterview undefined cluster view exception undefinedclusterviewexception logger trace get local cluster view getlocalclusterview start resource resolver resourceresolver resource resolver resourceresolver resource resolver resourceresolver get resource resolver getresourceresolver discovery lite descriptor discoverylitedescriptor descriptor discovery lite descriptor discoverylitedescriptor get descriptor from getdescriptorfrom resource resolver resourceresolver last seq num lastseqnum descriptor get seq num getseqnum logger info get local cluster view getlocalclusterview sequence number change detected clearing idmap cache id map service idmapservice clear cache clearcache last seq num lastseqnum descriptor get seq num getseqnum as cluster view asclusterview descriptor resource resolver resourceresolver undefined cluster view exception undefinedclusterviewexception logger info get local cluster view getlocalclusterview undefined cluster view clusterview get reason getreason get message getmessage exception logger error get local cluster view getlocalclusterview repository exception undefined cluster view exception undefinedclusterviewexception reason repository exception exception processing descriptor logger trace get local cluster view getlocalclusterview resource resolver resourceresolver resource resolver resourceresolver close local cluster view localclusterview as cluster view asclusterview discovery lite descriptor discoverylitedescriptor descriptor resource resolver resourceresolver resource resolver resourceresolver exception descriptor illegal argument exception illegalargumentexception descriptor resource resolver resourceresolver illegal argument exception illegalargumentexception resource resolver resourceresolver logger trace as cluster view asclusterview start string cluster view id clusterviewid descriptor get view id getviewid string local cluster sync token id localclustersynctokenid descriptor get view id getviewid string value of valueof descriptor get seq num getseqnum descriptor is final isfinal undefined cluster view exception undefinedclusterviewexception reason established view descriptor descriptor local cluster view localclusterview cluster local cluster view localclusterview cluster view id clusterviewid local cluster sync token id localclustersynctokenid descriptor get my id getmyid active ids activeids descriptor get active ids getactiveids active ids activeids active ids activeids length undefined cluster view exception undefinedclusterviewexception reason established view descriptor contained active ids descriptor get descriptor str getdescriptorstr convert list integer todo guava ints list integer active ids list activeidslist linked list linkedlist integer integer int eger integer active ids activeids active ids list activeidslist add int eger integer step sort active ids activeids leader election id leaderelectionid serves purposes pos leader properly sorted cluster map integer string leader election ids leaderelectionids hash map hashmap integer string integer active ids list activeidslist string sling id slingid id map service idmapservice to sling id toslingid resource resolver resourceresolver sling id slingid id map service idmapservice clear cache clearcache undefined cluster view exception undefinedclusterviewexception reason established view sling id slingid mapped cluster node id clusternodeid string leader election id leaderelectionid get leader election id getleaderelectionid resource resolver resourceresolver sling id slingid leader election ids leaderelectionids leader election id leaderelectionid collections sort active ids list activeidslist comparator integer override compare integer arg integer arg leader election ids leaderelectionids arg compare to compareto leader election ids leaderelectionids arg active ids list activeidslist size active ids list activeidslist thx sorting leader is leader isleader is own isown string sling id slingid id map service idmapservice to sling id toslingid resource resolver resourceresolver sling id slingid id map service idmapservice clear cache clearcache logger info as cluster view asclusterview resolve oak cluster node id clusternodeid sling id slingid exception resolve oak cluster node id clusternodeid sling id slingid map string string properties read properties readproperties sling id slingid resource resolver resourceresolver create instance adds cluster constructor default instance description defaultinstancedescription cluster is leader isleader is own isown sling id slingid properties logger trace as cluster view asclusterview returning cluster instance description instancedescription local cluster get local instance getlocalinstance local cluster logger info get cluster view getclusterview local instance get sling id getslingid included existing established view normal startup times pseudo net work network partitioning indicator repository net work network delays clocks sync sling inc reasing increasing heartbeat timeout heartbeattimeout work around workaround local instance stay topology changing pre init mode vote successful undefined cluster view exception undefinedclusterviewexception reason isolated topology established view include local instance isolated string get leader election id getleaderelectionid resource resolver resourceresolver resource resolver resourceresolver string sling id slingid sling id slingid illegal state exception illegalstateexception sling id slingid string my cluster node path myclusternodepath config get cluster instances path getclusterinstancespath sling id slingid value map valuemap resource map resourcemap resource resolver resourceresolver get resource getresource my cluster node path myclusternodepath adapt to adaptto value map valuemap string result resource map resourcemap leader election id leaderelectionid string result map string string read properties readproperties string sling id slingid resource resolver resourceresolver resource resolver resourceresolver resource res resource resolver resourceresolver get resource getresource config get cluster instances path getclusterinstancespath sling id slingid map string string props hash map hashmap string string res resource properties child propertieschild res get child getchild properties properties child propertieschild value map valuemap properties properties child propertieschild adapt to adaptto value map valuemap properties iterator string properties key set keyset iterator has next hasnext string key key equals jcr primary type primarytype props key properties key string props