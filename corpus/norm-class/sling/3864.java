licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer core impl tasks org apache sling installer api installable resource installableresource org apache sling installer api resource change listener resourcechangelistener org apache sling installer api tasks change state task changestatetask org apache sling installer api tasks install task installtask org apache sling installer api tasks install task factory installtaskfactory org apache sling installer api tasks resource state resourcestate org apache sling installer api tasks retry handler retryhandler org apache sling installer api tasks task resource taskresource org apache sling installer api tasks task resource group taskresourcegroup org apache sling installer core impl internal service internalservice org apache sling installer core impl persistent resource list persistentresourcelist org apache sling installer core impl util org osgi framework bundle context bundlecontext org osgi framework bundle event bundleevent org osgi framework bundle listener bundlelistener org osgi framework constants org osgi framework framework event frameworkevent org osgi framework framework listener frameworklistener org osgi framework version org slf logger org slf logger factory loggerfactory task creator bundles bundle task creator bundletaskcreator internal service internalservice install task factory installtaskfactory framework listener frameworklistener bundle listener bundlelistener property bundle installed installed version version property string force install version force install version logger logger logger logger factory loggerfactory get logger getlogger get class getclass support service tasks task support tasksupport task support tasksupport bundle context bundle context bundlecontext bundle context bundlecontext retry handler retry handler retryhandler retry handler retryhandler org apache sling installer core impl internal service internalservice init org osgi framework bundle context bundlecontext org apache sling installer api resource change listener resourcechangelistener retry handler retryhandler init bundle context bundlecontext resource change listener resourcechangelistener listener retry handler retryhandler retry handler retryhandler bundle context bundlecontext retry handler retryhandler retry handler retryhandler bundle context bundlecontext add bundle listener addbundlelistener bundle context bundlecontext add framework listener addframeworklistener task support tasksupport task support tasksupport org apache sling installer core impl internal service internalservice deactivate deactivate bundle context bundlecontext bundle context bundlecontext remove bundle listener removebundlelistener bundle context bundlecontext remove framework listener removeframeworklistener task support tasksupport task support tasksupport deactivate task support tasksupport org osgi framework framework listener frameworklistener framework event frameworkevent org osgi framework framework event frameworkevent framework event frameworkevent framework event frameworkevent event event get type gettype framework event frameworkevent packages ref res hed refreshed logger debug received framework event frameworkevent triggering retry installer event retry handler retryhandler schedule retry scheduleretry org osgi framework bundle listener bundlelistener bundle changed bundlechanged org osgi framework bundle event bundleevent bundle changed bundlechanged bundle event bundleevent event event get type gettype bundle event bundleevent installed bundle event bundleevent resolved bundle event bundleevent started bundle event bundleevent updated logger debug received bundle event bundleevent triggering retry installer event retry handler retryhandler schedule retry scheduleretry org apache sling installer core impl internal service internalservice get description getdescription string get description getdescription apache sling bundle install task factory create bundle task install update remove org apache sling installer api tasks install task factory installtaskfactory create task createtask org apache sling installer api tasks task resource group taskresourcegroup install task installtask create task createtask task resource group taskresourcegroup resource list resourcelist quick check resource type task resource taskresource to activate toactivate resource list resourcelist get active resource getactiveresource to activate toactivate get type gettype equals persistent resource list persistentresourcelist restart active bundles type restart active bundles task restartactivebundlestask resource list resourcelist task support tasksupport to activate toactivate get type gettype equals installable resource installableresource type bundle check symbolic version attributes to activate toactivate get attribute getattribute constants bundle symbolicname util bundle headers bundleheaders headers util read bundle headers readbundleheaders to activate toactivate logger headers logger info resource type bundle bundle manifest entries missing to activate toactivate change state task changestatetask resource list resourcelist resource state resourcestate to activate toactivate set attribute setattribute constants bundle symbolicname headers symbolic name symbolicname to activate toactivate set attribute setattribute constants bundle version headers version headers activation policy activationpolicy to activate toactivate set attribute setattribute constants bundle activationpolicy headers activation policy activationpolicy string symbolic name symbolicname string to activate toactivate get attribute getattribute constants bundle symbolicname is installer core bundle isinstallercorebundle bundle context bundlecontext get bundle getbundle get symbolic name getsymbolicname equals symbolic name symbolicname uninstall install task installtask result to activate toactivate get state getstate resource state resourcestate uninstall find info exact version bundle info bundleinfo info get bundle info getbundleinfo symbolic name symbolicname string to activate toactivate get attribute getattribute constants bundle version remove bundle installed info uninstall check install older version update uninstall install task resource taskresource resource list resourcelist get next active resource getnextactiveresource get state getstate resource state resourcestate get state getstate resource state resourcestate installed get state getstate resource state resourcestate install set attribute setattribute force install version info version to string tostring bundle util bundleutil clear bundle start clearbundlestart logger debug detected down grade downgrade bundle symbolic name symbolicname result change state task changestatetask resource list resourcelist resource state resourcestate uninstalled prevent uninstalling installer is installer core bundle isinstallercorebundle logger debug prevent completely uninstalling installer bundle symbolic name symbolicname result change state task changestatetask resource list resourcelist resource state resourcestate uninstalled result bundle remove task bundleremovetask resource list resourcelist task support tasksupport logger debug bundle installed remove symbolic name symbolicname to activate toactivate get attribute getattribute constants bundle version result change state task changestatetask resource list resourcelist resource state resourcestate uninstalled install check installer system update integer async task counter asynctaskcounter integer to activate toactivate get attribute getattribute install task installtask async attr async task counter asynctaskcounter is installer core bundle isinstallercorebundle result installer bundle update task installerbundleupdatetask resource list resourcelist task support tasksupport system bundle result change state task changestatetask resource list resourcelist resource state resourcestate installed string install task installtask async attr install update bundle highest version bundle info bundleinfo info get bundle info getbundleinfo symbolic name symbolicname check start bundle installed previous info bundle installed install result bundle install task bundleinstalltask resource list resourcelist task support tasksupport bundle util bundleutil is bundle start isbundlestart to activate toactivate result bundle start task bundlestarttask resource list resourcelist info task support tasksupport do update doupdate version new version newversion version string to activate toactivate get attribute getattribute constants bundle version compare info version compare to compareto new version newversion compare installed version update do update doupdate compare string force version forceversion string to activate toactivate get attribute getattribute force install version force version forceversion info version compare to compareto version force version forceversion do update doupdate logger debug bundle info symbolic name symbolicname new version newversion installed bundle higher version installed compare bundle info bundleinfo is snapshot issnapshot new version newversion installed version snapshot do update doupdate do update doupdate logger debug scheduling update to activate toactivate check system bundle constants system bundle symbolicname equals symbolic name symbolicname result system bundle update task systembundleupdatetask resource list resourcelist task support tasksupport check installer update is installer core bundle isinstallercorebundle result installer bundle update task installerbundleupdatetask resource list resourcelist task support tasksupport result bundle update task bundleupdatetask resource list resourcelist task support tasksupport compare is installer core bundle isinstallercorebundle constants system bundle symbolicname equals symbolic name symbolicname installer core bundle system bundle updated result change state task changestatetask resource list resourcelist resource state resourcestate installed logger debug install version installed to activate toactivate new version newversion result change state task changestatetask resource list resourcelist resource state resourcestate to activate toactivate set attribute setattribute force install version result bundle info bundleinfo get bundle info getbundleinfo string symbolic name symbolicname string version bundle info bundleinfo get bundle info getbundleinfo bundle context bundlecontext symbolic name symbolicname version