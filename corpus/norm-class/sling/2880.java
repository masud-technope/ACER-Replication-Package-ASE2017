licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons osgi org junit assert equals assertequals org junit assert same assertsame org mockito mockito mock org mockito mockito verify java util map org apache sling commons osgi ranked services rankedservices change listener changelistener org junit test org osgi framework constants google common collect immutable map immutablemap google common collect iterators ranked services test rankedservicestest string service service map string object service props immutable map immutablemap string object builder constants service ranking constants service build string service service map string object service props immutable map immutablemap string object builder constants service ranking constants service build string service service map string object service props immutable map immutablemap string object builder constants service ranking constants service build test test sorted services testsortedservices ranked services rankedservices comparable under test undertest ranked services rankedservices comparable assert equals assertequals under test undertest size under test undertest bind service service props assert equals assertequals under test undertest size comparable services iterators to array toarray under test undertest iterator comparable assert same assertsame service services under test undertest bind service service props under test undertest bind service service props assert equals assertequals under test undertest size services iterators to array toarray under test undertest iterator comparable assert same assertsame service services assert same assertsame service services assert same assertsame service services under test undertest unbind service service props assert equals assertequals under test undertest size services iterators to array toarray under test undertest iterator comparable assert same assertsame service services assert same assertsame service services test test change listener testchangelistener change listener changelistener change listener changelistener mock change listener changelistener ranked services rankedservices comparable under test undertest ranked services rankedservices comparable change listener changelistener under test undertest bind service service props verify change listener changelistener changed