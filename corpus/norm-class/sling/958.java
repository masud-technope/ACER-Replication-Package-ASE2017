licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide impl vlt transport org easymock easy mock easymock create mock createmock org hamcrest matchers equal to equalto org hamcrest matchers has size hassize org hamcrest matchers org junit assert that assertthat java util list javax jcr credentials javax jcr repository org apache sling ide impl vlt add or update node command addorupdatenodecommand org apache sling ide impl vlt delete node command deletenodecommand org apache sling ide impl vlt get node content command getnodecontentcommand org apache sling ide impl vlt reorder child nodes command reorderchildnodescommand org apache sling ide transport command org apache sling ide transport resource proxy resourceproxy org apache sling ide transport impl default batcher defaultbatcher org hamcrest matchers org junit org junit test stub commands default batcher test defaultbatchertest repository mock repo mockrepo credentials credentials default batcher defaultbatcher batcher prepare mock repo mockrepo create mock createmock repository credentials create mock createmock credentials batcher default batcher defaultbatcher test more comp rehensive deletes are compacted morecomprehensivedeletesarecompacted test more comp rehensive deletes are compacted testmorecomprehensivedeletesarecompacted content content content test more comp rehensive deletes are compacted morecomprehensivedeletesarecompacted reverse order reverseorder test more comp rehensive deletes are compacted testmorecomprehensivedeletesarecompacted content content content test more comp rehensive deletes are compacted testmorecomprehensivedeletesarecompacted string expected string first path firstpath string other paths otherpaths batcher add delete node command deletenodecommand mock repo mockrepo credentials first path firstpath string other path otherpath other paths otherpaths batcher add delete node command deletenodecommand mock repo mockrepo credentials other path otherpath list command batched batcher assert that assertthat batched has size hassize command command batched assert that assertthat command delete node command deletenodecommand assert that assertthat command get path getpath equal to equalto expected test unrelated deletes are not compacted unrelateddeletesarenotcompacted assert commands are not compacted assertcommandsarenotcompacted delete node command deletenodecommand mock repo mockrepo credentials content branch delete node command deletenodecommand mock repo mockrepo credentials content assert commands are not compacted assertcommandsarenotcompacted command command batcher add batcher add list command batched batcher assert that assertthat batched has size hassize assert that assertthat batched matchers command same instance sameinstance assert that assertthat batched matchers command same instance sameinstance test data is cleared between calls dataisclearedbetweencalls batcher add delete node command deletenodecommand mock repo mockrepo credentials content branch batcher assert that assertthat batcher has size hassize test identical add or updates are compacted identicaladdorupdatesarecompacted add or update node command addorupdatenodecommand add or update node command addorupdatenodecommand mock repo mockrepo credentials resource proxy resourceproxy content add or update node command addorupdatenodecommand add or update node command addorupdatenodecommand mock repo mockrepo credentials resource proxy resourceproxy content batcher add batcher add list command batched batcher assert that assertthat batched has size hassize command command batched assert that assertthat command add or update node command addorupdatenodecommand assert that assertthat command get path getpath equal to equalto content test unrelated add or updates are not compacted unrelatedaddorupdatesarenotcompacted assert commands are not compacted assertcommandsarenotcompacted add or update node command addorupdatenodecommand mock repo mockrepo credentials resource proxy resourceproxy content add or update node command addorupdatenodecommand mock repo mockrepo credentials resource proxy resourceproxy content test ident icals reorder ings are compacted identicalsreorderingsarecompacted reorder child nodes command reorderchildnodescommand reorder child nodes command reorderchildnodescommand mock repo mockrepo credentials resource proxy resourceproxy content reorder child nodes command reorderchildnodescommand reorder child nodes command reorderchildnodescommand mock repo mockrepo credentials resource proxy resourceproxy content batcher add batcher add list command batched batcher assert that assertthat batched has size hassize command command batched assert that assertthat command reorder child nodes command reorderchildnodescommand assert that assertthat command get path getpath equal to equalto content test unrelated reorder ings are not compacted unrelatedreorderingsarenotcompacted assert commands are not compacted assertcommandsarenotcompacted reorder child nodes command reorderchildnodescommand mock repo mockrepo credentials resource proxy resourceproxy content reorder child nodes command reorderchildnodescommand mock repo mockrepo credentials resource proxy resourceproxy content test unhandled command is returned as is unhandledcommandisreturnedasis assert commands are not compacted assertcommandsarenotcompacted get node content command getnodecontentcommand mock repo mockrepo credentials content get node content command getnodecontentcommand mock repo mockrepo credentials content