licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer core impl util java util collection java util list org apache sling installer api tasks installation context installationcontext org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework framework event frameworkevent org osgi framework framework listener frameworklistener org osgi framework wiring framework wiring frameworkwiring org slf logger org slf logger factory loggerfactory implementation bundle ref res her refresher based framework wiring wa bundle ref res her wabundlerefresher bundle ref res her bundlerefresher framework listener frameworklistener framework wiring frameworkwiring framework wiring frameworkwiring logger logger logger factory loggerfactory get logger getlogger get class getclass max time allowed refresh packages max ref resh refresh packages wait seconds counter refresh events refresh event count refresheventcount lock object syncing object lock object bundle context bundlecontext bundle context bundlecontext wa bundle ref res her wabundlerefresher framework wiring frameworkwiring wiring bundle context bundlecontext bundle context bundlecontext framework wiring frameworkwiring wiring bundle context bundlecontext bundle context bundlecontext org apache sling installer core impl util bundle ref res her bundlerefresher refresh bundles refreshbundles org apache sling installer api tasks installation context installationcontext java util list refresh bundles refreshbundles installation context installationcontext ctx list bundle bundles wait bundles bundles size bundles ctx log full ref res hing refreshing ctx log ref res hing refreshing bundles bundles size bundles wait framework wiring frameworkwiring refresh bundles refreshbundles bundles bundles refresh event count refresheventcount framework wiring frameworkwiring refresh bundles refreshbundles bundles bundles system current time millis currenttimemillis max ref resh refresh packages wait seconds lock wait time waittime system current time millis currenttimemillis refresh event count refresheventcount wait time waittime ctx log waiting seconds bundles refresh max ref resh refresh packages wait seconds lock wait wait time waittime interrupted exception interruptedexception ignore system current time millis currenttimemillis refresh event count refresheventcount logger warn framework event frameworkevent packages ref reshed refreshed event received seconds refresh aborting wait max ref resh refresh packages wait seconds refresh event count refresheventcount refresh event count refresheventcount bundles ctx log full refresh ctx log ref res hing refreshing bundles bundles size org apache sling installer core impl util bundle ref res her bundlerefresher is installer bundle affected isinstallerbundleaffected java util list is installer bundle affected isinstallerbundleaffected list bundle bundles installer id installerid bundle context bundlecontext get bundle getbundle get bundle id getbundleid collection bundle dependency closure dependencyclosure framework wiring frameworkwiring get dependency closure getdependencyclosure bundles bundle dependency closure dependencyclosure get bundle id getbundleid installer id installerid org osgi framework framework listener frameworklistener framework event frameworkevent org osgi framework framework event frameworkevent framework event frameworkevent framework event frameworkevent event event get type gettype framework event frameworkevent packages ref reshed refreshed logger debug framework event frameworkevent packages ref reshed refreshed lock refresh event count refresheventcount lock notify