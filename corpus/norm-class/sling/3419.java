licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting sightly impl js api jsapi java io exception ioexception java input stream inputstream java input stream reader inputstreamreader java util collections java util dictionary java util hash map hashmap java util map javax script bindings javax script script engine scriptengine javax script script engine manager scriptenginemanager javax script simple bindings simplebindings javax servlet http http servlet request httpservletrequest org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations reference org apache felix scr annotations service org apache sling api resource login exception loginexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling api scripting sling bindings slingbindings org apache sling commons osgi properties util propertiesutil org apache sling scripting sightly sightly exception sightlyexception org apache sling scripting sightly impl js environment jsenvironment org apache sling scripting sightly impl variables org apache sling scripting sightly impl async async container asynccontainer org apache sling scripting sightly impl async async extractor asyncextractor org apache sling scripting sightly impl async timing bindings values provider timingbindingsvaluesprovider org apache sling scripting sightly impl async timing function timingfunction org apache sling scripting sightly impl cjs common js module commonjsmodule org apache sling scripting sightly impl rhino hybrid object hybridobject org apache sling scripting sightly impl rhino js value adapter jsvalueadapter org mozilla java script javascript context org mozilla java script javascript function org mozilla java script javascript script org mozilla java script javascript scriptable org mozilla java script javascript scriptable object scriptableobject org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory code sightly namespace usage sightly amp scripts called sightly component metatype label apache sling scripting sightly java script javascript bindings provider description apache sling scripting sightly java script javascript bindings provider loads api bindings map service sly bindings values provider slybindingsvaluesprovider properties property sly bindings values provider slybindingsvaluesprovider scr prop binding implementations sightly sly bindings values provider slybindingsvaluesprovider sling path unbounded property unbounded propertyunbounded array label script factories description script factories load bindings map entries form namespace path repository suppress warnings suppresswarnings unused sly bindings values provider slybindingsvaluesprovider string scr prop binding implementations org apache sling scripting sightly bindings string sling path libs sling sightly internal sly string path libs sling sightly party string req sly bindings values provider slybindingsvaluesprovider get canonical name getcanonicalname logger logger logger factory loggerfactory get logger getlogger sly bindings values provider slybindingsvaluesprovider reference script engine manager scriptenginemanager script engine manager scriptenginemanager reference resource resolver factory resourceresolverfactory rrf async extractor asyncextractor async extractor asyncextractor async extractor asyncextractor js value adapter jsvalueadapter js value adapter jsvalueadapter js value adapter jsvalueadapter async extractor asyncextractor map string string script paths scriptpaths hash map hashmap string string map string function factories hash map hashmap string function script q script qscript scriptable object scriptableobject q scope qscope createqscope init ialise initialise bindings bindings needs init needsinit init bindings process bindings processbindings bindings bindings needs init needsinit sightly exception sightlyexception attempted call process bindings processbindings calling init ialise initialise context context context context enter object q instance qinstance obtainqinstance context bindings q instance qinstance map entry string function entry factories entry set entryset add binding addbinding context entry get value getvalue bindings entry get key getkey q instance qinstance context context exit map string string get script paths getscriptpaths collections unmodifiable map unmodifiablemap script paths scriptpaths activate activate component context componentcontext component context componentcontext dictionary properties component context componentcontext get properties getproperties string factories properties util propertiesutil to string array tostringarray properties scr prop binding implementations string sling path script paths scriptpaths hash map hashmap string string factories length string factories string parts split parts length script paths scriptpaths parts parts deactivate deactivate component context componentcontext component context componentcontext script paths scriptpaths script paths scriptpaths clear factories factories clear add binding addbinding context context function factory bindings bindings string global name globalname object q instance qinstance factory object result factory call context factory factory object bindings q instance qinstance hybrid object hybridobject global hybrid object hybridobject scriptable result js value adapter jsvalueadapter bindings global name globalname global needs init needsinit factories factories is empty isempty q script qscript init bindings bindings needs init needsinit ensure factories loaded ensurefactoriesloaded bindings ensure factories loaded ensurefactoriesloaded bindings bindings js environment jsenvironment js environment jsenvironment script engine scriptengine script engine scriptengine obtain engine obtainengine script engine scriptengine js environment jsenvironment js environment jsenvironment script engine scriptengine js environment jsenvironment initialize factories hash map hashmap string function script paths scriptpaths size map entry string string entry script paths scriptpaths entry set entryset factories entry get key getkey load factory loadfactory js environment jsenvironment entry get value getvalue bindings q script qscript loadqscript js environment jsenvironment js environment jsenvironment cleanup function load factory loadfactory js environment jsenvironment js environment jsenvironment string path bindings bindings resource resolver resourceresolver resolver resolver rrf get administrative resource resolver getadministrativeresourceresolver resource resource resolver get resource getresource path resource sightly exception sightlyexception sly namespace loader find script path async container asynccontainer container js environment jsenvironment run resource runresource resource create bindings createbindings bindings simple bindings simplebindings object obj container get result getresult obj function sightly exception sightlyexception script path expected function function obj login exception loginexception logger error evaluate script path resolver resolver close bindings create bindings createbindings bindings global bindings bindings simple bindings simplebindings bindings put all putall global timing bindings values provider timingbindingsvaluesprovider instance add bindings addbindings bindings bindings script engine scriptengine obtain engine obtainengine script engine manager scriptenginemanager get engine by name getenginebyname java script javascript object obtainqinstance context context bindings bindings q script qscript http servlet request httpservletrequest request http servlet request httpservletrequest bindings sling bindings slingbindings request object q instance qinstance request q instance qinstance request get attribute getattribute req q instance qinstance q instance qinstance createqinstance context q script qscript request request set attribute setattribute req q instance qinstance q instance qinstance scriptable object scriptableobject createqscope context context context enter scriptable object scriptableobject scope context init standard objects initstandardobjects scriptable object scriptableobject put property putproperty scope variables timing function timingfunction instance scriptable object scriptableobject put property putproperty scope variables timeout timing function timingfunction instance scope context exit object createqinstance context context script q script qscript common js module commonjsmodule module common js module commonjsmodule scriptable temp scope tempscope context new object newobject q scope qscope scriptable object scriptableobject put property putproperty temp scope tempscope variables module module scriptable object scriptableobject put property putproperty temp scope tempscope variables exports module get exports getexports q script qscript exec context temp scope tempscope module get exports getexports script loadqscript resource resolver resourceresolver resource resolver resourceresolver context context context enter context init standard objects initstandardobjects context set optimization level setoptimizationlevel input stream inputstream reader resource resolver resourceresolver rrf get administrative resource resolver getadministrativeresourceresolver resource resource resource resolver resourceresolver get resource getresource path resource logger warn load library path path reader resource adapt to adaptto input stream inputstream reader logger warn read content library context compile reader compilereader input stream reader inputstreamreader reader path exception print stack trace printstacktrace context exit reader reader close io exception ioexception logger error error closing reader resource resolver resourceresolver resource resolver resourceresolver close