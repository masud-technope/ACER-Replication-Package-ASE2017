licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest org apache commons http client httpclient http exception httpexception org apache commons http client httpclient methods get method getmethod org apache sling commons testing int egration integration http test base httptestbase java file java file writer filewriter java io exception ioexception test uploading files sling post servlet sling upload file test uploadfiletest http test base httptestbase string upload content file upload file test uploadfiletest java http apache org licenses license tests lorem ipsum dolor sit amet cons ectetuer consectetuer adipiscing elit fusce semper ipsum lorem hac habitasse platea dict umst dictumst d one c donec dict um dictum tincidunt purus aenean quis nunc aliquam rhoncus proin sed ris us risus maecenas porta arcu nisi pellentesque quis sapien quis lectus vehicula aliquet cras ornare elit eget massa cum sociis nat oque natoque penatibus magnis dis part urient parturient montes nascetur rid icu lus ridiculus mus sed just o justo integer port titor porttitor qua m quam aliquam aliquet nulla int erdum interdum arcu vitae nibh morbi dapibus odio sem integer dict um dictum praesent vel eros nec ipsum venenatis malesuada vestibulum rutrum ligula nisl ligula vehicula dignissim accumsan quis faucibus sed sapien quisque purus tell us tellus euismod auctor quis rutrum augue test distinct resource testdistinctresource io exception ioexception string folder path folderpath upload file test uploadfiletest system current time millis currenttimemillis string url http base url folder path folderpath create node string url of new node urlofnewnode url of new node urlofnewnode test client testclient create node createnode url io exception ioexception ioe fail create node createnode failed ioe upload local file file local file localfile get test file gettestfile test client testclient upload to file node uploadtofilenode url of new node urlofnewnode local file localfile file check url created file string url of file node urloffilenode url of new node urlofnewnode file get method getmethod get method getmethod url of file node urloffilenode status http client httpclient execute method executemethod assert equals assertequals url of file node urloffilenode accessible create node createnode status check data resources handled compare data local file length data get response body getresponsebody assert equals assertequals size file local file localfile length data length string data get response body as string getresponsebodyasstring assert true asserttrue checking content data http apache org licenses license download structure string json get content getcontent url of file node urloffilenode json content type json check strings assert true asserttrue checking primary type json jcr primary type primarytype resource assert true asserttrue checking mime type json jcr mime type mimetype text plain test distinct resource with type testdistinctresourcewithtype io exception ioexception string folder path folderpath upload file test uploadfiletest system current time millis currenttimemillis string url http base url folder path folderpath create node string url of new node urlofnewnode url of new node urlofnewnode test client testclient create node createnode url io exception ioexception ioe fail create node createnode failed ioe upload local file file local file localfile get test file gettestfile test client testclient upload to file node uploadtofilenode url of new node urlofnewnode local file localfile file unstructured check url created file string url of file node urloffilenode url of new node urlofnewnode file get method getmethod get method getmethod url of file node urloffilenode status http client httpclient execute method executemethod assert equals assertequals url of file node urloffilenode accessible create node createnode status check data resources handled compare data local file length data get response body getresponsebody assert equals assertequals size file local file localfile length data length string data get response body as string getresponsebodyasstring assert true asserttrue checking content data http apache org licenses license download structure string json get content getcontent url of file node urloffilenode json content type json check strings assert true asserttrue checking primary type json jcr primary type primarytype unstructured assert true asserttrue checking mime type json jcr mime type mimetype text plain test distinct file testdistinctfile io exception ioexception string folder path folderpath upload file test uploadfiletest system current time millis currenttimemillis test client testclient mkdirs webdav base url folder path folderpath string url http base url folder path folderpath upload local file file local file localfile get test file gettestfile test client testclient upload to file node uploadtofilenode url local file localfile file check url created file string url of file node urloffilenode url file todo work file resource type handler get method getmethod get method getmethod url of file node urloffilenode status http client httpclient execute method executemethod assert equals assertequals url of file node urloffilenode accessible create node createnode status compare data local file length data get response body getresponsebody assert equals assertequals size file local file localfile length data length string webdav url webdavurl webdav base url folder path folderpath file get method getmethod get method getmethod webdav url webdavurl status http client httpclient execute method executemethod assert equals assertequals url of file node urloffilenode accessible create node createnode status compare data local file length data get response body getresponsebody assert equals assertequals size file local file localfile length data length download structure string json get content getcontent url of file node urloffilenode json content type json check strings assert true asserttrue checking primary type json jcr primary type primarytype file test multi file upload testmultifileupload io exception ioexception string folder path folderpath upload file test uploadfiletest system current time millis currenttimemillis string url http base url folder path folderpath create node string url of new node urlofnewnode url of new node urlofnewnode test client testclient create node createnode url io exception ioexception ioe fail create node createnode failed ioe upload local file file temp file tempfile get test file gettestfile file local files localfiles file temp file tempfile temp file tempfile temp file tempfile string field names fieldnames string file txt file txt test client testclient upload to file nodes uploadtofilenodes url of new node urlofnewnode local files localfiles field names fieldnames check url created file string url of file node urloffilenode url of new node urlofnewnode file txt check uploaded file state checkuploadedfilestate url of file node urloffilenode check url created file string url of file node urloffilenode url of new node urlofnewnode file txt check uploaded file state checkuploadedfilestate url of file node urloffilenode check url created file string url of file node urloffilenode url of new node urlofnewnode file upload txt check uploaded file state checkuploadedfilestate url of file node urloffilenode check uploaded file state checkuploadedfilestate string url of file node urloffilenode io exception ioexception http exception httpexception get method getmethod get method getmethod url of file node urloffilenode status http client httpclient execute method executemethod assert equals assertequals url of file node urloffilenode accessible create node createnode status check data resources handled compare data local file length data get response body getresponsebody assert equals assertequals size file local file localfile length data length string data get response body as string getresponsebodyasstring assert true asserttrue checking content data http apache org licenses license download structure string json get content getcontent url of file node urloffilenode json content type json check strings assert true asserttrue checking primary type json jcr primary type primarytype file string content json get content getcontent url of file node urloffilenode jcr content json content type json check strings assert true asserttrue checking primary type content json jcr primary type primarytype resource assert true asserttrue checking mime type content json jcr mime type mimetype text plain io exception ioexception file get test file gettestfile io exception ioexception file temp file tempfile file target file upload txt temp file tempfile exists temp file tempfile length file writer filewriter file writer filewriter temp file tempfile resource sure fire surefire fun class load ers classloaders write upload content close temp file tempfile