licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer core impl java buffered input stream bufferedinputstream java file java file input stream fileinputstream java io exception ioexception java input stream inputstream java serializable java net uri java net uri syntax exception urisyntaxexception java util dictionary java util enumeration java util hash map hashmap java util map org apache sling installer api installable resource installableresource org apache sling installer api tasks resource state resourcestate org apache sling installer api tasks task resource taskresource org apache sling installer api tasks transformation result transformationresult org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework version implementation registered resource registered resource impl registeredresourceimpl task resource taskresource serializable comparable registered resource impl registeredresourceimpl serial version control serialization serialversionuid serialization version version resource url string url installer scheme string url scheme urlscheme digest resource string digest entity string entity dictionary configurations dictionary string object dictionary additional attributes map string object attributes hash map hashmap string object string data uri datauri file data file datafile priority string resource type resourcetype current resource resource state resourcestate resource state resourcestate install temporary attributes map string object temporary attributes temporaryattributes cleaned up cleanedup status change last change lastchange serialize object write version serialize entry resources list param object output stream io exception ioexception write object writeobject java object output stream objectoutputstream io exception ioexception write int writeint version write object writeobject url write object writeobject url scheme urlscheme write object writeobject digest write object writeobject entity write object writeobject dictionary write object writeobject attributes write object writeobject data file datafile write object writeobject resource type resourcetype write int writeint priority write object writeobject to string tostring write long writelong last change lastchange write object writeobject data uri datauri deserialize object read version deserialize entry resources list read object readobject java object input stream objectinputstream io exception ioexception class not found exception classnotfoundexception version read int readint version version version class not found exception classnotfoundexception get class getclass get name getname util set field setfield url read object readobject util set field setfield url scheme urlscheme read object readobject util set field setfield digest read object readobject util set field setfield entity read object readobject util set field setfield dictionary read object readobject util set field setfield attributes read object readobject util set field setfield data file datafile read object readobject util set field setfield resource type resourcetype read object readobject util set field setfield priority read int readint resource state resourcestate value of valueof string read object readobject version last change lastchange read long readlong last change lastchange version data uri datauri string read object readobject installable resource installableresource type config equals resource type resourcetype dictionary update digest calculated older versions string updated digest updateddigest file data store filedatastore compute digest computedigest dictionary updated digest updateddigest equals digest digest updated digest updateddigest update file location data file datafile data file datafile file data store filedatastore shared get data file getdatafile data file datafile get name getname create registered resource registered resource impl registeredresourceimpl create internal resource internalresource input io exception ioexception scheme pos schemepos input geturl index of indexof registered resource impl registeredresourceimpl input get id getid input get resource uri getresourceuri input get private copy of file getprivatecopyoffile input get private copy of dictionary getprivatecopyofdictionary input get type gettype input get digest getdigest input get priority getpriority input geturl substring scheme pos schemepos create registered resource registeredresource data data object filled link create bundle context bundlecontext installable resource installableresource string don validate values exception digest registered resource impl registeredresourceimpl string string resource uri resourceuri file file dictionary string object dict string type string digest priority string scheme url scheme data uri datauri resource uri resourceuri data file datafile file dictionary dict resource type resourcetype type digest digest priority priority url scheme urlscheme scheme override string to string tostring string builder stringbuilder string builder stringbuilder get entity id getentityid append registered resource registeredresource append task resource taskresource append url append geturl get entity id getentityid append entity append get entity id getentityid append append attributes size append attributes map entry string object entry attributes entry set entryset append append entry get key getkey append append entry get value getvalue append append digest append get digest getdigest append to string tostring has data file hasdatafile data file datafile remove data file remove data file removedatafile data file datafile data file datafile exists data file datafile delete data uri datauri clean data files cleanup cleaned up cleanedup cleaned up cleanedup remove data file removedatafile file data store filedatastore shared remove from digest cache removefromdigestcache url digest org apache sling installer api tasks registered resource registeredresource geturl string geturl url org apache sling installer api tasks registered resource registeredresource get input stream getinputstream input stream inputstream get input stream getinputstream io exception ioexception data uri datauri uri uri uri data uri datauri uri tourl open stream openstream uri syntax exception urisyntaxexception io exception ioexception io exception ioexception init cause initcause data file datafile data file datafile exists buffered input stream bufferedinputstream file input stream fileinputstream data file datafile org apache sling installer api tasks registered resource registeredresource get dictionary getdictionary dictionary string object get dictionary getdictionary dictionary org apache sling installer api tasks registered resource registeredresource get digest getdigest string get digest getdigest digest org apache sling installer api tasks registered resource registeredresource get type gettype string get type gettype resource type resourcetype org apache sling installer api tasks registered resource registeredresource get entity id getentityid string get entity id getentityid entity org apache sling installer api tasks task resource taskresource get attribute getattribute java lang string object get attribute getattribute string key attributes key org apache sling installer api tasks task resource taskresource set attribute setattribute java lang string java lang object set attribute setattribute string key object attributes remove key attributes key org apache sling installer api tasks registered resource registeredresource get scheme getscheme string get scheme getscheme url scheme urlscheme org apache sling installer api tasks registered resource registeredresource get priority getpriority get priority getpriority priority org apache sling installer api tasks task resource taskresource get state getstate resource state resourcestate get state getstate resource set state setstate resource state resourcestate last change lastchange system current time millis currenttimemillis change happen change unknown get last change getlastchange last change lastchange java lang object equals java lang object override equals object obj obj obj registered resource impl registeredresourceimpl entity geturl equals registered resource impl registeredresourceimpl obj geturl compare to compareto registered resource impl registeredresourceimpl obj java lang object hash code hashcode override hash code hashcode geturl hash code hashcode java lang comparable compare to compareto java lang object compare to compareto registered resource impl registeredresourceimpl compare compare resources point entity url is same resource issameresource registered resource impl registeredresourceimpl registered resource impl registeredresourceimpl check artifacts version version get version getversion version get version getversion compare version equals is snapshot issnapshot to string tostring snapshot is snapshot issnapshot compare digest get digest getdigest equals get digest getdigest compare resources compare entity entity resource type entity identifier installed resource symbolic bundle pid configuration compare task resource taskresource task resource taskresource result check entity string a id aid get entity id getentityid string b id bid get entity id getentityid a id aid b id bid result a id aid compare to compareto b id bid has version hasversion result compare versions is snapshot issnapshot order version version get version getversion version get version getversion has version hasversion is snapshot issnapshot to string tostring snapshot higher version priority invert comparison result compare to compareto priority higher values result result integer value of valueof get priority getpriority compare to compareto get priority getpriority result is snapshot issnapshot higher digest priority invert comparison result get digest getdigest compare to compareto get digest getdigest result get state getstate get state getstate get state getstate resource state resourcestate installed get state getstate resource state resourcestate installed get state getstate resource state resourcestate install get state getstate resource state resourcestate install result url digest result geturl compare to compareto geturl result has version hasversion higher digest priority invert comparison result get digest getdigest compare to compareto get digest getdigest result org apache sling installer api tasks task resource taskresource get temporary attribute gettemporaryattribute java lang string object get temporary attribute gettemporaryattribute string key temporary attributes temporaryattributes temporary attributes temporaryattributes key org apache sling installer api tasks task resource taskresource set temporary attribute settemporaryattribute java lang string java lang object set temporary attribute settemporaryattribute string key object temporary attributes temporaryattributes temporary attributes temporaryattributes hash map hashmap string object temporary attributes temporaryattributes remove key temporary attributes temporaryattributes key update resource result input stream resource type updated param transformation result update transformation result transformationresult io exception ioexception input stream inputstream get input stream getinputstream get resource type getresourcetype resource type resourcetype get resource type getresourcetype get id getid entity resource type resourcetype get id getid installable resource installableresource type file equals get type gettype installable resource installableresource type properties equals get type gettype string last id part lastidpart geturl slash pos slashpos last id part lastidpart last index of lastindexof slash pos slashpos last id part lastidpart last id part lastidpart substring slash pos slashpos entity resource type resourcetype last id part lastidpart file new data file newdatafile file data store filedatastore shared create new data file createnewdatafile get type gettype remove data file removedatafile data file datafile new data file newdatafile close io exception ioexception ignore get attributes getattributes attributes put all putall get attributes getattributes get version getversion attributes constants bundle version get version getversion to string tostring update resource uri update internal resource internalresource rsrc rsrc get resource uri getresourceuri file data store filedatastore shared remove from digest cache removefromdigestcache url digest remove data file removedatafile data uri datauri rsrc get resource uri getresourceuri dictionary dictionary installable resource installableresource resource uri hint rsrc get resource uri getresourceuri rsrc get private copy of file getprivatecopyoffile update data file datafile data file datafile get name getname equals rsrc get private copy of file getprivatecopyoffile get name getname update dictionary dictionary remove installable resource installableresource resource uri hint data file datafile remove data file removedatafile data file datafile rsrc get private copy of file getprivatecopyoffile file data store filedatastore shared update digest cache updatedigestcache url digest create resource updated task resource taskresource clone transformation result transformationresult transformation result transformationresult io exception ioexception scheme pos schemepos url index of indexof registered resource impl registeredresourceimpl registered resource impl registeredresourceimpl url substring scheme pos schemepos data uri datauri data file datafile dictionary resource type resourcetype digest priority url scheme urlscheme attributes put all putall attributes update transformation result transformationresult update file file dictionary string object dict string digest priority string url remove data file removedatafile file data file datafile file dictionary is empty isempty dictionary remove dictionary next element nextelement enumeration string dict has more elements hasmoreelements string key next element nextelement dictionary key dict key digest digest priority priority url url pos url index of indexof url scheme urlscheme url substring pos org apache sling installer api tasks task resource taskresource get version getversion version get version getversion string v info vinfo string get attribute getattribute constants bundle version v info vinfo version v info vinfo