licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jackrabbit user manager usermanager impl post java util dictionary java util list java util map javax jcr repository exception repositoryexception javax jcr session javax servlet servlet org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations service org apache jackrabbit api security user authorizable org apache jackrabbit api security user group org apache jackrabbit api security user user org apache jackrabbit api security user user manager usermanager org apache sling api sling http servlet request slinghttpservletrequest org apache sling commons osgi osgi util osgiutil org apache sling jackrabbit user manager usermanager create user createuser org apache sling jackrabbit user manager usermanager impl resource authorizable resource provider authorizableresourceprovider org apache sling jcr api sling repository slingrepository org apache sling jcr base util access control util accesscontrolutil org apache sling servlets post abstract post response abstractpostresponse org apache sling servlets post modification org apache sling servlets post modification type modificationtype org apache sling servlets post sling post constants slingpostconstants org apache sling servlets post impl helper request property requestproperty org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory sling post servlet implementation creating user jackrabbit user manager usermanager service description creates user maps nodes resource type resourcetype code sling users code code rep system rep user manager usermanager rep users code mapped resource url code system user manager usermanager user code servlet resp onds responds code system user manager usermanager user create html code methods post post parameters user required pwd password user required pwd confirm pwdconfirm password user required additional parameters properties user node optional response success redirect users resource locator redirect html describing status failure including user exists html exp lains explains failure code cur l curl ieb fpwd password fpwd confirm fpwdconfirm password fproperty http localhost system user manager usermanager user create html code component metatype label create user createuser post operation description create user createuser post operation description service servlet create user createuser properties property sling servlet resource types resourcetypes sling users property sling servlet methods post property sling servlet selectors create property abstract authorizable post servlet abstractauthorizablepostservlet prop format eee mmm yyyy gmt yyyy sssz yyyy yyyy yyyy yyyy create user servlet createuserservlet abstract user post servlet abstractuserpostservlet create user createuser serialversionuid log logger log logger factory loggerfactory get logger getlogger get class getclass registration enabled property label registration enabled description registration enabled description bool value boolvalue registration enabled string prop registration enabled registration enabled self registration enabled selfregistrationenabled registration enabled user administrator group par user admin group string user admin group user admin useradmin configuration parameter providing user administrator group property user admin group string par user admin group user admin group string user admin group name useradmingroupname user admin group jcr repository access resolve resources reference sling repository slingrepository repository returns administrative session workspace session get session getsession repository exception repositoryexception repository login administrative loginadministrative administrative session close unget session ungetsession session session session session log out logout throwable log error unable log session get message getmessage scr int egration integration activates component param component context componentcontext osg i osgi code component context componentcontext code component override activate component context componentcontext component context componentcontext activate component context componentcontext dictionary props component context componentcontext get properties getproperties object prop value propvalue props prop registration enabled prop value propvalue self registration enabled selfregistrationenabled prop value propvalue prop value propvalue string self registration enabled selfregistrationenabled parse boolean parseboolean string prop value propvalue self registration enabled selfregistrationenabled registration enabled user admin group name useradmingroupname osgi util osgiutil to string tostring props par user admin group user admin group log info user admin group user admin group name useradmingroupname override deactivate component context componentcontext context deactivate context javadoc org apache sling jackrabbit user manager usermanager post abstract authorizable post servlet abstractauthorizablepostservlet handle operation handleoperation org apache sling api sling http servlet request slinghttpservletrequest org apache sling api servlets html response htmlresponse java util list override handle operation handleoperation sling http servlet request slinghttpservletrequest request abstract post response abstractpostresponse response list modification repository exception repositoryexception session session request get resource resolver getresourceresolver adapt to adaptto session string principal name principalname request get parameter getparameter sling post constants slingpostconstants node user user create user createuser session principal name principalname request get parameter getparameter pwd request get parameter getparameter pwd confirm pwdconfirm request get request parameter map getrequestparametermap string user path userpath user size modification modification modification get type gettype modification type modificationtype create user path userpath modification get source getsource user path userpath authorizable resource provider authorizableresourceprovider system user manager user prefix user getid user path userpath response set path setpath user path userpath response set location setlocation ext ernalize path externalizepath request user path userpath response set parent location setparentlocation ext ernalize path externalizepath request authorizable resource provider authorizableresourceprovider system user manager user path javadoc org apache sling jackrabbit user manager usermanager create user createuser create user createuser javax jcr session java lang string java lang string java lang string java util map java util list user create user createuser session jcr session jcrsession string string password string password confirm passwordconfirm map string properties list modification repository exception repositoryexception jcr session jcrsession repository exception repositoryexception jcr session check administrator administrator user manager usermanager access control util accesscontrolutil get user manager getusermanager jcr session jcrsession user current user currentuser user get authorizable getauthorizable jcr session jcrsession get user d getuserid administrator current user currentuser is admin isadmin administrator check user member user administrator group authorizable user admin useradmin get authorizable getauthorizable user admin group name useradmingroupname user admin useradmin group is member ismember group user admin useradmin is member ismember current user currentuser is member ismember administrator exception log warn failed determine user admin assuming get message getmessage administrator user registration enabled administrator self registration enabled selfregistrationenabled repository exception repositoryexception registration users enabled check sub mitted submitted parameter values valid values length repository exception repositoryexception user sub mitted submitted password repository exception repositoryexception password sub mitted submitted password equals password confirm passwordconfirm repository exception repositoryexception password match confirmation password user user session self reg session selfregsession jcr session jcrsession use admin session useadminsession administrator self registration enabled selfregistrationenabled use admin session useadminsession current user doesn permission create user registration enabled admin session work self reg session selfregsession get session getsession user manager usermanager user manager usermanager access control util accesscontrolutil get user manager getusermanager self reg session selfregsession authorizable authorizable user manager usermanager get authorizable getauthorizable authorizable user exists repository exception repositoryexception principal exists requested user user manager usermanager create user createuser password string user path userpath authorizable resource provider authorizableresourceprovider system user manager user prefix user getid map string request property requestproperty req properties reqproperties collect content collectcontent properties user path userpath add modification on created oncreated user path userpath write content form write content writecontent self reg session selfregsession user req properties reqproperties self reg session selfregsession has pending changes haspendingchanges self reg session selfregsession save use admin session useadminsession lookup user user session live object user manager usermanager user manager usermanager access control util accesscontrolutil get user manager getusermanager jcr session jcrsession authorizable authorizable user manager usermanager get authorizable getauthorizable user getid authorizable user user user authorizable user use admin session useadminsession reg admin session clean unget session ungetsession self reg session selfregsession user