licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer core impl tasks org junit assert equals assertequals org junit assert not null assertnotnull org junit assert true asserttrue java io exception ioexception java util iterator java util sorted set sortedset java util tree set treeset org apache sling installer api tasks change state task changestatetask org apache sling installer api tasks install task installtask org apache sling installer api tasks resource state resourcestate org apache sling installer api tasks task resource taskresource org apache sling installer core impl entity resource list entityresourcelist org apache sling installer core impl mock bundle resource mockbundleresource org junit test org osgi framework bundle bundle task creator test bundletaskcreatortest string test symbolic name testsymbolicname sorted set sortedset install task installtask get tasks gettasks task resource taskresource resources bundle task creator bundletaskcreator btc io exception ioexception sorted set sortedset task resource taskresource sorted resources sortedresources tree set treeset task resource taskresource task resource taskresource resources sorted resources sortedresources add sorted set sortedset install task installtask tasks tree set treeset install task installtask task resource taskresource sorted resources sortedresources entity resource list entityresourcelist erl entity resource list entityresourcelist get entity id getentityid mock installation listener mockinstallationlistener erl add or update addorupdate mock bundle resource mockbundleresource get registered resource impl getregisteredresourceimpl assert not null assertnotnull erl get active resource getactiveresource tasks add btc create task createtask erl tasks test test single bundle new testsinglebundlenew io exception ioexception task resource taskresource mock bundle resource mockbundleresource mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected task size assert true asserttrue expected bundle install task bundleinstalltask bundle install task bundleinstalltask test test single bundle already installed testsinglebundlealreadyinstalled io exception ioexception task resource taskresource mock bundle resource mockbundleresource mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle active sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected task version active size assert true asserttrue change task expected change state task changestatetask mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle resolved sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected tasks version installed size assert true asserttrue change task expected change state task changestatetask test test bundle upgrade testbundleupgrade io exception ioexception task resource taskresource mock bundle resource mockbundleresource mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle active sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected task size assert true asserttrue expected bundle update task bundleupdatetask bundle update task bundleupdatetask test test bundle upgrade both registered testbundleupgradebothregistered io exception ioexception task resource taskresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle active sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected tasks size assert true asserttrue expected change state task changestatetask change state task changestatetask assert true asserttrue expected bundle update task bundleupdatetask to array toarray bundle update task bundleupdatetask test test bundle upgrade both registered reverse d testbundleupgradebothregisteredreversed io exception ioexception task resource taskresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle active sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected tasks size assert true asserttrue expected change state task changestatetask change state task changestatetask assert true asserttrue expected bundle update task bundleupdatetask to array toarray bundle update task bundleupdatetask test test bundle upgrade snapshot testbundleupgradesnapshot io exception ioexception osg i osgi comp liant compliant version number bundles bnd tools generate correct numbers string snapshot task resource taskresource mock bundle resource mockbundleresource mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle active sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected task size assert true asserttrue expected bundle update task bundleupdatetask bundle update task bundleupdatetask test test bundle remove single testbundleremovesingle io exception ioexception string version mock bundle resource mockbundleresource mock bundle resource mockbundleresource version set state setstate resource state resourcestate uninstall mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle active sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected task remove bundle size assert true asserttrue expected bundle remove task bundleremovetask bundle remove task bundleremovetask test test bundle remove multiple testbundleremovemultiple io exception ioexception mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource set state setstate resource state resourcestate uninstall mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle active sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected tasks bundle installed size iterator install task installtask iterator install task installtask install task installtask assert true asserttrue expected change state task changestatetask change state task changestatetask assert true asserttrue expected bundle remove task bundleremovetask bundle remove task bundleremovetask test test down grade of removed resource testdowngradeofremovedresource io exception ioexception mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource simulate installed resource down grade downgrade set state setstate resource state resourcestate uninstall mock bundle task creator mockbundletaskcreator mock bundle task creator mockbundletaskcreator add bundle info addbundleinfo bundle active sorted set sortedset install task installtask get tasks gettasks assert equals assertequals expected tasks size iterator install task installtask iterator install task installtask assert true asserttrue expected change state task changestatetask change state task changestatetask install task installtask assert true asserttrue expected bundle remove task bundleremovetask bundle remove task bundleremovetask bundle remove task bundleremovetask bundle remove task bundleremovetask assert equals assertequals remove get entity id getentityid get resource getresource get entity id getentityid