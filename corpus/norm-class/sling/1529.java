licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons content detection contentdetection internal java byte array input stream bytearrayinputstream java io exception ioexception java input stream inputstream junit x junitx util private accessor privateaccessor org apache sling commons mime mime type service mimetypeservice org junit org junit org junit test content aware mime type service impl test contentawaremimetypeserviceimpltest content aware mime type service impl contentawaremimetypeserviceimpl content aware mime type service contentawaremimetypeservice counter a countera counter b counterb mime type service mimetypeservice mime type service mimetypeservice mime type service mimetypeservice override string get mime type getmimetype string override string get extension getextension string mime type mimetype ext mime type mimetype override register mime type registermimetype string mime type mimetype string extensions counter a countera override register mime type registermimetype input stream inputstream mime tab stream mimetabstream io exception ioexception counter b counterb setup no such field exception nosuchfieldexception content aware mime type service contentawaremimetypeservice content aware mime type service impl contentawaremimetypeserviceimpl private accessor privateaccessor set field setfield content aware mime type service contentawaremimetypeservice mime type service mimetypeservice mime type service mimetypeservice test test get mime type by string testgetmimetypebystring string mime type name mimetypename test name testname txt string mime type mimetype content aware mime type service contentawaremimetypeservice get mime type getmimetype mime type name mimetypename assert equals assertequals test name testname txt mime type mimetype test test get extension testgetextension string ext content aware mime type service contentawaremimetypeservice get extension getextension foo assert equals assertequals ext foo ext test test get mime type with null content testgetmimetypewithnullcontent io exception ioexception string filename test txt string mime type mimetype content aware mime type service contentawaremimetypeservice get mime type getmimetype filename assert equals assertequals test txt mime type mimetype test test register mime type is delegate d a testregistermimetypeisdelegateda counter a countera content aware mime type service contentawaremimetypeservice register mime type registermimetype foo string assert equals assertequals expecting call register mime type registermimetype counter a countera test test register mime type is delegate d b testregistermimetypeisdelegatedb io exception ioexception counter b counterb input stream inputstream byte array input stream bytearrayinputstream get bytes getbytes content aware mime type service contentawaremimetypeservice register mime type registermimetype close assert equals assertequals expecting call register mime type registermimetype counter b counterb