licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery base connectors announcement org apache sling discovery base connectors base config baseconfig org slf logger org slf logger factory loggerfactory sling announcement doesn created timeout field compatibility wire level small memory wrapper object announcement carries last heartbeat lastheartbeat property cached announcement cachedannouncement logger logger logger factory loggerfactory get logger getlogger cached announcement cachedannouncement last ping lastping system current time millis currenttimemillis announcement announcement first ping firstping system current time millis currenttimemillis backoff interval seconds backoffintervalseconds base config baseconfig config cached announcement cachedannouncement announcement announcement base config baseconfig config announcement announcement config config get configured connector timeout getconfiguredconnectortimeout config get connector ping timeout getconnectorpingtimeout get configured connector interval getconfiguredconnectorinterval config get connector ping interval getconnectorpinginterval has expired hasexpired system current time millis currenttimemillis diff last ping lastping diff get effective heartbeat timeout geteffectiveheartbeattimeout get last ping getlastping last ping lastping get first ping getfirstping first ping firstping returns heartbeat expected timeout hit get seconds until timeout getsecondsuntiltimeout system current time millis currenttimemillis diff last ping lastping left get effective heartbeat timeout geteffectiveheartbeattimeout diff left get effective heartbeat timeout geteffectiveheartbeattimeout configured goo dwill configuredgoodwill get configured connector timeout getconfiguredconnectortimeout get configured connector interval getconfiguredconnectorinterval math max get configured connector timeout getconfiguredconnectortimeout backoff interval seconds backoffintervalseconds configured goo dwill configuredgoodwill registers heartbeat event returns backoff int erval interval backoff applicable param incoming announcement incomingannouncement backoff int erval interval backoff applicable register ping registerping announcement incoming announcement incomingannouncement base config baseconfig config last ping lastping system current time millis currenttimemillis announcement register ping registerping incoming announcement incomingannouncement incoming announcement incomingannouncement is inherited isinherited client inherited announcement server power backoff instructions server server decides backoff ing returning not e note server ins truc ted instructed terms backoff backoff interval seconds backoffintervalseconds incoming announcement incomingannouncement get backoff interval getbackoffinterval logger debug register ping registerping inherited announcement returning incoming announcement incomingannouncement get reset backoff getresetbackoff reset backoff resetbackoff reset first heartbeat firstheartbeat start first ping firstping last ping lastping logger debug register ping registerping reset backoff resetbackoff returning stable since stablesince last ping lastping first ping firstping num stable time outs numstabletimeouts stable since stablesince config get connector ping timeout getconnectorpingtimeout backoff factor backofffactor math min num stable time outs numstabletimeouts config get backoff stable factor getbackoffstablefactor backoff interval seconds backoffintervalseconds backoff factor backofffactor config get connector ping interval getconnectorpinginterval backoff interval seconds backoffintervalseconds announcement get announcement getannouncement announcement