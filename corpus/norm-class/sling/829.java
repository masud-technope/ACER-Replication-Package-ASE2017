licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery impl setup org junit assert equals assertequals org junit fail javax jcr repository exception repositoryexception javax jcr session javax jcr observation event javax jcr observation observation manager observationmanager org apache sling api resource resource resolver resourceresolver org apache sling commons testing jcr repository provider repositoryprovider org apache sling discovery base commons base discovery service basediscoveryservice org apache sling discovery base commons cluster view service clusterviewservice org apache sling discovery base commons undefined cluster view exception undefinedclusterviewexception org apache sling discovery base commons view checker viewchecker org apache sling discovery base setup modifiable test base config modifiabletestbaseconfig org apache sling discovery base setup virtual instance virtualinstance org apache sling discovery base setup virtual instance builder virtualinstancebuilder org apache sling discovery base setup mock dummy resource resolver factory dummyresourceresolverfactory org apache sling discovery commons providers spi base sync token service synctokenservice org apache sling discovery impl discovery service impl discoveryserviceimpl org apache sling discovery impl cluster cluster view service impl clusterviewserviceimpl org apache sling discovery impl cluster voting voting handler votinghandler org apache sling discovery impl common heartbeat heartbeat handler heartbeathandler org apache sling discovery impl common resource established instance description establishedinstancedescription org slf logger org slf logger factory loggerfactory fulljr virtual instance builder virtualinstancebuilder virtual instance builder virtualinstancebuilder logger logger logger factory loggerfactory get logger getlogger get class getclass string path test config testconfig config object additional services additionalservices voting event listener votingeventlistener observation listener observationlistener observation manager observationmanager observation manager observationmanager voting handler votinghandler voting handler votinghandler sync token service synctokenservice sync token service synctokenservice override virtual instance builder virtualinstancebuilder create new repository createnewrepository exception dummy resource resolver factory dummyresourceresolverfactory dummy factory dummyfactory dummy resource resolver factory dummyresourceresolverfactory dummy factory dummyfactory set artificial delay setartificialdelay delay factory dummy factory dummyfactory override virtual instance builder virtualinstancebuilder use repository of userepositoryof virtual instance builder virtualinstancebuilder exception use repository of userepositoryof dummy resource resolver factory dummyresourceresolverfactory dummy factory dummyfactory dummy resource resolver factory dummyresourceresolverfactory dummy resource resolver factory dummyresourceresolverfactory original factory originalfactory dummy resource resolver factory dummyresourceresolverfactory factory force repository created original factory originalfactory get administrative resource resolver getadministrativeresourceresolver dummy factory dummyfactory set sling repository setslingrepository original factory originalfactory get sling repository getslingrepository dummy factory dummyfactory set artificial delay setartificialdelay get delay getdelay factory dummy factory dummyfactory override virtual instance builder virtualinstancebuilder set path setpath string path own repository ownrepository fine path path fine illegal state exception illegalstateexception path inherited repo test config testconfig get config getconfig config config create config createconfig config test config testconfig create config createconfig test config testconfig test config testconfig path override modifiable test base config modifiabletestbaseconfig get connector config getconnectorconfig get config getconfig override view checker viewchecker create view checker createviewchecker exception heartbeat handler heartbeathandler test constructor testconstructor get sling settings service getslingsettingsservice get resource resolver factory getresourceresolverfactory get announcement registry getannouncementregistry get connector registry getconnectorregistry get config getconfig get scheduler getscheduler get voting handler getvotinghandler sync token service synctokenservice get sync token service getsynctokenservice exception sync token service synctokenservice sync token service synctokenservice create sync token service createsynctokenservice sync token service synctokenservice sync token service synctokenservice create sync token service createsynctokenservice sync token service synctokenservice test constructor and activate testconstructorandactivate get config getconfig get resource resolver factory getresourceresolverfactory get sling settings service getslingsettingsservice override base discovery service basediscoveryservice create discovery service creatediscoveryservice exception discovery service impl discoveryserviceimpl test constructor testconstructor get resource resolver factory getresourceresolverfactory get announcement registry getannouncementregistry get connector registry getconnectorregistry cluster view service impl clusterviewserviceimpl get cluster view service getclusterviewservice get heartbeat handler getheartbeathandler get sling settings service getslingsettingsservice get scheduler getscheduler get config getconfig get sync token service getsynctokenservice override cluster view service clusterviewservice create cluster view service createclusterviewservice cluster view service impl clusterviewserviceimpl test constructor testconstructor get sling settings service getslingsettingsservice get resource resolver factory getresourceresolverfactory get config getconfig heartbeat handler heartbeathandler get heartbeat handler getheartbeathandler exception view checker viewchecker illegal state exception illegalstateexception heartbeat handler heartbeathandler initialized heartbeat handler heartbeathandler get view checker getviewchecker override object get additional services getadditionalservices virtual instance virtualinstance instance exception additional services additionalservices additional services additionalservices create additional services createadditionalservices instance additional services additionalservices voting handler votinghandler get voting handler getvotinghandler exception voting handler votinghandler voting handler votinghandler create voting handler createvotinghandler voting handler votinghandler voting handler votinghandler create voting handler createvotinghandler exception voting handler votinghandler test constructor testconstructor get sling settings service getslingsettingsservice get resource resolver factory getresourceresolverfactory get config getconfig object create additional services createadditionalservices virtual instance virtualinstance instance exception object addition als additionals object addition als additionals get voting handler getvotinghandler observation listener observationlistener voting event listener votingeventlistener instance voting handler votinghandler get sling id getslingid resource resolver resourceresolver resource resolver resourceresolver get resource resolver factory getresourceresolverfactory get administrative resource resolver getadministrativeresourceresolver session session resource resolver resourceresolver adapt to adaptto session observation manager observationmanager session get workspace getworkspace get observation manager getobservationmanager observation manager observationmanager add event listener addeventlistener observation listener observationlistener event node event node removed event node moved event property changed event property event property removed event per sist persist addition als additionals stop voting stopvoting observation listener observationlistener logger info stop voting stopvoting stop ping stopping voting sling id slingid get sling id getslingid observation manager observationmanager logger info removing listener sling id slingid get sling id getslingid observation listener observationlistener observation manager observationmanager remove event listener removeeventlistener observation listener observationlistener repository exception repositoryexception logger error stop voting stopvoting remove listener sling id slingid get sling id getslingid observation listener observationlistener logger info stop voting stopvoting stop ping stopping observation listener sling id slingid get sling id getslingid observation listener observationlistener observation listener observationlistener logger info stop voting stopvoting stopped observation listener sling id slingid get sling id getslingid logger info stop voting stopvoting observation listener sling id slingid get sling id getslingid fulljr virtual instance virtualinstance full build fullbuild exception fulljr virtual instance virtualinstance build override virtual instance virtualinstance build exception path own repository ownrepository set path setpath discovery impl get config getconfig set path setpath discovery impl fulljr virtual instance builder virtualinstancebuilder fulljr virtual instance builder virtualinstancebuilder hoo ked to builder hookedtobuilder path path get config getconfig set path setpath path path illegal state exception illegalstateexception path path starts with startswith illegal state exception illegalstateexception path start path path ends with endswith illegal state exception illegalstateexception path path fulljr virtual instance virtualinstance override exception observation listener observationlistener observation manager observationmanager logger info removing listener sling id slingid sling id slingid observation listener observationlistener observation manager observationmanager remove event listener removeeventlistener observation listener observationlistener logger warn remove listener sling id slingid sling id slingid debug name debugname debug name debugname observation manager observationmanager observation manager observationmanager observation listener observationlistener observation listener observationlistener observation listener observationlistener observation listener observationlistener override assert established view assertestablishedview assert established view assertestablishedview assert equals assertequals established instance description establishedinstancedescription get cluster view service getclusterviewservice get local cluster view getlocalclusterview get instances getinstances get class getclass undefined cluster view exception undefinedclusterviewexception fail undefined cluster view clusterview override reset repo resetrepo exception logger info reset repo resetrepo start logging session repository provider repositoryprovider instance get repository getrepository login administrative loginadministrative logger info reset repo resetrepo removing remove item removeitem logger info reset repo resetrepo saving save logger info reset repo resetrepo logging log out logout logger info reset repo resetrepo exception logger error reset repo resetrepo exception remove refresh logger info reset repo resetrepo logging exception log out logout logger info reset repo resetrepo exception