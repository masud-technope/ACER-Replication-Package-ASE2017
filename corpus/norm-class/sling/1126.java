licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling event impl jobs console java io exception ioexception java print writer printwriter java net url encoder urlencoder java text date format dateformat java text simple date format simpledateformat java util collection java util java util list java util map javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations service org apache sling api request response util responseutil org apache sling discovery instance description instancedescription org apache sling event impl jobs job consumer manager jobconsumermanager org apache sling event impl jobs config internal queue configuration internalqueueconfiguration org apache sling event impl jobs config job manager configuration jobmanagerconfiguration org apache sling event impl jobs config topology capabilities topologycapabilities org apache sling event jobs job org apache sling event jobs job manager jobmanager org apache sling event jobs queue org apache sling event jobs queue configuration queueconfiguration org apache sling event jobs schedule info scheduleinfo org apache sling event jobs scheduled job info scheduledjobinfo org apache sling event jobs statistics org apache sling event jobs topic statistics topicstatistics org apache sling event jobs consumer job consumer jobconsumer org slf logger org slf logger factory loggerfactory web console plugin displaying active queues statistics configurations component service javax servlet servlet job consumer jobconsumer properties property felix webconsole label sling event slingevent property felix webconsole title jobs property felix webconsole category sling property job consumer jobconsumer property topics sling webconsole test web console plugin webconsoleplugin http servlet httpservlet job consumer jobconsumer string sling webconsole test job topic sling webconsole test serialversionuid logger logger logger factory loggerfactory get logger getlogger get class getclass reference job manager jobmanager job manager jobmanager reference job manager configuration jobmanagerconfiguration configuration reference job consumer manager jobconsumermanager job consumer manager jobconsumermanager string par queue queue queue get queue getqueue http servlet request httpservletrequest req string req get parameter getparameter par queue queue job manager jobmanager get queues getqueues equals get name getname string get queue error message getqueueerrormessage http servlet request httpservletrequest req string command string req get parameter getparameter par queue length queue parameter missing opertation command queue operation command override do post dopost http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception io exception ioexception string msg string cmd req get parameter getparameter action suspend equals cmd queue get queue getqueue req suspend msg get queue error message getqueueerrormessage req suspend resume equals cmd queue get queue getqueue req resume msg get queue error message getqueueerrormessage req resume reset equals cmd req get parameter getparameter par queue req get parameter getparameter par queue length job manager jobmanager get statistics getstatistics reset queue get queue getqueue req get statistics getstatistics reset msg get queue error message getqueueerrormessage req reset test equals cmd start test job starttestjob drop all dropall equals cmd queue get queue getqueue req remove all removeall msg get queue error message getqueueerrormessage req drop msg unknown command string path req get context path getcontextpath req get servlet path getservletpath req get path info getpathinfo string redirect to redirectto msg redirect to redirectto path redirect to redirectto path message url encoder urlencoder encode msg utf resp send redirect sendredirect resp encoderedirecturl redirect to redirectto start test job starttestjob logger info adding test job sling webconsole test job topic job manager jobmanager add job addjob sling webconsole test job topic override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse res servlet exception servletexception io exception ioexception string msg req get parameter getparameter message print writer printwriter res get writer getwriter println form method post event ingcmd eventingcmd input type hidden action input type hidden queue form println script type text java script javascript println function event ingsubmit eventingsubmit action queue document forms event ingcmd eventingcmd action action document forms event ingcmd eventingcmd queue queue document forms event ingcmd eventingcmd sub mit submit script printf statline highlight apache sling job handling msg response util responseutil escape xml escapexml msg println div widget header corner top button group buttongroup println span style left margin left apache sling job handling statistics span print form printform reset stats reset println div println table nicetable tbody string topics job consumer manager jobconsumermanager get topics gettopics topics topics string all topics alltopics topics split string builder stringbuilder string builder stringbuilder string all topics alltopics append append response util responseutil escape xml escapexml topics to string tostring statistics job manager jobmanager get statistics getstatistics printf start time format date formatdate get start time getstarttime printf local topic consume rs consumers topics printf activated format date formatdate get last activated job time getlastactivatedjobtime printf finished format date formatdate get last finished job time getlastfinishedjobtime printf queue d queued jobs get number of queue d jobs getnumberofqueuedjobs printf active jobs get number of active jobs getnumberofactivejobs printf jobs get number of jobs getnumberofjobs printf finished jobs get number of finished jobs getnumberoffinishedjobs printf failed jobs get number of failed jobs getnumberoffailedjobs printf cancelled jobs get number of cancelled jobs getnumberofcancelledjobs printf processed jobs get number of processed jobs getnumberofprocessedjobs printf average processing time format time formattime get average processing time getaverageprocessingtime printf average waiting time format time formattime get average waiting time getaveragewaitingtime println tbody table println println table nicetable tbody println colspan topology capabilities topology capabilities topologycapabilities cap configuration get topology capabilities gettopologycapabilities cap print colspan topology map string list instance description instancedescription instance caps instancecaps cap get instance capabilities getinstancecapabilities map entry string list instance description instancedescription entry instance caps instancecaps entry set entryset string builder stringbuilder string builder stringbuilder instance description instancedescription entry get value getvalue length append is local islocal append local append response util responseutil escape xml escapexml get sling id getslingid printf response util responseutil escape xml escapexml entry get key getkey to string tostring println tbody table println println statline scheduled jobs println table nicetable tbody collection scheduled job info scheduledjobinfo infos job manager jobmanager get scheduled jobs getscheduledjobs infos size print colspan jobs scheduled println schedule job topic schedules scheduled job info scheduledjobinfo info infos printf string value of valueof response util responseutil escape xml escapexml info get job topic getjobtopic schedule info scheduleinfo info get schedules getschedules print get type gettype yearly printf yearly get month of year getmonthofyear get day of month getdayofmonth get hour of day gethourofday get minute of hour getminuteofhour monthly printf monthly get day of month getdayofmonth get hour of day gethourofday get minute of hour getminuteofhour weekly printf weekly get day of week getdayofweek get hour of day gethourofday get minute of hour getminuteofhour daily printf daily get hour of day gethourofday get minute of hour getminuteofhour hourly printf hourly get minute of hour getminuteofhour cron printf cron response util responseutil escape xml escapexml get expression getexpression printf get at getat print println tbody table println is empty isempty queue job manager jobmanager get queues getqueues is empty isempty string queue name queuename get name getname println div widget header corner top button group buttongroup printf span style left margin left active job queue jobqueue span response util responseutil escape xml escapexml queue name queuename is suspended issuspended suspended print form printform queue name queuename reset stats reset is suspended issuspended print form printform queue name queuename resume resume print form printform queue name queuename suspend suspend print form printform queue name queuename test test print form printform queue name queuename drop drop all dropall println div println table nicetable tbody get statistics getstatistics queue configuration queueconfiguration get configuration getconfiguration println colspan statistics colspan configuration printf start time type format date formatdate get start time getstarttime format type formattype get type gettype printf activated topics format date formatdate get last activated job time getlastactivatedjobtime format array formatarray get topics gettopics printf finished max parallel format date formatdate get last finished job time getlastfinishedjobtime get max parallel getmaxparallel printf queue d queued jobs max retries get number of queue d jobs getnumberofqueuedjobs get max retries getmaxretries printf active jobs retry delay get number of active jobs getnumberofactivejobs get retry delay in ms getretrydelayinms printf jobs priority get number of jobs getnumberofjobs get thread priority getthreadpriority printf finished jobs colspan nbsp get number of finished jobs getnumberoffinishedjobs printf failed jobs colspan nbsp get number of failed jobs getnumberoffailedjobs printf cancelled jobs colspan nbsp get number of cancelled jobs getnumberofcancelledjobs printf processed jobs colspan nbsp get number of processed jobs getnumberofprocessedjobs printf average processing time colspan nbsp format time formattime get average processing time getaverageprocessingtime printf average waiting time colspan nbsp format time formattime get average waiting time getaveragewaitingtime printf status info colspan response util responseutil escape xml escapexml get state info getstateinfo println tbody table println is empty isempty println active queues println topic statistics topicstatistics job manager jobmanager get topic statistics gettopicstatistics println table nicetable tbody printf colspan topic statistics response util responseutil escape xml escapexml get topic gettopic printf activated format date formatdate get last activated job time getlastactivatedjobtime printf finished format date formatdate get last finished job time getlastfinishedjobtime printf finished jobs get number of finished jobs getnumberoffinishedjobs printf failed jobs get number of failed jobs getnumberoffailedjobs printf cancelled jobs get number of cancelled jobs getnumberofcancelledjobs printf processed jobs get number of processed jobs getnumberofprocessedjobs printf average processing time format time formattime get average processing time getaverageprocessingtime printf average waiting time format time formattime get average waiting time getaveragewaitingtime println tbody table println println statline apache sling job handling job queue configurations print queue configuration printqueueconfiguration req configuration get queue configuration manager getqueueconfigurationmanager get main queue configuration getmainqueueconfiguration internal queue configuration internalqueueconfiguration configs configuration get queue configuration manager getqueueconfigurationmanager get configurations getconfigurations internal queue configuration internalqueueconfiguration configs print queue configuration printqueueconfiguration req print queue configuration printqueueconfiguration http servlet request httpservletrequest req print writer printwriter internal queue configuration internalqueueconfiguration println div widget header corner top button group buttongroup printf span style left margin left job queue configuration span response util responseutil escape xml escapexml get name getname printf button edit corner onclick java script javascript window location config mgr configmgr edit button req get context path getcontextpath req get servlet path getservletpath get pid getpid print form printform get name getname test test println div println table nicetable tbody println colspan configuration printf valid is valid isvalid printf type format type formattype get type gettype printf topics format array formatarray get topics gettopics printf max parallel get max parallel getmaxparallel printf max retries get max retries getmaxretries printf retry delay get retry delay in ms getretrydelayinms printf priority get thread priority getthreadpriority printf ranking get ranking getranking println tbody table println format array html rendering string format array formatarray string array array array length string builder stringbuilder string builder stringbuilder string array append append response util responseutil escape xml escapexml to string tostring string format type formattype queue configuration queueconfiguration type type type ordered ordered topic robin topic robin unordered parallel type to string tostring format date format dateformat date format dateformat simple date format simpledateformat sss yyyy mmm format string format date formatdate time time time date format dateformat format format time duration string format time formattime time time time time time time secs min time secs time min min min secs secs print form printform print writer printwriter string qeue name qeuename string button label buttonlabel string cmd printf button corner onclick java script javascript event ingsubmit eventingsubmit button response util responseutil escape xml escapexml cmd qeue name qeuename response util responseutil escape xml escapexml qeue name qeuename response util responseutil escape xml escapexml button label buttonlabel override job result jobresult process job job logger info received test job job get topic gettopic job result jobresult