licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock sling context org apache sling jcr resource jcr resource constants jcrresourceconstants sling ordered folder java util uuid org apache jackrabbit jcr constants jcrconstants org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource util resourceutil org slf logger org slf logger factory loggerfactory google common collect immutable map immutablemap manages unique root paths jcr repository resource resolver types jcr jackrabbit repository cleaned test unique root paths cleans unique root uniqueroot sling context impl slingcontextimpl context string unique path part uniquepathpart resource content root contentroot resource apps root appsroot resource libs root libsroot logger log logger factory loggerfactory get logger getlogger unique root uniqueroot unique root uniqueroot sling context impl slingcontextimpl context context context generate unique path uuid unique path part uniquepathpart uuid randomuuid to string tostring create resource jcr primary type param path path param primary type primarytype jcr primary type resource resource get or create resource getorcreateresource string path string primary type primarytype resource util resourceutil get or create resource getorcreateresource context resource resolver resourceresolver path immutable map immutablemap string object jcr constants jcrconstants jcr primarytype primary type primarytype persistence exception persistenceexception runtime exception runtimeexception unable create resource path get message getmessage creates required unique path code content xxx code path inc l incl children automatically removed unit test completes unique content path string content content root contentroot content root contentroot get or create resource getorcreateresource content unique path part uniquepathpart sling ordered folder content root contentroot get path getpath creates required unique path code apps xxx code path inc l incl children automatically removed unit test completes unique content path string apps apps root appsroot apps root appsroot get or create resource getorcreateresource apps unique path part uniquepathpart sling ordered folder apps root appsroot get path getpath creates required unique path code libs xxx code path inc l incl children automatically removed unit test completes unique content path string libs libs root libsroot libs root libsroot get or create resource getorcreateresource libs unique path part uniquepathpart sling ordered folder libs root libsroot get path getpath clean up cleanup called unit test rule completes unit test resources created removed clean up cleanup delete resources deleteresources content root contentroot apps root appsroot libs root libsroot deletes resources commits param resources resources deleted delete resources deleteresources resource resources resource resource resources resource context resource resolver resourceresolver get resource getresource resource get path getpath context resource resolver resourceresolver delete resource persistence exception persistenceexception log warn unable delete root path resource get path getpath context resource resolver resourceresolver commit persistence exception persistenceexception log warn unable commit root path deletions