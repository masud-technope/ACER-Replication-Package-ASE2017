licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets post impl operations java util list java util map javax jcr item javax jcr node javax jcr property javax jcr repository exception repositoryexception javax jcr session javax jcr node type nodetype node type nodetype javax servlet servlet context servletcontext org apache sling api sling exception slingexception org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource modifiable value map modifiablevaluemap org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource util resourceutil org apache sling api resource value map valuemap org apache sling servlets post modification org apache sling servlets post post response postresponse org apache sling servlets post sling post constants slingpostconstants org apache sling servlets post versioning configuration versioningconfiguration org apache sling servlets post impl helper date parser dateparser org apache sling servlets post impl helper reference parser referenceparser org apache sling servlets post impl helper request property requestproperty org apache sling servlets post impl helper sling file upload handler slingfileuploadhandler org apache sling servlets post impl helper sling property value handler slingpropertyvaluehandler code modify operation modifyoperation code operation called sling post servlet operation requested client operation create modify content modify operation modifyoperation abstract create operation abstractcreateoperation date parser dateparser date parser dateparser handler deals file upload sling file upload handler slingfileuploadhandler upload handler uploadhandler modify operation modifyoperation date parser dateparser date parser dateparser upload handler uploadhandler sling file upload handler slingfileuploadhandler set servlet context setservletcontext servlet context servletcontext servlet context servletcontext upload handler uploadhandler set servlet context setservletcontext servlet context servletcontext set date parser setdateparser date parser dateparser date parser dateparser date parser dateparser date parser dateparser override do run dorun sling http servlet request slinghttpservletrequest request post response postresponse response list modification repository exception repositoryexception map string request property requestproperty req properties reqproperties collect content collectcontent request response versioning configuration versioningconfiguration versioning configuration versioningconfiguration get versioning configuration getversioningconfiguration request change order good reason ensure root content process create processcreate request get resource resolver getresourceresolver req properties reqproperties response versioning configuration versioningconfiguration write content existing content move copy from copyfrom parameters process moves processmoves request get resource resolver getresourceresolver req properties reqproperties versioning configuration versioningconfiguration process copies processcopies request get resource resolver getresourceresolver req properties reqproperties versioning configuration versioningconfiguration cleanup content delete parameters process deletes processdeletes request get resource resolver getresourceresolver req properties reqproperties versioning configuration versioningconfiguration write content form write content writecontent request get resource resolver getresourceresolver req properties reqproperties versioning configuration versioningconfiguration order content resource new resource newresource request get resource resolver getresourceresolver get resource getresource response get path getpath node new node newnode new resource newresource adapt to adaptto node new node newnode order node ordernode request new node newnode persistence exception persistenceexception get cause getcause repository exception repositoryexception repository exception repositoryexception get cause getcause repository exception repositoryexception override string get item path getitempath sling http servlet request slinghttpservletrequest request calculate paths string builder stringbuilder root path buf rootpathbuf string builder stringbuilder string suffix resource current resource currentresource request get resource getresource resource util resourceutil is synthetic resource issyntheticresource current resource currentresource resource treat missing resource path suffix suffix current resource currentresource get path getpath resource path request suffix suffix request get request path info getrequestpathinfo get suffix getsuffix suffix cut selectors extension suffix dot pos dotpos suffix index of indexof dot pos dotpos suffix suffix substring dot pos dotpos preset path buffer resource path root path buf rootpathbuf append current resource currentresource get path getpath check extensions create suffix suffix do generate name dogeneratename suffix check create request trailing suffix ends with endswith sling post constants slingpostconstants create suffix suffix suffix substring suffix length sling post constants slingpostconstants create suffix length do generate name dogeneratename star suffix suffix ends with endswith sling post constants slingpostconstants star create suffix suffix suffix substring suffix length sling post constants slingpostconstants star create suffix length do generate name dogeneratename append remains suffix path buffer root path buf rootpathbuf append suffix string path root path buf rootpathbuf to string tostring do generate name dogeneratename path generate name generatename request path repository exception repositoryexception sling exception slingexception failed generate path moves repository content listed repository move source request properties locations resource properties param checked out nodes checkedoutnodes process moves processmoves resource resolver resourceresolver resolver map string request property requestproperty req properties reqproperties list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception persistence exception persistenceexception request property requestproperty property req properties reqproperties values property has repository move source hasrepositorymovesource process moves copies internal processmovescopiesinternal property resolver req properties reqproperties versioning configuration versioningconfiguration copies repository content listed repository copy source request properties locations resource properties param checked out nodes checkedoutnodes process copies processcopies resource resolver resourceresolver resolver map string request property requestproperty req properties reqproperties list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception persistence exception persistenceexception request property requestproperty property req properties reqproperties values property has repository copy source hasrepositorycopysource process moves copies internal processmovescopiesinternal property resolver req properties reqproperties versioning configuration versioningconfiguration internal implementation link process copies processcopies session map html response htmlresponse link process moves processmoves session map html response htmlresponse methods account source property node int ermediary intermediary nodes destination code property code path created code req properties reqproperties code ind ications indications required node types param property link request property requestproperty identifying source content operation param is move ismove code code source item moved source item copied param session repository session access content param req properties reqproperties accepted request properties create int ermediary intermediary nodes property path param response code html response htmlresponse code successful l successfull copies moves int ermediary intermediary node creations recorded repository exception repositoryexception thrown error occurrs process moves copies internal processmovescopiesinternal request property requestproperty property is move ismove resource resolver resourceresolver resolver map string request property requestproperty req properties reqproperties list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception persistence exception persistenceexception session session resolver adapt to adaptto session string prop path proppath property get path getpath string source property get repository source getrepositorysource source exists session item exists itemexists source ensure parent location session item exists itemexists prop path proppath node parent session get item getitem prop path proppath get parent getparent check out if necessary checkoutifnecessary parent versioning configuration versioningconfiguration session get item getitem prop path proppath remove add modification on deleted ondeleted prop path proppath resource parent deep get or create node deepgetorcreatenode resolver property get parent path getparentpath req properties reqproperties versioning configuration versioningconfiguration node node parent adapt to adaptto node node check out if necessary checkoutifnecessary node versioning configuration versioningconfiguration move session record operation item source item sourceitem session get item getitem source source item sourceitem is node isnode node move copy session is move ismove check out if necessary checkoutifnecessary source item sourceitem get parent getparent versioning configuration versioningconfiguration session move source prop path proppath node source node sourcenode node source item sourceitem node dest parent destparent node session get item getitem property get parent path getparentpath check out if necessary checkoutifnecessary dest parent destparent versioning configuration versioningconfiguration copy operation copyoperation copy source node sourcenode dest parent destparent property get name getname property move manually property source property sourceproperty property source item sourceitem create destination property node dest parent destparent node session get item getitem property get parent path getparentpath check out if necessary checkoutifnecessary dest parent destparent versioning configuration versioningconfiguration copy operation copyoperation copy source property sourceproperty dest parent destparent remove source property copying is move ismove check out if necessary checkoutifnecessary source property sourceproperty get parent getparent versioning configuration versioningconfiguration source property sourceproperty remove property deleted property move from movefrom delete property set delete setdelete record successful move is move ismove add modification on moved onmoved source prop path proppath add modification on copied oncopied source prop path proppath removes properties listed link request property requestproperty is delete isdelete resource param resolver code resource resolver resourceresolver code access resources delete properties param req properties reqproperties map request properties check properties removed param response code html response htmlresponse code updated deleted properties repository exception repositoryexception thrown error occurrs checking removing properties process deletes processdeletes resource resolver resourceresolver resolver map string request property requestproperty req properties reqproperties list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception persistence exception persistenceexception request property requestproperty property req properties reqproperties values property is delete isdelete resource parent resolver get resource getresource property get parent path getparentpath parent node parent node parentnode parent adapt to adaptto node parent node parentnode check out if necessary checkoutifnecessary parent node parentnode versioning configuration versioningconfiguration property get name getname equals jcr mixin types mixintypes clear mixins node type nodetype mixin parent node parentnode get mixin node types getmixinnodetypes parent node parentnode remove mixin removemixin mixin get name getname parent node parentnode has property hasproperty property get name getname parent node parentnode get property getproperty property get name getname remove parent node parentnode has node hasnode property get name getname parent node parentnode get node getnode property get name getname remove value map valuemap parent adapt to adaptto modifiable value map modifiablevaluemap persistence exception persistenceexception resource parent get path getpath modifiable remove property get name getname add modification on deleted ondeleted property get path getpath writes content repository exception repositoryexception repository error occurs persistence exception persistenceexception persistence error occurs write content writecontent resource resolver resourceresolver resolver map string request property requestproperty req properties reqproperties list modification versioning configuration versioningconfiguration versioning configuration versioningconfiguration repository exception repositoryexception persistence exception persistenceexception sling property value handler slingpropertyvaluehandler prop handler prophandler sling property value handler slingpropertyvaluehandler date parser dateparser reference parser referenceparser resolver adapt to adaptto session request property requestproperty prop req properties reqproperties values prop has values hasvalues resource parent deep get or create node deepgetorcreatenode resolver prop get parent path getparentpath req properties reqproperties versioning configuration versioningconfiguration node parent node parentnode parent adapt to adaptto node parent node parentnode check out if necessary checkoutifnecessary parent node parentnode versioning configuration versioningconfiguration skip jcr special properties prop get name getname equals jcr primary type primarytype prop get name getname equals jcr mixin types mixintypes prop is file upload isfileupload upload handler uploadhandler set file setfile parent prop prop handler prophandler set property setproperty parent prop