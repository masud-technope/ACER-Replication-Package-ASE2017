licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons class loader classloader impl java util collections java util hash set hashset java util org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework service factory servicefactory org osgi framework service registration serviceregistration org osgi service package admin packageadmin exported package exportedpackage org osgi service package admin packageadmin package admin packageadmin org slf logger org slf logger factory loggerfactory service factory dynamic loader manager dynamic class loader manager factory dynamicclassloadermanagerfactory service factory servicefactory logger logger logger logger factory loggerfactory get logger getlogger get class getclass admin package admin packageadmin pck admin pckadmin bundle context bundle context bundlecontext context used bundles usedbundles collections synchronized set synchronizedset hash set hashset string unresolved packages unresolvedpackages collections synchronized set synchronizedset hash set hashset string create service instance param ctx bundle context param pck admin pckadmin admin dynamic class loader manager factory dynamicclassloadermanagerfactory bundle context bundlecontext ctx package admin packageadmin pck admin pckadmin context ctx pck admin pckadmin pck admin pckadmin org osgi framework service factory servicefactory get service getservice org osgi framework bundle org osgi framework service registration serviceregistration object get service getservice bundle bundle service registration serviceregistration registration dynamic class loader manager impl dynamicclassloadermanagerimpl manager dynamic class loader manager impl dynamicclassloadermanagerimpl context pck admin pckadmin bundle proxy class loader bundleproxyclassloader bundle manager org osgi framework service factory servicefactory unget service ungetservice org osgi framework bundle org osgi framework service registration serviceregistration java lang object unget service ungetservice bundle bundle service registration serviceregistration registration object service service dynamic class loader manager impl dynamicclassloadermanagerimpl service deactivate check bundle loading param bundle id bundleid bundle code code bundle is bundle used isbundleused bundle id bundleid used bundles usedbundles bundle id bundleid notify bundle source loading param bundle bundle add used bundle addusedbundle bundle bundle bundle get bundle id getbundleid used bundles usedbundles add notify loading param pck name pckname add unresolved package addunresolvedpackage string pck name pckname unresolved packages unresolvedpackages add pck name pckname check exported bundle previous loading attempts param bundle bundle check code code has unresolved packages hasunresolvedpackages bundle bundle unresolved packages unresolvedpackages is empty isempty exported package exportedpackage pcks pck admin pckadmin get exported packages getexportedpackages bundle pcks exported package exportedpackage pck pcks unresolved packages unresolvedpackages pck get name getname logger debug bundle unsuccessfully requested bundle pck get name getname