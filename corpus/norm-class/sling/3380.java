licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets post impl helper java util hash map hashmap java util hash set hashset java util map java util java util tree set treeset javax servlet http http servlet request httpservletrequest org slf logger org slf logger factory loggerfactory fac ilitates facilitates parsing accept http request header href http org protocols rfc rfc html rfc media range list mediarangelist tree set treeset media range list mediarangelist media range mediarange string header accept accept string param accept http equiv accept string wildcard matches all matchesall logger log logger factory loggerfactory get logger getlogger media range list mediarangelist constructs code media range list mediarangelist code supplied code http servlet request httpservletrequest code request link param accept query parameter query parameter overrides link header accept header request link param accept parameter parameter empty link header accept values missing assumed client accepts media types rfc link media range list mediarangelist media range list mediarangelist java lang string param request code http servlet request httpservletrequest code extract code media range list mediarangelist code media range list mediarangelist http servlet request httpservletrequest request string query param queryparam request get parameter getparameter param accept query param queryparam query param queryparam trim length init query param queryparam init request get header getheader header accept constructs code media range list mediarangelist code list media ranges code java lang string code string comma separated list media ranges rfc examples code text text html text html level text html level code code text html application json code param list str liststr list media range specific ations specifications media range list mediarangelist string list str liststr init list str liststr throwable log error error building media range list mediarangelist list str liststr assume client accepts media types init init string header value headervalue header value headervalue header value headervalue trim length rfc accept header field assumed client accepts media types matches all matchesall add media range mediarange wildcard wildcard string media types mediatypes header value headervalue split string type media types mediatypes media range mediarange range media range mediarange type add range range matches all matchesall matches all matchesall throwable throwable log warn error registering media type type throwable determines media range list mediarangelist media type param media type mediatype string form code type subtype code code type code code subtype code wildcard code code code code code media range list mediarangelist code media type matches code media type mediatype code code code illegal argument exception illegalargumentexception code media type mediatype code accepted form null pointer exception nullpointerexception code media type mediatype code code code string media type mediatype noinspection suspicious method calls suspiciousmethodcalls media range mediarange comp media range mediarange media type mediatype matches all matchesall comp list media types returns preferred code media range list mediarangelist code param media ranges mediaranges array link org apache sling servlets post impl helper media range list mediarangelist media range mediarange code media ranges mediaranges code code media range list mediarangelist code pref ers prefers code code code media range list mediarangelist code code media ranges mediaranges code null pointer exception nullpointerexception code media ranges mediaranges code code code code code media range mediarange prefer media range mediarange media ranges mediaranges media range mediarange range media range mediarange media type mediatype media ranges mediaranges range equals media type mediatype media type mediatype determines code media ranges mediaranges code spec ifiactions specifiactions pref ered prefered code media range list mediarangelist code param media ranges mediaranges string represent ations representations code media range mediarange code strings form required link media range mediarange media range mediarange string prefer java util code to string tostring code representation pref ered prefered code media range mediarange code code code code media range list mediarangelist code code media ranges mediaranges code string prefer string media ranges mediaranges media range mediarange ranges hash set hashset media range mediarange string media range mediarange media ranges mediaranges ranges add media range mediarange media range mediarange media range mediarange preferred prefer ranges preferred preferred to string tostring code code media range mediarange code represents entry code media range list mediarangelist code code media range mediarange code consists code supertype code code subtype code option ally optionally quality factor parameter code code arbitrary parameters media range mediarange comparable media range mediarange string supertype map string string parameters string subtype constructs code media range mediarange code code string code expression param exp code string code const uct constuct code media range mediarange code string expected form type type subtype parameter rfc examples code text html code code text html code code text html level code code text html level code code text code code code note supertype component wildcard code code subtype component wildcard quality factor parameter code code code code inclusive href http org protocols rfc rfc html rfc expression code code parameter code media range mediarange code quality factor code code illegal argument exception illegalargumentexception code exp code parsed valid media range null pointer exception nullpointerexception code exp code code code media range mediarange string exp string parts exp split set type settype parts trim parts length parameters hash map hashmap string string parts length parts length partslength parts length parts length partslength string parameter parts string key value keyvalue parameter split key value keyvalue equals parse double parsedouble key value keyvalue illegal argument exception illegalargumentexception quality factor bounds exp parameters key value keyvalue key value keyvalue constructs code media range mediarange code code supertype code code subtype code quality factor code code param supertype type media range param subtype type media range media range mediarange string supertype string subtype set type settype supertype subtype returns code code media range code code code code range media range code code matches all matchesall supertype equals wildcard subtype equals wildcard set type settype string supertype string subtype supertype supertype wildcard supertype subtype subtype wildcard subtype supertype equals wildcard subtype equals wildcard illegal argument exception illegalargumentexception supertype wildcard subtype set type settype string type def typedef string parts type def typedef split string super type supertype parts string sub type subtype wildcard parts length sub type subtype parts set type settype super type supertype sub type subtype media range mediarange string supertype string subtype supertype subtype string get parameter getparameter string key parameters parameters key string get supertype getsupertype supertype string get subtype getsubtype subtype quality factor parameter code code quality factor get q getq map string string get parameters getparameters parameters parameters hash map hashmap string string comparable implementation compare to compareto media range mediarange diff get q getq diff compare parameters param diff paramdiff get parameters getparameters size get parameters getparameters size param diff paramdiff param diff paramdiff compare wildcards supertype equals wildcard get supertype getsupertype equals wildcard supertype equals wildcard get supertype getsupertype equals wildcard subtype equals wildcard get subtype getsubtype equals wildcard subtype equals wildcard get subtype getsubtype equals wildcard compare names to string tostring compare to compareto to string tostring diff override equals object obj obj media range mediarange media range mediarange media range mediarange obj get supertype getsupertype equals supertype get subtype getsubtype equals subtype equals obj equals string supertype subtype equals override string to string tostring string builder stringbuilder buf string builder stringbuilder supertype buf append buf append subtype parameters string delimiter string key parameters key set keyset buf append delimiter buf append key append append parameters key buf to string tostring