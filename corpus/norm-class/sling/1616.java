licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling mailarchiveserver impl java util array list arraylist java util hash map hashmap java util hash set hashset java util list java util map java util org apache felix scr annotations component org apache felix scr annotations service org apache sling mailarchiveserver api search query parser searchqueryparser component service search query parser searchqueryparser search query parser impl searchqueryparserimpl search query parser searchqueryparser string space substitution override map string list string parse string phrase map string list string res hash map hashmap string list string phrase phrase trim phrase phrase parse quotes parsequotes phrase string lex emes lexemes phrase split string lexeme lex emes lexemes string token lexeme split token length insert token into map inserttokenintomap post process quoted phrase postprocessquotedphrase token trim search parameter searchparameter res token length string search param searchparam get search parameter getsearchparameter token search param searchparam insert token into map inserttokenintomap post process quoted phrase postprocessquotedphrase token trim search param searchparam res res string post process quoted phrase postprocessquotedphrase string phrase phrase replace space substitution string parse quotes parsequotes string phrase string quotes phrase split quotes length quotes quotes replace space substitution string res string quotes res res string get search parameter getsearchparameter string trim to lower case tolowercase search parameteres insert token into map inserttokenintomap string token string tokenstring string token class tokenclass map string list string map list string map token class tokenclass array list arraylist string add token string tokenstring map token class tokenclass string search parameteres hash set hashset string string message fields hash set hashset string map string string search parameter message field map hash map hashmap string string search parameteres add search parameter searchparameter search parameteres add search parameter searchparameter subj search parameteres add search parameter searchparameter list message fields add search able message field searchablemessagefield message fields add search able message field searchablemessagefield subj message fields add search able message field searchablemessagefield list message fields add search able message field searchablemessagefield body search parameter message field map search parameter searchparameter search able message field searchablemessagefield search parameter message field map search parameter searchparameter subj search able message field searchablemessagefield subj search parameter message field map search parameter searchparameter list search able message field searchablemessagefield list search parameter searchparameter search parameteres string string string subj subject string list list search able message field searchablemessagefield string string subj subject string list list string body body string string string