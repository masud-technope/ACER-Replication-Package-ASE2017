licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling resource resolver resourceresolver impl org junit assert equals assertequals java util arrays java util iterator javax annotation check for null checkfornull javax annotation nonnull javax jcr repository exception repositoryexception javax jcr session org apache commons collections iterator utils iteratorutils org apache sling api resource login exception loginexception org apache sling api resource resource org apache sling resource resolver resourceresolver impl providers resource provider storage resourceproviderstorage org apache sling spi resource provider resolver context resolvercontext org apache sling spi resource provider resource context resourcecontext org apache sling spi resource provider resource provider resourceprovider org junit org junit test org mockito mock org mockito mockito org mockito mockito annotations mockitoannotations test resource resolver impl resourceresolverimpl mangle names paces manglenamespaces methods resource resolver mangle names paces test resourceresolvermanglenamespacestest resource resolver impl resourceresolverimpl mock session mocked session mockedsession session active session activesession string prefix testns string url http names paces namespaces testns setup repository exception repositoryexception login exception loginexception mockito annotations mockitoannotations init mocks initmocks active session activesession mocked session mockedsession setup resource resolver impl resourceresolverimpl namespace mangling unmangling resource resolver factory activator resourceresolverfactoryactivator resource resolver factory activator resourceresolverfactoryactivator override is mangle name space prefixes ismanglenamespaceprefixes mockito mocked session mockedsession get name space prefix getnamespaceprefix prefix then return thenreturn url resource provider resourceprovider resource provider resourceprovider object suppress warnings suppresswarnings unchecked override check for null checkfornull adapter type adaptertype adapter type adaptertype adapt to adaptto nonnull resolver context resolvercontext object ctx nonnull adapter type adaptertype type type equals session adapter type adaptertype active session activesession override resource get resource getresource resolver context resolvercontext object ctx string path resource context resourcecontext r ctx rctx resource parent suppress warnings suppresswarnings unchecked override iterator resource list children listchildren resolver context resolvercontext object ctx resource parent iterator utils iteratorutils empty iterator emptyiterator common resource resolver factory impl commonresourceresolverfactoryimpl fac common resource resolver factory impl commonresourceresolverfactoryimpl resource resolver impl resourceresolverimpl fac resource provider storage resourceproviderstorage arrays as list aslist mocked resource resolver impl test mockedresourceresolverimpltest createrphandler test test url with path testurlwithpath assert equals assertequals http path map http path test test mangle http testmanglehttp assert equals assertequals http path colon map http path colon test test unmangle http testunmanglehttp resource resolve http path mangling assert equals assertequals http path mangling get path getpath test test unmangle no session testunmanglenosession active session activesession resource resolve http path mangling assert equals assertequals http path mangling get path getpath test test mangle path testmanglepath assert equals assertequals path colon map path colon test test unmangle path testunmanglepath resource resolve path mangling assert equals assertequals path mangling get path getpath test test url no path testurlnopath assert equals assertequals http with slash withslash map http with slash withslash assert equals assertequals http no slash noslash map http no slash noslash assert equals assertequals http nosuffix map http nosuffix test test weird cases testweirdcases assert equals assertequals http foo map http foo assert equals assertequals http map http assert equals assertequals http map http assert equals assertequals http map http assert equals assertequals http map http assert equals assertequals gopher foo map gopher foo assert equals assertequals gopher map gopher assert equals assertequals gopher map gopher assert equals assertequals gopher map gopher assert equals assertequals gopher map gopher