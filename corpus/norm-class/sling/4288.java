licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution queue impl java util iterator org apache sling distribution serialization distribution package distributionpackage org apache sling distribution queue distribution queue distributionqueue org apache sling distribution queue distribution queue entry distributionqueueentry org apache sling distribution queue distribution queue item distributionqueueitem org apache sling distribution queue distribution queue item status distributionqueueitemstatus org apache sling distribution queue distribution queue provider distributionqueueprovider org junit test org junit assert not null assertnotnull org junit assert true asserttrue org mockito matchers org mockito mockito mock org mockito mockito test case testcase link single queue dispatching strategy singlequeuedispatchingstrategy single queue distribution strategy test singlequeuedistributionstrategytest test test package add ition with succeeding item delivery testpackageadditionwithsucceedingitemdelivery exception single queue dispatching strategy singlequeuedispatchingstrategy single queue distribution strategy singlequeuedistributionstrategy single queue dispatching strategy singlequeuedispatchingstrategy distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue distributionqueue queue mock distribution queue distributionqueue queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn queue queue add distribution queue item distributionqueueitem then return thenreturn distribution queue item status distributionqueueitemstatus mock distribution queue item status distributionqueueitemstatus queue get item getitem string then return thenreturn distribution queue entry distributionqueueentry iterable distribution queue item status distributionqueueitemstatus returned states returnedstates single queue distribution strategy singlequeuedistributionstrategy add distribution package distributionpackage queue provider queueprovider assert not null assertnotnull returned states returnedstates iterator distribution queue item status distributionqueueitemstatus iterator returned states returnedstates iterator assert not null assertnotnull iterator assert true asserttrue iterator has next hasnext assert not null assertnotnull iterator test test package add ition with failing item delivery testpackageadditionwithfailingitemdelivery exception single queue dispatching strategy singlequeuedispatchingstrategy single queue distribution strategy singlequeuedistributionstrategy single queue dispatching strategy singlequeuedispatchingstrategy distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue distributionqueue queue mock distribution queue distributionqueue distribution queue item distributionqueueitem queue item queueitem mock distribution queue item distributionqueueitem queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn queue queue add queue item queueitem then return thenreturn distribution queue item status distributionqueueitemstatus mock distribution queue item status distributionqueueitemstatus queue get item getitem string then return thenreturn distribution queue entry distributionqueueentry queue item queueitem iterable distribution queue item status distributionqueueitemstatus returned states returnedstates single queue distribution strategy singlequeuedistributionstrategy add distribution package distributionpackage queue provider queueprovider assert not null assertnotnull returned states returnedstates iterator distribution queue item status distributionqueueitemstatus iterator returned states returnedstates iterator assert not null assertnotnull iterator assert true asserttrue iterator has next hasnext assert not null assertnotnull iterator test test package add ition with not null item state from the queue testpackageadditionwithnotnullitemstatefromthequeue exception single queue dispatching strategy singlequeuedispatchingstrategy single queue distribution strategy singlequeuedistributionstrategy single queue dispatching strategy singlequeuedispatchingstrategy distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue distributionqueue queue mock distribution queue distributionqueue queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn queue queue add distribution queue item distributionqueueitem then return thenreturn distribution queue item status distributionqueueitemstatus mock distribution queue item status distributionqueueitemstatus queue get item getitem string then return thenreturn distribution queue entry distributionqueueentry iterable distribution queue item status distributionqueueitemstatus returned states returnedstates single queue distribution strategy singlequeuedistributionstrategy add distribution package distributionpackage queue provider queueprovider assert not null assertnotnull returned states returnedstates iterator distribution queue item status distributionqueueitemstatus iterator returned states returnedstates iterator assert not null assertnotnull iterator assert true asserttrue iterator has next hasnext assert not null assertnotnull iterator