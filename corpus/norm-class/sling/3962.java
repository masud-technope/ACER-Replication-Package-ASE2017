licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery impl java i o exception ioexception java print writer printwriter java text simple date format simpledateformat java util calendar java util collection java util collections java util hash set hashset java util iterator java util linked list linkedlist java util list java util map java util map entry java util java util string tokenizer stringtokenizer javax servlet servlet javax servlet servlet exception servletexception javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations service org apache felix webconsole abstract web console plugin abstractwebconsoleplugin org apache felix webconsole web console constants webconsoleconstants org apache sling discovery cluster view clusterview org apache sling discovery instance description instancedescription org apache sling discovery instance filter instancefilter org apache sling discovery topology event topologyevent org apache sling discovery topology event topologyevent type org apache sling discovery topology event listener topologyeventlistener org apache sling discovery topology view topologyview org apache sling discovery base commons cluster view service clusterviewservice org apache sling discovery base connectors announcement announcement org apache sling discovery base connectors announcement announcement registry announcementregistry org apache sling discovery base connectors announcement cached announcement cachedannouncement org apache sling discovery base connectors ping connector registry connectorregistry org apache sling discovery base connectors ping topology connector client information topologyconnectorclientinformation org apache sling discovery commons providers spi base cluster sync history clustersynchistory org apache sling discovery commons providers spi base sync token service synctokenservice org osgi framework bundle context bundlecontext org slf logger org slf logger factory loggerfactory simple webconsole overview topology visible discovery service component service topology event listener topologyeventlistener servlet properties property org osgi framework constants service description apache sling web console plugin display background servlets execution engine executionengine status property web console constants webconsoleconstants plugin label topology web console plugin topologywebconsoleplugin label property web console constants webconsoleconstants plugin title topology web console plugin topologywebconsoleplugin title property felix webconsole category sling property felix webconsole config printer configprinter modes zip suppress warnings suppresswarnings serial topology web console plugin topologywebconsoleplugin abstract web console plugin abstractwebconsoleplugin topology event listener topologyeventlistener string label topology string title topology management logger logger logger factory loggerfactory get logger getlogger get class getclass truncated log topology events filtered property change types webconsole list string property change log propertychangelog linked list linkedlist string truncated log topology events webconsole list string topology log topologylog linked list linkedlist string format truncated log topology events simple date format simpledateformat sdf simple date format simpledateformat yyyy reference cluster view service clusterviewservice cluster view service clusterviewservice reference announcement registry announcementregistry announcement registry announcementregistry reference connector registry connectorregistry connector registry connectorregistry reference sync token service synctokenservice sync token service synctokenservice reference config config topology view topologyview current view currentview override string get label getlabel label override string get title gettitle title activate override activate bundle context bundlecontext bundle context bundlecontext activate bundle context bundlecontext deactivate override deactivate deactivate override render content rendercontent http servlet request httpservletrequest req http servlet response httpservletresponse res servlet exception servletexception i o exception ioexception object raw root rawroot req get attribute getattribute web console constants webconsoleconstants attr plugin root raw root rawroot string servlet exception servletexception illegal attr web console constants webconsoleconstants attr plugin root string root raw root rawroot to string tostring string path info pathinfo req getrequesturi substring root length print writer printwriter res get writer getwriter path info pathinfo equals current view currentview render overview renderoverview current view currentview string tokenizer stringtokenizer string tokenizer stringtokenizer path info pathinfo string node id nodeid next token nexttoken render properties renderproperties req get context path getcontextpath node id nodeid render properties instance render properties renderproperties print writer printwriter string context path contextpath string node id nodeid logger is debug enabled isdebugenabled logger debug render properties renderproperties node id nodeid node id nodeid topology view topologyview current view currentview suppress warnings suppresswarnings unchecked instance description instancedescription instances instance description instancedescription collections empty find instances findinstances instance filter instancefilter accept instance description instancedescription instance string sling id slingid instance get sling id getslingid logger is debug enabled isdebugenabled logger debug render properties renderproperties picks sling id slingid sling id slingid sling id slingid equals node id nodeid instances instances size instance description instancedescription instance instances iterator println properties instance get sling id getslingid println table adapters nicetable widget table sorter tablesorter println the ad thead println println header widget header key println header widget header println println the ad thead println tbody odd iterator entry string string instance get properties getproperties entry set entryset iterator has next hasnext entry string string entry string odd even oddeven odd odd odd odd println odd even oddeven println entry get key getkey println entry get value getvalue println println tbody println table render overview entire topology render overview renderoverview print writer printwriter topology view topologyview topology println statline highlight configuration println print href app root approot config mgr configmgr org apache sling discovery impl config configure discovery service println println string changing topology is current iscurrent changing changing view longer current changing println statline highlight topology changing println div widget header corner top button group buttongroup style height println span style left margin left instances topology span println div println table adapters nicetable widget table sorter tablesorter println the ad thead println println header widget header sling click properties println header widget header cluster view clusterview println header widget header local instance println header widget header leader instance println header widget header local cluster println header widget header anno unced announced instance println println the ad thead println tbody cluster view clusterview clusters topology get cluster views getclusterviews cluster view clusterview my cluster mycluster topology get local instance getlocalinstance get cluster view getclusterview odd render cluster rendercluster my cluster mycluster my cluster mycluster odd topology is current iscurrent iterator cluster view clusterview clusters iterator has next hasnext cluster view clusterview cluster view clusterview cluster view clusterview equals my cluster mycluster skip rendered odd odd render cluster rendercluster cluster view clusterview my cluster mycluster odd topology is current iscurrent println tbody println table println println println statline highlight connectors list incoming topology connectors listincomingtopologyconnectors list outgoing topology connectors listoutgoingtopologyconnectors println println statline highlight topology change history println pre iterator string topology log topologylog iterator has next hasnext string a log entry alogentry println a log entry alogentry println pre println println statline highlight property change history println pre iterator string property change log propertychangelog iterator has next hasnext string a log entry alogentry println a log entry alogentry println pre println println statline highlight sync token service synctokenservice history println pre config use sync token service usesynctokenservice println disabled use sync token service usesynctokenservice flag sync token service synctokenservice println sync token service synctokenservice cluster sync history clustersynchistory cluster sync history clustersynchistory sync token service synctokenservice get cluster sync history getclustersynchistory cluster sync history clustersynchistory println history string sync history entry synchistoryentry cluster sync history clustersynchistory get sync history getsynchistory println sync history entry synchistoryentry println pre println render cluster table rows render cluster rendercluster print writer printwriter cluster view clusterview render cluster rendercluster cluster view clusterview local cluster localcluster odd current collection announcement announcements announcement registry announcementregistry list announcements in same cluster listannouncementsinsamecluster local cluster localcluster iterator instance description instancedescription render cluster rendercluster get instances getinstances iterator has next hasnext instance description instancedescription instance description instancedescription in local cluster inlocalcluster render cluster rendercluster local cluster localcluster announcement parent announcement parentannouncement iterator announcement announcements iterator has next hasnext announcement announcement iterator instance description instancedescription announcement list instances listinstances iterator has next hasnext instance description instancedescription anno unced instance announcedinstance anno unced instance announcedinstance get sling id getslingid equals instance description instancedescription get sling id getslingid parent announcement parentannouncement announcement string odd even oddeven odd odd current in local cluster inlocalcluster parent announcement parentannouncement println odd even oddeven println odd even oddeven error is local islocal instance description instancedescription is local islocal string sling id slingid instance description instancedescription get sling id getslingid print is local islocal print print href print get label getlabel print print sling id slingid print print sling id slingid print is local islocal print println println instance description instancedescription get cluster view getclusterview instance description instancedescription get cluster view getclusterview get id getid println is local islocal println instance description instancedescription is leader isleader in local cluster inlocalcluster println local println println remote parent announcement parentannouncement println parent announcement parentannouncement get owner id getownerid println changing println render out going outgoing topology connectors including header div table list outgoing topology connectors listoutgoingtopologyconnectors print writer printwriter odd println div widget header corner top button group buttongroup style height println span style left margin left outgoing topology connectors span println div println table adapters nicetable widget table sorter tablesorter println the ad thead println println header widget header connector url println header widget header connected sling id slingid println header widget header connector status println header widget header heartbeat nbsp println header widget header heartbeat nbsp println header widget header request encoding nbsp println header widget header response encoding nbsp println header widget header fallback connector urls println println the ad thead println tbody collection topology connector client information topologyconnectorclientinformation out going connections outgoingconnections connector registry connectorregistry list outgoing connectors listoutgoingconnectors iterator topology connector client information topologyconnectorclientinformation out going connections outgoingconnections iterator has next hasnext topology connector client information topologyconnectorclientinformation topology connector client topologyconnectorclient string odd even oddeven odd odd odd odd string remote sling id remoteslingid topology connector client topologyconnectorclient get remote sling id getremoteslingid is connected isconnected topology connector client topologyconnectorclient is connected isconnected remote sling id remoteslingid auto stopped autostopped topology connector client topologyconnectorclient is auto stopped isautostopped represents loop representsloop topology connector client topologyconnectorclient represents loop representsloop is connected isconnected auto stopped autostopped represents loop representsloop println odd even oddeven println odd even oddeven error println topology connector client topologyconnectorclient get connector url getconnectorurl to string tostring auto stopped autostopped println auto stopped println auto stopped local loop is connected isconnected represents loop representsloop println remote sling id remoteslingid println represents loop representsloop println remote sling id remoteslingid println unused loop duplicate standby status code statuscode topology connector client topologyconnectorclient get status code getstatuscode string status details statusdetails topology connector client topologyconnectorclient get status details getstatusdetails string tooltip text tooltiptext status code statuscode http servlet response httpservletresponse unauthorized tooltip text tooltiptext http servlet response httpservletresponse unauthorized setup issue discovery impl target instance wrong url http servlet response httpservletresponse tooltip text tooltiptext http servlet response httpservletresponse white list rejection target instance tooltip text tooltiptext check error log connection ref used refused tooltip text tooltiptext string tooltip tooltip text tooltiptext title tooltip text tooltiptext println connected println tooltip http status code status code statuscode status details statusdetails println beautified time diff beautifiedtimediff topology connector client topologyconnectorclient get last ping sent getlastpingsent println beautified due time beautifiedduetime topology connector client topologyconnectorclient get next ping due getnextpingdue println topology connector client topologyconnectorclient get last request encoding getlastrequestencoding println topology connector client topologyconnectorclient get last response encoding getlastresponseencoding todo fallback urls implemented string fallback connector urls fallbackconnectorurls list string urls topology connector client topologyconnectorclient list fallback connector urls listfallbackconnectorurls urls urls size fallback connector urls fallbackconnectorurls fallback connector urls fallbackconnectorurls iterator string urls iterator has next hasnext string a fallback connector url afallbackconnectorurl fallback connector urls fallbackconnectorurls fallback connector urls fallbackconnectorurls a fallback connector url afallbackconnectorurl println fallback connector urls fallbackconnectorurls println tbody println table string beautified due time beautifiedduetime seconds due secondsdue seconds due secondsdue over due overdue seconds due secondsdue is h ish seconds due secondsdue mins due minsdue seconds due secondsdue mins due minsdue seconds due secondsdue seconds mins due minsdue min utes minutes string beautified time diff beautifiedtimediff heartbeat time heartbeattime diff system current time millis currenttimemillis heartbeat time heartbeattime seconds diff heartbeat time heartbeattime seconds diff millis seconds seconds print seconds seconds seconds print seconds seconds minute render incoming topology connectors including header div table list incoming topology connectors listincomingtopologyconnectors print writer printwriter odd println div widget header corner top button group buttongroup style height println span style left margin left incoming topology connectors span println div println table adapters nicetable widget table sorter tablesorter println the ad thead println println header widget header owner sling id slingid println header widget header server info println header widget header heartbeat println header widget header timeout println println the ad thead println tbody collection cached announcement cachedannouncement incoming connections incomingconnections announcement registry announcementregistry list local incoming announcements listlocalincomingannouncements iterator cached announcement cachedannouncement incoming connections incomingconnections iterator has next hasnext cached announcement cachedannouncement incoming cached announcement incomingcachedannouncement announcement incoming announcement incomingannouncement incoming cached announcement incomingcachedannouncement get announcement getannouncement string odd even oddeven odd odd odd odd println odd even oddeven println incoming announcement incomingannouncement get owner id getownerid incoming announcement incomingannouncement get server info getserverinfo println incoming announcement incomingannouncement get server info getserverinfo println println beautified time diff beautifiedtimediff incoming cached announcement incomingcachedannouncement get last ping getlastping println beautified due time beautifiedduetime incoming cached announcement incomingcachedannouncement get seconds until timeout getsecondsuntiltimeout println println tbody println table println println truncated history log events purpose webconsole handle topology event handletopologyevent topology event topologyevent event event get type gettype type properties changed current view currentview event get new view getnewview instance description instancedescription new instances newinstances event get new view getnewview get instances getinstances string builder stringbuilder string builder stringbuilder iterator instance description instancedescription new instances newinstances iterator has next hasnext instance description instancedescription new instance description newinstancedescription instance description instancedescription old instance description oldinstancedescription find instance findinstance event get old view getoldview new instance description newinstancedescription get sling id getslingid old instance description oldinstancedescription logger error handle topology event handletopologyevent property changed find instance new instance description newinstancedescription old view oldview event event add event log addeventlog event get type gettype event get type gettype to string tostring map string string old props oldprops old instance description oldinstancedescription get properties getproperties map string string new props newprops new instance description newinstancedescription get properties getproperties string builder stringbuilder diff diff old props oldprops new props newprops diff length length append append instance new instance description newinstancedescription get sling id getslingid new instance description newinstancedescription is leader isleader is leader isleader diff add event log addeventlog event get type gettype to string tostring event get type gettype type topology init current view currentview event get new view getnewview string builder stringbuilder details string builder stringbuilder iterator instance description instancedescription event get new view getnewview get instances getinstances iterator has next hasnext instance description instancedescription new instance newinstance details length details append details append new instance newinstance get sling id getslingid new instance newinstance is leader isleader details append is leader isleader add event log addeventlog event get type gettype view short view info shortviewinfo event get new view getnewview details event get type gettype type topology changing current view currentview event get old view getoldview add event log addeventlog event get type gettype view short view info shortviewinfo event get old view getoldview current view currentview event get new view getnewview event get old view getoldview add event log addeventlog event get type gettype view short view info shortviewinfo event get new view getnewview string builder stringbuilder details string builder stringbuilder iterator instance description instancedescription event get new view getnewview get instances getinstances iterator has next hasnext instance description instancedescription new instance newinstance find instance findinstance event get old view getoldview new instance newinstance get sling id getslingid details length details append details append new instance newinstance get sling id getslingid joined iterator instance description instancedescription event get old view getoldview get instances getinstances iterator has next hasnext instance description instancedescription old instance oldinstance find instance findinstance event get new view getnewview old instance oldinstance get sling id getslingid details length details append details append old instance oldinstance get sling id getslingid left instance description instancedescription event get new view getnewview get local instance getlocalinstance cluster view clusterview cluster view clusterview get cluster view getclusterview cluster view clusterview instance description instancedescription leader cluster view clusterview get leader getleader leader details length details append details append is leader isleader leader get sling id getslingid add event log addeventlog event get type gettype view short view info shortviewinfo event get old view getoldview view short view info shortviewinfo event get new view getnewview details find instance topology instance description instancedescription find instance findinstance topology view topologyview view string sling id slingid instance description instancedescription found instances foundinstances view find instances findinstances instance filter instancefilter accept instance description instancedescription instance instance get sling id getslingid equals sling id slingid found instances foundinstances size found instances foundinstances iterator add log entry truncate log entries add event log addeventlog type type string info string date str datestr sdf format calendar get instance getinstance get time gettime string log entry logentry date str datestr type info type type properties changed property change log propertychangelog add log entry logentry property change log propertychangelog size property change log propertychangelog remove topology log topologylog add log entry logentry topology log topologylog size topology log topologylog remove compile string topology including number clusters instances string short view info shortviewinfo topology view topologyview view clusters view get cluster views getclusterviews size instances view get instances getinstances size clusters cluster clusters clusters instances instance instances instances calculate difference sets properties string builder stringbuilder diff map string string old props oldprops map string string new props newprops string old keys oldkeys hash set hashset string old props oldprops key set keyset string new keys newkeys hash set hashset string new props newprops key set keyset string builder stringbuilder string builder stringbuilder iterator string old keys oldkeys iterator has next hasnext string old key oldkey new keys newkeys old key oldkey old props oldprops old key oldkey equals new props newprops old key oldkey per fect perfect append old key oldkey changed old props oldprops old key oldkey new props newprops old key oldkey new keys newkeys remove old key oldkey append old key oldkey removed remove iterator string new keys newkeys iterator has next hasnext string new key newkey append new key newkey print configuration printconfiguration print writer printwriter topology view topologyview topology current view currentview println title println println topology println topology print topology topology is current iscurrent print changing view longer current println println cluster view clusterview clusters topology get cluster views getclusterviews cluster view clusterview my cluster mycluster topology get local instance getlocalinstance get cluster view getclusterview print cluster printcluster my cluster mycluster my cluster mycluster iterator cluster view clusterview clusters iterator has next hasnext cluster view clusterview cluster view clusterview cluster view clusterview equals my cluster mycluster skip rendered print cluster printcluster cluster view clusterview my cluster mycluster println println collection cached announcement cachedannouncement incoming connections incomingconnections announcement registry announcementregistry list local incoming announcements listlocalincomingannouncements incoming connections incomingconnections size println incoming topology connectors println cached announcement cachedannouncement incoming cached announcement incomingcachedannouncement incoming connections incomingconnections announcement incoming announcement incomingannouncement incoming cached announcement incomingcachedannouncement get announcement getannouncement print owner sling print incoming announcement incomingannouncement get owner id getownerid println incoming announcement incomingannouncement get server info getserverinfo print server info print incoming announcement incomingannouncement get server info getserverinfo println println heartbeat received beautified time diff beautifiedtimediff incoming cached announcement incomingcachedannouncement get last ping getlastping println timeout beautified due time beautifiedduetime incoming cached announcement incomingcachedannouncement get seconds until timeout getsecondsuntiltimeout println println println collection topology connector client information topologyconnectorclientinformation out going connections outgoingconnections connector registry connectorregistry list outgoing connectors listoutgoingconnectors out going connections outgoingconnections size println outgoing topology connectors println topology connector client information topologyconnectorclientinformation topology connector client topologyconnectorclient out going connections outgoingconnections string remote sling id remoteslingid topology connector client topologyconnectorclient get remote sling id getremoteslingid auto stopped autostopped topology connector client topologyconnectorclient is auto stopped isautostopped is connected isconnected topology connector client topologyconnectorclient is connected isconnected remote sling id remoteslingid print connector url print topology connector client topologyconnectorclient get connector url getconnectorurl println auto stopped autostopped println conn cted conncted sling auto stopped println connector status auto stopped local loop is connected isconnected topology connector client topologyconnectorclient represents loop representsloop print connected sling println remote sling id remoteslingid println connector status topology connector client topologyconnectorclient represents loop representsloop print connected sling println remote sling id remoteslingid println connector status unused loop duplicate standby status code statuscode topology connector client topologyconnectorclient get status code getstatuscode string status details statusdetails topology connector client topologyconnectorclient get status details getstatusdetails string tooltip text tooltiptext status code statuscode http servlet response httpservletresponse unauthorized tooltip text tooltiptext http servlet response httpservletresponse unauthorized setup issue discovery impl target instance wrong url http servlet response httpservletresponse tooltip text tooltiptext http servlet response httpservletresponse white list rejection target instance tooltip text tooltiptext check error log connection ref used refused tooltip text tooltiptext println connected sling connected print connector status tooltip text tooltiptext print print tooltip text tooltiptext print print http status code statuscode status code statuscode status details statusdetails println println heartbeat beautified time diff beautifiedtimediff topology connector client topologyconnectorclient get last ping sent getlastpingsent println heartbeat beautified due time beautifiedduetime topology connector client topologyconnectorclient get next ping due getnextpingdue println println println topology log topologylog size println topology change history println string a log entry alogentry topology log topologylog println a log entry alogentry println println property change log propertychangelog size println property change history println string a log entry alogentry property change log propertychangelog println a log entry alogentry println println sync token service synctokenservice history println config use sync token service usesynctokenservice println disabled use sync token service usesynctokenservice flag sync token service synctokenservice println sync token service synctokenservice cluster sync history clustersynchistory cluster sync history clustersynchistory sync token service synctokenservice get cluster sync history getclustersynchistory cluster sync history clustersynchistory println history string sync history entry synchistoryentry cluster sync history clustersynchistory get sync history getsynchistory println sync history entry synchistoryentry println println render cluster print cluster printcluster print writer printwriter cluster view clusterview render cluster rendercluster cluster view clusterview local cluster localcluster collection announcement announcements announcement registry announcementregistry list announcements in same cluster listannouncementsinsamecluster local cluster localcluster instance description instancedescription instance description instancedescription render cluster rendercluster get instances getinstances in local cluster inlocalcluster render cluster rendercluster local cluster localcluster announcement parent announcement parentannouncement iterator announcement announcements iterator has next hasnext announcement announcement iterator instance description instancedescription announcement list instances listinstances iterator has next hasnext instance description instancedescription anno unced instance announcedinstance anno unced instance announcedinstance get sling id getslingid equals instance description instancedescription get sling id getslingid parent announcement parentannouncement announcement is local islocal instance description instancedescription is local islocal string sling id slingid instance description instancedescription get sling id getslingid print sling print sling id slingid println print cluster view print instance description instancedescription get cluster view getclusterview instance description instancedescription get cluster view getclusterview get id getid println print local instance print is local islocal println print leader instance print instance description instancedescription is leader isleader println print local cluster in local cluster inlocalcluster print local print remote println print anno unced announced in local cluster inlocalcluster print parent announcement parentannouncement print parent announcement parentannouncement get owner id getownerid print changing println println properties map entry string string entry instance description instancedescription get properties getproperties entry set entryset print print entry get key getkey print print entry get value getvalue println println println