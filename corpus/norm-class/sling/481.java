licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling nosql resource impl org junit assert array equals assertarrayequals org junit assert equals assertequals org junit assert not null assertnotnull org junit assert true asserttrue java byte array input stream bytearrayinputstream java io exception ioexception java input stream inputstream java util calendar java util java util hash map hashmap java util list java util map org apache commons io utils ioutils org apache jackrabbit jcr constants jcrconstants org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource util resourceutil org apache sling api resource value map valuemap org apache sling testing mock sling resource resolver type resourceresolvertype org apache sling testing mock sling junit sling context slingcontext org junit org junit org junit rule org junit test google common collect immutable list immutablelist google common collect immutable map immutablemap test basic resource resolver resourceresolver value map valuemap data types abstract no sql resource provider test abstractnosqlresourceprovidertest string string string string array string integer calendar calendar calendar get instance getinstance binary rule sling context slingcontext context sling context slingcontext resource resolver type resourceresolvertype jcr mock register resource provider factory registerresourceproviderfactory resource test root testroot set up setup exception register resource provider factory registerresourceproviderfactory prepare test data sling crud api resource root node rootnode test root testroot map string object props hash map hashmap string object props jcr constants jcrconstants jcr primarytype jcr constants jcrconstants unstructured props string prop stringprop string props string array prop stringarrayprop string array props int eger prop integerprop integer props double prop doubleprop props boolean prop booleanprop props date prop dateprop props calendar prop calendarprop calendar props binary prop binaryprop byte array input stream bytearrayinputstream binary resource node context resource resolver resourceresolver create root node rootnode node props context resource resolver resourceresolver create node node immutable map immutablemap string object builder string prop stringprop string build context resource resolver resourceresolver create node node value map valuemap empty context resource resolver resourceresolver commit tear down teardown context resource resolver resourceresolver revert context resource resolver resourceresolver delete test root testroot context resource resolver resourceresolver commit persistence exception persistenceexception test test simple properties testsimpleproperties io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node assert true asserttrue resource no sql resource nosqlresource assert not null assertnotnull resource assert equals assertequals node resource get name getname value map valuemap props resource util resourceutil get value map getvaluemap resource assert equals assertequals string props string prop stringprop string assert array equals assertarrayequals string array props string array prop stringarrayprop string assert equals assertequals integer integer props int eger prop integerprop integer assert equals assertequals props double prop doubleprop assert equals assertequals props boolean prop booleanprop test test simple properties testsimpleproperties deep path access deeppathaccess io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath assert not null assertnotnull resource assert equals assertequals test root testroot get name getname resource get name getname value map valuemap props resource util resourceutil get value map getvaluemap resource assert equals assertequals string props node string prop stringprop string assert array equals assertarrayequals string array props node string array prop stringarrayprop string assert equals assertequals integer integer props node int eger prop integerprop integer assert equals assertequals props node double prop doubleprop assert equals assertequals props node boolean prop booleanprop assert equals assertequals string props node node string prop stringprop string test test date property testdateproperty io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node value map valuemap props resource util resourceutil get value map getvaluemap resource assert equals assertequals props date prop dateprop test test date property to calendar testdatepropertytocalendar io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node value map valuemap props resource util resourceutil get value map getvaluemap resource calendar calendar value calendarvalue props date prop dateprop calendar assert not null assertnotnull calendar value calendarvalue assert equals assertequals calendar value calendarvalue get time gettime test test calendar property testcalendarproperty io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node value map valuemap props resource util resourceutil get value map getvaluemap resource assert equals assertequals calendar get time gettime props calendar prop calendarprop calendar get time gettime test test calendar property to date testcalendarpropertytodate io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node value map valuemap props resource util resourceutil get value map getvaluemap resource date value datevalue props calendar prop calendarprop assert not null assertnotnull date value datevalue assert equals assertequals calendar get time gettime date value datevalue test test list children testlistchildren io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node list resource children immutable list immutablelist copy of copyof resource list children listchildren assert equals assertequals children size assert equals assertequals node children get name getname assert equals assertequals node children get name getname test test binary data testbinarydata io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node input stream inputstream resource util resourceutil get value map getvaluemap resource binary prop binaryprop input stream inputstream data from resource datafromresource io utils ioutils to byte array tobytearray close assert array equals assertarrayequals binary data from resource datafromresource test test value map types testvaluemaptypes io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node ensure map supported primitive types supported types converted string value map valuemap value map valuemap resource get value map getvaluemap map entry string object entry value map valuemap entry set entryset assert true asserttrue no sql value map nosqlvaluemap is valid type isvalidtype entry get value getvalue get class getclass test test primary type resource type testprimarytyperesourcetype persistence exception persistenceexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath assert equals assertequals jcr constants jcrconstants unstructured resource get resource type getresourcetype test test create with null map testcreatewithnullmap io exception ioexception resource resource context resource resolver resourceresolver get resource getresource test root testroot get path getpath node context resource resolver resourceresolver create resource null map nullmap