licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution servlet javax servlet servlet exception servletexception java io exception ioexception org apache felix scr annotations sling sling servlet slingservlet org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api resource resource resolver resourceresolver org apache sling api servlets sling all methods servlet slingallmethodsservlet org apache sling distribution distribution request distributionrequest org apache sling distribution distribution response distributionresponse org apache sling distribution agent distribution agent distributionagent org apache sling distribution resources distribution resource types distributionresourcetypes org apache sling distribution util request utils requestutils org slf logger org slf logger factory loggerfactory servlet link org apache sling distribution agent distribution agent distributionagent distribute http post sling servlet slingservlet resource types resourcetypes distribution resource types distributionresourcetypes agent resource type methods post distribution agent servlet distributionagentservlet sling all methods servlet slingallmethodsservlet logger log logger factory loggerfactory get logger getlogger get class getclass override do post dopost sling http servlet request slinghttpservletrequest request sling http servlet response slinghttpservletresponse response servlet exception servletexception io exception ioexception response set content type setcontenttype application json distribution request distributionrequest distribution request distributionrequest request utils requestutils from servlet request fromservletrequest request log debug distribution request distribution request distributionrequest distribution agent distributionagent agent request get resource getresource adapt to adaptto distribution agent distributionagent resource resolver resourceresolver resource resolver resourceresolver request get resource resolver getresourceresolver agent distribution response distributionresponse distribution response distributionresponse agent execute resource resolver resourceresolver distribution request distributionrequest servlet json utils servletjsonutils write json writejson response distribution response distributionresponse log debug distribution response distribution response distributionresponse throwable log error unexpected error occurred servlet json utils servletjsonutils write json writejson response unexpected error occurred servlet json utils servletjsonutils write json writejson response agent