licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution agent impl javax annotation nonnull javax jcr repository exception repositoryexception javax jcr session javax jcr security access control manager accesscontrolmanager javax jcr security privilege org apache jackrabbit util text org apache sling api resource resource resolver resourceresolver org apache sling distribution distribution request distributionrequest org apache sling distribution distribution request type distributionrequesttype org apache sling distribution common distribution exception distributionexception privilege distribution request authorization strategy privilegedistributionrequestauthorizationstrategy distribution request authorization strategy distributionrequestauthorizationstrategy string jcr privilege jcrprivilege privilege distribution request authorization strategy privilegedistributionrequestauthorizationstrategy string jcr privilege jcrprivilege jcr privilege jcrprivilege illegal argument exception illegalargumentexception jcr privilege required jcr privilege jcrprivilege jcr privilege jcrprivilege check permission checkpermission nonnull resource resolver resourceresolver resource resolver resourceresolver nonnull distribution request distributionrequest distribution request distributionrequest distribution exception distributionexception session session resource resolver resourceresolver adapt to adaptto session distribution request type distributionrequesttype add equals distribution request distributionrequest get request type getrequesttype check permission for add checkpermissionforadd session distribution request distributionrequest get paths getpaths distribution request type distributionrequesttype delete equals distribution request distributionrequest get request type getrequesttype check permission for delete checkpermissionfordelete session distribution request distributionrequest get paths getpaths repository exception repositoryexception distribution exception distributionexception privileges check permission for add checkpermissionforadd session session string paths repository exception repositoryexception distribution exception distributionexception access control manager accesscontrolmanager ac mgr acmgr session get access control manager getaccesscontrolmanager privilege privileges privilege ac mgr acmgr privilege from name privilegefromname jcr privilege jcrprivilege ac mgr acmgr privilege from name privilegefromname privilege jcr read string path paths ac mgr acmgr has privileges hasprivileges path privileges distribution exception distributionexception privileges check permission for delete checkpermissionfordelete session session string paths repository exception repositoryexception distribution exception distributionexception access control manager accesscontrolmanager ac mgr acmgr session get access control manager getaccesscontrolmanager privilege privileges privilege ac mgr acmgr privilege from name privilegefromname jcr privilege jcrprivilege ac mgr acmgr privilege from name privilegefromname privilege jcr remove node string path paths string closest parent path closestparentpath get closest parent getclosestparent session path closest parent path closestparentpath ac mgr acmgr has privileges hasprivileges closest parent path closestparentpath privileges distribution exception distributionexception privileges string get closest parent getclosestparent session session string path repository exception repositoryexception session node exists nodeexists path path path text get relative parent getrelativeparent path path path length