licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling core impl java util arrays java util hash set hashset java util list java util org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations configuration policy configurationpolicy org apache felix scr annotations deactivate org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations reference org apache felix scr annotations service org apache sling commons osgi properties util propertiesutil org apache sling api health check healthcheck org apache sling api result org apache sling api result status org apache sling api execution health check execution result healthcheckexecutionresult org apache sling api execution health check executor healthcheckexecutor org apache sling util formatting result log formattingresultlog org apache sling util health check filter healthcheckfilter org apache sling util health check metadata healthcheckmetadata org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework invalid syntax exception invalidsyntaxexception org osgi framework service reference servicereference org osgi service component component constants componentconstants org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory component configuration factory configurationfactory policy configuration policy configurationpolicy require metatype label apache sling composite health check description executes health checks selected tags properties property health check healthcheck label description health check property health check healthcheck tags unbounded property unbounded propertyunbounded array label tags description list tags health check select sub sets subsets health checks execution composite health check property health check healthcheck mbean label m bean mbean description m bean mbean create health check empty m bean mbean registered service health check healthcheck composite health check compositehealthcheck health check healthcheck logger log logger factory loggerfactory get logger getlogger get class getclass property unbounded property unbounded propertyunbounded array label filter tags description tags select health checks composite health check executes string prop filter tags filter tags string filter tags filtertags reference health check executor healthcheckexecutor health check executor healthcheckexecutor bundle context bundlecontext bundle context bundlecontext service reference servicereference reference to this referencetothis health check filter healthcheckfilter health check filter healthcheckfilter activate activate component context componentcontext ctx bundle context bundlecontext ctx get bundle context getbundlecontext health check filter healthcheckfilter health check filter healthcheckfilter bundle context bundlecontext reference to this referencetothis get reference by pid getreferencebypid properties util propertiesutil to string tostring ctx get properties getproperties constants service pid filter tags filtertags properties util propertiesutil to string array tostringarray ctx get properties getproperties prop filter tags string log debug activated select health check healthcheck tags arrays as list aslist filter tags filtertags deactivate deactivate bundle context bundlecontext health check filter healthcheckfilter reference to this referencetothis override result execute result result check for recursion checkforrecursion reference to this referencetothis hash set hashset string result recursion error result formatting result log formattingresultlog result log resultlog formatting result log formattingresultlog list health check execution result healthcheckexecutionresult execution results executionresults health check executor healthcheckexecutor execute filter tags filtertags result log resultlog debug exec uting executing health checks healthchecks selected tags execution results executionresults size arrays as list aslist filter tags filtertags result composite result compositeresult result log resultlog execution results executionresults result result check for recursion checkforrecursion service reference servicereference hc reference hcreference string already banned tags alreadybannedtags health check metadata healthcheckmetadata this check metadata thischeckmetadata health check metadata healthcheckmetadata hc reference hcreference string banned tags for this composite check bannedtagsforthiscompositecheck hash set hashset string banned tags for this composite check bannedtagsforthiscompositecheck add all addall already banned tags alreadybannedtags banned tags for this composite check bannedtagsforthiscompositecheck add all addall this check metadata thischeckmetadata get tags gettags string tags for included checks arr tagsforincludedchecksarr properties util propertiesutil to string array tostringarray hc reference hcreference get property getproperty prop filter tags string string tags for included checks tagsforincludedchecks hash set hashset string arrays as list aslist tags for included checks arr tagsforincludedchecksarr log debug banned tags this check metadata thischeckmetadata get name getname banned tags for this composite check bannedtagsforthiscompositecheck log debug tags for included checks tagsforincludedchecks tags for included checks tagsforincludedchecks string int ersection intersection hash set hashset string int ersection intersection add all addall banned tags for this composite check bannedtagsforthiscompositecheck int ersection intersection retain all retainall tags for included checks tagsforincludedchecks int ersection intersection is empty isempty result status health check error invalid configuration cycle detected composite health check hierarchy health check this check metadata thischeckmetadata get name getname hc reference hcreference get property getproperty constants service pid tag int ersection intersection composite check hierarchy tag ged tagged alike tags assigned composite checks banned tags for this composite check bannedtagsforthiscompositecheck check composite check service reference servicereference hc refs of composite check hcrefsofcompositecheck health check filter healthcheckfilter get tag ged health check service references gettaggedhealthcheckservicereferences tags for included checks arr tagsforincludedchecksarr service reference servicereference hc ref of composite check hcrefofcompositecheck hc refs of composite check hcrefsofcompositecheck composite health check compositehealthcheck get name getname equals hc ref of composite check hcrefofcompositecheck get property getproperty component constants componentconstants component log debug checking composite hc ref of composite check hcrefofcompositecheck hc ref of composite check hcrefofcompositecheck get property getproperty component constants componentconstants component result result check for recursion checkforrecursion hc ref of composite check hcrefofcompositecheck banned tags for this composite check bannedtagsforthiscompositecheck result recursion result recursion detected service reference servicereference get reference by pid getreferencebypid string service pid servicepid service pid servicepid string filter string filterstring constants service pid service pid servicepid service reference servicereference bundle context bundlecontext get service references getservicereferences health check healthcheck get name getname filter string filterstring invalid syntax exception invalidsyntaxexception log error invalid filter filter string filterstring length length illegal state exception illegalstateexception osg i osgi framework returned service reference unique service pid service pid servicepid set health check filter sethealthcheckfilter health check filter healthcheckfilter health check filter healthcheckfilter health check filter healthcheckfilter health check filter healthcheckfilter set filter tags setfiltertags string filter tags filtertags filter tags filtertags filter tags filtertags set health check executor sethealthcheckexecutor health check executor healthcheckexecutor health check executor healthcheckexecutor health check executor healthcheckexecutor health check executor healthcheckexecutor set reference to this setreferencetothis service reference servicereference reference to this referencetothis reference to this referencetothis reference to this referencetothis