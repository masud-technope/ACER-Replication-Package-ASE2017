licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets impl helpers org junit assert equals assertequals java buffered input stream bufferedinputstream java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java input stream inputstream java util random org junit test stream renderer servlet test streamrendererservlettest test test copy range testcopyrange io exception ioexception run tests runtests run tests runtests test test res ulting length testresultinglength io exception ioexception byte array input stream bytearrayinputstream byte array input stream bytearrayinputstream get bytes getbytes byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream stream renderer servlet streamrendererservlet static copy range staticcopyrange string result to string tostring assert equals assertequals result length assert equals assertequals result run tests runtests random see d randomseed io exception ioexception random random random random see d randomseed assert copy range assertcopyrange random stream renderer servlet streamrendererservlet buffer size assert copy range assertcopyrange random stream renderer servlet streamrendererservlet buffer size assert copy range assertcopyrange random stream renderer servlet streamrendererservlet buffer size assert copy range assertcopyrange random stream renderer servlet streamrendererservlet buffer size assert copy range assertcopyrange random random next int nextint stream renderer servlet streamrendererservlet buffer size assert copy range assertcopyrange random assert copy range assertcopyrange random assert copy range assertcopyrange random random buffer size buffersize io exception ioexception generate random test data expected buffer size buffersize random next bytes nextbytes expected check simple cases assert copy range assertcopyrange expected assert copy range assertcopyrange expected assert copy range assertcopyrange expected expected length randomly selected random next int nextint random next int nextint expected length random next int nextint expected length assert copy range assertcopyrange expected math min math max assert copy range assertcopyrange expected io exception ioexception assert copy range assertcopyrange expected byte array input stream bytearrayinputstream expected buffered input stream bufferedinputstream assert copy range assertcopyrange expected buffered input stream bufferedinputstream byte array input stream bytearrayinputstream expected assert copy range assertcopyrange expected byte array input stream bytearrayinputstream expected override buffered input stream bufferedinputstream assert copy range assertcopyrange expected buffered input stream bufferedinputstream byte array input stream bytearrayinputstream expected override input stream read assert copy range assertcopyrange expected byte array input stream bytearrayinputstream expected override read len maximum len len read len assert copy range assertcopyrange expected input stream inputstream input io exception ioexception byte array output stream bytearrayoutputstream output byte array output stream bytearrayoutputstream stream renderer servlet streamrendererservlet static copy range staticcopyrange input output actual output to byte array tobytearray assert equals assertequals actual length assert equals assertequals expected actual