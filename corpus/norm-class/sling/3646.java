licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling models impl org junit org mockito matchers org mockito mockito java util dictionary java util hashtable org apache sling api sling http servlet request slinghttpservletrequest org apache sling api resource resource org apache sling api scripting sling bindings slingbindings org apache sling api scripting sling script helper slingscripthelper org apache sling models impl injectors os gi service injector osgiserviceinjector org apache sling models test models testmodels classes arrayosgimodel org apache sling models test models testmodels classes collectionosgimodel org apache sling models test models testmodels classes listosgimodel org apache sling models test models testmodels classes optional array gi model optionalarrayosgimodel org apache sling models test models testmodels classes optional list gi model optionallistosgimodel org apache sling models test models testmodels classes requestosgimodel org apache sling models test models testmodels classes setosgimodel org apache sling models test models testmodels classes simpleosgimodel org apache sling models test models testmodels interfaces service interface serviceinterface org junit org junit test org junit runner run with runwith org mockito mock org mockito run ners runners mockito unit runner mockitojunitrunner org osgi framework bundle context bundlecontext org osgi framework bundle listener bundlelistener org osgi framework service reference servicereference org osgi service component component context componentcontext run with runwith mockito unit runner mockitojunitrunner os gi injection test osgiinjectiontest model adapter factory modeladapterfactory factory mock component context componentcontext component ctx componentctx mock bundle context bundlecontext bundle context bundlecontext mock sling script helper slingscripthelper helper sling bindings slingbindings bindings sling bindings slingbindings setup component ctx componentctx get bundle context getbundlecontext then return thenreturn bundle context bundlecontext component ctx componentctx get properties getproperties then return thenreturn hashtable string object factory model adapter factory modeladapterfactory factory activate component ctx componentctx os gi service injector osgiserviceinjector injector factory injectorfactory os gi service injector osgiserviceinjector injector factory injectorfactory activate component ctx componentctx factory bind injector bindinjector injector factory injectorfactory service properties map servicepropertiesmap bindings set sling setsling helper test test simple gi model field testsimpleosgimodelfield exception service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service references getservicereferences service interface serviceinterface get name getname then return thenreturn service reference servicereference bundle context bundlecontext get service getservice then return thenreturn service resource res mock resource simpleosgimodel model factory get adapter getadapter res simpleosgimodel assert not null assertnotnull model assert not null assertnotnull model get service getservice assert equals assertequals service model get service getservice verify no more int eractions verifynomoreinteractions res test test request gi model field testrequestosgimodelfield exception service interface serviceinterface service mock service interface serviceinterface sling http servlet request slinghttpservletrequest request mock sling http servlet request slinghttpservletrequest request get attribute getattribute sling bindings slingbindings get name getname then return thenreturn bindings helper get services getservices service interface serviceinterface then return thenreturn service interface serviceinterface service requestosgimodel model factory get adapter getadapter request requestosgimodel assert not null assertnotnull model assert not null assertnotnull model get service getservice assert equals assertequals service model get service getservice verify bundle context bundlecontext register service registerservice runnable get name getname factory dictionary verify bundle context bundlecontext add bundle listener addbundlelistener bundle listener bundlelistener verify bundle context bundlecontext register service registerservice object get name getname object dictionary verify bundle context bundlecontext get bundles getbundles verify no more int eractions verifynomoreinteractions bundle context bundlecontext test test list gi model field testlistosgimodelfield exception service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service bundle context bundlecontext get service references getservicereferences service interface serviceinterface get name getname then return thenreturn service reference servicereference resource res mock resource listosgimodel model factory get adapter getadapter res listosgimodel assert not null assertnotnull model assert not null assertnotnull model get services getservices assert equals assertequals model get services getservices size assert equals assertequals service model get services getservices assert equals assertequals service model get services getservices verify no more int eractions verifynomoreinteractions res test test array gi model field testarrayosgimodelfield exception service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service bundle context bundlecontext get service references getservicereferences service interface serviceinterface get name getname then return thenreturn service reference servicereference resource res mock resource arrayosgimodel model factory get adapter getadapter res arrayosgimodel assert not null assertnotnull model assert not null assertnotnull model get services getservices assert equals assertequals model get services getservices length assert equals assertequals service model get services getservices assert equals assertequals service model get services getservices verify no more int eractions verifynomoreinteractions res test test optional array gi model field testoptionalarrayosgimodelfield exception resource res mock resource optional array gi model optionalarrayosgimodel model factory get adapter getadapter res optional array gi model optionalarrayosgimodel assert not null assertnotnull model assert null assertnull model get services getservices verify no more int eractions verifynomoreinteractions res test test optional list gi model field testoptionallistosgimodelfield exception resource res mock resource optional list gi model optionallistosgimodel model factory get adapter getadapter res optional list gi model optionallistosgimodel assert not null assertnotnull model assert null assertnull model get services getservices verify no more int eractions verifynomoreinteractions res test test collection gi model field testcollectionosgimodelfield exception service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service bundle context bundlecontext get service references getservicereferences service interface serviceinterface get name getname then return thenreturn service reference servicereference resource res mock resource collectionosgimodel model factory get adapter getadapter res collectionosgimodel assert not null assertnotnull model assert not null assertnotnull model get services getservices assert equals assertequals model get services getservices size assert true asserttrue model get services getservices service assert true asserttrue model get services getservices service verify no more int eractions verifynomoreinteractions res test test set gi model field testsetosgimodelfield exception service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service bundle context bundlecontext get service references getservicereferences service interface serviceinterface get name getname then return thenreturn service reference servicereference resource res mock resource setosgimodel model factory get adapter getadapter res setosgimodel assert null assertnull model verify bundle context bundlecontext register service registerservice runnable get name getname factory dictionary verify bundle context bundlecontext add bundle listener addbundlelistener bundle listener bundlelistener verify bundle context bundlecontext register service registerservice object get name getname object dictionary verify bundle context bundlecontext get bundles getbundles verify no more int eractions verifynomoreinteractions res bundle context bundlecontext test test simple gi model constructor testsimpleosgimodelconstructor exception service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service references getservicereferences service interface serviceinterface get name getname then return thenreturn service reference servicereference bundle context bundlecontext get service getservice then return thenreturn service resource res mock resource org apache sling models test models testmodels classes constructor injection constructorinjection simpleosgimodel model factory get adapter getadapter res org apache sling models test models testmodels classes constructor injection constructorinjection simpleosgimodel assert not null assertnotnull model assert not null assertnotnull model get service getservice assert equals assertequals service model get service getservice verify no more int eractions verifynomoreinteractions res test test list gi model constructor testlistosgimodelconstructor exception service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service service reference servicereference mock service reference servicereference service interface serviceinterface service mock service interface serviceinterface bundle context bundlecontext get service getservice then return thenreturn service bundle context bundlecontext get service references getservicereferences service interface serviceinterface get name getname then return thenreturn service reference servicereference resource res mock resource org apache sling models test models testmodels classes constructor injection constructorinjection listosgimodel model factory get adapter getadapter res org apache sling models test models testmodels classes constructor injection constructorinjection listosgimodel assert not null assertnotnull model assert not null assertnotnull model get services getservices assert equals assertequals model get services getservices size assert equals assertequals service model get services getservices assert equals assertequals service model get services getservices verify no more int eractions verifynomoreinteractions res