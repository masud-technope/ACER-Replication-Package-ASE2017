licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer provider file impl java file java util array list arraylist java util list java util timer java util timer task timertask org slf logger org slf logger factory loggerfactory monitor file system per iodically periodically checks file monitor filemonitor timer task timertask logger logger logger logger factory loggerfactory get logger getlogger get class getclass timer timer timer stopped monitor able monitorable root file changes listener filechangeslistener listener creates instance param int erval interval int erval interval executions task milliseconds file monitor filemonitor file root dir rootdir int erval interval file changes listener filechangeslistener listener listener listener root monitor able monitorable root dir rootdir create status createstatus root list file files array list arraylist file collect root file files listener initial set initialset files logger debug starting file monitor int erval interval root file int erval interval timer schedule int erval interval int erval interval file get root getroot root file file changes listener filechangeslistener get listener getlistener listener collect file file list file files file exists file is directory isdirectory file children file list files listfiles children file child children collect child files files add file collect deleted collectdeleted monitor able monitorable list file files status dir status dirstatus monitor able monitorable child dir status dirstatus status children collect deleted collectdeleted child files files add file collector list file array list arraylist file list file removed array list arraylist file list file changed array list arraylist file per iodically periodically executing task task executing current execution simply timer cancel timer cancel int errupted interrupted stopped timer wait interrupted exception interruptedexception int errupted interrupted int errupted interrupted thread current thread currentthread int errupt interrupt logger debug stopped file monitor root file java util timer task timertask timer stopped stopped timer notify all notifyall collector collector check root listener updated changed removed exception timer stopped timer notify all notifyall check monitorable param monitorable monitorable check param localea event admin check monitor able monitorable monitorable collector collector logger debug checking monitorable file file existing check read ded readded monitorable status non existing status nonexistingstatus monitorable file exists file reset status create status createstatus monitorable list file files array list arraylist file collect monitorable file files file file files collector add file check file removed monitorable file exists removed file update status list file files array list arraylist file collect deleted collectdeleted monitorable files file file files collector removed add file monitorable status non existing status nonexistingstatus singleton check file status filestatus file status filestatus monitorable status changed last modified lastmodified monitorable file last modified lastmodified last modified lastmodified monitorable file last modified lastmodified changed monitorable file is file isfile collector changed add monitorable file changed dir status dirstatus directory dir status dirstatus dir status dirstatus children length check children collector dir changed update changed update file files monitorable file list files listfiles files monitor able monitorable children monitor able monitorable files length files length search list children length children file equals files children children children children monitor able monitorable files children status non existing status nonexistingstatus singleton check children collector children children children monitor able monitorable create status object monitorable create status createstatus monitor able monitorable monitorable monitorable file exists monitorable status non existing status nonexistingstatus singleton monitorable file is file isfile monitorable status file status filestatus monitorable file monitorable status dir status dirstatus monitorable file monitorable hold resource path file status monitor able monitorable file file object status monitor able monitorable file file file file status files file status filestatus last modified lastmodified file status filestatus file file last modified lastmodified file last modified lastmodified status directories dir status dirstatus file status filestatus monitor able monitorable children dir status dirstatus file dir dir file files dir list files listfiles files children monitor able monitorable files length files length children monitor able monitorable files file monitor filemonitor create status createstatus children children monitor able monitorable status existing files non existing status nonexistingstatus non existing status nonexistingstatus singleton non existing status nonexistingstatus