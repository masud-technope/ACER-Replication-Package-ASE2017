licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling maven jcr ocm jcrocm java file java file output stream fileoutputstream java i o exception ioexception java net url java net url class loader urlclassloader java util array list arraylist java util iterator java util list org apache maven artifact artifact org apache maven model resource org apache maven plugin abstract mojo abstractmojo org apache maven plugin mojo failure exception mojofailureexception org apache maven plugins annotations lifecycle p has e lifecyclephase org apache maven plugins annotations mojo org apache maven plugins annotations parameter org apache maven plugins annotations resolution scope resolutionscope org apache maven project maven project mavenproject org code haus codehaus plexus util i o util ioutil org code haus codehaus plexus util string utils stringutils thoughtworks qdox java doc builder javadocbuilder thoughtworks qdox model doc let tag doclettag thoughtworks qdox model java class javaclass thoughtworks qdox model java field javafield thoughtworks qdox model java method javamethod thoughtworks qdox model java source javasource code jcr ocm mojo jcrocmmojo code ocm goal maven jcr ocm jcrocm plugin code generate resources code phase requires compile scope d scoped dependencies resolved mojo ocm default p has e defaultphase lifecycle p has e lifecyclephase generate resources requires dependency resolution requiresdependencyresolution resolution scope resolutionscope compile jcr ocm mojo jcrocmmojo abstract mojo abstractmojo parameter default value defaultvalue project build directory sling generated read only readonly file output directory outputdirectory parameter default value defaultvalue project read only readonly maven project mavenproject project path generated descriptor parameter property jcr ocm jcrocm descriptor default value defaultvalue mappings xml string final name finalname execute mojo failure exception mojofailureexception has failures hasfailures prepare qd ox qdox prime compile path project java doc builder javadocbuilder builder java doc builder javadocbuilder builder get class library getclasslibrary add class loader addclassloader get compile class loader getcompileclassloader i o exception ioexception ioe mojo failure exception mojofailureexception prepare qd ox qdox add sources project iterator project get compile source roots getcompilesourceroots iterator has next hasnext builder add source tree addsourcetree file string out of memory error outofmemoryerror oom e oome builder mojo failure exception mojofailureexception failed analyzing source memory setting max heap size higher maven opts xmx parse sources java source javasource java sources javasources builder get sources getsources list descriptors array list arraylist java sources javasources length java class javaclass java classes javaclasses java sources javasources get classes getclasses java classes javaclasses java classes javaclasses length doc let tag doclettag tag java classes javaclasses get tag by name gettagbyname class descriptor classdescriptor tag descriptor tag class descriptor classdescriptor descriptor create class descriptor createclassdescriptor java classes javaclasses descriptor descriptors add descriptor has failures hasfailures checking classes failures has failures hasfailures mojo failure exception mojofailureexception jackrabbit ocm descriptor parsing failures log terminate write descriptors is empty isempty get log getlog info jackrabbit ocm descriptors project descriptors written string utils stringutils is empty isempty final name finalname get log getlog error descriptor file empty prepare descriptor output file file descriptor file descriptorfile file file output directory outputdirectory sling inf final name finalname ensure parent dir descriptor file descriptorfile get parent file getparentfile mkdirs get log getlog info gen erating generating descriptors size ocm mapping descriptors descriptor file descriptorfile write descriptors parse order file output stream fileoutputstream descriptor stream descriptorstream xml writer xmlwriter descriptor stream descriptorstream file output stream fileoutputstream descriptor file descriptorfile xml writer xmlwriter descriptor stream descriptorstream print element start printelementstart jackrabbit ocm iterator descriptors iterator has next hasnext class descriptor classdescriptor class descriptor classdescriptor generate print element end printelementend jackrabbit ocm i o exception ioexception ioe has failures hasfailures get log getlog error write descriptor descriptor file descriptorfile ioe mojo failure exception mojofailureexception failed write descriptor descriptor file descriptorfile i o util ioutil close i o util ioutil close descriptor stream descriptorstream remove descriptor file write failure has failures hasfailures descriptor file descriptorfile delete add descriptor file maven resources string our rsrc path ourrsrcpath output directory outputdirectory get absolute path getabsolutepath iterator rsrc iterator rsrciterator project get resources getresources iterator rsrc iterator rsrciterator has next hasnext resource rsrc resource rsrc iterator rsrciterator rsrc get directory getdirectory equals our rsrc path ourrsrcpath resource resource resource resource set directory setdirectory output directory outputdirectory get absolute path getabsolutepath project add resource addresource resource include project get properties getproperties set property setproperty sling map pings mappings sling inf final name finalname creates url loader compile artifacts url class loader urlclassloader compile artifacts i o exception ioexception error occurrs creating url s urls compile artifact files class loader classloader get compile class loader getcompileclassloader i o exception ioexception list artifacts project get compile artifacts getcompileartifacts url path url artifacts size iterator artifacts iterator has next hasnext artifact artifact path get file getfile touri tourl url class loader urlclassloader path class descriptor classdescriptor create class descriptor createclassdescriptor java class javaclass java class javaclass create descriptor java early class descriptor classdescriptor class descriptor classdescriptor from class fromclass get log getlog java class javaclass analyze fields mapping descriptors java field javafield fields java class javaclass get fields getfields fields fields length add child addchild field descriptor fielddescriptor from field fromfield get log getlog fields add child addchild bean descriptor beandescriptor from field fromfield get log getlog fields add child addchild collection descriptor collectiondescriptor from field fromfield get log getlog fields analyze methods mapping descriptors java method javamethod methods java class javaclass get methods getmethods methods methods length add child addchild field descriptor fielddescriptor from method frommethod get log getlog methods add child addchild bean descriptor beandescriptor from method frommethod get log getlog methods add child addchild collection descriptor collectiondescriptor from method frommethod get log getlog methods validation fails validate