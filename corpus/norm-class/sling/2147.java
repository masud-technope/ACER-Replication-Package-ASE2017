licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling validation impl java util arrays java util collections java util hash map hashmap java util list java util map javax annotation check for null checkfornull javax annotation nonnull javax jcr repository exception repositoryexception org apache commons collect ions collections predicate org apache jackrabbit jcr constants jcrconstants org apache sling api resource login exception loginexception org apache sling api resource modifiable value map modifiablevaluemap org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource util resourceutil org apache sling api resource value map valuemap org apache sling api wrappers value map decorator valuemapdecorator org apache sling jcr resource jcr resource constants jcrresourceconstants org apache sling testing mock sling junit sling context slingcontext org apache sling validation validation result validationresult org apache sling validation validator org apache sling validation exceptions sling validation exception slingvalidationexception org apache sling validation impl model child resource impl childresourceimpl org apache sling validation impl model resource property builder resourcepropertybuilder org apache sling validation impl model validation model builder validationmodelbuilder org apache sling validation impl util example valid ators examplevalidators date validator datevalidator org apache sling validation impl valid ators validators regex validator regexvalidator org apache sling validation model child resource childresource org apache sling validation model resource property resourceproperty org apache sling validation model validation model validationmodel org hamcrest matchers org junit org junit org junit rule org junit test validation service impl test validationserviceimpltest assume validation models stored libs apps validation mode ls models relative path validation service impl validationserviceimpl validation service validationservice validation model builder validationmodelbuilder model builder modelbuilder resource property builder resourcepropertybuilder property builder propertybuilder rule sling context slingcontext context sling context slingcontext set up setup login exception loginexception persistence exception persistenceexception repository exception repositoryexception validation service validationservice validation service impl validationserviceimpl validation service validationservice search paths searchpaths arrays as list aslist context resource resolver resourceresolver get search path getsearchpath model builder modelbuilder validation model builder validationmodelbuilder property builder propertybuilder resource property builder resourcepropertybuilder test test get validation model testgetvalidationmodel exception test test value map with wrong data type testvaluemapwithwrongdatatype exception property builder propertybuilder validator date validator datevalidator model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build sling validation test hash map hashmap string object hash map hashmap hash map hashmap string object hash map hashmap field validation result validationresult validation service validationservice validate value map decorator valuemapdecorator hash map hashmap map string list string expected failure messages expectedfailuremessages hash map hashmap string list string expected failure messages expectedfailuremessages field arrays as list aslist property expected type java util converted type assert that assertthat get failure messages getfailuremessages entry set entryset matchers equal to equalto expected failure messages expectedfailuremessages entry set entryset test test validate never called with null values testvalidatenevercalledwithnullvalues exception validator string my validator myvalidator validator string override string validate nonnull string data nonnull value map valuemap value map valuemap resource resource nonnull value map valuemap arguments sling validation exception slingvalidationexception assert not null assertnotnull data parameter validate data assert not null assertnotnull value map valuemap parameter validate value map valuemap assert null assertnull resource validate called map resource assert not null assertnotnull arguments parameter validate arguments property builder propertybuilder validator my validator myvalidator model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build sling validation test hash map hashmap string object hash map hashmap hash map hashmap string object hash map hashmap field validation result validationresult validation service validationservice validate value map decorator valuemapdecorator hash map hashmap assert that assertthat get failure messages getfailuremessages entry set entryset matchers empty assert true asserttrue is valid isvalid test test value map with missing field testvaluemapwithmissingfield exception model builder modelbuilder resource property resourceproperty property builder propertybuilder build field model builder modelbuilder resource property resourceproperty property builder propertybuilder build field model builder modelbuilder resource property resourceproperty property builder propertybuilder build field model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build sling validation test detected missing property hash map hashmap string object hash map hashmap hash map hashmap string object hash map hashmap field string hash map hashmap field string hash map hashmap field validation result validationresult validation service validationservice validate value map decorator valuemapdecorator hash map hashmap map string list string expected failure messages expectedfailuremessages hash map hashmap string list string expected failure messages expectedfailuremessages field arrays as list aslist missing required property assert that assertthat get failure messages getfailuremessages entry set entryset matchers equal to equalto expected failure messages expectedfailuremessages entry set entryset test test value map with missing optional value testvaluemapwithmissingoptionalvalue exception model builder modelbuilder resource property resourceproperty property builder propertybuilder optional build field validation model validationmodel model builder modelbuilder build sling validation test hash map hashmap string object hash map hashmap hash map hashmap string object hash map hashmap field validation result validationresult validation service validationservice validate value map decorator valuemapdecorator hash map hashmap assert that assertthat get failure messages getfailuremessages entry set entryset matchers empty assert true asserttrue is valid isvalid test test value map with empty optional value testvaluemapwithemptyoptionalvalue exception property builder propertybuilder optional property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param abc model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build sling validation test hash map hashmap string object hash map hashmap hash map hashmap string object hash map hashmap field validation result validationresult validation service validationservice validate value map decorator valuemapdecorator hash map hashmap check correct error message map string list string assert false assertfalse is valid isvalid assert that assertthat get failure messages getfailuremessages matchers has entry hasentry field arrays as list aslist property match pattern abc test test value map with correct data type testvaluemapwithcorrectdatatype exception property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param abc model builder modelbuilder resource property resourceproperty property builder propertybuilder build field property builder propertybuilder resource property builder resourcepropertybuilder string test regex test property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param test regex model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build sling validation test hash map hashmap string object hash map hashmap hash map hashmap string object hash map hashmap field hello world helloworld hash map hashmap field hello world helloworld validation result validationresult validation service validationservice validate value map decorator valuemapdecorator hash map hashmap check correct error message map string list string assert false assertfalse is valid isvalid assert that assertthat get failure messages getfailuremessages matchers has entry hasentry field arrays as list aslist property match pattern test regex test test resource with missing grand child property testresourcewithmissinggrandchildproperty exception accept digits property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param resource property resourceproperty property property builder propertybuilder build field model builder modelbuilder resource property resourceproperty property child resource childresource model grand child modelgrandchild child resource impl childresourceimpl grandchild collections singleton list singletonlist property collections child resource childresource empty list emptylist child resource childresource model child modelchild child resource impl childresourceimpl child collections singleton list singletonlist property collections singleton list singletonlist model grand child modelgrandchild model builder modelbuilder child resource childresource model child modelchild validation model validationmodel model builder modelbuilder build some type sometype create resource resource resolver resourceresolver context resource resolver resourceresolver resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource jcr constants jcrconstants unstructured jcr constants jcrconstants unstructured modifiable value map modifiablevaluemap mvm test resource testresource adapt to adaptto modifiable value map modifiablevaluemap mvm field map string object properties hash map hashmap string object properties field resource resource child resourcechild create test resource testresource child properties resource grand child resourcegrandchild missing mandatory field property create resource child resourcechild grandchild validation result validationresult validation service validationservice validate test resource testresource assert false assertfalse resource considered invalid is valid isvalid assert that assertthat get failure messages getfailuremessages matchers has entry hasentry child grandchild field arrays as list aslist missing required property assert that assertthat get failure messages getfailuremessages key set keyset matchers has size hassize test test resource with missing optional child resource testresourcewithmissingoptionalchildresource exception accept digits property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param resource property resourceproperty property property builder propertybuilder build field child resource childresource child child resource impl childresourceimpl child collections singleton list singletonlist property collections child resource childresource empty list emptylist model builder modelbuilder child resource childresource child validation model validationmodel model builder modelbuilder build type create resource lacking optional child resource resource resolver resourceresolver context resource resolver resourceresolver resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource jcr constants jcrconstants unstructured jcr constants jcrconstants unstructured validation result validationresult validation service validationservice validate test resource testresource assert that assertthat get failure messages getfailuremessages entry set entryset matchers empty assert true asserttrue is valid isvalid test test resource with nested children testresourcewithnestedchildren exception accept digits property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param resource property resourceproperty property property builder propertybuilder build field child resource childresource model grand child modelgrandchild child resource impl childresourceimpl grandchild collections singleton list singletonlist property collections child resource childresource empty list emptylist child resource childresource model child modelchild child resource impl childresourceimpl child collections singleton list singletonlist property collections singleton list singletonlist model grand child modelgrandchild model builder modelbuilder child resource childresource model child modelchild validation model validationmodel model builder modelbuilder build some type sometype create resource resource resolver resourceresolver context resource resolver resourceresolver resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource jcr constants jcrconstants unstructured jcr constants jcrconstants unstructured map string object properties hash map hashmap string object properties field resource resource child resourcechild create test resource testresource child properties create resource child resourcechild grandchild properties validation result validationresult validation service validationservice validate test resource testresource assert that assertthat get failure messages getfailuremessages entry set entryset matchers empty assert true asserttrue is valid isvalid test test resource with validator leveraging the resource testresourcewithvalidatorleveragingtheresource exception validator string extended validator extendedvalidator validator string override check for null checkfornull string validate string data value map valuemap value map valuemap resource resource value map valuemap arguments sling validation exception slingvalidationexception assert that assertthat resource get path getpath matchers equal to equalto content validation resource accept digits property builder propertybuilder validator extended validator extendedvalidator model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build some type sometype create resource resource resolver resourceresolver context resource resolver resourceresolver map string object properties hash map hashmap string object properties field resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource properties jcr constants jcrconstants unstructured validation result validationresult validation service validationservice validate test resource testresource upgrade newer version hamcrest work around workaround https github hamcrest java hamcrest javahamcrest issues assert that assertthat get failure messages getfailuremessages entry set entryset matchers empty test test resource with nested children and pattern matching testresourcewithnestedchildrenandpatternmatching exception accept digits property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param resource property resourceproperty property property builder propertybuilder build field child resource childresource model grand child modelgrandchild child resource impl childresourceimpl grandchild grandchild collections singleton list singletonlist property collections child resource childresource empty list emptylist child resource childresource model child modelchild child resource impl childresourceimpl child child collections singleton list singletonlist property collections singleton list singletonlist model grand child modelgrandchild child resource childresource sibling child siblingchild child resource impl childresourceimpl siblingchild siblingchild collections singleton list singletonlist property collections singleton list singletonlist model grand child modelgrandchild model builder modelbuilder child resource childresource model child modelchild model builder modelbuilder child resource childresource sibling child siblingchild validation model validationmodel model builder modelbuilder build some type sometype resource resolver resourceresolver context resource resolver resourceresolver resource test resource testresource resource util resourceutil get or create resource getorcreateresource apps validation resource jcr constants jcrconstants unstructured jcr constants jcrconstants unstructured map string object properties hash map hashmap string object properties field resource resource child resourcechild create test resource testresource child properties create resource child resourcechild grandchild properties child lacking mandatory resource create test resource testresource child properties create test resource testresource child siblingchild mandatory validation result validationresult validation service validationservice validate test resource testresource assert false assertfalse resource considered invalid is valid isvalid assert that assertthat get failure messages getfailuremessages matchers has entry hasentry child grandchild arrays as list aslist missing required child resource assert that assertthat get failure messages getfailuremessages matchers has entry hasentry child grandchild arrays as list aslist missing required child resource assert that assertthat get failure messages getfailuremessages matchers has entry hasentry child field arrays as list aslist missing required property assert that assertthat get failure messages getfailuremessages matchers has entry hasentry siblingchild arrays as list aslist missing required child resource assert that assertthat get failure messages getfailuremessages key set keyset matchers has size hassize test test resource with property pattern matching testresourcewithpropertypatternmatching exception accept digits property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param property builder propertybuilder name regex nameregex field model builder modelbuilder resource property resourceproperty property builder propertybuilder build field property builder propertybuilder name regex nameregex other field otherfield model builder modelbuilder resource property resourceproperty property builder propertybuilder build other field otherfield property builder propertybuilder name regex nameregex optional field optionalfield optional model builder modelbuilder resource property resourceproperty property builder propertybuilder build optional field optionalfield validation model validationmodel model builder modelbuilder build type create resource resource resolver resourceresolver context resource resolver resourceresolver resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource jcr constants jcrconstants unstructured jcr constants jcrconstants unstructured modifiable value map modifiablevaluemap mvm test resource testresource adapt to adaptto modifiable value map modifiablevaluemap mvm field mvm field validate mvm field abc other field otherfield property missing validation result validationresult validation service validationservice validate test resource testresource assert false assertfalse resource considered invalid is valid isvalid assert that assertthat get failure messages getfailuremessages matchers has entry hasentry field arrays as list aslist property match pattern assert that assertthat get failure messages getfailuremessages matchers has entry hasentry other field otherfield arrays as list aslist missing required property assert that assertthat get failure messages getfailuremessages key set keyset matchers has size hassize test test resource with multivalue properties testresourcewithmultivalueproperties exception accept digits property builder propertybuilder validator regex validator regexvalidator regex validator regexvalidator regex param property builder propertybuilder multiple model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build type resource resolver resourceresolver context resource resolver resourceresolver resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource jcr constants jcrconstants unstructured jcr constants jcrconstants unstructured modifiable value map modifiablevaluemap mvm test resource testresource adapt to adaptto modifiable value map modifiablevaluemap mvm field string abc validation result validationresult validation service validationservice validate test resource testresource assert false assertfalse resource considered invalid is valid isvalid assert that assertthat get failure messages getfailuremessages matchers has entry hasentry field arrays as list aslist property match pattern assert that assertthat get failure messages getfailuremessages key set keyset matchers has size hassize test test validate resource recursively testvalidateresourcerecursively exception model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build resource type resourcetype model builder modelbuilder validation model builder validationmodelbuilder model builder modelbuilder resource property resourceproperty property builder propertybuilder build field validation model validationmodel model builder modelbuilder build resource type resourcetype model retrieve r retriever validation service validationservice model retriever modelretriever validation model retriever validationmodelretriever override check for null checkfornull validation model validationmodel get model getmodel nonnull string resource type resourcetype string resource path resourcepath consider resource super type models considerresourcesupertypemodels resource type resourcetype equals resource type resourcetype resource type resourcetype equals resource type resourcetype resource resolver resourceresolver context resource resolver resourceresolver resource lacking required field invalid resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource resource type resourcetype jcr constants jcrconstants unstructured child valid map string object properties hash map hashmap string object properties jcr resource constants jcrresourceconstants sling resource type property resource type resourcetype properties field test create test resource testresource child properties child invalid properties clear properties jcr resource constants jcrresourceconstants sling resource type property resource type resourcetype create test resource testresource child properties child model resource type properties clear properties jcr resource constants jcrresourceconstants sling resource type property resource type resourcetype create test resource testresource child properties predicate ignore resource type ignoreresourcetype filter predicate override evaluate object object resource resource resource object resource type resourcetype equals resource get resource type getresourcetype validation result validationresult validation service validationservice validate resource recursively validateresourcerecursively test resource testresource ignore resource type ignoreresourcetype filter assert false assertfalse resource considered invalid is valid isvalid assert that assertthat get failure messages getfailuremessages matchers has entry hasentry field arrays as list aslist missing required property assert that assertthat get failure messages getfailuremessages matchers has entry hasentry child field arrays as list aslist missing required property assert that assertthat get failure messages getfailuremessages key set keyset matchers has size hassize test expected illegal argument exception illegalargumentexception test validate resource recursively with missing validation model testvalidateresourcerecursivelywithmissingvalidationmodel exception model retrieve r retriever ret rieves retrieves validation service validationservice model retriever modelretriever validation model retriever validationmodelretriever override check for null checkfornull validation model validationmodel get model getmodel nonnull string resource type resourcetype string resource path resourcepath consider resource super type models considerresourcesupertypemodels resource resolver resourceresolver context resource resolver resourceresolver resource connected validation model resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource resource type resourcetype jcr constants jcrconstants unstructured validation result validationresult validation service validationservice validate resource recursively validateresourcerecursively test resource testresource test test validate resource recursively with missing validator and no enforcement testvalidateresourcerecursivelywithmissingvalidatorandnoenforcement exception model retrieve r retriever ret rieves retrieves validation service validationservice model retriever modelretriever validation model retriever validationmodelretriever override check for null checkfornull validation model validationmodel get model getmodel nonnull string resource type resourcetype string resource path resourcepath consider resource super type models considerresourcesupertypemodels resource resolver resourceresolver context resource resolver resourceresolver resource connected validation model resource test resource testresource resource util resourceutil get or create resource getorcreateresource content validation resource resource type resourcetype jcr constants jcrconstants unstructured validation result validationresult validation service validationservice validate resource recursively validateresourcerecursively test resource testresource assert true asserttrue is valid isvalid test test get relative resource path testgetrelativeresourcepath relative paths unmodified assert that assertthat validation service validationservice get relative resource type getrelativeresourcetype relative path matchers equal to equalto relative path assert that assertthat validation service validationservice get relative resource type getrelativeresourcetype apps relative path matchers equal to equalto relative path assert that assertthat validation service validationservice get relative resource type getrelativeresourcetype libs relative path matchers equal to equalto relative path test expected illegal argument exception illegalargumentexception test get relative resource path with absolute path out side of the search paths testgetrelativeresourcepathwithabsolutepathoutsideofthesearchpaths validation service validationservice get relative resource type getrelativeresourcetype apps relative path