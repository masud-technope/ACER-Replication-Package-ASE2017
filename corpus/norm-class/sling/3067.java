licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest java util hash map hashmap java util map javax servlet http http servlet response httpservletresponse org apache sling commons testing int egration integration http test base httptestbase test sling esp load function esp load test esploadtest http test base httptestbase string base path basepath override set up setup exception set up setup base path basepath get class getclass get simple name getsimplename system current time millis currenttimemillis test nested include testnestedinclude exception map string string props hash map hashmap string string props script to include scripttoinclude included esp props sling resource type get class getclass get simple name getsimplename test node testnode test node testnode http base url base path basepath props string sub folder subfolder script path scriptpath sub folder subfolder test client testclient mkdirs webdav base url sub folder subfolder string to delete todelete upload test script uploadtestscript script path scriptpath esp load main esp html esp upload test script uploadtestscript script path scriptpath esp load included esp included esp upload test script uploadtestscript sub folder subfolder esp load sub folder subfolder included esp included esp string content get content getcontent node url nodeurl html content type html string expected strings in order expectedstringsinorder main esp load included esp load included esp included esp load main esp load included pos string expected expected strings in order expectedstringsinorder new pos newpos content index of indexof expected assert true asserttrue content content expected new pos newpos assert true asserttrue string expected previous expected string new pos newpos pos pos new pos newpos string to delete todelete test client testclient delete test non existent include testnonexistentinclude exception map string string props hash map hashmap string string string bad script badscript none xistent nonexistent esp props script to include scripttoinclude bad script badscript props sling resource type get class getclass get simple name getsimplename test node testnode test node testnode http base url base path basepath props string to delete todelete upload test script uploadtestscript script path scriptpath esp load main esp html esp assert http status asserthttpstatus node url nodeurl html http servlet response httpservletresponse internal server error inc luding including bad script badscript fail test client testclient delete to delete todelete