licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling bgservlets impl nodes tream nodestream java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java input stream inputstream java util random javax jcr node javax jcr node iterator nodeiterator javax jcr repository exception repositoryexception org apache sling commons testing jcr repository test base repositorytestbase node stream test nodestreamtest repository test base repositorytestbase string ascii data abcd efgjijklmnoprqstuvwxyz abcdefgjijklmnoprqstuvwxyz binary data get binary data getbinarydata string prefix test node testnode big factor big data big data bigdata binary data big factor counter assert stream assertstream input stream inputstream expected input stream inputstream actual offset exp expected read exp assert equals assertequals expecting actual stream offset offset actual read actual read assert equals assertequals expecting data offset offset exp offset exception fail exception offset offset test ascii write and read testasciiwriteandread exception node test node testnode get test root node gettestrootnode add node addnode prefix counter test node testnode get session getsession save node output stream nodeoutputstream node output stream nodeoutputstream test node testnode write ascii data get bytes getbytes close node input stream nodeinputstream nis node input stream nodeinputstream test node testnode assert stream assertstream byte array input stream bytearrayinputstream ascii data get bytes getbytes nis test binary write and read testbinarywriteandread exception node test node testnode get test root node gettestrootnode add node addnode prefix counter test node testnode get session getsession save node output stream nodeoutputstream node output stream nodeoutputstream test node testnode write binary data close node input stream nodeinputstream nis node input stream nodeinputstream test node testnode assert stream assertstream byte array input stream bytearrayinputstream binary data nis test big binary write and read testbigbinarywriteandread exception node test node testnode get test root node gettestrootnode add node addnode prefix counter test node testnode get session getsession save node output stream nodeoutputstream node output stream nodeoutputstream test node testnode write big data close assert false assertfalse expecting pending test node testnode session test node testnode get session getsession has pending changes haspendingchanges node input stream nodeinputstream nis node input stream nodeinputstream test node testnode assert stream assertstream byte array input stream bytearrayinputstream big data nis test multiple binary writes testmultiplebinarywrites exception node test node testnode get test root node gettestrootnode add node addnode prefix counter test node testnode get session getsession save node output stream nodeoutputstream node output stream nodeoutputstream test node testnode big factor write binary data close assert false assertfalse expecting pending test node testnode session test node testnode get session getsession has pending changes haspendingchanges stream stored hierarchy test node testnode avoid limitations flush called times child count childcount get child count getchildcount test node testnode expect assert true asserttrue expecting expect child nodes test node testnode child count childcount child count childcount expect node input stream nodeinputstream nis node input stream nodeinputstream test node testnode assert stream assertstream byte array input stream bytearrayinputstream big data nis get child count getchildcount node repository exception repositoryexception result node iterator nodeiterator get nodes getnodes has next hasnext result node kid next node nextnode result get child count getchildcount kid result test write with offset testwritewithoffset exception node test node testnode get test root node gettestrootnode add node addnode prefix counter test node testnode get session getsession save node output stream nodeoutputstream node output stream nodeoutputstream test node testnode offset step offset big data length step step math min step big data length offset write big data offset step offset step close node input stream nodeinputstream nis node input stream nodeinputstream test node testnode assert stream assertstream byte array input stream bytearrayinputstream big data nis test chunked read testchunkedread exception node test node testnode get test root node gettestrootnode add node addnode prefix counter test node testnode get session getsession save node output stream nodeoutputstream node output stream nodeoutputstream test node testnode write big data close byte array output stream bytearrayoutputstream actual byte array output stream bytearrayoutputstream big data length buffer node input stream nodeinputstream nis node input stream nodeinputstream test node testnode count count nis read buffer buffer length actual write buffer count nis close assert stream assertstream byte array input stream bytearrayinputstream big data byte array input stream bytearrayinputstream actual to byte array tobytearray big data bigdata data multiplier result data length multiplier dest pos destpos multiplier system arraycopy data result dest pos destpos data length dest pos destpos data length result get binary data getbinarydata byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream random random random write random next int nextint to byte array tobytearray