licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling api resource java text message format messageformat java util collections java util hash map hashmap java util iterator java util map java util no such element exception nosuchelementexception javax annotation check for null checkfornull javax annotation nonnull org apache sling api wrappers value map decorator valuemapdecorator code resource util resourceutil code helper methods dealing resources intended extended instantiated utility methods intended overwritten resource util resourceutil resolves relative path segments absolute path returns points root path absolute check for null checkfornull string normalize nonnull string path don care empty paths path length path prepare path buffer trailing slash simplifies impl abs offset absoffset path char at charat buf path length abs offset absoffset abs offset absoffset buf path get chars getchars path length buf abs offset absoffset buf buf length slash path last slash lastslash number consecutive dots slash num dots numdots buf pos bufpos buf idx bufidx last slash lastslash buf idx bufidx buf length buf idx bufidx buf buf idx bufidx num dots numdots buf pos bufpos buf pos bufpos buf pos bufpos buf buf pos bufpos last slash lastslash buf idx bufidx num dots numdots num dots numdots num dots numdots find slash next slash nextslash buf idx bufidx next slash nextslash buf length buf next slash nextslash next slash nextslash append slash path buf pos bufpos last slash lastslash seg len seglen next slash nextslash buf idx bufidx system arraycopy buf last slash lastslash buf buf pos bufpos seg len seglen buf pos bufpos seg len seglen buf pos bufpos next slash nextslash num dots numdots last slash lastslash next slash nextslash buf idx bufidx next slash nextslash string resolved buf pos bufpos num dots numdots resolved abs offset absoffset buf pos bufpos abs offset absoffset path length resolved path resolved string buf abs offset absoffset buf pos bufpos abs offset absoffset resolved utility method returns parent path code path code normalized link normalize string resolving parent param path path parent returned code code code path code root path code code code path code single slash code code characters illegal argument exception illegalargumentexception path normalized link normalize string method null pointer exception nullpointerexception code path code code code check for null checkfornull string get parent getparent nonnull string path equals path normalize path remove path normalize path normalized root parent path equals path string workspace name workspacename ws sep pos wsseppos path index of indexof ws sep pos wsseppos workspace name workspacename path substring ws sep pos wsseppos path path substring ws sep pos wsseppos find slash cut last slash lastslash path last index of lastindexof last slash lastslash slash path last slash lastslash parent root workspace name workspacename workspace name workspacename string parent path parentpath path substring last slash lastslash workspace name workspacename workspace name workspacename parent path parentpath parent path parentpath utility method returns ancestor path code level code relative code path code normalized link normalize string resolving ancestor code level code returns code path code code level code returns parent code path code exists code code code level code returns grandparent code path code exists code code param path path ancestor returned param level relative level ancestor relative code path code code code code path code doesn ancestor code level code illegal argument exception illegalargumentexception path normalized link normalize string method code level code null pointer exception nullpointerexception code path code code code sling api bundle string get parent getparent string path level level illegal argument exception illegalargumentexception level negative string result path level result get parent getparent result result result utility method returns parent resource resource null pointer exception nullpointerexception code rsrc code code code org apache sling api sling exception slingexception error occurs resource object path illegal state exception illegalstateexception resource resolver closed parent resource rsrc root deprecated link resource get parent getparent deprecated check for null checkfornull resource get parent getparent nonnull resource rsrc rsrc get parent getparent utility method returns resource null pointer exception nullpointerexception code rsrc code code code deprecated link resource get name getname deprecated nonnull string get name getname nonnull resource rsrc abstract resource abstractresource get name getname implementation prevent problems implementations pre resource framework get name getname rsrc get path getpath utility method returns code path code normalized link normalize string resolving param path path path element returned empty string code path code root path code code code path code single slash code code characters illegal argument exception illegalargumentexception path normalized link normalize string method null pointer exception nullpointerexception code path code code code nonnull string get name getname nonnull string path equals path normalize path remove path normalize path equals path find slash path substring path last index of lastindexof returns code code resource code res code synthetic resource method checks resource instance code org apache sling resource synthetic resource syntheticresource code param res code resource code check synthetic resource code code code res code synthetic resource code code returned code res code code code instance code org apache sling resource synthetic resource syntheticresource code is synthetic resource issyntheticresource nonnull resource res res synthetic resource syntheticresource res resource wrapper resourcewrapper res resource wrapper resourcewrapper res get resource getresource res resource wrapper resourcewrapper res synthetic resource syntheticresource returns code code resource code res code star resource star resource resource returned code resource resolver resourceresolver resolve http servlet request httpservletrequest code path terminates code code gen erally generally resource result requests code path code code path html code web applications uniformly handle resources created method checks resource path ends code code indicating star resource param res code resource code check star resource code code code res code considered star resource null pointer exception nullpointerexception code res code code code is star resource isstarresource nonnull resource res res get path getpath ends with endswith returns code code resource code res code existing resource method checks resource type resource match resource type code sling none xisting nonexisting code code non existing resource nonexistingresource code defined sling api param res code resource code check existing resource code code code res code considered existing resource null pointer exception nullpointerexception code res code code code is non existing resource isnonexistingresource nonnull resource res resource resource type existing equals res get resource type getresourcetype returns code iterator code link resource objects loaded children code resource code convenience method link resource resolver resourceresolver list children listchildren resource param parent link resource resource children requested code iterator code link resource objects null pointer exception nullpointerexception code parent code code code illegal state exception illegalstateexception resource resolver closed org apache sling api sling exception slingexception error occurs acquiring child resource iterator resource resolver resourceresolver list children listchildren resource deprecated link resource list children listchildren deprecated nonnull iterator resource list children listchildren nonnull resource parent abstract resource abstractresource list children listchildren implementation prevent problems implementations pre resource framework parent get resource resolver getresourceresolver list children listchildren parent returns code value map valuemap code object code resource code method calls link resource get value map getvaluemap code code resource empty map returned compatibility reasons map returned immutable rec ommend recommend rely behavior param res code resource code adapt map map nonnull value map valuemap get value map getvaluemap nonnull resource res res empty map value map decorator valuemapdecorator hash map hashmap string object res get value map getvaluemap helper method returns resource type returned link org apache sling api resource resource get resource type getresourcetype relative path param type resource type converted path resource type path sling api bundle nonnull string resource type to path resourcetypetopath nonnull string type type replace returns type resource type method converts resource type resource path calling link resource type to path resourcetypetopath string code resource resolver resourceresolver code resource resource exists link resource get resource super type getresourcesupertype method called param resource resolver resourceresolver code resource resolver resourceresolver code access resource path relative absolute code resource type resourcetype code parameter param resource type resourcetype resource type type returned type turned path calling link resource type to path resourcetypetopath string method resource code resource resolver resourceresolver code type code resource type resourcetype code code code resource type exists returns code code type illegal state exception illegalstateexception resource resolver closed sling api bundle deprecated link resource resolver resourceresolver get parent resource type getparentresourcetype string deprecated check for null checkfornull string get resource super type getresourcesupertype nonnull resource resolver resourceresolver resource resolver resourceresolver string resource type resourcetype resource resolver resourceresolver get parent resource type getparentresourcetype resource type resourcetype returns type resource method checks resource type calling link resource get resource super type getresourcesupertype returns code code link get resource super type getresourcesupertype resource resolver resourceresolver string invoked resource type resource param resource resource resource type type code resource code code code type computed illegal state exception illegalstateexception resource resolver closed sling api bundle deprecated link resource resolver resourceresolver get parent resource type getparentresourcetype resource deprecated check for null checkfornull string find resource super type findresourcesupertype nonnull resource resource resource resource get resource resolver getresourceresolver get parent resource type getparentresourcetype resource check resource type method checks resource type resource resource type continues resource type hierarchy param resource resource check param resource type resourcetype resource type check resource code code code resource code code code returns result calling link resource is resource type isresourcetype string code resource type resourcetype code illegal state exception illegalstateexception resource resolver closed sling api bundle deprecated link resource resolver resourceresolver is resource type isresourcetype resource string deprecated is a isa nonnull resource resource string resource type resourcetype resource resource get resource resolver getresourceresolver is resource type isresourcetype resource resource type resourcetype iterator objects type iterator returned adapt resources type link resource adapt to adaptto resource original iterator adaptable object skipped impl ies implies number objects returned iterator number resource objects param iterator resource iterator param adapted type sling api bundle nonnull iterator adapt to adaptto nonnull iterator resource iterator type iterator next object nextobject see k seek override has next hasnext next object nextobject override has next hasnext no such element exception nosuchelementexception object next object nextobject next object nextobject see k seek object override remove unsupported operation exception unsupportedoperationexception see k seek result result iterator has next hasnext resource iterator result adapt to adaptto type result creates resource path param resolver resource resolver creation param path full path created param resource type resourcetype optional resource type resource create param int ermediate resource type intermediateresourcetype optional resource type int ermediate intermediate resources param auto commit autocommit commit performed resource creation resource path org apache sling api sling exception slingexception error occurs create resource object path illegal state exception illegalstateexception resource resolver closed sling api bundle nonnull resource get or create resource getorcreateresource nonnull resource resolver resourceresolver resolver nonnull string path string resource type resourcetype string int ermediate resource type intermediateresourcetype auto commit autocommit persistence exception persistenceexception map string object props resource type resourcetype props props collections singleton map singletonmap resource resolver resourceresolver property resource type object resource type resourcetype get or create resource getorcreateresource resolver path props int ermediate resource type intermediateresourcetype auto commit autocommit creates resource path exception occurs retries operation times auto commit autocommit enabled link resource resolver resourceresolver revert called resolver creation ret ried retried param resolver resource resolver creation param path full path created param resource properties resourceproperties optional resource properties resource create param int ermediate resource type intermediateresourcetype optional resource type int ermediate intermediate resources param auto commit autocommit commit performed resource creation resource path org apache sling api sling exception slingexception error occurs create resource object path illegal state exception illegalstateexception resource resolver closed sling api bundle nonnull resource get or create resource getorcreateresource nonnull resource resolver resourceresolver resolver nonnull string path map string object resource properties resourceproperties string int ermediate resource type intermediateresourcetype auto commit autocommit persistence exception persistenceexception persistence exception persistenceexception most recent e mostrecentpe resource util resourceutil get or create resource internal getorcreateresourceinternal resolver path resource properties resourceproperties int ermediate resource type intermediateresourcetype auto commit autocommit persistence exception persistenceexception auto commit autocommit resolver revert resolver refresh most recent e mostrecentpe most recent e mostrecentpe creates resource path param resolver resource resolver creation param path full path created param resource properties resourceproperties optional resource properties resource create param int ermediate resource type intermediateresourcetype optional resource type int ermediate intermediate resources param auto commit autocommit commit performed resource creation resource path org apache sling api sling exception slingexception error occurs create resource object path illegal state exception illegalstateexception resource resolver closed resource get or create resource internal getorcreateresourceinternal resource resolver resourceresolver resolver string path map string object resource properties resourceproperties string int ermediate resource type intermediateresourcetype auto commit autocommit persistence exception persistenceexception resource rsrc resolver get resource getresource path rsrc last pos lastpos path last index of lastindexof string path substring last pos lastpos resource parent resource parentresource last pos lastpos parent resource parentresource resolver get resource getresource string parent path parentpath path substring last pos lastpos parent resource parentresource get or create resource getorcreateresource resolver parent path parentpath int ermediate resource type intermediateresourcetype int ermediate resource type intermediateresourcetype auto commit autocommit auto commit autocommit resolver refresh retry retry rsrc rsrc resolver create parent resource parentresource resource properties resourceproperties check sns equals rsrc get name getname resolver refresh resolver delete rsrc rsrc resolver get resource getresource parent resource parentresource retry rsrc persistence exception persistenceexception unable create resource persistence exception persistenceexception resolver refresh rsrc resolver get resource getresource parent resource parentresource rsrc auto commit autocommit resolver commit resolver refresh rsrc resolver get resource getresource parent resource parentresource persistence exception persistenceexception resolver revert resolver refresh rsrc resolver get resource getresource parent resource parentresource rsrc rsrc resolver create parent resource parentresource resource properties resourceproperties resolver commit rsrc create unique child code parent code creates unique test child exists child resource exists iter ate iterate unique param parent parent resource param child resource unique existing child resource code parent code persistence exception persistenceexception find unique child resource null pointer exception nullpointerexception code parent code illegal state exception illegalstateexception resource resolver closed sling api bundle string create unique child name createuniquechildname resource parent string persistence exception persistenceexception parent get child getchild leaf node exists create unique string child node name childnodename child node name childnodename string value of valueof happen integer max string message message format messageformat format find unique parent get path getpath persistence exception persistenceexception message parent get child getchild child node name childnodename child node name childnodename unwrap resource wrapped implementation param rsrc resource unwrap unwrapped resource sling api bundle nonnull resource unwrap nonnull resource rsrc resource result rsrc result resource wrapper resourcewrapper result resource wrapper resourcewrapper result get resource getresource result batch resource remove r remover deletes resources batches batch size threshold reached int ermediate intermediate commit performed resource trees deleted resource resource starting deepest children resources passed batch resource remove r remover commit called resource resolver sling api bundle batch resource remove r batchresourceremover max count batch resource remove r batchresourceremover batch size batchsize max batch size batchsize batch size batchsize delete nonnull resource rsrc persistence exception persistenceexception resource resolver resourceresolver resolver rsrc get resource resolver getresourceresolver resource child rsrc get children getchildren delete child resolver delete rsrc count count max resolver commit count create batch resource remove r remover batch resource remove delete resources batches passed threshold deleted resources reached int ermediate intermediate commit called resource resolver add ition addition batch remove r remover deletes resource recursively resources delete passed remove r remover commit call resource resolver param threshold threshold int ermediate intermediate saves batch resource remove r remover nonnull batch resource remove r batchresourceremover get batch resource remove r getbatchresourceremover threshold batch resource remove r batchresourceremover threshold