licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting java script javascript internal java output stream writer outputstreamwriter java print writer printwriter java string writer stringwriter java util hash map hashmap java util map javax script bindings javax script script context scriptcontext javax script script engine scriptengine javax script script exception scriptexception javax script simple bindings simplebindings javax script simple script context simplescriptcontext org apache sling commons testing osgi mock bundle mockbundle org apache sling commons testing osgi mock component context mockcomponentcontext org apache sling scripting api script cache scriptcache org mockito mockito org mockito internal util ref lection reflection white box whitebox org mozilla java script javascript context org mozilla java script javascript scriptable object scriptableobject org mozilla java script javascript wrapper org osgi framework bundle context bundlecontext help ers helpers java script javascript code fragments tests script engine helper scriptenginehelper script engine scriptengine engine script cache scriptcache script cache scriptcache mockito mock script cache scriptcache data hash map hashmap string object script engine scriptengine get engine getengine engine script engine helper scriptenginehelper rhino java script engine factory rhinojavascriptenginefactory rhino java script engine factory rhinojavascriptenginefactory white box whitebox set internal state setinternalstate script cache scriptcache script cache scriptcache activate rhino mock component context rhinomockcomponentcontext engine get script engine getscriptengine engine string eval to string evaltostring string java script code javascriptcode script exception scriptexception eval to string evaltostring java script code javascriptcode object eval string java script code javascriptcode map string object data script exception scriptexception eval java script code javascriptcode data string writer stringwriter string eval to string evaltostring string java script code javascriptcode map string object data script exception scriptexception string writer stringwriter string writer stringwriter eval java script code javascriptcode data to string tostring object eval string java script code javascriptcode map string object data string writer stringwriter script exception scriptexception print writer printwriter print writer printwriter script context scriptcontext ctx simple script context simplescriptcontext bindings simple bindings simplebindings data map entry string object data entry set entryset get key getkey get value getvalue ctx set bindings setbindings script context scriptcontext engine scope ctx set writer setwriter ctx set error writer seterrorwriter output stream writer outputstreamwriter system err object result get engine getengine eval java script code javascriptcode ctx result wrapper result wrapper result unwrap result scriptable object scriptableobject context enter result scriptable object scriptableobject result get default value getdefaultvalue context exit result rhino mock component context rhinomockcomponentcontext mock component context mockcomponentcontext bundle context bundlecontext bundle context bundlecontext mockito mock bundle context bundlecontext rhino mock component context rhinomockcomponentcontext mock bundle mockbundle override bundle context bundlecontext get bundle context getbundlecontext bundle context bundlecontext