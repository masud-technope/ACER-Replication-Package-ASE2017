licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource org junit java util arrays javax jcr name space registry namespaceregistry javax jcr node javax jcr repository exception repositoryexception javax jcr session javax jcr version version manager versionmanager javax naming naming exception namingexception org apache commons lang array utils arrayutils org apache jackrabbit jcr constants jcrconstants org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource value map valuemap org apache sling testing mock sling mock resolver provider mockresolverprovider org junit org junit org junit test resource versioning test resourceversioningtest version manager versionmanager version manager versionmanager node test node testnode resource resolver resourceresolver resolver session session set up setup exception resolver mock resolver provider mockresolverprovider get resource resolver getresourceresolver session resolver adapt to adaptto session version manager versionmanager session get workspace getworkspace get version manager getversionmanager register name space registernamespace sling http sling apache org jcr sling node test root testroot session get root node getrootnode add node addnode content test node testnode test root testroot add node addnode test test node testnode add mixin addmixin jcr constants jcrconstants mix version able versionable session save version manager versionmanager check out checkout test node testnode get path getpath test node testnode set property setproperty prop old value oldvalue test node testnode add node addnode add node addnode set property setproperty child prop child session save version manager versionmanager check in checkin test node testnode get path getpath version manager versionmanager check out checkout test node testnode get path getpath test node testnode set property setproperty prop new value newvalue test node testnode get property getproperty child prop set value setvalue child session save version manager versionmanager check in checkin test node testnode get path getpath tear down teardown exception session remove item removeitem content session save resolver close test get resource on version able node getresourceonversionablenode repository exception repositoryexception naming exception namingexception resource resource resolver get resource getresource content test string prop resource adapt to adaptto value map valuemap prop string assert equals assertequals old value oldvalue prop assert equals assertequals content test resource get path getpath test get resource on version able property getresourceonversionableproperty repository exception repositoryexception naming exception namingexception resource resource resolver get resource getresource content test prop string prop resource adapt to adaptto string assert equals assertequals old value oldvalue prop assert equals assertequals content test prop resource get path getpath test resolve on version able node resolveonversionablenode repository exception repositoryexception naming exception namingexception string path arrays as list aslist content test html content test html content test html suffix content test html suffix resource resource resolver resolve path string prop resource adapt to adaptto value map valuemap prop string assert equals assertequals old value oldvalue prop assert equals assertequals content test resource get path getpath test get resource on version able descendant getresourceonversionabledescendant repository exception repositoryexception naming exception namingexception resource resource resolver get resource getresource content test string prop resource adapt to adaptto value map valuemap child prop string assert equals assertequals child prop assert equals assertequals content test resource get path getpath test get resource on version able descendant property getresourceonversionabledescendantproperty repository exception repositoryexception naming exception namingexception resource resource resolver get resource getresource content test child prop string prop resource adapt to adaptto string assert equals assertequals child prop assert equals assertequals content test child prop resource get path getpath test get child on version able resource getchildonversionableresource repository exception repositoryexception naming exception namingexception resource resource resolver get resource getresource content test get child getchild string prop resource adapt to adaptto value map valuemap child prop string assert equals assertequals child prop assert equals assertequals content test resource get path getpath test list children on version able resource listchildrenonversionableresource repository exception repositoryexception naming exception namingexception resource resource resolver get resource getresource content test list children listchildren string prop resource adapt to adaptto value map valuemap child prop string assert equals assertequals child prop assert equals assertequals content test resource get path getpath test get parent on version able resource getparentonversionableresource repository exception repositoryexception naming exception namingexception resource resource resolver get resource getresource content test get parent getparent string prop resource adapt to adaptto value map valuemap prop string assert equals assertequals new value newvalue prop assert equals assertequals content test resource get path getpath register name space registernamespace string prefix string uri repository exception repositoryexception name space registry namespaceregistry registry session get workspace getworkspace get name space registry getnamespaceregistry array utils arrayutils registry get prefixes getprefixes prefix session get workspace getworkspace get name space registry getnamespaceregistry register name space registernamespace prefix uri