licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide osgi impl java byte array output stream bytearrayoutputstream java i o exception ioexception java input stream inputstream java input stream reader inputstreamreader java util array list arraylist java util list org apache commons httpclient credentials org apache commons httpclient http client httpclient org apache commons httpclient http exception httpexception org apache commons httpclient http status httpstatus org apache commons httpclient username password credentials usernamepasswordcredentials org apache commons httpclient auth scope authscope org apache commons httpclient methods get method getmethod org apache commons httpclient methods post method postmethod org apache commons httpclient methods multipart byte array part source bytearraypartsource org apache commons httpclient methods multipart file part filepart org apache commons httpclient methods multipart multipart request entity multipartrequestentity org apache commons httpclient methods multipart org apache commons httpclient methods multipart part source partsource org apache commons httpclient methods multipart string part stringpart org apache commons i o utils ioutils org apache sling ide osgi osgi client osgiclient org apache sling ide osgi osgi client exception osgiclientexception org apache sling ide transport repository info repositoryinfo org json json array jsonarray org json json exception jsonexception org json json object jsonobject org json json t okener jsontokener org osgi framework version http osgi client httposgiclient osgi client osgiclient socket timeout seconds connect timeout seconds repository info repositoryinfo repository info repositoryinfo http osgi client httposgiclient repository info repositoryinfo repository info repositoryinfo repository info repositoryinfo repository info repositoryinfo override version get bundle version getbundleversion string bundle symbolic name bundlesymbolicname osgi client exception osgiclientexception get method getmethod method get method getmethod repository info repositoryinfo append path appendpath system console bundles json http client httpclient client get http client gethttpclient result client execute method executemethod method result http status httpstatus http exception httpexception status code result call method geturi input stream inputstream input method get response body as stream getresponsebodyasstream json object jsonobject object json object jsonobject json t okener jsontokener input stream reader inputstreamreader input json array jsonarray bundle data bundledata object getjsonarray data bundle data bundledata length json object jsonobject bundle bundle data bundledata getjsonobject string remote bundle symbolic name remotebundlesymbolicname bundle get string getstring symbolic name symbolicname version bundle version bundleversion version bundle get string getstring version bundle symbolic name bundlesymbolicname equals remote bundle symbolic name remotebundlesymbolicname bundle version bundleversion i o exception ioexception json exception jsonexception osgi client exception osgiclientexception method release connection releaseconnection http client httpclient get http client gethttpclient http client httpclient client http client httpclient client get http connection manager gethttpconnectionmanager get params getparams set connection timeout setconnectiontimeout connect timeout seconds client get http connection manager gethttpconnectionmanager get params getparams set so timeout setsotimeout socket timeout seconds client get params getparams set authentication preemptive setauthenticationpreemptive credentials default creds defaultcreds username password credentials usernamepasswordcredentials repository info repositoryinfo get username getusername repository info repositoryinfo get password getpassword client get state getstate set credentials setcredentials auth scope authscope repository info repositoryinfo get host gethost repository info repositoryinfo get port getport auth scope authscope realm default creds defaultcreds client override install bundle installbundle input stream inputstream string file name filename osgi client exception osgiclientexception illegal argument exception illegalargumentexception file name filename illegal argument exception illegalargumentexception file name filename append pseudo path root url redirected post method postmethod file post filepost post method postmethod repository info repositoryinfo append path appendpath system console install ref errer referrer file post filepost set request header setrequestheader ref erer referer blank list part list partlist array list arraylist part list partlist add string part stringpart action install part list partlist add string part stringpart nor edir noredir nor edir noredir byte array output stream bytearrayoutputstream baos byte array output stream bytearrayoutputstream i o utils ioutils copy baos part source partsource part source partsource byte array part source bytearraypartsource file name filename baos to byte array tobytearray part list partlist add file part filepart bundle file bundlefile part source partsource part list partlist add string part stringpart bundles tar t bundlestart start parts part list partlist to array toarray part list partlist size file post filepost set request entity setrequestentity multipart request entity multipartrequestentity parts file post filepost get params getparams status get http client gethttpclient execute method executemethod file post filepost status osgi client exception osgiclientexception method execution returned status status i o exception ioexception osgi client exception osgiclientexception file post filepost release connection releaseconnection override install local bundle installlocalbundle string exp loded bundle location explodedbundlelocation osgi client exception osgiclientexception exp loded bundle location explodedbundlelocation illegal argument exception illegalargumentexception exp loded bundle location explodedbundlelocation local bundle installer localbundleinstaller get http client gethttpclient repository info repositoryinfo override configure request configurerequest post method postmethod method method add parameter addparameter dir exp loded bundle location explodedbundlelocation install bundle installbundle override install local bundle installlocalbundle input stream inputstream jar red bundle jarredbundle string source location sourcelocation osgi client exception osgiclientexception jar red bundle jarredbundle illegal argument exception illegalargumentexception jar red bundle jarredbundle local bundle installer localbundleinstaller get http client gethttpclient repository info repositoryinfo override configure request configurerequest post method postmethod method i o exception ioexception parts file part filepart bundle byte array part source bytearraypartsource bundle jar i o utils ioutils to byte array tobytearray jar red bundle jarredbundle method set request entity setrequestentity multipart request entity multipartrequestentity parts method get params getparams install bundle installbundle local bundle installer localbundleinstaller http client httpclient http client httpclient repository info repositoryinfo repository info repositoryinfo local bundle installer localbundleinstaller http client httpclient http client httpclient repository info repositoryinfo repository info repositoryinfo http client httpclient http client httpclient repository info repositoryinfo repository info repositoryinfo install bundle installbundle osgi client exception osgiclientexception post method postmethod method post method postmethod repository info repositoryinfo append path appendpath system sling tooling install configure request configurerequest method status http client httpclient execute method executemethod method status json object jsonobject result parse result parseresult method result message osgi client exception osgiclientexception result get string getstring message json exception jsonexception osgi client exception osgiclientexception method execution returned status status json object jsonobject obj parse result parseresult method equals obj get string getstring status string error message errormessage obj message bundle deployment failed check sling logs obj get string getstring message osgi client exception osgiclientexception error message errormessage i o exception ioexception osgi client exception osgiclientexception json exception jsonexception osgi client exception osgiclientexception response valid json install servlet installservlet installed expected location method release connection releaseconnection json object jsonobject parse result parseresult post method postmethod method i o exception ioexception json exception jsonexception byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream i o utils ioutils copy method get response body as stream getresponsebodyasstream json object jsonobject string to byte array tobytearray utf configure request configurerequest post method postmethod method i o exception ioexception