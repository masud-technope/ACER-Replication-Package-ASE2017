licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting core impl java util array list arraylist java util list java util concurrent concurrent hash map concurrenthashmap org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service event serviceevent org osgi framework service listener servicelistener org osgi framework service reference servicereference service cache servicecache service listener servicelistener bundle context bundlecontext bundle context bundlecontext reference reference reference concurrent hash map concurrenthashmap string reference cache concurrent hash map concurrenthashmap string reference list references don synchronize running single request list service reference servicereference references array list arraylist service reference servicereference service cache servicecache bundle context bundlecontext ctx bundle context bundlecontext ctx bundle context bundlecontext add service listener addservicelistener dispose bundle context bundlecontext remove service listener removeservicelistener reference cache values reference bundle context bundlecontext unget service ungetservice reference service service param service type servicetype service param type requested service service code code suppress warnings suppresswarnings unchecked service type servicetype service type servicetype get service getservice service type servicetype type string key type get name getname reference reference cache key reference service service reference servicereference bundle context bundlecontext get service reference getservicereference key object service bundle context bundlecontext get service getservice service reference reference reference service service reference reference assume missing service reference reference reference check thread reference existing cache key existing cache key reference reference existing unget service thread faster bundle context bundlecontext unget service ungetservice service type servicetype reference service org osgi framework service listener servicelistener service changed servicechanged org osgi framework service event serviceevent service changed servicechanged service event serviceevent event string object classes objectclasses string event get service reference getservicereference get property getproperty constants object class objectclass object classes objectclasses string key object classes objectclasses reference cache remove key reference bundle context bundlecontext unget service ungetservice reference reference service reference servicereference reference object service