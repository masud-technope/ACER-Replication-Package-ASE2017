licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution component impl java io exception ioexception java util array list arraylist java util arrays java util dictionary java util hash map hashmap java util list java util map java util regex matcher java util regex pattern org apache felix scr annotations component org apache felix scr annotations reference org apache felix scr annotations service org apache sling commons osgi properties util propertiesutil org apache sling distribution resources impl osgi utils osgiutils org osgi framework invalid syntax exception invalidsyntaxexception org osgi service configuration org osgi service configuration admin configurationadmin org slf logger org slf logger factory loggerfactory link org apache sling distribution component impl distribution component manager distributioncomponentmanager implementation based osgi configs tree properties osgi configs generated registered configuration admin configurationadmin delete component configs owned component unregistered configuration admin configurationadmin component service distribution configuration manager distributionconfigurationmanager default distribution configuration manager defaultdistributionconfigurationmanager distribution configuration manager distributionconfigurationmanager logger log logger factory loggerfactory get logger getlogger get class getclass reference configuration admin configurationadmin configuration admin configurationadmin list distribution configuration distributionconfiguration get configs getconfigs distribution component kind distributioncomponentkind kind list configuration configurations get osgi configurations getosgiconfigurations kind list distribution configuration distributionconfiguration result array list arraylist distribution configuration distributionconfiguration configurations configurations size result configuration configuration configurations dictionary properties dict propertiesdict configuration get properties getproperties map string object properties osgi utils osgiutils from dictionary fromdictionary properties dict propertiesdict properties filter before read filterbeforeread properties string properties util propertiesutil to string tostring properties distribution component constants distributioncomponentconstants result add distribution configuration distributionconfiguration kind properties result distribution configuration distributionconfiguration get config getconfig distribution component kind distributioncomponentkind kind string list configuration configurations get osgi configurations getosgiconfigurations kind configurations configurations size configuration configuration configurations configuration dictionary properties configuration get properties getproperties map string object result osgi utils osgiutils from dictionary fromdictionary properties string factory pid factorypid properties util propertiesutil to string tostring result configuration admin configurationadmin service factory pid factorypid string type kind get type gettype factory pid factorypid result distribution component constants distributioncomponentconstants type type result filter before read filterbeforeread result distribution configuration distributionconfiguration kind result save config saveconfig distribution configuration distributionconfiguration config string component name componentname config get name getname distribution component kind distributioncomponentkind component kind componentkind config get kind getkind map string object properties config get properties getproperties string component type componenttype properties util propertiesutil to string tostring properties distribution component constants distributioncomponentconstants type component kind componentkind component type componenttype illegal argument exception illegalargumentexception kind type required string factory pid factorypid component kind componentkind get factory getfactory component type componenttype factory pid factorypid properties distribution component constants distributioncomponentconstants component name componentname configuration configuration save osgi config saveosgiconfig factory pid factorypid component name componentname properties delete config deleteconfig distribution component kind distributioncomponentkind kind string list configuration configs get osgi configurations getosgiconfigurations kind delete osgi configs deleteosgiconfigs configs log info delete component delete osgi configs deleteosgiconfigs list configuration configurations configuration configuration configurations string pid configuration get pid getpid configuration delete log info deleted configuration pid io exception ioexception log warn delete configuration pid list configuration get osgi configurations getosgiconfigurations distribution component kind distributioncomponentkind kind string component name componentname list string factory pids factorypids kind get factories getfactories list configuration all configurations allconfigurations array list arraylist configuration string factory pid factorypid factory pids factorypids list configuration configurations get osgi configurations from factory getosgiconfigurationsfromfactory factory pid factorypid component name componentname all configurations allconfigurations add all addall configurations all configurations allconfigurations configuration save osgi config saveosgiconfig string factory pid factorypid string component name componentname map string object properties list configuration configurations get osgi configurations from factory getosgiconfigurationsfromfactory factory pid factorypid component name componentname configuration configuration configurations configurations size configuration configuration admin configurationadmin create factory configuration createfactoryconfiguration factory pid factorypid configuration configurations properties filter before save filterbeforesave properties configuration update osgi utils osgiutils to dictionary todictionary properties configuration io exception ioexception log error create configuration factory factory pid factorypid list configuration get osgi configurations from factory getosgiconfigurationsfromfactory string factory pid factorypid string component name componentname list configuration result array list arraylist configuration string filter osgi utils osgiutils get filter getfilter factory pid factorypid distribution component constants distributioncomponentconstants component name componentname configuration configurations configuration admin configurationadmin list configurations listconfigurations filter configurations result add all addall arrays as list aslist configurations io exception ioexception log error osgi configs invalid syntax exception invalidsyntaxexception log error parse filter result map string object filter before save filterbeforesave map string object properties map string object result hash map hashmap string object map entry string object entry properties entry set entryset entry get key getkey ends with endswith target string entry value entryvalue string entry get value getvalue entry value entryvalue pack osgi filter packosgifilter entry value entryvalue entry value entryvalue result entry get key getkey entry value entryvalue result entry get key getkey entry get value getvalue result osgi utils osgiutils sanitize result result map string object filter before read filterbeforeread map string object properties map string object result hash map hashmap string object map entry string object entry properties entry set entryset entry get key getkey ends with endswith target string entry value entryvalue string entry get value getvalue entry value entryvalue unpack osgi filter unpackosgifilter entry value entryvalue entry value entryvalue result entry get key getkey entry value entryvalue result entry get key getkey entry get value getvalue result osgi utils osgiutils sanitize result result string unpack osgi filter unpackosgifilter string property value propertyvalue string result string name pattern namepattern distribution component constants distributioncomponentconstants pattern pattern compile name pattern namepattern matcher matcher property value propertyvalue matches result group result string pack osgi filter packosgifilter string property value propertyvalue distribution component constants distributioncomponentconstants osgi utils osgiutils escape property value propertyvalue