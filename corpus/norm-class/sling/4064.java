licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal helper jcr java closeable java io exception ioexception java security principal java util collection java util hash set hashset java util iterator java util map java util java util concurrent executor javax annotation check for null checkfornull javax annotation nonnull javax jcr access denied exception accessdeniedexception javax jcr item javax jcr node javax jcr repository javax jcr repository exception repositoryexception javax jcr session org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations reference policy referencepolicy org apache felix scr annotations service org apache jackrabbit api jackrabbit session jackrabbitsession org apache jackrabbit api security user authorizable org apache jackrabbit api security user user manager usermanager org apache sling api sling exception slingexception org apache sling api resource login exception loginexception org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver factory resourceresolverfactory org apache sling api resource resource util resourceutil org apache sling commons class loader classloader dynamic class loader manager dynamicclassloadermanager org apache sling commons osgi properties util propertiesutil org apache sling jcr api sling repository slingrepository org apache sling jcr resource jcr resource constants jcrresourceconstants org apache sling jcr resource internal helper data helperdata org apache sling jcr resource internal jcr modifiable value map jcrmodifiablevaluemap org apache sling jcr resource internal jcr resource listener jcrresourcelistener org apache sling jcr resource internal node util nodeutil org apache sling jcr resource internal oak resource listener oakresourcelistener org apache sling jcr resource internal observation listener support observationlistenersupport org apache sling spi resource provider jcr query provider jcrqueryprovider org apache sling spi resource provider provider context providercontext org apache sling spi resource provider resolver context resolvercontext org apache sling spi resource provider resource context resourcecontext org apache sling spi resource provider resource provider resourceprovider org osgi framework bundle context bundlecontext org osgi framework service reference servicereference org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory component service resource provider resourceprovider properties property resource provider resourceprovider property jcr property resource provider resourceprovider property root property resource provider resourceprovider property mod ifiable modifiable bool value boolvalue property resource provider resourceprovider property adaptable bool value boolvalue property resource provider resourceprovider property authenticate resource provider resourceprovider authenticate required property resource provider resourceprovider property attr ibutable attributable bool value boolvalue property resource provider resourceprovider property refresh able refreshable bool value boolvalue jcr resource provider jcrresourceprovider resource provider resourceprovider jcr provider state jcrproviderstate logger logger log logger factory loggerfactory get logger getlogger jcr resource provider jcrresourceprovider string repository ref ernence refernence repository string properties hash set hashset string properties add node util nodeutil mixin types properties add node util nodeutil node type properties add jcr created properties add jcr created by createdby optimize oak property bool value boolvalue optimize oak label optimize oak description enabled oak repository implementation optimized components string property optimize oak optimize oak observation queue length property int value intvalue observation queue length label observation queue length description maximum number pending revisions observation listener queue string observation queue length oak observation queue length reference repository ref ernence refernence reference interface referenceinterface sling repository slingrepository service reference servicereference repository reference repositoryreference reference path mapper pathmapper path mapper pathmapper dynamic loader reference cardinality reference cardinality referencecardinality optional unary policy reference policy referencepolicy dynamic dynamic class loader manager dynamicclassloadermanager dynamic class loader manager dynamicclassloadermanager service oak optional reference policy reference policy referencepolicy cardinality reference cardinality referencecardinality optional unary executor executor jcr observation listener closeable listener sling repository slingrepository repository observation queue length observationqueuelength optimize for oak optimizeforoak string root bundle context bundlecontext bundle ctx bundlectx jcr provider state factory jcrproviderstatefactory state factory statefactory activate activate component context componentcontext context repository exception repositoryexception sling repository slingrepository repository sling repository slingrepository context locate service locateservice repository ref ernence refernence repository reference repositoryreference repository concurrent unregistration sling repository slingrepository service don care component deactivated working log warn activate activation failed sling repository slingrepository unregistered concurrently repository repository observation queue length observationqueuelength properties util propertiesutil to integer tointeger context get properties getproperties observation queue length observation queue length optimize for oak optimizeforoak properties util propertiesutil to boolean toboolean context get properties getproperties property optimize oak optimize oak root properties util propertiesutil to string tostring context get properties getproperties resource provider resourceprovider property root bundle ctx bundlectx context get bundle context getbundlecontext helper data helperdata helper data helperdata helper data helperdata dynamic class loader manager dynamicclassloadermanager get dynamic class loader getdynamicclassloader path mapper pathmapper state factory statefactory jcr provider state factory jcrproviderstatefactory repository reference repositoryreference repository helper data helperdata deactivate deactivate unregister legacy listener unregisterlegacylistener override start provider context providercontext ctx start ctx register legacy listener registerlegacylistener override unregister legacy listener unregisterlegacylistener suppress warnings suppresswarnings unused bind repository bindrepository service reference servicereference repository reference repositoryreference repository suppress warnings suppresswarnings unused unbind repository unbindrepository service reference servicereference repository reference repositoryreference repository reference repositoryreference repository register legacy listener registerlegacylistener check oak is oak isoak optimize for oak optimizeforoak string repo desc repodesc repository get descriptor getdescriptor repository rep desc repo desc repodesc repo desc repodesc to lower case tolowercase oak executor is oak isoak log error detected oak based repository executor service unable improved jcr resource listener observation listener support observationlistenersupport support close support closesupport support observation listener support observationlistenersupport bundle ctx bundlectx repository get provider context getprovidercontext get excluded paths getexcludedpaths is oak isoak listener oak resource listener oakresourcelistener root support bundle ctx bundlectx executor path mapper pathmapper observation queue length observationqueuelength log info detected oak based repository improved jcr resource listener observation queue length observation queue length observationqueuelength repository exception repositoryexception sling exception slingexception create oak resource listener oakresourcelistener throwable log error unable instantiate improved jcr resource listener oak fallback listener listener jcr resource listener jcrresourcelistener root support path mapper pathmapper close support closesupport repository exception repositoryexception sling exception slingexception create listener close support closesupport support support dispose unregister legacy listener unregisterlegacylistener listener listener close io exception ioexception listener create resource resolver resourceresolver wrapping session object carries map authentication info order create resolver needed override nonnull jcr provider state jcrproviderstate authenticate nonnull map string object authentication info authenticationinfo login exception loginexception state factory statefactory create provider state createproviderstate authentication info authenticationinfo override log out logout nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx ctx get provider state getproviderstate log out logout override is live islive nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx ctx get provider state getproviderstate get session getsession is live islive override resource get resource getresource resolver context resolvercontext jcr provider state jcrproviderstate ctx string path resource context resourcecontext r ctx rctx resource parent ctx get provider state getproviderstate get resource factory getresourcefactory create resource createresource ctx get resource resolver getresourceresolver path parent r ctx rctx get resolve parameters getresolveparameters repository exception repositoryexception sling exception slingexception resource override iterator resource list children listchildren resolver context resolvercontext jcr provider state jcrproviderstate ctx resource parent jcr item resource jcritemresource parent item resource parentitemresource cut jcr resources parent jcr item resource jcritemresource parent item resource parentitemresource jcr item resource jcritemresource parent children parent item resource parentitemresource ctx get provider state getproviderstate get resource factory getresourcefactory create resource createresource parent get resource resolver getresourceresolver parent get path getpath parent get resource metadata getresourcemetadata get parameter map getparametermap repository exception repositoryexception sling exception slingexception list children children parent item resource parent item resource parentitemresource parent item resource parentitemresource list jcr children listjcrchildren override check for null checkfornull resource get parent getparent nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx nonnull resource child child jcr item resource jcritemresource string version child get resource metadata getresourcemetadata get parameter map getparametermap version child get resource metadata getresourcemetadata get parameter map getparametermap version item item jcr item resource jcritemresource child get item getitem equals item get path getpath node parent node parentnode parent node parentnode item get parent getparent access denied exception accessdeniedexception string parent path parentpath resource util resourceutil get parent getparent child get path getpath jcr node resource jcrnoderesource ctx get resource resolver getresourceresolver parent path parentpath version parent node parentnode ctx get provider state getproviderstate get helper data gethelperdata repository exception repositoryexception log warn parent child get parent getparent ctx child override collection string get attribute names getattributenames nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx string names hash set hashset string string session names sessionnames ctx get provider state getproviderstate get session getsession get attribute names getattributenames string session names sessionnames is attribute visible isattributevisible names add names override object get attribute getattribute nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx nonnull string is attribute visible isattributevisible resource resolver factory resourceresolverfactory user equals ctx get provider state getproviderstate get session getsession get user d getuserid ctx get provider state getproviderstate get session getsession get attribute getattribute override resource create nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx string path map string object properties persistence exception persistenceexception check node type object node obj nodeobj properties properties node util nodeutil node type check sling resource type resourcetype string node type nodetype node obj nodeobj node type nodetype node obj nodeobj to string tostring object rt obj rtobj properties properties jcr resource constants jcrresourceconstants sling resource type property is node type isnodetype rt obj rtobj string resource type resourcetype rt obj rtobj to string tostring resource type resourcetype index of indexof resource type resourcetype index of indexof ctx get provider state getproviderstate get session getsession get workspace getworkspace get node type manager getnodetypemanager get node type getnodetype resource type resourcetype is node type isnodetype repository exception repositoryexception ignore is node type isnodetype node type nodetype rt obj rtobj to string tostring node type nodetype string jcr path jcrpath path mapper pathmapper map resource path to path mapresourcepathtojcrpath path jcr path jcrpath persistence exception persistenceexception unable create node path path node node last pos lastpos jcr path jcrpath last index of lastindexof node parent last pos lastpos parent ctx get provider state getproviderstate get session getsession get root node getrootnode parent node ctx get provider state getproviderstate get session getsession get item getitem jcr path jcrpath substring last pos lastpos string jcr path jcrpath substring last pos lastpos node type nodetype node parent add node addnode node type nodetype node parent add node addnode properties create modifiable map jcr modifiable value map jcrmodifiablevaluemap jcr map jcrmap jcr modifiable value map jcrmodifiablevaluemap node ctx get provider state getproviderstate get helper data gethelperdata check mixin types object properties node util nodeutil mixin types jcr map jcrmap node util nodeutil mixin types map entry string object entry properties entry set entryset properties entry get key getkey jcr map jcrmap entry get key getkey entry get value getvalue illegal argument exception illegalargumentexception iae node remove repository exception repositoryexception persistence exception persistenceexception iae get message getmessage iae path entry get key getkey jcr node resource jcrnoderesource ctx get resource resolver getresourceresolver path node ctx get provider state getproviderstate get helper data gethelperdata repository exception repositoryexception persistence exception persistenceexception unable create node jcr path jcrpath path override delete nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx nonnull resource resource persistence exception persistenceexception jcr item resource jcritemresource resource get item getitem remove repository exception repositoryexception persistence exception persistenceexception unable delete resource resource get path getpath override revert nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx ctx get provider state getproviderstate get session getsession refresh repository exception repositoryexception ignore log warn unable revert pending ignore override commit nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx persistence exception persistenceexception ctx get provider state getproviderstate get session getsession save repository exception repositoryexception persistence exception persistenceexception unable commit session override has changes haschanges nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx ctx get provider state getproviderstate get session getsession has pending changes haspendingchanges repository exception repositoryexception ignore log warn unable check session pending ignore override refresh nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx ctx get provider state getproviderstate get session getsession refresh repository exception repositoryexception ignore log warn unable refresh session ignore suppress warnings suppresswarnings unchecked override check for null checkfornull adapter type adaptertype adapter type adaptertype adapt to adaptto nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx nonnull adapter type adaptertype type session session ctx get provider state getproviderstate get session getsession type session adapter type adaptertype session type principal session jackrabbit session jackrabbitsession session get user d getuserid jackrabbit session jackrabbitsession jackrabbit session jackrabbitsession session user manager usermanager get user manager getusermanager authorizable get authorizable getauthorizable get user d getuserid adapter type adaptertype get principal getprincipal log debug adapt o adapto resource principal base adapt repository exception repositoryexception log warn error adapting resource principal base adapt adapt to adaptto ctx type override copy nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx string src abs path srcabspath string dest abs path destabspath persistence exception persistenceexception override move nonnull resolver context resolvercontext jcr provider state jcrproviderstate ctx string src abs path srcabspath string dest abs path destabspath persistence exception persistenceexception string src node path srcnodepath path mapper pathmapper map resource path to path mapresourcepathtojcrpath src abs path srcabspath string dst node path dstnodepath path mapper pathmapper map resource path to path mapresourcepathtojcrpath dest abs path destabspath resource util resourceutil get name getname src abs path srcabspath ctx get provider state getproviderstate get session getsession move src node path srcnodepath dst node path dstnodepath repository exception repositoryexception persistence exception persistenceexception unable move resource dest abs path destabspath src abs path srcabspath override check for null checkfornull jcr query provider jcrqueryprovider jcr provider state jcrproviderstate getjcrqueryprovider provider context providercontext ctx get provider context getprovidercontext ctx basic jcr query provider basicjcrqueryprovider ctx returns code code code user jcr credentials code link jcr resource constants jcrresourceconstants authentication info credentials string code password code code user password code link org apache sling api resource resource resolver factory resourceresolverfactory password param check visible code code assumed visible null pointer exception nullpointerexception code code code code is attribute visible isattributevisible string equals jcr resource constants jcrresourceconstants authentication info credentials password