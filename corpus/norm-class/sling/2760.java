licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery impl java util linked list linkedlist java util list org apache sling discovery topology event topologyevent org apache sling discovery topology event listener topologyeventlistener org apache sling discovery base setup virtual instance virtualinstance org apache sling discovery impl setup fulljr virtual instance builder virtualinstancebuilder org junit org junit org junit test org slf logger org slf logger factory loggerfactory discovery with sync token test discoverywithsynctokentest logger logger logger factory loggerfactory get logger getlogger get class getclass list virtual instance virtualinstance instances setup exception logger info setup start instances linked list linkedlist virtual instance virtualinstance tear down teardown exception logger info tear down teardown start virtual instance virtualinstance virtual instance virtualinstance instances virtual instance virtualinstance logger info tear down teardown test test two nodes testtwonodes throwable logger info test two nodes testtwonodes start fulljr virtual instance builder virtualinstancebuilder fulljr virtual instance builder virtualinstancebuilder set debug name setdebugname new repository newrepository two n twon set connector ping interval setconnectorpinginterval set min event delay setmineventdelay set connector ping timeout setconnectorpingtimeout virtual instance virtualinstance build instances add bind topology event listener bindtopologyeventlistener topology event listener topologyeventlistener override handle topology event handletopologyevent topology event topologyevent event logger info event event fulljr virtual instance builder virtualinstancebuilder fulljr virtual instance builder virtualinstancebuilder set debug name setdebugname use repository of userepositoryof set connector ping interval setconnectorpinginterval set min event delay setmineventdelay set connector ping timeout setconnectorpingtimeout virtual instance virtualinstance build heartbeats and check view heartbeatsandcheckview heartbeats and check view heartbeatsandcheckview heartbeats and check view heartbeatsandcheckview heartbeats and check view heartbeatsandcheckview thread sleep todo finalize test