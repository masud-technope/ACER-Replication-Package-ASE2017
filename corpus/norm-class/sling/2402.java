licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting java script javascript java io exception ioexception java reader java string reader stringreader javax script script exception scriptexception junit framework test case testcase org apache sling scripting java script javascript internal script engine helper scriptenginehelper code esp reader test espreadertest code simple test cases code esp reader espreader code processes esp ecma server template d templated java script javascript produces plain java script javascript esp reader test espreadertest test case testcase test read method test read single testreadsingle io exception ioexception expect reader string src reader reader esp reader espreader string reader stringreader src assert true asserttrue character reader read assert true asserttrue character reader read assert true asserttrue character reader read assert true asserttrue character reader read test read method test read array all testreadarrayall io exception ioexception expect reader string src reader reader esp reader espreader string reader stringreader src buf reader read buf buf length assert equals assertequals assert equals assertequals string buf read expect eof reader read buf buf length assert equals assertequals test read method test read array offset testreadarrayoffset io exception ioexception string js src jssrc string src js src jssrc reader reader esp reader espreader string reader stringreader src buf len reader read buf len assert equals assertequals len assert equals assertequals string buf len reader read buf len assert equals assertequals len assert equals assertequals string buf read expect eof reader read buf buf length assert equals assertequals test standard template text test template testtemplate io exception ioexception assert equals assertequals response writer write test parse test assert equals assertequals response writer write test nout write test parse test ntest test custom initialization test out init testoutinit io exception ioexception string input test string expected get out getout write test string buffer stringbuffer buf string buffer stringbuffer esp reader espreader esp reader espreader string reader stringreader input set out init statement setoutinitstatement get out getout read buf append assert equals assertequals expected buf to string tostring test plain java script javascript code test code testcode io exception ioexception assert equals assertequals test parse test assert equals assertequals ntest ntest parse ntest ntest test java script javascript expressions test expr testexpr io exception ioexception assert equals assertequals response writer write parse assert equals assertequals response writer write write write parse test java script javascript comment test comment testcomment io exception ioexception assert equals assertequals parse test test comp act expressions double testcompactexpressionsdouble io exception ioexception string input html version string expected response writer write html version write write string actual parse input assert equals assertequals flatten expected flatten actual test comp act expressions double negative testcompactexpressionsdoublenegative io exception ioexception string input html version string expected response writer write html version string actual parse input assert equals assertequals flatten expected flatten actual test comp act expressions single testcompactexpressionssingle io exception ioexception string input html version string expected response writer write html version write write string actual parse input assert equals assertequals flatten expected flatten actual test comp act expressions single negative testcompactexpressionssinglenegative io exception ioexception string input html version string expected response writer write html version string actual parse input assert equals assertequals flatten expected flatten actual test complete template features test complete template testcompletetemplate io exception ioexception string input html head title some expr someexpr title head html comment esp comment java script javascript comment java script javascript comment expr lines verbatim stuff quoted xyz verbatim more verbatim moreverbatim stuff single more verbatim moreverbatim html comment expr eol html string expected response writer write html write head title write some expr someexpr write title head write html comment write esp comment write java script javascript comment write java script javascript comment expr lines write write verbatim stuff quoted xyz verbatim write more verbatim moreverbatim stuff single more verbatim moreverbatim write html comment expr write eol write write html string actual parse input assert equals assertequals flatten expected flatten actual test complete template features test numeric expression testnumericexpression io exception ioexception string input string expected response writer write string actual parse input assert equals assertequals expected actual input expected response writer write actual parse input assert equals assertequals expected actual input expected response writer write actual parse input assert equals assertequals expected actual test complete template features test numeric expression output testnumericexpressionoutput script exception scriptexception script engine helper scriptenginehelper script script engine helper scriptenginehelper string input write string actual script eval to string evaltostring input string expected assert equals assertequals expected actual input write actual script eval to string evaltostring input expected assert equals assertequals expected actual input write actual script eval to string evaltostring input expected assert equals assertequals expected actual test colon testcolon io exception ioexception string input current node currentnode text current node currentnode text string expected response writer write current node currentnode text write current node currentnode text string actual parse input assert equals assertequals expected actual test equal sig ns testequalsigns io exception ioexception string input current node currentnode text current node currentnode text string expected response writer write current node currentnode text write current node currentnode text string actual parse input assert equals assertequals expected actual test single quoted testsinglequoted io exception ioexception string input current node currentnode text current node currentnode text string expected response writer write current node currentnode text write current node currentnode text write string actual parse input assert equals assertequals expected actual test double quoted testdoublequoted io exception ioexception string input current node currentnode text current node currentnode text string expected response writer write current node currentnode text write current node currentnode text write string actual parse input assert equals assertequals expected actual helper pass esp text esp reader espreader result string parse string text io exception ioexception string buffer stringbuffer buf string buffer stringbuffer reader esp reader espreader string reader stringreader text read buf append buf to string tostring replace strings easier compare vis ually visually testing string flatten string str str replace