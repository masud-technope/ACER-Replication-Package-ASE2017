licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets post impl java io exception ioexception java unsupported encoding exception unsupportedencodingexception java net url encoder urlencoder java util string tokenizer stringtokenizer junit framework test case testcase org apache sling api sling http servlet request slinghttpservletrequest org apache sling commons testing sling mock sling http servlet request mockslinghttpservletrequest org apache sling commons testing sling mock sling http servlet response mockslinghttpservletresponse org apache sling servlets post html response htmlresponse org apache sling servlets post json response jsonresponse org apache sling servlets post post response postresponse org apache sling servlets post sling post constants slingpostconstants org apache sling servlets post impl helper media range list mediarangelist sling post servlet test slingpostservlettest test case testcase sling post servlet slingpostservlet servlet override set up setup exception set up setup servlet sling post servlet slingpostservlet test is set status testissetstatus status param sling http servlet request statusparamslinghttpservletrequest req status param sling http servlet request statusparamslinghttpservletrequest parameter expect req set status param setstatusparam assert true asserttrue standard status expected param servlet is set status issetstatus req standard parameter expect req set status param setstatusparam sling post constants slingpostconstants status standard assert true asserttrue standard status expected sling post constants slingpostconstants status standard param servlet is set status issetstatus req browser parameter expect req set status param setstatusparam sling post constants slingpostconstants status browser assert false assertfalse browser status expected sling post constants slingpostconstants status browser param servlet is set status issetstatus req parameter expect string param knocking heaven door req set status param setstatusparam param assert true asserttrue standard status expected param param servlet is set status issetstatus req test get json response testgetjsonresponse mock sling http servlet request mockslinghttpservletrequest req mock sling http servlet request mockslinghttpservletrequest override string get header getheader string equals media range list mediarangelist header accept application json get header getheader adapter type adaptertype adapter type adaptertype adapt to adaptto adapter type adaptertype type post response postresponse result servlet create post response createpostresponse req assert true asserttrue result json response jsonresponse test redirection testredirection exception string utf path string encoded utf encodedutf test redirection testredirection fred html fred html test redirection testredirection xyz xyz utf path xyz encoded utf encodedutf test redirection testredirection fred utf path xyz xyz encoded utf encodedutf test redirection testredirection fred utf path test redirect host test redirection testredirection fred abc http for ced forced test redirection testredirection fred abc for ced forced test test redirection testredirection fred abc https for ced forced test invalid uri test redirection testredirection fred abc file use rs users workspace test java test redirection testredirection string request path requestpath string resource path resourcepath string redirect string expected exception redirect servlet response redirectservletresponse resp redirect servlet response redirectservletresponse sling http servlet request slinghttpservletrequest request redirect servlet request redirectservletrequest redirect request path requestpath post response postresponse html response htmlresponse html response htmlresponse html response htmlresponse set path setpath resource path resourcepath assert equals assertequals expected servlet redirect if needed redirectifneeded request html response htmlresponse resp assert equals assertequals expected resp redirect location redirectlocation redirect servlet request redirectservletrequest mock sling http servlet request mockslinghttpservletrequest string request path requestpath string redirect redirect servlet request redirectservletrequest string redirect string request path requestpath request path requestpath request path requestpath redirect redirect string get path info getpathinfo request path requestpath override string get parameter getparameter string sling post constants slingpostconstants redirect equals redirect redirect servlet response redirectservletresponse mock sling http servlet response mockslinghttpservletresponse string redirect location redirectlocation override string encoderedirecturl string string tokenizer stringtokenizer string tokenizer stringtokenizer string builder stringbuilder string builder stringbuilder has more tokens hasmoretokens string token next token nexttoken equals token append token append url encoder urlencoder encode token utf unsupported encoding exception unsupportedencodingexception fail utf to string tostring override send redirect sendredirect string io exception ioexception redirect location redirectlocation status param sling http servlet request statusparamslinghttpservletrequest mock sling http servlet request mockslinghttpservletrequest string status param statusparam status param sling http servlet request statusparamslinghttpservletrequest setup don care override string get parameter getparameter string sling post constants slingpostconstants status equals status param statusparam get parameter getparameter set status param setstatusparam string status param statusparam status param statusparam status param statusparam adapter type adaptertype adapter type adaptertype adapt to adaptto adapter type adaptertype type