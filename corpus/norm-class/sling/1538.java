licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons log logback internal java file java io exception ioexception java util array list arraylist java util list java util random org apache commons file utils fileutils org junit rule org junit test org junit rules temporary folder temporaryfolder java util arrays as list aslist org hamcrest matcher assert matcherassert assert that assertthat org hamcrest matchers org hamcrest matchers empty org junit assert equals assertequals test tailer testtailer random rnd random rule temporary folder temporaryfolder temp folder tempfolder temporary folder temporaryfolder line collector linecollector listener line collector linecollector test test empty testempty exception file temp folder tempfolder new file newfile tailer tailer listener tail assert that assertthat listener lines empty test test less and more testlessandmore exception file temp folder tempfolder new file newfile write to file writetofile as list aslist tailer listener tail assert that assertthat listener lines listener reset tailer listener tail assert that assertthat listener lines test random test randomtest exception file temp folder tempfolder new file newfile list string lines create random lines createrandomlines tailer buffer size num of lines numoflines lines size write to file writetofile lines rnd next int nextint num of lines numoflines tailer listener tail assert equals assertequals listener lines lines sub list sublist num of lines numoflines num of lines numoflines list string create random lines createrandomlines total size totalsize list string result array list arraylist string size rnd next int nextint string builder stringbuilder string builder stringbuilder append size length result add to string tostring size total size totalsize result write to file writetofile file list string lines io exception ioexception string builder stringbuilder string builder stringbuilder first line firstline string lines first line firstline first line firstline append append file utils fileutils write line collector linecollector tailer tailer listener tailerlistener list string lines array list arraylist string override handle string lines add reset lines clear