licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling engine impl parameters java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java input stream inputstream java unsupported encoding exception unsupportedencodingexception java util linked hash map linkedhashmap java util map org apache sling api request request parameter requestparameter util iso map ps mapps characters string encoding direct iso query form encoded parameter encoding html spec http org html append ix appendix notes html string encoding utf content encoding fix encoding fixencoding charset request parameter string default fix encoding defaultfixencoding encoding direct parse constant parse constant parse constant esc parse constant equ esc parse constant equ parse constant parse constant esc parse constant parse constant sep set default fix encoding setdefaultfixencoding string encoding default fix encoding defaultfixencoding validate encoding validateencoding encoding string get default fix encoding getdefaultfixencoding default fix encoding defaultfixencoding string to identity encoded string toidentityencodedstring data data characters data length characters length characters data xff string characters from identity encoded string fromidentityencodedstring string string string content data string length data length data string char at charat xff data input stream inputstream to input stream toinputstream string source data from identity encoded string fromidentityencodedstring source byte array input stream bytearrayinputstream data fix encoding fixencoding parameter map parametermap parameter map parametermap encoding default fix encoding defaultfixencoding string form encoding formencoding get default fix encoding getdefaultfixencoding check form encoding parameter over writes overwrites request parameter requestparameter fe parm feparm parameter map parametermap parameter support parametersupport parameter form encoding formencoding fe parm feparm check form encoding raw encoding rawencoding fe parm feparm form encoding formencoding to identity encoded string toidentityencodedstring raw encoding rawencoding form encoding formencoding validate encoding validateencoding form encoding formencoding map rename parameters encoding fixes linked hash map linkedhashmap string string rename map renamemap linked hash map linkedhashmap string string convert map lists map arrays map entry string request parameter requestparameter param entry paramentry parameter map parametermap entry set entryset request parameter requestparameter params param entry paramentry get value getvalue string par name parname params length params abstract request parameter abstractrequestparameter abstract request parameter abstractrequestparameter param abstract request parameter abstractrequestparameter params encoding form encoding formencoding equals ignore case equalsignorecase param get encoding getencoding param set encoding setencoding form encoding formencoding prepare parameter renaming par name parname par name parname param entry paramentry get key getkey string reencode par name parname form encoding formencoding par name parname equals rename map renamemap par name parname apply mappings deinternationalized names rename map renamemap is empty isempty map entry string string entry rename map renamemap entry set entryset parameter map parametermap rename parameter renameparameter entry get key getkey entry get value getvalue string reencode string par name parname string encoding encode parameter encoding encoding direct equals ignore case equalsignorecase encoding string par name parname get bytes getbytes encoding direct encoding unsupported encoding exception unsupportedencodingexception uee unmodified par name parname checks encoding supported platform platform supports encoding parameter returned encoding argument code code empty string link default fix encoding defaultfixencoding returned param encoding encoding validate encoding supported link default fix encoding defaultfixencoding string validate encoding validateencoding string encoding encoding encoding length check existence encoding get bytes getbytes encoding encoding unsupported encoding exception unsupportedencodingexception encoding unsupported encoding get default fix encoding getdefaultfixencoding parse query string store entries map param data query string querystring data param encoding encoding converting bytes characters param map map populate param prepend new prependnew prepend values illegal argument exception illegalargumentexception string malformed unsupported encoding exception unsupportedencodingexception code encoding supported io exception ioexception error occurrs reading code data parse query string parsequerystring input stream inputstream data string encoding parameter map parametermap map prepend new prependnew unsupported encoding exception unsupportedencodingexception io exception ioexception parsenvpairstring data encoding map prepend new prependnew parse pair string populate map key param data data param encoding encoding converting bytes characters param map map populate param separator multi separator character param allow spaces allowspaces spaces values param prepend new prependnew prepend values illegal argument exception illegalargumentexception string malformed unsupported encoding exception unsupportedencodingexception code encoding supported io exception ioexception error occurrs reading code data parsenvpairstring input stream inputstream data string encoding parameter map parametermap map separator allow spaces allowspaces prepend new prependnew unsupported encoding exception unsupportedencodingexception io exception ioexception byte array output stream bytearrayoutputstream key buffer keybuffer byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream value buffer valuebuffer byte array output stream bytearrayoutputstream ch code chcode sub state substate data read data read esc sub state substate allow spaces allowspaces key buffer keybuffer write key buffer keybuffer write allow spaces allowspaces key buffer keybuffer write esc sub state substate addnvpair map key buffer keybuffer value buffer valuebuffer encoding prepend new prependnew key buffer keybuffer write esc ch code chcode sub state substate sub state substate ch code chcode length string code string ch code chcode key buffer keybuffer write integer parse int parseint code number format exception numberformatexception illegal argument exception illegalargumentexception bad escape sequence code equ esc sub state substate allow spaces allowspaces value buffer valuebuffer write separator addnvpair map key buffer keybuffer value buffer valuebuffer encoding prepend new prependnew value buffer valuebuffer write separator addnvpair map key buffer keybuffer value buffer valuebuffer encoding prepend new prependnew allow spaces allowspaces value buffer valuebuffer write esc sub state substate value buffer valuebuffer write esc ch code chcode sub state substate sub state substate ch code chcode length string code string ch code chcode value buffer valuebuffer write integer parse int parseint code number format exception numberformatexception illegal argument exception illegalargumentexception bad escape sequence code sep separator key buffer keybuffer size addnvpair map key buffer keybuffer value buffer valuebuffer encoding prepend new prependnew addnvpair parameter map parametermap map byte array output stream bytearrayoutputstream key buffer keybuffer byte array output stream bytearrayoutputstream value buffer valuebuffer string encoding prepend new prependnew unsupported encoding exception unsupportedencodingexception string key key buffer keybuffer to string tostring encoding string value buffer valuebuffer to string tostring encoding map add parameter addparameter container request parameter containerrequestparameter key encoding prepend new prependnew key buffer keybuffer reset value buffer valuebuffer reset