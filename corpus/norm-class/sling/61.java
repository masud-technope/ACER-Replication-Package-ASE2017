licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock sling org apache sling api adapter adapter factory adapterfactory adaptable classes org apache sling api adapter adapter factory adapterfactory adapter classes java util array list arraylist java util dictionary java util hash map hashmap java util hashtable java util linked list linkedlist java util list java util map java util tree map treemap java util concurrent concurrent hash map concurrenthashmap java util concurrent concurrent map concurrentmap org apache felix scr annotations component org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations reference policy referencepolicy org apache felix scr annotations service org apache sling api sling constants slingconstants org apache sling api adapter adapter factory adapterfactory org apache sling api adapter adapter manager adaptermanager org apache sling commons osgi properties util propertiesutil org osgi framework service reference servicereference org osgi service component component context componentcontext org osgi service event event org osgi service event event admin eventadmin org slf logger org slf logger factory loggerfactory copy org apache sling adapter internal a dpater manager impl adpatermanagerimpl sling adapter calls synthetic resource syntheticresource set adapter manager setadaptermanager unset adapter manager unsetadaptermanager disabled link thread safe mock adapter manager wrapper threadsafemockadaptermanagerwrapper concept component service reference adapter factory adapterfactory reference interface referenceinterface adapter factory adapterfactory cardinality reference cardinality referencecardinality optional multiple policy reference policy referencepolicy dynamic mock adapter manager impl mockadaptermanagerimpl adapter manager adaptermanager logger log logger factory loggerfactory get logger getlogger get class getclass osg i osgi code component context componentcontext code retrieve link adapter factory adapterfactory service instances component context componentcontext context list link adapter factory adapterfactory services bound manager manager activated bound services accessed manager activated list service reference servicereference bound adapter factories boundadapterfactories linked list linkedlist service reference servicereference map link adapter factory descriptor map adapterfactorydescriptormap instances map indexed fully qualified names listed link adapter factory adapterfactory adaptable classes property link adapter factory adapterfactory services adapter factory descriptor map adapterfactorydescriptormap map string adapter factory descriptor map adapterfactorydescriptormap descriptors hash map hashmap string adapter factory descriptor map adapterfactorydescriptormap matrix link adapter factory descriptor adapterfactorydescriptor instances indexed fully qualified adapted second arily secondarily indexed fully qualified adapt target cache built demand calling link get adapter factories getadapterfactories method cleared adapter factory registered unregistered concurrent map concurrentmap string map string list adapter factory descriptor adapterfactorydescriptor factory cache factorycache concurrent hash map concurrenthashmap string map string list adapter factory descriptor adapterfactorydescriptor service tracker event admin reference cardinality reference cardinality referencecardinality optional unary policy reference policy referencepolicy dynamic event admin eventadmin event admin eventadmin adapter manager adaptermanager returns adapted code adaptable code code code object adapted org apache sling api adapter adapter manager adaptermanager get adapter getadapter java lang object java lang adapter type adaptertype adapter type adaptertype get adapter getadapter object adaptable adapter type adaptertype type adapter factories type adaptable object map string list adapter factory descriptor adapterfactorydescriptor factories get adapter factories getadapterfactories adaptable get class getclass factory target type list adapter factory descriptor adapterfactorydescriptor desc list desclist factories type get name getname desc list desclist desc list desclist size adapter factory descriptor adapterfactorydescriptor desc desc list desclist adapter factory adapterfactory factory desc desc get factory getfactory factory adapt adaptable factory exists factory log debug adapter factory map object factory adaptable type adapter type adaptertype adapted object adaptedobject factory get adapter getadapter adaptable type adapted object adaptedobject log debug adapter factory map object factory adaptable type adapted object adaptedobject factory adapt log debug adapter factory map adaptable type scr int egration integration activate manager bind registered factories param context component context activate component context componentcontext context context context register adapter factories bound activation list service reference servicereference bound adapter factories boundadapterfactories array list arraylist service reference servicereference bound adapter factories boundadapterfactories bound adapter factories boundadapterfactories clear service reference servicereference reference register adapter factory registeradapterfactory context reference enable manager setting instance disabled copy synthetic resource syntheticresource set adapter manager setadaptermanager deactivate param context deactivate component context componentcontext context disabled copy synthetic resource syntheticresource unset adapter manager unsetadaptermanager context bind adapter factory param reference service reference bind adapter factory bindadapterfactory service reference servicereference reference create context bound adapter factories boundadapterfactories context bound adapter factories boundadapterfactories add reference create create register adapter factory registeradapterfactory context reference unbind adapter factory param reference service reference unbind adapter factory unbindadapterfactory service reference servicereference reference unregister adapter factory unregisteradapterfactory reference unit testing stuff returns active adapter factories manager strong method unit testing removed modified notice strong map string adapter factory descriptor map adapterfactorydescriptormap get factories getfactories descriptors returns current adapter factory cache strong method unit testing removed modified notice strong map string map string list adapter factory descriptor adapterfactorydescriptor get factory cache getfactorycache factory cache factorycache unregisters link adapter factory adapterfactory ref erred referred service code reference code registry register adapter factory registeradapterfactory component context componentcontext context service reference servicereference reference string adaptables properties util propertiesutil to string array tostringarray reference get property getproperty adaptable classes string adapters properties util propertiesutil to string array tostringarray reference get property getproperty adapter classes adaptables adaptables length adapters adapters length adapter factory descriptor adapterfactorydescriptor factory desc factorydesc adapter factory descriptor adapterfactorydescriptor context reference adapters string adaptable adaptables adapter factory descriptor map adapterfactorydescriptormap adf map adfmap descriptors adf map adfmap descriptors adaptable adf map adfmap adf map adfmap adapter factory descriptor map adapterfactorydescriptormap descriptors adaptable adf map adfmap adf map adfmap adf map adfmap reference factory desc factorydesc clear factory cache force rebuild access factory cache factorycache clear send event event admin eventadmin localea event admin eventadmin localea dictionary string object props hashtable string object props sling constants slingconstants property adaptable classes adaptables props sling constants slingconstants property adapter classes adapters localea post event postevent event sling constants slingconstants topic adapter factory props unregisters link adapter factory adapterfactory ref erred referred service code reference code registry unregister adapter factory unregisteradapterfactory service reference servicereference reference bound adapter factories boundadapterfactories bound adapter factories boundadapterfactories remove reference string adaptables properties util propertiesutil to string array tostringarray reference get property getproperty adaptable classes string adapters properties util propertiesutil to string array tostringarray reference get property getproperty adapter classes adaptables adaptables length adapters adapters length factories modified factoriesmodified adapter factory descriptor map adapterfactorydescriptormap adf map adfmap string adaptable adaptables descriptors adf map adfmap descriptors adaptable adf map adfmap adf map adfmap factories modified factoriesmodified adf map adfmap remove reference removed factories modified factoriesmodified factory cache factorycache clear send event event admin eventadmin localea event admin eventadmin localea dictionary string object props hashtable string object props sling constants slingconstants property adaptable classes adaptables props sling constants slingconstants property adapter classes adapters localea post event postevent event sling constants slingconstants topic adapter factory removed props returns map adapter factories adapter target adaptable code clazz code adapter exists code clazz code empty map returned param clazz adaptable code code adapter factory map target map adapter factories target map empty adapter factory adaptable code clazz code map string list adapter factory descriptor adapterfactorydescriptor get adapter factories getadapterfactories clazz string class name classname clazz get name getname map string list adapter factory descriptor adapterfactorydescriptor entry factory cache factorycache class name classname entry create entry entry create adapter factory map createadapterfactorymap clazz factory cache factorycache class name classname entry entry creates target adapter factory map code clazz code factories defined support adaptable registration factories implemented interfaces base factories copied param clazz adaptable code code build adapter factory map target map adapter factories target map empty adapter factory adaptable code clazz code map string list adapter factory descriptor adapterfactorydescriptor create adapter factory map createadapterfactorymap clazz map string list adapter factory descriptor adapterfactorydescriptor afm hash map hashmap string list adapter factory descriptor adapterfactorydescriptor adapter factories adapterfactories adapter factory descriptor map adapterfactorydescriptormap afd map afdmap descriptors afd map afdmap descriptors clazz get name getname afd map afdmap list adapter factory descriptor adapterfactorydescriptor afd set afdset afd map afdmap afd set afdset array list arraylist adapter factory descriptor adapterfactorydescriptor afd map afdmap values adapter factory descriptor adapterfactorydescriptor afd afd set afdset string adapters afd get adapters getadapters string adapter adapters handle service ranking add list create list list adapter factory descriptor adapterfactorydescriptor factory descriptors factorydescriptors afm adapter factory descriptors factorydescriptors factory descriptors factorydescriptors array list arraylist adapter factory descriptor adapterfactorydescriptor afm adapter factory descriptors factorydescriptors factory descriptors factorydescriptors add afd adapter factories adapterfactories interfaces interfaces clazz get interfaces getinterfaces i face iface interfaces copy adapter factories copyadapterfactories afm i face iface adapter factories adapterfactories super clazz superclazz clazz get superclass getsuperclass super clazz superclazz copy adapter factories copyadapterfactories afm super clazz superclazz afm copies adapter factories code clazz code code cache code code dest code map factories target exists code dest code map param dest map target adapter factory additional factories copied existing factories replaced param clazz adaptable adapter factories considered adding code dest code copy adapter factories copyadapterfactories map string list adapter factory descriptor adapterfactorydescriptor dest clazz adapter factories adaptable clazz map string list adapter factory descriptor adapterfactorydescriptor sc map scmap get adapter factories getadapterfactories clazz target copy entry dest list create list map entry string list adapter factory descriptor adapterfactorydescriptor entry sc map scmap entry set entryset list adapter factory descriptor adapterfactorydescriptor factory descriptors factorydescriptors dest entry get key getkey factory descriptors factorydescriptors factory descriptors factorydescriptors array list arraylist adapter factory descriptor adapterfactorydescriptor dest entry get key getkey factory descriptors factorydescriptors adapter factory descriptor adapterfactorydescriptor descriptor entry get value getvalue factory descriptors factorydescriptors add descriptor code adapter factory descriptor adapterfactorydescriptor code entry link adapter factory descriptor map adapterfactorydescriptormap conveying list adapter target types res pective respective link adapter factory adapterfactory adapter factory descriptor adapterfactorydescriptor adapter factory adapterfactory factory string adapters service reference servicereference reference component context componentcontext context adapter factory descriptor adapterfactorydescriptor component context componentcontext context service reference servicereference reference string adapters reference reference context context adapters adapters adapter factory adapterfactory get factory getfactory factory factory adapter factory adapterfactory context locate service locateservice adapter factory adapterfactory reference factory string get adapters getadapters adapters code adapter factory descriptor map adapterfactorydescriptormap code sorted map link adapter factory descriptor adapterfactorydescriptor instances indexed ordered link service reference servicereference map org anize organize registered link org apache sling api adapter adapter factory adapterfactory services adaptable type entry map link adapter factory descriptor adapterfactorydescriptor enabling registration multiple factories adaptable adapter type tuple entry reason sorted map tuple instance removed event ual eventual instance adapter factory descriptor map adapterfactorydescriptormap tree map treemap service reference servicereference adapter factory descriptor adapterfactorydescriptor serialversionuid