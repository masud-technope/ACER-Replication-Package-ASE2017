licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution test org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations reference org apache jackrabbit api jackrabbit session jackrabbitsession org apache jackrabbit api security user authorizable org apache jackrabbit api security user user org apache jackrabbit api security user user manager usermanager javax jcr security privilege org apache jackrabbit commons jcr utils jcrutils org apache jackrabbit commons jackrabbit authorization access control utils accesscontrolutils org apache sling jcr api sling repository slingrepository org slf logger org slf logger factory loggerfactory javax jcr session component init logger log logger factory loggerfactory get logger getlogger get class getclass reference sling repository slingrepository sling repository slingrepository activate activate exception string default agent user name defaultagentusername distribution agent user string service user name serviceusername test distribution user testdistributionuser string distributor user name distributorusername test distributor user testdistributoruser session session sling repository slingrepository login administrative loginadministrative jackrabbit session jackrabbitsession jackrabitt session jackrabittsession jackrabbit session jackrabbitsession session user manager usermanager user manager usermanager jackrabitt session jackrabittsession get user manager getusermanager authorizable service user serviceuser user manager usermanager get authorizable getauthorizable service user name serviceusername service user serviceuser service user serviceuser user manager usermanager create system user createsystemuser service user name serviceusername log info created system user service user name serviceusername throwable service user serviceuser user manager usermanager create user createuser service user name serviceusername log info created regular user service user name serviceusername service user serviceuser access control utils accesscontrolutils add access control entry addaccesscontrolentry session sling distribution packages service user serviceuser get principal getprincipal string privilege jcr access control utils accesscontrolutils add access control entry addaccesscontrolentry session content service user serviceuser get principal getprincipal string privilege jcr access control utils accesscontrolutils add access control entry addaccesscontrolentry session service user serviceuser get principal getprincipal string privilege jcr authorizable distributor user distributoruser user manager usermanager get authorizable getauthorizable distributor user name distributorusername distributor user distributoruser distributor user distributoruser user manager usermanager create user createuser distributor user name distributorusername log info created regular user distributor user name distributorusername jcr utils jcrutils get or create by path getorcreatebypath content sling folder session distributor user distributoruser access control utils accesscontrolutils add access control entry addaccesscontrolentry session sling distribution packages distributor user distributoruser get principal getprincipal string privilege jcr access control utils accesscontrolutils add access control entry addaccesscontrolentry session content distributor user distributoruser get principal getprincipal string privilege jcr access control utils accesscontrolutils add access control entry addaccesscontrolentry session libs sling distribution distributor user distributoruser get principal getprincipal string privilege jcr access control utils accesscontrolutils add access control entry addaccesscontrolentry session distributor user distributoruser get principal getprincipal string privilege jcr authorizable default agent user defaultagentuser user manager usermanager get authorizable getauthorizable default agent user name defaultagentusername default agent user defaultagentuser default agent user defaultagentuser user manager usermanager create user createuser default agent user name defaultagentusername log info created regular user default agent user name defaultagentusername user distributor user distributoruser get impersonation getimpersonation grant impersonation grantimpersonation default agent user defaultagentuser get principal getprincipal user service user serviceuser get impersonation getimpersonation grant impersonation grantimpersonation default agent user defaultagentuser get principal getprincipal session save session log out logout throwable log error create user