licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp java file not found exception filenotfoundexception java io exception ioexception java input stream inputstream java output stream outputstream java net malformedurlexception java net url java util hash set hashset java util iterator java util org apache sling api sling exception slingexception org apache sling api resource resource org apache sling api resource resource metadata resourcemetadata org apache sling api resource resource resolver resourceresolver org apache sling commons class loader classloader class loader writer classloaderwriter org apache sling commons compiler java compiler javacompiler org apache sling scripting jsp jasper io provider ioprovider org slf logger org slf logger factory loggerfactory code slingioprovider code slingioprovider io provider ioprovider string web inf tags web inf tags log logger log logger factory loggerfactory get logger getlogger slingioprovider thread local threadlocal resource resolver resourceresolver request resource resolver requestresourceresolver class loader writer classloaderwriter class loader writer classloaderwriter java compiler javacompiler java compiler javacompiler slingioprovider class loader writer classloaderwriter class loader writer classloaderwriter java compiler javacompiler compiler request resource resolver requestresourceresolver thread local threadlocal resource resolver resourceresolver class loader writer classloaderwriter class loader writer classloaderwriter java compiler javacompiler compiler thread context resource resolver resource resolver resourceresolver set request resource resolver setrequestresourceresolver resource resolver resourceresolver resolver resource resolver resourceresolver request resource resolver requestresourceresolver request resource resolver requestresourceresolver resolver reset thread context resource resolver reset request resource resolver resetrequestresourceresolver resource resolver resourceresolver resolver request resource resolver requestresourceresolver resolver io provider ioprovider returns input stream inputstream file looked resource provider resourceprovider retrieved resource stream provider streamprovider implemented input stream inputstream get input stream getinputstream string path file not found exception filenotfoundexception io exception ioexception path starts with startswith class loader writer classloaderwriter get input stream getinputstream path substring resource resolver resourceresolver resolver request resource resolver requestresourceresolver resolver resource resource resolver get resource getresource clean path cleanpath path resource input stream inputstream stream resource adapt to adaptto input stream inputstream stream stream sling exception slingexception io exception ioexception io exception ioexception failed input stream inputstream path init cause initcause file not found exception filenotfoundexception find path returns modified meta data field resource file meta data field resource exist error occurrs finding resource returned last modified lastmodified string path path starts with startswith class loader writer classloaderwriter get last modified getlastmodified path substring resource resolver resourceresolver resolver request resource resolver requestresourceresolver resolver resource resource resolver get resource getresource clean path cleanpath path resource resource metadata resourcemetadata meta resource get resource metadata getresourcemetadata mod time modtime meta get modification time getmodificationtime mod time modtime mod time modtime sling exception slingexception log error modification time path fallback exist ant existant problems removes named item repository delete string path class loader writer classloaderwriter delete path substring returns output stream write repository output stream outputstream get output stream getoutputstream string path class loader writer classloaderwriter get output stream getoutputstream path substring renames node repository rename string old file name oldfilename string new file name newfilename class loader writer classloaderwriter rename old file name oldfilename substring new file name newfilename substring creates folder hierarchy repository mkdirs string path org apache sling scripting jsp jasper io provider ioprovider get class loader getclassloader class loader classloader get class loader getclassloader class loader writer classloaderwriter get class loader getclassloader helper methods jsp servlet context jspservletcontext url geturl string path malformedurlexception resource resolver resourceresolver resolver request resource resolver requestresourceresolver resolver resource resource resolver get resource getresource clean path cleanpath path resource resource adapt to adaptto url sling exception slingexception malformedurlexception malformedurlexception url path init cause initcause string get resource paths getresourcepaths string path string paths hash set hashset string resource resolver resourceresolver resolver request resource resolver requestresourceresolver resolver string cleaned path cleanedpath clean path cleanpath path starts with web inf tags startswithwebinftags cleaned path cleanedpath starts with startswith web inf tags resource resource resolver get resource getresource starts with web inf tags startswithwebinftags cleaned path cleanedpath substring web inf tags length cleaned path cleanedpath resource iterator resource entries resolver list children listchildren resource entries has next hasnext string entry path entrypath entries get path getpath starts with web inf tags startswithwebinftags paths add web inf tags entry path entrypath paths add entry path entrypath sling exception slingexception log warn get resource paths getresourcepaths list children path paths is empty isempty paths internal string clean path cleanpath string path remove web inf tags removewebinftags replace back slash backslash slash path path replace path ends with endswith path path substring path length remove web inf tags removewebinftags path starts with startswith web inf tags path path substring web inf tags length path java compiler javacompiler get java compiler getjavacompiler java compiler javacompiler class loader writer classloaderwriter get class loader writer getclassloaderwriter class loader writer classloaderwriter