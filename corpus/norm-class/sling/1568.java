licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling sample sling shot slingshot comments impl java io exception ioexception java util hash map hashmap java util map javax servlet servlet exception servletexception org apache felix scr annotations reference org apache felix scr annotations sling sling servlet slingservlet org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api resource login exception loginexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling api servlets sling all methods servlet slingallmethodsservlet org apache sling sample sling shot slingshot sling shot constants slingshotconstants org apache sling sample sling shot slingshot comments comment org apache sling sample sling shot slingshot comments comments service commentsservice org apache sling sample sling shot slingshot comments comments util commentsutil org apache sling sample sling shot slingshot impl internal constants internalconstants org slf logger org slf logger factory loggerfactory sling servlet slingservlet methods post extensions comments resource types resourcetypes sling shot constants slingshotconstants resource type resourcetype item comment post servlet commentpostservlet sling all methods servlet slingallmethodsservlet serialversionuid logger logger logger factory loggerfactory get logger getlogger get class getclass reference resource resolver factory resourceresolverfactory factory reference comments service commentsservice comments service commentsservice override do post dopost sling http servlet request slinghttpservletrequest request sling http servlet response slinghttpservletresponse response servlet exception servletexception io exception ioexception string title request get parameter getparameter comments util commentsutil property title string text request get parameter getparameter comments util commentsutil property text string user id userid request get remote user getremoteuser logger debug comment object user id userid title text todo check values save comment resource resolver resourceresolver resolver todo service user oak map string object auth info authinfo hash map hashmap string object auth info authinfo resource resolver factory resourceresolverfactory user internal constants internalconstants service user auth info authinfo resource resolver factory resourceresolverfactory password internal constants internalconstants service user to char array tochararray resolver factory get resource resolver getresourceresolver auth info authinfo resolver factory get service resource resolver getserviceresourceresolver resource req resource reqresource resolver get resource getresource request get resource getresource get path getpath comment comment set title settitle title set text settext text set created by setcreatedby user id userid comments service commentsservice add comment addcomment req resource reqresource send redirect string path request get resource getresource get path getpath response send redirect sendredirect resolver map request get context path getcontextpath path html login exception loginexception servlet exception servletexception unable login resolver resolver close