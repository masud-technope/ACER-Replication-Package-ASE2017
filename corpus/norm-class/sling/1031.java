licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling nosql couchbase resource provider resourceprovider impl couchbase client java query select select couchbase client java query dsl expression couchbase client java query dsl expression java util iterator java util regex pattern org apache commons lang string utils stringutils org apache sling api resource resource util resourceutil org apache sling nosql couchbase client couchbase client couchbaseclient org apache sling nosql couchbase client couchbase key couchbasekey org apache sling nosql adapter abstract no sql adapter abstractnosqladapter org apache sling nosql adapter multi value mode multivaluemode org apache sling nosql adapter no sql data nosqldata couchbase client java bucket couchbase client java document json document jsondocument couchbase client java document json json object jsonobject couchbase client java error document already exists exception documentalreadyexistsexception couchbase client java query ql params qlparams couchbase client java query ql query qlquery couchbase client java query ql query result qlqueryresult couchbase client java query ql query row qlqueryrow couchbase client java query consistency scan consistency scanconsistency link org apache sling nosql adapter no sql adapter nosqladapter implementation couchbase couchbase no sql adapter couchbasenosqladapter abstract no sql adapter abstractnosqladapter string path path string parent path parent path parentpath string data data couchbase client couchbaseclient couchbase client couchbaseclient string cache key prefix cachekeyprefix ql params qlparams params ql params qlparams build consistency scan consistency scanconsistency request couchbase no sql adapter couchbasenosqladapter couchbase client couchbaseclient couchbase client couchbaseclient string cache key prefix cachekeyprefix couchbase client couchbaseclient couchbase client couchbaseclient cache key prefix cachekeyprefix cache key prefix cachekeyprefix primary parent path parentpath ignore error bucket bucket couchbase client couchbaseclient get bucket getbucket bucket query ql query qlquery simple create primary couchbase client couchbaseclient get bucket name getbucketname bucket query ql query qlquery simple create parent path couchbase client couchbaseclient get bucket name getbucketname parent path override valid path validpath string path couchbase client couchbaseclient couchbase client couchbaseclient is enabled isenabled override no sql data nosqldata string path bucket bucket couchbase client couchbaseclient get bucket getbucket string cache key cachekey couchbase key couchbasekey build path cache key prefix cachekeyprefix json document jsondocument doc bucket cache key cachekey doc json object jsonobject data doc content get object getobject data data no sql data nosqldata path data to map tomap multi value mode multivaluemode lists override iterator no sql data nosqldata get children getchildren string parent path parentpath bucket bucket couchbase client couchbaseclient get bucket getbucket fetch direct children path ql query qlquery query ql query qlquery simple select couchbase client couchbaseclient get bucket name getbucketname parent path parent path parentpath params ql query result qlqueryresult query result queryresult bucket query query handle query error handlequeryerror query result queryresult iterator ql query row qlqueryrow query result queryresult iterator iterator no sql data nosqldata override has next hasnext has next hasnext override no sql data nosqldata json object jsonobject item json object jsonobject env elope envelope item get object getobject couchbase client couchbaseclient get bucket name getbucketname string path env elope envelope get string getstring path json object jsonobject data env elope envelope get object getobject data no sql data nosqldata path data to map tomap multi value mode multivaluemode lists override remove unsupported operation exception unsupportedoperationexception override store no sql data nosqldata data bucket bucket couchbase client couchbaseclient get bucket getbucket string cache key cachekey couchbase key couchbasekey build data get path getpath cache key prefix cachekeyprefix json object jsonobject env elope envelope json object jsonobject create env elope envelope path data get path getpath env elope envelope data json object jsonobject data get properties getproperties multi value mode multivaluemode lists list children query efficiency store parent path string parent path parentpath resource util resourceutil get parent getparent data get path getpath parent path parentpath env elope envelope parent path parent path parentpath json document jsondocument doc json document jsondocument create cache key cachekey env elope envelope bucket insert doc created document already exists exception documentalreadyexistsexception bucket upsert doc override delete recursive deleterecursive string path bucket bucket couchbase client couchbaseclient get bucket getbucket fetch desc end ants descendants deletion pattern desc end ants and self descendantsandself pattern compile path ql query qlquery query ql query qlquery simple select couchbase client couchbaseclient get bucket name getbucketname regexp path desc end ants and self descendantsandself pattern params ql query result qlqueryresult query result queryresult bucket query query handle query error handlequeryerror query result queryresult iterator ql query row qlqueryrow query result queryresult iterator deleted any deletedany has next hasnext json object jsonobject item json object jsonobject env elope envelope item get object getobject couchbase client couchbaseclient get bucket name getbucketname string item path itempath env elope envelope get string getstring path string item cache key itemcachekey couchbase key couchbasekey build item path itempath cache key prefix cachekeyprefix bucket remove item cache key itemcachekey deleted any deletedany deleted any deletedany handle query error handlequeryerror ql query result qlqueryresult query result queryresult query result queryresult parse success parsesuccess runtime exception runtimeexception couchbase query parsing error string utils stringutils join query result queryresult errors query result queryresult final success finalsuccess runtime exception runtimeexception couchbase query error string utils stringutils join query result queryresult errors