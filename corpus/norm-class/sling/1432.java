licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer org junit assert false assertfalse org junit assert null assertnull java file input stream fileinputstream java util array list arraylist java util list org apache sling installer api installable resource installableresource org junit org junit org junit test org junit runner run with runwith org ops pax exam option org ops pax exam junit pax exam paxexam org osgi framework bundle run with runwith pax exam paxexam register resources test registerresourcestest test link osgi installer osgiinstaller register resources registerresources method client supply list resources osgi installer test base osgiinstallertestbase org ops pax exam configuration option config default configuration defaultconfiguration set up setup setup installer setupinstaller tear down teardown tear down teardown test initial registration test initialregistrationtest exception object listener start observing bundle events startobservingbundleevents list installable resource installableresource array list arraylist installable resource installableresource add get installable resource getinstallableresource get test bundle gettestbundle bundle base test b testb jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base needs b needsb jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar installer register resources registerresources url scheme to array toarray installable resource installableresource size wait for bundle events waitforbundleevents bundles installed started listener bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent started bundle event bundleevent osgi installer needs b needsb org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer needs b needsb org osgi framework bundle event bundleevent started bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent started string info initial registration assert bundle assertbundle info osgi installer test b testb bundle active assert bundle assertbundle info osgi installer needs b needsb bundle active assert bundle assertbundle info osgi installer test bundle testbundle bundle active test remove and read d bundles test removeandreaddbundlestest exception object listener start observing bundle events startobservingbundleevents list installable resource installableresource array list arraylist installable resource installableresource add get installable resource getinstallableresource get test bundle gettestbundle bundle base test b testb jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base needs b needsb jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar installer register resources registerresources url scheme to array toarray installable resource installableresource size wait for bundle events waitforbundleevents bundles installed started listener bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent started bundle event bundleevent osgi installer needs b needsb org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer needs b needsb org osgi framework bundle event bundleevent started bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent started string info initial registration assert bundle assertbundle info osgi installer test b testb bundle active assert bundle assertbundle info osgi installer needs b needsb bundle active assert bundle assertbundle info osgi installer test bundle testbundle bundle active add test disappears register resources registerresources call object listener start observing bundle events startobservingbundleevents installer update resources updateresources url scheme get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar wait for bundle events waitforbundleevents bundles installed started listener bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent started assert bundle assertbundle adding test bundle testbundle osgi installer test bundle testbundle bundle active add bundle url scheme removed register resources registerresources object listener start observing bundle events startobservingbundleevents installer update resources updateresources another scheme anotherscheme installable resource installableresource mock installable resource mockinstallableresource osgi installer test a testa jar file input stream fileinputstream get test bundle gettestbundle bundle base test a testa jar digest wait for bundle events waitforbundleevents bundles installed started listener bundle event bundleevent osgi installer test a testa org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer test a testa org osgi framework bundle event bundleevent started assert bundle assertbundle test a testa bundle osgi installer test a testa bundle active object listener start observing bundle events startobservingbundleevents simulate registration bundles disappeared installer mark install able installable list installable resource installableresource array list arraylist installable resource installableresource add get installable resource getinstallableresource get test bundle gettestbundle bundle base needs b needsb jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base snap jar digest installer register resources registerresources url scheme to array toarray installable resource installableresource size wait for bundle events waitforbundleevents bundles installed started listener bundle event bundleevent osgi installer snapshot test snapshot org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer snapshot test snapshot org osgi framework bundle event bundleevent started bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent stopped bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent uninstalled bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent updated bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent started assert bundle assertbundle snapshot bundle started osgi installer snapshot test snapshot bundle active assert null assertnull bundle test b testb find bundle findbundle osgi installer test b testb bundle assert bundle assertbundle bundle needs b needsb osgi installer needs b needsb refresh packages refreshpackages get state getstate assert false assertfalse bundle needs b needsb active test b testb bundle active assert bundle assertbundle test bundle testbundle osgi installer test bundle testbundle bundle active assert bundle assertbundle test a testa bundle osgi installer test a testa bundle active object listener start observing bundle events startobservingbundleevents add missing bundles rec heck recheck installer update resources updateresources url scheme get installable resource getinstallableresource get test bundle gettestbundle bundle base test b testb jar installer update resources updateresources url scheme get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar wait for bundle events waitforbundleevents bundles installed started listener bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent updated bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent started bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent started string info adding missing bundles assert bundle assertbundle info osgi installer test b testb bundle active assert bundle assertbundle info osgi installer test bundle testbundle bundle active assert bundle assertbundle info osgi installer snapshot test snapshot bundle active bundle find bundle findbundle osgi installer needs b needsb start assert bundle assertbundle reinstalling test b testb needs b needsb start able startable osgi installer needs b needsb bundle active assert bundle assertbundle test a testa bundle osgi installer test a testa bundle active test re add zero resources test readdzeroresourcestest exception object listener start observing bundle events startobservingbundleevents list installable resource installableresource array list arraylist installable resource installableresource add get installable resource getinstallableresource get test bundle gettestbundle bundle base test b testb jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base needs b needsb jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar add get installable resource getinstallableresource get test bundle gettestbundle bundle base test bundle testbundle jar installer register resources registerresources url scheme to array toarray installable resource installableresource size wait for bundle events waitforbundleevents bundles installed started listener bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent started bundle event bundleevent osgi installer needs b needsb org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer needs b needsb org osgi framework bundle event bundleevent started bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent installed bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent started string info initial registration assert bundle assertbundle info osgi installer test b testb bundle active assert bundle assertbundle info osgi installer needs b needsb bundle active assert bundle assertbundle info osgi installer test bundle testbundle bundle active object listener start observing bundle events startobservingbundleevents installer register resources registerresources url scheme installable resource installableresource wait for bundle events waitforbundleevents bundles installed started listener bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent stopped bundle event bundleevent osgi installer test b testb org osgi framework bundle event bundleevent uninstalled bundle event bundleevent osgi installer needs b needsb org osgi framework bundle event bundleevent stopped bundle event bundleevent osgi installer needs b needsb org osgi framework bundle event bundleevent uninstalled bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent stopped bundle event bundleevent osgi installer test bundle testbundle org osgi framework bundle event bundleevent uninstalled assert null assertnull registration resources test b testb bundle find bundle findbundle osgi installer test b testb assert null assertnull registration resources test b testb bundle find bundle findbundle osgi installer needs b needsb assert null assertnull registration resources test b testb bundle find bundle findbundle osgi installer test bundle testbundle