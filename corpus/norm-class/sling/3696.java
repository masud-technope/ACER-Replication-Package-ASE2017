licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal helper jcr java security principal javax jcr session org apache sling commons testing jcr repository test base repositorytestbase org apache sling spi resource provider resolver context resolvercontext org junit org mockito mockito jcr resource provider test jcrresourceprovidertest repository test base repositorytestbase jcr resource provider jcrresourceprovider jcr resource provider jcrresourceprovider session session override set up setup exception set up setup create session session get session getsession override tear down teardown exception tear down teardown test adapt to testadaptto principal jcr resource provider jcrresourceprovider jcr resource provider jcrresourceprovider resolver context resolvercontext ctx mockito mock resolver context resolvercontext mockito ctx get provider state getproviderstate then return thenreturn jcr provider state jcrproviderstate session assert not null assertnotnull jcr resource provider jcrresourceprovider adapt to adaptto ctx principal