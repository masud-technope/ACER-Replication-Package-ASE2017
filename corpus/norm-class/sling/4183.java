licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad tests ervices testservices server side tests serversidetests org junit assert equals assertequals org junit assert false assertfalse org junit assert not null assertnotnull org junit assert null assertnull org junit assert true asserttrue org junit fail java lang reflect field java util array list arraylist java util hash map hashmap java util hash set hashset java util iterator java util list java util map javax jcr node javax jcr repository exception repositoryexception javax jcr session javax servlet http http servlet request httpservletrequest org apache sling api resource non existing resource nonexistingresource org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling api resource resource util resourceutil org apache sling api resource value map valuemap org apache sling junit annotations sling annotations test runner slingannotationstestrunner org apache sling junit annotations test reference testreference org apache sling launchpad tests ervices testservices events events counter eventscounter org apache sling launchpad tests ervices testservices exported fake sling http servlet request fakeslinghttpservletrequest org junit org junit org junit ignore org junit test org junit runner run with runwith org slf logger org slf logger factory loggerfactory run with runwith sling annotations test runner slingannotationstestrunner resource resolver with vanity bloom filter test resourceresolverwithvanitybloomfiltertest string prop redirect internal sling internal redirect internalredirect string prop redirect external sling redirect string mapping event topic org apache sling api resource resource resolver mapping resourceresolvermapping changed logger logger logger factory loggerfactory get logger getlogger resource resolver with vanity bloom filter test resourceresolverwithvanitybloomfiltertest resource resolver resourceresolver res resolver resresolver session session string root path rootpath node root node rootnode node map root maproot string vanity list string to delete todelete array list arraylist string resource resolver factory resourceresolverfactory cleanup resolver factory cleanupresolverfactory mappings facade mappingsfacade mappings facade mappingsfacade test reference testreference events counter eventscounter events counter eventscounter test reference testreference resource resolver factory resourceresolverfactory resource resolver factory resourceresolverfactory node may be create node maybecreatenode node parent string string type repository exception repositoryexception parent has node hasnode parent get node getnode parent add node addnode type save mappings savemappings session exception string save mappings error savemappingserror mappings facade mappingsfacade save mappings savemappings save mappings error savemappingserror fail save mappings error savemappingserror setup exception close resolver closeresolver res resolver resresolver resource resolver factory resourceresolverfactory get administrative resource resolver getadministrativeresourceresolver set max cached vanity path entries setmaxcachedvanitypathentries cleanup resolver factory cleanupresolverfactory resource resolver factory resourceresolverfactory session res resolver resresolver adapt to adaptto session mappings facade mappingsfacade mappings facade mappingsfacade events counter eventscounter mappings setup clean tests root node rootnode may be create node maybecreatenode session get root node getrootnode content unstructured root path rootpath root node rootnode get path getpath session save to delete todelete is empty isempty node map root maproot may be create node maybecreatenode session get root node getrootnode folder node map may be create node maybecreatenode map root maproot map sling mapping node http may be create node maybecreatenode map http sling mapping may be create node maybecreatenode http localhost sling mapping node https may be create node maybecreatenode map https sling mapping may be create node maybecreatenode https localhost sling mapping to delete todelete add map get path getpath to delete todelete add root node rootnode get path getpath map root maproot session get node getnode session save define vanity path root path rootpath vanity string test vanity testvanity test v testv test vanity to update testvanitytoupdate root node rootnode set property setproperty sling vanity path vanitypath vanity root node rootnode add mixin addmixin sling vanity path vanitypath save mappings savemappings session close resolver closeresolver session session is live islive session log out logout session res resolver resresolver res resolver resresolver close res resolver resresolver set max cached vanity path entries setmaxcachedvanitypathentries max cached vanity path entries maxcachedvanitypathentries exception fixme enabling bloom filter usage ref lection reflection mechanism test osg i osgi configurations field common factory commonfactory resource resolver factory resourceresolverfactory get class getclass get declared field getdeclaredfield common factory commonfactory common factory commonfactory set accessible setaccessible object common resource resolver factory impl commonresourceresolverfactoryimpl common factory commonfactory resource resolver factory resourceresolverfactory field map entries mapentries common resource resolver factory impl commonresourceresolverfactoryimpl get class getclass get declared field getdeclaredfield map entries mapentries map entries mapentries set accessible setaccessible object map entries object mapentriesobject map entries mapentries common resource resolver factory impl commonresourceresolverfactoryimpl field max cached vanity path entries field maxcachedvanitypathentriesfield map entries object mapentriesobject get class getclass get declared field getdeclaredfield max cached vanity path entries maxcachedvanitypathentries max cached vanity path entries field maxcachedvanitypathentriesfield set accessible setaccessible max cached vanity path entries field maxcachedvanitypathentriesfield set long setlong map entries object mapentriesobject max cached vanity path entries maxcachedvanitypathentries delete test nodes deletetestnodes exception logger debug test deleting test nodes resource resolver with vanity bloom filter test resourceresolverwithvanitybloomfiltertest get simple name getsimplename set max cached vanity path entries setmaxcachedvanitypathentries resource resolver resourceresolver resolver cleanup resolver factory cleanupresolverfactory get administrative resource resolver getadministrativeresourceresolver session session resolver adapt to adaptto session string path to delete todelete session item exists itemexists path session get item getitem path remove to delete todelete clear session save session log out logout resolver close test test clone based anonymous exception resource resolver resourceresolver anon resource resolver factory resourceresolverfactory get resource resolver getresourceresolver map string object session anon session anon adapt to adaptto session assert equals assertequals anonymous anon get user d getuserid user workspace resource resolver resourceresolver anon anon clone session anon session anon adapt to adaptto session assert equals assertequals anon get user d getuserid anon get user d getuserid assert equals assertequals anon session get workspace getworkspace get name getname anon session get workspace getworkspace get name getname anon close workspace admin user map string object admin cred hash map hashmap string object admin cred resource resolver factory resourceresolverfactory user admin admin cred resource resolver factory resourceresolverfactory password admin to char array tochararray resource resolver resourceresolver admin anon clone admin cred session admin session admin adapt to adaptto session assert equals assertequals admin admin get user d getuserid assert equals assertequals anon session get workspace getworkspace get name getname admin session get workspace getworkspace get name getname admin close user workspace map string object anon cred hash map hashmap string object resource resolver resourceresolver anon anon clone anon cred assert equals assertequals anonymous anon get user d getuserid anon close user workspace map string object admin cred hash map hashmap string object admin cred resource resolver factory resourceresolverfactory user admin admin cred resource resolver factory resourceresolverfactory password admin to char array tochararray resource resolver resourceresolver admin anon clone admin cred assert equals assertequals admin admin get user d getuserid admin close anon close test test clone based admin exception resource resolver resourceresolver admin resource resolver factory resourceresolverfactory get administrative resource resolver getadministrativeresourceresolver map string object session admin session admin adapt to adaptto session assert equals assertequals admin admin get user d getuserid user workspace resource resolver resourceresolver admin admin clone session admin session admin adapt to adaptto session assert equals assertequals admin get user d getuserid admin get user d getuserid assert equals assertequals admin session get workspace getworkspace get name getname admin session get workspace getworkspace get name getname admin close workspace anonymous user map string object anon cred hash map hashmap string object anon cred resource resolver factory resourceresolverfactory user anonymous resource resolver resourceresolver anon admin clone anon cred session anon session anon adapt to adaptto session assert equals assertequals anonymous anon get user d getuserid assert equals assertequals admin session get workspace getworkspace get name getname anon session get workspace getworkspace get name getname anon close user workspace map string object admin cred hash map hashmap string object resource resolver resourceresolver admin admin clone admin cred assert equals assertequals admin admin get user d getuserid admin close user workspace map string object anon cred hash map hashmap string object anon cred resource resolver factory resourceresolverfactory user anonymous resource resolver resourceresolver anon admin clone anon cred assert equals assertequals anonymous anon get user d getuserid anon close admin close test test attributes session exception test assumes admin password admin credentials creds simple credentials simplecredentials admin admin to char array tochararray session session get repository getrepository login creds map string object auth info authinfo hash map hashmap string object auth info authinfo resource resolver factory resourceresolverfactory user admin auth info authinfo resource resolver factory resourceresolverfactory password admin to char array tochararray auth info authinfo test attribute string testattributestring a string value astringvalue auth info authinfo test attribute number testattributenumber resource resolver resourceresolver resolver res fac resfac get resource resolver getresourceresolver auth info authinfo iterator string attr names attrnames resolver get attribute names getattributenames assert true asserttrue expected attribute attr names attrnames has next hasnext string attr name attrname attr names attrnames assert equals assertequals expected attribute add ress address session jcr resource constants jcrresourceconstants authentication info session attr name attrname assert false assertfalse expected attributes attr names attrnames has next hasnext assert equals assertequals expected session attribute session session resolver get attribute getattribute attr name attrname assert equals assertequals expected session attributes session get attribute names getattributenames length resolver close assert true asserttrue expect session live resolver close session is live islive session log out logout simple credentials simplecredentials creds simple credentials simplecredentials admin admin to char array tochararray creds set attribute setattribute test attribute string testattributestring a string value astringvalue creds set attribute setattribute test attribute number testattributenumber session session get repository getrepository login creds resource resolver resourceresolver resolver res fac resfac get resource resolver getresourceresolver auth info authinfo assert equals assertequals expected session attributes session get attribute names getattributenames length assert equals assertequals a string value astringvalue session get attribute getattribute test attribute string testattributestring assert equals assertequals session get attribute getattribute test attribute number testattributenumber assert equals assertequals session resolver get attribute getattribute jcr resource constants jcrresourceconstants authentication info session assert equals assertequals a string value astringvalue resolver get attribute getattribute test attribute string testattributestring assert equals assertequals resolver get attribute getattribute test attribute number testattributenumber iterator string attr names attrnames resolver get attribute names getattributenames assert true asserttrue expecting attribute attr names attrnames has next hasnext attr names attrnames assert true asserttrue expecting attribute attr names attrnames has next hasnext attr names attrnames assert true asserttrue expecting attribute attr names attrnames has next hasnext attr names attrnames assert false assertfalse expecting attribute attr names attrnames has next hasnext resolver close assert true asserttrue expect session live resolver close session is live islive session log out logout test test attributes auth info authinfo exception map string object auth info authinfo hash map hashmap string object auth info authinfo resource resolver factory resourceresolverfactory user admin auth info authinfo resource resolver factory resourceresolverfactory password admin to char array tochararray auth info authinfo test attribute string testattributestring a string value astringvalue auth info authinfo test attribute number testattributenumber resource resolver resourceresolver resource resolver factory resourceresolverfactory get resource resolver getresourceresolver auth info authinfo session adapt to adaptto session assert equals assertequals expect session attributes get attribute names getattributenames length assert equals assertequals a string value astringvalue get attribute getattribute test attribute string testattributestring assert equals assertequals get attribute getattribute test attribute number testattributenumber assert equals assertequals admin get attribute getattribute resource resolver factory resourceresolverfactory user assert null assertnull session get attribute getattribute resource resolver factory resourceresolverfactory password assert equals assertequals a string value astringvalue get attribute getattribute test attribute string testattributestring assert equals assertequals get attribute getattribute test attribute number testattributenumber assert equals assertequals admin get attribute getattribute resource resolver factory resourceresolverfactory user assert null assertnull get attribute getattribute resource resolver factory resourceresolverfactory password hash set hashset string valid names validnames hash set hashset string valid names validnames add resource resolver factory resourceresolverfactory user valid names validnames add test attribute string testattributestring valid names validnames add test attribute number testattributenumber iterator string names get attribute names getattributenames assert true asserttrue valid names validnames remove names assert true asserttrue valid names validnames remove names assert true asserttrue valid names validnames remove names assert false assertfalse expect names names has next hasnext assert true asserttrue expect valid names validnames empty valid names validnames is empty isempty close test test get resource testgetresource exception existing resource resource res res resolver resresolver get resource getresource root path rootpath assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node missing resource string path root path rootpath missing res res resolver resresolver get resource getresource path assert null assertnull res test test resolve resource testresolveresource exception existing resource http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest root path rootpath resource res res resolver resresolver resolve request root path rootpath assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node missing resource root resolve missing resource string path root path rootpath missing res res resolver resresolver resolve fake sling http servlet request fakeslinghttpservletrequest path path assert not null assertnotnull res assert equals assertequals path res get path getpath assert equals assertequals resource resource type existing res get resource type getresourcetype assert null assertnull res adapt to adaptto node root selectors ext resolve root path root path rootpath print html res res resolver resresolver resolve fake sling http servlet request fakeslinghttpservletrequest path path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node missing resource existing resource path root path rootpath system current time millis currenttimemillis res res resolver resresolver resolve fake sling http servlet request fakeslinghttpservletrequest path path assert not null assertnotnull res assert true asserttrue resource util resourceutil is non existing resource isnonexistingresource res assert equals assertequals path res get path getpath assert equals assertequals resource resource type existing res get resource type getresourcetype test test resolve resource external redirect testresolveresourceexternalredirect exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https root path rootpath node localhost map root maproot get node getnode map https localhost localhost set property setproperty prop redirect external http localhost save mappings savemappings session resource res res resolver resresolver resolve request root path rootpath assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals sling redirect res get resource type getresourcetype assert not null assertnotnull res adapt to adaptto value map valuemap assert equals assertequals http localhost root path rootpath res adapt to adaptto value map valuemap sling target string localhost get property getproperty prop redirect external remove session save test test resolve resource internal redirect url testresolveresourceinternalredirecturl exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https root path rootpath node localhost map root maproot get node getnode map https localhost localhost set property setproperty prop redirect internal http localhost save mappings savemappings session resource res res resolver resresolver resolve request root path rootpath assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node localhost get property getproperty prop redirect internal remove session save test test resolve resource internal redirect path testresolveresourceinternalredirectpath exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https root path rootpath node localhost map root maproot get node getnode map https localhost node to content tocontent localhost add node addnode playground designground sling mapping to content tocontent set property setproperty sling match playground designground to content tocontent set property setproperty prop redirect internal content save mappings savemappings session resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content playground html res get path getpath res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content playground html res get path getpath res res resolver resresolver resolve request libs folder html assert not null assertnotnull res assert equals assertequals libs folder html res get path getpath to content tocontent remove session save test test resolve resource internal redirect path and vanity path testresolveresourceinternalredirectpathandvanitypath exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https root path rootpath node localhost map root maproot get node getnode map https localhost localhost set property setproperty prop redirect internal save mappings savemappings session resource res res resolver resresolver resolve request vanity assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath sling res res resolver resresolver resolve request vanity assert not null assertnotnull res assert equals assertequals vanity res get path getpath localhost get property getproperty prop redirect internal remove session save test test resolve resource internal redirect path update testresolveresourceinternalredirectpathupdate exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https root path rootpath node localhost map root maproot get node getnode map https localhost node to content tocontent localhost add node addnode playground designground sling mapping to content tocontent set property setproperty sling match playground designground to content tocontent set property setproperty prop redirect internal content save mappings savemappings session resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content playground html res get path getpath res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content playground html res get path getpath res res resolver resresolver resolve request libs folder html assert not null assertnotnull res assert equals assertequals libs folder html res get path getpath update match to content tocontent set property setproperty sling match home ground homeground for eignground foreignground save mappings savemappings session res res resolver resresolver resolve request home ground homeground html assert not null assertnotnull res assert equals assertequals content home ground homeground html res get path getpath res res resolver resresolver resolve request for eignground foreignground html assert not null assertnotnull res assert equals assertequals content for eignground foreignground html res get path getpath res res resolver resresolver resolve request libs folder html assert not null assertnotnull res assert equals assertequals libs folder html res get path getpath to content tocontent remove session save test test resolve resource internal redirect exact testresolveresourceinternalredirectexact exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https root path rootpath node localhost map root maproot get node getnode map https localhost node to content tocontent localhost add node addnode virtual sling mapping to content tocontent set property setproperty sling match virtual to content tocontent set property setproperty prop redirect internal content virtual html save mappings savemappings session resource res res resolver resresolver resolve request virtual assert not null assertnotnull res assert equals assertequals content virtual html res get path getpath res res resolver resresolver resolve request virtual html assert not null assertnotnull res assert equals assertequals virtual html res get path getpath res res resolver resresolver resolve request virtual child html assert not null assertnotnull res assert equals assertequals virtual child html res get path getpath string url res resolver resresolver map content virtual html assert not null assertnotnull url assert equals assertequals https localhost virtual url url res resolver resresolver map request content virtual html assert not null assertnotnull url assert equals assertequals virtual url to content tocontent remove session save test test resolve resource internal redirect depth first testresolveresourceinternalredirectdepthfirst exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https root path rootpath map node localhost map root maproot get node getnode map https localhost localhost set property setproperty prop redirect internal content map virtual node to content tocontent localhost add node addnode virtual sling mapping to content tocontent set property setproperty sling match virtual to content tocontent set property setproperty prop redirect internal content virtual html save mappings savemappings session resource res res resolver resresolver resolve request virtual assert not null assertnotnull res assert equals assertequals content virtual html res get path getpath res res resolver resresolver resolve request virtual html assert not null assertnotnull res assert equals assertequals content virtual html res get path getpath res res resolver resresolver resolve request virtual child html assert not null assertnotnull res assert equals assertequals content virtual child html res get path getpath localhost get property getproperty prop redirect internal remove to content tocontent remove session save test test resolve virtual host http testresolvevirtualhosthttp exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest virtual host root path rootpath node virtualhost map root maproot get node getnode map http add node addnode virtual host sling mapping virtualhost set property setproperty prop redirect internal content virtual save mappings savemappings session resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content virtual playground html res get path getpath resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content virtual playground html res get path getpath string mapped res resolver resresolver map res get path getpath assert equals assertequals http virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped string mapped res resolver resresolver map res get path getpath assert equals assertequals http virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped virtualhost remove session save test test resolve virtual host http testresolvevirtualhosthttp multiple exception string string string hostde host string hosten host string contentde content string contenten content node virtualhost map root maproot get node getnode map http add node addnode hostde sling mapping virtualhost set property setproperty prop redirect internal contentde node virtualhost map root maproot get node getnode map http add node addnode hosten sling mapping virtualhost set property setproperty prop redirect internal contenten save mappings savemappings session content mapping http servlet request httpservletrequest requestde fake sling http servlet request fakeslinghttpservletrequest hostde root path rootpath resource resde res resolver resresolver resolve requestde playground html assert not null assertnotnull resde assert equals assertequals contentde playground html resde get path getpath resource resde res resolver resresolver resolve requestde playground html assert not null assertnotnull resde assert equals assertequals contentde playground html resde get path getpath string mappedde res resolver resresolver map resde get path getpath assert equals assertequals http hostde playground html mappedde string mappedde res resolver resresolver map requestde resde get path getpath assert equals assertequals playground html mappedde string mappedde res resolver resresolver map resde get path getpath assert equals assertequals http hostde playground html mappedde string mappedde res resolver resresolver map requestde resde get path getpath assert equals assertequals playground html mappedde content mapping http servlet request httpservletrequest requesten fake sling http servlet request fakeslinghttpservletrequest hosten root path rootpath resource resen res resolver resresolver resolve requesten playground html assert not null assertnotnull resen assert equals assertequals contenten playground html resen get path getpath resource resen res resolver resresolver resolve requesten playground html assert not null assertnotnull resen assert equals assertequals contenten playground html resen get path getpath string mappeden res resolver resresolver map resen get path getpath assert equals assertequals http hosten playground html mappeden string mappeden res resolver resresolver map requesten resen get path getpath assert equals assertequals playground html mappeden string mappeden res resolver resresolver map resen get path getpath assert equals assertequals http hosten playground html mappeden string mappeden res resolver resresolver map requesten resen get path getpath assert equals assertequals playground html mappeden virtualhost remove virtualhost remove session save test test resolve virtual host http testresolvevirtualhosthttp multiple root multipleroot exception string string string string hostde host string hosten host string hostfr host node virtualhost map root maproot get node getnode map http add node addnode hostde sling mapping virtualhost set property setproperty prop redirect internal node virtualhost map root maproot get node getnode map http add node addnode hosten sling mapping virtualhost set property setproperty prop redirect internal save mappings savemappings session content mapping http servlet request httpservletrequest requestde fake sling http servlet request fakeslinghttpservletrequest hostde root path rootpath resource resde res resolver resresolver resolve requestde playground html assert not null assertnotnull resde assert equals assertequals playground html resde get path getpath resource resde res resolver resresolver resolve requestde playground html assert not null assertnotnull resde assert equals assertequals playground html resde get path getpath string mappedde res resolver resresolver map resde get path getpath assert equals assertequals http hostde playground html mappedde string mappedde res resolver resresolver map requestde resde get path getpath assert equals assertequals playground html mappedde string mappedde res resolver resresolver map resde get path getpath assert equals assertequals http hostde playground html mappedde string mappedde res resolver resresolver map requestde resde get path getpath assert equals assertequals playground html mappedde content mapping http servlet request httpservletrequest requesten fake sling http servlet request fakeslinghttpservletrequest hosten root path rootpath resource resen res resolver resresolver resolve requesten playground html assert not null assertnotnull resen assert equals assertequals playground html resen get path getpath resource resen res resolver resresolver resolve requesten playground html assert not null assertnotnull resen assert equals assertequals playground html resen get path getpath hostde configured request map correct duplicate entries string mappeden res resolver resresolver map resen get path getpath assert equals assertequals http hostde playground html mappeden expect path scheme host port request select mapping string mappeden res resolver resresolver map requesten resen get path getpath assert equals assertequals playground html mappeden hostde configured request map correct duplicate entries string mappeden res resolver resresolver map resen get path getpath assert equals assertequals http hostde playground html mappeden expect path scheme host port request select mapping string mappeden res resolver resresolver map requesten resen get path getpath assert equals assertequals playground html mappeden http servlet request httpservletrequest requestfr fake sling http servlet request fakeslinghttpservletrequest hostfr root path rootpath resource resfr res resolver resresolver resolve requestfr playground html assert not null assertnotnull resfr assert equals assertequals playground html resfr get path getpath hostde configured request map correct duplicate entries string mappedfr res resolver resresolver map resfr get path getpath assert equals assertequals http hostde playground html mappedfr hostde configured request map configured duplicate entries string mappedfr res resolver resresolver map requestfr resfr get path getpath assert equals assertequals http hostde playground html mappedfr virtualhost remove virtualhost remove session save test test resolve virtual host http testresolvevirtualhosthttp exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest virtual host root path rootpath node virtualhost map root maproot get node getnode map http add node addnode virtual host sling mapping virtualhost set property setproperty prop redirect internal content virtual save mappings savemappings session resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content virtual playground html res get path getpath resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content virtual playground html res get path getpath string mapped res resolver resresolver map res get path getpath assert equals assertequals http virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped string mapped res resolver resresolver map res get path getpath assert equals assertequals http virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped virtualhost remove session save test test resolve virtual host http testresolvevirtualhosthttp root exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest virtual host root path rootpath node virtualhost map root maproot get node getnode map http add node addnode virtual host sling mapping virtualhost set property setproperty prop redirect internal save mappings savemappings session resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals playground html res get path getpath resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals playground html res get path getpath string mapped res resolver resresolver map res get path getpath assert equals assertequals http virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped string mapped res resolver resresolver map res get path getpath assert equals assertequals http virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped virtualhost remove session save test test resolve virtual host https testresolvevirtualhosthttps exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https virtual host root path rootpath node virtualhost map root maproot get node getnode map https add node addnode virtual host sling mapping virtualhost set property setproperty prop redirect internal content virtual save mappings savemappings session resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content virtual playground html res get path getpath resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content virtual playground html res get path getpath string mapped res resolver resresolver map res get path getpath assert equals assertequals https virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped string mapped res resolver resresolver map res get path getpath assert equals assertequals https virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped virtualhost remove session save test test resolve virtual host https testresolvevirtualhosthttps exception http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest https virtual host root path rootpath node virtualhost map root maproot get node getnode map https add node addnode virtual host sling mapping virtualhost set property setproperty prop redirect internal content virtual save mappings savemappings session resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content virtual playground html res get path getpath resource res res resolver resresolver resolve request playground html assert not null assertnotnull res assert equals assertequals content virtual playground html res get path getpath string mapped res resolver resresolver map res get path getpath assert equals assertequals https virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped string mapped res resolver resresolver map res get path getpath assert equals assertequals https virtual host playground html mapped string mapped res resolver resresolver map request res get path getpath assert equals assertequals playground html mapped virtualhost remove session save test test resolve virtual host http vs https testresolvevirtualhosthttpvshttps exception string host host string host secure host string content content node virtualhost map root maproot get node getnode map http add node addnode host sling mapping virtualhost set property setproperty prop redirect internal content node virtualhost map root maproot get node getnode map https add node addnode host sling mapping virtualhost set property setproperty prop redirect internal content http request save mappings savemappings session http servlet request httpservletrequest request http requesthttp fake sling http servlet request fakeslinghttpservletrequest host root path rootpath resource res http reshttp res resolver resresolver resolve request http requesthttp playground html assert not null assertnotnull res http reshttp assert equals assertequals content playground html res http reshttp get path getpath resource res http reshttp res resolver resresolver resolve request http requesthttp playground html assert not null assertnotnull res http reshttp assert equals assertequals content playground html res http reshttp get path getpath https request http servlet request httpservletrequest request https requesthttps fake sling http servlet request fakeslinghttpservletrequest https host root path rootpath resource res https reshttps res resolver resresolver resolve request https requesthttps playground html assert not null assertnotnull res https reshttps assert equals assertequals content playground html res https reshttps get path getpath resource res https reshttps res resolver resresolver resolve request https requesthttps playground html assert not null assertnotnull res https reshttps assert equals assertequals content playground html res https reshttps get path getpath http mapping string mapped http mappedhttp res resolver resresolver map res http reshttp get path getpath assert equals assertequals http host playground html mapped http mappedhttp string mapped http mappedhttp res resolver resresolver map request http requesthttp res http reshttp get path getpath assert equals assertequals playground html mapped http mappedhttp string mapped http mappedhttp res resolver resresolver map res http reshttp get path getpath assert equals assertequals http host playground html mapped http mappedhttp string mapped http mappedhttp res resolver resresolver map request http requesthttp res http reshttp get path getpath assert equals assertequals playground html mapped http mappedhttp https mapping http servlet request httpservletrequest request http requesthttp fake sling http servlet request fakeslinghttpservletrequest host root path rootpath http servlet request httpservletrequest request https requesthttps fake sling http servlet request fakeslinghttpservletrequest https host root path rootpath string mapped https mappedhttps res resolver resresolver map res https reshttps get path getpath assert equals assertequals http host playground html mapped https mappedhttps string mapped https mappedhttps res resolver resresolver map request https requesthttps res https reshttps get path getpath assert equals assertequals playground html mapped https mappedhttps string mapped https mappedhttps res resolver resresolver map request http requesthttp res https reshttps get path getpath assert equals assertequals http host playground html mapped https mappedhttps string mapped https mappedhttps res resolver resresolver map request https requesthttps res https reshttps get path getpath assert equals assertequals https host playground html mapped https mappedhttps string mapped https mappedhttps res resolver resresolver map res https reshttps get path getpath assert equals assertequals http host playground html mapped https mappedhttps string mapped https mappedhttps res resolver resresolver map request https requesthttps res https reshttps get path getpath assert equals assertequals playground html mapped https mappedhttps string mapped https mappedhttps res resolver resresolver map request http requesthttp res https reshttps get path getpath assert equals assertequals http host playground html mapped https mappedhttps string mapped https mappedhttps res resolver resresolver map request https requesthttps res https reshttps get path getpath assert equals assertequals https host playground html mapped https mappedhttps virtualhost remove virtualhost remove session save test test resolve resource alias testresolveresourcealias exception define alias root path rootpath string alias test alias testalias root node rootnode set property setproperty sling alias alias save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node root node rootnode get property getproperty sling alias remove session save test test resolve resource alias with update testresolveresourcealiaswithupdate exception define alias root path rootpath string alias test alias testalias test alias to update testaliastoupdate root node rootnode set property setproperty sling alias alias save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node update alias string alias updated aliasupdated test alias testalias test alias updated testaliasupdated root node rootnode set property setproperty sling alias alias updated aliasupdated save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias updated aliasupdated print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias updated aliasupdated print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node root node rootnode get property getproperty sling alias remove session save test test resolve removed resource alias testresolveremovedresourcealias exception define alias root path rootpath string alias test alias testalias root node rootnode set property setproperty sling alias alias save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node remove alias property root node rootnode get property getproperty sling alias remove save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert true asserttrue res non existing resource nonexistingresource assert equals assertequals alias print html res get path getpath create child alias string child node name childnodename root child alias rootchildalias node child node childnode may be create node maybecreatenode root node rootnode child node name childnodename unstructured child node childnode set property setproperty sling alias child alias childalias save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath root path rootpath child alias childalias print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath child node name childnodename res get path getpath assert equals assertequals child node childnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue child node childnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath root path rootpath child alias childalias print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath child node name childnodename res get path getpath assert equals assertequals child node childnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue child node childnode is same issame res adapt to adaptto node remove child node alias child node childnode remove save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath root path rootpath child alias childalias print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert true asserttrue res non existing resource nonexistingresource assert equals assertequals root path rootpath child alias childalias print html res get path getpath test test resolve resource alias jcr content testresolveresourcealiasjcrcontent exception define alias root path rootpath jcr content child node string alias test alias testalias node content root node rootnode add node addnode jcr content unstructured content set property setproperty sling alias alias save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias alias print html res res resolver resresolver resolve request path assert equals assertequals request resolution path resource resource type existing res get resource type getresourcetype node child root node rootnode add node addnode child unstructured child set property setproperty sling alias alias save mappings savemappings session res res resolver resresolver resolve request path assert equals assertequals child get path getpath res get path getpath child remove session save content remove session save test test resolve resource alias jcr content with update testresolveresourcealiasjcrcontentwithupdate exception define alias root path rootpath jcr content child node string alias test alias testalias test alias to update testaliastoupdate node content root node rootnode add node addnode jcr content unstructured content set property setproperty sling alias alias save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node update alias string alias updated aliasupdated test alias testalias test alias updated testaliasupdated content set property setproperty sling alias alias updated aliasupdated save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias updated aliasupdated print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias updated aliasupdated print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node content remove session save test test resolve removed esource alias jcr content testresolveremovedesourcealiasjcrcontent exception define alias root path rootpath jcr content child node string alias test alias testalias node content root node rootnode add node addnode jcr content unstructured content set property setproperty sling alias alias save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias alias print html res res resolver resresolver resolve request path assert equals assertequals request resolution path resource resource type existing res get resource type getresourcetype remove alias property content get property getproperty sling alias remove save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert true asserttrue res non existing resource nonexistingresource assert equals assertequals alias print html res get path getpath content remove session save test test resolve vanity path testresolvevanitypath exception string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node test test resolve vanity path with update testresolvevanitypathwithupdate exception string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node update vanity path vanitypath string vanity path updated vanitypathupdated string test vanity testvanity test v testv test vanity updated testvanityupdated root node rootnode set property setproperty sling vanity path vanitypath vanity path updated vanitypathupdated save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity path updated vanitypathupdated print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity path updated vanitypathupdated print html suffix pdf request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html suffix pdf res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue root node rootnode is same issame res adapt to adaptto node path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath vanity print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert true asserttrue res non existing resource nonexistingresource assert equals assertequals vanity print html res get path getpath sling ignore test test resolve removed mixin vanity path testresolveremovedmixinvanitypath exception node child node childnode create child vanity path mixin child node childnode may be create node maybecreatenode root node rootnode root child rootchild unstructured child node childnode set property setproperty sling vanity path vanitypath child vanity childvanity save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath child vanity childvanity print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert true asserttrue res non existing resource nonexistingresource assert equals assertequals child vanity childvanity print html res get path getpath add mixin child node childnode add mixin addmixin sling vanity path vanitypath save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath child vanity childvanity print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals child node childnode get path getpath res get path getpath assert equals assertequals child node childnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue child node childnode is same issame res adapt to adaptto node remove mixin child node childnode remove mixin removemixin sling vanity path vanitypath save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath child vanity childvanity print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert true asserttrue res non existing resource nonexistingresource assert equals assertequals child vanity childvanity print html res get path getpath child node childnode child node childnode remove save mappings savemappings session test test resolve vanity path with vanity order testresolvevanitypathwithvanityorder exception node child node childnode node child node childnode create child vanity path child node childnode may be create node maybecreatenode root node rootnode root child rootchild unstructured child node childnode set property setproperty sling vanity path vanitypath child vanity childvanity child node childnode add mixin addmixin sling vanity path vanitypath save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath child vanity childvanity print html http servlet request httpservletrequest request fake sling http servlet request fakeslinghttpservletrequest path resource res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals child node childnode get path getpath res get path getpath assert equals assertequals child node childnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue child node childnode is same issame res adapt to adaptto node create child vanity path child node childnode may be create node maybecreatenode root node rootnode root child rootchild unstructured child node childnode set property setproperty sling vanity path vanitypath child vanity childvanity child node childnode add mixin addmixin sling vanity path vanitypath save mappings savemappings session assert not null assertnotnull res assert equals assertequals child node childnode get path getpath res get path getpath assert equals assertequals child node childnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue child node childnode is same issame res adapt to adaptto node add vanity order vanityorder child node childnode child node childnode set property setproperty sling vanity order vanityorder save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath child vanity childvanity print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals child node childnode get path getpath res get path getpath assert equals assertequals child node childnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue child node childnode is same issame res adapt to adaptto node add vanity order vanityorder child node childnode higher child node childnode child node childnode set property setproperty sling vanity order vanityorder save mappings savemappings session path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath child vanity childvanity print html request fake sling http servlet request fakeslinghttpservletrequest path res res resolver resresolver resolve request path assert not null assertnotnull res assert equals assertequals child node childnode get path getpath res get path getpath assert equals assertequals child node childnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype assert equals assertequals print html res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo assert not null assertnotnull res adapt to adaptto node assert true asserttrue child node childnode is same issame res adapt to adaptto node child node childnode child node childnode remove child node childnode child node childnode remove session save test test get does not go up testgetdoesnotgoup exception string path root path rootpath resource res res resolver resresolver resolve fake sling http servlet request fakeslinghttpservletrequest path post path assert not null assertnotnull res assert equals assertequals post request resolution path resource resource type existing res get resource type getresourcetype resource res res resolver resresolver resolve fake sling http servlet request fakeslinghttpservletrequest path path assert not null assertnotnull res assert equals assertequals request resolution path resource resource type existing res get resource type getresourcetype test test get removes extension in resolution testgetremovesextensioninresolution exception string path root path rootpath resource res res resolver resresolver resolve fake sling http servlet request fakeslinghttpservletrequest path path assert not null assertnotnull res assert equals assertequals root path rootpath res get path getpath assert equals assertequals root node rootnode get primary node type getprimarynodetype get name getname res get resource type getresourcetype test test star resource plain teststarresourceplain exception string path root path rootpath system current time millis currenttimemillis test star resource helper teststarresourcehelper path test star resource helper teststarresourcehelper path post test star resource helper teststarresourcehelper path test star resource helper teststarresourcehelper path delete test test star resource extension teststarresourceextension exception string path root path rootpath system current time millis currenttimemillis html test star resource helper teststarresourcehelper path test star resource helper teststarresourcehelper path post test star resource helper teststarresourcehelper path test star resource helper teststarresourcehelper path delete test test star resource selector extension teststarresourceselectorextension exception string path root path rootpath system current time millis currenttimemillis print html test star resource helper teststarresourcehelper path test star resource helper teststarresourcehelper path post test star resource helper teststarresourcehelper path test star resource helper teststarresourcehelper path delete test test sling folder testslingfolder exception create folder string folder path folderpath folder node folder root node rootnode add node addnode folder path folderpath sling folder root node rootnode get session getsession save test child node type node child folder add node addnode child folder get session getsession save assert equals assertequals sling folder child get primary node type getprimarynodetype get name getname test explicit sling folder child child folder add node addnode child sling folder folder get session getsession save assert equals assertequals sling folder child get primary node type getprimarynodetype get name getname test explicit folder child child folder add node addnode child folder folder get session getsession save assert equals assertequals folder child get primary node type getprimarynodetype get name getname test child node unstructured child folder add node addnode child unstructured folder get session getsession save assert equals assertequals unstructured child get primary node type getprimarynodetype get name getname folder remove session save test test map testmap exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root path child mapped res resolver resresolver map child get path getpath assert equals assertequals path mapped child remove session save test testmapurlescaping exception string map host internal maphostinternal internal host string map root internal maprootinternal content internal node internal redirect internalredirect map root maproot get node getnode map http add node addnode map host internal maphostinternal sling mapping internal redirect internalredirect set property setproperty prop redirect internal map root internal maprootinternal save mappings savemappings session string path sample spaces string escaped path escapedpath sample spaces internal redirect test map string full url escaped string mapped res resolver resresolver map map root internal maprootinternal path assert equals assertequals http map host internal maphostinternal escaped path escapedpath mapped test map http servlet request httpservletrequest string localhost full url escaped mapped res resolver resresolver map fake sling http servlet request fakeslinghttpservletrequest root path rootpath map root internal maprootinternal path assert equals assertequals http map host internal maphostinternal escaped path escapedpath mapped test map http servlet request httpservletrequest string internal host path escaped request host port matches cut host mapped res resolver resresolver map fake sling http servlet request fakeslinghttpservletrequest map host internal maphostinternal root path rootpath map root internal maprootinternal path assert equals assertequals escaped path escapedpath mapped mapping config escaped path string unmapped root unmappedroot unmapped root unmappedroot test map string mapped res resolver resresolver map unmapped root unmappedroot path assert equals assertequals unmapped root unmappedroot escaped path escapedpath mapped test map http servlet request httpservletrequest string mapped res resolver resresolver map fake sling http servlet request fakeslinghttpservletrequest root path rootpath unmapped root unmappedroot path assert equals assertequals unmapped root unmappedroot escaped path escapedpath mapped internal redirect internalredirect remove session save test test map name space mangling testmapnamespacemangling exception string map host maphost virtual host string map root path maprootpath content virtual string context path contextpath context node virtualhost map root maproot get node getnode map http add node addnode map host maphost sling mapping virtualhost set property setproperty prop redirect internal map root path maprootpath save mappings savemappings session tests expecting paths context http servlet request httpservletrequest virtual request virtualrequest fake sling http servlet request fakeslinghttpservletrequest map host maphost root path rootpath simple mapping cut prefix add host string path v pathv sample string mapped v mappedv res resolver resresolver map virtual request virtualrequest map root path maprootpath path v pathv assert equals assertequals expect unmangled path path v pathv mapped v mappedv expected mangling host prefix string path v pathv sample jcr content string mangledv sample jcr content string mapped v mappedv res resolver resresolver map virtual request virtualrequest map root path maprootpath path v pathv assert equals assertequals expect mangled path mangledv mapped v mappedv tests expecting paths context context fake sling http servlet request fakeslinghttpservletrequest virtual request virtualrequest set context path setcontextpath context path contextpath simple mapping cut prefix add host string path vc pathvc sample string mapped vc mappedvc res resolver resresolver map virtual request virtualrequest map root path maprootpath path vc pathvc assert equals assertequals expect unmangled path context path contextpath path v pathv mapped vc mappedvc expected mangling host prefix string path vc pathvc sample jcr content string mangledvc sample jcr content string mapped vc mappedvc res resolver resresolver map virtual request virtualrequest map root path maprootpath path vc pathvc assert equals assertequals expect mangled path context path contextpath mangledvc mapped vc mappedvc tests expecting absolute url s urls context http servlet request httpservletrequest for eign request foreignrequest fake sling http servlet request fakeslinghttpservletrequest for eign foreign host root path rootpath string path f pathf sample string mapped f mappedf res resolver resresolver map for eign request foreignrequest map root path maprootpath path f pathf assert equals assertequals expect unmangled absolute uri http map host maphost path f pathf mapped f mappedf string path f pathf sample jcr content string mangledf sample jcr content string mapped f mappedf res resolver resresolver map for eign request foreignrequest map root path maprootpath path f pathf assert equals assertequals expect mangled absolute uri http map host maphost mangledf mapped f mappedf tests expecting absolute url s urls context context fake sling http servlet request fakeslinghttpservletrequest for eign request foreignrequest set context path setcontextpath context path contextpath string path fc pathfc sample string mapped fc mappedfc res resolver resresolver map for eign request foreignrequest map root path maprootpath path fc pathfc assert equals assertequals expect unmangled absolute uri http map host maphost context path contextpath path fc pathfc mapped fc mappedfc string path fc pathfc sample jcr content string mangledfc sample jcr content string mapped fc mappedfc res resolver resresolver map for eign request foreignrequest map root path maprootpath path fc pathfc assert equals assertequals expect mangled absolute uri http map host maphost context path contextpath mangledfc mapped fc mappedfc virtualhost remove session save test test map context testmapcontext exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root path child mapped res resolver resresolver map child get path getpath assert equals assertequals path mapped child remove session save test test map extension testmapextension exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root string sel ext selext html path child sel ext selext mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped child remove session save test test map selectors extension testmapselectorsextension exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root string sel ext selext sel sel html path child sel ext selext mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped child remove session save test test map extension suffix testmapextensionsuffix exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root string sel ext selext html suffx pdf path child sel ext selext mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped child remove session save test test map fragment testmapfragment exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root string sel ext selext path child sel ext selext mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped child remove session save test test map query testmapquery exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root string sel ext selext path child sel ext selext mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped child remove session save test test map fragment query testmapfragmentquery exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root string sel ext selext path child sel ext selext mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped child remove session save test test map empty path testmapemptypath exception string mapped res resolver resresolver map assert equals assertequals mapped test test map extension fragment query testmapextensionfragmentquery exception string path root node rootnode get path getpath string mapped res resolver resresolver map path assert equals assertequals path mapped node child root node rootnode add node addnode child session save absolute path expect root path rootpath segment cut mapped path map root path rootpath root string sel ext selext html path child sel ext selext mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped child remove session save test test map resource alias testmapresourcealias exception define alias root path rootpath string alias test alias testalias root node rootnode set property setproperty sling alias alias save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias string mapped res resolver resresolver map root node rootnode get path getpath assert equals assertequals path mapped node child root node rootnode add node addnode child session save path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias child mapped res resolver resresolver map child get path getpath assert equals assertequals path mapped root node rootnode get property getproperty sling alias remove root node rootnode has node hasnode child root node rootnode get node getnode child remove session save test test map resource alias jcr content testmapresourcealiasjcrcontent exception define alias root path rootpath jcr content child node string alias test alias testalias node content root node rootnode add node addnode jcr content unstructured content set property setproperty sling alias alias save mappings savemappings session string path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias string mapped res resolver resresolver map root node rootnode get path getpath assert equals assertequals path mapped path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias jcr content mapped res resolver resresolver map content get path getpath assert equals assertequals path mapped node child content add node addnode child session save path resource util resourceutil normalize resource util resourceutil get parent getparent root path rootpath alias jcr content child mapped res resolver resresolver map child get path getpath assert equals assertequals path mapped content remove session save test test resolve exception node child root node rootnode add node addnode child session save expect kind alias parent mapping root path rootpath root string path child string mapped res resolver resresolver map child get path getpath assert equals assertequals path mapped resource res res resolver resresolver resolve path assert not null assertnotnull res assert equals assertequals root node rootnode get path getpath child res get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath level alias node grandchild child add node addnode grandchild session save expect kind enkel alias parent mapping root path rootpath root string path enkel pathenkel child grandchild string mapped enkel mappedenkel res resolver resresolver map grandchild get path getpath assert equals assertequals path enkel pathenkel mapped enkel mappedenkel resource res enkel resenkel res resolver resresolver resolve path enkel pathenkel assert not null assertnotnull res enkel resenkel assert equals assertequals root node rootnode get path getpath child grandchild res enkel resenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res enkel resenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enkel resnodeenkel res enkel resenkel adapt to adaptto node assert not null assertnotnull res node enkel resnodeenkel assert equals assertequals grandchild get path getpath res node enkel resnodeenkel get path getpath child remove session save test test resolve extension exception string sel ext selext html node child root node rootnode add node addnode child session save expect kind alias parent mapping root path rootpath root string path child sel ext selext string mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped resource res res resolver resresolver resolve path assert not null assertnotnull res assert equals assertequals root node rootnode get path getpath child res get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals sel ext selext res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath level alias node grandchild child add node addnode grandchild session save expect kind enkel alias parent mapping root path rootpath root string path enkel pathenkel child grandchild sel ext selext string mapped enkel mappedenkel res resolver resresolver map grandchild get path getpath sel ext selext assert equals assertequals path enkel pathenkel mapped enkel mappedenkel resource res enkel resenkel res resolver resresolver resolve path enkel pathenkel assert not null assertnotnull res enkel resenkel assert equals assertequals root node rootnode get path getpath child grandchild res enkel resenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals sel ext selext res enkel resenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enkel resnodeenkel res enkel resenkel adapt to adaptto node assert not null assertnotnull res node enkel resnodeenkel assert equals assertequals grandchild get path getpath res node enkel resnodeenkel get path getpath child remove session save test test resolve selectors extension exception string sel ext selext sel sel html node child root node rootnode add node addnode child session save expect kind alias parent mapping root path rootpath root string path child sel ext selext string mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped resource res res resolver resresolver resolve path assert not null assertnotnull res assert equals assertequals root node rootnode get path getpath child res get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals sel ext selext res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath level alias node grandchild child add node addnode grandchild session save expect kind enkel alias parent mapping root path rootpath root string path enkel pathenkel child grandchild sel ext selext string mapped enkel mappedenkel res resolver resresolver map grandchild get path getpath sel ext selext assert equals assertequals path enkel pathenkel mapped enkel mappedenkel resource res enkel resenkel res resolver resresolver resolve path enkel pathenkel assert not null assertnotnull res enkel resenkel assert equals assertequals root node rootnode get path getpath child grandchild res enkel resenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals sel ext selext res enkel resenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enkel resnodeenkel res enkel resenkel adapt to adaptto node assert not null assertnotnull res node enkel resnodeenkel assert equals assertequals grandchild get path getpath res node enkel resnodeenkel get path getpath child remove session save test test resolve extension suffix exception string sel ext selext html suffx pdf node child root node rootnode add node addnode child session save expect kind alias parent mapping root path rootpath root string path child sel ext selext string mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped resource res res resolver resresolver resolve path node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath child remove session save test test resolve sling alias exception node child root node rootnode add node addnode child child set property setproperty sling alias kind save mappings savemappings session expect kind alias parent mapping root path rootpath root string path kind string mapped res resolver resresolver map child get path getpath assert equals assertequals path mapped resource res res resolver resresolver resolve path assert not null assertnotnull res assert equals assertequals root node rootnode get path getpath kind res get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath level alias node grandchild child add node addnode grandchild grandchild set property setproperty sling alias enkel save mappings savemappings session expect kind enkel alias parent mapping root path rootpath root string path enkel pathenkel kind enkel string mapped enkel mappedenkel res resolver resresolver map grandchild get path getpath assert equals assertequals path enkel pathenkel mapped enkel mappedenkel resource res enkel resenkel res resolver resresolver resolve path enkel pathenkel assert not null assertnotnull res enkel resenkel assert equals assertequals root node rootnode get path getpath kind enkel res enkel resenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res enkel resenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enkel resnodeenkel res enkel resenkel adapt to adaptto node assert not null assertnotnull res node enkel resnodeenkel assert equals assertequals grandchild get path getpath res node enkel resnodeenkel get path getpath child remove session save test test resolve sling alias limited access exception principal test user principal testuserprincipal access control util accesscontrolutil get principal manager getprincipalmanager session get principal getprincipal test user testuser node child root node rootnode add node addnode child child set property setproperty sling alias kind access control util accesscontrolutil replace access control entry replaceaccesscontrolentry session child get path getpath test user principal testuserprincipal string jcr session save session test user session testusersession get repository getrepository login simple credentials simplecredentials test user testuser test to char array tochararray map string object auth info authinfo hash map hashmap string object auth info authinfo resource resolver factory resourceresolverfactory user admin auth info authinfo resource resolver factory resourceresolverfactory password admin to char array tochararray auth info authinfo test attribute string testattributestring a string value astringvalue auth info authinfo test attribute number testattributenumber resource resolver resourceresolver test user resolver testuserresolver res fac resfac get resource resolver getresourceresolver auth info authinfo expect child aliased visible parent mapping root path rootpath root string path child string mapped test user resolver testuserresolver map child get path getpath assert equals assertequals path mapped resource res test user resolver testuserresolver resolve path assert not null assertnotnull res assert true asserttrue res non existing resource nonexistingresource assert equals assertequals child res get resource metadata getresourcemetadata get resolution path getresolutionpath todo correct assert equals assertequals res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo level alias node grandchild child add node addnode grandchild grandchild set property setproperty sling alias enkel access control util accesscontrolutil replace access control entry replaceaccesscontrolentry session grandchild get path getpath test user principal testuserprincipal string jcr session save expect child enkel parent node visible test user parent mapping root path rootpath root string path enkel pathenkel child enkel string mapped enkel mappedenkel test user resolver testuserresolver map grandchild get path getpath assert equals assertequals path enkel pathenkel mapped enkel mappedenkel todo commented resource res enkel resenkel test user resolver testuserresolver resolve path enkel pathenkel assert not null assertnotnull res enkel resenkel assert equals assertequals root node rootnode get path getpath kind enkel res enkel resenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res enkel resenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enkel resnodeenkel res enkel resenkel adapt to adaptto node assert not null assertnotnull res node enkel resnodeenkel assert equals assertequals grandchild get path getpath res node enkel resnodeenkel get path getpath test user session testusersession log out logout child remove session save test test resolve sling alias multi exception node child root node rootnode add node addnode child child set property setproperty sling alias string kind enfant save mappings savemappings session expect kind alias parent mapping root path rootpath root string path kind string mapped res resolver resresolver map child get path getpath assert equals assertequals path mapped resource res res resolver resresolver resolve path assert not null assertnotnull res assert equals assertequals root node rootnode get path getpath kind res get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath expect enfant alias parent mapping root path rootpath root string path enfant pathenfant enfant string mapped enfant mappedenfant res resolver resresolver map child get path getpath map sel ects selects alias assert equals assertequals path mapped enfant mappedenfant resource res enfant resenfant res resolver resresolver resolve path enfant pathenfant assert not null assertnotnull res enfant resenfant assert equals assertequals root node rootnode get path getpath enfant res enfant resenfant get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res enfant resenfant get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enfant resnodeenfant res enfant resenfant adapt to adaptto node assert not null assertnotnull res node enfant resnodeenfant assert equals assertequals child get path getpath res node enfant resnodeenfant get path getpath level alias node grandchild child add node addnode grandchild grandchild set property setproperty sling alias enkel save mappings savemappings session expect kind enkel alias parent mapping root path rootpath root string path enkel pathenkel kind enkel string mapped enkel mappedenkel res resolver resresolver map grandchild get path getpath assert equals assertequals path enkel pathenkel mapped enkel mappedenkel resource res enkel resenkel res resolver resresolver resolve path enkel pathenkel assert not null assertnotnull res enkel resenkel assert equals assertequals root node rootnode get path getpath kind enkel res enkel resenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res enkel resenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enkel resnodeenkel res enkel resenkel adapt to adaptto node assert not null assertnotnull res node enkel resnodeenkel assert equals assertequals grandchild get path getpath res node enkel resnodeenkel get path getpath expect kind enkel alias parent mapping root path rootpath root string path enfant enkel pathenfantenkel enfant enkel string mapped enfant enkel mappedenfantenkel res resolver resresolver map grandchild get path getpath map sel ects selects alias assert equals assertequals path enkel pathenkel mapped enfant enkel mappedenfantenkel resource res enfant enkel resenfantenkel res resolver resresolver resolve path enfant enkel pathenfantenkel assert not null assertnotnull res enfant enkel resenfantenkel assert equals assertequals root node rootnode get path getpath enfant enkel res enfant enkel resenfantenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals res enfant enkel resenfantenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enfant enkel resnodeenfantenkel res enfant enkel resenfantenkel adapt to adaptto node assert not null assertnotnull res node enfant enkel resnodeenfantenkel assert equals assertequals grandchild get path getpath res node enfant enkel resnodeenfantenkel get path getpath child remove session save test test resolve sling alias extension exception string sel ext selext html node child root node rootnode add node addnode child child set property setproperty sling alias kind save mappings savemappings session expect kind alias parent mapping root path rootpath root string path kind sel ext selext string mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped resource res res resolver resresolver resolve path assert not null assertnotnull res assert equals assertequals root node rootnode get path getpath kind res get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals sel ext selext res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath level alias node grandchild child add node addnode grandchild grandchild set property setproperty sling alias enkel save mappings savemappings session expect kind enkel alias parent mapping root path rootpath root string path enkel pathenkel kind enkel sel ext selext string mapped enkel mappedenkel res resolver resresolver map grandchild get path getpath sel ext selext assert equals assertequals path enkel pathenkel mapped enkel mappedenkel resource res enkel resenkel res resolver resresolver resolve path enkel pathenkel assert not null assertnotnull res enkel resenkel assert equals assertequals root node rootnode get path getpath kind enkel res enkel resenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals sel ext selext res enkel resenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enkel resnodeenkel res enkel resenkel adapt to adaptto node assert not null assertnotnull res node enkel resnodeenkel assert equals assertequals grandchild get path getpath res node enkel resnodeenkel get path getpath child remove session save test test resolve sling alias selectors extension exception string sel ext selext sel sel html node child root node rootnode add node addnode child child set property setproperty sling alias kind save mappings savemappings session expect kind alias parent mapping root path rootpath root string path kind sel ext selext string mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped resource res res resolver resresolver resolve path assert not null assertnotnull res assert equals assertequals root node rootnode get path getpath kind res get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals sel ext selext res get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath level alias node grandchild child add node addnode grandchild grandchild set property setproperty sling alias enkel save mappings savemappings session expect kind enkel alias parent mapping root path rootpath root string path enkel pathenkel kind enkel sel ext selext string mapped enkel mappedenkel res resolver resresolver map grandchild get path getpath sel ext selext assert equals assertequals path enkel pathenkel mapped enkel mappedenkel resource res enkel resenkel res resolver resresolver resolve path enkel pathenkel assert not null assertnotnull res enkel resenkel assert equals assertequals root node rootnode get path getpath kind enkel res enkel resenkel get resource metadata getresourcemetadata get resolution path getresolutionpath assert equals assertequals sel ext selext res enkel resenkel get resource metadata getresourcemetadata get resolution path info getresolutionpathinfo node res node enkel resnodeenkel res enkel resenkel adapt to adaptto node assert not null assertnotnull res node enkel resnodeenkel assert equals assertequals grandchild get path getpath res node enkel resnodeenkel get path getpath child remove session save test test resolve sling alias extension suffix exception string sel ext selext html suffx pdf node child root node rootnode add node addnode child child set property setproperty sling alias kind save mappings savemappings session expect kind alias parent mapping root path rootpath root string path kind sel ext selext string mapped res resolver resresolver map child get path getpath sel ext selext assert equals assertequals path mapped resource res res resolver resresolver resolve path node res node resnode res adapt to adaptto node assert not null assertnotnull res node resnode assert equals assertequals child get path getpath res node resnode get path getpath child remove session save internal test star resource helper teststarresourcehelper string path string method resource res res resolver resresolver resolve fake sling http servlet request fakeslinghttpservletrequest path method path assert not null assertnotnull res assert true asserttrue resource util resourceutil is star resource isstarresource res assert equals assertequals sling synthetic star resource syntheticstarresource res get resource type getresourcetype