licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling bgservlets impl servlets java io exception ioexception javax jcr session javax servlet servlet exception servletexception javax servlet http http servlet response httpservletresponse org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations service org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api servlets sling all methods servlet slingallmethodsservlet org apache sling bgservlets background servlet constants backgroundservletconstants org apache sling bgservlets job console jobconsole org apache sling bgservlets job status jobstatus org apache sling commons json json exception jsonexception org apache sling commons json json writer jsonwriter handles post job node request job change component service properties property sling servlet resource types resourcetypes background servlet constants backgroundservletconstants job resource type property sling servlet methods post suppress warnings suppresswarnings serial job state change servlet jobstatechangeservlet sling all methods servlet slingallmethodsservlet string param desired state desiredstate reference job console jobconsole job console jobconsole override do post dopost sling http servlet request slinghttpservletrequest request sling http servlet response slinghttpservletresponse response servlet exception servletexception io exception ioexception string str request get parameter getparameter param str response send error senderror http servlet response httpservletresponse bad request missing parameter param job status jobstatus desired state desiredstate job status jobstatus desired state desiredstate job status jobstatus value of valueof str exception response send error senderror http servlet response httpservletresponse bad request invalid param str session session request get resource resolver getresourceresolver adapt to adaptto session session response send error senderror http servlet response httpservletresponse internal server error resource resolver resourceresolver adapt session job status jobstatus job console jobconsole get job status getjobstatus session request get resource getresource get path getpath job status jobstatus old state oldstate get state getstate request state change requeststatechange desired state desiredstate job status jobstatus new state newstate get state getstate response set content type setcontenttype application json response set character encoding setcharacterencoding utf json writer jsonwriter json writer jsonwriter response get writer getwriter object key info requested change key param desired state desiredstate to string tostring key path get path getpath key current state currentstate new state newstate key state changed statechanged new state newstate old state oldstate end object endobject json exception jsonexception servlet exception servletexception json exception jsonexception do post dopost