licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal org apache sling api sling constants slingconstants property attributes org apache sling api sling constants slingconstants property changed attributes org apache sling api sling constants slingconstants property path org apache sling api sling constants slingconstants property removed attributes org apache sling api sling constants slingconstants property resource type org apache sling api sling constants slingconstants property resource type org apache sling api sling constants slingconstants topic resource org apache sling api sling constants slingconstants topic resource changed org apache sling api sling constants slingconstants topic resource removed java closeable java io exception ioexception java util dictionary java util hash map hashmap java util hashtable java util map java util java util concurrent executor javax jcr node javax jcr repository exception repositoryexception org apache jackrabbit oak plugins observation node observer nodeobserver org apache jackrabbit oak spi commit background observer backgroundobserver org apache jackrabbit oak spi commit commit info commitinfo org apache jackrabbit oak spi commit observer org apache sling api sling constants slingconstants org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling jcr resource internal helper jcr path mapper pathmapper org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service registration serviceregistration org osgi service event event admin eventadmin org osgi service event event properties eventproperties org slf logger org slf logger factory loggerfactory code oak resource listener oakresourcelistener implementation translates rel ays relays events osg i osgi code event admin eventadmin oak resource listener oakresourcelistener node observer nodeobserver closeable logger logger logger factory loggerfactory get logger getlogger get class getclass repository mounted path string mount prefix mountprefix service registration serviceregistration service registration serviceregistration helper object observation listener support observationlistenersupport support path mapper pathmapper path mapper pathmapper oak resource listener oakresourcelistener string mount prefix mountprefix observation listener support observationlistenersupport support bundle context bundlecontext bundle context bundlecontext executor executor path mapper pathmapper path mapper pathmapper observation queue length observationqueuelength repository exception repositoryexception jcr primary type primarytype sling resource type resourcetype sling resource super type resourcesupertype support support path mapper pathmapper path mapper pathmapper mount prefix mountprefix mount prefix mountprefix mount prefix mountprefix length mount prefix mountprefix equals mount prefix mountprefix dictionary string object props hashtable string object props constants service vendor apache software foundation props constants service description apache sling jcr observation listener oak observer observer background observer backgroundobserver executor observation queue length observationqueuelength override queue size queuesize queue size queuesize observation queue length observationqueuelength logger warn revision queue observer full max revisions comp acted compacted get class getclass get name getname observation queue length observationqueuelength service registration serviceregistration bundle context bundlecontext register service registerservice observer get name getname observer props dispose listener override close io exception ioexception service registration serviceregistration unregister support dispose override string path string string deleted string changed map string string properties commit info commitinfo commit info commitinfo map string object to event properties toeventproperties deleted changed add commit info addcommitinfo commit info commitinfo logger is debug enabled isdebugenabled logger debug path deleted changed object path deleted changed send osgi event sendosgievent path topic resource properties override deleted string path string string deleted string changed map string string properties commit info commitinfo commit info commitinfo map string object to event properties toeventproperties deleted changed add commit info addcommitinfo commit info commitinfo logger is debug enabled isdebugenabled logger debug deleted path deleted changed object path deleted changed send osgi event sendosgievent path topic resource removed properties override changed string path string string deleted string changed map string string properties commit info commitinfo commit info commitinfo map string object to event properties toeventproperties deleted changed add commit info addcommitinfo commit info commitinfo logger is debug enabled isdebugenabled logger debug changed path deleted changed object path deleted changed send osgi event sendosgievent path topic resource changed properties add commit info addcommitinfo map string object commit info commitinfo commit info commitinfo commit info commitinfo get user id getuserid sling constants slingconstants property user id userid commit info commitinfo get user id getuserid commit info commitinfo commit info commitinfo empty event application unknown map string object to event properties toeventproperties string string deleted string changed map string object properties hash map hashmap string object size properties property attributes to array toarray string size changed changed size properties property changed attributes changed to array toarray string changed size deleted deleted size properties property removed attributes deleted to array toarray string deleted size properties send osgi event sendosgievent string path string topic map string object map string string properties path changed file jcr content resource string change path changepath mount prefix mountprefix change path changepath path change path changepath mount prefix mountprefix path property path change path changepath event admin eventadmin local ea localea support get event admin geteventadmin local ea localea send event sendevent topic resource removed equals topic string resource type resourcetype properties sling resource type resourcetype string resource super type resourcesupertype properties sling resource super type resourcesupertype string node type nodetype properties jcr primary type primarytype check file nodes path ends with endswith jcr content resource resolver resourceresolver resolver support get resource resolver getresourceresolver resolver send event sendevent logger debug resource resolver resource rsrc resolver get resource getresource change path changepath rsrc resolver refresh send event sendevent logger debug resource path change path changepath check jcr backed resource visible node node rsrc adapt to adaptto node node node get parent getparent is node type isnodetype file resource parent resource parentresource rsrc get parent getparent parent resource parentresource update resource type path parent node resource type resourcetype parent resource parentresource get resource type getresourcetype resource super type resourcesupertype parent resource parentresource get resource super type getresourcesupertype property path parent resource parentresource get path getpath repository exception repositoryexception logger error get message getmessage jcr backed resource send event sendevent logger debug adapt resource node change path changepath send event sendevent silent not e note resolve resource logger debug process osgi event queue processosgieventqueue resource expected modified node change path changepath update resource type properties send event sendevent resource type resourcetype property resource type node type nodetype property resource type resource type resourcetype resource super type resourcesupertype property resource type resource super type resourcesupertype send event sendevent string resource path resourcepath path mapper pathmapper map path to resource path mapjcrpathtoresourcepath sling constants slingconstants property path to string tostring resource path resourcepath support is excluded isexcluded resource path resourcepath sling constants slingconstants property path resource path resourcepath local ea localea send event sendevent org osgi service event event topic event properties eventproperties logger debug drop ping dropping observation event sling constants slingconstants property path exception logger warn send osgi event sendosgievent unexpected problem processing event topic path