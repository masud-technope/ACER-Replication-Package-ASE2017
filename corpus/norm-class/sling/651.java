licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution transport impl java util array list arraylist java util collections java util list org apache sling api resource resource resolver resourceresolver org apache sling distribution distribution request distributionrequest org apache sling distribution distribution request type distributionrequesttype org apache sling distribution simple distribution request simpledistributionrequest org apache sling distribution serialization distribution package distributionpackage org apache sling distribution serialization distribution package info distributionpackageinfo org apache sling distribution transport core distribution transport distributiontransport org junit test org junit assert equals assertequals org junit assert false assertfalse org junit assert not null assertnotnull org junit assert true asserttrue org mockito mockito mock org mockito mockito test case testcase link multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport test multipleendpointdistributiontransporttest test test deliver package without sub handlers testdeliverpackagewithoutsubhandlers exception list distribution transport distributiontransport sub handlers subhandlers array list arraylist distribution transport distributiontransport resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage distribution package info distributionpackageinfo info distribution package info distributionpackageinfo foo distribution package distributionpackage get info getinfo then return thenreturn info transport endpoint strategy type transportendpointstrategytype strategy transport endpoint strategy type transportendpointstrategytype values multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport sub handlers subhandlers strategy multiple endpoint distribution transport multipleendpointdistributiontransport deliver package deliverpackage resource resolver resourceresolver distribution package distributionpackage test test retrieve packages without sub handlers testretrievepackageswithoutsubhandlers exception list distribution transport distributiontransport sub handlers subhandlers array list arraylist distribution transport distributiontransport resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver distribution request distributionrequest distribution request distributionrequest simple distribution request simpledistributionrequest distribution request type distributionrequesttype add transport endpoint strategy type transportendpointstrategytype strategy transport endpoint strategy type transportendpointstrategytype values multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport sub handlers subhandlers strategy list distribution package distributionpackage distribution packages distributionpackages multiple endpoint distribution transport multipleendpointdistributiontransport retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest assert not null assertnotnull distribution packages distributionpackages assert true asserttrue distribution packages distributionpackages is empty isempty test test deliver package with sub handlers testdeliverpackagewithsubhandlers exception list distribution transport distributiontransport sub handlers subhandlers array list arraylist distribution transport distributiontransport distribution transport distributiontransport mock distribution transport distributiontransport sub handlers subhandlers add distribution transport distributiontransport mock distribution transport distributiontransport sub handlers subhandlers add resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage distribution package info distributionpackageinfo info distribution package info distributionpackageinfo foo distribution package distributionpackage get info getinfo then return thenreturn info transport endpoint strategy type transportendpointstrategytype strategy transport endpoint strategy type transportendpointstrategytype values multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport sub handlers subhandlers strategy multiple endpoint distribution transport multipleendpointdistributiontransport deliver package deliverpackage resource resolver resourceresolver distribution package distributionpackage test test retrieve packages with sub handlers testretrievepackageswithsubhandlers exception resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver distribution request distributionrequest distribution request distributionrequest simple distribution request simpledistributionrequest distribution request type distributionrequesttype add list distribution transport distributiontransport sub handlers subhandlers array list arraylist distribution transport distributiontransport distribution transport distributiontransport mock distribution transport distributiontransport iterable distribution package distributionpackage packages collections empty list emptylist retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn packages sub handlers subhandlers add distribution transport distributiontransport mock distribution transport distributiontransport retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn packages sub handlers subhandlers add transport endpoint strategy type transportendpointstrategytype strategy transport endpoint strategy type transportendpointstrategytype values multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport sub handlers subhandlers strategy list distribution package distributionpackage distribution packages distributionpackages multiple endpoint distribution transport multipleendpointdistributiontransport retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest assert not null assertnotnull distribution packages distributionpackages assert true asserttrue distribution packages distributionpackages is empty isempty test test retrieve packages with one returning sub handler and all strategy testretrievepackageswithonereturningsubhandlerandallstrategy exception distribution request distributionrequest distribution request distributionrequest simple distribution request simpledistributionrequest distribution request type distributionrequesttype add resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver list distribution transport distributiontransport sub handlers subhandlers array list arraylist distribution transport distributiontransport distribution transport distributiontransport handler mock distribution transport distributiontransport list distribution package distributionpackage packages array list arraylist distribution package distributionpackage packages add mock distribution package distributionpackage packages add mock distribution package distributionpackage handler retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn packages sub handlers subhandlers add handler multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport sub handlers subhandlers transport endpoint strategy type transportendpointstrategytype list distribution package distributionpackage distribution packages distributionpackages multiple endpoint distribution transport multipleendpointdistributiontransport retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest assert not null assertnotnull distribution packages distributionpackages assert false assertfalse distribution packages distributionpackages is empty isempty assert equals assertequals distribution packages distributionpackages size test test retrieve packages with one empty one returning sub handler and one strategy testretrievepackageswithoneemptyonereturningsubhandlerandonestrategy exception distribution request distributionrequest distribution request distributionrequest simple distribution request simpledistributionrequest distribution request type distributionrequesttype add resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver list distribution transport distributiontransport sub handlers subhandlers array list arraylist distribution transport distributiontransport distribution transport distributiontransport handler mock distribution transport distributiontransport handler retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn array list arraylist distribution package distributionpackage sub handlers subhandlers add handler distribution transport distributiontransport handler mock distribution transport distributiontransport list distribution package distributionpackage packages array list arraylist distribution package distributionpackage packages add mock distribution package distributionpackage packages add mock distribution package distributionpackage handler retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn packages sub handlers subhandlers add handler multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport sub handlers subhandlers transport endpoint strategy type transportendpointstrategytype list distribution package distributionpackage distribution packages distributionpackages multiple endpoint distribution transport multipleendpointdistributiontransport retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest assert not null assertnotnull distribution packages distributionpackages assert true asserttrue distribution packages distributionpackages is empty isempty test test retrieve packages with two returning sub handlers and all strategy testretrievepackageswithtworeturningsubhandlersandallstrategy exception distribution request distributionrequest distribution request distributionrequest simple distribution request simpledistributionrequest distribution request type distributionrequesttype add resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver list distribution transport distributiontransport sub handlers subhandlers array list arraylist distribution transport distributiontransport distribution transport distributiontransport handler mock distribution transport distributiontransport list distribution package distributionpackage packages array list arraylist distribution package distributionpackage packages add mock distribution package distributionpackage packages add mock distribution package distributionpackage handler retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn packages sub handlers subhandlers add handler distribution transport distributiontransport handler mock distribution transport distributiontransport list distribution package distributionpackage packages array list arraylist distribution package distributionpackage packages add mock distribution package distributionpackage packages add mock distribution package distributionpackage packages add mock distribution package distributionpackage handler retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn packages sub handlers subhandlers add handler multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport sub handlers subhandlers transport endpoint strategy type transportendpointstrategytype list distribution package distributionpackage distribution packages distributionpackages multiple endpoint distribution transport multipleendpointdistributiontransport retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest assert not null assertnotnull distribution packages distributionpackages assert false assertfalse distribution packages distributionpackages is empty isempty assert equals assertequals distribution packages distributionpackages size test test retrieve packages with two returning sub handlers and one strategy testretrievepackageswithtworeturningsubhandlersandonestrategy exception distribution request distributionrequest distribution request distributionrequest simple distribution request simpledistributionrequest distribution request type distributionrequesttype add resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver list distribution transport distributiontransport sub handlers subhandlers array list arraylist distribution transport distributiontransport distribution transport distributiontransport handler mock distribution transport distributiontransport list distribution package distributionpackage packages array list arraylist distribution package distributionpackage packages add mock distribution package distributionpackage packages add mock distribution package distributionpackage handler retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn packages sub handlers subhandlers add handler distribution transport distributiontransport handler mock distribution transport distributiontransport list distribution package distributionpackage packages array list arraylist distribution package distributionpackage packages add mock distribution package distributionpackage packages add mock distribution package distributionpackage packages add mock distribution package distributionpackage handler retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn packages sub handlers subhandlers add handler multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport multiple endpoint distribution transport multipleendpointdistributiontransport sub handlers subhandlers transport endpoint strategy type transportendpointstrategytype list distribution package distributionpackage distribution packages distributionpackages multiple endpoint distribution transport multipleendpointdistributiontransport retrieve packages retrievepackages resource resolver resourceresolver distribution request distributionrequest assert not null assertnotnull distribution packages distributionpackages assert false assertfalse distribution packages distributionpackages is empty isempty assert equals assertequals distribution packages distributionpackages size