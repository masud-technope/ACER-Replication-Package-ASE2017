licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling superimposing impl org apache sling superimposing superimposing resource provider superimposingresourceprovider mixin superimpose org apache sling superimposing superimposing resource provider superimposingresourceprovider prop superimpose overlayable org apache sling superimposing superimposing resource provider superimposingresourceprovider prop superimpose register parent org apache sling superimposing superimposing resource provider superimposingresourceprovider prop superimpose source path java util array list arraylist java util dictionary java util hash map hashmap java util iterator java util list java util map java util concurrent concurrent hash map concurrenthashmap java util concurrent concurrent map concurrentmap java util concurrent executors java util concurrent javax jcr repository exception repositoryexception javax jcr session javax jcr observation event javax jcr observation event iterator eventiterator javax jcr observation event listener eventlistener org apache commons collect ions collections iterator utils iteratorutils org apache commons lang string utils stringutils org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations reference org apache felix scr annotations service org apache sling api resource login exception loginexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling api resource resource util resourceutil org apache sling commons osgi properties util propertiesutil org apache sling superimposing superimposing manager superimposingmanager org apache sling superimposing superimposing resource provider superimposingresourceprovider org osgi framework bundle context bundlecontext org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory manages resource registrations link superimposing resource provider impl superimposingresourceproviderimpl read access registered providers component label apache sling superimposing resource manager description manages resource registrations superimposing resource provider metatype service superimposing manager superimposingmanager superimposing manager impl superimposingmanagerimpl superimposing manager superimposingmanager event listener eventlistener property label enabled description enable disable superimposing functionality bool value boolvalue superimposing manager impl superimposingmanagerimpl enabled string enabled property enabled enabled enabled property label find queries description list query expressions find existing superimposing registrations service startup query syntax depending underlying resource prov dider provdider implementation prepend query query syntax separated superimposing manager impl superimposingmanagerimpl findallqueries unbounded property unbounded propertyunbounded array string findallqueries property find all queries findallqueries string findallqueries jcr sql select mixin superimpose isdescendantnode content string find all queries findallqueries property label obervation paths description list paths monitored resource events detect superimposing content nodes superimposing manager impl superimposingmanagerimpl observation paths unbounded property unbounded propertyunbounded array string observation paths property obervation paths obervationpaths string observation paths content string obervation paths obervationpaths event listener eventlistener observation event listeners observationeventlisteners map holding superimposing mappings super impose superimpose path key providers values concurrent map concurrentmap string superimposing resource provider impl superimposingresourceproviderimpl superimposing providers superimposingproviders concurrent hash map concurrenthashmap string superimposing resource provider impl superimposingresourceproviderimpl reference resource resolver factory resourceresolverfactory resolver factory resolverfactory administrative resource resolver read usage resource resolver resourceresolver resolver reference initialization task needed check initialization completed initialization bundle context bundle context bundlecontext bundle context bundlecontext logger logger log logger factory loggerfactory get logger getlogger superimposing manager impl superimposingmanagerimpl find existing superimposing registrations query defined service configuration param resolver resource resolver superimposing registrations suppress warnings suppresswarnings unchecked list resource find super imposings findsuperimposings resource resolver resourceresolver resolver list resource all resources allresources array list arraylist resource string query string querystring find all queries findallqueries string utils stringutils query string querystring illegal argument exception illegalargumentexception query string query syntax sep erated seperated query string querystring string query language querylanguage string utils stringutils substring before substringbefore query string querystring string query string utils stringutils substring after substringafter query string querystring all resources allresources add all addall iterator utils iteratorutils to list tolist resolver find resources findresources query query language querylanguage all resources allresources register all super imposings registerallsuperimposings log debug start registering superimposing trees start system current time millis currenttimemillis count success countsuccess count failed countfailed list resource existing super imposings existingsuperimposings find super imposings findsuperimposings resolver resource superimposing resource superimposingresource existing super imposings existingsuperimposings success register provider registerprovider superimposing resource superimposingresource success count success countsuccess count failed countfailed time system current time millis currenttimemillis start log info registered superimposing resource provider superimposingresourceprovider skip ping skipping invalid object count success countsuccess time count failed countfailed param superimposing resource superimposingresource registration skipped registered repository exception repositoryexception register provider registerprovider resource superimposing resource superimposingresource string super impose path superimposepath superimposing resource superimposingresource get path getpath jcr api properties superimposing resource superimposing delivery values source node string source path sourcepath get jcr string property getjcrstringproperty super impose path superimposepath prop superimpose source path register parent registerparent get jcr boolean property getjcrbooleanproperty super impose path superimposepath prop superimpose register parent over layable overlayable get jcr boolean property getjcrbooleanproperty super impose path superimposepath prop superimpose overlayable check superimposing definition valid valid string utils stringutils is blank isblank source path sourcepath valid check parent node registered superimposing provider register parent registerparent super impose path superimposepath resource util resourceutil get parent getparent super impose path superimposepath target path valid equals parent child superimposing path superimposing path string utils stringutils equals source path sourcepath super impose path superimposepath string utils stringutils starts with startswith source path sourcepath super impose path superimposepath string utils stringutils starts with startswith super impose path superimposepath source path sourcepath valid register valid superimposing valid superimposing resource provider impl superimposingresourceproviderimpl srp superimposing resource provider impl superimposingresourceproviderimpl super impose path superimposepath source path sourcepath over layable overlayable superimposing resource provider impl superimposingresourceproviderimpl old srp oldsrp superimposing providers superimposingproviders super impose path superimposepath srp unregister provider registered srp equals old srp oldsrp log debug registering resource provider super impose path superimposepath old srp oldsrp old srp oldsrp unregister service unregisterservice srp register service registerservice bundle context bundlecontext log debug skipped registering resource provider relevant super impose path superimposepath remove previous superimposing resource provider superimposing definition valid superimposing resource provider impl superimposingresourceproviderimpl old srp oldsrp superimposing providers superimposingproviders remove super impose path superimposepath old srp oldsrp log debug unregistering resource provider super impose path superimposepath old srp oldsrp unregister service unregisterservice log warn superimposing definition pointing invalid super impose path superimposepath source path sourcepath string get jcr string property getjcrstringproperty string p node path pnodepath string p prop ert name ppropertname string absolute property path absolutepropertypath p node path pnodepath p prop ert name ppropertname session session resolver adapt to adaptto session session item exists itemexists absolute property path absolutepropertypath session get property getproperty absolute property path absolutepropertypath get string getstring repository exception repositoryexception get jcr boolean property getjcrbooleanproperty string p node path pnodepath string p prop ert name ppropertname string absolute property path absolutepropertypath p node path pnodepath p prop ert name ppropertname session session resolver adapt to adaptto session session item exists itemexists absolute property path absolutepropertypath session get property getproperty absolute property path absolutepropertypath get boolean getboolean repository exception repositoryexception register provider registerprovider string path resource provider resolver get resource getresource path provider register provider registerprovider provider unregister provider unregisterprovider string path superimposing resource provider impl superimposingresourceproviderimpl srp superimposing providers superimposingproviders remove path srp srp unregister service unregisterservice scr int egration integration activate activate component context componentcontext ctx login exception loginexception repository exception repositoryexception check enabled suppress warnings suppresswarnings unchecked dictionary string object props ctx get properties getproperties enabled properties util propertiesutil to boolean toboolean props enabled property enabled log debug config enabled enabled is enabled isenabled find queries find all queries findallqueries properties util propertiesutil to string array tostringarray props findallqueries property string findallqueries obervation paths obervationpaths properties util propertiesutil to string array tostringarray props observation paths property string observation paths resolver bundle context bundlecontext ctx get bundle context getbundlecontext resolver resolver factory resolverfactory get administrative resource resolver getadministrativeresourceresolver watch events root register deregister super imp osings superimposings runtime observed path create event listener object redirects event main session session resolver adapt to adaptto session session observation event listeners observationeventlisteners event listener eventlistener obervation paths obervationpaths length obervation paths obervationpaths length observation event listeners observationeventlisteners event listener eventlistener on event onevent event iterator eventiterator events superimposing manager impl superimposingmanagerimpl on event onevent events session get workspace getworkspace get observation manager getobservationmanager add event listener addeventlistener observation event listeners observationeventlisteners event node event node removed event property event property changed event property removed absolute path obervation paths obervationpaths is deep isdeep uuids node types no local nolocal register superimposing definitions exist initialization executors new single thread executor newsinglethreadexecutor sub mit submit runnable register all super imposings registerallsuperimposings throwable log warn error registering existing superimposing resources service startup deactivate deactivate component context componentcontext ctx repository exception repositoryexception initialization finished initialization initialization is done isdone initialization cancel my int err upt if running myinterruptifrunning register jcr observation resolver session session resolver adapt to adaptto session session observation event listeners observationeventlisteners event listener eventlistener event listener eventlistener observation event listeners observationeventlisteners session get workspace getworkspace get observation manager getobservationmanager remove event listener removeeventlistener event listener eventlistener register super imp sing superimpsing resource providers superimposing resource provider impl superimposingresourceproviderimpl srp superimposing providers superimposingproviders values srp unregister service unregisterservice resolver resolver close resolver initialization superimposing providers superimposingproviders clear handle resource events add remove superimposing registrations on event onevent event iterator eventiterator events is enabled isenabled collect actions performed event map string actions hash map hashmap string node added nodeadded node removed noderemoved events has next hasnext event event events next event nextevent string path event get path getpath string resource util resourceutil get name getname path event get type gettype event node node added nodeadded event get type gettype event node removed superimposing providers superimposingproviders contains key containskey path node removed noderemoved actions path string utils stringutils equals prop superimpose source path string utils stringutils equals prop superimpose register parent string utils stringutils equals prop superimpose overlayable string node path nodepath resource util resourceutil get parent getparent path actions node path nodepath transaction map entry string action actions entry set entryset action get value getvalue register provider registerprovider action get key getkey unregister provider unregisterprovider action get key getkey node added nodeadded node removed noderemoved superimposing moved register super imp osings superimposings existing skipped register all super imposings registerallsuperimposings repository exception repositoryexception log error unexpected repository exception event processing superimposing mode enabled is enabled isenabled enabled iterator superimposing resource providers registered iterator backed link java util concurrent concurrent hash map concurrenthashmap safe access superimposing resource providers registered unregistered time suppress warnings suppresswarnings unchecked iterator superimposing resource provider superimposingresourceprovider get registered providers getregisteredproviders iterator utils iteratorutils unmodifiable iterator unmodifiableiterator superimposing providers superimposingproviders values iterator superimposing manager impl superimposingmanagerimpl with resource resolver factory withresourceresolverfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory resolver factory resolverfactory resolver factory resolverfactory