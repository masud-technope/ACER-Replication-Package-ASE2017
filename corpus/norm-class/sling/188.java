licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr content loader contentloader internal read ers readers java buffered input stream bufferedinputstream java byte array output stream bytearrayoutputstream java io exception ioexception java input stream inputstream java util hash set hashset java util linked hash map linkedhashmap java util map java util java util regex pattern javax jcr property type propertytype javax jcr repository exception repositoryexception org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations service org apache sling commons json json array jsonarray org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling jcr content loader contentloader content creator contentcreator org apache sling jcr content loader contentloader content reader contentreader code json reader jsonreader code parses json document content load creates node structure properties update nodes properties rep policy children pre nodes properties fact complete sub trees subtrees json files skeleton structure http json org syntax json node file json ext optional primary node type quot unstructured quot quot jcr primary type primarytype quot quot sling scr ipted component scriptedcomponent quot optional mixin node types array quot jcr mixin types mixintypes quot quot properties quot key pairs key property string property array multi values object property denotes property type property denotes property type quot sling content class contentclass quot quot day sling jcr test test quot quot sample multi samplemulti quot quot quot quot quot quot sample struct samplestruct quot quot sample struct multi samplestructmulti quot reference properties start jcr reference quot jcr reference sample reference samplereference quot quot test content quot path proper tie propertie start jcr path quot jcr path sample reference samplereference quot quot test path quot nested nodes nested maps quot sling scripts quot quot jcr primary type primarytype quot quot sling script list scriptlist quot quot script quot quot primary node type primarynodetype quot quot sling script quot quot sling quot quot test content jsp start jsp quot quot sling type quot quot jsp quot quot sling glob quot quot quot pre component service properties property content reader contentreader property extensions json property content reader contentreader property types application json json reader jsonreader content reader contentreader pattern json date jsondate pattern compile string reference jcr reference string path jcr path string jcr string uri jcr uri string ignored names ignorednames hash set hashset string ignored names ignorednames add jcr primary type primarytype ignored names ignorednames add jcr mixin types mixintypes ignored names ignorednames add jcr uuid ignored names ignorednames add jcr base version baseversion ignored names ignorednames add jcr predecessors ignored names ignorednames add jcr success ors successors ignored names ignorednames add jcr checked out checkedout ignored names ignorednames add jcr created string ignored principal property names ignoredprincipalpropertynames hash set hashset string ignored principal property names ignoredprincipalpropertynames add ignored principal property names ignoredprincipalpropertynames add isgroup ignored principal property names ignoredprincipalpropertynames add members ignored principal property names ignoredprincipalpropertynames add dynamic ignored principal property names ignoredprincipalpropertynames add password string security principles security principals string security acl security acl org apache sling jcr content loader contentloader content reader contentreader parse java net url org apache sling jcr content loader contentloader content creator contentcreator parse java net url url content creator contentcreator content creator contentcreator io exception ioexception repository exception repositoryexception input stream inputstream ins ins url open stream openstream parse ins content creator contentcreator ins ins close io exception ioexception ignore parse input stream inputstream ins content creator contentcreator content creator contentcreator io exception ioexception repository exception repositoryexception string json string jsonstring to string tostring ins trim json string jsonstring starts with startswith json string jsonstring json string jsonstring json object jsonobject json json object jsonobject json string jsonstring create node createnode json content creator contentcreator json exception jsonexception io exception ioexception io exception ioexception get message getmessage init cause initcause create node createnode string json object jsonobject obj content creator contentcreator content creator contentcreator json exception jsonexception repository exception repositoryexception object primary type obj primarytypeobj obj opt jcr primary type primarytype string primary type primarytype primary type obj primarytypeobj primary type primarytype string value of valueof primary type obj primarytypeobj string mixin types mixintypes object mixins object mixinsobject obj opt jcr mixin types mixintypes mixins object mixinsobject json array jsonarray json array jsonarray mixins json array jsonarray mixins object mixinsobject mixin types mixintypes string mixins length mixins length mixin types mixintypes mixins get string getstring content creator contentcreator create node createnode primary type primarytype mixin types mixintypes add properties nodes json array jsonarray names obj names names names length string names get string getstring skip objects ignored names ignorednames object obj security principles equals create principals createprincipals content creator contentcreator security acl equals create acl createacl content creator contentcreator json object jsonobject create node createnode json object jsonobject content creator contentcreator create property createproperty content creator contentcreator content creator contentcreator finish node finishnode create property createproperty string object content creator contentcreator content creator contentcreator json exception jsonexception repository exception repositoryexception assume simple json array jsonarray multivalue json array jsonarray array json array jsonarray array length string values string array length array length values array to string tostring property type propertytype get type gettype array content creator contentcreator create property createproperty get name getname property type propertytype values content creator contentcreator create property createproperty get name getname property type propertytype string string single property type propertytype get type gettype content creator contentcreator create property createproperty get name getname property type propertytype to string tostring get type gettype string object object object object property type propertytype object number property type propertytype object property type propertytype object string starts with startswith reference property type propertytype reference starts with startswith path property type propertytype path starts with startswith property type propertytype starts with startswith uri property type propertytype uri json date jsondate matcher string object matches property type propertytype fall property type propertytype undefined string get name getname string starts with startswith reference substring reference length starts with startswith path substring path length starts with startswith substring length starts with startswith uri substring uri length string to string tostring input stream inputstream ins io exception ioexception ins mark supported marksupported ins buffered input stream bufferedinputstream ins string encoding ins mark ins read character encoding string buffer stringbuffer buf string buffer stringbuffer ins read character is whitespace iswhitespace ins read buf append encoding buf to string tostring ins reset encoding utf byte array output stream bytearrayoutputstream bos byte array output stream bytearrayoutputstream buf ins read buf bos write buf comply contract bos close string bos to byte array tobytearray encoding create update user groups code security principals owner isgroup members dynamic code create principals createprincipals object obj content creator contentcreator content creator contentcreator json exception jsonexception repository exception repositoryexception obj json object jsonobject single principal create principal createprincipal json object jsonobject obj content creator contentcreator obj json array jsonarray array principals json array jsonarray json array jsonarray json array jsonarray obj json array jsonarray length object object json array jsonarray object json object jsonobject create principal createprincipal json object jsonobject object content creator contentcreator json exception jsonexception unexpected data type principals array object get class getclass get name getname create update user group create principal createprincipal json object jsonobject json content creator contentcreator content creator contentcreator json exception jsonexception repository exception repositoryexception create principal string json get string getstring is group isgroup json opt boolean optboolean isgroup collect extra property names assign principal map string object extra props extraprops linked hash map linkedhashmap string object json array jsonarray names json names names length string prop name propname names get string getstring ignored principal property names ignoredprincipalpropertynames prop name propname object json prop name propname extra props extraprops prop name propname is group isgroup string members json array jsonarray membersjsonarray json optjsonarray members membersjsonarray members string membersjsonarray length membersjsonarray length members membersjsonarray get string getstring content creator contentcreator create group creategroup members extra props extraprops string password json get string getstring password content creator contentcreator create user createuser password extra props extraprops create update access control entries current node code security acl principal username granted jcr read jcr write denied principal group name groupname granted jcr read jcr write code create acl createacl object obj content creator contentcreator content creator contentcreator json exception jsonexception repository exception repositoryexception obj json object jsonobject single ace create ace createace json object jsonobject obj content creator contentcreator obj json array jsonarray array aces json array jsonarray json array jsonarray json array jsonarray obj json array jsonarray length object object json array jsonarray object json object jsonobject create ace createace json object jsonobject object content creator contentcreator json exception jsonexception unexpected data type acl array object get class getclass get name getname create update access control entry create ace createace json object jsonobject ace content creator contentcreator content creator contentcreator json exception jsonexception repository exception repositoryexception string principalid ace get string getstring principal string granted privileges grantedprivileges json array jsonarray granted ace optjsonarray granted granted granted privileges grantedprivileges string granted length granted length granted privileges grantedprivileges granted get string getstring string denied privileges deniedprivileges json array jsonarray denied ace optjsonarray denied denied denied privileges deniedprivileges string denied length denied length denied privileges deniedprivileges denied get string getstring string order ace opt string optstring order work content creator contentcreator create ace createace principalid granted privileges grantedprivileges denied privileges deniedprivileges order