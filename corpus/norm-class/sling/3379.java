licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling engine impl helper org junit javax servlet request dispatcher requestdispatcher javax servlet servlet context servletcontext javax servlet servlet request servletrequest javax servlet servlet request wrapper servletrequestwrapper javax servlet servlet response servletresponse javax servlet servlet response wrapper servletresponsewrapper javax servlet http http servlet request httpservletrequest javax servlet http http servlet request wrapper httpservletrequestwrapper javax servlet http http servlet response httpservletresponse javax servlet http http servlet response wrapper httpservletresponsewrapper org apache sling engine impl sling http servlet request impl slinghttpservletrequestimpl org apache sling engine impl sling http servlet response impl slinghttpservletresponseimpl org apache sling engine impl helper external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper org jmock expectations org jmock mockery org jmock int egration integration junit j mock jmock org jmock int egration integration junit j unit junit mockery org junit test org junit runner run with runwith run with runwith j mock jmock external servlet context wrapper test externalservletcontextwrappertest mockery context j unit junit mockery tests request dispatcher requestdispatcher wrapped test test get request dispatcher testgetrequestdispatcher request dispatcher requestdispatcher context mock request dispatcher requestdispatcher servlet context servletcontext ctx context mock servlet context servletcontext context checking expectations one of oneof ctx get request dispatcher getrequestdispatcher foo jsp return value returnvalue external servlet context wrapper externalservletcontextwrapper wrapper external servlet context wrapper externalservletcontextwrapper ctx request dispatcher requestdispatcher dispatcher wrapper get request dispatcher getrequestdispatcher foo jsp assert true asserttrue dispatcher request dispatcher wrapper requestdispatcherwrapper assert equals assertequals request dispatcher wrapper requestdispatcherwrapper dispatcher get delegate getdelegate unwrapping wrapper request request test test unwrapping regular request testunwrappingregularrequest servlet request servletrequest req context mock servlet request servletrequest servlet request servletrequest unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet request unwrapservletrequest req assert equals assertequals req unwrapped unwrapping wrapper request request test test unwrapping wrapped request testunwrappingwrappedrequest servlet request servletrequest req context mock servlet request servletrequest servlet request wrapper servletrequestwrapper wrapper servlet request wrapper servletrequestwrapper req servlet request servletrequest unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet request unwrapservletrequest wrapper assert equals assertequals req unwrapped test test unwrapping double wrapped request testunwrappingdoublewrappedrequest servlet request servletrequest req context mock servlet request servletrequest servlet request wrapper servletrequestwrapper wrapper servlet request wrapper servletrequestwrapper req servlet request wrapper servletrequestwrapper wrapper servlet request wrapper servletrequestwrapper wrapper servlet request servletrequest unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet request unwrapservletrequest wrapper assert equals assertequals req unwrapped unwrapping sling request level request wrapped sling request test test unwrapping sling request testunwrappingslingrequest http servlet request httpservletrequest req context mock http servlet request httpservletrequest context checking expectations allowing req get servlet path getservletpath return value returnvalue allowing req get path info getpathinfo return value returnvalue test http servlet request wrapper httpservletrequestwrapper wrapper http servlet request wrapper httpservletrequestwrapper req http servlet request wrapper httpservletrequestwrapper wrapper http servlet request wrapper httpservletrequestwrapper wrapper sling http servlet request impl slinghttpservletrequestimpl sling request slingrequest sling http servlet request impl slinghttpservletrequestimpl wrapper servlet request servletrequest unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet request unwrapservletrequest sling request slingrequest assert equals assertequals wrapper unwrapped unwrapping wrapped sling request level request wrapped sling request test test unwrapping wrapped sling request testunwrappingwrappedslingrequest http servlet request httpservletrequest req context mock http servlet request httpservletrequest context checking expectations allowing req get servlet path getservletpath return value returnvalue allowing req get path info getpathinfo return value returnvalue test http servlet request wrapper httpservletrequestwrapper wrapper http servlet request wrapper httpservletrequestwrapper req http servlet request wrapper httpservletrequestwrapper wrapper http servlet request wrapper httpservletrequestwrapper wrapper sling http servlet request impl slinghttpservletrequestimpl sling request slingrequest sling http servlet request impl slinghttpservletrequestimpl wrapper http servlet request wrapper httpservletrequestwrapper sling wrapper slingwrapper http servlet request wrapper httpservletrequestwrapper sling request slingrequest servlet request servletrequest unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet request unwrapservletrequest sling wrapper slingwrapper assert equals assertequals wrapper unwrapped unwrapping wrapper response response test test unwrapping regular response testunwrappingregularresponse servlet response servletresponse req context mock servlet response servletresponse servlet response servletresponse unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet response unwrapservletresponse req assert equals assertequals req unwrapped unwrapping wrapper response response test test unwrapping wrapped response testunwrappingwrappedresponse servlet response servletresponse resp context mock servlet response servletresponse servlet response wrapper servletresponsewrapper wrapper servlet response wrapper servletresponsewrapper resp servlet response servletresponse unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet response unwrapservletresponse wrapper assert equals assertequals resp unwrapped test test unwrapping double wrapped response testunwrappingdoublewrappedresponse servlet response servletresponse resp context mock servlet response servletresponse servlet response wrapper servletresponsewrapper wrapper servlet response wrapper servletresponsewrapper resp servlet response wrapper servletresponsewrapper wrapper servlet response wrapper servletresponsewrapper wrapper servlet response servletresponse unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet response unwrapservletresponse wrapper assert equals assertequals resp unwrapped unwrapping sling response level response wrapped sling response test test unwrapping sling response testunwrappingslingresponse http servlet response httpservletresponse resp context mock http servlet response httpservletresponse http servlet response wrapper httpservletresponsewrapper wrapper http servlet response wrapper httpservletresponsewrapper resp http servlet response wrapper httpservletresponsewrapper wrapper http servlet response wrapper httpservletresponsewrapper wrapper sling http servlet response impl slinghttpservletresponseimpl sling response slingresponse sling http servlet response impl slinghttpservletresponseimpl wrapper servlet response servletresponse unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet response unwrapservletresponse sling response slingresponse assert equals assertequals wrapper unwrapped unwrapping wrapped sling response level response wrapped sling response test test unwrapping wrapped sling response testunwrappingwrappedslingresponse http servlet response httpservletresponse resp context mock http servlet response httpservletresponse http servlet response wrapper httpservletresponsewrapper wrapper http servlet response wrapper httpservletresponsewrapper resp http servlet response wrapper httpservletresponsewrapper wrapper http servlet response wrapper httpservletresponsewrapper wrapper sling http servlet response impl slinghttpservletresponseimpl sling response slingresponse sling http servlet response impl slinghttpservletresponseimpl wrapper http servlet response wrapper httpservletresponsewrapper sling wrapper slingwrapper http servlet response wrapper httpservletresponsewrapper sling response slingresponse servlet response servletresponse unwrapped external servlet context wrapper externalservletcontextwrapper request dispatcher wrapper requestdispatcherwrapper unwrap servlet response unwrapservletresponse sling wrapper slingwrapper assert equals assertequals wrapper unwrapped