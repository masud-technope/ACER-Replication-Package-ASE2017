licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons class loader classloader impl java io exception ioexception java net url java util collections java util enumeration java util hash set hashset java util map java util java util concurrent concurrent hash map concurrenthashmap org osgi framework bundle org osgi framework constants org osgi service package admin packageadmin exported package exportedpackage org osgi service package admin packageadmin package admin packageadmin code package admin class loader packageadminclassloader code loads classes resources admin service package admin class loader packageadminclassloader class loader classloader admin service package admin packageadmin package admin packageadmin manager factory dynamic class loader manager factory dynamicclassloadermanagerfactory factory cache resolved classes map string class cache classcache concurrent hash map concurrenthashmap string negative cache string negative class cache negativeclasscache collections synchronized set synchronizedset hash set hashset string cache resolved urls map string url url cache urlcache concurrent hash map concurrenthashmap string url package admin class loader packageadminclassloader package admin packageadmin pck admin pckadmin class loader classloader parent dynamic class loader manager factory dynamicclassloadermanagerfactory factory parent package admin packageadmin pck admin pckadmin factory factory returns code code code bundle code considered active perspective decl arative declarative services bundle lazy activation policy bundle remains starting loaded bundle declared bundle start param bundle bundle check code code code bundle code code code bundle active lazy activation policy starting is bundle active isbundleactive bundle bundle bundle bundle get state getstate bundle active bundle get state getstate bundle starting bundle considered lazily activated bundle bundle get headers getheaders constants bundle activationpolicy fall bundle considered active find bundle param pck name pckname bundle code code bundle find bundle for package findbundleforpackage string pck name pckname exported package exportedpackage exported package exportedpackage package admin packageadmin get exported package getexportedpackage pck name pckname bundle bundle exported package exportedpackage exported package exportedpackage is removal pending isremovalpending bundle exported package exportedpackage get exp orting bundle getexportingbundle is bundle active isbundleactive bundle bundle bundle resource param resource resource path string get package from resource getpackagefromresource string resource last slash lastslash resource last index of lastindexof string pck name pckname last slash lastslash resource substring last slash lastslash replace pck name pckname param resource string get package from class name getpackagefromclassname string last dot lastdot last index of lastindexof string pck name pckname last dot lastdot substring last dot lastdot pck name pckname java lang class loader classloader get resources getresources java lang string suppress warnings suppresswarnings unchecked enumeration url get resources getresources string io exception ioexception enumeration url get resources getresources has more elements hasmoreelements bundle bundle find bundle for package findbundleforpackage get package from resource getpackagefromresource bundle bundle get resources getresources java lang class loader classloader find resource findresource java lang string url find resource findresource string url cachedurl url cache urlcache cachedurl cachedurl url url find resource findresource url bundle bundle find bundle for package findbundleforpackage get package from resource getpackagefromresource bundle url bundle get resource getresource url url cache urlcache url url java lang class loader classloader find class findclass java lang string find class findclass string class not found exception classnotfoundexception cached class cachedclass class cache classcache cached class cachedclass cached class cachedclass clazz clazz find class findclass class not found exception classnotfoundexception cnfe bundle bundle find bundle for package findbundleforpackage get package from class name getpackagefromclassname bundle clazz bundle load class loadclass factory add used bundle addusedbundle bundle clazz class not found exception classnotfoundexception class cache classcache clazz clazz java lang class loader classloader load class loadclass java lang string load class loadclass string resolve class not found exception classnotfoundexception cached class cachedclass class cache classcache cached class cachedclass cached class cachedclass negative class cache negativeclasscache class not found exception classnotfoundexception clazz clazz load class loadclass resolve class not found exception classnotfoundexception cnfe string pck name pckname get package from class name getpackagefromclassname bundle bundle find bundle for package findbundleforpackage pck name pckname bundle clazz bundle load class loadclass factory add used bundle addusedbundle bundle class not found exception classnotfoundexception negative class cache negativeclasscache add factory add unresolved package addunresolvedpackage pck name pckname clazz negative class cache negativeclasscache add string pck name pckname get package from class name getpackagefromclassname factory add unresolved package addunresolvedpackage pck name pckname class not found exception classnotfoundexception class cache classcache clazz clazz