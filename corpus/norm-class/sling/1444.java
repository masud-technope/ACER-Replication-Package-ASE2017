licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting velocity java reader java writer java util map java util properties javax script bindings javax script script context scriptcontext javax script script engine factory scriptenginefactory javax script script exception scriptexception org apache sling api scripting sling bindings slingbindings org apache sling api scripting sling script helper slingscripthelper org apache sling scripting api abstract sling script engine abstractslingscriptengine org apache velocity velocity context velocitycontext org apache velocity app velocity engine velocityengine script engine scriptengine velocity templates render resource velocity templates script engine velocitytemplatesscriptengine abstract sling script engine abstractslingscriptengine velocity engine velocityengine velocity velocity templates script engine velocitytemplatesscriptengine script engine factory scriptenginefactory factory factory class loader classloader old class loader oldclassloader thread current thread currentthread get context class loader getcontextclassloader thread current thread currentthread set context class loader setcontextclassloader get class getclass get class loader getclassloader velocity velocity engine velocityengine include sling resource loader velocity properties props properties props sling resource loader description sling resource loader velocity props sling resource loader org apache sling scripting velocity sling resource loader slingresourceloader props sling resource loader cache props resource loader file sling velocity init props exception runtime exception runtimeexception exception velocity init get message getmessage thread current thread currentthread set context class loader setcontextclassloader old class loader oldclassloader object eval reader script script context scriptcontext script context scriptcontext script exception scriptexception script illegal argument exception illegalargumentexception method argument script script context scriptcontext illegal argument exception illegalargumentexception method argument script context scriptcontext bindings bindings script context scriptcontext get bindings getbindings script context scriptcontext engine scope sling script helper slingscripthelper helper sling script helper slingscripthelper bindings sling bindings slingbindings sling helper script exception scriptexception sling script helper slingscripthelper missing bindings string script name scriptname helper get script getscript get script resource getscriptresource get path getpath class loader classloader old class loader oldclassloader thread current thread currentthread get context class loader getcontextclassloader thread current thread currentthread set context class loader setcontextclassloader get class getclass get class loader getclassloader initialize velocity context velocity context velocitycontext velocity context velocitycontext object entry obj entryobj bindings entry set entryset map entry entry map entry entry obj entryobj string entry get key getkey entry get value getvalue velocity evaluate script send output browser string log tag logtag get class getclass get simple name getsimplename writer script context scriptcontext get writer getwriter velocity evaluate log tag logtag script throwable script exception scriptexception failure running script script name scriptname stack trace get stack trace getstacktrace thread current thread currentthread set context class loader setcontextclassloader old class loader oldclassloader