licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting java script javascript helper java buffered reader bufferedreader java io exception ioexception java input stream inputstream java input stream reader inputstreamreader java reader java serializable java nio charset charset org apache sling api resource non existing resource nonexistingresource org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource util resourceutil org apache sling api scripting sling bindings slingbindings org apache sling api scripting sling script helper slingscripthelper org apache sling scripting java script javascript internal rhino java script engine factory rhinojavascriptenginefactory org apache sling scripting java script javascript esp reader espreader org mozilla java script javascript context org mozilla java script javascript id function call idfunctioncall org mozilla java script javascript id function object idfunctionobject org mozilla java script javascript kit org mozilla java script javascript script runtime scriptruntime org mozilla java script javascript scriptable org mozilla java script javascript scriptable object scriptableobject org mozilla java script javascript wrapper org slf logger org slf logger factory loggerfactory code sling global slingglobal code int eresting interesting global functions ecma script ecmascript standard rhino shell java scripts javascripts code print args code prints arguments code args code single message scripts logger global log variable code load args code loads scripts named parameters current scope script files read plain java script javascript files file extension esp ecma script ecmascript server file read link org apache sling scripting java script javascript esp reader espreader failure read files error sling global slingglobal serializable id function call idfunctioncall serialversionuid object ftag object load print require scope function log logger default log defaultlog logger factory loggerfactory get logger getlogger sling global slingglobal init scriptable scope sealed sling global slingglobal obj sling global slingglobal scope function string arity load load print print require require kit code bug codebug id function object idfunctionobject id function object idfunctionobject obj ftag arity scope sealed seal object sealobject export as scope property exportasscopeproperty object exec id call execidcall id function object idfunctionobject context scriptable scope scriptable this obj thisobj object args has tag hastag ftag method id methodid method id methodid method id methodid load load this obj thisobj args context get undefined value getundefinedvalue print print this obj thisobj args context get undefined value getundefinedvalue require require this obj thisobj args unknown print context scriptable this obj thisobj object args string buffer stringbuffer message string buffer stringbuffer args length message append convert arbitrary java script javascript string form string script runtime scriptruntime to string tostring args message append get logger getlogger this obj thisobj info message to string tostring load context scriptable this obj thisobj object args sling script helper slingscripthelper sling get property getproperty this obj thisobj sling bindings slingbindings sling sling script helper slingscripthelper sling null pointer exception nullpointerexception sling bindings slingbindings sling scriptable global scope globalscope scriptable object scriptableobject get top level scope gettoplevelscope this obj thisobj resource script resource scriptresource sling get script getscript get script resource getscriptresource resource resolver resourceresolver resolver script resource scriptresource get resource resolver getresourceresolver path current script resolve real tive realtive paths string current script currentscript sling get script getscript get script resource getscriptresource get path getpath string script parent scriptparent resource util resourceutil get parent getparent current script currentscript object arg args string script name scriptname script runtime scriptruntime to string tostring arg resource load script loadscript script name scriptname starts with startswith string abs script name absscriptname script parent scriptparent script name scriptname load script loadscript resolver resolve abs script name absscriptname resolved relative current script load script loadscript load script loadscript resolver resolve script name scriptname load script loadscript context report runtime error reportruntimeerror script file script name scriptname input stream inputstream script stream scriptstream load script loadscript adapt to adaptto input stream inputstream script stream scriptstream context report runtime error reportruntimeerror script file script name scriptname read reader stream reader script reader scriptreader input stream reader inputstreamreader script stream scriptstream charset for name forname utf check wrap basic reader script name scriptname ends with endswith rhino java script engine factory rhinojavascriptenginefactory esp script extension script reader scriptreader esp reader espreader script reader scriptreader read suff buf fered buffered performance script reader scriptreader buffered reader bufferedreader script reader scriptreader evaluate reader evaluatereader global scope globalscope script reader scriptreader script name scriptname io exception ioexception ioe context report runtime error reportruntimeerror failure reading file script name scriptname ioe ensure script input stream closed script stream scriptstream close io exception ioexception ignore object require context scriptable this obj thisobj object args args length args string context report runtime error reportruntimeerror require requires string argument string module path modulepath string args module scope modulescope module scope modulescope this obj thisobj module scope modulescope module scope modulescope module scope modulescope this obj thisobj module scope modulescope module load module loadmodule module path modulepath trim module scope modulescope this obj thisobj module get exports getexports module scope modulescope load module loadmodule context string module path modulepath module scope modulescope module scope modulescope scriptable this obj thisobj string absolute path absolutepath module path modulepath module path modulepath starts with startswith relative module scope modulescope context report runtime error reportruntimeerror resolve relative module module scope absolute path absolutepath module scope modulescope get module name getmodulename module path modulepath replace all replaceall absolute path absolutepath matches absolute path absolutepath absolute path absolutepath replace all replaceall absolute path absolutepath absolute path absolutepath sling script helper slingscripthelper sling get property getproperty this obj thisobj sling bindings slingbindings sling sling script helper slingscripthelper sling null pointer exception nullpointerexception sling bindings slingbindings sling resource resolver resourceresolver res rev resrev sling get script getscript get script resource getscriptresource get resource resolver getresourceresolver resource script string script name scriptname string base path basepath res rev resrev get search path getsearchpath script res rev resrev resolve base path basepath absolute path absolutepath script script non existing resource nonexistingresource script name scriptname base path basepath absolute path absolutepath script context report runtime error reportruntimeerror unable resolve module absolute path absolutepath search path input stream inputstream script stream scriptstream script adapt to adaptto input stream inputstream script stream scriptstream script stream scriptstream res rev resrev resolve script name scriptname adapt to adaptto input stream inputstream script stream scriptstream context report runtime error reportruntimeerror script file script get path getpath read reader stream reader script reader scriptreader input stream reader inputstreamreader script stream scriptstream charset for name forname utf check wrap basic reader script name scriptname ends with endswith rhino java script engine factory rhinojavascriptenginefactory esp script extension script reader scriptreader esp reader espreader script reader scriptreader read suff buf fered buffered performance script reader scriptreader buffered reader bufferedreader script reader scriptreader todo execute script module scope modulescope module scope modulescope scope module scope modulescope scope scope module scope modulescope this obj thisobj absolute path absolutepath substring absolute path absolutepath length scope reset evaluate reader evaluatereader scope script reader scriptreader script name scriptname scope io exception ioexception ioe context report runtime error reportruntimeerror failure reading file script name scriptname ioe ensure script input stream closed script stream scriptstream close io exception ioexception ignore returns script logger logger fallback global log variable accessible logger get logger getlogger context scriptable scope logger log get property getproperty scope sling bindings slingbindings log logger log log default log defaultlog log returns named top level toplevel property converted requested code type code code code property exists property wrong type suppress warnings suppresswarnings unchecked type type get property getproperty context scriptable scope string type type object prop script runtime scriptruntime scope prop wrapper prop wrapper prop unwrap type is instance isinstance prop unchecked type prop