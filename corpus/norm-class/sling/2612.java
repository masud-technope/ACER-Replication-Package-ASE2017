licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling maven bundles upport bundlesupport org object web objectweb asm class reader classreader skip code org object web objectweb asm class reader classreader skip debug org object web objectweb asm class reader classreader skip frames java file java file input stream fileinputstream java file writer filewriter java i o exception ioexception java lang annotation annotation java util hash set hashset java util iterator java util list java util org apache maven model resource org apache maven plugin abstract mojo abstractmojo org apache maven plugin mojo execution exception mojoexecutionexception org apache maven plugin mojo failure exception mojofailureexception org apache maven plugins annotations lifecycle p has e lifecyclephase org apache maven plugins annotations mojo org apache maven plugins annotations parameter org apache maven plugins annotations resolution scope resolutionscope org apache maven project maven project mavenproject org apache sling adapter annotations adaptable org apache sling adapter annotations adaptables org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org code haus codehaus plexus util i o util ioutil org code haus codehaus plexus util string utils stringutils org object web objectweb asm class reader classreader org object web objectweb asm type org object web objectweb asm tree annotation node annotationnode org object web objectweb asm tree class node classnode org scan notation scannotation annotationdb build adapter metadata annotated classes mojo generate adapter metadata default p has e defaultphase lifecycle p has e lifecyclephase process classes thread safe threadsafe requires dependency resolution requiresdependencyresolution resolution scope resolutionscope compile generate adapter metadata mojo generateadaptermetadatamojo abstract mojo abstractmojo json indentation string adaptable desc adaptable get name getname replace string adaptables desc adaptables get name getname replace string condition adaptable string get simple name getsimplename class node classnode clazz string internal name internalname clazz idx internal name internalname last index of lastindexof idx internal name internalname internal name internalname substring idx parameter default value defaultvalue project build output directory outputdirectory read only readonly file build output directory buildoutputdirectory generated descriptor file parameter property adapter descriptor default value defaultvalue sling inf adapters json string file name filename parameter default value defaultvalue project build directory adapter plugin generated required read only readonly file output directory outputdirectory maven project parameter default value defaultvalue project read only readonly maven project mavenproject project execute mojo execution exception mojoexecutionexception mojo failure exception mojofailureexception json object jsonobject descriptor json object jsonobject annotationdb annotation db annotationdb annotationdb annotation db annotationdb scan archives scanarchives build output directory buildoutputdirectory touri tourl string annotated class names annotatedclassnames hash set hashset string add annotated classes addannotatedclasses annotation db annotationdb annotated class names annotatedclassnames adaptable add annotated classes addannotatedclasses annotation db annotationdb annotated class names annotatedclassnames adaptables string annotated class name annotatedclassname annotated class names annotatedclassnames get log getlog info string format adaptable annotation annotated class name annotatedclassname string path to class file pathtoclassfile annotated class name annotatedclassname replace file class file classfile file build output directory buildoutputdirectory path to class file pathtoclassfile file input stream fileinputstream input file input stream fileinputstream class file classfile class reader classreader class reader classreader class reader classreader class reader classreader input input close class node classnode class node classnode class node classnode class reader classreader accept class node classnode skip code skip debug skip frames suppress warnings suppresswarnings unchecked list annotation node annotationnode annotations class node classnode invisible annotations invisibleannotations annotation node annotationnode annotation annotations adaptable desc equals annotation desc parse adaptable annotation parseadaptableannotation annotation class node classnode descriptor adaptables desc equals annotation desc parse adaptables annotation parseadaptablesannotation annotation class node classnode descriptor file output file outputfile file output directory outputdirectory file name filename output file outputfile get parent file getparentfile mkdirs file writer filewriter writer file writer filewriter output file outputfile i o util ioutil copy descriptor to string tostring json indentation writer i o util ioutil close writer add resource addresource i o exception ioexception mojo execution exception mojoexecutionexception unable generate metadata json exception jsonexception mojo execution exception mojoexecutionexception unable generate metadata add annotated classes addannotatedclasses annotationdb annotation db annotationdb string annotated class names annotatedclassnames annotation clazz string class names classnames annotation db annotationdb get annotation index getannotationindex clazz get name getname class names classnames class names classnames is empty isempty get log getlog debug classes adaptable annotations annotated class names annotatedclassnames add all addall class names classnames add resource addresource string our rsrc path ourrsrcpath output directory outputdirectory get absolute path getabsolutepath suppress warnings suppresswarnings unchecked iterator resource rsrc iterator rsrciterator project get resources getresources iterator rsrc iterator rsrciterator has next hasnext resource rsrc rsrc iterator rsrciterator rsrc get directory getdirectory equals our rsrc path ourrsrcpath resource resource resource resource set directory setdirectory output directory outputdirectory get absolute path getabsolutepath project add resource addresource resource parse adaptables annotation parseadaptablesannotation annotation node annotationnode annotation class node classnode class node classnode json object jsonobject descriptor json exception jsonexception iterator annotation values iterator has next hasnext object object equals suppress warnings suppresswarnings unchecked list annotation node annotationnode annotations list annotation node annotationnode annotation node annotationnode inner annotation innerannotation annotations adaptable desc equals inner annotation innerannotation desc parse adaptable annotation parseadaptableannotation inner annotation innerannotation class node classnode descriptor suppress warnings suppresswarnings unchecked parse adaptable annotation parseadaptableannotation annotation node annotationnode annotation class node classnode annotated class annotatedclass json object jsonobject descriptor json exception jsonexception string adaptable class name adaptableclassname list annotation node annotationnode adapters list values annotation values iterator values iterator has next hasnext object object adaptable class adaptableclass equals adaptable class name adaptableclassname type get class name getclassname adapters equals adapters list annotation node annotationnode adaptable class name adaptableclassname adapters illegal argument exception illegalargumentexception adaptable annotation malformed expecting class name classname list adapter annotation json object jsonobject adaptable description adaptabledescription descriptor adaptable class name adaptableclassname adaptable description adaptabledescription descriptor getjsonobject adaptable class name adaptableclassname adaptable description adaptabledescription json object jsonobject descriptor adaptable class name adaptableclassname adaptable description adaptabledescription annotation node annotationnode adapter adapters parse adapter annotation parseadapterannotation adapter annotated class annotatedclass adaptable description adaptabledescription suppress warnings suppresswarnings unchecked parse adapter annotation parseadapterannotation annotation node annotationnode annotation class node classnode annotated class annotatedclass json object jsonobject adaptable description adaptabledescription json exception jsonexception string condition list type adapter classes adapterclasses list values annotation values iterator values iterator has next hasnext object object string utils stringutils is empty isempty condition condition string format condition get simple name getsimplename annotated class annotatedclass condition equals condition string equals adapter classes adapterclasses list type adapter classes adapterclasses illegal argument exception illegalargumentexception adapter annotation malformed expecting list adapter classes type adapter class adapterclass adapter classes adapterclasses adaptable description adaptabledescription accumulate condition adapter class adapterclass get class name getclassname