licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling sample sling shot slingshot impl org apache sling hamcrest resource matchers resourcematchers has children haschildren org apache sling hamcrest resource matchers resourcematchers resource of type resourceoftype org apache sling sample sling shot slingshot sling shot constants slingshotconstants resource type resourcetype user org apache sling sample sling shot slingshot impl internal constants internalconstants resource type resourcetype org hamcrest matchers equal to equalto org hamcrest matchers not null value notnullvalue org junit assert that assertthat org mockito matchers any string anystring org mockito mockito mock org mockito mockito javax jcr session javax jcr simple credentials simplecredentials org apache jackrabbit api security user user manager usermanager org apache sling api resource resource org apache sling jcr base util access control util accesscontrolutil org apache sling sample sling shot slingshot sling shot constants slingshotconstants org apache sling testing mock sling resource resolver type resourceresolvertype org apache sling testing mock sling junit sling context slingcontext org junit rule org junit test org osgi service configuration org osgi service configuration admin configurationadmin setup service test setupservicetest rule sling context slingcontext context sling context slingcontext resource resolver type resourceresolvertype jcr oak test setup exception create expected content structure context load json sling shot slingshot json sling shot constants slingshotconstants app root path create dummy config admin prevent registration service user amendments configuration admin configurationadmin config admin configadmin mock configuration admin configurationadmin config admin configadmin list configurations listconfigurations any string anystring then return thenreturn configuration context register service registerservice configuration admin configurationadmin config admin configadmin activation code context register inject activate service registerinjectactivateservice setup service setupservice validate expected users created session admin session adminsession context resource resolver resourceresolver adapt to adaptto session user manager usermanager user manager usermanager access control util accesscontrolutil get user manager getusermanager admin session adminsession string user string sling shot slingshot sling shot slingshot internal constants internalconstants service user assert that assertthat user manager usermanager get authorizable getauthorizable user not null value notnullvalue validate content structure resource resource context resource resolver resourceresolver get resource getresource sling shot constants slingshotconstants app root path assert that assertthat resource resource of type resourceoftype resource type resourcetype assert that assertthat resource get child getchild users not null value notnullvalue assert that assertthat resource get child getchild users sling shot slingshot resource of type resourceoftype resource type resourcetype user assert that assertthat resource get child getchild users sling shot slingshot has children haschildren info profile ugc validate access control entries session user admin session adminsession impersonate simple credentials simplecredentials sling shot slingshot sling shot slingshot to char array tochararray assert that assertthat user has permission haspermission sling shot constants slingshotconstants app root path users sling shot slingshot info read add node property equal to equalto