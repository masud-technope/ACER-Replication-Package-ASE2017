licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling crankstart launcher java closeable java io exception ioexception java util hash map hashmap java util map java util concurrent callable org apache sling provisioning model model org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework bundle exception bundleexception org osgi framework launch framework org osgi framework launch framework factory frameworkfactory org slf logger org slf logger factory loggerfactory setup osg i osgi framework based provisioning model suppress warnings suppresswarnings serial framework setup frameworksetup hash map hashmap string object callable object logger log logger factory loggerfactory get logger getlogger get class getclass suppress warnings suppresswarnings unchecked require string key desired type desiredtype illegal state exception illegalstateexception object key illegal state exception illegalstateexception missing required object key get class getclass is assignable from isassignablefrom desired type desiredtype class cast exception classcastexception object key desired type desiredtype get name getname object call exception model model require launcher model key model log info setting osg i osgi framework properties map string string fprops framework properties frameworkproperties model get properties getproperties log info starting osg i osgi framework framework factory frameworkfactory factory framework factory frameworkfactory get class getclass get class loader getclassloader load class loadclass org apache felix framework framework factory frameworkfactory new instance newinstance framework framework factory new framework newframework fprops framework start run mode filter runmodefilter rm filter rmfilter run mode filter runmodefilter configurations cfg configurations framework get bundle context getbundlecontext model rm filter rmfilter set shutdown hook setshutdownhook framework closeable cfg log info osg i osgi framework started log info ins talling installing bundles provisioning model bundles installer bundlesinstaller bundles installer bundlesinstaller model rm filter rmfilter bundle context bundlecontext framework get bundle context getbundlecontext install bundles installbundles launcher crankstart filter cfg may be configure maybeconfigure todo gradually inc rease increase start levels launchpad reuse default startup handler defaultstartuphandler code bundle bundles get bundles getbundles log info starting bundles bundles installed bundles length started failed bundle bundles is fragment isfragment started start started bundle exception bundleexception failed log warn error starting bundle get symbolic name getsymbolicname cfg may be configure maybeconfigure failed log info bundles started started log info bundles started failed start total started failed bundles length log info osg i osgi setup waiting framework framework wait for stop waitforstop is fragment isfragment bundle get headers getheaders fragment host set shutdown hook setshutdownhook framework osgi framework osgiframework closeable to close toclose shutdown framework jvm exits runtime get runtime getruntime add shutdown hook addshutdownhook thread override osgi framework osgiframework osgi framework osgiframework get state getstate bundle active log info stopping osg i osgi framework osgi framework osgiframework log info waiting osg i osgi framework exit osgi framework osgiframework wait for stop waitforstop log info osg i osgi framework stopped exception log error exception stop ping stopping osg i osgi framework closeable to close toclose close io exception ioexception ignore