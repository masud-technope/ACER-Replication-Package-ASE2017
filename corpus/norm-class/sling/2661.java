licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery commons providers org apache sling commons scheduler scheduler org apache sling discovery discovery service discoveryservice org apache sling discovery topology event listener topologyeventlistener view state manager viewstatemanager core managing topology event listeners topologyeventlisteners view changing changed sending topology events topologyevents registered listeners depending implementation supports cluster sync service clustersyncservice invoked handle new view handlenewview view state manager viewstatemanager installs optional min event delay handler scheduler delays sending topology changed event receiving handle new view handlenewview idea limit number toggling view install min event delay handler installmineventdelayhandler discovery service discoveryservice discovery service discoveryservice scheduler scheduler min event delay secs mineventdelaysecs binds event listener eventlistener sending init event applicable param event listener eventlistener event listener eventlistener bind bind topology event listener topologyeventlistener event listener eventlistener unbinds event listener eventlistener returning bound param event listener eventlistener event list ner eventlistner unbind listener place unbind topology event listener topologyeventlistener event listener eventlistener handles activation marks manager activated topology init event bound listeners subsequent calls handle changing handlechanging handle new view handlenewview result topology changing topology changed events handle activated handleactivated called service typically discovery service discoveryservice implementation deactivated mark manager deactivated flags view current handle deactivated handledeactivated handles fact early indicator change topology detected view agreed voting send topology changing initialized listeners handle changing handlechanging handles fact view established sends topology init uninitialized listeners topology changed initialized listeners sends topology changing param new view newview established view new view newview previous changing mode changing mode new view newview previous handle new view handlenewview base topology view basetopologyview new view newview testing wait queue d queued async events delivered returning param timeout time millis wait max wait wait ind efinitely indefinitely async events exist number queue d queued flight events timeout hit early wait for async events waitforasyncevents timeout