licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling core impl java util array list arraylist java util collection java util hash map hashmap java util list java util map java util sorted set sortedset java util tree set treeset java util concurrent locks reentrant read write lock reentrantreadwritelock javax servlet http http servlet request httpservletrequest path based holder cache pathbasedholdercache type path based holder pathbasedholder map string map string sorted set sortedset type cache hash map hashmap string map string sorted set sortedset type read write lock synchronize cache access reentrant read write lock reentrantreadwritelock rw lock rwlock reentrant read write lock reentrantreadwritelock clear rw lock rwlock write lock writelock lock cache clear rw lock rwlock write lock writelock unlock add holder addholder type holder rw lock rwlock write lock writelock lock map string sorted set sortedset type by host map byhostmap cache holder protocol by host map byhostmap by host map byhostmap hash map hashmap string sorted set sortedset type cache holder protocol by host map byhostmap sorted set sortedset type by path set bypathset tree set treeset type preset current list sorted set sortedset type current path set currentpathset by host map byhostmap holder host current path set currentpathset by path set bypathset add all addall current path set currentpathset add holder by path set bypathset add holder replace by host map byhostmap holder host by path set bypathset rw lock rwlock write lock writelock unlock remove holder removeholder type holder rw lock rwlock write lock writelock lock map string sorted set sortedset type by host map byhostmap cache holder protocol by host map byhostmap sorted set sortedset type by path set bypathset by host map byhostmap holder host by path set bypathset create removed holder sorted set sortedset type tree set treeset type add all addall by path set bypathset remove holder replace remove empty is empty isempty by host map byhostmap remove holder host by host map byhostmap holder host rw lock rwlock write lock writelock unlock collection type find applicable holder findapplicableholder http servlet request httpservletrequest request rw lock rwlock read lock readlock lock string hostname request get server name getservername request get server port getserverport request get server port getserverport request get server port getserverport suppress warnings suppresswarnings unchecked sorted set sortedset type result sorted set sortedset map string sorted set sortedset type by host map byhostmap cache request get scheme getscheme by host map byhostmap result by host map byhostmap hostname result by host map byhostmap map string sorted set sortedset type default by host map defaultbyhostmap cache default by host map defaultbyhostmap result default by host map defaultbyhostmap hostname result default by host map defaultbyhostmap result rw lock rwlock read lock readlock unlock list type get h old ers getholders rw lock rwlock read lock readlock lock list type result array list arraylist type map string sorted set sortedset type by host entry byhostentry cache values sorted set sortedset type holder set holderset by host entry byhostentry values result add all addall holder set holderset result rw lock rwlock read lock readlock unlock