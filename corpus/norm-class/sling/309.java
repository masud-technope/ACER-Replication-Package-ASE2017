licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling testing mock jcr java util list javax jcr node javax jcr repository javax jcr repository exception repositoryexception javax jcr session javax jcr simple credentials simplecredentials javax jcr query query manager querymanager org apache commons lang string utils stringutils a qute aqute bnd annotation consumer type consumertype factory mock jcr objects consumer type consumertype mock jcr mockjcr workspace string workspace mocked workspace mockedworkspace user string user admin mock jcr mockjcr methods create mocked memory jcr repository beware session data store jcr repository repository new repository newrepository mock repository mockrepository create mocked memory jcr session root node data session thrown garbage collected jcr session session new session newsession new session newsession create mocked memory jcr session root node data session thrown garbage collected param user id userid user mock environment param workspace name workspacename workspace mock environment jcr session session new session newsession string user id userid string workspace name workspacename new repository newrepository login simple credentials simplecredentials string utils stringutils default string defaultstring user id userid user string utils stringutils default string defaultstring workspace name workspacename workspace repository exception repositoryexception runtime exception runtimeexception creating mocked jcr session failed sets expected result list queries executed query manager param session jcr session param result list resultlist result list set query result setqueryresult session session list node result list resultlist set query result setqueryresult get query manager getquerymanager session result list resultlist sets expected result list queries executed query manager param query manager querymanager mocked query manager param result list resultlist result list set query result setqueryresult query manager querymanager query manager querymanager list node result list resultlist add query result handler addqueryresulthandler query manager querymanager mock query result handler mockqueryresulthandler override mock query result mockqueryresult execute query executequery mock query mockquery query mock query result mockqueryresult result list resultlist sets expected result list queries statement executed query manager param session jcr session param statement query statement param language query language param result list resultlist result list set query result setqueryresult session session string statement string language list node result list resultlist set query result setqueryresult get query manager getquerymanager session statement language result list resultlist sets expected result list queries statement executed query manager param query manager querymanager mocked query manager param statement query statement param language query language param result list resultlist result list set query result setqueryresult query manager querymanager query manager querymanager string statement string language list node result list resultlist add query result handler addqueryresulthandler query manager querymanager mock query result handler mockqueryresulthandler override mock query result mockqueryresult execute query executequery mock query mockquery query string utils stringutils equals query get statement getstatement statement string utils stringutils equals query get language getlanguage language mock query result mockqueryresult result list resultlist adds query result handler query manager query queries executed param session jcr session param result handler resulthandler mock query result handler add query result handler addqueryresulthandler session session mock query result handler mockqueryresulthandler result handler resulthandler add query result handler addqueryresulthandler get query manager getquerymanager session result handler resulthandler adds query result handler query manager query queries executed param query manager querymanager mocked query manager param result handler resulthandler mock query result handler add query result handler addqueryresulthandler query manager querymanager query manager querymanager mock query result handler mockqueryresulthandler result handler resulthandler mock query manager mockquerymanager query manager querymanager add result handler addresulthandler result handler resulthandler query manager querymanager get query manager getquerymanager session session session get workspace getworkspace get query manager getquerymanager repository exception repositoryexception runtime exception runtimeexception unable access query manager