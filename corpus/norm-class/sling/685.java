licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp jasper compiler java buffered reader bufferedreader java file not found exception filenotfoundexception java io exception ioexception java input stream reader inputstreamreader java reader java util array list arraylist org apache sling commons compiler compilation result compilationresult org apache sling commons compiler compilation unit compilationunit org apache sling commons compiler compilation unit with source compilationunitwithsource org apache sling commons compiler compiler message compilermessage org apache sling commons compiler options org apache sling scripting jsp jasper jasper exception jasperexception jdt compiler compiler load source dependencies context class loader classloader reducing dramatically disk access compilation process jdt compiler jdtcompiler org apache sling scripting jsp jasper compiler compiler jdt compiler jdtcompiler default is session defaultissession default is session defaultissession compile servlet java file file override generate class generateclass string smap file not found exception filenotfoundexception jasper exception jasperexception exception log is debug enabled isdebugenabled system current time millis currenttimemillis string source file sourcefile ctxt get servlet java file name getservletjavafilename string package name packagename ctxt get servlet package name getservletpackagename string target class name targetclassname package name packagename length package name packagename ctxt get servlet class name getservletclassname compilation unit compilationunit unit compilation unit with source compilationunitwithsource org apache sling commons compiler compilation unit compilationunit get last modified getlastmodified get last modified getlastmodified org apache sling commons compiler compilation unit compilationunit get main class name getmainclassname string get main class name getmainclassname target class name targetclassname org apache sling commons compiler compilation unit compilationunit get source getsource reader get source getsource io exception ioexception buffered reader bufferedreader input stream reader inputstreamreader ctxt get input stream getinputstream source file sourcefile ctxt get options getoptions get java encoding getjavaencoding org apache sling commons compiler compilation unit with source compilationunitwithsource get file name getfilename string get file name getfilename source file sourcefile options options options options options key loader write r writer ctxt get runtime context getruntimecontext getioprovider get class loader writer getclassloaderwriter options options key generate debug info ctxt get options getoptions get class debug info getclassdebuginfo source jvm ctxt get options getoptions get compiler source m getcompilersourcevm options options key source version ctxt get options getoptions get compiler source m getcompilersourcevm options options key source version options version target jvm ctxt get options getoptions get compiler target m getcompilertargetvm options options key target version ctxt get options getoptions get compiler target m getcompilertargetvm options options key target version options version array list arraylist javac error detail javacerrordetail problem list problemlist array list arraylist javac error detail javacerrordetail compilation result compilationresult result ctxt get runtime context getruntimecontext getioprovider get java compiler getjavacompiler compile compilation unit compilationunit unit options result get errors geterrors compiler message compilermessage result get errors geterrors string get file getfile problem list problemlist add error dispatcher errordispatcher create javac error createjavacerror page nodes pagenodes string buffer stringbuffer get message getmessage get line getline ctxt jasper exception jasperexception log error error visiting node ctxt keep generated keepgenerated ctxt delete ctxt get servlet java file name getservletjavafilename problem list problemlist is empty isempty javac error detail javacerrordetail jeds problem list problemlist to array toarray javac error detail javacerrordetail err dispatcher errdispatcher javac error javacerror jeds log is debug enabled isdebugenabled system current time millis currenttimemillis log debug compiled ctxt get servlet java file name getservletjavafilename ctxt is prototype mode isprototypemode jsr support options is smap suppressed issmapsuppressed smap util smaputil install smap installsmap get compilation context getcompilationcontext smap