licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting sightly impl engine compiled org apache sling api resource resource org apache sling api resource resource util resourceutil org apache sling commons class loader classloader class loader writer classloaderwriter org apache sling scripting sightly impl compiler unit change monitor unitchangemonitor org apache sling scripting sightly impl engine sightly engine configuration sightlyengineconfiguration org apache sling scripting sightly impl utils java escape utils javaescapeutils identifies java source file jcr repository source identifier sourceidentifier string class name classname resource resource string package name packagename string fully qualified name fullyqualifiedname sightly engine configuration sightlyengineconfiguration configuration unit change monitor unitchangemonitor unit change monitor unitchangemonitor class loader writer classloaderwriter writer source identifier sourceidentifier sightly engine configuration sightlyengineconfiguration configuration unit change monitor unitchangemonitor unit change monitor unitchangemonitor class loader writer classloaderwriter writer resource resource string class name prefix classnameprefix resource resource class name classname build class name buildclassname resource class name prefix classnameprefix package name packagename build package name buildpackagename resource fully qualified name fullyqualifiedname build fully qualified name buildfullyqualifiedname package name packagename class name classname configuration configuration unit change monitor unitchangemonitor unit change monitor unitchangemonitor writer writer string get class name getclassname class name classname resource get resource getresource resource string get package name getpackagename package name packagename string get fully qualified name getfullyqualifiedname fully qualified name fullyqualifiedname needs update needsupdate configuration is dev mode isdevmode string sly path slypath get resource getresource get path getpath sly script change date slyscriptchangedate unit change monitor unitchangemonitor get last modified date for script getlastmodifieddateforscript sly path slypath string java compiler path javacompilerpath get fully qualified name getfullyqualifiedname replace all replaceall java file date javafiledate writer get last modified getlastmodified java compiler path javacompilerpath sly script change date slyscriptchangedate java file date javafiledate sly script change date slyscriptchangedate java file date javafiledate string build fully qualified name buildfullyqualifiedname string package name packagename string class name classname package name packagename class name classname string build class name buildclassname resource resource string class name prefix classnameprefix string script name scriptname resource util resourceutil get name getname resource get path getpath script name scriptname script name scriptname substring script name scriptname last index of lastindexof get extension getextension script name scriptname string class name classname class name prefix classnameprefix script name scriptname class name classname replace all replaceall replace all replaceall string build package name buildpackagename resource resource string package name packagename resource util resourceutil get parent getparent resource get path getpath replace all replaceall substring replace all replaceall string package name elements packagenameelements package name packagename split string builder stringbuilder string builder stringbuilder package name elements packagenameelements length string sub package subpackage package name elements packagenameelements append java escape utils javaescapeutils get escaped token getescapedtoken sub package subpackage package name elements packagenameelements length append to string tostring string get extension getextension string script name scriptname last dot index lastdotindex script name scriptname last index of lastindexof script name scriptname substring last dot index lastdotindex