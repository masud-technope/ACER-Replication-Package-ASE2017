licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling resource resolver resourceresolver impl java util array list arraylist java util dictionary java util hashtable java util list java util map org apache commons collections bidi map bidimap org apache commons collections bidi map bidimap tree bidi map treebidimap org apache commons lang array utils arrayutils org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations reference policy referencepolicy org apache felix scr annotations references org apache sling api resource resource decorator resourcedecorator org apache sling api resource resource resolver factory resourceresolverfactory org apache sling api resource runtime runtime service runtimeservice org apache sling commons osgi properties util propertiesutil org apache sling resource resolver resourceresolver impl helper resource decorator tracker resourcedecoratortracker org apache sling resource resolver resourceresolver impl mapping map entries mapentries org apache sling resource resolver resourceresolver impl mapping mapping org apache sling resource resolver resourceresolver impl observation resource change listener whiteboard resourcechangelistenerwhiteboard org apache sling resource resolver resourceresolver impl providers resource provider tracker resourceprovidertracker org apache sling resource resolver resourceresolver impl providers resource provider tracker resourceprovidertracker change listener changelistener org apache sling resource resolver resourceresolver impl providers runtime service impl runtimeserviceimpl org apache sling service user mapping serviceusermapping service user mapper serviceusermapper org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service factory servicefactory org osgi framework service registration serviceregistration org osgi service component component context componentcontext org osgi service event event admin eventadmin code resource resolver factory activator resourceresolverfactoryactivator code track required services resource resolver factory required providers provider factories resource resolver factory registered todo implement modifiable easy running resolve rs resolvers component org apache sling jcr resource internal jcr resource resolver factory impl jcrresourceresolverfactoryimpl label apache sling resource resolver factory description config ures configures resource resolver request url resource path rewriting spec version specversion metatype properties property constants service description apache sling resource resolver factory property constants service vendor apache software foundation references reference resource decorator resourcedecorator reference interface referenceinterface resource decorator resourcedecorator cardinality reference cardinality referencecardinality optional multiple policy reference policy referencepolicy dynamic resource resolver factory activator resourceresolverfactoryactivator runnable factory registration factoryregistration registration service registration serviceregistration factory registration factoryregistration runtime registration service registration serviceregistration runtime registration runtimeregistration common resource resolver factory impl commonresourceresolverfactoryimpl common factory commonfactory property apps libs label resource search path description list absolute path prefixes applied find resources path relative path apps libs empty path single entry path assumed string prop path resource resolver search path searchpath defines namespace prefixes resource names path code jcr code code path jcr content code mangled mangling namespace prefix contained path replaced substitution pattern code code calling code map code method resource resolver code resolve code methods unmangle namespace prefixes substitution pattern code code feature systems wild cope url s urls colons per fectly perfectly valid characters path uri references scheme property configuration code code property bool value boolvalue label name space namespace mangling description defines namespace prefixes resource names path jcr path jcr content mangled mangling namespace prefix contained path replaced substitution pattern calling map method resource resolver resolve methods unmangle namespace prefixes subst ituation substituation pattern feature systems wild cope url s urls colons per fectly perfectly valid characters path uri references scheme property configuration string prop mangle names paces namespaces resource resolver mangle namespaces manglenamespaces property bool value boolvalue label direct mapping description add direct url mapping front mapping list string prop dir ect direct resource resolver allow direct allowdirect property unbounded property unbounded propertyunbounded array org apache sling jcr resource internal helper jcr jcr resource provider jcrresourceprovider label required providers description resource resolver factory registered resource providers mentioned configuration entry service pid filter expression invalid filters string prop required providers resource resolver required providers resolver virtual property configuration sling maven plugin sling management console handle empty multivalue properties moment add dummy direct mapping property unbounded property unbounded propertyunbounded array label virtual url s urls description list virtual url s urls mappings real url s urls format externalurl internalurl map pings mappings applied complete request url string prop virtual resource resolver virtual property content system doc root docroot label url map pings mappings description list mappings apply paths incoming mappings applied request paths map resource paths out going outgoing mappings applied map resource paths paths subsequent requests form internal path prefix internalpathprefix external path prefix externalpathprefix incoming mappings out going outgoing mappings mappings applied direct ions directions map pings mappings applied configuration order comparing replacing url prefixes note indicating mapping direct ions directions deprecated string prop mapping resource resolver mapping property map entries mapentries map root label mapping location description path root configuration setup configure resource resolver resourceresolver mapping map string prop map location resource resolver map location property int value intvalue map entries mapentries vanity path redirect status label vanity path redirect status description status code sling vanity path vanitypath configured redirect specific status code sling redirect status redirectstatus property string prop vanity path redirect status resource resolver vanity redirect status enable vanity path property bool value boolvalue enable vanity path label enable vanity paths description flag controls resources sling vanity path vanitypath property processed map poing mappoing table string prop enable vanity path resource resolver enable vanitypath max cached vanity paths property long value longvalue max cached vanity paths label maximum number cached vanity path entries description maximum number cached vanity path entries limit string prop max cached vanity paths resource resolver vanitypath max entries maxentries max cached vanity paths startup property bool value boolvalue max cached vanity paths startup label limit maximum number cached vanity path entries startup description limit maximum number cached vanity path entries startup string prop max cached vanity paths startup resource resolver vanitypath max entries maxentries startup vanity bloom filter max bytes property long value longvalue vanity bloom filter max bytes label maximum number vanity bloom filter bytes description maximum number vanity bloom filter bytes changing subject vanity bloom filter rebuild string prop vanity bloom filter max bytes resource resolver vanitypath bloom filter bloomfilter max bytes maxbytes enable optimize alias resolution property bool value boolvalue enable optimize alias resolution label optimize alias resolution description flag controls optimize alias resolution creating internal cache aliases impact startup time alias update time number aliases huge string prop enable optimize alias resolution resource resolver optimize alias resolution property unbounded property unbounded propertyunbounded array label allowed vanity path location description setting list path prefixes libs content list configured vanity paths resources starting prefix considered list empty vanity paths string prop allowed vanity path prefix resource resolver vanitypath whitelist property unbounded property unbounded propertyunbounded array label denied vanity path location description setting list path prefixes misc list configured vanity paths resources starting prefix considered list empty vanity paths string prop denied vanity path prefix resource resolver vanitypath blacklist vanity path precedence property bool value boolvalue vanity path precedence label vanity path precedence description flag controls vanity paths precedence existing map mapping string prop vanity path precedence resource resolver vanity precedence paranoid provider handling property bool value boolvalue paranoid provider handling label paranoid provider handling description flag enabled unregistration resource provider factory causing resource resolver factory restart cleaning memory leaks caused objects hold resource provider string prop paranoid provider handling resource resolver provider handling providerhandling par anoid paranoid log resource resolver closing property bool value boolvalue log resource resolver closing label log resource resolver closing description enabled crud operations closed resource resolver log stack trace point resolver closed advisable enable feature product ion production systems string prop log resource resolver closing resource resolver log closing tracker resource decorators resource decorator tracker resourcedecoratortracker resource decorator tracker resourcedecoratortracker resource decorator tracker resourcedecoratortracker mappings mapping mappings fake url s urls bidi map bidimap virtualurlmap code code direct mappings uri handle allowed allow direct allowdirect search path resource resolver resourceresolver get resource getresource string string search path searchpath root location map entries string map root maproot mangle paths names paces namespaces mangle name space prefixes manglenamespaceprefixes event admin reference event admin eventadmin event admin eventadmin service user mapper reference service user mapper serviceusermapper service user mapper serviceusermapper reference resource access security tracker resourceaccesssecuritytracker resource access security tracker resourceaccesssecuritytracker resource provider tracker resourceprovidertracker resource provider tracker resourceprovidertracker resource change listener whiteboard resourcechangelistenerwhiteboard change listener whiteboard changelistenerwhiteboard component context componentcontext component context componentcontext component context componentcontext default vanity path redirect status defaultvanitypathredirectstatus vanity path vanitypath enabled enable vanity path enablevanitypath enable vanity path alias resource resolution optimization enabled enable optimize alias resolution enableoptimizealiasresolution enable optimize alias resolution max number cache vanity path entries max cached vanity path entries maxcachedvanitypathentries max cached vanity paths limit max number cache vanity path entries startup max cached vanity path entries startup maxcachedvanitypathentriesstartup max cached vanity paths startup maximum number vanity bloom filter bytes vanity bloom filter max bytes vanitybloomfiltermaxbytes vanity bloom filter max bytes vanity paths precedence existing map mapping vanity path precedence vanitypathprecedence vanity path precedence log place resource resolver closed log resource resolver closing logresourceresolverclosing log resource resolver closing vanity path whitelist string vanity path white list vanitypathwhitelist vanity path blacklist string vanity path black list vanitypathblacklist factory preconditions factorypreconditions preconds factory preconditions factorypreconditions factory registration factory registration factoryregistration factory registration factoryregistration background thread coordination object coordinator object background thread operation enum check preconditions check unregister check preconditions unregister check list operations array list arraylist string required resource providers requiredresourceproviders resource decorator tracker resource decorator tracker resourcedecoratortracker get resource decorator tracker getresourcedecoratortracker resource decorator tracker resourcedecoratortracker resource access security tracker resourceaccesssecuritytracker get resource access security tracker getresourceaccesssecuritytracker resource access security tracker resourceaccesssecuritytracker event admin eventadmin get event admin geteventadmin event admin eventadmin method called link map entries mapentries bidi map bidimap getvirtualurlmap virtualurlmap method called link map entries mapentries mapping get map pings getmappings mappings string get search path getsearchpath search path searchpath is mangle name space prefixes ismanglenamespaceprefixes mangle name space prefixes manglenamespaceprefixes string get map root getmaproot map root maproot get default vanity path redirect status getdefaultvanitypathredirectstatus default vanity path redirect status defaultvanitypathredirectstatus is vanity path enabled isvanitypathenabled enable vanity path enablevanitypath is optimize alias resolution enabled isoptimizealiasresolutionenabled enable optimize alias resolution enableoptimizealiasresolution string get vanity path white list getvanitypathwhitelist vanity path white list vanitypathwhitelist string get vanity path black list getvanitypathblacklist vanity path black list vanitypathblacklist has vanity path precedence hasvanitypathprecedence vanity path precedence vanitypathprecedence get max cached vanity path entries getmaxcachedvanitypathentries max cached vanity path entries maxcachedvanitypathentries is max cached vanity path entries startup ismaxcachedvanitypathentriesstartup max cached vanity path entries startup maxcachedvanitypathentriesstartup get vanity bloom filter max bytes getvanitybloomfiltermaxbytes vanity bloom filter max bytes vanitybloomfiltermaxbytes should log resource resolver closing shouldlogresourceresolverclosing log resource resolver closing logresourceresolverclosing scr int egration integration activates component called scr registering service activate activate component context componentcontext component context componentcontext component context componentcontext component context componentcontext dictionary properties component context componentcontext get properties getproperties bidi map bidimap virtuals tree bidi map treebidimap string virtual list virtuallist properties util propertiesutil to string array tostringarray properties prop virtual virtual list virtuallist virtual list virtuallist length string parts mapping split virtual list virtuallist virtuals parts parts virtualurlmap virtuals list mapping maps array list arraylist mapping string mapping list mappinglist string properties prop mapping mapping list mappinglist mapping list mappinglist length maps add mapping mapping list mappinglist mapping tmp maps to array toarray mapping maps size check direct mappings allowed direct prop directprop properties prop dir ect direct allow direct allowdirect direct prop directprop direct prop directprop boolean value booleanvalue allow direct allowdirect mapping tmp mapping tmp length tmp mapping dir ect direct system arraycopy tmp tmp tmp length mappings tmp mappings tmp configuration search path searchpath properties util propertiesutil to string array tostringarray properties prop path search path searchpath search path searchpath length search path searchpath length ensure leading slash search path searchpath starts with startswith search path searchpath search path searchpath ensure trailing slash search path searchpath ends with endswith search path searchpath search path searchpath search path searchpath string testing unit test track ers trackers resource provider tracker resourceprovidertracker resource provider tracker resourceprovidertracker resource provider tracker resourceprovidertracker change listener whiteboard changelistenerwhiteboard resource change listener whiteboard resourcechangelistenerwhiteboard change listener whiteboard changelistenerwhiteboard activate component context componentcontext get bundle context getbundlecontext resource provider tracker resourceprovidertracker search path searchpath resource provider tracker resourceprovidertracker activate component context componentcontext get bundle context getbundlecontext event admin eventadmin change listener changelistener override provider changed providerchanged string pid array utils arrayutils required resource providers requiredresourceproviders pid check factory preconditions checkfactorypreconditions namespace mangling mangle name space prefixes manglenamespaceprefixes properties util propertiesutil to boolean toboolean properties prop mangle names paces namespaces root resolver mappings map root maproot properties util propertiesutil to string tostring properties prop map location map entries mapentries map root default vanity path redirect status defaultvanitypathredirectstatus properties util propertiesutil to integer tointeger properties prop vanity path redirect status map entries mapentries vanity path redirect status enable vanity path enablevanitypath properties util propertiesutil to boolean toboolean properties prop enable vanity path enable vanity path vanity path white list vanity path white list vanitypathwhitelist string vanity path prefixes vanitypathprefixes properties util propertiesutil to string array tostringarray properties prop allowed vanity path prefix vanity path prefixes vanitypathprefixes list string prefix list prefixlist array list arraylist string string vanity path prefixes vanitypathprefixes trim length trim ends with endswith prefix list prefixlist add trim prefix list prefixlist add trim prefix list prefixlist size vanity path white list vanitypathwhitelist prefix list prefixlist to array toarray string prefix list prefixlist size vanity path black list vanity path black list vanitypathblacklist vanity path prefixes vanitypathprefixes properties util propertiesutil to string array tostringarray properties prop denied vanity path prefix vanity path prefixes vanitypathprefixes list string prefix list prefixlist array list arraylist string string vanity path prefixes vanitypathprefixes trim length trim ends with endswith prefix list prefixlist add trim prefix list prefixlist add trim prefix list prefixlist size vanity path black list vanitypathblacklist prefix list prefixlist to array toarray string prefix list prefixlist size enable optimize alias resolution enableoptimizealiasresolution properties util propertiesutil to boolean toboolean properties prop enable optimize alias resolution enable optimize alias resolution max cached vanity path entries maxcachedvanitypathentries properties util propertiesutil to long tolong properties prop max cached vanity paths max cached vanity paths max cached vanity path entries startup maxcachedvanitypathentriesstartup properties util propertiesutil to boolean toboolean properties prop max cached vanity paths startup max cached vanity paths startup vanity bloom filter max bytes vanitybloomfiltermaxbytes properties util propertiesutil to integer tointeger properties prop vanity bloom filter max bytes vanity bloom filter max bytes vanity path precedence vanitypathprecedence properties util propertiesutil to boolean toboolean properties prop vanity path precedence vanity path precedence log resource resolver closing logresourceresolverclosing properties util propertiesutil to boolean toboolean properties prop log resource resolver closing log resource resolver closing bundle context bundlecontext component context componentcontext get bundle context getbundlecontext check required property required resource providers requiredresourceproviders properties util propertiesutil to string array tostringarray properties prop required providers preconds activate required resource providers requiredresourceproviders resource provider tracker resourceprovidertracker check factory preconditions checkfactorypreconditions thread thread set daemon setdaemon start deactivates component called scr service deactivate deactivate change listener whiteboard changelistenerwhiteboard deactivate resource provider tracker resourceprovidertracker deactivate component context componentcontext preconds deactivate resource decorator tracker resourcedecoratortracker close unregister factory unregisterfactory add operation addoperation unregister factory registered method called concurrently deactivate background thread synchronize unregister factory unregisterfactory factory registration factoryregistration local factory registration factoryregistration local factory registration factoryregistration factory registration factoryregistration unregister factory unregisterfactory local unregister factory unregister factory unregisterfactory factory registration factoryregistration local local local factory registration factoryregistration local factory registration factoryregistration unregister local runtime registration runtimeregistration local runtime registration runtimeregistration unregister local common factory commonfactory local common factory commonfactory deactivate register factory register factory registerfactory component context componentcontext local context localcontext factory registration factoryregistration local factory registration factoryregistration local context localcontext activate register factory dictionary string object service props serviceprops hashtable string object service props serviceprops constants service vendor local context localcontext get properties getproperties constants service vendor service props serviceprops constants service description local context localcontext get properties getproperties constants service description local common factory commonfactory common resource resolver factory impl commonresourceresolverfactoryimpl local common factory commonfactory activate local context localcontext get bundle context getbundlecontext local factory registration factoryregistration local context localcontext get bundle context getbundlecontext register service registerservice resource resolver factory resourceresolverfactory get name getname service factory servicefactory override object get service getservice bundle bundle service registration serviceregistration registration resource resolver factory impl resourceresolverfactoryimpl resource resolver factory impl resourceresolverfactoryimpl local common factory commonfactory bundle resource resolver factory activator resourceresolverfactoryactivator service user mapper serviceusermapper override unget service ungetservice bundle bundle service registration serviceregistration registration object service service props serviceprops local runtime registration runtimeregistration local context localcontext get bundle context getbundlecontext register service registerservice runtime service runtimeservice get name getname get runtime service getruntimeservice factory registration factoryregistration local runtime service runtimeservice get runtime service getruntimeservice runtime service impl runtimeserviceimpl resource provider tracker resourceprovidertracker check preconditions changed register factory unregister check factory preconditions checkfactorypreconditions component context componentcontext local context localcontext component context componentcontext local context localcontext result preconds check preconditions checkpreconditions result factory registration factoryregistration register factory registerfactory local context localcontext result factory registration factoryregistration unregister factory unregisterfactory bind resource decorator bind resource decorator bindresourcedecorator resource decorator resourcedecorator decorator map string object props resource decorator tracker resourcedecoratortracker bind resource decorator bindresourcedecorator decorator props unbind resource decorator unbind resource decorator unbindresourcedecorator resource decorator resourcedecorator decorator map string object props resource decorator tracker resourcedecoratortracker unbind resource decorator unbindresourcedecorator decorator props override is running isrunning is running isrunning list ops array list arraylist coordinator operations is empty isempty coordinator wait interrupted exception interruptedexception thread current thread currentthread int errupt interrupt ops add all addall operations operations clear is running isrunning ops is running isrunning ops last index of lastindexof unregister check unregister factory unregisterfactory delaying secs hurt thread sleep interrupted exception interruptedexception thread current thread currentthread int errupt interrupt check operations simply ignore ops clear coordinator ops add all addall operations operations clear is running isrunning ops is running isrunning check factory preconditions checkfactorypreconditions unregister factory unregisterfactory add operation addoperation coordinator operations add coordinator notify resource provider tracker resourceprovidertracker get resource provider tracker getresourceprovidertracker resource provider tracker resourceprovidertracker