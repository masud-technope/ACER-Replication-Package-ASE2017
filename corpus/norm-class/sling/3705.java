licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting sightly impl compiler java util dictionary java util hashtable java util map java util concurrent concurrent hash map concurrenthashmap org apache commons lang string utils stringutils org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations reference org apache felix scr annotations service org apache sling api sling constants slingconstants org apache sling api resource login exception loginexception org apache sling api resource resource org apache sling api resource resource metadata resourcemetadata org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling scripting sightly impl engine sightly engine configuration sightlyengineconfiguration org apache sling scripting sightly impl engine sightly script engine factory sightlyscriptenginefactory org osgi framework service registration serviceregistration org osgi service component component context componentcontext org osgi service event event org osgi service event event constants eventconstants org osgi service event event handler eventhandler org slf logger org slf logger factory loggerfactory component service unit change monitor unitchangemonitor unit change monitor unitchangemonitor logger log logger factory loggerfactory get logger getlogger unit change monitor unitchangemonitor map string sightly script sightlyscript sly scripts map slyscriptsmap concurrent hash map concurrenthashmap string sightly script sightlyscript map string sly java use map slyjavausemap concurrent hash map concurrenthashmap string service registration serviceregistration event handler service registration eventhandlerserviceregistration reference resource resolver factory resourceresolverfactory rrf reference sightly engine configuration sightlyengineconfiguration sightly engine configuration sightlyengineconfiguration returns modified sightly script param script script full path script modified script get last modified date for script getlastmodifieddateforscript string script sightly script sightlyscript sightly script sightlyscript sly scripts map slyscriptsmap script sightly script sightlyscript sightly script sightlyscript last modified lastmodified string get script encoding getscriptencoding string script sightly script sightlyscript sightly script sightlyscript get script getscript script sightly script sightlyscript sightly script sightlyscript encoding sightly engine configuration sightlyengineconfiguration get encoding getencoding returns modified java api object stored repository param class name classname full path file defining java api object java api file modified file get last modified date for java use object getlastmodifieddateforjavauseobject string class name classname class name classname sly java use map slyjavausemap class name classname clear java use object clearjavauseobject string class name classname string utils stringutils is not empty isnotempty class name classname sly java use map slyjavausemap remove class name classname activate suppress warnings suppresswarnings unused unchecked activate component context componentcontext component context componentcontext resource resolver resourceresolver admin resolver adminresolver admin resolver adminresolver rrf get administrative resource resolver getadministrativeresourceresolver string builder stringbuilder event handler filtered paths eventhandlerfilteredpaths string builder stringbuilder string search paths searchpaths admin resolver adminresolver get search path getsearchpath string search paths searchpaths sightly script event handler filtered paths eventhandlerfilteredpaths append path append append append sightly script engine factory sightlyscriptenginefactory extension append sightly java api objects event handler filtered paths eventhandlerfilteredpaths append path append append java append event handler filtered paths eventhandlerfilteredpaths append dictionary event handler properties eventhandlerproperties hashtable event handler properties eventhandlerproperties event constants eventconstants event filter event handler filtered paths eventhandlerfilteredpaths to string tostring event handler properties eventhandlerproperties event constants eventconstants event topic string sling constants slingconstants topic resource sling constants slingconstants topic resource changed sling constants slingconstants topic resource removed event handler service registration eventhandlerserviceregistration component context componentcontext get bundle context getbundlecontext register service registerservice event handler eventhandler get name getname event handler eventhandler override handle event handleevent event event process event processevent event event handler properties eventhandlerproperties login exception loginexception log error unable listen change events admin resolver adminresolver admin resolver adminresolver close deactivate suppress warnings suppresswarnings unused deactivate component context componentcontext component context componentcontext event handler service registration eventhandlerserviceregistration event handler service registration eventhandlerserviceregistration unregister process event processevent event event string path string event get property getproperty sling constants slingconstants property path string topic event get topic gettopic sling constants slingconstants topic resource equals topic sling constants slingconstants topic resource changed equals topic path ends with endswith java sly java use map slyjavausemap utils get java name from path getjavanamefrompath path system current time millis currenttimemillis path ends with endswith sightly script engine factory sightlyscriptenginefactory extension resource resolver resourceresolver resolver string encoding resolver rrf get administrative resource resolver getadministrativeresourceresolver resource metadata resourcemetadata script resource metadata scriptresourcemetadata resolver get resource getresource path get resource metadata getresourcemetadata encoding script resource metadata scriptresourcemetadata get character encoding getcharacterencoding login exception loginexception log warn read character encoding script path resolver resolver close string utils stringutils is empty isempty encoding encoding sightly engine configuration sightlyengineconfiguration get encoding getencoding sly scripts map slyscriptsmap path sightly script sightlyscript path encoding system current time millis currenttimemillis sling constants slingconstants topic resource removed equals topic path ends with endswith java sly java use map slyjavausemap remove utils get java name from path getjavanamefrompath path path ends with endswith sightly script engine factory sightlyscriptenginefactory extension sly scripts map slyscriptsmap remove path sightly script sightlyscript get script getscript string script sightly script sightlyscript sightly script sightlyscript string utils stringutils is not empty isnotempty script sightly script sightlyscript sly scripts map slyscriptsmap script sightly script sightlyscript resource resolver resourceresolver resolver resolver rrf get administrative resource resolver getadministrativeresourceresolver resource script resource scriptresource resolver get resource getresource script script resource scriptresource resource metadata resourcemetadata script resource metadata scriptresourcemetadata script resource scriptresource get resource metadata getresourcemetadata string encoding script resource metadata scriptresourcemetadata get character encoding getcharacterencoding string utils stringutils is empty isempty encoding encoding sightly engine configuration sightlyengineconfiguration get encoding getencoding sightly script sightlyscript sightly script sightlyscript script encoding script resource metadata scriptresourcemetadata get modification time getmodificationtime sly scripts map slyscriptsmap script sightly script sightlyscript login exception loginexception log warn read character encoding script script resolver resolver close sightly script sightlyscript sightly script sightlyscript string encoding string class name classname string path last modified lastmodified sightly script sightlyscript string path string encoding last modified lastmodified encoding encoding class name classname utils get java name from path getjavanamefrompath path path path last modified lastmodified last modified lastmodified