licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal java util calendar java util collection java util collections java util java util iterator java util linked hash map linkedhashmap java util map java util javax jcr node javax jcr property javax jcr property iterator propertyiterator javax jcr repository exception repositoryexception javax jcr org apache jackrabbit util iso org apache jackrabbit util text org apache sling api resource modifiable value map modifiablevaluemap org apache sling jcr resource internal helper jcr property map cache entry jcrpropertymapcacheentry implementation map change properties todo adds lot duplicate code consolidate jcr modifiable value map jcrmodifiablevaluemap modifiable value map modifiablevaluemap underlying node node node cache properties map string jcr property map cache entry jcrpropertymapcacheentry cache cache values map string object value cache valuecache node read completely fully read fullyread helper data helperdata helper constructor param node underlying node param helper helper data object jcr modifiable value map jcrmodifiablevaluemap node node helper data helperdata helper node node cache linked hash map linkedhashmap string jcr property map cache entry jcrpropertymapcacheentry value cache valuecache linked hash map linkedhashmap string object fully read fullyread helper helper node node get node getnode node value map valuemap string check key checkkey string key key null pointer exception nullpointerexception key key starts with startswith key substring key org apache sling api resource value map valuemap java lang string java lang suppress warnings suppresswarnings unchecked string a key akey type string key check key checkkey a key akey type key jcr property map cache entry jcrpropertymapcacheentry entry read key entry entry convert to type converttotype type node helper dynamic class loader dynamicclassloader org apache sling api resource value map valuemap java lang string java lang object suppress warnings suppresswarnings unchecked string a key akey default value defaultvalue string key check key checkkey a key akey default value defaultvalue key special handling types supported convert to type converttotype method type normalize class normalizeclass default value defaultvalue get class getclass key type default value defaultvalue map java util map java lang object object object a key akey string key check key checkkey a key akey to string tostring jcr property map cache entry jcrpropertymapcacheentry entry read key object entry entry get property value or null getpropertyvalueornull java util map contains key containskey java lang object contains key containskey object key key java util map contains value containsvalue java lang object contains value containsvalue object read fully readfully value cache valuecache contains value containsvalue java util map is empty isempty is empty isempty size java util map size size read fully readfully cache size java util map entry set entryset java util map entry string object entry set entryset read fully readfully map string object source map sourcemap cache size value cache valuecache size source map sourcemap value cache valuecache source map sourcemap transform entries transformentries cache collections unmodifiable set unmodifiableset source map sourcemap entry set entryset java util map key set keyset string key set keyset read fully readfully collections unmodifiable set unmodifiableset cache key set keyset java util map values collection object values read fully readfully map string object source map sourcemap cache size value cache valuecache size source map sourcemap value cache valuecache source map sourcemap transform entries transformentries cache collections unmodifiable collection unmodifiablecollection source map sourcemap values path current node path illegal state exception illegalstateexception repository exception occurs string get path getpath node get path getpath repository exception repositoryexception illegal state exception illegalstateexception help ers helpers access node property single property cache param prop illegal argument exception illegalargumentexception repository exception occurs jcr property map cache entry jcrpropertymapcacheentry cache property cacheproperty property prop calculate key string prop get name getname string key index of indexof compatibility older versions wrong iso path encoding key iso decode key equals key key key text unescape illegal jcr chars unescapeillegaljcrchars jcr property map cache entry jcrpropertymapcacheentry entry cache key entry entry jcr property map cache entry jcrpropertymapcacheentry prop cache key entry object default value defaultvalue entry get property value getpropertyvalue default value defaultvalue value cache valuecache key entry get property value getpropertyvalue entry repository exception repositoryexception illegal argument exception illegalargumentexception read single property illegal argument exception illegalargumentexception repository exception occurs jcr property map cache entry jcrpropertymapcacheentry read string check empty key length path handle diff erently differently index of indexof compatibility check wrong iso encoding string path iso encode path encodepath node has property hasproperty path jcr property map cache entry jcrpropertymapcacheentry node get property getproperty path repository exception repositoryexception illegal argument exception illegalargumentexception proper segment segment encoding string builder stringbuilder string builder stringbuilder pos last pos lastpos pos length char at charat pos last pos lastpos pos append text escape illegal jcr chars escapeillegaljcrchars substring last pos lastpos pos append last pos lastpos pos pos last pos lastpos pos append text escape illegal jcr chars escapeillegaljcrchars substring last pos lastpos string new path newpath to string tostring node has property hasproperty new path newpath jcr property map cache entry jcrpropertymapcacheentry node get property getproperty new path newpath repository exception repositoryexception illegal argument exception illegalargumentexception check cache jcr property map cache entry jcrpropertymapcacheentry cached value d cachedvalued cache fully read fullyread cached value d cachedvalued cached value d cachedvalued string key escape key name escapekeyname node has property hasproperty key property prop node get property getproperty key cache property cacheproperty prop repository exception repositoryexception illegal argument exception illegalargumentexception compatibility older versions wrong iso path encoding string old key oldkey iso encode path encodepath node has property hasproperty old key oldkey property prop node get property getproperty old key oldkey cache property cacheproperty prop repository exception repositoryexception property handles key escaping consideration registered prefix param key key escape escaped key repository exception repositoryexception repository namespace prefixes retrieved string escape key name escapekeyname string key repository exception repositoryexception index of prefix indexofprefix key index of indexof check colon character index of prefix indexofprefix key length index of prefix indexofprefix string prefix key substring index of prefix indexofprefix string existing prefix existingprefix helper get name space prefixes getnamespaceprefixes node get session getsession existing prefix existingprefix equals prefix prefix text escape illegal jcr chars escapeillegaljcrchars key substring index of prefix indexofprefix text escape illegal jcr chars escapeillegaljcrchars key read properties illegal argument exception illegalargumentexception repository exception occurs read fully readfully fully read fullyread property iterator propertyiterator node get properties getproperties has next hasnext property prop next property nextproperty cache property cacheproperty prop fully read fullyread repository exception repositoryexception illegal argument exception illegalargumentexception implementation helper normalize class normalizeclass type calendar is assignable from isassignablefrom type type calendar is assignable from isassignablefrom type type is assignable from isassignablefrom type type property is assignable from isassignablefrom type type property type map string object transform entries transformentries map string jcr property map cache entry jcrpropertymapcacheentry map map string object transformed entries transformedentries linked hash map linkedhashmap string object map size map entry string jcr property map cache entry jcrpropertymapcacheentry entry map entry set entryset transformed entries transformedentries entry get key getkey entry get value getvalue get property value or null getpropertyvalueornull transformed entries transformedentries map java util map clear clear unsupported operation exception unsupportedoperationexception clear java util map java lang object java lang object object string a key akey object string key check key checkkey a key akey key index of indexof illegal argument exception illegalargumentexception invalid key key null pointer exception nullpointerexception key key read fully readfully object old value oldvalue key jcr property map cache entry jcrpropertymapcacheentry entry jcr property map cache entry jcrpropertymapcacheentry node cache key entry string escape key name escapekeyname key node util nodeutil mixin types equals node util nodeutil handle mixin types handlemixintypes node entry convert to type converttotype string node helper dynamic class loader dynamicclassloader jcr primary type primarytype equals node set primary type setprimarytype entry convert to type converttotype string node helper dynamic class loader dynamicclassloader entry is array isarray node set property setproperty entry convert to type converttotype node helper dynamic class loader dynamicclassloader node set property setproperty entry convert to type converttotype node helper dynamic class loader dynamicclassloader repository exception repositoryexception illegal argument exception illegalargumentexception key key node value cache valuecache key old value oldvalue java util map put all putall java util map put all putall map string object iterator entry set entryset iterator has next hasnext suppress warnings suppresswarnings unchecked map entry string object entry map entry string object entry get key getkey entry get value getvalue java util map remove java lang object object remove object a key akey string key check key checkkey a key akey to string tostring read fully readfully object old value oldvalue cache remove key value cache valuecache remove key string escape key name escapekeyname key node has property hasproperty node get property getproperty remove repository exception repositoryexception illegal argument exception illegalargumentexception key key removed node old value oldvalue