licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest java io exception ioexception java util array list arraylist java util hash map hashmap java util list java util map org apache commons http client httpclient name value pair namevaluepair org apache sling commons json json exception jsonexception org apache sling commons testing int egration integration http test base httptestbase test link json query servlet jsonqueryservlet functionality don test repository query feature query servlet parameters int erpreted interpreted correctly json query servlet test jsonqueryservlettest http test base httptestbase string test folder url testfolderurl string test path testpath get class getclass get simple name getsimplename system current time millis currenttimemillis string counter code countercode print data length override set up setup exception set up setup test folder url testfolderurl test client testclient create node createnode http base url test path testpath create sub folders subfolders sub nodes subnodes text property folder folder folder map string string props hash map hashmap string string props creator get class getclass get simple name getsimplename props props type hint typehint props text folder folder string sub folder url subfolderurl test client testclient create node createnode test folder url testfolderurl folder folder props props text folder folder node test client testclient create node createnode sub folder url subfolderurl node props override tear down teardown exception tear down teardown test folder url testfolderurl test client testclient delete webdav base url test path testpath assert count assertcount expected count expectedcount string statement string query type querytype offset rows io exception ioexception assert count assertcount expected count expectedcount statement query type querytype offset rows assert count assertcount expected count expectedcount string statement string query type querytype offset rows tidy io exception ioexception list name value pair namevaluepair params array list arraylist name value pair namevaluepair params add name value pair namevaluepair statement statement query type querytype params add name value pair namevaluepair query type querytype query type querytype offset params add name value pair namevaluepair offset string value of valueof offset rows params add name value pair namevaluepair rows string value of valueof rows string json get content getcontent test folder url testfolderurl query tidy tidy json content type json params assert java script assertjavascript expected count expectedcount json counter code countercode statement statement query type querytype query type querytype test folder query testfolderquery io exception ioexception assert count assertcount test path testpath folder c folderc xpath test sub folder query testsubfolderquery io exception ioexception assert count assertcount test path testpath folder a foldera xpath test default query type testdefaultquerytype io exception ioexception assert count assertcount test path testpath folder e foldere test sql testsql io exception ioexception string query select unstructured jcr path test path testpath folder b folderb assert count assertcount query sql test sql testsql io exception ioexception string query select unstructured isdescendantnode test path testpath folder b folderb assert count assertcount query jcr sql test offset testoffset io exception ioexception assert count assertcount test path testpath folder c folderc xpath test rows testrows io exception ioexception assert count assertcount test path testpath folder c folderc xpath test property param testpropertyparam io exception ioexception string url test folder url testfolderurl query json string statement test path testpath folder b folderb node list name value pair namevaluepair params array list arraylist name value pair namevaluepair params add name value pair namevaluepair statement statement string json get content getcontent url content type json params assert java script assertjavascript json counter code countercode assert java script assertjavascript json data text print assert java script assertjavascript json data creator print params add name value pair namevaluepair property text json get content getcontent url content type json params assert java script assertjavascript json counter code countercode assert java script assertjavascript json data text print assert java script assertjavascript folder node json print data text assert java script assertjavascript json data creator print params add name value pair namevaluepair property creator json get content getcontent url content type json params assert java script assertjavascript json counter code countercode assert java script assertjavascript json data text print assert java script assertjavascript folder node json print data text assert java script assertjavascript json data creator print assert java script assertjavascript get class getclass get simple name getsimplename json print data creator params add name value pair namevaluepair property json get content getcontent url content type json params assert java script assertjavascript json counter code countercode assert java script assertjavascript json data print assert java script assertjavascript sun json print data substring test sling tidy rendering query test tidy result format testtidyresultformat io exception ioexception json exception jsonexception tidy query function output tidy string statement test path testpath folder a foldera string query type querytype xpath assert count assertcount statement query type querytype tidy list name value pair namevaluepair params array list arraylist name value pair namevaluepair params add name value pair namevaluepair statement statement params add name value pair namevaluepair query type querytype query type querytype string json get content getcontent test folder url testfolderurl query json content type json params string tidy json tidyjson get content getcontent test folder url testfolderurl query tidy json content type json params tidy json text whitespace equivalent untidy version assert not same assertnotsame json tidy json tidyjson no tidy count notidycount count occurences countoccurences json tidy count tidycount count occurences countoccurences tidy json tidyjson delta tidy count tidycount no tidy count notidycount tidy output additional eol chars min assert true asserttrue tidy selector add eol chars json output delta delta delta min count occurences countoccurences string str to count tocount result str to char array tochararray to count tocount result result