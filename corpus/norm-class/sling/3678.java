licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons class loader classloader impl org junit org jmock expectations org jmock mockery org jmock sequence org jmock int egration integration junit j unit junit mockery org junit test org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework service listener servicelistener org osgi service package admin packageadmin exported package exportedpackage org osgi service package admin packageadmin package admin packageadmin simple test dynamic loader class loading test classloadingtest mockery context class loading test classloadingtest context j unit junit mockery method tests dynamic loading admin returned map array list test test loading testloading exception sequence sequence context sequence load sequence bundle context bundlecontext bundle context bundlecontext context mock bundle context bundlecontext package admin packageadmin package admin packageadmin context mock package admin packageadmin exported package exportedpackage context mock exported package exportedpackage bundle bundle context mock bundle context checking expectations allowing bundle context bundlecontext create filter createfilter string return value returnvalue allowing bundle context bundlecontext add service listener addservicelistener service listener servicelistener string allowing bundle context bundlecontext remove service listener removeservicelistener service listener servicelistener allowing bundle context bundlecontext get service references getservicereferences string string return value returnvalue allowing package admin packageadmin get exported package getexportedpackage org apache sling test return value returnvalue allowing get exp orting bundle getexportingbundle return value returnvalue bundle allowing is removal pending isremovalpending return value returnvalue allowing bundle get bundle id getbundleid return value returnvalue allowing bundle get state getstate return value returnvalue bundle active bundle load class loadclass org apache sling test in sequence insequence sequence return value returnvalue java util map bundle load class loadclass org apache sling test in sequence insequence sequence return value returnvalue java util map bundle load class loadclass org apache sling test in sequence insequence sequence return value returnvalue java util array list arraylist dynamic class loader manager impl dynamicclassloadermanagerimpl manager dynamic class loader manager impl dynamicclassloadermanagerimpl bundle context bundlecontext package admin packageadmin dynamic class loader manager factory dynamicclassloadermanagerfactory bundle context bundlecontext package admin packageadmin class loader classloader manager get dynamic class loader getdynamicclassloader load class loadclass org apache sling test assert equals assertequals java util map get name getname load class loadclass org apache sling test assert equals assertequals java util map get name getname cache result map load class loadclass org apache sling test assert equals assertequals java util map get name getname