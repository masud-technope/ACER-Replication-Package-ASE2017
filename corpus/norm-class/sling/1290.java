licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling resource resolver resourceresolver impl observation java util array list arraylist java util collection java util collections java util hash map hashmap java util hash set hashset java util list java util map java util org apache sling api resource path org apache sling api resource path set pathset org apache sling api resource observation resource change resourcechange org apache sling api resource observation resource change resourcechange change type changetype org apache sling spi resource provider observation reporter observationreporter org apache sling spi resource provider observer configuration observerconfiguration implementation observation reporter resource provider instance basic observation reporter basicobservationreporter observation reporter observationreporter list observer configuration observerconfiguration configs map listener config listenerconfig list resource change listener info resourcechangelistenerinfo listeners hash map hashmap basic observation reporter basicobservationreporter listener config listenerconfig list resource change listener info resourcechangelistenerinfo create reporter list ening listening resource provider param infos listeners map basic observation reporter basicobservationreporter collection resource change listener info resourcechangelistenerinfo infos string paths hash set hashset string resource change listener info resourcechangelistenerinfo info infos info get provider change types getproviderchangetypes is empty isempty path info get paths getpaths paths add get path getpath fill listeners filllisteners info info get resource change types getresourcechangetypes observer configuration observerconfiguration cfg basic observer configuration basicobserverconfiguration path set pathset from string collection fromstringcollection paths configs collections singleton list singletonlist cfg create reporter list ening listening provider param infos listeners map param provider path providerpath mount point provider param exclude paths excludepaths excluded paths provider basic observation reporter basicobservationreporter collection resource change listener info resourcechangelistenerinfo infos path provider path providerpath path set pathset exclude paths excludepaths map string observer config observerconfig config map configmap hash map hashmap string observer config observerconfig resource change listener info resourcechangelistenerinfo info infos info get resource change types getresourcechangetypes is empty isempty add path info get paths getpaths provider path providerpath matches get path getpath exclude paths excludepaths matches get path getpath observer config observerconfig config config map configmap config config observer config observerconfig config map configmap get path getpath config config types add all addall info get resource change types getresourcechangetypes info is external isexternal config is external isexternal add add fill listeners filllisteners info info get resource change types getresourcechangetypes list observer configuration observerconfiguration result array list arraylist observer configuration observerconfiguration map entry string observer config observerconfig entry config map configmap entry set entryset observer configuration observerconfiguration cfg basic observer configuration basicobserverconfiguration entry get key getkey entry get value getvalue types entry get value getvalue is external isexternal exclude paths excludepaths result add cfg configs collections unmodifiable list unmodifiablelist result fill listeners filllisteners resource change listener info resourcechangelistenerinfo info change type changetype types listener config listenerconfig cfg listener config listenerconfig info types list resource change listener info resourcechangelistenerinfo list listeners cfg list list array list arraylist resource change listener info resourcechangelistenerinfo listeners cfg list list add info override list observer configuration observerconfiguration get observer configurations getobserverconfigurations configs override report changes reportchanges iterable resource change resourcechange distribute list resource change resourcechange change list changelist array list arraylist resource change resourcechange resource change resourcechange change list changelist add map entry listener config listenerconfig list resource change listener info resourcechangelistenerinfo entry listeners entry set entryset list resource change resourcechange filtered filter changes filterchanges change list changelist entry get key getkey filtered is empty isempty resource change listener info resourcechangelistenerinfo info entry get value getvalue info get listener getlistener on change onchange filtered todo implement distribute filter change list based configuration param list param config configuration filtered list list resource change resourcechange filter changes filterchanges list resource change resourcechange listener config listenerconfig config list resource change resourcechange filtered array list arraylist resource change resourcechange resource change resourcechange matches config filtered add filtered match change configuration param change change param config configuration code matches matches resource change resourcechange change listener config listenerconfig config config types change get type gettype config is external isexternal change is external isexternal config paths matches change get path getpath observer config observerconfig change type changetype types hash set hashset change type changetype is external isexternal listener config listenerconfig path set pathset paths is external isexternal change type changetype types listener config listenerconfig resource change listener info resourcechangelistenerinfo info change type changetype types paths info get paths getpaths is external isexternal info is external isexternal types types override hash code hashcode prime result result prime result is external isexternal result prime result paths hash code hashcode result prime result types hash code hashcode result override equals object obj obj obj get class getclass obj get class getclass listener config listenerconfig listener config listenerconfig obj is external isexternal is external isexternal paths equals paths types equals types