licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling provisioning model java byte array input stream bytearrayinputstream java io exception ioexception java line number reader linenumberreader java string reader stringreader java util dictionary java util enumeration java util properties org apache felix file configuration handler configurationhandler org apache sling provisioning model model utility modelutility artifact version resolver artifactversionresolver org apache sling provisioning model model utility modelutility variable resolver variableresolver helper methods resolving variables artifact versions models model resolve utility modelresolveutility replace properties string param feature feature param variable param resolver optional resolver result variable illegal argument exception illegalargumentexception variable string replace feature feature string variable resolver variableresolver resolver string msg check variables pos start pos msg index of indexof start escaped variable escapedvariable pos msg char at charat pos msg length pos msg char at charat pos pos msg char at charat pos end pos endpos msg index of indexof pos end pos endpos string msg substring pos end pos endpos string escaped variable escapedvariable resolver resolver resolve feature feature get variables getvariables illegal argument exception illegalargumentexception unknown variable start pos startpos escaped variable escapedvariable pos pos msg msg substring start pos startpos msg substring end pos endpos start pos msg string resolve artifact version resolveartifactversion string group id groupid string artifact id artifactid string version string class ifier classifier string type artifact version resolver artifactversionresolver artifact version resolver artifactversionresolver artifact version resolver artifactversionresolver version latest equals version string new version newversion artifact version resolver artifactversionresolver resolve artifact group id groupid artifact id artifactid version class ifier classifier type new version newversion new version newversion version get processed configuration getprocessedconfiguration feature feature configuration new config newconfig configuration config replace variables replacevariables variable resolver variableresolver resolver new config newconfig set comment setcomment config get comment getcomment new config newconfig set location setlocation config get location getlocation check raw configuration string raw config rawconfig string config get properties getproperties model constants modelconstants cfg unprocessed raw config rawconfig replace variables replacevariables raw config rawconfig replace feature raw config rawconfig resolver config is special isspecial new config newconfig get properties getproperties config get pid getpid raw config rawconfig string format string config get properties getproperties model constants modelconstants cfg unprocessed format model constants modelconstants cfg format properties equals format properties properties props properties props load string reader stringreader raw config rawconfig io exception ioexception ioe illegal argument exception illegalargumentexception unable read configuration properties ioe enumeration object props has more elements hasmoreelements string key string next element nextelement new config newconfig get properties getproperties key props key apache felix format raw format comments remove string builder stringbuilder string builder stringbuilder line number reader linenumberreader lnr line number reader linenumberreader string reader stringreader raw config rawconfig string lnr read line readline trim is empty isempty starts with startswith append append io exception ioexception ioe illegal argument exception illegalargumentexception unable read configuration properties config ioe byte array input stream bytearrayinputstream bais bais byte array input stream bytearrayinputstream to string tostring get bytes getbytes utf suppress warnings suppresswarnings unchecked dictionary string object props configuration handler configurationhandler read bais enumeration string props has more elements hasmoreelements string key next element nextelement new config newconfig get properties getproperties key props key io exception ioexception ioe illegal argument exception illegalargumentexception unable read configuration properties config ioe bais bais close io exception ioexception ignore simply copy enumeration string config get properties getproperties has more elements hasmoreelements string key next element nextelement new config newconfig get properties getproperties key config get properties getproperties key