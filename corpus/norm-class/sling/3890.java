licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets impl version java io exception ioexception java util array list arraylist java util arrays java util collection java util list javax jcr node javax jcr repository exception repositoryexception javax jcr version version javax jcr version version history versionhistory javax jcr version version iterator versioniterator javax servlet servlet javax servlet servlet exception servletexception org apache felix scr annotations component org apache felix scr annotations configuration policy configurationpolicy org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations service org apache jackrabbit jcr constants jcrconstants org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api resource resource org apache sling api servlets sling safe methods servlet slingsafemethodsservlet org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling commons json json renderer jsonrenderer org apache sling commons json jcr json item writer jsonitemwriter code version info servlet versioninfoservlet code renders list versions current resource moment jcr nodes supported component metatype org apache sling servlets impl version version info servlet versioninfoservlet label servlet version description servlet version description policy configuration policy configurationpolicy require service servlet properties property service description version info servlet property service vendor apache software foundation property sling servlet resource types resourcetypes sling servlet property private propertyprivate property sling servlet selectors property sling servlet methods property private propertyprivate property sling servlet extensions json property private propertyprivate version info servlet versioninfoservlet sling safe methods servlet slingsafemethodsservlet serialversionuid selector pretty print output string tidy tidy selector hierarchy rendered arrays child objects preserve order child objects string harray harray indent tidy mode indent spaces json renderer jsonrenderer renderer json renderer jsonrenderer do get doget sling http servlet request slinghttpservletrequest req sling http servlet response slinghttpservletresponse resp servlet exception servletexception io exception ioexception resp set content type setcontenttype req get response content type getresponsecontenttype resp set character encoding setcharacterencoding utf tidy has selector hasselector req tidy harray has selector hasselector req harray json renderer jsonrenderer options opt renderer options with indent withindent tidy indent spaces with arrays for children witharraysforchildren harray resp get writer getwriter write renderer pretty print prettyprint get json object getjsonobject req get resource getresource opt repository exception repositoryexception servlet exception servletexception json exception jsonexception servlet exception servletexception json object jsonobject get json object getjsonobject resource resource repository exception repositoryexception json exception jsonexception json object jsonobject result json object jsonobject node node resource adapt to adaptto node node node is node type isnodetype jcr constants jcrconstants mix version able versionable result version history versionhistory history node get version history getversionhistory version base version baseversion node get base version getbaseversion version iterator versioniterator history get all versions getallversions has next hasnext version next version nextversion json object jsonobject obj json object jsonobject obj created created date createddate obj success ors successors get names getnames get success ors getsuccessors obj predecessors get names getnames get predecessors getpredecessors obj labels arrays as list aslist history get version labels getversionlabels obj base version baseversion base version baseversion is same issame result get name getname obj json object jsonobject wrapper json object jsonobject wrapper versions result wrapper collection string get names getnames version versions repository exception repositoryexception list string result array list arraylist string version versions result add get name getname result request selector has selector hasselector sling http servlet request slinghttpservletrequest req string selector to check selectortocheck string selector req get request path info getrequestpathinfo get selectors getselectors selector to check selectortocheck equals selector string created date createddate node node repository exception repositoryexception json item writer jsonitemwriter format node get property getproperty jcr constants jcrconstants jcr created get date getdate