licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest servlets post java io exception ioexception java util hash map hashmap java util map org apache sling commons json json array jsonarray org apache sling commons json json object jsonobject org apache sling commons testing int egration integration http test base httptestbase org apache sling commons testing int egration integration name value pair list namevaluepairlist org apache sling servlets post sling post constants slingpostconstants org custom monkey custommonkey xml unit xmlunit name space context namespacecontext org custom monkey custommonkey xml unit xmlunit simple name space context simplenamespacecontext org custom monkey custommonkey xml unit xmlunit xml assert xmlassert org custom monkey custommonkey xml unit xmlunit xml unit xmlunit org xml sax sax exception saxexception int egration integration test reference type hints post servlet reference type hint test referencetypehinttest http test base httptestbase string test base path sling tests string post url posturl string first created node url firstcreatednodeurl string first uuid firstuuid string first path firstpath string second created node url secondcreatednodeurl string second uuid seconduuid string second path secondpath override set up setup exception set up setup post url posturl http base url test base path system current time millis currenttimemillis map string string hash map hashmap string string http jcp org jcr name space context namespacecontext ctx simple name space context simplenamespacecontext xml unit xmlunit set xpath name space context setxpathnamespacecontext ctx name value pair list namevaluepairlist props name value pair list namevaluepairlist props add props add jcr mixin types mixintypes mix reference able referenceable first created node url firstcreatednodeurl test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props first uuid firstuuid get property getproperty first created node url firstcreatednodeurl jcr uuid first path firstpath get path getpath first created node url firstcreatednodeurl second created node url secondcreatednodeurl test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props second uuid seconduuid get property getproperty second created node url secondcreatednodeurl jcr uuid second path secondpath get path getpath second created node url secondcreatednodeurl test reference types created from u uids testreferencetypescreatedfromuuids exception name value pair list namevaluepairlist props name value pair list namevaluepairlist props add first uuid firstuuid props add type hint typehint reference props add first uuid firstuuid props add type hint typehint weak reference weakreference props add first uuid firstuuid props add second uuid seconduuid props add type hint typehint reference props add first uuid firstuuid props add second uuid seconduuid props add type hint typehint weak reference weakreference string referencing node url referencingnodeurl test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props verify references verifyreferences referencing node url referencingnodeurl test reference types created from path testreferencetypescreatedfrompath exception name value pair list namevaluepairlist props name value pair list namevaluepairlist props add first path firstpath props add type hint typehint reference props add first path firstpath props add type hint typehint weak reference weakreference props add first path firstpath props add second path secondpath props add type hint typehint reference props add first path firstpath props add second path secondpath props add type hint typehint weak reference weakreference string referencing node url referencingnodeurl test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props verify references verifyreferences referencing node url referencingnodeurl verify references verifyreferences string referencing node url referencingnodeurl exception string ref created value refcreatedvalue get property getproperty referencing node url referencingnodeurl string weakref created value weakrefcreatedvalue get property getproperty referencing node url referencingnodeurl string ref created values refcreatedvalues get property array getpropertyarray referencing node url referencingnodeurl string weakref created values weakrefcreatedvalues get property array getpropertyarray referencing node url referencingnodeurl assert equals assertequals first uuid firstuuid ref created value refcreatedvalue assert equals assertequals first uuid firstuuid weakref created value weakrefcreatedvalue assert equals assertequals first uuid firstuuid ref created values refcreatedvalues assert equals assertequals first uuid firstuuid weakref created values weakrefcreatedvalues assert equals assertequals second uuid seconduuid ref created values refcreatedvalues assert equals assertequals second uuid seconduuid weakref created values weakrefcreatedvalues string sys view sysview get system view getsystemview referencing node url referencingnodeurl xml assert xmlassert assert xpath eval uates to assertxpathevaluatesto reference property type sys view sysview xml assert xmlassert assert xpath eval uates to assertxpathevaluatesto weak reference weakreference property type sys view sysview xml assert xmlassert assert xpath eval uates to assertxpathevaluatesto reference property type sys view sysview xml assert xmlassert assert xpath eval uates to assertxpathevaluatesto weak reference weakreference property type sys view sysview string get system view getsystemview string url io exception ioexception sax exception saxexception get content getcontent url sys view sysview xml content type xml string get path getpath string url url substring http base url length string get property getproperty string url string exception get content getcontent url txt content type plain string get property array getpropertyarray string url string exception json object jsonobject json object jsonobject get content getcontent url json content type json json array jsonarray arr getjsonarray string result string arr length arr length result arr get string getstring result