licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling extensions mdc internal org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations configuration policy configurationpolicy org apache felix scr annotations deactivate org apache felix scr annotations modified org apache felix scr annotations property org apache felix scr annotations service org apache sling commons osgi properties util propertiesutil org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework service factory servicefactory org osgi framework service registration serviceregistration org slf mdc javax servlet filter javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet http cookie javax servlet http http servlet request httpservletrequest java i o exception ioexception java util array list arraylist java util arrays java util hash set hashset java util list java util map java util properties java util java util concurrent copy on write array set copyonwritearrayset service component metatype label mdc label description mdc description policy configuration policy configurationpolicy require property pattern property private propertyprivate mdc ins erting filter mdcinsertingfilter filter based qos logback classic helpers mdc ins erting servlet filter mdcinsertingservletfilter filter string request remote host mdc key req remote host remotehost string request user agent mdc key req user agent useragent string request request uri req requesturi string request query string req query string querystring string request request url req requesturl string request for warded forwarded req x for warded for xforwardedfor string key names request remote host mdc key request user agent mdc key request request uri request query string request request url request for warded forwarded string empty string property string prop headers headers property string prop params parameters property string prop cookies cookies string key names keynames copy on write array set copyonwritearrayset string string header names headernames copy on write array set copyonwritearrayset string string parameter names parameternames copy on write array set copyonwritearrayset string string cookie names cookienames copy on write array set copyonwritearrayset string service registration serviceregistration filter reg filterreg init filter config filterconfig filter config filterconfig servlet exception servletexception do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain i o exception ioexception servlet exception servletexception insertintomdc request chain do filter dofilter request response clearmdc destroy insertintomdc servlet request servletrequest request null safe put nullsafeput request remote host mdc key request get remote host getremotehost request http servlet request httpservletrequest http servlet request httpservletrequest http request httprequest http servlet request httpservletrequest request null safe put nullsafeput request request uri http request httprequest getrequesturi string buffer stringbuffer requesturl http request httprequest getrequesturl requesturl null safe put nullsafeput request request url requesturl to string tostring null safe put nullsafeput request query string http request httprequest get query string getquerystring null safe put nullsafeput request user agent mdc key http request httprequest get header getheader user agent null safe put nullsafeput request for warded forwarded http request httprequest get header getheader for warded forwarded string param name paramname parameter names parameternames null safe put nullsafeput param name paramname http request httprequest get parameter getparameter param name paramname string header name headername header names headernames null safe put nullsafeput header name headername http request httprequest get header getheader header name headername cookie cookies http request httprequest get cookies getcookies cookies cookie cookies cookie names cookienames get name getname null safe put nullsafeput get name getname get value getvalue clearmdc string key key names keynames mdc remove key activate activate bundle context bundlecontext context map string object config properties properties set property setproperty filter scope request mdc filter running sling container avoid direct dependency sling service factory servicefactory filter reg filterreg context register service registerservice filter get name getname service factory servicefactory object instance object get service getservice bundle bundle service registration serviceregistration service registration serviceregistration instance instance slingmdcfilter instance unget service ungetservice bundle bundle service registration serviceregistration service registration serviceregistration object modified config modified modified map string object config string headers to trimmed values totrimmedvalues config prop headers header names headernames clear header names headernames add all addall headers string cookies to trimmed values totrimmedvalues config prop cookies cookie names cookienames clear cookie names cookienames add all addall cookies string params to trimmed values totrimmedvalues config prop params parameter names parameternames clear parameter names parameternames add all addall params list string key names keynames array list arraylist string key names keynames add all addall header names headernames key names keynames add all addall cookie names cookienames key names keynames add all addall parameter names parameternames key names keynames add all addall arrays as list aslist key names key names keynames clear key names keynames add all addall key names keynames deactivate deactivate filter reg filterreg filter reg filterreg unregister null safe put nullsafeput string key string key mdc key string to trimmed values totrimmedvalues map string object config string prop name propname string values properties util propertiesutil to string array tostringarray config prop name propname empty string result hash set hashset string values length string values trim length result add trim result