licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp jasper java file java file not found exception filenotfoundexception java i o exception ioexception java input stream inputstream java output stream outputstream java net malformedurlexception java net url java util hash map hashmap java util map java util javax servlet servlet context servletcontext javax servlet jsp tagext tag info taginfo org apache sling scripting jsp jasper compiler compiler org apache sling scripting jsp jasper compiler jdt compiler jdtcompiler org apache sling scripting jsp jasper compiler jsp runtime context jspruntimecontext org apache sling scripting jsp jasper compiler jsp util jsputil org apache sling scripting jsp jasper compiler localizer org apache sling scripting jsp jasper compiler servlet writer servletwriter place holder jsp engine request context data structure instance variables points path stuff mangling names versions dirs loading resources dealing uris author anil vijendran author harish prabandham author pierre delisle author costin manolache author kin man chung jsp compilation context jspcompilationcontext map string url tag file jar urls tagfilejarurls string class name classname string jsp uri jspuri is err page iserrpage string base package name basepackagename string derived package name derivedpackagename string servlet java file name servletjavafilename string java path javapath string class file name classfilename string content type contenttype servlet writer servletwriter writer options options compiler jsp compiler jspcompiler string baseuri string output dir outputdir servlet context servletcontext context jsp runtime context jspruntimecontext rctxt is tag file istagfile proto type mode prototypemode tag info taginfo tag info taginfo url tag file jar url tagfilejarurl default is session defaultissession jspuri relative context jsp compilation context jspcompilationcontext string jsp uri jspuri is err page iserrpage options options servlet context servletcontext context jsp runtime context jspruntimecontext rctxt default is session defaultissession jsp uri jspuri canonicaluri jsp uri jspuri is err page iserrpage is err page iserrpage options options context context baseuri jsp uri jspuri substring jsp uri jspuri last index of lastindexof hack resolverelativeuri baseuri baseuri baseuri char at charat str ip strip basde slash combined uri base uribase generate file baseuri baseuri baseuri char at charat baseuri length baseuri rctxt rctxt tag file jar urls tagfilejarurls hash map hashmap string url base package name basepackagename constants jsp default is session defaultissession default is session defaultissession jsp compilation context jspcompilationcontext string tag file tagfile tag info taginfo tag info taginfo options options servlet context servletcontext context jsp runtime context jspruntimecontext rctxt default is session defaultissession url tag file jar url tagfilejarurl tag file tagfile options context rctxt default is session defaultissession is tag file istagfile tag info taginfo tag info taginfo tag file jar url tagfilejarurl tag file jar url tagfilejarurl loader loading classes compiling jsp class loader classloader get class loader getclassloader get runtime context getruntimecontext getioprovider get class loader getclassloader input output creates output stream file param file name filename path file write output stream outputstream file i o exception ioexception error occurrs creating output stream output stream outputstream get output stream getoutputstream string file name filename i o exception ioexception get runtime context getruntimecontext getioprovider get output stream getoutputstream file name filename creates input stream file param file name filename path file read input stream inputstream file file not found exception filenotfoundexception file i o exception ioexception error occurrs creating int put intput stream input stream inputstream get input stream getinputstream string file name filename file not found exception filenotfoundexception i o exception ioexception get runtime context getruntimecontext getioprovider get input stream getinputstream file name filename removes generated file param file name filename path file remove code code file removed delete string file name filename get runtime context getruntimecontext getioprovider delete file name filename renams file file code code file renamed rename string old file name oldfilename string new file name newfilename get runtime context getruntimecontext getioprovider rename old file name oldfilename new file name newfilename output directory generate code output directory scr atch scratch directory provide options directory derived string get output dir getoutputdir output dir outputdir create output dir createoutputdir output dir outputdir create compiler object based init param data hardcoding actual compilers created compiler create compiler createcompiler jsp compiler jspcompiler jsp compiler jspcompiler jsp compiler jspcompiler jdt compiler jdtcompiler default is session defaultissession jsp compiler jspcompiler init jsp compiler jspcompiler compiler get compiler getcompiler jsp compiler jspcompiler access resources webapp full uri relative compil ations compilations context current file base string resolve relative uri resolverelativeuri string uri root directory dep erator deperator uri starts with startswith uri starts with startswith file separator uri baseuri uri resource stream relative mean ings meanings context implementation resource represented input stream inputstream java input stream inputstream get resource as stream getresourceasstream string res context get resource as stream getresourceasstream canonicaluri res url get resource getresource string res malformedurlexception context get resource getresource canonicaluri res suppress warnings suppresswarnings unchecked string get resource paths getresourcepaths string path context get resource paths getresourcepaths canonicaluri path actual path uri relative context compilation string get real path getrealpath string path context context get real path getrealpath path path returns tag file jar file map compilation unit maps tag file names jar files tag files package d packaged map pop ulated populated parsing tag file elements tld s tlds imported tag libs taglibs url get tag file jar url gettagfilejarurl string tag file tagfile tag file jar urls tagfilejarurls tag file tagfile set tag file jar url settagfilejarurl string tag file tagfile url tagfileurl tag file jar urls tagfilejarurls tag file tagfile tagfileurl returns jar file tag file jsp compilation context jspcompilationcontext created package d packaged jsp compilation context jspcompilationcontext correspond tag file tag file package d packaged jar url get tag file jar url gettagfilejarurl tag file jar url tagfilejarurl common implementation include generated string get servlet class name getservletclassname class name classname class name classname is tag file istagfile class name classname tag info taginfo get tag class name gettagclassname last index lastindex class name classname last index of lastindexof last index lastindex class name classname class name classname substring last index lastindex i sep isep jsp uri jspuri last index of lastindexof class name classname jsp util jsputil make java identifier makejavaidentifier jsp uri jspuri substring i sep isep class name classname set servlet class name setservletclassname string class name classname class name classname class name classname path jsp uri note file context rooted uri jsp file string get jsp file getjspfile jsp uri jspuri processing declared error page errorpage is error page iserrorpage is err page iserrpage set error page seterrorpage is err page iserrpage is err page iserrpage is err page iserrpage is tag file istagfile is tag file istagfile tag info taginfo get tag info gettaginfo tag info taginfo set tag info settaginfo tag info taginfo tag i tagi tag info taginfo tag i tagi compiling tag file prototype mode generate codes tag handler empty method bodies is prototype mode isprototypemode proto type mode prototypemode set prototype mode setprototypemode proto type mode prototypemode generated base user set table settable derived derived mirrors file heirachy jsp string get servlet package name getservletpackagename is tag file istagfile string class name classname tag info taginfo get tag class name gettagclassname last index lastindex class name classname last index of lastindexof string pkg name pkgname last index lastindex pkg name pkgname class name classname substring last index lastindex pkg name pkgname base package name basepackagename base package name basepackagename length get derived package name getderivedpackagename string d package name dpackagename get derived package name getderivedpackagename d package name dpackagename length base package name basepackagename base package name basepackagename get derived package name getderivedpackagename string get derived package name getderivedpackagename derived package name derivedpackagename i sep isep jsp uri jspuri last index of lastindexof derived package name derivedpackagename i sep isep jsp util jsputil make java package makejavapackage jsp uri jspuri substring i sep isep derived package name derivedpackagename servlet generated set servlet package name setservletpackagename string servlet package name servletpackagename base package name basepackagename servlet package name servletpackagename full path java file servlet generated string get servlet java file name getservletjavafilename servlet java file name servletjavafilename servlet java file name servletjavafilename get output dir getoutputdir get servlet class name getservletclassname java servlet java file name servletjavafilename hold options object context options get options getoptions options servlet context servletcontext get servlet context getservletcontext context jsp runtime context jspruntimecontext get runtime context getruntimecontext rctxt path java file relative work directory string get java path getjavapath java path javapath java path javapath is tag file istagfile string tag name tagname tag info taginfo get tag class name gettagclassname java path javapath tag name tagname replace java java path javapath get servlet package name getservletpackagename replace get servlet class name getservletclassname java java path javapath string get class file name getclassfilename class file name classfilename class file name classfilename get output dir getoutputdir get servlet class name getservletclassname class file name classfilename content type jsp content type includes content type encoding string get content type getcontenttype content type contenttype set content type setcontenttype string content type contenttype content type contenttype content type contenttype servlet generated servlet writer servletwriter get writer getwriter writer set writer setwriter servlet writer servletwriter writer writer writer location tld taglib uri array strings element denotes real path tld path tld points jar file element denotes tld entry jar file returns uri tag library exposed web application string get tld location gettldlocation string uri jasper exception jasperexception string location get options getoptions get tld locations cache gettldlocationscache get location getlocation uri location keeping generated code keep generated keepgenerated get options getoptions get keep generated getkeepgenerated compile reload jasper exception jasperexception compile compiler create compiler createcompiler remove generated files removegeneratedfiles compile jasper exception jasperexception i o exception ioexception ioe jasper exception jasperexception jasper exception jasperexception localizer get message getmessage jsp error unable compile ioe exception jasper exception jasperexception jasper exception jasperexception localizer get message getmessage jsp error unable compile clean manipulating load jasper exception jasperexception string is tag file istagfile tag info taginfo get tag class name gettagclassname get servlet package name getservletpackagename get servlet class name getservletclassname servlet class servletclass get class loader getclassloader load class loadclass servlet class servletclass class not found exception classnotfoundexception cex jasper exception jasperexception localizer get message getmessage jsp error unable load cex exception jasper exception jasperexception localizer get message getmessage jsp error unable compile methods check output dir checkoutputdir get output dir getoutputdir make output dir makeoutputdir get runtime context getruntimecontext getioprovider mkdirs output dir outputdir create output dir createoutputdir string path is tag file istagfile string tag name tagname tag info taginfo get tag class name gettagclassname path tag name tagname replace path path substring path last index of lastindexof path get servlet package name getservletpackagename replace append servlet tag handler path scr atch scratch dir output dir outputdir options get scratch dir getscratchdir file separator path file separator make output dir makeoutputdir illegal state exception illegalstateexception localizer get message getmessage jsp error output folder outputfolder is path separator ispathseparator string canonicaluri string string buffer stringbuffer result string buffer stringbuffer len length pos pos len char at charat pos is path separator ispathseparator pos len is path separator ispathseparator char at charat pos pos pos len char at charat pos single dot path pos len char at charat pos directory path foo bar foo bar pos pos len is path separator ispathseparator char at charat pos pos separator pos separatorpos result length separator pos separatorpos is path separator ispathseparator result char at charat separator pos separatorpos separator pos separatorpos separator pos separatorpos result set length setlength separator pos separatorpos result append pos result to string tostring