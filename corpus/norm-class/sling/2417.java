licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest java io exception ioexception java util hash map hashmap java util map org apache commons http client httpclient http exception httpexception org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling commons testing int egration integration http test base httptestbase org apache sling servlets post sling post constants slingpostconstants version info servlet test versioninfoservlettest http test base httptestbase string test base path sling tests string config servlet http base url system console config mgr configmgr org apache sling servlets impl version version info servlet versioninfoservlet string post url posturl map string string params override set up setup exception set up setup post url posturl http base url test base path system current time millis currenttimemillis params hash map hashmap string string params jcr mixin types mixintypes mix version able versionable string create version able node createversionablenode io exception ioexception params check in new version able nodes checkinnewversionablenodes string location test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix params string content get content getcontent location txt content type plain assert true asserttrue node location checked content jcr is checked out ischeckedout location test disabled servlet testdisabledservlet io exception ioexception json exception jsonexception interrupted exception interruptedexception delete configuration deleteconfiguration wait until sling is stable waituntilslingisstable get content getcontent create version able node createversionablenode json content type html test standard versions list teststandardversionslist io exception ioexception json exception jsonexception interrupted exception interruptedexception create configuration createconfiguration wait until sling is stable waituntilslingisstable json object jsonobject versions json object jsonobject get content getcontent create version able node createversionablenode json content type json assert true asserttrue expecting versions subtree versions versions assert true asserttrue expecting root version versions getjsonobject versions jcr root version rootversion assert true asserttrue expecting version versions getjsonobject versions json object jsonobject one zero onezero versions getjsonobject versions getjsonobject assert true asserttrue expecting empty creation one zero onezero created to string tostring length assert equals assertequals expecting success ors successors one zero onezero getjsonarray success ors successors length assert equals assertequals expecting root version predecessor jcr root version rootversion one zero onezero getjsonarray predecessors get string getstring assert equals assertequals expecting labels one zero onezero getjsonarray labels length assert equals assertequals expecting base version baseversion one zero onezero get string getstring base version baseversion test harray versions list testharrayversionslist exception test detail verify output ref ormatted reformatted harray option create configuration createconfiguration wait for sling startup waitforslingstartup wait until sling is stable waituntilslingisstable json object jsonobject versions json object jsonobject get content getcontent create version able node createversionablenode harray json content type json assert true asserttrue expecting children array versions children assert equals assertequals expecting versions object versions versions getjsonarray children getjsonobject create configuration createconfiguration string selector io exception ioexception map string string properties hash map hashmap string string properties apply properties sling servlet selectors selector properties property list propertylist sling servlet selectors assert equals assertequals test client testclient post config servlet properties delete configuration deleteconfiguration io exception ioexception map string string properties hash map hashmap string string properties apply properties delete assert equals assertequals test client testclient post config servlet properties wait until sling is stable waituntilslingisstable http exception httpexception io exception ioexception interrupted exception interruptedexception thread sleep test client testclient http base url json fail sling instance fails resp ond respond status