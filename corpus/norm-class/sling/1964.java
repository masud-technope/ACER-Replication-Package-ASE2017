licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery base commons org junit assert equals assertequals org junit assert not equals assertnotequals org junit assert not null assertnotnull org junit assert null assertnull org junit assert true asserttrue org junit fail java util iterator java util java util uuid org apache sling discovery instance description instancedescription org apache sling discovery instance filter instancefilter org apache sling discovery topology event topologyevent org apache sling discovery topology event topologyevent type org apache sling discovery base setup topology helper topologyhelper org apache sling discovery commons providers default cluster view defaultclusterview org apache sling discovery commons providers default instance description defaultinstancedescription org apache sling discovery commons providers spi local cluster view localclusterview org junit test junit x junitx util private accessor privateaccessor default topology view test defaulttopologyviewtest test test force d leader change compare testforcedleaderchangecompare exception create view instance leader string sling id slingid uuid randomuuid to string tostring default topology view defaulttopologyview view topology helper topologyhelper create topology view createtopologyview uuid randomuuid to string tostring sling id slingid default instance description defaultinstancedescription topology helper topologyhelper add instance description addinstancedescription view topology helper topologyhelper create instance description createinstancedescription view get cluster views getclusterviews iterator string sling id slingid get sling id getslingid default instance description defaultinstancedescription topology helper topologyhelper add instance description addinstancedescription view topology helper topologyhelper create instance description createinstancedescription view get cluster views getclusterviews iterator string sling id slingid get sling id getslingid create view instances instance leader default topology view defaulttopologyview view topology helper topologyhelper clone topology view clonetopologyview view sling id slingid chosen leader assert not equals assertnotequals view get cluster views getclusterviews iterator get leader getleader get sling id getslingid view get cluster views getclusterviews iterator get leader getleader get sling id getslingid test compare method leader change assert true asserttrue view compare topology comparetopology view type topology changed view takes sling id slingid leader default topology view defaulttopologyview view topology helper topologyhelper clone topology view clonetopologyview view sling id slingid chosen leader assert not equals assertnotequals view get cluster views getclusterviews iterator get leader getleader get sling id getslingid view get cluster views getclusterviews iterator get leader getleader get sling id getslingid test compare method leader change assert true asserttrue view compare topology comparetopology view type topology changed test test compare local cluster sync token id testcomparelocalclustersynctokenid exception string cluster view id clusterviewid uuid randomuuid to string tostring string sling id slingid uuid randomuuid to string tostring string sync token id synctokenid uuid randomuuid to string tostring default topology view defaulttopologyview create single instance topology createsingleinstancetopology sling id slingid cluster view id clusterviewid sync token id synctokenid default topology view defaulttopologyview create single instance topology createsingleinstancetopology sling id slingid cluster view id clusterviewid sync token id synctokenid assert null assertnull compare topology comparetopology assert null assertnull compare topology comparetopology default topology view defaulttopologyview create single instance topology createsingleinstancetopology sling id slingid cluster view id clusterviewid uuid randomuuid to string tostring assert equals assertequals topology event topologyevent type topology changed compare topology comparetopology assert equals assertequals topology event topologyevent type topology changed compare topology comparetopology assert equals assertequals topology event topologyevent type topology changed compare topology comparetopology assert equals assertequals topology event topologyevent type topology changed compare topology comparetopology default topology view defaulttopologyview create single instance topology createsingleinstancetopology sling id slingid cluster view id clusterviewid assert equals assertequals topology event topologyevent type topology changed compare topology comparetopology assert equals assertequals topology event topologyevent type topology changed compare topology comparetopology assert equals assertequals topology event topologyevent type topology changed compare topology comparetopology assert equals assertequals topology event topologyevent type topology changed compare topology comparetopology default topology view defaulttopologyview create single instance topology createsingleinstancetopology sling id slingid cluster view id clusterviewid assert null assertnull compare topology comparetopology assert null assertnull compare topology comparetopology default topology view defaulttopologyview create single instance topology createsingleinstancetopology string sling id slingid string cluster view id clusterviewid string sync token id synctokenid local cluster view localclusterview cluster view clusterview local cluster view localclusterview cluster view id clusterviewid sync token id synctokenid default instance description defaultinstancedescription instance topology helper topologyhelper create instance description createinstancedescription sling id slingid cluster view clusterview default topology view defaulttopologyview default topology view defaulttopologyview set local cluster view setlocalclusterview cluster view clusterview test test compare testcompare exception default topology view defaulttopologyview new view newview topology helper topologyhelper create topology view createtopologyview uuid randomuuid to string tostring uuid randomuuid to string tostring new view newview compare topology comparetopology fail complain exception default topology view defaulttopologyview old view oldview topology helper topologyhelper clone topology view clonetopologyview new view newview assert null assertnull new view newview compare topology comparetopology old view oldview default instance description defaultinstancedescription topology helper topologyhelper create instance description createinstancedescription new view newview get cluster views getclusterviews iterator topology helper topologyhelper add instance description addinstancedescription new view newview assert equals assertequals type topology changed new view newview compare topology comparetopology old view oldview assert equals assertequals new view newview get instances getinstances size add instance description addinstancedescription longer exception add instance greater stability topology helper topologyhelper add instance description addinstancedescription new view newview assert equals assertequals new view newview get instances getinstances size topology test helper topologytesthelper add instance description addinstancedescription new view newview fail add exception old view oldview topology helper topologyhelper clone topology view clonetopologyview new view newview assert null assertnull new view newview compare topology comparetopology old view oldview default instance description defaultinstancedescription instance default instance description defaultinstancedescription new view newview get instances getinstances iterator instance set property setproperty assert equals assertequals type properties changed new view newview compare topology comparetopology old view oldview old view oldview topology helper topologyhelper clone topology view clonetopologyview new view newview assert null assertnull new view newview compare topology comparetopology old view oldview instance set property setproperty assert equals assertequals type properties changed new view newview compare topology comparetopology old view oldview old view oldview topology helper topologyhelper clone topology view clonetopologyview new view newview assert null assertnull new view newview compare topology comparetopology old view oldview instance set property setproperty assert null assertnull new view newview compare topology comparetopology old view oldview change properties instance modify instance cluster iterator instance description instancedescription new view newview get instances getinstances iterator default instance description defaultinstancedescription first instance firstinstance default instance description defaultinstancedescription assert not null assertnotnull first instance firstinstance default instance description defaultinstancedescription second instance secondinstance default instance description defaultinstancedescription assert not null assertnotnull second instance secondinstance first instance firstinstance set property setproperty default cluster view defaultclusterview cluster default cluster view defaultclusterview uuid randomuuid to string tostring private accessor privateaccessor set field setfield second instance secondinstance cluster view clusterview cluster add instance description addinstancedescription second instance secondinstance assert equals assertequals type topology changed new view newview compare topology comparetopology old view oldview test test find testfind exception default topology view defaulttopologyview new view newview topology helper topologyhelper create topology view createtopologyview uuid randomuuid to string tostring uuid randomuuid to string tostring topology helper topologyhelper create and add instance description createandaddinstancedescription new view newview new view newview get cluster views getclusterviews iterator new view newview find instances findinstances fail complain illegal argument exception illegalargumentexception iae default instance description defaultinstancedescription topology helper topologyhelper create and add instance description createandaddinstancedescription new view newview new view newview get cluster views getclusterviews iterator topology helper topologyhelper create and add instance description createandaddinstancedescription new view newview new view newview get cluster views getclusterviews iterator assert equals assertequals new view newview find instances findinstances instance filter instancefilter accept instance description instancedescription instance size assert equals assertequals new view newview find instances findinstances instance filter instancefilter accept instance description instancedescription instance instance get sling id getslingid equals get sling id getslingid size assert equals assertequals new view newview find instances findinstances instance filter instancefilter accept instance description instancedescription instance instance is leader isleader size assert equals assertequals new view newview find instances findinstances instance filter instancefilter accept instance description instancedescription instance size test test get instances testgetinstances exception default topology view defaulttopologyview new view newview topology helper topologyhelper create topology view createtopologyview uuid randomuuid to string tostring uuid randomuuid to string tostring instance description instancedescription instances new view newview get instances getinstances assert not null assertnotnull instances instances remove instances iterator fail list modifiable exception