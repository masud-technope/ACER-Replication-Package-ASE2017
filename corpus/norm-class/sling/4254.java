licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling servlets post impl helper java math big decimal bigdecimal java util array list arraylist java util calendar java util hash map hashmap java util list java util map javax jcr node javax jcr property javax jcr property type propertytype javax jcr repository exception repositoryexception javax jcr session javax jcr javax jcr value factory valuefactory javax jcr node type nodetype node type nodetype javax jcr node type nodetype property definition propertydefinition org apache sling api resource modifiable value map modifiablevaluemap org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling servlets post modification org apache sling servlets post sling post constants slingpostconstants sets property node cases specific type last modified lastmodified empty stored current sling property value handler slingpropertyvaluehandler def ins defins map auto properties map string auto type autotype auto props hash map hashmap string auto type autotype auto props created auto type autotype created auto props created by createdby auto type autotype created auto props jcr created auto type autotype created auto props jcr created by createdby auto type autotype created auto props last modified lastmodified auto type autotype modified auto props last modified by lastmodifiedby auto type autotype modified auto props jcr last modified lastmodified auto type autotype modified auto props jcr last modified by lastmodifiedby auto type autotype modified post processor list modification date parser dateparser date parser dateparser reference parser referenceparser reference parser referenceparser current properties request calendar calendar get instance getinstance hard coding weakreference property type propertytype don depend jcr api constant property type weakreference constructs proper t propert handler sling property value handler slingpropertyvaluehandler date parser dateparser date parser dateparser reference parser referenceparser reference parser referenceparser list modification date parser dateparser date parser dateparser reference parser referenceparser reference parser referenceparser auto type autotype property auto type autotype get auto type getautotype string property name propertyname auto props property name propertyname property definition propertydefinition search property definition searchpropertydefinition node type nodetype node type nodetype string node type nodetype get property definitions getpropertydefinitions property definition propertydefinition node type nodetype get property definitions getpropertydefinitions get name getname equals includes javadoc link node type nodetype get property definitions getpropertydefinitions property definition propertydefinition search property definition searchpropertydefinition node node string repository exception repositoryexception property definition propertydefinition result search property definition searchpropertydefinition node get primary node type getprimarynodetype result node get mixin node types getmixinnodetypes node type nodetype node get mixin node types getmixinnodetypes result search property definition searchpropertydefinition result result result property node automatic values user field html testing xmp input type hidden created input type hidden last modified lastmodified input type hidden created by createdby input type hidden last modified by lastmodifiedby xmp param parent parent node param prop request property repository exception repositoryexception repository error occurs set property setproperty resource parent request property requestproperty prop repository exception repositoryexception persistence exception persistenceexception modifiable mod modifiable mod resource parent mod node parent adapt to adaptto node mod value map valuemap parent adapt to adaptto modifiable value map modifiablevaluemap mod value map valuemap persistence exception persistenceexception resource parent get path getpath modifiable string prop get name getname prop provides value providesvalue user don mess set property as is setpropertyasis mod prop auto props contains key containskey check jcr resource check node type mod node property definition propertydefinition search property definition searchpropertydefinition mod node sling auto created autocreated check required nodes mod node is new isnew is auto created isautocreated is protected isprotected avoid collision properties is new isnew mod node mod node is new isnew get auto type getautotype created is new isnew set current date setcurrentdate mod created is new isnew set current user setcurrentuser mod modified set current date setcurrentdate mod modified set current user setcurrentuser mod magic field set property as is setpropertyasis mod prop sets property param parent parent node param property repository exception repositoryexception repository error occurs set current date setcurrentdate modifiable parent string repository exception repositoryexception persistence exception persistenceexception remove property if exists removepropertyifexists parent parent value map valuemap add modification on modified onmodified parent resource get path getpath property current user param parent parent node param property repository exception repositoryexception repository error occurs set current user setcurrentuser modifiable parent string repository exception repositoryexception persistence exception persistenceexception remove property if exists removepropertyifexists parent string user parent resource get resource resolver getresourceresolver get user d getuserid parent value map valuemap user add modification on modified onmodified parent resource get path getpath removes property parent node exists mandatory property param parent parent node param property remove path property removed code code removed repository exception repositoryexception repository error occurs string remove property if exists removepropertyifexists modifiable parent string repository exception repositoryexception persistence exception persistenceexception parent value map valuemap contains key containskey parent node property prop parent node get property getproperty prop get definition getdefinition is mandatory ismandatory string path prop get path getpath prop remove path parent value map valuemap remove parent resource get path getpath property processing type hints param parent parent node param prop request property repository exception repositoryexception repository error occurs set property as is setpropertyasis modifiable parent request property requestproperty prop repository exception repositoryexception persistence exception persistenceexception string values prop get string values getstringvalues values values length values length single empty string remove existing property remove property removeproperty parent prop values length create prop clear existing clear property clearproperty parent prop pat ching patching simply update list patch operations prop is patch ispatch values patch parent prop get name getname values values multi value multivalue is multi value ismultivalue parent prop values type get type gettype parent prop multi value multivalue converting single multi props requires deleting remove if single value property removeifsinglevalueproperty parent prop session parent resource get resource resolver getresourceresolver adapt to adaptto session value factory valuefactory val fac valfac get value factory getvaluefactory type property type propertytype store as date storeasdate parent prop get name getname values multi value multivalue val fac valfac is reference property type isreferencepropertytype type store as reference storeasreference parent prop get name getname values type multi value multivalue val fac valfac store parent prop get name getname values type multi value multivalue patches multi property add remove operations string patch modifiable parent string string values repository exception repositoryexception persistence exception persistenceexception res trictive restrictive actions avoid touching elements modified add remove patch operations foo occurs existing array touched times foo list real list string old values oldvalues array list arraylist string parent value map valuemap contains key containskey parent node property parent node get property getproperty patch multi props get definition getdefinition is multiple ismultiple get values getvalues old values oldvalues add get string getstring string set values setvalues parent value map valuemap string set values setvalues string set values setvalues old values oldvalues add modified string values length char at charat string val substring sling post constants slingpostconstants patch add old values oldvalues val old values oldvalues add val modified sling post constants slingpostconstants patch remove old values oldvalues remove val modified modified old values oldvalues to array toarray string old values oldvalues size is reference property type isreferencepropertytype property type propertytype property type propertytype property type propertytype reference property type propertytype property type weakreference is weak reference isweakreference property type propertytype property type propertytype property type weakreference returns property type property defined explicit type hint request simply type existing property get type gettype modifiable parent request property requestproperty prop repository exception repositoryexception explicit type hint typehint type property type propertytype undefined prop get type hint gettypehint type property type propertytype value from name valuefromname prop get type hint gettypehint exception string values prop get string values getstringvalues type property type propertytype undefined values values length parent node parent node has property hasproperty prop get name getname type parent node get property getproperty prop get name getname get type gettype type returns property handled multi value d valued is multi value ismultivalue modifiable parent request property requestproperty prop string values repository exception repositoryexception multiple values values values length type hint typehint prop has multi value type hint hasmultivaluetypehint patch method requires multi prop is patch ispatch request check current jcr property definition parent node parent node has property hasproperty prop get name getname parent node get property getproperty prop get name getname get definition getdefinition is multiple ismultiple object parent value map valuemap prop get name getname get class getclass is array isarray clears property sets empty string single properties removes multi properties clear property clearproperty modifiable parent request property requestproperty prop repository exception repositoryexception persistence exception persistenceexception parent value map valuemap contains key containskey prop get name getname parent node parent node get property getproperty prop get name getname get definition getdefinition is multiple ismultiple existing property multi value d valued delete string remove path removepath remove property if exists removepropertyifexists parent prop get name getname remove path removepath add modification on deleted ondeleted remove path removepath add modification on modified onmodified parent node set property setproperty prop get name getname get path getpath parent value map valuemap prop get name getname add modification on modified onmodified parent resource get path getpath prop get name getname removes property exists remove property removeproperty modifiable parent request property requestproperty prop repository exception repositoryexception persistence exception persistenceexception string remove path removepath remove property if exists removepropertyifexists parent prop get name getname remove path removepath add modification on deleted ondeleted remove path removepath removes property exists single value d valued remove if single value property removeifsinglevalueproperty modifiable parent request property requestproperty prop repository exception repositoryexception persistence exception persistenceexception parent value map valuemap contains key containskey prop get name getname parent node parent node get property getproperty prop get name getname get definition getdefinition is multiple ismultiple existing property single value d valued delete setting multi variation string remove path removepath remove property if exists removepropertyifexists parent prop get name getname remove path removepath add modification on deleted ondeleted remove path removepath string remove path removepath remove property if exists removepropertyifexists parent prop get name getname remove path removepath add modification on deleted ondeleted remove path removepath stores property parse string link request property requestproperty parsing successful l successfull property changed store as date storeasdate modifiable parent string string values multi value d multivalued value factory valuefactory val fac valfac repository exception repositoryexception persistence exception persistenceexception multi value d multivalued array date parser dateparser parse values val fac valfac array parent node parent node set property setproperty array calendar dates calendar array length array dates get date getdate parent value map valuemap dates add modification on modified onmodified parent resource get path getpath values length calendar date parser dateparser parse values parent value map valuemap add modification on modified onmodified parent resource get path getpath stores property reference parse reference string link request property requestproperty parsing successful l successfull property changed store as reference storeasreference modifiable parent string string values type multi value d multivalued value factory valuefactory val fac valfac repository exception repositoryexception persistence exception persistenceexception parent node todo persistence exception persistenceexception resource parent resource get path getpath support reference properties multi value d multivalued array reference parser referenceparser parse values val fac valfac is weak reference isweakreference type array add modification on modified onmodified parent node set property setproperty array get path getpath values length reference parser referenceparser parse values val fac valfac is weak reference isweakreference type add modification on modified onmodified parent node set property setproperty get path getpath stores property string string explicit type multi single store modifiable parent string string values type multi value d multivalued repository exception repositoryexception persistence exception persistenceexception parent node property multi value d multivalued type property type propertytype undefined parent node set property setproperty values parent node set property setproperty values type values length type property type propertytype undefined parent node set property setproperty values parent node set property setproperty values type add modification on modified onmodified get path getpath multi value d multivalued parent value map valuemap to java object tojavaobject values type add modification on modified onmodified parent resource get path getpath values length parent value map valuemap to java object tojavaobject values type add modification on modified onmodified parent resource get path getpath converts object to java object tojavaobject string type is empty isempty trim length type property type propertytype decimal is empty isempty big decimal bigdecimal big decimal bigdecimal property type propertytype is empty isempty value of valueof property type propertytype is empty isempty value of valueof property type propertytype is empty isempty value of valueof fallback converts object to java object tojavaobject string values type object result object values length values length values result to java object tojavaobject values type result defines auto property behavior enum auto type autotype created created modified modified modifiable resource resource modifiable value map modifiablevaluemap value map valuemap node node