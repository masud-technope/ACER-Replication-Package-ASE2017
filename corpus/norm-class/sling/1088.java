licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling core impl servlet java io exception ioexception java print writer printwriter java util dictionary java util hash map hashmap java util list java util map javax servlet servlet exception servletexception javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org apache commons lang string escape utils stringescapeutils org apache commons lang string utils stringutils org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations configuration policy configurationpolicy org apache felix scr annotations deactivate org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations service org apache sling commons osgi properties util propertiesutil org apache sling api result org apache sling api result status org apache sling api execution health check execution options healthcheckexecutionoptions org apache sling api execution health check execution result healthcheckexecutionresult org apache sling api execution health check executor healthcheckexecutor org osgi service component component context componentcontext org osgi service http http service httpservice org slf logger org slf logger factory loggerfactory servlet triggers health check executor http parameters tags health check tags account format html json json p jsonp include debug includedebug debug messages result log included callback json p jsonp callback function defaults process health check results processhealthcheckresults http status httpstatus health check status http status mapping format http status httpstatus warn critical health check error health check status values code http status httpstatus critical result warn critical health check error requests answer http status combination load balance rs balancers note servlet registers level http service httpservice processed sling performance dependencies authentication required progress tracker service component label health check executor servlet description serial izes serializes health check html json format policy configuration policy configurationpolicy require metatype health check executor servlet healthcheckexecutorservlet http servlet httpservlet serialversionuid logger log logger factory loggerfactory get logger getlogger health check executor servlet healthcheckexecutorservlet param string string description param string string description param param tags param tags comma separated list health checks tags select path system health tag tag json param param format param format output format html json json p jsonp txt extension url overrides param param http status param http status httpstatus http result code critical status result critical critical health check error specific http status param param combine tags param combine tags with or combinetagswithor combine tags active combine param param force instant execution param force ins tant execution forceinstantexecution for ces forces ins tant instant execution executing async health checks circumventing cache health check executor healthcheckexecutor param param override global timeout param timeout msec timeout status returned health check running period overrides health check executor healthcheckexecutor timeout param param include debug param hc debug hcdebug include debug output health checks string jsonp callback process health check results processhealthcheckresults param param jsonp callback param callback jsonp callback function defaults jsonp callback param param list param tags param format param http status param combine tags param force instant execution param override global timeout param include debug param jsonp callback string format html html string format json json string format jsonp json p jsonp string format txt txt string content type html text html string content type txt text plain string content type json application json string content type jsonp application java script javascript string status header health string cache control key cache control string cache control cache string servlet path system health string property servlet path servlet path servletpath property property servlet path label path description servlet path defaults servlet path order accessible apache int ernet internet servlet path string servlet path servletpath string property disabled disabled property property disabled label disabled description disable servlet required security reasons bool value boolvalue disabled reference http service httpservice http service httpservice reference health check executor healthcheckexecutor health check executor healthcheckexecutor reference result html serializer resulthtmlserializer html serializer htmlserializer reference result json serializer resultjsonserializer json serializer jsonserializer reference result txt serializer resulttxtserializer txt serializer txtserializer activate activate component context componentcontext context dictionary properties context get properties getproperties servlet path servletpath string properties property servlet path disabled properties util propertiesutil to boolean toboolean properties property disabled disabled log info health check servlet disabled configuration log debug registering path get class getclass get simple name getsimplename servlet path servletpath http service httpservice register servlet registerservlet servlet path servletpath exception log error register health check servlet deactivate deactivate component context componentcontext component context componentcontext disabled log debug unregistering path servlet path servletpath http service httpservice unregister servlet path servletpath exception log error unregister health check servlet override do get doget http servlet request httpservletrequest request http servlet response httpservletresponse response servlet exception servletexception io exception ioexception string tags str tagsstr string utils stringutils default if empty defaultifempty string utils stringutils substring before last substringbeforelast request get path info getpathinfo replace string utils stringutils is blank isblank tags str tagsstr path parameter tags str tagsstr string utils stringutils default if empty defaultifempty request get parameter getparameter param tags string tags tags str tagsstr split string format string utils stringutils substring after last substringafterlast request get path info getpathinfo string utils stringutils is blank isblank format extension parameter format string utils stringutils default if empty defaultifempty request get parameter getparameter param format format html include debug includedebug value of valueof request get parameter getparameter param include debug map result status integer status mapping statusmapping request get parameter getparameter param http status get status mapping getstatusmapping request get parameter getparameter param http status health check execution options healthcheckexecutionoptions options health check execution options healthcheckexecutionoptions options set combine tags with or setcombinetagswithor value of valueof string utils stringutils default string defaultstring request get parameter getparameter param combine tags options set force ins tant execution setforceinstantexecution value of valueof request get parameter getparameter param force instant execution string override global timeout val overrideglobaltimeoutval request get parameter getparameter param override global timeout string utils stringutils is numeric isnumeric override global timeout val overrideglobaltimeoutval options set override global timeout setoverrideglobaltimeout integer value of valueof override global timeout val overrideglobaltimeoutval list health check execution result healthcheckexecutionresult execution results executionresults health check executor healthcheckexecutor execute options tags result status most severe status mostseverestatus result status debug health check execution result healthcheckexecutionresult execution result executionresult execution results executionresults status status execution result executionresult get health check result gethealthcheckresult get status getstatus status ordinal most severe status mostseverestatus ordinal most severe status mostseverestatus status result overall result overallresult result most severe status mostseverestatus status most severe status mostseverestatus send no cache headers sendnocacheheaders response status mapping statusmapping integer http status httpstatus status mapping statusmapping overall result overallresult get status getstatus response set status setstatus http status httpstatus format html equals format send html response sendhtmlresponse overall result overallresult execution results executionresults request response include debug includedebug format json equals format send json response sendjsonresponse overall result overallresult execution results executionresults response include debug includedebug format jsonp equals format string json p callback jsonpcallback string utils stringutils default if empty defaultifempty request get parameter getparameter param jsonp callback jsonp callback send json response sendjsonresponse overall result overallresult execution results executionresults json p callback jsonpcallback response include debug includedebug format txt equals format send txt response sendtxtresponse overall result overallresult response response set content type setcontenttype text plain response get writer getwriter println invalid format format supported form ats formats html json json p jsonp txt send txt response sendtxtresponse result overall result overallresult http servlet response httpservletresponse response io exception ioexception response set content type setcontenttype content type txt response set character encoding setcharacterencoding utf response get writer getwriter write txt serializer txtserializer serialize overall result overallresult send json response sendjsonresponse result overall result overallresult list health check execution result healthcheckexecutionresult execution results executionresults string json p callback jsonpcallback http servlet response httpservletresponse response include debug includedebug io exception ioexception string utils stringutils is not blank isnotblank json p callback jsonpcallback response set content type setcontenttype content type jsonp response set content type setcontenttype content type json response set character encoding setcharacterencoding utf string result json resultjson json serializer jsonserializer serialize overall result overallresult execution results executionresults json p callback jsonpcallback include debug includedebug print writer printwriter writer response get writer getwriter writer append result json resultjson send html response sendhtmlresponse result overall result overallresult list health check execution result healthcheckexecutionresult execution results executionresults http servlet request httpservletrequest request http servlet response httpservletresponse response include debug includedebug io exception ioexception response set content type setcontenttype content type html response set character encoding setcharacterencoding utf response set header setheader status header overall result overallresult to string tostring response get writer getwriter append html serializer htmlserializer serialize overall result overallresult execution results executionresults get html help text gethtmlhelptext include debug includedebug send no cache headers sendnocacheheaders http servlet response httpservletresponse response response set header setheader cache control key cache control string get html help text gethtmlhelptext string builder stringbuilder string builder stringbuilder append supported url parameters param param list append append append append string escape utils stringescapeutils escape html escapehtml description append to string tostring map result status integer get status mapping getstatusmapping string mapping str mappingstr servlet exception servletexception map result status integer status mapping statusmapping hash map hashmap result status integer string bits mapping str mappingstr split string bit bits string tuple bit split status mapping statusmapping result status value of valueof tuple integer parse int parseint tuple exception servlet exception servletexception invalid parameter http status httpstatus mapping str mappingstr status mapping statusmapping contains key containskey result status status mapping statusmapping result status status mapping statusmapping contains key containskey result status warn status mapping statusmapping result status warn status mapping statusmapping result status status mapping statusmapping contains key containskey result status critical status mapping statusmapping result status critical status mapping statusmapping result status warn status mapping statusmapping contains key containskey result status health check error status mapping statusmapping result status health check error status mapping statusmapping result status critical status mapping statusmapping