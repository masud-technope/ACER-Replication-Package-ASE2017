licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery impl setup java util properties java util concurrent concurrent linked queue concurrentlinkedqueue javax jcr repository exception repositoryexception javax jcr observation event javax jcr observation event iterator eventiterator javax jcr observation event listener eventlistener org apache sling api sling constants slingconstants org apache sling discovery base setup virtual instance virtualinstance org apache sling discovery impl cluster voting voting handler votinghandler org slf logger org slf logger factory loggerfactory voting event listener votingeventlistener event listener eventlistener logger logger logger factory loggerfactory get logger getlogger get class getclass virtual instance virtualinstance instance voting handler votinghandler voting handler votinghandler stopped string sling id slingid concurrent linked queue concurrentlinkedqueue org osgi service event event concurrent linked queue concurrentlinkedqueue org osgi service event event voting event listener votingeventlistener virtual instance virtualinstance instance voting handler votinghandler voting handler votinghandler string sling id slingid instance instance voting handler votinghandler voting handler votinghandler sling id slingid sling id slingid thread thread runnable override stopped org osgi service event event poll thread sleep logger debug async delivering event listener sling id slingid stopped stopped event voting handler votinghandler handle event handleevent exception logger error async exception set name setname voting event listener votingeventlistener instance get debug name getdebugname set daemon setdaemon start logger debug stop ping stopping listener sling id slingid sling id slingid stopped on event onevent event iterator eventiterator events stopped logger info on event onevent listener sling id slingid late events stopped events has next hasnext stopped events has next hasnext event event events next event nextevent properties properties properties string topic event get type gettype event node topic sling constants slingconstants topic resource event get type gettype event node moved topic sling constants slingconstants topic resource changed event get type gettype event node removed topic sling constants slingconstants topic resource removed topic sling constants slingconstants topic resource changed properties path event get path getpath org osgi service event event osgi event osgievent org osgi service event event topic properties logger debug on event onevent enqueuing event listener sling id slingid stopped stopped event osgi event osgievent add osgi event osgievent repository exception repositoryexception logger warn repository exception repositoryexception stopped logger info on event onevent listener stopped sling id slingid pending events events has next hasnext throwable instance dump repo dumprepo exception logger info on event onevent dump cat ching catching throwable logger error throwable occurred on event onevent