licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery impl common java util hash set hashset java util iterator java util org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource value map valuemap org apache sling discovery impl config org slf logger org slf logger factory loggerfactory dao view stored repository view string view property cluster cluster id clusterid string view property cluster defined cluster id defined at clusteriddefinedat string view property cluster defined cluster id defined by clusteriddefinedby logger avoid frequent initialization cluster view resource clusterviewresource logger logger logger factory loggerfactory get logger getlogger view underlying resource represents view resource resource view resource resource resource illegal argument exception illegalargumentexception resource resource resource returns underlying resource view underlying resource view resource get resource getresource resource override equals object obj obj obj view view view obj get resource getresource get path getpath equals get resource getresource get path getpath override hash code hashcode get resource getresource get path getpath hash code hashcode returns view view string get view id getviewid value map valuemap props get resource getresource adapt to adaptto value map valuemap props avoid npe logger warn get view id getviewid properties get resource getresource get path getpath resource get resource getresource get name getname get resource getresource get name getname string cluster id clusterid props view property cluster string cluster id clusterid cluster id clusterid length cluster id clusterid get resource getresource get name getname checks view matches live view represented cluster instances clusterinstances resource param cluster instances res clusterinstancesres cluster instances clusterinstances resource check view matches details differs don match exception thrown view properly matched members resource doesn exist runtime exception runtimeexception occurs string matches live view matchesliveview resource cluster instances res clusterinstancesres config config exception matches view helper viewhelper determine live instances determineliveinstances cluster instances res clusterinstancesres config compare view sling ids slingids param view sling ids slingids compare view view matches sling ids slingids exception thrown view properly matched members resource doesn exist runtime exception runtimeexception occurs string matches string view exception string view copy viewcopy hash set hashset string view resource members get resource getresource get child getchild members members exception members resource iterator resource members get children getchildren iterator string buffer stringbuffer string buffer stringbuffer success has next hasnext resource a member res amemberres length append view copy viewcopy remove a member res amemberres get name getname success append a member res amemberres get name getname append fine a member res amemberres get name getname view copy viewcopy empty represent match view copy viewcopy size success length append string newly added newlyadded view copy viewcopy append newly added newlyadded success to string tostring runtime exception runtimeexception logger info matches compare exception runtime exception runtimeexception delete view repository remove log error on failure logerroronfailure resource resolver resourceresolver resource resolver resourceresolver get resource getresource get resource resolver getresourceresolver resource resolver resourceresolver delete get resource getresource resource resolver resourceresolver commit persistence exception persistenceexception log error on failure logerroronfailure logger error remove remove node logger info remove remove node resource resolver resourceresolver refresh