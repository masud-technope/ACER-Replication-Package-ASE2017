licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jackrabbit user manager usermanager impl resource java security principal java util array list arraylist java util iterator java util list javax jcr repository exception repositoryexception javax jcr session javax servlet http http servlet request httpservletrequest org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations service org apache jackrabbit api security principal principal iterator principaliterator org apache jackrabbit api security principal principal manager principalmanager org apache jackrabbit api security user authorizable org apache jackrabbit api security user user manager usermanager org apache sling api sling exception slingexception org apache sling api resource resource org apache sling api resource resource provider resourceprovider org apache sling api resource resource resolver resourceresolver org apache sling api resource synthetic resource syntheticresource org apache sling jcr base util access control util accesscontrolutil org slf logger org slf logger factory loggerfactory resource provider implementation jackrabbit user manager usermanager resources component metatype label authorizable resource provider resourceprovider description authorizable resource provider resourceprovider description service resource provider resourceprovider properties property service description resource provider implementation user manager usermanager resources property service vendor apache software foundation property provider roots system user manager usermanager authorizable resource provider authorizableresourceprovider resource provider resourceprovider log logger log logger factory loggerfactory get logger getlogger get class getclass string system user manager path system user manager usermanager string system user manager user path system user manager path user string system user manager group path system user manager path group string system user manager user prefix system user manager user path string system user manager group prefix system user manager group path javadoc org apache sling api resource resource provider resourceprovider get resource getresource org apache sling api resource resource resolver resourceresolver javax servlet http http servlet request httpservletrequest java lang string resource get resource getresource resource resolver resourceresolver resource resolver resourceresolver http servlet request httpservletrequest request string path get resource getresource resource resolver resourceresolver path javadoc org apache sling api resource resource provider resourceprovider get resource getresource org apache sling api resource resource resolver resourceresolver java lang string resource get resource getresource resource resolver resourceresolver resource resolver resourceresolver string path handle resources virtual container resources path equals system user manager path synthetic resource syntheticresource resource resolver resourceresolver path sling user manager usermanager path equals system user manager user path synthetic resource syntheticresource resource resolver resourceresolver path sling users path equals system user manager group path synthetic resource syntheticresource resource resolver resourceresolver path sling groups principal id principalid segment prefix string pid path starts with startswith system user manager user prefix pid path substring system user manager user prefix length path starts with startswith system user manager group prefix pid path substring system user manager group prefix length pid pid index of indexof bogus path bail session session resource resolver resourceresolver adapt to adaptto session session user manager usermanager user manager usermanager access control util accesscontrolutil get user manager getusermanager session user manager usermanager authorizable authorizable user manager usermanager get authorizable getauthorizable pid authorizable wraps authorizable resource authorizableresource authorizable resource resolver resourceresolver path repository exception repositoryexception sling exception slingexception error authorizable principal pid javadoc org apache sling api resource resource provider resourceprovider list children listchildren org apache sling api resource resource iterator resource list children listchildren resource parent parent null pointer exception nullpointerexception parent string path parent get path getpath resource resolver resourceresolver resource resolver resourceresolver parent get resource resolver getresourceresolver handle children system user manager usermanager system user manager path equals path list resource resources array list arraylist resource resource resolver resourceresolver resources add get resource getresource resource resolver resourceresolver system user manager user path resources add get resource getresource resource resolver resourceresolver system user manager group path resources iterator search type searchtype system user manager user path equals path search type searchtype principal manager principalmanager search type group system user manager group path equals path search type searchtype principal manager principalmanager search type group search type searchtype principal iterator principaliterator principals session session resource resolver resourceresolver adapt to adaptto session session principal manager principalmanager principal manager principalmanager access control util accesscontrolutil get principal manager getprincipalmanager session principals principal manager principalmanager get principals getprincipals search type searchtype principals children iterator childreniterator parent principals repository exception repositoryexception sling exception slingexception error listing children resource parent get path getpath children iterator childreniterator iterator resource principal iterator principaliterator principals resource parent children iterator childreniterator resource parent principal iterator principaliterator principals parent parent principals principals has next hasnext principals has next hasnext resource principal next principal nextprincipal principals next principal nextprincipal resource resolver resourceresolver resource resolver resourceresolver parent get resource resolver getresourceresolver resource resolver resourceresolver session session resource resolver resourceresolver adapt to adaptto session session user manager usermanager user manager usermanager access control util accesscontrolutil get user manager getusermanager session user manager usermanager authorizable authorizable user manager usermanager get authorizable getauthorizable next principal nextprincipal get name getname authorizable string path authorizable is group isgroup path system user manager group prefix next principal nextprincipal get name getname path system user manager user prefix next principal nextprincipal get name getname authorizable resource authorizableresource authorizable resource resolver resourceresolver path repository exception repositoryexception log error exception authorizable resource remove unsupported operation exception unsupportedoperationexception