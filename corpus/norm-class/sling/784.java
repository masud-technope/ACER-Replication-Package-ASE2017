licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting sightly impl filter java util regex matcher java util regex pattern org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations service org apache sling scripting sightly sightly exception sightlyexception org apache sling scripting sightly extension runtime extension runtimeextension org apache sling scripting sightly impl compiler expression expression org apache sling scripting sightly impl compiler expression expression node expressionnode org apache sling scripting sightly impl compiler expression node runtime call runtimecall org apache sling scripting sightly impl engine runtime render context impl rendercontextimpl org apache sling scripting sightly impl utils render utils renderutils org apache sling scripting sightly render render context rendercontext implementation format filter amp runtime support component service filter runtime extension runtimeextension properties property runtime extension runtimeextension format filter formatfilter format function format filter formatfilter filter component filtercomponent runtime extension runtimeextension string format option format string format function format pattern placeholder regex pattern compile override expression apply expression expression expression context expressioncontext expression context expressioncontext compile time runtime function expression contains option containsoption format option expression context expressioncontext expression context expressioncontext plugin data sly expression context expressioncontext expression context expressioncontext plugin data sly template expression context expressioncontext expression context expressioncontext plugin data sly call expression expression node expressionnode arg node argnode expression get option getoption format option expression node expressionnode for matted node formattednode runtime call runtimecall format function expression get root getroot arg node argnode expression with node withnode for matted node formattednode with removed options withremovedoptions format option override object call render context rendercontext render context rendercontext object arguments arguments length sightly exception sightlyexception format function called arguments string source render utils renderutils to string tostring arguments object params decode params decodeparams arguments replace source params object decode params decodeparams object param obj paramobj render utils renderutils is collection iscollection param obj paramobj render utils renderutils to collection tocollection param obj paramobj to array toarray object param obj paramobj string replace string source object params matcher matcher placeholder regex matcher source string builder stringbuilder builder string builder stringbuilder last pos lastpos matched matched matched matcher find matched param index paramindex placeholder index placeholderindex matcher group string replacement param params param index paramindex match start matchstart matcher start match end matchend matcher builder append source last pos lastpos match start matchstart append replacement last pos lastpos match end matchend builder append source last pos lastpos source length builder to string tostring string param object params params length render utils renderutils to string tostring params placeholder index placeholderindex string placeholder integer parse int parseint placeholder substring placeholder length