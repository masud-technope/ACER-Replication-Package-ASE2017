licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting jsp jasper compiler java byte array output stream bytearrayoutputstream java io exception ioexception java input stream inputstream java output stream outputstream java output stream writer outputstreamwriter java print writer printwriter java unsupported encoding exception unsupportedencodingexception java util hash map hashmap java util iterator java util map org apache sling scripting jsp jasper jasper exception jasperexception org apache sling scripting jsp jasper jsp compilation context jspcompilationcontext util ities utilities gen erating generating smap data based current version jasper author jayson f alkner falkner author shawn bayern author robert field sde installer sdeinstaller author mark roth author kin man chung smap util smaputil org apache juli logging log log org apache juli logging log factory logfactory get log getlog smap util smaputil constants string smap encoding utf entry points generates smap representing current compilation context jsr param ctxt current compilation context param page nodes pagenodes current jsp smap string generate smap generatesmap jsp compilation context jspcompilationcontext ctxt node nodes page nodes pagenodes io exception ioexception scan nodes presence jasper generated classes pre scan visitor prescanvisitor ps visitor psvisitor pre scan visitor prescanvisitor page nodes pagenodes visit ps visitor psvisitor jasper exception jasperexception hash map hashmap map ps visitor psvisitor get map getmap smap generator smap generator smapgenerator smap generator smapgenerator disable reading input smap bug get real path getrealpath jsp jar bug zilla bugzilla map pings mappings sources jsp files supported todo determine input smap string smap path smappath input smap path inputsmappath ctxt get real path getrealpath ctxt get jsp file getjspfile file input smap inputsmap file smap path smappath input smap inputsmap exists embedded smap embeddedsmap sub smap subsmap sde installer sdeinstaller read whole readwhole input smap inputsmap string sub smap string subsmapstring string sub smap subsmap smap encoding add smap addsmap sub smap string subsmapstring jsp assemble info stratum jsp jsp line map jsplinemap smap stratum smapstratum smap stratum smapstratum jsp set output file name setoutputfilename unqualify ctxt get servlet java file name getservletjavafilename map node nodes evaluate nodes evaluatenodes page nodes pagenodes map ctxt get options getoptions get mapped file getmappedfile optimize line section optimizelinesection add stratum addstratum dump smap dumpsmap ctxt get class file name getclassfilename ctxt string class file name classfilename ctxt get class file name getclassfilename inner class count innerclasscount map size string smap info smapinfo string inner class count innerclasscount smap info smapinfo class file name classfilename smap info smapinfo get string getstring count iterator iter map entry set entryset iterator iter has next hasnext map entry entry map entry iter string inner class innerclass string entry get key getkey smap stratum smapstratum entry get value getvalue optimize line section optimizelinesection smap generator smapgenerator set output file name setoutputfilename unqualify ctxt get servlet java file name getservletjavafilename add stratum addstratum string inner class file name innerclassfilename class file name classfilename substring class file name classfilename index of indexof inner class innerclass dump smap dumpsmap inner class file name innerclassfilename ctxt smap info smapinfo count inner class file name innerclassfilename smap info smapinfo count get string getstring count smap info smapinfo dump smap dumpsmap smap generator smapgenerator string smap file smapfile jsp compilation context jspcompilationcontext ctxt io exception ioexception ctxt get options getoptions is smap dumped issmapdumped output stream outputstream ctxt get output stream getoutputstream smap file smapfile smap print writer printwriter print writer printwriter output stream writer outputstreamwriter smap encoding print get string getstring close close io exception ioexception ignore install smap installsmap jsp compilation context jspcompilationcontext ctxt string smap io exception ioexception smap smap length string out servlet outservlet smap sde installer sdeinstaller install ctxt out servlet outservlet smap get bytes getbytes util ities utilities returns unqualified version file path string unqualify string path path path replace path substring path last index of lastindexof string input smap path inputsmappath string path path substring path last index of lastindexof smap sde installer sdeinstaller org apache juli logging log log org apache juli logging log factory logfactory get log getlog sde installer sdeinstaller string namesde source debug extension sourcedebugextension orig sde attr sdeattr gen orig pos origpos gen pos genpos sde index sdeindex install jsp compilation context jspcompilationcontext ctxt string class file classfile smap io exception ioexception string tmp file tmpfile class file classfile tmp sde installer sdeinstaller ctxt class file classfile smap tmp file tmpfile ctxt delete class file classfile io exception ioexception class file classfile delete failed ctxt rename tmp file tmpfile class file classfile io exception ioexception tmp file tmpfile rename to renameto class file classfile failed tmp file tmpfile class file classfile sde installer sdeinstaller jsp compilation context jspcompilationcontext ctxt string in class file inclassfile sde attr sdeattr string out class file outclassfile io exception ioexception sde attr sdeattr sde attr sdeattr orig read whole readwhole ctxt in class file inclassfile gen orig length sde attr sdeattr length addsde output stream outputstream out stream outstream ctxt get output stream getoutputstream out class file outclassfile out stream outstream write gen gen pos genpos out stream outstream close read whole readwhole jsp compilation context jspcompilationcontext ctxt string input io exception ioexception input stream inputstream in stream instream ctxt get input stream getinputstream input byte array output stream bytearrayoutputstream output byte array output stream bytearrayoutputstream buffer count in stream instream read buffer output write buffer count output to byte array tobytearray in stream instream close io exception ioexception ioe addsde unsupported encoding exception unsupportedencodingexception io exception ioexception copy constant pool count pos constantpoolcountpos gen pos genpos constant pool count constantpoolcount read u readu log is debug enabled isdebugenabled log debug constant pool count constant pool count constantpoolcount write u writeu constant pool count constantpoolcount sde index sdeindex copy constant pool copyconstantpool constant pool count constantpoolcount sde index sdeindex write utf writeutf forsde sde index sdeindex constant pool count constantpoolcount constant pool count constantpoolcount random access write u randomaccesswriteu constant pool count pos constantpoolcountpos constant pool count constantpoolcount log is debug enabled isdebugenabled log debug source debug extension sourcedebugextension installed sde index sdeindex log is debug enabled isdebugenabled log debug source debug extension sourcedebugextension sde index sdeindex copy interface count interfacecount read u readu write u writeu interface count interfacecount log is debug enabled isdebugenabled log debug interface count interfacecount interface count interfacecount copy interface count interfacecount copy members copymembers copy members copymembers attr count pos attrcountpos gen pos genpos attr count attrcount read u readu write u writeu attr count attrcount log is debug enabled isdebugenabled log debug attr count attrcount attr count attrcount copy attrs copyattrs attr count attrcount attr count attrcount random access write u randomaccesswriteu attr count pos attrcountpos attr count attrcount log is debug enabled isdebugenabled log debug attr count attrcount inc remented incremented write attr for e writeattrforsde sde index sdeindex copy members copymembers count read u readu write u writeu count log is debug enabled isdebugenabled log debug members count count count access descriptor copy attr count attrcount read u readu write u writeu attr count attrcount log is debug enabled isdebugenabled log debug member attr count attr count attrcount copy attrs copyattrs attr count attrcount copy attrs copyattrs attr count attrcount sde found sdefound attr count attrcount name index nameindex read u readu don write sde name index nameindex sde index sdeindex sde found sdefound log is debug enabled isdebugenabled log debug sde attr write u writeu name index nameindex len read u readu write u writeu len copy len log is debug enabled isdebugenabled log debug attr len len sde found sdefound write attr for e writeattrforsde write u writeu write u writeu sde attr sdeattr length sde attr sdeattr length write u writeu sde attr sdeattr random access write u randomaccesswriteu pos val save pos savepos gen pos genpos gen pos genpos pos write u writeu val gen pos genpos save pos savepos read u readu orig orig pos origpos xff read u readu res read u readu res read u readu read u readu res read u readu res read u readu write u writeu val gen gen pos genpos val write u writeu val write u writeu val write u writeu val xff write u writeu val write u writeu val write u writeu val xffff copy count count gen gen pos genpos orig orig pos origpos read bytes readbytes count bytes count count bytes orig orig pos origpos bytes write bytes writebytes bytes bytes length gen gen pos genpos bytes copy constant pool copyconstantpool constant pool count constantpoolcount unsupported encoding exception unsupportedencodingexception io exception ioexception sde index sdeindex copy pool file constant pool count constantpoolcount tag read u readu write u writeu tag tag string log is debug enabled isdebugenabled log debug copying bytes copy field method interface method interfacemethod integer name and type nameandtype log is debug enabled isdebugenabled log debug copying bytes copy log is debug enabled isdebugenabled log debug copying bytes copy utf len read u readu write u writeu len utf read bytes readbytes len string str string utf utf log is debug enabled isdebugenabled log debug read attr str str equals namesde sde index sdeindex write bytes writebytes utf io exception ioexception unexpected tag tag sde index sdeindex write utf writeutf forsde len namesde length utf tag write u writeu write u writeu len len write u writeu namesde char at charat evaluate nodes evaluatenodes node nodes nodes smap stratum smapstratum hash map hashmap inner class map innerclassmap break at f breakatlf nodes visit smap gen visitor smapgenvisitor break at f breakatlf inner class map innerclassmap jasper exception jasperexception smap gen visitor smapgenvisitor node visitor smap stratum smapstratum smap break at f breakatlf hash map hashmap inner class map innerclassmap smap gen visitor smapgenvisitor smap stratum smapstratum break at f breakatlf hash map hashmap map smap break at f breakatlf break at f breakatlf inner class map innerclassmap map override visit body visitbody node jasper exception jasperexception smap stratum smapstratum smap save smapsave smap string inner class innerclass get inner class name getinnerclassname inner class innerclass smap smap stratum smapstratum inner class map innerclassmap inner class innerclass visit body visitbody smap smap save smapsave override visit node declaration jasper exception jasperexception do smap text dosmaptext override visit node expression jasper exception jasperexception do smap text dosmaptext override visit node script let scriptlet jasper exception jasperexception do smap text dosmaptext override visit node include action includeaction jasper exception jasperexception do smap dosmap visit body visitbody override visit node for ward action forwardaction jasper exception jasperexception do smap dosmap visit body visitbody override visit node get property getproperty jasper exception jasperexception do smap dosmap visit body visitbody override visit node set property setproperty jasper exception jasperexception do smap dosmap visit body visitbody override visit node use bean usebean jasper exception jasperexception do smap dosmap visit body visitbody override visit node plug in plugin jasper exception jasperexception do smap dosmap visit body visitbody override visit node custom tag customtag jasper exception jasperexception do smap dosmap visit body visitbody override visit node u ninterpreted tag uninterpretedtag jasper exception jasperexception do smap dosmap visit body visitbody override visit node jsp element jspelement jasper exception jasperexception do smap dosmap visit body visitbody override visit node jsp text jsptext jasper exception jasperexception do smap dosmap visit body visitbody override visit node name d attribute namedattribute jasper exception jasperexception visit body visitbody override visit node jsp body jspbody jasper exception jasperexception do smap dosmap visit body visitbody override visit node invoke action invokeaction jasper exception jasperexception do smap dosmap visit body visitbody override visit node do body action dobodyaction jasper exception jasperexception do smap dosmap visit body visitbody override visit node e l expression elexpression jasper exception jasperexception do smap dosmap override visit node template text templatetext jasper exception jasperexception mark mark get start getstart mark add file string file name filename mark get file getfile smap add file addfile unqualify file name filename file name filename add line info lineinfo corresponds node i input start line iinputstartline mark get line number getlinenumber i output start line ioutputstartline get begin java line getbeginjavaline i output line increment ioutputlineincrement break at f breakatlf smap add line data addlinedata i input start line iinputstartline file name filename i output start line ioutputstartline i output line increment ioutputlineincrement output additional mappings text java util array list arraylist extra smap extrasmap get extra smap getextrasmap extra smap extrasmap extra smap extrasmap size i output start line ioutputstartline i output line increment ioutputlineincrement smap add line data addlinedata i input start line iinputstartline integer extra smap extrasmap int value intvalue file name filename i output start line ioutputstartline i output line increment ioutputlineincrement do smap dosmap node in line count inlinecount out increment outincrement skipped lines skippedlines mark mark get start getstart mark string unqualified name unqualifiedname unqualify mark get file getfile smap add file addfile unqualified name unqualifiedname mark get file getfile smap add line data addlinedata mark get line number getlinenumber skipped lines skippedlines mark get file getfile in line count inlinecount skipped lines skippedlines get begin java line getbeginjavaline skipped lines skippedlines out increment outincrement do smap dosmap node do smap dosmap get end java line getendjavaline get begin java line getbeginjavaline do smap text dosmaptext node string text get text gettext line count linecount skipped lines skippedlines slash star seen slashstarseen text text index of indexof string text substring trim slash star seen slashstarseen starts with startswith slash star seen slashstarseen slash star seen slashstarseen skipped lines skippedlines end index endindex index of indexof end index endindex comment slash star seen slashstarseen end index endindex length executable code comment skipped lines skippedlines length starts with startswith skipped lines skippedlines line count linecount do smap dosmap line count linecount skipped lines skippedlines pre scan visitor prescanvisitor node visitor hash map hashmap map hash map hashmap override do visit dovisit node string get inner class name getinnerclassname map contains key containskey map smap stratum smapstratum jsp hash map hashmap get map getmap map