licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer core impl org junit assert equals assertequals org junit assert same assertsame org junit assert true asserttrue java byte array input stream bytearrayinputstream java io exception ioexception java util dictionary java util hashtable java util java util sorted set sortedset java util tree set treeset org apache sling installer api installable resource installableresource org apache sling installer api tasks registered resource registeredresource org apache sling installer api tasks resource state resourcestate org apache sling installer api tasks transformation result transformationresult org junit test registered resource comparator test registeredresourcecomparatortest assert order assertorder registered resource registeredresource to test totest registered resource registeredresource in order inorder assert equals assertequals expected sizes match to test totest size in order inorder length registered resource registeredresource to test totest registered resource registeredresource in order inorder assert same assertsame expected to test totest match registered resource impl registeredresourceimpl get config getconfig string url dictionary string object data priority io exception ioexception get config getconfig url data priority registered resource impl registeredresourceimpl get config getconfig string url dictionary string object data priority string digest io exception ioexception get config getconfig url data priority digest registered resource impl registeredresourceimpl get config getconfig string url dictionary string object data priority string digest resource state resourcestate io exception ioexception data data hashtable string object data foo bar file data store filedatastore mock bundle context mockbundlecontext installable resource installableresource installable resource installableresource url data digest priority internal resource internalresource internal internal resource internalresource create test registered resource impl registeredresourceimpl registered resource impl registeredresourceimpl create internal transformation result transformationresult default transformer defaulttransformer transform transformation result transformationresult result transformation result transformationresult result set id setid url result set resource type setresourcetype installable resource installableresource type config transformation result transformationresult result registered resource impl registeredresourceimpl result registered resource impl registeredresourceimpl clone result set state setstate result registered resource registeredresource untransformed resource untransformedresource string prio io exception ioexception byte array input stream bytearrayinputstream byte array input stream bytearrayinputstream get bytes getbytes utf installable resource installableresource installable resource installableresource prio internal resource internalresource internal internal resource internalresource create test registered resource impl registeredresourceimpl create internal assert order assertorder registered resource registeredresource in order inorder sorted set sortedset registered resource registeredresource to test totest tree set treeset registered resource registeredresource in order inorder length to test totest add in order inorder assert order assertorder to test totest in order inorder to test totest clear registered resource registeredresource in order inorder to test totest add assert order assertorder to test totest in order inorder test test bundle name testbundlename registered resource registeredresource in order inorder mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource assert order assertorder in order inorder test test bundle version testbundleversion registered resource registeredresource in order inorder mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource assert order assertorder in order inorder test test bundle priority testbundlepriority registered resource registeredresource in order inorder mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource assert order assertorder in order inorder test test composite testcomposite registered resource registeredresource in order inorder mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource mock bundle resource mockbundleresource assert order assertorder in order inorder test test bundle digests testbundledigests mock bundle resource mockbundleresource mock bundle resource mockbundleresource digest a digesta mock bundle resource mockbundleresource mock bundle resource mockbundleresource digest b digestb assert equals assertequals digests included bundles comparison compare to compareto mock bundle resource mockbundleresource mock bundle resource mockbundleresource snapshot mock bundle resource mockbundleresource mock bundle resource mockbundleresource snapshot assert equals assertequals digests compared highest compare to compareto test test snapshot serial number testsnapshotserialnumber verify snapshots higher serial number registered resource registeredresource in order inorder registered resource registeredresource in order inorder mock bundle resource mockbundleresource snapshot digest c digestc in order inorder mock bundle resource mockbundleresource snapshot digest b digestb in order inorder mock bundle resource mockbundleresource snapshot digest a digesta assert order assertorder in order inorder test test config priority testconfigpriority io exception ioexception registered resource registeredresource in order inorder registered resource registeredresource in order inorder get config getconfig pid in order inorder get config getconfig pid in order inorder get config getconfig pid assert order assertorder in order inorder test test config digests testconfigdigests io exception ioexception dictionary string object data hashtable string object data foo bar registered resource impl registeredresourceimpl get config getconfig pid data data foo changed registered resource impl registeredresourceimpl get config getconfig pid data assert equals assertequals entity urls get entity id getentityid get entity id getentityid assert true asserttrue digests included configs comparison compare to compareto registered resource impl registeredresourceimpl get config getconfig pid data registered resource impl registeredresourceimpl get config getconfig pid data assert equals assertequals digests included configs comparison compare to compareto test test config pid testconfigpid io exception ioexception registered resource registeredresource in order inorder registered resource registeredresource in order inorder get config getconfig pid a pida in order inorder get config getconfig pid b pidb in order inorder get config getconfig pid c pidc assert order assertorder in order inorder test test config composite testconfigcomposite io exception ioexception registered resource registeredresource in order inorder registered resource registeredresource in order inorder get config getconfig pid a pida in order inorder get config getconfig pid a pida in order inorder get config getconfig pid b pidb in order inorder get config getconfig pid b pidb assert order assertorder in order inorder test test config state testconfigstate io exception ioexception registered resource registeredresource in order inorder registered resource registeredresource in order inorder get config getconfig pid a pida resource state resourcestate installed in order inorder get config getconfig pid a pida resource state resourcestate install assert order assertorder in order inorder test test null entity id testnullentityid io exception ioexception sorted set sortedset registered resource registeredresource tree set treeset registered resource registeredresource registered resource registeredresource untransformed resource untransformedresource registered resource registeredresource untransformed resource untransformedresource add add assert equals assertequals expecting