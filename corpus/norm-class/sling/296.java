licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr registration impl java security access controller accesscontroller java security privileged action exception privilegedactionexception java security privileged exception action privilegedexceptionaction java util dictionary java util enumeration java util properties javax jcr repository javax naming context javax naming initial context initialcontext javax naming naming exception namingexception org apache felix scr annotations component org apache felix scr annotations configuration policy configurationpolicy org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations reference policy referencepolicy org apache felix scr annotations references org apache sling jcr registration abstract registration support abstractregistrationsupport org osgi service log log service logservice code jndi registration support jndiregistrationsupport code link abstract registration support abstractregistrationsupport register repositories jndi context provider url initial factory configured note properties declared config urable configurable mechanism dev ise d devised support declaration properties component metatype label jndi description jndi description org apache sling jcr jackrabbit server jndi registration support jndiregistrationsupport policy configuration policy configurationpolicy require org apache felix scr annotations properties property java naming factory initial org apache jackrabbit core jndi provider dummy initial context factory dummyinitialcontextfactory label jndi factory description jndi factory description property java naming provider url http sling apache org label jndi provider url providerurl description jndi provider url providerurl description property service vendor apache software foundation property private propertyprivate property service description jndi repository registration property private propertyprivate references reference repository policy reference policy referencepolicy dynamic cardinality reference cardinality referencecardinality optional multiple reference interface referenceinterface repository reference reference interface referenceinterface log service logservice bind bind log bindlog unbind unbind log unbindlog cardinality reference cardinality referencecardinality optional unary policy reference policy referencepolicy dynamic jndi registration support jndiregistrationsupport abstract registration support abstractregistrationsupport context jndi context jndicontext scr int ergration intergration override do activate doactivate suppress warnings suppresswarnings unchecked dictionary string object props get component context getcomponentcontext get properties getproperties properties env properties enumeration string props has more elements hasmoreelements string key next element nextelement key starts with startswith java naming env set property setproperty key string props key create jndi context registration jndi context jndicontext create initial context createinitialcontext env log log service logservice log info jndi context jndi context jndicontext get environment getenvironment register repositories naming exception namingexception log log service logservice log error problem setting jndi initial context repositories registered reason get message getmessage fallback override do deactivate dodeactivate jndi context jndicontext jndi context jndicontext close naming exception namingexception log log service logservice log info problem closing jndi context jndi context jndicontext context create initial context createinitialcontext properties env naming exception namingexception access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction context context naming exception namingexception thread current thread currentthread thread current thread currentthread class loader classloader current thread currentthread get context class loader getcontextclassloader current thread currentthread set context class loader setcontextclassloader jndi registration support jndiregistrationsupport get class getclass get class loader getclassloader initial context initialcontext env current thread currentthread set context class loader setcontextclassloader privileged action exception privilegedactionexception pae naming exception namingexception pae get cause getcause override object bind repository bindrepository string repository repository jndi context jndicontext jndi context jndicontext bind repository log log service logservice log info repository bound jndi repository naming exception namingexception log log service logservice log error failed register repository fall unregistered failures context override unbind repository unbindrepository string object data jndi context jndicontext jndi context jndicontext unbind log log service logservice log info repository unbound jndi naming exception namingexception log log service logservice log error problem unregistering repository