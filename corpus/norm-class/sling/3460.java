licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling resource resolver resourceresolver impl providers stat eful stateful org apache sling api resource resource util resourceutil get name getname org apache sling spi resource provider resource provider resourceprovider resource type synthetic java util array list arraylist java util arrays java util collection java util collections java util hash set hashset java util iterator java util linked hash set linkedhashset java util list java util map java util map entry java util javax annotation check for null checkfornull javax annotation nonnull org apache commons collect ions collections iterators iterator chain iteratorchain org apache commons lang array utils arrayutils org apache sling api resource login exception loginexception org apache sling api resource persistence exception persistenceexception org apache sling api resource resource org apache sling api resource resource resolver resourceresolver org apache sling api resource resource util resourceutil org apache sling api resource synthetic resource syntheticresource org apache sling api resource value map valuemap org apache sling api resource query query org apache sling api resource query query query type querytype org apache sling api resource query query instructions queryinstructions org apache sling api resource query result org apache sling resource resolver resourceresolver impl providers resource provider handler resourceproviderhandler org apache sling resource resolver resourceresolver impl providers resource provider info resourceproviderinfo org apache sling resource resolver resourceresolver impl providers resource provider storage resourceproviderstorage org apache sling resource resolver resourceresolver impl providers tree node org apache sling spi resource provider query result queryresult org apache sling spi resource provider resource provider resourceprovider org slf logger org slf logger factory loggerfactory takes number link stateful resource provider statefulresourceprovider objects exp oses exposes object provider operation chosen basing link resource provider info resourceproviderinfo get path getpath specific service ranking combined resource provider combinedresourceprovider logger logger logger factory loggerfactory get logger getlogger combined resource provider combinedresourceprovider resource provider storage resourceproviderstorage storage resource resolver resourceresolver resolver resource provider authenticator resourceproviderauthenticator authenticator combined resource provider combinedresourceprovider resource provider storage resourceproviderstorage storage resource resolver resourceresolver resolver resource provider authenticator resourceproviderauthenticator authenticator storage storage resolver resolver authenticator authenticator logo uts logouts providers log out logout stateful resource provider statefulresourceprovider authenticator get all used authenticated getallusedauthenticated log out logout ref res hes refreshes refresh able refreshable providers refresh stateful resource provider statefulresourceprovider authenticator get all used refresh able getallusedrefreshable refresh returns code providers live is live islive stateful resource provider statefulresourceprovider authenticator get all used authenticated getallusedauthenticated is live islive returns parent resource provider accepting children cases link synthetic resource syntheticresource returned resource provider returns parent child link get resource getresource string resource map details resource get parent getparent resource child string path child get path getpath stateful resource provider statefulresourceprovider provider get best matching provider getbestmatchingprovider path resource parent candidate parentcandidate provider get parent getparent child parent candidate parentcandidate parent candidate parentcandidate login exception loginexception string parent path parentpath resource util resourceutil get parent getparent path parent path parentpath is int ermediate path isintermediatepath parent path parentpath synthetic resource syntheticresource resolver parent path parentpath resource provider resourceprovider resource type synthetic returns resource resource provider provider path resource provider path link synthetic resource syntheticresource returned instance resource provider code libs sling servlet servlet resource provider returns resource code libs sling servlet link synthetic resource syntheticresource returned provide consistent resource tree behaviour occurs link get parent getparent resource link list children listchildren resource resource get resource getresource string path resource parent map string string parameters is resolve isresolve path path length path char at charat logger debug absolute path path absolute stateful resource provider statefulresourceprovider provider get best matching provider getbestmatchingprovider path resource resource candidate resourcecandidate provider get resource getresource path parent parameters is resolve isresolve resource candidate resourcecandidate resource candidate resourcecandidate login exception loginexception parent resource resource traversal is resolve isresolve is int ermediate path isintermediatepath path logger debug resolved synthetic path synthetic resource syntheticresource resolver path resource provider resourceprovider resource type synthetic logger debug resource path is int ermediate path isintermediatepath string full path fullpath storage get tree gettree get node getnode full path fullpath method asks matching resource providers children iterators merges adds link synthetic resource syntheticresource link get resource getresource string resource map details filters duplicates returns iterator transformations lazily link iterator has next hasnext invocation result suppress warnings suppresswarnings unchecked iterator resource list children listchildren resource parent string parent path parentpath parent get path getpath sources combined children provider owns parent providers mounted child path synthetic resources providers mounted level children parent provider iterator resource real children realchildren stateful resource provider statefulresourceprovider provider get best matching provider getbestmatchingprovider parent path parentpath real children realchildren provider list children listchildren parent login exception loginexception string visited names visitednames hash set hashset string iterator chain iteratorchain chain iterator chain iteratorchain real children realchildren chain add iterator additerator real children realchildren synthetic providers loop node resource provider handler resourceproviderhandler node storage get tree gettree get node getnode parent get path getpath node list resource synthetic list syntheticlist array list arraylist resource list resource provider list providerlist array list arraylist resource entry string node resource provider handler resourceproviderhandler entry node get children getchildren entry set entryset string entry get key getkey resource provider handler resourceproviderhandler handler entry get value getvalue get value getvalue string child path childpath string builder stringbuilder parent get path getpath append append to string tostring handler synthetic list syntheticlist add synthetic resource syntheticresource resolver child path childpath resource type synthetic resource rsrc rsrc authenticator get stateful getstateful handler get resource getresource child path childpath parent login exception loginexception ignore rsrc provider list providerlist add rsrc providing child entry get value getvalue get children getchildren is empty isempty synthetic list syntheticlist add synthetic resource syntheticresource resolver child path childpath resource type synthetic visited names visitednames add provider list providerlist is empty isempty chain add iterator additerator provider list providerlist iterator synthetic list syntheticlist is empty isempty chain add iterator additerator synthetic list syntheticlist iterator chain size collections empty list iterator unique iterator uniqueiterator visited names visitednames chain returns union attribute names collection string get attribute names getattributenames string names linked hash set linkedhashset string stateful resource provider statefulresourceprovider authenticator get all best effort getallbesteffort storage get attr ibutable handlers getattributablehandlers collection string new names newnames get attribute names getattributenames new names newnames names add all addall new names newnames names returns result link stateful resource provider statefulresourceprovider get attribute getattribute string invocation providers object get attribute getattribute string stateful resource provider statefulresourceprovider authenticator get all best effort getallbesteffort storage get attr ibutable handlers getattributablehandlers object attribute get attribute getattribute attribute attribute create resource unsupported operation exception unsupportedoperationexception creation allowed persistence exception persistenceexception creation fails resource resource create string path map string object properties persistence exception persistenceexception stateful resource provider statefulresourceprovider provider get best matching modifiable provider getbestmatchingmodifiableprovider path provider resource creation result resource creationresultresource provider create path properties creation result resource creationresultresource creation result resource creationresultresource login exception loginexception unsupported operation exception unsupportedoperationexception create get name getname path resource util resourceutil get parent getparent path delete resource iter ate iterate modifiable resource providers resourceproviders opportunity delete resource null pointer exception nullpointerexception resource unsupported operation exception unsupportedoperationexception deletion allowed persistence exception persistenceexception deletion fails delete resource resource persistence exception persistenceexception string path resource get path getpath stateful resource provider statefulresourceprovider provider get best matching modifiable provider getbestmatchingmodifiableprovider path provider provider delete resource login exception loginexception unsupported operation exception unsupportedoperationexception delete path revert modifiable resource providers resourceproviders revert stateful resource provider statefulresourceprovider authenticator get all used modifiable getallusedmodifiable revert commit modifiable resource providers resourceproviders commit persistence exception persistenceexception stateful resource provider statefulresourceprovider authenticator get all used modifiable getallusedmodifiable commit check modifiable resource provider resourceprovider uncommited has changes haschanges stateful resource provider statefulresourceprovider authenticator get all used modifiable getallusedmodifiable has changes haschanges queries resource provider query resource provider allowed result find query query instructions queryinstructions stateful resource provider statefulresourceprovider providers hash set hashset stateful resource provider statefulresourceprovider collect providers query result queryresult result providers is empty isempty providers single provider collect iae stateful resource provider statefulresourceprovider handler providers iterator result handler find result result override iterator resource iterator collection resource col collections empty list emptylist col iterator override string get continuation key getcontinuationkey query result queryresult result result override iterator resource iterator get resources getresources iterator override string get continuation key getcontinuationkey get continuation key getcontinuationkey collect stateful resource provider statefulresourceprovider providers query get query type getquerytype query type querytype single get paths getpaths is empty isempty node resource provider handler resourceproviderhandler node storage get tree gettree get best matching node getbestmatchingnode node node get value getvalue get resource provider getresourceprovider get query provider getqueryprovider stateful resource provider statefulresourceprovider srp authenticator get stateful getstateful node get value getvalue providers add srp providers size illegal argument exception illegalargumentexception provider involved query login exception loginexception string get paths getpaths node resource provider handler resourceproviderhandler node storage get tree gettree get best matching node getbestmatchingnode node node get value getvalue get resource provider getresourceprovider get query provider getqueryprovider stateful resource provider statefulresourceprovider srp authenticator get stateful getstateful node get value getvalue providers add srp providers size illegal argument exception illegalargumentexception provider involved query login exception loginexception query get parts getparts collect providers union query lang uages languages supported providers string get supported lang uages getsupportedlanguages string supported lang uages supportedlanguages linked hash set linkedhashset string stateful resource provider statefulresourceprovider authenticator get all best effort getallbesteffort storage get jcr querable handlers getjcrquerablehandlers supported lang uages supportedlanguages add all addall arrays as list aslist get supported lang uages getsupportedlanguages supported lang uages supportedlanguages to array toarray string supported lang uages supportedlanguages size queries resource providers combines iterator resource find resources findresources string query string language list stateful resource provider statefulresourceprovider querablerp get querable providers getquerableproviders language list iterator resource iterators array list arraylist iterator resource querablerp size stateful resource provider statefulresourceprovider querablerp iterators add find resources findresources query language chained iterator chainediterator resource iterators iterator list stateful resource provider statefulresourceprovider get querable providers getquerableproviders string language list stateful resource provider statefulresourceprovider querable providers querableproviders array list arraylist stateful resource provider statefulresourceprovider stateful resource provider statefulresourceprovider authenticator get all best effort getallbesteffort storage get jcr querable handlers getjcrquerablehandlers array utils arrayutils get supported lang uages getsupportedlanguages language querable providers querableproviders add querable providers querableproviders queries resource providers combines iterator map string object query resources queryresources string query string language list stateful resource provider statefulresourceprovider querablerp get querable providers getquerableproviders language list iterator map string object iterators array list arraylist iterator map string object querablerp size stateful resource provider statefulresourceprovider querablerp iterators add query resources queryresources query language chained iterator chainediterator map string object iterators iterator returns result adapt to adaptto method invoked providers suppress warnings suppresswarnings unchecked adapter type adaptertype adapter type adaptertype adapt to adaptto adapter type adaptertype type stateful resource provider statefulresourceprovider authenticator get all best effort getallbesteffort storage get adaptable handlers getadaptablehandlers object adaptee adapt to adaptto type adaptee adapter type adaptertype adaptee stateful resource provider statefulresourceprovider check source and dest checksourceanddest string src abs path srcabspath string dest abs path destabspath persistence exception persistenceexception check source node resource provider handler resourceproviderhandler src node srcnode storage get tree gettree get best matching node getbestmatchingnode src abs path srcabspath src node srcnode persistence exception persistenceexception source resource exist src abs path srcabspath stateful resource provider statefulresourceprovider src provider srcprovider src provider srcprovider authenticator get stateful getstateful src node srcnode get value getvalue login exception loginexception src provider srcprovider persistence exception persistenceexception source resource exist src abs path srcabspath resource src resource srcresource src provider srcprovider get resource getresource src abs path srcabspath src resource srcresource persistence exception persistenceexception source resource exist src abs path srcabspath check destination node resource provider handler resourceproviderhandler dest node destnode storage get tree gettree get best matching node getbestmatchingnode dest abs path destabspath dest node destnode persistence exception persistenceexception destination resource exist dest abs path destabspath stateful resource provider statefulresourceprovider dest provider destprovider dest provider destprovider authenticator get stateful getstateful dest node destnode get value getvalue login exception loginexception dest provider destprovider persistence exception persistenceexception destination resource exist dest abs path destabspath resource dest resource destresource dest provider destprovider get resource getresource dest abs path destabspath dest resource destresource persistence exception persistenceexception destination resource exist dest abs path destabspath check providers src dest src provider srcprovider dest provider destprovider collect providers collectproviders src node srcnode collect providers collectproviders dest node destnode src provider srcprovider collect providers collectproviders node resource provider handler resourceproviderhandler parent has more providers hasmoreproviders entry string node resource provider handler resourceproviderhandler entry parent get children getchildren entry set entryset entry get value getvalue get value getvalue authenticator get stateful getstateful entry get value getvalue get value getvalue has more providers hasmoreproviders login exception loginexception ignore collect providers collectproviders entry get value getvalue has more providers hasmoreproviders has more providers hasmoreproviders copy resource src string dst path dstpath list resource new nodes newnodes persistence exception persistenceexception value map valuemap src get value map getvaluemap string create path createpath dst path dstpath src get name getname new nodes newnodes add create create path createpath resource src get children getchildren copy create path createpath new nodes newnodes find resource provider accepting paths invokes link stateful resource provider statefulresourceprovider copy string string method returns provider resource copy string src abs path srcabspath string dest abs path destabspath persistence exception persistenceexception stateful resource provider statefulresourceprovider optimized source provider optimizedsourceprovider check source and dest checksourceanddest src abs path srcabspath dest abs path destabspath optimized source provider optimizedsourceprovider optimized source provider optimizedsourceprovider copy src abs path srcabspath dest abs path destabspath get resource getresource dest abs path destabspath resource util resourceutil get name getname src abs path srcabspath resource src resource srcresource get resource getresource src abs path srcabspath list resource new resources newresources array list arraylist resource rollback copy src resource srcresource dest abs path destabspath new resources newresources rollback new resources newresources rollback resource rsrc new resources newresources delete rsrc find resource provider accepting paths invokes link stateful resource provider statefulresourceprovider move string string method returns provider resource move string src abs path srcabspath string dest abs path destabspath persistence exception persistenceexception stateful resource provider statefulresourceprovider optimized source provider optimizedsourceprovider check source and dest checksourceanddest src abs path srcabspath dest abs path destabspath optimized source provider optimizedsourceprovider optimized source provider optimizedsourceprovider move src abs path srcabspath dest abs path destabspath get resource getresource dest abs path destabspath resource util resourceutil get name getname src abs path srcabspath resource src resource srcresource get resource getresource src abs path srcabspath list resource new resources newresources array list arraylist resource rollback copy src resource srcresource dest abs path destabspath new resources newresources delete src resource srcresource rollback new resources newresources rollback resource rsrc new resources newresources delete rsrc resource provider storage resourceproviderstorage get resource provider storage getresourceproviderstorage storage check for null checkfornull stateful resource provider statefulresourceprovider get stateful resource provider getstatefulresourceprovider nonnull resource provider handler resourceproviderhandler handler login exception loginexception handler authenticator get stateful getstateful handler param path login exception loginexception nonnull stateful resource provider statefulresourceprovider get best matching provider getbestmatchingprovider string path login exception loginexception node resource provider handler resourceproviderhandler node storage get tree gettree get best matching node getbestmatchingnode path node empty resource provider emptyresourceprovider singleton authenticator get stateful getstateful node get value getvalue param path modifiable provider code login exception loginexception check for null checkfornull stateful resource provider statefulresourceprovider get best matching modifiable provider getbestmatchingmodifiableprovider string path login exception loginexception node resource provider handler resourceproviderhandler node storage get tree gettree get best matching node getbestmatchingnode path node node get value getvalue get info getinfo is modifiable ismodifiable authenticator get stateful getstateful node get value getvalue chained iterator chainediterator abstract iterator abstractiterator iterator iterator iterators iterator current iterator currentiterator chained iterator chainediterator iterator iterator iterators iterators iterators override see k seek current iterator currentiterator iterators has next hasnext current iterator currentiterator iterators current iterator currentiterator has next hasnext current iterator currentiterator current iterator currentiterator iterator removes duplicated resource entries regular resources overrides synthetic unique iterator uniqueiterator abstract iterator abstractiterator resource iterator resource input string visited unique iterator uniqueiterator string visited iterator resource input input input visited visited override resource see k seek input has next hasnext resource input string get name getname visited visited add get resource metadata getresourcemetadata set resolution path setresolutionpath get path getpath