licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling url rewriter urlrewriter internal java byte array input stream bytearrayinputstream java io exception ioexception java input stream inputstream java util dictionary javax servlet filter javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse javax xml parsers document builder documentbuilder javax xml parsers document builder factory documentbuilderfactory org apache commons io utils ioutils org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations configuration policy configurationpolicy org apache felix scr annotations deactivate org apache felix scr annotations modified org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations service org apache sling commons osgi properties util propertiesutil org apache sling engine engine constants engineconstants org osgi framework constants org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory org tuckey web filters url rewrite urlrewrite conf org tuckey web filters url rewrite urlrewrite url rewriter urlrewriter org tuckey web filters url rewrite urlrewrite utils log org tuckey web filters url rewrite urlrewrite utils string utils stringutils org dom document org xml sax helpers default handler defaulthandler component label apache sling url rewriter description multi purpose service altering http requests resp onses responses based tuckey url rewrite filter urlrewritefilter metatype policy configuration policy configurationpolicy require service properties property constants service vendor apache software foundation property constants service description multi purpose service altering http requests resp onses responses based tuckey url rewrite filter urlrewritefilter property constants service ranking int value intvalue property private propertyprivate property engine constants engineconstants sling filter scope engine constants engineconstants filter scope request engine constants engineconstants filter scope sling url rewrite filter slingurlrewritefilter filter url rewriter urlrewriter rewriter string rewrite rules xml version encoding utf doctype url rewrite urlrewrite tuckey org dtd url rewrite urlrewrite http tuckey org res dtds url rewrite urlrewrite dtd url rewrite urlrewrite property rewrite rules string rewrite rules parameter org apache sling url rewriter urlrewriter rewrite rules logger logger logger factory loggerfactory get logger getlogger sling url rewrite filter slingurlrewritefilter sling url rewrite filter slingurlrewritefilter log set level setlevel slf activate activate component context componentcontext context logger debug activate configure context modified modified component context componentcontext context logger debug modified configure context deactivate deactivate logger debug deactivate clear rewriter clearrewriter configure component context componentcontext context logger info config uri ng configuring url rewriter dictionary properties context get properties getproperties string rules properties util propertiesutil to string tostring properties rewrite rules parameter rewrite rules document document create document createdocument rules document logger error creating rules document failed conf conf document conf documentconf document conf init ialise initialise clear rewriter clearrewriter conf is ok isok logger info rewrite configuration logger error rewrite configuration rewriter url rewriter urlrewriter conf logger info rewrite engine enabled conf is engine enabled isengineenabled conf get rules getrules logger info number rewrite rules conf get rules getrules size logger info rewrite rules override destroy logger debug destroy override init filter config filterconfig filter config filterconfig servlet exception servletexception logger debug init filter config filterconfig override do filter dofilter servlet request servletrequest servlet request servletrequest servlet response servletresponse servlet response servletresponse filter chain filterchain filter chain filterchain io exception ioexception servlet exception servletexception logger debug filter rewriter servlet request servletrequest http servlet request httpservletrequest servlet response servletresponse http servlet response httpservletresponse http servlet request httpservletrequest http servlet request httpservletrequest http servlet request httpservletrequest servlet request servletrequest http servlet response httpservletresponse http servlet response httpservletresponse http servlet response httpservletresponse servlet response servletresponse handled rewriter process request processrequest http servlet request httpservletrequest http servlet response httpservletresponse filter chain filterchain handled logger debug request handled rewriter logger debug request handled rewriter filter chain filterchain do filter dofilter servlet request servletrequest servlet response servletresponse document create document createdocument string rules string utils stringutils is blank isblank rules logger warn rules blank document builder factory documentbuilderfactory factory document builder factory documentbuilderfactory new instance newinstance factory set valid ating setvalidating factory set name space aware setnamespaceaware factory set ignoring comments setignoringcomments factory set ignoring element content whitespace setignoringelementcontentwhitespace string system id systemid conf handler confhandler conf handler confhandler conf handler confhandler system id systemid document builder documentbuilder document builder documentbuilder factory new document builder newdocumentbuilder document builder documentbuilder set error handler seterrorhandler conf handler confhandler document builder documentbuilder set entity resolver setentityresolver conf handler confhandler input stream inputstream input stream inputstream byte array input stream bytearrayinputstream rules get bytes getbytes utf system id systemid document document document builder documentbuilder parse input stream inputstream io utils ioutils close quietly closequietly input stream inputstream document exception logger error error creating document rules property clear rewriter clearrewriter rewriter rewriter destroy rewriter document conf documentconf conf document conf documentconf document rules process conf doc processconfdoc rules todo check doc processed docprocessed init ialise initialise todo loaded date loadeddate todo conf handler confhandler default handler defaulthandler string system id systemid conf handler confhandler string system id systemid system id systemid system id systemid