licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution agent impl java util arrays org apache sling api resource resource resolver resourceresolver org apache sling api resource resource resolver factory resourceresolverfactory org apache sling distribution distribution request distributionrequest org apache sling distribution distribution request state distributionrequeststate org apache sling distribution distribution request type distributionrequesttype org apache sling distribution distribution response distributionresponse org apache sling distribution simple distribution request simpledistributionrequest org apache sling distribution event impl distribution event factory distributioneventfactory org apache sling distribution log impl default distribution log defaultdistributionlog org apache sling distribution serialization distribution package distributionpackage org apache sling distribution pack aging packaging distribution package exporter distributionpackageexporter org apache sling distribution pack aging packaging distribution package importer distributionpackageimporter org apache sling distribution serialization distribution package info distributionpackageinfo org apache sling distribution queue distribution queue distributionqueue org apache sling distribution queue distribution queue item state distributionqueueitemstate org apache sling distribution queue impl distribution queue dispatching strategy distributionqueuedispatchingstrategy org apache sling distribution queue distribution queue item status distributionqueueitemstatus org apache sling distribution queue distribution queue provider distributionqueueprovider org apache sling distribution queue impl simple simple distribution queue simpledistributionqueue org apache sling jcr api sling repository slingrepository org junit test org junit assert equals assertequals org junit assert false assertfalse org junit assert not null assertnotnull org junit assert null assertnull org junit assert true asserttrue org mockito matchers org mockito mockito mock org mockito mockito test case testcase link simple distribution agent simpledistributionagent simple distribution agent test simpledistributionagenttest test test distribution with failing distribution strategy testdistributionwithfailingdistributionstrategy exception string sample agent distribution package importer distributionpackageimporter package importer packageimporter mock distribution package importer distributionpackageimporter distribution package exporter distributionpackageexporter package exporter packageexporter mock distribution package exporter distributionpackageexporter distribution request authorization strategy distributionrequestauthorizationstrategy package exporter strategy packageexporterstrategy mock distribution request authorization strategy distributionrequestauthorizationstrategy distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution handler distributionhandler mock distribution queue dispatching strategy distributionqueuedispatchingstrategy iterable distribution queue item status distributionqueueitemstatus arrays as list aslist distribution queue item status distributionqueueitemstatus distribution queue item state distributionqueueitemstate error distribution queue dispatching strategy distributionqueuedispatchingstrategy queue distribution handler distributionhandler add distribution package distributionpackage distribution queue provider distributionqueueprovider then return thenreturn distribution event factory distributioneventfactory distribution event factory distributioneventfactory mock distribution event factory distributioneventfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory mock resource resolver factory resourceresolverfactory simple distribution agent simpledistributionagent agent simple distribution agent simpledistributionagent service name servicename package importer packageimporter package exporter packageexporter package exporter strategy packageexporterstrategy queue provider queueprovider distribution handler distributionhandler distribution event factory distributioneventfactory resolver factory resolverfactory mock sling repository slingrepository mock default distribution log defaultdistributionlog distribution request distributionrequest request simple distribution request simpledistributionrequest distribution request type distributionrequesttype add distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver distribution package distributionpackage get info getinfo then return thenreturn distribution package info distributionpackageinfo type package exporter packageexporter export packages exportpackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn arrays as list aslist distribution package distributionpackage queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn simple distribution queue simpledistributionqueue distribution response distributionresponse response agent execute resource resolver resourceresolver request assert not null assertnotnull response assert equals assertequals error response get message getmessage assert equals assertequals distribution request state distributionrequeststate dropped response get state getstate test test distribution with working distribution strategy testdistributionwithworkingdistributionstrategy exception string sample agent distribution package importer distributionpackageimporter package importer packageimporter mock distribution package importer distributionpackageimporter distribution package exporter distributionpackageexporter package exporter packageexporter mock distribution package exporter distributionpackageexporter distribution request authorization strategy distributionrequestauthorizationstrategy package exporter strategy packageexporterstrategy mock distribution request authorization strategy distributionrequestauthorizationstrategy distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution handler distributionhandler mock distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution event factory distributioneventfactory distribution event factory distributioneventfactory mock distribution event factory distributioneventfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory mock resource resolver factory resourceresolverfactory simple distribution agent simpledistributionagent agent simple distribution agent simpledistributionagent sub service name subservicename package importer packageimporter package exporter packageexporter package exporter strategy packageexporterstrategy queue provider queueprovider distribution handler distributionhandler distribution event factory distributioneventfactory resolver factory resolverfactory mock sling repository slingrepository mock default distribution log defaultdistributionlog distribution request distributionrequest request simple distribution request simpledistributionrequest distribution request type distributionrequesttype add distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver distribution package distributionpackage get info getinfo then return thenreturn distribution package info distributionpackageinfo type iterable distribution queue item status distributionqueueitemstatus arrays as list aslist distribution queue item status distributionqueueitemstatus distribution queue item state distributionqueueitemstate queued distribution queue dispatching strategy distributionqueuedispatchingstrategy queue distribution handler distributionhandler add distribution package distributionpackage distribution queue provider distributionqueueprovider then return thenreturn package exporter packageexporter export packages exportpackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn arrays as list aslist distribution package distributionpackage queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn simple distribution queue simpledistributionqueue distribution response distributionresponse response agent execute resource resolver resourceresolver request assert not null assertnotnull response assert equals assertequals queued response get message getmessage assert equals assertequals distribution request state distributionrequeststate accepted response get state getstate test test distribution testdistribution exception string sample agent distribution package importer distributionpackageimporter package importer packageimporter mock distribution package importer distributionpackageimporter distribution package exporter distributionpackageexporter package exporter packageexporter mock distribution package exporter distributionpackageexporter distribution request authorization strategy distributionrequestauthorizationstrategy package exporter strategy packageexporterstrategy mock distribution request authorization strategy distributionrequestauthorizationstrategy distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution handler distributionhandler mock distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution event factory distributioneventfactory distribution event factory distributioneventfactory mock distribution event factory distributioneventfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory mock resource resolver factory resourceresolverfactory simple distribution agent simpledistributionagent agent simple distribution agent simpledistributionagent service name servicename package importer packageimporter package exporter packageexporter package exporter strategy packageexporterstrategy queue provider queueprovider distribution handler distributionhandler distribution event factory distributioneventfactory resolver factory resolverfactory mock sling repository slingrepository mock default distribution log defaultdistributionlog distribution request distributionrequest request simple distribution request simpledistributionrequest distribution request type distributionrequesttype add distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage distribution package info distributionpackageinfo package info packageinfo distribution package info distributionpackageinfo type distribution package distributionpackage get info getinfo then return thenreturn package info packageinfo resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver package exporter packageexporter export packages exportpackages resource resolver resourceresolver request then return thenreturn arrays as list aslist distribution package distributionpackage queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn simple distribution queue simpledistributionqueue agent execute resource resolver resourceresolver request test test get default queue testgetdefaultqueue exception string sample agent distribution package importer distributionpackageimporter package importer packageimporter mock distribution package importer distributionpackageimporter distribution package exporter distributionpackageexporter package exporter packageexporter mock distribution package exporter distributionpackageexporter distribution request authorization strategy distributionrequestauthorizationstrategy package exporter strategy packageexporterstrategy mock distribution request authorization strategy distributionrequestauthorizationstrategy distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue dispatching strategy distributionqueuedispatchingstrategy dispatching strategy dispatchingstrategy mock distribution queue dispatching strategy distributionqueuedispatchingstrategy dispatching strategy dispatchingstrategy get queue names getqueuenames then return thenreturn arrays as list aslist string distribution queue dispatching strategy distributionqueuedispatchingstrategy queue distribution event factory distributioneventfactory distribution event factory distributioneventfactory mock distribution event factory distributioneventfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory mock resource resolver factory resourceresolverfactory simple distribution agent simpledistributionagent agent simple distribution agent simpledistributionagent service name servicename package importer packageimporter package exporter packageexporter package exporter strategy packageexporterstrategy queue provider queueprovider dispatching strategy dispatchingstrategy distribution event factory distributioneventfactory resolver factory resolverfactory mock sling repository slingrepository mock default distribution log defaultdistributionlog distribution queue distributionqueue queue mock distribution queue distributionqueue queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn queue assert not null assertnotnull agent get queue getqueue test test get existing name d queue testgetexistingnamedqueue exception string sample agent distribution package importer distributionpackageimporter package importer packageimporter mock distribution package importer distributionpackageimporter distribution package exporter distributionpackageexporter package exporter packageexporter mock distribution package exporter distributionpackageexporter distribution request authorization strategy distributionrequestauthorizationstrategy authorization strategy authorizationstrategy mock distribution request authorization strategy distributionrequestauthorizationstrategy distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue dispatching strategy distributionqueuedispatchingstrategy dispatching strategy dispatchingstrategy mock distribution queue dispatching strategy distributionqueuedispatchingstrategy dispatching strategy dispatchingstrategy get queue names getqueuenames then return thenreturn arrays as list aslist string priority distribution event factory distributioneventfactory distribution event factory distributioneventfactory mock distribution event factory distributioneventfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory mock resource resolver factory resourceresolverfactory simple distribution agent simpledistributionagent agent simple distribution agent simpledistributionagent service name servicename package importer packageimporter package exporter packageexporter authorization strategy authorizationstrategy queue provider queueprovider dispatching strategy dispatchingstrategy distribution event factory distributioneventfactory resolver factory resolverfactory mock sling repository slingrepository mock default distribution log defaultdistributionlog distribution queue distributionqueue queue mock distribution queue distributionqueue queue provider queueprovider get queue getqueue priority then return thenreturn queue assert not null assertnotnull agent get queue getqueue priority test test get non existing name d queue testgetnonexistingnamedqueue exception string sample agent distribution package importer distributionpackageimporter package importer packageimporter mock distribution package importer distributionpackageimporter distribution package exporter distributionpackageexporter package exporter packageexporter mock distribution package exporter distributionpackageexporter distribution request authorization strategy distributionrequestauthorizationstrategy package exporter strategy packageexporterstrategy mock distribution request authorization strategy distributionrequestauthorizationstrategy distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution handler distributionhandler mock distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution event factory distributioneventfactory distribution event factory distributioneventfactory mock distribution event factory distributioneventfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory mock resource resolver factory resourceresolverfactory simple distribution agent simpledistributionagent agent simple distribution agent simpledistributionagent service name servicename package importer packageimporter package exporter packageexporter package exporter strategy packageexporterstrategy queue provider queueprovider distribution handler distributionhandler distribution event factory distributioneventfactory resolver factory resolverfactory mock sling repository slingrepository mock default distribution log defaultdistributionlog distribution queue distributionqueue queue mock distribution queue distributionqueue queue provider queueprovider get queue getqueue priority then return thenreturn queue assert null assertnull agent get queue getqueue weird test test distribution with allowed root testdistributionwithallowedroot exception string sample agent distribution package importer distributionpackageimporter package importer packageimporter mock distribution package importer distributionpackageimporter distribution package exporter distributionpackageexporter package exporter packageexporter mock distribution package exporter distributionpackageexporter distribution request authorization strategy distributionrequestauthorizationstrategy package exporter strategy packageexporterstrategy mock distribution request authorization strategy distributionrequestauthorizationstrategy distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue dispatching strategy distributionqueuedispatchingstrategy queue distribution strategy queuedistributionstrategy mock distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution event factory distributioneventfactory distribution event factory distributioneventfactory mock distribution event factory distributioneventfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory mock resource resolver factory resourceresolverfactory queue distribution strategy queuedistributionstrategy add distribution package distributionpackage distribution queue provider distributionqueueprovider then return thenreturn arrays as list aslist distribution queue item status distributionqueueitemstatus distribution queue item state distributionqueueitemstate queued simple distribution agent simpledistributionagent agent simple distribution agent simpledistributionagent service name servicename package importer packageimporter package exporter packageexporter package exporter strategy packageexporterstrategy queue provider queueprovider queue distribution strategy queuedistributionstrategy distribution event factory distributioneventfactory resolver factory resolverfactory mock sling repository slingrepository mock default distribution log defaultdistributionlog string content distribution request distributionrequest request simple distribution request simpledistributionrequest distribution request type distributionrequesttype add content distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage distribution package info distributionpackageinfo package info packageinfo distribution package info distributionpackageinfo type distribution package distributionpackage get info getinfo then return thenreturn package info packageinfo resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver queue distribution strategy queuedistributionstrategy add distribution package distributionpackage queue provider queueprovider package exporter packageexporter export packages exportpackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn arrays as list aslist distribution package distributionpackage queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn simple distribution queue simpledistributionqueue distribution response distributionresponse response agent execute resource resolver resourceresolver request assert true asserttrue response is successful issuccessful test test distribution with disallowed root testdistributionwithdisallowedroot exception string sample agent distribution package importer distributionpackageimporter package importer packageimporter mock distribution package importer distributionpackageimporter distribution package exporter distributionpackageexporter package exporter packageexporter mock distribution package exporter distributionpackageexporter distribution request authorization strategy distributionrequestauthorizationstrategy package exporter strategy packageexporterstrategy mock distribution request authorization strategy distributionrequestauthorizationstrategy distribution queue provider distributionqueueprovider queue provider queueprovider mock distribution queue provider distributionqueueprovider distribution queue dispatching strategy distributionqueuedispatchingstrategy queue distribution strategy queuedistributionstrategy mock distribution queue dispatching strategy distributionqueuedispatchingstrategy distribution event factory distributioneventfactory distribution event factory distributioneventfactory mock distribution event factory distributioneventfactory resource resolver factory resourceresolverfactory resolver factory resolverfactory mock resource resolver factory resourceresolverfactory queue distribution strategy queuedistributionstrategy add distribution package distributionpackage distribution queue provider distributionqueueprovider then return thenreturn arrays as list aslist distribution queue item status distributionqueueitemstatus distribution queue item state distributionqueueitemstate queued simple distribution agent simpledistributionagent agent simple distribution agent simpledistributionagent service name servicename package importer packageimporter package exporter packageexporter package exporter strategy packageexporterstrategy queue provider queueprovider queue distribution strategy queuedistributionstrategy distribution event factory distributioneventfactory resolver factory resolverfactory mock sling repository slingrepository mock default distribution log defaultdistributionlog string content distribution request distributionrequest request simple distribution request simpledistributionrequest distribution request type distributionrequesttype add distribution package distributionpackage distribution package distributionpackage mock distribution package distributionpackage distribution package info distributionpackageinfo package info packageinfo distribution package info distributionpackageinfo type distribution package distributionpackage get info getinfo then return thenreturn package info packageinfo resource resolver resourceresolver resource resolver resourceresolver mock resource resolver resourceresolver queue distribution strategy queuedistributionstrategy add distribution package distributionpackage queue provider queueprovider package exporter packageexporter export packages exportpackages resource resolver resourceresolver distribution request distributionrequest then return thenreturn arrays as list aslist distribution package distributionpackage queue provider queueprovider get queue getqueue distribution queue dispatching strategy distributionqueuedispatchingstrategy queue then return thenreturn simple distribution queue simpledistributionqueue distribution response distributionresponse response agent execute resource resolver resourceresolver request assert false assertfalse response is successful issuccessful