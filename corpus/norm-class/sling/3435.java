licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest servlets post java io exception ioexception java util array list arraylist java util hash map hashmap java util list java util map javax servlet http http servlet response httpservletresponse org apache commons http client httpclient name value pair namevaluepair org apache sling commons json json object jsonobject org apache sling commons testing int egration integration http status code exception httpstatuscodeexception org apache sling commons testing int egration integration http test base httptestbase org apache sling servlets post sling post constants slingpostconstants test node copy microjax post servlet microjaxpostservlet post servlet copy test postservletcopytest http test base httptestbase string test base path sling copy tests override set up setup exception set up setup test copy node absolute testcopynodeabsolute io exception ioexception string test path testpath test base path abs system current time millis currenttimemillis map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props props clear props sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy props sling post constants slingpostconstants dest test path testpath dest test client testclient create node createnode http base url test path testpath src props content location string content get content getcontent http base url test path testpath dest json content type json assert java script assertjavascript content println data text content location content get content getcontent http base url test path testpath src json content type json assert java script assertjavascript content println data text test copy node absolute below dest testcopynodeabsolutebelowdest io exception ioexception string test path testpath test base path abs system current time millis currenttimemillis map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props test failure dest parent exist list name value pair namevaluepair nv pairs nvpairs array list arraylist name value pair namevaluepair nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest assert post status assertpoststatus http base url test path testpath src http servlet response httpservletresponse precondition failed nv pairs nvpairs expecting copy failure dest exist create dest parent test client testclient create node createnode http base url test path testpath dest copy succeeds dest assert post status assertpoststatus http base url test path testpath src http servlet response httpservletresponse created nv pairs nvpairs expecting copy success content location string content get content getcontent http base url test path testpath dest json content type json assert java script assertjavascript content println data src text content location content get content getcontent http base url test path testpath src json content type json assert java script assertjavascript content println data text test copy node relative testcopynoderelative io exception ioexception string test path testpath test base path rel system current time millis currenttimemillis map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props props clear props sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy props sling post constants slingpostconstants dest dest test client testclient create node createnode http base url test path testpath src props string content get content getcontent http base url test path testpath dest json content type json assert java script assertjavascript content println data text test copy node existing fail testcopynodeexistingfail io exception ioexception string test path testpath test base path exist system current time millis currenttimemillis map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props create dest node props text destination test client testclient create node createnode http base url test path testpath dest props props clear props sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy props sling post constants slingpostconstants dest test path testpath dest test client testclient create node createnode http base url test path testpath props http status code exception httpstatuscodeexception hsce hsce get actual status getactualstatus hsce expect unmodified dest string content get content getcontent http base url test path testpath dest json content type json assert java script assertjavascript destination content println data text test copy node existing replace testcopynodeexistingreplace io exception ioexception string test path testpath test base path replace system current time millis currenttimemillis map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props create dest node props text destination test client testclient create node createnode http base url test path testpath dest props props clear props sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy props sling post constants slingpostconstants dest test path testpath dest props sling post constants slingpostconstants replace test client testclient create node createnode http base url test path testpath src props string content get content getcontent http base url test path testpath dest json content type json assert java script assertjavascript content println data text test copy node deep relative testcopynodedeeprelative io exception ioexception string test path testpath test base path system current time millis currenttimemillis map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props props clear props sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy props sling post constants slingpostconstants dest deep test client testclient create node createnode http base url test path testpath src props fail moving node existing parent location fail http status code exception httpstatuscodeexception hsce hsce get actual status getactualstatus hsce test copy node deep absolute testcopynodedeepabsolute io exception ioexception string test path testpath test base path fail system current time millis currenttimemillis map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props props clear props sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy props sling post constants slingpostconstants dest existing structure test client testclient create node createnode http base url test path testpath props correct check status response fail moving node existing parent location fail http status code exception httpstatuscodeexception hsce hsce get actual status getactualstatus hsce test copy node multiple source valid testcopynodemultiplesourcevalid io exception ioexception string test path testpath test base path cpmult system current time millis currenttimemillis string test root testroot test client testclient create node createnode http base url test path testpath create multiple source nodes map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props test client testclient create node createnode http base url test path testpath src props test client testclient create node createnode http base url test path testpath src props test client testclient create node createnode http base url test path testpath src props copy src nodes list name value pair namevaluepair nv pairs nvpairs array list arraylist name value pair namevaluepair nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src assert post status assertpoststatus test root testroot http servlet response httpservletresponse precondition failed nv pairs nvpairs expecting copy failure dest parent exist create destination parent test client testclient create node createnode http base url test path testpath dest props dest exists expect success assert post status assertpoststatus test root testroot http servlet response httpservletresponse nv pairs nvpairs expecting copy success existence src text properties assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse test client testclient delete test root testroot test copy node multiple source in valid testcopynodemultiplesourceinvalid io exception ioexception string test path testpath test base path cpmult system current time millis currenttimemillis string test root testroot test client testclient create node createnode http base url test path testpath create multiple source nodes map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props test client testclient create node createnode http base url test path testpath src props test client testclient create node createnode http base url test path testpath src props test client testclient create node createnode http base url test path testpath src props copy src nodes list name value pair namevaluepair nv pairs nvpairs array list arraylist name value pair namevaluepair nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src assert post status assertpoststatus test root testroot http servlet response httpservletresponse internal server error nv pairs nvpairs expecting copy failure dest trailing slash create destination parent test client testclient create node createnode http base url test path testpath dest props retest creating test assert post status assertpoststatus test root testroot http servlet response httpservletresponse precondition failed nv pairs nvpairs expecting copy failure dest exists existence src text properties assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse test client testclient delete test root testroot test copy node multiple source partial testcopynodemultiplesourcepartial io exception ioexception string test path testpath test base path cpmult system current time millis currenttimemillis string test root testroot test client testclient create node createnode http base url test path testpath create multiple source nodes map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props test client testclient create node createnode http base url test path testpath src props copy src nodes list name value pair namevaluepair nv pairs nvpairs array list arraylist name value pair namevaluepair nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src assert post status assertpoststatus test root testroot http servlet response httpservletresponse precondition failed nv pairs nvpairs expecting copy failure dest parent exist create destination parent test client testclient create node createnode http base url test path testpath dest props dest exists expect success assert post status assertpoststatus test root testroot http servlet response httpservletresponse nv pairs nvpairs expecting copy success partial existence src text properties assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse test client testclient delete test root testroot test copy node multiple source replace testcopynodemultiplesourcereplace exception string test path testpath test base path cpmult system current time millis currenttimemillis string test root testroot test client testclient create node createnode http base url test path testpath create multiple source nodes map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath src props test client testclient create node createnode http base url test path testpath src props copy src nodes list name value pair namevaluepair nv pairs nvpairs array list arraylist name value pair namevaluepair nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src assert post status assertpoststatus test root testroot http servlet response httpservletresponse precondition failed nv pairs nvpairs expecting copy failure dest parent exist create destination parent test client testclient create node createnode http base url test path testpath dest dest exists expect success assert post status assertpoststatus test root testroot http servlet response httpservletresponse nv pairs nvpairs expecting copy success partial existence src text properties assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse content test string content get content getcontent http base url test path testpath dest src json content type json json object jsonobject json json object jsonobject content assert equals assertequals json text modify src content nv pairs nvpairs clear nv pairs nvpairs add name value pair namevaluepair text modified assert post status assertpoststatus http base url test path testpath src http servlet response httpservletresponse nv pairs nvpairs expect content update success copy src nodes nv pairs nvpairs clear nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test path testpath src assert post status assertpoststatus test root testroot http servlet response httpservletresponse nv pairs nvpairs expecting copy success content test string content get content getcontent http base url test path testpath dest src json content type json json object jsonobject json json object jsonobject content assert equals assertequals modified json text clean test client testclient delete test root testroot test sling ability move child nodes parent node apply to applyto test copy all children testcopyallchildren io exception ioexception string test path testpath test base path cpmultwc system current time millis currenttimemillis string test root testroot test client testclient create node createnode http base url test path testpath create multiple source nodes map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props create destination parent test client testclient create node createnode http base url test path testpath dest props copy src nodes list name value pair namevaluepair nv pairs nvpairs array list arraylist name value pair namevaluepair nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply expect success assert post status assertpoststatus test root testroot test http servlet response httpservletresponse nv pairs nvpairs expecting copy success existence src text properties assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse test client testclient delete test root testroot test sling ability move child nodes parent node apply to applyto test copy all children by path testcopyallchildrenbypath io exception ioexception string test path testpath test base path cpmultwc system current time millis currenttimemillis string test root testroot test client testclient create node createnode http base url test path testpath create multiple source nodes map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props create destination parent test client testclient create node createnode http base url test path testpath dest props copy src nodes list name value pair namevaluepair nv pairs nvpairs array list arraylist name value pair namevaluepair nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply expect success assert post status assertpoststatus test root testroot test http servlet response httpservletresponse nv pairs nvpairs expecting copy success existence src text properties assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse test client testclient delete test root testroot test sling ability copy child nodes sub node subnode parent node apply to applyto sub node subnode path test copy all children of sub node testcopyallchildrenofsubnode io exception ioexception string test path testpath test base path cpmultwc system current time millis currenttimemillis string test root testroot test client testclient create node createnode http base url test path testpath create multiple source nodes map string string props hash map hashmap string string props text test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props test client testclient create node createnode http base url test path testpath test src props create destination parent test client testclient create node createnode http base url test path testpath dest props copy src nodes list name value pair namevaluepair nv pairs nvpairs array list arraylist name value pair namevaluepair nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants dest test path testpath dest nv pairs nvpairs add name value pair namevaluepair sling post constants slingpostconstants apply test expect success assert post status assertpoststatus test root testroot http servlet response httpservletresponse nv pairs nvpairs expecting copy success existence src text properties assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse assert http status asserthttpstatus http base url test path testpath dest src text http servlet response httpservletresponse test client testclient delete test root testroot copying siblings work test copy sibling testcopysibling io exception ioexception string test path testpath test base path csp system current time millis currenttimemillis map string string props hash map hashmap string string props text csp test client testclient create node createnode http base url test path testpath props test client testclient create node createnode http base url test path testpath props props clear props sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy props sling post constants slingpostconstants dest test path testpath test client testclient create node createnode http base url test path testpath props content locations string path string string content get content getcontent http base url test path testpath path json content type json assert java script assertjavascript csp content println data text path path copying ancestor descendant fail test copy ancestor testcopyancestor io exception ioexception string test path testpath test base path tcanc system current time millis currenttimemillis string test root testroot test client testclient create node createnode http base url test path testpath string parent path parentpath test path testpath string child path childpath parent path parentpath child string parent url parenturl test client testclient create node createnode http base url parent path parentpath assert false assertfalse child node exist copy get content getcontent parent url parenturl json content type json child list name value pair namevaluepair opt array list arraylist name value pair namevaluepair opt add name value pair namevaluepair sling post constants slingpostconstants operation sling post constants slingpostconstants operation copy opt add name value pair namevaluepair sling post constants slingpostconstants dest child path childpath expected status expectedstatus http servlet response httpservletresponse internal server error assert post status assertpoststatus test root testroot expected status expectedstatus opt expecting status expected status expectedstatus