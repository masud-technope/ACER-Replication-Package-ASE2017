licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr resource internal java util collections synchronized list synchronizedlist org junit assert equals assertequals org junit assert not null assertnotnull org junit assert true asserttrue org junit fail java util array list arraylist java util dictionary java util hash set hashset java util hashtable java util list java util javax jcr node javax jcr repository exception repositoryexception javax jcr session org apache sling api sling constants slingconstants org apache sling jcr api sling repository slingrepository org junit test org osgi service event event base listener tests abstract listener test abstractlistenertest string created path createdpath test system current time millis currenttimemillis create string path to delete pathtodelete test system current time millis currenttimemillis delete string path to modify pathtomodify test system current time millis currenttimemillis modify list event events synchronized list synchronizedlist array list arraylist event add event addevent event dictionary string object props hashtable string object string get property names getpropertynames props get property getproperty events add event get topic gettopic props override string to string tostring event topic get topic gettopic properties props test test simple operations testsimpleoperations exception generate events generateevents assert equals assertequals received events events size string add paths addpaths hash set hashset string string modify paths modifypaths hash set hashset string string remove paths removepaths hash set hashset string event event events event get topic gettopic equals sling constants slingconstants topic resource add paths addpaths add string event get property getproperty sling constants slingconstants property path event get topic gettopic equals sling constants slingconstants topic resource changed modify paths modifypaths add string event get property getproperty sling constants slingconstants property path event get topic gettopic equals sling constants slingconstants topic resource removed remove paths removepaths add string event get property getproperty sling constants slingconstants property path fail unexpected event event assert not null assertnotnull event get property getproperty sling constants slingconstants property user id userid assert equals assertequals add paths addpaths size assert true asserttrue created path createdpath add paths addpaths created path createdpath assert true asserttrue path to delete pathtodelete add paths addpaths path to delete pathtodelete assert true asserttrue path to modify pathtomodify add paths addpaths path to modify pathtomodify assert equals assertequals modify paths modifypaths size assert true asserttrue modified path to modify pathtomodify modify paths modifypaths path to modify pathtomodify assert equals assertequals remove paths removepaths size assert true asserttrue removed path to delete pathtodelete remove paths removepaths path to delete pathtodelete create node createnode session session string path repository exception repositoryexception session get root node getrootnode add node addnode path substring unstructured session save generate events generateevents exception session session get repository getrepository login administrative loginadministrative create nodes create node createnode session created path createdpath create node createnode session path to modify pathtomodify create node createnode session path to delete pathtodelete thread sleep modify node modified session get node getnode path to modify pathtomodify modified set property setproperty foo bar session save delete node deleted session get node getnode path to delete pathtodelete deleted remove session save thread sleep session log out logout sling repository slingrepository get repository getrepository