licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting sightly impl html dom template java io exception ioexception java reader java util array deque arraydeque java util array list arraylist java util deque java util iterator java util list org apache sling scripting sightly impl html dom attribute list attributelist org apache sling scripting sightly impl html dom document handler documenthandler org apache sling scripting sightly impl html dom html parser htmlparser template parser parses html document returns reusable tree representation template parser templateparser parse html document param reader parsed io exception ioexception parsing error template template parse reader reader io exception ioexception template parser context templateparsercontext context template parser context templateparsercontext html parser htmlparser parse reader context context get template gettemplate template parser context templateparsercontext document handler documenthandler text character events string builder stringbuilder text builder textbuilder string builder stringbuilder element stack root template deque template element node templateelementnode element stack elementstack array deque arraydeque template element node templateelementnode template template template template get template gettemplate template on start onstart io exception ioexception template template element stack elementstack push template on end onend io exception ioexception check text checktext element stack elementstack clear check text checktext text builder textbuilder length element stack elementstack peek add child addchild template text node templatetextnode text builder textbuilder to string tostring text builder textbuilder string builder stringbuilder on start element onstartelement string attribute list attributelist att list attlist end slash endslash check text checktext list template attribute templateattribute attrs array list arraylist template attribute templateattribute iterator string iter att list attlist attribute names attributenames iter has next hasnext string a name aname iter template attribute templateattribute attr template attribute templateattribute a name aname att list attlist get value getvalue a name aname attrs add attr template element node templateelementnode element template element node templateelementnode end slash endslash attrs element set has start element sethasstartelement element stack elementstack peek add child addchild element end slash endslash element stack elementstack push element on end element onendelement string check text checktext template element node templateelementnode element element stack elementstack pop equals element get name getname element element stack elementstack pop element set has end element sethasendelement template element node templateelementnode element template element node templateelementnode array list arraylist template attribute templateattribute element stack elementstack peek add child addchild element element set has end element sethasendelement on char acters oncharacters len text builder textbuilder append len on comment oncomment string text io exception ioexception check text checktext element stack elementstack peek add child addchild template comment node templatecommentnode text string ascending iterator iterator element stack elementstack iterator has next hasnext template element node templateelementnode elem template element node templateelementnode equals elem get name getname