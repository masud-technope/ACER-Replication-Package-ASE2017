licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer provider jcr impl java lang reflect field java util collection java util dictionary java util hashtable org apache sling commons testing jcr event helper eventhelper org apache sling installer api osgi installer osgiinstaller org apache sling jcr api sling repository slingrepository org jmock expectations org jmock mockery org osgi framework bundle context bundlecontext org osgi service component component context componentcontext jcr install jcrinstall test util ities utilities misc util miscutil mockery mockery mockery string search paths libs apps string modes dev staging field set field setfield object target string field name fieldname object security exception securityexception no such field exception nosuchfieldexception illegal argument exception illegalargumentexception illegal access exception illegalaccessexception field target get class getclass get declared field getdeclaredfield field name fieldname set accessible setaccessible target jcr installer jcrinstaller setup testing jcr installer jcrinstaller get jcr installer getjcrinstaller sling repository slingrepository repository osgi installer osgiinstaller osgi installer osgiinstaller exception jcr installer jcrinstaller installer jcr installer jcrinstaller set field setfield installer repository repository set field setfield installer installer osgi installer osgiinstaller set field setfield installer settings mock settings mocksettings modes installer activate get mock component context getmockcomponentcontext thread sleep installer component context componentcontext component context component context componentcontext get mock component context getmockcomponentcontext component context setup fake component context componentcontext jcr installer jcrinstaller start component context componentcontext mockery mock component context componentcontext bundle context bundlecontext mockery mock bundle context bundlecontext dictionary string object empty dict emptydict hashtable string object mockery checking expectations allowing get properties getproperties return value returnvalue empty dict emptydict allowing get bundle context getbundlecontext return value returnvalue allowing get property getproperty string return value returnvalue allowing register service registerservice string object dictionary return value returnvalue component context component context wait for cycles waitforcycles jcr installer jcrinstaller installer initial cycle count initialcyclecount expected cycles expectedcycles timeout msec timeoutmsec exception end time endtime system current time millis currenttimemillis timeout msec timeoutmsec cycles system current time millis currenttimemillis end time endtime cycles installer get count ers getcounters jcr installer jcrinstaller loop counter initial cycle count initialcyclecount cycles expected cycles expectedcycles exception expected cycles expectedcycles installer cycles timeout msec timeoutmsec msec cycles watched folders watchedfolders supplied jcr installer jcrinstaller collection watched folder watchedfolder get watched folders getwatchedfolders jcr installer jcrinstaller installer installer config installerconfig cfg installer get configuration getconfiguration cfg clone watched folders clonewatchedfolders wait content processed jcr installer jcrinstaller wait after content changes waitaftercontentchanges event helper eventhelper event helper eventhelper jcr installer jcrinstaller installer exception start cycles startcycles installer get count ers getcounters jcr installer jcrinstaller loop counter wait jcr events delivered event helper eventhelper wait for events waitforevents res can timer rescantimer scan delay msec wait jcr events received thread sleep res can timer rescantimer scan delay msec wait jcr installer jcrinstaller cycles misc util miscutil wait for cycles waitforcycles installer start cycles startcycles wait installer thread exits wait for installer thread waitforinstallerthread jcr installer jcrinstaller installer timeout msec timeoutmsec exception end time endtime system current time millis currenttimemillis timeout msec timeoutmsec system current time millis currenttimemillis end time endtime installer get count ers getcounters jcr installer jcrinstaller loop counter exception jcr installer jcrinstaller thread signal timeout timeout msec timeoutmsec msec