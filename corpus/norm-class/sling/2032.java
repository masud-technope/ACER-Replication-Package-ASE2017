licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling scripting java script javascript internal java io exception ioexception java input stream reader inputstreamreader java reader java util hash map hashmap java util map java util map entry javax script bindings javax script comp ilable compilable javax script compiled script compiledscript javax script script context scriptcontext javax script script engine scriptengine javax script script engine factory scriptenginefactory javax script script exception scriptexception org apache commons io utils ioutils org apache sling api scripting sling bindings slingbindings org apache sling api scripting sling script helper slingscripthelper org apache sling commons class loader classloader dynamic class loader dynamicclassloader org apache sling scripting api abstract sling script engine abstractslingscriptengine org apache sling scripting api cached script cachedscript org apache sling scripting api script cache scriptcache org apache sling scripting api script name aware scriptnameaware org apache sling scripting core script name aware reader scriptnameawarereader org apache sling scripting java script javascript esp reader espreader org mozilla java script javascript class cache classcache org mozilla java script javascript context org mozilla java script javascript importer top level importertoplevel org mozilla java script javascript java script exception javascriptexception org mozilla java script javascript script org mozilla java script javascript script runtime scriptruntime org mozilla java script javascript scriptable org mozilla java script javascript scriptable object scriptableobject org mozilla java script javascript undefined org mozilla java script javascript wrap factory wrapfactory org mozilla java script javascript wrapper org slf logger org slf logger factory loggerfactory script engine scriptengine rhino int erpreter interpreter process sling requests server side java script javascript rhino java script engine rhinojavascriptengine abstract sling script engine abstractslingscriptengine comp ilable compilable logger logger logger factory loggerfactory get logger getlogger rhino java script engine rhinojavascriptengine string script script scriptable root scope rootscope script cache scriptcache script cache scriptcache rhino java script engine rhinojavascriptengine script engine factory scriptenginefactory factory scriptable root scope rootscope script cache scriptcache script cache scriptcache factory root scope rootscope root scope rootscope script cache scriptcache script cache scriptcache compiled script compiledscript compile string script script exception scriptexception reader reader reader input stream reader inputstreamreader io utils ioutils to input stream toinputstream script compile reader io utils ioutils close quietly closequietly reader compiled script compiledscript compile reader script reader scriptreader script exception scriptexception string script name scriptname get script name getscriptname script reader scriptreader cached script cachedscript cached script cachedscript script cache scriptcache get script getscript script name scriptname cached script cachedscript logger debug detected cached script script name scriptname cached script cachedscript get compiled script getcompiledscript script reader scriptreader wrap reader if esp script wrapreaderifespscript script reader scriptreader script name scriptname context rhino context rhinocontext context enter rhino context rhinocontext set optimization level setoptimizationlevel optimization level optimizationlevel script runtime scriptruntime has top call hastopcall rhino context rhinocontext setup context wrap factory wrapfactory wrap factory wrapfactory rhino java script engine factory rhinojavascriptenginefactory get factory getfactory get wrap factory getwrapfactory rhino context rhinocontext set wrap factory setwrapfactory wrap factory wrapfactory line number linenumber object security domain securitydomain script script rhino context rhinocontext compile reader compilereader script reader scriptreader script name scriptname line number linenumber security domain securitydomain sling compiled script slingcompiledscript sling compiled script slingcompiledscript sling compiled script slingcompiledscript script cached script cachedscript cached script cachedscript override string get script path getscriptpath script name scriptname override compiled script compiledscript get compiled script getcompiledscript sling compiled script slingcompiledscript sling avoid caching scripts determine script name scriptname equals script script cache scriptcache put script putscript cached script cachedscript logger debug script script cache script name scriptname sling compiled script slingcompiledscript io exception ioexception script exception scriptexception script exception scriptexception failure running script script name scriptname get message getmessage init cause initcause context exit object eval reader script reader scriptreader script context scriptcontext script context scriptcontext script exception scriptexception string script name scriptname get script name getscriptname script reader scriptreader reader reader wrap reader if esp script wrapreaderifespscript script reader scriptreader script name scriptname script reader scriptreader script name aware scriptnameaware script equals script name scriptname string script string script context scriptcontext get bindings getbindings script context scriptcontext engine scope script engine scriptengine filename script string extension get factory getfactory get extensions getextensions script ends with endswith extension script name scriptname script reader script name aware reader scriptnameawarereader reader script name scriptname compile reader eval script context scriptcontext reader wrap reader if esp script wrapreaderifespscript reader script reader scriptreader string script name scriptname script name scriptname ends with endswith rhino java script engine factory rhinojavascriptenginefactory esp script extension script reader scriptreader esp reader espreader script reader scriptreader script reader scriptreader map string object set bound properties setboundproperties scriptable scope bindings bindings map string object replaced properties replacedproperties hash map hashmap string object object entry object entryobject bindings entry set entryset entry entry entry entry object entryobject string string entry get key getkey object entry get value getvalue current property scriptable object scriptableobject has property hasproperty scope replaced properties replacedproperties scriptable object scriptableobject get property getproperty scope wrap object wrapped script runtime scriptruntime to object toobject scope scriptable object scriptableobject put property putproperty scope wrapped replaced properties replacedproperties get bound properties getboundproperties scriptable scope bindings bindings object ids scope get ids getids object ids string string key string object scope key scope scriptable wrapper bindings key wrapper unwrap bindings key reset bound properties resetboundproperties scriptable scope map string object properties scope properties properties size entry string object entry properties entry set entryset scriptable object scriptableobject put property putproperty scope entry get key getkey entry get value getvalue optimization level optimizationlevel rhino java script engine factory rhinojavascriptenginefactory get factory getfactory get optimization level getoptimizationlevel sling compiled script slingcompiledscript compiled script compiledscript script script script engine scriptengine engine sling compiled script slingcompiledscript script script script engine scriptengine engine script script engine engine override object eval script context scriptcontext script context scriptcontext script exception scriptexception bindings bindings script context scriptcontext get bindings getbindings script context scriptcontext engine scope container replaced properties map string object replaced properties replacedproperties scriptable scope is top level call istoplevelcall create rhino context execute script context rhino context rhinocontext context enter rhino context rhinocontext set optimization level setoptimizationlevel optimization level optimizationlevel script runtime scriptruntime has top call hastopcall rhino context rhinocontext reuse top scope included scope script runtime scriptruntime get top call scope gettopcallscope rhino context rhinocontext create request top scope importer top level importertoplevel support import package importpackage import classes importclasses functions scope importer top level importertoplevel global scope prototype scope set prototype setprototype root scope rootscope scope top level scope parent scope variables created assignments properties scope scope set parent scope setparentscope setup context wrap factory wrapfactory wrap factory wrapfactory rhino java script engine factory rhinojavascriptenginefactory get factory getfactory get wrap factory getwrapfactory rhino context rhinocontext set wrap factory setwrapfactory wrap factory wrapfactory top level call is top level call istoplevelcall add initial properties scope replaced properties replacedproperties set bound properties setboundproperties scope bindings object result script exec rhino context rhinocontext scope result wrapper result wrapper result unwrap result undefined result java script exception javascriptexception is top level call istoplevelcall script exception scriptexception script exception scriptexception details source name sourcename line number linenumber logger bindings sling bindings slingbindings log error get script stack trace getscriptstacktrace object get value getvalue wrapper wrapper unwrap throwable init cause initcause throwable get cause getcause set stack trace setstacktrace get stack trace getstacktrace throwable is top level call istoplevelcall string script name scriptname get script name getscriptname script context scriptcontext script exception scriptexception script exception scriptexception failure running script script name scriptname get message getmessage init cause initcause play properties scope bindings is top level call istoplevelcall get bound properties getboundproperties scope bindings properties replaced reset reset bound properties resetboundproperties scope replaced properties replacedproperties class loader classloader class loader classloader thread current thread currentthread get context class loader getcontextclassloader class loader classloader dynamic class loader dynamicclassloader dynamic class loader dynamicclassloader dynamic class loader dynamicclassloader dynamic class loader dynamicclassloader class loader classloader dynamic class loader dynamicclassloader is live islive loader thread dynamic loader dirty clear rhino cache avoid loader leaks scope class cache classcache class cache classcache class cache classcache scope class cache classcache clear caches clearcaches logger info detected dirty loader thread emptying rhino cache thread current thread currentthread get name getname context exit override script engine scriptengine get engine getengine engine string get script name getscriptname reader script reader scriptreader script reader scriptreader script name aware scriptnameaware script name aware scriptnameaware script reader scriptreader get script name getscriptname script string get script name getscriptname script context scriptcontext script context scriptcontext bindings bindings script context scriptcontext get bindings getbindings script context scriptcontext engine scope string script name scriptname string bindings script engine scriptengine filename script name scriptname equals script name scriptname script name scriptname sling script helper slingscripthelper sling sling script helper slingscripthelper bindings sling bindings slingbindings sling sling sling get script getscript get script resource getscriptresource get path getpath script