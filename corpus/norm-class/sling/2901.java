licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling jcr content loader contentloader internal java util collections singleton map singletonmap org hamcrest core matchers corematchers equal to equalto org hamcrest core matchers corematchers not null value notnullvalue org junit assert that assertthat javax jcr session org apache sling api resource resource org apache sling commons testing jcr repository util repositoryutil org apache sling jcr content loader contentloader internal read ers readers json reader jsonreader org apache sling jcr content loader contentloader internal read ers readers xml reader xmlreader org apache sling jcr content loader contentloader internal read ers readers zip reader zipreader org apache sling testing mock osgi mock bundle mockbundle org apache sling testing mock sling resource resolver type resourceresolvertype org apache sling testing mock sling junit sling context slingcontext org junit org junit ignore org junit rule org junit test org osgi framework bundle bundle content loader test bundlecontentloadertest rule sling context slingcontext context sling context slingcontext resource resolver type resourceresolvertype jcr oak bundle content loader bundlecontentloader content loader contentloader prepare content loader preparecontentloader exception prepare content read ers readers context register inject activate service registerinjectactivateservice json reader jsonreader context register inject activate service registerinjectactivateservice xml reader xmlreader context register inject activate service registerinjectactivateservice zip reader zipreader whiteboard holds read ers readers context register inject activate service registerinjectactivateservice content reader whiteboard contentreaderwhiteboard todo sling repository slingrepository registered box calling context resource resolver resourceresolver todo sling node types registered session session context resource resolver resourceresolver adapt to adaptto session repository util repositoryutil register sling node types registerslingnodetypes session register content loader service bundle helper bundlehelper bundle helper bundlehelper context register inject activate service registerinjectactivateservice content loader service contentloaderservice content reader whiteboard contentreaderwhiteboard whiteboard context get service getservice content reader whiteboard contentreaderwhiteboard content loader contentloader bundle content loader bundlecontentloader bundle helper bundlehelper whiteboard test load content with specific path loadcontentwithspecificpath exception bundle mock bundle mockbundle new bundle with initial content newbundlewithinitialcontent sling inf libs app path libs app content loader contentloader register bundle registerbundle context resource resolver resourceresolver adapt to adaptto session mock bundle mockbundle resource imported context resource resolver resourceresolver get resource getresource libs app assert that assertthat resource imported imported not null value notnullvalue assert that assertthat sling resource type resourcetype properly imported get resource type getresourcetype equal to equalto sling folder test load content with root path loadcontentwithrootpath exception bundle mock bundle mockbundle new bundle with initial content newbundlewithinitialcontent sling inf content loader contentloader register bundle registerbundle context resource resolver resourceresolver adapt to adaptto session mock bundle mockbundle resource imported context resource resolver resourceresolver get resource getresource libs app assert that assertthat resource imported imported not null value notnullvalue assert that assertthat sling resource type resourcetype properly imported get resource type getresourcetype equal to equalto sling folder test ignore todo unregister ignore xml reader xmlreader component test load xml as is loadxmlasis exception dump repo dumprepo bundle mock bundle mockbundle new bundle with initial content newbundlewithinitialcontent sling inf libs app path libs app ignore import providers ignoreimportproviders xml content loader contentloader register bundle registerbundle context resource resolver resourceresolver adapt to adaptto session mock bundle mockbundle resource imported context resource resolver resourceresolver get resource getresource libs app assert that assertthat resource imported imported not null value notnullvalue assert that assertthat sling resource type resourcetype properly imported get resource type getresourcetype equal to equalto sling folder resource xml file xmlfile context resource resolver resourceresolver get resource getresource libs app xml dump repo dumprepo assert that assertthat xml file imported xml file xmlfile not null value notnullvalue mock bundle mockbundle new bundle with initial content newbundlewithinitialcontent string initial content header initialcontentheader mock bundle mockbundle mock bundle mockbundle mock bundle mockbundle context bundle context bundlecontext mock bundle mockbundle set headers setheaders singleton map singletonmap sling initial content initial content header initialcontentheader mock bundle mockbundle dump repo dumprepo string start path startpath max depth maxdepth dump repo dumprepo start path startpath max depth maxdepth dump repo dumprepo string start path startpath max depth maxdepth current depth currentdepth resource resource context resource resolver resourceresolver get resource getresource start path startpath string builder stringbuilder format string builder stringbuilder current depth currentdepth format append format append string resource get name getname length resource get name getname system format format to string tostring resource get resource type getresourcetype current depth currentdepth current depth currentdepth max depth maxdepth resource child resource get children getchildren dump repo dumprepo child get path getpath max depth maxdepth current depth currentdepth