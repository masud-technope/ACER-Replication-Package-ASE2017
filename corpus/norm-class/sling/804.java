licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest java io exception ioexception java util hash map hashmap java util map org apache commons http client httpclient http exception httpexception org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling commons testing int egration integration http test base httptestbase org apache sling servlets post sling post constants slingpostconstants version parameter test versionparametertest http test base httptestbase string test base path sling tests string config servlet http base url system console config mgr configmgr org apache sling servlets impl version version info servlet versioninfoservlet string post url posturl map string string params override set up setup exception set up setup post url posturl http base url test base path system current time millis currenttimemillis params hash map hashmap string string params jcr mixin types mixintypes mix version able versionable string create version able node createversionablenode io exception ioexception json exception jsonexception params check in new version able nodes checkinnewversionablenodes params prop string location test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix params test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix params params prop params auto check out autocheckout test client testclient post location params params prop test client testclient post location params string content get content getcontent location txt content type plain assert true asserttrue node location checked content jcr is checked out ischeckedout assert equals assertequals get prop getprop location json location test version parameter testversionparameter io exception ioexception json exception jsonexception interrupted exception interruptedexception wait until sling is stable waituntilslingisstable string location create version able node createversionablenode assert equals assertequals get prop getprop location json assert equals assertequals get prop getprop location json wait until sling is stable waituntilslingisstable http exception httpexception io exception ioexception interrupted exception interruptedexception thread sleep test client testclient http base url json fail sling instance fails resp ond respond status string get prop getprop string url json exception jsonexception io exception ioexception json object jsonobject content json object jsonobject get content getcontent url content type json content get string getstring prop