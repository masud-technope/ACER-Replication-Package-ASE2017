licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution transport impl javax annotation nonnull java byte array input stream bytearrayinputstream java io exception ioexception java input stream inputstream java util array list arraylist java util arrays java util list org apache commons io utils ioutils org apache http client fluent content org apache http client fluent executor org apache http client fluent request org apache http client fluent response org apache http entity content type contenttype org apache sling api resource resource resolver resourceresolver org apache sling distribution common distribution exception distributionexception org apache sling distribution log impl default distribution log defaultdistributionlog org apache sling distribution serialization distribution package distributionpackage org apache sling distribution serialization distribution package builder distributionpackagebuilder org apache sling distribution transport distribution transport secret distributiontransportsecret org apache sling distribution transport distribution transport secret provider distributiontransportsecretprovider advanced http link org apache sling distribution transport core distribution transport distributiontransport supporting custom http headers body advanced http distribution transport advancedhttpdistributiontransport simple http distribution transport simplehttpdistributiontransport string path variable path distribution endpoint distributionendpoint distribution endpoint distributionendpoint use custom headers usecustomheaders string custom headers customheaders use custom body usecustombody string custom body custombody advanced http distribution transport advancedhttpdistributiontransport default distribution log defaultdistributionlog log use custom headers usecustomheaders string custom headers customheaders use custom body usecustombody string custom body custombody distribution endpoint distributionendpoint distribution endpoint distributionendpoint distribution package builder distributionpackagebuilder package builder packagebuilder distribution transport secret provider distributiontransportsecretprovider secret provider secretprovider max no of packages maxnoofpackages log distribution endpoint distributionendpoint package builder packagebuilder secret provider secretprovider max no of packages maxnoofpackages use custom headers usecustomheaders use custom headers usecustomheaders custom headers customheaders custom headers customheaders use custom body usecustombody use custom body usecustombody custom body custombody custom body custombody distribution endpoint distributionendpoint distribution endpoint distributionendpoint override deliver package deliverpackage nonnull resource resolver resourceresolver resource resolver resourceresolver nonnull distribution package distributionpackage distribution package distributionpackage distribution exception distributionexception log info delivering distribution package distributionpackage get id getid distribution endpoint distributionendpoint get uri geturi secret provider secretprovider distribution transport secret distributiontransportsecret secret secret provider secretprovider get secret getsecret distribution endpoint distributionendpoint get uri geturi executor executor authenticate secret executor new instance newinstance deliver package deliverpackage executor distribution package distributionpackage distribution endpoint distributionendpoint io exception ioexception distribution exception distributionexception string get custom ized headers getcustomizedheaders string additional headers additionalheaders string action string paths list string headers array list arraylist string string additional header additionalheader additional headers additionalheaders idx additional header additionalheader index of indexof idx headers add additional header additionalheader string action selector actionselector additional header additionalheader substring idx trim string header additional header additionalheader substring idx trim action selector actionselector equals ignore case equalsignorecase action action selector actionselector equals headers add header string builder stringbuilder string builder stringbuilder paths paths length append paths paths length append append paths string path to string tostring list string bound headers boundheaders array list arraylist string string header headers bound headers boundheaders add header replace path variable path bound headers boundheaders to array toarray string bound headers boundheaders size deliver package deliverpackage executor executor distribution package distributionpackage distribution package distributionpackage distribution endpoint distributionendpoint distribution endpoint distributionendpoint io exception ioexception string type distribution package distributionpackage get type gettype request req request post distribution endpoint distributionendpoint get uri geturi use expect continue useexpectcontinue use custom headers usecustomheaders string custom ized headers customizedheaders get custom ized headers getcustomizedheaders custom headers customheaders distribution package distributionpackage get info getinfo get request type getrequesttype distribution package distributionpackage get info getinfo get paths getpaths string header custom ized headers customizedheaders add header addheader req header input stream inputstream input stream inputstream response response use custom body usecustombody string body custom body custombody custom body custombody input stream inputstream byte array input stream bytearrayinputstream body get bytes getbytes utf input stream inputstream distribution package distributionpackage create input stream createinputstream req req body stream bodystream input stream inputstream content type contenttype application octet stream response executor execute req io utils ioutils close quietly closequietly input stream inputstream content content response return content returncontent log info distribution content type delivered object type arrays to string tostring distribution package distributionpackage get info getinfo get paths getpaths content add header addheader request req string header idx header index of indexof idx string header name headername header substring idx trim string header value headervalue header substring idx trim req add header addheader header name headername header value headervalue