licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling discovery commons java util collection java util collections java util hash map hashmap java util hash set hashset java util iterator java util map java util javax annotation nonnull javax annotation nullable org apache sling discovery cluster view clusterview org apache sling discovery instance description instancedescription org apache sling discovery instance filter instancefilter org apache sling discovery topology event topologyevent org apache sling discovery topology view topologyview code instances diff instancesdiff combine filter collections code instance description instancedescription instances collection collection comparison code instance description instancedescription instances basis sling identifier instances sling identifier considered equal note collection unique instances instances sling identifier code instances diff instancesdiff collections duplicated sling code illegal argument exception illegalargumentexception instances diff instancesdiff filter local instances link instance description instancedescription is local islocal instance filter instancefilter local instance local instance filter localinstancefilter filter filters local instances link instance description instancedescription is local islocal instance filter instancefilter local instance not filter notfilter local instance filter leader instances link instance description instancedescription is leader isleader instance filter instancefilter leader instance leader instance filter leaderinstancefilter filter filters leader instances link instance description instancedescription is leader isleader instance filter instancefilter leader instance not filter notfilter leader instance track code instance description instancedescription instances map instance sling identifiers values code instance description instancedescription instances descriptions map string instance description instancedescription old instances oldinstances track code instance description instancedescription instances map instance sling identifiers values code instance description instancedescription instances descriptions map string instance description instancedescription new instances newinstances create code instances diff instancesdiff based instances code topology view topologyview topology views contained code topology event topologyevent event param event code event topology views computing topology views code substituted empty collection instances illegal argument exception illegalargumentexception collections duplicated sling identifiers instances diff instancesdiff nonnull topology event topologyevent event instances or empty instancesorempty event get old view getoldview instances or empty instancesorempty event get new view getnewview create code instances diff instancesdiff based instances code topology view topologyview topology views param old view oldview code topology view collection computing param new view newview code topology view form collection computing illegal argument exception illegalargumentexception collections duplicated sling identifiers instances diff instancesdiff nonnull topology view topologyview old view oldview nonnull topology view topologyview new view newview old view oldview get instances getinstances new view newview get instances getinstances create code instances diff instancesdiff based instances code cluster view clusterview cluster views param old view oldview code cluster view computing param new view newview code cluster view computing illegal argument exception illegalargumentexception collections duplicated sling identifiers instances diff instancesdiff nonnull cluster view clusterview old view oldview nonnull cluster view clusterview new view newview old view oldview get instances getinstances new view newview get instances getinstances create code instances diff instancesdiff based code collection collections instances param old instances oldinstances code collection instances computing param new instances newinstances code collection instances computing param type instance extend code instance description instancedescription illegal argument exception illegalargumentexception collections duplicated sling identifiers instance description instancedescription instances diff instancesdiff nonnull collection old instances oldinstances nonnull collection new instances newinstances new instances newinstances get instances map getinstancesmap new instances newinstances old instances oldinstances get instances map getinstancesmap old instances oldinstances returns code instance set instanceset code instance description instancedescription instances contained collection code instance description instancedescription instances contained collections method retain collections depending parameter retain from new view retainfromnewview param retain from new collection retainfromnewcollection code order retain instances collection code order retain instances collection code instance collection instancecollection collection code instance description instancedescription instances collections nonnull instance collection instancecollection retain from new collection retainfromnewcollection instance collection instancecollection partition all partitionall retain from new collection retainfromnewcollection returns code instance collection instancecollection collection code instance description instancedescription instances contained collection collection code instance collection instancecollection collection instances topology collection collection nonnull instance collection instancecollection instance collection instancecollection partition added partitionadded returns code instance collection instancecollection collection code instance description instancedescription instances contained collection collection code instance set instanceset instances collection collection nonnull instance collection instancecollection removed instance collection instancecollection partition removed partitionremoved returns code instance set instanceset collection code instance description instancedescription instances contained collection collection method retain code instance description instancedescription instances collections depending parameter retain from new view retainfromnewview param retain from new collection retainfromnewcollection code order retain instances collection code order retain instances collection code instance collection instancecollection collection code instance description instancedescription instances contained collections nonnull instance collection instancecollection retained retain from new collection retainfromnewcollection instance collection instancecollection partition retained partitionretained retain from new collection retainfromnewcollection returns code instance collection instancecollection collection code instance description instancedescription instances contained collections method retain code instance description instancedescription instances collections depending parameter retain from new view retainfromnewview param retain from new collection retainfromnewcollection code order retain instances collection code order retain instances collection param property changed propertychanged code order instances properties changed collections code order instances properties changed code instance collection instancecollection collection code instance description instancedescription instances contained views nonnull instance collection instancecollection retained retain from new collection retainfromnewcollection property changed propertychanged instance collection instancecollection partition retained partitionretained retain from new collection retainfromnewcollection property changed propertychanged nonnull map string instance description instancedescription partition all partitionall retain from new collection retainfromnewcollection map string instance description instancedescription partition hash map hashmap string instance description instancedescription retain from new collection retainfromnewcollection partition put all putall old instances oldinstances partition put all putall new instances newinstances partition put all putall new instances newinstances partition put all putall old instances oldinstances partition nonnull map string instance description instancedescription partition removed partitionremoved map string instance description instancedescription partition hash map hashmap string instance description instancedescription old instances oldinstances partition key set keyset remove all removeall new instances newinstances key set keyset partition nonnull map string instance description instancedescription partition added partitionadded map string instance description instancedescription partition hash map hashmap string instance description instancedescription new instances newinstances partition key set keyset remove all removeall old instances oldinstances key set keyset partition nonnull map string instance description instancedescription partition retained partitionretained retain from new collection retainfromnewcollection property changed propertychanged map string instance description instancedescription partition hash map hashmap string instance description instancedescription map entry string instance description instancedescription old entry oldentry old instances oldinstances entry set entryset string sling id slingid old entry oldentry get key getkey instance description instancedescription new description newdescription new instances newinstances sling id slingid new description newdescription instance description instancedescription old description olddescription old entry oldentry get value getvalue properties same propertiessame new description newdescription get properties getproperties equals old description olddescription get properties getproperties properties same propertiessame property changed propertychanged properties same propertiessame property changed propertychanged partition sling id slingid retain from new collection retainfromnewcollection new description newdescription old description olddescription partition nonnull map string instance description instancedescription partition retained partitionretained retain from new collection retainfromnewcollection map string instance description instancedescription partition hash map hashmap string instance description instancedescription retain from new collection retainfromnewcollection partition put all putall new instances newinstances partition key set keyset retain all retainall old instances oldinstances key set keyset partition put all putall old instances oldinstances partition key set keyset retain all retainall new instances newinstances key set keyset partition nonnull instance description instancedescription instances or empty instancesorempty nullable topology view topologyview topology view topologyview topology view topologyview topology view topologyview get instances getinstances collections instance description instancedescription empty set emptyset nonnull instance description instancedescription map string instance description instancedescription get instances map getinstancesmap nonnull collection instances map string instance description instancedescription instances map instancesmap hash map hashmap string instance description instancedescription instance description instancedescription instance instances string sling id slingid instance get sling id getslingid sling id slingid instances map instancesmap sling id slingid instance illegal argument exception illegalargumentexception string format duplicate d duplicated instance sling id slingid sling id slingid instances map instancesmap not filter notfilter instance filter instancefilter instance filter instancefilter filter not filter notfilter instance filter instancefilter filter filter filter accept instance description instancedescription instance filter accept instance local instance filter localinstancefilter instance filter instancefilter accept instance description instancedescription instance instance is local islocal leader instance filter leaderinstancefilter instance filter instancefilter accept instance description instancedescription instance instance is leader isleader in cluster view inclusterview instance filter instancefilter cluster view clusterview view in cluster view inclusterview cluster view clusterview view view view accept instance description instancedescription instance view get id getid equals instance get cluster view getclusterview get id getid code instance collection instancecollection collection filter instances custom filter implementing code instance filter instancefilter pre defined filters conditions joined combined logical instance collection instancecollection h olds holds instances filtered map instance sling identifiers values code instance description instancedescription instances descriptions map string instance description instancedescription instances h olds holds filters applied and ed anded instance filter instancefilter filters hash set hashset instance filter instancefilter filter instances custom code instance filter instancefilter filter param filter filter applied instances code nonnull instance collection instancecollection filter with filterwith nullable instance filter instancefilter filter filter filters add filter local instance link instance description instancedescription is local islocal code nonnull instance collection instancecollection is local islocal filters add local instance filter local instances link instance description instancedescription is local islocal code nonnull instance collection instancecollection is not local isnotlocal filters add local instance leader instances link instance description instancedescription is leader isleader code nonnull instance collection instancecollection is leader isleader filters add leader instance filter leader instances link instance description instancedescription is leader isleader code nonnull instance collection instancecollection is not leader isnotleader filters add leader instance instances contained code cluster view clusterview cluster view comparison cluster views basis cluster view identifier cluster views identifier considered equal param cluster view clusterview cluster view filter instances code nonnull instance collection instancecollection is in cluster view isinclusterview nullable cluster view clusterview cluster view clusterview cluster view clusterview filters add in cluster view inclusterview cluster view clusterview filter instances contained code cluster view clusterview cluster view comparison cluster views basis cluster view identifier cluster views identifier considered equal param cluster view clusterview cluster view filter instances code nonnull instance collection instancecollection is not in cluster view isnotinclusterview nullable cluster view clusterview cluster view clusterview cluster view clusterview filters add not filter notfilter in cluster view inclusterview cluster view clusterview collection code instance description instancedescription instances filtered filtered collection instances nonnull collection instance description instancedescription apply filters applyfilters instances code instances diff instancesdiff param instances map instances filtered instance collection instancecollection nonnull map string instance description instancedescription instances instances instances nonnull collection instance description instancedescription apply filters applyfilters iterator map entry string instance description instancedescription entries instances entry set entryset iterator entries has next hasnext map entry string instance description instancedescription entry entries instance filter instancefilter filter filters filter accept entry get value getvalue entries remove collections instance description instancedescription unmodifiable collection unmodifiablecollection instances values