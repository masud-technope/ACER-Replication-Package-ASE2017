licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling models impl java util collection java util iterator java util concurrent concurrent hash map concurrenthashmap java util concurrent concurrent map concurrentmap java util concurrent concurrent navigable map concurrentnavigablemap java util concurrent concurrent skip list map concurrentskiplistmap org apache commons lang string utils stringutils org apache sling models impl model model class modelclass org apache sling models spi implementation picker implementationpicker org apache sling models spi injectorspecific static inject annotation processor factory staticinjectannotationprocessorfactory collects alternative adapter implementations defined model adapters attribute multiple models implement adapter collected chose implementation picker implementationpicker add itionally additionally acts cache model classes adapter definitions adapter implementation type implementation thread safe adapter impl ementations adapterimplementations concurrent map concurrentmap string concurrent navigable map concurrentnavigablemap string model class modelclass adapter impl ementations adapterimplementations concurrent hash map concurrenthashmap string concurrent navigable map concurrentnavigablemap string model class modelclass concurrent map concurrentmap string model class modelclass model classes modelclasses concurrent hash map concurrenthashmap string model class modelclass implementation picker implementationpicker sorted implementation pickers sortedimplementationpickers implementation picker implementationpicker static inject annotation processor factory staticinjectannotationprocessorfactory sorted static inject annotation processor factories sortedstaticinjectannotationprocessorfactories static inject annotation processor factory staticinjectannotationprocessorfactory set implementation pickers setimplementationpickers collection implementation picker implementationpicker implementation pickers implementationpickers sorted implementation pickers sortedimplementationpickers implementation pickers implementationpickers to array toarray implementation picker implementationpicker implementation pickers implementationpickers size implementation picker implementationpicker get implementation pickers getimplementationpickers sorted implementation pickers sortedimplementationpickers static inject annotation processor factory staticinjectannotationprocessorfactory get static inject annotation processor factories getstaticinjectannotationprocessorfactories sorted static inject annotation processor factories sortedstaticinjectannotationprocessorfactories set static inject annotation processor factories setstaticinjectannotationprocessorfactories collection static inject annotation processor factory staticinjectannotationprocessorfactory factories sorted static inject annotation processor factories sortedstaticinjectannotationprocessorfactories factories to array toarray static inject annotation processor factory staticinjectannotationprocessorfactory factories size update processor factories in model classes updateprocessorfactoriesinmodelclasses updates link model class modelclass instances updates list inject annotation processor factories update processor factories in model classes updateprocessorfactoriesinmodelclasses iterator model class modelclass items model classes modelclasses values iterator update processor factories in model classes updateprocessorfactoriesinmodelclasses items iterator concurrent navigable map concurrentnavigablemap string model class modelclass map items mapitems adapter impl ementations adapterimplementations values iterator map items mapitems has next hasnext concurrent navigable map concurrentnavigablemap string model class modelclass map item mapitem map items mapitems update processor factories in model classes updateprocessorfactoriesinmodelclasses map item mapitem values iterator update processor factories in model classes updateprocessorfactoriesinmodelclasses iterator model class modelclass items items has next hasnext model class modelclass item items item update processor factories updateprocessorfactories sorted static inject annotation processor factories sortedstaticinjectannotationprocessorfactories add implementation mapping adapter type param adapter type adaptertype adapter type param impl type impltype implementation type suppress warnings suppresswarnings unchecked add adapter type adaptertype impl type impltype string key adapter type adaptertype get name getname adapter type adaptertype impl type impltype model classes modelclasses key model class modelclass impl type impltype sorted static inject annotation processor factories sortedstaticinjectannotationprocessorfactories concurrent map concurrentmap synchronize explicitly apply atomic operations adapter impl ementations adapterimplementations concurrent navigable map concurrentnavigablemap string model class modelclass implementations adapter impl ementations adapterimplementations key implementations consistent ordering independent bundle loading concurrent skip list map concurrentskiplistmap sorts implementations concurrent skip list map concurrentskiplistmap string model class modelclass adapter impl ementations adapterimplementations key implementations implementations impl type impltype get name getname model class modelclass impl type impltype sorted static inject annotation processor factories sortedstaticinjectannotationprocessorfactories remove implementation mapping adapter type param adapter type name adaptertypename adapter type param impl type name impltypename implementation type remove string adapter type name adaptertypename string impl type name impltypename string key adapter type name adaptertypename string utils stringutils equals adapter type name adaptertypename impl type name impltypename model classes modelclasses remove key concurrent map concurrentmap synchronize explicitly apply atomic operations adapter impl ementations adapterimplementations concurrent navigable map concurrentnavigablemap string model class modelclass implementations adapter impl ementations adapterimplementations key implementations implementations remove impl type name impltypename implementations is empty isempty adapter impl ementations adapterimplementations remove key remove implementation mappings remove all removeall model classes modelclasses clear adapter impl ementations adapterimplementations clear lookup matching implementation adapter type enquiring link implementation picker implementationpicker services param adapter type adaptertype adapter type param adaptable adaptable reference implementation type detected suppress warnings suppresswarnings unchecked model type modeltype model class modelclass model type modeltype lookup model type modeltype adapter type adaptertype object adaptable string key adapter type adaptertype get name getname lookup cache models adapter classes model class modelclass model type modeltype model class modelclass model class modelclass model type modeltype model classes modelclasses key model class modelclass model class modelclass cache adapter classes concurrent navigable map concurrentnavigablemap string model class modelclass implementations adapter impl ementations adapterimplementations key implementations implementations is empty isempty collection model class modelclass implementations collection implementationscollection implementations values model class modelclass implementation wrappers array implementationwrappersarray implementations collection implementationscollection to array toarray model class modelclass implementations collection implementationscollection size prepare array implementation picker implementations array implementationsarray implementations collection implementationscollection size implementation wrappers array implementationwrappersarray length implementations array implementationsarray implementation wrappers array implementationwrappersarray get type gettype implementation picker implementationpicker picker sorted implementation pickers sortedimplementationpickers implementation picker pick adapter type adaptertype implementations array implementationsarray adaptable implementation implementation wrappers array implementationwrappersarray length implementation implementation wrappers array implementationwrappersarray get type gettype model class modelclass model type modeltype implementation wrappers array implementationwrappersarray param adapter type adaptertype type check code type model adapter model type modeltype is model class ismodelclass model type modeltype adapter type adaptertype string key adapter type adaptertype get name getname lookup cache models adapter classes model class modelclass model type modeltype model class modelclass model class modelclass model type modeltype model classes modelclasses key model class modelclass cache adapter classes concurrent navigable map concurrentnavigablemap string model class modelclass implementations adapter impl ementations adapterimplementations key implementations implementations is empty isempty