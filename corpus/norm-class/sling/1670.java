licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest servlets post java io exception ioexception java util array list arraylist java util arrays java util hash map hashmap java util list java util map javax jcr repository javax jcr repository exception repositoryexception javax jcr session javax jcr simple credentials simplecredentials javax jcr observation event javax jcr observation event iterator eventiterator javax jcr observation event listener eventlistener javax jcr observation observation manager observationmanager javax servlet http http servlet response httpservletresponse org apache commons http client httpclient credentials org apache commons http client httpclient name value pair namevaluepair org apache commons http client httpclient username password credentials usernamepasswordcredentials org apache jackrabbit commons jcr utils jcrutils org apache sling commons json json array jsonarray org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject org apache sling commons testing int egration integration name value pair list namevaluepairlist org apache sling launchpad webapp int egrationtest integrationtest authenticated test util authenticatedtestutil org apache sling servlets post sling post constants slingpostconstants test node updates microjax post servlet microjaxpostservlet post servlet update test postservletupdatetest authenticated test util authenticatedtestutil string test base path sling tests string post url posturl string test user id testuserid override set up setup exception set up setup post url posturl http base url test base path system current time millis currenttimemillis javadoc org apache sling commons testing int egration integration http test base httptestbase tear down teardown override tear down teardown exception test user id testuserid remove test user exists string post url posturl http base url system user manager usermanager user test user id testuserid delete html list name value pair namevaluepair post params postparams array list arraylist name value pair namevaluepair assert authenticated admin post status assertauthenticatedadminpoststatus post url posturl http servlet response httpservletresponse post params postparams tear down teardown test post path is unique testpostpathisunique io exception ioexception assert http status asserthttpstatus post url posturl http servlet response httpservletresponse path exist test post url posturl test update with changes testupdatewithchanges io exception ioexception map string string props hash map hashmap string string props props string location test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props string content get content getcontent location json content type json assert java script assertjavascript content println data data props test client testclient method called create node createnode post updates string new location newlocation test client testclient create node createnode location props assert equals assertequals location changed post existing node location new location newlocation content get content getcontent location json content type json assert java script assertjavascript content println data data test update no changes testupdatenochanges io exception ioexception map string string props hash map hashmap string string props props string location test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props string content get content getcontent location json content type json assert java script assertjavascript content println data data props clear test client testclient method called create node createnode post updates string new location newlocation test client testclient create node createnode location props assert equals assertequals location changed post existing node location new location newlocation content get content getcontent location json content type json assert java script assertjavascript content println data data test update some changes testupdatesomechanges io exception ioexception map string string props hash map hashmap string string props props props stored string location test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props string content get content getcontent location json content type json assert java script assertjavascript content println data data props clear props props stored test client testclient method called create node createnode post updates string new location newlocation test client testclient create node createnode location props assert equals assertequals location changed post existing node location new location newlocation content get content getcontent location json content type json assert java script assertjavascript content println data data test multivalue hint testmultivaluehint io exception ioexception map string string props hash map hashmap string string props props type hint typehint string props string location test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props string content get content getcontent location json content type json assert true asserttrue content index of indexof assert true asserttrue content index of indexof test mixin types testmixintypes io exception ioexception json exception jsonexception create node mixin node types map string string props hash map hashmap string string props jcr primary type primarytype unstructured string location test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props mixins string content get content getcontent location json content type json json object jsonobject json json object jsonobject content assert false assertfalse jcr mixin types mixintypes expected json jcr mixin types mixintypes add mixin props clear props jcr mixin types mixintypes mix version able versionable test client testclient create node createnode location props content get content getcontent location json content type json json json object jsonobject content assert true asserttrue jcr mixin types mixintypes expected setting json jcr mixin types mixintypes object mix object mixobject json jcr mixin types mixintypes assert true asserttrue jcr mixin types mixintypes array mix object mixobject json array jsonarray json array jsonarray mix json array jsonarray mix object mixobject assert true asserttrue jcr mixin types mixintypes single entry mix length assert equals assertequals jcr mixin types mixintypes correct mix version able versionable mix remove mixin props clear props jcr mixin types mixintypes delete test client testclient create node createnode location props content get content getcontent location json content type json json json object jsonobject content no mixins nomixins json jcr mixin types mixintypes json getjsonarray jcr mixin types mixintypes length assert true asserttrue jcr mixin types mixintypes expected clearing no mixins nomixins test updating node type testupdatingnodetype io exception ioexception json exception jsonexception create node mixin node types map string string props hash map hashmap string string props jcr primary type primarytype unstructured string location test client testclient create node createnode post url posturl sling post constants slingpostconstants create suffix props correct node type nodetype string content get content getcontent location json content type json json object jsonobject json json object jsonobject content assert true asserttrue jcr primary type primarytype isn correctly json get string getstring jcr primary type primarytype equals unstructured change node type nodetype props clear props jcr primary type primarytype sling folder test client testclient create node createnode location props correct node type nodetype content get content getcontent location json content type json json json object jsonobject content assert true asserttrue jcr primary type primarytype isn correctly json get string getstring jcr primary type primarytype equals sling folder