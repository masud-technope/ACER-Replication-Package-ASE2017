licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest user manager usermanager java io exception ioexception java util array list arraylist java util list java util random javax servlet http http servlet response httpservletresponse org apache commons http client httpclient credentials org apache commons http client httpclient name value pair namevaluepair org apache commons http client httpclient username password credentials usernamepasswordcredentials org apache sling commons json json exception jsonexception org apache sling commons json json object jsonobject tests create group creategroup sling post operation create group test creategrouptest user manager test util usermanagertestutil random random random system current time millis currenttimemillis string test group id testgroupid override tear down teardown exception test group id testgroupid remove test group exists string post url posturl http base url system user manager usermanager group test group id testgroupid delete html list name value pair namevaluepair post params postparams array list arraylist name value pair namevaluepair assert authenticated admin post status assertauthenticatedadminpoststatus post url posturl http servlet response httpservletresponse post params postparams tear down teardown test create group testcreategroup io exception ioexception json exception jsonexception string post url posturl http base url system user manager usermanager group create html test group id testgroupid test group testgroup random next int nextint list name value pair namevaluepair post params postparams array list arraylist name value pair namevaluepair post params postparams add name value pair namevaluepair test group id testgroupid post params postparams add name value pair namevaluepair marker test group id testgroupid assert authenticated admin post status assertauthenticatedadminpoststatus post url posturl http servlet response httpservletresponse post params postparams fetch group profile json verify settings string get url geturl http base url system user manager usermanager group test group id testgroupid json credentials creds username password credentials usernamepasswordcredentials admin admin string json get authenticated content getauthenticatedcontent creds get url geturl content type json http servlet response httpservletresponse assert not null assertnotnull json json object jsonobject json obj jsonobj json object jsonobject json assert equals assertequals test group id testgroupid json obj jsonobj get string getstring marker test create group missing group id testcreategroupmissinggroupid io exception ioexception string post url posturl http base url system user manager usermanager group create html list name value pair namevaluepair post params postparams array list arraylist name value pair namevaluepair assert authenticated admin post status assertauthenticatedadminpoststatus post url posturl http servlet response httpservletresponse internal server error post params postparams test create group already exists testcreategroupalreadyexists io exception ioexception string post url posturl http base url system user manager usermanager group create html test group id testgroupid test group testgroup random next int nextint list name value pair namevaluepair post params postparams array list arraylist name value pair namevaluepair post params postparams add name value pair namevaluepair test group id testgroupid assert authenticated admin post status assertauthenticatedadminpoststatus post url posturl http servlet response httpservletresponse post params postparams post info fail assert authenticated admin post status assertauthenticatedadminpoststatus post url posturl http servlet response httpservletresponse internal server error post params postparams test create group with extra properties testcreategroupwithextraproperties io exception ioexception json exception jsonexception string post url posturl http base url system user manager usermanager group create html test group id testgroupid test group testgroup random next int nextint list name value pair namevaluepair post params postparams array list arraylist name value pair namevaluepair post params postparams add name value pair namevaluepair test group id testgroupid post params postparams add name value pair namevaluepair marker test group id testgroupid post params postparams add name value pair namevaluepair display name displayname test group post params postparams add name value pair namevaluepair url http apache org assert authenticated admin post status assertauthenticatedadminpoststatus post url posturl http servlet response httpservletresponse post params postparams fetch group profile json verify settings string get url geturl http base url system user manager usermanager group test group id testgroupid json credentials creds username password credentials usernamepasswordcredentials admin admin string json get authenticated content getauthenticatedcontent creds get url geturl content type json http servlet response httpservletresponse assert not null assertnotnull json json object jsonobject json obj jsonobj json object jsonobject json assert equals assertequals test group id testgroupid json obj jsonobj get string getstring marker assert equals assertequals test group json obj jsonobj get string getstring display name displayname assert equals assertequals http apache org json obj jsonobj get string getstring url test sling test create group response as n testcreategroupresponseasjson io exception ioexception json exception jsonexception string post url posturl http base url system user manager usermanager group create json test group id testgroupid test group testgroup random next int nextint list name value pair namevaluepair post params postparams array list arraylist name value pair namevaluepair post params postparams add name value pair namevaluepair test group id testgroupid post params postparams add name value pair namevaluepair marker test group id testgroupid credentials creds username password credentials usernamepasswordcredentials admin admin string json get authenticated post content getauthenticatedpostcontent creds post url posturl content type json post params postparams http servlet response httpservletresponse json response parsed json object json object jsonobject json obj jsonobj json object jsonobject json assert not null assertnotnull json obj jsonobj