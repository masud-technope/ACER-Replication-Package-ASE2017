licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling osgi obr java file java file output stream fileoutputstream java i o exception ioexception java input stream inputstream java output stream outputstream java output stream writer outputstreamwriter java print writer printwriter java unsupported encoding exception unsupportedencodingexception java net url decoder urldecoder java net url encoder urlencoder java util java util hash set hashset java util iterator java util list java util java util regex pattern java util regex pattern syntax exception patternsyntaxexception java util zip zip entry zipentry java util zip zip output stream zipoutputstream javax servlet servlet exception servletexception javax servlet http cookie javax servlet http http servlet httpservlet javax servlet http http servlet request httpservletrequest javax servlet http http servlet response httpservletresponse org apache commons file upload fileupload file item fileitem org apache commons file upload fileupload file upload exception fileuploadexception org apache commons file upload fileupload disk disk file item factory diskfileitemfactory org apache commons file upload fileupload servlet servlet file upload servletfileupload org apache commons file upload fileupload servlet servlet request context servletrequestcontext org apache commons i o utils ioutils org apache felix bundle repository bundlerepository repository admin impl repositoryadminimpl org apache felix scr annotations component org apache felix scr annotations properties org apache felix scr annotations property org apache felix scr annotations reference org apache felix scr annotations reference cardinality referencecardinality org apache felix scr annotations reference policy referencepolicy org osgi framework service reference servicereference org osgi service component component context componentcontext org osgi service http http context httpcontext org osgi service http http service httpservice org osgi service log log service logservice org osgi service obr repository admin repositoryadmin org osgi service obr resolver code osg i bundle repository servlet osgibundlerepositoryservlet code todo component metatype properties property service description osg i osgi bundle repository obr property manager root property obr location obrlocation obr property obr name obrname internal osg i bundle repository servlet osgibundlerepositoryservlet http servlet httpservlet serialversionuid names bundles included down loaded downloaded repositories string required bundles org apache sling log org apache sling assembly org apache felix bundle repository bundlerepository org apache felix http jetty org eclipse equinox http servlet org apache sling sling servlet bridge reference cardinality reference cardinality referencecardinality optional unary policy reference policy referencepolicy dynamic log service logservice log reference http service httpservice http service httpservice component context componentcontext ctx service reference servicereference repository repository string web manager root webmanagerroot override init servlet exception servletexception string location get servlet config getservletconfig get init parameter getinitparameter obr location obrlocation location location length location obr ensure absolute path file loc file locfile file location loc file locfile is absolute isabsolute string parent ctx get bundle context getbundlecontext get property getproperty sling parent parent length parent system get property getproperty user dir loc file locfile file parent location get absolute file getabsolutefile loc file locfile exists loc file locfile is directory isdirectory servlet exception servletexception repository location loc file locfile get absolute path getabsolutepath directory loc file locfile mkdirs servlet exception servletexception create path repository location loc file locfile get absolute path getabsolutepath string default repo name defaultreponame get servlet config getservletconfig get init parameter getinitparameter obr name obrname repository repository default repo name defaultreponame loc file locfile i o exception ioexception ioe servlet exception servletexception load repository properties ioe override do get doget http servlet request httpservletrequest req http servlet response httpservletresponse resp i o exception ioexception send repository xml requested req getrequesturi ends with endswith repository xml printrepositoryxml req resp check dumping repository requested req getrequesturi ends with endswith repository zip dump repository dumprepository req get parameter values getparametervalues bundle resp check bundle requested string bundle get name getname req getrequesturi resource resource repository get resource getresource bundle resource prevent returning correct i o exception ioexception bundle bundle repository req get parameter getparameter info dump info dumpinfo resp req getrequesturi resource resp send redirect sendredirect get parent getparent req getrequesturi req get parameter getparameter remove repository remove resource removeresource bundle resp send redirect sendredirect get parent getparent req getrequesturi spool bundle spoolbundle resp resource i o exception ioexception ioe list bundles form list bundles listbundles req resp override do post dopost http servlet request httpservletrequest req http servlet response httpservletresponse resp servlet exception servletexception i o exception ioexception check dumping repository requested req getrequesturi ends with endswith repository zip dump repository dumprepository req get parameter values getparametervalues bundle resp resp send redirect sendredirect req getrequesturi servlet file upload servletfileupload is multipart content ismultipartcontent servlet request context servletrequestcontext req resp send redirect sendredirect req getrequesturi create factory disk based file items disk file item factory diskfileitemfactory factory disk file item factory diskfileitemfactory factory set size threshold setsizethreshold create file upload handler servlet file upload servletfileupload upload servlet file upload servletfileupload factory upload set size max setsizemax parse request no redirect noredirect string bundle location bundlelocation input stream inputstream bundle stream bundlestream list file item fileitem items upload parse request parserequest req iterator iter items iterator iter has next hasnext file item fileitem item file item fileitem iter item is form field isformfield bundle stream bundlestream item get input stream getinputstream bundle location bundlelocation item get name getname no redirect noredirect nor edir noredir equals item get field name getfieldname bundle stream bundlestream bundle location bundlelocation repository add resource addresource bundle stream bundlestream i o exception ioexception ioe resp send error senderror register file bundle location bundlelocation reason ioe get message getmessage file upload exception fileuploadexception fue servlet exception servletexception fue get message getmessage fue bundle stream bundlestream bundle stream bundlestream close i o exception ioexception ignore redirect ins truc ted instructed no redirect noredirect resp set content type setcontenttype text plain bundle location bundlelocation resp get writer getwriter print bundle bundle location bundlelocation uploaded resp set status setstatus http servlet response httpservletresponse internal server error resp get writer getwriter print bundle uploaded resp send redirect sendredirect req getrequesturi override string get servlet info getservletinfo osg i osgi bundle repository obr servlet list bundles listbundles http servlet request httpservletrequest req http servlet response httpservletresponse resp i o exception ioexception string category get parameter getparameter req category repository category bundles string regexp get parameter getparameter req regexp pattern pattern regexp length string regexp int regexpint regexp turn regexp substring match bounded regexp int regexpint starts with startswith regexp int regexpint starts with startswith regexp int regexpint regexp int regexpint regexp int regexpint ends with endswith regexp int regexpint ends with endswith regexp int regexpint regexp int regexpint pattern pattern compile regexp int regexpint pattern syntax exception patternsyntaxexception pse regexp cookies set cookie setcookie resp category category set cookie setcookie resp regexp regexp print writer printwriter head resp print osg i osgi bundle repository print repository get name getname println print repository updated println repository get last modified getlastmodified println println tasks println table border width print now rap nowrap repository descriptor print width href print getrelativeuri req repository xml print print repository xml println print now rap nowrap repository down load download complete print width href print getrelativeuri req repository zip print print repository zip println print now rap nowrap bundle upload print width form method post enc type enctype multipart form data print input type file bundle file bundlefile print input type sub mit submit upload bundle print form println println table println println form selection println table width border cellspacing cellpadding println resources println align println reg exp input type text regexp regexp println nbsp nbsp nbsp nbsp println category select category on change onchange form sub mit submit iterator categories repository get bundle categories getbundlecategories iterator categories has next hasnext object cat categories string selected category equals cat selected print option cat selected print cat println option println select println nbsp nbsp nbsp nbsp println input type sub mit submit println nbsp nbsp nbsp nbsp println input type button down load download selected on click onclick document forms sel ective dump selectivedump sub mit submit println println table println form print form sel ective dump selectivedump method post action getrelativeuri req repository zip println center println table width border cellspacing cellpadding have bundles havebundles iterator repository get resources by category getresourcesbycategory category has next hasnext resource res resource ignore resource match regexp pattern pattern matcher res get symbolic name getsymbolicname matches string uri getrelativeuri req res get resource name getresourcename dump row dumprow input bundle type check box checkbox res get resource name getresourcename href uri info info res href uri remove remove remove have bundles havebundles matching bundles have bundles havebundles string buffer stringbuffer msg string buffer stringbuffer msg append bundle pattern msg append symbolic matches regular expression msg append pattern pattern msg append msg append category category dump row dumprow msg to string tostring println table println center println form foo t foot printrepositoryxml http servlet request httpservletrequest req http servlet response httpservletresponse resp i o exception ioexception resource uri prefix string uri prefix uriprefix req get parameter getparameter relative uri prefix uriprefix get parent getparent req getrequesturl to string tostring resp set content type setcontenttype text xml charset utf printrepositoryxml resp get writer getwriter uri prefix uriprefix dump repository dumprepository string bundle names bundlenames http servlet response httpservletresponse resp i o exception ioexception selected bundles selectedbundles get selected bundles getselectedbundles bundle names bundlenames resp set content type setcontenttype application zip zip output stream zipoutputstream jos jos zip output stream zipoutputstream resp get output stream getoutputstream spool repository xml zip entry zipentry entry zip entry zipentry repository xml jos put next entry putnextentry entry print writer printwriter print writer printwriter output stream writer outputstreamwriter jos utf printrepositoryxml selected bundles selectedbundles flush jos close entry closeentry iterator repository get resources by i d getresourcesbyid has next hasnext resource res resource spool resource selected global dump string resource name resourcename res get resource name getresourcename selected bundles selectedbundles selected bundles selectedbundles resource name resourcename entry zip entry zipentry resource name resourcename jos put next entry putnextentry entry res spool jos jos close entry closeentry i o utils ioutils close quietly closequietly jos printrepositoryxml print writer printwriter string uri prefix uriprefix selected bundles selectedbundles repository last modified lastmodified untitled println xml version encoding utf print repository last modified lastmodified print repository get last modified for matted getlastmodifiedformatted print print repository get name getname println iterator repository get resources by i d getresourcesbyid has next hasnext resource res resource string resource name resourcename res get resource name getresourcename selected bundles selectedbundles selected bundles selectedbundles resource name resourcename res set uri seturi uri prefix uriprefix resource name resourcename res serialize repository println repository dump info dumpinfo http servlet response httpservletresponse resp string uri resource res i o exception ioexception print writer printwriter head resp apache commons code c codec identity org apache commons code c codec down load download down load download apache commons code c codec repository eclipse description copyright source url size categories capabilities bundle manifest version manifestversion presentation name presentationname apache commons code c codec symbolic name symbolicname org apache commons code c codec version export org apache commons code c codec version export org apache commons code c codec binary version export org apache commons code c codec digest version export org apache commons code c codec language version export org apache commons code c codec net version export org apache commons code c codec version export org apache commons code c codec binary version export org apache commons code c codec digest version export org apache commons code c codec language version export org apache commons code c codec net version requirements require bundle org eclipse core runtime require bundle org eclipse core resources require bundle org eclipse gmf codegen require bundle org eclipse emf edit require bundle org eclipse emf ecore xmi require bundle org eclipse emf edit require bundle org eclipse ide require bundle org eclipse emf codegen ecore string ident res get symbolic name getsymbolicname res get version getversion println resource ident println center println table width border cellspacing cellpadding dump row dumprow res get presentation name getpresentationname dump row dumprow identity ident dump row dumprow down load download href uri res get resource name getresourcename dump row dumprow repository href get parent getparent uri repository get name getname dump row dumprow description res get description getdescription dump row dumprow copyright res get copyright getcopyright dump row dumprow doc umentation documentation res get doc umentation getdocumentation dump row dumprow source url res get source getsource dump row dumprow size string value of valueof res get size getsize dump row dumprow categories string value of valueof res get categories getcategories string label capabilities iterator res get capabilities getcapabilities has next hasnext object cap obj capobj cap obj capobj package capability packagecapability package capability packagecapability cap package capability packagecapability cap obj capobj string buffer stringbuffer buf string buffer stringbuffer export buf append cap get package name getpackagename buf append version buf append cap get version getversion dump row dumprow label buf to string tostring cap obj capobj bundle capability bundlecapability bundle capability bundlecapability cap bundle capability bundlecapability cap obj capobj string buffer stringbuffer buf string buffer stringbuffer cap get name getname buf append manifest version manifestversion append cap get manifest version getmanifestversion buf append presentation name presentationname append cap get presentation name getpresentationname buf append symbolic name symbolicname append cap get symbolic name getsymbolicname buf append version append cap get version getversion dump row dumprow label buf to string tostring label label requirements iterator res get requirements getrequirements has next hasnext object req obj reqobj req obj reqobj package requirement packagerequirement package requirement packagerequirement req package requirement packagerequirement req obj reqobj string buffer stringbuffer buf string buffer stringbuffer buf append req get package name getpackagename req is optional isoptional buf append resolution optional buf append version append req get version range getversionrange dump row dumprow label buf to string tostring label label bundle bundle spec bundlespec specs res get bundle specs getbundlespecs specs specs length bundle spec bundlespec spec specs string buffer stringbuffer buf string buffer stringbuffer spec get symbolic name getsymbolicname buf append version append spec get version getversion buf append start level startlevel append spec get start level getstartlevel spec get entry getentry buf append embedded entry embeddedentry append spec get entry getentry dump row dumprow label buf to string tostring label println table println center foo t foot dump row dumprow print writer printwriter string string print print nbsp print print nbsp println spool bundle spoolbundle http servlet response httpservletresponse res resource resource i o exception ioexception res set content type setcontenttype application jar resource spool res get output stream getoutputstream string getrelativeuri http servlet request httpservletrequest req string rel path relpath string buffer stringbuffer url req getrequesturl url char at charat url length url append url append rel path relpath url to string tostring string get parent getparent string path last slash lastslash path last index of lastindexof last slash lastslash path substring last slash lastslash path string get name getname string path last slash lastslash path last index of lastindexof last slash lastslash path substring last slash lastslash path print writer printwriter head http servlet response httpservletresponse res i o exception ioexception res set content type setcontenttype text html print writer printwriter res get writer getwriter println html head title bundle list title head println body bgcolor white foo t foot print writer printwriter println body html string get parameter getparameter http servlet request httpservletrequest req string string default value defaultvalue check parameter string req get parameter getparameter check cookie cookie cookies req get cookies getcookies cookies cookies length equals cookies get name getname url safe url decoder urldecoder decode cookies get value getvalue utf unsupported encoding exception unsupportedencodingexception uee fall fall default value defaultvalue set cookie setcookie http servlet response httpservletresponse res string string url safe url encoder urlencoder encode utf unsupported encoding exception unsupportedencodingexception uee cookie cookie cookie cookie set max age setmaxage res add cookie addcookie cookie logging debug string message log log service logservice log debug message info string message log log service logservice log info message warn string message log log service logservice log warning message error string message log log service logservice log error message log level string message log log log level message internal get selected bundles getselectedbundles string bundle names bundlenames i o exception ioexception selection export bundle names bundlenames bundle names bundlenames length repository xml file file repo file repofile output stream outputstream dump complete repository xml resolve repo file repofile file create temp file createtempfile repository xml file output stream fileoutputstream repo file repofile print writer printwriter print writer printwriter output stream writer outputstreamwriter utf printrepositoryxml close prepare repository resolver dummy bundle context dummybundlecontext dummy bundle context dummybundlecontext ctx get bundle context getbundlecontext set property setproperty repository admin impl repositoryadminimpl repository url prop repo file repofile touri tourl to external form toexternalform repository admin repositoryadmin repository admin impl repositoryadminimpl resources hash set hashset add servlet container bundles required bundles length string filter symbolic name symbolicname required bundles resolve resource resolveresource filter resources find resources repository bundle names bundlenames length resource res repository get resource getresource bundle names bundlenames res version range versionrange version range versionrange res get version getversion string filter symbolic name symbolicname res get symbolic name getsymbolicname get filter getfilter resolve resource resolveresource filter resources prepare resolver resolver resolver resolver iterator resources iterator has next hasnext resolver add org osgi service obr resource resolve resources resolver resolve todo dump hash set hashset bundles hash set hashset org osgi service obr resource list resolver get added resources getaddedresources list list length bundles add get name getname list geturl get path getpath list resolver get required resources getrequiredresources list list length bundles add get name getname list geturl get path getpath bundles close i o exception ioexception ignore error repo file repofile repo file repofile delete resolve resource resolveresource repository admin repositoryadmin string filter resources org osgi service obr resource list discover resources discoverresources filter list list length resources add list string get name getname list geturl get path getpath resource res repository get resource getresource res bundle spec bundlespec specs res get bundle specs getbundlespecs specs specs length resolve resource resolveresource specs to filter tofilter resources scr management support activate component context componentcontext context ctx context context get service reference getservicereference web manager root path object wmr context get properties getproperties manager root web manager root webmanagerroot wmr string string wmr web manager root webmanagerroot web manager root webmanagerroot web manager root webmanagerroot starts with startswith web manager root webmanagerroot web manager root webmanagerroot register servlet resources http context httpcontext http context httpcontext http service httpservice create default http context createdefaulthttpcontext http service httpservice register servlet registerservlet web manager root webmanagerroot context get properties getproperties http context httpcontext exception error service active deactivate component context componentcontext context http service httpservice unregister web manager root webmanagerroot bind log service bindlogservice log service logservice log log log unbind log service unbindlogservice log service logservice log log bind http service bindhttpservice http service httpservice http service httpservice http service httpservice http service httpservice unbind http service unbindhttpservice http service httpservice http service httpservice http service httpservice