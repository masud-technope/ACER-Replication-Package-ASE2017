licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling distribution monitor java util array list arraylist java util collections java util list org apache sling distribution agent distribution agent distributionagent org apache sling distribution queue distribution queue distributionqueue org apache sling distribution queue distribution queue entry distributionqueueentry org apache sling distribution queue distribution queue item distributionqueueitem org apache sling distribution queue distribution queue item status distributionqueueitemstatus org apache sling api result org junit test org junit assert false assertfalse org junit assert not null assertnotnull org junit assert true asserttrue org mockito matchers org mockito matchers any string anystring org mockito mockito mock org mockito mockito test case testcase link distribution queue health check distributionqueuehealthcheck distribution queue health check test distributionqueuehealthchecktest test test with no distribution queue provider testwithnodistributionqueueprovider exception distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck activate collections string object empty map emptymap result result distribution queue health check distributionqueuehealthcheck execute assert not null assertnotnull result assert true asserttrue result is ok isok test test with no item in the queue testwithnoiteminthequeue exception distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck activate collections string object empty map emptymap distribution queue distributionqueue queue mock distribution queue distributionqueue queue get head gethead then return thenreturn distribution agent distributionagent distribution agent distributionagent mock distribution agent distributionagent list string queues array list arraylist string queues add queue name queuename distribution agent distributionagent get queue names getqueuenames then return thenreturn queues distribution agent distributionagent get queue getqueue any string anystring then return thenreturn queue distribution queue health check distributionqueuehealthcheck bind distribution agent binddistributionagent distribution agent distributionagent result result distribution queue health check distributionqueuehealthcheck execute assert not null assertnotnull result assert true asserttrue result is ok isok test test with one ok item in the queue testwithoneokiteminthequeue exception distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck activate collections string object empty map emptymap distribution queue distributionqueue queue mock distribution queue distributionqueue distribution queue item distributionqueueitem item mock distribution queue item distributionqueueitem distribution queue item status distributionqueueitemstatus status mock distribution queue item status distributionqueueitemstatus status get attempts getattempts then return thenreturn queue get item getitem string then return thenreturn distribution queue entry distributionqueueentry item status queue get head gethead then return thenreturn distribution queue entry distributionqueueentry item status distribution agent distributionagent distribution agent distributionagent mock distribution agent distributionagent list string queues array list arraylist string queues add queue name queuename distribution agent distributionagent get queue names getqueuenames then return thenreturn queues distribution agent distributionagent get queue getqueue any string anystring then return thenreturn queue distribution queue health check distributionqueuehealthcheck bind distribution agent binddistributionagent distribution agent distributionagent result result distribution queue health check distributionqueuehealthcheck execute assert not null assertnotnull result assert true asserttrue result is ok isok test test with not ok item in the queue testwithnotokiteminthequeue exception distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck distribution queue health check distributionqueuehealthcheck activate collections string object empty map emptymap distribution queue distributionqueue queue mock distribution queue distributionqueue distribution queue item distributionqueueitem item mock distribution queue item distributionqueueitem distribution queue item status distributionqueueitemstatus status mock distribution queue item status distributionqueueitemstatus status get attempts getattempts then return thenreturn queue get item getitem string then return thenreturn distribution queue entry distributionqueueentry item status queue get head gethead then return thenreturn distribution queue entry distributionqueueentry item status distribution agent distributionagent distribution agent distributionagent mock distribution agent distributionagent list string queues array list arraylist string queues add queue name queuename distribution agent distributionagent get queue names getqueuenames then return thenreturn queues distribution agent distributionagent get queue getqueue any string anystring then return thenreturn queue distribution queue health check distributionqueuehealthcheck bind distribution agent binddistributionagent distribution agent distributionagent result result distribution queue health check distributionqueuehealthcheck execute assert not null assertnotnull result assert false assertfalse result is ok isok