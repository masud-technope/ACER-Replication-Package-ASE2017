licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling security impl java io exception ioexception java util array list arraylist java util arrays java util collections java util dictionary java util hash map hashmap java util hash set hashset java util list java util map java util javax servlet filter javax servlet filter chain filterchain javax servlet filter config filterconfig javax servlet servlet exception servletexception javax servlet servlet request servletrequest javax servlet servlet response servletresponse org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations property unbounded propertyunbounded org apache felix scr annotations service org apache felix scr annotations properties org apache felix scr annotations property org apache sling api sling http servlet request slinghttpservletrequest org apache sling api sling http servlet response slinghttpservletresponse org apache sling api resource resource org apache sling api resource value map valuemap org apache sling api wrappers sling http servlet response wrapper slinghttpservletresponsewrapper org apache sling commons osgi properties util propertiesutil org osgi service component component context componentcontext org slf logger org slf logger factory loggerfactory component metatype description request filter adding content disposition attachment paths content types label apache sling content disposition filter service filter properties property sling filter scope request property private propertyprivate property service ranking int value intvalue property private propertyprivate content disposition filter contentdispositionfilter filter logger logger logger logger factory loggerfactory get logger getlogger get class getclass property label content disposition paths description paths checked filter entry form path csv excluded content types invalid entries log ged logged unbounded property unbounded propertyunbounded array string prop content dispostion paths sling content disposition paths property label content disposition excluded paths description paths excluded filter entry form path unbounded property unbounded propertyunbounded array string prop content dispostion excluded paths sling content disposition excluded paths enable content dispostion paths property bool value boolvalue enable content dispostion paths label enable content disposition paths description flag controls enable content disposition paths excluded paths defined sling content disposition excluded paths string prop enable content dispostion paths sling content disposition paths paths string content disposition paths contentdispositionpaths array prefixes paths string content disposition paths pfx contentdispositionpathspfx content disposition excluded paths contentdispositionexcludedpaths map string string content types mapping contenttypesmapping enable content disposition all paths enablecontentdispositionallpaths activate activate component context componentcontext ctx dictionary props ctx get properties getproperties string content dispostion props contentdispostionprops properties util propertiesutil to string array tostringarray props prop content dispostion paths string paths hash set hashset string list string pfxs array list arraylist string map string string content types map contenttypesmap hash map hashmap string string string path content dispostion props contentdispostionprops path path trim path length idx path index of indexof colon idx colonidx path index of indexof colon idx colonidx colon idx colonidx idx paths allowed logger info paths allowed string idx idx path substring idx pfxs add don def eat defeat purpose logger info wildcard paths allowed colon idx colonidx path substring colon idx colonidx path paths add colon idx colonidx string content types contenttypes get content types getcontenttypes path substring colon idx colonidx content types map contenttypesmap content types contenttypes content disposition paths contentdispositionpaths paths is empty isempty collections string empty set emptyset paths content disposition paths pfx contentdispositionpathspfx pfxs to array toarray string pfxs size content types mapping contenttypesmapping content types map contenttypesmap is empty isempty collections string string empty map emptymap content types map contenttypesmap enable content disposition all paths enablecontentdispositionallpaths properties util propertiesutil to boolean toboolean props prop enable content dispostion paths enable content dispostion paths string content dispostion excluded paths array contentdispostionexcludedpathsarray properties util propertiesutil to string array tostringarray props prop content dispostion excluded paths content disposition excluded paths contentdispositionexcludedpaths hash set hashset string arrays as list aslist content dispostion excluded paths array contentdispostionexcludedpathsarray logger info initialized content disposition paths content disposition paths pfx content disposition excluded paths enable content disposition paths object content disposition paths contentdispositionpaths content disposition paths pfx contentdispositionpathspfx content disposition excluded paths contentdispositionexcludedpaths enable content disposition all paths enablecontentdispositionallpaths init filter config filterconfig filter config filterconfig servlet exception servletexception destroy do filter dofilter servlet request servletrequest request servlet response servletresponse response filter chain filterchain chain io exception ioexception servlet exception servletexception sling http servlet request slinghttpservletrequest sling request slingrequest sling http servlet request slinghttpservletrequest request sling http servlet response slinghttpservletresponse sling response slingresponse sling http servlet response slinghttpservletresponse response rewriter response rewriterresponse rewriter response rewriterresponse rewriter response rewriterresponse sling request slingrequest sling response slingresponse chain do filter dofilter request rewriter response rewriterresponse methods string get content types getcontenttypes string content types contenttypes string content types set contenttypesset hash set hashset string content types contenttypes content types contenttypes length string content types array contenttypesarray content types contenttypes split string content type contenttype content types array contenttypesarray content types set contenttypesset add content type contenttype content types set contenttypesset rewriter response rewriterresponse sling http servlet response wrapper slinghttpservletresponsewrapper string content dispostion content disposition string content dispostion attachment attachment string prop jcr data jcr data string jcr content leaf jcr content string attribute org apache sling security impl content disposition filter contentdispositionfilter rewriter response rewriterresponse content type contenttype current request sling http servlet request slinghttpservletrequest request resource resource rewriter response rewriterresponse sling http servlet request slinghttpservletrequest request sling http servlet response slinghttpservletresponse wrapped response wrappedresponse wrapped response wrappedresponse request request resource request get resource getresource javax servlet servlet response wrapper servletresponsewrapper set content type setcontenttype java lang string set content type setcontenttype string type equals request get method getmethod string previous content type previouscontenttype string request get attribute getattribute attribute previous content type previouscontenttype previous content type previouscontenttype equals type request set attribute setattribute attribute type string resource path resourcepath resource get path getpath content disposition excluded paths contentdispositionexcludedpaths resource path resourcepath enable content disposition all paths enablecontentdispositionallpaths set content disposition setcontentdisposition resource content disposition added contentdispositionadded content disposition paths contentdispositionpaths resource path resourcepath content types mapping contenttypesmapping contains key containskey resource path resourcepath string exceptions content types mapping contenttypesmapping resource path resourcepath exceptions type content disposition added contentdispositionadded set content disposition setcontentdisposition resource content disposition added contentdispositionadded set content disposition setcontentdisposition resource content disposition added contentdispositionadded string path content disposition paths pfx contentdispositionpathspfx resource path resourcepath starts with startswith path content types mapping contenttypesmapping contains key containskey path string exceptions content types mapping contenttypesmapping path exceptions type set content disposition setcontentdisposition resource set content disposition setcontentdisposition resource set content type setcontenttype type methods set content disposition setcontentdisposition resource resource content disposition added contentdispositionadded contains header containsheader content dispostion is jcr data isjcrdata resource add header addheader content dispostion content dispostion attachment content disposition added contentdispositionadded content disposition added contentdispositionadded is jcr data isjcrdata resource resource jcr data jcrdata resource value map valuemap props resource adapt to adaptto value map valuemap props props contains key containskey prop jcr data jcr data jcrdata resource jcr content jcrcontent resource get child getchild jcr content leaf jcr content jcrcontent props jcr content jcrcontent adapt to adaptto value map valuemap props props contains key containskey prop jcr data jcr data jcrdata jcr data jcrdata