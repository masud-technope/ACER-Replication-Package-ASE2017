licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling ide test impl helpers org junit assert that assertthat java byte array input stream bytearrayinputstream java i o exception ioexception java input stream inputstream javax jcr credentials javax jcr node javax jcr repository javax jcr repository exception repositoryexception javax jcr session org apache commons http client httpclient http client httpclient org apache commons http client httpclient http exception httpexception org apache commons http client httpclient username password credentials usernamepasswordcredentials org apache commons http client httpclient auth scope authscope org apache commons http client httpclient methods get method getmethod org apache commons i o utils ioutils org apache jackrabbit util text org apache sling ide jcr repository utils repositoryutils org apache sling ide transport repository info repositoryinfo org hamcrest core matchers corematchers repository accessor repositoryaccessor simple access validate contents sling repository testing repository accessor repositoryaccessor launchpad config launchpadconfig config http client httpclient client repository repository credentials credentials repository accessor repositoryaccessor launchpad config launchpadconfig config config config client http client httpclient client get params getparams set authentication preemptive setauthenticationpreemptive client get state getstate set credentials setcredentials auth scope authscope config get host name gethostname config get port getport username password credentials usernamepasswordcredentials config get username getusername config get password getpassword assert get is successful assertgetissuccessful string path string expected result expectedresult http exception httpexception i o exception ioexception get method getmethod get method getmethod config get url geturl path result client execute method executemethod assert that assertthat unexpected status call geturi result core matchers corematchers equal to equalto input stream inputstream input get response body as stream getresponsebodyasstream string response body responsebody i o utils ioutils to string tostring input get request char set getrequestcharset assert that assertthat unexpected response geturi response body responsebody core matchers corematchers equal to equalto expected result expectedresult release connection releaseconnection assert get returns assertgetreturns string path http exception httpexception i o exception ioexception get method getmethod get method getmethod config get url geturl path result client execute method executemethod assert that assertthat unexpected status call geturi result core matchers corematchers equal to equalto release connection releaseconnection try delete resource trydeleteresource string path repository exception repositoryexception post method postmethod post method postmethod config get url geturl txt parts string part stringpart operation delete set request entity setrequestentity multipart request entity multipartrequestentity parts get params getparams client execute method executemethod release connection releaseconnection session session login session node exists nodeexists path session remove item removeitem path session save node get node getnode string node path nodepath repository exception repositoryexception login get node getnode node path nodepath returns node exists path param path path absolute format relative repository root path exists repository exception repositoryexception has node hasnode string path repository exception repositoryexception path starts with startswith path path substring login get root node getrootnode has node hasnode path create node createnode string path string primary node type primarynodetype repository exception repositoryexception session session login session node exists nodeexists path node parent session get node getnode text get relative parent getrelativeparent path parent add node addnode text get name getname path primary node type primarynodetype session save session log out logout create file createfile string path bytes repository exception repositoryexception session session login session node exists nodeexists path node parent session get node getnode text get relative parent getrelativeparent path node resource node resourcenode parent add node addnode text get name getname path file node content node contentnode resource node resourcenode add node addnode jcr content resource content node contentnode set property setproperty jcr data session get value factory getvaluefactory create binary createbinary byte array input stream bytearrayinputstream bytes session save session log out logout executes user runnable repository exceptions prop agated propagated happen resp onsibility responsibility runnable call session save persist param runnable result runnable execution repository exception repositoryexception exception occurs executing runnable do with session dowithsession session runnable sessionrunnable runnable repository exception repositoryexception session session login runnable do with session dowithsession session session log out logout session login repository exception repositoryexception repository info repositoryinfo repository info repositoryinfo repository info repositoryinfo config get username getusername config get password getpassword config get url geturl repository repository repository utils repositoryutils get repository getrepository repository info repositoryinfo credentials credentials repository utils repositoryutils get credentials getcredentials repository info repositoryinfo repository login credentials session runnable sessionrunnable do with session dowithsession session session repository exception repositoryexception