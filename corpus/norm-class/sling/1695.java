licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling installer core impl java file java io exception ioexception java input stream inputstream java util array list arraylist java util arrays java util collections java util comparator java util dictionary java util hash map hashmap java util hash set hashset java util iterator java util linked list linkedlist java util list java util map java util java util sorted set sortedset java util tree set treeset java util concurrent atomic atomic long atomiclong org apache sling commons osgi properties util propertiesutil org apache sling installer api installable resource installableresource org apache sling installer api osgi installer osgiinstaller org apache sling installer api resource change listener resourcechangelistener org apache sling installer api update handler updatehandler org apache sling installer api update result updateresult org apache sling installer api info info provider infoprovider org apache sling installer api info installation state installationstate org apache sling installer api info resource org apache sling installer api info resource group resourcegroup org apache sling installer api tasks install task installtask org apache sling installer api tasks install task factory installtaskfactory org apache sling installer api tasks installation context installationcontext org apache sling installer api tasks registered resource registeredresource org apache sling installer api tasks resource state resourcestate org apache sling installer api tasks resource transformer resourcetransformer org apache sling installer api tasks retry handler retryhandler org apache sling installer api tasks task resource taskresource org apache sling installer api tasks task resource group taskresourcegroup org apache sling installer api tasks transformation result transformationresult org apache sling installer core impl tasks bundle update task bundleupdatetask org osgi framework bundle org osgi framework bundle context bundlecontext org osgi framework constants org osgi framework service reference servicereference org osgi framework version org osgi service start level startlevel start level startlevel org slf logger org slf logger factory loggerfactory worker thread osg i osgi tasks executed runs cycles list registered resources registeredresources examine d examined osgi tasks osgitasks created executed separate list registered resources registeredresources resources updated removed cycle merged main list cycle osgi installer impl osgiinstallerimpl osgi installer osgiinstaller resource change listener resourcechangelistener retry handler retryhandler info provider infoprovider runnable bundle context property defining handling bundle updates string start level handling sling installer switch startlevel switchstartlevel logger logger logger logger factory loggerfactory get logger getlogger get class getclass audit logger logger audit logger auditlogger logger factory loggerfactory get logger getlogger org apache sling audit osgi installer bundle context bundle context bundlecontext ctx clients joining map map string list internal resource internalresource new resources schemes newresourcesschemes hash map hashmap string list internal resource internalresource resources clients list internal resource internalresource new resources newresources linked list linkedlist internal resource internalresource removed resources clients string urls to remove urlstoremove hash set hashset string update infos process list update info updateinfo update infos updateinfos array list arraylist osgi installer impl osgiinstallerimpl update info updateinfo activate active running thread background thread backgroundthread flag indicating retry event occured tasks executions retry during task execution retryduringtaskexecution persistent resource list persistent resource list persistentresourcelist persistent list persistentlist tracker factories sorting service tracker sortingservicetracker install task factory installtaskfactory factory tracker factorytracker tracker transformers sorting service tracker sortingservicetracker resource transformer resourcetransformer transformer tracker transformertracker tracker update handlers sorting service tracker sortingservicetracker update handler updatehandler update handler tracker updatehandlertracker resources lock object resources lock resourceslock object install listener installlistener listener atomic long atomiclong background task counter backgroundtaskcounter atomic long atomiclong start level bundle update switch start level switchstartlevel constructor initialization def ered defered background thread osgi installer impl osgiinstallerimpl bundle context bundlecontext ctx ctx ctx initialize file util file data store filedatastore ctx file file data store filedatastore shared get data file getdatafile registered resource list registeredresourcelist ser listener install listener installlistener ctx logger persistent list persistentlist persistent resource list persistentresourcelist listener switch start level switchstartlevel properties util propertiesutil to boolean toboolean ctx get property getproperty start level handling deactivate deactivate wake sleeping thread resources lock resourceslock logger debug deactivating not ifying notifying resources lock resourceslock active resources lock resourceslock notify service track ers trackers factory tracker factorytracker factory tracker factorytracker close transformer tracker transformertracker transformer tracker transformertracker close update handler tracker updatehandlertracker update handler tracker updatehandlertracker close listener dispose background thread backgroundthread logger is debug enabled isdebugenabled thread background thread backgroundthread logger debug waiting main background thread get name getname background thread backgroundthread local variable avoid npe s npes thread background thread backgroundthread join interrupted exception interruptedexception logger debug waiting background thread remove file util file data store filedatastore shared logger info apache sling osg i osgi installer service stopped start component start start background thread startbackgroundthread initialize installer init start service track ers trackers factory tracker factorytracker sorting service tracker sortingservicetracker install task factory installtaskfactory ctx install task factory installtaskfactory get name getname factory tracker factorytracker open transformer tracker transformertracker sorting service tracker sortingservicetracker resource transformer resourcetransformer ctx resource transformer resourcetransformer get name getname transformer tracker transformertracker open update handler tracker updatehandlertracker sorting service tracker sortingservicetracker update handler updatehandler ctx update handler updatehandler get name getname update handler tracker updatehandlertracker open logger info apache sling osg i osgi installer service started start background thread start background thread startbackgroundthread background thread backgroundthread thread background thread backgroundthread set name setname get class getclass get simple name getsimplename background thread backgroundthread set daemon setdaemon background thread backgroundthread start java lang runnable logger debug main background thread starts init active logger debug starting installer cycle listener start process update infos processupdateinfos merge potential resources merge newly registered resources mergenewlyregisteredresources resources lock resourceslock retry during task execution retryduringtaskexecution invoke transformers transform resources transformresources compute tasks sorted set sortedset install task installtask tasks compute tasks computetasks execute tasks processing action action execute tasks executetasks tasks action action sleep resources lock resourceslock sleep check resources arr ived arrived has new resources hasnewresources active retry during task execution retryduringtaskexecution tasks execute wait resources registered logger debug tasks process suspending listener idle listener suspend logger debug wait resources lock resourceslock resources lock resourceslock wait interrupted exception interruptedexception ignore active logger debug wait ing resources lock resourceslock rest arting restarting listener listener start logger debug wait ing resources lock resourceslock active listener won res tarted restarted active action action shutdown processing logger debug action shutdown inactive active listener suspend background thread backgroundthread logger debug main background thread ends wake cycle wake up wakeup logger debug wake up wakeup called listener start resources lock resourceslock resources lock resourceslock notify checks resources method invoked new resources newresources block has new resources hasnewresources new resources newresources is empty isempty new resources schemes newresourcesschemes is empty isempty urls to remove urlstoremove is empty isempty update infos updateinfos is empty isempty check scheme illegal argument exception illegalargumentexception check scheme checkscheme string scheme scheme scheme length illegal argument exception illegalargumentexception scheme required scheme index of indexof illegal argument exception illegalargumentexception scheme colon create install able installable resources install able installable resources versions resource type list internal resource internalresource create resources createresources string scheme installable resource installableresource resources check scheme checkscheme scheme list internal resource internalresource created resources createdresources resources resources length created resources createdresources array list arraylist internal resource internalresource installable resource installableresource resources internal resource internalresource internal resource internalresource create scheme created resources createdresources add logger debug registering resource io exception ioexception ioe logger warn create internal resource internalresource resource ioe created resources createdresources close input str eams streams sanity check input str eams streams closed processing thr ew threw exception resource type supported close input streams closeinputstreams installable resource installableresource resources resources installable resource installableresource resources input stream inputstream get input stream getinputstream close io exception ioexception ignore org apache sling installer api osgi installer osgiinstaller update resources updateresources java lang string org apache sling installer api installable resource installableresource java lang string update resources updateresources string scheme installable resource installableresource resources string ids listener start list internal resource internalresource updated resources updatedresources create resources createresources scheme resources resources lock resourceslock updated resources updatedresources updated resources updatedresources size new resources newresources add all addall updated resources updatedresources string new urls newurls hash set hashset string internal resource internalresource rsrc updated resources updatedresources new urls newurls add rsrc geturl remove urls to remove urlstoremove iterator string url iter urliter urls to remove urlstoremove iterator url iter urliter has next hasnext new urls newurls is empty isempty string url url iter urliter new urls newurls remove url url iter urliter remove ids ids length string removed urls removedurls hash set hashset string string ids string url scheme mark resources url uninstall able uninstallable urls to remove urlstoremove add url removed urls removedurls add url update new resources newresources iterator internal resource internalresource rsrc iter rsrciter new resources newresources iterator rsrc iter rsrciter has next hasnext removed urls removedurls is empty isempty internal resource internalresource rsrc rsrc iter rsrciter removed urls removedurls remove rsrc geturl rsrc get private copy of file getprivatecopyoffile rsrc get private copy of file getprivatecopyoffile delete rsrc iter rsrciter remove wake up wakeup simply close input str eams streams close input streams closeinputstreams resources org apache sling installer api osgi installer osgiinstaller register resources registerresources java lang string org apache sling installer api installable resource installableresource register resources registerresources string scheme installable resource installableresource resources listener start list internal resource internalresource registered resources registeredresources create resources createresources scheme resources registered resources registeredresources create empty list processing easier registered resources registeredresources array list arraylist internal resource internalresource logger debug registered resource scheme scheme resources lock resourceslock new resources schemes newresourcesschemes scheme registered resources registeredresources update resources removed resources remove scheme string prefix scheme resources iterator internal resource internalresource rsrc iter rsrciter new resources newresources iterator rsrc iter rsrciter has next hasnext internal resource internalresource rsrc rsrc iter rsrciter rsrc geturl starts with startswith prefix check resource rsrc get private copy of file getprivatecopyoffile internal resource internalresource new rsrc newrsrc registered resources registeredresources new rsrc newrsrc geturl equals rsrc geturl new rsrc newrsrc get private copy of file getprivatecopyoffile new rsrc newrsrc set private copy of file setprivatecopyoffile rsrc get private copy of file getprivatecopyoffile rsrc get private copy of file getprivatecopyoffile delete rsrc iter rsrciter remove removed urls iterator string url iter urliter urls to remove urlstoremove iterator url iter urliter has next hasnext string url url iter urliter url starts with startswith prefix url iter urliter remove wake up wakeup simply close input str eams streams close input streams closeinputstreams resources merge newly registered resources mergenewlyregisteredresources resources lock resourceslock map entry string list internal resource internalresource entry new resources schemes newresourcesschemes entry set entryset string scheme entry get key getkey list internal resource internalresource registered resources registeredresources entry get value getvalue logger debug processing resources scheme scheme installed remove resources string entity id entityid persistent list persistentlist get entity ids getentityids entity resource list entityresourcelist group persistent list persistentlist get entity resource list getentityresourcelist entity id entityid list task resource taskresource to remove toremove array list arraylist task resource taskresource task resource taskresource group get resources getresources get scheme getscheme equals scheme logger debug checking search entry url registered resources registeredresources iterator internal resource internalresource registered resources registeredresources iterator has next hasnext internal resource internalresource test resource testresource test resource testresource geturl equals geturl logger debug resource removed get state getstate resource state resourcestate installed get state getstate resource state resourcestate install registered resource impl registeredresourceimpl set state setstate resource state resourcestate uninstall to remove toremove add task resource taskresource to remove toremove persistent list persistentlist remove geturl registered resources registeredresources new resources newresources add all addall registered resources registeredresources new resources schemes newresourcesschemes clear merge new resources mergenewresources print resources printresources merged persist list persistent list persistentlist save process resources deleted resources merge existing resources merge new resources mergenewresources resources sync new resources newresources size logger debug resources object new resources newresources size new resources newresources internal resource internalresource new resources newresources persistent list persistentlist add or update addorupdate new resources newresources clear mark resources removal urls to remove urlstoremove urls to remove urlstoremove is empty isempty logger debug removing resources object urls to remove urlstoremove size urls to remove urlstoremove string url urls to remove urlstoremove persistent list persistentlist remove url urls to remove urlstoremove clear print resources printresources string hint logger is debug enabled isdebugenabled counter string builder stringbuilder string builder stringbuilder append hint append resources string persistent list persistentlist get entity ids getentityids append append hint append registered resource registeredresource append append registered resource registeredresource info string sep registered resource registeredresource persistent list persistentlist get entity resource list getentityresourcelist get resources getresources append sep sep append counter append append append hint append append counter append registered resources registeredresources logger debug to string tostring compute osg i osgi tasks based resources add supplied list tasks sorted set sortedset install task installtask compute tasks computetasks sorted set sortedset install task installtask tasks tree set treeset install task installtask walk list entities create osg i osgi tasks group list install task factory installtaskfactory services factory tracker factorytracker get sorted services getsortedservices services size string entity id entityid persistent list persistentlist get entity ids getentityids entity resource list entityresourcelist group persistent list persistentlist get entity resource list getentityresourcelist entity id entityid check resource group task resource taskresource to activate toactivate group get active resource getactiveresource to activate toactivate install task installtask task get task gettask services group task tasks add task tasks task resource install task installtask get task gettask list install task factory installtaskfactory services task resource group taskresourcegroup rrg install task installtask result install task factory installtaskfactory factory services factory result factory create task createtask rrg result result enum action sleep shutdown cycle execute tasks param tasks tasks executed action perform execution action execute tasks executetasks sorted set sortedset install task installtask tasks switch start level switchstartlevel has bundle update task hasbundleupdatetask tasks start level startlevel service service reference servicereference ctx get service reference getservicereference start level startlevel get name getname start level startlevel start level startlevel start level startlevel ctx get service getservice target start level targetstartlevel get lowest start level getloweststartlevel tasks start level startlevel current start level currentstartlevel start level startlevel get start level getstartlevel target start level targetstartlevel current start level currentstartlevel audit logger auditlogger info switching start level target start level targetstartlevel start level startlevel set start level setstartlevel target start level targetstartlevel wait start level reached start level startlevel get start level getstartlevel target start level targetstartlevel thread sleep interrupted exception interruptedexception thread current thread currentthread int errupt interrupt do execute tasks doexecutetasks tasks restore start level start level startlevel set start level setstartlevel current start level currentstartlevel audit logger auditlogger info switching start level performing required installation tasks current start level currentstartlevel ctx unget service ungetservice do execute tasks doexecutetasks tasks lowest start level update operation get lowest start level getloweststartlevel sorted set sortedset install task installtask tasks start level startlevel start level startlevel current start level currentstartlevel start level startlevel get start level getstartlevel start level to target startleveltotarget current start level currentstartlevel install task installtask task tasks task bundle update task bundleupdatetask bundle bundle update task bundleupdatetask task get bundle getbundle bundle start level bundlestartlevel start level startlevel get bundle start level getbundlestartlevel bundle start level bundlestartlevel start level to target startleveltotarget start level to target startleveltotarget bundle start level bundlestartlevel illegal argument exception illegalargumentexception iae check installer start level own start level ownstartlevel start level startlevel get bundle start level getbundlestartlevel ctx get bundle getbundle own start level ownstartlevel start level to target startleveltotarget don disable start level to target startleveltotarget own start level ownstartlevel start level to target startleveltotarget check bundle update task executed has bundle update task hasbundleupdatetask sorted set sortedset install task installtask tasks result install task installtask task tasks task is async hronous task isasynchronoustask async task executed result task bundle update task bundleupdatetask result result execute tasks param tasks tasks executed action perform execution action do execute tasks doexecutetasks sorted set sortedset install task installtask tasks tasks is empty isempty installation context installationcontext ctx installation context installationcontext add task to next cycle addtasktonextcycle install task installtask logger warn deprecated method add task to next cycle addtasktonextcycle called task executed cycle tasks tasks add add task to current cycle addtasktocurrentcycle install task installtask logger debug adding task current cycle is async hronous task isasynchronoustask async tasks tasks add add async task addasynctask install task installtask is async hronous task isasynchronoustask logger warn deprecated method add async task addasynctask called add task to current cycle addtasktocurrentcycle logger warn deprecated method add async task addasynctask called async task add task to current cycle addtasktocurrentcycle async wrapper install task asyncwrapperinstalltask log string message object args audit logger auditlogger info message args async task failed asynctaskfailed install task installtask persist retry restart remove attribute logger debug async task failed asynctaskfailed get resource getresource get resource getresource set attribute setattribute install task installtask async attr persistent list persistentlist save resources lock resourceslock active logger debug res tarting restarting background thread async task failed asynctaskfailed active start background thread startbackgroundthread logger debug active restart background thread active active tasks is empty isempty install task installtask task tasks task tasks tasks remove task async tasks executed task is async hronous task isasynchronoustask logger debug exec uting executing async task task attribute integer old value oldvalue task get resource getresource old value oldvalue integer task get resource getresource get attribute getattribute install task installtask async attr integer new value newvalue old value oldvalue new value newvalue new value newvalue old value oldvalue task get resource getresource set attribute setattribute install task installtask async attr new value newvalue old value oldvalue save cleanup installable resources cleanupinstallableresources install task installtask a sync task asynctask task string thread name threadname background task thread backgroundtaskthread background task counter backgroundtaskcounter increment and get incrementandget thread thread thread name threadname override logger debug starting background thread execute thread current thread currentthread get name getname a sync task asynctask thread sleep interrupted exception interruptedexception reset attribute a sync task asynctask get resource getresource a sync task asynctask get resource getresource set attribute setattribute install task installtask async attr old value oldvalue a sync task asynctask execute ctx logger debug background thread ends thread current thread currentthread get name getname start action shutdown logger debug exec uting executing task task task execute ctx throwable logger error uncaught exception task execution save new cycle newcycle cleanup installable resources cleanupinstallableresources new cycle newcycle action cycle action sleep clean compact code code cycle started cleanup installable resources cleanupinstallableresources result persistent list persistentlist compact persistent list persistentlist save print resources printresources comp acted compacted logger debug cleanup installable resources cleanupinstallableresources returns result result invoke transformers resources transform resources transformresources changed list service reference servicereference service refs servicerefs transformer tracker transformertracker get sorted service references getsortedservicereferences service refs servicerefs size walk list unknown resources invoke transformers list registered resource registeredresource unknown list unknownlist persistent list persistentlist get untransformed resources getuntransformedresources unknown list unknownlist size registered resource registeredresource resource unknown list unknownlist service reference servicereference reference service refs servicerefs reference get property getproperty constants service check transformer invoked resource string transformers string registered resource impl registeredresourceimpl resource get attribute getattribute resource transformer resourcetransformer get name getname transformers transformers resource transformer resourcetransformer transformer resource transformer resourcetransformer transformer tracker transformertracker get service getservice reference transformer transformation result transformationresult result transformer transform resource string new transformers newtransformers transformers transformers registered resource impl registeredresourceimpl resource set attribute setattribute resource transformer resourcetransformer get name getname new transformers newtransformers logger is debug enabled isdebugenabled logger debug invoke d invoked transformer object transformer resource arrays to string tostring result result result length persistent list persistentlist transform resource result changed throwable logger error uncaught exception resource transformation changed persistent list persistentlist save print resources printresources transformed org apache sling installer api tasks retry handler retryhandler schedule retry scheduleretry schedule retry scheduleretry logger debug schedule retry scheduleretry called listener start resources lock resourceslock retry during task execution retryduringtaskexecution wake up wakeup update info updateinfo resource data resourcedata data dictionary string object dict string resource type resourcetype string entity id entityid map string object attributes store internal queue queue processed link process update infos processupdateinfos org apache sling installer api resource change listener resourcechangelistener resource added or updated resourceaddedorupdated java lang string java lang string java input stream inputstream java util dictionary map resource added or updated resourceaddedorupdated string resource type resourcetype string entity id entityid input stream inputstream dictionary string object dict map string object attributes update info updateinfo update info updateinfo data resource data resourcedata create dict resource type resourcetype resource type resourcetype dict dict entity id entityid entity id entityid attributes attributes resources lock resourceslock update infos updateinfos add wake up wakeup io exception ioexception ioe logger error unable handle resource add update resource type resourcetype entity id entityid ioe close input stream close io exception ioexception ignore store internal queue queue processed link process update infos processupdateinfos org apache sling installer api resource change listener resourcechangelistener resource removed resourceremoved java lang string java lang string resource removed resourceremoved string resource type resourcetype string resource id resourceid update info updateinfo update info updateinfo resource type resourcetype resource type resourcetype entity id entityid resource id resourceid resources lock resourceslock update infos updateinfos add wake up wakeup process internal queue updates org apache sling installer api resource change listener resourcechangelistener resource added or updated resourceaddedorupdated java lang string java lang string java input stream inputstream java util dictionary map org apache sling installer api resource change listener resourcechangelistener resource removed resourceremoved java lang string java lang string process update infos processupdateinfos list update info updateinfo infos array list arraylist osgi installer impl osgiinstallerimpl update info updateinfo resources lock resourceslock infos add all addall update infos updateinfos update infos updateinfos clear update info updateinfo info infos info data internal resource added or updated internalresourceaddedorupdated info resource type resourcetype info entity id entityid info data info dict info attributes internal resource removed internalresourceremoved info resource type resourcetype info entity id entityid handle external update without write back handleexternalupdatewithoutwriteback entity resource list entityresourcelist erl task resource taskresource erl get first resource getfirstresource uninstalled uninstall get state getstate resource state resourcestate uninstalled get state getstate resource state resourcestate ignore get state getstate resource state resourcestate uninstall erl set finish state setfinishstate resource state resourcestate uninstalled erl set force finish state setforcefinishstate resource state resourcestate handle external add ition addition update resource org apache sling installer api resource change listener resourcechangelistener resource added or updated resourceaddedorupdated java lang string java lang string java input stream inputstream java util dictionary map internal resource added or updated internalresourceaddedorupdated string resource type resourcetype string entity id entityid resource data resourcedata data dictionary string object dict map string object attributes string key resource type resourcetype entity id entityid persist change persistchange attributes properties util propertiesutil to boolean toboolean attributes resource change listener resourcechangelistener resource per sist persist compact and save compactandsave resources lock resourceslock entity resource list entityresourcelist erl persistent list persistentlist get entity resource list getentityresourcelist key logger debug updated key erl check update erl erl get first resource getfirstresource check digest dictionaries task resource taskresource erl get first resource getfirstresource dict string digest file data store filedatastore compute digest computedigest dict get digest getdigest equals digest get state getstate resource state resourcestate installed logger debug resource change key get state getstate resource state resourcestate install get state getstate resource state resourcestate erl set force finish state setforcefinishstate resource state resourcestate installed compact and save compactandsave update handler updatehandler handler persist change persistchange handler find handler findhandler get scheme getscheme handler logger debug handler handle update resource scheme get scheme getscheme handler handler compact and save compactandsave handle external update without write back handleexternalupdatewithoutwriteback erl input stream inputstream localis data get input stream getinputstream update result updateresult result localis handler handle update handleupdate resource type resourcetype entity id entityid geturl data get dictionary getdictionary attributes handler handle update handleupdate resource type resourcetype entity id entityid geturl localis attributes result result geturl equals geturl result get resource is moved getresourceismoved resource internal resource internalresource internal resource internalresource internal resource internalresource result get scheme getscheme result get resource id getresourceid data get dictionary getdictionary data get dictionary getdictionary installable resource installableresource type properties installable resource installableresource type file data get digest getdigest result geturl result get digest getdigest result get priority getpriority data get data file getdatafile registered resource registeredresource persistent list persistentlist add or update addorupdate internal resource internalresource transformation result transformationresult trans res transres transformation result transformationresult entity pos erl get resource id getresourceid index of indexof trans res transres set id setid erl get resource id getresourceid substring pos trans res transres set resource type setresourcetype resource type resourcetype attributes trans res transres set attributes setattributes attributes persistent list persistentlist transform transformation result transformationresult trans res transres entity resource list entityresourcelist new group newgroup persistent list persistentlist get entity resource list getentityresourcelist key new group newgroup set finish state setfinishstate resource state resourcestate installed new group newgroup compact resource updated moved registered resource impl registeredresourceimpl update data get data file getdatafile data get dictionary getdictionary data get digest getdigest result geturl result get digest getdigest result get priority getpriority result geturl erl set force finish state setforcefinishstate resource state resourcestate installed compact and save compactandsave handler persist compact and save compactandsave handle external update without write back handleexternalupdatewithoutwriteback erl localis close input stream localis close io exception ioexception ignore create list update handler updatehandler handler list handlerlist update handler tracker updatehandlertracker get sorted services getsortedservices update handler updatehandler handler handler list handlerlist input stream inputstream localis data get input stream getinputstream update result updateresult result localis handler handle update handleupdate resource type resourcetype entity id entityid data get dictionary getdictionary attributes handler handle update handleupdate resource type resourcetype entity id entityid localis attributes result internal resource internalresource internal resource internalresource internal resource internalresource result get scheme getscheme result get resource id getresourceid data get dictionary getdictionary data get dictionary getdictionary installable resource installableresource type properties installable resource installableresource type file data get digest getdigest result geturl result get digest getdigest result get priority getpriority data get data file getdatafile registered resource registeredresource persistent list persistentlist add or update addorupdate internal resource internalresource transformation result transformationresult trans res transres transformation result transformationresult trans res transres set id setid entity id entityid trans res transres set resource type setresourcetype resource type resourcetype attributes trans res transres set attributes setattributes attributes persistent list persistentlist transform transformation result transformationresult trans res transres entity resource list entityresourcelist new group newgroup persistent list persistentlist get entity resource list getentityresourcelist key new group newgroup set finish state setfinishstate resource state resourcestate installed new group newgroup compact compact and save compactandsave localis close input stream localis close io exception ioexception ignore logger debug handler handle creation resource key compact and save compactandsave erl erl compact persistent list persistentlist save io exception ioexception ioe logger error unable handle resource add update key ioe handle external removal resource org apache sling installer api resource change listener resourcechangelistener resource removed resourceremoved java lang string java lang string internal resource removed internalresourceremoved string resource type resourcetype string entity id entityid string key resource type resourcetype entity id entityid resources lock resourceslock entity resource list entityresourcelist erl persistent list persistentlist get entity resource list getentityresourcelist key logger debug removed key erl registered simply ignore erl string resource id resourceid erl get resource id getresourceid key resource type resourcetype resource id resourceid task resource taskresource erl get first resource getfirstresource get state getstate resource state resourcestate template get dictionary getdictionary get dictionary getdictionary installable resource installableresource resource template registered resource impl registeredresourceimpl set state setstate resource state resourcestate install persistent list persistentlist save get state getstate resource state resourcestate uninstalled removed update handler updatehandler handler find handler findhandler get scheme getscheme handler logger debug handler handle remove resource scheme get scheme getscheme registered resource impl registeredresourceimpl set state setstate resource state resourcestate don check result check result returned handler handle removal handleremoval resource type resourcetype resource id resourceid geturl erl set force finish state setforcefinishstate resource state resourcestate uninstalled erl compact logger debug handler handle remove resource scheme get scheme getscheme registered resource impl registeredresourceimpl set state setstate resource state resourcestate persistent list persistentlist save search handler scheme update handler updatehandler find handler findhandler string scheme list service reference servicereference references update handler tracker updatehandlertracker get sorted service references getsortedservicereferences service reference servicereference references string supported schemes supportedschemes properties util propertiesutil to string array tostringarray get property getproperty update handler updatehandler property s chemes schemes supported schemes supportedschemes string support supported schemes supportedschemes scheme equals support update handler updatehandler update handler tracker updatehandlertracker get service getservice org apache sling installer api info info provider infoprovider get installation state getinstallationstate installation state installationstate get installation state getinstallationstate resources lock resourceslock installation state installationstate installation state installationstate list resource group resourcegroup active resources activeresources array list arraylist resource group resourcegroup list resource group resourcegroup installed resources installedresources array list arraylist resource group resourcegroup list registered resource registeredresource untransformed resources untransformedresources array list arraylist registered resource registeredresource list resource group resourcegroup get active resources getactiveresources active resources activeresources list resource group resourcegroup get installed resources getinstalledresources installed resources installedresources list registered resource registeredresource get untransformed resources getuntransformedresources untransformed resources untransformedresources override string to string tostring installation state installationstate active resources active resources activeresources installed resources installed resources installedresources untransformed resources untransformed resources untransformedresources string entity id entityid persistent list persistentlist get entity ids getentityids persistent list persistentlist is special entity id isspecialentityid entity id entityid entity resource list entityresourcelist group persistent list persistentlist get entity resource list getentityresourcelist entity id entityid string alias group get alias getalias list resource resources array list arraylist resource task resource taskresource group get resources getresources resources add resource string get scheme getscheme get scheme getscheme string geturl geturl string get type gettype get type gettype input stream inputstream get input stream getinputstream io exception ioexception get input stream getinputstream dictionary string object get dictionary getdictionary get dictionary getdictionary string get digest getdigest get digest getdigest get priority getpriority get priority getpriority string get entity id getentityid get entity id getentityid resource state resourcestate get state getstate get state getstate version get version getversion get version getversion get last change getlastchange registered resource impl registeredresourceimpl get last change getlastchange object get attribute getattribute string key get attribute getattribute key override string to string tostring resource entity id entityid get entity id getentityid scheme get scheme getscheme url geturl type get type gettype get state getstate version get version getversion last change lastchange get last change getlastchange priority get priority getpriority digest get digest getdigest resource group resourcegroup resource group resourcegroup list resource get resources getresources resources string get alias getalias alias override string to string tostring group resources group get active resource getactiveresource get active resources getactiveresources add get installed resources getinstalledresources add collections sort get active resources getactiveresources comparator collections sort get installed resources getinstalledresources comparator get untransformed resources getuntransformedresources add all addall persistent list persistentlist get untransformed resources getuntransformedresources comparator resource group resourcegroup comparator comparator resource group resourcegroup compare resource group resourcegroup resource group resourcegroup registered resource registeredresource registered resource registeredresource get resources getresources size get resources getresources iterator get resources getresources size get resources getresources iterator result result result result result get type gettype compare to compareto get type gettype result result get entity id getentityid compare to compareto get entity id getentityid result