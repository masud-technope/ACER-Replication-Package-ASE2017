licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest java io exception ioexception java util hash map hashmap java util map javax servlet http http servlet response httpservletresponse org apache sling commons testing int egration integration http test base httptestbase org apache sling servlets post sling post constants slingpostconstants org slf logger org slf logger factory loggerfactory test creating nodes rendering json json rendering test jsonrenderingtest http test base httptestbase logger instance logger log logger factory loggerfactory get logger getlogger json rendering test jsonrenderingtest string test path testpath get class getclass get simple name getsimplename string post url posturl string test text testtext string json url jsonurl string created node url creatednodeurl override set up setup exception set up setup test values test text testtext test system current time millis currenttimemillis create test node path specific collisions post url posturl http base url test path testpath system current time millis currenttimemillis sling post constants slingpostconstants create suffix map string string props hash map hashmap string string props text test text testtext created node url creatednodeurl test client testclient create node createnode post url posturl props json url jsonurl created node url creatednodeurl json test assert java script assertjavascript method json test assert java script testassertjavascript io exception ioexception string json assert java script assertjavascript json println data data test non recursive testnonrecursive io exception ioexception string json get content getcontent json url jsonurl content type json assert java script assertjavascript test text testtext json println data text create node children verify json format test recursive one level testrecursiveonelevel io exception ioexception map string string props hash map hashmap string string props text test text testtext string parent node url parentnodeurl test client testclient create node createnode post url posturl props string children string child children props child child test client testclient create node createnode parent node url parentnodeurl child props string json get content getcontent parent node url parentnodeurl json content type json assert java script assertjavascript test text testtext json print data text string child children assert java script assertjavascript child json print data child child assert java script assertjavascript test text testtext json print data child text create node children verify json format recursion level test recursive zero levels testrecursivezerolevels io exception ioexception map string string props hash map hashmap string string props text test text testtext string parent node url parentnodeurl test client testclient create node createnode post url posturl props string children string child children props child child test client testclient create node createnode parent node url parentnodeurl child props json json levels string extensions json json string extension extensions string json get content getcontent parent node url parentnodeurl extension content type json assert java script assertjavascript test text testtext json print data text string child children string test info testinfo extension extension assert java script assertjavascript undefined json print type of typeof data child test info testinfo test node infinity returns nodes test recursive inf inity too deep testrecursiveinfinitytoodeep io exception ioexception map string string props hash map hashmap string string props string url test client testclient create node createnode post url posturl props string json get content getcontent url infinity json content type json log info url url log info post url posturl post url posturl resource url port skip http localhost org apache sling launchpad testing snapshot http localhost string resource url resourceurl url to skip toskip resource url resourceurl org apache sling launchpad to skip toskip resource url resourceurl resource url resourceurl substring resource url resourceurl index of indexof assert java script assertjavascript resource url resourceurl json json print data test infinity recursion level test recursive inf inity testrecursiveinfinity io exception ioexception map string string props hash map hashmap string string props text test text testtext props string url test client testclient create node createnode post url posturl props string json get content getcontent url infinity json content type json assert java script assertjavascript test text testtext json print data text assert java script assertjavascript json print data test invalid level testinvalidlevel io exception ioexception assert http status asserthttpstatus created node url creatednodeurl not an integer on purpose notanintegeronpurpose json http servlet response httpservletresponse bad request test escaped strings testescapedstrings io exception ioexception map string string props hash map hashmap string string props text quotes props text single quotes props text curly brackets props text square brackets props eol text nof nlines nand ttabs props html text body black mode html tags props text back slashes backslashes string location test client testclient create node createnode post url posturl props string json get content getcontent location json content type json string key props key set keyset assert java script assertjavascript props key json println data key test acc ented strings testaccentedstrings io exception ioexception map string string props hash map hashmap string string props les amis été château props degree sign ntilde props cyrillic capital letter shcha props cherokee letter qui string location test client testclient create node createnode post url posturl props string json get content getcontent location json content type json string key props key set keyset assert java script assertjavascript props key json println data key count occurences countoccurences string str to count tocount result str to char array tochararray to count tocount result result test tidy non recursive testtidynonrecursive io exception ioexception count chars tidy form no tidy count notidycount count occurences countoccurences get content getcontent created node url creatednodeurl json content type json tidy count tidycount count occurences countoccurences get content getcontent created node url creatednodeurl tidy json content type json delta tidy count tidycount no tidy count notidycount output properties eol chars min assert true asserttrue tidy selector add eol chars json output delta delta delta min test tidy recursive testtidyrecursive io exception ioexception map string string props hash map hashmap string string props text test text testtext props string url test client testclient create node createnode post url posturl props no tidy count notidycount count occurences countoccurences get content getcontent url infinity json content type json tidy count tidycount count occurences countoccurences get content getcontent url tidy infinity json content type json delta tidy count tidycount no tidy count notidycount output properties sub node subnode eol chars min assert true asserttrue tidy selector add eol chars json output delta delta delta min test harray with and without tidy testharraywithandwithouttidy io exception ioexception without tidy withouttidy count occurences countoccurences get content getcontent http base url harray json content type json with tidy withtidy count occurences countoccurences get content getcontent http base url harray tidy json content type json assert true asserttrue expecting eol chars tidy output with tidy withtidy without tidy withouttidy test harray root no recursion testharrayrootnorecursion io exception ioexception string json get content getcontent http base url harray json content type json assert java script assertjavascript undefined json print type of typeof data children test harray root with recursion testharrayrootwithrecursion io exception ioexception string json get content getcontent http base url harray json content type json assert java script assertjavascript object array json print object prototype to string tostring call data children test harray root name with recursion testharrayrootnamewithrecursion io exception ioexception test existing child node string json get content getcontent http base url harray json content type json assert java script assertjavascript json print data children length test root no recursion testrootnorecursion io exception ioexception string json get content getcontent http base url json content type json assert java script assertjavascript rep root json print data jcr primary type primarytype assert java script assertjavascript undefined json print type of typeof data jcr system test root with recursion testrootwithrecursion io exception ioexception string json get content getcontent http base url json content type json assert java script assertjavascript rep root json print data jcr primary type primarytype assert java script assertjavascript rep system json print data jcr system jcr primary type primarytype