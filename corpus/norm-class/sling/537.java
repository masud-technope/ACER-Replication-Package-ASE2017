licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling commons cache infinispan java file java file input stream fileinputstream java file not found exception filenotfoundexception java io exception ioexception java input stream inputstream java lang weak reference weakreference java util map java util concurrent concurrent hash map concurrenthashmap org apache felix scr annotations activate org apache felix scr annotations component org apache felix scr annotations deactivate org apache felix scr annotations property org apache felix scr annotations service org apache sling commons cache api cache org apache sling commons cache api cache manager service cachemanagerservice org apache sling commons cache impl abstract cache manager service abstractcachemanagerservice org infinispan manager default cache manager defaultcachemanager org infinispan manager embedded cache manager embeddedcachemanager org slf logger org slf logger factory loggerfactory component metatype service cache manager service cachemanagerservice cache manager service impl cachemanagerserviceimpl abstract cache manager service abstractcachemanagerservice string cache config sling infinispan config infinispanconfig xml property cache config string cache config cache config property apache software foundation string service vendor service vendor property cache manager service implementation string service description service description property string bin d bind add ress address bind address property sling infinispan data string cache store cache store string config path org apache sling commons cache infinispan config xml logger logger logger factory loggerfactory get logger getlogger cache manager service impl cachemanagerserviceimpl embedded cache manager embeddedcachemanager cache manager cachemanager map string cache caches concurrent hash map concurrenthashmap string cache cache manager service impl cachemanagerserviceimpl io exception ioexception activate activate map string object properties file not found exception filenotfoundexception io exception ioexception string config to string tostring properties cache config cache config file config file configfile file config class loader classloader thread current thread currentthread get context class loader getcontextclassloader thread current thread currentthread set context class loader setcontextclassloader get class getclass get class loader getclassloader config file configfile exists logger info config uri ng configuring cache config file configfile get absolute path getabsolutepath input stream inputstream process config processconfig file input stream fileinputstream config file configfile properties cache manager cachemanager default cache manager defaultcachemanager close logger info config uri ng configuring cache classpath config path input stream inputstream process config processconfig get class getclass get class loader getclassloader get resource as stream getresourceasstream config path properties io exception ioexception unable open config classpath location config path cache manager cachemanager default cache manager defaultcachemanager close thread current thread currentthread set context class loader setcontextclassloader weak reference weakreference cache manager service impl cachemanagerserviceimpl weak reference weakreference cache manager service impl cachemanagerserviceimpl add shutdown hook safety runtime get runtime getruntime add shutdown hook addshutdownhook thread javadoc java lang thread override cache manager service impl cachemanagerserviceimpl deactivate throwable logger debug get message getmessage jmx registration performed configuration perform shutdown deactivate deactivate cache manager cachemanager cache manager cachemanager cache manager cachemanager override cache get instance cache getinstancecache string cache impl cacheimpl cache manager cachemanager suppress warnings suppresswarnings unchecked cache cache caches cache impl cacheimpl cache manager cachemanager caches