licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling query java io exception ioexception java input stream inputstream java util array list arraylist java util arrays java util iterator java util linked hash set linkedhashset java util list java util org apache sling api resource resource org apache sling query api internal option org apache sling query mock json json to resource jsontoresource org junit test utils testutils test utils testutils resource get tree gettree input stream inputstream json stream jsonstream test utils testutils get class loader getclassloader get resource as stream getresourceasstream sample tree json resource resource json to resource jsontoresource parse json stream jsonstream json stream jsonstream close resource io exception ioexception list iterator to list iteratortolist iterator iterator list list array list arraylist iterator has next hasnext list add iterator list list option option list optionlist list list list option result array list arraylist option element list result add option element result assert empty iterator assertemptyiterator iterator iterator iterator has next hasnext fail string format iterator empty returned iterator to string tostring assert resource set equals assertresourcesetequals iterator resource iterator string names string expected set expectedset linked hash set linkedhashset string arrays as list aslist names string actual set actualset linked hash set linkedhashset string get resource names getresourcenames iterator assert equals assertequals expected set expectedset actual set actualset assert resource list equals assertresourcelistequals iterator resource iterator string names assert equals assertequals arrays as list aslist names get resource names getresourcenames iterator list string string args arrays as list aslist args list string get resource names getresourcenames iterator resource iterator list string resource names resourcenames array list arraylist string iterator has next hasnext resource names resourcenames add iterator get name getname resource names resourcenames