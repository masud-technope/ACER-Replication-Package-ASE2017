licensed apache software foundation asf contributor license agreements notice file distributed work additional copyright ownership asf licenses file apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license org apache sling launchpad webapp int egrationtest integrationtest java io exception ioexception java util hash map hashmap java util hash set hashset java util map java util org apache commons http client httpclient methods get method getmethod org apache sling commons testing int egration integration http test base httptestbase org apache sling servlets post sling post constants slingpostconstants test link script helper scripthelper include functionality include test includetest http test base httptestbase string node url a nodeurla string test text a testtexta string node url b nodeurlb string test text b testtextb string node url c nodeurlc string node url d nodeurld string node url e nodeurle string script path scriptpath string to delete todelete hash set hashset string override set up setup exception set up setup create test nodes path specific collisions string url http base url get class getclass get simple name getsimplename system current time millis currenttimemillis sling post constants slingpostconstants create suffix map string string props hash map hashmap string string create test nodes store paths test text a testtexta text system current time millis currenttimemillis props text test text a testtexta node url a nodeurla test client testclient create node createnode url props string path to include pathtoinclude node url a nodeurla substring http base url length node stores path test script include rendering test text b testtextb text system current time millis currenttimemillis props text test text b testtextb props path to include pathtoinclude path to include pathtoinclude node url b nodeurlb test client testclient create node createnode url props node extension include path props path to include pathtoinclude path to include pathtoinclude html node url e nodeurle test client testclient create node createnode url props node infinite loop detection test props remove path to include pathtoinclude props test infinite loop testinfiniteloop node url c nodeurlc test client testclient create node createnode url props node force resource type test string for ced resource type forcedresourcetype get class getclass get simple name getsimplename system current time millis currenttimemillis props remove test infinite loop testinfiniteloop props force resource type forceresourcetype for ced resource type forcedresourcetype props path to include pathtoinclude path to include pathtoinclude node url d nodeurld test client testclient create node createnode url props script for ced forced resource type script path scriptpath apps for ced resource type forcedresourcetype test client testclient mkdirs webdav base url script path scriptpath to delete todelete add upload test script uploadtestscript script path scriptpath include for ced forced esp html esp main rendering script apps repository script path scriptpath apps unstructured test client testclient mkdirs webdav base url script path scriptpath to delete todelete add upload test script uploadtestscript script path scriptpath include test esp html esp override tear down teardown exception tear down teardown string script to delete todelete test client testclient delete script test without include testwithoutinclude io exception ioexception string content get content getcontent node url a nodeurla html content type html assert true asserttrue content includes esp marker content esp template assert true asserttrue content for matted formatted test text content main test text a testtexta assert false assertfalse included content including assert no include request attributes assertnoincluderequestattributes content test with include testwithinclude io exception ioexception string content get content getcontent node url b nodeurlb html content type html assert true asserttrue content includes esp marker content esp template assert true asserttrue content for matted formatted test text content main test text b testtextb assert true asserttrue include content including assert true asserttrue text node included content content test text a testtexta assert include request attributes assertincluderequestattributes content test with include and extension testwithincludeandextension io exception ioexception string content get content getcontent node url e nodeurle html content type html assert true asserttrue content includes esp marker content esp template assert true asserttrue content for matted formatted test text content main test text b testtextb assert true asserttrue include content including assert true asserttrue text node included content content test text a testtexta assert include request attributes assertincluderequestattributes content test infinite loop detection testinfiniteloopdetection io exception ioexception node property infinite include loop sling problem response get method getmethod get method getmethod node url c nodeurlc html http client httpclient execute method executemethod string content get response body as string getresponsebodyasstring assert true asserttrue response infinite loop error message content org apache sling api request recursion too deep exception recursiontoodeepexception todo sling status running tests maven build running tests separate instance started mvn jetty status get status code getstatuscode assert equals assertequals status infinite loop http servlet response httpservletresponse internal server error status test for ced resource type testforcedresourcetype io exception ioexception string content get content getcontent node url d nodeurld html content type html assert true asserttrue content includes esp marker content esp template assert true asserttrue content for matted formatted test text content main test text b testtextb assert true asserttrue include content including assert true asserttrue text node included content content test text a testtexta assert true asserttrue resource type for ced forced content content for ced forced resource type test text a testtexta assert include request attributes assertincluderequestattributes content for ward test forwardtest assert include request attributes assertincluderequestattributes string content assert include request attributes assertincluderequestattributes content for ward test forwardtest assert no include request attributes assertnoincluderequestattributes string content assert include request attributes assertincluderequestattributes content assert include request attributes assertincluderequestattributes string content string tag servlet api attributes include javax servlet include query string request assert request attribute assertrequestattribute content tag javax servlet include request uri assert request attribute assertrequestattribute content tag javax servlet include context path assert request attribute assertrequestattribute content tag javax servlet include servlet path assert request attribute assertrequestattribute content tag javax servlet include path info assert request attribute assertrequestattribute content tag javax servlet include request uri assert request attribute assertrequestattribute content tag javax servlet include request uri assert request attribute assertrequestattribute content tag org apache sling api include servlet assert request attribute assertrequestattribute content tag org apache sling api include resource assert request attribute assertrequestattribute content tag org apache sling api include request path info assert request attribute assertrequestattribute string content string tag string attr name attrname assert true asserttrue expected content tag attr name attrname content tag attr name attrname