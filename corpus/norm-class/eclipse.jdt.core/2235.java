copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation john glassmyer jogl google group sorting broken https bugs eclipse org lars vogel lars vogel vogella contributions bug org eclipse jdt core dom rewrite java util array list arraylist java util arrays java util hash map hashmap java util hash set hashset java util list java util map java util org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime sub monitor submonitor org eclipse jdt core flags org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i import declaration iimportdeclaration org eclipse jdt core i type itype org eclipse jdt core i type root ityperoot org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core signature org eclipse jdt core compiler char operation charoperation org eclipse jdt core dom ast org eclipse jdt core dom ast parser astparser org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom annotatable type annotatabletype org eclipse jdt core dom annotation org eclipse jdt core dom array initializer arrayinitializer org eclipse jdt core dom array type arraytype org eclipse jdt core dom character literal characterliteral org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom dimension org eclipse jdt core dom expression org eclipse jdt core dom field access fieldaccess org eclipse jdt core dom i annotation binding iannotationbinding org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i member value pair binding imembervaluepairbinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom import declaration importdeclaration org eclipse jdt core dom marker annotation markerannotation org eclipse jdt core dom member value pair membervaluepair org eclipse jdt core dom modifier org eclipse jdt core dom org eclipse jdt core dom normal annotation normalannotation org eclipse jdt core dom parameterized type parameterizedtype org eclipse jdt core dom primitive type primitivetype org eclipse jdt core dom simple name simplename org eclipse jdt core dom simple type simpletype org eclipse jdt core dom single member annotation singlememberannotation org eclipse jdt core dom string literal stringliteral org eclipse jdt core dom type org eclipse jdt core dom type literal typeliteral org eclipse jdt core dom wildcard type wildcardtype org eclipse jdt internal core dom rewrite imports import rewrite analyzer importrewriteanalyzer org eclipse jdt internal core dom rewrite imports import rewrite configuration importrewriteconfiguration org eclipse jdt internal core dom rewrite imports import rewrite configuration importrewriteconfiguration implicit import identification implicitimportidentification org eclipse jdt internal core dom rewrite imports import rewrite configuration importrewriteconfiguration import container sorting importcontainersorting org eclipse jdt internal core util messages org eclipse jdt internal core util util org eclipse text edits multi text edit multitextedit org eclipse text edits text edit textedit link import rewrite importrewrite helps updating imports order demand imports threshold configured project rewrite created compilation unit collects references types removed adding imports link add import addimport string rewrite eval uates evaluates type imported returns reference type code reference unqualified fully qualified failed conflict element link rewrite imports rewriteimports i progress monitor iprogressmonitor rewrite translates descriptions text edits applied original source rewrite infrastructure generate minimal text works statements combine result rewrite result link org eclipse jdt core dom rewrite ast rewrite astrewrite statements modified ast rewrite options controlling order demand thr esholds thresholds link set import order setimportorder string specifies groups preferred order link set on demand import threshold setondemandimportthreshold specifies number imports group needed demand statement star link set static on demand import threshold setstaticondemandimportthreshold specifies number imports group needed demand statement star intended subclassed suppress warnings suppresswarnings rawtypes unchecked import rewrite importrewrite link import rewrite importrewrite import rewrite context importrewritecontext option ally optionally link import rewrite importrewrite add import addimport string import rewrite importrewrite import rewrite context importrewritecontext types visible scope types inherited types unnecessary add statements implemented clients import rewrite context importrewritecontext result constant signaling element context res result constant signaling element context res unknown result constant signaling element conflicting element context res conflict result constant signaling element imported explicitly folded demand filtered implicit res unknown explicit kind constant element type kind type kind constant element field kind field kind constant element method kind method searches element context reports element link res unknown link res unknown unknown context require explicit link res unknown explicit conflicts link res conflict element param qualifier qualifier element qualified type param simple element type method field demand imports param kind kind element link kind type link kind field link kind method impl ementors implementors prepared unspecified kinds link res unknown returns result lookup link res link res unknown link res conflict link res unknown explicit find in context findincontext string qualifier string kind prefix normal prefix import rewrite context importrewritecontext default context defaultcontext i compilation unit icompilationunit compilation unit compilationunit compilation unit compilationunit ast root astroot restore existing imports restoreexistingimports list existing imports existingimports map imports kind map importskindmap string import order importorder import on demand threshold importondemandthreshold static import on demand threshold staticimportondemandthreshold list string added imports addedimports list string removed imports removedimports simple names imports reduced demand imports filtered implicit string type explicit simple names typeexplicitsimplenames simple names imports reduced demand imports filtered implicit string static explicit simple names staticexplicitsimplenames string created imports createdimports string created static imports createdstaticimports filter implicit imports filterimplicitimports use context to filter implicit imports usecontexttofilterimplicitimports creates link import rewrite importrewrite link i compilation unit icompilationunit code restore existing imports restoreexistingimports code code code existing imports imports inserted matching locations code restore existing imports restoreexistingimports code code code existing imports removed newly imports created note link create compilation unit compilationunit efficient method ast compilation unit param compilation unit create imports param restore existing imports restoreexistingimports specifies existing imports removed created rewriter java model exception javamodelexception thrown compilation unit accessed import rewrite importrewrite create i compilation unit icompilationunit restore existing imports restoreexistingimports java model exception javamodelexception nls illegal argument exception illegalargumentexception compilation unit list existing import existingimport restore existing imports restoreexistingimports existing import existingimport array list arraylist i import declaration iimportdeclaration imports get imports getimports imports length i import declaration iimportdeclaration curr imports prefix flags is static isstatic curr get flags getflags prefix normal prefix existing import existingimport add prefix curr get element name getelementname import rewrite importrewrite existing import existingimport creates link import rewrite importrewrite ast link compilation unit compilationunit ast created link i compilation unit icompilationunit link ast parser astparser set source setsource i compilation unit icompilationunit creating ast code restore existing imports restoreexistingimports code code code existing imports imports inserted matching locations code restore existing imports restoreexistingimports code code code existing imports removed newly imports created note method efficient link create i compilation unit icompilationunit ast param ast root astroot ast root node create imports param restore existing imports restoreexistingimports specifies existing imports removed created rewriter illegal argument exception illegalargumentexception thrown passed ast created compilation unit import rewrite importrewrite create compilation unit compilationunit ast root astroot restore existing imports restoreexistingimports ast root astroot nls illegal argument exception illegalargumentexception ast i type root ityperoot type root typeroot ast root astroot get type root gettyperoot type root typeroot i compilation unit icompilationunit nls illegal argument exception illegalargumentexception ast constructed java element list existing import existingimport restore existing imports restoreexistingimports existing import existingimport array list arraylist list imports ast root astroot imports imports size import declaration importdeclaration curr import declaration importdeclaration imports string buffer stringbuffer buf string buffer stringbuffer buf append curr is static isstatic prefix normal prefix append curr get name getname get fully qualified name getfullyqualifiedname curr is on demand isondemand buf length buf append buf append existing import existingimport add buf to string tostring import rewrite importrewrite i compilation unit icompilationunit type root typeroot ast root astroot existing import existingimport import rewrite importrewrite i compilation unit icompilationunit compilation unit compilationunit ast root astroot list existing imports existingimports compilation unit compilationunit ast root astroot ast root astroot existing imports existingimports existing imports existingimports existing imports existingimports restore existing imports restoreexistingimports existing imports existingimports is empty isempty existing imports existingimports array list arraylist restore existing imports restoreexistingimports filter implicit imports filterimplicitimports contexts use context to filter implicit imports usecontexttofilterimplicitimports default context defaultcontext import rewrite context importrewritecontext find in context findincontext string qualifier string kind find in imports findinimports qualifier kind added imports addedimports array list arraylist removed imports removedimports array list arraylist type explicit simple names typeexplicitsimplenames hash set hashset static explicit simple names staticexplicitsimplenames hash set hashset created imports createdimports created static imports createdstaticimports import order importorder char operation charoperation strings import on demand threshold importondemandthreshold static import on demand threshold staticimportondemandthreshold imports kind map importskindmap hash map hashmap defines groups order link import rewrite importrewrite imports group matching qualified empty group groups imports matching group imports managed separate groups group names prefixed character param order list strings defining groups group valid empty prefixed character groups set import order setimportorder string order order nls illegal argument exception illegalargumentexception order import order importorder order sets demand threshold normal imports threshold defines number imports group demand star declaration param threshold positive number defining demand threshold normal imports illegal argument exception illegalargumentexception link illegal argument exception illegalargumentexception thrown number positive set on demand import threshold setondemandimportthreshold threshold threshold nls illegal argument exception illegalargumentexception threshold positive import on demand threshold importondemandthreshold threshold sets demand threshold imports threshold defines number imports group demand star declaration param threshold positive number defining demand threshold normal imports illegal argument exception illegalargumentexception link illegal argument exception illegalargumentexception thrown number positive set static on demand import threshold setstaticondemandimportthreshold threshold threshold nls illegal argument exception illegalargumentexception threshold positive static import on demand threshold staticimportondemandthreshold threshold compilation unit rewrite created compilation unit rewrite created i compilation unit icompilationunit get compilation unit getcompilationunit compilation unit compilationunit returns rewrite context imported types clients write context context behavior rewrite context import rewrite context importrewritecontext get default import rewrite context getdefaultimportrewritecontext default context defaultcontext specifies implicit imports types code java lang code types rewrite compilation unit types compilation unit main type created resolve demand conflict filter enabled note link set use context to filter implicit imports setusecontexttofilterimplicitimports filter implicit imports context param filter implicit imports filterimplicitimports code code implicit imports filtered set use context to filter implicit imports setusecontexttofilterimplicitimports set filter implicit imports setfilterimplicitimports filter implicit imports filterimplicitimports filter implicit imports filterimplicitimports filter implicit imports filterimplicitimports sets context properly filter implicit imports option disabled preserve pre behavior option context passed code add import addimport code methods determine filtered type impl icitly implicitly visible note imports option code add import addimport code methods called context param use context to filter implicit imports usecontexttofilterimplicitimports setting set filter implicit imports setfilterimplicitimports set use context to filter implicit imports setusecontexttofilterimplicitimports use context to filter implicit imports usecontexttofilterimplicitimports use context to filter implicit imports usecontexttofilterimplicitimports use context to filter implicit imports usecontexttofilterimplicitimports compare import compareimport prefix string qualifier string string curr curr char at charat prefix curr ends with endswith import rewrite context importrewritecontext res unknown remove prefix curr curr substring curr length length qualifier length import rewrite context importrewritecontext res import rewrite context importrewritecontext res conflict place curr length length dot pos dotpos curr length length curr char at charat dot pos dotpos import rewrite context importrewritecontext res unknown qualifier length dot pos dotpos curr starts with startswith qualifier import rewrite context importrewritecontext res conflict import rewrite context importrewritecontext res api visibility accessed anonymous type find in imports findinimports string qualifier string kind allow ambiguity allowambiguity kind import rewrite context importrewritecontext kind method length char at charat list imports existing imports existingimports prefix kind import rewrite context importrewritecontext kind type normal prefix prefix imports size string curr string imports res compare import compareimport prefix qualifier curr res import rewrite context importrewritecontext res unknown allow ambiguity allowambiguity res import rewrite context importrewritecontext res prefix prefix res object curr kind currkind imports kind map importskindmap curr substring curr kind currkind curr kind currkind equals imports kind map importskindmap qualifier res string package name packagename compilation unit compilationunit get parent getparent get element name getelementname kind import rewrite context importrewritecontext kind type filter implicit imports filterimplicitimports use context to filter implicit imports usecontexttofilterimplicitimports string main type simple name maintypesimplename java core javacore remove java like extension removejavalikeextension compilation unit compilationunit get element name getelementname string main type name maintypename util concatenate name concatenatename package name packagename main type simple name maintypesimplename qualifier equals package name packagename main type name maintypename equals util concatenate name concatenatename qualifier import rewrite context importrewritecontext res ast root astroot list abstract type declaration abstracttypedeclaration types ast root astroot types n types ntypes types size n types ntypes abstract type declaration abstracttypedeclaration type types simple name simplename simple name simplename type get name getname simple name simplename get identifier getidentifier equals qualifier equals package name packagename import rewrite context importrewritecontext res import rewrite context importrewritecontext res conflict i type itype types compilation unit compilationunit get types gettypes n types ntypes types length n types ntypes i type itype type types string type name typename type get element name getelementname type name typename equals qualifier equals package name packagename import rewrite context importrewritecontext res import rewrite context importrewritecontext res conflict java model exception javamodelexception import rewrite context importrewritecontext res unknown adds imports annotation binding rewriter record returns link annotation code imports types type recorded removed record discarded content compilation unit modified method rewriter records newly imports param annotation annotation param ast ast create returned annotation param context optional context types visible current scope code code context imports annotation node returned annotation unqualified type names type names fully qualified conflict prevented annotation add annotation addannotation i annotation binding iannotationbinding annotation ast ast import rewrite context importrewritecontext context type type add import addimport annotation get annotation type getannotationtype ast context type simple type simpletype simple type simpletype simple type simpletype simple type simpletype type simple type simpletype get name getname cut loose parent reused nls simple type simpletype set name setname ast new name newname nls ast new name newname invalid i member value pair binding imembervaluepairbinding mvps annotation get declared member value pairs getdeclaredmembervaluepairs mvps length marker annotation markerannotation result ast new marker annotation newmarkerannotation result set type name settypename result nls mvps length equals mvps get name getname single member annotation singlememberannotation result ast new single member annotation newsinglememberannotation result set type name settypename object mvps get value getvalue result set value setvalue add annotation addannotation ast context result normal annotation normalannotation result ast new normal annotation newnormalannotation result set type name settypename mvps length i member value pair binding imembervaluepairbinding mvp mvps member value pair membervaluepair mvp node mvpnode ast new member value pair newmembervaluepair mvp node mvpnode set name setname ast new simple name newsimplename mvp get name getname object mvp get value getvalue mvp node mvpnode set value setvalue add annotation addannotation ast context result values add mvp node mvpnode result adds rewriter record returns link type node code reference type type binding array binding type variable wildcard binding type type parameters parameterized types type arguments processed imports anonymous types type arguments normalized base type wildcard wildcards imports types type recorded removed record discarded content compilation unit modified method rewriter records param type sig typesig signature type param ast ast create returned type type node type signature type names simple names qualified names conflict prevented type add import from signature addimportfromsignature string type sig typesig ast ast add import from signature addimportfromsignature type sig typesig ast default context defaultcontext adds rewriter record returns link type node code reference type type binding array binding type variable wildcard binding type type parameters parameterized types type arguments processed imports anonymous types type arguments normalized base type wildcard wildcards imports types type recorded removed record discarded content compilation unit modified method rewriter records param type sig typesig signature type param ast ast create returned type param context optional context types visible current scope code code context imports type node type signature type names simple names qualified names conflict prevented type add import from signature addimportfromsignature string type sig typesig ast ast import rewrite context importrewritecontext context type sig typesig type sig typesig length nls illegal argument exception illegalargumentexception invalid type signature empty sig kind sigkind signature get type signature kind gettypesignaturekind type sig typesig sig kind sigkind signature base type signature ast new primitive type newprimitivetype primitive type primitivetype to code tocode signature to string tostring type sig typesig signature array type signature type element type elementtype add import from signature addimportfromsignature signature get element type getelementtype type sig typesig ast context ast new array type newarraytype element type elementtype signature get array count getarraycount type sig typesig signature type signature string erasure sig erasuresig signature get type erasure gettypeerasure type sig typesig string erasure name erasurename signature to string tostring erasure sig erasuresig erasure sig erasuresig char at charat signature resolved erasure name erasurename internal add import internaladdimport erasure name erasurename context type base type basetype ast new simple type newsimpletype ast new name newname erasure name erasurename string type arguments typearguments signature get type arguments gettypearguments type sig typesig type arguments typearguments length parameterized type parameterizedtype type ast new parameterized type newparameterizedtype base type basetype list arg nodes argnodes type type arguments typearguments type arguments typearguments length string curr type arguments typearguments contains nested capture containsnestedcapture bug curr arg nodes argnodes add ast new wildcard type newwildcardtype arg nodes argnodes add add import from signature addimportfromsignature curr ast context type base type basetype signature type variable signature ast new simple type newsimpletype ast new simple name newsimplename signature to string tostring type sig typesig signature wildcard type signature wildcard type wildcardtype wildcard type wildcardtype ast new wildcard type newwildcardtype type sig typesig char at charat signature star type bound add import from signature addimportfromsignature type sig typesig substring ast context wildcard type wildcardtype set bound setbound bound signature wildcard type wildcardtype signature capture type signature add import from signature addimportfromsignature type sig typesig substring ast context nls illegal argument exception illegalargumentexception nls unknown type signature kind type sig typesig adds rewriter record returns type reference code type binding array binding type variable wildcard binding type type parameters parameterized types type arguments processed imports anonymous types type arguments normalized base type wildcard wildcards type annotations imports types type recorded removed record discarded content compilation unit modified method rewriter records param binding signature type type reference type binding type names simple names qualified names conflict prevented string add import addimport i type binding itypebinding binding add import addimport binding default context defaultcontext adds rewriter record returns type reference code type binding array binding type variable wildcard binding type type parameters parameterized types type arguments processed imports anonymous types type arguments normalized base type wildcard wildcards type annotations imports types type recorded removed record discarded content compilation unit modified method rewriter records param binding signature type param context optional context types visible current scope code code context imports type reference type binding type names simple names qualified names conflict prevented string add import addimport i type binding itypebinding binding import rewrite context importrewritecontext context binding is primitive isprimitive binding is type variable istypevariable binding is recovered isrecovered binding get name getname i type binding itypebinding normalized binding normalizedbinding normalize type binding normalizetypebinding binding normalized binding normalizedbinding nls invalid normalized binding normalizedbinding is wildcard type iswildcardtype nls string buffer stringbuffer res string buffer stringbuffer i type binding itypebinding bound normalized binding normalizedbinding get bound getbound bug bound bound is wildcard type iswildcardtype bound is capture iscapture normalized binding normalizedbinding is upper bound isupperbound nls res append nls nls res append nls res append add import addimport bound context res to string tostring normalized binding normalizedbinding is array isarray string buffer stringbuffer res string buffer stringbuffer add import addimport normalized binding normalizedbinding get element type getelementtype context normalized binding normalizedbinding get dimensions getdimensions nls res append nls res to string tostring string qualified name qualifiedname get raw qualified name getrawqualifiedname normalized binding normalizedbinding qualified name qualifiedname length string str internal add import internaladdimport qualified name qualifiedname context i type binding itypebinding type arguments typearguments normalized binding normalizedbinding get type arguments gettypearguments type arguments typearguments length string buffer stringbuffer res string buffer stringbuffer str res append type arguments typearguments length res append i type binding itypebinding curr type arguments typearguments bug contains nested capture containsnestedcapture curr res append res append add import addimport curr context res append res to string tostring str get raw name getrawname normalized binding normalizedbinding contains nested capture containsnestedcapture i type binding itypebinding binding is nested isnested binding binding is primitive isprimitive binding is type variable istypevariable binding is capture iscapture is nested isnested contains nested capture containsnestedcapture binding get wildcard getwildcard binding is wildcard type iswildcardtype contains nested capture containsnestedcapture binding get bound getbound binding is array isarray contains nested capture containsnestedcapture binding get element type getelementtype i type binding itypebinding type arguments typearguments binding get type arguments gettypearguments type arguments typearguments length contains nested capture containsnestedcapture type arguments typearguments contains nested capture containsnestedcapture string signature signature length signature index of indexof signature capture i type binding itypebinding normalize type binding normalizetypebinding i type binding itypebinding binding nls binding binding is null type isnulltype equals binding get name getname binding is anonymous isanonymous i type binding itypebinding base bindings basebindings binding get interfaces getinterfaces base bindings basebindings length base bindings basebindings binding get superclass getsuperclass binding is capture iscapture binding get wildcard getwildcard binding adds rewriter record returns link type code type binding array binding type variable wildcard binding type type parameters parameterized types type arguments processed imports anonymous types type arguments normalized base type wildcard wildcards type annotations type arguments point point type retained point type annotations type arguments imports types type recorded removed record discarded content compilation unit modified method rewriter records param binding signature type param ast ast create returned type type node type binding type names simple names qualified names conflict prevented type add import addimport i type binding itypebinding binding ast ast add import addimport binding ast default context defaultcontext adds rewriter record returns link type code type binding array binding type variable wildcard binding type type parameters parameterized types type arguments processed imports anonymous types type arguments normalized base type wildcard wildcards type annotations type arguments point point type retained point type annotations type arguments imports types type recorded removed record discarded content compilation unit modified method rewriter records param binding signature type param ast ast create returned type param context optional context types visible current scope code code context imports type node type binding type names simple names qualified names conflict prevented type add import addimport i type binding itypebinding binding ast ast import rewrite context importrewritecontext context i type binding itypebinding binding point bindingpoint check annotation and generics checkannotationandgenerics binding type type internal add import internaladdimport binding point bindingpoint binding binding point bindingpoint ast context get base getbase binding point bindingpoint binding point bindingpoint equals binding type build type buildtype binding binding point bindingpoint ast context type type adds rewriter record returns type reference code type binding array type imports types type recorded removed record discarded content compilation unit modified method rewriter records param qualified type name qualifiedtypename qualified type type param context optional context types visible current scope code code context imports type reference qualified type type simple qualified conflict prevented string add import addimport string qualified type name qualifiedtypename import rewrite context importrewritecontext context angle bracket offset anglebracketoffset qualified type name qualifiedtypename index of indexof angle bracket offset anglebracketoffset internal add import internaladdimport qualified type name qualifiedtypename substring angle bracket offset anglebracketoffset context qualified type name qualifiedtypename substring angle bracket offset anglebracketoffset bracket offset bracketoffset qualified type name qualifiedtypename index of indexof bracket offset bracketoffset internal add import internaladdimport qualified type name qualifiedtypename substring bracket offset bracketoffset context qualified type name qualifiedtypename substring bracket offset bracketoffset internal add import internaladdimport qualified type name qualifiedtypename context adds rewriter record returns type reference code type binding array type imports types type recorded removed record discarded content compilation unit modified method rewriter records param qualified type name qualifiedtypename qualified type type type reference qualified type type simple qualified conflict prevented string add import addimport string qualified type name qualifiedtypename add import addimport qualified type name qualifiedtypename default context defaultcontext adds rewriter record returns single member successful qualified imports members type recorded removed record discarded content compilation unit modified method rewriter records param binding binding field method simple member successful qualified conflict prevented illegal argument exception illegalargumentexception link illegal argument exception illegalargumentexception thrown binding field method string add static import addstaticimport i binding ibinding binding add static import addstaticimport binding default context defaultcontext adds rewriter record returns single member successful qualified imports members type recorded removed record discarded content compilation unit modified method rewriter records param binding binding field method param context optional context members visible current scope code code context imports simple member successful qualified conflict prevented illegal argument exception illegalargumentexception link illegal argument exception illegalargumentexception thrown binding field method string add static import addstaticimport i binding ibinding binding import rewrite context importrewritecontext context modifier is static isstatic binding get modifiers getmodifiers binding i variable binding ivariablebinding i variable binding ivariablebinding variable binding variablebinding i variable binding ivariablebinding binding variable binding variablebinding is field isfield i type binding itypebinding declaring type declaringtype variable binding variablebinding get declaring class getdeclaringclass add static import addstaticimport get raw qualified name getrawqualifiedname declaring type declaringtype binding get name getname context binding i method binding imethodbinding i type binding itypebinding declaring type declaringtype i method binding imethodbinding binding get declaring class getdeclaringclass add static import addstaticimport get raw qualified name getrawqualifiedname declaring type declaringtype binding get name getname context nls illegal argument exception illegalargumentexception binding field method adds rewriter record returns single member successful qualified imports members type recorded removed record discarded content compilation unit modified method rewriter records param declaring type name declaringtypename qualified member declaring type param simple name simplename simple member field method param is field isfield code code specifies member field code code method simple member successful qualified conflict prevented string add static import addstaticimport string declaring type name declaringtypename string simple name simplename is field isfield add static import addstaticimport declaring type name declaringtypename simple name simplename is field isfield default context defaultcontext adds rewriter record returns single member successful qualified imports members type recorded removed record discarded content compilation unit modified method rewriter records param declaring type name declaringtypename qualified member declaring type param simple name simplename simple member field method param is field isfield code code specifies member field code code method param context optional context members visible current scope code code context imports simple member successful qualified conflict prevented string add static import addstaticimport string declaring type name declaringtypename string simple name simplename is field isfield import rewrite context importrewritecontext context string key declaring type name declaringtypename simple name simplename declaring type name declaringtypename index of indexof key context context default context defaultcontext kind is field isfield import rewrite context importrewritecontext kind field import rewrite context importrewritecontext kind method imports kind map importskindmap key integer value of valueof kind res context find in context findincontext declaring type name declaringtypename simple name simplename kind res import rewrite context importrewritecontext res conflict key res import rewrite context importrewritecontext res unknown add entry addentry prefix key res import rewrite context importrewritecontext res unknown explicit add entry addentry prefix key static explicit simple names staticexplicitsimplenames add simple name simplename simple name simplename string internal add import internaladdimport string full type name fulltypename import rewrite context importrewritecontext context idx full type name fulltypename last index of lastindexof string type container name typecontainername type name typename idx type container name typecontainername full type name fulltypename substring idx type name typename full type name fulltypename substring idx nls type container name typecontainername type name typename full type name fulltypename type container name typecontainername length primitive type primitivetype to code tocode type name typename full type name fulltypename context context default context defaultcontext res context find in context findincontext type container name typecontainername type name typename import rewrite context importrewritecontext kind type res import rewrite context importrewritecontext res conflict full type name fulltypename res import rewrite context importrewritecontext res unknown add entry addentry normal prefix full type name fulltypename res import rewrite context importrewritecontext res unknown explicit add entry addentry normal prefix full type name fulltypename type explicit simple names typeexplicitsimplenames add type name typename type name typename add entry addentry string entry existing imports existingimports add entry removed imports removedimports remove entry added imports addedimports add entry remove entry removeentry string entry existing imports existingimports remove entry added imports addedimports remove entry removed imports removedimports add entry records remove remove recorded exists recorded record add ition addition discarded content compilation unit modified method rewriter records removed param qualified name qualifiedname remove code code returned remove import removeimport string qualified name qualifiedname remove entry removeentry normal prefix qualified name qualifiedname records remove remove recorded exists recorded record add ition addition discarded content compilation unit modified method rewriter records removed param qualified name qualifiedname remove code code returned remove static import removestaticimport string qualified name qualifiedname remove entry removeentry prefix qualified name qualifiedname string get raw name getrawname i type binding itypebinding normalized binding normalizedbinding normalized binding normalizedbinding get type declaration gettypedeclaration get name getname string get raw qualified name getrawqualifiedname i type binding itypebinding normalized binding normalizedbinding normalized binding normalizedbinding get type declaration gettypedeclaration get qualified name getqualifiedname converts modifications recorded rewriter object representing text edits source code rewrite compilation unit compilation unit modified calling methods discard modifications record sub sequence subsequence modifications record method called text edit object accurately reflect net cumulative param monitor progress monitor code code text edit object describing document recorded rewriter core exception coreexception exception thrown rewrite fails text edit textedit rewrite imports rewriteimports i progress monitor iprogressmonitor monitor core exception coreexception sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor messages bind messages import rewrite importrewrite process description processdescription has recorded changes hasrecordedchanges created imports createdimports char operation charoperation strings created static imports createdstaticimports char operation charoperation strings multi text edit multitextedit compilation unit compilationunit used ast root usedastroot ast root astroot used ast root usedastroot ast parser astparser parser ast parser astparser new parser newparser ast jls parser set source setsource compilation unit compilationunit reduced ast parser set focal position setfocalposition parser set resolve bindings setresolvebindings used ast root usedastroot compilation unit compilationunit parser createast sub monitor submonitor split import rewrite configuration importrewriteconfiguration config build import rewrite configuration buildimportrewriteconfiguration import rewrite analyzer importrewriteanalyzer computer import rewrite analyzer importrewriteanalyzer compilation unit compilationunit used ast root usedastroot config string added import addedimport added imports addedimports is static isstatic prefix added import addedimport char at charat string qualified name qualifiedname added import addedimport substring computer add import addimport is static isstatic qualified name qualifiedname string removed import removedimport removed imports removedimports is static isstatic prefix removed import removedimport char at charat string qualified name qualifiedname removed import removedimport substring computer remove import removeimport is static isstatic qualified name qualifiedname string type explicit simple name typeexplicitsimplename type explicit simple names typeexplicitsimplenames computer require explicit import requireexplicitimport type explicit simple name typeexplicitsimplename string static explicit simple name staticexplicitsimplename static explicit simple names staticexplicitsimplenames computer require explicit import requireexplicitimport static explicit simple name staticexplicitsimplename import rewrite analyzer importrewriteanalyzer rewrite result rewriteresult result computer analyze rewrite analyzerewrite sub monitor submonitor split created imports createdimports result get created imports getcreatedimports created static imports createdstaticimports result get created static imports getcreatedstaticimports result get text edit gettextedit monitor monitor import rewrite configuration importrewriteconfiguration build import rewrite configuration buildimportrewriteconfiguration import rewrite configuration importrewriteconfiguration builder config builder configbuilder restore existing imports restoreexistingimports config builder configbuilder import rewrite configuration importrewriteconfiguration builder preserving original imports preservingoriginalimports config builder configbuilder import rewrite configuration importrewriteconfiguration builder discarding original imports discardingoriginalimports config builder configbuilder set import order setimportorder arrays as list aslist import order importorder config builder configbuilder set type on demand threshold settypeondemandthreshold import on demand threshold importondemandthreshold config builder configbuilder set static on demand threshold setstaticondemandthreshold static import on demand threshold staticimportondemandthreshold config builder configbuilder set type container sorting settypecontainersorting use context to filter implicit imports usecontexttofilterimplicitimports import container sorting importcontainersorting import container sorting importcontainersorting type config builder configbuilder set static container sorting setstaticcontainersorting import container sorting importcontainersorting type config builder configbuilder set implicit import identification setimplicitimportidentification filter implicit imports filterimplicitimports implicit import identification implicitimportidentification java lang implicit import identification implicitimportidentification config builder configbuilder build returns imports created invocation link rewrite imports rewriteimports i progress monitor iprogressmonitor code code methods called note list doesn imports link get added imports getaddedimports implicit imports created imports represented demand imports created imports string get created imports getcreatedimports created imports createdimports returns imports created invocation link rewrite imports rewriteimports i progress monitor iprogressmonitor code code methods called note list doesn imports link get added static imports getaddedstaticimports implicit imports created imports represented demand imports created imports string get created static imports getcreatedstaticimports created static imports createdstaticimports returns imports recorded imports recorded string get added imports getaddedimports filter from list filterfromlist added imports addedimports normal prefix returns imports recorded imports recorded string get added static imports getaddedstaticimports filter from list filterfromlist added imports addedimports prefix returns imports recorded removed imports recorded removed string get removed imports getremovedimports filter from list filterfromlist removed imports removedimports normal prefix returns imports recorded removed imports recorded removed string get removed static imports getremovedstaticimports filter from list filterfromlist removed imports removedimports prefix returns code code imports recorded removed returns imports recorded has recorded changes hasrecordedchanges restore existing imports restoreexistingimports added imports addedimports is empty isempty removed imports removedimports is empty isempty string filter from list filterfromlist list string imports prefix imports char operation charoperation strings list string res array list arraylist string curr imports prefix curr char at charat res add curr substring res to array toarray string res size annotate list annotatelist list annotations i annotation binding iannotationbinding annotation bindings annotationbindings ast ast import rewrite context importrewritecontext context annotation bindings annotationbindings length annotation annotation add annotation addannotation annotation bindings annotationbindings ast context annotation annotations add annotation type annotate type annotatetype i type binding itypebinding binding ast ast import rewrite context importrewritecontext context type type i annotation binding iannotationbinding annotation bindings annotationbindings binding get type annotations gettypeannotations annotation bindings annotationbindings annotation bindings annotationbindings length type annotatable type annotatabletype annotate list annotatelist annotatable type annotatabletype type annotations annotation bindings annotationbindings ast context type type build type buildtype i type binding itypebinding binding i type binding itypebinding binding point bindingpoint ast ast import rewrite context importrewritecontext context type qualifier binding equals binding point bindingpoint qualifier build type recursively left type type binding is member ismember build type buildtype binding get declaring class getdeclaringclass binding point bindingpoint ast context qualifier type internal add import internaladdimport binding ast context type type i type binding itypebinding check annotation and generics checkannotationandgenerics i type binding itypebinding binding i type binding itypebinding binding point bindingpoint binding i annotation binding iannotationbinding annotation binding annotationbinding binding get type annotations gettypeannotations i type binding itypebinding type arguments typearguments binding get type arguments gettypearguments annotation binding annotationbinding annotation binding annotationbinding length type arguments typearguments type arguments typearguments length binding point bindingpoint binding binding is member ismember binding binding get declaring class getdeclaringclass binding point bindingpoint type create base type createbasetype ast ast import rewrite context importrewritecontext context i type binding itypebinding normalized binding normalizedbinding type type i annotation binding iannotationbinding annotation binding annotationbinding normalized binding normalizedbinding get type annotations gettypeannotations annots present annotspresent annotation binding annotationbinding annotation binding annotationbinding length string qualified name qualifiedname get raw qualified name getrawqualifiedname normalized binding normalizedbinding string res qualified name qualifiedname length internal add import internaladdimport qualified name qualifiedname context get raw name getrawname normalized binding normalizedbinding annots present annotspresent dot index dotindex res res last index of lastindexof dot index dotindex name qualifier namequalifier ast new name newname res substring dot index dotindex simple name simplename simple name simplename ast new simple name newsimplename res substring dot index dotindex type ast new name qualified type newnamequalifiedtype name qualifier namequalifier simple name simplename type ast new simple type newsimpletype ast new name newname res annotate list annotatelist annotatable type annotatabletype type annotations annotation binding annotationbinding ast context type ast new simple type newsimpletype ast new name newname res type type get array type getarraytype type element type elementtype ast ast import rewrite context importrewritecontext context i type binding itypebinding normalized binding normalizedbinding no dimensions nodimensions normalized binding normalizedbinding get dimensions getdimensions array type arraytype array type arraytype ast new array type newarraytype element type elementtype no dimensions nodimensions ast api level apilevel ast jls no dimensions nodimensions i annotation binding iannotationbinding type annotations typeannotations normalized binding normalizedbinding get type annotations gettypeannotations type annotations typeannotations length dimension dimension dimension array type arraytype dimensions annotate list annotatelist dimension annotations type annotations typeannotations ast context normalized binding normalizedbinding normalized binding normalizedbinding get component type getcomponenttype array type arraytype type internal add import internaladdimport i type binding itypebinding binding ast ast import rewrite context importrewritecontext context type current type currenttype get base getbase type type i type binding itypebinding normalized binding normalizedbinding binding is primitive isprimitive type ast new primitive type newprimitivetype primitive type primitivetype to code tocode binding get name getname normalized binding normalizedbinding binding normalized binding normalizedbinding normalize type binding normalizetypebinding binding normalized binding normalizedbinding nls ast new simple type newsimpletype nls ast new simple name newsimplename invalid normalized binding normalizedbinding is type variable istypevariable type ast new simple type newsimpletype ast new simple name newsimplename binding get name getname normalized binding normalizedbinding is wildcard type iswildcardtype wildcard type wildcardtype wc type wctype ast new wildcard type newwildcardtype i type binding itypebinding bound normalized binding normalizedbinding get bound getbound bug bound bound is wildcard type iswildcardtype bound is capture iscapture type bound type boundtype add import addimport bound ast context wc type wctype set bound setbound bound type boundtype normalized binding normalizedbinding is upper bound isupperbound type wc type wctype normalized binding normalizedbinding is array isarray type element type elementtype add import addimport normalized binding normalizedbinding get element type getelementtype ast context type get array type getarraytype element type elementtype ast context normalized binding normalizedbinding type annotate type annotatetype normalized binding normalizedbinding ast context type get base getbase type create base type createbasetype ast context normalized binding normalizedbinding type current type currenttype type ast new qualified type newqualifiedtype current type currenttype ast new simple name newsimplename get raw name getrawname normalized binding normalizedbinding ast new simple type newsimpletype ast new name newname get raw name getrawname normalized binding normalizedbinding type annotate type annotatetype normalized binding normalizedbinding ast context type i type binding itypebinding type arguments typearguments normalized binding normalizedbinding get type arguments gettypearguments type arguments typearguments length parameterized type parameterizedtype param type paramtype ast new parameterized type newparameterizedtype type list arguments param type paramtype type arguments typearguments type arguments typearguments length i type binding itypebinding curr type arguments typearguments bug contains nested capture containsnestedcapture curr arguments add ast new wildcard type newwildcardtype arguments add add import addimport curr ast context type param type paramtype type expression add annotation addannotation ast ast object import rewrite context importrewritecontext context ast new boolean literal newbooleanliteral boolean value booleanvalue integer ast new number literal newnumberliteral to string tostring character character literal characterliteral result ast new character literal newcharacterliteral result set char value setcharvalue character char value charvalue result i type binding itypebinding type literal typeliteral result ast new type literal newtypeliteral result set type settype add import addimport i type binding itypebinding ast context result string string literal stringliteral result ast new string literal newstringliteral result set literal value setliteralvalue string result i variable binding ivariablebinding i variable binding ivariablebinding variable i variable binding ivariablebinding field access fieldaccess result ast new field access newfieldaccess result set name setname ast new simple name newsimplename variable get name getname type type add import addimport variable get type gettype ast context type simple type simpletype simple type simpletype simple type simpletype simple type simpletype type simple type simpletype get name getname cut loose parent reused nls simple type simpletype set name setname nls ast new simple name newsimplename nls ast new name newname nls invalid result set expression setexpression result i annotation binding iannotationbinding add annotation addannotation i annotation binding iannotationbinding ast context object object values object values length add annotation addannotation ast values context array initializer arrayinitializer initializer ast new array initializer newarrayinitializer list expressions initializer expressions size values length size expressions add add annotation addannotation ast values context initializer