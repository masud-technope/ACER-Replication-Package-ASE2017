copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests rewrite describing java util list junit framework test org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom block org eclipse jdt core dom cast expression castexpression org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom expression org eclipse jdt core dom expression statement expressionstatement org eclipse jdt core dom for statement forstatement org eclipse jdt core dom if statement ifstatement org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom parenthesized expression parenthesizedexpression org eclipse jdt core dom prefix expression prefixexpression org eclipse jdt core dom return statement returnstatement org eclipse jdt core dom statement org eclipse jdt core dom type org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom variable declaration statement variabledeclarationstatement org eclipse jdt core dom while statement whilestatement org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite list rewrite listrewrite suppress warnings suppresswarnings rawtypes unchecked ast rewriting move code test astrewritingmovecodetest ast rewriting test astrewritingtest ast rewriting move code test astrewritingmovecodetest string ast rewriting move code test astrewritingmovecodetest string api level apilevel api level apilevel test suite create suite createsuite ast rewriting move code test astrewritingmovecodetest test move testmove exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append buf append foo buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot list body decls bodydecls type body declarations bodydeclarations ast node astnode ast node astnode body decls bodydecls ast node astnode placeholder rewrite create move target createmovetarget rewrite get list rewrite getlistrewrite type type declaration typedeclaration body declarations property insert last insertlast placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move decl same level d testmovedeclsamelevelcd exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append e inner einner buf append xee buf append buf append buf append buf append comment buf append buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append gee buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot move type type move copy statements constructor method list members type body declarations bodydeclarations assert true asserttrue declarations members is empty isempty assert true asserttrue find members type declaration typedeclaration type declaration typedeclaration inner type innertype type declaration typedeclaration members rewrite remove inner type innertype ast node astnode moved node movednode rewrite create copy target createcopytarget inner type innertype rewrite get list rewrite getlistrewrite type type declaration typedeclaration body declarations property insert last insertlast moved node movednode statement to move tomove statement to copy tocopy method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type assert true asserttrue find constructor method decl methoddecl block body method decl methoddecl get body getbody assert true asserttrue body body list statements body statements assert true asserttrue expected number statements statements size to move tomove statement statements to copy tocopy statement statements rewrite remove to move tomove method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type gee assert true asserttrue find gee method decl methoddecl block body method decl methoddecl get body getbody assert true asserttrue body body list statements body statements assert true asserttrue statements statements is empty isempty ast node astnode insert node for move insertnodeformove rewrite create copy target createcopytarget to move tomove ast node astnode insert node for copy insertnodeforcopy rewrite create copy target createcopytarget to copy tocopy rewrite get list rewrite getlistrewrite body block statements property insert last insertlast insert node for copy insertnodeforcopy rewrite get list rewrite getlistrewrite body block statements property insert last insertlast insert node for move insertnodeformove string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append comment buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append gee buf append system buf append gee cool buf append buf append buf append buf append e inner einner buf append xee buf append buf append buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move decl same level testmovedeclsamelevel exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append e inner einner buf append xee buf append buf append buf append buf append comment buf append buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append gee buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot move type type move copy statements constructor method list members type body declarations bodydeclarations assert true asserttrue declarations members is empty isempty assert true asserttrue find members type declaration typedeclaration type declaration typedeclaration inner type innertype type declaration typedeclaration members ast node astnode moved node movednode rewrite create move target createmovetarget inner type innertype rewrite get list rewrite getlistrewrite type type declaration typedeclaration body declarations property insert last insertlast moved node movednode statement to move tomove statement to copy tocopy method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type assert true asserttrue find constructor method decl methoddecl block body method decl methoddecl get body getbody assert true asserttrue body body list statements body statements assert true asserttrue expected number statements statements size to move tomove statement statements to copy tocopy statement statements method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type gee assert true asserttrue find gee method decl methoddecl block body method decl methoddecl get body getbody assert true asserttrue body body list statements body statements assert true asserttrue statements statements is empty isempty ast node astnode insert node for move insertnodeformove rewrite create move target createmovetarget to move tomove ast node astnode insert node for copy insertnodeforcopy rewrite create copy target createcopytarget to copy tocopy rewrite get list rewrite getlistrewrite body block statements property insert last insertlast insert node for copy insertnodeforcopy rewrite get list rewrite getlistrewrite body block statements property insert last insertlast insert node for move insertnodeformove string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append comment buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append gee buf append system buf append gee cool buf append buf append buf append buf append e inner einner buf append xee buf append buf append buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move decl different level d testmovedecldifferentlevelcd exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append e inner einner buf append xee buf append buf append buf append buf append comment buf append buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append gee buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot list members type body declarations bodydeclarations assert true asserttrue declarations members is empty isempty assert true asserttrue find members type declaration typedeclaration type declaration typedeclaration inner type innertype type declaration typedeclaration members list inner members innermembers inner type innertype body declarations bodydeclarations assert true asserttrue expected number members inner members innermembers size move type declaration typedeclaration outer type outertype find type declaration findtypedeclaration ast root astroot assert true asserttrue outer type outertype rewrite remove outer type outertype ast node astnode insert node for copy insertnodeforcopy rewrite create copy target createcopytarget outer type outertype rewrite get list rewrite getlistrewrite inner type innertype type declaration typedeclaration body declarations property insert last insertlast insert node for copy insertnodeforcopy copy method main type method declaration methoddeclaration method decl methoddecl method declaration methoddeclaration inner members innermembers ast node astnode insert node for move insertnodeformove rewrite create copy target createcopytarget method decl methoddecl rewrite get list rewrite getlistrewrite type type declaration typedeclaration body declarations property insert last insertlast insert node for move insertnodeformove nest body constructor statement method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type assert true asserttrue find constructor method decl methoddecl block body method decl methoddecl get body getbody while statement whilestatement while statement whilestatement ast new while statement newwhilestatement while statement whilestatement set expression setexpression ast new boolean literal newbooleanliteral statement insert node for copy insertnodeforcopy statement rewrite create copy target createcopytarget body existing body while statement whilestatement set body setbody insert node for copy insertnodeforcopy block new body newbody ast new block newblock list new statements newstatements new body newbody statements new statements newstatements add while statement whilestatement rewrite replace body new body newbody string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append e inner einner buf append xee buf append buf append buf append buf append buf append buf append buf append comment buf append buf append buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append buf append gee buf append buf append xee buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move decl different level testmovedecldifferentlevel exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append e inner einner buf append xee buf append buf append buf append buf append comment buf append buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append gee buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot list members type body declarations bodydeclarations assert true asserttrue declarations members is empty isempty assert true asserttrue find members type declaration typedeclaration type declaration typedeclaration inner type innertype type declaration typedeclaration members list inner members innermembers inner type innertype body declarations bodydeclarations assert true asserttrue expected number members inner members innermembers size move type declaration typedeclaration outer type outertype find type declaration findtypedeclaration ast root astroot assert true asserttrue outer type outertype ast node astnode insert node for copy insertnodeforcopy rewrite create move target createmovetarget outer type outertype rewrite get list rewrite getlistrewrite inner type innertype type declaration typedeclaration body declarations property insert last insertlast insert node for copy insertnodeforcopy copy method main type method declaration methoddeclaration method decl methoddecl method declaration methoddeclaration inner members innermembers ast node astnode insert node for move insertnodeformove rewrite create copy target createcopytarget method decl methoddecl rewrite get list rewrite getlistrewrite type type declaration typedeclaration body declarations property insert last insertlast insert node for move insertnodeformove nest body constructor statement method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type assert true asserttrue find constructor method decl methoddecl block body method decl methoddecl get body getbody while statement whilestatement while statement whilestatement ast new while statement newwhilestatement while statement whilestatement set expression setexpression ast new boolean literal newbooleanliteral statement insert node for copy insertnodeforcopy statement rewrite create copy target createcopytarget body existing body while statement whilestatement set body setbody insert node for copy insertnodeforcopy block new body newbody ast new block newblock list new statements newstatements new body newbody statements new statements newstatements add while statement whilestatement rewrite replace body new body newbody string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append e inner einner buf append xee buf append buf append buf append buf append buf append buf append buf append comment buf append buf append buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append buf append gee buf append buf append xee buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move statements d testmovestatementscd exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append e inner einner buf append xee buf append buf append buf append buf append comment buf append buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append gee buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot move stat ments statments ifstatement move statment statement ifstatement method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type assert true asserttrue find constructor method decl methoddecl block body method decl methoddecl get body getbody list statements body statements assert true asserttrue find statement statements if statement ifstatement if statement ifstatement if statement ifstatement if statement ifstatement statements statement insert node for copy insertnodeforcopy statement rewrite create copy target createcopytarget ast node astnode statements statement insert node for copy insertnodeforcopy statement rewrite create copy target createcopytarget ast node astnode statements block while body whilebody ast new block newblock while statement whilestatement while statement whilestatement ast new while statement newwhilestatement while statement whilestatement set expression setexpression ast new boolean literal newbooleanliteral while statement whilestatement set body setbody while body whilebody list while body statements whilebodystatements while body whilebody statements while body statements whilebodystatements add insert node for copy insertnodeforcopy assert true asserttrue statement body block if statement ifstatement get then statement getthenstatement block block block block if statement ifstatement get then statement getthenstatement rewrite get list rewrite getlistrewrite block block statements property insert first insertfirst while statement whilestatement rewrite get list rewrite getlistrewrite block block statements property insert after insertafter insert node for copy insertnodeforcopy while statement whilestatement rewrite remove ast node astnode statements rewrite remove ast node astnode statements string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append e inner einner buf append xee buf append buf append buf append buf append comment buf append buf append buf append buf append system buf append buf append buf append buf append buf append gee cool buf append buf append buf append gee buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move statements testmovestatements exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append comment buf append buf append buf append buf append buf append buf append system buf append gee cool buf append buf append buf append gee buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot move stat ments statments ifstatement move statment statement ifstatement method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type assert true asserttrue find constructor method decl methoddecl block body method decl methoddecl get body getbody list statements body statements assert true asserttrue find statement statements if statement ifstatement if statement ifstatement if statement ifstatement if statement ifstatement statements statement insert node for copy insertnodeforcopy statement rewrite create move target createmovetarget ast node astnode statements statement insert node for copy insertnodeforcopy statement rewrite create move target createmovetarget ast node astnode statements block while body whilebody ast new block newblock while statement whilestatement while statement whilestatement ast new while statement newwhilestatement while statement whilestatement set expression setexpression ast new boolean literal newbooleanliteral while statement whilestatement set body setbody while body whilebody list while body statements whilebodystatements while body whilebody statements while body statements whilebodystatements add insert node for copy insertnodeforcopy assert true asserttrue statement body block if statement ifstatement get then statement getthenstatement block block block block if statement ifstatement get then statement getthenstatement rewrite get list rewrite getlistrewrite block block statements property insert first insertfirst while statement whilestatement rewrite get list rewrite getlistrewrite block block statements property insert after insertafter insert node for copy insertnodeforcopy while statement whilestatement string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append exception runnable serializable buf append comment buf append buf append buf append buf append system buf append buf append buf append buf append buf append gee cool buf append buf append buf append gee buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test copy from deleted testcopyfromdeleted exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append system buf append gee cool buf append buf append buf append goo buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot delete method foo copy statement goo method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo assert true asserttrue find foo method decl methoddecl rewrite remove method decl methoddecl block body method decl methoddecl get body getbody list statements body statements assert true asserttrue find statement statements size ast node astnode place holder placeholder rewrite create move target createmovetarget ast node astnode statements method declaration methoddeclaration method goo methodgoo find method declaration findmethoddeclaration type goo assert true asserttrue find goo method goo methodgoo rewrite get list rewrite getlistrewrite method goo methodgoo get body getbody block statements property insert last insertlast place holder placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append goo buf append system buf append gee cool buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test changes in move d testchangesinmovecd exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append system buf append gee cool buf append buf append buf append goo buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot replace statement goo moved if statement ifstatement foo add node statement method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo assert true asserttrue find foo method decl methoddecl list foo statements foostatements method decl methoddecl get body getbody statements assert true asserttrue find statement foo statements foostatements size prepare if statement ifstatement move if statement ifstatement if statement ifstatement if statement ifstatement foo statements foostatements rewrite remove if statement ifstatement ast node astnode place holder placeholder rewrite create copy target createcopytarget if statement ifstatement add statement if statement ifstatement block return statement returnstatement return statement returnstatement ast new return statement newreturnstatement block block if statement ifstatement get then statement getthenstatement rewrite get list rewrite getlistrewrite block statements property insert last insertlast return statement returnstatement replace statement goo moved if statement ifstatement method declaration methoddeclaration method goo methodgoo find method declaration findmethoddeclaration type goo assert true asserttrue find goo method goo methodgoo list goo statements goostatements method goo methodgoo get body getbody statements assert true asserttrue find statement goo goo statements goostatements size rewrite replace ast node astnode goo statements goostatements place holder placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append goo buf append system buf append gee cool buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test changes in move testchangesinmove exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append system buf append gee cool buf append buf append buf append goo buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot replace statement goo moved if statement ifstatement foo add node statement method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo assert true asserttrue find foo method decl methoddecl list foo statements foostatements method decl methoddecl get body getbody statements assert true asserttrue find statement foo statements foostatements size prepare if statement ifstatement move if statement ifstatement if statement ifstatement if statement ifstatement foo statements foostatements ast node astnode place holder placeholder rewrite create move target createmovetarget if statement ifstatement add statement if statement ifstatement block return statement returnstatement return statement returnstatement ast new return statement newreturnstatement block block if statement ifstatement get then statement getthenstatement rewrite get list rewrite getlistrewrite block statements property insert last insertlast return statement returnstatement replace statement goo moved if statement ifstatement method declaration methoddeclaration method goo methodgoo find method declaration findmethoddeclaration type goo assert true asserttrue find goo method goo methodgoo list goo statements goostatements method goo methodgoo get body getbody statements assert true asserttrue find statement goo goo statements goostatements size rewrite replace ast node astnode goo statements goostatements place holder placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append goo buf append system buf append gee cool buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test swap d testswapcd exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append goo xoo buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot swap arguments method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo assert true asserttrue find foo method decl methoddecl list foo statements foostatements method decl methoddecl get body getbody statements assert true asserttrue statements expected foo statements foostatements size expression statement expressionstatement statement expression statement expressionstatement foo statements foostatements method invocation methodinvocation invocation method invocation methodinvocation statement get expression getexpression list arguments invocation arguments assert true asserttrue arguments expected arguments size ast node astnode arg ast node astnode arguments ast node astnode arg ast node astnode arguments ast node astnode place holder placeholder rewrite create copy target createcopytarget arg ast node astnode place holder placeholder rewrite create copy target createcopytarget arg rewrite replace arg place holder placeholder rewrite replace arg place holder placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append goo xoo buf append buf append assert equal string assertequalstring preview buf to string tostring test swap testswap exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append goo xoo buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot swap arguments method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo assert true asserttrue find foo method decl methoddecl list foo statements foostatements method decl methoddecl get body getbody statements assert true asserttrue statements expected foo statements foostatements size expression statement expressionstatement statement expression statement expressionstatement foo statements foostatements method invocation methodinvocation invocation method invocation methodinvocation statement get expression getexpression list arguments invocation arguments assert true asserttrue arguments expected arguments size ast node astnode arg ast node astnode arguments ast node astnode arg ast node astnode arguments ast node astnode place holder placeholder rewrite create move target createmovetarget arg ast node astnode place holder placeholder rewrite create move target createmovetarget arg replace remove rewrite replace arg place holder placeholder replace remove rewrite replace arg place holder placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append goo xoo buf append buf append assert equal string assertequalstring preview buf to string tostring test multiple copies of same node testmultiplecopiesofsamenode exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements list if statement body ifstatementbody block if statement ifstatement get then statement getthenstatement statements ast node astnode node ast node astnode if statement body ifstatementbody ast node astnode placeholder rewrite create copy target createcopytarget node rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder ast node astnode placeholder rewrite create copy target createcopytarget node rewrite replace ast node astnode if statement body ifstatementbody placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append comment buf append comment buf append buf append buf append comment buf append buf append assert equal string assertequalstring preview buf to string tostring test copy multiple nodes testcopymultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append foo buf append comment buf append buf append assert equal string assertequalstring preview buf to string tostring test copy multiple nodes testcopymultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget replace ast ast ast root astroot getast prefix expression prefixexpression expression ast new prefix expression newprefixexpression expression set operand setoperand ast new simple name newsimplename expression set operator setoperator prefix expression prefixexpression decrement expression statement expressionstatement new statement newstatement ast new expression statement newexpressionstatement expression list rewrite listrewrite replace new statement newstatement rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append buf append comment buf append buf append buf append buf append comment buf append buf append assert equal string assertequalstring preview buf to string tostring test copy multiple nodes testcopymultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget insert copied ast ast ast root astroot getast prefix expression prefixexpression expression ast new prefix expression newprefixexpression expression set operand setoperand ast new simple name newsimplename expression set operator setoperator prefix expression prefixexpression decrement expression statement expressionstatement new statement newstatement ast new expression statement newexpressionstatement expression list rewrite listrewrite insert after insertafter new statement newstatement remove list rewrite listrewrite remove ast node astnode then statements thenstatements rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append buf append comment buf append buf append foo buf append buf append comment buf append buf append assert equal string assertequalstring preview buf to string tostring test copy multiple nodes testcopymultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append foo comment buf append foo buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget rewrite replace if statement ifstatement placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append foo comment buf append foo buf append buf append assert equal string assertequalstring preview buf to string tostring test copy multiple nodes testcopymultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append foo buf append foo buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget list rewrite listrewrite insert after insertafter placeholder rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append foo buf append foo buf append foo buf append foo buf append buf append foo buf append foo buf append foo buf append buf append assert equal string assertequalstring preview buf to string tostring test copy multiple nodes testcopymultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append foo buf append foo buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget ast node astnode placeholder rewrite create move target createmovetarget list rewrite listrewrite insert after insertafter placeholder rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert first insertfirst placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append foo buf append buf append foo buf append foo buf append foo buf append foo buf append buf append foo buf append buf append assert equal string assertequalstring preview buf to string tostring test multiple copies of same node and move testmultiplecopiesofsamenodeandmove exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements list if statement body ifstatementbody block if statement ifstatement get then statement getthenstatement statements ast node astnode node ast node astnode if statement body ifstatementbody ast node astnode placeholder rewrite create copy target createcopytarget node rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder ast node astnode placeholder rewrite create copy target createcopytarget node rewrite replace ast node astnode if statement body ifstatementbody placeholder ast node astnode placeholder rewrite create move target createmovetarget node rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert first insertfirst placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append comment buf append buf append comment buf append buf append buf append comment buf append buf append assert equal string assertequalstring preview buf to string tostring test move multiple nodes testmovemultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create move target createmovetarget rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append buf append buf append foo buf append comment buf append buf append assert equal string assertequalstring preview buf to string tostring test move multiple nodes testmovemultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create move target createmovetarget ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create move target createmovetarget rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert first insertfirst placeholder rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert last insertlast placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append foo buf append comment buf append buf append buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move multiple nodes testmovemultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements ast node astnode placeholder list rewrite listrewrite create move target createmovetarget ast node astnode placeholder list rewrite listrewrite create copy target createcopytarget rewrite replace if statement ifstatement placeholder rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property insert first insertfirst placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append foo buf append comment buf append foo buf append comment buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move multiple nodes testmovemultiplenodes exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements if statement ifstatement if statement ifstatement if statement ifstatement statements block then block thenblock block if statement ifstatement get then statement getthenstatement list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite then block thenblock block statements property list then statements thenstatements then block thenblock statements ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements list rewrite listrewrite create move target createmovetarget ast node astnode ast node astnode then statements thenstatements ast node astnode ast node astnode then statements thenstatements list rewrite listrewrite create move target createmovetarget assert false assertfalse illegal argument exception illegalargumentexception test replace move multiple testreplacemovemultiple exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append foo buf append comment buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements ast node astnode ast node astnode statements ast node astnode ast node astnode statements list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite method decl methoddecl get body getbody block statements property block new block newblock ast root astroot getast new block newblock ast node astnode placeholder list rewrite listrewrite create move target createmovetarget new block newblock new block newblock statements add placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append comment buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move for statement t o for block d testmoveforstatementtoforblockcd exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements for statement forstatement for statement forstatement for statement forstatement statements statement body for statement forstatement get body getbody ast node astnode placeholder rewrite create copy target createcopytarget body block new body newbody ast new block newblock new body newbody statements add placeholder rewrite replace body new body newbody string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test move for statement t o for block testmoveforstatementtoforblock exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue code errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo list statements method decl methoddecl get body getbody statements for statement forstatement for statement forstatement for statement forstatement statements statement body for statement forstatement get body getbody ast node astnode placeholder rewrite create move target createmovetarget body block new body newbody ast new block newblock new body newbody statements add placeholder rewrite replace body new body newbody string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append foo buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test nested copies testnestedcopies exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo object buf append string index of indexof buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast type declaration typedeclaration type decl typedecl find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration meth decl methdecl find method declaration findmethoddeclaration type decl typedecl foo variable declaration statement variabledeclarationstatement var stat varstat variable declaration statement variabledeclarationstatement meth decl methdecl get body getbody statements cast expression castexpression expression cast expression castexpression variable declaration fragment variabledeclarationfragment var stat varstat fragments get initializer getinitializer method invocation methodinvocation invocation method invocation methodinvocation expression get expression getexpression cast expression castexpression new cast newcast ast new cast expression newcastexpression new cast newcast set type settype type rewrite create copy target createcopytarget expression get type gettype new cast newcast set expression setexpression expression rewrite create copy target createcopytarget invocation get expression getexpression parenthesized expression parenthesizedexpression parents ast new parenthesized expression newparenthesizedexpression parents set expression setexpression new cast newcast ast node astnode node rewrite create copy target createcopytarget invocation rewrite replace expression node rewrite replace invocation get expression getexpression parents string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo object buf append string index of indexof buf append buf append string expected buf to string tostring assert equal string assertequalstring preview expected