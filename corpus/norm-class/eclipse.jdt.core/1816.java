copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors wharley bea initial api implementation ibm corporation ibm corporation java support het google bug method org eclipse jdt internal compiler apt model factory get primitive type getprimitivetype illegal argument exception illegalargumentexception org eclipse jdt internal compiler apt model java lang annotation annotation java lang reflect array java lang reflect proxy java util array list arraylist java util collections java util enum set enumset java util list java util javax lang model element annotation mirror annotationmirror javax lang model element element javax lang model element element kind elementkind javax lang model element modifier javax lang model element package element packageelement javax lang model element type parameter element typeparameterelement javax lang model type error type errortype javax lang model type no type notype javax lang model type null type nulltype javax lang model type type kind typekind javax lang model type type mirror typemirror org eclipse jdt core compiler char operation charoperation org eclipse jdt internal compiler apt dispatch base processing env impl baseprocessingenvimpl org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler lookup annotation binding annotationbinding org eclipse jdt internal compiler lookup array binding arraybinding org eclipse jdt internal compiler lookup base type binding basetypebinding org eclipse jdt internal compiler lookup binding org eclipse jdt internal compiler lookup element value pair elementvaluepair org eclipse jdt internal compiler lookup extra compiler modifiers extracompilermodifiers org eclipse jdt internal compiler lookup method binding methodbinding org eclipse jdt internal compiler lookup package binding packagebinding org eclipse jdt internal compiler lookup parameterized type binding parameterizedtypebinding org eclipse jdt internal compiler lookup reference binding referencebinding org eclipse jdt internal compiler lookup tag bits tagbits org eclipse jdt internal compiler lookup type binding typebinding org eclipse jdt internal compiler lookup type constants typeconstants org eclipse jdt internal compiler lookup type ids typeids org eclipse jdt internal compiler lookup type variable binding typevariablebinding org eclipse jdt internal compiler lookup variable binding variablebinding org eclipse jdt internal compiler lookup wildcard binding wildcardbinding creates javax lang model wrappers jdt internal compiler bindings factory auto boxing advantage caching dummy picked falls caching range dummy character dummy dummy dummy integer dummy integer dummy dummy base processing env impl baseprocessingenvimpl env list annotation mirror annotationmirror empty annotation mirrors collections empty list emptylist object constructed base processing env impl baseprocessingenvimpl factory base processing env impl baseprocessingenvimpl env env env convert array compiler annotation bindings list annotation mirror annotationmirror empty unmodifiable list list annotation mirror annotationmirror get annotation mirrors getannotationmirrors annotation binding annotationbinding annotations annotations annotations length collections empty list emptylist list annotation mirror annotationmirror list array list arraylist annotations length annotation binding annotationbinding annotation annotations annotation list add new annotation mirror newannotationmirror annotation collections unmodifiable list unmodifiablelist list suppress warnings suppresswarnings unchecked annotation get annotations by type getannotationsbytype annotation binding annotationbinding anno instances annoinstances annotation class annotationclass result get annotations getannotations anno instances annoinstances annotation class annotationclass result array new instance newinstance annotation class annotationclass result annotation get annotation getannotation annotation binding annotationbinding anno instances annoinstances annotation class annotationclass result get annotations getannotations anno instances annoinstances annotation class annotationclass result result new proxy instance newproxyinstance suppress warnings suppresswarnings unchecked annotation get annotations getannotations annotation binding annotationbinding anno instances annoinstances annotation class annotationclass just the first justthefirst anno instances annoinstances anno instances annoinstances length annotation class annotationclass string anno type name annotypename annotation class annotationclass get name getname anno type name annotypename list list array list arraylist anno instances annoinstances length annotation binding annotationbinding anno instance annoinstance anno instances annoinstances anno instance annoinstance annotation mirror impl annotationmirrorimpl anno mirror annomirror create annotation mirror createannotationmirror anno type name annotypename anno instance annoinstance anno mirror annomirror list add proxy new proxy instance newproxyinstance annotation class annotationclass get class loader getclassloader annotation class annotationclass anno mirror annomirror just the first justthefirst result array new instance newinstance annotation class annotationclass list size list size list to array toarray result annotation mirror impl annotationmirrorimpl create annotation mirror createannotationmirror string anno type name annotypename annotation binding annotationbinding anno instance annoinstance reference binding referencebinding binding anno instance annoinstance get annotation type getannotationtype binding binding is annotation type isannotationtype q name qname binding is member type ismembertype anno type name annotypename anno type name annotypename replace q name qname char operation charoperation concat with concatwith binding enclosing type enclosingtype compound name compoundname binding source name sourcename char operation charoperation replace q name qname q name qname char operation charoperation concat with concatwith binding compound name compoundname anno type name annotypename equals string q name qname annotation mirror impl annotationmirrorimpl env get factory getfactory new annotation mirror newannotationmirror anno instance annoinstance append modifier appendmodifier modifier result modifiers modifier constant modifierconstant modifier modifier modifiers modifier constant modifierconstant result add modifier decode modifiers decodemodifiers modifier result modifiers check bits checkbits check bits checkbits max check bits checkbits length max check bits checkbits class file constants classfileconstants acc public accpublic append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc protected accprotected append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc private accprivate append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc abstract accabstract append modifier appendmodifier result modifiers check bits checkbits modifier extra compiler modifiers extracompilermodifiers acc default method accdefaultmethod append modifier appendmodifier result modifiers check bits checkbits nls modifier value of valueof nls illegal argument exception illegalargumentexception iae class file constants classfileconstants acc static accstatic append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc final accfinal append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc synchronized accsynchronized append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc native accnative append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc strictfp accstrictfp append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc transient acctransient append modifier appendmodifier result modifiers check bits checkbits modifier class file constants classfileconstants acc volatile accvolatile append modifier appendmodifier result modifiers check bits checkbits modifier object get matching dummy value getmatchingdummyvalue expected type expectedtype expected type expectedtype is primitive isprimitive expected type expectedtype expected type expectedtype dummy expected type expectedtype dummy expected type expectedtype dummy expected type expectedtype dummy expected type expectedtype dummy integer expected type expectedtype dummy expected type expectedtype dummy expected type expectedtype happen work dummy integer type mirror typemirror get receiver type getreceivertype method binding methodbinding binding binding binding receiver env get factory getfactory new type mirror newtypemirror binding receiver binding declaring class declaringclass binding is static isstatic binding is constructor isconstructor binding declaring class declaringclass is member type ismembertype env get factory getfactory new type mirror newtypemirror binding declaring class declaringclass no type impl notypeimpl type modifier get modifiers getmodifiers modifiers element kind elementkind kind get modifiers getmodifiers modifiers kind convert jdt class file constants classfileconstants flags modifier enum modifier get modifiers getmodifiers modifiers element kind elementkind kind is from binary isfrombinary enum set enumset modifier result enum set enumset none of noneof modifier kind constructor method modifiers methods decode modifiers decodemodifiers result modifiers class file constants classfileconstants acc public accpublic class file constants classfileconstants acc protected accprotected class file constants classfileconstants acc private accprivate class file constants classfileconstants acc abstract accabstract class file constants classfileconstants acc static accstatic class file constants classfileconstants acc final accfinal class file constants classfileconstants acc synchronized accsynchronized class file constants classfileconstants acc native accnative class file constants classfileconstants acc strictfp accstrictfp extra compiler modifiers extracompilermodifiers acc default method accdefaultmethod field enum constant fields decode modifiers decodemodifiers result modifiers class file constants classfileconstants acc public accpublic class file constants classfileconstants acc protected accprotected class file constants classfileconstants acc private accprivate class file constants classfileconstants acc static accstatic class file constants classfileconstants acc final accfinal class file constants classfileconstants acc transient acctransient class file constants classfileconstants acc volatile accvolatile enum is from binary isfrombinary decode modifiers decodemodifiers result modifiers class file constants classfileconstants acc public accpublic class file constants classfileconstants acc protected accprotected class file constants classfileconstants acc final accfinal class file constants classfileconstants acc private accprivate class file constants classfileconstants acc abstract accabstract class file constants classfileconstants acc static accstatic class file constants classfileconstants acc strictfp accstrictfp enum source explicitly decode modifiers decodemodifiers result modifiers class file constants classfileconstants acc public accpublic class file constants classfileconstants acc protected accprotected class file constants classfileconstants acc final accfinal class file constants classfileconstants acc private accprivate class file constants classfileconstants acc static accstatic class file constants classfileconstants acc strictfp accstrictfp annotation type type decode modifiers decodemodifiers result modifiers class file constants classfileconstants acc public accpublic class file constants classfileconstants acc protected accprotected class file constants classfileconstants acc abstract accabstract class file constants classfileconstants acc final accfinal class file constants classfileconstants acc private accprivate class file constants classfileconstants acc static accstatic class file constants classfileconstants acc strictfp accstrictfp collections unmodifiable set unmodifiableset result annotation mirror annotationmirror new annotation mirror newannotationmirror annotation binding annotationbinding binding annotation mirror impl annotationmirrorimpl env binding create element kind binding unresolved element new element newelement binding binding element kind elementkind kind hint kindhint binding binding kind binding field binding local binding variable variable element impl variableelementimpl env variable binding variablebinding binding binding type binding type reference binding referencebinding reference binding referencebinding reference binding referencebinding binding reference binding referencebinding tag bits tagbits tag bits tagbits has missing type hasmissingtype error type element errortypeelement env reference binding referencebinding char operation charoperation equals reference binding referencebinding source name sourcename type constants typeconstants info package element impl packageelementimpl env reference binding referencebinding f package fpackage type element impl typeelementimpl env reference binding referencebinding kind hint kindhint binding method executable element impl executableelementimpl env method binding methodbinding binding binding raw type binding parameterized type type element impl typeelementimpl env parameterized type binding parameterizedtypebinding binding generic type generictype kind hint kindhint binding package element impl packageelementimpl env package binding packagebinding binding binding type parameter type parameter element impl typeparameterelementimpl env type variable binding typevariablebinding binding todo fill binding binding array type binding base type binding wildcard type binding intersection type nls unsupported operation exception unsupportedoperationexception nyi binding type binding kind element new element newelement binding binding new element newelement binding convenience method equivalent code package element packageelement factory new element newelement binding package element packageelement new package element newpackageelement package binding packagebinding binding package element impl packageelementimpl env binding null type nulltype get null type getnulltype no type impl notypeimpl type no type notype get no type getnotype type kind typekind kind kind no type impl notypeimpl type no type impl notypeimpl type no type impl notypeimpl type illegal argument exception illegalargumentexception type mirror object representing primitive type kind illegal argument exception illegalargumentexception primitive type kind typekind requested primitive type impl primitivetypeimpl get primitive type getprimitivetype type kind typekind kind kind primitive type impl primitivetypeimpl primitive type impl primitivetypeimpl primitive type impl primitivetypeimpl primitive type impl primitivetypeimpl primitive type impl primitivetypeimpl primitive type impl primitivetypeimpl primitive type impl primitivetypeimpl primitive type impl primitivetypeimpl illegal argument exception illegalargumentexception primitive type impl primitivetypeimpl get primitive type getprimitivetype base type binding basetypebinding binding annotation binding annotationbinding annotations binding get type annotations gettypeannotations annotations annotations length get primitive type getprimitivetype primitive type impl primitivetypeimpl get kind getkind binding primitive type impl primitivetypeimpl env binding binding uncertain type create sort type mirror typemirror type mirror typemirror new type mirror newtypemirror binding binding binding kind binding field binding local binding variable variables type variable new type mirror newtypemirror variable binding variablebinding binding type binding get no type getnotype type kind typekind binding nls unsupported operation exception unsupportedoperationexception nyi type binding kind binding method executable type impl executabletypeimpl env method binding methodbinding binding binding type binding raw type binding type binding parameterized type reference binding referencebinding reference binding referencebinding reference binding referencebinding binding reference binding referencebinding tag bits tagbits tag bits tagbits has missing type hasmissingtype get error type geterrortype reference binding referencebinding declared type impl declaredtypeimpl env reference binding referencebinding binding binding array type array type impl arraytypeimpl env array binding arraybinding binding binding base type base type binding basetypebinding btb base type binding basetypebinding binding btb type ids typeids get no type getnotype type kind typekind type ids typeids get null type getnulltype get primitive type getprimitivetype btb binding wildcard type todo compatible should n shouldn int ersection intersection type binding intersection type wildcard type impl wildcardtypeimpl env wildcard binding wildcardbinding binding binding type parameter type variable impl typevariableimpl env type variable binding typevariablebinding binding param declaring element declaringelement method parameterized parameter type parameter element typeparameterelement new type parameter element newtypeparameterelement type variable binding typevariablebinding variable element declaring element declaringelement type parameter element impl typeparameterelementimpl env variable declaring element declaringelement error type errortype get error type geterrortype reference binding referencebinding binding error type impl errortypeimpl env binding method derived code org eclipse jdt apt core method designed invoked invocation handler requires annotation value annotationvalue annotation mirror annotationmirror member values values annotation member path common primitive type conversion place type conversions resp ect respect type widening narrowing rules jls question remains type type conversion fails code avoid ref lect exception avoidreflectexception code code code code code expected type code code numeric numeric primitive types code code unchanged invocation handler returned link java lang reflect invocation handler invocationhandler invoke converted expected type link java lang reflect proxy expected type agree class cast exception classcastexception thrown null pointer exception nullpointerexception result expected type primitive type behavior annotation processors lot pain decision unchecked exception class cast exception classcastexception null pointer exception nullpointerexception thrown dummy original chosen dummy values code code expected type code code numeric numeric primitive types code code behavior triggered setting code avoid ref lect exception avoidreflectexception code code code note behavior dev iates deviates doc umented documented link java lang reflect invocation handler invocationhandler invoke dev iates deviates sun implementation param current annotation instance param expected type expectedtype expected type object perform necessary primitive type conversion performnecessaryprimitivetypeconversion expected type expectedtype object avoid ref lect exception avoidreflectexception nls expected type expectedtype is primitive isprimitive expected type expectedtype primitive type expected type expectedtype get name getname avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype apply widening conversion based jls string type name typename expected type expectedtype get name getname expected type char expectedtypechar type name typename char at charat name len namelen type name typename length narrowing byte value bytevalue expected type char expectedtypechar name len namelen exact match avoid ref lect exception avoidreflectexception narrowing character value of valueof narrowing widening widening widening integer value of valueof widening widening value of valueof widening widening value of valueof widening nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar narrowing short value shortvalue expected type char expectedtypechar name len namelen narrowing value of valueof narrowing completely wrong avoid ref lect exception avoidreflectexception narrowing character value of valueof narrowing widening widening widening integer value of valueof widening widening value of valueof widening exact match nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar narrowing character character char value charvalue expected type char expectedtypechar name len namelen narrowing value of valueof narrowing completely wrong avoid ref lect exception avoidreflectexception exact match widening widening widening integer value of valueof widening widening value of valueof widening narrowing value of valueof narrowing nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar narrowing integer integer int value intvalue expected type char expectedtypechar name len namelen narrowing value of valueof narrowing completely wrong avoid ref lect exception avoidreflectexception narrowing character value of valueof narrowing widening widening exact match widening value of valueof widening narrowing value of valueof narrowing nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar widening long value longvalue expected type char expectedtypechar completely wrong avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype widening widening exact match nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar widening float value floatvalue expected type char expectedtypechar completely wrong avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype widening exact match nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar expected type char expectedtypechar exact match completely wrong avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype length expected type char expectedtypechar name len namelen completely wrong avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype convert avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype element array dummy type param array param param expected leaf type expectedleaftype set array matching dummy value setarraymatchingdummyvalue object array expected leaf type expectedleaftype equals expected leaf type expectedleaftype array set boolean setboolean array equals expected leaf type expectedleaftype array set byte setbyte array dummy equals expected leaf type expectedleaftype array set char setchar array dummy equals expected leaf type expectedleaftype array set double setdouble array dummy equals expected leaf type expectedleaftype array set float setfloat array dummy equals expected leaf type expectedleaftype array set int setint array dummy integer equals expected leaf type expectedleaftype array set long setlong array dummy equals expected leaf type expectedleaftype array set short setshort array dummy array array wrap repeating annotations container array bindings incoming array modified array entries annotation binding annotationbinding get packed annotation bindings getpackedannotationbindings annotation binding annotationbinding annotations length annotations annotations length length annotations replicate rep ackaging repackaging annotation binding annotationbinding repackaged bindings repackagedbindings annotations length annotation binding annotationbinding annotation repackaged bindings repackagedbindings annotation reference binding referencebinding annotation type annotationtype annotation get annotation type getannotationtype annotation type annotationtype is repeatable annotation type isrepeatableannotationtype reference binding referencebinding container type containertype annotation type annotationtype container annotation type containerannotationtype container type containertype fubar method binding methodbinding values container type containertype get methods getmethods type constants typeconstants values values length fubar method binding methodbinding values return type returntype return type returntype dimensions type binding typebinding not equals notequals return type returntype leaf component type leafcomponenttype annotation type annotationtype fubar kosher repeatable annotation kosher type rep eats repeats list annotation binding annotationbinding containees length annotation binding annotationbinding other annotation otherannotation repackaged bindings repackagedbindings other annotation otherannotation identity comparison other annotation otherannotation get annotation type getannotationtype annotation type annotationtype repackaged bindings repackagedbindings annotations system arraycopy repackaged bindings repackagedbindings repackaged bindings repackagedbindings annotation binding annotationbinding length length packed repackaged bindings repackagedbindings containees containees array list arraylist containees add annotation containees add other annotation otherannotation containees element value pair elementvaluepair element value pairs elementvaluepairs element value pair elementvaluepair element value pair elementvaluepair type constants typeconstants containees to array toarray repackaged bindings repackagedbindings annotation binding annotationbinding container type containertype element value pairs elementvaluepairs final t ally finaltally length repackaged bindings repackagedbindings final t ally finaltally repackaged bindings repackagedbindings annotations final t ally finaltally length annotations annotations annotation binding annotationbinding final t ally finaltally length repackaged bindings repackagedbindings annotations repackaged bindings repackagedbindings annotations unwrap container annotations repeated annotations array bindings includes container containees annotation binding annotationbinding get unpacked annotation bindings getunpackedannotationbindings annotation binding annotationbinding annotations length annotations annotations length length annotations list annotation binding annotationbinding unpacked annotations unpackedannotations array list arraylist length annotation binding annotationbinding annotation annotations annotation unpacked annotations unpackedannotations add annotation reference binding referencebinding annotation type annotationtype annotation get annotation type getannotationtype method binding methodbinding values annotation type annotationtype get methods getmethods type constants typeconstants values values length method binding methodbinding values return type returntype dimensions type binding typebinding containee type containeetype return type returntype leaf component type leafcomponenttype containee type containeetype containee type containeetype is annotation type isannotationtype containee type containeetype is repeatable annotation type isrepeatableannotationtype identity comparison containee type containeetype container annotation type containerannotationtype annotation type annotationtype kosher container unwrap contained annotations element value pair elementvaluepair element value pairs elementvaluepairs annotation get element value pairs getelementvaluepairs element value pair elementvaluepair element value pair elementvaluepair element value pairs elementvaluepairs char operation charoperation equals element value pair elementvaluepair get name getname type constants typeconstants object containees object element value pair elementvaluepair get value getvalue object object containees unpacked annotations unpackedannotations add annotation binding annotationbinding object annotation binding annotationbinding unpacked annotations unpackedannotations to array toarray annotation binding annotationbinding unpacked annotations unpackedannotations size