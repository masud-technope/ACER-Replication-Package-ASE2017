copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests eval target java lang reflect java java util code snippet runner loads code snippet classes global variable classes code snippet classes started runner conn ects connects tcp port number regular classpath directory writes definitions ide directory bootclasspath directory starts java system loader bootstrap loader java load regular classpath directory code snippet loader load classes ide note code snippet loader limitation code snippet code snippet access classes members classes runtime code snippet runtime access load ers loaders code snippet defined java bootstrap loader load suppress warnings suppresswarnings unchecked rawtypes code snippet runner codesnippetrunner code snippet runner codesnippetrunner the runner therunner string code snippet org eclipse jdt internal eval target code snippet codesnippet string method string result type method get result type getresulttype string result method get result value getresultvalue ide interface ideinterface ide string class path directory classpathdirectory string bootclass path directory bootclasspathdirectory code snippet class loader codesnippetclassloader loader code snippet class codesnippetclass creates code snippet runner code snippet runner codesnippetrunner port number portnumber string class path directory classpathdirectory string bootclass path directory bootclasspathdirectory ide ide interface ideinterface port number portnumber class path directory classpathdirectory class path directory classpathdirectory class path directory classpathdirectory bootclass path directory bootclasspathdirectory bootclass path directory bootclasspathdirectory bootclass path directory bootclasspathdirectory loader code snippet class loader codesnippetclassloader returns slash separated definition string class name classname class definition classdefinition code copied org eclipse jdt internal compiler cfmt highly dependent file format read offset readoffset constant pool count constantpoolcount class definition classdefinition constant pool offsets constantpooloffsets constant pool count constantpoolcount constant pool count constantpoolcount tag read offset readoffset class definition classdefinition tag utf tag constant pool offsets constantpooloffsets read offset readoffset read offset readoffset read offset readoffset class definition classdefinition constant utf constantutf fixed size fixedsize read offset readoffset integer tag integertag constant pool offsets constantpooloffsets read offset readoffset constant integer constantinteger fixed size fixedsize read offset readoffset float tag floattag constant pool offsets constantpooloffsets read offset readoffset constant float constantfloat fixed size fixedsize read offset readoffset long tag longtag constant pool offsets constantpooloffsets read offset readoffset constant long constantlong fixed size fixedsize read offset readoffset double tag doubletag constant pool offsets constantpooloffsets read offset readoffset constant double constantdouble fixed size fixedsize read offset readoffset class tag classtag constant pool offsets constantpooloffsets read offset readoffset constant class constantclass fixed size fixedsize read offset readoffset string tag stringtag constant pool offsets constantpooloffsets read offset readoffset constant string constantstring fixed size fixedsize read offset readoffset field ref tag fieldreftag constant pool offsets constantpooloffsets read offset readoffset constant field ref constantfieldref fixed size fixedsize read offset readoffset method ref tag methodreftag constant pool offsets constantpooloffsets read offset readoffset constant method ref constantmethodref fixed size fixedsize read offset readoffset interface method ref tag interfacemethodreftag constant pool offsets constantpooloffsets read offset readoffset constant interface method ref constantinterfacemethodref fixed size fixedsize read offset readoffset name and type tag nameandtypetag constant pool offsets constantpooloffsets read offset readoffset constant name and type constantnameandtype fixed size fixedsize read offset readoffset skip access flags read offset readoffset read class name classname exception handlers bad format constant pool index constantpoolindex read offset readoffset class definition classdefinition utf offset constant pool offsets constantpooloffsets constant pool offsets constantpooloffsets constant pool index constantpoolindex class definition classdefinition class name classname utf utf offset utf offset class definition classdefinition class definition classdefinition string class name classname array index out of bounds exception arrayindexoutofboundsexception print stack trace printstacktrace creates instance assumed subclass code snippet codesnippet object create code snippet createcodesnippet snippet class snippetclass object object object snippet class snippetclass new instance newinstance instantiation exception instantiationexception print stack trace printstacktrace ide send result sendresult illegal access exception illegalaccessexception print stack trace printstacktrace ide send result sendresult object code snippet runner running is running isrunning ide is connected isconnected starts code snippet runner codesnippetrunner serve code snippets ide waits connection evaluation port number usage java org eclipse jdt tests eval target code snippet runner codesnippetrunner eval port evalport port number portnumber options main class name mainclassname arguments options include cscp code snippet classpath codesnippetclasspath classpath directory code snippet classes defined java csbp code snippet boot classpath codesnippetbootclasspath bootclasspath directory code snippet classes defined java main class name mainclassname arguments optional server start shut server start main server exit main finished running main string args length args length length args to lower case tolowercase equals eval port evalport print usage printusage eval port evalport integer parse int parseint args string class path classpath string boot path bootpath main class mainclass length string arg args arg starts with startswith arg to lower case tolowercase equals cscp length class path classpath args print usage printusage arg to lower case tolowercase equals csbp length boot path bootpath args print usage printusage main class mainclass the runner therunner code snippet runner codesnippetrunner eval port evalport class path classpath boot path bootpath main class mainclass the runner therunner start thread server thread the runner therunner start server set daemon setdaemon server start main args length mainargslength length main class mainclass string main args mainargs string main args length mainargslength system arraycopy args main class mainclass main args mainargs main args length mainargslength clazz for name forname args main class mainclass method main method mainmethod clazz get method getmethod main string main method mainmethod invoke object main args mainargs class not found exception classnotfoundexception print stack trace printstacktrace no such method exception nosuchmethodexception print stack trace printstacktrace illegal access exception illegalaccessexception print stack trace printstacktrace invocation target exception invocationtargetexception print stack trace printstacktrace print usage printusage system println usage java org eclipse jdt tests eval target code snippet runner codesnippetrunner eval port evalport port number portnumber options main class name mainclassname arguments system println options include system println cscp code snippet classpath codesnippetclasspath classpath directory code snippet classes system println defined java system println csbp code snippet boot classpath codesnippetbootclasspath bootclasspath directory code snippet classes system println defined java loads definitions definitions loaded code snippet runner codesnippetrunner constructor definitions code snippet classes global variable classes code snippet classes assumed direct indirect subclasses code snippet codesnippet implement method inst anciated instanciated global variable classes assumed direct subclasses code snippet codesnippet fields assumed field ide process classes processclasses must run mustrun class definitions classdefinitions store definitions code snippet loader disk string new classes newclasses string class definitions classdefinitions length class definitions classdefinitions length class definition classdefinition class definitions classdefinitions string class file name classfilename class name classname class definition classdefinition string class name classname class file name classfilename replace loader loader store class definition storeclassdefinition class name classname class definition classdefinition write class on disk writeclassondisk class file name classfilename class definition classdefinition new classes newclasses class name classname load classes collect code snippet classes vector code snippet classes codesnippetclasses vector new classes newclasses length string class name classname new classes newclasses clazz loader clazz loader load if needed loadifneeded class name classname clazz system err println find definition class name classname system loader clazz for name forname class name classname class not found exception classnotfoundexception print stack trace printstacktrace ide send result sendresult superclass clazz get superclass getsuperclass method methods clazz get declared methods getdeclaredmethods code snippet class codesnippetclass superclass equals object clazz get name getname equals code snippet code snippet codesnippet deployed code snippet class codesnippetclass clazz system println expecting code snippet codesnippet deployed superclass equals code snippet class codesnippetclass code snippet global variable methods length methods get name getname equals method code snippet classes codesnippetclasses add element addelement clazz evaluate global variables send result field fields clazz get declared fields getdeclaredfields fields length field field fields modifier is public ispublic field get modifiers getmodifiers ide send result sendresult field get type gettype field illegal access exception illegalaccessexception print stack trace printstacktrace ide send result sendresult code snippet class codesnippetclass equals superclass get superclass getsuperclass methods length methods get name getname equals code snippet global variable superclass code snippet classes codesnippetclasses add element addelement clazz code snippet classes code snippet classes codesnippetclasses size must run mustrun enumeration code snippet classes codesnippetclasses elements has more elements hasmoreelements object code snippet codesnippet create code snippet createcodesnippet next element nextelement code snippet codesnippet run code snippet runcodesnippet code snippet codesnippet runs code snippet thread send result ide run code snippet runcodesnippet object snippet thread thread thread method run method runmethod code snippet runner codesnippetrunner code snippet class codesnippetclass get method getmethod method run method runmethod invoke snippet object method get result type method getresulttypemethod code snippet runner codesnippetrunner code snippet class codesnippetclass get method getmethod result type method result type resulttype get result type method getresulttypemethod invoke snippet object method get result value method getresultvaluemethod code snippet runner codesnippetrunner code snippet class codesnippetclass get method getmethod result method object result value resultvalue get result value method getresultvaluemethod invoke snippet object code snippet runner codesnippetrunner ide send result sendresult result type resulttype result value resultvalue no such method exception nosuchmethodexception print stack trace printstacktrace illegal access exception illegalaccessexception print stack trace printstacktrace illegal argument exception illegalargumentexception system println code snippet class codesnippetclass code snippet runner codesnippetrunner code snippet class codesnippetclass get name getname system println snippet snippet get class getclass get name getname superclass snippet get class getclass get superclass getsuperclass system println snippet superclass superclass superclass get name getname print stack trace printstacktrace invocation target exception invocationtargetexception get target exception gettargetexception print stack trace printstacktrace thread set daemon setdaemon thread start starts code snippet runner thread start thread thread thread code snippet runner code snippet runner codesnippetrunner ide connect io exception ioexception print stack trace printstacktrace code snippet runner codesnippetrunner ide is connected isconnected process classes processclasses code snippet runner codesnippetrunner ide get run flag getrunflag code snippet runner codesnippetrunner ide get next classes getnextclasses error code snippet runner codesnippetrunner ide send result sendresult print stack trace printstacktrace runtime exception runtimeexception code snippet runner codesnippetrunner ide send result sendresult print stack trace printstacktrace thread start s to ps stops code snippet runner ide disconnect position bytes bytes position xff position bytes bytes position xff bytes position xff utf read offset readoffset bytes available bytesavailable bytes length bytes available bytesavailable output buf outputbuf bytes available bytesavailable output pos outputpos length bytes read offset readoffset xff length bytes read offset readoffset xff length bytes read offset readoffset xff length output buf outputbuf output pos outputpos output pos outputpos bytes available bytesavailable system arraycopy output buf outputbuf output buf outputbuf output pos outputpos output pos outputpos output buf outputbuf writes definition disk slash separated fully qualified write class on disk writeclassondisk string class name classname class definition classdefinition string file name filename class name classname replace file separator char separatorchar file class file classfile file bootclass path directory bootclasspathdirectory class name classname starts with startswith java class name classname replace equals code snippet bootclass path directory bootclasspathdirectory class path directory classpathdirectory file name filename file parent file class file classfile get parent getparent parent mkdirs parent exists io exception ioexception create directory parent get path getpath file output stream fileoutputstream file output stream fileoutputstream class file classfile write class definition classdefinition close io exception ioexception print stack trace printstacktrace