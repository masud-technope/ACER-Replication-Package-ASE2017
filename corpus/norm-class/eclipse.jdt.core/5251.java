copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contributions bug warning unboxing single name reference singlenamereference npe bug warning missing resources bug enum warn missing bug unreasonable warning enum based statements bug compiler compiler misidentifies variable org eclipse jdt internal compiler ast java util arrays org eclipse jdt internal compiler ast visitor astvisitor org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler codegen branch label branchlabel org eclipse jdt internal compiler codegen case label caselabel org eclipse jdt internal compiler codegen code stream codestream org eclipse jdt internal compiler codegen opcodes org eclipse jdt internal compiler flow flow context flowcontext org eclipse jdt internal compiler flow flow info flowinfo org eclipse jdt internal compiler flow switch flow context switchflowcontext org eclipse jdt internal compiler impl compiler options compileroptions org eclipse jdt internal compiler impl constant org eclipse jdt internal compiler lookup block scope blockscope org eclipse jdt internal compiler lookup field binding fieldbinding org eclipse jdt internal compiler lookup local variable binding localvariablebinding org eclipse jdt internal compiler lookup reference binding referencebinding org eclipse jdt internal compiler lookup source type binding sourcetypebinding org eclipse jdt internal compiler lookup synthetic method binding syntheticmethodbinding org eclipse jdt internal compiler lookup type binding typebinding org eclipse jdt internal compiler lookup type ids typeids org eclipse jdt internal compiler problem problem severities problemseverities suppress warnings suppresswarnings rawtypes switch statement switchstatement statement expression expression statement statements block scope blockscope scope explicit declarations explicitdeclarations branch label branchlabel break label breaklabel case statement casestatement cases case statement casestatement default case defaultcase block start blockstart case count casecount constants string string constants stringconstants fall through fallthrough fallthrough escaping strings nls secret string variable name secretstringvariablename switch dispatch string switchdispatchstring to char array tochararray enums types synthetic method binding syntheticmethodbinding synthetic local variables table attributes pre switch init state index preswitchinitstateindex merged init state index mergedinitstateindex case statement casestatement duplicate case statements duplicatecasestatements duplicate case statements counter duplicatecasestatementscounter local variable binding localvariablebinding dispatch string copy dispatchstringcopy flow info flowinfo analyse code analysecode block scope blockscope current scope currentscope flow context flowcontext flow context flowcontext flow info flowinfo flow info flowinfo flow info flowinfo expression analyse code analysecode current scope currentscope flow context flowcontext flow info flowinfo expression implicit conversion implicitconversion type ids typeids unboxing expression resolved type resolvedtype expression resolved type resolvedtype java lang string javalangstring expression resolved type resolvedtype is enum isenum expression checknpe current scope currentscope flow context flowcontext flow info flowinfo switch flow context switchflowcontext switch context switchcontext switch flow context switchflowcontext flow context flowcontext break label breaklabel branch label branchlabel analyse block spec ially specially statements bind entry point flow info flowinfo case inits caseinits flow info flowinfo dead statements pre switch init state index preswitchinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates flow info flowinfo case index caseindex statements initial comp laint level initialcomplaintlevel flow info flowinfo reach mode reachmode flow info flowinfo unreachable statement complained fake reachable statement complained complaint level complaintlevel initial comp laint level initialcomplaintlevel fall through state fallthroughstate max statements length max statement statement statements statement case index caseindex case count casecount statement cases case index caseindex record entering block scope enclosing case enclosingcase cases case index caseindex case index caseindex fall through state fallthroughstate fallthrough fall comment statement bits ast node astnode documented fallthrough documentedfallthrough scope problem reporter problemreporter possible fall through case possiblefallthroughcase scope enclosing case enclosingcase case inits caseinits case inits caseinits merged with mergedwith flow info flowinfo unconditional inits unconditionalinits reset complaint complaint level complaintlevel reset complaint initial comp laint level initialcomplaintlevel fall through state fallthroughstate statement statement default case defaultcase record entering block scope enclosing case enclosingcase default case defaultcase fall through state fallthroughstate fallthrough statement bits ast node astnode documented fallthrough documentedfallthrough scope problem reporter problemreporter possible fall through case possiblefallthroughcase scope enclosing case enclosingcase case inits caseinits case inits caseinits merged with mergedwith flow info flowinfo unconditional inits unconditionalinits reset complaint complaint level complaintlevel reset complaint initial comp laint level initialcomplaintlevel fall through state fallthroughstate reset needed fall through state fallthroughstate fallthrough complaint level complaintlevel statement complain if unreachable complainifunreachable case inits caseinits scope complaint level complaintlevel statement complained unreachable case inits caseinits statement analyse code analysecode scope switch context switchcontext case inits caseinits case inits caseinits flow info flowinfo dead fall through state fallthroughstate escaping switch context switchcontext expire null checked field info expirenullcheckedfieldinfo type binding typebinding resolved type binding resolvedtypebinding expression resolved type resolvedtype resolved type binding resolvedtypebinding is enum isenum source type binding sourcetypebinding source type binding sourcetypebinding current scope currentscope class scope classscope reference context referencecontext binding synthetic source type binding sourcetypebinding add synthetic method for switch enum addsyntheticmethodforswitchenum resolved type binding resolvedtypebinding record jump block default case defaultcase retain potential initial izations initializations flow info flowinfo add potential initializations from addpotentialinitializationsfrom case inits caseinits merged with mergedwith switch context switchcontext inits on break initsonbreak merged init state index mergedinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates flow info flowinfo flow info flowinfo merge branches inits flow info flowinfo merged info mergedinfo case inits caseinits merged with mergedwith switch context switchcontext inits on break initsonbreak merged init state index mergedinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates merged info mergedinfo merged info mergedinfo longer block scope scope enclosing case enclosingcase string code generation assumes hash code hashcode specification java lang string api stable http download oracle java se javase docs api java lang string html param current scope currentscope org eclipse jdt internal compiler lookup block scope blockscope param code stream codestream org eclipse jdt internal compiler codegen code stream codestream generate code for string switch generatecodeforstringswitch block scope blockscope current scope currentscope code stream codestream code stream codestream bits is reachable isreachable code stream codestream position string switch case stringswitchcase comparable hash code hashcode string string branch label branchlabel label string switch case stringswitchcase hash code hashcode string string branch label branchlabel label hash code hashcode hash code hashcode string string label label compare to compareto object string switch case stringswitchcase string switch case stringswitchcase hash code hashcode hash code hashcode hash code hashcode hash code hashcode string to string tostring string switch case stringswitchcase hash code hashcode string nls nls nls has cases hascases case count casecount shrink multiple strings hash code string switch case stringswitchcase string cases stringcases string switch case stringswitchcase case count casecount branch label branchlabel source case labels sourcecaselabels branch label branchlabel case count casecount case label caselabel hash code case labels hashcodecaselabels case label caselabel case count casecount hash code hashcode values constants case count casecount max case count casecount max branch label label cases target label targetlabel source case labels sourcecaselabels branch label branchlabel code stream codestream source case labels sourcecaselabels tag bits tagbits branch label branchlabel string cases stringcases string switch case stringswitchcase string constants stringconstants hash code hashcode string constants stringconstants source case labels sourcecaselabels hash code case labels hashcodecaselabels case label caselabel code stream codestream hash code case labels hashcodecaselabels tag bits tagbits branch label branchlabel arrays sort string cases stringcases uniq hash count uniqhashcount last hash code lasthashcode length case count casecount length hash code hashcode string cases stringcases hash code hashcode hash code hashcode last hash code lasthashcode last hash code lasthashcode constants uniq hash count uniqhashcount hash code hashcode multiple has hed hashed uniq hash count uniqhashcount case count casecount system arraycopy constants constants uniq hash count uniqhashcount uniq hash count uniqhashcount system arraycopy hash code case labels hashcodecaselabels hash code case labels hashcodecaselabels case label caselabel uniq hash count uniqhashcount uniq hash count uniqhashcount hash code sorted sorted indexes sortedindexes uniq hash count uniqhashcount uniq hash count uniqhashcount sorted indexes sortedindexes case label caselabel default case label defaultcaselabel case label caselabel code stream codestream default case label defaultcaselabel tag bits tagbits branch label branchlabel prepare labels constants break label breaklabel initialize code stream codestream branch label branchlabel default branch label defaultbranchlabel branch label branchlabel code stream codestream has cases hascases default branch label defaultbranchlabel tag bits tagbits branch label branchlabel default case defaultcase default case defaultcase target label targetlabel default branch label defaultbranchlabel generate expression expression generate code generatecode current scope currentscope code stream codestream leaves string operand stack code stream codestream store dispatch string copy dispatchstringcopy code stream codestream add variable addvariable dispatch string copy dispatchstringcopy code stream codestream invoke string hash code invokestringhashcode has cases hascases code stream codestream lookup switch lookupswitch default case label defaultcaselabel constants sorted indexes sortedindexes hash code case labels hashcodecaselabels max case count casecount max hash code hashcode string cases stringcases hash code hashcode hash code hashcode last hash code lasthashcode last hash code lasthashcode hash code hashcode code stream codestream default branch label defaultbranchlabel hash code case labels hashcodecaselabels place code stream codestream load dispatch string copy dispatchstringcopy code stream codestream ldc string cases stringcases string code stream codestream invoke string equals invokestringequals code stream codestream ifne string cases stringcases label code stream codestream default branch label defaultbranchlabel code stream codestream pop generate block statements case index caseindex statements max cases maxcases statements length max cases maxcases statement statement statements statements case index caseindex case count casecount statement cases case index caseindex record entering block scope enclosing case enclosingcase cases case index caseindex pre switch init state index preswitchinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope pre switch init state index preswitchinitstateindex case index caseindex statements statement default case defaultcase branch label generate code generatecode default case label defaultcaselabel place record entering block scope enclosing case enclosingcase default case defaultcase pre switch init state index preswitchinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope pre switch init state index preswitchinitstateindex statement generate code generatecode scope code stream codestream loose local variable initial izations initializations local variable attributes merged init state index mergedinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope merged init state index mergedinitstateindex code stream codestream add definitely assigned variables adddefinitelyassignedvariables current scope currentscope merged init state index mergedinitstateindex code stream codestream remove variable removevariable dispatch string copy dispatchstringcopy scope current scope currentscope code stream codestream exit user scope exituserscope scope place trailing labels break label breaklabel place default case defaultcase force number entry position statement code stream codestream record positions from recordpositionsfrom code stream codestream position source end sourceend default case label defaultcaselabel place default branch label defaultbranchlabel place code stream codestream record positions from recordpositionsfrom source start sourcestart longer block scope scope enclosing case enclosingcase code generation param current scope currentscope org eclipse jdt internal compiler lookup block scope blockscope param code stream codestream org eclipse jdt internal compiler codegen code stream codestream generate code generatecode block scope blockscope current scope currentscope code stream codestream code stream codestream expression resolved type resolvedtype type ids typeids java lang string javalangstring generate code for string switch generatecodeforstringswitch current scope currentscope code stream codestream bits is reachable isreachable code stream codestream position prepare labels constants break label breaklabel initialize code stream codestream case label caselabel case labels caselabels case label caselabel case count casecount max case count casecount max cases target label targetlabel case labels caselabels case label caselabel code stream codestream case labels caselabels tag bits tagbits branch label branchlabel case label caselabel default label defaultlabel case label caselabel code stream codestream has cases hascases case count casecount has cases hascases default label defaultlabel tag bits tagbits branch label branchlabel default case defaultcase default case defaultcase target label targetlabel default label defaultlabel type binding typebinding resolved type resolvedtype expression resolved type resolvedtype value required valuerequired resolved type resolvedtype is enum isenum translation table code stream codestream invoke opcodes opc invokestatic synthetic declaring class declaringclass expression generate code generatecode current scope currentscope code stream codestream enum constant ordinal code stream codestream invoke enum ordinal invokeenumordinal resolved type resolvedtype constant pool name constantpoolname code stream codestream iaload has cases hascases rid generated ordinal code stream codestream pop value required valuerequired expression constant constant notaconstant has cases hascases generate expression expression generate code generatecode current scope currentscope code stream codestream value required valuerequired generate table lookup byte code bytecode has cases hascases sorted indexes sortedindexes case count casecount sort generate code table switch tableswitch lookup switch lookupswitch case count casecount sorted indexes sortedindexes local keys copy localkeyscopy system arraycopy constants local keys copy localkeyscopy case count casecount case count casecount code stream codestream sort local keys copy localkeyscopy case count casecount sorted indexes sortedindexes max local keys copy localkeyscopy case count casecount min local keys copy localkeyscopy case count casecount max min http dev eclipse org bugs bug cgi max fff current scope currentscope compiler options compileroptions compliance level compliancelevel class file constants classfileconstants jdk code stream codestream lookup switch lookupswitch default label defaultlabel constants sorted indexes sortedindexes case labels caselabels code stream codestream table switch tableswitch default label defaultlabel min max constants sorted indexes sortedindexes case labels caselabels code stream codestream lookup switch lookupswitch default label defaultlabel constants sorted indexes sortedindexes case labels caselabels code stream codestream record positions from recordpositionsfrom code stream codestream position expression source end sourceend value required valuerequired code stream codestream pop generate block statements case index caseindex statements max cases maxcases statements length max cases maxcases statement statement statements statements case index caseindex case count casecount statement cases case index caseindex record entering block scope enclosing case enclosingcase cases case index caseindex pre switch init state index preswitchinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope pre switch init state index preswitchinitstateindex case index caseindex statements statement default case defaultcase record entering block scope enclosing case enclosingcase default case defaultcase pre switch init state index preswitchinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope pre switch init state index preswitchinitstateindex statement generate code generatecode scope code stream codestream loose local variable initial izations initializations local variable attributes merged init state index mergedinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope merged init state index mergedinitstateindex code stream codestream add definitely assigned variables adddefinitelyassignedvariables current scope currentscope merged init state index mergedinitstateindex scope current scope currentscope code stream codestream exit user scope exituserscope scope place trailing labels break label breaklabel place default case defaultcase force number entry position statement code stream codestream record positions from recordpositionsfrom code stream codestream position source end sourceend default label defaultlabel place code stream codestream record positions from recordpositionsfrom source start sourcestart longer block scope scope enclosing case enclosingcase string buffer stringbuffer print statement printstatement indent string buffer stringbuffer output nls print indent printindent indent output append nls expression print expression printexpression output append statements statements length output append statements case statement casestatement statements print statement printstatement indent output statements print statement printstatement indent output nls output append print indent printindent indent output append resolve block scope blockscope upper scope upperscope is enum switch isenumswitch is string switch isstringswitch type binding typebinding expression type expressiontype expression resolve type resolvetype upper scope upperscope compiler options compileroptions compiler options compileroptions upper scope upperscope compiler options compileroptions expression type expressiontype expression compute conversion computeconversion upper scope upperscope expression type expressiontype expression type expressiontype check type checktype expression type expressiontype is valid binding isvalidbinding fault tolerance ignore type mismatch constants here on hereon expression type expressiontype check type checktype expression type expressiontype is base type isbasetype expression is constant value of type assignable to type isconstantvalueoftypeassignabletotype expression type expressiontype type binding typebinding check type checktype expression type expressiontype is compatible with iscompatiblewith type binding typebinding check type checktype expression type expressiontype is enum isenum is enum switch isenumswitch compiler options compileroptions compliance level compliancelevel class file constants classfileconstants jdk https bugs eclipse org bugs bug cgi upper scope upperscope problem reporter problemreporter incorrect switch type incorrectswitchtype expression expression type expressiontype check type checktype upper scope upperscope is boxing compatible with isboxingcompatiblewith expression type expressiontype type binding typebinding expression compute conversion computeconversion upper scope upperscope type binding typebinding expression type expressiontype check type checktype compiler options compileroptions compliance level compliancelevel class file constants classfileconstants jdk expression type expressiontype type ids typeids java lang string javalangstring is string switch isstringswitch check type checktype upper scope upperscope problem reporter problemreporter incorrect switch type incorrectswitchtype expression expression type expressiontype fault tolerance ignore type mismatch constants here on hereon expression type expressiontype is string switch isstringswitch secret variable created iter ating iterating statements create locals prevent over lapping overlapping locals https bugs eclipse org bugs bug cgi dispatch string copy dispatchstringcopy local variable binding localvariablebinding secret string variable name secretstringvariablename upper scope upperscope get java lang string getjavalangstring class file constants classfileconstants acc default accdefault upper scope upperscope add local variable addlocalvariable dispatch string copy dispatchstringcopy dispatch string copy dispatchstringcopy set constant setconstant constant notaconstant dispatch string copy dispatchstringcopy use flag useflag local variable binding localvariablebinding statements scope block scope blockscope upper scope upperscope length collection cases big iter ate iterate case count casecount cases case statement casestatement length statements length is string switch isstringswitch constants length string constants stringconstants string length counter length constant constant statement statement statements constant statement resolve case resolvecase scope expression type expressiontype constant notaconstant is string switch isstringswitch key constant int value intvalue check duplicate statement counter constants key report duplicate case reportduplicatecase case statement casestatement statement cases length constants counter key string key constant string value stringvalue check duplicate statement counter string constants stringconstants equals key report duplicate case reportduplicatecase case statement casestatement statement cases length string constants stringconstants counter key resize constants array length counter is string switch isstringswitch system arraycopy constants constants counter counter system arraycopy string constants stringconstants string constants stringconstants string counter counter bits undocumented empty block undocumentedemptyblock upper scope upperscope problem reporter problemreporter undo cumented empty block undocumentedemptyblock block start blockstart source end sourceend check kinds default case defaultcase compiler options compileroptions get severity getseverity compiler options compileroptions missing default case missingdefaultcase problem severities problemseverities ignore is enum switch isenumswitch upper scope upperscope method scope methodscope has missing switch default hasmissingswitchdefault upper scope upperscope problem reporter problemreporter missing default case missingdefaultcase is enum switch isenumswitch expression type expressiontype enum check constants accounted depending existence is enum switch isenumswitch compiler options compileroptions compliance level compliancelevel class file constants classfileconstants jdk default case defaultcase compiler options compileroptions report missing enum case despite default reportmissingenumcasedespitedefault statement constant count constantcount constants constants length constant count constantcount case count casecount case count casecount reference binding referencebinding expression type expressiontype enum constant count enumconstantcount field binding fieldbinding enum fields enumfields reference binding referencebinding expression type expressiontype erasure fields max enum fields enumfields length max field binding fieldbinding enum constant enumconstant enum fields enumfields enum constant enumconstant modifiers class file constants classfileconstants acc enum accenum find constant findconstant case count casecount returned bug enum constant enumconstant constants find constant findconstant enum constant referenced suppress default case defaultcase default case defaultcase bits documented cases omitted documentedcasesomitted suppress upper scope upperscope problem reporter problemreporter missing enum constant case missingenumconstantcase enum constant enumconstant longer block scope scope enclosing case enclosingcase report duplicate case reportduplicatecase case statement casestatement duplicate case statement casestatement original length duplicate case statements duplicatecasestatements scope problem reporter problemreporter duplicate case duplicatecase original scope problem reporter problemreporter duplicate case duplicatecase duplicate duplicate case statements duplicatecasestatements case statement casestatement length duplicate case statements duplicatecasestatements duplicate case statements counter duplicatecasestatementscounter original duplicate case statements duplicatecasestatements duplicate case statements counter duplicatecasestatementscounter duplicate search reported duplicate searchreportedduplicate duplicate case statements counter duplicatecasestatementscounter duplicate case statements duplicatecasestatements duplicate search reported duplicate searchreportedduplicate scope problem reporter problemreporter duplicate case duplicatecase duplicate duplicate case statements duplicatecasestatements duplicate case statements counter duplicatecasestatementscounter duplicate traverse ast visitor astvisitor visitor block scope blockscope block scope blockscope visitor visit block scope blockscope expression traverse visitor block scope blockscope statements statements length statementslength statements length statements length statementslength statements traverse visitor scope visitor end visit endvisit block scope blockscope dispatch call statement branch chain to branchchainto branch label branchlabel label point break label breaklabel break label breaklabel for ward reference count forwardreferencecount label become delegate for becomedelegatefor break label breaklabel override does not complete normally doesnotcompletenormally statements statements length length statements length length statements breaks out breaksout statements statements length does not complete normally doesnotcompletenormally override comp letes by continue completesbycontinue statements statements length length statements length length statements comp letes by continue completesbycontinue