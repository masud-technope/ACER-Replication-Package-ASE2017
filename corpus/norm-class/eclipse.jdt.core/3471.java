copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contribution bug infrastructure feeding external annotations compilation org eclipse jdt internal core java net url java util array list arraylist java util hash map hashmap java util hash set hashset java util iterator java util map org eclipse core resources i folder ifolder org eclipse core resources i resource iresource org eclipse core resources i workspace iworkspace org eclipse core resources resources plugin resourcesplugin org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java element delta ijavaelementdelta org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt internal compiler util object vector objectvector org eclipse jdt internal core delta processor deltaprocessor root info rootinfo org eclipse jdt internal core java model manager javamodelmanager per project info perprojectinfo org eclipse jdt internal core search indexing index manager indexmanager org eclipse jdt internal core util util suppress warnings suppresswarnings rawtypes unchecked classpath change classpathchange delta delta project change library change java project javaproject project i classpath entry iclasspathentry old raw classpath oldrawclasspath i path ipath old output location oldoutputlocation i classpath entry iclasspathentry old resolved classpath oldresolvedclasspath classpath change classpathchange java project javaproject project i classpath entry iclasspathentry old raw classpath oldrawclasspath i path ipath old output location oldoutputlocation i classpath entry iclasspathentry old resolved classpath oldresolvedclasspath project project old raw classpath oldrawclasspath old raw classpath oldrawclasspath old output location oldoutputlocation old output location oldoutputlocation old resolved classpath oldresolvedclasspath old resolved classpath oldresolvedclasspath add classpath deltas addclasspathdeltas java element delta javaelementdelta delta i package fragment root ipackagefragmentroot roots flag roots length i package fragment root ipackagefragmentroot root roots delta changed root flag flag i java element delta ijavaelementdelta removed classpath flag i java element delta ijavaelementdelta source attached sourceattached flag i java element delta ijavaelementdelta source detached sourcedetached root close java model exception javamodelexception returns item list list entry list entry returned classpath contains classpathcontains i classpath entry iclasspathentry list i classpath entry iclasspathentry entry i path ipath exclusion patterns exclusionpatterns entry get exclusion patterns getexclusionpatterns i path ipath inclusion patterns inclusionpatterns entry get inclusion patterns getinclusionpatterns list len listlen list list length next entry nextentry list len listlen i classpath entry iclasspathentry list get content kind getcontentkind entry get content kind getcontentkind get entry kind getentrykind entry get entry kind getentrykind is exported isexported entry is exported isexported get path getpath equals entry get path getpath check custom out puts outputs i path ipath entry output entryoutput entry get output location getoutputlocation i path ipath other output otheroutput get output location getoutputlocation entry output entryoutput other output otheroutput entry output entryoutput equals other output otheroutput check inclusion patterns i path ipath other includes otherincludes get inclusion patterns getinclusionpatterns inclusion patterns inclusionpatterns other includes otherincludes inclusion patterns inclusionpatterns include length includelength inclusion patterns inclusionpatterns length other includes otherincludes other includes otherincludes length include length includelength include length includelength i path ipath equals ignore trailing separators inclusion patterns inclusionpatterns to string tostring equals other includes otherincludes to string tostring next entry nextentry check exclusion patterns i path ipath other excludes otherexcludes get exclusion patterns getexclusionpatterns exclusion patterns exclusionpatterns other excludes otherexcludes exclusion patterns exclusionpatterns exclude length excludelength exclusion patterns exclusionpatterns length other excludes otherexcludes other excludes otherexcludes length exclude length excludelength exclude length excludelength i path ipath equals ignore trailing separators exclusion patterns exclusionpatterns to string tostring equals other excludes otherexcludes to string tostring next entry nextentry java core javacore enabled equals project get option getoption java core javacore compiler annotation analysis annotations enabled check external annotation attachment string annotation path annotationpath classpath entry classpathentry get raw external annotation path getrawexternalannotationpath entry string other annotation path otherannotationpath classpath entry classpathentry get raw external annotation path getrawexternalannotationpath annotation path annotationpath other annotation path otherannotationpath annotation path annotationpath equals other annotation path otherannotationpath annotation path annotationpath other annotation path otherannotationpath recursively adds sub folders subfolders code folder code collection collect all sub folders collectallsubfolders i folder ifolder folder array list arraylist collection java model exception javamodelexception i resource iresource members folder members max members length max i resource iresource members get type gettype i resource iresource folder collection add collect all sub folders collectallsubfolders i folder ifolder collection core exception coreexception java model exception javamodelexception returns collection fragments removed result changing output location location collection empty fragments array list arraylist determine affected package fragments determineaffectedpackagefragments i path ipath location java model exception javamodelexception array list arraylist fragments array list arraylist fragments i workspace iworkspace workspace resources plugin resourcesplugin get workspace getworkspace i resource iresource resource location resource workspace get root getroot find member findmember location resource resource get type gettype i resource iresource folder i folder ifolder folder i folder ifolder resource existed i classpath entry iclasspathentry classpath project get expanded classpath getexpandedclasspath classpath length i classpath entry iclasspathentry entry classpath i path ipath path classpath get path getpath entry get entry kind getentrykind i classpath entry iclasspathentry cpe project path is prefix of isprefixof location path equals location i package fragment root ipackagefragmentroot roots project compute package fragment roots computepackagefragmentroots classpath package fragment root packagefragmentroot root package fragment root packagefragmentroot roots output location fragment sub folders subfolders array list arraylist folders array list arraylist folders add folder collect all sub folders collectallsubfolders folder folders iterator elements folders iterator segments path segment count segmentcount elements has next hasnext i folder ifolder i folder ifolder elements i path ipath relative path relativepath get full path getfullpath remove first segments removefirstsegments segments string pkg name pkgname relative path relativepath segments i package fragment ipackagefragment pkg root get package fragment getpackagefragment pkg name pkgname util is excluded isexcluded pkg fragments add pkg fragments equals object obj obj classpath change classpathchange project equals classpath change classpathchange obj project generates classpath change delta classpath change returns delta generated project reference changed generate delta generatedelta java element delta javaelementdelta delta add classpath change addclasspathchange java model manager javamodelmanager manager java model manager javamodelmanager get java model manager getjavamodelmanager delta processing state deltaprocessingstate manager delta state deltastate find java project findjavaproject project get element name getelementname delta processor create project delta project delta delta processor deltaprocessor delta processor deltaprocessor get delta processor getdeltaprocessor i classpath entry iclasspathentry new resolved classpath newresolvedclasspath i path ipath new output location newoutputlocation result delta per project info perprojectinfo per project info perprojectinfo project get per project info getperprojectinfo info project resolve classpath resolveclasspath per project info perprojectinfo don previous session values add classpath change addclasspathchange i classpath entry iclasspathentry new raw classpath newrawclasspath block ensure consistency per project info perprojectinfo new raw classpath newrawclasspath per project info perprojectinfo raw classpath rawclasspath new resolved classpath newresolvedclasspath per project info perprojectinfo get resolved classpath getresolvedclasspath new output location newoutputlocation per project info perprojectinfo output location outputlocation new resolved classpath newresolvedclasspath thread reset resolved classpath temporary per project info perprojectinfo per project info perprojectinfo temporary info temporaryinfo project new temporary info newtemporaryinfo project resolve classpath resolveclasspath temporary info temporaryinfo don previous session values add classpath change addclasspathchange new raw classpath newrawclasspath temporary info temporaryinfo raw classpath rawclasspath new resolved classpath newresolvedclasspath temporary info temporaryinfo get resolved classpath getresolvedclasspath new output location newoutputlocation temporary info temporaryinfo output location outputlocation check raw classpath changed old raw classpath oldrawclasspath java project javaproject are class paths equal areclasspathsequal old raw classpath oldrawclasspath new raw classpath newrawclasspath old output location oldoutputlocation new output location newoutputlocation delta changed project i java element delta ijavaelementdelta classpath changed result delta https bugs eclipse org bugs bug cgi length old raw classpath oldrawclasspath length length i classpath entry iclasspathentry entry old raw classpath oldrawclasspath entry get entry kind getentrykind i classpath entry iclasspathentry cpe container classpath contains classpathcontains new raw classpath newrawclasspath entry manager container put containerput project entry get path getpath resolved classpath old resolved classpath oldresolvedclasspath java project javaproject are class paths equal areclasspathsequal old resolved classpath oldresolvedclasspath new resolved classpath newresolvedclasspath old output location oldoutputlocation new output location newoutputlocation result close cached info project close ensure caches dependent projects reset https bugs eclipse org bugs bug cgi delta processor deltaprocessor project caches to reset projectcachestoreset add project java model exception javamodelexception delta processor deltaprocessor verbose print stack trace printstacktrace result old resolved classpath oldresolvedclasspath result delta changed project i java element delta ijavaelementdelta resolved classpath changed result delta ensure external jars ref res hed refreshed project https bugs eclipse org bugs bug cgi add for refresh addforrefresh project map removed roots removedroots i package fragment root ipackagefragmentroot roots map all old roots alloldroots all old roots alloldroots delta processor deltaprocessor old roots oldroots roots i package fragment root ipackagefragmentroot all old roots alloldroots project roots removed roots removedroots hash map hashmap roots length i package fragment root ipackagefragmentroot root roots removed roots removedroots root get path getpath root new length newlength new resolved classpath newresolvedclasspath length old length oldlength old resolved classpath oldresolvedclasspath length old length oldlength classpath contains classpathcontains new resolved classpath newresolvedclasspath old resolved classpath oldresolvedclasspath remote project entry kind entrykind old resolved classpath oldresolvedclasspath get entry kind getentrykind entry kind entrykind i classpath entry iclasspathentry cpe project result project change entry kind entrykind i classpath entry iclasspathentry cpe library result library change i package fragment root ipackagefragmentroot pkg fragment roots pkgfragmentroots removed roots removedroots package fragment root packagefragmentroot old root oldroot package fragment root packagefragmentroot removed roots removedroots old resolved classpath oldresolvedclasspath get path getpath root entry was n wasn bound old root oldroot pkg fragment roots pkgfragmentroots package fragment root packagefragmentroot old root oldroot pkg fragment roots pkgfragmentroots object vector objectvector accumulated roots accumulatedroots object vector objectvector hash set hashset rootids hash set hashset rootids add project rootid project compute package fragment roots computepackagefragmentroots old resolved classpath oldresolvedclasspath accumulated roots accumulatedroots rootids original project don retrieve exported roots reverse map https bugs eclipse org bugs bug cgi fragment resource removed project i java project ijavaproject compute package fragment roots computepackagefragmentroots doesn include entry cache cases add cache accumulated roots accumulatedroots root info rootinfo root info rootinfo root info rootinfo old roots oldroots old resolved classpath oldresolvedclasspath get path getpath root info rootinfo root info rootinfo cache i package fragment root ipackagefragmentroot old root oldroot root info rootinfo cache accumulated roots accumulatedroots size i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot accumulated roots accumulatedroots element at elementat root get path getpath equals old root oldroot get path getpath accumulated roots accumulatedroots add old root oldroot pkg fragment roots pkgfragmentroots package fragment root packagefragmentroot accumulated roots accumulatedroots size accumulated roots accumulatedroots copy into copyinto pkg fragment roots pkgfragmentroots java model exception javamodelexception pkg fragment roots pkgfragmentroots package fragment root packagefragmentroot add classpath deltas addclasspathdeltas delta pkg fragment roots pkgfragmentroots i java element delta ijavaelementdelta removed classpath remote project old resolved classpath oldresolvedclasspath get entry kind getentrykind i classpath entry iclasspathentry cpe project result project change reordering classpath add classpath deltas addclasspathdeltas delta project compute package fragment roots computepackagefragmentroots old resolved classpath oldresolvedclasspath i java element delta ijavaelementdelta reorder check source attachment i path ipath new source path newsourcepath new resolved classpath newresolvedclasspath get source attachment path getsourceattachmentpath source attachment flags sourceattachmentflags get source attachment delta flag getsourceattachmentdeltaflag old resolved classpath oldresolvedclasspath get source attachment path getsourceattachmentpath new source path newsourcepath i path ipath old root path oldrootpath old resolved classpath oldresolvedclasspath get source attachment root path getsourceattachmentrootpath i path ipath new root path newrootpath new resolved classpath newresolvedclasspath get source attachment root path getsourceattachmentrootpath source attachment root flags sourceattachmentrootflags get source attachment delta flag getsourceattachmentdeltaflag old root path oldrootpath new root path newrootpath flags source attachment flags sourceattachmentflags source attachment root flags sourceattachmentrootflags flags add classpath deltas addclasspathdeltas delta project compute package fragment roots computepackagefragmentroots old resolved classpath oldresolvedclasspath flags old root path oldrootpath new root path newrootpath source path root path recomputed dynamically force detach source jar fragment roots source lazily computed needed i package fragment root ipackagefragmentroot computed roots computedroots project compute package fragment roots computepackagefragmentroots old resolved classpath oldresolvedclasspath computed roots computedroots length i package fragment root ipackagefragmentroot root computed roots computedroots force detach source jar fragment roots source lazily computed needed root close java model exception javamodelexception new length newlength classpath contains classpathcontains old resolved classpath oldresolvedclasspath new resolved classpath newresolvedclasspath remote project entry kind entrykind new resolved classpath newresolvedclasspath get entry kind getentrykind entry kind entrykind i classpath entry iclasspathentry cpe project result project change entry kind entrykind i classpath entry iclasspathentry cpe library result library change add classpath deltas addclasspathdeltas delta project compute package fragment roots computepackagefragmentroots new resolved classpath newresolvedclasspath i java element delta ijavaelementdelta classpath classpath reordering generated previous loop change output location fragments removed new output location newoutputlocation old output location oldoutputlocation new output location newoutputlocation new output location newoutputlocation equals old output location oldoutputlocation array list arraylist determine affected package fragments determineaffectedpackagefragments old output location oldoutputlocation iterator iter iterator iter has next hasnext i package fragment ipackagefragment frag i package fragment ipackagefragment iter i package fragment root ipackagefragmentroot frag get parent getparent close delta frag fragments removed array list arraylist removed determine affected package fragments determineaffectedpackagefragments new output location newoutputlocation iter removed iterator iter has next hasnext i package fragment ipackagefragment frag i package fragment ipackagefragment iter i package fragment root ipackagefragmentroot frag get parent getparent close delta removed frag java model exception javamodelexception delta processor deltaprocessor verbose print stack trace printstacktrace result returns source attachment flag delta source paths returns source attached sourceattached source detached sourcedetached source attached sourceattached source detached sourcedetached difference get source attachment delta flag getsourceattachmentdeltaflag i path ipath old path oldpath i path ipath new path newpath old path oldpath new path newpath i java element delta ijavaelementdelta source attached sourceattached new path newpath i java element delta ijavaelementdelta source detached sourcedetached old path oldpath equals new path newpath i java element delta ijavaelementdelta source attached sourceattached i java element delta ijavaelementdelta source detached sourcedetached hash code hashcode project hash code hashcode request indexing entries remove removed entries request indexing requestindexing i classpath entry iclasspathentry new resolved classpath newresolvedclasspath new resolved classpath newresolvedclasspath project get resolved classpath getresolvedclasspath java model exception javamodelexception java model manager javamodelmanager manager java model manager javamodelmanager get java model manager getjavamodelmanager index manager indexmanager index manager indexmanager manager index manager indexmanager index manager indexmanager delta processing state deltaprocessingstate manager delta state deltastate new length newlength new resolved classpath newresolvedclasspath length old length oldlength old resolved classpath oldresolvedclasspath old resolved classpath oldresolvedclasspath length old length oldlength classpath contains classpathcontains new resolved classpath newresolvedclasspath old resolved classpath oldresolvedclasspath remote projects indexed project old resolved classpath oldresolvedclasspath get entry kind getentrykind i classpath entry iclasspathentry cpe project remove java files source folder lib folder jar file remove shared i classpath entry iclasspathentry old entry oldentry old resolved classpath oldresolvedclasspath i path ipath path old entry oldentry get path getpath change kind changekind old resolved classpath oldresolvedclasspath get entry kind getentrykind change kind changekind i classpath entry iclasspathentry cpe source inclusion patterns inclusionpatterns classpath entry classpathentry old entry oldentry full inclusion pattern chars fullinclusionpatternchars exclusion patterns exclusionpatterns classpath entry classpathentry old entry oldentry full exclusion pattern chars fullexclusionpatternchars index manager indexmanager remove source folder from index removesourcefolderfromindex project path inclusion patterns inclusionpatterns exclusion patterns exclusionpatterns i classpath entry iclasspathentry cpe library root shared other roots otherroots path index manager indexmanager discard jobs discardjobs path to string tostring index manager indexmanager remove index removeindex path todo kent remove memory indexing check times tamps timestamps new length newlength classpath contains classpathcontains old resolved classpath oldresolvedclasspath new resolved classpath newresolvedclasspath new resolved classpath newresolvedclasspath get entry kind getentrykind i classpath entry iclasspathentry cpe library remote projects indexed project new resolved classpath newresolvedclasspath get entry kind getentrykind i classpath entry iclasspathentry cpe project request indexing entry kind entrykind new resolved classpath newresolvedclasspath get entry kind getentrykind url new url newurl classpath entry classpathentry new resolved classpath newresolvedclasspath get library index location getlibraryindexlocation entry kind entrykind i classpath entry iclasspathentry cpe library path has changed pathhaschanged i path ipath new path newpath new resolved classpath newresolvedclasspath get path getpath old length oldlength i classpath entry iclasspathentry old entry oldentry old resolved classpath oldresolvedclasspath old entry oldentry get path getpath equals new path newpath url old url oldurl classpath entry classpathentry old entry oldentry get library index location getlibraryindexlocation old url oldurl new url newurl path has changed pathhaschanged old url oldurl new url newurl path has changed pathhaschanged new url newurl equals old url oldurl old url oldurl index manager indexmanager remove index removeindex new path newpath path has changed pathhaschanged index manager indexmanager index library indexlibrary new path newpath project get project getproject new url newurl i classpath entry iclasspathentry cpe source i classpath entry iclasspathentry entry new resolved classpath newresolvedclasspath i path ipath path entry get path getpath inclusion patterns inclusionpatterns classpath entry classpathentry entry full inclusion pattern chars fullinclusionpatternchars exclusion patterns exclusionpatterns classpath entry classpathentry entry full exclusion pattern chars fullexclusionpatternchars index manager indexmanager index source folder indexsourcefolder project path inclusion patterns inclusionpatterns exclusion patterns exclusionpatterns string to string tostring nls classpath change classpathchange project get element name getelementname