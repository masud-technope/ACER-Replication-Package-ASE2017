copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler codegen java util array list arraylist java util arrays java util hash map hashmap java util hash set hashset java util iterator java util org eclipse jdt core compiler char operation charoperation org eclipse jdt internal compiler class file classfile org eclipse jdt internal compiler ast ast node astnode org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler lookup binding org eclipse jdt internal compiler lookup field binding fieldbinding org eclipse jdt internal compiler lookup local variable binding localvariablebinding org eclipse jdt internal compiler lookup method binding methodbinding org eclipse jdt internal compiler lookup scope org eclipse jdt internal compiler lookup type binding typebinding org eclipse jdt internal compiler lookup type ids typeids org eclipse jdt internal compiler problem abort method abortmethod suppress warnings suppresswarnings rawtypes unchecked stack map frame code stream stackmapframecodestream code stream codestream exception marker exceptionmarker comparable constant pool name constantpoolname exception marker exceptionmarker constant pool name constantpoolname constant pool name constantpoolname constant pool name constantpoolname compare to compareto object exception marker exceptionmarker exception marker exceptionmarker equals object obj obj exception marker exceptionmarker exception marker exceptionmarker marker exception marker exceptionmarker obj marker char operation charoperation equals constant pool name constantpoolname marker constant pool name constantpoolname hash code hashcode constant pool name constantpoolname hash code hashcode string to string tostring string buffer stringbuffer buffer string buffer stringbuffer buffer append append append append constant pool name constantpoolname append string value of valueof buffer stack depth marker stackdepthmarker delta type binding typebinding type binding typebinding stack depth marker stackdepthmarker delta type binding typebinding type binding typebinding type binding typebinding type binding typebinding delta delta stack depth marker stackdepthmarker delta delta delta string to string tostring string buffer stringbuffer buffer string buffer stringbuffer buffer append append append append delta type binding typebinding buffer append append type binding typebinding qualified package name qualifiedpackagename append type binding typebinding qualified source name qualifiedsourcename buffer append string value of valueof buffer stack marker stackmarker destinationpc verification type info verificationtypeinfo infos stack marker stackmarker destinationpc destinationpc destinationpc set infos setinfos verification type info verificationtypeinfo infos infos infos string to string tostring string buffer stringbuffer buffer string buffer stringbuffer buffer append copy stack items append append nls append destinationpc infos max infos length max buffer append buffer append infos buffer append string value of valueof buffer frame position frameposition counter state indexes stateindexes state indexes counter stateindexescounter hash map hashmap frame positions framepositions exception markers exceptionmarkers array list arraylist stack depth markers stackdepthmarkers array list arraylist stack markers stackmarkers stack map frame code stream stackmapframecodestream class file classfile given class file givenclassfile given class file givenclassfile generate attributes generateattributes class file constants classfileconstants attr stack map add definitely assigned variables adddefinitelyassignedvariables scope scope init state index initstateindex required xvs lfre winnt compiler variable table method appears incorrect loop visible locals count visiblelocalscount local variable binding localvariablebinding local binding localbinding visible locals visiblelocals local binding localbinding check local assigned is definitely assigned isdefinitelyassigned is definitely assigned isdefinitelyassigned scope init state index initstateindex local binding localbinding is definitely assigned isdefinitelyassigned state indexes stateindexes max state indexes counter stateindexescounter max is definitely assigned isdefinitelyassigned scope state indexes stateindexes local binding localbinding local binding localbinding initialization count initializationcount local binding localbinding initializationpcs local binding localbinding initialization count initializationcount cases initialization int erval interval opened add opened int erval interval initialization int ervals intervals closed add opened int erval interval opened int erval interval local binding localbinding initializationpcs local binding localbinding initialization count initializationcount equals initializationpcs collection pairs startpc endpc int erval interval closed local binding localbinding record initialization start c recordinitializationstartpc position loop local binding localbinding initialization count initializationcount local binding localbinding initializationpcs local binding localbinding initialization count initializationcount cases initialization int erval interval opened add opened int erval interval initialization int ervals intervals closed add opened int erval interval opened int erval interval local binding localbinding initializationpcs local binding localbinding initialization count initializationcount equals initializationpcs collection pairs startpc endpc int erval interval closed local binding localbinding record initialization start c recordinitializationstartpc position add exception marker addexceptionmarker type binding typebinding type binding typebinding exception markers exceptionmarkers exception markers exceptionmarkers hash set hashset type binding typebinding exception markers exceptionmarkers add exception marker exceptionmarker constant pool constantpool java lang throwable constant pool name javalangthrowableconstantpoolname type binding typebinding type ids typeids exception markers exceptionmarkers add exception marker exceptionmarker constant pool constantpool java lang class not found exception constant pool name javalangclassnotfoundexceptionconstantpoolname type ids typeids exception markers exceptionmarkers add exception marker exceptionmarker constant pool constantpool java lang no such field error constant pool name javalangnosuchfielderrorconstantpoolname exception markers exceptionmarkers add exception marker exceptionmarker type binding typebinding constant pool name constantpoolname add frame position addframeposition integer new entry newentry integer value of valueof frame position frameposition frame position frameposition frame positions framepositions new entry newentry counter frame positions framepositions new entry newentry frame position frameposition optimize branch optimizebranch old position oldposition branch label branchlabel lbl optimize branch optimizebranch old position oldposition lbl remove frame position removeframeposition old position oldposition remove frame position removeframeposition integer entry integer value of valueof frame position frameposition frame position frameposition frame positions framepositions entry counter counter frame positions framepositions remove entry add variable addvariable local variable binding localvariablebinding local binding localbinding local binding localbinding initializationpcs record local binding localbinding local binding localbinding record initialization start c recordinitializationstartpc position add stack marker addstackmarker destinationpc stack markers stackmarkers stack markers stackmarkers array list arraylist stack markers stackmarkers add stack marker stackmarker destinationpc size stack markers stackmarkers size size stack marker stackmarker stack markers stackmarkers size position stack markers stackmarkers add stack marker stackmarker destinationpc add stack depth marker addstackdepthmarker delta type binding typebinding type binding typebinding stack depth markers stackdepthmarkers stack depth markers stackdepthmarkers array list arraylist stack depth markers stackdepthmarkers add stack depth marker stackdepthmarker delta type binding typebinding size stack depth markers stackdepthmarkers size size stack depth markers stackdepthmarkers add stack depth marker stackdepthmarker delta type binding typebinding stack depth marker stackdepthmarker stack depth marker stackdepthmarker stack depth marker stackdepthmarker stack depth markers stackdepthmarkers size stack depth marker stackdepthmarker position stack depth markers stackdepthmarkers add stack depth marker stackdepthmarker delta type binding typebinding replace recorded stack depth marker type binding typebinding happen multiple conditional expression nested bug stack depth markers stackdepthmarkers size stack depth marker stackdepthmarker delta type binding typebinding decr stack size decrstacksize offset decr stack size decrstacksize offset add stack depth marker addstackdepthmarker position record expression type recordexpressiontype type binding typebinding type binding typebinding add stack depth marker addstackdepthmarker position type binding typebinding macro building descriptor object generate class literal access for type generateclassliteralaccessfortype type binding typebinding accessed type accessedtype field binding fieldbinding synthetic field binding syntheticfieldbinding accessed type accessedtype is base type isbasetype accessed type accessedtype type binding typebinding gettype accessed type accessedtype target level targetlevel class file constants classfileconstants jdk generation ldc byte code bytecode ldc accessed type accessedtype cldc mode branch label branchlabel end label endlabel branch label branchlabel synthetic field binding syntheticfieldbinding field access fieldaccess opcodes opc get static getstatic synthetic field binding syntheticfieldbinding declaring class declaringclass dup ifnonnull end label endlabel pop macro building descriptor object field cache store sequence responsible building actual descriptor field cache fieldcache supposed body synthetic access method fact oring factoring actual descriptor creation invocation site saving space field cache fieldcache nil dumping byte code bytecode invocation site hand field cache wrap code exception handler convert class not found exception classnotfoundexception no class def error noclassdeferror exception label exceptionlabel class not found exception handler classnotfoundexceptionhandler exception label exceptionlabel type binding typebinding class not found exception handler classnotfoundexceptionhandler place start placestart nls ldc accessed type accessedtype type binding typebinding java lang object string value of valueof accessed type accessedtype constant pool name constantpoolname replace invoke class for name invokeclassforname https bugs eclipse org bugs bug cgi accessed type accessedtype base types basetypes null binding nullbinding ldc java lang object nls accessed type accessedtype is array type isarraytype ldc string value of valueof accessed type accessedtype constant pool name constantpoolname replace array type avoid initialization ldc string value of valueof accessed type accessedtype constant pool name constantpoolname replace nls nls invoke class for name invokeclassforname accessed type accessedtype is array type isarraytype extract component type doesn initialize invoke java lang class get component type invokejavalangclassgetcomponenttype protect runtime code binary inc onsistencies inconsistencies accessed type accessedtype missing class not found exception classnotfoundexception converted no class def error noclassdeferror message build exception handler class not found exception handler classnotfoundexceptionhandler place end placeend synthetic field binding syntheticfieldbinding dup field access fieldaccess opcodes opc put static putstatic synthetic field binding syntheticfieldbinding declaring class declaringclass frompc position end label endlabel saved stack depth savedstackdepth stack depth stackdepth generate body exception handler class not found exception classnotfoundexception stack literal stack stack empty point code gen save restart push exception on stack pushexceptiononstack type binding typebinding represents class not found exception classnotfoundexception class not found exception handler classnotfoundexceptionhandler place transform current exception rep ush repush no class def found error noclassdeffounderror class not found classnotfound get message getmessage new no class def found error newnoclassdeffounderror dup swap retrieve message exception invoke throwable get message invokethrowablegetmessage send constructor message string argument invoke no class def found error string constructor invokenoclassdeffounderrorstringconstructor athrow end label endlabel place add stack marker addstackmarker frompc position stack depth stackdepth saved stack depth savedstackdepth generate outer access generateouteraccess object mapping sequence mappingsequence ast node astnode invocation site invocationsite binding target scope scope current position currentposition position generate outer access generateouteraccess mapping sequence mappingsequence invocation site invocationsite target scope current position currentposition position code generate access enclosing instance abort method abortmethod scope reference compilation unit referencecompilationunit compilation result compilationresult exception marker exceptionmarker get exception markers getexceptionmarkers exception marker set exceptionmarkerset exception markers exceptionmarkers exception markers exceptionmarkers size exception marker set exceptionmarkerset size exception marker exceptionmarker markers exception marker exceptionmarker size iterator iterator exception marker set exceptionmarkerset iterator iterator has next hasnext markers exception marker exceptionmarker iterator arrays sort markers system println markers get frame positions getframepositions frame positions framepositions key set keyset size size positions size iterator iterator iterator iterator has next hasnext positions integer iterator int value intvalue arrays sort positions system println positions stack depth marker stackdepthmarker get stack depth markers getstackdepthmarkers stack depth markers stackdepthmarkers length stack depth markers stackdepthmarkers size length stack depth marker stackdepthmarker result stack depth marker stackdepthmarker length stack depth markers stackdepthmarkers to array toarray result result stack marker stackmarker get stack markers getstackmarkers stack markers stackmarkers length stack markers stackmarkers size length stack marker stackmarker result stack marker stackmarker length stack markers stackmarkers to array toarray result result has frame positions hasframepositions frame positions framepositions size init class file classfile target class file targetclassfile init target class file targetclassfile state indexes counter stateindexescounter frame positions framepositions frame positions framepositions clear exception markers exceptionmarkers exception markers exceptionmarkers clear stack depth markers stackdepthmarkers stack depth markers stackdepthmarkers clear stack markers stackmarkers stack markers stackmarkers clear initialize max locals initializemaxlocals method binding methodbinding method binding methodbinding initialize max locals initializemaxlocals method binding methodbinding frame positions framepositions frame positions framepositions hash map hashmap frame positions framepositions clear pop state index popstateindex state indexes counter stateindexescounter push state index pushstateindex natural exit merge init state index naturalexitmergeinitstateindex state indexes stateindexes state indexes stateindexes length state indexes stateindexes length length state indexes counter stateindexescounter resize system arraycopy state indexes stateindexes state indexes stateindexes length length state indexes stateindexes state indexes counter stateindexescounter natural exit merge init state index naturalexitmergeinitstateindex remove not definitely assigned variables removenotdefinitelyassignedvariables scope scope init state index initstateindex visible locals count visiblelocalscount loop local variable binding localvariablebinding local binding localbinding visible locals visiblelocals local binding localbinding local binding localbinding initialization count initializationcount is definitely assigned isdefinitelyassigned is definitely assigned isdefinitelyassigned scope init state index initstateindex local binding localbinding is definitely assigned isdefinitelyassigned state indexes stateindexes max state indexes counter stateindexescounter max is definitely assigned isdefinitelyassigned scope state indexes stateindexes local binding localbinding loop local binding localbinding record initialization end c recordinitializationendpc position reset class file classfile given class file givenclassfile reset given class file givenclassfile state indexes counter stateindexescounter frame positions framepositions frame positions framepositions clear exception markers exceptionmarkers exception markers exceptionmarkers clear stack depth markers stackdepthmarkers stack depth markers stackdepthmarkers clear stack markers stackmarkers stack markers stackmarkers clear write position writeposition branch label branchlabel label write position writeposition label add frame position addframeposition label position write position writeposition branch label branchlabel label for ward reference forwardreference write position writeposition label for ward reference forwardreference add frame position addframeposition label position write signed word writesignedword pos write signed word writesignedword pos add frame position addframeposition position write wide position writewideposition branch label branchlabel label write wide position writewideposition label add frame position addframeposition label position are turn areturn are turn areturn add frame position addframeposition position ireturn ireturn add frame position addframeposition position lreturn lreturn add frame position addframeposition position freturn freturn add frame position addframeposition position dreturn dreturn add frame position addframeposition position add frame position addframeposition position athrow athrow add frame position addframeposition position push on stack pushonstack type binding typebinding binding push on stack pushonstack binding add stack depth marker addstackdepthmarker position binding push exception on stack pushexceptiononstack type binding typebinding binding push exception on stack pushexceptiononstack binding add exception marker addexceptionmarker position binding branch label branchlabel label label add frame position addframeposition position branch label branchlabel label label add frame position addframeposition position reset in wide mode resetinwidemode reset secret locals resetsecretlocals reset in wide mode resetinwidemode reset for code gen unused locals resetforcodegenunusedlocals reset secret locals resetsecretlocals reset for code gen unused locals resetforcodegenunusedlocals reset secret locals resetsecretlocals max locals length max local variable binding localvariablebinding local variable binding localvariablebinding locals local variable binding localvariablebinding local variable binding localvariablebinding is secret issecret locals reinitialized computation resolved positions local variable binding localvariablebinding reset initializations resetinitializations