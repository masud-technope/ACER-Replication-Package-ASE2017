copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests builder java java util junit framework org eclipse core runtime org eclipse core resources org eclipse jdt core org eclipse jdt core compiler org eclipse jdt core dom org eclipse jdt core tests util util suppress warnings suppresswarnings rawtypes unchecked participant build tests participantbuildtests builder tests buildertests internal synonym deprecated constant ast jsl all eviate alleviate deprecation warnings deprecated jls internal ast jls participant build tests participantbuildtests string tear down teardown exception test builder participant testbuilderparticipant participant tear down teardown test suite build test suite buildtestsuite participant build tests participantbuildtests build test participant buildtestparticipant compilation participant compilationparticipant build test participant buildtestparticipant test builder participant testbuilderparticipant participant participant problem participantproblem categorized problem categorizedproblem counter string message filename participant problem participantproblem string message string filename message message counter filename filename to char array tochararray string get arguments getarguments string getid string get message getmessage message get originating file name getoriginatingfilename filename get source start getsourcestart get source end getsourceend get source line number getsourcelinenumber is error iserror is warning iswarning is info isinfo set source end setsourceend source end sourceend needed set source line number setsourcelinenumber line number linenumber needed set source start setsourcestart source start sourcestart needed get category d getcategoryid string get marker type getmarkertype org eclipse jdt core tests compile problem compilation unit compilationunit build compilation unit buildcompilationunit build context buildcontext file i java project ijavaproject java project javaproject java core javacore create file get file getfile get project getproject ast parser astparser ast parser astparser new parser newparser jls internal set project setproject java project javaproject set source setsource file get contents getcontents set resolve bindings setresolvebindings set kind setkind ast parser astparser compilation unit set unit name setunitname file get file getfile get name getname compilation unit compilationunit createast test build starting testbuildstarting java model exception javamodelexception nls i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs nls env remove package fragment root removepackagefragmentroot project path projectpath nls i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src nls env set output folder setoutputfolder project path projectpath bin i path ipath test nls nls env add class addclass nls nls root nls nls nls nls test nls test generated type generatedtype install compilation participant compilationparticipant build test participant buildtestparticipant build pass buildpass build starting buildstarting build context buildcontext files is batch build isbatchbuild add gen source file referenced initial file recompiled build context buildcontext result files i file ifile gened type genedtype nls result get file getfile get parent getparent get file getfile nls path generated type generatedtype java build pass buildpass build pass buildpass nls gened type genedtype create nls byte array input stream bytearrayinputstream generated type generatedtype get bytes getbytes nls nls core exception coreexception print stack trace printstacktrace result record added generated files recordaddedgeneratedfiles i file ifile gened type genedtype build pass buildpass gened type genedtype delete core exception coreexception print stack trace printstacktrace result record deleted generated files recorddeletedgeneratedfiles i file ifile gened type genedtype build pass buildpass incremental build incrementalbuild project path projectpath expecting no problems expectingnoproblems generated type generatedtype deleted nls nls env add class addclass nls nls root nls nls nls nls test nls test generated type generatedtype incremental build incrementalbuild project path projectpath expecting only specific problem for expectingonlyspecificproblemfor test problem generated type generatedtype resolved type test categorized problem categorizedproblem cat type i marker imarker severity error generated type generatedtype recreated nls nls env add class addclass nls nls root nls nls nls nls test nls test generated type generatedtype incremental build incrementalbuild project path projectpath expecting no problems expectingnoproblems test default value testdefaultvalue java model exception javamodelexception nls nls i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs nls env remove package fragment root removepackagefragmentroot project path projectpath nls i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src nls env set output folder setoutputfolder project path projectpath bin nls nls env add class addclass nls nls root nls nls test nls nls entry point entrypoint nls test nls entry point entrypoint class with nested annotation classwithnestedannotation nested annotation nestedannotation nls nls env add class addclass nls nls root nls nls test nls nls class with nested annotation classwithnestedannotation nls test nls class with nested annotation classwithnestedannotation nls nls nested annotation nestedannotation enum character win nie winnie tiger piglet eore character character eore nls nls install compilation participant compilationparticipant build test participant buildtestparticipant is annotation processor isannotationprocessor process annotations processannotations build context buildcontext files total files length total i file ifile file files get file getfile traversing members test class with nested annotation classwithnestedannotation reference entry point entrypoint java nls entry point entrypoint java equals file get name getname nls list problems array list arraylist compilation unit compilationunit unit build compilation unit buildcompilationunit files list types unit types types size abstract type declaration abstracttypedeclaration type decl typedecl abstract type declaration abstracttypedeclaration types i type binding itypebinding type binding typebinding type decl typedecl resolve binding resolvebinding type binding typebinding i variable binding ivariablebinding field bindings fieldbindings type binding typebinding get declared fields getdeclaredfields f length flength field bindings fieldbindings length f length flength i variable binding ivariablebinding field field bindings fieldbindings nested annotation nestedannotation equals field get name getname i type binding itypebinding field type fieldtype field get type gettype i type binding itypebinding declared types declaredtypes field type fieldtype get declared types getdeclaredtypes d length dlength declared types declaredtypes length d length dlength nested annotation nestedannotation equals declared types declaredtypes get name getname i method binding imethodbinding annotation methods annotationmethods declared types declaredtypes get declared methods getdeclaredmethods m length mlength annotation methods annotationmethods length m length mlength equals annotation methods annotationmethods get name getname object default value defaultvalue annotation methods annotationmethods get default value getdefaultvalue assert true asserttrue wrong default value defaultvalue i variable binding ivariablebinding i variable binding ivariablebinding variable binding variablebinding i variable binding ivariablebinding default value defaultvalue string default string defaultstring variable binding variablebinding get name getname string expected eore expected equals default string defaultstring i problem iproblem problem participant problem participantproblem expecting expected default string defaultstring file get name getname problems add problem i variable binding ivariablebinding nested fields nestedfields field type fieldtype get declared fields getdeclaredfields nf length nflength nested fields nestedfields length nf length nflength nested fields nestedfields get name getname equals object constant nested fields nestedfields get constant value getconstantvalue string constant str constantstr constant constant to string tostring string expected constant str constantstr equals expected problems add participant problem participantproblem expecting constant expected constant str constantstr file get name getname problems add participant problem participantproblem unexpected field field file get name getname problems is empty isempty categorized problem categorizedproblem problem array problemarray categorized problem categorizedproblem problems size problem array problemarray categorized problem categorizedproblem problems to array toarray problem array problemarray files record new problems recordnewproblems problem array problemarray full build fullbuild project path projectpath expecting no problems expectingnoproblems ensure participants problems correctly managed java builder regression test bug problems compilation participants compilationparticipants cleaned java errors test participant problems testparticipantproblems java model exception javamodelexception i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs env remove package fragment root removepackagefragmentroot project path projectpath i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src env set output folder setoutputfolder project path projectpath bin env add class addclass root generate problem install compilation participant compilationparticipant build test participant buildtestparticipant build starting buildstarting build context buildcontext files is batch isbatch total files length total build context buildcontext context files char operation charoperation index of indexof generate problem to char array tochararray context get contents getcontents context record new problems recordnewproblems categorized problem categorizedproblem participant problem participantproblem participant problem context get file getfile get full path getfullpath to string tostring full build fullbuild project path projectpath expecting participant problems expectingparticipantproblems project path projectpath participant problem env add class addclass root incremental build incrementalbuild project path projectpath expecting participant problems expectingparticipantproblems project path projectpath test process annotation declarations testprocessannotationdeclarations java model exception javamodelexception nls nls i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs nls env remove package fragment root removepackagefragmentroot project path projectpath nls i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src nls env set output folder setoutputfolder project path projectpath bin nls nls env add class addclass nls nls root nls nls nls nls test nls test annotation testannotation nls test generated type generatedtype nls nls env add class addclass nls nls root nls nls nls nls nls missing annotation missingannotation install compilation participant compilationparticipant build test participant buildtestparticipant count is annotation processor isannotationprocessor process annotations processannotations build context buildcontext files add gen source file referenced initial file recompiled count count build context buildcontext result files i file ifile gened type genedtype result get file getfile get parent getparent get file getfile path missing annotation missingannotation java nls gened type genedtype create nls byte array input stream bytearrayinputstream missing annotation missingannotation get bytes getbytes nls nls core exception coreexception print stack trace printstacktrace result record added generated files recordaddedgeneratedfiles i file ifile gened type genedtype count count build context buildcontext result files i file ifile gened type genedtype result get file getfile get parent getparent get file getfile path generated type generatedtype java nls gened type genedtype create nls byte array input stream bytearrayinputstream generated type generatedtype get bytes getbytes nls nls core exception coreexception print stack trace printstacktrace result record added generated files recordaddedgeneratedfiles i file ifile gened type genedtype full build fullbuild project path projectpath expecting no problems expectingnoproblems test process annotation qualified references testprocessannotationqualifiedreferences java model exception javamodelexception nls nls i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs nls env remove package fragment root removepackagefragmentroot project path projectpath nls i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src nls env set output folder setoutputfolder project path projectpath bin nls nls env add class addclass nls nls root nls nls nls nls test nls nls generated annotation generatedannotation nls test method generated type generatedtype method nls nls env add class addclass nls nls root nls nls nls nls generated annotation generatedannotation nls nls generated annotation generatedannotation install compilation participant compilationparticipant build test participant buildtestparticipant is annotation processor isannotationprocessor process annotations processannotations build context buildcontext files add gen source file referenced initial file recompiled build context buildcontext result files i file ifile gened type genedtype nls result get file getfile get project getproject get file getfile nls path src generated type generatedtype java gened type genedtype exists i folder ifolder folder i folder ifolder gened type genedtype get parent getparent folder exists folder create nls gened type genedtype create nls byte array input stream bytearrayinputstream generated type generatedtype method get bytes getbytes nls nls core exception coreexception print stack trace printstacktrace result record added generated files recordaddedgeneratedfiles i file ifile gened type genedtype full build fullbuild project path projectpath expecting no problems expectingnoproblems test process annotation references testprocessannotationreferences java model exception javamodelexception nls nls i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs nls env remove package fragment root removepackagefragmentroot project path projectpath nls i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src nls env set output folder setoutputfolder project path projectpath bin nls nls env add class addclass nls nls root nls nls nls nls test nls generated annotation generatedannotation nls test install compilation participant compilationparticipant build test participant buildtestparticipant is annotation processor isannotationprocessor process annotations processannotations build context buildcontext files add gen source file referenced initial file recompiled build context buildcontext result files i file ifile gened type genedtype nls result get file getfile get parent getparent get file getfile nls path generated annotation generatedannotation java gened type genedtype exists nls gened type genedtype create nls byte array input stream bytearrayinputstream generated annotation generatedannotation get bytes getbytes nls nls core exception coreexception print stack trace printstacktrace result record added generated files recordaddedgeneratedfiles i file ifile gened type genedtype full build fullbuild project path projectpath expecting no problems expectingnoproblems test resolved method testresolvedmethod java model exception javamodelexception nls nls i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs nls env remove package fragment root removepackagefragmentroot project path projectpath nls i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src nls env set output folder setoutputfolder project path projectpath bin nls nls env add class addclass nls nls root nls nls nls nls nls suppress warnings suppresswarnings nls install compilation participant compilationparticipant build test participant buildtestparticipant is annotation processor isannotationprocessor process annotations processannotations build context buildcontext files total files length total i file ifile file files get file getfile traversing members test class with nested annotation classwithnestedannotation reference entry point entrypoint java nls java equals file get name getname nls list problems array list arraylist compilation unit compilationunit unit build compilation unit buildcompilationunit files list types unit types types size abstract type declaration abstracttypedeclaration type decl typedecl abstract type declaration abstracttypedeclaration types i type binding itypebinding type binding typebinding type decl typedecl resolve binding resolvebinding type binding typebinding type binding typebinding type binding typebinding get annotations getannotations get annotation type getannotationtype i annotation binding iannotationbinding target value targetvalue type binding typebinding get annotations getannotations i method binding imethodbinding method target value targetvalue get declared member value pairs getdeclaredmembervaluepairs get method binding getmethodbinding equals method get name getname problems add participant problem participantproblem method method get name getname file get name getname problems is empty isempty categorized problem categorizedproblem problem array problemarray categorized problem categorizedproblem problems size problem array problemarray categorized problem categorizedproblem problems to array toarray problem array problemarray files record new problems recordnewproblems problem array problemarray full build fullbuild project path projectpath expecting no problems expectingnoproblems https bugs eclipse org bugs bug cgi checking generated attribute test java model exception javamodelexception i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs env remove package fragment root removepackagefragmentroot project path projectpath i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src env set output folder setoutputfolder project path projectpath bin env add class addclass root generate problem build test participant buildtestparticipant build starting buildstarting build context buildcontext files is batch isbatch total files length total build context buildcontext context files char operation charoperation index of indexof generate problem to char array tochararray context get contents getcontents context record new problems recordnewproblems categorized problem categorizedproblem participant problem participantproblem participant problem context get file getfile get full path getfullpath to string tostring full build fullbuild project path projectpath problem problems env get problems for getproblemsfor project path projectpath org eclipse jdt core tests compile problem assert not null assertnotnull problems array problems assert equals assertequals unexpected problems count problems length assert equals assertequals unexpected generated attribute missing problems get source id getsourceid https bugs eclipse org bugs bug cgi checking generated attribute test java model exception javamodelexception i path ipath project path projectpath env add project addproject project env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs env remove package fragment root removepackagefragmentroot project path projectpath i path ipath root env add package fragment root addpackagefragmentroot project path projectpath src env set output folder setoutputfolder project path projectpath bin env add class addclass root generate problem string specific generated by specificgeneratedby specific build test participant buildtestparticipant build starting buildstarting build context buildcontext files is batch isbatch total files length total build context buildcontext context files char operation charoperation index of indexof generate problem to char array tochararray context get contents getcontents context record new problems recordnewproblems categorized problem categorizedproblem participant problem participantproblem participant problem context get file getfile get full path getfullpath to string tostring string get extra marker attribute names getextramarkerattributenames string i marker imarker source object get extra marker attribute values getextramarkerattributevalues string specific generated by specificgeneratedby full build fullbuild project path projectpath problem problems env get problems for getproblemsfor project path projectpath org eclipse jdt core tests compile problem assert not null assertnotnull problems array problems assert equals assertequals unexpected problems count problems length assert equals assertequals unexpected generated attribute specific generated by specificgeneratedby problems get source id getsourceid