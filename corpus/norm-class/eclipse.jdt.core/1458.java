copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests rewrite describing java lang reflect modifier java util array list arraylist java util list junit framework test org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core dom org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite i tracked node position itrackednodeposition suppress warnings suppresswarnings rawtypes unchecked ast rewriting tracking test astrewritingtrackingtest ast rewriting test astrewritingtest deprecated deprecated code simple property descriptor simplepropertydescriptor internal field modifiers property field declaration fielddeclaration modifiers property ast rewriting tracking test astrewritingtrackingtest string ast rewriting tracking test astrewritingtrackingtest string api level apilevel api level apilevel test suite create suite createsuite ast rewriting tracking test astrewritingtrackingtest internal access method variable declaration fragment variabledeclarationfragment set extra dimensions setextradimensions avoiding deprecated warnings param node param dimensions deprecated internal set extra dimensions internalsetextradimensions variable declaration fragment variabledeclarationfragment node dimensions node set extra dimensions setextradimensions dimensions test names with delete testnameswithdelete exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append buf append buf append buf append foo string buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast array list arraylist names array list arraylist array list arraylist positions array list arraylist type declaration typedeclaration type c typec find type declaration findtypedeclaration ast root astroot i tracked node position itrackednodeposition position rewrite track type c typec get name getname names add positions add position list decls type c typec body declarations bodydeclarations method declaration methoddeclaration method method declaration methoddeclaration decls i tracked node position itrackednodeposition position rewrite track method get name getname names add foo positions add position field declaration fielddeclaration field field declaration fielddeclaration decls rewrite remove field string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append buf append foo string buf append buf append buf append buf append buf append string expected buf to string tostring assert equal string assertequalstring preview expected assert correct tracking assertcorrecttracking names positions expected assert correct tracking assertcorrecttracking list names list positions string expected names size string string names i tracked node position itrackednodeposition pos i tracked node position itrackednodeposition positions string string expected substring pos get start position getstartposition pos get start position getstartposition pos get length getlength assert equal string assertequalstring string test names with insert testnameswithinsert exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append buf append buf append buf append foo string buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast array list arraylist names array list arraylist array list arraylist positions array list arraylist type declaration typedeclaration type c typec find type declaration findtypedeclaration ast root astroot i tracked node position itrackednodeposition position rewrite track type c typec get name getname names add positions add position list decls type c typec body declarations bodydeclarations method declaration methoddeclaration method method declaration methoddeclaration decls position rewrite track method get name getname names add foo positions add position field declaration fielddeclaration field field declaration fielddeclaration decls list fragments field fragments variable declaration fragment variabledeclarationfragment frag variable declaration fragment variabledeclarationfragment fragments position rewrite track frag get name getname names add positions add position variable declaration fragment variabledeclarationfragment new frag newfrag ast new variable declaration fragment newvariabledeclarationfragment new frag newfrag set name setname ast new simple name newsimplename new variable newvariable internal set extra dimensions internalsetextradimensions new frag newfrag rewrite get list rewrite getlistrewrite field field declaration fielddeclaration fragments property insert first insertfirst new frag newfrag string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append buf append new variable newvariable buf append buf append foo string buf append buf append buf append buf append buf append string expected buf to string tostring assert equal string assertequalstring preview expected assert correct tracking assertcorrecttracking names positions expected test names with replace testnameswithreplace exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append buf append buf append buf append foo string buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast array list arraylist names array list arraylist array list arraylist positions array list arraylist change type type declaration typedeclaration type c typec find type declaration findtypedeclaration ast root astroot simple name simplename new name newname ast new simple name newsimplename rewrite replace type c typec get name getname new name newname i tracked node position itrackednodeposition position rewrite track new name newname names add positions add position list decls type c typec body declarations bodydeclarations method declaration methoddeclaration method method declaration methoddeclaration decls position rewrite track method get name getname names add foo positions add position while statement whilestatement while statement whilestatement while statement whilestatement method get body getbody statements prefix expression prefixexpression prefix expression prefixexpression prefix expression prefixexpression expression statement expressionstatement block while statement whilestatement get body getbody statements get expression getexpression position rewrite track prefix expression prefixexpression get operand getoperand names add positions add position field declaration fielddeclaration field field declaration fielddeclaration decls list fragments field fragments variable declaration fragment variabledeclarationfragment frag variable declaration fragment variabledeclarationfragment fragments position rewrite track frag get name getname names add positions add position change modifier new modifiers newmodifiers modifier modifier modifier rewrite field internal field modifiers property integer value of valueof new modifiers newmodifiers string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append buf append buf append buf append foo string buf append buf append buf append buf append buf append string expected buf to string tostring assert equal string assertequalstring preview expected assert correct tracking assertcorrecttracking names positions expected test names with move testnameswithmove exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append buf append buf append buf append foo string buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast array list arraylist names array list arraylist array list arraylist positions array list arraylist change type type declaration typedeclaration type c typec find type declaration findtypedeclaration ast root astroot i tracked node position itrackednodeposition position rewrite track type c typec get name getname names add positions add position list decls type c typec body declarations bodydeclarations method declaration methoddeclaration method method declaration methoddeclaration decls position rewrite track method get name getname names add foo positions add position while statement whilestatement while statement whilestatement while statement whilestatement method get body getbody statements prefix expression prefixexpression prefix expression prefixexpression prefix expression prefixexpression expression statement expressionstatement block while statement whilestatement get body getbody statements get expression getexpression position rewrite track prefix expression prefixexpression get operand getoperand names add positions add position field declaration fielddeclaration field field declaration fielddeclaration decls list fragments field fragments variable declaration fragment variabledeclarationfragment frag variable declaration fragment variabledeclarationfragment fragments position rewrite track frag get name getname names add positions add position move method field ast node astnode place holder placeholder rewrite create move target createmovetarget method rewrite get list rewrite getlistrewrite type c typec type declaration typedeclaration body declarations property insert first insertfirst place holder placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append buf append foo string buf append buf append buf append buf append buf append buf append buf append string expected buf to string tostring assert equal string assertequalstring preview expected assert correct tracking assertcorrecttracking names positions expected test names with move testnameswithmove exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo string buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast array list arraylist names array list arraylist array list arraylist positions array list arraylist change type type declaration typedeclaration type c typec find type declaration findtypedeclaration ast root astroot i tracked node position itrackednodeposition position rewrite track type c typec get name getname names add positions add position list decls type c typec body declarations bodydeclarations method declaration methoddeclaration method method declaration methoddeclaration decls position rewrite track method get name getname names add foo positions add position while statement whilestatement while statement whilestatement while statement whilestatement method get body getbody statements prefix expression prefixexpression prefix expression prefixexpression prefix expression prefixexpression expression statement expressionstatement block while statement whilestatement get body getbody statements get expression getexpression position rewrite track prefix expression prefixexpression get operand getoperand names add positions add position move method field ast node astnode place holder placeholder rewrite create move target createmovetarget while statement whilestatement try statement trystatement try statement trystatement ast new try statement newtrystatement try statement trystatement get body getbody statements add place holder placeholder try statement trystatement set finally setfinally ast new block newblock rewrite replace while statement whilestatement try statement trystatement string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo string buf append buf append buf append buf append buf append buf append buf append buf append string expected buf to string tostring assert equal string assertequalstring preview expected assert correct tracking assertcorrecttracking names positions expected test names with move testnameswithmove exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append buf append buf append buf append foo string buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast array list arraylist names array list arraylist array list arraylist positions array list arraylist change type type declaration typedeclaration type c typec find type declaration findtypedeclaration ast root astroot i tracked node position itrackednodeposition position rewrite track type c typec get name getname names add positions add position list decls type c typec body declarations bodydeclarations method declaration methoddeclaration method method declaration methoddeclaration decls position rewrite track method get name getname names add foo positions add position move method field ast node astnode place holder placeholder rewrite create move target createmovetarget method rewrite get list rewrite getlistrewrite type c typec type declaration typedeclaration body declarations property insert first insertfirst place holder placeholder string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append buf append foo string buf append buf append buf append buf append string expected buf to string tostring assert equal string assertequalstring preview expected assert correct tracking assertcorrecttracking names positions expected test names with placeholder testnameswithplaceholder exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append string foo object buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast array list arraylist names array list arraylist array list arraylist positions array list arraylist change type type declaration typedeclaration type c typec find type declaration findtypedeclaration ast root astroot i tracked node position itrackednodeposition position rewrite track type c typec get name getname names add positions add position list decls type c typec body declarations bodydeclarations method declaration methoddeclaration method method declaration methoddeclaration decls position rewrite track method get name getname names add foo positions add position return statement returnstatement return statement returnstatement return statement returnstatement method get body getbody statements cast expression castexpression cast expression castexpression ast new cast expression newcastexpression type type type rewrite create string placeholder createstringplaceholder string ast node astnode simple type expression expression expression rewrite create move target createmovetarget return statement returnstatement get expression getexpression cast expression castexpression set type settype type cast expression castexpression set expression setexpression expression rewrite replace return statement returnstatement get expression getexpression cast expression castexpression position rewrite track type names add string positions add position position rewrite track expression names add positions add position string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append string foo object buf append string buf append buf append string expected buf to string tostring assert equal string assertequalstring preview expected assert correct tracking assertcorrecttracking names positions expected