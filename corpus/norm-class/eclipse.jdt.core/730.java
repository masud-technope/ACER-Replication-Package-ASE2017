copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests model org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i resource iresource org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime path org eclipse jdt core org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core tests util util org eclipse jdt internal core java element javaelement junit framework test root manipulations tests rootmanipulationstests modifying resource tests modifyingresourcetests root manipulations tests rootmanipulationstests string assert java project assertjavaproject string expected i java project ijavaproject project core exception coreexception string buffer stringbuffer buffer string buffer stringbuffer populate buffer project string actual buffer to string tostring expected equals actual system println util display string displaystring actual assert equals assertequals expected actual copy i package fragment root ipackagefragmentroot root i path ipath destination java model exception javamodelexception copy root destination copy i package fragment root ipackagefragmentroot root i path ipath destination i classpath entry iclasspathentry sibling java model exception javamodelexception root copy destination i resource iresource i package fragment root ipackagefragmentroot destination project classpath sibling delete i package fragment root ipackagefragmentroot root java model exception javamodelexception ensure indexing int erferring interferring deletion wait until indexes ready waituntilindexesready root delete i resource iresource i package fragment root ipackagefragmentroot originating project classpath i package fragment root ipackagefragmentroot ref erring referring projects classpath move i package fragment root ipackagefragmentroot root i path ipath destination java model exception javamodelexception move root destination move i package fragment root ipackagefragmentroot root i path ipath destination i classpath entry iclasspathentry sibling java model exception javamodelexception ensure indexing int erferring interferring move wait until indexes ready waituntilindexesready root move destination i resource iresource i package fragment root ipackagefragmentroot destination project classpath i package fragment root ipackagefragmentroot originating project classpath i package fragment root ipackagefragmentroot ref erring referring projects classpath sibling populate string buffer stringbuffer buffer i java element ijavaelement element indent core exception coreexception element i parent iparent element i openable iopenable buffer length buffer append indent buffer append buffer append java element javaelement element to debug string todebugstring i parent iparent parent i parent iparent element i java element ijavaelement children children parent get children getchildren java model exception javamodelexception children length children length length populate buffer children indent object non java resources nonjavaresources element i java project ijavaproject non java resources nonjavaresources i java project ijavaproject element get non java resources getnonjavaresources element i package fragment root ipackagefragmentroot non java resources nonjavaresources i package fragment root ipackagefragmentroot element get non java resources getnonjavaresources element i package fragment ipackagefragment non java resources nonjavaresources i package fragment ipackagefragment element get non java resources getnonjavaresources java model exception javamodelexception non java resources nonjavaresources length non java resources nonjavaresources length length populate buffer non java resources nonjavaresources indent populate string buffer stringbuffer buffer object non java resource nonjavaresource indent buffer length buffer append indent buffer append buffer append non java resource nonjavaresource non java resource nonjavaresource i container icontainer i resource iresource members i container icontainer non java resource nonjavaresource members length members length length populate buffer members indent test suite build model test suite buildmodeltestsuite root manipulations tests rootmanipulationstests ensure simple copy source root project triggers delta model test copy source folder testcopysourcefolder core exception coreexception create java project createjavaproject string src bin create java project createjavaproject string bin create folder createfolder src create file createfile src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas copy root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src resource delta resourcedelta classpath i compilation unit icompilationunit get compilation unit getcompilationunit src java assert true asserttrue destination exist exists stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure coping renaming source root project triggers delta model test copy source folder testcopysourcefolder core exception coreexception create java project createjavaproject string src bin create java project createjavaproject string bin create folder createfolder src create file createfile src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas copy root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src resource delta resourcedelta classpath i compilation unit icompilationunit get compilation unit getcompilationunit src java assert true asserttrue destination exist exists stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure coping source root project triggers delta doesn copy nested source folder test copy source folder testcopysourcefolder core exception coreexception i java project ijavaproject create java project createjavaproject string bin set raw classpath setrawclasspath create classpath createclasspath string src src src src inclusion exclusion create java project createjavaproject string bin create folder createfolder src create file createfile src java create folder createfolder src src create file createfile src src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas copy root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src resource delta resourcedelta classpath i compilation unit icompilationunit get compilation unit getcompilationunit src java assert true asserttrue destination exist exists get compilation unit getcompilationunit src src java assert true asserttrue nested exist exists stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure copying source root project sibling classpath entry triggers delta model test copy source folder testcopysourcefolder core exception coreexception create java project createjavaproject string src bin i java project ijavaproject create java project createjavaproject string src src bin i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src insert i classpath entry iclasspathentry sibling java core javacore new source entry newsourceentry path src start deltas startdeltas copy root path src sibling assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src src reordered src reordered resource delta resourcedelta classpath assert elements equal assertelementsequal unexpected roots insertion src src src get package fragment roots getpackagefragmentroots insert middle sibling java core javacore new source entry newsourceentry path src start deltas startdeltas copy root path src sibling assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src reordered src resource delta resourcedelta classpath assert elements equal assertelementsequal unexpected roots insertion middle src src src src get package fragment roots getpackagefragmentroots insert start deltas startdeltas copy root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src resource delta resourcedelta classpath assert elements equal assertelementsequal unexpected roots insertion src src src src src get package fragment roots getpackagefragmentroots stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure coping source root project existing source root replace mode triggers delta model regression test bug i package fragment root ipackagefragmentroot move ignores force flag test copy source folder testcopysourcefolder core exception coreexception create java project createjavaproject string src bin i java project ijavaproject create java project createjavaproject string src bin create folder createfolder src create file createfile src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas root copy path src i resource iresource i package fragment root ipackagefragmentroot replace assert deltas assertdeltas unexpected delta children src children assert java project assertjavaproject src java classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure coping renaming source root project replace mode triggers delta model regression test bug i package fragment root ipackagefragmentroot copy removes source folders classpath test copy source folder testcopysourcefolder core exception coreexception i java project ijavaproject project create java project createjavaproject string src bin create folder createfolder src create file createfile src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas root copy path src i resource iresource history i package fragment root ipackagefragmentroot replace i package fragment root ipackagefragmentroot destination project classpath assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src resource delta resourcedelta classpath assert java project assertjavaproject src java src java classpath project project stop deltas stopdeltas delete project deleteproject ensure coping source root project existing source root replace mode java model exception javamodelexception regression test bug i package fragment root ipackagefragmentroot move ignores force flag test fail copy source folder testfailcopysourcefolder core exception coreexception create java project createjavaproject string src bin create java project createjavaproject string src bin i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src root copy path src i resource iresource i package fragment root ipackagefragmentroot destination project classpath java model exception javamodelexception assert equals assertequals src exists target get message getmessage assert true asserttrue java model exception javamodelexception delete project deleteproject delete project deleteproject ensure coping source root project existing source root replace mode java model exception javamodelexception regression test bug i package fragment root ipackagefragmentroot move ignores force flag test fail copy source folder testfailcopysourcefolder core exception coreexception create java project createjavaproject string src bin create java project createjavaproject string src bin delete folder deletefolder src i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src root copy path src i resource iresource i package fragment root ipackagefragmentroot destination project classpath java model exception javamodelexception assert equals assertequals src exists target get message getmessage assert true asserttrue java model exception javamodelexception delete project deleteproject delete project deleteproject ensure deleting jar fragment root triggers delta model test delete jar file testdeletejarfile core exception coreexception i java project ijavaproject project create java project createjavaproject string src string my lib mylib jar bin create file createfile my lib mylib jar i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot my lib mylib jar start deltas startdeltas delete root assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed my lib mylib jar resource delta resourcedelta classpath assert java project assertjavaproject src classpath project project stop deltas stopdeltas delete project deleteproject ensure deleting external jar fragment root triggers delta model regression test bug i package fragment root ipackagefragmentroot delete handle external jars test delete jar file testdeletejarfile core exception coreexception i java project ijavaproject project create java project createjavaproject string src string getexternaljclpathstring bin i package fragment root ipackagefragmentroot root project get package fragment root getpackagefragmentroot getexternaljclpathstring start deltas startdeltas delete root assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed getexternaljclpathstring removed classpath resource delta resourcedelta classpath assert java project assertjavaproject src classpath project project stop deltas stopdeltas delete project deleteproject ensure deleting jar file referenced projects triggers delta model test delete jar file testdeletejarfile core exception coreexception i java project ijavaproject create java project createjavaproject string src string my lib mylib jar bin create file createfile my lib mylib jar i java project ijavaproject create java project createjavaproject string src string my lib mylib jar bin i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot my lib mylib jar start deltas startdeltas delete root assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed my lib mylib jar resource delta resourcedelta classpath children content raw classpath changed resolved classpath changed my lib mylib jar resource delta resourcedelta classpath assert java project assertjavaproject src classpath project assert java project assertjavaproject src classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure simple delete source root triggers delta model test delete source folder testdeletesourcefolder core exception coreexception i java project ijavaproject project create java project createjavaproject string src bin create folder createfolder src create file createfile src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas delete root assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src resource delta resourcedelta classpath assert java project assertjavaproject classpath project project stop deltas stopdeltas delete project deleteproject ensure deleting source root triggers delta doesn delete nested source folder test delete source folder testdeletesourcefolder core exception coreexception i java project ijavaproject project create java project createjavaproject string bin project set raw classpath setrawclasspath create classpath createclasspath string src src src src inclusion exclusion i folder ifolder folder create folder createfolder src i file ifile file create file createfile src java create folder createfolder src src create file createfile src src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas delete root assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src removed classpath src src reordered resource delta resourcedelta classpath resource delta resourcedelta src assert java project assertjavaproject src src java classpath project src project assert true asserttrue original folder exist folder exists assert true asserttrue original file exist file exists stop deltas stopdeltas delete project deleteproject ensure simple move source root project triggers delta model test move source folder testmovesourcefolder core exception coreexception i java project ijavaproject create java project createjavaproject string src bin i java project ijavaproject create java project createjavaproject string bin create folder createfolder src create file createfile src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas move root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src moved src resource delta resourcedelta classpath children content raw classpath changed resolved classpath changed src moved src resource delta resourcedelta classpath assert java project assertjavaproject classpath project assert java project assertjavaproject src java classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure moving renaming source root project triggers delta model test move source folder testmovesourcefolder core exception coreexception i java project ijavaproject create java project createjavaproject string src bin i java project ijavaproject create java project createjavaproject string bin create folder createfolder src create file createfile src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas move root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src moved src resource delta resourcedelta classpath children content raw classpath changed resolved classpath changed src moved src resource delta resourcedelta classpath assert java project assertjavaproject classpath project assert java project assertjavaproject src java classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure moving source root project triggers delta doesn move nested source folder test move source folder testmovesourcefolder core exception coreexception i java project ijavaproject create java project createjavaproject string bin set raw classpath setrawclasspath create classpath createclasspath string src src src src inclusion exclusion i java project ijavaproject create java project createjavaproject string bin create folder createfolder src create file createfile src java create folder createfolder src src create file createfile src src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas move root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src removed classpath src src reordered resource delta resourcedelta classpath resource delta resourcedelta src children content raw classpath changed resolved classpath changed src resource delta resourcedelta classpath assert java project assertjavaproject src src java classpath project src assert java project assertjavaproject src java classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure moving source root project root triggers delta model test move source folder testmovesourcefolder core exception coreexception i java project ijavaproject create java project createjavaproject string src bin i java project ijavaproject create java project createjavaproject string src src bin i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src insert i classpath entry iclasspathentry sibling java core javacore new source entry newsourceentry path src start deltas startdeltas move root path src sibling assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src moved src resource delta resourcedelta classpath children content raw classpath changed resolved classpath changed src moved src src reordered src reordered resource delta resourcedelta classpath assert java project assertjavaproject classpath project assert java project assertjavaproject src src src classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure moving source root project middle existing roots triggers delta model test move source folder testmovesourcefolder core exception coreexception i java project ijavaproject create java project createjavaproject string src bin i java project ijavaproject create java project createjavaproject string src src bin i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src insert middle i classpath entry iclasspathentry sibling java core javacore new source entry newsourceentry path src start deltas startdeltas move root path src sibling assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src moved src resource delta resourcedelta classpath children content raw classpath changed resolved classpath changed src moved src src reordered resource delta resourcedelta classpath assert java project assertjavaproject classpath project assert java project assertjavaproject src src src classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure moving source root project classpath triggers delta model test move source folder testmovesourcefolder core exception coreexception i java project ijavaproject create java project createjavaproject string src bin i java project ijavaproject create java project createjavaproject string src src bin i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src insert start deltas startdeltas move root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src moved src resource delta resourcedelta classpath children content raw classpath changed resolved classpath changed src moved src resource delta resourcedelta classpath assert java project assertjavaproject classpath project assert java project assertjavaproject src src src classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure simple rename source root triggers delta model test rename source folder testrenamesourcefolder core exception coreexception i java project ijavaproject project create java project createjavaproject string src bin create folder createfolder src create file createfile src java i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas move root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed src moved src src moved src resource delta resourcedelta classpath assert java project assertjavaproject src java classpath project project stop deltas stopdeltas delete project deleteproject ensure renaming nested source root doesn java model exception javamodelexception regression test bug refactoring rename source folder sourcefolder fails jme test rename source folder testrenamesourcefolder core exception coreexception create java project createjavaproject edit file editfile classpath xml version encoding utf classpath class path entry classpathentry excluding src kind src path class path entry classpathentry kind src path src classpath create folder createfolder src i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas move root path src assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed project root classpath removed classpath src moved src src moved src resource delta resourcedelta classpath stop deltas stopdeltas delete project deleteproject ensure renaming nested source root doesn java model exception javamodelexception regression test bug refactoring rename source folder sourcefolder fails jme test rename source folder testrenamesourcefolder core exception coreexception create java project createjavaproject edit file editfile classpath xml version encoding utf classpath class path entry classpathentry excluding src kind src path class path entry classpathentry kind src path src classpath create folder createfolder src i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas move root path src assert deltas assertdeltas unexpected delta children project root children src moved src src moved src project root stop deltas stopdeltas delete project deleteproject ensure renaming source root roots order triggers delta model test rename source folder testrenamesourcefolder core exception coreexception i java project ijavaproject project create java project createjavaproject string src src src bin rename src i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot src start deltas startdeltas move root path src assert deltas assertdeltas unexpected delta renaming src children content raw classpath changed resolved classpath changed src moved src src moved src resource delta resourcedelta classpath assert java project assertjavaproject src src src classpath project project rename src root get package fragment root getpackagefragmentroot src clear deltas cleardeltas move root path src assert deltas assertdeltas unexpected delta renaming src children content raw classpath changed resolved classpath changed src moved src src moved src resource delta resourcedelta classpath assert java project assertjavaproject src src src classpath project project rename src root get package fragment root getpackagefragmentroot src clear deltas cleardeltas move root path src assert deltas assertdeltas unexpected delta renaming src children content raw classpath changed resolved classpath changed src moved src src moved src resource delta resourcedelta classpath assert java project assertjavaproject src src src classpath project project stop deltas stopdeltas delete project deleteproject ensure simple rename jar file triggers delta model test rename jar file testrenamejarfile core exception coreexception i java project ijavaproject project create java project createjavaproject string src string my lib mylib jar bin create file createfile my lib mylib jar i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot my lib mylib jar start deltas startdeltas move root path my lib mylib jar assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed my lib mylib jar moved my lib mylib jar my lib mylib jar moved my lib mylib jar resource delta resourcedelta classpath assert java project assertjavaproject src my lib mylib jar classpath project project stop deltas stopdeltas delete project deleteproject ensure renaming jar file referenced projects triggers delta model test rename jar file testrenamejarfile core exception coreexception i java project ijavaproject create java project createjavaproject string src string my lib mylib jar bin create file createfile my lib mylib jar i java project ijavaproject create java project createjavaproject string src string my lib mylib jar bin i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot my lib mylib jar start deltas startdeltas move root path my lib mylib jar assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed my lib mylib jar moved my lib mylib jar my lib mylib jar moved my lib mylib jar resource delta resourcedelta classpath children content raw classpath changed resolved classpath changed my lib mylib jar moved my lib mylib jar my lib mylib jar moved my lib mylib jar resource delta resourcedelta classpath assert java project assertjavaproject src my lib mylib jar classpath project assert java project assertjavaproject src my lib mylib jar classpath project stop deltas stopdeltas delete project deleteproject delete project deleteproject ensure renaming jar file existing file replace mode triggers delta model test rename jar file testrenamejarfile core exception coreexception i java project ijavaproject project create java project createjavaproject string src string my lib mylib jar my lib mylib jar bin create file createfile my lib mylib jar create file createfile my lib mylib jar i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot my lib mylib jar start deltas startdeltas root move path my lib mylib jar i resource iresource i package fragment root ipackagefragmentroot originating project classpath i package fragment root ipackagefragmentroot destination project classpath i package fragment root ipackagefragmentroot replace assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed my lib mylib jar moved my lib mylib jar my lib mylib jar content reordered archive content changed resource delta resourcedelta classpath assert java project assertjavaproject src my lib mylib jar classpath project project stop deltas stopdeltas delete project deleteproject