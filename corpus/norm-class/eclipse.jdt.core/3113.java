copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors ibm corporation initial api implementation nick teryaev bug https bugs eclipse org bugs bug cgi org eclipse jdt internal compiler ast org eclipse jdt internal compiler ast visitor astvisitor org eclipse jdt internal compiler impl org eclipse jdt internal compiler codegen org eclipse jdt internal compiler flow org eclipse jdt internal compiler lookup org eclipse jdt internal compiler problem problem severities problemseverities cast expression castexpression expression expression expression expression type assignment conversion expected type string string type binding typebinding expected type expectedtype expression implicit conversion implicitconversion holds base type basetype casting cast expression castexpression expression expression expression type expression expression type type fact expression start start field expression type reference typereference name reference namereference expression invalid type type reference typereference flag is type reference istypereference type name reference namereference flag is name reference isnamereference flag is expression isexpression flow info flowinfo analyse code analysecode block scope blockscope current scope currentscope flow context flowcontext flow context flowcontext flow info flowinfo flow info flowinfo expression analyse code analysecode current scope currentscope flow context flowcontext flow info flowinfo unconditional inits unconditionalinits casting enclosing instance considered removing bind type check need for enclosing instance cast checkneedforenclosinginstancecast block scope blockscope scope expression enclosing instance enclosinginstance type binding typebinding enclosing instance type enclosinginstancetype type binding typebinding member type membertype scope environment options get severity getseverity compiler options compileroptions unnecessary type check unnecessarytypecheck problem severities problemseverities ignore type binding typebinding casted expression type castedexpressiontype cast expression castexpression enclosing instance enclosinginstance expression resolved type resolvedtype casted expression type castedexpressiontype obvious identity casted expression type castedexpressiontype enclosing instance type enclosinginstancetype scope problem reporter problemreporter unnecessary cast unnecessarycast cast expression castexpression enclosing instance enclosinginstance casted expression type castedexpressiontype null binding nullbinding tolerate enclosing instance type binding typebinding alternate enclosing instance type alternateenclosinginstancetype casted expression type castedexpressiontype error casted expression type castedexpressiontype is base type isbasetype casted expression type castedexpressiontype is array type isarraytype member type membertype scope get member type getmembertype member type membertype source name sourcename reference binding referencebinding alternate enclosing instance type alternateenclosinginstancetype scope problem reporter problemreporter unnecessary cast unnecessarycast cast expression castexpression enclosing instance enclosinginstance complain identity type casts check need for argument cast checkneedforargumentcast block scope blockscope scope operator signature operatorsignature expression expression expression type id expressiontypeid scope environment options get severity getseverity compiler options compileroptions unnecessary type check unnecessarytypecheck problem severities problemseverities ignore check left operand alternate left type id alternatelefttypeid expression type id expressiontypeid expression bits unnecessary cast mask unnecessarycastmask expression resolved type resolvedtype is base type isbasetype narrowing conversion base type change type binding typebinding alternate left type alternatelefttype cast expression castexpression expression expression resolved type resolvedtype alternate left type alternatelefttype obvious identity alternate left type id alternatelefttypeid alternate left type alternatelefttype expression type id expressiontypeid scope problem reporter problemreporter unnecessary cast unnecessarycast cast expression castexpression expression alternate left type id alternatelefttypeid tolerate argument alternate left type id alternatelefttypeid expression type id expressiontypeid tolerate widening unary expressions combined binary expressions alternate operator signature alternateoperatorsignature operator expression operatorexpression operator signatures operatorsignatures alternate left type id alternatelefttypeid alternate left type id alternatelefttypeid left result comparemask mask hiding compile time types operator signature operatorsignature comparemask alternate operator signature alternateoperatorsignature comparemask pro motions promotions result scope problem reporter problemreporter unnecessary cast for argument unnecessarycastforargument cast expression castexpression expression type binding typebinding well known type wellknowntype scope expression implicit conversion implicitconversion expressions considered removing bind method fine grain analysis casted argument basis simply separate widening narrowing check need for argument c asts checkneedforargumentcasts block scope blockscope scope expression receiver type binding typebinding receiver type receivertype method binding methodbinding binding expression arguments type binding typebinding argument types argumenttypes invocation site invocationsite invocation site invocationsite scope environment options get severity getseverity compiler options compileroptions unnecessary type check unnecessarytypecheck problem severities problemseverities ignore length argument types argumenttypes length iter ate iterate arguments retrieve original argument types type binding typebinding raw argument types rawargumenttypes argument types argumenttypes length expression argument arguments argument cast expression castexpression narrowing conversion base type change argument bits unnecessary cast mask unnecessarycastmask argument resolved type resolvedtype is base type isbasetype type binding typebinding casted expression type castedexpressiontype cast expression castexpression argument expression resolved type resolvedtype casted expression type castedexpressiontype obvious identity casted expression type castedexpressiontype argument types argumenttypes scope problem reporter problemreporter unnecessary cast unnecessarycast cast expression castexpression argument casted expression type castedexpressiontype null binding nullbinding tolerate argument raw argument types rawargumenttypes argument types argumenttypes system arraycopy raw argument types rawargumenttypes raw argument types rawargumenttypes type binding typebinding length length retain original argument type raw argument types rawargumenttypes casted expression type castedexpressiontype perform alternate lookup original types raw argument types rawargumenttypes argument types argumenttypes check alternate binding checkalternatebinding scope receiver receiver type receivertype binding arguments argument types argumenttypes raw argument types rawargumenttypes invocation site invocationsite check binary casted arguments check need for argument c asts checkneedforargumentcasts block scope blockscope scope operator signature operatorsignature expression left left type id lefttypeid left is cast leftiscast expression right type id righttypeid right is cast rightiscast scope environment options get severity getseverity compiler options compileroptions unnecessary type check unnecessarytypecheck problem severities problemseverities ignore check left operand alternate left type id alternatelefttypeid left type id lefttypeid left is cast leftiscast left bits unnecessary cast mask unnecessarycastmask left resolved type resolvedtype is base type isbasetype narrowing conversion base type change left is cast leftiscast type binding typebinding alternate left type alternatelefttype cast expression castexpression left expression resolved type resolvedtype alternate left type alternatelefttype obvious identity alternate left type id alternatelefttypeid alternate left type alternatelefttype left type id lefttypeid scope problem reporter problemreporter unnecessary cast unnecessarycast cast expression castexpression left left is cast leftiscast alternate left type id alternatelefttypeid tolerate argument alternate left type id alternatelefttypeid left type id lefttypeid left is cast leftiscast check operand alternate right type id alternaterighttypeid right type id righttypeid right is cast rightiscast bits unnecessary cast mask unnecessarycastmask resolved type resolvedtype is base type isbasetype narrowing conversion base type change right is cast rightiscast type binding typebinding alternate right type alternaterighttype cast expression castexpression expression resolved type resolvedtype alternate right type alternaterighttype obvious identity alternate right type id alternaterighttypeid alternate right type alternaterighttype right type id righttypeid scope problem reporter problemreporter unnecessary cast unnecessarycast cast expression castexpression right is cast rightiscast alternate right type id alternaterighttypeid tolerate argument alternate right type id alternaterighttypeid right type id righttypeid right is cast rightiscast left is cast leftiscast right is cast rightiscast convert string object object string alternate left type id alternatelefttypeid alternate right type id alternaterighttypeid alternate left type id alternatelefttypeid string alternate right type id alternaterighttypeid object alternate right type id alternaterighttypeid string alternate left type id alternatelefttypeid object invalid alternate operator signature alternateoperatorsignature operator expression operatorexpression operator signatures operatorsignatures alternate left type id alternatelefttypeid alternate right type id alternaterighttypeid left result mask hiding compile time types comparemask pro motions promotions result operator signature operatorsignature comparemask alternate operator signature alternateoperatorsignature comparemask left is cast leftiscast scope problem reporter problemreporter unnecessary cast for argument unnecessarycastforargument cast expression castexpression left type binding typebinding well known type wellknowntype scope left implicit conversion implicitconversion right is cast rightiscast scope problem reporter problemreporter unnecessary cast for argument unnecessarycastforargument cast expression castexpression type binding typebinding well known type wellknowntype scope implicit conversion implicitconversion check alternate binding checkalternatebinding block scope blockscope scope expression receiver type binding typebinding receiver type receivertype method binding methodbinding binding expression arguments type binding typebinding original argument types originalargumenttypes type binding typebinding alternate argument types alternateargumenttypes invocation site invocationsite invocation site invocationsite invocation site invocationsite fake invocation site fakeinvocationsite invocation site invocationsite type binding typebinding generic type arguments generictypearguments is super access issuperaccess invocation site invocationsite is super access issuperaccess is type access istypeaccess invocation site invocationsite is type access istypeaccess set actual receiver type setactualreceivertype reference binding referencebinding actual receiver type actualreceivertype ignore set depth setdepth ignore depth set field index setfieldindex ignore depth source start sourcestart source end sourceend method binding methodbinding binding if no cast bindingifnocast binding is constructor isconstructor binding if no cast bindingifnocast scope get constructor getconstructor reference binding referencebinding receiver type receivertype alternate argument types alternateargumenttypes fake invocation site fakeinvocationsite binding if no cast bindingifnocast receiver is implicit this isimplicitthis scope get implicit method getimplicitmethod binding selector alternate argument types alternateargumenttypes fake invocation site fakeinvocationsite scope get method getmethod receiver type receivertype binding selector alternate argument types alternateargumenttypes fake invocation site fakeinvocationsite binding if no cast bindingifnocast binding length original argument types originalargumenttypes length length original argument types originalargumenttypes alternate argument types alternateargumenttypes scope problem reporter problemreporter unnecessary cast for argument unnecessarycastforargument cast expression castexpression arguments binding parameters check unsafe cast checkunsafecast scope scope type binding typebinding cast type casttype type binding typebinding expression type expressiontype type binding typebinding match is narrowing isnarrowing match cast type casttype is narrowing isnarrowing tag as unnecessary cast tagasunnecessarycast scope cast type casttype cast type casttype is bound parameterized type isboundparameterizedtype cast type casttype is generic type isgenerictype match is provably distinct from isprovablydistinctfrom is narrowing isnarrowing expression type expressiontype cast type casttype report illegal cast reportillegalcast scope cast type casttype expression type expressiontype is narrowing isnarrowing expression type expressiontype is equivalent to isequivalentto match match is equivalent to isequivalentto cast type casttype scope problem reporter problemreporter unsafe cast unsafecast cast type casttype tag bits tagbits tag bits tagbits has wildcard haswildcard match is parameterized type isparameterizedtype match is generic type isgenerictype expression type expressiontype is raw type israwtype scope problem reporter problemreporter unsafe cast unsafecast is narrowing isnarrowing tag as unnecessary cast tagasunnecessarycast scope cast type casttype expression code generation param current scope currentscope org eclipse jdt internal compiler lookup block scope blockscope param code stream codestream org eclipse jdt internal compiler codegen code stream codestream param value required valuerequired generate code generatecode block scope blockscope current scope currentscope code stream codestream code stream codestream value required valuerequired code stream codestream position need runtime check cast needruntimecheckcast bits need runtime check cast k needruntimecheckcastmask constant notaconstant ivjcom winnt compiler omits casting check value required valuerequired need runtime check cast needruntimecheckcast code stream codestream generate constant generateconstant constant implicit conversion implicitconversion need runtime check cast needruntimecheckcast code stream codestream check cast checkcast resolved type resolvedtype value required valuerequired code stream codestream pop code stream codestream record positions from recordpositionsfrom source start sourcestart expression generate code generatecode current scope currentscope code stream codestream value required valuerequired need runtime check cast needruntimecheckcast need runtime check cast needruntimecheckcast code stream codestream check cast checkcast resolved type resolvedtype value required valuerequired code stream codestream pop value required valuerequired code stream codestream generate implicit conversion generateimplicitconversion implicit conversion implicitconversion code stream codestream record positions from recordpositionsfrom source start sourcestart expression inner most casted expression innermostcastedexpression expression current expression current cast expression castexpression current cast expression castexpression current expression current string buffer stringbuffer print expression printexpression indent string buffer stringbuffer output output append nls type print output append expression print expression printexpression output report illegal cast reportillegalcast scope scope type binding typebinding cast type casttype type binding typebinding expression type expressiontype scope problem reporter problemreporter type cast error typecasterror cast type casttype expression type expressiontype type binding typebinding resolve type resolvetype block scope blockscope scope compute constant effective fact expression start start field expression type reference typereference name reference namereference kind expression invalid constant constant notaconstant implicit conversion implicitconversion undefined type type reference typereference type name reference namereference extra parent hesis parenthesis type exp type bits ast node astnode parenthesizedmask ast node astnode parenthesizedshift resolved type resolvedtype type resolve type resolvetype scope needed method invocation expression set expected type setexpectedtype resolved type resolvedtype type binding typebinding expression type expressiontype expression resolve type resolvetype scope resolved type resolvedtype expression type expressiontype check cast types compatibility checkcasttypescompatibility scope resolved type resolvedtype expression type expressiontype expression expression compute conversion computeconversion scope resolved type resolvedtype expression type expressiontype bits unnecessary cast mask unnecessarycastmask bits ignore need for cast check k ignoreneedforcastcheckmask type inference used for generic method return type inference usedforgenericmethodreturntypeinference scope problem reporter problemreporter unnecessary cast unnecessarycast resolved type resolvedtype expression type binding typebinding expression type expressiontype expression resolve type resolvetype scope expression type expressiontype scope problem reporter problemreporter invalid type reference invalidtypereference type org eclipse jdt internal compiler ast expression set expected type setexpectedtype org eclipse jdt internal compiler lookup type binding typebinding set expected type setexpectedtype type binding typebinding expected type expectedtype expected type expectedtype expected type expectedtype determines app are nt apparent unnecessary was n wasn perform type inference method invocation used for generic method return type inference usedforgenericmethodreturntypeinference expression message send messagesend method binding methodbinding method message send messagesend expression binding method parameterized generic method binding parameterizedgenericmethodbinding parameterized generic method binding parameterizedgenericmethodbinding method inferred return type inferredreturntype expected type expectedtype resolved type resolvedtype expected type expectedtype org eclipse jdt internal compiler ast expression tag as need check cast tagasneedcheckcast tag as need check cast tagasneedcheckcast bits need runtime check cast k needruntimecheckcastmask org eclipse jdt internal compiler ast expression tag as unnecessary cast tagasunnecessarycast scope type binding typebinding tag as unnecessary cast tagasunnecessarycast scope scope type binding typebinding cast type casttype expression bound expression resolved type resolvedtype bits unnecessary cast mask unnecessarycastmask traverse ast visitor astvisitor visitor block scope blockscope block scope blockscope visitor visit block scope blockscope type traverse visitor block scope blockscope expression traverse visitor block scope blockscope visitor end visit endvisit block scope blockscope