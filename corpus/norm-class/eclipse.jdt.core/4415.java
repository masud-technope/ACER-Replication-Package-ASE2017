copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation alex blewitt alex blewitt yahoo https bugs eclipse org bugs bug cgi org eclipse jdt internal core java util array list arraylist java util collections java util comparator java util iterator java util list org eclipse jdt core i buffer ibuffer org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java model status ijavamodelstatus org eclipse jdt core i java model status constants ijavamodelstatusconstants org eclipse jdt core java model exception javamodelexception org eclipse jdt core compiler char operation charoperation org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom ast visitor astvisitor org eclipse jdt core dom abstract type declaration abstracttypedeclaration org eclipse jdt core dom annotation type declaration annotationtypedeclaration org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom enum constant declaration enumconstantdeclaration org eclipse jdt core dom enum declaration enumdeclaration org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt core util compilation unit sorter compilationunitsorter org eclipse jdt internal compiler impl compiler options compileroptions org eclipse jdt internal core util messages org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse text edits range marker rangemarker org eclipse text edits text edit textedit org eclipse text edits text edit group texteditgroup operation sort elements compilation unit criteria suppress warnings suppresswarnings rawtypes unchecked sort elements operation sortelementsoperation java model operation javamodeloperation nls string malformed nodes malformed comparator comparator positions api level apilevel constructor sort elements operation sortelementsoperation param level ast api level ast level constants param elements param positions param comparator sort elements operation sortelementsoperation level i java element ijavaelement elements positions comparator comparator elements comparator comparator positions positions api level apilevel level returns amount work main task operation progress reporting get main amount of work getmainamountofwork elements to process elementstoprocess length check malformed nodes checkmalformednodes ast node astnode node object property node get property getproperty malformed nodes property property boolean value booleanvalue is malformed ismalformed ast node astnode node node get flags getflags ast node astnode malformed org eclipse jdt internal core java model operation javamodeloperation execute operation executeoperation execute operation executeoperation java model exception javamodelexception begin task begintask messages operation sort elements sortelements get main amount of work getmainamountofwork compilation unit compilationunit copy compilation unit compilationunit elements to process elementstoprocess i compilation unit icompilationunit unit copy get primary getprimary i buffer ibuffer buffer copy get buffer getbuffer buffer buffer contents buffercontents buffer get char acters getcharacters string result process element processelement unit buffer contents buffercontents char operation charoperation equals result to char array tochararray buffer contents buffercontents copy get buffer getbuffer set contents setcontents result worked calculates required text edits sort code unit code param group edit sorting required text edit textedit calculate edit calculateedit org eclipse jdt core dom compilation unit compilationunit unit text edit group texteditgroup group java model exception javamodelexception elements to process elementstoprocess length java model exception javamodelexception java model status javamodelstatus i java model status constants ijavamodelstatusconstants elements process elements to process elementstoprocess i compilation unit icompilationunit java model exception javamodelexception java model status javamodelstatus i java model status constants ijavamodelstatusconstants invalid element types elements to process elementstoprocess begin task begintask messages operation sort elements sortelements get main amount of work getmainamountofwork i compilation unit icompilationunit i compilation unit icompilationunit elements to process elementstoprocess string content get buffer getbuffer get contents getcontents ast rewrite astrewrite rewrite sort compilation unit sortcompilationunit unit group rewrite document document document content rewrite rewriteast document get java project getjavaproject get options getoptions method process element processelement param unit param source string process element processelement i compilation unit icompilationunit unit source document document document string source compiler options compileroptions options compiler options compileroptions unit get java project getjavaproject get options getoptions ast parser astparser parser ast parser astparser new parser newparser api level apilevel parser set compiler options setcompileroptions options get map getmap parser set source setsource source parser set kind setkind ast parser astparser compilation unit parser set resolve bindings setresolvebindings org eclipse jdt core dom compilation unit compilationunit ast org eclipse jdt core dom compilation unit compilationunit parser createast ast rewrite astrewrite rewriter sort compilation unit sortcompilationunit ast rewriter document text edit textedit edits rewriter rewriteast document unit get java project getjavaproject get options getoptions range marker rangemarker markers positions markers range marker rangemarker positions length max positions length max markers range marker rangemarker positions insert edits markers edits apply document text edit textedit update regions positions max markers length max positions markers get offset getoffset bad location exception badlocationexception document ast rewrite astrewrite sort compilation unit sortcompilationunit org eclipse jdt core dom compilation unit compilationunit ast text edit group texteditgroup group ast accept ast visitor astvisitor visit org eclipse jdt core dom compilation unit compilationunit compilation unit compilationunit list types compilation unit compilationunit types malformed nodes iterator iter types iterator iter has next hasnext abstract type declaration abstracttypedeclaration type declaration typedeclaration abstract type declaration abstracttypedeclaration iter type declaration typedeclaration set property setproperty compilation unit sorter compilationunitsorter relative order integer value of valueof type declaration typedeclaration get start position getstartposition malformed nodes value of valueof is malformed ismalformed type declaration typedeclaration compilation unit compilationunit set property setproperty malformed nodes malformed nodes visit annotation type declaration annotationtypedeclaration annotation type declaration annotationtypedeclaration list body declarations bodydeclarations annotation type declaration annotationtypedeclaration body declarations bodydeclarations malformed nodes iterator iter body declarations bodydeclarations iterator iter has next hasnext body declaration bodydeclaration body declaration bodydeclaration body declaration bodydeclaration iter body declaration bodydeclaration set property setproperty compilation unit sorter compilationunitsorter relative order integer value of valueof body declaration bodydeclaration get start position getstartposition malformed nodes value of valueof is malformed ismalformed body declaration bodydeclaration annotation type declaration annotationtypedeclaration set property setproperty malformed nodes malformed nodes visit anonymous class declaration anonymousclassdeclaration anonymous class declaration anonymousclassdeclaration list body declarations bodydeclarations anonymous class declaration anonymousclassdeclaration body declarations bodydeclarations malformed nodes iterator iter body declarations bodydeclarations iterator iter has next hasnext body declaration bodydeclaration body declaration bodydeclaration body declaration bodydeclaration iter body declaration bodydeclaration set property setproperty compilation unit sorter compilationunitsorter relative order integer value of valueof body declaration bodydeclaration get start position getstartposition malformed nodes value of valueof is malformed ismalformed body declaration bodydeclaration anonymous class declaration anonymousclassdeclaration set property setproperty malformed nodes malformed nodes visit type declaration typedeclaration type declaration typedeclaration list body declarations bodydeclarations type declaration typedeclaration body declarations bodydeclarations malformed nodes iterator iter body declarations bodydeclarations iterator iter has next hasnext body declaration bodydeclaration body declaration bodydeclaration body declaration bodydeclaration iter body declaration bodydeclaration set property setproperty compilation unit sorter compilationunitsorter relative order integer value of valueof body declaration bodydeclaration get start position getstartposition malformed nodes value of valueof is malformed ismalformed body declaration bodydeclaration type declaration typedeclaration set property setproperty malformed nodes malformed nodes visit enum declaration enumdeclaration enum declaration enumdeclaration list body declarations bodydeclarations enum declaration enumdeclaration body declarations bodydeclarations malformed nodes iterator iter body declarations bodydeclarations iterator iter has next hasnext body declaration bodydeclaration body declaration bodydeclaration body declaration bodydeclaration iter body declaration bodydeclaration set property setproperty compilation unit sorter compilationunitsorter relative order integer value of valueof body declaration bodydeclaration get start position getstartposition malformed nodes value of valueof is malformed ismalformed body declaration bodydeclaration list enum constants enumconstants enum declaration enumdeclaration enum constants enumconstants iterator iter enum constants enumconstants iterator iter has next hasnext enum constant declaration enumconstantdeclaration enum constant declaration enumconstantdeclaration enum constant declaration enumconstantdeclaration iter enum constant declaration enumconstantdeclaration set property setproperty compilation unit sorter compilationunitsorter relative order integer value of valueof enum constant declaration enumconstantdeclaration get start position getstartposition malformed nodes value of valueof is malformed ismalformed enum constant declaration enumconstantdeclaration enum declaration enumdeclaration set property setproperty malformed nodes malformed nodes ast rewrite astrewrite rewriter ast rewrite astrewrite create ast getast has changes haschanges ast accept ast visitor astvisitor sort elements sortelements list elements list rewrite listrewrite list rewrite listrewrite elements size list my copy mycopy array list arraylist my copy mycopy add all addall elements collections sort my copy mycopy sort elements operation sortelementsoperation comparator elements size ast node astnode old node oldnode ast node astnode elements ast node astnode new node newnode ast node astnode my copy mycopy old node oldnode new node newnode list rewrite listrewrite replace old node oldnode rewriter create move target createmovetarget new node newnode group has changes haschanges visit org eclipse jdt core dom compilation unit compilationunit compilation unit compilationunit check malformed nodes checkmalformednodes compilation unit compilationunit abort sorting current element sort elements sortelements compilation unit compilationunit types rewriter get list rewrite getlistrewrite compilation unit compilationunit org eclipse jdt core dom compilation unit compilationunit types property visit annotation type declaration annotationtypedeclaration annotation type declaration annotationtypedeclaration check malformed nodes checkmalformednodes annotation type declaration annotationtypedeclaration abort sorting current element sort elements sortelements annotation type declaration annotationtypedeclaration body declarations bodydeclarations rewriter get list rewrite getlistrewrite annotation type declaration annotationtypedeclaration annotation type declaration annotationtypedeclaration body declarations property visit anonymous class declaration anonymousclassdeclaration anonymous class declaration anonymousclassdeclaration check malformed nodes checkmalformednodes anonymous class declaration anonymousclassdeclaration abort sorting current element sort elements sortelements anonymous class declaration anonymousclassdeclaration body declarations bodydeclarations rewriter get list rewrite getlistrewrite anonymous class declaration anonymousclassdeclaration anonymous class declaration anonymousclassdeclaration body declarations property visit type declaration typedeclaration type declaration typedeclaration check malformed nodes checkmalformednodes type declaration typedeclaration abort sorting current element sort elements sortelements type declaration typedeclaration body declarations bodydeclarations rewriter get list rewrite getlistrewrite type declaration typedeclaration type declaration typedeclaration body declarations property visit enum declaration enumdeclaration enum declaration enumdeclaration check malformed nodes checkmalformednodes enum declaration enumdeclaration abort sorting current element sort elements sortelements enum declaration enumdeclaration body declarations bodydeclarations rewriter get list rewrite getlistrewrite enum declaration enumdeclaration enum declaration enumdeclaration body declarations property sort elements sortelements enum declaration enumdeclaration enum constants enumconstants rewriter get list rewrite getlistrewrite enum declaration enumdeclaration enum declaration enumdeclaration enum constants property has changes haschanges rewriter failures elements process compilation unit supplied operation code code invalid element types supplied elements instance i working copy iworkingcopy i java model status ijavamodelstatus i java model status ijavamodelstatus verify elements to process elementstoprocess length java model status javamodelstatus i java model status constants ijavamodelstatusconstants elements process elements to process elementstoprocess java model status javamodelstatus i java model status constants ijavamodelstatusconstants elements process elements to process elementstoprocess i compilation unit icompilationunit i compilation unit icompilationunit elements to process elementstoprocess is working copy isworkingcopy java model status javamodelstatus i java model status constants ijavamodelstatusconstants invalid element types elements to process elementstoprocess java model status javamodelstatus verified insert text edit textedit parent text edit textedit edit parent has children haschildren parent add child addchild edit text edit textedit children parent get children getchildren div e dive find parent children length text edit textedit child children covers child edit insert child edit moved edit covering children length text edit textedit child children covers edit child parent remove child removechild edit add child addchild child parent add child addchild edit covers text edit textedit this edit thisedit text edit textedit other edit otheredit this edit thisedit get length getlength this offset thisoffset this edit thisedit get offset getoffset this end thisend this edit thisedit get exclusive end getexclusiveend other edit otheredit get length getlength other offset otheroffset other edit otheredit get offset getoffset this offset thisoffset other offset otheroffset other offset otheroffset this end thisend other offset otheroffset other edit otheredit get offset getoffset other end otherend other edit otheredit get exclusive end getexclusiveend this offset thisoffset other offset otheroffset other end otherend this end thisend