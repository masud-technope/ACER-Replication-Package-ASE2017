copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contributions bug warning unboxing single name reference singlenamereference npe bug warning missing resources bug compiler compiler misidentifies variable bug compiler syntactic analysis field references bug compiler fup bug consolidate int eraction interaction unboxing npe deferred checking org eclipse jdt internal compiler ast org eclipse jdt internal compiler ast visitor astvisitor org eclipse jdt internal compiler impl org eclipse jdt internal compiler codegen org eclipse jdt internal compiler flow org eclipse jdt internal compiler lookup if statement ifstatement statement represents statement branches expression condition statement then statement thenstatement statement else statement elsestatement local variables table attributes then init state index theninitstateindex else init state index elseinitstateindex merged init state index mergedinitstateindex if statement ifstatement expression condition statement then statement thenstatement source start sourcestart source end sourceend condition condition then statement thenstatement then statement thenstatement remember empty statement then statement thenstatement empty statement emptystatement then statement thenstatement bits is useful empty statement isusefulemptystatement source start sourcestart source start sourcestart source end sourceend source end sourceend if statement ifstatement expression condition statement then statement thenstatement statement else statement elsestatement source start sourcestart source end sourceend condition condition then statement thenstatement then statement thenstatement remember empty statement then statement thenstatement empty statement emptystatement then statement thenstatement bits is useful empty statement isusefulemptystatement else statement elsestatement else statement elsestatement else statement elsestatement if statement ifstatement else statement elsestatement bits is else if statement iselseifstatement else statement elsestatement empty statement emptystatement else statement elsestatement bits is useful empty statement isusefulemptystatement source start sourcestart source start sourcestart source end sourceend source end sourceend flow info flowinfo analyse code analysecode block scope blockscope current scope currentscope flow context flowcontext flow context flowcontext flow info flowinfo flow info flowinfo process condition flow info flowinfo condition flow info conditionflowinfo condition analyse code analysecode current scope currentscope flow context flowcontext flow info flowinfo initial comp laint level initialcomplaintlevel flow info flowinfo reach mode reachmode flow info flowinfo unreachable statement complained fake reachable statement complained constant cst condition optimized boolean constant optimizedbooleanconstant condition checknpebyunboxing current scope currentscope flow context flowcontext flow info flowinfo is condition optimized true isconditionoptimizedtrue cst constant notaconstant cst boolean value booleanvalue is condition optimized false isconditionoptimizedfalse cst constant notaconstant cst boolean value booleanvalue flow context flowcontext conditional level conditionallevel process flow info flowinfo then flow info thenflowinfo condition flow info conditionflowinfo safe inits when true safeinitswhentrue is condition optimized false isconditionoptimizedfalse then flow info thenflowinfo set reach mode setreachmode flow info flowinfo unreachable dead flow info flowinfo else flow info elseflowinfo condition flow info conditionflowinfo inits when false initswhenfalse copy is condition optimized true isconditionoptimizedtrue else flow info elseflowinfo set reach mode setreachmode flow info flowinfo unreachable dead flow info flowinfo tag bits tagbits flow info flowinfo unreachable then flow info thenflowinfo tag bits tagbits flow info flowinfo unreachable mark block unreachable construct lies unreachable code bits ast node astnode is then statement unreachable isthenstatementunreachable flow info flowinfo tag bits tagbits flow info flowinfo unreachable else flow info elseflowinfo tag bits tagbits flow info flowinfo unreachable mark block unreachable construct lies unreachable code bits ast node astnode is else statement unreachable iselsestatementunreachable report dead code for known pattern reportdeadcodeforknownpattern is know dead code pattern isknowdeadcodepattern condition current scope currentscope compiler options compileroptions report dead code in trivial if statement reportdeadcodeintrivialifstatement then statement thenstatement save info code gen then init state index theninitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates then flow info thenflowinfo is condition optimized false isconditionoptimizedfalse bits ast node astnode is then statement unreachable isthenstatementunreachable report dead code for known pattern reportdeadcodeforknownpattern then statement thenstatement complain if unreachable complainifunreachable then flow info thenflowinfo current scope currentscope initial comp laint level initialcomplaintlevel coding pattern tolerated dead code analysis is know dead code pattern isknowdeadcodepattern bits ast node astnode is then statement unreachable isthenstatementunreachable then flow info thenflowinfo then statement thenstatement analyse code analysecode current scope currentscope flow context flowcontext then flow info thenflowinfo then statement thenstatement block flow context flowcontext expire null checked field info expirenullcheckedfieldinfo check condition expired flow context flowcontext expire null checked field info expirenullcheckedfieldinfo code gen opt imizing optimizing jump then flow info thenflowinfo tag bits tagbits flow info flowinfo unreachable dead bits ast node astnode then exit thenexit process else statement elsestatement signal clause unnecessarily nested tolerate code pattern then flow info thenflowinfo flow info flowinfo dead bits is else if statement iselseifstatement else statement elsestatement if statement ifstatement current scope currentscope problem reporter problemreporter unnecessary else unnecessaryelse else statement elsestatement save info code gen else init state index elseinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates else flow info elseflowinfo is condition optimized true isconditionoptimizedtrue bits ast node astnode is else statement unreachable iselsestatementunreachable report dead code for known pattern reportdeadcodeforknownpattern else statement elsestatement complain if unreachable complainifunreachable else flow info elseflowinfo current scope currentscope initial comp laint level initialcomplaintlevel coding pattern tolerated dead code analysis is know dead code pattern isknowdeadcodepattern bits ast node astnode is else statement unreachable iselsestatementunreachable else flow info elseflowinfo else statement elsestatement analyse code analysecode current scope currentscope flow context flowcontext else flow info elseflowinfo else statement elsestatement block flow context flowcontext expire null checked field info expirenullcheckedfieldinfo process auto closeable autocloseable resources closed branch current scope currentscope corr elate tracking vars if else correlatetrackingvarsifelse then flow info thenflowinfo else flow info elseflowinfo merge initial izations initializations flow info flowinfo merged info mergedinfo flow info flowinfo merged optimized branches if else mergedoptimizedbranchesifelse then flow info thenflowinfo is condition optimized true isconditionoptimizedtrue else flow info elseflowinfo is condition optimized false isconditionoptimizedfalse fake reachable flow info flowinfo report dead code for known pattern reportdeadcodeforknownpattern merged init state index mergedinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates merged info mergedinfo flow context flowcontext conditional level conditionallevel merged info mergedinfo code generation param current scope currentscope org eclipse jdt internal compiler lookup block scope blockscope param code stream codestream org eclipse jdt internal compiler codegen code stream codestream generate code generatecode block scope blockscope current scope currentscope code stream codestream code stream codestream bits is reachable isreachable code stream codestream position branch label branchlabel end if label endiflabel branch label branchlabel code stream codestream opt imizing optimizing code gen constant cst has then part hasthenpart cst condition optimized boolean constant optimizedbooleanconstant constant notaconstant cst boolean value booleanvalue then statement thenstatement then statement thenstatement is empty block isemptyblock has else part haselsepart cst constant notaconstant cst boolean value booleanvalue else statement elsestatement else statement elsestatement is empty block isemptyblock has then part hasthenpart branch label branchlabel false label falselabel generate condition needed cst constant notaconstant cst boolean value booleanvalue condition generate code generatecode current scope currentscope code stream codestream condition generate optimized boolean generateoptimizedboolean current scope currentscope code stream codestream has else part haselsepart false label falselabel branch label branchlabel code stream codestream end if label endiflabel cst constant notaconstant loose local variable initial izations initializations local variable attributes then init state index theninitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope then init state index theninitstateindex code stream codestream add definitely assigned variables adddefinitelyassignedvariables current scope currentscope then init state index theninitstateindex generate statement then statement thenstatement generate code generatecode current scope currentscope code stream codestream jump statement has else part haselsepart bits ast node astnode then exit thenexit then statement thenstatement branch chain to branchchainto end if label endiflabel position code stream codestream position code stream codestream end if label endiflabel pointing then statement thenstatement code stream codestream record positions from recordpositionsfrom position then statement thenstatement source end sourceend generate statement loose local variable initial izations initializations local variable attributes else init state index elseinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope else init state index elseinitstateindex code stream codestream add definitely assigned variables adddefinitelyassignedvariables current scope currentscope else init state index elseinitstateindex false label falselabel false label falselabel place else statement elsestatement generate code generatecode current scope currentscope code stream codestream has else part haselsepart generate condition needed cst constant notaconstant cst boolean value booleanvalue condition generate code generatecode current scope currentscope code stream codestream condition generate optimized boolean generateoptimizedboolean current scope currentscope code stream codestream end if label endiflabel cst constant notaconstant loose local variable initial izations initializations local variable attributes else init state index elseinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope else init state index elseinitstateindex code stream codestream add definitely assigned variables adddefinitelyassignedvariables current scope currentscope else init state index elseinitstateindex else statement elsestatement generate code generatecode current scope currentscope code stream codestream generate condition side effects condition generate code generatecode current scope currentscope code stream codestream code stream codestream record positions from recordpositionsfrom source start sourcestart loose local variable initial izations initializations local variable attributes merged init state index mergedinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope merged init state index mergedinitstateindex code stream codestream add definitely assigned variables adddefinitelyassignedvariables current scope currentscope merged init state index mergedinitstateindex end if label endiflabel place code stream codestream record positions from recordpositionsfrom source start sourcestart string buffer stringbuffer print statement printstatement indent string buffer stringbuffer output nls print indent printindent indent output append nls condition print expression printexpression output append then statement thenstatement print statement printstatement indent output else statement elsestatement output append print indent printindent indent output nls output append else statement elsestatement print statement printstatement indent output output resolve block scope blockscope scope type binding typebinding type condition resolve type expecting resolvetypeexpecting scope type binding typebinding condition compute conversion computeconversion scope type type then statement thenstatement then statement thenstatement resolve scope else statement elsestatement else statement elsestatement resolve scope traverse ast visitor astvisitor visitor block scope blockscope block scope blockscope visitor visit block scope blockscope condition traverse visitor block scope blockscope then statement thenstatement then statement thenstatement traverse visitor block scope blockscope else statement elsestatement else statement elsestatement traverse visitor block scope blockscope visitor end visit endvisit block scope blockscope override does not complete normally doesnotcompletenormally then statement thenstatement then statement thenstatement does not complete normally doesnotcompletenormally else statement elsestatement else statement elsestatement does not complete normally doesnotcompletenormally override completes by continue completesbycontinue then statement thenstatement then statement thenstatement completes by continue completesbycontinue else statement elsestatement else statement elsestatement completes by continue completesbycontinue