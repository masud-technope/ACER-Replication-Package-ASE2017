copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests dom java util array list arraylist java util hash map hashmap java util iterator java util list org eclipse jdt core i buffer ibuffer org eclipse jdt core i class file iclassfile org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core i problem requestor iproblemrequestor org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core working copy owner workingcopyowner org eclipse jdt core compiler i problem iproblem org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom ast requestor astrequestor org eclipse jdt core dom ast visitor astvisitor org eclipse jdt core dom anonymous class declaration anonymousclassdeclaration org eclipse jdt core dom array type arraytype org eclipse jdt core dom assignment org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom marker annotation markerannotation org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom normal annotation normalannotation org eclipse jdt core dom package declaration packagedeclaration org eclipse jdt core dom parameterized type parameterizedtype org eclipse jdt core dom qualified name qualifiedname org eclipse jdt core dom simple name simplename org eclipse jdt core dom simple type simpletype org eclipse jdt core dom single member annotation singlememberannotation org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom type declaration statement typedeclarationstatement org eclipse jdt core dom type parameter typeparameter org eclipse jdt core dom variable declaration fragment variabledeclarationfragment org eclipse jdt core dom wildcard type wildcardtype org eclipse jdt core tests model modifying resource tests modifyingresourcetests org eclipse jdt core tests util util org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler impl compiler options compileroptions org eclipse jdt internal core dom source range verifier sourcerangeverifier suppress warnings suppresswarnings rawtypes unchecked abstractasttests modifying resource tests modifyingresourcetests default marked node label provider options defaultmarkednodelabelprovideroptions deprecated deprecated code ast internal jls ast jls internal synonym deprecated constant ast jsl all eviate alleviate deprecation warnings deprecated ast internal jls ast jls internal synonym deprecated constant ast jsl all eviate alleviate deprecation warnings deprecated ast internal jls ast jls astinternaljls ast internal jls todo frederic field converting method argument test level testlevel ast internal jls abstractasttests string set up suite setupsuite exception set up suite setupsuite source range verifier sourcerangeverifier debug source range verifier sourcerangeverifier debug removes start markers source remembers positions marker info markerinfo string path string source string marker start start markerstartstart string marker start end markerstartend string marker end start markerendstart string marker end end markerendend ast starts aststarts ast ends astends marker info markerinfo string source source marker info markerinfo string path string source path source start marker info markerinfo string source string marker beginning markerbeginning string marker ending markerending string marker start markerstart string marker end markerend source marker beginning markerbeginning marker ending markerending marker start markerstart marker end markerend marker info markerinfo string path string source string marker beginning markerbeginning string marker ending markerending string marker start markerstart string marker end markerend path path source source marker start start markerstartstart marker beginning markerbeginning marker start markerstart marker start end markerstartend marker ending markerending marker end start markerendstart marker beginning markerbeginning marker end markerend marker end end markerendend marker ending markerending marker index markerindex source index of indexof marker start start markerstartstart marker index markerindex marker start end markerstartend marker index markerindex ast number astnumber source index of indexof marker start start markerstartstart marker start end markerstartend marker index markerindex marker index markerindex ast starts aststarts ast number astnumber ast ends astends ast number astnumber marker index markerindex set start and end setstartandend ast number astnumber marker index markerindex set start and end setstartandend indexofaststart ast start aststart indexofaststart ast start aststart indexofaststart ast start aststart from index fromindex from index fromindex length ast starts aststarts length length ast starts aststarts ast start aststart remove marker from source removemarkerfromsource string marker source index sourceindex ast number astnumber marker length markerlength marker length source source substring source index sourceindex concat source substring source index sourceindex marker length markerlength shift recorded positions ast number astnumber ast starts aststarts source index sourceindex ast starts aststarts marker length markerlength ast ends astends source index sourceindex ast ends astends marker length markerlength set start and end setstartandend marker index markerindex string marker number markernumber marker index markerindex marker number markernumber start marker index markerindex ast starts aststarts length marker number markernumber integer to string tostring marker index markerindex string marker start markerstart marker start start markerstartstart marker number markernumber marker start end markerstartend string marker end markerend marker end start markerendstart marker number markernumber marker end end markerendend start ast inclusive ast start aststart source index of indexof marker start markerstart ast starts aststarts marker index markerindex ast start aststart remove marker from source removemarkerfromsource marker start markerstart ast start aststart marker index markerindex ast exclusive ast end astend source index of indexof marker end markerend ast ends astends marker index markerindex ast end astend remove marker from source removemarkerfromsource marker end markerend ast end astend marker index markerindex binding requestor bindingrequestor ast requestor astrequestor hash map hashmap bindings hash map hashmap accept binding acceptbinding string binding key bindingkey i binding ibinding binding bindings binding key bindingkey binding i binding ibinding get bindings getbindings string binding keys bindingkeys length bindings size i binding ibinding result i binding ibinding length length result i binding ibinding bindings binding keys bindingkeys result ast result astresult marked ast output string result source marker string source ast result astresult string result string source result result source source assertastnodeequals string expected ast node astnode node string actual node to string tostring expected equals actual system println display string displaystring actual assert equals assertequals unexpected ast node expected actual assertastnodesequal string expected list nodes string buffer stringbuffer buffer string buffer stringbuffer iterator iterator nodes iterator iterator has next hasnext ast node astnode node ast node astnode iterator buffer append node node compilation unit compilationunit i problem iproblem problems compilation unit compilationunit node get problems getproblems problems length problems length length i problem iproblem problem problems buffer append buffer append problem buffer append string actual buffer to string tostring expected equals actual system println display string displaystring actual assert equals assertequals unexpected ast nodes expected actual assert binding key equals assertbindingkeyequals string expected string actual assert binding keys equal assertbindingkeysequal expected string actual assert binding keys equal assertbindingkeysequal string expected string actual keys actualkeys string buffer stringbuffer buffer string buffer stringbuffer length actual keys actualkeys length length buffer append buffer append actual keys actualkeys string actual buffer to string tostring expected equals actual system print display string displaystring actual system println assert equals assertequals unexpected binding expected actual assert binding equals assertbindingequals string expected i binding ibinding binding assert bindings equal assertbindingsequal expected i binding ibinding binding assert bindings equal assertbindingsequal string expected i binding ibinding actual bindings actualbindings assert bindings equal assertbindingsequal unexpected bindings expected actual bindings actualbindings assert bindings equal assertbindingsequal string message string expected i binding ibinding actual bindings actualbindings string buffer stringbuffer buffer string buffer stringbuffer length actual bindings actualbindings length length buffer append actual bindings actualbindings buffer append buffer append actual bindings actualbindings get key getkey string actual buffer to string tostring expected equals actual system print display string displaystring actual system println assert equals assertequals message expected actual assertastresult string expected ast result astresult actual java model exception javamodelexception expected equals actual result system println system println actual source system println util display string displaystring actual result assert equals assertequals expected actual result todo frederic replace ast parser astparser creation calling method ast parser astparser createastparser ast parser astparser parser ast parser astparser new parser newparser test level testlevel parser builds ast info source assumed source attached file returns ast node delimited ast start aststart ast end astend marker info ast node astnode buildast marker info markerinfo marker info markerinfo i class file iclassfile class file classfile report errors reporterrors java model exception javamodelexception ast parser astparser parser ast parser astparser new parser newparser ast internal jls parser set source setsource class file classfile parser set resolve bindings setresolvebindings compilation unit compilationunit unit compilation unit compilationunit parser createast report errors reporterrors string buffer stringbuffer buffer string buffer stringbuffer i problem iproblem problems unit get problems getproblems length problems length length util append problem appendproblem buffer problems marker info markerinfo source to char array tochararray buffer length assert equals assertequals unexpected errors buffer to string tostring find node findnode unit marker info markerinfo ast node astnode buildast i compilation unit icompilationunit java model exception javamodelexception buildast existing contents report errors ast node astnode buildast string new contents newcontents i compilation unit icompilationunit java model exception javamodelexception buildast new contents newcontents report errors ast node astnode buildast marker info markerinfo marker info markerinfo i class file iclassfile class file classfile java model exception javamodelexception buildast marker info markerinfo class file classfile report errors removes marker comments start contents builds ast source returns ast node delimited start ast node astnode buildast string new contents newcontents i compilation unit icompilationunit report errors reporterrors java model exception javamodelexception buildast new contents newcontents report errors reporterrors statement recovery ast node astnode buildast jls level jlslevel string new contents newcontents i compilation unit icompilationunit report errors reporterrors enable statement recovery enablestatementrecovery binding recovery bindingrecovery java model exception javamodelexception ast node astnode nodes buildasts jls level jlslevel new contents newcontents report errors reporterrors enable statement recovery enablestatementrecovery binding recovery bindingrecovery nodes length nodes ast node astnode buildast string new contents newcontents i compilation unit icompilationunit report errors reporterrors enable statement recovery enablestatementrecovery binding recovery bindingrecovery java model exception javamodelexception ast node astnode nodes buildasts new contents newcontents report errors reporterrors enable statement recovery enablestatementrecovery binding recovery bindingrecovery nodes length nodes ast node astnode buildast string new contents newcontents i compilation unit icompilationunit report errors reporterrors enable statement recovery enablestatementrecovery java model exception javamodelexception ast node astnode nodes buildasts new contents newcontents report errors reporterrors enable statement recovery enablestatementrecovery nodes length nodes ast node astnode buildast string new contents newcontents i compilation unit icompilationunit flags java model exception javamodelexception ast node astnode nodes buildasts new contents newcontents flags nodes length nodes ast node astnode buildasts string new contents newcontents i compilation unit icompilationunit flags java model exception javamodelexception marker info markerinfo marker info markerinfo new contents newcontents marker info markerinfo marker info markerinfo get source getsource marker info markerinfo marker info markerinfo new contents newcontents new contents newcontents marker info markerinfo source compilation unit compilationunit unit is working copy isworkingcopy get buffer getbuffer set contents setcontents new contents newcontents unit reconcile ast internal jls flags i buffer ibuffer buffer get buffer getbuffer buffer set contents setcontents new contents newcontents buffer save ast parser astparser parser ast parser astparser new parser newparser ast internal jls parser set source setsource parser set resolve bindings setresolvebindings parser set statements recovery setstatementsrecovery flags i compilation unit icompilationunit enable statements recovery unit compilation unit compilationunit parser createast flags i compilation unit icompilationunit force problem detection string buffer stringbuffer buffer string buffer stringbuffer i problem iproblem problems unit get problems getproblems length problems length length util append problem appendproblem buffer problems new contents newcontents to char array tochararray buffer length assert equals assertequals unexpected errors buffer to string tostring ast node astnode nodes find nodes findnodes unit marker info markerinfo nodes length ast node astnode unit nodes ast node astnode buildasts string contents i compilation unit icompilationunit java model exception javamodelexception buildasts contents removes marker comments start contents empty number current contents contents builds ast source pairs returns ast node delimited start ast node astnode buildasts string new contents newcontents i compilation unit icompilationunit report errors reporterrors java model exception javamodelexception buildasts new contents newcontents report errors reporterrors ast node astnode buildasts jls level jlslevel string new contents newcontents i compilation unit icompilationunit report errors reporterrors enable statement recovery enablestatementrecovery binding recovery bindingrecovery java model exception javamodelexception marker info markerinfo marker info markerinfo new contents newcontents marker info markerinfo marker info markerinfo get source getsource marker info markerinfo marker info markerinfo new contents newcontents new contents newcontents marker info markerinfo source compilation unit compilationunit unit is working copy isworkingcopy get buffer getbuffer set contents setcontents new contents newcontents flags report errors reporterrors flags i compilation unit icompilationunit force problem detection enable statement recovery enablestatementrecovery flags i compilation unit icompilationunit enable statements recovery binding recovery bindingrecovery flags i compilation unit icompilationunit enable bindings recovery unit reconcile jls level jlslevel flags i buffer ibuffer buffer get buffer getbuffer buffer set contents setcontents new contents newcontents buffer save ast parser astparser parser ast parser astparser new parser newparser jls level jlslevel parser set source setsource parser set resolve bindings setresolvebindings parser set statements recovery setstatementsrecovery enable statement recovery enablestatementrecovery parser set bindings recovery setbindingsrecovery binding recovery bindingrecovery unit compilation unit compilationunit parser createast report errors reporterrors string buffer stringbuffer buffer string buffer stringbuffer i problem iproblem problems unit get problems getproblems length problems length length util append problem appendproblem buffer problems new contents newcontents to char array tochararray buffer length assert equals assertequals unexpected errors buffer to string tostring ast node astnode nodes find nodes findnodes unit marker info markerinfo nodes length ast node astnode unit nodes ast node astnode buildasts string new contents newcontents i compilation unit icompilationunit report errors reporterrors enable statement recovery enablestatementrecovery binding recovery bindingrecovery java model exception javamodelexception string option get java project getjavaproject get option getoption java core javacore compiler compliance jdk level jdklevel compiler options compileroptions version t o jdk level versiontojdklevel option jls level jlslevel ast internal jls jdk level jdklevel class file constants classfileconstants jdk jls level jlslevel ast jls jdk level jdklevel class file constants classfileconstants jdk jls level jlslevel ast internal jls buildasts jls level jlslevel new contents newcontents report errors reporterrors enable statement recovery enablestatementrecovery binding recovery bindingrecovery ast result astresult buildmarkedast string path string content java model exception javamodelexception buildmarkedast path content enable statement recovery report ast report problems markedastflattener default marked node label provider defaultmarkednodelabelprovider options ast result astresult buildmarkedast string path string content enable statement recovery enablestatementrecovery reportast report problems reportproblems options java model exception javamodelexception buildmarkedast path content enable statement recovery enablestatementrecovery reportast report problems reportproblems markedastflattener default marked node label provider defaultmarkednodelabelprovider options removes marker comments contents empty number current contents contents builds ast source marked nodes ast result astresult buildmarkedast string path string content enable statement recovery enablestatementrecovery reportast report problems reportproblems markedastflattener default marked node label provider defaultmarkednodelabelprovider label provider labelprovider java model exception javamodelexception marker info markerinfo marker info markerinfo marker info markerinfo marker info markerinfo content content marker info markerinfo source i compilation unit icompilationunit compilation unit compilationunit get working copy getworkingcopy path content ast parser astparser parser createastparser parser set source setsource compilation unit compilationunit parser set resolve bindings setresolvebindings parser set working copy owner setworkingcopyowner wc owner wcowner parser set statements recovery setstatementsrecovery enable statement recovery enablestatementrecovery compilation unit compilationunit unit compilation unit compilationunit parser createast markedastflattener flattener markedastflattener reportast report problems reportproblems label provider labelprovider flattener process unit marker info markerinfo ast result astresult result ast result astresult flattener get result getresult marker info markerinfo source compilation unit compilationunit discard working copy discardworkingcopy result marker info markerinfo create marker infos createmarkerinfos string path and sources pathandsources marker info markerinfo marker infos markerinfos marker info markerinfo path and sources pathandsources length length path and sources pathandsources length length string path path and sources pathandsources string source path and sources pathandsources marker infos markerinfos marker info markerinfo path source marker infos markerinfos i variable binding ivariablebinding create variable bindings createvariablebindings string path and sources pathandsources string binding keys bindingkeys java model exception javamodelexception working copy owner workingcopyowner owner working copy owner workingcopyowner working copies workingcopies create working copies createworkingcopies path and sources pathandsources owner i binding ibinding bindings resolve bindings resolvebindings binding keys bindingkeys get java project getjavaproject owner length bindings length i variable binding ivariablebinding result i variable binding ivariablebinding length system arraycopy bindings result length result i method binding imethodbinding create method bindings createmethodbindings string path and sources pathandsources string binding keys bindingkeys java model exception javamodelexception create method bindings createmethodbindings path and sources pathandsources binding keys bindingkeys get java project getjavaproject i method binding imethodbinding create method bindings createmethodbindings string path and sources pathandsources string binding keys bindingkeys i java project ijavaproject project java model exception javamodelexception working copy owner workingcopyowner owner working copy owner workingcopyowner working copies workingcopies create working copies createworkingcopies path and sources pathandsources owner i binding ibinding bindings resolve bindings resolvebindings binding keys bindingkeys project owner length bindings length i method binding imethodbinding result i method binding imethodbinding length system arraycopy bindings result length result i type binding itypebinding create type bindings createtypebindings string path and sources pathandsources string binding keys bindingkeys java model exception javamodelexception create type bindings createtypebindings path and sources pathandsources binding keys bindingkeys get java project getjavaproject i type binding itypebinding create type bindings createtypebindings string path and sources pathandsources string binding keys bindingkeys i java project ijavaproject project java model exception javamodelexception working copy owner workingcopyowner owner working copy owner workingcopyowner working copies workingcopies create working copies createworkingcopies path and sources pathandsources owner i binding ibinding bindings resolve bindings resolvebindings binding keys bindingkeys project owner length bindings length i type binding itypebinding result i type binding itypebinding length system arraycopy bindings result length result i compilation unit icompilationunit create working copies createworkingcopies string path and sources pathandsources working copy owner workingcopyowner owner java model exception javamodelexception marker info markerinfo marker infos markerinfos create marker infos createmarkerinfos path and sources pathandsources create working copies createworkingcopies marker infos markerinfos owner i compilation unit icompilationunit create working copies createworkingcopies marker info markerinfo marker infos markerinfos working copy owner workingcopyowner owner java model exception javamodelexception length marker infos markerinfos length i compilation unit icompilationunit copies i compilation unit icompilationunit length length marker info markerinfo marker info markerinfo marker infos markerinfos i compilation unit icompilationunit working copy workingcopy get compilation unit getcompilationunit marker info markerinfo path get working copy getworkingcopy owner working copy workingcopy get buffer getbuffer set contents setcontents marker info markerinfo source working copy workingcopy make consistent makeconsistent copies working copy workingcopy copies ast node astnode find node findnode compilation unit compilationunit unit marker info markerinfo marker info markerinfo ast node astnode nodes find nodes findnodes unit marker info markerinfo nodes length unit nodes ast node astnode find nodes findnodes compilation unit compilationunit unit marker info markerinfo marker info markerinfo visitor ast visitor astvisitor array list arraylist array list arraylist pre visit previsit ast node astnode node node compilation unit compilationunit marker info markerinfo indexofaststart node get start position getstartposition node get start position getstartposition node get length getlength marker info markerinfo ast ends astends add node nodes start marker info markerinfo ast starts aststarts visitor visitor visitor unit accept visitor size visitor size ast node astnode result ast node astnode size visitor to array toarray result result create working copy owner problem requestor report problem param problem requestor problemrequestor requestor report problems created working copy owner working copy owner workingcopyowner new working copy owner newworkingcopyowner i problem requestor iproblemrequestor problem requestor problemrequestor working copy owner workingcopyowner i problem requestor iproblemrequestor get problem requestor getproblemrequestor i compilation unit icompilationunit unit problem requestor problemrequestor resolveasts i compilation unit icompilationunit cus string binding keys bindingkeys ast requestor astrequestor requestor i java project ijavaproject project working copy owner workingcopyowner owner ast parser astparser parser ast parser astparser new parser newparser ast internal jls parser set resolve bindings setresolvebindings parser set project setproject project parser set working copy owner setworkingcopyowner owner parser createasts cus binding keys bindingkeys requestor i binding ibinding resolve binding resolvebinding ast node astnode node node get node type getnodetype ast node astnode declaration package declaration packagedeclaration node resolve binding resolvebinding ast node astnode type declaration type declaration typedeclaration node resolve binding resolvebinding ast node astnode anonymous declaration anonymous class declaration anonymousclassdeclaration node resolve binding resolvebinding ast node astnode type declaration statement type declaration statement typedeclarationstatement node resolve binding resolvebinding ast node astnode method declaration method declaration methoddeclaration node resolve binding resolvebinding ast node astnode method invocation method invocation methodinvocation node resolve method binding resolvemethodbinding ast node astnode type parameter type parameter typeparameter node resolve binding resolvebinding ast node astnode parameterized type parameterized type parameterizedtype node resolve binding resolvebinding ast node astnode wildcard type wildcard type wildcardtype node resolve binding resolvebinding ast node astnode simple simple name simplename node resolve binding resolvebinding ast node astnode array type array type arraytype node resolve binding resolvebinding ast node astnode assignment assignment node get right hand side getrighthandside resolve type binding resolvetypebinding ast node astnode simple type simple type simpletype node resolve binding resolvebinding ast node astnode qualified qualified name qualifiedname node resolve binding resolvebinding ast node astnode marker annotation marker annotation markerannotation node resolve annotation binding resolveannotationbinding ast node astnode normal annotation normal annotation normalannotation node resolve annotation binding resolveannotationbinding ast node astnode single member annotation single member annotation singlememberannotation node resolve annotation binding resolveannotationbinding ast node astnode variable declaration fragment variable declaration fragment variabledeclarationfragment node resolve binding resolvebinding error implemented type node node i binding ibinding resolve bindings resolvebindings string binding keys bindingkeys i java project ijavaproject project working copy owner workingcopyowner owner binding requestor bindingrequestor requestor binding requestor bindingrequestor resolveasts i compilation unit icompilationunit binding keys bindingkeys requestor project owner requestor get bindings getbindings binding keys bindingkeys resolve bindings nodes marked start i binding ibinding resolve bindings resolvebindings string contents i compilation unit icompilationunit java model exception javamodelexception resolve bindings resolvebindings contents report errors resolve bindings nodes marked start i binding ibinding resolve bindings resolvebindings string contents i compilation unit icompilationunit report errors reporterrors java model exception javamodelexception ast node astnode nodes buildasts contents report errors reporterrors nodes length nodes length i binding ibinding result i binding ibinding length length result resolve binding resolvebinding nodes result ast node astnode buildast i class file iclassfile class file classfile java model exception javamodelexception string source class file classfile get source getsource marker info markerinfo marker info markerinfo marker info markerinfo source marker info markerinfo ast starts aststarts source index of indexof start start length marker info markerinfo ast ends astends source index of indexof ast node astnode node buildast marker info markerinfo class file classfile node tear down teardown exception discard working copies discardworkingcopies working copies workingcopies working copies workingcopies