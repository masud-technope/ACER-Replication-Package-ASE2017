copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors mkaufman bea initial api implementation het google bug clean compilation participant compilationparticipant build finished buildfinished apt compilation participant aptcompilationparticipant org eclipse jdt apt core internal java util collections java util hash map hashmap java util hash set hashset java util linked hash set linkedhashset java util map java util org eclipse core resources i file ifile org eclipse core resources i marker imarker org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core runtime core exception coreexception org eclipse jdt apt core internal util factory path factorypath org eclipse jdt apt core util apt config aptconfig org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core java core javacore org eclipse jdt core compiler build context buildcontext org eclipse jdt core compiler categorized problem categorizedproblem org eclipse jdt core compiler compilation participant compilationparticipant org eclipse jdt core compiler reconcile context reconcilecontext sun mirror apt annotation processor factory annotationprocessorfactory singleton object created callback org eclipse jdt core compilation participants compilationparticipants extension point apt compilation participant aptcompilationparticipant compilation participant compilationparticipant batch factories cla imed claimed annotation previous apt processing apply build generating types build apt rounding order preserving order determined invocation annotation processor factory annotationprocessorfactory previous rounds batch factories previousroundsbatchfactories linked hash set linkedhashset build round buildround is batch isbatch apt compilation participant aptcompilationparticipant instance apt compilation participant aptcompilationparticipant files processed apt current build files compiled compilation jdt perspective newly generated types apt process file build prevent unnecessary incorrect compilation processed files map i file ifile categorized problem categorizedproblem processed files processedfiles files generated java annotation processing current build stored order communicate java annotation processing phase runs java compilation java phase runs member reinitialized about to build abouttobuild cleared build complete buildcomplete impl ies implies files generated java processing build stored thread local hash set hashset i file ifile java generated files generatedfiles apt compilation participant aptcompilationparticipant get instance getinstance instance constructed indirectly registering extension org eclipse jdt core compilation participants compilationparticipants extension point clients construct object apt compilation participant aptcompilationparticipant is annotation processor isannotationprocessor build starting buildstarting build context buildcontext files is batch isbatch called build round buildround is batch isbatch is batch isbatch build finished buildfinished i java project ijavaproject project build complete buildcomplete process annotations processannotations build context buildcontext all files allfiles happen file building total all files allfiles all files allfiles length total i project iproject project all files allfiles get file getfile get project getproject i java project ijavaproject java project javaproject java core javacore create project don dispatch pre project legally annotations nls string java version javaversion java project javaproject get option getoption org eclipse jdt core compiler source pos sibility possibility nls nls equals java version javaversion equals java version javaversion is batch isbatch build round buildround annotation processor factory loader annotationprocessorfactoryloader get loader getloader reset batch processors resetbatchprocessors java project javaproject previous rounds batch factories previousroundsbatchfactories clear split list files annotations don exclude files processed anno file count annofilecount no anno file count noannofilecount total build context buildcontext all files allfiles build round buildround processed files processedfiles contains key containskey get file getfile processed file skip rep rocessing reprocessing assumption change report problems reported earlier jdt cleared categorized problem categorizedproblem problems processed files processedfiles get file getfile problems problems length record new problems recordnewproblems problems has annotations hasannotations anno file count annofilecount no anno file count noannofilecount dependencies int roduced introduced type creation anno file count annofilecount no anno file count noannofilecount build context buildcontext with annotation withannotation build context buildcontext without annotation withoutannotation anno file count annofilecount with annotation withannotation build context buildcontext anno file count annofilecount no anno file count noannofilecount without annotation withoutannotation build context buildcontext no anno file count noannofilecount with annotation withannotation array w index windex without annotation withoutannotation array wo index woindex total processed files processedfiles contains key containskey all files allfiles get file getfile all files allfiles has annotations hasannotations with annotation withannotation w index windex all files allfiles without annotation withoutannotation wo index woindex all files allfiles build context buildcontext file all files allfiles processed files processedfiles file get file getfile map annotation processor factory annotationprocessorfactory factory path factorypath attributes factories annotation processor factory loader annotationprocessorfactoryloader get loader getloader get java getjava factories and attributes for project factoriesandattributesforproject java project javaproject apt project aptproject apt project aptproject apt plugin aptplugin get apt project getaptproject java project javaproject annotation processor factory annotationprocessorfactory dispatched batch factories dispatchedbatchfactories apt dispatch runnable aptdispatchrunnable runaptduringbuild with annotation withannotation without annotation withoutannotation processed files processedfiles apt project aptproject factories previous rounds batch factories previousroundsbatchfactories is batch isbatch previous rounds batch factories previousroundsbatchfactories add all addall dispatched batch factories dispatchedbatchfactories build round buildround reconcile reconcile context reconcilecontext context i compilation unit icompilationunit working copy workingcopy context get working copy getworkingcopy working copy workingcopy i java project ijavaproject java project javaproject working copy workingcopy get java project getjavaproject java project javaproject apt config aptconfig should process during reconcile shouldprocessduringreconcile java project javaproject nls apt plugin aptplugin trace reconcile time processing disabled project java project javaproject get element name getelementname apt project aptproject apt project aptproject apt plugin aptplugin get apt project getaptproject java project javaproject map annotation processor factory annotationprocessorfactory factory path factorypath attributes factories annotation processor factory loader annotationprocessorfactoryloader get loader getloader get java getjava factories and attributes for project factoriesandattributesforproject java project javaproject apt dispatch runnable aptdispatchrunnable runaptduringreconcile context apt project aptproject factories clean starting cleanstarting i java project ijavaproject java project javaproject i project iproject java project javaproject get project getproject apt plugin aptplugin get apt project getaptproject java project javaproject project clean projectclean clear markers clean i marker imarker markers find markers findmarkers apt plugin aptplugin apt batch processor problem marker i resource iresource depth infinite markers i marker imarker marker markers marker delete core exception coreexception apt plugin aptplugin log unable delete batch annotation processor markers apt project processors factory path apt involved clean is active isactive i java project ijavaproject project apt config aptconfig is enabled isenabled project about to build abouttobuild i java project ijavaproject project apt config aptconfig is enabled isenabled project setup classpath generated source folder disk apt plugin aptplugin get apt project getaptproject project compilation started compilationstarted reset build round buildround note project build blow project processed files processed files processedfiles hash map hashmap java generated files generatedfiles hash set hashset todo wharley factory path full build compilation participant compilationparticipant ready build called java annotation processing phase register newly generated files java post compilation phase determining longer generated files delete list files discarded build add java addjava generated file generatedfile i file ifile file java generated files generatedfiles add file files generated build java processors meaningful context build reconcile unmodifiable empty i files ifiles i file ifile get java getjava generated files generatedfiles java generated files generatedfiles collections empty set emptyset collections unmodifiable set unmodifiableset java generated files generatedfiles build complete buildcomplete processed files processedfiles java generated files generatedfiles