copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors tyeung bea initial api implementation ibm corporation fixed https bugs eclipse org bugs bug cgi org eclipse jdt apt core internal util sun mirror declaration annotation mirror annotationmirror sun mirror declaration annotation value annotationvalue sun mirror declaration parameter declaration parameterdeclaration sun mirror type annotation type annotationtype sun mirror type array type arraytype sun mirror type class type classtype sun mirror type interface type interfacetype sun mirror type primitive type primitivetype sun mirror type type mirror typemirror java util array list arraylist java util collections java util list org eclipse core resources i file ifile org eclipse jdt apt core internal declaration org eclipse jdt apt core internal env base processor env baseprocessorenv org eclipse jdt apt core internal type array type impl arraytypeimpl org eclipse jdt apt core internal type error type errortype org eclipse jdt apt core internal type wildcard type impl wildcardtypeimpl org eclipse jdt core dom ast node astnode org eclipse jdt core dom annotation type member declaration annotationtypememberdeclaration org eclipse jdt core dom i annotation binding iannotationbinding org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom variable declaration fragment variabledeclarationfragment factory nls string binding null binding nullbinding auto boxing advantage caching dummy picked falls caching range dummy character dummy dummy dummy integer dummy integer dummy dummy type declaration impl typedeclarationimpl create reference type createreferencetype i type binding itypebinding binding base processor env baseprocessorenv env binding binding is null type isnulltype exist error type errortype declaration binding is recovered isrecovered type declaration impl typedeclarationimpl mirror binding is annotation isannotation mirror annotation declaration impl annotationdeclarationimpl binding env binding is interface isinterface mirror interface declaration impl interfacedeclarationimpl binding env test enum enum binding is enum isenum mirror enum declaration impl enumdeclarationimpl binding env binding is class isclass mirror class declaration impl classdeclarationimpl binding env nls illegal state exception illegalstateexception create type declaration binding mirror eclipse declaration impl eclipsedeclarationimpl create declaration createdeclaration i binding ibinding binding base processor env baseprocessorenv env binding binding get kind getkind i binding ibinding type i type binding itypebinding type binding typebinding i type binding itypebinding binding type binding typebinding is anonymous isanonymous type binding typebinding is array isarray type binding typebinding is wildcard type iswildcardtype type binding typebinding is primitive isprimitive nls illegal state exception illegalstateexception failed create declaration binding type binding typebinding is type variable istypevariable type parameter declaration impl typeparameterdeclarationimpl type binding typebinding env create reference type createreferencetype type binding typebinding env i binding ibinding variable i variable binding ivariablebinding var binding varbinding i variable binding ivariablebinding binding var binding varbinding is enum constant isenumconstant enum constant declaration impl enumconstantdeclarationimpl var binding varbinding env field declaration impl fielddeclarationimpl var binding varbinding env i binding ibinding method i method binding imethodbinding method i method binding imethodbinding binding method is constructor isconstructor constructor declaration impl constructordeclarationimpl method env i type binding itypebinding declaring type declaringtype method get declaring class getdeclaringclass declaring type declaringtype declaring type declaringtype is annotation isannotation annotation element declaration impl annotationelementdeclarationimpl method env method declaration impl methoddeclarationimpl method env i binding ibinding apt doesn nls illegal state exception illegalstateexception failed create declaration binding eclipse declaration impl eclipsedeclarationimpl create declaration createdeclaration ast node astnode node i file ifile file base processor env baseprocessorenv env node node get node type getnodetype ast node astnode single variable declaration source parameter declaration impl sourceparameterdeclarationimpl single variable declaration singlevariabledeclaration node file env ast node astnode variable declaration fragment ast based field declaration impl astbasedfielddeclarationimpl variable declaration fragment variabledeclarationfragment node file env ast node astnode method declaration org eclipse jdt core dom method declaration methoddeclaration method decl methoddecl org eclipse jdt core dom method declaration methoddeclaration node method decl methoddecl is constructor isconstructor ast based constructor declaration impl astbasedconstructordeclarationimpl method decl methoddecl file env ast based method declaration impl astbasedmethoddeclarationimpl method decl methoddecl file env ast node astnode annotation type member declaration ast based method declaration impl astbasedmethoddeclarationimpl annotation type member declaration annotationtypememberdeclaration node file env unsupported operation exception unsupportedoperationexception nls create mirror type node get class getclass get name getname eclipse mirror type eclipsemirrortype create type mirror createtypemirror i type binding itypebinding binding base processor env baseprocessorenv env binding binding is primitive isprimitive nls equals binding get name getname env get int type getinttype nls equals binding get name getname env get byte type getbytetype nls equals binding get name getname env get short type getshorttype nls equals binding get name getname env get char type getchartype nls equals binding get name getname env get long type getlongtype nls equals binding get name getname env get float type getfloattype nls equals binding get name getname env get double type getdoubletype nls equals binding get name getname env get boolean type getbooleantype nls equals binding get name getname env get void type getvoidtype nls illegal state exception illegalstateexception nls unrecognized primitive type binding binding is array isarray array type impl arraytypeimpl binding env binding is wildcard type iswildcardtype wildcard type impl wildcardtypeimpl binding env binding is type variable istypevariable type parameter declaration impl typeparameterdeclarationimpl binding env create reference type createreferencetype binding env parameter declaration parameterdeclaration create parameter declaration createparameterdeclaration single variable declaration singlevariabledeclaration param i file ifile file base processor env baseprocessorenv env source parameter declaration impl sourceparameterdeclarationimpl param file env parameter declaration parameterdeclaration create parameter declaration createparameterdeclaration executable declaration impl executabledeclarationimpl exec param index paramindex i type binding itypebinding type base processor env baseprocessorenv env binary parameter declaration impl binaryparameterdeclarationimpl exec type param index paramindex env param annotation ast node param annotated declaration code annotation code annotated param env newly created link annotation mirror annotationmirror object annotation mirror annotationmirror create annotation mirror createannotationmirror i annotation binding iannotationbinding annotation eclipse declaration impl eclipsedeclarationimpl annotated base processor env baseprocessorenv env annotation mirror impl annotationmirrorimpl annotation annotated env annotation value annotationvalue create default value createdefaultvalue object dom value domvalue annotation element declaration impl annotationelementdeclarationimpl decl base processor env baseprocessorenv env dom value domvalue object converted convert value to mirror value convertdomvaluetomirrorvalue dom value domvalue decl decl env decl get return type getreturntype create annotation value from value createannotationvaluefromdomvalue converted decl env build link annotation value annotationvalue object based dom param dom value domvalue dom api param decl element declaration code dom value domvalue code dom value domvalue annotation declaration annotated parameter param env annotation annotation value annotationvalue create default value createdefaultvalue object dom value domvalue ast based annotation element declaration impl astbasedannotationelementdeclarationimpl decl base processor env baseprocessorenv env dom value domvalue object converted convert value to mirror value convertdomvaluetomirrorvalue dom value domvalue decl decl env decl get return type getreturntype create annotation value from value createannotationvaluefromdomvalue converted decl env build link annotation value annotationvalue object based dom param dom value domvalue annotation member dom api param element name elementname member param anno annotation code dom value domvalue code param env annotation annotation value annotationvalue create annotation member value createannotationmembervalue object dom value domvalue string element name elementname annotation mirror impl annotationmirrorimpl anno base processor env baseprocessorenv env type mirror typemirror expected type expectedtype dom value domvalue object converted convert value to mirror value convertdomvaluetomirrorvalue dom value domvalue element name elementname anno anno get annotated declaration getannotateddeclaration env expected type expectedtype create annotation value from value createannotationvaluefromdomvalue converted element name elementname anno env param converted value convertedvalue mirror form param annotation member param number source order annotation member annotation instance param mirror link annotation mirror impl annotationmirrorimpl link annotation element declaration impl annotationelementdeclarationimpl param env annotation value annotationvalue create annotation value from value createannotationvaluefromdomvalue object converted value convertedvalue string eclipse mirror object eclipsemirrorobject mirror base processor env baseprocessorenv env converted value convertedvalue mirror annotation mirror impl annotationmirrorimpl annotation value impl annotationvalueimpl converted value convertedvalue annotation mirror impl annotationmirrorimpl mirror env annotation value impl annotationvalueimpl converted value convertedvalue annotation element declaration impl annotationelementdeclarationimpl mirror env building annotation object based dom param dom dom convert mirror specification sun mirror declaration annotation value annotationvalue get object getobject param element code dom value domvalue code element member annotation param parent parent annotation param decl code dom value domvalue code annotation element declaration origin ates originates code dom value domvalue code annotation code decl code declaration annot ates annotates param expected type expectedtype declared type member param need boxing needboxing code code array returned converted annotation conversion failed object convert value to mirror value convertdomvaluetomirrorvalue object dom value domvalue string eclipse mirror object eclipsemirrorobject parent eclipse declaration impl eclipsedeclarationimpl decl base processor env baseprocessorenv env type mirror typemirror expected type expectedtype dom value domvalue object return value returnvalue dom value domvalue dom value domvalue dom value domvalue character dom value domvalue dom value domvalue dom value domvalue integer dom value domvalue dom value domvalue dom value domvalue string return value returnvalue dom value domvalue dom value domvalue i variable binding ivariablebinding return value returnvalue factory create declaration createdeclaration i variable binding ivariablebinding dom value domvalue env dom value domvalue object object elements object dom value domvalue len elements length list annotation value annotationvalue anno values annovalues array list arraylist len type mirror typemirror leaf expected type expectedtype array type arraytype leaf array type arraytype expected type expectedtype get component type getcomponenttype leaf expected type expectedtype len elements java compile time error elements object object convert value to mirror value convertdomvaluetomirrorvalue elements parent decl env leaf i annotation binding iannotationbinding unexpected convert dom value to mirror value convertdomvaluetomirrorvalue get class getclass get name getname get class getclass get name getname annotation value annotationvalue anno value annovalue create annotation value from value createannotationvaluefromdomvalue parent env anno value annovalue anno values annovalues add anno value annovalue anno values annovalues caller caught dom value domvalue i type binding itypebinding return value returnvalue factory create type mirror createtypemirror i type binding itypebinding dom value domvalue env dom value domvalue i annotation binding iannotationbinding return value returnvalue factory create annotation mirror createannotationmirror i annotation binding iannotationbinding dom value domvalue decl env reach point nls illegal state exception illegalstateexception build annotation object dom value domvalue perform necessary type conversion performnecessarytypeconversion expected type expectedtype return value returnvalue parent env object get matching dummy value getmatchingdummyvalue expected type expectedtype expected type expectedtype is primitive isprimitive expected type expectedtype expected type expectedtype dummy expected type expectedtype dummy expected type expectedtype dummy expected type expectedtype dummy expected type expectedtype dummy integer expected type expectedtype dummy expected type expectedtype dummy expected type expectedtype happen work dummy integer method designed invoke invocation handler requires annotation value annotationvalue annotation mirror annotationmirror member values values anon otation anonotation member path common primitive type conversion place type conversions resp ects respects type widening narrowing rules jls question remains type type conversion fails code avoid ref lect exception avoidreflectexception code code code code code expected type code code numeric numeric primitive types code code unchanged invocation handler returned link java lang reflect invocation handler invocationhandler invoke converted expected type link java lang reflect proxy expected type agree class cast exception classcastexception thrown null pointer exception nullpointerexception expected type primitive type behavior causing annotation processor lot pain decision unchecked exception class cast exception classcastexception null pointer exception nullpointerexception thrown dummy original chosen dummy values code code expected type code code numeric numeric primitive types code code behavior triggered setting code avoid ref lect exception avoidreflectexception code code code note behavior dev iates deviates doc umented documented link java lang reflect invocation handler invocationhandler invoke dev iates deviates sun implementation param current annotation instance param expected type expectedtype expected type object perform necessary primitive type conversion performnecessaryprimitivetypeconversion expected type expectedtype object avoid ref lect exception avoidreflectexception nls expected type expectedtype is primitive isprimitive expected type expectedtype primitive type expected type expectedtype get name getname avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype apply widening conversion based jls string type name typename expected type expectedtype get name getname expected type char expectedtypechar type name typename char at charat name len namelen type name typename length narrowing byte value bytevalue expected type char expectedtypechar name len namelen exact match avoid ref lect exception avoidreflectexception narrowing character value of valueof narrowing widening widening widening integer value of valueof widening widening value of valueof widening widening value of valueof widening nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar narrowing short value shortvalue expected type char expectedtypechar name len namelen narrowing value of valueof narrowing completely wrong avoid ref lect exception avoidreflectexception narrowing character value of valueof narrowing widening widening widening integer value of valueof widening widening value of valueof widening exact match nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar narrowing character character char value charvalue expected type char expectedtypechar name len namelen narrowing value of valueof narrowing completely wrong avoid ref lect exception avoidreflectexception exact match widening widening widening integer value of valueof widening widening value of valueof widening narrowing value of valueof narrowing nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar narrowing integer integer int value intvalue expected type char expectedtypechar name len namelen narrowing value of valueof narrowing completely wrong avoid ref lect exception avoidreflectexception narrowing character value of valueof narrowing widening widening exact match widening value of valueof widening narrowing value of valueof narrowing nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar widening long value longvalue expected type char expectedtypechar completely wrong avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype widening widening exact match nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar widening float value floatvalue expected type char expectedtypechar completely wrong avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype widening exact match nls illegal state exception illegalstateexception nls unknown type expected type char expectedtypechar expected type char expectedtypechar exact match completely wrong avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype length expected type char expectedtypechar name len namelen completely wrong avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype convert avoid ref lect exception avoidreflectexception get matching dummy value getmatchingdummyvalue expected type expectedtype get java lang class getjavalangclass primitive primitive type primitivetype primitive type primitivetype primitive type primitivetype get kind getkind nls illegal state exception illegalstateexception unknow primitive type primitive type primitivetype apply type conversion jls auto boxing param expected type expectedtype expected type param conversion applied param member param parent annotation member param env matching expected type conversion applied object perform necessary type conversion performnecessarytypeconversion type mirror typemirror expected type expectedtype object string eclipse mirror object eclipsemirrorobject parent base processor env baseprocessorenv env expected type expectedtype expected type expectedtype primitive type primitivetype primitive class primitiveclass get java lang class getjavalangclass primitive primitive type primitivetype expected type expectedtype perform necessary primitive type conversion performnecessaryprimitivetypeconversion primitive class primitiveclass handle auto boxing expected type expectedtype array type arraytype type mirror typemirror component type componenttype array type arraytype expected type expectedtype get component type getcomponenttype object converted error leave component type componenttype array type arraytype converted perform necessary type conversion performnecessarytypeconversion component type componenttype parent env annotation value annotationvalue anno value annovalue create annotation value from value createannotationvaluefromdomvalue converted parent env collections singleton list singletonlist anno value annovalue change interface type interfacetype create error interface type createerrorinterfacetype i type binding itypebinding binding string binding binding binding get name getname error type errortype error interface errorinterface class type classtype create error class type createerrorclasstype i type binding itypebinding binding string binding binding binding get name getname create error class type createerrorclasstype class type classtype create error class type createerrorclasstype string error type errortype error class errorclass annotation type annotationtype create error annotation type createerrorannotationtype i type binding itypebinding binding string binding binding binding get name getname create error annotation type createerrorannotationtype annotation type annotationtype create error annotation type createerrorannotationtype string error type errortype error annotation errorannotation array type arraytype create error array type createerrorarraytype string dimension error type errortype error array type errorarraytype dimension