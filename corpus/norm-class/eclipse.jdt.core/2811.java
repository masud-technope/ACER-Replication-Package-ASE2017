copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors wharley bea initial api implementation ibm corporation org eclipse jdt compiler apt tests java file java io exception ioexception java util array list arraylist java util list java util locale javax tools diagnostic javax tools diagnostic listener diagnosticlistener javax tools java compiler javacompiler javax tools java file object javafileobject javax tools tool provider toolprovider junit framework test case testcase tests implementation javax annotation processing messager messager tests messagertests test case testcase diagnostic report diagnosticreport diagnostic listener diagnosticlistener count string buffer stringbuffer buffer list diagnostic errors array list arraylist diagnostic report diagnosticreport count buffer string buffer stringbuffer report diagnostic diagnostic diagnostic get kind getkind diagnostic kind error errors add diagnostic count buffer append diagnostic get message getmessage locale get default getdefault buffer append diagnostic get error at geterrorat errors string to string tostring buffer to string tostring usages messager proc messagerproc string messagerprocname org eclipse jdt compiler apt tests processors message r messager messager proc messagerproc override set up setup exception set up setup batch test utils batchtestutils init validate test messager testmessager test javac compiler io exception ioexception test messager with system compiler testmessagerwithsystemcompiler io exception ioexception java compiler javacompiler compiler tool provider toolprovider get system java compiler getsystemjavacompiler compiler system println system java compiler diagnostic report diagnosticreport java file object javafileobject diagnostic listener diagnosticlistener diagnostic report diagnosticreport java file object javafileobject internal test messager internaltestmessager compiler diagnostic listener diagnosticlistener surprisingly javac reports errors javac reports errors expected assert true asserttrue wrong number reported errors diagnostic listener diagnosticlistener count attempt report errors elements eclipse compiler io exception ioexception test messager with eclipse compiler testmessagerwitheclipsecompiler io exception ioexception java compiler javacompiler compiler batch test utils batchtestutils get eclipse compiler geteclipsecompiler diagnostic report diagnosticreport java file object javafileobject diagnostic listener diagnosticlistener diagnostic report diagnosticreport java file object javafileobject internal test messager internaltestmessager compiler diagnostic listener diagnosticlistener assert equals assertequals wrong number reported errors diagnostic listener diagnosticlistener count suppress warnings suppresswarnings unchecked diagnostic java file object javafileobject diag diagnostic java file object javafileobject diagnostic listener diagnosticlistener get error at geterrorat java file object javafileobject file object fileobject diag get source getsource char sequence charsequence content file object fileobject get char content getcharcontent string marker content sub sequence subsequence diag get start position getstartposition diag get end position getendposition to string tostring assert equals assertequals wrong error post ion postion nested marker attempt report errors elements io exception ioexception output ted outputted errors test succeeded generate internal test messager internaltestmessager java compiler javacompiler compiler diagnostic listener diagnosticlistener java file object javafileobject diagnostic listener diagnosticlistener io exception ioexception system clear property clearproperty messagerprocname file target folder targetfolder test utils testutils concat path concatpath batch test utils batchtestutils get src folder name getsrcfoldername targets errors batch test utils batchtestutils copy resources copyresources targets errors target folder targetfolder turn messager proc messagerproc list string options array list arraylist string options add messagerprocname options add nowarn invoke processing compiling targets errors resources success batch test utils batchtestutils compile tree with errors compiletreewitherrors compiler options target folder targetfolder diagnostic listener diagnosticlistener assert true asserttrue compilation failed expected errors didn success succeeded processor property succeeded error string property system get property getproperty messagerprocname assert not null assertnotnull property property assert equals assertequals succeeded property javadoc junit framework test case testcase tear down teardown override tear down teardown exception system clear property clearproperty messagerprocname tear down teardown