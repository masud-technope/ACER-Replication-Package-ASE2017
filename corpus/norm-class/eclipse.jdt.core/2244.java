copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests rewrite describing java util list junit framework test org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core dom org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite list rewrite listrewrite suppress warnings suppresswarnings rawtypes ast rewriting with statements recovery test astrewritingwithstatementsrecoverytest ast rewriting test astrewritingtest ast rewriting with statements recovery test astrewritingwithstatementsrecoverytest string ast rewriting with statements recovery test astrewritingwithstatementsrecoverytest string api level apilevel api level apilevel test suite create suite createsuite ast rewriting with statements recovery test astrewritingwithstatementsrecoverytest https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append foo buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo block block method decl methoddecl get body getbody list statements block statements assert true asserttrue number statements statements size add type arguments expression statement expressionstatement stmt expression statement expressionstatement statements method invocation methodinvocation invocation method invocation methodinvocation stmt get expression getexpression ast node astnode first argument firstargument ast node astnode invocation arguments number literal numberliteral new number literal newnumberliteral ast new number literal newnumberliteral list rewrite listrewrite list rewriter listrewriter rewrite get list rewrite getlistrewrite invocation method invocation methodinvocation arguments property list rewriter listrewriter replace first argument firstargument new number literal newnumberliteral string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append foo buf append buf append assert equal string assertequalstring preview buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append unsupported operation exception unsupportedoperationexception buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot list body declarations bodydeclarations type body declarations bodydeclarations assert true asserttrue number body declarations body declarations bodydeclarations size add field declaration method declaration methoddeclaration method declaration methoddeclaration method declaration methoddeclaration body declarations bodydeclarations variable declaration fragment variabledeclarationfragment new fragment newfragment ast new variable declaration fragment newvariabledeclarationfragment new fragment newfragment set name setname ast new simple name newsimplename field field declaration fielddeclaration new field declaration newfielddeclaration ast new field declaration newfielddeclaration new fragment newfragment new field declaration newfielddeclaration set type settype ast new simple type newsimpletype ast new name newname object list rewrite listrewrite list rewriter listrewriter rewrite get list rewrite getlistrewrite type type declaration typedeclaration body declarations property list rewriter listrewriter insert before insertbefore new field declaration newfielddeclaration method declaration methoddeclaration string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append object field buf append buf append foo buf append unsupported operation exception unsupportedoperationexception buf append buf append assert equal string assertequalstring preview buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast ast ast root astroot getast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method decl methoddecl find method declaration findmethoddeclaration type foo block block method decl methoddecl get body getbody list statements block statements assert true asserttrue number statements statements size replace simple simple do statement dostatement stmt do statement dostatement statements statement body stmt get body getbody empty statement emptystatement new empty statement newemptystatement ast new empty statement newemptystatement rewrite replace body new empty statement newemptystatement string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring