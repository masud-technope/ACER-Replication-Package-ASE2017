copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler parser org eclipse jdt core compiler org eclipse jdt internal compiler ast abstract method declaration abstractmethoddeclaration org eclipse jdt internal compiler ast argument org eclipse jdt internal compiler ast ast node astnode org eclipse jdt internal compiler ast block org eclipse jdt internal compiler ast constructor declaration constructordeclaration org eclipse jdt internal compiler ast explicit constructor call explicitconstructorcall org eclipse jdt internal compiler ast field declaration fielddeclaration org eclipse jdt internal compiler ast local declaration localdeclaration org eclipse jdt internal compiler ast statement org eclipse jdt internal compiler ast super reference superreference org eclipse jdt internal compiler ast type declaration typedeclaration org eclipse jdt internal compiler ast type reference typereference org eclipse jdt internal compiler lookup base types basetypes org eclipse jdt internal compiler lookup compiler modifiers compilermodifiers recovered method recoveredmethod recovered element recoveredelement compiler modifiers compilermodifiers terminal tokens terminaltokens base types basetypes abstract method declaration abstractmethoddeclaration method declaration methoddeclaration recovered type recoveredtype local types localtypes local type count localtypecount recovered block recoveredblock method body methodbody discard body discardbody recovered method recoveredmethod abstract method declaration abstractmethoddeclaration method declaration methoddeclaration recovered element recoveredelement parent bracket balance bracketbalance parser parser parent bracket balance bracketbalance parser method declaration methoddeclaration method declaration methoddeclaration found opening brace foundopeningbrace body starts at header end bodystartsatheaderend found opening brace foundopeningbrace bracket balance bracketbalance record nested block declaration recovered element recoveredelement add block nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue behavior delegate recording parent elements passed belonging enclosing element method declaration methoddeclaration declaration source end declarationsourceend nested block declaration nestedblockdeclaration source start sourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue opening brace found opening brace foundopeningbrace found opening brace foundopeningbrace bracket balance bracketbalance method body methodbody recovered block recoveredblock nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue nested block declaration nestedblockdeclaration source end sourceend method body methodbody record field declaration recovered element recoveredelement add field declaration fielddeclaration field declaration fielddeclaration bracket balance value bracketbalancevalue local variables method field type name fieldtypename local field declaration fielddeclaration modifiers acc final accfinal initializer field declaration fielddeclaration type field type name fieldtypename field declaration fielddeclaration type get type name gettypename length char operation charoperation equals field type name fieldtypename void binding voidbinding source name sourcename parent ignore update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend field declaration fielddeclaration declaration source start declarationsourcestart parent add field declaration fielddeclaration bracket balance value bracketbalancevalue behavior delegate recording parent elements passed belonging enclosing element method declaration methoddeclaration declaration source end declarationsourceend field declaration fielddeclaration declaration source start declarationsourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add field declaration fielddeclaration bracket balance value bracketbalancevalue opening brace found opening brace foundopeningbrace found opening brace foundopeningbrace bracket balance bracketbalance ignore record local declaration regular method created block body recovered element recoveredelement add local declaration localdeclaration local declaration localdeclaration bracket balance value bracketbalancevalue type starting passed type belonging enclosing type method declaration methoddeclaration declaration source end declarationsourceend local declaration localdeclaration declaration source start declarationsourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add local declaration localdeclaration bracket balance value bracketbalancevalue method body methodbody block block block block source start sourcestart method declaration methoddeclaration body start bodystart recovered element recoveredelement current block currentblock add block bracket balance bracketbalance bracket balance bracketbalance current block currentblock current block currentblock add block bracket balance bracketbalance current block currentblock add local declaration localdeclaration bracket balance value bracketbalancevalue method body methodbody add local declaration localdeclaration bracket balance value bracketbalancevalue record statement regular method created block body recovered element recoveredelement add statement statement bracket balance value bracketbalancevalue type starting passed type belonging enclosing type method declaration methoddeclaration declaration source end declarationsourceend statement source start sourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add statement bracket balance value bracketbalancevalue method body methodbody block block block block source start sourcestart method declaration methoddeclaration body start bodystart recovered element recoveredelement current block currentblock add block bracket balance bracketbalance bracket balance bracketbalance current block currentblock current block currentblock add block bracket balance bracketbalance current block currentblock add statement bracket balance value bracketbalancevalue method body methodbody add statement bracket balance value bracketbalancevalue recovered element recoveredelement add type declaration typedeclaration type declaration typedeclaration bracket balance value bracketbalancevalue type starting passed type belonging enclosing type method declaration methoddeclaration declaration source end declarationsourceend type declaration typedeclaration declaration source start declarationsourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add type declaration typedeclaration bracket balance value bracketbalancevalue type declaration typedeclaration bits ast node astnode islocaltypemask method body methodbody block block block block source start sourcestart method declaration methoddeclaration body start bodystart add block method body methodbody add type declaration typedeclaration bracket balance value bracketbalancevalue type declaration typedeclaration is interface isinterface update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend type declaration typedeclaration declaration source start declarationsourcestart parent ignore close constructor parent add type declaration typedeclaration bracket balance value bracketbalancevalue local types localtypes local types localtypes recovered type recoveredtype local type count localtypecount local type count localtypecount local types localtypes length system arraycopy local types localtypes local types localtypes recovered type recoveredtype local type count localtypecount local type count localtypecount recovered type recoveredtype element recovered type recoveredtype type declaration typedeclaration bracket balance value bracketbalancevalue local types localtypes local type count localtypecount element opening brace found opening brace foundopeningbrace found opening brace foundopeningbrace bracket balance bracketbalance element body starts at header end bodystartsatheaderend method declaration methoddeclaration body start bodystart method declaration methoddeclaration source end sourceend answer parsed structure ast node astnode parse tree parsetree method declaration methoddeclaration answer source parse node source end sourceend method declaration methoddeclaration declaration source end declarationsourceend string to string tostring tab string buffer stringbuffer result string buffer stringbuffer tab string tabstring tab nls result append recovered method method declaration methoddeclaration print tab result local types localtypes local type count localtypecount nls result append result append local types localtypes to string tostring tab method body methodbody nls result append result append method body methodbody to string tostring tab result to string tostring update body start bodystart parse node update body start updatebodystart body start bodystart found opening brace foundopeningbrace method declaration methoddeclaration body start bodystart body start bodystart abstract method declaration abstractmethoddeclaration updated method declaration updatedmethoddeclaration method body methodbody block block method body methodbody updated block updatedblock block method declaration methoddeclaration statements block statements statement exp lict explict constructor call dest inated destinated special slot method declaration methoddeclaration is constructor isconstructor constructor declaration constructordeclaration constructor constructor declaration constructordeclaration method declaration methoddeclaration method declaration methoddeclaration statements method declaration methoddeclaration statements explicit constructor call explicitconstructorcall constructor constructor call constructorcall explicit constructor call explicitconstructorcall method declaration methoddeclaration statements length method declaration methoddeclaration statements length system arraycopy method declaration methoddeclaration statements method declaration methoddeclaration statements statement length length add implicit constructor call constructor constructor call constructorcall constructor constructor call constructorcall super reference superreference implicit super constructor call implicitsuperconstructorcall local type count localtypecount method declaration methoddeclaration bits ast node astnode haslocaltypemask method declaration methoddeclaration update parse node parser disappear rest arting restarting recovery update from parser state updatefromparserstate body starts at header end bodystartsatheaderend parser parser parser recover arguments thrown exceptions awaiting type references parser list length listlength parser ast length ptr astlengthptr consumed arguments listed elements thrown exceptions method declaration methoddeclaration source end sourceend parser r paren pos rparenpos protection bugs length parser ast length stack astlengthstack parser ast length ptr astlengthptr ast ptr astptr parser ast ptr astptr length can consume canconsume ast ptr astptr can consume canconsume parser ast stack aststack ast ptr astptr abstract method declaration abstractmethoddeclaration can consume canconsume max length max parser ast stack aststack ast ptr astptr type reference typereference can consume canconsume can consume canconsume parser consume method header throws clause consumemethodheaderthrowsclause reset type list length typelistlength check performed error check errorcheck foo parser list length listlength consumed arguments listed elements arguments parser current token currenttoken tokennamelparen parser current token currenttoken tokennamesemicolon current token currenttoken parent hesis parenthesis argument method field signature parser ast length stack astlengthstack parser ast length ptr astlengthptr parser ast ptr astptr parser list length listlength parser current token currenttoken arg length arglength parser ast length stack astlengthstack parser ast length ptr astlengthptr arg start argstart parser ast ptr astptr arg length arglength r paren pos rparenpos need update paren pos needupdaterparenpos parser r paren pos rparenpos parser l paren pos lparenpos compute body start bodystart check point checkpoint count count count arg length arglength count argument argument argument parser ast stack aststack arg start argstart count argument arg type name argtypename argument type get type name gettypename argument modifiers acc final accfinal arg type name argtypename length char operation charoperation equals arg type name argtypename void binding voidbinding source name sourcename parser ast length stack astlengthstack parser ast length ptr astlengthptr count parser ast ptr astptr arg start argstart count parser list length listlength count parser current token currenttoken need update paren pos needupdaterparenpos parser r paren pos rparenpos argument source end sourceend parser list length listlength parser ast length ptr astlengthptr protection bugs length parser ast length stack astlengthstack parser ast length ptr astlengthptr ast ptr astptr parser ast ptr astptr length can consume canconsume ast ptr astptr can consume canconsume parser ast stack aststack ast ptr astptr abstract method declaration abstractmethoddeclaration can consume canconsume max length max parser ast stack aststack ast ptr astptr argument can consume canconsume can consume canconsume parser consume method header right paren consumemethodheaderrightparen positions updated r paren pos rparenpos parameter add ition addition awaiting type method fvxqz parser current element currentelement method declaration methoddeclaration source end sourceend method declaration methoddeclaration arguments method declaration methoddeclaration arguments length source end sourceend method declaration methoddeclaration body start bodystart method declaration methoddeclaration source end sourceend parser last check point lastcheckpoint method declaration methoddeclaration body start bodystart opening brace consumed expected opening current element body start bodystart updated recovered element recoveredelement update on opening brace updateonopeningbrace brace start bracestart brace end braceend opening brace close signature bracket balance bracketbalance parser scanner search line number searchlinenumber method declaration methoddeclaration source end sourceend parser scanner search line number searchlinenumber brace end braceend parser last ignored token lastignoredtoken token name throws tokennamethrows found opening brace foundopeningbrace pretend brace bracket balance bracketbalance update on opening brace updateonopeningbrace brace start bracestart brace end braceend update parse tree updateparsetree updated method declaration updatedmethoddeclaration update declaration source end declarationsourceend parse node update source end if necessary updatesourceendifnecessary brace start bracestart brace end braceend method declaration methoddeclaration declaration source end declarationsourceend parser r brace successor start rbracesuccessorstart brace end braceend method declaration methoddeclaration declaration source end declarationsourceend parser r brace end rbraceend method declaration methoddeclaration body end bodyend parser r brace start rbracestart method declaration methoddeclaration declaration source end declarationsourceend brace end braceend method declaration methoddeclaration body end bodyend brace start bracestart