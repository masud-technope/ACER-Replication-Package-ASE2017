copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors jgarms bea wharley bea initial api implementation het google bug project factory path workspace org eclipse jdt apt core util java file java util collection java util hash map hashmap java util hash set hashset java util linked hash set linkedhashset java util map java util java util map entry java util regex pattern org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources i workspace root iworkspaceroot org eclipse core resources project scope projectscope org eclipse core resources resources plugin resourcesplugin org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i status istatus org eclipse core runtime path org eclipse core runtime platform org eclipse core runtime preferences default scope defaultscope org eclipse core runtime preferences i eclipse preferences ieclipsepreferences org eclipse core runtime preferences i preferences service ipreferencesservice org eclipse core runtime preferences i scope context iscopecontext org eclipse core runtime preferences instance scope instancescope org eclipse jdt apt core internal annotation processor factory loader annotationprocessorfactoryloader org eclipse jdt apt core internal apt plugin aptplugin org eclipse jdt apt core internal apt project aptproject org eclipse jdt apt core internal generated file generatedfile generated source folder manager generatedsourcefoldermanager org eclipse jdt apt core internal util factory path factorypath org eclipse jdt apt core internal util factory path util factorypathutil org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java project ijavaproject org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org osgi service prefs backing store exception backingstoreexception acc esses accesses configuration data apt note code org eclipse jdt reads writes settings data calling methods instances constructed helpful eclipse preferences mechanism http dev eclipse org view cvs viewcvs cgi check out checkout platform core doc uments documents user settings faq html apt config aptconfig regex identify substituted token path variables nls string path var pathvar token path variable meaning workspace root nls string path var pathvar root root path variable meaning project root nls string path var pathvar project root projectroot project dir hide constructor object apt config aptconfig add equivalent akey val list processor options param key none mpty nonempty string include key start param jproj project option workspace wide param val equivalent akey remove key functionality remove processor option removeprocessoroption i java project ijavaproject string add processor option addprocessoroption i java project ijavaproject jproj string key string val key key length illegal argument exception illegalargumentexception i scope context iscopecontext context jproj project scope projectscope jproj get project getproject instance scope instancescope instance i eclipse preferences ieclipsepreferences node context get node getnode nls apt plugin aptplugin plugin apt preference constants aptpreferenceconstants apt processoroptions string non null val nonnullval val apt preference constants aptpreferenceconstants apt null value nullvalue val node key non null val nonnullval node flush backing store exception backingstoreexception apt plugin aptplugin log unable save annotation processor option key remove option list processor options param jproj project remove option workspace wide param key none mpty nonempty string include key start remove processor option removeprocessoroption i java project ijavaproject jproj string key key key length illegal argument exception illegalargumentexception i scope context iscopecontext context jproj project scope projectscope jproj get project getproject instance scope instancescope instance i eclipse preferences ieclipsepreferences node context get node getnode nls apt plugin aptplugin plugin apt preference constants aptpreferenceconstants apt processoroptions node remove key node flush backing store exception backingstoreexception apt plugin aptplugin log unable save annotation processor option key options presented annotation processors annotation processor environment annotationprocessorenvironment options key pairs project properties option values per cent percent delimited token representing classpath variable predefined values token path delimiter entire tokens replaced resolved predefined values code root code replaced absolute path name pathname workspace root directory code project dir code replaced absolute path name pathname project root directory code eclipse configuration config ini code resolved code eclipse configuration config ini code method returns options program matically programmatically editable displayed configuration gui persisted preference store meant emulate behavior sun apt command tool passes command options processor environment program matically programmatically options code classpath code java build path code source path sourcepath code java source path code code generated src dir code code binary output dir code target code compiler target version code source code compiler source version slight diff erences differences options returned method options returned implementation annotation processor environment annotationprocessorenvironment get options getoptions method returns additional options meaningful build code phase code method adds alternate encodings option compatible bug sun apt implementation option key additional option created key includes user created options include program matically programmatically defined options listed param jproj project query workspace wide setting mutable empty map key pairs pair equivalent akey sun apt command spaces map string string get processor options getprocessoroptions i java project ijavaproject jproj map string string raw options rawoptions get raw processor options getrawprocessoroptions jproj map large include program matically programmatically generated options map string string options hash map hashmap raw options rawoptions size resolve path meta variables metavariables root map entry string string entry raw options rawoptions entry set entryset string resolved value resolvedvalue resolve var path resolvevarpath jproj entry get value getvalue string resolved value resolvedvalue entry get value getvalue resolved value resolvedvalue options entry get key getkey jproj program matically programmatically options workspace level options i workspace root iworkspaceroot root jproj get project getproject get workspace getworkspace get root getroot add source path sourcepath classpath variables i classpath entry iclasspathentry classpath entries classpathentries jproj get resolved classpath getresolvedclasspath string classpath linked hash set linkedhashset string source path sourcepath linked hash set linkedhashset projects classpath loops exist don loop i java project ijavaproject projects processed projectsprocessed hash set hashset projects processed projectsprocessed add jproj i classpath entry iclasspathentry entry classpath entries classpathentries kind entry get entry kind getentrykind kind i classpath entry iclasspathentry cpe library i path ipath cp path cppath entry get path getpath i resource iresource res root find member findmember cp path cppath res path absolute external jar res classpath add cp path cppath toosstring relative classpath add res get location getlocation toosstring kind i classpath entry iclasspathentry cpe source i resource iresource res root find member findmember entry get path getpath res i path ipath src path srcpath res get location getlocation src path srcpath source path sourcepath add src path srcpath toosstring kind i classpath entry iclasspathentry cpe project add dependent project build path classpath i path ipath other project path otherprojectpath entry get path getpath i project iproject other project otherproject root get project getproject other project path otherprojectpath segment note java core javacore create safe project i java project ijavaproject other java project otherjavaproject java core javacore create other project otherproject doesn exist ignore other java project otherjavaproject other java project otherjavaproject is open isopen add project classpath addprojectclasspath root other java project otherjavaproject projects processed projectsprocessed classpath add options add is auto matic processor option isautomaticprocessoroption document docs reference automatic processor options html classpath source path sourcepath nls options classpath convert path collection to string convertpathcollectiontostring classpath nls options source path sourcepath convert path collection to string convertpathcollectiontostring source path sourcepath absolute path generated source dir i folder ifolder gen src dir gensrcdir jproj get project getproject get folder getfolder get gen src dir getgensrcdir jproj string gen src dir string gensrcdirstring gen src dir gensrcdir get raw location getrawlocation toosstring nls options gen src dir string gensrcdirstring absolute path bin dir i path ipath bin path binpath jproj get output location getoutputlocation i resource iresource bin path resource binpathresource root find member findmember bin path binpath string bin dir string bindirstring bin path resource binpathresource bin dir string bindirstring root find member findmember bin path binpath get location getlocation toosstring bin dir string bindirstring bin path binpath toosstring nls options bin dir string bindirstring string target jproj get option getoption java core javacore compiler codegen target platform nls options target target string source jproj get option getoption java core javacore compiler source nls options source source java model exception javamodelexception jme apt plugin aptplugin log jme classpath project jproj options starts path variable root replace absolute path param akey command option string resolve var path resolvevarpath i java project ijavaproject jproj string token substitute pattern matches path var pathvar token i path ipath path path string first token firsttoken path segment matches root project project relative path path var pathvar root equals first token firsttoken i workspace root iworkspaceroot root resources plugin resourcesplugin get workspace getworkspace get root getroot i resource iresource proj root find member findmember path segment proj substitution i path ipath relative path relativepath path remove first segments removefirstsegments i path ipath absolute proj path absoluteprojpath proj get location getlocation i path ipath absolute res path absoluterespath absolute proj path absoluteprojpath append relative path relativepath absolute res path absoluterespath toosstring matches project dir project path relative current project jproj path var pathvar project root projectroot equals first token firsttoken substitution i path ipath relative path relativepath path remove first segments removefirstsegments i path ipath absolute proj path absoluteprojpath jproj get project getproject get location getlocation i path ipath absolute res path absoluterespath absolute proj path absoluteprojpath append relative path relativepath absolute res path absoluterespath toosstring classpath based path string cpv name cpvname first token firsttoken substring first token firsttoken length i path ipath cpv path cpvpath java core javacore get classpath variable getclasspathvariable cpv name cpvname cpv path cpvpath i path ipath resolved cpv path cpvpath append path remove first segments removefirstsegments resolved toosstring separate method dependent projects output classpath add project classpath addprojectclasspath i workspace root iworkspaceroot root i java project ijavaproject other java project otherjavaproject i java project ijavaproject projects processed projectsprocessed string classpath projects processed projectsprocessed other java project otherjavaproject projects processed projectsprocessed add other java project otherjavaproject add output directory binary entry projects i path ipath bin path binpath other java project otherjavaproject get output location getoutputlocation i resource iresource bin path resource binpathresource root find member findmember bin path binpath string bin dir string bindirstring bin path resource binpathresource bin dir string bindirstring root find member findmember bin path binpath get location getlocation toosstring bin dir string bindirstring bin path binpath toosstring classpath add bin dir string bindirstring classpath i classpath entry iclasspathentry classpath entries classpathentries other java project otherjavaproject get resolved classpath getresolvedclasspath i classpath entry iclasspathentry entry classpath entries classpathentries entry get entry kind getentrykind i classpath entry iclasspathentry cpe library i path ipath cp path cppath entry get path getpath i resource iresource res root find member findmember cp path cppath res path absolute external jar res classpath add cp path cppath toosstring relative classpath add res get location getlocation toosstring entry get entry kind getentrykind i classpath entry iclasspathentry cpe project i path ipath other project path otherprojectpath entry get path getpath i project iproject other project otherproject root get project getproject other project path otherprojectpath segment i java project ijavaproject yet another java project yetanotherjavaproject java core javacore create other project otherproject yet another java project yetanotherjavaproject add project classpath addprojectclasspath root yet another java project yetanotherjavaproject projects processed projectsprocessed classpath ignore source types java model exception javamodelexception jme apt plugin aptplugin log jme failed classpath project other java project otherjavaproject string convert path collection to string convertpathcollectiontostring collection string paths paths size nls string builder stringbuilder string builder stringbuilder string path paths append file path separator char pathseparatorchar append path to string tostring processor options call delete options passed call ers callers destroy pre existing options add processor option addprocessoroption param options map values include automatic options is auto matic processor option isautomaticprocessoroption string included perform equivalent apt command afoo bar key foo bar spaces values values set processor options setprocessoroptions map string string options i java project ijavaproject jproj i scope context iscopecontext context jproj project scope projectscope jproj get project getproject instance scope instancescope instance todo call needed compatibility settings files previous point removed remove old style settings removeoldstylesettings context i eclipse preferences ieclipsepreferences node context get node getnode nls apt plugin aptplugin plugin apt preference constants aptpreferenceconstants apt processoroptions node clear entry string string option options entry set entryset string non null val nonnullval option get value getvalue apt preference constants aptpreferenceconstants apt null value nullvalue option get value getvalue node option get key getkey non null val nonnullval node flush backing store exception backingstoreexception apt plugin aptplugin log unable save annotation processor options named option automatically generated get processor options getprocessoroptions processor option param key annotation processor environment annotationprocessorenvironment option option automatically is auto matic processor option isautomaticprocessoroption string key nls classpath equals key nls source path sourcepath equals key nls equals key nls equals key nls target equals key nls source equals key options presented annotation processors annotation processor environment annotationprocessorenvironment str ipped stripped key equivalent akey method differs get processor options getprocessoroptions options returned method include program matically programmatically options method returns options persisted preference store displayed configuration gui param jproj project query workspace wide setting jproj project project settings method fall workspace wide settings mutable empty map key pairs pair equivalent akey spaces quoted afoo bar baz map string string get raw processor options getrawprocessoroptions i java project ijavaproject jproj map string string options hash map hashmap todo code needed compatibility settings files previous point removed style setting exists add mix compatibility options put all putall get old style raw processor options getoldstylerawprocessoroptions jproj fall project workspace scope basis fall scope processor options i preferences service ipreferencesservice don names i scope context iscopecontext contexts jproj contexts i scope context iscopecontext project scope projectscope jproj get project getproject instance scope instancescope instance contexts i scope context iscopecontext instance scope instancescope instance i scope context iscopecontext context contexts i eclipse preferences ieclipsepreferences prefs context get node getnode apt plugin aptplugin plugin prefs children names childrennames length i eclipse preferences ieclipsepreferences proc options node procoptionsnode context get node getnode apt plugin aptplugin plugin nls apt preference constants aptpreferenceconstants apt processoroptions proc options node procoptionsnode string key proc options node procoptionsnode string non null val nonnullval proc options node procoptionsnode key string val apt preference constants aptpreferenceconstants apt null value nullvalue equals non null val nonnullval non null val nonnullval options key val backing store exception backingstoreexception apt plugin aptplugin log unable load annotation processor options options todo code needed compatibility settings files previous point removed processor options apt style string afoo bar abaz quux map string string get old style raw processor options getoldstylerawprocessoroptions i java project ijavaproject jproj map string string options string all options alloptions get string getstring jproj apt preference constants aptpreferenceconstants apt processoroptions all options alloptions options hash map hashmap processor options parser processoroptionsparser processor options parser processoroptionsparser all options alloptions options parse options todo code needed compatibility settings files previous point removed parse apt style command string map key pairs parsing ignores errors simply gobble for med formed pairs find processor options parser processoroptionsparser string parsed start key token has val hasval processor options parser processoroptionsparser string start has val hasval map string string parse map string string options hash map hashmap string key key parse key parsekey options key parse val parseval options skip for med formed key akey val key start character key delimiter value less valueless key has val hasval key for med formed string parse key parsekey string key space at spaceat equals at equalsat has val hasval nls start index of indexof start start key eol start start length space at spaceat index of indexof start equals at equalsat index of indexof start space at spaceat start equals at equalsat start alarm start key equals at equalsat space at spaceat equals at equalsat space at spaceat equals key string substring start equals at equalsat start equals at equalsat has val hasval start length space value less valueless key key string substring start space at spaceat start space at spaceat space at spaceat equals sign spaces value less valueless key string key string substring start start length space value less valueless key key string substring start space at spaceat start space at spaceat key token delimited space spaces quoted regions include multiple quoted regions unmatched quote treated matching quote string quotes returned non quoted nonquoted space string string parse val parseval has val hasval start start length in quoted region inquotedregion start start start length char at charat in quoted region inquotedregion in quoted region inquotedregion in quoted region inquotedregion token start string substring start todo code needed compatibility settings files previous point removed delete key saves annotation processor options single command type string afoo bar abaz quux remove old style settings removeoldstylesettings i scope context iscopecontext context i eclipse preferences ieclipsepreferences node context get node getnode apt plugin aptplugin plugin node remove apt preference constants aptpreferenceconstants apt processoroptions flush unsaved preferences perform config shutdown called apt plugin aptplugin shutdown dispose instance scope instancescope instance get node getnode apt plugin aptplugin plugin flush backing store exception backingstoreexception apt plugin aptplugin log could n couldn flush preferences disk initialize preferences look ups lookups register change listeners called apt plugin aptplugin startup initialize cached workspace level preferences install change listeners annotation processing turned project prior eclipse read org eclipse jdt apt apt enabled aptenabled setting eclipse reads org eclipse jdt core compiler processing enabled processingenabled setting result logic ally logically older setting order preserve compatibility param jproject i java project ijavaproject request workspace preferences annotation processing turned is enabled isenabled i java project ijavaproject jproject nls enabled equals get string getstring jproject apt preference constants aptpreferenceconstants apt processannotations compatibility setting enabled get boolean getboolean jproject apt preference constants aptpreferenceconstants apt enabled turn annotation processing project prior eclipse org eclipse jdt apt apt enabled aptenabled setting eclipse org eclipse jdt core compiler processing enabled processingenabled setting older setting read order preserve compatibility param jproject i java project ijavaproject workspace preferences param enabled set enabled setenabled i java project ijavaproject jproject enabled jproject enabled illegal argument exception illegalargumentexception illegal argument exception illegalargumentexception i status istatus status apt plugin aptplugin create warning status createwarningstatus nls illegal attempt enable annotation processing workspace wide apt plugin aptplugin log status set string setstring jproject apt preference constants aptpreferenceconstants apt processannotations enabled apt preference constants aptpreferenceconstants enabled apt preference constants aptpreferenceconstants disabled compatibility save setting set boolean setboolean jproject apt preference constants aptpreferenceconstants apt enabled enabled annotation processing turned reconcile build note is enabled isenabled processing occur settings independent param jproject i java project ijavaproject query processing enabled reconcile build should process during reconcile shouldprocessduringreconcile i java project ijavaproject jproject get boolean getboolean jproject apt preference constants aptpreferenceconstants apt reconcileenabled turn processing reconcile processing build unaffected note is enabled isenabled processing occur settings independent param jproject i java project ijavaproject modify setting valid individual projects set process during reconcile setprocessduringreconcile i java project ijavaproject jproject enabled set boolean setboolean jproject apt preference constants aptpreferenceconstants apt reconcileenabled enabled get boolean getboolean i java project ijavaproject jproj string option name optionname i preferences service ipreferencesservice service platform get preferences service getpreferencesservice i scope context iscopecontext contexts jproj contexts i scope context iscopecontext project scope projectscope jproj get project getproject instance scope instancescope instance default scope defaultscope instance contexts i scope context iscopecontext instance scope instancescope instance default scope defaultscope instance service get boolean getboolean apt plugin aptplugin plugin option name optionname parse boolean parseboolean apt preference constants aptpreferenceconstants options map option name optionname contexts factory path values jproj current workspace factory path workspace prefs project jproj list plugin factories factory i factory path ifactorypath get default factory path getdefaultfactorypath i java project ijavaproject jproj factory path util factorypathutil get default factory path getdefaultfactorypath jproj factory path project workspace param jproj project factory path workspace factory path factorypath representing current project note project call affect returned object behaves live link project i factory path ifactorypath get factory path getfactorypath i java project ijavaproject jproj factory path util factorypathutil get factory path getfactorypath jproj factory path project workspace perform validation path param jproj project factory path workspace param path factory path reset factory path set factory path setfactorypath i java project ijavaproject jproj i factory path ifactorypath path core exception coreexception factory path factorypath factory path factorypath path factory path util factorypathutil set factory path setfactorypath jproj picked resource listener workspace jproj annotation processor factory loader annotationprocessorfactoryloader get loader getloader reset all resetall project factory path workspace project specific factory path has project specific factory path hasprojectspecificfactorypath i java project ijavaproject jproj jproj workspace level factory path exist factory path util factorypathutil does factory path file exist doesfactorypathfileexist jproj get factory path getfactorypath jproj equals get default factory path getdefaultfactorypath jproj helper method single preference setting apt gensrcdir level abstract ion abstraction processor settings settings contained single preference node apt processoroptions get processor options getprocessoroptions i java project ijavaproject settings get options getoptions i java project ijavaproject preference settings map helper method single preference setting param jproj project workspace param option name optionname preference constant apt preference constants aptpreferenceconstants string setting string get string getstring i java project ijavaproject jproj string option name optionname i preferences service ipreferencesservice service platform get preferences service getpreferencesservice i scope context iscopecontext contexts jproj contexts i scope context iscopecontext project scope projectscope jproj get project getproject instance scope instancescope instance default scope defaultscope instance contexts i scope context iscopecontext instance scope instancescope instance default scope defaultscope instance string plugin id pluginid apt preference constants aptpreferenceconstants apt processannotations equals option name optionname plugin id pluginid java core javacore plugin plugin id pluginid apt plugin aptplugin plugin service get string getstring plugin id pluginid option name optionname apt preference constants aptpreferenceconstants options map option name optionname contexts string get gen src dir getgensrcdir i java project ijavaproject jproject get string getstring jproject apt preference constants aptpreferenceconstants apt gensrcdir set gen src dir setgensrcdir i java project ijavaproject jproject string dir string dirstring generated source folder manager generatedsourcefoldermanager validate jproject dir string dirstring nls illegal argument exception illegalargumentexception illegal generated source folder dir string dirstring set string setstring jproject apt preference constants aptpreferenceconstants apt gensrcdir dir string dirstring validate gen src dir validategensrcdir i java project ijavaproject jproject string dir name dirname generated source folder manager generatedsourcefoldermanager validate jproject dir name dirname set boolean setboolean i java project ijavaproject jproject string option name optionname i scope context iscopecontext context jproject project scope projectscope jproject get project getproject instance scope instancescope instance i eclipse preferences ieclipsepreferences node context get node getnode apt plugin aptplugin plugin val string setting doesn exist string old value oldvalue node option name optionname node put boolean putboolean option name optionname jproject old value oldvalue parse boolean parseboolean old value oldvalue apt project aptproject aproj apt plugin aptplugin get apt project getaptproject jproject aproj preference changed preferencechanged option name optionname flush preference flushpreference option name optionname node set string setstring i java project ijavaproject jproject string option name optionname string i scope context iscopecontext context jproject project scope projectscope jproject get project getproject instance scope instancescope instance i eclipse preferences ieclipsepreferences node apt preference constants aptpreferenceconstants apt processannotations equals option name optionname node context get node getnode java core javacore plugin node context get node getnode apt plugin aptplugin plugin string old value oldvalue node option name optionname node option name optionname jproject equals old value oldvalue apt project aptproject aproj apt plugin aptplugin get apt project getaptproject jproject aproj preference changed preferencechanged option name optionname flush preference flushpreference option name optionname node flush preference flushpreference string option name optionname i eclipse preferences ieclipsepreferences node node flush backing store exception backingstoreexception apt plugin aptplugin log failed save preference option name optionname