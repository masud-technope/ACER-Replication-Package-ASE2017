copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation kelly campbell kellyc google hangs source mapper sourcemapper java proposals https bugs eclipse org bugs bug cgi stephan herrmann contribution bug error popup navigating source files org eclipse jdt internal core java io exception ioexception java util array list arraylist java util collections java util comparator java util enumeration java util hash map hashmap java util hash set hashset java util iterator java util map java util java util zip zip entry zipentry java util zip zip file zipfile org eclipse core resources i container icontainer org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i resource iresource org eclipse core resources resources plugin resourcesplugin org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i status istatus org eclipse core runtime path org eclipse jdt core flags org eclipse jdt core i class file iclassfile org eclipse jdt core i field ifield org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i member imember org eclipse jdt core i method imethod org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i source range isourcerange org eclipse jdt core i type itype org eclipse jdt core i type parameter itypeparameter org eclipse jdt core java conventions javaconventions org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core signature org eclipse jdt core source range sourcerange org eclipse jdt core compiler categorized problem categorizedproblem org eclipse jdt core compiler char operation charoperation org eclipse jdt internal compiler i problem factory iproblemfactory org eclipse jdt internal compiler i source element requestor isourceelementrequestor org eclipse jdt internal compiler source element parser sourceelementparser org eclipse jdt internal compiler ast expression org eclipse jdt internal compiler ast import reference importreference org eclipse jdt internal compiler env i binary type ibinarytype org eclipse jdt internal compiler impl compiler options compileroptions org eclipse jdt internal compiler problem default problem factory defaultproblemfactory org eclipse jdt internal compiler util suffix constants suffixconstants org eclipse jdt internal compiler util util org eclipse jdt internal core util reference info adapter referenceinfoadapter source mapper sourcemapper maps source code zip file binary types jar source mapper sourcemapper fuzzy parser identify source fragments java file attempts match source code children binary type source mapper sourcemapper jar package fragment jarpackagefragment attach source operation attachsourceoperation org eclipse jdt internal core jar package fragment jarpackagefragment suppress warnings suppresswarnings rawtypes unchecked source mapper sourcemapper reference info adapter referenceinfoadapter i source element requestor isourceelementrequestor suffix constants suffixconstants local variable element key localvariableelementkey string parent string local variable element key localvariableelementkey i java element ijavaelement method string string buffer stringbuffer buffer string buffer stringbuffer buffer append method get parent getparent get handle identifier gethandleidentifier append append method get element name getelementname append method get element type getelementtype i java element ijavaelement method string parameter types parametertypes i method imethod method get parameter types getparametertypes max parameter types parametertypes length max buffer append buffer append signature get signature simple name getsignaturesimplename parameter types parametertypes buffer append parent string value of valueof buffer hash code hashcode prime result result prime result hash code hashcode result prime result parent parent hash code hashcode result equals object obj obj obj get class getclass obj get class getclass local variable element key localvariableelementkey local variable element key localvariableelementkey obj equals parent parent parent equals parent string to string tostring string buffer stringbuffer buffer string buffer stringbuffer buffer append append parent append append append string value of valueof buffer verbose specifies location fragment roots zip empty specifies root code code valid root path array list arraylist root paths rootpaths binary type source mapped binary type binarytype binary type binarytype location zip file source i path ipath source path sourcepath specifies location fragment root zip empty specifies root code code valid root path nls string root path rootpath table maps binary method parameter names method handles entries code code hash map hashmap parameter names parameternames table maps binary element code source range sourcerange code element handles entries code source range sourcerange code element array source range range hash map hashmap source ranges sourceranges map i java element ijavaelement string hash map hashmap categories table source ranges local variables special local variable elements entries code code hash map hashmap parameters ranges parametersranges local variables hash set hashset final parameters finalparameters unknown source range source range sourcerange unknown range source range sourcerange position source start current member element member member declaration start memberdeclarationstart code source range sourcerange code current member element source range sourcerange member name range membernamerange current member element string member name membername parameter names current member method element method parameter names methodparameternames parameter types current member method element method parameter types methodparametertypes element searched i java element ijavaelement searched element searchedelement imports references hash map hashmap imports table importstable hash map hashmap imports counter table importscountertable enclosing type i type itype types type declaration starts typedeclarationstarts source range sourcerange type name ranges typenameranges type modifiers typemodifiers type depth typedepth anonymous counter map source anonymous anonymous counter anonymouscounter anonymous class name anonymousclassname string encoding string default encoding defaultencoding options map options handle root paths inference are root paths computed arerootpathscomputed source mapper sourcemapper are root paths computed arerootpathscomputed source mapper sourcemapper i path ipath source path sourcepath string root path rootpath map options source path sourcepath root path rootpath options creates code source mapper sourcemapper code loc ates locates source zip file location fragment root source mapper sourcemapper i path ipath source path sourcepath string root path rootpath map options string encoding are root paths computed arerootpathscomputed options options encoding encoding default encoding defaultencoding resources plugin resourcesplugin get workspace getworkspace get root getroot get default charset getdefaultcharset core exception coreexception root path rootpath root paths rootpaths array list arraylist root paths rootpaths add root path rootpath source path sourcepath source path sourcepath source ranges sourceranges hash map hashmap parameters ranges parametersranges hash map hashmap parameter names parameternames hash map hashmap imports table importstable hash map hashmap imports counter table importscountertable hash map hashmap i source element requestor isourceelementrequestor accept import acceptimport declaration start declarationstart declaration end declarationend name start namestart name end nameend tokens on demand ondemand modifiers imports imports table importstable binary type binarytype imports counter importscounter imports imports imports counter importscounter imports counter importscounter integer imports counter table importscountertable binary type binarytype int value intvalue imports length imports counter importscounter system arraycopy imports imports imports counter importscounter imports counter importscounter char operation charoperation concat with concatwith tokens on demand ondemand name length namelength length system arraycopy name length namelength name length namelength name length namelength name length namelength imports imports counter importscounter imports table importstable binary type binarytype imports imports counter table importscountertable binary type binarytype integer value of valueof imports counter importscounter i source element requestor isourceelementrequestor accept line separator positions acceptlineseparatorpositions positions i source element requestor isourceelementrequestor accept package acceptpackage import reference importreference import reference importreference i source element requestor isourceelementrequestor accept problem acceptproblem categorized problem categorizedproblem problem add categories addcategories i java element ijavaelement element element categories elementcategories element categories elementcategories categories categories hash map hashmap categories element char operation charoperation to strings tostrings element categories elementcategories closes code source mapper sourcemapper code zip file code source mapper sourcemapper code close source ranges sourceranges parameter names parameternames parameters ranges parametersranges final parameters finalparameters api access unit tests converts type names unqualified signatures order consistent source range retrieved source mapper sourcemapper get unqualified method handle getunqualifiedmethodhandle signature string convert type names to sigs converttypenamestosigs type names typenames type names typenames char operation charoperation strings type names typenames length char operation charoperation strings string type sigs typesigs string type sig typesig signature create char array type signature createchararraytypesignature type names typenames transforms signatures qualification unqualified signatures q map qmap entry q entry qentry string buffer stringbuffer simple type sig simpletypesig start dot length type sig typesig length length type sig typesig signature unresolved simple type sig simpletypesig simple type sig simpletypesig append type sig typesig start start start signature dot dot signature start matching end matchingend find matching generic end findmatchinggenericend type sig typesig matching end matchingend matching end matchingend length type sig typesig matching end matchingend signature dot head param tail discard tail simple type sig simpletypesig simple type sig simpletypesig string buffer stringbuffer append type sig typesig start simple type sig simpletypesig append signature unresolved start matching end matchingend fall signature dot start simple type sig simpletypesig simple type sig simpletypesig string buffer stringbuffer append type sig typesig start simple type sig simpletypesig append signature unresolved simple type sig simpletypesig append type sig typesig dot dot start simple type sig simpletypesig type sigs typesigs string type sig typesig simple type sig simpletypesig append type sig typesig start length start type sigs typesigs simple type sig simpletypesig to string tostring type sigs typesigs find matching generic end findmatchinggenericend sig start nesting length sig length start length sig signature start nesting signature nesting nesting compute all root paths computeallrootpaths i type itype type are root paths computed arerootpathscomputed i package fragment root ipackagefragmentroot root i package fragment root ipackagefragmentroot type get package fragment getpackagefragment get parent getparent i path ipath pkg fragment root path pkgfragmentrootpath root get path getpath hash set hashset temp roots temproots hash set hashset time verbose nls system println compute root paths root get element name getelementname time system current time millis currenttimemillis hash set hashset first level package names firstlevelpackagenames hash set hashset contains default package containsadefaultpackage optimize zip file reading source path root path equals assume attachment java source contains java source containsjavasource pkg fragment root path pkgfragmentrootpath equals source path sourcepath string source level sourcelevel string compliance level compliancelevel root is archive isarchive java model manager javamodelmanager manager java model manager javamodelmanager get java model manager getjavamodelmanager zip file zipfile zip zip manager get zip file getzipfile pkg fragment root path pkgfragmentrootpath enumeration entries zip entries entries has more elements hasmoreelements zip entry zipentry entry zip entry zipentry entries next element nextelement string entry name entryname entry get name getname entry is directory isdirectory util is class file name isclassfilename entry name entryname entry name entryname index of indexof string first level package name firstlevelpackagename entry name entryname substring first level package names firstlevelpackagenames first level package name firstlevelpackagename source level sourcelevel i java project ijavaproject project root get java project getjavaproject source level sourcelevel project get option getoption java core javacore compiler source compliance level compliancelevel project get option getoption java core javacore compiler compliance i status istatus status java conventions javaconventions validate package name validatepackagename first level package name firstlevelpackagename source level sourcelevel compliance level compliancelevel status isok status get severity getseverity i status istatus warning first level package names firstlevelpackagenames add first level package name firstlevelpackagename contains default package containsadefaultpackage contains java source containsjavasource org eclipse jdt internal core util util is java like file name isjavalikefilename entry name entryname contains java source containsjavasource core exception coreexception handle manager close zip file closezipfile zip object target java model javamodel get target gettarget root get path getpath target i resource iresource i resource iresource resource i resource iresource target resource i container icontainer i resource iresource members i container icontainer resource members max members length max i resource iresource member members string resource name resourcename member get name getname member get type gettype i resource iresource folder source level sourcelevel i java project ijavaproject project root get java project getjavaproject source level sourcelevel project get option getoption java core javacore compiler source compliance level compliancelevel project get option getoption java core javacore compiler compliance i status istatus status java conventions javaconventions validate package name validatepackagename resource name resourcename source level sourcelevel compliance level compliancelevel status isok status get severity getseverity i status istatus warning first level package names firstlevelpackagenames add resource name resourcename util is class file name isclassfilename resource name resourcename contains default package containsadefaultpackage contains java source containsjavasource org eclipse jdt internal core util util is java like file name isjavalikefilename resource name resourcename contains java source containsjavasource core exception coreexception read source attachment java source https bugs eclipse org bugs bug cgi contains java source containsjavasource object target java model javamodel get target gettarget source path sourcepath target i container icontainer i container icontainer folder i container icontainer target compute root path computerootpath folder first level package names firstlevelpackagenames contains default package containsadefaultpackage temp roots temproots folder get full path getfullpath segment count segmentcount java model manager javamodelmanager manager java model manager javamodelmanager get java model manager getjavamodelmanager zip file zipfile zip zip manager get zip file getzipfile source path sourcepath enumeration entries zip entries entries has more elements hasmoreelements zip entry zipentry entry zip entry zipentry entries next element nextelement string entry name entryname entry is directory isdirectory org eclipse jdt internal core util util is java like file name isjavalikefilename entry name entryname entry get name getname i path ipath path path entry name entryname segment count segmentcount path segment count segmentcount segment count segmentcount max path segment count segmentcount max first level package names firstlevelpackagenames path segment temp roots temproots add path upto segment uptosegment don path level names https bugs eclipse org bugs bug cgi max contains default package containsadefaultpackage temp roots temproots add path upto segment uptosegment max contains default package containsadefaultpackage nls temp roots temproots add path core exception coreexception handle manager close zip file closezipfile zip size temp roots temproots size root paths rootpaths iterator iterator root paths rootpaths iterator iterator has next hasnext temp roots temproots add path string iterator root paths rootpaths clear root paths rootpaths array list arraylist size size temp roots temproots size size array list arraylist sorted roots sortedroots array list arraylist temp roots temproots size collections sort sorted roots sortedroots comparator compare object object i path ipath path i path ipath i path ipath path i path ipath path segment count segmentcount path segment count segmentcount iterator iter sorted roots sortedroots iterator iter has next hasnext i path ipath path i path ipath iter root paths rootpaths add path to string tostring are root paths computed arerootpathscomputed verbose nls nls system println spent system current time millis currenttimemillis time nls nls system println size root paths iterator iterator root paths rootpaths iterator iterator has next hasnext nls nls system println root string iterator compute root path computerootpath i container icontainer container hash set hashset first level package names firstlevelpackagenames has default package hasdefaultpackage source path segment count sourcepathsegmentcount i resource iresource resources container members max resources length max i resource iresource resource resources resource get type gettype i resource iresource folder first level package names firstlevelpackagenames resource get name getname i path ipath full path fullpath container get full path getfullpath i path ipath root path entry rootpathentry full path fullpath remove first segments removefirstsegments source path segment count sourcepathsegmentcount set device setdevice root path entry rootpathentry segment count segmentcount add root path entry rootpathentry compute root path computerootpath i folder ifolder resource first level package names firstlevelpackagenames has default package hasdefaultpackage source path segment count sourcepathsegmentcount compute root path computerootpath i folder ifolder resource first level package names firstlevelpackagenames has default package hasdefaultpackage source path segment count sourcepathsegmentcount max has default package hasdefaultpackage check member java file has java source file hasjavasourcefile max org eclipse jdt internal core util util is java like file name isjavalikefilename resources get name getname has java source file hasjavasourcefile has java source file hasjavasourcefile i path ipath full path fullpath container get full path getfullpath i path ipath root path entry rootpathentry full path fullpath remove first segments removefirstsegments source path segment count sourcepathsegmentcount set device setdevice add root path entry rootpathentry core exception coreexception print stack trace printstacktrace i source element requestor isourceelementrequestor enter type entertype type info typeinfo type info typeinfo type depth typedepth grow type depth typedepth types length system arraycopy types types i type itype type depth typedepth type depth typedepth system arraycopy type name ranges typenameranges type name ranges typenameranges source range sourcerange type depth typedepth type depth typedepth system arraycopy type declaration starts typedeclarationstarts type declaration starts typedeclarationstarts type depth typedepth type depth typedepth system arraycopy member name membername member name membername string type depth typedepth type depth typedepth system arraycopy member declaration start memberdeclarationstart member declaration start memberdeclarationstart type depth typedepth type depth typedepth system arraycopy member name range membernamerange member name range membernamerange source range sourcerange type depth typedepth type depth typedepth system arraycopy method parameter types methodparametertypes method parameter types methodparametertypes type depth typedepth type depth typedepth system arraycopy method parameter names methodparameternames method parameter names methodparameternames type depth typedepth type depth typedepth system arraycopy type modifiers typemodifiers type modifiers typemodifiers type depth typedepth type depth typedepth type info typeinfo length anonymous counter anonymouscounter anonymous counter anonymouscounter anonymous class name anonymousclassname types type depth typedepth get type gettype binary type binarytype get element name getelementname types type depth typedepth get type gettype string type info typeinfo types type depth typedepth get type gettype string type info typeinfo type name ranges typenameranges type depth typedepth source range sourcerange type info typeinfo name source start namesourcestart type info typeinfo name source end namesourceend type info typeinfo name source start namesourcestart type declaration starts typedeclarationstarts type depth typedepth type info typeinfo declaration start declarationstart i type itype current type currenttype types type depth typedepth type parameters type info typeinfo type parameters typeparameters length type info typeinfo type parameters typeparameters length length type parameter info typeparameterinfo type parameter info typeparameterinfo type info typeinfo type parameters typeparameters i type parameter itypeparameter type parameter typeparameter current type currenttype get type parameter gettypeparameter string type parameter info typeparameterinfo set source range setsourcerange type parameter typeparameter source range sourcerange type parameter info typeparameterinfo declaration start declarationstart type parameter info typeparameterinfo declaration end declarationend type parameter info typeparameterinfo declaration start declarationstart source range sourcerange type parameter info typeparameterinfo name source start namesourcestart type parameter info typeparameterinfo name source end namesourceend type parameter info typeparameterinfo name source start namesourcestart type modifiers type modifiers typemodifiers type depth typedepth type info typeinfo modifiers categories add categories addcategories current type currenttype type info typeinfo categories i source element requestor isourceelementrequestor enter compilation unit entercompilationunit i source element requestor isourceelementrequestor enter constructor enterconstructor method info methodinfo method info methodinfo enter abstract method enterabstractmethod method info methodinfo i source element requestor isourceelementrequestor enter field enterfield field info fieldinfo field info fieldinfo type depth typedepth member declaration start memberdeclarationstart type depth typedepth field info fieldinfo declaration start declarationstart member name range membernamerange type depth typedepth source range sourcerange field info fieldinfo name source start namesourcestart field info fieldinfo name source end namesourceend field info fieldinfo name source start namesourcestart string field name fieldname string field info fieldinfo member name membername type depth typedepth field name fieldname categories i type itype current type currenttype types type depth typedepth i field ifield field current type currenttype get field getfield field name fieldname add categories addcategories field field info fieldinfo categories i source element requestor isourceelementrequestor enter initializer enterinitializer declaration source start declarationsourcestart modifiers i source element requestor isourceelementrequestor enter method entermethod method info methodinfo method info methodinfo enter abstract method enterabstractmethod method info methodinfo enter abstract method enterabstractmethod method info methodinfo method info methodinfo type depth typedepth member name membername type depth typedepth string method info methodinfo member name range membernamerange type depth typedepth source range sourcerange method info methodinfo name source start namesourcestart method info methodinfo name source end namesourceend method info methodinfo name source start namesourcestart member declaration start memberdeclarationstart type depth typedepth method info methodinfo declaration start declarationstart i type itype current type currenttype types type depth typedepth cur ren type modifiers currentypemodifiers type modifiers typemodifiers type depth typedepth parameter types parametertypes method info methodinfo parameter types parametertypes method info methodinfo is constructor isconstructor current type currenttype get declaring type getdeclaringtype flags is static isstatic cur ren type modifiers currentypemodifiers i type itype declaring type declaringtype current type currenttype get declaring type getdeclaringtype string declaring type name declaringtypename declaring type declaringtype get element name getelementname declaring type name declaringtypename length i class file iclassfile class file classfile declaring type declaringtype get class file getclassfile length parameter types parametertypes parameter types parametertypes length new parameter types newparametertypes length declaring type name declaringtypename class file classfile get element name getelementname declaring type name declaringtypename declaring type name declaringtypename substring declaring type name declaringtypename index of indexof new parameter types newparametertypes declaring type name declaringtypename to char array tochararray length system arraycopy parameter types parametertypes new parameter types newparametertypes length method parameter types methodparametertypes type depth typedepth new parameter types newparametertypes length parameter types parametertypes parameter types parametertypes length new parameter types newparametertypes length new parameter types newparametertypes declaring type name declaringtypename to char array tochararray length system arraycopy parameter types parametertypes new parameter types newparametertypes length method parameter types methodparametertypes type depth typedepth new parameter types newparametertypes method parameter types methodparametertypes type depth typedepth parameter types parametertypes method parameter names methodparameternames type depth typedepth method info methodinfo parameter names parameternames i method imethod method current type currenttype get method getmethod member name membername type depth typedepth convert type names to sigs converttypenamestosigs method parameter types methodparametertypes type depth typedepth type parameters method info methodinfo type parameters typeparameters length method info methodinfo type parameters typeparameters length length type parameter info typeparameterinfo type parameter info typeparameterinfo method info methodinfo type parameters typeparameters i type parameter itypeparameter type parameter typeparameter method get type parameter gettypeparameter string type parameter info typeparameterinfo set source range setsourcerange type parameter typeparameter source range sourcerange type parameter info typeparameterinfo declaration start declarationstart type parameter info typeparameterinfo declaration end declarationend type parameter info typeparameterinfo declaration start declarationstart source range sourcerange type parameter info typeparameterinfo name source start namesourcestart type parameter info typeparameterinfo name source end namesourceend type parameter info typeparameterinfo name source start namesourcestart parameters infos method info methodinfo parameter infos parameterinfos length method info methodinfo parameter infos parameterinfos length length parameter info parameterinfo parameter info parameterinfo method info methodinfo parameter infos parameterinfos local variable element key localvariableelementkey key local variable element key localvariableelementkey method string parameter info parameterinfo source range sourcerange all ranges allranges source range sourcerange source range sourcerange parameter info parameterinfo declaration start declarationstart parameter info parameterinfo declaration end declarationend parameter info parameterinfo declaration start declarationstart source range sourcerange parameter info parameterinfo name source start namesourcestart parameter info parameterinfo name source end namesourceend parameter info parameterinfo name source start namesourcestart parameters ranges parametersranges key all ranges allranges parameter info parameterinfo modifiers final parameters finalparameters final parameters finalparameters hash set hashset final parameters finalparameters add key categories add categories addcategories method method info methodinfo categories i source element requestor isourceelementrequestor exit type exittype declaration end declarationend type depth typedepth i type itype current type currenttype types type depth typedepth set source range setsourcerange current type currenttype source range sourcerange type declaration starts typedeclarationstarts type depth typedepth declaration end declarationend type declaration starts typedeclarationstarts type depth typedepth type name ranges typenameranges type depth typedepth type depth typedepth i source element requestor isourceelementrequestor exit compilation unit exitcompilationunit declaration end declarationend i source element requestor isourceelementrequestor exit constructor exitconstructor declaration end declarationend exit abstract method exitabstractmethod declaration end declarationend i source element requestor isourceelementrequestor exit field exitfield initialization start initializationstart declaration end declarationend declaration source end declarationsourceend type depth typedepth i type itype current type currenttype types type depth typedepth set source range setsourcerange current type currenttype get field getfield member name membername type depth typedepth source range sourcerange member declaration start memberdeclarationstart type depth typedepth declaration end declarationend member declaration start memberdeclarationstart type depth typedepth member name range membernamerange type depth typedepth i source element requestor isourceelementrequestor exit initializer exitinitializer declaration end declarationend method i source element requestor isourceelementrequestor exit method exitmethod declaration end declarationend expression default value defaultvalue exit abstract method exitabstractmethod declaration end declarationend exit abstract method exitabstractmethod declaration end declarationend type depth typedepth i type itype current type currenttype types type depth typedepth source range sourcerange source range sourcerange source range sourcerange member declaration start memberdeclarationstart type depth typedepth declaration end declarationend member declaration start memberdeclarationstart type depth typedepth i method imethod method current type currenttype get method getmethod member name membername type depth typedepth convert type names to sigs converttypenamestosigs method parameter types methodparametertypes type depth typedepth set source range setsourcerange method source range sourcerange member name range membernamerange type depth typedepth set method parameter names setmethodparameternames method method parameter names methodparameternames type depth typedepth locates returns source code binary type source mapper sourcemapper zip file returns code code source code find source findsource i type itype type i binary type ibinarytype info type is binary isbinary string simple source file name simplesourcefilename binary type binarytype type get source file name getsourcefilename info simple source file name simplesourcefilename find source findsource type simple source file name simplesourcefilename locates returns source code binary type source mapper sourcemapper zip file returns code code source code simple source file name simplesourcefilename java file enclosing folder create type java find source findsource i type itype type string simple source file name simplesourcefilename time verbose time system current time millis currenttimemillis package fragment packagefragment pkg frag pkgfrag package fragment packagefragment type get package fragment getpackagefragment string org eclipse jdt internal core util util concat with concatwith pkg frag pkgfrag names simple source file name simplesourcefilename source java model manager javamodelmanager java model manager javamodelmanager java model manager javamodelmanager get java model manager getjavamodelmanager cache zip files open operation java model manager javamodelmanager cache zip files cachezipfiles root path rootpath source get source for root path getsourceforrootpath root path rootpath source compute all root paths computeallrootpaths type root paths rootpaths loop iterator iterator root paths rootpaths iterator iterator has next hasnext string current root path currentrootpath string iterator current root path currentrootpath equals root path rootpath source get source for root path getsourceforrootpath current root path currentrootpath source remember root path root path rootpath current root path currentrootpath loop clean cached zip files java model manager javamodelmanager flush zip files flushzipfiles verbose nls nls system println spent system current time millis currenttimemillis time type get element name getelementname source get source for root path getsourceforrootpath string current root path currentrootpath string string new full name newfullname current root path currentrootpath equals i package fragment root ipackagefragmentroot package root packageroot path nls current root path currentrootpath ends with endswith new full name newfullname current root path currentrootpath new full name newfullname current root path currentrootpath new full name newfullname find source findsource new full name newfullname find source findsource string full name fullname source object target java model javamodel get target gettarget source path sourcepath string char set charset target i container icontainer i resource iresource res i container icontainer target find member findmember full name fullname res i file ifile order preference char set charset supplied encoding default encoding defaultencoding order implicit encoding source attachment encoding has n hasn explicitly char set charset i file ifile res get charset getcharset encoding core exception coreexception source org eclipse jdt internal core util util get resource contents as char array getresourcecontentsaschararray i file ifile res char set charset encoding default encoding defaultencoding encoding char set charset java model exception javamodelexception resource workspace encoding resource target i file ifile char set charset i file ifile target get charset getcharset encoding core exception coreexception entry zip entry zipentry entry zip file zipfile zip java model manager javamodelmanager manager java model manager javamodelmanager get java model manager getjavamodelmanager zip manager get zip file getzipfile source path sourcepath entry zip get entry getentry full name fullname entry read source code source read source readsource entry zip char set charset core exception coreexception handle manager close zip file closezipfile zip source get flags getflags i java element ijavaelement element element get element type getelementtype i java element ijavaelement local variable local variable element key localvariableelementkey key local variable element key localvariableelementkey element get parent getparent element get element name getelementname final parameters finalparameters final parameters finalparameters key flags acc final accfinal returns source range sourcerange element source range element source range sourcerange get name range getnamerange i java element ijavaelement element element get element type getelementtype i java element ijavaelement method i member imember element is binary isbinary i java element ijavaelement get unqualified method handle getunqualifiedmethodhandle i method imethod element source ranges sourceranges element get unqualified method handle getunqualifiedmethodhandle i method imethod element element i java element ijavaelement type parameter i java element ijavaelement parent element get parent getparent parent get element type getelementtype i java element ijavaelement method i method imethod method i method imethod parent method is binary isbinary i java element ijavaelement get unqualified method handle getunqualifiedmethodhandle method source ranges sourceranges method i method imethod get unqualified method handle getunqualifiedmethodhandle method method i method imethod element method get type parameter gettypeparameter element get element name getelementname i java element ijavaelement local variable local variable element key localvariableelementkey key local variable element key localvariableelementkey element get parent getparent element get element name getelementname source range sourcerange ranges source range sourcerange parameters ranges parametersranges key ranges unknown range ranges source range sourcerange ranges source range sourcerange source ranges sourceranges element ranges unknown range ranges returns parameters names method parameter names method get method parameter names getmethodparameternames i method imethod method method is binary isbinary i java element ijavaelement get unqualified method handle getunqualifiedmethodhandle method parameter names parameternames method i method imethod get unqualified method handle getunqualifiedmethodhandle method method i method imethod parameters parameter names parameternames method parameters parameters returns code source range sourcerange code element source range element source range sourcerange get source range getsourcerange i java element ijavaelement element element get element type getelementtype i java element ijavaelement method i member imember element is binary isbinary i java element ijavaelement get unqualified method handle getunqualifiedmethodhandle i method imethod element source ranges sourceranges element get unqualified method handle getunqualifiedmethodhandle i method imethod element element i java element ijavaelement type parameter i java element ijavaelement parent element get parent getparent parent get element type getelementtype i java element ijavaelement method i method imethod method i method imethod parent method is binary isbinary i java element ijavaelement get unqualified method handle getunqualifiedmethodhandle method source ranges sourceranges method i method imethod get unqualified method handle getunqualifiedmethodhandle method method i method imethod element method get type parameter gettypeparameter element get element name getelementname i java element ijavaelement local variable local variable element key localvariableelementkey key local variable element key localvariableelementkey element get parent getparent element get element name getelementname source range sourcerange ranges source range sourcerange parameters ranges parametersranges key ranges unknown range ranges source range sourcerange ranges source range sourcerange source ranges sourceranges element ranges unknown range ranges returns type code type name typename code returns classes i type itype get type gettype string type name typename type name typename length i java element ijavaelement class file classfile binary type binarytype get parent getparent string class file name classfilename class file classfile get element name getelementname string buffer stringbuffer new class file name newclassfilename string buffer stringbuffer last dollar lastdollar class file name classfilename last index of lastindexof last dollar lastdollar new class file name newclassfilename append class file name classfilename char at charat new class file name newclassfilename append integer to string tostring anonymous counter anonymouscounter package fragment packagefragment pkg package fragment packagefragment class file classfile get parent getparent binary type binarytype class file classfile pkg new class file name newclassfilename to string tostring type name typename binary type binarytype get element name getelementname equals type name typename binary type binarytype type depth typedepth binary type binarytype types type depth typedepth get type gettype type name typename creates handle parameter types fully qualified correct source i java element ijavaelement get unqualified method handle getunqualifiedmethodhandle i method imethod method no dollar nodollar has dollar hasdollar string qualified parameter types qualifiedparametertypes method get parameter types getparametertypes string unqualified parameter types unqualifiedparametertypes string qualified parameter types qualifiedparametertypes length qualified parameter types qualifiedparametertypes length string buffer stringbuffer unqualified type sig unqualifiedtypesig string buffer stringbuffer get unqualified type signature getunqualifiedtypesignature qualified parameter types qualifiedparametertypes start qualified parameter types qualifiedparametertypes length unqualified type sig unqualifiedtypesig no dollar nodollar unqualified parameter types unqualifiedparametertypes unqualified type sig unqualifiedtypesig to string tostring has dollar hasdollar unqualified parameter types unqualifiedparametertypes last index of lastindexof i java element ijavaelement result i java element ijavaelement result i type itype method get parent getparent get method getmethod method get element name getelementname unqualified parameter types unqualifiedparametertypes has dollar hasdollar result result result get unqualified type signature getunqualifiedtypesignature string qualified type sig qualifiedtypesig start length string buffer stringbuffer unqualified type sig unqualifiedtypesig no dollar nodollar first char firstchar qualified type sig qualifiedtypesig char at charat start start sig start sigstart first pass firstpass start length current qualified type sig qualifiedtypesig char at charat current signature array signature signature unqualified type sig unqualifiedtypesig append current start start first char firstchar qualified type sig qualifiedtypesig char at charat start signature resolved signature unresolved signature type variable sig start sigstart start sig start sigstart signature signature start first pass firstpass signature star unqualified type sig unqualifiedtypesig append current start start first char firstchar qualified type sig qualifiedtypesig char at charat start signature signature dot start signature signature signature signature signature signature signature signature sig start sigstart unqualified type sig unqualifiedtypesig append current first char firstchar signature resolved signature unresolved signature type variable unqualified type sig unqualifiedtypesig append signature unresolved no dollar nodollar last dollar lastdollar qualified type sig qualifiedtypesig last index of lastindexof last dollar lastdollar start start last dollar lastdollar start length current qualified type sig qualifiedtypesig char at charat current signature start unqualified type sig unqualifiedtypesig append current get unqualified type signature getunqualifiedtypesignature qualified type sig qualifiedtypesig length unqualified type sig unqualifiedtypesig no dollar nodollar qualified type sig qualifiedtypesig char at charat signature unqualified type sig unqualifiedtypesig append signature signature unqualified type sig unqualifiedtypesig append current unqualified type sig unqualifiedtypesig append current length primitive type wildcard unqualified type sig unqualifiedtypesig append qualified type sig qualifiedtypesig substring start maps source code binary type children map source mapsource i type itype type contents i binary type ibinarytype info map source mapsource type contents info maps source code binary type children java element passed finds range java element storing i source range isourcerange map source mapsource i type itype type contents i binary type ibinarytype info i java element ijavaelement element to find elementtofind binary type binarytype binary type binarytype type check mapped source ranges sourceranges type element to find elementtofind get name range getnamerange element to find elementtofind imports table importstable remove binary type binarytype imports counter table importscountertable remove binary type binarytype searched element searchedelement element to find elementtofind types i type itype type declaration starts typedeclarationstarts type name ranges typenameranges source range sourcerange type modifiers typemodifiers type depth typedepth member declaration start memberdeclarationstart member name membername string member name range membernamerange source range sourcerange method parameter types methodparametertypes method parameter names methodparameternames anonymous counter anonymouscounter hash map hashmap old source ranges oldsourceranges element to find elementtofind old source ranges oldsourceranges hash map hashmap source ranges sourceranges clone i problem factory iproblemfactory factory default problem factory defaultproblemfactory source element parser sourceelementparser parser anonymous class name anonymousclassname info info i binary type ibinarytype binary type binarytype get element info getelementinfo java model exception javamodelexception is anonymous class isanonymousclass info is anonymous isanonymous full name fullname info get name getname is anonymous class isanonymousclass string elt name eltname binary type binarytype get parent getparent get element name getelementname elt name eltname elt name eltname substring elt name eltname last index of lastindexof elt name eltname length anonymous class name anonymousclassname integer parse int parseint elt name eltname number format exception numberformatexception do full parse dofullparse has to retrieve source ranges for local class hastoretrievesourcerangesforlocalclass full name fullname parser source element parser sourceelementparser factory compiler options compileroptions options do full parse dofullparse optimize string literals disable javadoc parsing parser javadoc parser javadocparser check doc comment checkdoccomment i java element ijavaelement java element javaelement binary type binarytype get compilation unit getcompilationunit java element javaelement java element javaelement binary type binarytype get parent getparent parser parse compilation unit parsecompilationunit basic compilation unit basiccompilationunit contents binary type binarytype source file name sourcefilename info java element javaelement do full parse dofullparse progress element to find elementtofind i source range isourcerange range get name range getnamerange element to find elementtofind range element to find elementtofind source ranges sourceranges old source ranges oldsourceranges binary type binarytype searched element searchedelement types type declaration starts typedeclarationstarts type name ranges typenameranges type depth typedepth read source readsource zip entry zipentry entry zip file zipfile zip string char set charset bytes util get zip entry byte content getzipentrybytecontent entry zip bytes order preference char set charset supplied encoding default encoding defaultencoding order util bytes to char bytestochar bytes char set charset encoding default encoding defaultencoding encoding char set charset io exception ioexception sets mapping method parameter names parameter names parameternames set method parameter names setmethodparameternames i method imethod method parameter names parameternames parameter names parameternames parameter names parameternames char operation charoperation parameter names parameternames method parameter names parameternames sets mapping element source ranges source range range source ranges sourceranges set source range setsourcerange i java element ijavaelement element source range sourcerange source range sourcerange source range sourcerange name range namerange source ranges sourceranges element source range sourcerange source range sourcerange name range namerange array imports attached source binary type get imports getimports binary type binarytype type imports imports table importstable type imports imports counter importscounter integer imports counter table importscountertable type int value intvalue imports length imports counter importscounter system arraycopy imports imports imports counter importscounter imports counter importscounter imports table importstable type imports imports has to retrieve source ranges for local class hastoretrievesourcerangesforlocalclass elt name eltname elt name eltname length elt name eltname length dollar index dollarindex char operation charoperation index of indexof elt name eltname dollar index dollarindex name start namestart dollar index dollarindex name start namestart length character is digit isdigit elt name eltname name start namestart dollar index dollarindex char operation charoperation index of indexof elt name eltname name start namestart