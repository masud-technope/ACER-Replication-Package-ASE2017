copyright walter harley rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors eclipse cafewalter initial api implementation h arry harry terkelsen het google contribution bug annotation processing broken build batched org eclipse jdt apt pluggable tests java util list org eclipse core resources i project iproject org eclipse core runtime i path ipath org eclipse jdt apt core util apt config aptconfig org eclipse jdt apt pluggable tests processors builder tester buildertester bug processor org eclipse jdt apt pluggable tests processors builder tester buildertester bugs proc bugsproc org eclipse jdt apt pluggable tests processors builder tester buildertester inherited anno proc inheritedannoproc org eclipse jdt apt pluggable tests processors builder tester buildertester test final round proc testfinalroundproc org eclipse jdt core i java project ijavaproject org eclipse jdt core tests builder problem org eclipse jdt internal core builder abstract image builder abstractimagebuilder junit framework test junit framework test suite testsuite tests covering ide ability process correct files builder tests buildertests test base testbase builder tests buildertests string test suite test suite testsuite builder tests buildertests verify type generated annotations processed compiled jsr spec vague generate type happen types generated javac behaves href http bugs eclipse org bug href http bugs sun view bug bug bug javac sun fixed test final round testfinalround throwable processor test status processorteststatus reset test final round proc testfinalroundproc reset num rounds resetnumrounds i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath i path ipath root proj path projpath append src final round test trigger finalroundtesttrigger processor generate files runs generates java type annotated final round test trigger finalroundtesttrigger env add class addclass root foo org eclipse jdt apt pluggable tests annotations final round test trigger finalroundtesttrigger final round test trigger finalroundtesttrigger foo apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems processor total rounds compiled classes include foo final round gen finalroundgen assert equals assertequals test final round proc testfinalroundproc get num rounds getnumrounds expecting unique compiled classes expectinguniquecompiledclasses string foo final round gen finalroundgen verify superclass annotated inherited annotation treated annotation href http bugs eclipse org bug disabled test inherited annotation testinheritedannotation throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath i path ipath root proj path projpath append src env add class addclass root base org eclipse jdt apt pluggable tests annotations inherited trigger inheritedtrigger inherited trigger inheritedtrigger base base treated annotated inherited trigger inheritedtrigger env add class addclass root base apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems list string elements inherited anno proc inheritedannoproc get processed elements getprocessedelements assert true asserttrue elements base assert true asserttrue elements assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors modify base verify base subclass processed inherited anno proc inheritedannoproc clear processed elements clearprocessedelements env add class addclass root base org eclipse jdt apt pluggable tests annotations inherited trigger inheritedtrigger inherited trigger inheritedtrigger base incremental build incrementalbuild expecting no problems expectingnoproblems elements inherited anno proc inheritedannoproc get processed elements getprocessedelements assert true asserttrue elements base assert true asserttrue elements assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors modify subclass verify processed inherited anno proc inheritedannoproc clear processed elements clearprocessedelements env add class addclass root base incremental build incrementalbuild expecting no problems expectingnoproblems elements inherited anno proc inheritedannoproc get processed elements getprocessedelements assert true asserttrue elements assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors deleting foo event fooevent caused reference foo event fooevent foo impl fooimpl type turn causing binding passed apt href http bugs eclipse org bug test bug testbug throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath i path ipath root proj path projpath append src env add class addclass root test foo event fooevent test foo event fooevent handler handle foo event fooevent event i path ipath foo impl class fooimplclass env add class addclass root test foo impl fooimpl test foo impl fooimpl foo event fooevent handler override handle foo event fooevent event apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems delete foo event fooevent recompile proj find member findmember src test foo event fooevent java delete incremental build incrementalbuild expecting problems for expectingproblemsfor foo impl class fooimplclass problem foo event fooevent resolved type resource project name projectname src test foo impl fooimpl java range category severity problem foo event fooevent resolved type resource project name projectname src test foo impl fooimpl java range category severity https bugs eclipse org bugs bug cgi test bug testbug throwable org eclipse jdt internal core builder abstract image builder abstractimagebuilder max org eclipse jdt internal core builder abstract image builder abstractimagebuilder max processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject ide test utils idetestutils copy resources copyresources proj targets bug src targets bug apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems assert equals assertequals elements processed bugs proc bugsproc get unprocessed elements getunprocessedelements assert equals assertequals elements processed bugs proc bugsproc get num rounds getnumrounds org eclipse jdt internal core builder abstract image builder abstractimagebuilder max test bug testbug throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject ide test utils idetestutils copy resources copyresources proj targets bug src targets bug apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems assert equals assertequals processed bug processor count https bugs eclipse org bugs bug cgi test bug testbug throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject ide test utils idetestutils copy resources copyresources proj targets bug src targets bug apt config aptconfig set enabled setenabled jproj full build fullbuild compiler errors apt injected expecting no problems expectingnoproblems problem problems env get problems for getproblemsfor jproj get project getproject get full path getfullpath org eclipse jdt apt pluggable core compile problem compileproblem string buffer stringbuffer buf string buffer stringbuffer length problems length length problem problem problems buf append problem get message getmessage length buf append assert equals assertequals reported problems error message n yet nyet error message buf to string tostring test bug testbug exception processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject ide test utils idetestutils copy resources copyresources proj targets bug src targets bug apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems test batched build testbatchedbuild throwable abstract image builder abstractimagebuilder max i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath i path ipath root proj path projpath append src i path ipath package path packagepath root append test force build batched abstract image builder abstractimagebuilder max processor test status processorteststatus reset env add class addclass root test foo test org eclipse jdt apt pluggable tests annotations gen class genclass gen class genclass foo gen foogen pkg test foo bar bar env add class addclass root test bar test org eclipse jdt apt pluggable tests annotations gen class genclass gen class genclass bar gen bargen pkg test bar foo foo apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems expecting unique compiled classes expectinguniquecompiledclasses string test foo test bar test foo gen foogen test bar gen bargen abstract image builder abstractimagebuilder max env remove class removeclass package path packagepath foo env remove class removeclass package path packagepath bar env remove class removeclass package path packagepath foo gen foogen env remove class removeclass package path packagepath bar gen bargen test bug testbug throwable abstract image builder abstractimagebuilder max i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath i path ipath root proj path projpath append src i path ipath package path packagepath root append test force build batched abstract image builder abstractimagebuilder max processor test status processorteststatus reset env add class addclass root test foo test org eclipse jdt apt pluggable tests annotations gen class genclass org eclipse jdt apt pluggable tests annotations message javax tools diagnostic kind gen class genclass foo gen foogen pkg test rounds message text apt message kind error foo foo gen foogen bar bar env add class addclass root test bar test bar foo foo apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems expecting unique compiled classes expectinguniquecompiledclasses string test foo test bar test foo gen foogen test foo gen gen foogengen abstract image builder abstractimagebuilder max env remove class removeclass package path packagepath foo env remove class removeclass package path packagepath bar env remove class removeclass package path packagepath foo gen foogen