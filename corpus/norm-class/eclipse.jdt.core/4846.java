copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors ibm corporation initial api implementation nick teryaev bug https bugs eclipse org bugs bug cgi org eclipse jdt internal compiler ast org eclipse jdt internal compiler ast visitor astvisitor org eclipse jdt internal compiler flow org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler codegen org eclipse jdt internal compiler lookup message send messagesend expression invocation site invocationsite expression receiver selector expression arguments exact binding lookup method binding methodbinding binding actual binding code generation synthetic accessor method binding methodbinding codegen binding codegenbinding synthetic accessor emulation method binding methodbinding synthetic accessor syntheticaccessor method invocation type inference type binding typebinding expected type expectedtype start name source position namesourceposition type binding typebinding receiver type receivertype qualifying type qualifyingtype type binding typebinding generic cast genericcast type reference typereference type arguments typearguments type binding typebinding generic type arguments generictypearguments flow info flowinfo analyse code analysecode block scope blockscope current scope currentscope flow context flowcontext flow context flowcontext flow info flowinfo flow info flowinfo flow info flowinfo receiver analyse code analysecode current scope currentscope flow context flowcontext flow info flowinfo binding is static isstatic unconditional inits unconditionalinits arguments length arguments length length flow info flowinfo arguments analyse code analysecode current scope currentscope flow context flowcontext flow info flowinfo unconditional inits unconditionalinits reference binding referencebinding thrown exceptions thrownexceptions thrown exceptions thrownexceptions binding thrown exceptions thrownexceptions no exceptions noexceptions verify exceptions thrown expression caught method flow context flowcontext check exception handlers checkexceptionhandlers thrown exceptions thrownexceptions flow info flowinfo current scope currentscope manage synthetic access if necessary managesyntheticaccessifnecessary current scope currentscope flow info flowinfo flow info flowinfo org eclipse jdt internal compiler ast expression compute conversion computeconversion org eclipse jdt internal compiler lookup scope org eclipse jdt internal compiler lookup type binding typebinding org eclipse jdt internal compiler lookup type binding typebinding compute conversion computeconversion scope scope type binding typebinding runtime time type runtimetimetype type binding typebinding compile time type compiletimetype runtime time type runtimetimetype compile time type compiletimetype fact type expectation fully str ict strict binding binding is valid binding isvalidbinding method binding methodbinding original binding originalbinding binding original original binding originalbinding binding extra needed method type type variable original binding originalbinding return type returntype tag bits tagbits tag bits tagbits has type variable hastypevariable runtime time type runtimetimetype object generic cast genericcast original binding originalbinding return type returntype generic cast genericcast runtime time type runtimetimetype compute conversion computeconversion scope runtime time type runtimetimetype compile time type compiletimetype message send messagesend code generation param current scope currentscope org eclipse jdt internal compiler lookup block scope blockscope param code stream codestream org eclipse jdt internal compiler codegen code stream codestream param value required valuerequired generate code generatecode block scope blockscope current scope currentscope code stream codestream code stream codestream value required valuerequired code stream codestream position generate receiver enclosing instance access is static isstatic codegen binding codegenbinding is static isstatic access is static isstatic bits depthmask receiver is implicit this isimplicitthis method reached emulation implicit access reference binding referencebinding target type targettype current scope currentscope enclosing source type enclosingsourcetype enclosing type at enclosingtypeat bits depthmask depthshift object path current scope currentscope get emulation path getemulationpath target type targettype exact match enclosing arg code stream codestream generate outer access generateouteraccess path target type targettype current scope currentscope receiver generate code generatecode current scope currentscope code stream codestream is static isstatic generate arguments arguments max arguments length max arguments generate code generatecode current scope currentscope code stream codestream actual message invocation synthetic accessor syntheticaccessor is static isstatic code stream codestream invokestatic codegen binding codegenbinding receiver is super issuper codegen binding codegenbinding is private isprivate code stream codestream invokespecial codegen binding codegenbinding codegen binding codegenbinding declaring class declaringclass is interface isinterface code stream codestream invokeinterface codegen binding codegenbinding code stream codestream invokevirtual codegen binding codegenbinding code stream codestream invokestatic synthetic accessor syntheticaccessor operation returned value required valuerequired implicit conversion code stream codestream generate implicit conversion generateimplicitconversion implicit conversion implicitconversion generic cast genericcast code stream codestream check cast checkcast generic cast genericcast pop binding return type returntype code stream codestream pop code stream codestream pop highlight selector code stream codestream record positions from recordpositionsfrom name source position namesourceposition org eclipse jdt internal compiler lookup invocation site invocationsite generic type arguments generictypearguments type binding typebinding generic type arguments generictypearguments generic type arguments generictypearguments is super access issuperaccess receiver is super issuper is type access istypeaccess receiver receiver is type reference istypereference manage synthetic access if necessary managesyntheticaccessifnecessary block scope blockscope current scope currentscope flow info flowinfo flow info flowinfo flow info flowinfo is reachable isreachable method parameterized type original method codegen time codegen binding codegenbinding binding original binding is private isprivate depth implicit explicit access method binding methodbinding can be seen by canbeseenby current scope currentscope enclosing source type enclosingsourcetype codegen binding codegenbinding declaring class declaringclass synthetic accessor syntheticaccessor source type binding sourcetypebinding codegen binding codegenbinding declaring class declaringclass add synthetic method addsyntheticmethod codegen binding codegenbinding is super access issuperaccess current scope currentscope problem reporter problemreporter need to emulate method access needtoemulatemethodaccess codegen binding codegenbinding qualified receiver qualified super reference qualifiedsuperreference qualified emulation source type binding sourcetypebinding destination type destinationtype source type binding sourcetypebinding qualified super reference qualifiedsuperreference receiver current compatible type currentcompatibletype synthetic accessor syntheticaccessor destination type destinationtype add synthetic method addsyntheticmethod codegen binding codegenbinding is super access issuperaccess current scope currentscope problem reporter problemreporter need to emulate method access needtoemulatemethodaccess codegen binding codegenbinding binding is protected isprotected source type binding sourcetypebinding enclosing source type enclosingsourcetype bits depthmask codegen binding codegenbinding declaring class declaringclass get package getpackage enclosing source type enclosingsourcetype current scope currentscope enclosing source type enclosingsourcetype get package getpackage source type binding sourcetypebinding current compatible type currentcompatibletype source type binding sourcetypebinding enclosing source type enclosingsourcetype enclosing type at enclosingtypeat bits depthmask depthshift synthetic accessor syntheticaccessor current compatible type currentcompatibletype add synthetic method addsyntheticmethod codegen binding codegenbinding is super access issuperaccess current scope currentscope problem reporter problemreporter need to emulate method access needtoemulatemethodaccess codegen binding codegenbinding object implicit method call binding declaring class declaringclass qualifying type qualifyingtype qualifying type qualifyingtype is array type isarraytype current scope currentscope environment options targetjdk class file constants classfileconstants jdk receiver is implicit this isimplicitthis codegen binding codegenbinding is static isstatic change object methods binding declaring class declaringclass object binding declaring class declaringclass can be seen by canbeseenby current scope currentscope codegen binding codegenbinding current scope currentscope enclosing source type enclosingsourcetype get updated method binding getupdatedmethodbinding codegen binding codegenbinding reference binding referencebinding qualifying type qualifyingtype erasure post target array clone invocations qualified array type handled array type clone method binding resolution scope updated method binding updatedmethodbinding string buffer stringbuffer print expression printexpression indent string buffer stringbuffer output receiver is implicit this isimplicitthis receiver print expression printexpression output append type arguments typearguments nls output append max type arguments typearguments length max type arguments typearguments print output nls output append type arguments typearguments max print output output append nls output append selector append arguments arguments length nls output append arguments print expression printexpression output output append type binding typebinding resolve type resolvetype block scope blockscope scope answer signature type base type pro motion promotion constant notaconstant receiver cast receivercast args contain cast argscontaincast receiver cast expression castexpression check receiver bits ignore need for cast check k ignoreneedforcastcheckmask receiver cast receivercast qualifying type qualifyingtype receiver type receivertype receiver resolve type resolvetype scope receiver cast receivercast receiver type receivertype change declaring receiver type identity not ified notified cast expression castexpression receiver expression resolved type resolvedtype receiver type receivertype scope problem reporter problemreporter unnecessary cast unnecessarycast cast expression castexpression receiver resolve type arguments constructor call type arguments typearguments length type arguments typearguments length type checks typechecks arguments arg has error arghaserror generic type arguments generictypearguments type binding typebinding length length generic type arguments generictypearguments type arguments typearguments resolve type resolvetype scope arg has error arghaserror arg has error arghaserror check args resolved type binding typebinding argument types argumenttypes no parameters noparameters arguments type checks typechecks arguments arg has error arghaserror length arguments length argument types argumenttypes type binding typebinding length length expression argument arguments argument cast expression castexpression check argument bits ignore need for cast check k ignoreneedforcastcheckmask args contain cast argscontaincast argument types argumenttypes argument resolve type resolvetype scope arg has error arghaserror arg has error arghaserror receiver type receivertype reference binding referencebinding record selector match clients hint method match binding scope find method findmethod reference binding referencebinding receiver type receivertype selector type binding typebinding receiver type receivertype base type receive message receiver type receivertype is base type isbasetype scope problem reporter problemreporter error no method for errornomethodfor receiver type receivertype argument types argumenttypes binding receiver is implicit this isimplicitthis scope get implicit method getimplicitmethod selector argument types argumenttypes scope get method getmethod receiver type receivertype selector argument types argumenttypes binding is valid binding isvalidbinding binding declaring class declaringclass receiver type receivertype reference binding referencebinding binding declaring class declaringclass reference binding referencebinding receiver type receivertype scope problem reporter problemreporter error no method for errornomethodfor receiver type receivertype argument types argumenttypes scope problem reporter problemreporter invalid method invalidmethod binding method binding methodbinding closest match closestmatch problem method binding problemmethodbinding binding closest match closestmatch binding problem id problemid problem reasons problemreasons ambiguous problem reasons problemreasons not visible notvisible problem reasons problemreasons non static reference in constructor invocation nonstaticreferenceinconstructorinvocation problem reasons problemreasons non static reference in static context nonstaticreferenceinstaticcontext problem reasons problemreasons receiver type not visible receivertypenotvisible problem reasons problemreasons parameter bound mismatch parameterboundmismatch steal return type returntype cases listed closest match closestmatch resolved type resolvedtype closest match closestmatch return type returntype record closest match clients hint method match closest match closestmatch binding closest match closestmatch closest match closestmatch is private isprivate scope is defined in method isdefinedinmethod closest match closestmatch ignore cases method direct rec ursions recursions closest match closestmatch original modifiers acc private used accprivateused resolved type resolvedtype binding is static isstatic receiver type name reference namereference bound type receiver name reference namereference name reference namereference receiver bits binding ids bindingids type scope problem reporter problemreporter must use static method mustuseastaticmethod binding compute receiver compute conversion computeconversion scope receiver type receivertype receiver type receivertype message invoked receiver legal unoptimal optional warning receiver is implicit this isimplicitthis receiver is super issuper receiver name reference namereference name reference namereference receiver bits binding ids bindingids type scope problem reporter problemreporter non static access to static method nonstaticaccesstostaticmethod binding receiver is implicit this isimplicitthis binding declaring class declaringclass receiver type receivertype scope problem reporter problemreporter indirect access to static method indirectaccesstostaticmethod binding arguments check invocation arguments checkinvocationarguments scope receiver receiver type receivertype binding arguments argument types argumenttypes args contain cast argscontaincast message send fail compile time binding is abstract isabstract receiver is super issuper scope problem reporter problemreporter cannot dir ecly invoke abstract method cannotdireclyinvokeabstractmethod binding methods occur is method use deprecated ismethodusedeprecated binding scope scope problem reporter problemreporter deprecated method deprecatedmethod binding resolved type resolvedtype binding return type returntype set actual receiver type setactualreceivertype reference binding referencebinding receiver type receivertype qualifying type qualifyingtype receiver type receivertype org eclipse jdt internal compiler ast expression set expected type setexpectedtype org eclipse jdt internal compiler lookup type binding typebinding set expected type setexpectedtype type binding typebinding expected type expectedtype expected type expectedtype expected type expectedtype set depth setdepth depth flush previous depth bits depthmask depth encoded bits bits depth xff depthshift set field index setfieldindex depth ignore traverse ast visitor astvisitor visitor block scope blockscope block scope blockscope visitor visit block scope blockscope receiver traverse visitor block scope blockscope type arguments typearguments type arguments length typeargumentslength type arguments typearguments length type arguments length typeargumentslength type arguments typearguments traverse visitor block scope blockscope arguments arguments length argumentslength arguments length arguments length argumentslength arguments traverse visitor block scope blockscope visitor end visit endvisit block scope blockscope