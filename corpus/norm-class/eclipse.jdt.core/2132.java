copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests model java util enumeration java util hashtable java util map org eclipse core resources i resource iresource org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime path org eclipse jdt core org eclipse jdt internal core org eclipse jdt internal core util memento tokenizer mementotokenizer junit framework test tests internal java element cache buffer cache suppress warnings suppresswarnings rawtypes overflowing cache tests overflowingcachetests modifying resource tests modifyingresourcetests simple implementation i buffer ibuffer test buffer cache buffercache overflowing test buffer overflowingtestbuffer created saved determined client opened creation overflowing test buffer overflowingtestbuffer i buffer ibuffer buffer open is open isopen buffer unsaved has unsaved changes hasunsavedchanges cache buffer stored overflowinglrucache cache buf fers buffers owner buffer key buffer cache i openable iopenable owner overflowing test buffer overflowingtestbuffer has unsaved changes hasunsavedchanges overflowinglrucache cache has unsaved changes hasunsavedchanges has unsaved changes hasunsavedchanges cache cache add buffer changed listener addbufferchangedlistener i buffer changed listener ibufferchangedlistener listener required testing append text sets buffer unsaved actual contents has unsaved changes hasunsavedchanges append string text sets buffer unsaved actual contents has unsaved changes hasunsavedchanges close closes buffer removes cache is open isopen cache remove owner get char getchar position returns dummy test buf fers buffers contents get char acters getcharacters returns test buf fers buffers contents string get contents getcontents returns test buf fers buffers contents get length getlength returns test buf fers buffers contents i openable iopenable get owner getowner owner string get text gettext begin index beginindex end index endindex returns test buf fers buffers contents i resource iresource get underlying resource getunderlyingresource returns test buf fers buffers underlying resource has unsaved changes hasunsavedchanges has unsaved changes hasunsavedchanges is closed isclosed is open isopen is read only isreadonly remove buffer changed listener removebufferchangedlistener i buffer changed listener ibufferchangedlistener listener required testing replace position length text sets buffer unsaved actual contents has unsaved changes hasunsavedchanges replace position length string text sets buffer unsaved actual contents has unsaved changes hasunsavedchanges save i progress monitor iprogressmonitor progress illegal argument exception illegalargumentexception save progress save i progress monitor iprogressmonitor progress force illegal argument exception illegalargumentexception has unsaved changes hasunsavedchanges set contents setcontents contents sets buffer unsaved actual contents has unsaved changes hasunsavedchanges set contents setcontents string contents sets buffer unsaved actual contents has unsaved changes hasunsavedchanges overflowing test openable overflowingtestopenable openable element open is open isopen overflowing test buffer overflowingtestbuffer buffer cache element stored overflowinglrucache cache constructs openable unsaved lives cache opens overflowing test openable overflowingtestopenable overflowing test buffer overflowingtestbuffer buffer overflowinglrucache cache buffer buffer buffer owner cache cache open build structure buildstructure openable element info openableelementinfo info i progress monitor iprogressmonitor map new elements newelements i resource iresource underlying resource underlyingresource close closes element removes cache is open isopen cache remove equals object overflowing test openable overflowingtestopenable equals i buffer ibuffer get buffer getbuffer functionality required testing element cache returns code code get element type getelementtype i java element ijavaelement get handle from memento gethandlefrommemento string token memento tokenizer mementotokenizer memento working copy owner workingcopyowner owner get handle memento delimiter gethandlemementodelimiter i path ipath get path getpath i resource iresource resource package fragment root packagefragmentroot root has unsaved changes hasunsavedchanges buffer has unsaved changes hasunsavedchanges is consistent isconsistent is open isopen is open isopen make consistent makeconsistent i progress monitor iprogressmonitor functionality required testing element cache open i progress monitor iprogressmonitor is open isopen save i progress monitor iprogressmonitor save save i progress monitor iprogressmonitor force buffer has unsaved changes hasunsavedchanges i status istatus validate existence validateexistence i resource iresource underlying resource underlyingresource test suite build model test suite buildmodeltestsuite overflowing cache tests overflowingcachetests overflowing cache tests overflowingcachetests string returns div isible divisible has unsaved changes hasunsavedchanges ensures java model cache adapts size project number roots greater max test big number of roots testbignumberofroots core exception coreexception i java project ijavaproject project create java project createjavaproject root size rootsize java model cache javamodelcache root size root size rootsize create folder createfolder src create folder createfolder src create folder createfolder src i classpath entry iclasspathentry classpath i classpath entry iclasspathentry root size rootsize root size rootsize classpath java core javacore new source entry newsourceentry path src classpath java core javacore new source entry newsourceentry path src classpath java core javacore new source entry newsourceentry path src classpath root size rootsize java core javacore new variable entry newvariableentry path jcl lib project set raw classpath setrawclasspath classpath path bin open roots i java element ijavaelement roots project get children getchildren root size rootsize i openable iopenable roots open ensure roots remained opened root size rootsize assert true asserttrue root opened roots i openable iopenable roots is open isopen delete project deleteproject creates empty buffer cache buffercache ensures answers correctly get space limit getspacelimit get current space getcurrentspace get over lflow getoverlflow test buffer cache creation testbuffercachecreation space limit spacelimit actual space limit actualspacelimit overflow actual overflow actualoverflow current actual current actualcurrent overflowinglrucache cache buffer cache buffercache space limit spacelimit actual space limit actualspacelimit cache get space limit getspacelimit assert equals assertequals space limit incorrect space limit spacelimit actual space limit actualspacelimit actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect current actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect overflow actual overflow actualoverflow creates empty buffer cache buffercache size inserts buf fers buffers ensures full overflow test buffer cache fill testbuffercachefill space limit spacelimit actual space limit actualspacelimit overflow actual overflow actualoverflow current actual current actualcurrent overflowinglrucache cache buffer cache buffercache space limit spacelimit overflowing test buffer overflowingtestbuffer buf fers buffers overflowing test buffer overflowingtestbuffer space limit spacelimit overflowing test openable overflowingtestopenable openables overflowing test openable overflowingtestopenable space limit spacelimit space limit spacelimit buf fers buffers overflowing test buffer overflowingtestbuffer cache openables overflowing test openable overflowingtestopenable buf fers buffers cache openables buf fers buffers current actual space limit actualspacelimit cache get space limit getspacelimit assert equals assertequals space limit incorrect space limit spacelimit actual space limit actualspacelimit actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect current actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect overflow actual overflow actualoverflow space limit spacelimit object cache openables assert equals assertequals wrong buf fers buffers creates empty buffer cache buffercache size inserts buf fers buffers ensures cache buf fers buffers left buffer cache cache remove buf fers buffers cache leaving buf fers buffers cache buffer reach space limit shrink entries remaining buf fers buffers cache leaving entries test buffer cache use no overflow testbuffercacheusenooverflow space limit spacelimit actual space limit actualspacelimit overflow actual overflow actualoverflow actual current actualcurrent predicted current predictedcurrent entry count entrycount overflowinglrucache cache buffer cache buffercache space limit spacelimit overflowing test openable overflowingtestopenable openables overflowing test openable overflowingtestopenable entry count entrycount overflowing test buffer overflowingtestbuffer buf fers buffers overflowing test buffer overflowingtestbuffer entry count entrycount entry count entrycount buf fers buffers overflowing test buffer overflowingtestbuffer cache openables overflowing test openable overflowingtestopenable buf fers buffers cache openables buf fers buffers actual space limit actualspacelimit cache get space limit getspacelimit assert equals assertequals space limit incorrect space limit spacelimit actual space limit actualspacelimit actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect predicted current predictedcurrent actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect overflow actual overflow actualoverflow entry count entrycount entry count entrycount predicted current predictedcurrent object cache openables assert equals assertequals wrong buf fers buffers ensure entries swaped space limit spacelimit object cache openables assert equals assertequals entry creates empty buffer cache buffercache size inserts buf fers buffers ten entries removed entries leaving entries closed table size equal overflow has unsaved changes hasunsavedchanges test buffer cache use overflow testbuffercacheuseoverflow space limit spacelimit entry count entrycount overflowinglrucache cache buffer cache buffercache space limit spacelimit overflowing test openable overflowingtestopenable openables overflowing test openable overflowingtestopenable entry count entrycount overflowing test buffer overflowingtestbuffer buf fers buffers overflowing test buffer overflowingtestbuffer entry count entrycount entry count entrycount has unsaved changes hasunsavedchanges has unsaved changes hasunsavedchanges buf fers buffers overflowing test buffer overflowingtestbuffer has unsaved changes hasunsavedchanges cache openables overflowing test openable overflowingtestopenable buf fers buffers cache openables buf fers buffers hashtable table cache get entry table getentrytable assert equals assertequals hashtable wrong size table size actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect actual overflow actualoverflow entry count entrycount has unsaved changes hasunsavedchanges object cache openables assert equals assertequals wrong buf fers buffers cache shrink space limit spacelimit save entries unsaved entry count entrycount buf fers buffers save add entry remove saved openables overflowing test buffer overflowingtestbuffer buffer overflowing test buffer overflowingtestbuffer cache i openable iopenable openable overflowing test openable overflowingtestopenable buffer cache openable buffer size overflow actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect flush actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect flush actual overflow actualoverflow tests actual java model buffer cache ensure fills empties expected test closes open buf fers buffers ensure cache empty compilation units opened fill cache test buffer recycling testbufferrecycling core exception coreexception enumeration open buffers openbuffers buffer manager buffermanager get default buffer manager getdefaultbuffermanager get open buffers getopenbuffers open buffers openbuffers has more elements hasmoreelements i buffer ibuffer buf i buffer ibuffer open buffers openbuffers next element nextelement buf close open buffers openbuffers buffer manager buffermanager get default buffer manager getdefaultbuffermanager get open buffers getopenbuffers assert true asserttrue buffer cache empty open buffers openbuffers has more elements hasmoreelements create java project createjavaproject create file createfile java i package fragment ipackagefragment pkg get package getpackage i compilation unit icompilationunit cus pkg get compilation units getcompilationunits fill cache open buf fers buffers max max cus get buffer getbuffer buf fers buffers open buffers openbuffers buffer manager buffermanager get default buffer manager getdefaultbuffermanager get open buffers getopenbuffers count open buffers openbuffers has more elements hasmoreelements open buffers openbuffers next element nextelement count assert equals assertequals incorrect numbers open buf fers buffers max count open buffer cache free rds space buf fers buffers closed to talling totalling cus max get buffer getbuffer open buffers openbuffers buffer manager buffermanager get default buffer manager getdefaultbuffermanager get open buffers getopenbuffers count open buffers openbuffers has more elements hasmoreelements open buffers openbuffers next element nextelement count assert equals assertequals incorrect numbers open buf fers buffers count opening previous open buffer work fine cus get buffer getbuffer open buffers openbuffers buffer manager buffermanager get default buffer manager getdefaultbuffermanager get open buffers getopenbuffers count open buffers openbuffers has more elements hasmoreelements open buffers openbuffers next element nextelement count assert equals assertequals incorrect numbers open buf fers buffers count delete project deleteproject creates empty element cache elementcache ensures answers correctly get space limit getspacelimit get current space getcurrentspace get over lflow getoverlflow test element cache creation testelementcachecreation space limit spacelimit actual space limit actualspacelimit overflow actual overflow actualoverflow current actual current actualcurrent overflowinglrucache cache element cache elementcache space limit spacelimit actual space limit actualspacelimit cache get space limit getspacelimit assert equals assertequals space limit incorrect space limit spacelimit actual space limit actualspacelimit actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect current actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect overflow actual overflow actualoverflow creates empty element cache elementcache size inserts elements ensures full overflow test element cache fill testelementcachefill space limit spacelimit actual space limit actualspacelimit overflow actual overflow actualoverflow current actual current actualcurrent overflowinglrucache cache element cache elementcache space limit spacelimit overflowing test openable overflowingtestopenable openables overflowing test openable overflowingtestopenable space limit spacelimit space limit spacelimit openables overflowing test openable overflowingtestopenable overflowing test buffer overflowingtestbuffer cache cache openables integer to string tostring current actual space limit actualspacelimit cache get space limit getspacelimit assert equals assertequals space limit incorrect space limit spacelimit actual space limit actualspacelimit actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect current actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect overflow actual overflow actualoverflow space limit spacelimit object cache openables assert equals assertequals wrong integer to string tostring creates empty element cache elementcache size inserts elements ensures cache elements left element cache cache remove elements cache leaving elements cache element reach space limit shrink entries remaining elements cache leaving entries test element cache use no overflow testelementcacheusenooverflow space limit spacelimit actual space limit actualspacelimit overflow actual overflow actualoverflow actual current actualcurrent predicted current predictedcurrent entry count entrycount overflowinglrucache cache element cache elementcache space limit spacelimit overflowing test openable overflowingtestopenable openables overflowing test openable overflowingtestopenable entry count entrycount entry count entrycount openables overflowing test openable overflowingtestopenable overflowing test buffer overflowingtestbuffer cache cache openables integer to string tostring actual space limit actualspacelimit cache get space limit getspacelimit assert equals assertequals space limit incorrect space limit spacelimit actual space limit actualspacelimit actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect predicted current predictedcurrent actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect overflow actual overflow actualoverflow entry count entrycount entry count entrycount predicted current predictedcurrent object cache openables assert equals assertequals wrong integer to string tostring ensure entries swaped space limit spacelimit object cache openables assert equals assertequals entry creates empty element cache elementcache size inserts elements ten entries removed entries leaving entries closed the table thetable size equal overflow has unsaved changes hasunsavedchanges test element cache use overflow testelementcacheuseoverflow space limit spacelimit entry count entrycount overflowinglrucache cache element cache elementcache space limit spacelimit overflowing test openable overflowingtestopenable openables overflowing test openable overflowingtestopenable entry count entrycount entry count entrycount openables overflowing test openable overflowingtestopenable overflowing test buffer overflowingtestbuffer has unsaved changes hasunsavedchanges cache cache openables integer to string tostring hashtable table cache get entry table getentrytable assert equals assertequals hashtable wrong size table size actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect actual overflow actualoverflow entry count entrycount has unsaved changes hasunsavedchanges object cache openables assert equals assertequals wrong integer to string tostring cache shrink space limit spacelimit save entries unsaved entry count entrycount openables save add entry remove saved openables cache integer to string tostring overflowing test openable overflowingtestopenable overflowing test buffer overflowingtestbuffer cache size overflow actual current actualcurrent cache get current space getcurrentspace assert equals assertequals current space incorrect flush actual current actualcurrent actual overflow actualoverflow cache get overflow getoverflow assert equals assertequals overflow space incorrect flush actual overflow actualoverflow