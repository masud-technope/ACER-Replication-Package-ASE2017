copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core dom java util array list arraylist java util arrays java util collections java util list java util map org eclipse jdt core i java element ijavaelement org eclipse jdt core i type root ityperoot org eclipse jdt core compiler i problem iproblem org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt internal compiler parser scanner org eclipse jdt internal compiler util util org eclipse jface text i document idocument org eclipse text edits text edit textedit java compilation unit ast node type type root ast source range type node ordinarily entire source file including leading trailing whitespace comments pre compilation unit compilationunit package declaration packagedeclaration import declaration importdeclaration type declaration typedeclaration enum declaration enumdeclaration annotation type declaration annotationtypedeclaration pre noinstantiate intended instantiated clients suppress warnings suppresswarnings rawtypes unchecked compilation unit compilationunit ast node astnode canonical empty list messages message empty messages message canonical empty list problems i problem iproblem empty problems i problem iproblem imports structural property node type element type link import declaration importdeclaration child list property descriptor childlistpropertydescriptor imports property nls child list property descriptor childlistpropertydescriptor compilation unit compilationunit imports import declaration importdeclaration cycle risk structural property node type child type link package declaration packagedeclaration child property descriptor childpropertydescriptor property nls child property descriptor childpropertydescriptor compilation unit compilationunit package declaration packagedeclaration optional cycle risk list property descriptors element type link structural property descriptor structuralpropertydescriptor uninitialized list property descriptors types structural property node type element type link abstract type declaration abstracttypedeclaration child list property descriptor childlistpropertydescriptor types property nls child list property descriptor childlistpropertydescriptor compilation unit compilationunit types abstract type declaration abstracttypedeclaration cycle risk list propery list properylist array list arraylist create property list createpropertylist compilation unit compilationunit propery list properylist add property addproperty property propery list properylist add property addproperty imports property propery list properylist add property addproperty types property propery list properylist property descriptors reap property list reappropertylist propery list properylist returns list structural property descriptors node type clients modify result param api level apilevel api level code ast jls code constants list property descriptors element type link structural property descriptor structuralpropertydescriptor list property descriptors propertydescriptors api level apilevel property descriptors comment mapper code code init ially initially code code default comment mapper defaultcommentmapper comment mapper commentmapper java type root code org eclipse jdt core i compilation unit icompilationunit code code org eclipse jdt core i class file iclassfile code compilation unit created code code created java type root i type root ityperoot type root typeroot list declarations text ual textual order order init ially initially element type elementtype code import declaration importdeclaration code ast node astnode node list nodelist imports ast node astnode node list nodelist imports property table code line end table lineendtable code number code code ends character position code code positions character delimiter source string code code table character line end table lineendtable util empty array messages reported compiler parsing resolution message messages comment list element type link comment code code init ially initially code code list optional comment list optionalcommentlist comment table code code init ially initially code code array storage underlying code optional comment list optionalcommentlist code array list arraylist comment optional comment table optionalcommenttable declaration code code init ially initially code code package declaration packagedeclaration optional package declaration optionalpackagedeclaration problems reported compiler parsing resolution i problem iproblem problems empty problems internal data perform statements recovery object statements recovery data statementsrecoverydata list type declarations text ual textual order order init ially initially element type elementtype code abstract type declaration abstracttypedeclaration code ast node astnode node list nodelist types ast node astnode node list nodelist types property creates ast node compilation owned ast compilation unit init ially initially declaration declarations type declarations constructor subclasses declared clients unable declare additional subclasses param ast ast node compilation unit compilationunit ast ast ast omit javadoc method method declared ast node astnode accept ast visitor astvisitor visitor visit children visitchildren visitor visit visit children visitchildren visit children normal left reading order accept child acceptchild visitor get package getpackage accept children acceptchildren visitor imports accept children acceptchildren visitor types visitor end visit endvisit omit javadoc method method declared ast node astnode ast node astnode clone ast target compilation unit compilationunit result compilation unit compilationunit target copy number table messages result set source range setsourcerange get start position getstartposition get length getlength result set package setpackage package declaration packagedeclaration ast node astnode copy subtree copysubtree target get package getpackage result imports add all addall ast node astnode copy sub trees copysubtrees target imports result types add all addall ast node astnode copy sub trees copysubtrees target types result returns column number source character position original source string column number based code code valid range code code column number unknown param position based character position negative range based column number code code character position correspond source original source file code code column number unknown compilation unit ast parser astparser get column number getcolumnnumber position line end table lineendtable get line number getlinenumber position position get start position getstartposition get length getlength position length length line end table lineendtable length based based conversion previous previous line offset previouslineoffset line end table lineendtable previous line offset previouslineoffset character current offset for line offsetforline previous line offset previouslineoffset current line end currentlineend length get start position getstartposition get length getlength line end table lineendtable offset for line offsetforline current line end currentlineend position offset for line offsetforline finds ast node compilation unit binding originated returns code code binding correspond node compilation unit method returns code code bindings requested ast built table expected node type kinds bindings code package declaration packagedeclaration code code type declaration typedeclaration code code anonymous class declaration anonymousclassdeclaration code anonymous classes primitive type array type field code variable declaration fragment variabledeclarationfragment code code field declaration fielddeclaration code local variable code single variable declaration singlevariabledeclaration code code variable declaration fragment variabledeclarationfragment code code variable declaration statement variabledeclarationstatement code code variable declaration expression variabledeclarationexpression code method code method declaration methoddeclaration code constructor code method declaration methoddeclaration code annotation type code annotation type declaration annotationtypedeclaration code annotation type member code annotation type member declaration annotationtypememberdeclaration code enum type code enum declaration enumdeclaration code enum constant code enum constant declaration enumconstantdeclaration code type variable code type parameter typeparameter code capture binding annotation binding code annotation code member pair binding code member value pair membervaluepair code code code represents single member parameterized raw type bindings declaring node type parameterized raw method bindings declaring node method call link ast parser astparser createast org eclipse core runtime i progress monitor iprogressmonitor request bindings ris e rise separate universe binding objects method returns code code binding object ast code find declaring node finddeclaringnode binding get key getkey code binding ast param binding binding node binding declared code code binding correspond node compilation unit bindings requested ast built find declaring node finddeclaringnode string ast node astnode find declaring node finddeclaringnode i binding ibinding binding ast get binding resolver getbindingresolver find declaring node finddeclaringnode binding finds ast node compilation unit binding key originated returns code code node determined method returns code code bindings requested ast built table expected node type kinds binding code package declaration packagedeclaration code code type declaration typedeclaration code code anonymous class declaration anonymousclassdeclaration code anonymous classes primitive type array type field code variable declaration fragment variabledeclarationfragment code code field declaration fielddeclaration code local variable code single variable declaration singlevariabledeclaration code code variable declaration fragment variabledeclarationfragment code code variable declaration statement variabledeclarationstatement code code variable declaration expression variabledeclarationexpression code method code method declaration methoddeclaration code constructor code method declaration methoddeclaration code annotation type code annotation type declaration annotationtypedeclaration code annotation type member code annotation type member declaration annotationtypememberdeclaration code enum type code enum declaration enumdeclaration code enum constant code enum constant declaration enumconstantdeclaration code type variable code type parameter typeparameter code capture binding parameterized raw type bindings declaring node type parameterized raw method bindings declaring node method param key binding key code code node binding key declared code code key code code key correspond node compilation unit bindings requested ast built i binding ibinding get key getkey ast node astnode find declaring node finddeclaringnode string key ast get binding resolver getbindingresolver find declaring node finddeclaringnode key returns list comments encountered parsing compilation unit java language comments source text problem atic problematic locate comments relation structure ast exception doc comments convention precede type field method declarations comments located ast link body declaration bodydeclaration get javadoc getjavadoc body declaration bodydeclaration get javadoc getjavadoc comments ast table comments clients find source ranges comments original source string includes entries comments kinds block doc arranged order increasing source position note comment paren ting parenting link ast node astnode get parent getparent get parent getparent doc comment body declaration body declaration node comment nodes link ast node astnode get root getroot get root getroot compilation unit assuming unmodified ast ref lecting reflecting fact nodes property located ast compilation unit comment nodes link ast node astnode get parent getparent get parent getparent code code link ast node astnode get root getroot get root getroot comment node indicating comment nodes connected ast compilation unit link comment get alternate root getalternateroot comment get alternate root getalternateroot method navigate comment compilation unit not e note visit ors visitors comment nodes visited visiting compilation unit doc comments parented body declarations visit comments normal reading order iter ate iterate comment table call link ast node astnode accept ast visitor astvisitor accept element clients modify list unmodifiable list comments increasing order source start position element type link comment code code comment compilation unit ast parser astparser list get comment list getcommentlist optional comment list optionalcommentlist returns internal comment mapper comment mapper code code default comment mapper defaultcommentmapper get comment mapper getcommentmapper comment mapper commentmapper returns extended source length node link ast node astnode get start position getstartposition link ast node astnode get length getlength extended source range include comments whitespace normal source range node param node node length code code source position recorded node get extended start position getextendedstartposition ast node astnode get extended length getextendedlength ast node astnode node node illegal argument exception illegalargumentexception comment mapper commentmapper node getast getast fall info node get length getlength comment mapper commentmapper get extended length getextendedlength node returns extended start position node link ast node astnode get start position getstartposition link ast node astnode get length getlength extended source range include comments whitespace normal source range node param node node based character code code source position recorded node get extended length getextendedlength ast node astnode get extended start position getextendedstartposition ast node astnode node node illegal argument exception illegalargumentexception comment mapper commentmapper node getast getast fall info node get start position getstartposition comment mapper commentmapper get extended start position getextendedstartposition node java element code org eclipse jdt core i compilation unit icompilationunit code code org eclipse jdt core i class file iclassfile code compilation unit created code code created java element java element compilation unit created code code get type root gettyperoot i java element ijavaelement get java element getjavaelement type root typeroot returns list messages reported compiler parsing type checking compilation unit list sub set subset errors detected reported java compiler list messages suitable simple clients log messages display user clients details call code get problems getproblems code compiler problem objects list messages empty get problems getproblems ast parser astparser message get messages getmessages messages problem length problemlength problems length problem length problemlength messages empty messages messages message problem length problemlength problem length problemlength i problem iproblem problem problems start problem get source start getsourcestart problem get source end getsourceend messages message problem get message getmessage start start messages omit javadoc method method declared ast node astnode get node type getnodetype compilation unit returns node declaration compilation unit code code compilation unit declaration node code code package declaration packagedeclaration get package getpackage optional package declaration optionalpackagedeclaration number column number returns position original source string returns number compilation unit returns total size source string code code greater actual number lines unit returns code column code position character code column code legal range number param based number param column based column number based character position source string code code column number compilation unit code code inputs valid get position getposition column line end table lineendtable column length length line end table lineendtable length column get start position getstartposition get length getlength column end of line endofline line end table lineendtable column end of line endofline column length greater number lines source string based based conversion previous previous line offset previouslineoffset line end table lineendtable previous line offset previouslineoffset character current offset for line offsetforline previous line offset previouslineoffset current line end currentlineend length get start position getstartposition get length getlength line end table lineendtable offset for line offsetforline column current line end currentlineend offset for line offsetforline column returns list detailed problem reports compiler parsing type checking compilation unit list sub set subset errors detected reported java compiler simple clients log messages display user call code get messages getmessages code list detailed problem objects empty get messages getmessages ast parser astparser i problem iproblem get problems getproblems problems internal method method internal data perform statements recovery internal data perform statements recovery noreference method intended referenced clients object get statements recovery data getstatementsrecoverydata statements recovery data statementsrecoverydata java type root link org eclipse jdt core i compilation unit icompilationunit compilation unit link org eclipse jdt core i class file iclassfile file compilation unit created code code created java type root java type root compilation unit created code code i type root ityperoot get type root gettyperoot type root typeroot returns live list nodes declarations compilation unit order app earance appearance live list declaration nodes element type elementtype link import declaration importdeclaration list imports imports comments list link get comment list getcommentlist leading comments node param node node based leading comment node comment start position first leading comment index firstleadingcommentindex ast node astnode node node illegal argument exception illegalargumentexception comment mapper commentmapper node getast getast comment mapper commentmapper first leading comment index firstleadingcommentindex node comments list link get comment list getcommentlist trailing comments node param node node based trailing comment node comment position last trailing comment index lasttrailingcommentindex ast node astnode node node illegal argument exception illegalargumentexception comment mapper commentmapper node getast getast comment mapper commentmapper last trailing comment index lasttrailingcommentindex node initializes internal comment mapper scanner param scanner scanner init comment mapper initcommentmapper scanner scanner comment mapper commentmapper default comment mapper defaultcommentmapper optional comment table optionalcommenttable comment mapper commentmapper initialize scanner omit javadoc method method declared ast node astnode list internal get child list property internalgetchildlistproperty child list property descriptor childlistpropertydescriptor property property imports property imports property types property types implementation flag error internal get child list property internalgetchildlistproperty property omit javadoc method method declared ast node astnode ast node astnode internal get set child property internalgetsetchildproperty child property descriptor childpropertydescriptor property ast node astnode child property property get package getpackage set package setpackage package declaration packagedeclaration child implementation flag error internal get set child property internalgetsetchildproperty property child omit javadoc method method declared ast node astnode list internal structural properties for type internalstructuralpropertiesfortype api level apilevel property descriptors propertydescriptors api level apilevel returns number source character position original source string initial compilation unit num bered numbered character delimiter source string delimiter source string code code lines inclusive character ranges returns character position correspond source number compilation unit param position based character position negative range based number code code character position correspond source original source file number compilation unit deprecated get line number getlinenumber careful handle negative values ast parser astparser get line number getlinenumber line number linenumber position line number linenumber get line number getlinenumber position line number linenumber line number linenumber returns number source character position original source string initial compilation unit num bered numbered character delimiter source string delimiter source string code code lines inclusive character ranges returns character position correspond source number compilation unit param position based character position negative range based number code code character position correspond source original source file code code number compilation unit ast parser astparser get line number getlinenumber position line end table lineendtable length length line end table lineendtable length position get start position getstartposition get length getlength position position illegal position line end table lineendtable delimiter position line end table lineendtable length position line end table lineendtable position separator position get start position getstartposition get length getlength source length length binary search table reducing measure position number average mid mid length position line end table lineendtable mid line end table lineendtable position line end table lineendtable mid mid length mid position line end table lineendtable mid line end table lineendtable mid position line end table lineendtable mid length mid cases invariant reach ieved reachieved reduced measure omit javadoc method method declared ast node astnode mem size memsize size base node size line end table lineendtable size headers line end table lineendtable length optional comment table optionalcommenttable size headers optional comment table optionalcommenttable length ignore space optional comment list optionalcommentlist size enables recording compilation unit desc end ants descendants compilation unit created link ast parser astparser original recording arbitrary subtree rooted compilation unit recorded int ernally internally modification completed call link rewrite i document idocument map object representing edits original source code string note manipulating ast single modifications lacks functionality link ast rewrite astrewrite create string placeholder createstringplaceholder string string place hold ers placeholders support link ast rewrite astrewrite create copy target createcopytarget ast node astnode copying nodes including comments for matting formatting pro of proof code external link ast rewrite astrewrite doesn suffer limitations modify ast dest ructive destructive exception illegal argument exception illegalargumentexception compilation unit marked unmodifiable compilation unit tampered recording enabled ast rewrite astrewrite record modifications recordmodifications getast record modifications recordmodifications converts modifications recorded compilation unit object representing text edits document original source code compilation unit compilation unit created link ast parser astparser source code string document recording turned prior call link record modifications recordmodifications ast original calling methods discard modifications record sub sequence subsequence modifications ast record method called text edit object accurately reflect net cumulative param document original document source code compilation unit param options table formatter options key type code string code type code string code code code standard global options link org eclipse jdt core java core javacore get options getoptions java core javacore get options getoptions text edit object describing document recorded ast modifications exception illegal argument exception illegalargumentexception document passed code code correspond ast exception illegal state exception illegalstateexception code record modifications recordmodifications code called enable recording record modifications recordmodifications text edit textedit rewrite i document idocument document map options getast rewrite document options sets list comments encountered parsing compilation unit param comment table commenttable list comments increasing order source start position code code comment compilation unit exception illegal argument exception illegalargumentexception comment table increasing order source position get comment list getcommentlist ast parser astparser set comment table setcommenttable comment comment table commenttable source positions str ictly strictly increasing order comment table commenttable optional comment list optionalcommentlist optional comment table optionalcommenttable next available position nextavailableposition comment table commenttable length comment comment comment table commenttable comment illegal argument exception illegalargumentexception start comment get start position getstartposition length comment get length getlength start length start next available position nextavailableposition illegal argument exception illegalargumentexception next available position nextavailableposition comment get start position getstartposition comment get length getlength optional comment table optionalcommenttable comment table commenttable list comment list commentlist arrays as list aslist comment table commenttable protect list modification optional comment list optionalcommentlist collections unmodifiable list unmodifiablelist comment list commentlist sets java type root link org eclipse jdt core i compilation unit icompilationunit compilation unit link org eclipse jdt core i class file iclassfile file compilation unit created code code created java type root param type root typeroot java type root compilation unit created set type root settyperoot i type root ityperoot type root typeroot type root typeroot type root typeroot sets table compilation unit code line end table lineendtable code number code code ends character position code code positions character delimiter source string code code table param line end table lineendtable table set line end table setlineendtable line end table lineendtable line end table lineendtable null pointer exception nullpointerexception alternate root considered structural property protect check modifiable checkmodifiable line end table lineendtable line end table lineendtable sets clears declaration compilation unit node declaration node param pkg decl pkgdecl declaration node code code compilation unit declaration exception illegal argument exception illegalargumentexception node belongs ast node parent set package setpackage package declaration packagedeclaration pkg decl pkgdecl ast node astnode old child oldchild optional package declaration optionalpackagedeclaration pre replace child prereplacechild old child oldchild pkg decl pkgdecl property optional package declaration optionalpackagedeclaration pkg decl pkgdecl post replace child postreplacechild old child oldchild pkg decl pkgdecl property sets array problems reported compiler parsing resolution compilation unit param problems list problems set problems setproblems i problem iproblem problems problems illegal argument exception illegalargumentexception problems problems internal method sets internal data perform statements recovery param data set statements recovery data setstatementsrecoverydata object data statements recovery data statementsrecoverydata data omit javadoc method method declared ast node astnode subtree match subtreematch ast matcher astmatcher matcher object dispatch correct overloaded match method matcher match omit javadoc method method declared ast node astnode tree size treesize size mem size memsize optional package declaration optionalpackagedeclaration size get package getpackage tree size treesize size imports list size listsize size types list size listsize include disconnected comments optional comment list optionalcommentlist optional comment list optionalcommentlist size comment comment comment optional comment list optionalcommentlist comment comment get parent getparent size comment tree size treesize size returns live list nodes top level type declarations compilation unit order app earance appearance note jls types include enum declarations annotation type declarations int roduced introduced jls elements code type declaration typedeclaration code live list top level type declaration nodes element type link abstract type declaration abstracttypedeclaration list types types