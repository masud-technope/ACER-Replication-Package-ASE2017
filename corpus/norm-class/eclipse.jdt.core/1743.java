copyright google rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors john glassmyer jogl google group sorting broken https bugs eclipse org org eclipse jdt internal core dom rewrite imports java util array deque arraydeque java util array list arraylist java util collection java util collections java util deque java util hash map hashmap java util iterator java util list java util map reassigns comments removed imports rewrite result ant resultant imports rewrite reassigns comments removed single imports iteration order result ant resultant demand container exists reassigns comments removed demand imports iteration order result ant resultant single container exists leaves unassigned removed comment matching cases removed import comment reassigner removedimportcommentreassigner collection original import entry originalimportentry retain imports with comments retainimportswithcomments collection original import entry originalimportentry imports collection original import entry originalimportentry imports with comments importswithcomments array list arraylist original import entry originalimportentry imports size original import entry originalimportentry current import currentimport imports current import currentimport comments is empty isempty imports with comments importswithcomments add current import currentimport imports with comments importswithcomments has floating comment hasfloatingcomment original import entry originalimportentry next assigned import nextassignedimport import comment importcomment import comment importcomment next assigned import nextassignedimport comments import comment importcomment succeeding line delimiters succeedinglinedelimiters collection original import entry originalimportentry original imports with comments originalimportswithcomments removed import comment reassigner removedimportcommentreassigner list original import entry originalimportentry original imports originalimports original imports with comments originalimportswithcomments retain imports with comments retainimportswithcomments original imports originalimports assigns comments removed entries code original imports originalimports code result ant imports resultantimports result ant resultant entries returns map assignments key element code result ant imports resultantimports collection comments reassigned result ant resultant map import entry importentry collection import comment importcomment reassign comments reassigncomments collection import entry importentry result ant imports resultantimports map import entry importentry collection original import entry originalimportentry import assignments importassignments assign removed imports assignremovedimports result ant imports resultantimports map import entry importentry collection import comment importcomment comment assignments commentassignments hash map hashmap import entry importentry collection import comment importcomment map entry import entry importentry collection original import entry originalimportentry import assignment importassignment import assignments importassignments entry set entryset import entry importentry target import targetimport import assignment importassignment get key getkey target import targetimport deque import comment importcomment assigned comments assignedcomments array deque arraydeque import comment importcomment collection original import entry originalimportentry assigned imports assignedimports import assignment importassignment get value getvalue iterator original import entry originalimportentry next assigned import iterator nextassignedimportiterator assigned imports assignedimports iterator next assigned import iterator nextassignedimportiterator has next hasnext next assigned import iterator nextassignedimportiterator iterator original import entry originalimportentry assigned import iterator assignedimportiterator assigned imports assignedimports iterator assigned import iterator assignedimportiterator has next hasnext original import entry originalimportentry current assigned import currentassignedimport assigned import iterator assignedimportiterator original import entry originalimportentry next assigned import nextassignedimport next assigned import iterator nextassignedimportiterator has next hasnext next assigned import iterator nextassignedimportiterator assigned comments assignedcomments add all addall current assigned import currentassignedimport comments next assigned import nextassignedimport has floating comment hasfloatingcomment next assigned import nextassignedimport ensure blank sep arates separates removed comments removed floating comments import comment importcomment last comment lastcomment assigned comments assignedcomments remove last removelast import comment importcomment last comment with trailing blank line lastcommentwithtrailingblankline import comment importcomment last comment lastcomment region assigned comments assignedcomments add last comment with trailing blank line lastcommentwithtrailingblankline comment assignments commentassignments target import targetimport assigned comments assignedcomments comment assignments commentassignments map import entry importentry collection original import entry originalimportentry assign removed imports assignremovedimports collection import entry importentry imports collection original import entry originalimportentry removed imports with comments removedimportswithcomments identify removed imports with comments identifyremovedimportswithcomments imports removed imports with comments removedimportswithcomments is empty isempty collections empty map emptymap map import name importname import entry importentry first single for on demand firstsingleforondemand identify first single for each on demand identifyfirstsingleforeachondemand imports map import name importname import entry importentry first occurrences firstoccurrences identify first occurrence of each import name identifyfirstoccurrenceofeachimportname imports map import entry importentry collection original import entry originalimportentry removed imports for retained import removedimportsforretainedimport hash map hashmap import entry importentry collection original import entry originalimportentry import entry importentry retained import retainedimport imports removed imports for retained import removedimportsforretainedimport retained import retainedimport array list arraylist original import entry originalimportentry key map removed imports assigned removed imports for retained import removedimportsforretainedimport array list arraylist original import entry originalimportentry original import entry originalimportentry removed import removedimport removed imports with comments removedimportswithcomments import name importname removed import name removedimportname removed import removedimport import name importname import entry importentry retained import retainedimport removed import name removedimportname is on demand isondemand retained import retainedimport first single for on demand firstsingleforondemand removed import name removedimportname retained import retainedimport first occurrences firstoccurrences removed import name removedimportname get container on demand getcontainerondemand retained import retainedimport assign removed removed imports for retained import removedimportsforretainedimport retained import retainedimport add removed import removedimport removed imports for retained import removedimportsforretainedimport collection original import entry originalimportentry identify removed imports with comments identifyremovedimportswithcomments collection import entry importentry imports collection original import entry originalimportentry removed imports removedimports array list arraylist original import entry originalimportentry original imports with comments originalimportswithcomments removed imports removedimports remove all removeall imports removed imports removedimports assigns removed demand single code imports container returns map key single removed demand returned map mappings removed demand imports single imports code imports map import name importname import entry importentry identify first single for each on demand identifyfirstsingleforeachondemand iterable import entry importentry imports map import name importname import entry importentry first single import for container firstsingleimportforcontainer hash map hashmap import name importname import entry importentry import entry importentry current import currentimport imports current import currentimport import name importname is on demand isondemand import name importname container on demand containerondemand current import currentimport import name importname get container on demand getcontainerondemand first single import for container firstsingleimportforcontainer contains key containskey container on demand containerondemand first single import for container firstsingleimportforcontainer container on demand containerondemand current import currentimport first single import for container firstsingleimportforcontainer map import name importname import entry importentry identify first occurrence of each import name identifyfirstoccurrenceofeachimportname iterable import entry importentry imports map import name importname import entry importentry first occurrence of import firstoccurrenceofimport hash map hashmap import name importname import entry importentry import entry importentry result ant import resultantimport imports first occurrence of import firstoccurrenceofimport contains key containskey result ant import resultantimport import name importname first occurrence of import firstoccurrenceofimport result ant import resultantimport import name importname result ant import resultantimport first occurrence of import firstoccurrenceofimport