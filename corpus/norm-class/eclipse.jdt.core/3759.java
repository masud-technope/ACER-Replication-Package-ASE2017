copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler ast org eclipse jdt internal compiler ast visitor astvisitor org eclipse jdt internal compiler codegen org eclipse jdt internal compiler flow org eclipse jdt internal compiler lookup try statement trystatement sub routine statement subroutinestatement block try block tryblock block catch blocks catchblocks argument catch arguments catcharguments block finally block finallyblock block scope blockscope scope is sub routine escaping issubroutineescaping unconditional flow info unconditionalflowinfo sub routine inits subroutineinits rename sub routine complete subroutinecomplete reference binding referencebinding caught exception types caughtexceptiontypes try block exit tryblockexit catch exits catchexits preserve exception handler preserveexceptionhandler label sub routine start label subroutinestartlabel local variable binding localvariablebinding any exception variable anyexceptionvariable return address variable returnaddressvariable secret return value secretreturnvalue nls secret return name secretreturnname return address returnaddress to char array tochararray nls secret any handler name secretanyhandlername any exception handler anyexceptionhandler to char array tochararray nls secret local declaration name secretlocaldeclarationname return value returnvalue to char array tochararray local variables table attributes pre try init state index pretryinitstateindex merged init state index mergedinitstateindex flow info flowinfo analyse code analysecode block scope blockscope current scope currentscope flow context flowcontext flow context flowcontext flow info flowinfo flow info flowinfo block block compute int ersection intersection initial izations initializations minimum exit relative depth subroutine append initialization subroutine comp letes completes subroutine complete result analysis process block subroutine create context subroutine pre try init state index pretryinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates flow info flowinfo any exception variable anyexceptionvariable any exception variable anyexceptionvariable use flag useflag local variable binding localvariablebinding todo philippe subroutine escaping unused return address variable returnaddressvariable return address variable returnaddressvariable use flag useflag local variable binding localvariablebinding inside sub routine flow context insidesubroutineflowcontext inside sub context insidesubcontext finally flow context finallyflowcontext finally context finallycontext unconditional flow info unconditionalflowinfo sub info subinfo sub routine start label subroutinestartlabel block inside sub context insidesubcontext finally context finallycontext sub info subinfo analyse block inside sub context insidesubcontext inside sub routine flow context insidesubroutineflowcontext flow context flowcontext sub info subinfo finally block finallyblock analyse code analysecode current scope currentscope finally context finallycontext finally flow context finallyflowcontext flow context flowcontext finally block finallyblock flow info flowinfo copy unconditional inits unconditionalinits sub info subinfo flow info flowinfo dead is sub routine escaping issubroutineescaping scope problem reporter problemreporter finally must complete normally finallymustcompletenormally finally block finallyblock sub routine inits subroutineinits sub info subinfo process block context handling local exceptions exception handling flow context exceptionhandlingflowcontext handling context handlingcontext exception handling flow context exceptionhandlingflowcontext inside sub context insidesubcontext flow context flowcontext inside sub context insidesubcontext try block tryblock caught exception types caughtexceptiontypes scope flow info flowinfo unconditional inits unconditionalinits flow info flowinfo try info tryinfo try block tryblock is empty block isemptyblock try info tryinfo flow info flowinfo try block exit tryblockexit try info tryinfo try block tryblock analyse code analysecode current scope currentscope handling context handlingcontext flow info flowinfo copy try block exit tryblockexit try info tryinfo is reachable isreachable check unreachable blocks handling context handlingcontext complain if unused exception handlers complainifunusedexceptionhandlers scope process blocks computing minimal exit depth catch arguments catcharguments catch count catchcount catch exits catchexits catch count catchcount catch blocks catchblocks length catch count catchcount track inits led exception handler assignments diagnosis flow info flowinfo catch info catchinfo flow info flowinfo copy unconditional inits unconditionalinits add potential initializations from addpotentialinitializationsfrom handling context handlingcontext inits on exception initsonexception caught exception types caughtexceptiontypes unconditional inits unconditionalinits add potential initializations from addpotentialinitializationsfrom try info tryinfo unconditional inits unconditionalinits add potential initializations from addpotentialinitializationsfrom handling context handlingcontext inits on return initsonreturn catch info catchinfo mark as definitely assigned markasdefinitelyassigned catch arguments catcharguments binding handling context handlingcontext inits on exception initsonexception caught exception types caughtexceptiontypes is reachable isreachable try block tryblock statements catch info catchinfo set reach mode setreachmode flow info flowinfo unreachable catch info catchinfo catch blocks catchblocks analyse code analysecode current scope currentscope inside sub context insidesubcontext flow context flowcontext inside sub context insidesubcontext catch info catchinfo catch exits catchexits catch info catchinfo is reachable isreachable try info tryinfo try info tryinfo merged with mergedwith catch info catchinfo unconditional inits unconditionalinits sub routine start label subroutinestartlabel merged init state index mergedinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates try info tryinfo try info tryinfo check potential multiple assignments variables block include potential inits returns parts aof finally context finallycontext complain on redundant final assignments complainonredundantfinalassignments try info tryinfo is reachable isreachable try info tryinfo add potential initializations from addpotentialinitializationsfrom inside sub context insidesubcontext inits on return initsonreturn inside sub context insidesubcontext inits on return initsonreturn current scope currentscope sub info subinfo flow info flowinfo dead merged init state index mergedinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates sub info subinfo sub info subinfo flow info flowinfo merged info mergedinfo try info tryinfo add initializations from addinitializationsfrom sub info subinfo merged init state index mergedinitstateindex current scope currentscope method scope methodscope record initialization states recordinitializationstates merged info mergedinfo merged info mergedinfo is sub routine escaping issubroutineescaping is sub routine escaping issubroutineescaping statement code generation jsr byte code bytecode post target level jsr byte code bytecode inline block return address returnaddress all ocated allocated jsr allowed generate code generatecode block scope blockscope current scope currentscope code stream codestream code stream codestream bits isreachablemask code generation res tarted restarted wide mode any exception labels count anyexceptionlabelscount any exception labels anyexceptionlabels exception handler any exception labels count anyexceptionlabelscount code stream codestream position block generated subroutine jsr ret byte codes bytecodes subroutine returning optimized instance block complete block inlined jsr ret byte codes bytecodes inlined finally mode finallymode sub routine start label subroutinestartlabel finally mode finallymode is sub routine escaping issubroutineescaping finally mode finallymode complete scope environment options inline jsr byte code inlinejsrbytecode finally mode finallymode inlined finally mode finallymode subroutine requires natural exit requiresnaturalexit preparing exception labels max catches maxcatches exception label exceptionlabel exception labels exceptionlabels exception label exceptionlabel max catches maxcatches catch arguments catcharguments catch arguments catcharguments length max catches maxcatches exception labels exceptionlabels exception label exceptionlabel code stream codestream catch arguments catcharguments binding type sub routine start label subroutinestartlabel sub routine start label subroutinestartlabel initialize code stream codestream enter any exception handler enteranyexceptionhandler code stream codestream generate block try block tryblock generate code generatecode scope code stream codestream try block has some code tryblockhassomecode code stream codestream position place positions user defined exception labels try block has some code tryblockhassomecode natural exit require subroutine invocation label natural exit label naturalexitlabel label code stream codestream try block exit tryblockexit position code stream codestream position finally mode finallymode subroutine inlined requires natural exit requiresnaturalexit fall code stream codestream natural exit label naturalexitlabel complete code stream codestream sub routine start label subroutinestartlabel code stream codestream update last recorded end c updatelastrecordedendpc position tag ged tagged block max catches maxcatches exception labels exceptionlabels place end placeend generate sequence handler starting storing tos exception thrown variables source denote handled exception catch arguments catcharguments max catches maxcatches loose local variable initial izations initializations local variable attributes pre try init state index pretryinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope pre try init state index pretryinitstateindex exception labels exceptionlabels place code stream codestream inc r stack size incrstacksize opt imizing optimizing exception variable local variable binding localvariablebinding catch var catchvar varpc code stream codestream position catch var catchvar catch arguments catcharguments binding resolved position resolvedposition code stream codestream store catch var catchvar catch var catchvar record initialization start c recordinitializationstartpc code stream codestream position code stream codestream add visible local variable addvisiblelocalvariable catch var catchvar code stream codestream pop code stream codestream record positions from recordpositionsfrom varpc catch arguments catcharguments source start sourcestart track pcs div erging diverging point computing local attribute passing catch scope catchscope block generation exit user scope exituserscope catch scope catchscope catch blocks catchblocks generate code generatecode scope code stream codestream catch exits catchexits finally mode finallymode subroutine inlined requires natural exit requiresnaturalexit fall code stream codestream natural exit label naturalexitlabel complete code stream codestream sub routine start label subroutinestartlabel exit any exception handler exitanyexceptionhandler extra handler trailing natural exit fixed natural exit generated exception label exceptionlabel natural exit exception handler naturalexitexceptionhandler finally mode finallymode subroutine requires natural exit requiresnaturalexit exception label exceptionlabel code stream codestream add ition addition special handler ensure uncaught exception exception thrown blocks block finally sequence start c finallysequencestartpc code stream codestream position sub routine start label subroutinestartlabel place all any exception handlers placeallanyexceptionhandlers natural exit exception handler naturalexitexceptionhandler natural exit exception handler naturalexitexceptionhandler place pre try init state index pretryinitstateindex reset initialization normal block code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope pre try init state index pretryinitstateindex code stream codestream inc r stack size incrstacksize finally mode finallymode subroutine code stream codestream store any exception variable anyexceptionvariable code stream codestream jsr sub routine start label subroutinestartlabel code stream codestream record positions from recordpositionsfrom finally sequence start c finallysequencestartpc finally block finallyblock source start sourcestart position code stream codestream position code stream codestream load any exception variable anyexceptionvariable code stream codestream athrow code stream codestream record positions from recordpositionsfrom position finally block finallyblock source end sourceend sub routine start label subroutinestartlabel place code stream codestream inc r stack size incrstacksize position code stream codestream position code stream codestream store return address variable returnaddressvariable code stream codestream record positions from recordpositionsfrom position finally block finallyblock source start sourcestart finally block finallyblock generate code generatecode scope code stream codestream position code stream codestream position code stream codestream ret return address variable returnaddressvariable resolved position resolvedposition code stream codestream update last recorded end c updatelastrecordedendpc position code stream codestream record positions from recordpositionsfrom position finally block finallyblock source end sourceend ret byte code bytecode subroutine inlined code stream codestream store any exception variable anyexceptionvariable code stream codestream record positions from recordpositionsfrom finally sequence start c finallysequencestartpc finally block finallyblock source start sourcestart finally block finallyblock generate code generatecode current scope currentscope code stream codestream position code stream codestream position code stream codestream load any exception variable anyexceptionvariable code stream codestream athrow sub routine start label subroutinestartlabel place code stream codestream record positions from recordpositionsfrom position finally block finallyblock source end sourceend complete code stream codestream pop sub routine start label subroutinestartlabel place code stream codestream record positions from recordpositionsfrom finally sequence start c finallysequencestartpc finally block finallyblock source start sourcestart finally block finallyblock generate code generatecode scope code stream codestream nat urally naturally fall subsequent code subroutine invocation natural exit label naturalexitlabel place requires natural exit requiresnaturalexit finally mode finallymode subroutine position code stream codestream position natural exit handler natural exit exception handler naturalexitexceptionhandler place start placestart code stream codestream jsr sub routine start label subroutinestartlabel natural exit exception handler naturalexitexceptionhandler place end placeend code stream codestream record positions from recordpositionsfrom position finally block finallyblock source end sourceend inlined needed exception handler inlined subroutine pre try init state index pretryinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope pre try init state index pretryinitstateindex entire sequence block finally block finallyblock generate code generatecode scope code stream codestream complete subroutine simply position label natural exit natural exit label naturalexitlabel place block generate body block sub routine start label subroutinestartlabel finally block finallyblock generate code generatecode scope code stream codestream loose local variable initial izations initializations local variable attributes merged init state index mergedinitstateindex code stream codestream remove not definitely assigned variables removenotdefinitelyassignedvariables current scope currentscope merged init state index mergedinitstateindex code stream codestream add definitely assigned variables adddefinitelyassignedvariables current scope currentscope merged init state index mergedinitstateindex code stream codestream record positions from recordpositionsfrom source start sourcestart javadoc org eclipse jdt internal compiler ast sub routine statement subroutinestatement generate sub routine invocation generatesubroutineinvocation org eclipse jdt internal compiler lookup block scope blockscope org eclipse jdt internal compiler codegen code stream codestream generate sub routine invocation generatesubroutineinvocation block scope blockscope current scope currentscope code stream codestream code stream codestream is sub routine escaping issubroutineescaping code stream codestream sub routine start label subroutinestartlabel current scope currentscope environment options inline jsr byte code inlinejsrbytecode jsr byte code bytecode simply inline subroutine finally block finallyblock generate code generatecode current scope currentscope code stream codestream classic subroutine invocation distinguish returning subroutine code stream codestream jsr sub routine start label subroutinestartlabel string buffer stringbuffer print statement printstatement indent string buffer stringbuffer output nls print indent printindent indent output append nls try block tryblock print statement printstatement indent output cat ches catches catch blocks catchblocks catch blocks catchblocks length output append nls print indent printindent indent output append nls nls catch arguments catcharguments print output append nls catch blocks catchblocks print statement printstatement indent output finally block finallyblock output append nls print indent printindent indent output append finally block finallyblock print statement printstatement indent output output resolve block scope blockscope upper scope upperscope special scope secret locals optimization scope block scope blockscope upper scope upperscope block scope blockscope try scope tryscope block scope blockscope scope block scope blockscope finally scope finallyscope finally block finallyblock finally block finallyblock is empty block isemptyblock finally block finallyblock bits undocumentedemptyblockmask scope problem reporter problemreporter undo cumented empty block undocumentedemptyblock finally block finallyblock source start sourcestart finally block finallyblock source end sourceend don add parent scope finally scope finallyscope block scope blockscope scope provision returning for cing forcing block method scope methodscope method scope methodscope scope method scope methodscope type matter base type upper scope upperscope environment options inline jsr byte code inlinejsrbytecode return address variable returnaddressvariable local variable binding localvariablebinding secret return name secretreturnname upper scope upperscope get java lang object getjavalangobject acc default accdefault finally scope finallyscope add local variable addlocalvariable return address variable returnaddressvariable inlinable return address variable returnaddressvariable set constant setconstant inlinable notaconstant sub routine start label subroutinestartlabel label any exception variable anyexceptionvariable local variable binding localvariablebinding secret any handler name secretanyhandlername scope get java lang throwable getjavalangthrowable acc default accdefault finally scope finallyscope add local variable addlocalvariable any exception variable anyexceptionvariable inlinable any exception variable anyexceptionvariable set constant setconstant notaconstant method scope methodscope is inside initializer isinsideinitializer method binding methodbinding method binding methodbinding abstract method declaration abstractmethoddeclaration method scope methodscope reference context referencecontext binding method binding methodbinding type binding typebinding method return type methodreturntype method binding methodbinding return type returntype method return type methodreturntype secret return value secretreturnvalue local variable binding localvariablebinding secret local declaration name secretlocaldeclarationname method return type methodreturntype acc default accdefault finally scope finallyscope add local variable addlocalvariable secret return value secretreturnvalue inlinable secret return value secretreturnvalue set constant setconstant inlinable notaconstant finally block finallyblock resolve using resolveusing finally scope finallyscope force scope variable positions shifted scope finally scope finallyscope shift scopes shiftscopes block scope blockscope catch arguments catcharguments catch arguments catcharguments length finally scope finallyscope shift scopes shiftscopes try scope tryscope try block tryblock resolve using resolveusing try scope tryscope arguments type checked java lang throwable javalangthrowable resolve for catch resolveforcatch catch blocks catchblocks length catch arguments catcharguments length type binding typebinding argument types argumenttypes type binding typebinding length catch has error catchhaserror length block scope blockscope catch scope catchscope block scope blockscope scope finally scope finallyscope finally scope finallyscope shift scopes shiftscopes catch scope catchscope side catch scope catchscope resolve for catch resolveforcatch argument types argumenttypes catch arguments catcharguments resolve for catch resolveforcatch catch scope catchscope catch has error catchhaserror catch blocks catchblocks resolve using resolveusing catch scope catchscope catch has error catchhaserror verify clause ordered special ized specialized caught exception types caughtexceptiontypes reference binding referencebinding length length caught exception types caughtexceptiontypes reference binding referencebinding argument types argumenttypes caught exception types caughtexceptiontypes is compatible with iscompatiblewith argument types argumenttypes scope problem reporter problemreporter wrong sequence of exception types error wrongsequenceofexceptiontypeserror caught exception types caughtexceptiontypes argument types argumenttypes caught exception types caughtexceptiontypes reference binding referencebinding finally scope finallyscope add finally scope finallyscope sub scope subscope shifted sub scopes subscopes shifting achieve overlay scope sibling term local variable positions scope add sub scope addsubscope finally scope finallyscope traverse ast visitor astvisitor visitor block scope blockscope block scope blockscope visitor visit block scope blockscope try block tryblock traverse visitor scope catch arguments catcharguments max catch blocks catchblocks length max catch arguments catcharguments traverse visitor scope catch blocks catchblocks traverse visitor scope finally block finallyblock finally block finallyblock traverse visitor scope visitor end visit endvisit block scope blockscope