copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation nina rinskaya https bugs eclipse org bugs bug cgi org eclipse jdt core tests runtime java java util org eclipse jdt core tests util util root launch ers launchers launch v ms vms machine local launcher limitations retrieve running virtual machines launched client instances code localvmlauncher code instances retrieve running v ms vms suppress warnings suppresswarnings unchecked rawtypes localvmlauncher runtime constants runtimeconstants target file system supports writing files disk org eclipse jdt core tests eval target code snippet runner codesnippetrunner target file system string regular classpath directory regular path regularpath string boot classpath directory boot path bootpath string boot path bootpath string class path classpath debug port debugport eval port evalport string eval target path evaltargetpath string program arguments programarguments string program class programclass vector local virtual machine localvirtualmachine vector runningvms vector string vm arguments vmarguments string vm path vmpath returns launcher launch kind running localvmlauncher get launcher getlauncher string vm name vmname system get property getproperty java equals vm name vmname vm launcher vmlauncher vm name vmname vm name vmname index of indexof j rock it jrockit j rock it launcher jrockitvmlauncher string os name osname system get property getproperty os name osname starts with startswith mac macvmlauncher file file file util getjredirectory lib jar file exists standardvmlauncher ibm equals vm name vmname side car j sidecarj vm launcher vmlauncher drlvm equals vm name vmname drlvm launcher drlvmlauncher sidecarvmlauncher builds actual path passed string build class path buildclasspath string buffer stringbuffer class path string classpathstring string buffer stringbuffer path separator pathseparator file path separator char pathseparatorchar add jar support evaluation mode eval port evalport class path string classpathstring append file eval target path evaltargetpath support zip file get path getpath class path string classpathstring append path separator pathseparator add path client class path classpath length class path classpath length length class path string classpathstring append class path classpath class path string classpathstring append path separator pathseparator add regular classpath directory needed eval port evalport target file system class path string classpathstring append eval target path evaltargetpath class path string classpathstring append file separator char separatorchar class path string classpathstring append regular classpath directory class path string classpathstring to string tostring launches exec ing command returns process process exec command line execcommandline target exception targetexception check path vm path vmpath target exception targetexception path check program evaluation mode program class programclass eval port evalport target exception targetexception program launch process vm process vmprocess runtime exec string tokens runtime exec string command line string commandlinestring properly handle spaces arguments unix linux platforms string command line commandline get command line getcommandline debug command line commandline length system print command line commandline system println vm process vmprocess runtime get runtime getruntime exec command line commandline io exception ioexception target exception targetexception error launching vm path vmpath vm process vmprocess returns boot path launched string get boot class path getbootclasspath boot path bootpath returns path launched string get class path getclasspath class path classpath returns command launch segments order path arguments path program program arguments string get command line getcommandline returns debug port debug mode disabled get debug port getdebugport debug port debugport returns evaluation port evaluation support indicating evaluation support set eval port setevalport get eval port getevalport eval port evalport returns evaluation target path evaluation support set eval target path setevaltargetpath string string get eval target path getevaltargetpath eval target path evaltargetpath returns arguments passed program returns launched evaluation support string get program arguments getprogramarguments eval port evalport program arguments programarguments returns dot separated fully qualified implement main string args returns launched evaluation support string get program class getprogramclass eval port evalport program class programclass returns target v ms vms running launcher target address note target v ms vms launched launcher note list running v ms vms doesn change target calls method v ms vms equal list running target v ms vms local virtual machine localvirtualmachine get running virtual mac hines getrunningvirtualmachines select v ms vms running vector actually running actuallyrunning vector enumeration runningvms elements has more elements hasmoreelements local virtual machine localvirtualmachine local virtual machine localvirtualmachine next element nextelement is running isrunning actually running actuallyrunning add element addelement runningvms actually running actuallyrunning running v ms vms size actually running actuallyrunning size local virtual machine localvirtualmachine result local virtual machine localvirtualmachine size size result local virtual machine localvirtualmachine actually running actuallyrunning element at elementat result returns address target launcher runs target v ms vms format address transport specific launcher tcp transport returns target add res ses addresses code localhost code code joe ibm code transport specific address target string get target address gettargetaddress localhost returns specific arguments include path path boot path program program arguments string getvmarguments vm arguments vmarguments returns path disk launch string getvmpath vm path vmpath initializes context target path copying jar file code snippet support creating directories code snippet classes target file system add code snipport root boot path directory code snippets java packages target exception targetexception path initialized code snippet support init target path inittargetpath target exception targetexception create directories file directory file eval target path evaltargetpath directory mkdirs directory exists target exception targetexception create directory eval target path evaltargetpath target file system file classes directory classesdirectory file directory regular classpath directory classes directory classesdirectory mkdir classes directory classesdirectory exists target exception targetexception create directory classes directory classesdirectory get path getpath file boot directory bootdirectory file directory boot classpath directory boot directory bootdirectory mkdir boot directory bootdirectory exists target exception targetexception create directory boot directory bootdirectory get path getpath add code snippet root boot path directory input stream inputstream evaluation context evaluationcontext get resource as stream getresourceasstream support zip file zip input stream zipinputstream zip zip input stream zipinputstream string root class file name rootclassfilename root full replace zip entry zipentry entry zip get next entry getnextentry entry get name getname equals root class file name rootclassfilename read root file contents size entry get size getsize buffer size total read totalread read total read totalread size read zip read buffer total read totalread size total read totalread read total read totalread read write root file contents file output stream fileoutputstream file root file rootfile file boot directory bootdirectory root class file name rootclassfilename replace file separator char separatorchar file parent file root file rootfile get parent getparent parent mkdirs file output stream fileoutputstream root file rootfile write buffer close io exception ioexception print stack trace printstacktrace close io exception ioexception close io exception ioexception print stack trace printstacktrace close io exception ioexception copy jar file input stream inputstream file output stream fileoutputstream get class getclass get resource as stream getresourceasstream support zip file target exception targetexception find resource support zip file buffer length bufferlength buffer buffer length bufferlength file file file directory support zip file file output stream fileoutputstream file read read read read buffer buffer length bufferlength read write buffer read io exception ioexception target exception targetexception io exception ioexception copying support zip file get message getmessage close io exception ioexception close io exception ioexception launches target registered arguments operation returns target launched exception target exception targetexception target launched local virtual machine localvirtualmachine launch target exception targetexception evaluation mode eval target path evaltargetpath init target path init target path inittargetpath launch local virtual machine localvirtualmachine process exec command line execcommandline local virtual machine localvirtualmachine debug port debugport eval target path evaltargetpath tbd start reading stdout stderr prevent connection happening add list running v ms vms runningvms add element addelement sets boot path launched set boot class path setbootclasspath java lang string boot class path bootclasspath boot path bootpath boot class path bootclasspath sets path launched set class path setclasspath string class path classpath class path classpath class path classpath sets debug port debug support disable debug mode set debug port setdebugport debug port debugport debug port debugport debug port debugport sets evaluation port evaluation support setting port enables evaluation support disable evaluation support set eval port setevalport eval port evalport eval port evalport eval port evalport sets evaluation target path evaluation support set eval target path setevaltargetpath string eval target path evaltargetpath eval target path evaltargetpath eval target path evaltargetpath sets arguments passed program launched evaluation support set program arguments setprogramarguments string args program arguments programarguments args sets dot separated fully qualified implement main string args launched evaluation support set program class setprogramclass string program class programclass program class programclass program class programclass sets specific arguments include path path boot path program program arguments setvmarguments string args vm arguments vmarguments args sets path disk launch setvmpath string vm path vmpath vm path vmpath vm path vmpath