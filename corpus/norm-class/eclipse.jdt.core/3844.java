copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler lookup org eclipse jdt core compiler char operation charoperation org eclipse jdt internal compiler ast org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler codegen code stream codestream org eclipse jdt internal compiler problem problem reporter problemreporter block scope blockscope scope local variable management local variable binding localvariablebinding locals position variable local index localindex start position scope ordering scopes variables start index startindex variable allocation scopes offset variable allocation scopes max offset maxoffset scopes shifted res pective respective scope avoid collisions secret variables add ress address save block scope blockscope shift scopes shiftscopes variable binding variablebinding emulation path to implicit this emulationpathtoimplicitthis variable binding variablebinding no enclosing instance in constructor call noenclosinginstanceinconstructorcall variable binding variablebinding no enclosing instance in static context noenclosinginstanceinstaticcontext access code assist scope subscopes scope access code assist subscope count subscopecount record current statement processed entire block local types accessed blocks case statement casestatement switch case switchcase block scope blockscope kind scope parent kind parent block scope blockscope block scope blockscope parent parent block scope blockscope block scope blockscope parent add to parent scope addtoparentscope block scope parent locals local variable binding localvariablebinding add to parent scope addtoparentscope parent add sub scope addsubscope start index startindex parent local index localindex block scope blockscope block scope blockscope parent variable count variablecount block scope parent locals local variable binding localvariablebinding variable count variablecount parent add sub scope addsubscope start index startindex parent local index localindex create scope binding anonymous type add anonymous type addanonymoustype type declaration typedeclaration anonymous type anonymoustype reference binding referencebinding super binding superbinding class scope classscope anonymous class scope anonymousclassscope class scope classscope anonymous type anonymoustype anonymous class scope anonymousclassscope build anonymous type binding buildanonymoustypebinding enclosing source type enclosingsourcetype super binding superbinding create scope binding local type add local type addlocaltype type declaration typedeclaration local type localtype check local type localtype conflict enclosing type reference binding referencebinding type enclosing source type enclosingsourcetype char operation charoperation equals type source name sourcename local type localtype problem reporter problemreporter hiding enclosing type hidingenclosingtype local type localtype type type enclosing type enclosingtype type check local type localtype conflict sibling local type scope scope block scope blockscope scope find local type findlocaltype local type localtype problem reporter problemreporter duplicate nested type duplicatenestedtype local type localtype scope scope parent block scope blockscope class scope classscope local type scope localtypescope class scope classscope local type localtype add sub scope addsubscope local type scope localtypescope local type scope localtypescope build local type binding buildlocaltypebinding enclosing source type enclosingsourcetype insert local variable scope updating position checking locals arguments all ocated allocated add local variable addlocalvariable local variable binding localvariablebinding binding check and set modifiers for variable checkandsetmodifiersforvariable binding insert local scope local index localindex locals length system arraycopy locals locals local variable binding localvariablebinding local index localindex local index localindex locals local index localindex binding update local variable binding binding declaring scope declaringscope binding outer most method scope outermostmethodscope analysis index analysisindex share outer most outermost method scope analysis index analysisindex add sub scope addsubscope scope child scope childscope subscope count subscopecount subscopes length system arraycopy subscopes subscopes scope subscope count subscopecount subscope count subscopecount subscopes subscope count subscopecount child scope childscope answer receiver suitable assigning blank fields initializer constructor clinit allow blank final field assignment allowblankfinalfieldassignment field binding fieldbinding binding enclosing source type enclosingsourcetype binding declaring class declaringclass method scope methodscope method scope methodscope method scope methodscope method scope methodscope is static isstatic binding is static isstatic initializer method scope methodscope is inside initializer isinsideinitializer abstract method declaration abstractmethoddeclaration method scope methodscope reference context referencecontext is initialization method isinitializationmethod constructor clinit string basic to string basictostring tab nls string new line newline tab nls new line newline nls string new line newline block scope nls new line newline nls new line newline locals local index localindex nls new line newline locals to string tostring nls new line newline start index startindex start index startindex check and set modifiers for variable checkandsetmodifiersforvariable local variable binding localvariablebinding var binding varbinding modifiers var binding varbinding modifiers modifiers acc alternate modifier problem accalternatemodifierproblem var binding varbinding declaration problem reporter problemreporter duplicate modifier for variable duplicatemodifierforvariable var binding varbinding declaration method scope methodscope real modifiers realmodifiers modifiers acc just flag accjustflag unexpected modifiers unexpectedmodifiers acc final accfinal real modifiers realmodifiers unexpected modifiers unexpectedmodifiers var binding varbinding declaration problem reporter problemreporter illegal modifier for variable illegalmodifierforvariable var binding varbinding declaration method scope methodscope var binding varbinding modifiers modifiers compute variable positions scopes initial position offset ignoring unused local variables argument expected ilocal argument local outer most outermost scope arguments managed method scope methodscope method compute local variable positions computelocalvariablepositions ilocal init offset initoffset code stream codestream code stream codestream offset init offset initoffset max offset maxoffset init offset initoffset local variable init max locals maxlocals local index localindex has more variables hasmorevariables ilocal max locals maxlocals scope init iscope max scopes maxscopes subscope count subscopecount has more scopes hasmorescopes max scopes maxscopes iter ate iterate scopes variables parallel has more variables hasmorevariables has more scopes hasmorescopes has more scopes hasmorescopes has more variables hasmorevariables subscopes iscope start index startindex ilocal subscope subscopes iscope block scope blockscope block scope blockscope subscope block scope blockscope subscopes iscope sub offset suboffset subscope shift scopes shiftscopes offset subscope max shifted offset maxshiftedoffset subscope compute local variable positions computelocalvariablepositions sub offset suboffset code stream codestream subscope max offset maxoffset max offset maxoffset max offset maxoffset subscope max offset maxoffset has more scopes hasmorescopes iscope max scopes maxscopes variable local locals ilocal local variable binding localvariablebinding local locals ilocal check variable force preserved generate current local var generatecurrentlocalvar local use flag useflag local variable binding localvariablebinding local is constant value isconstantvalue report fake variable local use flag useflag local variable binding localvariablebinding unused unused secret local local declaration declaration reachable local declaration bits ast node astnode is local declaration reachable k islocaldeclarationreachablemask report unused arguments local declaration argument problem reporter problemreporter unused local variable unusedlocalvariable local declaration optimized preserve unread variables generate current local var generatecurrentlocalvar local declaration environment options preserve all local variables preservealllocalvariables force preserved generated code generate current local var generatecurrentlocalvar local use flag useflag local variable binding localvariablebinding all ocate allocate variable generate current local var generatecurrentlocalvar local declaration record user defined local variables attribute generation code stream codestream record local assign variable position local resolved position resolvedposition offset local type long binding longbinding local type double binding doublebinding offset offset locals offset xffff problem reporter problemreporter no more available space for local nomoreavailablespaceforlocal local local declaration ast node astnode method scope methodscope reference context referencecontext local declaration generated local resolved position resolvedposition generated has more variables hasmorevariables ilocal max locals maxlocals offset max offset maxoffset max offset maxoffset offset record suitable binding denoting synthetic field constructor argument mapping actual local variable scope context note local variable emulated pointer declaring scope emulate outer access emulateouteraccess local variable binding localvariablebinding outer local variable outerlocalvariable method scope methodscope current method scope currentmethodscope current method scope currentmethodscope method scope methodscope outer local variable outerlocalvariable declaring scope declaringscope method scope methodscope nested type binding nestedtypebinding current type currenttype nested type binding nestedtypebinding enclosing source type enclosingsourcetype member types pre emulation performed current type currenttype is local type islocaltype add synthetic field constructor current method scope currentmethodscope is inside initializer or constructor isinsideinitializerorconstructor current type currenttype add synthetic argument and field addsyntheticargumentandfield outer local variable outerlocalvariable current type currenttype add synthetic argument addsyntheticargument outer local variable outerlocalvariable note produce direct access target enclosing type targetenclosingtype field sequence handle test foo foo object object deal enclosing instance figure reference binding referencebinding find local type findlocaltype compliance environment options compliance level compliancelevel length subscope count subscopecount length subscopes class scope classscope local type binding localtypebinding source type sourcetype local type binding localtypebinding class scope classscope subscopes reference context referencecontext binding local types accessed blocks compliance class file constants classfileconstants jdk source type sourcetype switch case switchcase switch case switchcase char operation charoperation equals source type sourcetype source name sourcename source type sourcetype local variable binding localvariablebinding find variable findvariable variable var length varlength variable length length locals length length local variable binding localvariablebinding local locals local local length var length varlength char operation charoperation equals local variable local api flag mask values variable field local type bindings mask answered variable mask field local field local answered names type names consumed field field answered type mask names type names consumed input input consumed type answered conditions errors problem binding returned note problem binding returned send ers senders extract compound binding assume problem applies entire compound name compoundname variable mask precedence type mask invocation site invocationsite is super access issuperaccess determine discovered field visible set field index setfieldindex record number names consumed get binding getbinding foo variable site answer binding field local named foo error binding exists add ition addition set field index setfieldindex invocation site type named foo exists detected error binding answered note method written assumption compound name compoundname longer length binding get binding getbinding compound name compoundname mask invocation site invocationsite invocation site invocationsite need resolve needresolve binding binding get binding getbinding compound name compoundname mask type invocation site invocationsite need resolve needresolve invocation site invocationsite set field index setfieldindex binding variable binding variablebinding binding compilation unit scope compilationunitscope record simple reference recordsimplereference compound name compoundname binding is valid binding isvalidbinding binding length compound name compoundname length current index currentindex found type foundtype binding package binding packagebinding package binding packagebinding package binding packagebinding package binding packagebinding binding current index currentindex length compilation unit scope compilationunitscope record reference recordreference package binding packagebinding compound name compoundname compound name compoundname current index currentindex binding package binding packagebinding get type or package gettypeorpackage compound name compoundname current index currentindex invocation site invocationsite set field index setfieldindex current index currentindex binding current index currentindex length type idea type problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex not found notfound problem binding problembinding char operation charoperation subarray compound name compoundname current index currentindex not found notfound binding reference binding referencebinding binding is valid binding isvalidbinding problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex binding problem id problemid reference binding referencebinding binding can be seen by canbeseenby problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex reference binding referencebinding binding not visible notvisible found type foundtype package binding packagebinding package binding packagebinding binding illegal request method problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex not found notfound binding reference binding referencebinding current index currentindex length reference binding referencebinding type binding typebinding reference binding referencebinding binding next name nextname compound name compoundname current index currentindex invocation site invocationsite set field index setfieldindex current index currentindex invocation site invocationsite set actual receiver type setactualreceivertype type binding typebinding mask field binding find field findfield type binding typebinding next name nextname invocation site invocationsite resolve binding is valid binding isvalidbinding problem field binding problemfieldbinding field binding fieldbinding binding declaring class declaringclass char operation charoperation subarray compound name compoundname current index currentindex binding problem id problemid binding field binding find member type findmembertype next name nextname type binding typebinding mask field problem binding problembinding char operation charoperation subarray compound name compoundname current index currentindex type binding typebinding not found notfound problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex type binding typebinding not found notfound binding is valid binding isvalidbinding problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex binding problem id problemid mask field binding field binding fieldbinding field field field binding fieldbinding field field binding fieldbinding binding field is static isstatic problem field binding problemfieldbinding field declaring class declaringclass char operation charoperation subarray compound name compoundname current index currentindex non static reference in static context nonstaticreferenceinstaticcontext binding mask type binding reference binding referencebinding type type binding handle field type asked resolved compound name compoundname type field problem binding problembinding char operation charoperation subarray compound name compoundname current index currentindex not found notfound code assist api binding get binding getbinding compound name compoundname invocation site invocationsite invocation site invocationsite current index currentindex length compound name compoundname length binding binding get binding getbinding compound name compoundname current index currentindex variable type invocation site invocationsite resolve binding is valid binding isvalidbinding binding found type foundtype binding package binding packagebinding current index currentindex length package binding packagebinding package binding packagebinding package binding packagebinding binding binding package binding packagebinding get type or package gettypeorpackage compound name compoundname current index currentindex binding current index currentindex length type idea type problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex not found notfound problem binding problembinding char operation charoperation subarray compound name compoundname current index currentindex not found notfound binding reference binding referencebinding binding is valid binding isvalidbinding problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex binding problem id problemid reference binding referencebinding binding can be seen by canbeseenby problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex reference binding referencebinding binding not visible notvisible found type foundtype binding found field foundfield binding reference binding referencebinding current index currentindex length reference binding referencebinding type binding typebinding reference binding referencebinding binding next name nextname compound name compoundname current index currentindex binding find field findfield type binding typebinding next name nextname invocation site invocationsite resolve binding is valid binding isvalidbinding problem field binding problemfieldbinding field binding fieldbinding binding declaring class declaringclass char operation charoperation subarray compound name compoundname current index currentindex binding problem id problemid field binding fieldbinding binding is static isstatic problem field binding problemfieldbinding field binding fieldbinding binding declaring class declaringclass char operation charoperation subarray compound name compoundname current index currentindex non static reference in static context nonstaticreferenceinstaticcontext binding field found field foundfield binding find member type findmembertype next name nextname type binding typebinding problem binding problembinding char operation charoperation subarray compound name compoundname current index currentindex type binding typebinding not found notfound binding is valid binding isvalidbinding problem reference binding problemreferencebinding char operation charoperation subarray compound name compoundname current index currentindex binding problem id problemid binding variable binding variablebinding variable binding variablebinding variable binding variablebinding binding current index currentindex length type binding typebinding type binding typebinding variable binding variablebinding type type binding typebinding problem field binding problemfieldbinding char operation charoperation subarray compound name compoundname current index currentindex not found notfound variable binding variablebinding find field findfield type binding typebinding compound name compoundname current index currentindex invocation site invocationsite resolve variable binding variablebinding problem field binding problemfieldbinding char operation charoperation subarray compound name compoundname current index currentindex not found notfound variable binding variablebinding is valid binding isvalidbinding variable binding variablebinding variable binding variablebinding ret rieves retrieves argument maps enclosing instance suitable type answers nil create implicit this implicitthis implicit arg constructor arg arg constructor arg sequence fields field desc r fielddescr sequence fields nil note algorithm answer shortest sequence short cuts shortcuts code generation compact runtime faster variable binding variablebinding get emulation path getemulationpath local variable binding localvariablebinding outer local variable outerlocalvariable method scope methodscope current method scope currentmethodscope method scope methodscope source type binding sourcetypebinding source type sourcetype current method scope currentmethodscope enclosing source type enclosingsourcetype identity check current method scope currentmethodscope outer local variable outerlocalvariable declaring scope declaringscope method scope methodscope variable binding variablebinding outer local variable outerlocalvariable implicit good synthetic constructor arguments current method scope currentmethodscope is inside initializer or constructor isinsideinitializerorconstructor source type sourcetype is nested type isnestedtype synthetic argument binding syntheticargumentbinding synthetic arg syntheticarg synthetic arg syntheticarg nested type binding nestedtypebinding source type sourcetype get synthetic argument getsyntheticargument outer local variable outerlocalvariable variable binding variablebinding synthetic arg syntheticarg synthetic field current method scope currentmethodscope is static isstatic field binding fieldbinding synthetic field syntheticfield synthetic field syntheticfield source type sourcetype get synthetic field getsyntheticfield outer local variable outerlocalvariable variable binding variablebinding synthetic field syntheticfield ret rieves retrieves argument maps enclosing instance suitable type answers nil create implicit this implicitthis implicit arg constructor arg arg access access constructor arg sequence synthetic access ors accessors synthetic fields field desc r fielddescr access access synthetic field sequence synthetic access ors accessors synthetic fields jls http ergnosis java spec report java language jls html object get emulation path getemulationpath reference binding referencebinding target enclosing type targetenclosingtype only exact match onlyexactmatch ignore enclosing arg in constructor call ignoreenclosingarginconstructorcall method scope methodscope current method scope currentmethodscope method scope methodscope source type binding sourcetypebinding source type sourcetype current method scope currentmethodscope enclosing source type enclosingsourcetype current method scope currentmethodscope is constructor call isconstructorcall current method scope currentmethodscope is static isstatic source type sourcetype target enclosing type targetenclosingtype only exact match onlyexactmatch source type sourcetype find super type erasing to findsupertypeerasingto target enclosing type targetenclosingtype implicit good emulation path to implicit this emulationpathtoimplicitthis emulation types source type sourcetype is nested type isnestedtype source type sourcetype is static isstatic current method scope currentmethodscope is constructor call isconstructorcall no enclosing instance in constructor call noenclosinginstanceinconstructorcall current method scope currentmethodscope is static isstatic no enclosing instance in static context noenclosinginstanceinstaticcontext inside constructor insideconstructor current method scope currentmethodscope is inside initializer or constructor isinsideinitializerorconstructor synthetic constructor arguments inside constructor insideconstructor synthetic argument binding syntheticargumentbinding synthetic arg syntheticarg synthetic arg syntheticarg nested type binding nestedtypebinding source type sourcetype get synthetic argument getsyntheticargument target enclosing type targetenclosingtype only exact match onlyexactmatch reject allocation constructor call ignore enclosing arg in constructor call ignoreenclosingarginconstructorcall current method scope currentmethodscope is constructor call isconstructorcall source type sourcetype target enclosing type targetenclosingtype only exact match onlyexactmatch source type sourcetype find super type erasing to findsupertypeerasingto target enclosing type targetenclosingtype no enclosing instance in constructor call noenclosinginstanceinconstructorcall object synthetic arg syntheticarg direct synthetic field current method scope currentmethodscope is static isstatic no enclosing instance in static context noenclosinginstanceinstaticcontext field binding fieldbinding synthetic field syntheticfield source type sourcetype get synthetic field getsyntheticfield target enclosing type targetenclosingtype only exact match onlyexactmatch synthetic field syntheticfield current method scope currentmethodscope is constructor call isconstructorcall no enclosing instance in constructor call noenclosinginstanceinconstructorcall object synthetic field syntheticfield reached sequence enclosing instance link nested members object path object reference binding referencebinding current type currenttype source type sourcetype enclosing type enclosingtype inside constructor insideconstructor path nested type binding nestedtypebinding source type sourcetype get synthetic argument getsyntheticargument current type currenttype only exact match onlyexactmatch current method scope currentmethodscope is constructor call isconstructorcall no enclosing instance in constructor call noenclosinginstanceinconstructorcall path source type sourcetype get synthetic field getsyntheticfield current type currenttype only exact match onlyexactmatch accumulating path count reference binding referencebinding current enclosing type currentenclosingtype current enclosing type currentenclosingtype current type currenttype enclosing type enclosingtype current type currenttype target enclosing type targetenclosingtype only exact match onlyexactmatch current type currenttype find super type erasing to findsupertypeerasingto target enclosing type targetenclosingtype current method scope currentmethodscope current method scope currentmethodscope current method scope currentmethodscope enclosing method scope enclosingmethodscope current method scope currentmethodscope current method scope currentmethodscope is constructor call isconstructorcall no enclosing instance in constructor call noenclosinginstanceinconstructorcall current method scope currentmethodscope current method scope currentmethodscope is static isstatic no enclosing instance in static context noenclosinginstanceinstaticcontext synthetic field syntheticfield nested type binding nestedtypebinding current type currenttype get synthetic field getsyntheticfield current enclosing type currentenclosingtype only exact match onlyexactmatch synthetic field syntheticfield append path count path length system arraycopy path path object count count access emulation synthetic field path count source type binding sourcetypebinding synthetic field syntheticfield declaring class declaringclass add synthetic method addsyntheticmethod synthetic field syntheticfield current type currenttype current enclosing type currentenclosingtype current type currenttype target enclosing type targetenclosingtype only exact match onlyexactmatch current type currenttype find super type erasing to findsupertypeerasingto target enclosing type targetenclosingtype path answer variable exists receiver scope is duplicate local variable isduplicatelocalvariable block scope blockscope current local index localindex char operation charoperation equals current locals current kind block scope current block scope blockscope current parent max shifted offset maxshiftedoffset max shift scopes shiftscopes length shift scopes shiftscopes length length sub max offset submaxoffset shift scopes shiftscopes max offset maxoffset sub max offset submaxoffset max max sub max offset submaxoffset max answer problem reporter raising problems note side updates current reference context unit type method problem handler decides abort problem reporter problemreporter problem reporter problemreporter outer most method scope outermostmethodscope problem reporter problemreporter code responsible request emulation work invocation type supply correct synthetic arguments allocation target type propagate inner emulation propagateinneremulation reference binding referencebinding target type targettype is enclosing instance supplied isenclosinginstancesupplied propagate enclosing instances eagerly all ocated allocated synthetic argument binding syntheticargumentbinding synthetic arguments syntheticarguments synthetic arguments syntheticarguments target type targettype synthetic outer local variables syntheticouterlocalvariables max synthetic arguments syntheticarguments length max synthetic argument binding syntheticargumentbinding synthetic arg syntheticarg synthetic arguments syntheticarguments filter match supplied enclosing instance is enclosing instance supplied isenclosinginstancesupplied synthetic arg syntheticarg type target type targettype enclosing type enclosingtype emulate outer access emulateouteraccess synthetic arg syntheticarg actual outer local variable actualouterlocalvariable answer reference type scope nearest enclosing type scope type declaration typedeclaration reference type referencetype method scope methodscope reference type referencetype answer scope parent method scope answers class scope classscope relative position scope index scopeindex method scope methodscope block scope blockscope parent scope parentscope block scope blockscope parent scope parent sub scopes parentsubscopes parent scope parentscope subscopes max parent scope parentscope subscope count subscopecount max parent sub scopes parentsubscopes start position scope ordering scopes variables start index startindex start index startindex string to string tostring to string tostring string to string tostring tab string basic to string basictostring tab subscope count subscopecount subscopes block scope blockscope nls block scope blockscope subscopes to string tostring tab nls