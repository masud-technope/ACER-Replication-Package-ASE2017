copyright software rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors stephan herrmann initial api implementation lars vogel lars vogel vogella contributions bug org eclipse jdt internal compiler class fmt classfmt java io exception ioexception java input stream inputstream java input stream reader inputstreamreader java line number reader linenumberreader java util hash map hashmap java util map java util map entry org eclipse jdt core compiler char operation charoperation org eclipse jdt internal compiler env i binary annotation ibinaryannotation org eclipse jdt internal compiler env i binary element value pair ibinaryelementvaluepair org eclipse jdt internal compiler env i type annotation walker itypeannotationwalker org eclipse jdt internal compiler lookup lookup environment lookupenvironment org eclipse jdt internal compiler lookup signature wrapper signaturewrapper org eclipse jdt internal compiler util util external annotation provider externalannotationprovider nls string annotation file extension eea nls string prefix nls string prefix representation null able nullable annotation independent concrete annotation java sources nullable representation nonnull annotation independent concrete annotation java sources non null nonnull represents absence annotation removing existing annotation character int ernally internally eclipse external annotation file format annotation nls string annotation file suffix eea nls string type parameter prefix string type name typename string type parameters annotation source typeparametersannotationsource map string string supertype annotation sources supertypeannotationsources map string string method annotation sources methodannotationsources map string string field annotation sources fieldannotationsources create initialize param input open input stream read annotations closed constructor param type name typename slash separated qualified type io exception ioexception issues accessing annotation file external annotation provider externalannotationprovider input stream inputstream input string type name typename io exception ioexception type name typename type name typename initialize input initialize input stream inputstream input io exception ioexception line number reader linenumberreader reader line number reader linenumberreader input stream reader inputstreamreader input assert class header assertclassheader reader read line readline type name typename string reader read line readline starts with startswith type parameter prefix skip type parameter annotations reader read line readline starts with startswith type parameter prefix type parameters annotation source typeparametersannotationsource substring type parameter prefix length reader read line readline string pending line pendingline pending line pendingline trim is empty isempty string raw sig rawsig annot sig annotsig selector string selector is super issuper selector starts with startswith prefix is super issuper selector selector substring prefix length err line errline raw signature reader read line readline signature mandatory is empty isempty char at charat raw sig rawsig substring err line errline reader get line number getlinenumber annotated signature reader read line readline is empty isempty skip optional annotations missing char at charat push appears selector signature pending line pendingline annot sig annotsig substring exception raw sig rawsig annot sig annotsig err line errline err line errline reader get line number getlinenumber io exception ioexception nls illegal format annotation file nls err line errline discard optional meta data separated whitespace annot sig annotsig trim tail trimtail annot sig annotsig is super issuper supertype annotation sources supertypeannotationsources supertype annotation sources supertypeannotationsources hash map hashmap supertype annotation sources supertypeannotationsources selector raw sig rawsig annot sig annotsig nls raw sig rawsig method annotation sources methodannotationsources method annotation sources methodannotationsources hash map hashmap method annotation sources methodannotationsources selector raw sig rawsig annot sig annotsig field annotation sources fieldannotationsources field annotation sources fieldannotationsources hash map hashmap field annotation sources fieldannotationsources selector raw sig rawsig annot sig annotsig pending line pendingline reader read line readline header type name typename slash separated qualified assert class header assertclassheader string string type name typename io exception ioexception starts with startswith prefix substring prefix length nls io exception ioexception missing header annotation file trim tail trimtail equals type name typename nls nls io exception ioexception mismatching annotation file expected type name typename header extract signature external annotation file answers expected format string extract signature extractsignature string is empty isempty char at charat trim tail trimtail substring lines arbitrary trailing data separated white space string trim tail trimtail string tail index of indexof tail tail index of indexof tail substring tail i type annotation walker itypeannotationwalker for type header fortypeheader lookup environment lookupenvironment environment type parameters annotation source typeparametersannotationsource supertype annotation sources supertypeannotationsources dispatching annotation walker dispatchingannotationwalker environment i type annotation walker itypeannotationwalker empty annotation walker i type annotation walker itypeannotationwalker for method formethod selector signature lookup environment lookupenvironment environment map string string sources method annotation sources methodannotationsources sources string source sources string value of valueof char operation charoperation concat selector signature source method annotation walker methodannotationwalker source to char array tochararray environment i type annotation walker itypeannotationwalker empty annotation walker i type annotation walker itypeannotationwalker for field forfield selector signature lookup environment lookupenvironment environment field annotation sources fieldannotationsources string source field annotation sources fieldannotationsources string value of valueof char operation charoperation concat selector signature source field annotation walker fieldannotationwalker source to char array tochararray environment i type annotation walker itypeannotationwalker empty annotation walker string to string tostring string builder stringbuilder string builder stringbuilder nls append external annotations append type name typename append nls append methods method annotation sources methodannotationsources entry string string method annotation sources methodannotationsources entry set entryset append append get key getkey append to string tostring single marker annotation singlemarkerannotation i binary annotation ibinaryannotation override i binary element value pair ibinaryelementvaluepair get element value pairs getelementvaluepairs element value pair info elementvaluepairinfo no members nomembers get binary type name getbinarytypename char operation charoperation concat char operation charoperation concat with concatwith single marker annotation singlemarkerannotation nullable annotation non null nonnull annotation init annotations initannotations lookup environment lookupenvironment environment nullable annotation nullable annotation single marker annotation singlemarkerannotation override get type name gettypename get binary type name getbinarytypename environment get nullable annotation name getnullableannotationname non null nonnull annotation non null nonnull annotation single marker annotation singlemarkerannotation override get type name gettypename get binary type name getbinarytypename environment get non null annotation name getnonnullannotationname walker top level elements type type parameters types dispatches special ized specialized walk ers walkers details dispatching annotation walker dispatchingannotationwalker i type annotation walker itypeannotationwalker lookup environment lookupenvironment environment type parameters annotation walker typeparametersannotationwalker type parameters walker typeparameterswalker dispatching annotation walker dispatchingannotationwalker lookup environment lookupenvironment environment environment environment i type annotation walker itypeannotationwalker to type parameter totypeparameter is class type parameter isclasstypeparameter rank string source external annotation provider externalannotationprovider type parameters annotation source typeparametersannotationsource source type parameters walker typeparameterswalker type parameters walker typeparameterswalker type parameters annotation walker typeparametersannotationwalker source to char array tochararray environment type parameters walker typeparameterswalker to type parameter totypeparameter is class type parameter isclasstypeparameter rank i type annotation walker itypeannotationwalker to type parameter bounds totypeparameterbounds is class type parameter isclasstypeparameter parameter rank parameterrank type parameters walker typeparameterswalker type parameters walker typeparameterswalker to type parameter bounds totypeparameterbounds is class type parameter isclasstypeparameter parameter rank parameterrank i type annotation walker itypeannotationwalker to supertype tosupertype super type signature supertypesignature map string string sources external annotation provider externalannotationprovider supertype annotation sources supertypeannotationsources sources string source sources string value of valueof super type signature supertypesignature source super types annotation walker supertypesannotationwalker source to char array tochararray environment borrowed empty annotation walker i type annotation walker itypeannotationwalker to field tofield i type annotation walker itypeannotationwalker to throws tothrows rank i type annotation walker itypeannotationwalker to type argument totypeargument rank i type annotation walker itypeannotationwalker to method parameter tomethodparameter i type annotation walker itypeannotationwalker to type bound totypebound bound index boundindex i type annotation walker itypeannotationwalker to method return tomethodreturn i type annotation walker itypeannotationwalker to receiver toreceiver i type annotation walker itypeannotationwalker to wildcard bound towildcardbound i type annotation walker itypeannotationwalker to next array dimension tonextarraydimension i type annotation walker itypeannotationwalker to next nested type tonextnestedtype i binary annotation ibinaryannotation get annotations at cursor getannotationsatcursor current type id currenttypeid annotations basic annotation walker basicannotationwalker i type annotation walker itypeannotationwalker source signature wrapper signaturewrapper wrapper pos prev type arg start prevtypeargstart current type bound currenttypebound lookup environment lookupenvironment environment basic annotation walker basicannotationwalker source pos lookup environment lookupenvironment environment source source pos pos environment environment init annotations initannotations environment signature wrapper signaturewrapper wrapper with start wrapperwithstart start wrapper wrapper signature wrapper signaturewrapper source wrapper start start wrapper override i type annotation walker itypeannotationwalker to receiver toreceiver i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to type parameter totypeparameter is class type parameter isclasstypeparameter rank i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to type parameter bounds totypeparameterbounds is class type parameter isclasstypeparameter parameter rank parameterrank i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to type bound totypebound bound index boundindex i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to supertype tosupertype super type signature supertypesignature i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to type argument totypeargument rank rank start char operation charoperation index of indexof source pos prev type arg start prevtypeargstart start method annotation walker methodannotationwalker source start environment prev type arg start prevtypeargstart source fall wrapper with start wrapperwithstart compute end computeend prev type arg start prevtypeargstart method annotation walker methodannotationwalker source environment override i type annotation walker itypeannotationwalker to wildcard bound towildcardbound source pos method annotation walker methodannotationwalker source pos environment includes unbounded i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to next array dimension tonextarraydimension source pos new pos newpos pos source new pos newpos nullable non null nonnull new pos newpos method annotation walker methodannotationwalker source new pos newpos environment i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to next nested type tonextnestedtype fixme stephan override i binary annotation ibinaryannotation get annotations at cursor getannotationsatcursor current type id currenttypeid pos pos source length source pos source pos nullable i binary annotation ibinaryannotation external annotation provider externalannotationprovider nullable annotation non null nonnull i binary annotation ibinaryannotation external annotation provider externalannotationprovider non null nonnull annotation annotations walker serve annotations type parameters current method type parameters annotation walker typeparametersannotationwalker basic annotation walker basicannotationwalker indices start positions type parameters rank rank starts rankstarts current rank currentrank type parameters annotation walker typeparametersannotationwalker source pos rank rank starts rankstarts lookup environment lookupenvironment environment source pos environment current rank currentrank rank rank starts rankstarts rank starts rankstarts rank starts rankstarts eagerly scan type parameters length source length rank starts rankstarts length cur rank currank block binary type binding binarytypebinding create type variables createtypevariables depth pending variable pendingvariable scan variables scanvariables pos length source util start depth util depth scan variables scanvariables util depth length source util colon pending variable pendingvariable util colon depth variable pending variable pendingvariable skip optional bound reference type signature referencetypesignature peek length source util array length source util resolved current depth currentdepth depth length current depth currentdepth depth source util source util start current depth currentdepth source util current depth currentdepth unget pending variable pendingvariable pending variable pendingvariable rank starts rankstarts cur rank currank system arraycopy rank starts rankstarts rank starts rankstarts cur rank currank cur rank currank override i type annotation walker itypeannotationwalker to type parameter totypeparameter is class type parameter isclasstypeparameter rank rank current rank currentrank rank rank starts rankstarts length type parameters annotation walker typeparametersannotationwalker source rank starts rankstarts rank rank rank starts rankstarts environment i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to type parameter bounds totypeparameterbounds is class type parameter isclasstypeparameter parameter rank parameterrank type parameters annotation walker typeparametersannotationwalker source rank starts rankstarts parameter rank parameterrank parameter rank parameterrank rank starts rankstarts environment override i type annotation walker itypeannotationwalker to type bound totypebound bound index boundindex assume pos itioned positioned start bounded type parameter start previous type bound pos current type bound currenttypebound bound prefixed colon char operation charoperation index of indexof util colon source colon colon bound index boundindex skip type wrapper with start wrapperwithstart compute end computeend pos current type bound currenttypebound bound index boundindex override i type annotation walker itypeannotationwalker to field tofield nls unsupported operation exception unsupportedoperationexception navigate fields override i type annotation walker itypeannotationwalker to method return tomethodreturn nls unsupported operation exception unsupportedoperationexception navigate method override i type annotation walker itypeannotationwalker to method parameter tomethodparameter nls unsupported operation exception unsupportedoperationexception navigate method parameter override i type annotation walker itypeannotationwalker to throws tothrows nls unsupported operation exception unsupportedoperationexception navigate override i binary annotation ibinaryannotation get annotations at cursor getannotationsatcursor current type id currenttypeid pos pos source length source pos nullable i binary annotation ibinaryannotation external annotation provider externalannotationprovider nullable annotation non null nonnull i binary annotation ibinaryannotation external annotation provider externalannotationprovider non null nonnull annotation get annotations at cursor getannotationsatcursor current type id currenttypeid walker serving type annotations type super types supertypes super types annotation walker supertypesannotationwalker basic annotation walker basicannotationwalker super types annotation walker supertypesannotationwalker source lookup environment lookupenvironment environment source environment actual implementation inherited main entries to type argument totypeargument get annotations at cursor getannotationsatcursor override i type annotation walker itypeannotationwalker to field tofield nls unsupported operation exception unsupportedoperationexception supertype field annotations override i type annotation walker itypeannotationwalker to method return tomethodreturn nls unsupported operation exception unsupportedoperationexception supertype method override i type annotation walker itypeannotationwalker to method parameter tomethodparameter nls unsupported operation exception unsupportedoperationexception supertype method parameter override i type annotation walker itypeannotationwalker to throws tothrows nls unsupported operation exception unsupportedoperationexception supertype i method annotation walker imethodannotationwalker i type annotation walker itypeannotationwalker get parameter count getparametercount method annotation walker methodannotationwalker basic annotation walker basicannotationwalker i method annotation walker imethodannotationwalker prev param start prevparamstart type parameters annotation walker typeparametersannotationwalker type parameters walker typeparameterswalker method annotation walker methodannotationwalker source pos lookup environment lookupenvironment environment source pos environment type end typeend start source start start source start nullable non null nonnull start wrapper with start wrapperwithstart start compute end computeend override i type annotation walker itypeannotationwalker to type parameter totypeparameter is class type parameter isclasstypeparameter rank source type parameters walker typeparameterswalker type parameters walker typeparameterswalker type parameters annotation walker typeparametersannotationwalker source pos rank environment type parameters walker typeparameterswalker to type parameter totypeparameter is class type parameter isclasstypeparameter rank i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to type parameter bounds totypeparameterbounds is class type parameter isclasstypeparameter parameter rank parameterrank type parameters walker typeparameterswalker type parameters walker typeparameterswalker to type parameter bounds totypeparameterbounds is class type parameter isclasstypeparameter parameter rank parameterrank i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to method return tomethodreturn close char operation charoperation index of indexof source close optimization to method parameter tomethodparameter pos close i type annotation walker itypeannotationwalker empty annotation walker override i type annotation walker itypeannotationwalker to method parameter tomethodparameter start char operation charoperation index of indexof source prev param start prevparamstart start optimization create walker pos start order btb call safely walker parameters pos start leverage fact parameters eval uated evaluated order type end typeend prev param start prevparamstart prev param start prevparamstart optimization pos override i type annotation walker itypeannotationwalker to throws tothrows override i type annotation walker itypeannotationwalker to field tofield nls unsupported operation exception unsupportedoperationexception methods fields override get parameter count getparametercount count start char operation charoperation index of indexof source start source length source start start type end typeend start count count field annotation walker fieldannotationwalker basic annotation walker basicannotationwalker field annotation walker fieldannotationwalker source pos lookup environment lookupenvironment environment source pos environment override i type annotation walker itypeannotationwalker to field tofield override i type annotation walker itypeannotationwalker to method return tomethodreturn nls unsupported operation exception unsupportedoperationexception field method override i type annotation walker itypeannotationwalker to method parameter tomethodparameter nls unsupported operation exception unsupportedoperationexception field method parameter override i type annotation walker itypeannotationwalker to throws tothrows nls unsupported operation exception unsupportedoperationexception field