copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation jesper moller bug npe method explicit incomplete parameter org eclipse jdt internal compiler parser java util hash set hashset java util org eclipse jdt core compiler org eclipse jdt internal compiler ast abstract method declaration abstractmethoddeclaration org eclipse jdt internal compiler ast annotation org eclipse jdt internal compiler ast argument org eclipse jdt internal compiler ast ast node astnode org eclipse jdt internal compiler ast block org eclipse jdt internal compiler ast constructor declaration constructordeclaration org eclipse jdt internal compiler ast explicit constructor call explicitconstructorcall org eclipse jdt internal compiler ast field declaration fielddeclaration org eclipse jdt internal compiler ast local declaration localdeclaration org eclipse jdt internal compiler ast member value pair membervaluepair org eclipse jdt internal compiler ast method declaration methoddeclaration org eclipse jdt internal compiler ast statement org eclipse jdt internal compiler ast super reference superreference org eclipse jdt internal compiler ast type declaration typedeclaration org eclipse jdt internal compiler ast type parameter typeparameter org eclipse jdt internal compiler ast type reference typereference org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler lookup type binding typebinding org eclipse jdt internal compiler util util recovered method recoveredmethod recovered element recoveredelement terminal tokens terminaltokens abstract method declaration abstractmethoddeclaration method declaration methoddeclaration recovered annotation recoveredannotation annotations annotation count annotationcount modifiers modifiers start modifiersstart recovered type recoveredtype local types localtypes local type count localtypecount recovered block recoveredblock method body methodbody discard body discardbody pending modifiers pendingmodifiers pending modifers source start pendingmodiferssourcestart recovered annotation recoveredannotation pending annotations pendingannotations pending annotation count pendingannotationcount recovered method recoveredmethod abstract method declaration abstractmethoddeclaration method declaration methoddeclaration recovered element recoveredelement parent bracket balance bracketbalance parser parser parent bracket balance bracketbalance parser method declaration methoddeclaration method declaration methoddeclaration found opening brace foundopeningbrace body starts at header end bodystartsatheaderend found opening brace foundopeningbrace bracket balance bracketbalance record nested block declaration recovered element recoveredelement add block nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue add nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue recovered element recoveredelement add block nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue is argument isargument behavior delegate recording parent elements passed belonging enclosing element method declaration methoddeclaration declaration source end declarationsourceend nested block declaration nestedblockdeclaration source start sourcestart method declaration methoddeclaration declaration source end declarationsourceend reset pending modifiers resetpendingmodifiers parent ignore parent add nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue opening brace found opening brace foundopeningbrace is argument isargument found opening brace foundopeningbrace bracket balance bracketbalance method body methodbody recovered block recoveredblock nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue nested block declaration nestedblockdeclaration source end sourceend method body methodbody record field declaration recovered element recoveredelement add field declaration fielddeclaration field declaration fielddeclaration bracket balance value bracketbalancevalue reset pending modifiers resetpendingmodifiers local variables method field type name fieldtypename local field declaration fielddeclaration modifiers class file constants classfileconstants acc final accfinal initializer field declaration fielddeclaration type field type name fieldtypename field declaration fielddeclaration type get type name gettypename length char operation charoperation equals field type name fieldtypename type binding typebinding source name sourcename parent ignore update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend field declaration fielddeclaration declaration source start declarationsourcestart parent add field declaration fielddeclaration bracket balance value bracketbalancevalue behavior delegate recording parent elements passed belonging enclosing element method declaration methoddeclaration declaration source end declarationsourceend field declaration fielddeclaration declaration source start declarationsourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add field declaration fielddeclaration bracket balance value bracketbalancevalue opening brace found opening brace foundopeningbrace found opening brace foundopeningbrace bracket balance bracketbalance ignore record local declaration regular method created block body recovered element recoveredelement add local declaration localdeclaration local declaration localdeclaration bracket balance value bracketbalancevalue reset pending modifiers resetpendingmodifiers type starting passed type belonging enclosing type method declaration methoddeclaration declaration source end declarationsourceend local declaration localdeclaration declaration source start declarationsourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add local declaration localdeclaration bracket balance value bracketbalancevalue method body methodbody block block block block source start sourcestart method declaration methoddeclaration body start bodystart recovered element recoveredelement current block currentblock add block local declaration localdeclaration is argument isargument bracket balance bracketbalance bracket balance bracketbalance current block currentblock current block currentblock add block bracket balance bracketbalance current block currentblock add local declaration localdeclaration bracket balance value bracketbalancevalue method body methodbody add local declaration localdeclaration bracket balance value bracketbalancevalue record statement regular method created block body recovered element recoveredelement add statement statement bracket balance value bracketbalancevalue reset pending modifiers resetpendingmodifiers type starting passed type belonging enclosing type method declaration methoddeclaration declaration source end declarationsourceend statement source start sourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add statement bracket balance value bracketbalancevalue method body methodbody block block block block source start sourcestart method declaration methoddeclaration body start bodystart recovered element recoveredelement current block currentblock add block bracket balance bracketbalance bracket balance bracketbalance current block currentblock current block currentblock add block bracket balance bracketbalance current block currentblock add statement bracket balance value bracketbalancevalue method body methodbody add statement bracket balance value bracketbalancevalue recovered element recoveredelement add type declaration typedeclaration type declaration typedeclaration bracket balance value bracketbalancevalue type starting passed type belonging enclosing type method declaration methoddeclaration declaration source end declarationsourceend type declaration typedeclaration declaration source start declarationsourcestart method declaration methoddeclaration declaration source end declarationsourceend parent ignore parent add type declaration typedeclaration bracket balance value bracketbalancevalue type declaration typedeclaration bits ast node astnode is local type islocaltype parser method recovery activated methodrecoveryactivated parser statement recovery activated statementrecoveryactivated method body methodbody block block block block source start sourcestart method declaration methoddeclaration body start bodystart add block method body methodbody attach pending modifiers attachpendingmodifiers pending annotations pendingannotations pending annotation count pendingannotationcount pending modifiers pendingmodifiers pending modifers source start pendingmodiferssourcestart reset pending modifiers resetpendingmodifiers method body methodbody add type declaration typedeclaration bracket balance value bracketbalancevalue type declaration typedeclaration kind type declaration typedeclaration modifiers type declaration typedeclaration decl type declaration typedeclaration annotation type decl reset pending modifiers resetpendingmodifiers update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend type declaration typedeclaration declaration source start declarationsourcestart parent ignore close constructor parent add type declaration typedeclaration bracket balance value bracketbalancevalue local types localtypes local types localtypes recovered type recoveredtype local type count localtypecount local type count localtypecount local types localtypes length system arraycopy local types localtypes local types localtypes recovered type recoveredtype local type count localtypecount local type count localtypecount recovered type recoveredtype element recovered type recoveredtype type declaration typedeclaration bracket balance value bracketbalancevalue local types localtypes local type count localtypecount element pending annotation count pendingannotationcount element attach pending annotations pendingannotations pending annotation count pendingannotationcount pending modifiers pendingmodifiers pending modifers source start pendingmodiferssourcestart reset pending modifiers resetpendingmodifiers opening brace found opening brace foundopeningbrace found opening brace foundopeningbrace bracket balance bracketbalance element body starts at header end bodystartsatheaderend method declaration methoddeclaration body start bodystart method declaration methoddeclaration source end sourceend answer parsed structure ast node astnode parse tree parsetree method declaration methoddeclaration reset pending modifiers resetpendingmodifiers pending annotations pendingannotations pending annotation count pendingannotationcount pending modifiers pendingmodifiers pending modifers source start pendingmodiferssourcestart answer source parse node source end sourceend method declaration methoddeclaration declaration source end declarationsourceend string to string tostring tab string buffer stringbuffer result string buffer stringbuffer tab string tabstring tab nls result append recovered method method declaration methoddeclaration print tab result annotations annotation count annotationcount nls result append result append annotations to string tostring tab local types localtypes local type count localtypecount nls result append result append local types localtypes to string tostring tab method body methodbody nls result append result append method body methodbody to string tostring tab result to string tostring update body start bodystart parse node update body start updatebodystart body start bodystart found opening brace foundopeningbrace method declaration methoddeclaration body start bodystart body start bodystart abstract method declaration abstractmethoddeclaration updated method declaration updatedmethoddeclaration depth type declaration typedeclaration known types knowntypes update annotations modifiers method declaration methoddeclaration modifiers modifiers modifiers start modifiersstart method declaration methoddeclaration declaration source start declarationsourcestart method declaration methoddeclaration declaration source start declarationsourcestart modifiers start modifiersstart update annotations annotation count annotationcount existing count existingcount method declaration methoddeclaration annotations method declaration methoddeclaration annotations length annotation annotation references annotationreferences annotation existing count existingcount annotation count annotationcount existing count existingcount system arraycopy method declaration methoddeclaration annotations annotation references annotationreferences annotation count annotationcount existing count existingcount annotation count annotationcount annotation references annotationreferences annotations updated annotation reference updatedannotationreference method declaration methoddeclaration annotations annotation references annotationreferences start annotations annotation source start sourcestart start method declaration methoddeclaration declaration source start declarationsourcestart method declaration methoddeclaration declaration source start declarationsourcestart start method body methodbody block block method body methodbody updated block updatedblock depth known types knowntypes block method declaration methoddeclaration statements block statements method declaration methoddeclaration declaration source end declarationsourceend method declaration methoddeclaration declaration source end declarationsourceend block source end sourceend method declaration methoddeclaration body end bodyend block source end sourceend statement exp lict explict constructor call dest inated destinated special slot method declaration methoddeclaration is constructor isconstructor constructor declaration constructordeclaration constructor constructor declaration constructordeclaration method declaration methoddeclaration method declaration methoddeclaration statements method declaration methoddeclaration statements explicit constructor call explicitconstructorcall constructor constructor call constructorcall explicit constructor call explicitconstructorcall method declaration methoddeclaration statements length method declaration methoddeclaration statements length system arraycopy method declaration methoddeclaration statements method declaration methoddeclaration statements statement length length add implicit constructor call constructor constructor call constructorcall constructor constructor call constructorcall super reference superreference implicit super constructor call implicitsuperconstructorcall method declaration methoddeclaration declaration source end declarationsourceend method declaration methoddeclaration source end sourceend method declaration methoddeclaration body start bodystart brace missing method declaration methoddeclaration declaration source end declarationsourceend method declaration methoddeclaration source end sourceend method declaration methoddeclaration body start bodystart method declaration methoddeclaration source end sourceend method declaration methoddeclaration body end bodyend method declaration methoddeclaration source end sourceend method declaration methoddeclaration declaration source end declarationsourceend method declaration methoddeclaration body start bodystart method declaration methoddeclaration body end bodyend method declaration methoddeclaration body start bodystart local type count localtypecount method declaration methoddeclaration bits ast node astnode has local type haslocaltype method declaration methoddeclaration update parse node parser disappear rest arting restarting recovery update from parser state updatefromparserstate parent recovery occured diet parser body starts at header end bodystartsatheaderend parent parser parser parser recover arguments thrown exceptions awaiting type references parser list length listlength parser ast length ptr astlengthptr consumed arguments listed elements thrown exceptions method declaration methoddeclaration source end sourceend parser r paren pos rparenpos protection bugs length parser ast length stack astlengthstack parser ast length ptr astlengthptr ast ptr astptr parser ast ptr astptr length can consume canconsume ast ptr astptr can consume canconsume parser ast stack aststack ast ptr astptr abstract method declaration abstractmethoddeclaration can consume canconsume max length max parser ast stack aststack ast ptr astptr type reference typereference can consume canconsume can consume canconsume parser consume method header throws clause consumemethodheaderthrowsclause reset type list length typelistlength check performed error check errorcheck foo parser list length listlength consumed arguments listed elements arguments parser current token currenttoken tokennamelparen parser current token currenttoken tokennamesemicolon current token currenttoken parent hesis parenthesis argument method field signature parser ast length stack astlengthstack parser ast length ptr astlengthptr parser ast ptr astptr parser list length listlength parser current token currenttoken arg length arglength parser ast length stack astlengthstack parser ast length ptr astlengthptr arg start argstart parser ast ptr astptr arg length arglength r paren pos rparenpos need update paren pos needupdaterparenpos parser r paren pos rparenpos parser l paren pos lparenpos remove unfinished annotation nodes member value pair membervaluepair member value pairs membervaluepairs arg length arglength parser ast stack aststack parser ast ptr astptr member value pair membervaluepair system arraycopy parser ast stack aststack arg start argstart member value pairs membervaluepairs member value pair membervaluepair arg length arglength arg length arglength parser ast length ptr astlengthptr parser ast ptr astptr arg length arglength arg length arglength parser ast length stack astlengthstack parser ast length ptr astlengthptr arg start argstart parser ast ptr astptr arg length arglength need update paren pos needupdaterparenpos compute body start bodystart check point checkpoint count count count arg length arglength count ast node astnode a node anode parser ast stack aststack arg start argstart count a node anode argument argument argument argument a node anode argument arg type name argtypename argument type get type name gettypename argument modifiers class file constants classfileconstants acc final accfinal arg type name argtypename length char operation charoperation equals arg type name argtypename type binding typebinding source name sourcename parser ast length stack astlengthstack parser ast length ptr astlengthptr count parser ast ptr astptr arg start argstart count parser list length listlength count parser current token currenttoken need update paren pos needupdaterparenpos parser r paren pos rparenpos argument source end sourceend parser ast length stack astlengthstack parser ast length ptr astlengthptr count parser ast ptr astptr arg start argstart count parser list length listlength count parser current token currenttoken parser list length listlength parser ast length ptr astlengthptr protection bugs length parser ast length stack astlengthstack parser ast length ptr astlengthptr ast ptr astptr parser ast ptr astptr length can consume canconsume ast ptr astptr can consume canconsume parser ast stack aststack ast ptr astptr abstract method declaration abstractmethoddeclaration can consume canconsume max length max parser ast stack aststack ast ptr astptr argument can consume canconsume can consume canconsume parser consume method header right paren consumemethodheaderrightparen positions updated r paren pos rparenpos parameter add ition addition awaiting type method fvxqz parser current element currentelement method declaration methoddeclaration arguments method declaration methoddeclaration source end sourceend method declaration methoddeclaration arguments method declaration methoddeclaration arguments length source end sourceend method declaration methoddeclaration source end sourceend method declaration methoddeclaration receiver source end sourceend method declaration methoddeclaration body start bodystart method declaration methoddeclaration source end sourceend parser last check point lastcheckpoint method declaration methoddeclaration body start bodystart member value pairs membervaluepairs system arraycopy member value pairs membervaluepairs parser ast stack aststack parser ast ptr astptr member value pairs membervaluepairs length parser ast ptr astptr member value pairs membervaluepairs length parser ast length stack astlengthstack parser ast length ptr astlengthptr member value pairs membervaluepairs length recovered element recoveredelement update on closing brace updateonclosingbrace brace start bracestart brace end braceend method declaration methoddeclaration is annotation method isannotationmethod update source end if necessary updatesourceendifnecessary brace start bracestart brace end braceend found opening brace foundopeningbrace parent parent update on closing brace updateonclosingbrace brace start bracestart brace end braceend parent parent recovered type recoveredtype mods recovered type recoveredtype parent type declaration typedeclaration modifiers type declaration typedeclaration kind mods type declaration typedeclaration decl found opening brace foundopeningbrace update source end if necessary updatesourceendifnecessary brace start bracestart brace start bracestart parent update on closing brace updateonclosingbrace brace start bracestart brace end braceend update on closing brace updateonclosingbrace brace start bracestart brace end braceend opening brace consumed expected opening current element body start bodystart updated recovered element recoveredelement update on opening brace updateonopeningbrace brace start bracestart brace end braceend opening brace close signature bracket balance bracketbalance parser scanner search line number searchlinenumber method declaration methoddeclaration source end sourceend parser scanner search line number searchlinenumber brace end braceend parser last ignored token lastignoredtoken token name throws tokennamethrows found opening brace foundopeningbrace pretend brace bracket balance bracketbalance update on opening brace updateonopeningbrace brace start bracestart brace end braceend update parse tree updateparsetree updated method declaration updatedmethoddeclaration hash set hashset type declaration typedeclaration update declaration source end declarationsourceend parse node update source end if necessary updatesourceendifnecessary brace start bracestart brace end braceend method declaration methoddeclaration declaration source end declarationsourceend parser r brace successor start rbracesuccessorstart brace end braceend method declaration methoddeclaration declaration source end declarationsourceend parser r brace end rbraceend method declaration methoddeclaration body end bodyend parser r brace start rbracestart method declaration methoddeclaration declaration source end declarationsourceend brace end braceend method declaration methoddeclaration body end bodyend brace start bracestart recovered element recoveredelement add annotation name addannotationname identifier ptr identifierptr identifier length ptr identifierlengthptr annotation start annotationstart bracket balance value bracketbalancevalue pending annotations pendingannotations pending annotations pendingannotations recovered annotation recoveredannotation pending annotation count pendingannotationcount pending annotation count pendingannotationcount pending annotations pendingannotations length system arraycopy pending annotations pendingannotations pending annotations pendingannotations recovered annotation recoveredannotation pending annotation count pendingannotationcount pending annotation count pendingannotationcount recovered annotation recoveredannotation element recovered annotation recoveredannotation identifier ptr identifierptr identifier length ptr identifierlengthptr annotation start annotationstart bracket balance value bracketbalancevalue pending annotations pendingannotations pending annotation count pendingannotationcount element element add modifier addmodifier flag modifiers source start modifierssourcestart pending modifiers pendingmodifiers flag pending modifers source start pendingmodiferssourcestart pending modifers source start pendingmodiferssourcestart modifiers source start modifierssourcestart attach type parameter typeparameter parameters start pos startpos method declaration methoddeclaration modifiers class file constants classfileconstants acc default accdefault last parameter end lastparameterend parameters parameters length source end sourceend parser parser parser scanner scanner parser scanner util get line number getlinenumber method declaration methoddeclaration declaration source start declarationsourcestart scanner line ends lineends scanner line ptr lineptr util get line number getlinenumber last parameter end lastparameterend scanner line ends lineends scanner line ptr lineptr parser modifiers source start modifierssourcestart last parameter end lastparameterend parser modifiers source start modifierssourcestart method declaration methoddeclaration declaration source start declarationsourcestart method declaration methoddeclaration method declaration methoddeclaration method declaration methoddeclaration method declaration methoddeclaration type parameters typeparameters parameters method declaration methoddeclaration declaration source start declarationsourcestart start pos startpos method declaration methoddeclaration constructor declaration constructordeclaration constructor declaration constructordeclaration method declaration methoddeclaration type parameters typeparameters parameters method declaration methoddeclaration declaration source start declarationsourcestart start pos startpos attach recovered annotation recoveredannotation annots annot count annotcount mods mods source start modssourcestart annot count annotcount annotation existing annotations existingannotations method declaration methoddeclaration annotations existing annotations existingannotations annotations recovered annotation recoveredannotation annot count annotcount annotation count annotationcount annot count annotcount existing annotations existingannotations length annots annotation existing annotations existingannotations annotations annotation count annotationcount annots annotations annots annotation count annotationcount annot count annotcount mods modifiers mods modifiers start modifiersstart mods source start modssourcestart