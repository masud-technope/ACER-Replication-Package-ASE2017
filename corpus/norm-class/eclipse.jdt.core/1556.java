copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors sbandow bea initial api implementation org eclipse jdt apt tests java file java util map junit framework test junit framework test suite testsuite org eclipse core resources i file ifile org eclipse core resources i project iproject org eclipse core runtime i path ipath org eclipse jdt apt core internal apt project aptproject org eclipse jdt apt core internal generated file generatedfile generated file manager generatedfilemanager org eclipse jdt apt core util apt config aptconfig org eclipse jdt apt tests annotations processor test status processorteststatus org eclipse jdt apt tests annotations filegen text gen annotation processor textgenannotationprocessor org eclipse jdt core i java project ijavaproject org eclipse jdt core java core javacore file generation tests filegenerationtests apt test base apttestbase file generation tests filegenerationtests string test suite test suite testsuite file generation tests filegenerationtests test source gen packages testsourcegenpackages exception i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath string code test org eclipse jdt apt tests annotations filegen file gen location annotation filegenlocationannotation file gen location annotation filegenlocationannotation test env add class addclass src root srcroot test test code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems assert equals assertequals processor test status processorteststatus errors processor test status processorteststatus get errors geterrors test source gen overwrite testsourcegenoverwrite exception i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath string code test org eclipse jdt apt tests annotations filegen first gen annotation firstgenannotation first gen annotation firstgenannotation test env add class addclass src root srcroot test test code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems assert equals assertequals processor test status processorteststatus errors processor test status processorteststatus get errors geterrors test source gen after dir change testsourcegenafterdirchange exception i java project ijavaproject jproj env get java project getjavaproject get project name getprojectname i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath string code test org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation hello world annotation helloworldannotation test generated file package generatedfilepackage generated file test generatedfiletest gft apt config aptconfig set gen src dir setgensrcdir jproj foo src env add class addclass src root srcroot test test code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems map string string options apt config aptconfig get processor options getprocessoroptions jproj string source path sourcepath options source path sourcepath assert true asserttrue source path sourcepath foo src assert equals assertequals processor test status processorteststatus errors processor test status processorteststatus get errors geterrors test source gen sub dir testsourcegensubdir exception i java project ijavaproject jproj env get java project getjavaproject get project name getprojectname i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath string code test org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation hello world annotation helloworldannotation test generated file package generatedfilepackage generated file test generatedfiletest gft apt config aptconfig set gen src dir setgensrcdir jproj gen foo env add class addclass src root srcroot test test code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems assert equals assertequals processor test status processorteststatus errors processor test status processorteststatus get errors geterrors test text file gen testtextfilegen exception enable test windows system get property getproperty index of indexof windows string text file text file textfile txt clear processor result clearprocessorresult text gen annotation processor textgenannotationprocessor i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath string code test org eclipse jdt apt tests annotations filegen text gen annotation textgenannotation text gen annotation textgenannotation text file test env add class addclass src root srcroot test test code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems file map string string options apt config aptconfig get processor options getprocessoroptions java core javacore create project find binary output directory string output root path outputrootpath options file the file thefile file file output root path outputrootpath text file assert true asserttrue file the file thefile get absolute path getabsolutepath the file thefile exists incremental build incrementalbuild project get full path getfullpath expecting no problems expectingnoproblems check processor result checkprocessorresult text gen annotation processor textgenannotationprocessor assert true asserttrue file the file thefile get absolute path getabsolutepath the file thefile exists change annotation illegal filename exception thrown code test org eclipse jdt apt tests annotations filegen text gen annotation textgenannotation text gen annotation textgenannotation txt test env add class addclass src root srcroot test test code incremental build incrementalbuild project get full path getfullpath expecting no problems expectingnoproblems assert equals assertequals generate text file io exception ioexception get processor result getprocessorresult text gen annotation processor textgenannotationprocessor assert true asserttrue file deleted the file thefile get absolute path getabsolutepath the file thefile exists remove annotation file deleted processor code test test env add class addclass src root srcroot test test code incremental build incrementalbuild project get full path getfullpath expecting no problems expectingnoproblems assert equals assertequals get processor result getprocessorresult text gen annotation processor textgenannotationprocessor assert true asserttrue file deleted the file thefile get absolute path getabsolutepath the file thefile exists test is generated or parent file testisgeneratedorparentfile exception i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath string code test org eclipse jdt apt tests annotations filegen file gen location annotation filegenlocationannotation file gen location annotation filegenlocationannotation test env add class addclass src root srcroot test test code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems apt project aptproject apt proj aptproj apt project aptproject env get java project getjavaproject get project name getprojectname generated file manager generatedfilemanager gfm apt proj aptproj get generated file manager getgeneratedfilemanager string gen src dir gensrcdir apt config aptconfig get gen src dir getgensrcdir env get java project getjavaproject get project name getprojectname string file separator i file ifile parent file parentfile project get file getfile src test test java i file ifile generated file generatedfile project get file getfile gen src dir gensrcdir test java assert true asserttrue expected src test test java designated parent file gfm is parent file isparentfile parent file parentfile assert true asserttrue expected apt generated test java designated generated file gfm is generated file isgeneratedfile generated file generatedfile