copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contributions bug warning unboxing single name reference singlenamereference npe bug compiler annotations checking bug resource leak warning resource assigned field constructor bug compiler resource restore resource leak warnings bug compiler resource incorrect potential resource leak bug compiler fup bug consolidate int eraction interaction unboxing npe deferred checking bug compiler inference infrastructure evolve meet jls jsr spec bug compiler cce single name reference singlenamereference local variable binding localvariablebinding bug compiler lambda expression resolved flow analyzed leading npe bug infer type diamond type lambda method invocation bug compiler event ual eventual resolution reference expression referenceexpression happening bug compiler type inference doesn handle multiple candidate target types over load overload context bug compiler inference over loading overloading wrong method resolution bug java variables lambdas resolved bug compiler npe org eclipse jdt internal compiler ast conditional expression conditionalexpression generate code generatecode conditional expression conditionalexpression java bug compiler resolution errors don surface bug compiler type correctly inferred lambda expression andy clement go pivotal gopivotal aclement gopivotal contributions bug compiler type annotations dropped call routed synthetic bridge method org eclipse jdt internal compiler ast org eclipse jdt internal compiler ast expression context expressioncontext invocation context org eclipse jdt internal compiler ast visitor astvisitor org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler codegen code stream codestream org eclipse jdt internal compiler codegen opcodes org eclipse jdt internal compiler flow flow context flowcontext org eclipse jdt internal compiler flow flow info flowinfo org eclipse jdt internal compiler lookup binding org eclipse jdt internal compiler lookup block scope blockscope org eclipse jdt internal compiler lookup extra compiler modifiers extracompilermodifiers org eclipse jdt internal compiler lookup inference context inferencecontext org eclipse jdt internal compiler lookup local type binding localtypebinding org eclipse jdt internal compiler lookup method binding methodbinding org eclipse jdt internal compiler lookup method scope methodscope org eclipse jdt internal compiler lookup parameterized generic method binding parameterizedgenericmethodbinding org eclipse jdt internal compiler lookup parameterized method binding parameterizedmethodbinding org eclipse jdt internal compiler lookup problem method binding problemmethodbinding org eclipse jdt internal compiler lookup raw type binding rawtypebinding org eclipse jdt internal compiler lookup reference binding referencebinding org eclipse jdt internal compiler lookup scope org eclipse jdt internal compiler lookup source type binding sourcetypebinding org eclipse jdt internal compiler lookup tag bits tagbits org eclipse jdt internal compiler lookup type binding typebinding org eclipse jdt internal compiler lookup type constants typeconstants org eclipse jdt internal compiler lookup type ids typeids org eclipse jdt internal compiler lookup variable binding variablebinding explicit constructor call explicitconstructorcall statement invocation expression arguments expression qualification exact binding lookup method binding methodbinding binding synthetic accessor emulation method binding methodbinding synthetic accessor syntheticaccessor access mode accessmode type reference typereference type arguments typearguments type binding typebinding generic type arguments generictypearguments implicit super implicitsuper variable binding variablebinding implicit arguments implicitarguments todo remove dom parser domparser activated type arguments source start typeargumentssourcestart explicit constructor call explicitconstructorcall access mode accessmode access mode accessmode access mode accessmode flow info flowinfo analyse code analysecode block scope blockscope current scope currentscope flow context flowcontext flow context flowcontext flow info flowinfo flow info flowinfo method scope methodscope current scope currentscope is constructor call isconstructorcall process enclosing instance qualification flow info flowinfo qualification analyse code analysecode current scope currentscope flow context flowcontext flow info flowinfo unconditional inits unconditionalinits process arguments arguments analyse resources analyseresources current scope currentscope compiler options compileroptions analyse resource leaks analyseresourceleaks max arguments length max flow info flowinfo arguments analyse code analysecode current scope currentscope flow context flowcontext flow info flowinfo unconditional inits unconditionalinits analyse resources analyseresources argument auto closeable autocloseable insert info closed target constructor flow info flowinfo faked tracking variable fakedtrackingvariable mark passed to out side markpassedtooutside current scope currentscope arguments flow info flowinfo flow context flowcontext arguments checknpebyunboxing current scope currentscope flow context flowcontext flow info flowinfo analyse arguments analysearguments current scope currentscope flow context flowcontext flow info flowinfo binding arguments reference binding referencebinding thrown exceptions thrownexceptions thrown exceptions thrownexceptions binding thrown exceptions thrownexceptions binding exceptions bits ast node astnode unchecked generic type arguments generictypearguments https bugs eclipse org bugs bug cgi align java c javac jls thrown exceptions thrownexceptions current scope currentscope environment convert to raw types converttorawtypes binding thrown exceptions thrownexceptions check exceptions flow context flowcontext check exception handlers checkexceptionhandlers thrown exceptions thrownexceptions access mode accessmode explicit constructor call explicitconstructorcall implicit super implicitsuper ast node astnode current scope currentscope method scope methodscope reference context referencecontext ast node astnode flow info flowinfo current scope currentscope manage enclosing instance access if necessary manageenclosinginstanceaccessifnecessary current scope currentscope flow info flowinfo manage synthetic access if necessary managesyntheticaccessifnecessary current scope currentscope flow info flowinfo flow info flowinfo method scope methodscope current scope currentscope is constructor call isconstructorcall constructor call code generation param current scope currentscope org eclipse jdt internal compiler lookup block scope blockscope param code stream codestream org eclipse jdt internal compiler codegen code stream codestream generate code generatecode block scope blockscope current scope currentscope code stream codestream code stream codestream bits ast node astnode is reachable isreachable method scope methodscope current scope currentscope is constructor call isconstructorcall code stream codestream position code stream codestream aload method binding methodbinding codegen binding codegenbinding binding original reference binding referencebinding target type targettype codegen binding codegenbinding declaring class declaringclass special ordinal argument generation enum constructors target type targettype erasure type ids typeids java lang enum javalangenum target type targettype is enum isenum pass param arg code stream codestream aload pass ordinal param ordinal arg code stream codestream iload handling inner class innerclass instance allocation enclosing instance arguments target type targettype is nested type isnestedtype code stream codestream generate synthetic enclosing instance values generatesyntheticenclosinginstancevalues current scope currentscope target type targettype bits ast node astnode discard enclosing instance discardenclosinginstance qualification generate arguments generate arguments generatearguments binding arguments current scope currentscope code stream codestream handling inner class innerclass instance allocation local arguments target type targettype is nested type isnestedtype code stream codestream generate synthetic outer argument values generatesyntheticouterargumentvalues current scope currentscope target type targettype synthetic accessor syntheticaccessor synthetic accessor extra arguments appended signature values max synthetic accessor syntheticaccessor parameters length codegen binding codegenbinding parameters length max code stream codestream aconst code stream codestream invoke opcodes opc invokespecial synthetic accessor syntheticaccessor declaring class declaringclass type arguments typearguments code stream codestream invoke opcodes opc invokespecial codegen binding codegenbinding declaring class declaringclass type arguments typearguments code stream codestream record positions from recordpositionsfrom source start sourcestart method scope methodscope current scope currentscope is constructor call isconstructorcall org eclipse jdt internal compiler lookup invocation site invocationsite generic type arguments generictypearguments type binding typebinding generic type arguments generictypearguments generic type arguments generictypearguments is implicit super isimplicitsuper access mode accessmode explicit constructor call explicitconstructorcall implicit super implicitsuper is super access issuperaccess access mode accessmode explicit constructor call explicitconstructorcall is type access istypeaccess emulation consists recording dependency link performing level prop agation propagation dependency mechanism dealing source target types time reach exact manage enclosing instance access if necessary manageenclosinginstanceaccessifnecessary block scope blockscope current scope currentscope flow info flowinfo flow info flowinfo reference binding referencebinding super type erasure supertypeerasure reference binding referencebinding binding declaring class declaringclass erasure flow info flowinfo tag bits tagbits flow info flowinfo unreachable dead perform emulation work local type super type erasure supertypeerasure is nested type isnestedtype current scope currentscope enclosing source type enclosingsourcetype is local type islocaltype super type erasure supertypeerasure is local type islocaltype local type binding localtypebinding super type erasure supertypeerasure add inner emulation dependent addinneremulationdependent current scope currentscope qualification locally propagate desired shape current scope currentscope propagate inner emulation propagateinneremulation super type erasure supertypeerasure qualification manage synthetic access if necessary managesyntheticaccessifnecessary block scope blockscope current scope currentscope flow info flowinfo flow info flowinfo flow info flowinfo tag bits tagbits flow info flowinfo unreachable dead constructor parameterized type original constructor codegen time method binding methodbinding codegen binding codegenbinding binding original perform emulation work local type binding is private isprivate access mode accessmode explicit constructor call explicitconstructorcall reference binding referencebinding declaring class declaringclass codegen binding codegenbinding declaring class declaringclass local type constructor lose flag ease emulation declaring class declaringclass tag bits tagbits tag bits tagbits is local type islocaltype current scope currentscope compiler options compileroptions compliance level compliancelevel class file constants classfileconstants jdk constructor dumped emulation required codegen binding codegenbinding tag bits tagbits tag bits tagbits clear private modifier clearprivatemodifier synthetic accessor syntheticaccessor source type binding sourcetypebinding declaring class declaringclass add synthetic method addsyntheticmethod codegen binding codegenbinding is super access issuperaccess current scope currentscope problem reporter problemreporter need to emulate method access needtoemulatemethodaccess codegen binding codegenbinding string buffer stringbuffer print statement printstatement indent string buffer stringbuffer output print indent printindent indent output qualification qualification print expression printexpression output append type arguments typearguments output append max type arguments typearguments length max type arguments typearguments print output nls output append nls type arguments typearguments max print output output append access mode accessmode explicit constructor call explicitconstructorcall nls output append nls output append arguments arguments length nls output append nls arguments print expression printexpression output nls output append resolve block scope blockscope scope type constructor test get constructor getconstructor mark fact constructor call unmark returns method scope methodscope method scope methodscope scope method scope methodscope abstract method declaration abstractmethoddeclaration method declaration methoddeclaration method scope methodscope reference method referencemethod method declaration methoddeclaration method declaration methoddeclaration is constructor isconstructor constructor declaration constructordeclaration method declaration methoddeclaration constructor call constructorcall scope problem reporter problemreporter invalid explicit constructor call invalidexplicitconstructorcall fault tolerance qualification qualification resolve type resolvetype scope type arguments typearguments max type arguments typearguments length max type arguments typearguments resolve type resolvetype check bounds scope arguments max arguments length max arguments resolve type resolvetype scope method scope methodscope is constructor call isconstructorcall reference binding referencebinding receiver type receivertype scope enclosing receiver type enclosingreceivertype rcv has error rcvhaserror access mode accessmode explicit constructor call explicitconstructorcall receiver type receivertype receiver type receivertype superclass type reference typereference superclass ref superclassref scope reference type referencetype superclass superclass ref superclassref superclass ref superclassref resolved type resolvedtype superclass ref superclassref resolved type resolvedtype is valid binding isvalidbinding rcv has error rcvhaserror receiver type receivertype prevent explicit constructor invocation enum access mode accessmode explicit constructor call explicitconstructorcall receiver type receivertype erasure type ids typeids java lang enum javalangenum scope problem reporter problemreporter cannot invoke super constructor in enum cannotinvokesuperconstructorinenum method scope methodscope reference method referencemethod binding qualification type enclosing type enclosingtype qualification access mode accessmode explicit constructor call explicitconstructorcall scope problem reporter problemreporter unnecessary enclosing instance specification unnecessaryenclosinginstancespecification qualification receiver type receivertype rcv has error rcvhaserror reference binding referencebinding enclosing type enclosingtype receiver type receivertype enclosing type enclosingtype enclosing type enclosingtype scope problem reporter problemreporter unnecessary enclosing instance specification unnecessaryenclosinginstancespecification qualification receiver type receivertype bits ast node astnode discard enclosing instance discardenclosinginstance type binding typebinding q tb qtb qualification resolve type expecting resolvetypeexpecting scope enclosing type enclosingtype qualification compute conversion computeconversion scope q tb qtb q tb qtb resolve type arguments constructor call source level sourcelevel scope compiler options compileroptions source level sourcelevel type arguments typearguments arg has error arghaserror source level sourcelevel class file constants classfileconstants jdk length type arguments typearguments length generic type arguments generictypearguments type binding typebinding length length type reference typereference type reference typereference type arguments typearguments generic type arguments generictypearguments type reference typereference resolve type resolvetype check bounds scope arg has error arghaserror arg has error arghaserror type reference typereference wildcard scope problem reporter problemreporter illegal usage of wildcard illegalusageofwildcard type reference typereference arg has error arghaserror attempt resolve arguments arguments max arguments length max arguments resolve type resolvetype scope arguments buff ering buffering method lookup type binding typebinding argument types argumenttypes binding parameters args contain cast argscontaincast arguments type checks typechecks arguments arg has error arghaserror length arguments length argument types argumenttypes type binding typebinding length length expression argument arguments argument cast expression castexpression check argument bits ast node astnode disable unnecessary cast check disableunnecessarycastcheck args contain cast argscontaincast argument set expression context setexpressioncontext invocation context argument types argumenttypes argument resolve type resolvetype scope arg has error arghaserror arg has error arghaserror receiver type receivertype record guess clients hint contructor match type binding typebinding pseudo args pseudoargs type binding typebinding length length replace args errors type pseudo args pseudoargs argument types argumenttypes type binding typebinding argument types argumenttypes binding scope find method findmethod receiver type receivertype type constants typeconstants init pseudo args pseudoargs binding binding is valid binding isvalidbinding method binding methodbinding closest match closestmatch problem method binding problemmethodbinding binding closest match closestmatch record closest match clients hint method match closest match closestmatch closest match closestmatch original type variables typevariables method binding type variables should n shouldn method context convert raw method closest match closestmatch scope environment create parameterized generic method createparameterizedgenericmethod closest match closestmatch original raw type binding rawtypebinding binding closest match closestmatch method binding methodbinding closest match original closestmatchoriginal closest match closestmatch original closest match original closestmatchoriginal is or enclosed by private type isorenclosedbyprivatetype scope is defined in method isdefinedinmethod closest match original closestmatchoriginal ignore cases method direct rec ursions recursions closest match original closestmatchoriginal modifiers extra compiler modifiers extracompilermodifiers acc locally used acclocallyused receiver type receivertype erasure type ids typeids java lang enum javalangenum todo philippe rid binding argument types argumenttypes type binding typebinding scope get java lang string getjavalangstring type binding typebinding receiver type receivertype binding find constructor binding findconstructorbinding scope receiver type receivertype argument types argumenttypes binding is valid binding isvalidbinding binding tag bits tagbits tag bits tagbits has missing type hasmissingtype method scope methodscope enclosing source type enclosingsourcetype is anonymous type isanonymoustype scope problem reporter problemreporter missing type in constructor missingtypeinconstructor binding is method use deprecated ismethodusedeprecated binding scope access mode accessmode explicit constructor call explicitconstructorcall implicit super implicitsuper scope problem reporter problemreporter deprecated method deprecatedmethod binding check invocation arguments checkinvocationarguments scope receiver type receivertype binding arguments argument types argumenttypes args contain cast argscontaincast bits ast node astnode unchecked binding is or enclosed by private type isorenclosedbyprivatetype binding original modifiers extra compiler modifiers extracompilermodifiers acc locally used acclocallyused type arguments typearguments binding original type variables typevariables binding type variables scope problem reporter problemreporter unnecessary type arguments for method invocation unnecessarytypeargumentsformethodinvocation binding generic type arguments generictypearguments type arguments typearguments binding declaring class declaringclass binding declaring class declaringclass receiver type receivertype rcv has error rcvhaserror scope problem reporter problemreporter invalid constructor invalidconstructor binding method scope methodscope is constructor call isconstructorcall set actual receiver type setactualreceivertype reference binding referencebinding receiver type receivertype set depth setdepth depth ignore set field index setfieldindex depth ignore traverse ast visitor astvisitor visitor block scope blockscope scope visitor visit scope qualification qualification traverse visitor scope type arguments typearguments type arguments length typeargumentslength type arguments typearguments length type arguments length typeargumentslength type arguments typearguments traverse visitor scope arguments argument length argumentlength arguments length argument length argumentlength arguments traverse visitor scope visitor end visit endvisit scope invocation method binding methodbinding binding binding register inference context registerinferencecontext parameterized generic method binding parameterizedgenericmethodbinding method inference context inferencecontext inf ctx infctx override register result registerresult type binding typebinding target type targettype method binding methodbinding method inference context inferencecontext get inference context getinferencecontext parameterized method binding parameterizedmethodbinding method override clean up inference contexts cleanupinferencecontexts expression arguments arguments invocation site invocationsite inference context inferencecontext fresh inference context freshinferencecontext scope scope inference context inferencecontext scope arguments