copyright mateusz matela rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors mateusz matela mateusz matela gmail formatter formatter format java code correctly max width https bugs eclipse org org eclipse jdt internal formatter org eclipse jdt internal compiler parser terminal tokens terminaltokens tokennamecomment block org eclipse jdt internal compiler parser terminal tokens terminaltokens tokennamecomment javadoc org eclipse jdt internal compiler parser terminal tokens terminaltokens tokennamelbrace org eclipse jdt internal compiler parser terminal tokens terminaltokens token name not token tokennamenotatoken org eclipse jdt internal compiler parser terminal tokens terminaltokens token name string literal tokennamestringliteral org eclipse jdt internal compiler parser terminal tokens terminaltokens tokennamewhitespace java util array list arraylist java util hash map hashmap java util iterator java util list java util regex matcher java util regex pattern org eclipse jdt core dom ast node astnode org eclipse jdt core dom block org eclipse jdt core dom if statement ifstatement org eclipse jdt core dom return statement returnstatement org eclipse jdt core dom throw statement throwstatement org eclipse jdt internal formatter token wrap mode wrapmode org eclipse jdt internal formatter line wrap linewrap comment wrap executor commentwrapexecutor helper easily access source code find tokens position methods multiple stages for matting formatting token manager tokenmanager iterable token nls pattern comment annotation pattern pattern compile list token tokens string source tab size tabsize tab char tabchar wrap with spaces wrapwithspaces comment wrap executor commentwrapexecutor comment wrapper commentwrapper hash map hashmap integer integer tokenindextonlsalign list token format off tag pairs formatofftagpairs header end index headerendindex token manager tokenmanager list token tokens string source default code formatter options defaultcodeformatteroptions options tokens tokens source source tab size tabsize options tab size tab char tabchar options tab wrap with spaces wrapwithspaces options tabs leading indent ations indentations comment wrapper commentwrapper comment wrap executor commentwrapexecutor options token manager tokenmanager list token tokens token manager tokenmanager parent tokens tokens source parent source tab size tabsize parent tab size tabsize tab char tabchar parent tab char tabchar wrap with spaces wrapwithspaces parent wrap with spaces wrapwithspaces comment wrapper commentwrapper parent comment wrapper commentwrapper token tokens total number tokens size tokens size removes token warning call method wrap policies tokens wrap parent indexes invalid remove token index tokenindex tokens remove token index tokenindex adds token warning call method wrap policies tokens wrap parent indexes invalid insert token index tokenindex token token tokens add token index tokenindex token token text characters escaped html entities param token index tokenindex token string to string tostring token index tokenindex to string tostring token index tokenindex token text characters escaped html entities string to string tostring token token token is to escape istoescape get escaped token string getescapedtokenstring token token to string tostring source source code defined node position length string to string tostring ast node astnode node source substring node get start position getstartposition node get start position getstartposition node get length getlength string get source getsource source index of indexof token token find index findindex token original start originalstart token char at charat source position sourceposition source char at charat source position sourceposition get source length getsourcelength source length find index findindex position in source positioninsource token type tokentype binary search left size left left token token token original start originalstart position in source positioninsource position in source positioninsource token original end originalend left token original end originalend position in source positioninsource left token original start originalstart position in source positioninsource left original start originalstart position in source positioninsource original end originalend position in source positioninsource token type tokentype token type tokentype token type tokentype override iterator token iterator tokens iterator is guard clause isguardclause block node node statements size ast node astnode parent node get parent getparent parent if statement ifstatement if statement ifstatement parent get else statement getelsestatement object statement node statements statement return statement returnstatement statement throw statement throwstatement guard clause start comment https bugs eclipse org bugs bug cgi open brace index openbraceindex first index in firstindexin node tokennamelbrace open brace index openbraceindex is comment iscomment first index in firstindexin ast node astnode node token type tokentype find index findindex node get start position getstartposition token type tokentype token inside tokeninside node token first token in firsttokenin ast node astnode node token type tokentype first index in firstindexin node token type tokentype last index in lastindexin ast node astnode node token type tokentype find index findindex node get start position getstartposition node get length getlength token type tokentype token inside tokeninside node token last token in lasttokenin ast node astnode node token type tokentype last index in lastindexin node token type tokentype first index after firstindexafter ast node astnode node token type tokentype find index findindex node get start position getstartposition node get length getlength token type tokentype token first token after firsttokenafter ast node astnode node token type tokentype first index after firstindexafter node token type tokentype first index before firstindexbefore ast node astnode node token type tokentype find index findindex node get start position getstartposition token type tokentype token first token before firsttokenbefore ast node astnode node token type tokentype first index before firstindexbefore node token type tokentype count line breaks between countlinebreaksbetween token previous token current start previous previous original end originalend current current original start originalstart source length count line breaks between countlinebreaksbetween source start count line breaks between countlinebreaksbetween string text start position startposition end position endposition result start position startposition end position endposition text char at charat result end position endposition text char at charat result end position endposition text char at charat result token traverser tokentraverser position in line counter positioninlinecounter token traverser tokentraverser isnlstaginline override token token traversed isnlstaginline traversed hasnlstag traversed token type tokentype token name string literal tokennamestringliteral isnlstaginline traversed get align getalign counter traversed get align getalign list token internal structure internalstructure traversed get internal structure getinternalstructure internal structure internalstructure internal structure internalstructure is empty isempty traversed token type tokentype tokennamecomment block traversed token type tokentype tokennamecomment javadoc counter token manager tokenmanager comment wrapper commentwrapper wrap multi line comment wrapmultilinecomment traversed counter isnlstaginline counter get length getlength traversed counter is space after isspaceafter counter get position in line getpositioninline token index tokenindex token token token index tokenindex token get align getalign token index tokenindex get align getalign find token calculate position token first token index firsttokenindex token get line breaks before getlinebreaksbefore token index tokenindex find first token in line findfirsttokeninline token index tokenindex token first token firsttoken first token index firsttokenindex starting position startingposition to indent toindent first token firsttoken get indent getindent first token firsttoken get wrap policy getwrappolicy first token index firsttokenindex token index tokenindex starting position startingposition position in line counter positioninlinecounter token index tokenindex position in line counter positioninlinecounter counter starting position startingposition traverse first token index firsttokenindex position in line counter positioninlinecounter position in line counter positioninlinecounter counter find source position in line findsourcepositioninline position line start position linestartposition position line start position linestartposition char at charat line start position linestartposition line start position linestartposition position in line positioninline get length getlength line start position linestartposition position position in line positioninline string get escaped token string getescapedtokenstring token token token get line breaks before getlinebreaksbefore char at charat token original start originalstart nls source substring token original start originalstart token original end originalend token token type tokentype token name not token tokennamenotatoken string text token to string tostring source matcher matcher comment annotation pattern matcher text matcher find matcher group nls text substring nls matcher token to string tostring source param token token measure param start position startposition position character tabs calculation actual length token tabs escaping characters html entities get length getlength token token start position startposition length get length getlength token original start originalstart token original end originalend start position startposition token is to escape istoescape token get line breaks before getlinebreaksbefore char at charat token original start originalstart length length length token token type tokentype token name not token tokennamenotatoken matcher matcher comment annotation pattern matcher token to string tostring source matcher find length length length length calculates length source code fragment param original start originalstart position source code fragment param original end originalend position source code fragment param start position startposition position character tabs calculation length tabs escaping characters html entities get length getlength original start originalstart original end originalend start position startposition position start position startposition original start originalstart original end originalend source char at charat tab size tabsize position tab size tabsize position tab size tabsize position position position start position startposition param indent desired indentation positions levels param is wrapped iswrapped indented element wrapped actual indentation achieved current settings to indent toindent indent is wrapped iswrapped tab char tabchar default code formatter options defaultcodeformatteroptions tab is wrapped iswrapped wrap with spaces wrapwithspaces tab tab size tabsize tab indent indent tab tab tab indent traverse start index startindex token traverser tokentraverser traverse r traverser traverse r traverser traverse tokens start index startindex find first token in line findfirsttokeninline start index startindex find first token in line findfirsttokeninline start index startindex find first token in line findfirsttokeninline start index startindex include wraps includewraps include for ced includeforced previous higher current token previous start index startindex start index startindex token token token get line breaks after getlinebreaksafter previous get line breaks before getlinebreaksbefore include previous get wrap policy getwrappolicy previous get wrap policy getwrappolicy wrap mode wrapmode wrap mode wrapmode force d forced include for ced includeforced include wraps includewraps include previous token token inside tokeninside ast node astnode node original start originalstart node get start position getstartposition original end originalend node get start position getstartposition node get length getlength addnlsalignindex align tokenindextonlsalign tokenindextonlsalign hash map hashmap integer integer tokenindextonlsalign align getnlsalign tokenindextonlsalign integer align tokenindextonlsalign align align set header end index setheaderendindex header end index headerendindex header end index headerendindex header end index headerendindex is in header isinheader token index tokenindex token index tokenindex header end index headerendindex add disable format token pair adddisableformattokenpair token format off tag formatofftag token format on tag formatontag format off tag pairs formatofftagpairs format off tag pairs formatofftagpairs array list arraylist token format off tag pairs formatofftagpairs add token format off tag formatofftag format on tag formatontag apply format off applyformatoff format off tag pairs formatofftagpairs token pair format off tag pairs formatofftagpairs find index findindex pair original start originalstart find index findindex pair original end originalend pair pair token unformatted token pair original start originalstart pair original end originalend tokennamewhitespace unformatted set indent setindent math min pair get indent getindent find source position in line findsourcepositioninline pair original start originalstart unformatted put line breaks before putlinebreaksbefore pair get line breaks before getlinebreaksbefore pair is space before isspacebefore unformatted space before spacebefore unformatted put line breaks after putlinebreaksafter pair get line breaks after getlinebreaksafter pair is space after isspaceafter unformatted space after spaceafter tokens unformatted tokens sub list sublist clear