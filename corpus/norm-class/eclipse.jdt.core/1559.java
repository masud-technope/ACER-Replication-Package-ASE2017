copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal core hierarchy java util array list arraylist java util arrays java util comparator java util hash map hashmap java util hash set hashset java util iterator java util map org eclipse core resources i file ifile org eclipse core resources i resource iresource org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime sub monitor submonitor org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i type itype org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core compiler char operation charoperation org eclipse jdt core search i java search constants ijavasearchconstants org eclipse jdt core search i java search scope ijavasearchscope org eclipse jdt core search search participant searchparticipant org eclipse jdt core search search pattern searchpattern org eclipse jdt internal compiler env access rule set accessruleset org eclipse jdt internal compiler env i binary type ibinarytype org eclipse jdt internal compiler env i compilation unit icompilationunit org eclipse jdt internal compiler problem default problem factory defaultproblemfactory org eclipse jdt internal compiler util hashtable of object hashtableofobject org eclipse jdt internal compiler util hashtable of object to int hashtableofobjecttoint org eclipse jdt internal compiler util suffix constants suffixconstants org eclipse jdt internal core class file classfile org eclipse jdt internal core i path requestor ipathrequestor org eclipse jdt internal core java model manager javamodelmanager org eclipse jdt internal core java project javaproject org eclipse jdt internal core member org eclipse jdt internal core openable org eclipse jdt internal core package fragment packagefragment org eclipse jdt internal core search able environment searchableenvironment org eclipse jdt internal core search index query requestor indexqueryrequestor org eclipse jdt internal core search java search participant javasearchparticipant org eclipse jdt internal core search sub type search job subtypesearchjob org eclipse jdt internal core search indexing i index constants iindexconstants org eclipse jdt internal core search indexing index manager indexmanager org eclipse jdt internal core search matching match locator matchlocator org eclipse jdt internal core search matching super type reference pattern supertypereferencepattern org eclipse jdt internal core util handle factory handlefactory org eclipse jdt internal core util util suppress warnings suppresswarnings rawtypes unchecked index based hierarchy builder indexbasedhierarchybuilder hierarchy builder hierarchybuilder suffix constants suffixconstants heuristic progress deep hierachies max ticks maxticks temporary cache compilation units handles speed info handle translation entries types region super types supertypes region map cu to handle cutohandle scope hierarchy builder rest rain restrain i java search scope ijavasearchscope scope cache record binaries recreated matches map binaries from index matches binariesfromindexmatches collection queue subtype queries queue names start add names length start system arraycopy names start names start names retrieve start names start start start string to string tostring nls string buffer stringbuffer buffer string buffer stringbuffer queue start buffer append names append buffer to string tostring index based hierarchy builder indexbasedhierarchybuilder type hierarchy typehierarchy hierarchy i java search scope ijavasearchscope scope java model exception javamodelexception hierarchy cu to handle cutohandle hash map hashmap binaries from index matches binariesfromindexmatches hash map hashmap scope scope build compute subtypes computesubtypes java model manager javamodelmanager manager java model manager javamodelmanager get java model manager getjavamodelmanager optimize access zip files building hierarchy manager cache zip files cachezipfiles compute subtypes computesubtypes note construction focus type i type itype focus type focustype get type gettype focus is object focusisobject focus type focustype get element name getelementname equals string i index constants iindexconstants object per centage percentage work needed subtypes amount of work for subtypes amountofworkforsubtypes focus is object focusisobject sub monitor submonitor possible subtypes monitor possiblesubtypesmonitor hierarchy progress monitor progressmonitor split amount of work for subtypes amountofworkforsubtypes paths potential subtypes local anonymous types hash set hashset local types localtypes hash set hashset string all possible subtypes allpossiblesubtypes member focus type focustype get outer most local context getoutermostlocalcontext top level member type all possible subtypes allpossiblesubtypes determine possible sub types determinepossiblesubtypes local types localtypes possible subtypes monitor possiblesubtypesmonitor local anonymous type all possible subtypes allpossiblesubtypes char operation charoperation strings all possible subtypes allpossiblesubtypes sub monitor submonitor build monitor buildmonitor hierarchy progress monitor progressmonitor split amount of work for subtypes amountofworkforsubtypes hierarchy initialize all possible subtypes allpossiblesubtypes length build from potential subtypes buildfrompotentialsubtypes all possible subtypes allpossiblesubtypes local types localtypes build monitor buildmonitor hierarchy initialize build super types buildsupertypes manager flush zip files flushzipfiles build for project buildforproject java project javaproject project array list arraylist potential subtypes potentialsubtypes org eclipse jdt core i compilation unit icompilationunit working copies workingcopies hash set hashset local types localtypes i progress monitor iprogressmonitor monitor java model exception javamodelexception sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor resolve openables length openableslength potential subtypes potentialsubtypes size openables length openableslength copy vec to rs vectors arrays openable openables openable openables length openableslength potential subtypes potentialsubtypes to array toarray openables sort order roots reverse alphabetical order file req uesting requesting top level types process caching enclosing type supported lookup environment i package fragment root ipackagefragmentroot roots project get package fragment roots getpackagefragmentroots roots length rootslength roots length hashtable of object to int hashtableofobjecttoint indexes hashtable of object to int hashtableofobjecttoint openables length openableslength openables length openableslength i java element ijavaelement root openables get ancestor getancestor i java element ijavaelement fragment root roots length rootslength roots equals root indexes openables sub monitor submonitor split arrays sort openables comparator compare object object a index aindex indexes b index bindex indexes a index aindex b index bindex a index aindex b index bindex openable get element name getelementname compare to compareto openable get element name getelementname i type itype focus type focustype get type gettype in project of focus type inprojectoffocustype focus type focustype focus type focustype get java project getjavaproject equals project org eclipse jdt core i compilation unit icompilationunit units to look inside unitstolookinside in project of focus type inprojectoffocustype org eclipse jdt core i compilation unit icompilationunit unit to look inside unittolookinside focus type focustype get compilation unit getcompilationunit unit to look inside unittolookinside wc length wclength working copies workingcopies working copies workingcopies length wc length wclength units to look inside unitstolookinside org eclipse jdt core i compilation unit icompilationunit unit to look inside unittolookinside units to look inside unitstolookinside org eclipse jdt core i compilation unit icompilationunit wc length wclength units to look inside unitstolookinside unit to look inside unittolookinside system arraycopy working copies workingcopies units to look inside unitstolookinside wc length wclength units to look inside unitstolookinside working copies workingcopies search able environment searchableenvironment search able environment searchableenvironment project new search able name environment newsearchablenameenvironment units to look inside unitstolookinside name lookup namelookup search able environment searchableenvironment name lookup namelookup map options project get options getoptions disable task tags speed parsing nls options java core javacore compiler task tags hierarchy resolver hierarchyresolver hierarchy resolver hierarchyresolver search able environment searchableenvironment options default problem factory defaultproblemfactory focus type focustype member declaring member declaringmember member focus type focustype get outer most local context getoutermostlocalcontext declaring member declaringmember top level member type in project of focus type inprojectoffocustype type qualified name typequalifiedname focus type focustype get type qualified name gettypequalifiedname to char array tochararray string package name packagename package fragment packagefragment focus type focustype get package fragment getpackagefragment names search able environment searchableenvironment find type findtype type qualified name typequalifiedname util to char arrays tochararrays package name packagename focus type visible project local anonymous type openable openable declaring member declaringmember is binary isbinary openable openable declaring member declaringmember get class file getclassfile openable openable declaring member declaringmember get compilation unit getcompilationunit local types localtypes hash set hashset local types localtypes add openable get path getpath to string tostring hierarchy resolver hierarchyresolver resolve openable openable local types localtypes sub monitor submonitor split hierarchy resolver hierarchyresolver resolve openables local types localtypes sub monitor submonitor split configure type hierarchy based potential subtypes build from potential subtypes buildfrompotentialsubtypes string all potential sub types allpotentialsubtypes hash set hashset local types localtypes i progress monitor iprogressmonitor monitor sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor i type itype focus type focustype get type gettype substitute compilation units working copies map path working copies hash map hashmap wc paths wcpaths hash map hashmap wc length wclength org eclipse jdt core i compilation unit icompilationunit working copies workingcopies hierarchy working copies workingcopies working copies workingcopies wc length wclength working copies workingcopies length string new paths newpaths string wc length wclength wc length wclength org eclipse jdt core i compilation unit icompilationunit working copy workingcopy working copies workingcopies string path working copy workingcopy get path getpath to string tostring wc paths wcpaths path working copy workingcopy new paths newpaths path potential subtypes length potentialsubtypeslength all potential sub types allpotentialsubtypes length system arraycopy all potential sub types allpotentialsubtypes all potential sub types allpotentialsubtypes string potential subtypes length potentialsubtypeslength wc length wclength potential subtypes length potentialsubtypeslength system arraycopy new paths newpaths all potential sub types allpotentialsubtypes potential subtypes length potentialsubtypeslength wc length wclength length all potential sub types allpotentialsubtypes length inject compilation unit focus type types special visibility permission useful l usefull working copy openable focuscu openable focus type focustype get compilation unit getcompilationunit string focus path focuspath focuscu focus path focuspath focuscu get path getpath to string tostring length system arraycopy all potential sub types allpotentialsubtypes all potential sub types allpotentialsubtypes string length length all potential sub types allpotentialsubtypes length focus path focuspath all potential sub types allpotentialsubtypes string focus path focuspath length sub monitor submonitor split sort alphabetical order potential subtypes grouped project arrays sort all potential sub types allpotentialsubtypes array list arraylist potential subtypes potentialsubtypes array list arraylist sub monitor submonitor loop monitor loopmonitor sub monitor submonitor split create element infos subtypes handle factory handlefactory factory handle factory handlefactory i java project ijavaproject current project currentproject length loop monitor loopmonitor set work remaining setworkremaining length string resource path resourcepath all potential sub types allpotentialsubtypes skip duplicate paths focus path injected potential subtype resource path resourcepath equals all potential sub types allpotentialsubtypes openable handle org eclipse jdt core i compilation unit icompilationunit working copy workingcopy org eclipse jdt core i compilation unit icompilationunit wc paths wcpaths resource path resourcepath working copy workingcopy handle openable working copy workingcopy handle resource path resourcepath equals focus path focuspath focuscu factory create openable createopenable resource path resourcepath scope match classpath handle i java project ijavaproject project handle get java project getjavaproject current project currentproject current project currentproject project potential subtypes potentialsubtypes array list arraylist current project currentproject equals project build current project build for project buildforproject java project javaproject current project currentproject potential subtypes potentialsubtypes working copies workingcopies local types localtypes loop monitor loopmonitor split current project currentproject project potential subtypes potentialsubtypes array list arraylist potential subtypes potentialsubtypes add handle java model exception javamodelexception loop monitor loopmonitor set work remaining setworkremaining build project current project currentproject potential subtypes current project currentproject focus type focustype get java project getjavaproject focus type focustype is binary isbinary potential subtypes potentialsubtypes add focus type focustype get class file getclassfile potential subtypes potentialsubtypes add focus type focustype get compilation unit getcompilationunit build for project buildforproject java project javaproject current project currentproject potential subtypes potentialsubtypes working copies workingcopies local types localtypes loop monitor loopmonitor split java model exception javamodelexception loop monitor loopmonitor set work remaining setworkremaining compute hierarchy focus type type potential subtypes real subtypes hierarchy focus type focustype current project currentproject focus type focustype get java project getjavaproject potential subtypes potentialsubtypes array list arraylist focus type focustype is binary isbinary potential subtypes potentialsubtypes add focus type focustype get class file getclassfile potential subtypes potentialsubtypes add focus type focustype get compilation unit getcompilationunit build for project buildforproject java project javaproject current project currentproject potential subtypes potentialsubtypes working copies workingcopies local types localtypes loop monitor loopmonitor split java model exception javamodelexception add focus type explicit type hierarchy focus type focustype hierarchy add root class addrootclass focus type focustype sub monitor submonitor monitor i compilation unit icompilationunit create compilation unit from path createcompilationunitfrompath openable handle i file ifile file i compilation unit icompilationunit unit create compilation unit from path createcompilationunitfrompath handle file cu to handle cutohandle unit handle unit i binary type ibinarytype create info from class file createinfofromclassfile openable class file classfile i resource iresource file string document path documentpath class file classfile get path getpath to string tostring i binary type ibinarytype binary type binarytype i binary type ibinarytype binaries from index matches binariesfromindexmatches document path documentpath binary type binarytype info to handle infotohandle binary type binarytype class file classfile binary type binarytype create info from class file createinfofromclassfile class file classfile file i binary type ibinarytype create info from class file in jar createinfofromclassfileinjar openable class file classfile string file path filepath class file classfile class file classfile get type gettype get fully qualified name getfullyqualifiedname replace suffix constants suffixconstants suffix string i package fragment root ipackagefragmentroot root class file classfile get package fragment root getpackagefragmentroot i path ipath path root get path getpath path external jars slash path internal jars string root path rootpath path get device getdevice path to string tostring path toosstring string document path documentpath root path rootpath i java search scope ijavasearchscope jar file entry separator file path filepath i binary type ibinarytype binary type binarytype i binary type ibinarytype binaries from index matches binariesfromindexmatches document path documentpath binary type binarytype info to handle infotohandle binary type binarytype class file classfile binary type binarytype create info from class file in jar createinfofromclassfileinjar class file classfile returns subtypes type hierarchy returns determine string determine possible sub types determinepossiblesubtypes hash set hashset local types localtypes i progress monitor iprogressmonitor monitor path collector pathcollector i path requestor ipathrequestor hash set hashset paths hash set hashset accept path acceptpath string path contains local types containslocaltypes paths add path contains local types containslocaltypes local types localtypes add path path collector pathcollector collector path collector pathcollector search all possible sub types searchallpossiblesubtypes get type gettype scope binaries from index matches binariesfromindexmatches collector i java search constants ijavasearchconstants wait ready search monitor hash set hashset paths collector paths length paths size string result string length count iterator iter paths iterator iter has next hasnext result count string iter result find candidate subtypes type requestor not ified notified type references actual path occurrence types involved hierarchy match locator narrow type hierarchy resolver compute hierarchy param type param scope param binaries from index matches binariesfromindexmatches param path requestor pathrequestor param waiting policy waitingpolicy param monitor search all possible sub types searchallpossiblesubtypes i type itype type i java search scope ijavasearchscope scope map binaries from index matches binariesfromindexmatches i path requestor ipathrequestor path requestor pathrequestor wait until ready to search waituntilreadytosearch force immediate search forceimmediatesearch cancel if not ready to search cancelifnotreadytosearch waiting policy waitingpolicy i progress monitor iprogressmonitor monitor sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor embed constructs arrays pass collector queue queue queue hashtable of object hashtableofobject found super names foundsupernames hashtable of object hashtableofobject index manager indexmanager index manager indexmanager java model manager javamodelmanager get index manager getindexmanager special collector collect paths queue subtype names index query requestor indexqueryrequestor search requestor searchrequestor index query requestor indexqueryrequestor accept index match acceptindexmatch string document path documentpath search pattern searchpattern index record indexrecord search participant searchparticipant participant access rule set accessruleset access super type reference pattern supertypereferencepattern record super type reference pattern supertypereferencepattern index record indexrecord is local or anonymous islocaloranonymous record enclosing type name enclosingtypename i index constants iindexconstants path requestor pathrequestor accept path acceptpath document path documentpath is local or anonymous islocaloranonymous type name typename record simple name simplename document path documentpath to lower case tolowercase ends with endswith suffix string suffix document path documentpath length suffix string length hierarchy binary type hierarchybinarytype binary type binarytype hierarchy binary type hierarchybinarytype binaries from index matches binariesfromindexmatches document path documentpath binary type binarytype enclosing type name enclosingtypename record enclosing type name enclosingtypename is local or anonymous islocaloranonymous last slash lastslash document path documentpath last index of lastindexof last dollar lastdollar document path documentpath last index of lastindexof last dollar lastdollar malformed local anonymous type doesn treat top level type enclosing type name enclosingtypename type name typename document path documentpath substring last slash lastslash suffix to char array tochararray enclosing type name enclosingtypename document path documentpath substring last slash lastslash last dollar lastdollar to char array tochararray type name typename document path documentpath substring last dollar lastdollar suffix to char array tochararray binary type binarytype hierarchy binary type hierarchybinarytype record modifiers record pkg name pkgname type name typename enclosing type name enclosingtypename record type parameter signatures typeparametersignatures record class or interface classorinterface binaries from index matches binariesfromindexmatches document path documentpath binary type binarytype binary type binarytype record super type recordsupertype record super simple name supersimplename record super qualification superqualification record super class or interface superclassorinterface local anonymous types subtypes define is local or anonymous islocaloranonymous found super names foundsupernames contains key containskey type name typename found super names foundsupernames type name typename type name typename queue add type name typename super ref kind superrefkind super ref kind superrefkind type is class isclass super type reference pattern supertypereferencepattern classes super type reference pattern supertypereferencepattern types java model exception javamodelexception super ref kind superrefkind super type reference pattern supertypereferencepattern types super type reference pattern supertypereferencepattern pattern super type reference pattern supertypereferencepattern super ref kind superrefkind search pattern searchpattern exact match search pattern searchpattern sensitive match locator matchlocator set focus setfocus pattern type sub type search job subtypesearchjob job sub type search job subtypesearchjob pattern java search java search participant javasearchparticipant scope search requestor searchrequestor queue add type get element name getelementname to char array tochararray queue start queue sub monitor submonitor set work remaining setworkremaining math max queue queue start subclasses object types current type name currenttypename queue retrieve char operation charoperation equals current type name currenttypename i index constants iindexconstants object current type name currenttypename search references super type supertype pattern super simple name supersimplename current type name currenttypename index manager indexmanager perform concurrent job performconcurrentjob job waiting policy waitingpolicy sub monitor submonitor split search subtypes search current type name currenttypename job finished