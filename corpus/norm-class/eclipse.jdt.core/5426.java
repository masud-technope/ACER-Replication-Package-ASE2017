copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contribution bug ordering comments imports preserved john glassmyer jogl google group sorting broken https bugs eclipse org org eclipse jdt core tests rewrite describing java i o exception ioexception java util array list arraylist java util collections java util iterator java util list org eclipse core resources i file ifile org eclipse core resources project scope projectscope org eclipse core runtime core exception coreexception org eclipse core runtime platform org eclipse jdt core binding key bindingkey org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i type itype org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast org eclipse jdt core dom ast parser astparser org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom type org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom rewrite import rewrite importrewrite org eclipse jdt core dom rewrite import rewrite importrewrite import rewrite context importrewritecontext org eclipse jdt core formatter default code formatter constants defaultcodeformatterconstants org eclipse jdt core tests model abstract java model tests abstractjavamodeltests org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits multi text edit multitextedit org eclipse text edits text edit textedit org osgi service prefs backing store exception backingstoreexception junit framework test suppress warnings suppresswarnings rawtypes unchecked import rewrite test importrewritetest abstract java model tests abstractjavamodeltests internal synonym deprecated constant ast jsl all eviate alleviate deprecation warnings deprecated jls internal ast jls import rewrite test importrewritetest i package fragment root ipackagefragmentroot source folder sourcefolder import rewrite test importrewritetest string test all tests alltests suite test suite suite all tests alltests set up setup exception set up setup i java project ijavaproject proj create java project createjavaproject string src string jcl lib bin proj set option setoption default code formatter constants defaultcodeformatterconstants formatter tab java core javacore space proj set option setoption default code formatter constants defaultcodeformatterconstants formatter tab size proj set option setoption java core javacore compiler compliance java core javacore version proj set option setoption java core javacore compiler identifier java core javacore error proj set option setoption java core javacore compiler source java core javacore version proj set option setoption java core javacore compiler codegen target platform java core javacore version proj set option setoption default code formatter constants defaultcodeformatterconstants formatter number empty lines preserve string value of valueof proj set option setoption default code formatter constants defaultcodeformatterconstants formatter blank lines groups string value of valueof tests assume separator project scope projectscope proj get project getproject get node getnode platform runtime platform pref separator source folder sourcefolder get package fragment root getpackagefragmentroot src wait until indexes ready waituntilindexesready tear down teardown exception delete project deleteproject tear down teardown add resses addresses https bugs eclipse org organize imports remove duplicated imports test duplicate import omitted when restore existing imports is false testduplicateimportomittedwhenrestoreexistingimportsisfalse exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append java serializable contents append java serializable contents append contents append clazz i compilation unit icompilationunit create compilation unit createcompilationunit pack clazz contents to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java serializable apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java serializable expected append expected append clazz assert equal string assertequalstring get source getsource expected to string tostring expects imports types unnamed imports reduced demand imports types unnamed legal versions java prior add resses addresses https bugs eclipse org add import addimport creates ypename unqualified type test add imports from unnamed package testaddimportsfromunnamedpackage exception i compilation unit icompilationunit create compilation unit createcompilationunit pack string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util array deque arraydeque imports add import addimport java util array list arraylist imports add import addimport bar imports add import addimport foo apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java util expected append expected append bar expected append foo expected append expected append assert equal string assertequalstring get source getsource expected to string tostring add resses addresses https bugs eclipse org adding type adding honor order test import group matching qualified name testimportgroupmatchingqualifiedname exception i compilation unit icompilationunit create compilation unit createcompilationunit pack string order string and roid android do foo dofoo and roid android java and roid android import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport and roid android imports add import addimport java util list imports add import addimport and roid android foo imports add static import addstaticimport and roid android do foo dofoo apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append and roid android do foo dofoo expected append expected append and roid android expected append expected append java util list expected append expected append and roid android foo expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects comments single imports reassigned demand reduced test reduce new on demand testreducenewondemand exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append java serializable contents append contents append floating leading contents append contents append leading contents append leading java net trailing contents append trailing contents append contents append floating leading contents append contents append leading contents append leading java net trailing contents append trailing contents append contents append floating leading contents append contents append leading contents append leading java net trailing contents append trailing contents append contents append java util list contents append contents append clazz i compilation unit icompilationunit create compilation unit createcompilationunit pack clazz contents to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java serializable imports add import addimport java net imports add import addimport java net imports add import addimport java net imports add import addimport java util list apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java expected append expected append floating leading expected append expected append leading expected append leading expected append trailing expected append trailing expected append expected append floating leading expected append expected append leading expected append leading expected append trailing expected append trailing expected append expected append floating leading expected append expected append leading expected append leading expected append trailing expected append trailing expected append java net expected append java util expected append expected append clazz assert equal string assertequalstring get source getsource expected to string tostring expects comments single imports reassigned existing demand reduced demand comments preserved test reduce existing on demand testreduceexistingondemand exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append java contents append contents append demand floating contents append contents append demand leading contents append demand leading java net demand trailing contents append demand trailing contents append contents append floating leading contents append contents append leading contents append leading java net trailing contents append trailing contents append contents append floating leading contents append contents append leading contents append leading java net trailing contents append trailing contents append contents append floating leading contents append contents append leading contents append leading java net trailing contents append trailing contents append contents append java util contents append contents append clazz i compilation unit icompilationunit create compilation unit createcompilationunit pack clazz contents to string tostring string order string java java java util import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java serializable imports add import addimport java net imports add import addimport java net imports add import addimport java net imports add import addimport java util list apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java expected append expected append floating leading expected append expected append leading expected append leading expected append trailing expected append trailing expected append expected append floating leading expected append expected append leading expected append leading expected append trailing expected append trailing expected append expected append floating leading expected append expected append leading expected append leading expected append trailing expected append trailing expected append expected append demand floating expected append expected append demand leading expected append demand leading java net demand trailing expected append demand trailing expected append expected append java util expected append expected append clazz assert equal string assertequalstring get source getsource expected to string tostring expects comments expanded demand reassigned single comments single imports container preserved test expand on demand testexpandondemand exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append contents append contents append demand floating contents append contents append demand leading contents append demand leading java util demand trailing contents append demand trailing contents append contents append array list arraylist floating contents append contents append array list arraylist leading contents append array list arraylist leading java util array list arraylist array list arraylist trailing contents append array list arraylist trailing contents append contents append list floating contents append contents append list leading contents append list leading java util list list trailing contents append list trailing contents append contents append map floating contents append contents append map leading contents append map leading java util map map trailing contents append map trailing contents append contents append java net socket contents append contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java util java net import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports import rewrite importrewrite add import addimport java util array list arraylist import rewrite importrewrite add import addimport java util map import rewrite importrewrite add import addimport java util import rewrite importrewrite add import addimport java net socket apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append demand floating expected append expected append demand leading expected append demand leading expected append demand trailing expected append demand trailing expected append expected append array list arraylist floating expected append expected append array list arraylist leading expected append array list arraylist leading java util array list arraylist array list arraylist trailing expected append array list arraylist trailing expected append expected append map floating expected append expected append map leading expected append map leading java util map map trailing expected append map trailing expected append java util expected append expected append java net socket expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects comments removed expanded demand single reduced single correponding demand removed test removed import comments are removed testremovedimportcommentsareremoved exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append socket contents append java net socket socket contents append goo dness goodness java built net working networking libraries contents append contents append java util array list arraylist contents append contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java util array list arraylist apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java util array list arraylist expected append expected append assert equal string assertequalstring get source getsource expected to string tostring add resses addresses https bugs eclipse org organize imports ignores number imports needed https bugs eclipse org nested type imports collapsed wildcards test on demand with in type testondemandwithintype exception i compilation unit icompilationunit create compilation unit createcompilationunit pack string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util map entry apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java util map expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects comment embedded declaration preserved test comment with in import declaration testcommentwithinimportdeclaration exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append comment java util map contents append contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util map apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append comment java util map expected append expected append assert equal string assertequalstring get source getsource expected to string tostring add resses addresses https bugs eclipse org comment discarded reducing imports demand test floating comment preserve d when red ucing on demand above testfloatingcommentpreservedwhenreducingondemandabove exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append java util queue contents append contents append floating comment contents append contents append java util concurrent blocking deque blockingdeque contents append contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports import rewrite importrewrite add import addimport java util formatter apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java util expected append expected append floating comment expected append expected append java util concurrent blocking deque blockingdeque expected append expected append assert equal string assertequalstring get source getsource expected to string tostring add resses addresses https bugs eclipse org imports imp roperly improperly reordered presence floating comment test floating comment doesn t cause imports to move testfloatingcommentdoesntcauseimportstomove exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append java serializable contents append contents append floating comment contents append contents append java util list contents append contents append javax sql data source datasource contents append contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java javax import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports import rewrite importrewrite add import addimport java serializable import rewrite importrewrite add import addimport java util list import rewrite importrewrite add import addimport javax sql data source datasource apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java serializable expected append expected append floating comment expected append expected append java util list expected append expected append javax sql data source datasource expected append expected append assert equal string assertequalstring get source getsource expected to string tostring test add import into match all import group testaddimportintomatchallimportgroup exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append java util array list arraylist contents append contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java net import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports import rewrite importrewrite add import addimport java net socket apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java util array list arraylist expected append expected append java net socket expected append expected append assert equal string assertequalstring get source getsource expected to string tostring test cu in default package with no existing imports testcuindefaultpackagewithnoexistingimports exception string buffer stringbuffer contents string buffer stringbuffer contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java java net import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports import rewrite importrewrite add import addimport java net socket import rewrite importrewrite add import addimport java util array list arraylist apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append java util array list arraylist expected append expected append java net socket expected append expected append assert equal string assertequalstring get source getsource expected to string tostring add resses addresses https bugs eclipse org import rewrite importrewrite add explicit existing demand test needs explicit import testneedsexplicitimport exception i compilation unit icompilationunit create compilation unit createcompilationunit pack string order string java import rewrite context importrewritecontext needs explicit import context needsexplicitimportcontext import rewrite context importrewritecontext find in context findincontext string qualifier string kind import rewrite context importrewritecontext res unknown explicit import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports import rewrite importrewrite add static import addstaticimport java util collections shuffle needs explicit import context needsexplicitimportcontext import rewrite importrewrite add static import addstaticimport java util collections sort import rewrite importrewrite add import addimport java util list needs explicit import context needsexplicitimportcontext import rewrite importrewrite add import addimport java util map apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java util collections expected append java util collections shuffle expected append expected append java util expected append java util list expected append expected append assert equal string assertequalstring get source getsource expected to string tostring test organize no imports with one line delim testorganizenoimportswithonelinedelim exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append assert equal string assertequalstring get source getsource expected to string tostring test organize no imports with two line delims testorganizenoimportswithtwolinedelims exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append assert equal string assertequalstring get source getsource expected to string tostring test organize no imports with javadoc testorganizenoimportswithjavadoc exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append contents append contents append contents append contents append i compilation unit icompilationunit create compilation unit createcompilationunit pack contents to string tostring string order string java import rewrite importrewrite import rewrite importrewrite new imports rewrite newimportsrewrite order import rewrite importrewrite set use context to filter implicit imports setusecontexttofilterimplicitimports apply import rewrite importrewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append expected append expected append expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects imports correctly declaration multiline trailing comment test package declaration trailing comment testpackagedeclarationtrailingcomment exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack pack contents append trailing contents append comment contents append contents append contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java util array list arraylist apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack pack expected append trailing expected append comment expected append expected append java util array list arraylist expected append expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects correct placement declaration type declaration comments test add import with package and type on same line testaddimportwithpackageandtypeonsameline exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack pack trailing leading i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java util array list arraylist apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack pack trailing expected append expected append java util array list arraylist expected append expected append leading assert equal string assertequalstring get source getsource expected to string tostring expects imports matching defined groups add resses addresses https bugs eclipse org group sorting broken test unmatched imports testunmatchedimports exception i compilation unit icompilationunit create compilation unit createcompilationunit pack string order string java net google import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport acme b ird see d birdseed imports add import addimport acme dynamite imports add import addimport google tgif imports add import addimport java net socket imports add import addimport java bar imports add import addimport org linux kernel apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java net socket expected append expected append google tgif expected append expected append acme b ird see d birdseed expected append acme dynamite expected append java bar expected append org linux kernel expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects order add import addimport called affect order declarations add resses addresses https bugs eclipse org group sorting broken test add imports in var ying order testaddimportsinvaryingorder exception string order string list imports to add importstoadd array list arraylist imports to add importstoadd add class in a classina imports to add importstoadd add class in b classinb imports to add importstoadd add class in c classinc imports to add importstoadd add class in d classind imports to add importstoadd add class in e classine imports to add importstoadd add class in f classinf imports to add importstoadd add class in g classing imports to add importstoadd add class in h classinh i compilation unit icompilationunit create compilation unit createcompilationunit pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order iterator imports to add iter importstoadditer imports to add importstoadd iterator imports to add iter importstoadditer has next hasnext imports add import addimport string imports to add iter importstoadditer apply imports string source get source getsource collections reverse imports to add importstoadd i compilation unit icompilationunit create compilation unit createcompilationunit pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order iterator imports to add iter importstoadditer imports to add importstoadd iterator imports to add iter importstoadditer has next hasnext imports add import addimport string imports to add iter importstoadditer apply imports string source get source getsource reversing order imports add import addimport affect rewritten order assert equal string assertequalstring source source expects imports matching defined group defined groups imports matching defined group defined groups add resses addresses https bugs eclipse org group sorting broken test static and non static unmatched imports teststaticandnonstaticunmatchedimports exception i compilation unit icompilationunit create compilation unit createcompilationunit pack string order string import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add static import addstaticimport class in a classina static method in a staticmethodina imports add static import addstaticimport class in b classinb static method in b staticmethodinb imports add import addimport class in g classing imports add import addimport class in h classinh apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append class in b classinb static method in b staticmethodinb expected append expected append class in a classina static method in a staticmethodina expected append expected append class in h classinh expected append expected append class in g classing expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expect duplicate demand imports comments survive rewrite test add with duplicate on demand imports testaddwithduplicateondemandimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append java lang contents append contents append foo bar leading contents append foo bar leading foo bar foo bar trailing contents append foo bar trailing contents append contents append pack contents append contents append foo bar leading contents append foo bar leading foo bar foo bar trailing contents append foo bar trailing contents append contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string java lang foo pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport my class myclass apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java lang expected append expected append foo bar leading expected append foo bar leading foo bar foo bar trailing expected append foo bar trailing expected append expected append pack expected append expected append my class myclass expected append expected append foo bar leading expected append foo bar leading foo bar foo bar trailing expected append foo bar trailing expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expect duplicate single imports comments survive rewrite test add with duplicate single imports testaddwithduplicatesingleimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append java lang contents append contents append foo bar leading contents append foo bar leading foo bar foo bar trailing contents append foo bar trailing contents append contents append pack contents append contents append foo bar leading contents append foo bar leading foo bar foo bar trailing contents append foo bar trailing contents append contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string java lang foo pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport my class myclass apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append java lang expected append expected append foo bar leading expected append foo bar leading foo bar foo bar trailing expected append foo bar trailing expected append expected append pack expected append expected append my class myclass expected append expected append foo bar leading expected append foo bar leading foo bar foo bar trailing expected append foo bar trailing expected append expected append assert equal string assertequalstring get source getsource expected to string tostring test o the r duplicate imports not disturbed testotherduplicateimportsnotdisturbed exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append pack some class someclass contents append java util array list arraylist contents append contents append pack some class someclass contents append mycompany frobnigator contents append contents append pack some class someclass contents append org eclipse great ide greatide contents append contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string java pack org import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport mycompany foo apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append pack some class someclass expected append java util array list arraylist expected append expected append pack some class someclass expected append expected append mycompany foo expected append mycompany frobnigator expected append expected append pack some class someclass expected append org eclipse great ide greatide expected append expected append assert equal string assertequalstring get source getsource expected to string tostring test duplicate imports do not count to war d on demand threshold testduplicateimportsdonotcounttowardondemandthreshold exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append mycompany foo contents append mycompany foo contents append contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport mycompany bar apply imports expect demand threshold reached string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append mycompany bar expected append mycompany foo expected append mycompany foo expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects conflict ident ically identically named fields demand imports resolved explicit fields add resses addresses https bugs eclipse org organize imports imports intro duces introduces compile errors test on demand conflict between static fields testondemandconflictbetweenstaticfields exception i compilation unit icompilationunit create compilation unit createcompilationunit pack test enum constants bug enum constants behavior general izes generalizes fields enum constants i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer horizontal enum horizontalenum string buffer stringbuffer horizontal enum horizontalenum append pack horizontal enum horizontalenum append enum horizontal left center pack create compilation unit createcompilationunit horizontal java horizontal enum horizontalenum to string tostring string buffer stringbuffer vertical enum verticalenum string buffer stringbuffer vertical enum verticalenum append pack vertical enum verticalenum append enum vertical top center bottom pack create compilation unit createcompilationunit vertical java vertical enum verticalenum to string tostring string order string import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add static import addstaticimport pack horizontal center imports add static import addstaticimport pack vertical top apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append pack horizontal center expected append pack vertical expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects conflict demand type demand resolved explicit conflicting member types ins pired inspired https bugs eclipse org test on demand conflict between type and nested static type testondemandconflictbetweentypeandnestedstatictype exception i compilation unit icompilationunit create compilation unit createcompilationunit pack i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer containing type containingtype string buffer stringbuffer containing type containingtype append pack containing type containingtype append containing type containingtype containing type containingtype append type with same name typewithsamename containing type containingtype append constant containing type containingtype append pack create compilation unit createcompilationunit containing type containingtype java containing type containingtype to string tostring i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer type with same name typewithsamename string buffer stringbuffer type with same name typewithsamename append pack type with same name typewithsamename append type with same name typewithsamename pack create compilation unit createcompilationunit type with same name typewithsamename java type with same name typewithsamename to string tostring string order string import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add static import addstaticimport pack containing type containingtype constant imports add import addimport pack type with same name typewithsamename apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append pack containing type containingtype expected append expected append pack type with same name typewithsamename expected append expected append assert equal string assertequalstring get source getsource expected to string tostring test floating comment with blank line testfloatingcommentwithblankline exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append mycompany bar contents append contents append contents append contents append comment contents append contents append mycompany foo contents append contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport mycompany bar imports add import addimport mycompany foo apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append mycompany bar expected append expected append expected append expected append comment expected append expected append mycompany foo expected append expected append assert equal string assertequalstring get source getsource expected to string tostring expects rewrite effective produces empty text edit textedit test no edits testnoedits exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append leading comment contents append mycompany foo contents append trailing comment contents append contents append leading comment contents append java util array list arraylist contents append trailing comment contents append contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport mycompany foo imports add import addimport java util array list arraylist text edit textedit edit imports rewrite imports rewriteimports assert equals assertequals multi text edit multitextedit edit get children size getchildrensize test add import with comment between imports and type testaddimportwithcommentbetweenimportsandtype exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append mycompany bar contents append contents append floating comment contents append contents append type comment contents append i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport mycompany bar imports add import addimport mycompany foo apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append mycompany bar expected append mycompany foo expected append expected append floating comment expected append expected append type comment expected append assert equal string assertequalstring expected to string tostring get source getsource test rename imported class with imported nested class testrenameimportedclasswithimportednestedclass exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append contents append a nested anested contents append contents append c nested cnested contents append contents append e nested enested contents append contents append clazz i compilation unit icompilationunit create compilation unit createcompilationunit pack clazz contents to string tostring string order string import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports simulate renaming imports remove import removeimport imports remove import removeimport a nested anested imports add import addimport imports add import addimport a nested anested apply imports string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append expected append c nested cnested expected append expected append a nested anested expected append expected append e nested enested expected append expected append clazz assert equal string assertequalstring get source getsource expected to string tostring test conflicts between original on demands testconflictsbetweenoriginalondemands exception create type named packages create compilation unit createcompilationunit conflicting create compilation unit createcompilationunit conflicting create member named do stuff dostuff types string buffer stringbuffer statics string buffer stringbuffer statics append statics statics append statics append statics statics append do stuff dostuff statics append create compilation unit createcompilationunit statics statics statics to string tostring string buffer stringbuffer statics string buffer stringbuffer statics append statics statics append statics append statics statics append do stuff dostuff statics append create compilation unit createcompilationunit statics statics statics to string tostring types members a mbiguously ambiguously conflicting demand imports string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append statics statics contents append statics statics contents append contents append conflicting contents append conflicting contents append contents append clazz i compilation unit icompilationunit create compilation unit createcompilationunit pack clazz contents to string tostring import rewrite importrewrite imports new imports rewrite newimportsrewrite string imports set use context to filter implicit imports setusecontexttofilterimplicitimports add imports surface ambiguity existing demand imports imports add import addimport conflicting imports add static import addstaticimport statics statics do stuff dostuff apply imports string buffer stringbuffer expected string buffer stringbuffer expect explicit single imports resolve conflicts expected append pack expected append expected append statics statics expected append statics statics do stuff dostuff expected append statics statics expected append expected append conflicting expected append conflicting expected append conflicting expected append expected append clazz assert equal string assertequalstring get source getsource expected to string tostring test remove imports with package doc comment testremoveimportswithpackagedoccomment exception string buffer stringbuffer contents string buffer stringbuffer contents append doc comment contents append pack contents append contents append foo contents append contents append clazz i compilation unit icompilationunit create compilation unit createcompilationunit pack clazz contents to string tostring import rewrite importrewrite rewrite new imports rewrite newimportsrewrite string rewrite set use context to filter implicit imports setusecontexttofilterimplicitimports rewrite remove import removeimport foo apply rewrite string buffer stringbuffer expected string buffer stringbuffer expected append doc comment expected append pack expected append expected append clazz assert equal string assertequalstring get source getsource expected to string tostring test implicit import filtering testimplicitimportfiltering exception string order string i compilation unit icompilationunit cu with filtering cuwithfiltering create compilation unit createcompilationunit pack cu with filtering cuwithfiltering import rewrite importrewrite rewrite with filtering rewritewithfiltering new imports rewrite newimportsrewrite cu with filtering cuwithfiltering order rewrite with filtering rewritewithfiltering set use context to filter implicit imports setusecontexttofilterimplicitimports rewrite with filtering rewritewithfiltering set filter implicit imports setfilterimplicitimports rewrite with filtering rewritewithfiltering add import addimport java lang integer apply rewrite with filtering rewritewithfiltering string buffer stringbuffer expected with filtering expectedwithfiltering string buffer stringbuffer expect implicit java lang filtered expected with filtering expectedwithfiltering append pack expected with filtering expectedwithfiltering append expected with filtering expectedwithfiltering append cu with filtering cuwithfiltering assert equal string assertequalstring cu with filtering cuwithfiltering get source getsource expected with filtering expectedwithfiltering to string tostring i compilation unit icompilationunit cu without filtering cuwithoutfiltering create compilation unit createcompilationunit pack cu without filtering cuwithoutfiltering import rewrite importrewrite rewrite without filtering rewritewithoutfiltering new imports rewrite newimportsrewrite cu without filtering cuwithoutfiltering order rewrite without filtering rewritewithoutfiltering set use context to filter implicit imports setusecontexttofilterimplicitimports rewrite without filtering rewritewithoutfiltering set filter implicit imports setfilterimplicitimports rewrite without filtering rewritewithoutfiltering add import addimport java lang integer apply rewrite without filtering rewritewithoutfiltering string buffer stringbuffer expected without filtering expectedwithoutfiltering string buffer stringbuffer expect java lang compilation unit expected without filtering expectedwithoutfiltering append pack expected without filtering expectedwithoutfiltering append expected without filtering expectedwithoutfiltering append java lang integer expected without filtering expectedwithoutfiltering append expected without filtering expectedwithoutfiltering append cu without filtering cuwithoutfiltering assert equal string assertequalstring cu without filtering cuwithoutfiltering get source getsource expected without filtering expectedwithoutfiltering to string tostring add resses addresses https bugs eclipse org import rewrite importrewrite sioobe add test add a djacent import with common prefix but longer initial segment testaddadjacentimportwithcommonprefixbutlongerinitialsegment exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append from a froma contents append from b fromb contents append contents append clazz i compilation unit icompilationunit create compilation unit createcompilationunit pack clazz contents to string tostring import rewrite importrewrite rewrite new imports rewrite newimportsrewrite string rewrite set use context to filter implicit imports setusecontexttofilterimplicitimports expect exception thrown compared rewrite add import addimport from a b fromab apply rewrite string buffer stringbuffer expected string buffer stringbuffer expected append pack expected append expected append from a froma expected append from a b fromab expected append from b fromb expected append expected append clazz assert equal string assertequalstring get source getsource expected to string tostring https bugs eclipse org test add import to cu not on classpath testaddimporttocunotonclasspath exception string buffer stringbuffer contents string buffer stringbuffer contents append pack contents append contents append clazz create folder createfolder alt src pack i file ifile clazz create file createfile alt src pack clazz java contents to string tostring i compilation unit icompilationunit i compilation unit icompilationunit java core javacore create clazz become working copy becomeworkingcopy import rewrite importrewrite rewrite new imports rewrite newimportsrewrite string rewrite set use context to filter implicit imports setusecontexttofilterimplicitimports rewrite add import addimport pack another class anotherclass apply rewrite assert equal string assertequalstring get source getsource contents to string tostring discard working copy discardworkingcopy test add imports testaddimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util map buf append java util buf append java util vector buf append buf append pack list buf append pack list buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java net socket imports add import addimport imports add import addimport foo apply imports java net socket java group match group foo group buf string buffer stringbuffer buf append pack buf append buf append java net socket buf append java util map buf append java util buf append java util vector buf append buf append foo buf append buf append pack list buf append pack list buf append buf append buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports no empty lines testaddimportsnoemptylines exception source folder sourcefolder get java project getjavaproject set option setoption default code formatter constants defaultcodeformatterconstants formatter blank lines groups string value of valueof i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java util java net import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java net socket imports add import addimport apply imports buf string buffer stringbuffer buf append pack buf append buf append java util buf append java net socket buf append buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports more empty lines testaddimportsmoreemptylines exception source folder sourcefolder get java project getjavaproject set option setoption default code formatter constants defaultcodeformatterconstants formatter blank lines groups string value of valueof i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java util java net import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java net socket imports add import addimport apply imports buf string buffer stringbuffer buf append pack buf append buf append java util buf append buf append buf append java net socket buf append buf append buf append buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports testaddimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util buf append java util vector buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java socket apply imports buf string buffer stringbuffer buf append pack buf append buf append java socket buf append buf append java util buf append java util vector buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports testaddimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util comment buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java util vector apply imports buf string buffer stringbuffer buf append pack buf append buf append java util comment buf append java util vector buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports testaddimports exception get java project getjavaproject set option setoption default code formatter constants defaultcodeformatterconstants formatter insert space semicolon java core javacore insert i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util comment buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java util vector apply imports buf string buffer stringbuffer buf append pack buf append buf append java util comment buf append java util vector buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports testaddimports exception get java project getjavaproject set option setoption default code formatter constants defaultcodeformatterconstants formatter insert space semicolon java core javacore insert i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util map imports add import addimport java util imports add import addimport java util map entry imports add import addimport java util collections apply imports java util map collections reduced java util java util map entry reduced java util map buf string buffer stringbuffer buf append pack buf append buf append java util buf append java util map buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test add imports testaddimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack java util main string args hash map hashmap map entry entry system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util map entry apply imports demand threshold java util map entry reduced java util map buf string buffer stringbuffer buf append pack java util java util map main string args hash map hashmap map entry entry system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test add imports testaddimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack java util java util map entry main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java print writer printwriter apply imports buf string buffer stringbuffer buf append pack java java util java util map entry main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring test add imports with groups of unmatched testaddimportswithgroupsofunmatched exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java org pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport org imports add import addimport pack imports add import addimport imports add import addimport java util vector imports add static import addstaticimport stat apply imports buf string buffer stringbuffer buf append pack buf append buf append java util vector buf append buf append buf append buf append org buf append buf append stat buf append buf append pack buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports with groups of unmatched testaddimportswithgroupsofunmatched exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string org pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport imports add import addimport pack imports add import addimport imports add import addimport org vector imports add static import addstaticimport stat apply imports buf string buffer stringbuffer buf append pack buf append buf append org vector buf append buf append buf append buf append pack buf append buf append stat buf append buf append buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test remove imports testremoveimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util buf append java util vector buf append java util map buf append buf append pack list buf append pack list buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports remove import removeimport java util imports remove import removeimport pack list apply imports buf string buffer stringbuffer buf append pack buf append buf append java util buf append buf append pack list buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test remove imports testremoveimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util buf append java util vector comment buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports remove import removeimport java util vector apply imports buf string buffer stringbuffer buf append pack buf append buf append java util buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test remove imports testremoveimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append buf append buf append buf append pack create compilation unit createcompilationunit java buf to string tostring i package fragment ipackagefragment test source folder sourcefolder create package fragment createpackagefragment test buf string buffer stringbuffer buf append test buf append buf append pack buf append pack buf append pack not there notthere buf append pack buf append pack buf append pack not there notthere buf append buf append buf append i compilation unit icompilationunit cu t cut test create compilation unit createcompilationunit java buf to string tostring ast parser astparser parser ast parser astparser new parser newparser jls internal parser set source setsource cu t cut parser set resolve bindings setresolvebindings compilation unit compilationunit ast root astroot compilation unit compilationunit parser createast import rewrite importrewrite imports new imports rewrite newimportsrewrite ast root astroot string imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports remove import removeimport pack imports remove import removeimport pack not there notthere imports remove import removeimport pack imports remove import removeimport pack not there notthere apply imports buf string buffer stringbuffer buf append test buf append buf append pack buf append pack buf append buf append buf append assert equal string assertequalstring cu t cut get source getsource buf to string tostring test add imports testaddimports bug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport imports add import addimport imports add import addimport apply imports use context to filter implicit imports usecontexttofilterimplicitimports pre behavior sorts imports type sorting qualified buf string buffer stringbuffer buf append pack buf append buf append buf append buf append buf append buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports testaddimports bug using context usingcontext exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport imports add import addimport imports add import addimport apply imports use context to filter implicit imports usecontexttofilterimplicitimports behavior sorts imports qualified buf string buffer stringbuffer buf append pack buf append buf append buf append buf append buf append buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports testaddimports bug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java awt panel buf append buf append java math big integer biginteger buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java awt java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java applet applet apply imports buf string buffer stringbuffer buf append pack buf append buf append java awt panel buf append buf append java applet applet buf append java math big integer biginteger buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add imports testaddimports bug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java lang system buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java exception apply imports buf string buffer stringbuffer buf append pack buf append buf append java exception buf append java lang system buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring expects absence declaration comments preceding declaration treated file header comments left place test add imports testaddimports bug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append comment buf append java lang system buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java exception apply imports buf string buffer stringbuffer buf append comment buf append java exception buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test order enclosing type org anized organized https bugs eclipse org bugs bug cgi test bug testbug exception string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append pack buf append pack buf append pack buf append buf append buf append i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring ast classes test disambiguate packages classes bug details i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack i compilation unit icompilationunit a unit aunit pack create compilation unit createcompilationunit java i compilation unit icompilationunit b unit bunit pack create compilation unit createcompilationunit java b unit bunit create type createtype i type itype a type atype a unit aunit create type createtype a type atype create type createtype string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport pack imports add import addimport pack imports add import addimport pack apply imports buf string buffer stringbuffer buf append pack buf append buf append pack buf append pack buf append pack buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test valid removed container impl icitly implicitly tests classes compilation units https bugs eclipse org bugs bug cgi test bug testbug exception string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append pack buf append pack buf append pack buf append buf append buf append i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring i compilation unit icompilationunit a unit aunit pack create compilation unit createcompilationunit java i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack i compilation unit icompilationunit b unit bunit pack create compilation unit createcompilationunit java b unit bunit create type createtype i type itype a type atype a unit aunit create type createtype a type atype create type createtype string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport pack imports add import addimport pack imports add import addimport pack apply imports buf string buffer stringbuffer buf append pack buf append buf append pack buf append pack buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test type imports removed org a nizing organizing impl icitly implicitly classes compilation unit https bugs eclipse org bugs bug cgi test bug testbug exception string buffer stringbuffer buf string buffer stringbuffer buf append bug buf append buf append bug buf append add file addfile file file buf append tinterface proto buf append buf append foo proto i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment bug i compilation unit icompilationunit pack create compilation unit createcompilationunit bug java buf to string tostring string order string bug java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport bug bug proto imports add import addimport java file apply imports buf string buffer stringbuffer buf append bug buf append buf append bug bug proto buf append buf append java file buf append buf append bug buf append add file addfile file file buf append tinterface proto buf append buf append foo proto assert equal string assertequalstring get source getsource buf to string tostring test add static imports testaddstaticimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java lang system buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add static import addstaticimport java lang math min imports add import addimport java lang math imports add static import addstaticimport java lang math max apply imports buf string buffer stringbuffer buf append pack buf append buf append java lang math max buf append java lang math min buf append buf append java lang system buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add static imports testaddstaticimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java lang system buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add static import addstaticimport my constants myconstants size imports add static import addstaticimport my constants myconstants imports add import addimport my constants myconstants apply imports buf string buffer stringbuffer buf append pack buf append buf append my constants myconstants size buf append my constants myconstants buf append buf append java lang system buf append buf append my constants myconstants buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test add static imports testaddstaticimports exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java lang system buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add static import addstaticimport java lang math min imports add static import addstaticimport java lang math max imports add static import addstaticimport java lang math abs imports add static import addstaticimport java file path separator pathseparator imports add static import addstaticimport java file separator imports add import addimport java util list imports add import addimport java util vector imports add import addimport java util array list arraylist apply imports buf string buffer stringbuffer buf append pack buf append buf append java file path separator pathseparator buf append java file separator buf append java lang math buf append buf append java lang system buf append java util array list arraylist buf append java util list buf append java util vector buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring create class stub createclassstub string pack string type name typename string type kind typekind java model exception javamodelexception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append append pack append buf append append type kind typekind append append type name typename append buf append string content buf to string tostring string type name typename idx type name typename index of indexof idx type name typename substring idx pack create compilation unit createcompilationunit java content test import structure with signatures testimportstructurewithsignatures exception create class stub createclassstub java i o exception ioexception create class stub createclassstub java net url create class stub createclassstub java util list create class stub createclassstub java net socket address socketaddress i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append java util buf append java net buf append java buf append buf append foo buf append i o exception ioexception buf append url buf append list socket address socketaddress buf append buf append string content buf to string tostring i compilation unit icompilationunit pack create compilation unit createcompilationunit java content buf string buffer stringbuffer buf append test buf append buf append string content buf to string tostring i compilation unit icompilationunit pack create compilation unit createcompilationunit java content string order string java util java java net threshold ast ast ast newast jls internal import rewrite importrewrite imports rewrite importsrewrite new imports rewrite newimportsrewrite order threshold threshold i java element ijavaelement elements code select codeselect content index of indexof i o exception ioexception i o exception ioexception length assert equals assertequals elements length string key i type itype elements get key getkey string signature binding key bindingkey key to signature tosignature imports rewrite importsrewrite add import from signature addimportfromsignature signature ast i java element ijavaelement elements code select codeselect content index of indexof url url length assert equals assertequals elements length string key i type itype elements get key getkey string signature binding key bindingkey key to signature tosignature imports rewrite importsrewrite add import from signature addimportfromsignature signature ast i java element ijavaelement elements code select codeselect content index of indexof list list length assert equals assertequals elements length string key i type itype elements get key getkey string signature binding key bindingkey key to signature tosignature imports rewrite importsrewrite add import from signature addimportfromsignature signature ast apply imports rewrite importsrewrite buf string buffer stringbuffer buf append test buf append buf append java util list buf append buf append java i o exception ioexception buf append buf append java net socket address socketaddress buf append java net url buf append buf append buf append assert equal string ignore delim assertequalstringignoredelim get source getsource buf to string tostring test import structure with signatures testimportstructurewithsignatures exception create class stub createclassstub java util map create class stub createclassstub java util create class stub createclassstub java net socket address socketaddress create class stub createclassstub java net server socket serversocket i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append java util buf append java net buf append java buf append buf append foo buf append map server socket serversocket buf append buf append string content buf to string tostring i compilation unit icompilationunit pack create compilation unit createcompilationunit java content buf string buffer stringbuffer buf append test buf append buf append string content buf to string tostring i compilation unit icompilationunit pack create compilation unit createcompilationunit java content string order string java util java java net threshold ast ast ast newast jls internal import rewrite importrewrite imports rewrite importsrewrite new imports rewrite newimportsrewrite order threshold threshold i java element ijavaelement elements code select codeselect content index of indexof map map length assert equals assertequals elements length string key i type itype elements get key getkey string signature binding key bindingkey key to signature tosignature imports rewrite importsrewrite add import from signature addimportfromsignature signature ast apply imports rewrite importsrewrite buf string buffer stringbuffer buf append test buf append buf append java util map buf append java util buf append buf append java net server socket serversocket buf append buf append buf append assert equal string ignore delim assertequalstringignoredelim get source getsource buf to string tostring test added removed imports i testaddedremovedimportsapi exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append java util vector buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add static import addstaticimport java lang math min imports add import addimport java lang math assert added and removed assertaddedandremoved imports string java lang math string string java lang math min string imports add import addimport java lang math imports add static import addstaticimport java lang math max assert added and removed assertaddedandremoved imports string java lang math string string java lang math min java lang math max string imports remove import removeimport java lang math imports remove import removeimport java util vector imports remove static import removestaticimport java lang math dup assert added and removed assertaddedandremoved imports string string java util vector string java lang math min java lang math max string imports add import addimport java util vector imports add static import addstaticimport pack assert added and removed assertaddedandremoved imports string string string java lang math min java lang math max pack string apply imports buf string buffer stringbuffer buf append pack buf append buf append java lang math max buf append java lang math min buf append pack buf append buf append java util vector buf append buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring test package info testpackageinfo exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append buf append pack i compilation unit icompilationunit pack create compilation unit createcompilationunit info java buf to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport foo bar apply imports buf string buffer stringbuffer buf append buf append pack buf append buf append foo bar assert equal string assertequalstring get source getsource buf to string tostring test bug testbug core exception coreexception backing store exception backingstoreexception malformed tree exception malformedtreeexception bad location exception badlocationexception i compilation unit icompilationunit units i compilation unit icompilationunit i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment bug string buffer stringbuffer buf string buffer stringbuffer buf append bug buf append buf append enum case type casetype buf append to ne tone buf append tstatic case type casetype buf append units pack create compilation unit createcompilationunit case type casetype java buf to string tostring buf string buffer stringbuffer buf append bug buf append enum share level sharelevel units pack create compilation unit createcompilationunit share level sharelevel java buf to string tostring buf string buffer stringbuffer buf append bug buf append bug buf append share level sharelevel create control createcontrol buf append case type casetype cat buf append cat hash code hashcode buf append share level sharelevel temp buf append temp buf append buf append units pack create compilation unit createcompilationunit bug java buf to string tostring import rewrite importrewrite imports new imports rewrite newimportsrewrite units string imports add static import addstaticimport bug case type casetype imports add static import addstaticimport bug share level sharelevel apply imports buf string buffer stringbuffer buf append bug buf append bug case type casetype buf append bug share level sharelevel buf append bug buf append share level sharelevel create control createcontrol buf append case type casetype cat buf append cat hash code hashcode buf append share level sharelevel temp buf append temp buf append buf append assert equal string assertequalstring units get source getsource buf to string tostring expects comments var iety variety positions declarations preserved restore existing imports restoreexistingimports test add imports testaddimports bug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack buf append buf append floating comment buf append buf append java util array list arraylist trailing comment buf append buf append floating comment imports buf append buf append preceding comment buf append java util collection buf append comment imports buf append java util deque buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports add import addimport java util array list arraylist imports add import addimport java util collection imports add import addimport java util deque apply imports buf string buffer stringbuffer buf append pack buf append buf append floating comment buf append buf append java util array list arraylist trailing comment buf append buf append floating comment imports buf append buf append preceding comment buf append java util collection buf append comment imports buf append java util deque buf append buf append buf append assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer imports group separated comment buf append pack java util test java util map entry comment java util map something else somethingelse commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java print writer printwriter apply imports buf string buffer stringbuffer buf append pack java java util test java util map entry comment java util map something else somethingelse commen main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer imports group buf append pack comment java util test java util map entry test java util map something else somethingelse commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java print writer printwriter apply imports buf string buffer stringbuffer buf append pack java comment java util test java util map entry test java util map something else somethingelse commen main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer imports group leading trailing comments buf append pack comment lead java util test lead java util map entry test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java print writer printwriter apply imports buf string buffer stringbuffer buf append pack java comment lead java util test lead java util map entry test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi remove imports preserve comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment lead java util test lead java util map entry test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java print writer printwriter apply imports buf string buffer stringbuffer buf append pack java main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer imports group leading trailing comments demand imports group buf append pack comment lead java util test lead java util map test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java print writer printwriter apply imports buf string buffer stringbuffer buf append pack java comment lead java util test lead java util map test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi remove imports preserve comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment lead java util hash map hashmap test lead java util map test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java print writer printwriter apply imports buf string buffer stringbuffer buf append pack java main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer imports group scattered leading trailing comments adding demand belonging group buf append pack comment lead java util test lead java print writer printwriter test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util map apply imports buf string buffer stringbuffer java util map java util assigned comments java util map something else somethingelse buf append pack comment lead java util test lead test commen java util map lead java print writer printwriter test main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer imports group leading trailing comments adding demand belonging group buf append pack comment lead java print writer printwriter test lead java util test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util map apply imports java util map takes place java util map something else somethingelse comments reassigned buf string buffer stringbuffer buf append pack comment lead java print writer printwriter test lead java util test lead test commen java util map main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi folded existing to uching touching comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment lead java print writer printwriter test lead java util test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util map apply imports buf string buffer stringbuffer buf append pack lead java util test main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi remove imports preserve comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment lead java util test lead java print writer printwriter test lead java util map something else somethingelse test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util map apply imports java util map takes place java util map something else somethingelse comments reassigned buf string buffer stringbuffer buf append pack lead test commen java util map main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi folded existing deleting comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment lead java print writer printwriter test lead java util map test commen main string args hash map hashmap map entry entry print writer printwriter system println i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment lead java print writer printwriter test lead test commen java util main string args hash map hashmap map entry entry print writer printwriter system println assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi sep arating separating comment prevent folding test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack java util map comment leading map entry java util map entry main string args hash map hashmap map entry entry i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java javax org import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack java util comment leading map entry java util map entry main string args hash map hashmap map entry entry assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment list java awt list test serializable java serializable test hash map hashmap java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java awt java java util import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment list java awt list test serializable java serializable test hash map hashmap java util hash map hashmap test commen serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move java awt list test don move java serializable test don move java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment don move test java awt don move test java don move test commen java util serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi leading trailing comments move imports comments stay test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi leading trailing comments move imports comments stay test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi leading trailing comments move imports folded comments stay test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment don move lead test java awt don move lead test don move java don move lead test commen java util serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi adding preserve comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment don move lead test java awt don move lead test commen java util serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi adding disturb comments group test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java print writer printwriter imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead test don move java don move lead java util hash map hashmap test commen serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi removing preserve comments adding disturb existing comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java print writer printwriter imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment don move lead java awt list test java print writer printwriter don move lead java util hash map hashmap test commen serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi folding imports newly preserve comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java print writer printwriter imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead test don move java don move lead java util hash map hashmap test commen serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi folding imports newly preserve comments test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment list lead java awt list test serializable lead java serializable test serializable lead java print writer printwriter test print writer printwriter don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java print writer printwriter imports add import addimport java util hash map hashmap apply imports buf string buffer stringbuffer buf append pack comment list lead java awt list test serializable lead test serializable lead test print writer printwriter java don move lead java util hash map hashmap test commen serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi ordering imports converting test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args list list map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java awt java util java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java serializable imports add import addimport java util hash map hashmap apply imports string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead test java awt lead test commen java util don move lead test don move don move java serializable main string args list list map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi preserve comments imports removed res to ring restoring imports enabled test org eclipse jdt internal core dom rewrite import rewrite analyzer importrewriteanalyzer remove import removeimport string test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports remove import removeimport java awt list apply imports buf string buffer stringbuffer buf append pack don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi preserve comments imports removed res to ring restoring imports enabled test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test list don move lead java serializable test don move don move lead java util hash map hashmap test commen serializable main string args map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports remove import removeimport java awt list imports add import addimport java util list apply imports buf string buffer stringbuffer buf append pack don move lead java serializable test don move don move lead java util hash map hashmap test commen java util list serializable main string args map assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi preserve comments imports unfolded test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt test list don move lead java test don move don move lead java util test commen serializable main string args hash map hashmap print writer printwriter list i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java print writer printwriter imports add import addimport java serializable imports add import addimport java util hash map hashmap imports add import addimport java util map apply imports buf string buffer stringbuffer buf append pack comment don move lead test list java awt list don move lead test don move java print writer printwriter java serializable don move lead test commen java util hash map hashmap java util map serializable main string args hash map hashmap print writer printwriter list assert equal string assertequalstring get source getsource buf to string tostring https bugs eclipse org bugs bug cgi preserve comments imports folded member type test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string buffer stringbuffer buf string buffer stringbuffer buf append pack comment don move lead java awt list test list don move lead java util hash map hashmap test don move map entry java util map entry member type map entry don move lead java serializable test commen serializable main string args map i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring string order string java java util pack import rewrite importrewrite imports new imports rewrite newimportsrewrite order imports set use context to filter implicit imports setusecontexttofilterimplicitimports imports add import addimport java awt list imports add import addimport java util hash map hashmap imports add import addimport java util map entry imports add import addimport java serializable apply imports buf string buffer stringbuffer buf append pack comment don move lead test list java awt don move lead test commen java don move lead test don move java util map entry member type map entry java util map serializable main string args map assert equal string assertequalstring get source getsource buf to string tostring test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string contents pack i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents ast parser astparser parser ast parser astparser new parser newparser ast jls parser set source setsource parser set resolve bindings setresolvebindings parser set statements recovery setstatementsrecovery compilation unit compilationunit ast root astroot compilation unit compilationunit parser createast type declaration typedeclaration type declaration typedeclaration type declaration typedeclaration ast root astroot types i type binding itypebinding type binding typebinding type declaration typedeclaration resolve binding resolvebinding contents pack i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack pack create compilation unit createcompilationunit java contents import rewrite importrewrite rewrite new imports rewrite newimportsrewrite string rewrite set use context to filter implicit imports setusecontexttofilterimplicitimports type actual type actualtype rewrite add import addimport type binding typebinding ast root astroot getast assert equals assertequals pack actual type actualtype to string tostring test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack string contents pack i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents ast parser astparser parser ast parser astparser new parser newparser ast jls parser set source setsource parser set resolve bindings setresolvebindings parser set statements recovery setstatementsrecovery compilation unit compilationunit ast root astroot compilation unit compilationunit parser createast type declaration typedeclaration type declaration typedeclaration type declaration typedeclaration ast root astroot types i type binding itypebinding type binding typebinding type declaration typedeclaration resolve binding resolvebinding contents pack i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment pack parser set source setsource pack create compilation unit createcompilationunit java contents compilation unit compilationunit ast root astroot compilation unit compilationunit parser createast import rewrite importrewrite rewrite import rewrite importrewrite create ast root astroot rewrite set use context to filter implicit imports setusecontexttofilterimplicitimports type actual type actualtype rewrite add import addimport type binding typebinding ast root astroot getast assert equals assertequals pack actual type actualtype to string tostring i compilation unit icompilationunit create compilation unit createcompilationunit string package name packagename string class name classname java model exception javamodelexception string buffer stringbuffer contents string buffer stringbuffer contents append package name packagename contents append contents append class name classname create compilation unit createcompilationunit package name packagename class name classname contents to string tostring i compilation unit icompilationunit create compilation unit createcompilationunit string package name packagename string class name classname string contents java model exception javamodelexception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment package name packagename i compilation unit icompilationunit pack create compilation unit createcompilationunit class name classname java contents force assert added and removed assertaddedandremoved import rewrite importrewrite imports string expected added expectedadded string expected removed expectedremoved string expected added static expectedaddedstatic string expected removed static expectedremovedstatic assert equal strings ignore order assertequalstringsignoreorder imports get added imports getaddedimports expected added expectedadded assert equal strings ignore order assertequalstringsignoreorder imports get added static imports getaddedstaticimports expected added static expectedaddedstatic assert equal strings ignore order assertequalstringsignoreorder imports get removed imports getremovedimports expected removed expectedremoved assert equal strings ignore order assertequalstringsignoreorder imports get removed static imports getremovedstaticimports expected removed static expectedremovedstatic assert equal string assertequalstring string actual string expected string asserts stringasserts assert equal string assertequalstring actual expected assert equal strings ignore order assertequalstringsignoreorder string actual string expecteds string asserts stringasserts assert equal strings ignore order assertequalstringsignoreorder actual expecteds assert equal string ignore delim assertequalstringignoredelim string actual string expected i o exception ioexception string asserts stringasserts assert equal string ignore delim assertequalstringignoredelim actual expected import rewrite importrewrite new imports rewrite newimportsrewrite i compilation unit icompilationunit string order normal threshold normalthreshold static threshold staticthreshold restore existing imports restoreexistingimports core exception coreexception backing store exception backingstoreexception import rewrite importrewrite rewrite import rewrite importrewrite create restore existing imports restoreexistingimports rewrite set import order setimportorder order rewrite set on demand import threshold setondemandimportthreshold normal threshold normalthreshold rewrite set static on demand import threshold setstaticondemandimportthreshold static threshold staticthreshold rewrite import rewrite importrewrite new imports rewrite newimportsrewrite compilation unit compilationunit string order normal threshold normalthreshold static threshold staticthreshold restore existing imports restoreexistingimports import rewrite importrewrite rewrite import rewrite importrewrite create restore existing imports restoreexistingimports rewrite set import order setimportorder order rewrite set on demand import threshold setondemandimportthreshold normal threshold normalthreshold rewrite set static on demand import threshold setstaticondemandimportthreshold static threshold staticthreshold rewrite apply import rewrite importrewrite rewrite core exception coreexception malformed tree exception malformedtreeexception bad location exception badlocationexception text edit textedit edit rewrite rewrite imports rewriteimports efficient i compilation unit icompilationunit compilation unit compilationunit rewrite get compilation unit getcompilationunit document document document compilation unit compilationunit get source getsource edit apply document compilation unit compilationunit get buffer getbuffer set contents setcontents document