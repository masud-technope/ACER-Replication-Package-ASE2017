copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core dom org eclipse jdt core compiler char operation charoperation org eclipse jdt core compiler invalid input exception invalidinputexception org eclipse jdt internal compiler parser scanner org eclipse jdt internal compiler parser terminal tokens terminaltokens org eclipse jdt internal compiler util util internal associating comments ast nodes default comment mapper defaultcommentmapper comment comments scanner scanner extended nodes storage leading ptr leadingptr ast node astnode leading nodes leadingnodes leading indexes leadingindexes trailing ptr trailingptr last trailing ptr lasttrailingptr ast node astnode trailing nodes trailingnodes trailing indexes trailingindexes storage increment param table table comments default comment mapper defaultcommentmapper comment table comments table has same table hassametable comment table comments table comment list includes position param position position belonging looked comment comment includes position comment get comment getcomment position comments size comments length size get comment index getcommentindex position comments comment position matching comment depends exact parameter comment position comment position get comment index getcommentindex start position exact position comments length comments get start position getstartposition bottom start top comments length comment comment bottom top bottom top bottom comment comments comment start commentstart comment get start position getstartposition position comment start commentstart top position comment start commentstart comment get length getlength bottom exact comment comments position comment get start position getstartposition exact exact returns extended start position node link ast node astnode get start position getstartposition link ast node astnode get length getlength extended source range include comments whitespace normal source range node param node node based character code code source position recorded node get extended length getextendedlength ast node astnode get extended start position getextendedstartposition ast node astnode node leading ptr leadingptr range range leading ptr leadingptr leading nodes leadingnodes node range leading indexes leadingindexes range comments range get start position getstartposition node get start position getstartposition search number specific position range inclusive param position par em parem line range linerange size get line number getlinenumber position line range linerange line ends lineends scanner line ends lineends length line ends lineends length util get line number getlinenumber position line ends lineends line range linerange length length line range linerange line range linerange length length line range linerange returns extended position node get extended end getextendedend ast node astnode node node get start position getstartposition node get length getlength trailing ptr trailingptr range range trailing ptr trailingptr trailing nodes trailingnodes node range trailing indexes trailingindexes range comment last comment lastcomment comments range last comment lastcomment get start position getstartposition last comment lastcomment get length getlength returns extended source length node link ast node astnode get start position getstartposition link ast node astnode get length getlength extended source range include comments whitespace normal source range node param node node length code code source position recorded node get extended start position getextendedstartposition ast node astnode get extended end getextendedend ast node astnode get extended length getextendedlength ast node astnode node get extended end getextendedend node get extended start position getextendedstartposition node leading comment node param node leading comment node leading comment first leading comment index firstleadingcommentindex ast node astnode node leading ptr leadingptr leading ptr leadingptr leading nodes leadingnodes node leading indexes leadingindexes trailing comment node param node trailing comment node trailing comment last trailing comment index lasttrailingcommentindex ast node astnode node trailing ptr trailingptr trailing ptr trailingptr trailing nodes trailingnodes node trailing indexes trailingindexes initialize leading trailing comments tab les tables nodes hierarchy compilation unit scanner scan nodes comments verify white spaces initialize compilation unit compilationunit unit scanner init array point ers pointers leading ptr leadingptr trailing ptr trailingptr init comments comments unit optional comment table optionalcommenttable comments size comments length size init scanner start ranges computing scanner scanner tokenize white space tokenizewhitespace start unit visit defaultastvisitor comment visitor commentvisitor comment mapper visitor commentmappervisitor unit accept comment visitor commentvisitor reduce leading arrays leading count leadingcount leading ptr leadingptr leading count leadingcount leading count leadingcount leading indexes leadingindexes length system arraycopy leading nodes leadingnodes leading nodes leadingnodes ast node astnode leading count leadingcount leading count leadingcount system arraycopy leading indexes leadingindexes leading indexes leadingindexes leading count leadingcount leading count leadingcount reduce trailing arrays trailing ptr trailingptr remove remaining unresolved nodes trailing indexes trailingindexes trailing ptr trailingptr trailing ptr trailingptr trailing ptr trailingptr trailing indexes trailingindexes trailing nodes trailingnodes reduce array size trailing count trailingcount trailing ptr trailingptr trailing count trailingcount trailing count trailingcount trailing indexes trailingindexes length system arraycopy trailing nodes trailingnodes trailing nodes trailingnodes ast node astnode trailing count trailingcount trailing count trailingcount system arraycopy trailing indexes trailingindexes trailing indexes trailingindexes trailing count trailingcount trailing count trailingcount release scanner unit visit scanner search store node leading comments comments searched position range previous extended position node start position comment returns comment start position returns node start position starts search comment node start position comment node comment list conditions comment previous comment start previous node start white characters current node comment current node comment comment token remove comments verify assumption leading comments stores indexes leading comments table store leading comments storeleadingcomments ast node astnode node previous end previousend parent line range parentlinerange init extended position node start nodestart node get start position getstartposition extended node start nodestart node start position previous end line previousendline get line number getlinenumber previous end previousend parent line range parentlinerange node start line nodestartline get line number getlinenumber node start nodestart parent line range parentlinerange find comment idx get comment index getcommentindex node start nodestart idx node start nodestart potential comments start idx startidx end idx endidx idx previous start previousstart node start nodestart idx previous start previousstart previous end previousend verify comment white spaces start comment node comment comment comments idx comment start commentstart comment get start position getstartposition comment start commentstart comment get length getlength comment line commentline get line number getlinenumber comment start commentstart parent line range parentlinerange previous end previousend comment line commentline previous end line previousendline comment line commentline node start line nodestartline search condition equals scan previous start previousstart scanner reset to resetto previous start previousstart token scanner get next token getnexttoken token terminal tokens terminaltokens tokennamewhitespace scanner current position currentposition previous start previousstart comment fails extended position fact idx end idx endidx node start nodestart invalid input exception invalidinputexception node start nodestart verify node comments gap scanner get current identifier source getcurrentidentifiersource nbr line nbrline pos pos char operation charoperation index of indexof gap pos nbr line nbrline nbr line nbrline search condition store previous infos previous start previousstart comment start commentstart start idx startidx idx start idx startidx verify token leading comment comment start commentstart comments start idx startidx get start position getstartposition previous end previousend comment start commentstart previous end line previousendline node start line nodestartline last token end lasttokenend previous end previousend scanner reset to resetto previous end previousend comment start commentstart scanner current position currentposition comment start commentstart scanner get next token getnexttoken terminal tokens terminaltokens tokennamewhitespace last token end lasttokenend scanner get current token end position getcurrenttokenendposition invalid input exception invalidinputexception last token line lasttokenline get line number getlinenumber last token end lasttokenend parent line range parentlinerange length comments length start idx startidx length last token line lasttokenline get line number getlinenumber comments start idx startidx get start position getstartposition parent line range parentlinerange node start line nodestartline last token line lasttokenline start idx startidx store leading comments indexes start idx startidx end idx endidx leading ptr leadingptr leading nodes leadingnodes ast node astnode storage increment leading indexes leadingindexes storage increment leading ptr leadingptr leading nodes leadingnodes length new length newlength leading ptr leadingptr storage increment system arraycopy leading nodes leadingnodes leading nodes leadingnodes ast node astnode new length newlength leading ptr leadingptr system arraycopy leading indexes leadingindexes leading indexes leadingindexes new length newlength leading ptr leadingptr leading nodes leadingnodes leading ptr leadingptr node leading indexes leadingindexes leading ptr leadingptr start idx startidx end idx endidx extended comments end idx endidx get start position getstartposition extended search store node trailing comments comments searched position range node position start comment returns comment position returns node position starts search comment node position comment node comment list conditions comment start start white characters current node comment current node comment potential comments separated node remove comments verify assumption note verification applicable node trailing comments stores indexes trailing comments table store trailing comments storetrailingcomments ast node astnode node next start nextstart last child lastchild parent line range parentlinerange init extended position node end nodeend node get start position getstartposition node get length getlength node end nodeend next start nextstart special child parent trailing ptr trailingptr trailing nodes trailingnodes ast node astnode storage increment trailing indexes trailingindexes storage increment last trailing ptr lasttrailingptr trailing ptr trailingptr trailing nodes trailingnodes length new length newlength trailing ptr trailingptr storage increment system arraycopy trailing nodes trailingnodes trailing nodes trailingnodes ast node astnode new length newlength trailing ptr trailingptr system arraycopy trailing indexes trailingindexes trailing indexes trailingindexes new length newlength trailing ptr trailingptr trailing nodes trailingnodes trailing ptr trailingptr node trailing indexes trailingindexes trailing ptr trailingptr node end nodeend extended node end nodeend number node end line nodeendline get line number getlinenumber node end nodeend parent line range parentlinerange find comments range idx get comment index getcommentindex node end nodeend idx node end nodeend potential comments start idx startidx idx end idx endidx length comments length comment start commentstart extended previous end previousend node end nodeend same line idx samelineidx idx length comment start commentstart next start nextstart comment leave starting position reached comment comment comments idx comment start commentstart comment get start position getstartposition verify white spaces node comments comment start commentstart next start nextstart search condition previous end previousend comment start commentstart scanner reset to resetto previous end previousend comment start commentstart token scanner get next token getnexttoken token terminal tokens terminaltokens tokennamewhitespace scanner current position currentposition comment start commentstart fails extended position fact idx start idx startidx node end nodeend trailing comment invalid input exception invalidinputexception node end nodeend verify node comments gap scanner get current identifier source getcurrentidentifiersource nbr line nbrline pos pos char operation charoperation index of indexof gap pos nbr line nbrline nbr line nbrline search condition store node comment line commentline get line number getlinenumber comment start commentstart parent line range parentlinerange comment line commentline node end line nodeendline same line idx samelineidx idx store previous infos previous end previousend comment start commentstart comment get length getlength end idx endidx idx end idx endidx verify node start separated last child lastchild next line nextline get line number getlinenumber next start nextstart parent line range parentlinerange previous line previousline get line number getlinenumber previous end previousend parent line range parentlinerange next line nextline previous line previousline same line idx samelineidx node end nodeend end idx endidx same line idx samelineidx store trailing comments indexes trailing ptr trailingptr trailing nodes trailingnodes ast node astnode storage increment trailing indexes trailingindexes storage increment last trailing ptr lasttrailingptr trailing ptr trailingptr trailing nodes trailingnodes length new length newlength trailing ptr trailingptr storage increment system arraycopy trailing nodes trailingnodes trailing nodes trailingnodes ast node astnode new length newlength trailing ptr trailingptr system arraycopy trailing indexes trailingindexes trailing indexes trailingindexes new length newlength trailing ptr trailingptr trailing nodes trailingnodes trailing ptr trailingptr node node range noderange start idx startidx end idx endidx trailing indexes trailingindexes trailing ptr trailingptr node range noderange compute extended extended comments end idx endidx get start position getstartposition comments end idx endidx get length getlength children unresolved extended ast node astnode previous node previousnode node children extended stored ptr trailing ptr trailingptr ptr range trailing indexes trailingindexes ptr unresolved nodes range ast node astnode unresolved trailing nodes trailingnodes ptr longer node ancestor hierarchy previous node previousnode unresolved get parent getparent trailing indexes trailingindexes ptr node range noderange previous node previousnode unresolved previous node ptr remove remaining unresolved nodes ptr last trailing ptr lasttrailingptr offset ptr last trailing ptr lasttrailingptr ptr trailing ptr trailingptr trailing nodes trailingnodes offset trailing nodes trailingnodes trailing indexes trailingindexes offset trailing indexes trailingindexes trailing ptr trailingptr offset last trailing ptr lasttrailingptr trailing ptr trailingptr extended comment mapper visitor commentmappervisitor defaultastvisitor ast node astnode top sibling parent topsiblingparent ast node astnode siblings ast node astnode parent line range parentlinerange sibling ptr siblingptr visit node visitnode ast node astnode node previous ast node astnode parent node get parent getparent previous end previousend parent get start position getstartposition sibling node ast node astnode sibling parent top sibling parent topsiblingparent ast node astnode siblings sibling ptr siblingptr sibling previous sibling compute trailing comments current node start position previous end previousend store trailing comments storetrailingcomments sibling node get start position getstartposition parent line range parentlinerange sibling ptr siblingptr exception visit malformed node bug https bugs eclipse org bugs bug cgi node type and flags typeandflags ast node astnode malformed compute leading comments current node previous line range previouslinerange sibling ptr siblingptr parent line range parentlinerange sibling ptr siblingptr default comment mapper defaultcommentmapper scanner line ptr lineptr store leading comments storeleadingcomments node previous end previousend previous line range previouslinerange exception store current node waiting sibling parent top sibling parent topsiblingparent parent siblings length sibling ptr siblingptr system arraycopy siblings siblings ast node astnode sibling ptr siblingptr sibling ptr siblingptr system arraycopy parent line range parentlinerange parent line range parentlinerange sibling ptr siblingptr sibling ptr siblingptr top sibling parent topsiblingparent node compilation unit compilationunit parent line range parentlinerange sibling ptr siblingptr previous line range previouslinerange parent start parentstart parent get start position getstartposition first line firstline get line number getlinenumber parent start parentstart previous line range previouslinerange last line lastline get line number getlinenumber parent start parentstart parent get length getlength previous line range previouslinerange parent line range parentlinerange sibling ptr siblingptr parent line range parentlinerange sibling ptr siblingptr first line firstline last line lastline line range linerange parent line range parentlinerange sibling ptr siblingptr line range linerange first line firstline line range linerange last line lastline top sibling parent topsiblingparent parent siblings sibling ptr siblingptr node visit levels end visit node endvisitnode ast node astnode node child node waiting trailing comments computing ast node astnode sibling top sibling parent topsiblingparent node ast node astnode siblings sibling ptr siblingptr sibling store trailing comments storetrailingcomments sibling node get start position getstartposition node get length getlength parent line range parentlinerange sibling ptr siblingptr exception remove sibling needed top sibling parent topsiblingparent compilation unit compilationunit top sibling parent topsiblingparent node sibling ptr siblingptr top sibling parent topsiblingparent node get parent getparent visit modifier modifier don map comment modifier visit compilation unit compilationunit node special levels