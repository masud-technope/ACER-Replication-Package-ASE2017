copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors tyeung bea initial api implementation org eclipse jdt apt tests java file java util hash set hashset junit framework test junit framework test suite testsuite org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core runtime i path ipath org eclipse core runtime path org eclipse jdt apt tests annotations read annotation readannotation code example codeexample org eclipse jdt apt tests plugin apt tests plugin apttestsplugin org eclipse jdt core binding key bindingkey org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java project ijavaproject org eclipse jdt core dom ast org eclipse jdt core dom ast parser astparser org eclipse jdt core dom ast requestor astrequestor org eclipse jdt core dom i annotation binding iannotationbinding org eclipse jdt core dom i binding ibinding org eclipse jdt core dom i method binding imethodbinding org eclipse jdt core dom i type binding itypebinding org eclipse jdt core dom i variable binding ivariablebinding org eclipse jdt core tests builder builder tests buildertests org eclipse jdt core tests util util test dom layer annotation support apt involved author tyeung read annotation tests readannotationtests builder tests buildertests string annotations string i compilation unit icompilationunit unit i compilation unit icompilationunit counter string project name projectname read annotation tests readannotationtests string test suite test suite testsuite read annotation tests readannotationtests string get project name getprojectname project name projectname string get unique project name getuniqueprojectname nls project name projectname read annotation tests readannotationtests get name getname project counter counter project name projectname i path ipath get source path getsourcepath i project iproject project env get project getproject get project name getprojectname nls i folder ifolder src folder srcfolder project get folder getfolder src i path ipath src root srcroot src folder srcfolder get full path getfullpath src root srcroot i path ipath get binary path getbinarypath i project iproject project env get project getproject get project name getprojectname nls i folder ifolder src folder srcfolder project get folder getfolder binary i path ipath lib src folder srcfolder get full path getfullpath lib i path ipath get output path getoutputpath i project iproject project env get project getproject get project name getprojectname nls i folder ifolder bin folder binfolder project get folder getfolder bin i path ipath bin bin folder binfolder get full path getfullpath bin add all sources addallsources i path ipath src root srcroot get source path getsourcepath simple annotation simpleannotation java env add class addclass src root srcroot code example codeexample question code example codeexample simple annotation code example codeexample simple annotation code rt visible annotation rtvisibleannotation java env add class addclass src root srcroot code example codeexample question code example codeexample rtvisible code example codeexample rtvisible annotation code rt invisible annotation rtinvisibleannotation java env add class addclass src root srcroot code example codeexample question code example codeexample rtinvisible code example codeexample rtinvisible annotation code info java env add class addclass src root srcroot code example codeexample question code example codeexample info code example codeexample info code color java env add class addclass src root srcroot code example codeexample question code example codeexample color code example codeexample color code annotation test annotationtest java env add class addclass src root srcroot code example codeexample question code example codeexample annotation test code example codeexample annotation test code i project iproject setup test setuptest exception project deleted tear down teardown method nls i path ipath project path projectpath env add project addproject get unique project name getuniqueprojectname nls env set output folder setoutputfolder project path projectpath bin env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs i java project ijavaproject jproj env get java project getjavaproject project path projectpath jproj set option setoption org eclipse jdt core compiler problem deprecation ignore remove fragment root names don collide nls env remove package fragment root removepackagefragmentroot project path projectpath nls env add package fragment root addpackagefragmentroot project path projectpath src env get project getproject get project name getprojectname test source annotation testsourceannotation exception reset error reset error i project iproject project setup test setuptest add all sources addallsources full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems test annotations testannotations test binary annotation testbinaryannotation exception i project iproject project setup test setuptest file jar test util testutil get file in plugin getfileinplugin apt tests plugin apttestsplugin get default getdefault nls path nls resources question jar string path jar get absolute path getabsolutepath env add external jar addexternaljar project get full path getfullpath path full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems test annotations testannotations i type binding itypebinding get type binding gettypebinding string key i java project ijavaproject java proj javaproj binding requestor bindingrequestor ast requestor astrequestor i type binding itypebinding result accept binding acceptbinding string binding key bindingkey i binding ibinding binding binding binding get kind getkind i binding ibinding type result i type binding itypebinding binding binding requestor bindingrequestor requestor binding requestor bindingrequestor ast parser astparser parser ast parser astparser new parser newparser ast jls parser set resolve bindings setresolvebindings parser set project setproject java proj javaproj parser set ignore method bodies setignoremethodbodies parser createasts unit string key requestor requestor result test annotations testannotations string type key typekey binding key bindingkey create type binding key createtypebindingkey question annotation test annotationtest i type binding itypebinding type binding typebinding get type binding gettypebinding type key typekey env get java project getjavaproject get project name getprojectname assert not null assertnotnull failed locate question annotation test annotationtest type binding typebinding assert equals assertequals type mismatch question annotation test annotationtest type binding typebinding get qualified name getqualifiedname test annotation string expected pkg annos expectedpkgannos string deprecated assert annotation assertannotation expected pkg annos expectedpkgannos type binding typebinding get package getpackage get annotations getannotations test annotation type string expected type annos expectedtypeannos string deprecated rt visible anno rtvisibleanno anno simple annotation simpleannotation test clazzes rt invisible anno rtinvisibleanno question assert annotation assertannotation expected type annos expectedtypeannos type binding typebinding get annotations getannotations i variable binding ivariablebinding field bindings fieldbindings type binding typebinding get declared fields getdeclaredfields counter assert equals assertequals field bindings fieldbindings length i variable binding ivariablebinding field decl fielddecl field bindings fieldbindings string field counter assert equals assertequals field mismatch field decl fielddecl get name getname string expected counter expected string rt visible anno rtvisibleanno foundation bool value boolvalue byte value bytevalue char value charvalue double value doublevalue float value floatvalue int value intvalue long value longvalue short value shortvalue colors question color red question color blue anno simple annotation simpleannotation core simple annos simpleannos simple annotation simpleannotation org simple annotation simpleannotation eclipse simple annotation simpleannotation jdt clazzes object string clazz object rt invisible anno rtinvisibleanno org eclipse jdt core deprecated expected string deprecated expected string rt visible anno rtvisibleanno anno simple annotation simpleannotation field clazzes rt invisible anno rtinvisibleanno expected string rt invisible anno rtinvisibleanno expected string simple annotation simpleannotation expected annotations assert annotation assertannotation expected field decl fielddecl get annotations getannotations counter i method binding imethodbinding method bindings methodbindings type binding typebinding get declared methods getdeclaredmethods counter assert equals assertequals method bindings methodbindings length i method binding imethodbinding method decl methoddecl method bindings methodbindings string method counter assert equals assertequals method mismatch method decl methoddecl get name getname string expected counter expected string rt visible anno rtvisibleanno anno simple annotation simpleannotation method clazzes rt invisible anno rtinvisibleanno deprecated expected string deprecated expected string rt visible anno rtvisibleanno anno simple annotation simpleannotation method clazzes rt invisible anno rtinvisibleanno expected string rt invisible anno rtinvisibleanno expected string simple annotation simpleannotation method expected annotations assert annotation assertannotation expected method decl methoddecl get annotations getannotations counter num parameters numparameters method decl methoddecl get parameter types getparametertypes length p counter pcounter p counter pcounter num parameters numparameters p counter pcounter string expected param annotations expectedparamannotations p counter pcounter expected param annotations expectedparamannotations string deprecated expected param annotations expectedparamannotations string rt visible anno rtvisibleanno anno simple annotation simpleannotation param clazzes rt invisible anno rtinvisibleanno expected param annotations expectedparamannotations annotations assert annotation assertannotation expected param annotations expectedparamannotations method decl methoddecl get parameter annotations getparameterannotations p counter pcounter counter assert annotation assertannotation string expected i annotation binding iannotationbinding annotations expected len expectedlen expected length nls assert equals assertequals annotation number mismatch expected length annotations length hash set hashset string expected set expectedset hash set hashset string expected len expectedlen expected len expectedlen expected set expectedset add expected counter i annotation binding iannotationbinding mirror annotations counter expected len expectedlen assert equals assertequals nls nls mirror to string tostring string mirror to string mirrortostring mirror to string tostring expected set expectedset mirror to string mirrortostring system err println mirror to string mirrortostring system err println expected set expectedset assert true asserttrue nls unexpected annotation mirror to string mirrortostring nls expected set expectedset remove mirror to string mirrortostring counter