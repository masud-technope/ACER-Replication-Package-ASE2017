copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation ibm corporation support org eclipse jdt core org eclipse core runtime i progress monitor iprogressmonitor org eclipse jdt core dom ast parser astparser org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom ast org eclipse jdt core dom i binding ibinding org eclipse text edits text edit textedit org eclipse text edits undo edit undoedit represents entire java compilation unit source file link java core javacore get java like extensions getjavalikeextensions java extensions compilation unit elements opened navigate d navigated manipulated children type link i package declaration ipackagedeclaration link i import container iimportcontainer link i type itype order declared source source file parsed structure remains unknown link i java element ijavaelement is structure known isstructureknown determine noimplement intended implemented clients suppress warnings suppresswarnings deprecation i compilation unit icompilationunit i type root ityperoot i working copy iworkingcopy i source manipulation isourcemanipulation constant indicating reconcile operation ast ast constant indicating reconcile operation recompute problems source has n hasn changed force problem detection constant indicating reconcile operation enable statements recovery ast parser astparser set statements recovery setstatementsrecovery enable statements recovery constant indicating reconcile operation enable bindings recovery ast parser astparser set bindings recovery setbindingsrecovery i binding ibinding is recovered isrecovered enable bindings recovery constant indicating reconcile operation ignore parse method bodies ast parser astparser set ignore method bodies setignoremethodbodies ignore method bodies applies text edit compilation unit buffer note edit simply applied compilation unit buffer undo edit grouped previous undo edits buffer doesn implement link i buffer ibuffer i text edit capability itexteditcapability exact semantics grouping undo edit depends link i buffer ibuffer i text edit capability itexteditcapability apply text edit applytextedit text edit textedit i progress monitor iprogressmonitor implemented param edit edit apply param monitor progress monitor code code progress reported undo edit java model exception javamodelexception edit applied compilation unit buffer reasons include compilation unit exist link i java model status constants ijavamodelstatusconstants element exist edit applied problem text edit locations link i java model status constants ijavamodelstatusconstants bad text edit location undo edit undoedit apply text edit applytextedit text edit textedit edit i progress monitor iprogressmonitor monitor java model exception javamodelexception compilation unit handle working copy link i buffer ibuffer created compilation unit handle owner primary owner compilation unit handle created switching working copy mode problems reported link i problem requestor iproblemrequestor note working copy mode link i problem requestor iproblemrequestor original link i problem requestor iproblemrequestor report subsequent problems working copy mode compilation unit children memory buffer link commit working copy commitworkingcopy i progress monitor iprogressmonitor bring underlying resource sync compilation unit compilation unit working copy mode internal counter inc remented incremented action compilation unit bring compilation unit original mode ref lects reflects underlying resource link discard working copy discardworkingcopy call times link become working copy becomeworkingcopy i problem requestor iproblemrequestor i progress monitor iprogressmonitor param problem requestor problemrequestor requestor not ified notified problems detected reconciling discovered requestor code code indicating client int erested interested problems param monitor progress monitor report progress opening compilation unit code code progress reported java model exception javamodelexception compilation unit working copy discard working copy discardworkingcopy deprecated link become working copy becomeworkingcopy i progress monitor iprogressmonitor note deprecated method problems reported problem requestor problem requestor returned working copy owner become working copy becomeworkingcopy i problem requestor iproblemrequestor problem requestor problemrequestor i progress monitor iprogressmonitor monitor java model exception javamodelexception compilation unit handle working copy link i buffer ibuffer created compilation unit handle owner primary owner compilation unit handle created switching working copy mode problems reported link i problem requestor iproblemrequestor problem requestor link working copy owner workingcopyowner working copy owner working copy mode compilation unit children memory buffer link commit working copy commitworkingcopy i progress monitor iprogressmonitor bring underlying resource sync compilation unit compilation unit working copy mode internal counter inc remented incremented action compilation unit bring compilation unit original mode ref lects reflects underlying resource link discard working copy discardworkingcopy call times link become working copy becomeworkingcopy i problem requestor iproblemrequestor i progress monitor iprogressmonitor param monitor progress monitor report progress opening compilation unit code code progress reported java model exception javamodelexception compilation unit working copy discard working copy discardworkingcopy become working copy becomeworkingcopy i progress monitor iprogressmonitor monitor java model exception javamodelexception commits contents working copy underlying resource contents original resource changed working copy created update conflict code force code parameter resolution conflict code code contents working copy applied underlying resource working copy created subsequent change resource code code link java model exception javamodelexception thrown working copy created existing compilation unit working copy committed order create compilation unit param force flag handle cases contents original resource changed working copy created param monitor progress monitor java model exception javamodelexception working copy commit reasons include link org eclipse core runtime core exception coreexception occurred updating underlying resource element working copy invalid element types update conflict update conflict commit working copy commitworkingcopy force i progress monitor iprogressmonitor monitor java model exception javamodelexception creates returns declaration compilation unit method equivalent code create import createimport flags acc default accdefault sibling monitor code param declaration add defined jls code java file code code java awt code param sibling existing element declaration inserted code code inserted declaration param monitor progress monitor notify newly inserted declaration existing attempting create duplicate java model exception javamodelexception element created reasons include java element exist sibling exist element exist link org eclipse core runtime core exception coreexception occurred updating underlying resource sibling child compilation unit invalid sibling valid invalid create import createimport string i java element ijavaelement i progress monitor iprogressmonitor i import declaration iimportdeclaration create import createimport string i java element ijavaelement sibling i progress monitor iprogressmonitor monitor java model exception javamodelexception creates returns declaration compilation unit option ally optionally element pos itioned positioned sibling sibling element inserted declaration compilation unit compilation unit includes declaration generated generate duplicates note valid single type demand code java file code code java code preserved semantics importing code java code importing code java lang code compilation unit defined treated special cases included result note api element needed dealing java code language features param declaration add defined jls code java file code code java awt code param sibling existing element declaration inserted code code inserted declaration param flags link flags acc static accstatic imports link flags acc default accdefault regular imports modifier flags param monitor progress monitor notify newly inserted declaration existing attempting create duplicate java model exception javamodelexception element created reasons include java element exist sibling exist element exist link org eclipse core runtime core exception coreexception occurred updating underlying resource sibling child compilation unit invalid sibling valid invalid flags i import declaration iimportdeclaration create import createimport string i java element ijavaelement sibling flags i progress monitor iprogressmonitor monitor java model exception javamodelexception creates returns declaration compilation unit compilation unit includes declaration generated generate duplicates param declaration add defined jls code java lang code param monitor progress monitor notify newly inserted declaration existing attempting create duplicate java model exception javamodelexception element created reasons include java element exist element exist link org eclipse core runtime core exception coreexception occurred updating underlying resource valid invalid i package declaration ipackagedeclaration create package declaration createpackagedeclaration string i progress monitor iprogressmonitor monitor java model exception javamodelexception creates returns type compilation unit contents compilation unit exist created declaration option ally optionally type pos itioned positioned sibling code sibling code code code type appended compilation unit type exists compilation unit code force code parameter resolution conflict code code type created contents code code link java model exception javamodelexception thrown param contents source contents type declaration add param sibling existing element type inserted code code type inserted type declaration param force code code flag indicating deal duplicates param monitor progress monitor notify newly inserted type java model exception javamodelexception element created reasons include sibling element exist element exist link org eclipse core runtime core exception coreexception occurred updating underlying resource sibling child compilation unit invalid sibling contents recognized type declaration invalid contents naming collision existing type collision i type itype create type createtype string contents i java element ijavaelement sibling force i progress monitor iprogressmonitor monitor java model exception javamodelexception compilation unit working copy mode original mode compilation unit working copy mode link become working copy becomeworkingcopy i progress monitor iprogressmonitor method called times compilation unit link discard working copy discardworkingcopy called times switches original mode method link get working copy getworkingcopy i progress monitor iprogressmonitor java model exception javamodelexception working copy original mode become working copy becomeworkingcopy i problem requestor iproblemrequestor i progress monitor iprogressmonitor discard working copy discardworkingcopy java model exception javamodelexception finds elements compilation unit correspond element element corresponds element element method number arguments simple names argument types equals parent corresponds parent recursively res pective respective compilation units exists returns code code cases java elements element included compilation unit element lambda expression calling link i type itype is lambda islambda returns element link i local variable ilocalvariable param element element elements compilation unit correspond element i java element ijavaelement find elements findelements i java element ijavaelement element finds working copy compilation unit link working copy owner workingcopyowner working copy created compilation unit working copy owner returns code code use rs users method destroy working copy param owner link working copy owner workingcopyowner working copy compilation unit code code working copy owner workingcopyowner i compilation unit icompilationunit find working copy findworkingcopy working copy owner workingcopyowner owner returns types declared compilation unit order source includes top level types nested member types include local types types defined methods array top level member types defined compilation unit declaration order java model exception javamodelexception element exist exception occurs accessing resource i type itype get all types getalltypes java model exception javamodelexception returns declaration compilation unit handle method declaration exist convenience method imports accessed compilation unit container param find defined jls code java file code code java awt code handle declaration declaration exist i import declaration iimportdeclaration get import getimport string returns container compilation unit handle method container exist container access imports handle container exist i import container iimportcontainer get import container getimportcontainer returns declarations compilation unit order source convenience method declarations accessed compilation unit container declarations compilation unit java model exception javamodelexception element exist exception occurs accessing resource i import declaration iimportdeclaration get imports getimports java model exception javamodelexception returns primary compilation unit owner primary owner working copy created compilation unit primary compilation unit note returned primary compilation unit working copy mode primary compilation unit working copy created compilation unit primary i compilation unit icompilationunit get primary getprimary returns code i compilation unit icompilationunit code primary working copy code i compilation unit icompilationunit code working copy code working copy owner workingcopyowner code code i compilation unit icompilationunit code primary working copy code i compilation unit icompilationunit code working copy code working copy owner workingcopyowner code working copy owner workingcopyowner get owner getowner returns declaration compilation unit declaration handle method declaration exist param declaration defined jls code java lang code declaration compilation unit i package declaration ipackagedeclaration get package declaration getpackagedeclaration string returns declarations compilation unit order source declaration array declaration size java model exception javamodelexception element exist exception occurs accessing resource i package declaration ipackagedeclaration get package declarations getpackagedeclarations java model exception javamodelexception returns top level type declared compilation unit simple type type valid compilation unit handle method type exist param simple requested type compilation unit handle type type exist java conventions javaconventions validate compilation unit name validatecompilationunitname string string source level sourcelevel string compliance level compliancelevel i type itype get type gettype string returns top level types declared compilation unit order source top level types declared compilation unit java model exception javamodelexception element exist exception occurs accessing resource i type itype get types gettypes java model exception javamodelexception returns working copy compilation unit primary compilation unit compilation unit primary working copy note int ending intending share working copy clients link get working copy getworkingcopy working copy owner workingcopyowner i problem requestor iproblemrequestor i progress monitor iprogressmonitor working copy instance created i java element delta ijavaelementdelta reported working copy working copy users method discard link discard working copy discardworkingcopy working copy created existing compilation unit working copy committed order create compilation unit param monitor progress monitor report progress opening compilation unit code code progress reported java model exception javamodelexception contents element determined working copy element element working copy element element working copy i compilation unit icompilationunit get working copy getworkingcopy i progress monitor iprogressmonitor monitor java model exception javamodelexception returns shared working copy compilation unit working copy owner create buffer compilation unit primary working copy api answer existing working copy based original compilation unit working copy owner defined link object equals life time shared working copy call link get working copy getworkingcopy working copy owner workingcopyowner i problem requestor iproblemrequestor i progress monitor iprogressmonitor creates working copy element sub sequent subsequent calls increment internal counter call link discard working copy discardworkingcopy decrements internal counter counter working copy discarded users method discard working copy note working copy owner life time working copy working copy closed reopened owner buffer automatically initialized original compilation unit content creation shared working copy instance created i java element delta ijavaelementdelta reported working copy working copy created existing compilation unit working copy committed order create compilation unit param owner working copy owner creates buffer content working copy param problem requestor problemrequestor requestor not ified notified problems detected reconciling discovered requestor code code indicating client int erested interested problems param monitor progress monitor report progress opening compilation unit code code progress reported java model exception javamodelexception contents element determined working copy element factory create buffer element element working copy deprecated link i type root ityperoot get working copy getworkingcopy working copy owner workingcopyowner i progress monitor iprogressmonitor note deprecated method problems reported passed problem req uester requester problem requestor returned working copy owner i compilation unit icompilationunit get working copy getworkingcopy working copy owner workingcopyowner owner i problem requestor iproblemrequestor problem requestor problemrequestor i progress monitor iprogressmonitor monitor java model exception javamodelexception returns resource working copy changed inc eption inception working copy returns code code compilation unit working copy mode resource changed has resource changed hasresourcechanged returns element working copy element working copy is working copy isworkingcopy reconciles contents working copy sends java delta not ification notification indicating nature change working copy time reconciled consistent link i openable iopenable make consistent makeconsistent i progress monitor iprogressmonitor returns compilation unit ast requested performs reconciliation locally caching contents working copy updating contents creating delta cached contents contents firing delta argument force problem detection working copy consistent functionality working copy owner problem detection references contained working copy resolved units owned working copies precedence original compilation units code code passed primary working copy owner compilation problems contents not ified notified link i problem requestor iproblemrequestor passed creation longer markers note removed changed types generate change deltas requested dom ast representing compilation unit returned bindings computed problem requestor active method returns code code conditions creation dom ast requested requested level ast api supported working copy consistent problem detection for ced forced method doesn perform statements recovery recover statements syntax errors link reconcile working copy owner workingcopyowner i progress monitor iprogressmonitor param ast level astlevel link ast ast wanted link plain linkplain ast newast ast api level ast wanted param force problem detection forceproblemdetection indicating problem recomputed source has n hasn changed param owner owner working copies precedence original compilation units code code primary working copy owner param monitor progress monitor compilation unit ast code code conditions creation dom ast requested requested level ast api supported working copy consistent problem detection for ced forced java model exception javamodelexception contents original element accessed reasons include original java element exist element exist compilation unit compilationunit reconcile ast level astlevel force problem detection forceproblemdetection working copy owner workingcopyowner owner i progress monitor iprogressmonitor monitor java model exception javamodelexception reconciles contents working copy sends java delta not ification notification indicating nature change working copy time reconciled consistent link i openable iopenable make consistent makeconsistent i progress monitor iprogressmonitor returns compilation unit ast requested performs reconciliation locally caching contents working copy updating contents creating delta cached contents contents firing delta argument force problem detection working copy consistent functionality working copy owner problem detection references contained working copy resolved units owned working copies precedence original compilation units code code passed primary working copy owner compilation problems contents not ified notified link i problem requestor iproblemrequestor passed creation longer markers note removed changed types generate change deltas requested dom ast representing compilation unit returned bindings computed problem requestor active method returns code code conditions creation dom ast requested requested level ast api supported working copy consistent problem detection for ced forced statements recovery enabled method rebuild statements syntax error statements syntax error won returning dom ast param ast level astlevel link ast ast wanted link plain linkplain ast newast ast api level ast wanted param force problem detection forceproblemdetection indicating problem recomputed source has n hasn changed param enable statements recovery enablestatementsrecovery code code statements recovery enabled param owner owner working copies precedence original compilation units code code primary working copy owner param monitor progress monitor compilation unit ast code code conditions creation dom ast requested requested level ast api supported working copy consistent problem detection for ced forced java model exception javamodelexception contents original element accessed reasons include original java element exist element exist compilation unit compilationunit reconcile ast level astlevel force problem detection forceproblemdetection enable statements recovery enablestatementsrecovery working copy owner workingcopyowner owner i progress monitor iprogressmonitor monitor java model exception javamodelexception reconciles contents working copy sends java delta not ification notification indicating nature change working copy time reconciled consistent link i openable iopenable make consistent makeconsistent i progress monitor iprogressmonitor returns compilation unit ast requested problem detection for ced forced passing link force problem detection bit reconcile flag problem detection working copy consistent performs reconciliation locally caching contents working copy updating contents creating delta cached contents contents firing delta functionality working copy owner problem detection references contained working copy resolved units owned working copies precedence original compilation units code code passed primary working copy owner compilation problems contents not ified notified link i problem requestor iproblemrequestor passed creation longer markers note removed changed types generate change deltas requested dom ast representing compilation unit returned bindings computed problem requestor active method returns code code conditions creation dom ast requested requested level ast api supported working copy consistent problem detection for ced forced statements recovery enabled passing link enable statements recovery bit reconcile flag method rebuild statements syntax error statements syntax error won returning dom ast bindings recovery enabled passing link enable bindings recovery bit reconcile flag method resolve bindings type resolution errors reconcile flags bit mask constants link enable bindings recovery link enable statements recovery link force problem detection unspecified values left param ast level astlevel link ast ast wanted link plain linkplain ast newast ast api level ast wanted param reconcile flags reconcileflags reconcile flags param owner owner working copies precedence original compilation units code code primary working copy owner param monitor progress monitor compilation unit ast code code conditions creation dom ast requested requested level ast api supported working copy consistent problem detection for ced forced java model exception javamodelexception contents original element accessed reasons include original java element exist element exist force problem detection enable bindings recovery enable statements recovery compilation unit compilationunit reconcile ast level astlevel reconcile flags reconcileflags working copy owner workingcopyowner owner i progress monitor iprogressmonitor monitor java model exception javamodelexception restores contents working copy current contents working copy original element element working copy note inverse commit ting committing content working copy original element link commit working copy commitworkingcopy i progress monitor iprogressmonitor java model exception javamodelexception contents original element accessed reasons include original java element exist element exist restore java model exception javamodelexception