copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors wharley bea initial api implementation org eclipse jdt apt pluggable tests java byte array input stream bytearrayinputstream java input stream inputstream junit framework test junit framework test suite testsuite org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i marker imarker org eclipse core resources i project iproject org eclipse core runtime i path ipath org eclipse jdt apt core util apt config aptconfig org eclipse jdt apt pluggable tests processors filer tester filertester file r tester proc filertesterproc org eclipse jdt core i java project ijavaproject org eclipse jdt core compiler categorized problem categorizedproblem org eclipse jdt core tests builder problem basic tests file r filer ide javax annotation processing file r filer file r tests filertests test base testbase file r tests filertests string test suite test suite testsuite file r tests filertests test generation source file gen class genclass annotation javax annotation processing file r filer create class file createclassfile char sequence charsequence javax lang model element element test create source file testcreatesourcefile throwable temporary work around workaround https bugs eclipse org bugs bug cgi bail linux string os name osname system get property getproperty os name osname os name osname windows i java project ijavaproject jproj create java project createjavaproject project name projectname i project iproject proj jproj get project getproject ide test utils idetestutils copy resources copyresources proj targets file r filer src targets file r filer apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems check generated sources generated compiled expecting file expectingfile proj apt generated gen generated java string expected classes expectedclasses targets file r filer parent gen generated expecting unique compiled classes expectinguniquecompiledclasses expected classes expectedclasses check source resource generated expecting file expectingfile proj apt generated summary txt todo parent file modified generated file regenerated recompiled generated resource file regenerated compiled modify target file remove annotation inc rementally incrementally rebuild generated file deleted ide test utils idetestutils copy resources copyresources proj targets file r filer src targets file r filer incremental build incrementalbuild expecting no problems expectingnoproblems string expected classes expectedclasses targets file r filer parent expecting unique compiled classes expectinguniquecompiledclasses expected classes expectedclasses expecting no file expectingnofile proj apt generated gen generated java expecting no file expectingnofile proj apt generated summary txt test generation source file referenced parent gen class genclass annotation javax annotation processing file r filer create source file createsourcefile char sequence charsequence javax lang model element element test create source file with gen reference testcreatesourcefilewithgenreference throwable temporary work around workaround https bugs eclipse org bugs bug cgi bail linux string os name osname system get property getproperty os name osname os name osname windows i java project ijavaproject jproj create java project createjavaproject project name projectname i project iproject proj jproj get project getproject ide test utils idetestutils copy resources copyresources proj targets file r filer src targets file r filer disable java disablejava factories jproj apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems check generated sources generated compiled expecting file expectingfile proj apt generated gen generated java string expected classes expectedclasses targets file r filer parent gen generated expecting unique compiled classes expectinguniquecompiledclasses expected classes expectedclasses modify target file change generated file inc rementally incrementally rebuild generated file deleted ide test utils idetestutils copy resources copyresources proj targets file r filer src targets file r filer incremental build incrementalbuild i path ipath parent path parentpath proj get full path getfullpath append src targets file r filer parent java expecting only specific problem for expectingonlyspecificproblemfor parent path parentpath problem parent gen generated resolved type parent path parentpath categorized problem categorizedproblem cat type i marker imarker severity error test works java processors apt tests plugin factory path java processors gen generated recompiled deleted string expected classes expectedclasses gen xxx generated xxxgenerated targets file r filer parent expecting unique compiled classes expectinguniquecompiledclasses expected classes expectedclasses expecting no file expectingnofile proj apt generated gen generated java test generation source file referenced parent gen class genclass annotation processor calls get enclosed elements getenclosedelements causing generated type resolved exists test bug testbug throwable temporary work around workaround https bugs eclipse org bugs bug cgi bail linux string os name osname system get property getproperty os name osname os name osname windows i java project ijavaproject jproj create java project createjavaproject project name projectname i project iproject proj jproj get project getproject ide test utils idetestutils copy resources copyresources proj targets file r filer src targets file r filer disable java disablejava factories jproj apt config aptconfig set enabled setenabled jproj full build fullbuild bug lines uncommented test pass i path ipath parent path parentpath proj get full path getfullpath append src targets file r filer parent java problem problem problem parent generated resolved type parent path parentpath categorized problem categorizedproblem cat type i marker imarker severity error expecting only specific problem for expectingonlyspecificproblemfor parent path parentpath problem works expecting no problems expectingnoproblems check generated sources generated compiled expecting file expectingfile proj apt generated gen generated java string expected classes expectedclasses targets file r filer parent gen generated expecting unique compiled classes expectinguniquecompiledclasses expected classes expectedclasses modify target file inc rementally incrementally rebuild file regenerated ide test utils idetestutils copy resources copyresources proj targets file r filer src targets file r filer incremental build incrementalbuild note bug incremental build problems reported expecting no problems expectingnoproblems expecting unique compiled classes expectinguniquecompiledclasses expected classes expectedclasses call file r tester proc filertesterproc test get resource testgetresource checks get resource getresource source output location test get resource testgetresource throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath env add class addclass proj path projpath append src trigger org eclipse jdt apt pluggable tests annotations file r test trigger filertesttrigger file r test trigger filertesttrigger test test get resource testgetresource arg arg test java trigger apt config aptconfig set enabled setenabled jproj file r tester proc filertesterproc existence contents env add class addclass proj path projpath append apt generated test file r tester proc filertesterproc resource file contents filecontents full build fullbuild expecting no problems expectingnoproblems assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors call file r tester proc filertesterproc test get resource testgetresource checks get resource getresource output location test get resource testgetresource throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath env add class addclass proj path projpath append src trigger org eclipse jdt apt pluggable tests annotations file r test trigger filertesttrigger file r test trigger filertesttrigger test test get resource testgetresource arg arg test txt trigger apt config aptconfig set enabled setenabled jproj file r tester proc filertesterproc existence contents file copied output folder i folder ifolder text file folder textfilefolder proj get folder getfolder src text file folder textfilefolder create i file ifile text file textfile proj get file getfile text file folder textfilefolder get project relative path getprojectrelativepath append test txt input stream inputstream text source textsource byte array input stream bytearrayinputstream file r tester proc filertesterproc resource file contents filecontents get bytes getbytes text file textfile create text source textsource full build fullbuild expecting no problems expectingnoproblems assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors call file r tester proc filertesterproc test create non source file testcreatenonsourcefile creates source output file test create non source file testcreatenonsourcefile throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath env add class addclass proj path projpath append src trigger org eclipse jdt apt pluggable tests annotations file r test trigger filertesttrigger file r test trigger filertesttrigger test test create non source file testcreatenonsourcefile arg arg test txt trigger apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors call file r tester proc filertesterproc test null parents testnullparents checks handling originating elements originatingelements file r filer create xxx createxxx methods test null parents testnullparents throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath env add class addclass proj path projpath append src trigger org eclipse jdt apt pluggable tests annotations file r test trigger filertesttrigger file r test trigger filertesttrigger test test null parents testnullparents arg arg test trigger apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors expecting file expectingfile proj apt generated test java expecting file expectingfile proj apt generated test txt string expected classes expectedclasses trigger test expecting unique compiled classes expectinguniquecompiledclasses expected classes expectedclasses call file r tester proc filertesterproc testuri tests file object fileobject to uri touri method sorts files testuri throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath env add class addclass proj path projpath append src trigger org eclipse jdt apt pluggable tests annotations file r test trigger filertesttrigger file r test trigger filertesttrigger test testuri arg arg test txt trigger i folder ifolder text file folder textfilefolder proj get folder getfolder src text file folder textfilefolder create i file ifile text file textfile proj get file getfile text file folder textfilefolder get project relative path getprojectrelativepath append test txt input stream inputstream text source textsource byte array input stream bytearrayinputstream file r tester proc filertesterproc hello str hellostr get bytes getbytes text file textfile create text source textsource apt config aptconfig set enabled setenabled jproj full build fullbuild expecting no problems expectingnoproblems assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors call file r tester proc filertesterproc test get char content l arg e testgetcharcontentlarge checks file object fileobject get char content getcharcontent large multiple buf fers buffers file test get char content l arg e testgetcharcontentlarge throwable processor test status processorteststatus reset i java project ijavaproject jproj create java project createjavaproject project name projectname disable java disablejava factories jproj i project iproject proj jproj get project getproject i path ipath proj path projpath proj get full path getfullpath env add class addclass proj path projpath append src trigger org eclipse jdt apt pluggable tests annotations file r test trigger filertesttrigger file r test trigger filertesttrigger test test get char content l arg e testgetcharcontentlarge arg arg test java trigger apt config aptconfig set enabled setenabled jproj file r tester proc filertesterproc existence contents env add class addclass proj path projpath append apt generated test file r tester proc filertesterproc large java class largejavaclass full build fullbuild expecting no problems expectingnoproblems assert true asserttrue processor processor test status processorteststatus processor ran processorran assert equals assertequals processor reported errors processor test status processorteststatus errors processor test status processorteststatus get errors geterrors