copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal core java util list java util map org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java model status ijavamodelstatus org eclipse jdt core i java model status constants ijavamodelstatusconstants org eclipse jdt core i java project ijavaproject org eclipse jdt core i type itype org eclipse jdt core java model exception javamodelexception org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom annotation type declaration annotationtypedeclaration org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom enum declaration enumdeclaration org eclipse jdt core dom simple name simplename org eclipse jdt core dom structural property descriptor structuralpropertydescriptor org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core formatter indent manipulation indentmanipulation org eclipse jdt internal compiler parser scanner helper scannerhelper functionality common operations create type members suppress warnings suppresswarnings rawtypes create type member operation createtypememberoperation create element in operation createelementincuoperation source code member string source code ast node astnode code create element code copy elements operation copyelementsoperation code renaming string altered name alteredname ast node representing element operation created ast node astnode created node creatednode executed operation create type member parent element source create type member operation createtypememberoperation i java element ijavaelement parent element parentelement string source force parent element parentelement source source force force structural property descriptor structuralpropertydescriptor get child property descriptor getchildpropertydescriptor ast node astnode parent parent get node type getnodetype ast node astnode compilation unit compilation unit compilationunit types property ast node astnode enum declaration enum declaration enumdeclaration body declarations property ast node astnode annotation type declaration annotation type declaration annotationtypedeclaration body declarations property type declaration typedeclaration body declarations property ast node astnode generateelementast ast rewrite astrewrite rewriter i compilation unit icompilationunit java model exception javamodelexception created node creatednode source remove indent and new lines removeindentandnewlines source ast parser astparser parser ast parser astparser new parser newparser ast jls parser set source setsource source to char array tochararray parser set project setproject get compilation unit getcompilationunit get java project getjavaproject parser set kind setkind ast parser astparser body declarations ast node astnode node parser createast progress monitor progressmonitor string created node source creatednodesource node get node type getnodetype ast node astnode type declaration created node source creatednodesource generate syntax incorrect t generatesyntaxincorrectast created node creatednode java model exception javamodelexception java model status javamodelstatus i java model status constants ijavamodelstatusconstants invalid contents type declaration typedeclaration type declaration typedeclaration type declaration typedeclaration node type declaration typedeclaration get flags getflags ast node astnode malformed created node source creatednodesource generate syntax incorrect t generatesyntaxincorrectast created node creatednode java model exception javamodelexception java model status javamodelstatus i java model status constants ijavamodelstatusconstants invalid contents list body declarations bodydeclarations type declaration typedeclaration body declarations bodydeclarations body declarations bodydeclarations size java model exception javamodelexception java model status javamodelstatus i java model status constants ijavamodelstatusconstants invalid contents created node creatednode ast node astnode body declarations bodydeclarations iterator created node source creatednodesource source altered name alteredname simple name simplename new name newname created node creatednode getast new simple name newsimplename altered name alteredname simple name simplename old name oldname rename created node creatednode new name newname name start namestart old name oldname get start position getstartposition name end nameend name start namestart old name oldname get length getlength string buffer stringbuffer new source newsource string buffer stringbuffer source equals created node source creatednodesource new source newsource append created node source creatednodesource substring name start namestart new source newsource append altered name alteredname new source newsource append created node source creatednodesource substring name end nameend syntactically incorrect source created node start creatednodestart created node creatednode get start position getstartposition created node end creatednodeend created node start creatednodestart created node creatednode get length getlength new source newsource append created node source creatednodesource substring created node start creatednodestart name start namestart new source newsource append altered name alteredname new source newsource append created node source creatednodesource substring name end nameend created node end creatednodeend source new source newsource to string tostring rewriter created node creatednode string place holder created node lose comments for matting formatting rewriter create string placeholder createstringplaceholder source created node creatednode get node type getnodetype string remove indent and new lines removeindentandnewlines string code i compilation unit icompilationunit java model exception javamodelexception i java project ijavaproject project get java project getjavaproject map options project get options getoptions tab width tabwidth indent manipulation indentmanipulation get tab width gettabwidth options indent width indentwidth indent manipulation indentmanipulation get indent width getindentwidth options indent indent manipulation indentmanipulation measure indent units measureindentunits code tab width tabwidth indent width indentwidth first non white space firstnonwhitespace length code length first non white space firstnonwhitespace length scanner helper scannerhelper is whitespace iswhitespace code char at charat first non white space firstnonwhitespace last non white space lastnonwhitespace length last non white space lastnonwhitespace scanner helper scannerhelper is whitespace iswhitespace code char at charat last non white space lastnonwhitespace string line delimiter linedelimiter find recommended line separator findrecommendedlineseparator nls indent manipulation indentmanipulation change indent changeindent code substring first non white space firstnonwhitespace last non white space lastnonwhitespace indent tab width tabwidth indent width indentwidth line delimiter linedelimiter renames node returns simple name simplename rename ast node astnode node simple name simplename new name newname generates code ast node astnode code based source operation syntax error source returns source generate node string generate syntax incorrect t generatesyntaxincorrectast create dummy source generate ast node string buffer stringbuffer buf f buff string buffer stringbuffer i type itype type get type gettype string line separator lineseparator org eclipse jdt internal core util util get line separator getlineseparator source type type get java project getjavaproject nls buf f buff append line separator lineseparator line separator lineseparator buf f buff append source buf f buff append line separator lineseparator append ast parser astparser parser ast parser astparser new parser newparser ast jls parser set source setsource buf f buff to string tostring to char array tochararray compilation unit compilationunit compilation unit compilationunit compilation unit compilationunit parser createast type declaration typedeclaration type declaration typedeclaration type declaration typedeclaration compilation unit compilationunit types iterator list body declarations bodydeclarations type declaration typedeclaration body declarations bodydeclarations body declarations bodydeclarations size created node creatednode ast node astnode body declarations bodydeclarations iterator buf f buff to string tostring returns i type itype member created i type itype get type gettype i type itype get parent element getparentelement sets code ast node astnode code create element code copy elements operation copyelementsoperation code renaming set altered name setalteredname string new name newname altered name alteredname new name newname failures elements process parent element supplied operation code code invalid contents source code code syntax errors collision collision occurred destination i java model status ijavamodelstatus verify i java model status ijavamodelstatus status verify status isok status source java model status javamodelstatus i java model status constants ijavamodelstatusconstants invalid contents force check collisions i compilation unit icompilationunit get compilation unit getcompilationunit generateelementast java model exception javamodelexception jme jme get java model status getjavamodelstatus verify name collision verifynamecollision java model status javamodelstatus verified verify collision destination container i java model status ijavamodelstatus verify name collision verifynamecollision java model status javamodelstatus verified