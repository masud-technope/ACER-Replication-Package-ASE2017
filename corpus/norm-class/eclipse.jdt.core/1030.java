copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation jesper steen moller contributions bug compiler nested blocks leads unrunnable java code h arry harry terkelsen het google bug party java format ters formatters mateusz matela mateusz matela gmail formatter formatter format java code correctly max width https bugs eclipse org mateusz matela mateusz matela gmail formatter follow bug comments https bugs eclipse org lars vogel lars vogel vogella contributions bug org eclipse jdt internal formatter org eclipse jdt internal compiler parser terminal tokens terminaltokens tokennameeof org eclipse jdt internal compiler parser terminal tokens terminaltokens token name not token tokennamenotatoken org eclipse jdt internal compiler parser terminal tokens terminaltokens tokennamecomment javadoc org eclipse jdt internal compiler parser terminal tokens terminaltokens tokennamecomment block org eclipse jdt internal compiler parser terminal tokens terminaltokens tokennamecomment java util array list arraylist java util list java util map org eclipse jdt core java core javacore org eclipse jdt core compiler i problem iproblem org eclipse jdt core compiler invalid input exception invalidinputexception org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast parser astparser org eclipse jdt core dom comment org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom javadoc org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core formatter code formatter codeformatter org eclipse jdt core formatter default code formatter constants defaultcodeformatterconstants org eclipse jdt internal compiler impl compiler options compileroptions org eclipse jdt internal compiler parser scanner org eclipse jdt internal compiler util util org eclipse jdt internal formatter line wrap linewrap comment wrap executor commentwrapexecutor org eclipse jdt internal formatter line wrap linewrap wrap preparator wrappreparator org eclipse jface text i region iregion org eclipse jface text region org eclipse text edits multi text edit multitextedit org eclipse text edits text edit textedit default code formatter defaultcodeformatter code formatter codeformatter debug trace debug comments mask single comment multi comment java doc mask code formatter kinds mask unknown expression statements body declarations compilation unit comments mask default code formatter options defaultcodeformatteroptions original options originaloptions default code formatter options defaultcodeformatteroptions working options workingoptions object old comment format option oldcommentformatoption string source level sourcelevel string source string sourcestring source array sourcearray i region iregion format regions formatregions ast node astnode ast root astroot list token tokens array list arraylist token manager tokenmanager token manager tokenmanager default code formatter defaultcodeformatter default code formatter options defaultcodeformatteroptions default code formatter constants defaultcodeformatterconstants get java conventions settings getjavaconventionssettings default code formatter defaultcodeformatter default code formatter options defaultcodeformatteroptions options options default code formatter defaultcodeformatter map string string options options default code formatter defaultcodeformatter default code formatter options defaultcodeformatteroptions default code formatter options defaultcodeformatteroptions map string string options init options initoptions default code formatter options defaultcodeformatteroptions options init options initoptions default code formatter options defaultcodeformatteroptions default code formatter options defaultcodeformatteroptions map string string options options original options originaloptions default code formatter options defaultcodeformatteroptions options working options workingoptions default code formatter options defaultcodeformatteroptions options old comment format option oldcommentformatoption get old comment format option getoldcommentformatoption options string compiler source compilersource options compiler options compileroptions option source source level sourcelevel compiler source compilersource compiler source compilersource compiler options compileroptions version map string string settings default code formatter constants defaultcodeformatterconstants get java conventions settings getjavaconventionssettings original options originaloptions default code formatter options defaultcodeformatteroptions settings working options workingoptions default code formatter options defaultcodeformatteroptions settings old comment format option oldcommentformatoption default code formatter constants defaultcodeformatterconstants source level sourcelevel compiler options compileroptions version default code formatter options defaultcodeformatteroptions original options originaloptions default code formatter options defaultcodeformatteroptions get map getmap working options workingoptions default code formatter options defaultcodeformatteroptions get map getmap deprecated object get old comment format option getoldcommentformatoption map string string options options default code formatter constants defaultcodeformatterconstants formatter comment format string create indentation string createindentationstring indentation level indentationlevel indentation level indentationlevel illegal argument exception illegalargumentexception string builder stringbuilder string builder stringbuilder indent indentation level indentationlevel original options originaloptions indentation size text edits builder texteditsbuilder append indentation string appendindentationstring original options originaloptions tab original options originaloptions tab size indent to string tostring org eclipse jdt core formatter code formatter codeformatter format java lang string java lang string text edit textedit format kind string source offset length indentation level indentationlevel string line separator lineseparator format kind source i region iregion region offset length indentation level indentationlevel line separator lineseparator inherit doc inheritdoc text edit textedit format kind string source i region iregion regions indentation level indentationlevel string line separator lineseparator regions satisfies preconditions regionssatisfiespreconditions regions source length illegal argument exception illegalargumentexception format regions formatregions regions update working options updateworkingoptions indentation level indentationlevel line separator lineseparator kind kind comments mask format comments formatcomments source kind comments mask prepare for matted code prepareformattedcode source kind tokens is empty isempty multi text edit multitextedit multi text edit multitextedit result multi text edit multitextedit text edits builder texteditsbuilder result builder resultbuilder text edits builder texteditsbuilder source string sourcestring regions token manager tokenmanager working options workingoptions token manager tokenmanager traverse result builder resultbuilder text edit textedit edit result builder resultbuilder get edits getedits result add child addchild edit result init string source convenient debug ging debugging token to string tostring token source source source string sourcestring source source array sourcearray source to char array tochararray tokens clear token manager tokenmanager token manager tokenmanager tokens source working options workingoptions tokenize source tokenizesource tokens is empty isempty list token prepare for matted code prepareformattedcode string source kind init source ast root astroot parse source code parsesourcecode kind ast root astroot kind code formatter codeformatter unknown find header findheader prepare spaces preparespaces prepare line breaks preparelinebreaks prepare comments preparecomments prepare wraps preparewraps kind token manager tokenmanager apply format off applyformatoff tokens find header findheader ast root astroot compilation unit compilationunit compilation unit compilationunit unit compilation unit compilationunit ast root astroot list type declaration typedeclaration types unit types ast node astnode first element firstelement types is empty isempty unit get package getpackage types first element firstelement header end index headerendindex token manager tokenmanager first index in firstindexin first element firstelement token manager tokenmanager set header end index setheaderendindex header end index headerendindex text edit textedit format comments formatcomments string source kind multi text edit multitextedit result multi text edit multitextedit init source result comments preparator commentspreparator comments preparator commentspreparator comments preparator commentspreparator token manager tokenmanager working options workingoptions source level sourcelevel comment wrap executor commentwrapexecutor comment wrapper commentwrapper comment wrap executor commentwrapexecutor token manager tokenmanager working options workingoptions kind java doc ast parser astparser parser ast parser astparser new parser newparser ast jls token token tokens token token type tokentype tokennamecomment javadoc parser set source range setsourcerange token original start originalstart token count chars countchars compilation unit compilationunit compilation unit compilationunit parse source code parsesourcecode parser ast parser astparser compilation unit javadoc javadoc javadoc get comment list getcommentlist javadoc accept comments preparator commentspreparator start position startposition token manager tokenmanager find source position in line findsourcepositioninline token original start originalstart comment wrapper commentwrapper wrap multi line comment wrapmultilinecomment token start position startposition multi comment tokens size token token tokens token token type tokentype tokennamecomment block comments preparator commentspreparator handle block comment handleblockcomment start position startposition token manager tokenmanager find source position in line findsourcepositioninline token original start originalstart comment wrapper commentwrapper wrap multi line comment wrapmultilinecomment token start position startposition single comment tokens size token token tokens token token type tokentype tokennamecomment comments preparator commentspreparator handle line comment handlelinecomment tokens size tokens token current token removed merged previous token tokens start position startposition token manager tokenmanager find source position in line findsourcepositioninline token original start originalstart comment wrapper commentwrapper wrap line comment wraplinecomment token start position startposition assertion error assertionerror string value of valueof kind token manager tokenmanager apply format off applyformatoff text edits builder texteditsbuilder result builder resultbuilder text edits builder texteditsbuilder source format regions formatregions token manager tokenmanager working options workingoptions result builder resultbuilder set align char setalignchar default code formatter options defaultcodeformatteroptions space token token tokens list token structure token get internal structure getinternalstructure structure structure is empty isempty result builder resultbuilder process comment processcomment token text edit textedit edit result builder resultbuilder get edits getedits result add child addchild edit result ast node astnode parse source code parsesourcecode kind ast parser astparser parser ast parser astparser new parser newparser ast jls map string string parser options parseroptions java core javacore get options getoptions parser options parseroptions compiler options compileroptions option source source level sourcelevel parser options parseroptions compiler options compileroptions option doc comment support doccommentsupport compiler options compileroptions enabled parser set compiler options setcompileroptions parser options parseroptions kind mask compilation unit parse source code parsesourcecode parser ast parser astparser compilation unit body declarations parse source code parsesourcecode parser ast parser astparser body declarations statements parse source code parsesourcecode parser ast parser astparser statements expression parse source code parsesourcecode parser ast parser astparser expression unknown parser modes parsermodes ast parser astparser compilation unit ast parser astparser expression ast parser astparser body declarations ast parser astparser statements parser mode parsermode parser modes parsermodes ast node astnode ast node astnode parse source code parsesourcecode parser parser mode parsermode ast node astnode ast node astnode parser loses compiler options parser set compiler options setcompileroptions parser options parseroptions illegal argument exception illegalargumentexception ast node astnode parse source code parsesourcecode ast parser astparser parser parser mode parsermode ignore errors ignoreerrors parser set kind setkind parser mode parsermode parser set source setsource source array sourcearray ast node astnode ast node astnode parser createast ignore errors ignoreerrors ast node astnode has errors haserrors compilation unit compilationunit root compilation unit compilationunit ast node astnode get root getroot i problem iproblem problem root get problems getproblems problem is error iserror has errors haserrors has errors haserrors ast node astnode tokenize source tokenizesource tokens clear scanner scanner scanner nls compiler options compileroptions version t o jdk level versiontojdklevel source level sourcelevel task tags tasktags task priorities taskpriorities task case sensitive taskcasesensitive scanner set source setsource source array sourcearray token type tokentype scanner get next token getnexttoken token type tokentype tokennameeof token token token from current fromcurrent scanner token type tokentype tokens add token invalid input exception invalidinputexception token token token from current fromcurrent scanner token name not token tokennamenotatoken tokens add token prepare spaces preparespaces space preparator spacepreparator space preparator spacepreparator space preparator spacepreparator token manager tokenmanager working options workingoptions ast root astroot accept space preparator spacepreparator space preparator spacepreparator finish up finishup prepare line breaks preparelinebreaks line breaks preparator linebreakspreparator breaks preparator breakspreparator line breaks preparator linebreakspreparator token manager tokenmanager working options workingoptions ast root astroot accept breaks preparator breakspreparator breaks preparator breakspreparator finish up finishup prepare comments preparecomments comments preparator commentspreparator comments preparator commentspreparator comments preparator commentspreparator token manager tokenmanager working options workingoptions source level sourcelevel list comment comments compilation unit compilationunit ast root astroot get root getroot get comment list getcommentlist comment comment comments comment accept comments preparator commentspreparator comments preparator commentspreparator finish up finishup prepare wraps preparewraps kind wrap preparator wrappreparator wrap preparator wrappreparator wrap preparator wrappreparator token manager tokenmanager working options workingoptions kind ast root astroot accept wrap preparator wrappreparator wrap preparator wrappreparator finish up finishup ast root astroot format regions formatregions regions max length maxlength regions sorted regions over lapping overlapping regions satisfies preconditions regionssatisfiespreconditions i region iregion regions max length maxlength regions length regionslength regions regions length regions length regionslength i region iregion regions get offset getoffset get length getlength get offset getoffset get length getlength max length maxlength last offset lastoffset get offset getoffset get length getlength regions length regionslength i region iregion current regions last offset lastoffset current get offset getoffset current get offset getoffset current get length getlength current get offset getoffset current get length getlength max length maxlength last offset lastoffset current get offset getoffset current get length getlength update working options updateworkingoptions indentation level indentationlevel string line separator lineseparator kind working options workingoptions separator line separator lineseparator line separator lineseparator original options originaloptions separator working options workingoptions separator working options workingoptions separator util separator working options workingoptions initial indentation level indentation level indentationlevel working options workingoptions comment format javadoc comment original options originaloptions comment format javadoc comment can format comment canformatcomment kind java doc working options workingoptions comment format block comment original options originaloptions comment format block comment can format comment canformatcomment kind multi comment working options workingoptions comment format comment original options originaloptions comment format comment can format comment canformatcomment kind single comment can format comment canformatcomment kind comment kind commentkind kind include comments default code formatter constants defaultcodeformatterconstants equals old comment format option oldcommentformatoption kind mask comment kind commentkind kind unknown default code formatter constants defaultcodeformatterconstants equals old comment format option oldcommentformatoption override set options setoptions map string string options init options initoptions options