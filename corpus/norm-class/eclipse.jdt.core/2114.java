copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests rewrite modifying java util list junit framework test org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core dom ast org eclipse jdt core dom ast visitor astvisitor org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom import declaration importdeclaration org eclipse jdt core dom org eclipse jdt core dom type declaration typedeclaration suppress warnings suppresswarnings rawtypes unchecked ast rewriting modifying other test astrewritingmodifyingothertest ast rewriting modifying test astrewritingmodifyingtest ast rewriting modifying other test astrewritingmodifyingothertest ast rewriting modifying other test astrewritingmodifyingothertest string test all tests alltests suite test suite all tests alltests test exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createcu evaluate rewrite evaluaterewrite ast root astroot assert true asserttrue rewrite fail recording illegal state exception illegalstateexception test exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createcu ast root astroot record modifications recordmodifications string preview evaluate rewrite evaluaterewrite ast root astroot buf string buffer stringbuffer buf append test buf append buf append assert equal string assertequalstring preview buf to string tostring test exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append java util buf append java lang buf append java awt buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createcu ast root astroot record modifications recordmodifications ast ast root astroot getast list imports ast root astroot imports imports remove new simple name newsimplename aaa import declaration importdeclaration import declaration importdeclaration new import declaration newimportdeclaration import declaration importdeclaration set name setname import declaration importdeclaration set on demand setondemand imports add import declaration importdeclaration string preview evaluate rewrite evaluaterewrite ast root astroot buf string buffer stringbuffer buf append test buf append java util buf append java awt buf append aaa buf append buf append assert equal string assertequalstring preview buf to string tostring test exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append java util buf append java lang buf append java awt buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createcu ast root astroot record modifications recordmodifications import declaration importdeclaration import declaration importdeclaration import declaration importdeclaration ast root astroot imports import declaration importdeclaration set on demand setondemand string preview evaluate rewrite evaluaterewrite ast root astroot buf string buffer stringbuffer buf append test buf append java util buf append java lang buf append java awt buf append buf append assert equal string assertequalstring preview buf to string tostring test exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append buf append buf append buf append buf append buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createcu ast root astroot record modifications recordmodifications ast ast root astroot getast list types ast root astroot types type declaration typedeclaration type declaration typedeclaration new type declaration newtypedeclaration type declaration typedeclaration set name setname new simple name newsimplename types add type declaration typedeclaration types remove string preview evaluate rewrite evaluaterewrite ast root astroot buf string buffer stringbuffer buf append test buf append buf append buf append buf append buf append buf append buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring https bugs eclipse org bugs bug cgi test exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createcu getjls ast root astroot record modifications recordmodifications change ast root astroot accept ast visitor astvisitor visit type declaration typedeclaration node node set interface setinterface string preview evaluate rewrite evaluaterewrite ast root astroot buf string buffer stringbuffer buf append test buf append assert equal string assertequalstring preview buf to string tostring https bugs eclipse org bugs bug cgi test exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createcu getjls ast root astroot record modifications recordmodifications change ast root astroot accept ast visitor astvisitor visit type declaration typedeclaration node node set interface setinterface string preview evaluate rewrite evaluaterewrite ast root astroot buf string buffer stringbuffer buf append test buf append assert equal string assertequalstring preview buf to string tostring