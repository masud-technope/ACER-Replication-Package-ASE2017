copyright bea systems ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors mkaufman bea initial api implementation org eclipse jdt apt tests java byte array output stream bytearrayoutputstream java file java file filter filefilter java file input stream fileinputstream java file not found exception filenotfoundexception java file output stream fileoutputstream java io exception ioexception java input stream inputstream java output stream outputstream java net url java util collections java util enumeration java util hash map hashmap java util map java util zip zip entry zipentry java util zip zip file zipfile java util zip zip input stream zipinputstream java util zip zip output stream zipoutputstream org eclipse core resources i file ifile org eclipse core resources i workspace iworkspace org eclipse core resources i workspace description iworkspacedescription org eclipse core resources resources plugin resourcesplugin org eclipse core runtime core exception coreexception org eclipse core runtime file locator filelocator org eclipse core runtime i path ipath org eclipse core runtime i status istatus org eclipse core runtime path org eclipse core runtime plugin org eclipse jdt apt core internal apt plugin aptplugin org eclipse jdt apt core internal util file system util filesystemutil org eclipse jdt apt tests plugin apt tests plugin apttestsplugin org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java project ijavaproject org eclipse jdt core java core javacore org eclipse jdt core java model exception javamodelexception org eclipse jdt core tests util util test util testutil nls string bin ext bin ext nls string bin annotations bin annotations file anno jar returns annotation jar creating has n hasn created java file jar created file create and add annotation jar createandaddannotationjar i java project ijavaproject project io exception ioexception java model exception javamodelexception anno jar jar file created location metadata i path ipath state path statepath apt plugin aptplugin get plugin getplugin get state location getstatelocation i path ipath jar path jarpath state path statepath append org eclipse jdt apt tests test util testutil jar anno jar file jar path jarpath toosstring string classes jar path classesjarpath anno jar get absolute path getabsolutepath get file in plugin getfileinplugin apt tests plugin apttestsplugin get default getdefault path bin annotations dev environment jar classes plugin project file filter filefilter filter package file filter packagefilefilter annotations pkg get annotations classes dir getannotationsclassesdir map file file filter filefilter files collections singleton map singletonmap file get annotations classes dir getannotationsclassesdir filter zip classes jar path classesjarpath files rel eng releng environment copy built jar file apt jar file aptjarfile get file in plugin getfileinplugin apt tests plugin apttestsplugin get default getdefault path apt jar apt jar file aptjarfile file not found exception filenotfoundexception find apt jar file org eclipse jdt apt tests plugin move file movefile apt jar file aptjarfile classes jar path classesjarpath anno jar delete on exit deleteonexit add library entry addlibraryentry project path anno jar get absolute path getabsolutepath src attachment path srcattachmentpath src attachment path root srcattachmentpathroot anno jar apt jar defined build properties plugin built deployed plugin built rel eng releng bin directory classes creates annotation jar annotations processors external annotations adds project classes project bin ext binext manifest draw n drawn project src ext srcext meta inf jar meant represent annotation jar file wrapped plugin note adding jar project classes visible compiler automatically annotation processors loaded java file jar created file create and add external annotation jar createandaddexternalannotationjar i java project ijavaproject project io exception ioexception java model exception javamodelexception create temporary file nls nls file jar file jarfile file create temp file createtempfile org eclipse jdt apt tests test util testutil jar string classes jar path classesjarpath jar file jarfile get absolute path getabsolutepath file ext bin dir extbindir get file in plugin getfileinplugin apt tests plugin apttestsplugin get default getdefault path bin ext ext bin dir extbindir create zip file temp file location file filter filefilter class filter classfilter package file filter packagefilefilter ext annotations extannotations pkg get plugin ext classes dir getpluginextclassesdir file filter filefilter manifest filter manifestfilter package file filter packagefilefilter meta inf get plugin ext src dir getpluginextsrcdir map file file filter filefilter files hash map hashmap file file filter filefilter files file get plugin ext classes dir getpluginextclassesdir class filter classfilter files file get plugin ext src dir getpluginextsrcdir manifest filter manifestfilter zip classes jar path classesjarpath files file ext jar file extjarfile get file in plugin getfileinplugin apt tests plugin apttestsplugin get default getdefault path apt ext aptext jar ext jar file extjarfile move ext apt extapt jar classes jar path classesjarpath file move file movefile ext jar file extjarfile classes jar path classesjarpath file not found exception filenotfoundexception find apt ext aptext jar file org eclipse jdt apt tests plugin add library entry addlibraryentry project path classes jar path classesjarpath src attachment path srcattachmentpath src attachment path root srcattachmentpathroot file locked takes care unloading annotation processor classes delete jar file jarfile delete on exit deleteonexit jar file jarfile auto mated automated tests newly created resources locked java indexer deleted methods org eclipse jdt core tests util util work cat ching catching ret rying retrying success convenience method fill hole util api i status istatus describes deletion successful i status istatus delete file deletefile i path ipath path i file ifile file resources plugin resourcesplugin get workspace getworkspace get root getroot get file getfile path util delete file autobuild parameter work around workaround synchronization problem thread creates project spawning thread autobuild thread configure project classpath time thread calls apt config ures configures project classpath access classpath race thread modification wins work disabling autobuild param auto building autobuilding autobuild enable auto build enableautobuild i workspace iworkspace workspace resources plugin resourcesplugin get workspace getworkspace i workspace description iworkspacedescription desc workspace get description getdescription is auto building isautobuilding desc is auto building isautobuilding is auto building isautobuilding desc set auto building setautobuilding workspace set description setdescription desc core exception coreexception print stack trace printstacktrace is auto building isautobuilding i path ipath get project path getprojectpath i java project ijavaproject project project get resource getresource get location getlocation string get annotations classes dir getannotationsclassesdir nls get file in plugin getfileinplugin apt tests plugin apttestsplugin get default getdefault path bin annotations get absolute path getabsolutepath string get plugin ext classes dir getpluginextclassesdir nls get file in plugin getfileinplugin apt tests plugin apttestsplugin get default getdefault path bin ext get absolute path getabsolutepath string get plugin ext src dir getpluginextsrcdir nls get file in plugin getfileinplugin apt tests plugin apttestsplugin get default getdefault path src ext get absolute path getabsolutepath param plugin plugin file param path path file plugin file object java file get file in plugin getfileinplugin plugin plugin i path ipath path url installurl plugin get bundle getbundle get entry getentry path to string tostring installurl file url localurl file locator filelocator tofileurl installurl java file localurl get file getfile io exception ioexception file rename to renameto file platform depend ant dependant param file move param path path move move file movefile file string to path topath file not found exception filenotfoundexception io exception ioexception file input stream fileinputstream fis file output stream fileoutputstream fos fis file input stream fileinputstream fos file output stream fileoutputstream file to path topath fis read fos write fis fis close fos fos close create zip file add contents param zip path zippath zip file param input map root directories filters root directory searched files pass filter zip file io exception ioexception zip string zip path zippath map file file filter filefilter input io exception ioexception zip output stream zipoutputstream zip zip zip output stream zipoutputstream file output stream fileoutputstream zip path zippath slash map entry file file filter filefilter input entry set entryset zip zip get key getkey get key getkey get path getpath length get value getvalue zip zip close zip zip output stream zipoutputstream zip file dir root path length rootpathlength file filter filefilter filter io exception ioexception string list dir list list length list length length string list file file file dir filter filter accept file file is directory isdirectory zip zip file root path length rootpathlength filter string path file get path getpath path path substring root path length rootpathlength zip entry zipentry entry zip entry zipentry path replace zip put next entry putnextentry entry zip write get bytes from file getbytesfromfile file zip close entry closeentry get bytes from file getbytesfromfile file io exception ioexception file input stream fileinputstream fis byte array output stream bytearrayoutputstream baos rtrn fis file input stream fileinputstream baos byte array output stream bytearrayoutputstream fis read baos write rtrn baos to byte array tobytearray fis fis close baos baos close rtrn unzip file src zip srczip file dest dir destdir io exception ioexception zip file zipfile zip file zipfile src zip srczip enumeration zip entry zipentry entries entries entries has more elements hasmoreelements zip entry zipentry entry entries next element nextelement string entry get name getname file dest file dest dir destdir entry is directory isdirectory file system util filesystemutil mkdirs dest file parent dest get parent file getparentfile file system util filesystemutil mkdirs parent input stream inputstream output stream outputstream get input stream getinputstream entry file output stream fileoutputstream dest buffer bytes read bytesread bytes read bytesread read buffer write buffer bytes read bytesread close io exception ioexception ioe close io exception ioexception ioe close unzip zip input stream zipinputstream src zip srczip file dest dir destdir io exception ioexception zip entry zipentry entry entry src zip srczip get next entry getnextentry string entry get name getname file dest file dest dir destdir entry is directory isdirectory file system util filesystemutil mkdirs dest file parent dest get parent file getparentfile file system util filesystemutil mkdirs parent output stream outputstream file output stream fileoutputstream dest buffer bytes read bytesread bytes read bytesread src zip srczip read buffer write buffer bytes read bytesread src zip srczip close entry closeentry close io exception ioexception ioe add library entry addlibraryentry i java project ijavaproject project i path ipath path i path ipath src attachment path srcattachmentpath i path ipath src attachment path root srcattachmentpathroot exported java model exception javamodelexception i classpath entry iclasspathentry entries project get raw classpath getrawclasspath length entries length i classpath entry iclasspathentry new path entry newpathentry java core javacore new library entry newlibraryentry path src attachment path srcattachmentpath src attachment path root srcattachmentpathroot exported length new path entry newpathentry equals entries system arraycopy entries entries i classpath entry iclasspathentry length length entries new path entry newpathentry project set raw classpath setrawclasspath entries package file filter packagefilefilter file filter filefilter string package parts packageparts path bin dir bindir package file filter packagefilefilter string package sub set packagesubset string bin dir bindir package parts packageparts package sub set packagesubset split bin dir bindir path bin dir bindir accept file path name pathname i path ipath path path name pathname get absolute path getabsolutepath nsegments matching first segments matchingfirstsegments bin dir bindir min math min segment count segmentcount nsegments package parts packageparts length nsegments min segment equals package parts packageparts string annotations pkg org eclipse jdt apt tests annotations string ext annotations extannotations pkg org eclipse jdt apt tests external annotations