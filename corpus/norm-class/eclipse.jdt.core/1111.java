copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal core jdom java util enumeration org eclipse jdt core jdom org eclipse jdt internal core util char array buffer chararraybuffer org eclipse jdt internal core util messages dom node domnode implementation code idom node idomnode code node represents document fragment node created contents located contiguous range shared document shared document array shared sense contents document fragments contained array node main tains maintains indicies relevant port ions portions contents shared document original document indicies create form generate contents document fragment attributes node changed node attempts main tain maintain original for matting formatting replacing relevant port ions portions shared document attributes f illing filling form replacement values node created considered unfragmented attribute node altered node considered fragmented point node considered fragmented desc end ants descendants fragmented node unfragmented contents node efficiently generated original shared document node fragmented contents node created original document indicies form f illing filling replacement values required gen erally generally node contents consists complete lines shared document contents node normalized creation include whitespace preceding node node include trailing whitespace node trailing comments current node ends considered node idom node idomnode deprecated jdom obsolete add ition addition powerful fine grained dom ast api org eclipse jdt core dom suppress warnings suppresswarnings rawtypes dom node domnode idom node idomnode child node code code node children children node implemented doubly linked list dom node domnode f first child ffirstchild child node code code node children efficient access child adding children linked list children dom node domnode f last child flastchild sibling node node code code node sibling list dom node domnode f next node fnextnode parent node code code parent node root node document fragment dom node domnode f parent fparent sibling node preceding node code code node sibling list dom node domnode f previous node fpreviousnode node attributes altered original shared document attributes descendant altered contents node desc end ants descendants consistent content shared document f is fragmented fisfragmented node efficiency node duplicated variable creation fetch shared document string f name fname original inclusive indicies node shared document values ind iciate indiciate exist document f name range fnamerange shared document contents node contained attribute indicies positions character array f document fdocument original entire inclusive range node contents document values contents node exist document f source range fsourcerange current bit masks defined node init ially initially bit flags turned bit masks defined avoid over lap overlap bit masks node type specific set mask setmask get mask getmask f state mask fstatemask position position separator closing brace starting position receiver f insertion position finsertionposition bit mask indicating field initializer expression mask field initializer bit mask indicating field secondary variable decl arator declarator previous field declaration mask field variable decl arator declarator bit mask indicating field type altered original contents document mask field type altered bit mask indicating node altered original contents document mask altered bit mask indicating node body mask body bit mask indicating node preceding comment mask comment bit mask indicating method constructor mask constructor bit mask indicating type mask type bit mask indicating type superclass requires clause mask type superclass bit mask indicating type interfaces mask type interfaces bit mask indicating type method altered original contents mask type altered bit mask indicating node detailed source indexes mask detailed source indexes creates empty document fragment dom node domnode f name fname f document fdocument f source range fsourcerange f name range fnamerange fragment creates document fragment range document param document document node original contents param source range sourcerange element array int egers integers describing entire inclusive source range node document contents start include character position contents include character position array node contents exist document param identifier portion node code code node param name range namerange element array int egers integers describing entire inclusive source range node document including array qualifiers follow node dom node domnode document source range sourcerange string name range namerange f document fdocument document f source range fsourcerange source range sourcerange f name fname f name range fnamerange name range namerange adds parented node document fragment child node child node considered fragmented contents node properly generated idom node idomnode add child addchild idom node idomnode add child addchild idom node idomnode child illegal argument exception illegalargumentexception dom exception domexception basic add child basicaddchild child node constructor fragmented update constructor child get node type getnodetype idom node idomnode method idom method idommethod child is constructor isconstructor dom node domnode child fragment fragment appends current contents document fragment code char array buffer chararraybuffer code node fragmented contents generated original document indicies form current attribute values node node fragmented contents document append contents appendcontents char array buffer chararraybuffer buffer is fragmented isfragmented append fragmented contents appendfragmentedcontents buffer buffer append f document fdocument f source range fsourcerange f source range fsourcerange f source range fsourcerange appends contents children node code char array buffer chararraybuffer code algorithm min imizes minimizes string generation merging adjacent unfragmented children substring operation append contents of children appendcontentsofchildren char array buffer chararraybuffer buffer dom node domnode child f first child ffirstchild dom node domnode sibling start child start child get start position getstartposition child get end position getendposition child sibling child f next node fnextnode sibling sibling is content mergable with iscontentmergablewith child sibling get end position getendposition child is fragmented isfragmented child append contents appendcontents buffer buffer append child get document getdocument start start start sibling get start position getstartposition sibling get end position getendposition child is fragmented isfragmented child append contents appendcontents buffer buffer append child get document getdocument start start child sibling appends contents node code char array bufer chararraybufer code original document indicies form current attribute values node append fragmented contents appendfragmentedcontents char array buffer chararraybuffer buffer adds parented node document fragment child node setting node fragmented flag method code dom builder dombuilder code creating dom dom unfragmented basic add child basicaddchild idom node idomnode child illegal argument exception illegalargumentexception dom exception domexception verify child can have children canhavechildren dom exception domexception messages dom unable add child unableaddchild child illegal argument exception illegalargumentexception messages dom add null child addnullchild is allow able child isallowablechild child dom exception domexception messages dom add incompatible child addincompatiblechild child get parent getparent dom exception domexception messages dom add child with parent addchildwithparent note test child ancestor node test root node child child root guarenteed parent child get root getroot dom exception domexception messages dom add ancestor as child addancestoraschild dom node domnode node dom node domnode child adding tree node get document getdocument get document getdocument node localize contents localizecontents add child f first child ffirstchild child f first child ffirstchild node f last child flastchild f next node fnextnode node node f previous node fpreviousnode f last child flastchild f last child flastchild node node f parent fparent generates detailed source indexes node exception dom exception domexception unable generate detailed source indexes node become detailed becomedetailed dom exception domexception is detailed isdetailed dom node domnode detailed get detailed node getdetailednode detailed dom exception domexception messages dom cannot detail cannotdetail detailed share contents sharecontents detailed returns node allowed children implementation code idom node idomnode code method returns method overridden subclasses implement nodes children idom node idomnode can have children canhavechildren can have children canhavechildren idom node idomnode clone object clone create buffer contents children contents length buffer offset f source range fsourcerange offset length f source range fsourcerange offset buffer length system arraycopy f document fdocument offset buffer length dom node domnode clone newdomnode clone share contents sharecontents clone f document fdocument buffer offset clone offset offset clone children can have children canhavechildren enumeration children get children getchildren children has more elements hasmoreelements dom node domnode child dom node domnode children next element nextelement child f document fdocument f document fdocument dom node domnode child clone childclone child clone sharing document clonesharingdocument buffer offset clone basic add child basicaddchild child clone childclone dom node domnode child clone childclone dom node domnode child clone clone add child addchild child clone childclone clone dom node domnode clone sharing document clonesharingdocument document root offset rootoffset dom node domnode clone newdomnode clone share contents sharecontents clone f document fdocument document root offset rootoffset clone offset root offset rootoffset can have children canhavechildren enumeration children get children getchildren children has more elements hasmoreelements dom node domnode child dom node domnode children next element nextelement child f document fdocument f document fdocument dom node domnode child clone childclone child clone sharing document clonesharingdocument document root offset rootoffset clone basic add child basicaddchild child clone childclone dom node domnode child clone childclone dom node domnode child clone clone add child addchild child clone childclone clone sets node fragmented flag ancestor fragmented flags code code attribute node descendant node altered node fragmented contents generated attributes original form original contents document fragment is fragmented isfragmented f is fragmented fisfragmented f parent fparent f parent fparent fragment idom node idomnode get char acters getcharacters get char acters getcharacters char array buffer chararraybuffer buffer char array buffer chararraybuffer append contents appendcontents buffer buffer get contents getcontents idom node idomnode get child getchild string idom node idomnode get child getchild string dom node domnode child f first child ffirstchild child string child get name getname child equals child child child f next node fnextnode idom node idomnode get children getchildren enumeration get children getchildren sibling enumeration siblingenumeration f first child ffirstchild returns current contents document fragment code code node contents node fragmented contents generated original document indicies form current attribute values node node fragmented contents document idom node idomnode get contents getcontents string get contents getcontents char array buffer chararraybuffer buffer char array buffer chararraybuffer append contents appendcontents buffer buffer to string tostring returns document fragment representing node detailed source indexes subclasses provide detailed implementation override method dom node domnode get detailed node getdetailednode returns document node original contents document shared nodes get document getdocument f document fdocument returns original position character node contents document get end position getendposition f source range fsourcerange returns factory create document fragments idom factory idomfactory get factory getfactory dom factory domfactory idom node idomnode get first child getfirstchild idom node idomnode get first child getfirstchild f first child ffirstchild returns position child node inserted get insertion position getinsertionposition f insertion position finsertionposition returns code code mask node flag turned code code get mask getmask mask f state mask fstatemask mask idom node idomnode get name getname string get name getname f name fname returns source code node get name contents getnamecontents is name altered isnamealtered f name fname to char array tochararray f name fname f name range fnamerange length f name range fnamerange f name range fnamerange result length system arraycopy f document fdocument f name range fnamerange result length result idom node idomnode get next node getnextnode idom node idomnode get next node getnextnode f next node fnextnode idom node idomnode get parent getparent idom node idomnode get parent getparent f parent fparent answers source position corresponds parent element declaration get parent end declaration getparentenddeclaration idom node idomnode parent get parent getparent parent parent idom compilation unit idomcompilationunit dom type domtype parent get open body end getopenbodyend idom node idomnode get previous node getpreviousnode idom node idomnode get previous node getpreviousnode f previous node fpreviousnode returns root node document fragment idom node idomnode get root getroot f parent fparent f parent fparent get root getroot returns original position character node contents document get start position getstartposition f source range fsourcerange idom node idomnode insert sibling insertsibling idom node idomnode insert sibling insertsibling idom node idomnode sibling illegal argument exception illegalargumentexception dom exception domexception verify sibling sibling illegal argument exception illegalargumentexception messages dom add null sibling addnullsibling f parent fparent dom exception domexception messages dom add sibling before root addsiblingbeforeroot f parent fparent is allow able child isallowablechild sibling dom exception domexception messages dom add incompatible sibling addincompatiblesibling sibling get parent getparent dom exception domexception messages dom add sibling with parent addsiblingwithparent note test sibling ancestor node test root node child sibling root guaranteed parent sibling get root getroot dom exception domexception messages dom add ancestor as sibling addancestorassibling dom node domnode node dom node domnode sibling inserting tree node get document getdocument get document getdocument node localize contents localizecontents insert node f previous node fpreviousnode f parent fparent f first child ffirstchild node f previous node fpreviousnode f next node fnextnode node node f parent fparent f parent fparent node f previous node fpreviousnode f previous node fpreviousnode node f next node fnextnode f previous node fpreviousnode node node constructor fragmented update constructor node get node type getnodetype idom node idomnode method idom method idommethod node is constructor isconstructor node fragment f parent fparent fragment idom node idomnode is allow able child isallowablechild idom node idomnode node returns code code contents node document node contents node follow contents node node node fragmented code code is content mergable with iscontentmergablewith dom node domnode node node is fragmented isfragmented is fragmented isfragmented node get document getdocument get document getdocument node get end position getendposition get start position getstartposition returns code code node detailed source code code node limited source perform manipulations detailed indexes required is detailed isdetailed get mask getmask mask detailed source indexes returns code code node descendant node contents altered node created contents node longer consistent contents node document is fragmented isfragmented f is fragmented fisfragmented returns code code noed altered original document contents is name altered isnamealtered get mask getmask mask altered idom node idomnode is signature equal issignatureequal idom node idomnode signatures nodes equal type names equal node types requirements equality override method is signature equal issignatureequal idom node idomnode node get node type getnodetype node get node type getnodetype get name getname equals node get name getname local izes localizes contents node descendant nodes node longer dependent original document order generate contents node descendant nodes unfragmented share document localize contents localizecontents dom node domnode clone dom node domnode clone share contents sharecontents clone returns empty code dom node domnode code instance dom node domnode newdomnode normal izes normalizes code dom node domnode code source positions include whitespace preceeding node node starts whitespace node node start normalize i line start finder ilinestartfinder finder get previous node getpreviousnode normalize start position normalizestartposition get parent end declaration getparentenddeclaration finder children position can have children canhavechildren enumeration children get children getchildren children has more elements hasmoreelements dom node domnode children next element nextelement normalize finder normalize end position normalizeendposition finder dom node domnode get next node getnextnode normal izes normalizes code dom node domnode code position normalize end position normalizeendposition i line start finder ilinestartfinder finder dom node domnode node position includes characters enclosing node dom node domnode parent dom node domnode get parent getparent parent parent dom compilation unit domcompilationunit set source range end setsourcerangeend f document fdocument length parent type temp dom type domtype parent get close body position getclosebodyposition set source range end setsourcerangeend temp f insertion position finsertionposition math max finder get line start getlinestart temp get end position getendposition node position start node temp get start position getstartposition f insertion position finsertionposition math max finder get line start getlinestart temp get end position getendposition normalize start position normalizestartposition get end position getendposition finder set source range end setsourcerangeend get start position getstartposition normal izes normalizes code dom node domnode code start position normalize start position normalizestartposition previous end previousend i line start finder ilinestartfinder finder node start nodestart get start position getstartposition line start linestart finder get line start getlinestart node start nodestart node start nodestart line start linestart line start linestart previous end previousend previous end previousend line start linestart set start position setstartposition line start linestart offsets source indexes node amount offset offset offset range offsetrange f name range fnamerange offset offset range offsetrange f source range fsourcerange offset offsets source range amount offset range offsetrange range offset range length range offset range range returns copy range range copy rangecopy range copy range length range length copy range copy sep arates separates node parent siblings main taining maintaining ties node underlying document fragment child removed parent fragmented properly generates contents idom node idomnode remove remove f parent fparent f parent fparent fragment link siblings f next node fnextnode f next node fnextnode f previous node fpreviousnode f previous node fpreviousnode f previous node fpreviousnode f previous node fpreviousnode f next node fnextnode f next node fnextnode parent point ers pointers f parent fparent f parent fparent f first child ffirstchild f parent fparent f first child ffirstchild f next node fnextnode f parent fparent f last child flastchild f parent fparent f last child flastchild f previous node fpreviousnode remove f parent fparent f next node fnextnode f previous node fpreviousnode sets mask node mask based set mask setmask mask f state mask fstatemask mask f state mask fstatemask mask idom node idomnode set name setname set name setname string f name fname set name altered setnamealtered fragment sets node attribute altered original document contents set name altered setnamealtered altered set mask setmask mask altered altered sets original position character node contents document method dom creation normal izing normalizing source range node set source range end setsourcerangeend f source range fsourcerange sets original position character node contents document method dom creation normal izing normalizing source range node set start position setstartposition start f source range fsourcerange start sets contents node descendant nodes identical contents node desc end ants descendants node parent sibling configuration contents node localize contents node share contents sharecontents dom node domnode node f document fdocument node f document fdocument f is fragmented fisfragmented node f is fragmented fisfragmented f name fname node f name fname f name range fnamerange range copy rangecopy node f name range fnamerange f source range fsourcerange range copy rangecopy node f source range fsourcerange f state mask fstatemask node f state mask fstatemask can have children canhavechildren enumeration my children mychildren get children getchildren enumeration other children otherchildren node get children getchildren dom node domnode my child mychild other child otherchild my children mychildren has more elements hasmoreelements my child mychild dom node domnode my children mychildren next element nextelement other child otherchild dom node domnode other children otherchildren next element nextelement my child mychild share contents sharecontents other child otherchild returns code string code representing node debug purposes string to string tostring