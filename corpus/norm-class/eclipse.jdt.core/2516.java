copyright software rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors stephan herrmann initial api implementation lars vogel lars vogel vogella contributions bug ibm corporation bug fixes org eclipse jdt internal compiler lookup java util array list arraylist java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util map entry java util org eclipse jdt internal compiler ast wildcard org eclipse jdt internal compiler impl compiler options compileroptions implementation jls responsible incorporation defined bound set boundset empty bounds bound set boundset bound set boundset pseudo bounds bound set boundset bound set boundset inference variable structure holds type bounds relation supertype subtype int ernally internally stored sets rel ations relations three sets threesets type bound typebound super bounds superbounds type bound typebound same bounds samebounds type bound typebound sub bounds subbounds type binding typebinding instantiation inference variable bound map inference variable inferencevariable type bound typebound inverse bounds inversebounds three sets threesets empty sets lazily initialized parameterized type binding parameterizedtypebinding merge type parameters mergetypeparameters parameterized type binding parameterizedtypebinding current parameterized type binding parameterizedtypebinding new b newb type binding typebinding cur type args curtypeargs current type arguments typearguments type binding typebinding new type args newtypeargs new b newb type arguments typearguments type binding typebinding merged type binding typebinding cur type args curtypeargs length system arraycopy cur type args curtypeargs merged cur type args curtypeargs length was merged wasmerged cur type args curtypeargs length type binding typebinding equals equals equalsequals cur type args curtypeargs new type args newtypeargs don mess captures cur type args curtypeargs is capture iscapture new type args newtypeargs is capture iscapture cur type args curtypeargs inference variable inferencevariable new type args newtypeargs inference variable inferencevariable circuit incorporation merge type parameters bound incorporation bound inference variable three sets threesets bound set boundset bounds per variable boundspervariable cur type args curtypeargs same bounds samebounds same bounds samebounds type bound typebound inference variable inferencevariable cur type args curtypeargs new type args newtypeargs reduction result reductionresult merged new type args newtypeargs was merged wasmerged cur type args curtypeargs equals new type args newtypeargs new type args newtypeargs inference variable inferencevariable type binding typebinding equals equals equalsequals cur type args curtypeargs new type args newtypeargs three sets threesets bound set boundset bounds per variable boundspervariable new type args newtypeargs bounds inference variable substitute same bounds samebounds same bounds samebounds type bound typebound inference variable inferencevariable new type args newtypeargs cur type args curtypeargs reduction result reductionresult was merged wasmerged parameterized type binding parameterizedtypebinding clone parameterized type binding parameterizedtypebinding current clone current enclosing type enclosingtype clone arguments merged clone add type bound add bound addbound type bound typebound bound iterator type bound typebound bound relation reduction result reductionresult supertype super bounds superbounds super bounds superbounds hash set hashset compiler options compileroptions use unspecdtypeinferenceperformanceoptimization useunspecdtypeinferenceperformanceoptimization bound is proper type ispropertype super bounds superbounds iterator has next hasnext type bound typebound bound is parameterized type isparameterizedtype is parameterized type isparameterizedtype identity comparison original identity comparison bound original type binding typebinding clone merge type parameters mergetypeparameters parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding bound clone clone super bounds superbounds add bound reduction result reductionresult same bounds samebounds same bounds samebounds hash set hashset same bounds samebounds add bound reduction result reductionresult subtype sub bounds subbounds sub bounds subbounds hash set hashset compiler options compileroptions use unspecdtypeinferenceperformanceoptimization useunspecdtypeinferenceperformanceoptimization bound is proper type ispropertype sub bounds subbounds iterator has next hasnext type bound typebound bound is parameterized type isparameterizedtype is parameterized type isparameterizedtype identity comparison original identity comparison bound original type binding typebinding clone merge type parameters mergetypeparameters parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding bound clone clone sub bounds subbounds add bound illegal argument exception illegalargumentexception nls unexpected bound relation nls bound pre super bounds superbounds type binding typebinding lower bounds lowerbounds only proper onlyproper inference variable inferencevariable variable type binding typebinding bound types boundtypes type binding typebinding super bounds superbounds size iterator type bound typebound super bounds superbounds iterator null h ints nullhints variable null h ints nullhints has next hasnext type bound typebound current type binding typebinding bound type boundtype current only proper onlyproper bound type boundtype is proper type ispropertype bound types boundtypes bound type boundtype null h ints nullhints current null h ints nullhints binding types bound types boundtypes length system arraycopy bound types boundtypes bound types boundtypes type binding typebinding use null h ints usenullhints null h ints nullhints bound types boundtypes variable environment inference context inferencecontext sort types sorttypes bound types boundtypes bound types boundtypes pre sub bounds subbounds type binding typebinding upper bounds upperbounds only proper onlyproper inference variable inferencevariable variable reference binding referencebinding rights reference binding referencebinding sub bounds subbounds size type binding typebinding simple upper simpleupper iterator type bound typebound sub bounds subbounds iterator null h ints nullhints variable null h ints nullhints has next hasnext type binding typebinding only proper onlyproper is proper type ispropertype reference binding referencebinding rights reference binding referencebinding null h ints nullhints tag bits tagbits tag bits tagbits annotationnullmask simple upper simpleupper should n shouldn binding types simple upper simpleupper simple upper simpleupper type binding typebinding simple upper simpleupper binding types simple upper simpleupper null h ints nullhints reference type type binding typebinding simple upper simpleupper rights length system arraycopy rights rights reference binding referencebinding use null h ints usenullhints null h ints nullhints rights variable environment inference context inferencecontext sort types sorttypes rights rights pre beta prototype has dependency hasdependency inference variable inferencevariable beta super bounds superbounds has dependency hasdependency super bounds superbounds beta same bounds samebounds has dependency hasdependency same bounds samebounds beta sub bounds subbounds has dependency hasdependency sub bounds subbounds beta inverse bounds inversebounds inverse bounds inversebounds contains key containskey beta todo observed tests pre prototype has dependency hasdependency type bound typebound some bounds somebounds inference variable inferencevariable iterator type bound typebound b it bit some bounds somebounds iterator b it bit has next hasnext type bound typebound bound b it bit type binding typebinding equals equals equalsequals bound bound mentions any mentionsany type binding typebinding total number type bounds container size size super bounds superbounds size super bounds superbounds size same bounds samebounds size same bounds samebounds size sub bounds subbounds size sub bounds subbounds size size flatten into flatteninto type bound typebound collected idx super bounds superbounds len super bounds superbounds size system arraycopy super bounds superbounds to array toarray collected idx len idx len same bounds samebounds len same bounds samebounds size system arraycopy same bounds samebounds to array toarray collected idx len idx len sub bounds subbounds len sub bounds subbounds size system arraycopy sub bounds subbounds to array toarray collected idx len idx len idx three sets threesets copy three sets threesets copy three sets threesets super bounds superbounds copy super bounds superbounds hash set hashset super bounds superbounds same bounds samebounds copy same bounds samebounds hash set hashset same bounds samebounds sub bounds subbounds copy sub bounds subbounds hash set hashset sub bounds subbounds copy instantiation instantiation copy type binding typebinding find single wrapper type findsinglewrappertype instantiation instantiation is proper type ispropertype instantiation type ids typeids java lang byte javalangbyte type ids typeids java lang short javalangshort type ids typeids java lang character javalangcharacter type ids typeids java lang integer javalanginteger type ids typeids java lang long javalanglong type ids typeids java lang float javalangfloat type ids typeids java lang double javalangdouble type ids typeids java lang boolean javalangboolean instantiation sub bounds subbounds iterator type bound typebound sub bounds subbounds iterator has next hasnext type binding typebinding bound type boundtype bound type boundtype is proper type ispropertype bound type boundtype type ids typeids java lang byte javalangbyte type ids typeids java lang short javalangshort type ids typeids java lang character javalangcharacter type ids typeids java lang integer javalanginteger type ids typeids java lang long javalanglong type ids typeids java lang float javalangfloat type ids typeids java lang double javalangdouble type ids typeids java lang boolean javalangboolean bound type boundtype super bounds superbounds iterator type bound typebound super bounds superbounds iterator has next hasnext type binding typebinding bound type boundtype bound type boundtype is proper type ispropertype bound type boundtype type ids typeids java lang byte javalangbyte type ids typeids java lang short javalangshort type ids typeids java lang character javalangcharacter type ids typeids java lang integer javalanginteger type ids typeids java lang long javalanglong type ids typeids java lang float javalangfloat type ids typeids java lang double javalangdouble type ids typeids java lang boolean javalangboolean bound type boundtype jls enhance type bounds null h ints nullhints effective type bounds typebounds carry null h ints nullhints type bindings typebindings tag bits tagbits annotationnullmask annotations enabled place use null h ints usenullhints null h ints nullhints type binding typebinding bound types boundtypes lookup environment lookupenvironment environment null h ints nullhints tag bits tagbits annotationnullmask contradiction remove type annotations bound types boundtypes length bound types boundtypes bound types boundtypes without top level null annotation withouttoplevelnullannotation annotation binding annotationbinding annot environment null annotations from tag bits nullannotationsfromtagbits null h ints nullhints annot non null nonnull nullable hinted apply hint bound types boundtypes length bound types boundtypes environment create annotated type createannotatedtype bound types boundtypes annot type binding typebinding combine and use null h ints combineandusenullhints type binding typebinding type null h ints nullhints lookup environment lookupenvironment environment reference type bound typebound three sets threesets propagate bits same bounds samebounds iterator type bound typebound same bounds samebounds iterator has next hasnext null h ints nullhints null h ints nullhints super bounds superbounds iterator type bound typebound super bounds superbounds iterator has next hasnext null h ints nullhints null h ints nullhints sub bounds subbounds iterator type bound typebound sub bounds subbounds iterator has next hasnext null h ints nullhints null h ints nullhints contradiction remove type annotations null h ints nullhints tag bits tagbits annotationnullmask type without top level null annotation withouttoplevelnullannotation annotation binding annotationbinding annot environment null annotations from tag bits nullannotationsfromtagbits null h ints nullhints annot non null nonnull nullable hinted apply hint environment create annotated type createannotatedtype type annot type set instantiation setinstantiation type binding typebinding type inference variable inferencevariable variable lookup environment lookupenvironment environment environment global options globaloptions is annotation based null analysis enabled isannotationbasednullanalysisenabled variable bits variablebits variable tag bits tagbits tag bits tagbits annotationnullmask all bits allbits type tag bits tagbits variable bits variablebits instantiation all bits allbits instantiation tag bits tagbits all bits allbits tag bits tagbits annotationnullmask contradiction all bits allbits tag bits tagbits annotationnullmask all bits allbits variable bits variablebits all bits allbits type tag bits tagbits tag bits tagbits annotationnullmask annotation binding annotationbinding annot environment null annotations from tag bits nullannotationsfromtagbits all bits allbits annot type environment create annotated type createannotatedtype type without top level null annotation withouttoplevelnullannotation annot type has null type annotations hasnulltypeannotations type type without top level null annotation withouttoplevelnullannotation instantiation type main storage type bounds hash map hashmap inference variable inferencevariable three sets threesets bounds per variable boundspervariable hash map hashmap bullet î±n capture sides enter types non null nonnull arguments hash map hashmap parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding captures hash map hashmap bullet inference variable inferencevariable in throws inthrows hash set hashset type bound typebound incorporated bounds incorporatedbounds type bound typebound type bound typebound unincorporated bounds unincorporatedbounds type bound typebound unincorporated bounds count unincorporatedboundscount quick dirty duplicate elimination type bound typebound most recent bounds mostrecentbounds type bound typebound bound set boundset pre type parameters typeparameters variables type parameter typeparameter type parameters typeparameters add bounds from type parameters addboundsfromtypeparameters inference context inferencecontext context type variable binding typevariablebinding type parameters typeparameters inference variable inferencevariable variables length type parameters typeparameters length length type variable binding typevariablebinding type parameter typeparameter type parameters typeparameters inference variable inferencevariable variable variables type bound typebound some bounds somebounds type parameter typeparameter get type bounds gettypebounds variable inference substitution inferencesubstitution context has proper bound hasproperbound some bounds somebounds length has proper bound hasproperbound add bounds addbounds some bounds somebounds context environment has proper bound hasproperbound add bound addbound type bound typebound variable context object reduction result reductionresult subtype context environment answer flat representation bound set boundset type bound typebound flatten size iterator three sets threesets outer it outerit bounds per variable boundspervariable values iterator outer it outerit has next hasnext size outer it outerit size type bound typebound collected type bound typebound size size collected outer it outerit bounds per variable boundspervariable values iterator idx outer it outerit has next hasnext idx outer it outerit flatten into flatteninto collected idx collected resolution work copy bound enable ret rying retrying bound bound set boundset copy bound set boundset copy bound set boundset iterator entry inference variable inferencevariable three sets threesets sets iterator setsiterator bounds per variable boundspervariable entry set entryset iterator sets iterator setsiterator has next hasnext entry inference variable inferencevariable three sets threesets entry sets iterator setsiterator copy bounds per variable boundspervariable entry get key getkey entry get value getvalue copy copy in throws inthrows add all addall in throws inthrows copy captures put all putall captures system arraycopy incorporated bounds incorporatedbounds copy incorporated bounds incorporatedbounds type bound typebound incorporated bounds incorporatedbounds length incorporated bounds incorporatedbounds length system arraycopy unincorporated bounds unincorporatedbounds copy unincorporated bounds unincorporatedbounds type bound typebound unincorporated bounds unincorporatedbounds length unincorporated bounds unincorporatedbounds length copy unincorporated bounds count unincorporatedboundscount unincorporated bounds count unincorporatedboundscount copy add bound addbound type bound typebound bound lookup environment lookupenvironment environment bound relation reduction result reductionresult subtype bound type ids typeids java lang object javalangobject identity comparison bound left bound bound equals most recent bounds mostrecentbounds environment global options globaloptions is annotation based null analysis enabled isannotationbasednullanalysisenabled type bound typebound existing most recent bounds mostrecentbounds bound null bits boundnullbits bound tag bits tagbits tag bits tagbits annotationnullmask existing null bits existingnullbits existing tag bits tagbits tag bits tagbits annotationnullmask bound null bits boundnullbits existing null bits existingnullbits existing null bits existingnullbits existing bound combine bits sources creates contradiction bound null bits boundnullbits existing environment create annotated type createannotatedtype existing environment null annotations from tag bits nullannotationsfromtagbits bound null bits boundnullbits most recent bounds mostrecentbounds most recent bounds mostrecentbounds most recent bounds mostrecentbounds most recent bounds mostrecentbounds most recent bounds mostrecentbounds most recent bounds mostrecentbounds most recent bounds mostrecentbounds bound inference variable inferencevariable variable bound left prototype three sets threesets bounds per variable boundspervariable variable bounds per variable boundspervariable variable three sets threesets add bound addbound bound unincorporated bounds length unincorporatedboundslength unincorporated bounds unincorporatedbounds length unincorporated bounds count unincorporatedboundscount unincorporated bounds length unincorporatedboundslength system arraycopy unincorporated bounds unincorporatedbounds unincorporated bounds unincorporatedbounds type bound typebound unincorporated bounds length unincorporatedboundslength unincorporated bounds length unincorporatedboundslength unincorporated bounds unincorporatedbounds unincorporated bounds count unincorporatedboundscount bound check inference variable instantiated type binding typebinding type binding typebinding bound bound relation reduction result reductionresult type binding typebinding is proper type ispropertype set instantiation setinstantiation type binding typebinding variable environment bound inference variable inferencevariable dependency i v s ivs not e note inverse bound needed determine dependencies independent direction todo test identified inference variable inferencevariable rightiv inference variable inferencevariable bound prototype bounds per variable boundspervariable rightiv bounds per variable boundspervariable rightiv three sets threesets inverse bounds inversebounds inverse bounds inversebounds hash map hashmap inverse bounds inversebounds rightiv bound add bounds addbounds type bound typebound new bounds newbounds lookup environment lookupenvironment environment has proper bound hasproperbound new bounds newbounds length add bound addbound new bounds newbounds environment has proper bound hasproperbound new bounds newbounds is bound isbound has proper bound hasproperbound add bounds addbounds bound set boundset lookup environment lookupenvironment environment environment add bounds addbounds flatten environment is instantiate d isinstantiated inference variable inferencevariable inference variable inferencevariable three sets threesets bounds per variable boundspervariable inference variable inferencevariable prototype instantiation type binding typebinding get instantiation getinstantiation inference variable inferencevariable inference variable inferencevariable lookup environment lookupenvironment environment three sets threesets bounds per variable boundspervariable inference variable inferencevariable prototype type binding typebinding instantiation instantiation environment environment global options globaloptions is annotation based null analysis enabled isannotationbasednullanalysisenabled instantiation instantiation tag bits tagbits tag bits tagbits annotationnullmask combine and use null h ints combineandusenullhints instantiation inference variable inferencevariable null h ints nullhints environment instantiation num uninstantiated variables numuninstantiatedvariables inference variable inferencevariable variables num variables length is instantiate d isinstantiated variables num num driver real work horse workhorse gen erational generational incorporation gen erational generational garbage collector inc orporate incorporate inference context inferencecontext context inference failure exception inferencefailureexception unincorporated bounds count unincorporatedboundscount captures size type bound typebound fresh bounds freshbounds system arraycopy unincorporated bounds unincorporatedbounds fresh bounds freshbounds type bound typebound unincorporated bounds count unincorporatedboundscount unincorporated bounds count unincorporatedboundscount unincorporated bounds count unincorporatedboundscount pair wise pairwise bidirectional compare bounds previous generation fresh inc orporate incorporate context incorporated bounds incorporatedbounds fresh bounds freshbounds pair wise pairwise bidirectional compare fresh bounds inc orporate incorporate context fresh bounds freshbounds fresh bounds freshbounds merge bounds incorporated generation incorporated length incorporatedlength incorporated bounds incorporatedbounds length unincorporated length unincorporatedlength fresh bounds freshbounds length type bound typebound aggregate type bound typebound incorporated length incorporatedlength unincorporated length unincorporatedlength system arraycopy incorporated bounds incorporatedbounds aggregate incorporated length incorporatedlength system arraycopy fresh bounds freshbounds aggregate incorporated length incorporatedlength unincorporated length unincorporatedlength incorporated bounds incorporatedbounds aggregate unincorporated bounds count unincorporatedboundscount jls infer constraints pairs existing type bounds constraint reduced checked abort processing param context context manages inference variables constraint resolved inference failure exception inferencefailureexception compile error detected inference inc orporate incorporate inference context inferencecontext context type bound typebound type bound typebound inference failure exception inferencefailureexception analyze null analyzenull context environment global options globaloptions is annotation based null analysis enabled isannotationbasednullanalysisenabled poor man cache to ss toss duplicates path ological pathological cases good quarter constraint type formula constrainttypeformula most recent form ulas mostrecentformulas constraint type formula constrainttypeformula check pair i length ilength length i length ilength type bound typebound bound i boundi j length jlength length j length jlength type bound typebound bound j boundj bound i boundi bound j boundj iteration constraint type formula constrainttypeformula new constraint newconstraint derive type argument constraints derivetypeargumentconstraints iteration type bound typebound bound x boundx bound i boundi bound i boundi bound j boundj bound j boundj bound x boundx bound i boundi relation reduction result reductionresult bound j boundj relation reduction result reductionresult new constraint newconstraint combine same same combinesamesame bound i boundi bound j boundj reduction result reductionresult subtype reduction result reductionresult supertype new constraint newconstraint combine same sub super combinesamesubsuper bound i boundi bound j boundj reduction result reductionresult subtype bound j boundj relation reduction result reductionresult new constraint newconstraint combine same sub super combinesamesubsuper bound j boundj bound i boundi reduction result reductionresult supertype new constraint newconstraint combine super and sub combinesuperandsub bound j boundj bound i boundi reduction result reductionresult subtype new constraint newconstraint combine equal s upers combineequalsupers bound i boundi bound j boundj derive type argument constraints derivetypeargumentconstraints type binding typebinding equals equals equalsequals bound i boundi left bound j boundj left reduction result reductionresult supertype bound j boundj relation reduction result reductionresult new constraint newconstraint combine same sub super combinesamesubsuper bound j boundj bound i boundi reduction result reductionresult subtype new constraint newconstraint combine super and sub combinesuperandsub bound i boundi bound j boundj reduction result reductionresult supertype new constraint newconstraint combine equal s upers combineequalsupers bound i boundi bound j boundj new constraint newconstraint identity comparison new constraint newconstraint left new constraint newconstraint new constraint newconstraint new constraint newconstraint equals equals equalsequals most recent form ulas mostrecentformulas new constraint newconstraint equals equals equalsequals most recent form ulas mostrecentformulas new constraint newconstraint equals equals equalsequals most recent form ulas mostrecentformulas new constraint newconstraint equals equals equalsequals most recent form ulas mostrecentformulas new constraint newconstraint new constraint newconstraint bubble form ulas formulas cache most recent form ulas mostrecentformulas most recent form ulas mostrecentformulas most recent form ulas mostrecentformulas most recent form ulas mostrecentformulas most recent form ulas mostrecentformulas most recent form ulas mostrecentformulas most recent form ulas mostrecentformulas new constraint newconstraint reduce one constraint reduceoneconstraint context new constraint newconstraint analyze null analyzenull jls constraint rel ates relates types annotations record tag bits tagbits hints inference solution null h ints nullhints new constraint newconstraint left tag bits tagbits new constraint newconstraint tag bits tagbits tag bits tagbits annotationnullmask null h ints nullhints type binding typebinding equals equals equalsequals bound i boundi left bound j boundj left bound i boundi relation reduction result reductionresult type binding typebinding equals equals equalsequals bound i boundi bound j boundj left bound j boundj relation reduction result reductionresult type binding typebinding equals equals equalsequals bound i boundi left bound j boundj bound i boundi null h ints nullhints null h ints nullhints bound j boundj null h ints nullhints null h ints nullhints constraint formula constraintformula type argument constraints typeargumentconstraints derive type argument constraints derivetypeargumentconstraints derive type argument constraints derivetypeargumentconstraints bound i boundi bound j boundj type argument constraints typeargumentconstraints length type argument constraints typeargumentconstraints length length reduce one constraint reduceoneconstraint context type argument constraints typeargumentconstraints iteration type bound typebound bound x boundx bound i boundi bound i boundi bound j boundj bound j boundj bound x boundx iteration todo terminate discussion assert ion assertion incorporation reaches fixed point over simplifies oversimplifies matter iterator entry parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding capt iter captiter captures entry set entryset iterator capt iter captiter has next hasnext entry parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding capt capt iter captiter parameterized type binding parameterizedtypebinding g alpha galpha capt get key getkey parameterized type binding parameterizedtypebinding capt get value getvalue reference binding referencebinding reference binding referencebinding original type variable binding typevariablebinding parameters type variables typevariables construct the ta theta alpha inference variable inferencevariable alphas inference variable inferencevariable g alpha galpha arguments length system arraycopy g alpha galpha arguments alphas alphas length inference substitution inferencesubstitution the ta theta inference substitution inferencesubstitution context environment alphas context current invocation currentinvocation override type binding typebinding get p getp parameters length parameters length length bounds î±n constructed declared bounds implied type variable binding typevariablebinding parameters inference variable inferencevariable alpha inference variable inferencevariable g alpha galpha arguments add bounds addbounds get type bounds gettypebounds alpha the ta theta context environment type binding typebinding arguments wildcard binding wildcardbinding wildcard binding wildcardbinding wildcard binding wildcardbinding wildcard binding wildcardbinding type binding typebinding wildcard binding wildcardbinding bound three sets threesets bounds per variable boundspervariable alpha prototype iterator type bound typebound same bounds samebounds impl ies implies same bounds samebounds iterator has next hasnext type bound typebound bound inference context inferencecontext workaround bug jdk bound capture binding capturebinding bound is proper type ispropertype bound inference variable inferencevariable sub bounds subbounds first bound firstbound object impl ies implies âÿ¨t râÿ© wildcard impl ies implies âÿ¨î¸ râÿ© sub bounds subbounds iterator has next hasnext type bound typebound bound bound inference variable inferencevariable type binding typebinding bound type binding typebinding first bound firstbound reference binding referencebinding other bounds otherbounds super interfaces superinterfaces type binding typebinding other bounds otherbounds binding superinterfaces other bounds otherbounds length reference binding referencebinding all bounds allbounds reference binding referencebinding todo safe all bounds allbounds reference binding referencebinding system arraycopy other bounds otherbounds all bounds allbounds context environment create int ersection type createintersectiontype all bounds allbounds add type bounds from wildcard bound addtypeboundsfromwildcardbound context the ta theta wildcard binding wildcardbinding bound kind boundkind other bounds otherbounds other bounds otherbounds length type binding typebinding other bounds otherbounds type binding typebinding not equals notequals add type bounds from wildcard bound addtypeboundsfromwildcardbound context wildcard binding wildcardbinding bij super bounds superbounds impl ies implies âÿ¨r tâÿ© wildcard impl ies implies super bounds superbounds iterator has next hasnext type bound typebound bound bound inference variable inferencevariable wildcard binding wildcardbinding bound kind boundkind wildcard reduce one constraint reduceoneconstraint context constraint type formula constrainttypeformula create bound reduction result reductionresult subtype add bound addbound type bound typebound alpha reduction result reductionresult context environment captures clear add type bounds from wildcard bound addtypeboundsfromwildcardbound inference context inferencecontext context inference substitution inferencesubstitution the ta theta bound kind boundkind type binding typebinding type binding typebinding type binding typebinding inference failure exception inferencefailureexception constraint formula constraintformula for mula formula bound kind boundkind wildcard type ids typeids java lang object javalangobject for mula formula constraint type formula constrainttypeformula create reduction result reductionresult subtype type ids typeids java lang object javalangobject for mula formula constraint type formula constrainttypeformula create the ta theta substitute the ta theta reduction result reductionresult subtype for mula formula constraint type formula constrainttypeformula create the ta theta substitute the ta theta reduction result reductionresult subtype for mula formula reduce one constraint reduceoneconstraint context for mula formula constraint type formula constrainttypeformula combine same same combinesamesame type bound typebound bound s bounds type bound typebound bound t boundt imply âÿ¨s tâÿ© type binding typebinding equals equals equalsequals bound s bounds left bound t boundt left constraint type formula constrainttypeformula create bound s bounds bound t boundt reduction result reductionresult bound s bounds is soft issoft bound t boundt is soft issoft match shapes constraint type formula constrainttypeformula new constraint newconstraint new constraint newconstraint combine same same with proper type combinesamesamewithpropertype bound s bounds bound t boundt new constraint newconstraint new constraint newconstraint new constraint newconstraint combine same same with proper type combinesamesamewithpropertype bound t boundt bound s bounds new constraint newconstraint new constraint newconstraint pre bound left boundleft left bound right boundright left constraint type formula constrainttypeformula combine same same with proper type combinesamesamewithpropertype type bound typebound bound left boundleft type bound typebound bound right boundright imply âÿ¨s âÿ© type binding typebinding bound left boundleft is proper type ispropertype inference variable inferencevariable alpha bound left boundleft left substitution inference variable precondition type binding typebinding left bound right boundright left type binding typebinding bound right boundright substitute inference variable substituteinferencevariable alpha constraint type formula constrainttypeformula create left reduction result reductionresult bound left boundleft is soft issoft bound right boundright is soft issoft constraint type formula constrainttypeformula combine same sub super combinesamesubsuper type bound typebound bound s bounds type bound typebound bound t boundt imply âÿ¨s tâÿ© imply âÿ¨t s âÿ© sâÿ© inference variable inferencevariable alpha bound s bounds left type binding typebinding bound s bounds type binding typebinding equals equals equalsequals alpha bound t boundt left constraint type formula constrainttypeformula create bound t boundt bound t boundt relation bound t boundt is soft issoft bound s bounds is soft issoft type binding typebinding equals equals equalsequals alpha bound t boundt constraint type formula constrainttypeformula create bound t boundt bound t boundt relation bound t boundt is soft issoft bound s bounds is soft issoft bound s bounds inference variable inferencevariable reverse alpha inference variable inferencevariable bound s bounds bound s bounds left type binding typebinding equals equals equalsequals alpha bound t boundt left constraint type formula constrainttypeformula create bound t boundt bound t boundt relation bound t boundt is soft issoft bound s bounds is soft issoft type binding typebinding equals equals equalsequals alpha bound t boundt constraint type formula constrainttypeformula create bound t boundt bound t boundt relation bound t boundt is soft issoft bound s bounds is soft issoft imply âÿ¨s âÿ© type binding typebinding bound s bounds is proper type ispropertype substitute type binding typebinding equals equals equalsequals alpha bound t boundt left type binding typebinding left substitute bound t boundt left type binding typebinding bound t boundt substitute inference variable substituteinferencevariable alpha substitute type binding typebinding not equals notequals bound t boundt avoid redundant constraint substitute constraint type formula constrainttypeformula create left bound t boundt relation bound t boundt is soft issoft bound s bounds is soft issoft constraint type formula constrainttypeformula combine super and sub combinesuperandsub type bound typebound bound s bounds type bound typebound bound t boundt per mutations permutations imply âÿ¨s tâÿ© inference variable inferencevariable alpha bound s bounds left type binding typebinding equals equals equalsequals alpha bound t boundt left imply âÿ¨s tâÿ© constraint type formula constrainttypeformula create bound s bounds bound t boundt reduction result reductionresult subtype bound t boundt is soft issoft bound s bounds is soft issoft bound s bounds inference variable inferencevariable reverse alpha inference variable inferencevariable bound s bounds type binding typebinding equals equals equalsequals alpha bound t boundt imply âÿ¨s tâÿ© constraint type formula constrainttypeformula create bound s bounds left bound t boundt left reduction result reductionresult supertype bound t boundt is soft issoft bound s bounds is soft issoft constraint type formula constrainttypeformula combine equal s upers combineequalsupers type bound typebound bound s bounds type bound typebound bound t boundt per mutations permutations imply âÿ¨s tâÿ© type binding typebinding equals equals equalsequals bound s bounds left bound t boundt rel rel imply âÿ¨t rel s âÿ© sâÿ© constraint type formula constrainttypeformula create bound t boundt left bound s bounds bound s bounds relation bound t boundt is soft issoft bound s bounds is soft issoft type binding typebinding equals equals equalsequals bound s bounds bound t boundt left rel rel imply âÿ¨s rel tâÿ© constraint type formula constrainttypeformula create bound s bounds left bound t boundt bound s bounds relation bound t boundt is soft issoft bound s bounds is soft issoft constraint type formula constrainttypeformula derive type argument constraints derivetypeargumentconstraints type bound typebound bound s bounds type bound typebound bound t boundt bounds form exists supertype form supertype form â‰¤ â‰¤ types wildcards constraint âÿ¨s i âÿ¨si t iâÿ© tiâÿ© implied call ers callers ensure rel ations relations lefts equal type binding typebinding supers super types with common generic type supertypeswithcommongenerictype bound s bounds bound t boundt supers type argument equality constraints typeargumentequalityconstraints supers supers bound s bounds is soft issoft bound t boundt is soft issoft constraint type formula constrainttypeformula type argument equality constraints typeargumentequalityconstraints type binding typebinding type binding typebinding is soft issoft kind binding parameterized type kind binding parameterized type don create use less useless constraints type binding typebinding equals equals equalsequals type binding typebinding sis type arguments typearguments type binding typebinding tis type arguments typearguments sis tis sis length tis length list constraint type formula constrainttypeformula result array list arraylist sis length type binding typebinding sis type binding typebinding tis is wildcard iswildcard is wildcard iswildcard type binding typebinding equals equals equalsequals result add constraint type formula constrainttypeformula create reduction result reductionresult is soft issoft result size result to array toarray constraint type formula constrainttypeformula result size reduce constraint constraint produces constraints reduce recursively inference failure exception inferencefailureexception compile error detected inference reduce one constraint reduceoneconstraint inference context inferencecontext context constraint formula constraintformula current constraint currentconstraint inference failure exception inferencefailureexception object result current constraint currentconstraint reduce context result reduction result reductionresult result reduction result reductionresult result current constraint currentconstraint nls illegal state exception illegalstateexception failed reduce constraint for mula formula result result constraint formula constraintformula reduce one constraint reduceoneconstraint context constraint formula constraintformula result result constraint formula constraintformula constraint formula constraintformula result array resultarray constraint formula constraintformula result result array resultarray length reduce one constraint reduceoneconstraint context result array resultarray add bound addbound type bound typebound result context environment encountered helper resolution bound define direct dependency inference variables depends on resolution of dependsonresolutionof inference variable inferencevariable alpha inference variable inferencevariable beta alpha alpha prototype beta beta prototype type binding typebinding equals equals equalsequals alpha beta inference variable depends resolution iterator map entry parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding capture iter captureiter captures entry set entryset iterator beta is i n capture lhs betaisincapturelhs todo optimization separate structure capture iter captureiter has next hasnext entry parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding entry capture iter captureiter parameterized type binding parameterizedtypebinding entry get key getkey arguments length type binding typebinding equals equals equalsequals arguments alpha inference variable app earing appearing left hand side bound form capture depends resolution inference variable mentioned bound sides sign parameterized type binding parameterizedtypebinding captured entry get value getvalue captured mentions any mentionsany type binding typebinding beta don care exclude mentions any mentionsany type binding typebinding beta type binding typebinding equals equals equalsequals arguments beta beta is i n capture lhs betaisincapturelhs swap rule text cover depends resolution beta is i n capture lhs betaisincapturelhs three sets threesets sets bounds per variable boundspervariable beta sets sets has dependency hasdependency alpha three sets threesets sets bounds per variable boundspervariable alpha sets sets has dependency hasdependency beta list inference variable inferencevariable compute connected components computeconnectedcomponents inference variable inferencevariable inference variables inferencevariables create dependency edges direct ional directional map inference variable inferencevariable inference variable inferencevariable all edges alledges hash map hashmap inference variables inferencevariables length inference variable inferencevariable inference variables inferencevariables hash set hashset inference variable inferencevariable target set targetset hash set hashset inference variable inferencevariable event ually eventually ensures for all forall inference variables inferencevariables all edges alledges all edges alledges target set targetset inference variable inferencevariable inference variables inferencevariables depends on resolution of dependsonresolutionof depends on resolution of dependsonresolutionof target set targetset add all edges alledges add collect connected i v s ivs component inference variable inferencevariable visited hash set hashset list inference variable inferencevariable all components allcomponents array list arraylist inference variable inferencevariable inference variable inferencevariable inference variables inferencevariables inference variable inferencevariable component hash set hashset add connected addconnected component inference variable inferencevariable all edges alledges visited component is empty isempty all components allcomponents add component all components allcomponents add connected addconnected inference variable inferencevariable component inference variable inferencevariable see d seed map inference variable inferencevariable inference variable inferencevariable all edges alledges inference variable inferencevariable visited visited add see d seed add i v s ivs starting see d seed reachable all edges alledges component add see d seed inference variable inferencevariable all edges alledges see d seed add connected addconnected component all edges alledges visited helper has capture bound hascapturebound inference variable inferencevariable variable set variableset iterator parameterized type binding parameterizedtypebinding capture iter captureiter captures key set keyset iterator capture iter captureiter has next hasnext parameterized type binding parameterizedtypebinding capture iter captureiter arguments length variable set variableset arguments helper has only t rivial exception bounds hasonlytrivialexceptionbounds inference variable inferencevariable variable type binding typebinding upper bounds upperbounds upper bounds upperbounds upper bounds upperbounds length upper bounds upperbounds type ids typeids java lang exception javalangexception type ids typeids java lang throwable javalangthrowable type ids typeids java lang object javalangobject jls answer upper bounds inference variable defined bounds type binding typebinding upper bounds upperbounds inference variable inferencevariable variable only proper onlyproper three sets threesets bounds per variable boundspervariable variable prototype sub bounds subbounds binding types upper bounds upperbounds only proper onlyproper variable todo only proper onlyproper three sets threesets inverse bounds inversebounds safe rely incorporation produce required bounds jls answer bounds inference variable defined bounds type binding typebinding lower bounds lowerbounds inference variable inferencevariable variable only proper onlyproper three sets threesets bounds per variable boundspervariable variable prototype super bounds superbounds binding types lower bounds lowerbounds only proper onlyproper variable bounds variable appears rhs relevant int erested interested bounds proper type variable appears rhs bound construction inference variable debug ging debugging string to string tostring nls string buffer stringbuffer buf string buffer stringbuffer type bounds type bound typebound flattened flatten flattened length buf append append flattened to string tostring append nls buf append capture bounds iterator map entry parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding capt iter captiter captures entry set entryset iterator capt iter captiter has next hasnext entry parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding capt capt iter captiter string lhs string value of valueof type binding typebinding capt get key getkey short readable name shortreadablename string rhs string value of valueof type binding typebinding capt get value getvalue short readable name shortreadablename nls nls buf append append lhs append capt append rhs append buf to string tostring type binding typebinding find wrapper type bound findwrappertypebound inference variable inferencevariable variable three sets threesets bounds per variable boundspervariable variable prototype find single wrapper type findsinglewrappertype condition complex check condition bullet inference variable inferencevariable alpha type binding typebinding target type targettype bound forms wildcard parameterized type target type targettype is base type isbasetype inference context inferencecontext parameterized with wildcard parameterizedwithwildcard target type targettype three sets threesets bounds per variable boundspervariable alpha prototype same bounds samebounds iterator type bound typebound bounds same bounds samebounds iterator bounds has next hasnext type bound typebound bound bounds inference context inferencecontext parameterized with wildcard parameterizedwithwildcard bound super bounds superbounds iterator type bound typebound bounds super bounds superbounds iterator bounds has next hasnext type bound typebound bound bounds inference context inferencecontext parameterized with wildcard parameterizedwithwildcard bound super types supertypes parameter izations parameterizations super bounds superbounds array list arraylist type bound typebound super bounds superbounds array list arraylist super bounds superbounds len super bounds superbounds size len type binding typebinding super bounds superbounds len type binding typebinding super bounds superbounds type binding typebinding supers super types with common generic type supertypeswithcommongenerictype supers hash map hashmap hash map hashmap array list arraylist instantiation array list arraylist bound parameter izations parameterizations https bugs eclipse org bugs bug cgi test triggers condition https bugs open jdk openjdk java net browse jdk rec ommendation recommendation check proper types supers is proper type ispropertype supers is proper type ispropertype type binding typebinding equals equals equalsequals supers supers condition bullet inference variable inferencevariable alpha type binding typebinding target type targettype inference context inferencecontext ctx exists type form supertype raw type supertype target type targettype is parameterized type isparameterizedtype type binding typebinding target type targettype original three sets threesets bounds per variable boundspervariable alpha prototype iterator type bound typebound bound iterator bounditerator same bounds samebounds bound iterator bounditerator same bounds samebounds iterator bound iterator bounditerator has next hasnext type bound typebound bound iterator bounditerator super only raw superonlyraw ctx environment super bounds superbounds bound iterator bounditerator super bounds superbounds iterator bound iterator bounditerator has next hasnext type bound typebound bound iterator bounditerator super only raw superonlyraw ctx environment super only raw superonlyraw type binding typebinding type binding typebinding lookup environment lookupenvironment env inference variable inferencevariable inference types type binding typebinding super type supertype find super type originating from findsupertypeoriginatingfrom super type supertype super type supertype is parameterized type isparameterizedtype is compatible with iscompatiblewith env convert t o raw type converttorawtype type binding typebinding super types with common generic type supertypeswithcommongenerictype type binding typebinding type binding typebinding type ids typeids java lang object javalangobject type ids typeids java lang object javalangobject type binding typebinding equals equals equalsequals original original type binding typebinding type binding typebinding t super tsuper find super type originating from findsupertypeoriginatingfrom t super tsuper type binding typebinding t super tsuper type binding typebinding result super types with common generic type supertypeswithcommongenerictype superclass result result reference binding referencebinding super interfaces superinterfaces super interfaces superinterfaces super interfaces superinterfaces super interfaces superinterfaces length result super types with common generic type supertypeswithcommongenerictype super interfaces superinterfaces result result type binding typebinding get equivalent outer variable getequivalentoutervariable inference variable inferencevariable variable inference variable inferencevariable outer variables outervariables three sets threesets bounds per variable boundspervariable variable type bound typebound bound same bounds samebounds inference variable inferencevariable outer variables outervariables type binding typebinding equals equals equalsequals bound inference variable inferencevariable outer variables outervariables bounds per variable boundspervariable outer variables outervariables type bound typebound bound same bounds samebounds type binding typebinding equals equals equalsequals bound variable