copyright software rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors stephan herrmann initial api implementation lars vogel lars vogel vogella contributions bug org eclipse jdt internal compiler lookup java util array list arraylist java util collection java util collections java util hash set hashset java util list java util org eclipse jdt internal compiler ast functional expression functionalexpression org eclipse jdt internal compiler ast lambda expression lambdaexpression org eclipse jdt internal compiler ast reference expression referenceexpression constraint form ula formula expr e ssi ng expressing expression exception type expression constraint exception for mula constraintexceptionformula constraint for mula constraintformula functional expression functionalexpression left constraint exception for mula constraintexceptionformula functional expression functionalexpression left type binding typebinding type left left type relation exceptions contained object reduce inference context inferencecontext inference context inferencecontext jls scope scope inference context inferencecontext scope is functional interface isfunctionalinterface scope method binding methodbinding sam get single abstract method getsingleabstractmethod scope sam left lambda expression lambdaexpression lambda expression lambdaexpression left arguments type elided argumentstypeelided n param nparam sam parameters length n param nparam sam parameters is proper type ispropertype sam return type returntype type binding typebinding sam return type returntype is proper type ispropertype reference expression reference expression referenceexpression left is exact method reference isexactmethodreference n param nparam sam parameters length n param nparam sam parameters is proper type ispropertype sam return type returntype type binding typebinding sam return type returntype is proper type ispropertype type binding typebinding thrown sam thrown exceptions thrownexceptions inference variable inferencevariable inference variable inferencevariable thrown length thrown length thrown is proper type ispropertype thrown proper type exception inference variable inferencevariable inference variable inferencevariable thrown specification encode type parameters constraints gleaned gathered sites thrown exceptions allowed influence compatibility over load overload resolution type binding typebinding e prime eprime left lambda expression lambdaexpression lambda expression lambdaexpression lambda lambda expression lambdaexpression left resolve expression expecting resolveexpressionexpecting inference context inferencecontext scope inference context inferencecontext lambda bug gy buggy constraint type binding typebinding e prime set eprimeset lambda get thrown exceptions getthrownexceptions e prime eprime e prime set eprimeset to array toarray type binding typebinding e prime set eprimeset size reference expression referenceexpression reference expression referenceexpression reference expression referenceexpression left resolve expression expecting resolveexpressionexpecting scope inference context inferencecontext method binding methodbinding method reference expression referenceexpression reference expression referenceexpression binding method e prime eprime method thrown exceptions thrownexceptions e prime eprime e prime eprime length list constraint for mula constraintformula result array list arraylist actual e prime eprime is unchecked exception isuncheckedexception thrown length thrown is proper type ispropertype e prime eprime is compatible with iscompatiblewith thrown actual result add constraint type for mula constrainttypeformula create e prime eprime subtype inference context inferencecontext current bounds currentbounds in throws inthrows add prototype result to array toarray constraint for mula constraintformula result size collection inference variable inferencevariable input variables inputvariables inference context inferencecontext context left lambda expression lambdaexpression inference variable inferencevariable collections singleton list singletonlist inference variable inferencevariable is functional interface isfunctionalinterface context scope lambda expression lambdaexpression lambda lambda expression lambdaexpression left todo derive target type method binding methodbinding sam get single abstract method getsingleabstractmethod context scope inference variable inferencevariable variables hash set hashset lambda arguments type elided argumentstypeelided len sam parameters length len sam parameters collect inference variables collectinferencevariables variables sam return type returntype type binding typebinding sam return type returntype collect inference variables collectinferencevariables variables variables left reference expression referenceexpression inference variable inferencevariable collections singleton list singletonlist inference variable inferencevariable todo left inexact is functional interface isfunctionalinterface context scope todo derive target type method binding methodbinding sam get single abstract method getsingleabstractmethod context scope inference variable inferencevariable variables hash set hashset len sam parameters length len sam parameters collect inference variables collectinferencevariables variables sam return type returntype collect inference variables collectinferencevariables variables variables empty variable list string to string tostring string buffer stringbuffer buf string buffer stringbuffer append left angle bracket left print expression printexpression buf nls buf append append type name appendtypename buf buf append angle bracket buf to string tostring