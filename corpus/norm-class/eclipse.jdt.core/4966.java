copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler tool java io exception ioexception java input stream inputstream java nio byte buffer bytebuffer java nio char buffer charbuffer java nio charset charset java nio charset charset decoder charsetdecoder java nio charset code r result coderresult java nio charset coding error action codingerroraction java nio charset illegal charset name exception illegalcharsetnameexception java nio charset unsupported charset exception unsupportedcharsetexception java util array list arraylist javax tools file object fileobject util defines helper methods read contents handling wrong encoding util nls string separator system get property getproperty separator encoding error encodingerror position length encoding error encodingerror position length position position length length string get source getsource unit source unitsource extra source innacurate token highlight context code assumes font console fixed size sanity start position startposition position end position endposition position length start position startposition end position endposition start position startposition end position endposition unit source unitsource length source string buffer stringbuffer error buffer errorbuffer string buffer stringbuffer error buffer errorbuffer append space mark tab code under line underline token assumes good display token source statements code works display opt imal optimal expand limits source length sourcelength unit source unitsource length start position startposition source length sourcelength source length sourcelength start position startposition unit source unitsource end position endposition source length sourcelength source length sourcelength end position endposition source length sourcelength unit source unitsource trim left spaces tabs unit source unitsource unit source unitsource todo philippe trim tests updated copy source error buffer errorbuffer append unit source unitsource nls error buffer errorbuffer append util separator append compute under line underline start position startposition error buffer errorbuffer append unit source unitsource tab tab space start position startposition end position endposition source length sourcelength source length sourcelength end position endposition error buffer errorbuffer append mark error buffer errorbuffer to string tostring encoding error collector encodingerrorcollector array list arraylist encoding error encodingerror encoding errors encodingerrors array list arraylist file object fileobject file object fileobject string encoding encoding error collector encodingerrorcollector file object fileobject file object fileobject string encoding file object fileobject file object fileobject encoding encoding collect position length encoding errors encodingerrors add encoding error encodingerror position length report all encoding errors reportallencodingerrors string string encoding errors reported unit source unitsource string to char array tochararray encoding error encodingerror error encoding errors encodingerrors system err println nls file object fileobject get name getname unmappable character encoding nls encoding system err println error get source getsource unit source unitsource get input stream as char array getinputstreamaschararray input stream inputstream stream length string encoding io exception ioexception charset charset charset charset for name forname encoding illegal charset name exception illegalcharsetnameexception system err println illegal charset encoding unsupported charset exception unsupportedcharsetexception system err println unsupported charset encoding charset decoder charsetdecoder charset decoder charsetdecoder charset new decoder newdecoder charset decoder charsetdecoder on malformed input onmalformedinput coding error action codingerroraction replace on unmappable character onunmappablecharacter coding error action codingerroraction replace contents org eclipse jdt internal compiler util util get input stream as byte array getinputstreamasbytearray stream length byte buffer bytebuffer byte buffer bytebuffer byte buffer bytebuffer all ocate allocate contents length byte buffer bytebuffer contents byte buffer bytebuffer flip charset decoder charsetdecoder decode byte buffer bytebuffer array char sequence charsequence get char contents getcharcontents file object fileobject file object fileobject ignore encoding errors ignoreencodingerrors contents string encoding io exception ioexception contents charset charset charset charset for name forname encoding illegal charset name exception illegalcharsetnameexception system err println illegal charset encoding unsupported charset exception unsupportedcharsetexception system err println unsupported charset encoding charset decoder charsetdecoder charset decoder charsetdecoder charset new decoder newdecoder byte buffer bytebuffer byte buffer bytebuffer byte buffer bytebuffer all ocate allocate contents length byte buffer bytebuffer contents byte buffer bytebuffer flip ignore encoding errors ignoreencodingerrors charset decoder charsetdecoder on malformed input onmalformedinput coding error action codingerroraction replace on unmappable character onunmappablecharacter coding error action codingerroraction replace charset decoder charsetdecoder decode byte buffer bytebuffer charset decoder charsetdecoder on malformed input onmalformedinput coding error action codingerroraction report on unmappable character onunmappablecharacter coding error action codingerroraction report char buffer charbuffer char buffer charbuffer all ocate allocate contents length code r result coderresult result string replacement charset decoder charsetdecoder replacement replacement length replacementlength replacement length encoding error collector encodingerrorcollector collector result charset decoder charsetdecoder decode byte buffer bytebuffer result is malformed ismalformed result is unmappable isunmappable treat error wrong input character position collector collector encoding error collector encodingerrorcollector file object fileobject encoding report encoding error reportencodingerror collector position result length position replacement length replacementlength capacity resize char buffer charbuffer temp char buffer charbuffer all ocate allocate capacity flip temp temp append replacement byte buffer bytebuffer position byte buffer bytebuffer position result length result is overflow isoverflow char buffer charbuffer temp char buffer charbuffer all ocate allocate capacity flip temp temp flip collector collector report all encoding errors reportallencodingerrors to string tostring report encoding error reportencodingerror encoding error collector encodingerrorcollector collector position length collector collect position length