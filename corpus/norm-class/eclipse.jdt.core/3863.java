copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors mkaufman bea initial api implementation ibm corporation updated test reflect https bugs eclipse org bugs bug cgi org eclipse jdt apt tests junit framework test junit framework test suite testsuite org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core runtime i path ipath org eclipse core runtime path org eclipse jdt apt core internal apt plugin aptplugin org eclipse jdt apt core internal generated file generatedfile generated source folder manager generatedsourcefoldermanager org eclipse jdt apt core util apt config aptconfig org eclipse jdt apt tests annotations helloworld hello world annotation processor helloworldannotationprocessor org eclipse jdt apt tests annotations message r messager messager annotation processor messagerannotationprocessor org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java project ijavaproject org eclipse jdt core tests util util apt builder tests aptbuildertests apt test base apttestbase apt builder tests aptbuildertests string test suite test suite testsuite apt builder tests aptbuildertests set up setup exception set up setup project deleted tear down teardown method create project src directory project root directory i path ipath project path projectpath env add project addproject get project name getprojectname project root as src dir projectrootassrcdir env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs full build fullbuild project path projectpath remove fragment root names don collide nls env set output folder setoutputfolder project path projectpath bin i java project ijavaproject jproj env get java project getjavaproject project path projectpath apt config aptconfig set enabled setenabled jproj test util testutil create and add annotation jar createandaddannotationjar jproj string get project name getprojectname project root as src dir projectrootassrcdir nls apt builder tests aptbuildertests get name getname no src project nosrcproject i path ipath get source path getsourcepath string project name projectname get project name getprojectname project root as src dir projectrootassrcdir equals project name projectname path get project name getprojectname project root as src dir projectrootassrcdir i project iproject project env get project getproject project name projectname nls i folder ifolder src folder srcfolder project get folder getfolder src i path ipath src root srcroot src folder srcfolder get full path getfullpath src root srcroot test generated file in builder testgeneratedfileinbuilder exception test generated file in builder testgeneratedfileinbuilder get project name getprojectname reg res ses regresses buzilla test generated file in builder testgeneratedfileinbuilder project root as source dir projectrootassourcedir exception test generated file in builder testgeneratedfileinbuilder get project name getprojectname project root as src dir projectrootassrcdir test generated file in builder testgeneratedfileinbuilder exception test generated file in builder testgeneratedfileinbuilder get project name getprojectname test generated file in builder testgeneratedfileinbuilder string project name projectname i project iproject project env get project getproject project name projectname i path ipath src root srcroot get source path getsourcepath project name projectname string code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation hello world annotation helloworldannotation main string argv generatedfilepackage generated file test generatedfiletest hello world helloworld i path ipath a path apath nls nls env add class addclass nls nls src root srcroot nls nls nls nls code full build fullbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor a path apath expecting only specific problem for expectingonlyspecificproblemfor a path apath expected problem expectedproblem generatedfilepackage resolved nls nls a path apath code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation hello world annotation helloworldannotation main string argv generatedfilepackage generated file test generatedfiletest hello world helloworld env add class addclass src root srcroot code full build fullbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor i path ipath slight variation test generated file in builder testgeneratedfileinbuilder difference method invocation fully qualified test generated file in builder testgeneratedfileinbuilder string project name projectname i project iproject project env get project getproject project name projectname i path ipath src root srcroot get source path getsourcepath project name projectname string code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation generatedfilepackage generated file test generatedfiletest hello world annotation helloworldannotation main string argv generated file test generatedfiletest hello world helloworld env add class addclass src root srcroot code full build fullbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor i path ipath generating bogus type expect exception test generating illegal type name testgeneratingillegaltypename string project name projectname get project name getprojectname clear processor result clearprocessorresult hello world annotation processor helloworldannotationprocessor i project iproject project env get project getproject project name projectname i path ipath src root srcroot get source path getsourcepath project name projectname string code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation generatedfilepackage generated file test generatedfiletest hello world annotation helloworldannotation bad type main string argv generated file test generatedfiletest hello world helloworld env add class addclass src root srcroot code full build fullbuild project get full path getfullpath assert equals assertequals generate text file io exception ioexception get processor result getprocessorresult hello world annotation processor helloworldannotationprocessor type lowercase warning type wizard doesn start caps test issue warning error string code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation generatedfilepackage lowercase hello world annotation helloworldannotation lowercase main string argv lowercase hello world helloworld env add class addclass src root srcroot code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems running processors file int eractions interactions regression https bugs eclipse org bugs bug cgi test two annotations testtwoannotations string project name projectname get project name getprojectname clear processor result clearprocessorresult hello world annotation processor helloworldannotationprocessor clear processor result clearprocessorresult messager annotation processor messagerannotationprocessor i project iproject project env get project getproject project name projectname i path ipath src root srcroot get source path getsourcepath project name projectname string code message first codemessagefirst org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation org eclipse jdt apt tests annotations message r messager messager annotation messagerannotation generatedfilepackage generated file test generatedfiletest messager annotation messagerannotation severity messager annotation messagerannotation severity error hello world annotation helloworldannotation main string argv generated file test generatedfiletest hello world helloworld i path ipath a path apath env add class addclass src root srcroot code message first codemessagefirst full build fullbuild project get full path getfullpath check processor result checkprocessorresult hello world annotation processor helloworldannotationprocessor check processor result checkprocessorresult messager annotation processor messagerannotationprocessor expecting only specific problem for expectingonlyspecificproblemfor a path apath expected problem expectedproblem messager annotation processor messagerannotationprocessor problem text error nls nls a path apath test apt generated files build test nested generated file in builder testnestedgeneratedfileinbuilder exception i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath get project name getprojectname string code org eclipse jdt apt tests annotations nested helloworld nestedhelloworld nested hello world annotation nestedhelloworldannotation generatedfilepackage generated file test generatedfiletest nested hello world annotation nestedhelloworldannotation main string argv generated file test generatedfiletest hello world helloworld i path ipath a path apath nls nls env add class addclass nls nls src root srcroot nls nls nls nls code full build fullbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor a path apath expecting only specific problem for expectingonlyspecificproblemfor a path apath expected problem expectedproblem generated file test generatedfiletest resolved nls nls a path apath code org eclipse jdt apt tests annotations nested helloworld nestedhelloworld nested hello world annotation nestedhelloworldannotation generatedfilepackage generated file test generatedfiletest nested hello world annotation nestedhelloworldannotation main string argv generated file test generatedfiletest hello world helloworld env add class addclass src root srcroot code full build fullbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor i path ipath test extra dependency stuff hooked build test extra dependencies annotation processor type test expected build output dependency test extra dependencies testextradependencies string code a codea string code b codeb string code b codeb main string argv string code c codec string code c codec foo string code d coded string code e codee i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath get project name getprojectname nls nls env add class addclass nls nls src root srcroot nls nls nls nls code a codea nls nls env add class addclass nls nls src root srcroot nls nls nls nls code b codeb nls nls env add class addclass nls nls src root srcroot nls nls nls nls code c codec nls nls env add class addclass nls nls src root srcroot nls nls nls nls code d coded nls nls env add class addclass nls nls src root srcroot nls nls nls nls code e codee full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems touch shape nls nls env add class addclass nls nls src root srcroot nls nls nls nls code b codeb incremental build incrementalbuild project get full path getfullpath expecting no problems expectingnoproblems nls nls expecting compiled classes expectingcompiledclasses string nls nls expecting comp iling order expectingcompilingorder string anon tation anontation processor code annotation processor int roduce introduce dep code a codea org eclipse jdt apt tests annotations extra dependency extradependency extra dependency annotation extradependencyannotation extra dependency annotation extradependencyannotation nls nls env add class addclass nls nls src root srcroot nls nls nls nls code a codea full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems touch nls nls env add class addclass nls nls src root srcroot nls nls nls nls code c codec incremental build incrementalbuild project get full path getfullpath expecting no problems expectingnoproblems note showing annotations parse source parsing runs compiler registers file time compiler debug requestor debugrequestor nls nls expecting compiled classes expectingcompiledclasses string nls nls expecting comp iling order expectingcompilingorder string compiled no op noop annotation code annotation processor remove dep code a codea org eclipse jdt apt tests annotations noop no op annotation noopannotation no op annotation noopannotation nls nls env add class addclass nls nls src root srcroot nls nls nls nls code a codea full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems touch nls nls env add class addclass nls nls src root srcroot nls nls nls nls code c codec incremental build incrementalbuild project get full path getfullpath expecting no problems expectingnoproblems note showing annotations parse source parsing runs compiler registers file time compiler debug requestor debugrequestor nls nls expecting compiled classes expectingcompiledclasses string nls nls expecting comp iling order expectingcompilingorder string test recompile generated files changed parent modified test caching testcaching string code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation hello world annotation helloworldannotation main string argv string modified code modifiedcode org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation hello world annotation helloworldannotation main string argv other method othermethod system println i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath get project name getprojectname nls nls env add class addclass nls nls src root srcroot nls nls nls nls code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems nls nls expecting compiled classes expectingcompiledclasses string generatedfilepackage generated file test generatedfiletest touch shape nls nls env add class addclass nls nls src root srcroot nls nls nls nls modified code modifiedcode incremental build incrementalbuild project get full path getfullpath expecting no problems expectingnoproblems nls nls nls expecting compiled classes expectingcompiledclasses string test delete generated files parent file deleted multi parent support working test deleted parent file testdeletedparentfile exception i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath get project name getprojectname string code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation hello world annotation helloworldannotation string code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation hello world annotation helloworldannotation string b code bcode generatedfilepackage generated file test generatedfiletest gft i path ipath path nls nls env add class addclass nls nls src root srcroot nls nls nls nls code i path ipath path nls nls env add class addclass nls nls src root srcroot nls nls nls nls code i path ipath b path bpath nls nls env add class addclass nls nls src root srcroot nls nls nls nls b code bcode full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems delete file problems test util testutil delete file deletefile path sleep resource change event fire sleep incremental build incrementalbuild project get full path getfullpath expecting no problems expectingnoproblems delete file problem test util testutil delete file deletefile path sleep resource change event fire todo rel iable reliable consistent efficient wait sleep incremental build incrementalbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor b path bpath expecting only specific problem for expectingonlyspecificproblemfor b path bpath expected problem expectedproblem generatedfilepackage resolved type nls nls b path bpath test stop generating file in builder teststopgeneratingfileinbuilder full build fullbuild internal test stop generating file in builder internalteststopgeneratingfileinbuilder test stop generating file in builder teststopgeneratingfileinbuilder incremental build incrementalbuild internal test stop generating file in builder internalteststopgeneratingfileinbuilder internal test stop generating file in builder internalteststopgeneratingfileinbuilder full build fullbuild i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath get project name getprojectname string code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation generatedfilepackage generated file test generatedfiletest hello world annotation helloworldannotation main string argv generated file test generatedfiletest hello world helloworld i path ipath a path apath nls nls env add class addclass nls nls src root srcroot nls nls nls nls code full build fullbuild full build fullbuild project get full path getfullpath incremental build incrementalbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor a path apath expecting only specific problems for expectingonlyspecificproblemsfor a path apath expected problem expectedproblem expected problem expectedproblem generatedfilepackage resolved a path apath expected problem expectedproblem generated file test generatedfiletest resolved a path apath nls nls code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation generatedfilepackage generated file test generatedfiletest hello world annotation helloworldannotation main string argv generated file test generatedfiletest hello world helloworld env add class addclass src root srcroot code full build fullbuild full build fullbuild project get full path getfullpath incremental build incrementalbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor i path ipath full build classpath change full build fullbuild full build fullbuild project get full path getfullpath remove annotation generated file errors code org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation generatedfilepackage generated file test generatedfiletest hello world annotation helloworldannotation main string argv generated file test generatedfiletest hello world helloworld env add class addclass src root srcroot code full build fullbuild full build fullbuild project get full path getfullpath incremental build incrementalbuild project get full path getfullpath expecting only problems for expectingonlyproblemsfor a path apath expecting only specific problem for expectingonlyspecificproblemfor a path apath nls expected problem expectedproblem nls nls generated file test generatedfiletest resolved nls a path apath testaptrounding i project iproject project env get project getproject get project name getprojectname i path ipath src root srcroot get source path getsourcepath get project name getprojectname string code x codex org eclipse jdt apt tests annotations apt rounding aptrounding gen bean genbean env add class addclass src root srcroot code x codex string code y codey org eclipse jdt apt tests annotations apt rounding aptrounding gen bean genbean test bean bean env add class addclass src root srcroot code y codey full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems https bugs eclipse org bugs bug cgi config marker generated source folder classpath easy simulate test doesn test config marker testconfigmarker exception string project name projectname config marker test project configmarkertestproject i java project ijavaproject java proj javaproj create java project createjavaproject project name projectname apt disabled save configuration i classpath entry iclasspathentry java proj javaproj get raw classpath getrawclasspath i project iproject project env get project getproject project name projectname i path ipath src root srcroot get source path getsourcepath project name projectname type generation string code pkg org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation npublic foo hello world annotation helloworldannotation main string argv env add class addclass src root srcroot pkg foo code apt config aptconfig set enabled setenabled java proj javaproj full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems expecting no markers expectingnomarkers wipe source folder classpath java proj javaproj set raw classpath setrawclasspath full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems classpath updated entry source folder post marker incorrect classpath expecting no markers expectingnomarkers annotation type generation occur code pkg npublic foo main string argv env add class addclass src root srcroot pkg foo code full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems cleaned config marker previous build don generate types register config marker expecting no markers expectingnomarkers test deleted generated source folder testdeletedgeneratedsourcefolder exception string project name projectname delete gen source folder test project deletegensourcefoldertestproject i java project ijavaproject java proj javaproj create java project createjavaproject project name projectname i project iproject project env get project getproject project name projectname i path ipath src root srcroot get source path getsourcepath project name projectname type generation string code pkg org eclipse jdt apt tests annotations helloworld hello world annotation helloworldannotation npublic foo hello world annotation helloworldannotation main string argv env add class addclass src root srcroot pkg foo code apt config aptconfig set enabled setenabled java proj javaproj full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems expecting no markers expectingnomarkers generated source folder manager generatedsourcefoldermanager mgr apt plugin aptplugin get apt project getaptproject java proj javaproj get generated source folder manager getgeneratedsourcefoldermanager i folder ifolder src folder srcfolder mgr get folder getfolder assert equals assertequals src folder srcfolder exists delete gen source folder util delete src folder srcfolder assert equals assertequals src folder srcfolder exists created folder build full build fullbuild project get full path getfullpath expecting no problems expectingnoproblems expecting no markers expectingnomarkers