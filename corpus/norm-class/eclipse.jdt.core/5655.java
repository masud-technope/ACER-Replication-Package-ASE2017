copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests model junit framework test org eclipse core resources i file ifile org eclipse core resources i resource iresource org eclipse core resources i workspace runnable iworkspacerunnable org eclipse core resources incremental project builder incrementalprojectbuilder org eclipse core runtime org eclipse jdt core rename tests renametests copy move tests copymovetests i compilation unit icompilationunit rename tests renametests string attempts rename elements optional for cing forcing operation fail failure code rename negative renamenegative i java element ijavaelement elements string renamings force failure code failurecode rename get java model getjavamodel rename elements i java element ijavaelement elements get parent getparent renamings force java model exception javamodelexception jme assert true asserttrue code correct java model exception javamodelexception jme jme get status getstatus get code getcode failure code failurecode assert true asserttrue rename failed multiple renaming attempts rename element optional for cing forcing operation fail failure code rename negative renamenegative i java element ijavaelement element string rename force failure code failurecode rename get java model getjavamodel rename i java element ijavaelement element i java element ijavaelement element get parent getparent string rename force java model exception javamodelexception jme assert true asserttrue code correct java model exception javamodelexception jme jme get status getstatus get code getcode failure code failurecode assert true asserttrue rename failed element renames element container optional for cing forcing operation succeed exceptions encountered thrown rename positive renamepositive i java element ijavaelement elements string names force java model exception javamodelexception rename positive renamepositive elements i java element ijavaelement elements get parent getparent names force renames element container optional for cing forcing operation succeed exceptions encountered thrown rename positive renamepositive i java element ijavaelement elements i java element ijavaelement destinations string names force java model exception javamodelexception rename positive renamepositive elements destinations names force renames element container optional for cing forcing operation succeed exceptions encountered thrown rename positive renamepositive i java element ijavaelement elements i java element ijavaelement destinations string names force original should exist originalshouldexist java model exception javamodelexception rename positive renamepositive elements destinations names force original should exist originalshouldexist renames element container optional for cing forcing operation succeed exceptions encountered thrown rename positive renamepositive i java element ijavaelement elements i java element ijavaelement destinations string names force original should exist originalshouldexist i progress monitor iprogressmonitor monitor java model exception javamodelexception for cing forcing ensure collision exists force elements length i java element ijavaelement elements i java element ijavaelement collision generate handle generatehandle names get parent getparent assert true asserttrue collision exist collision exists rename get java model getjavamodel rename elements destinations names force monitor elements length generate element handle i java element ijavaelement elements i java element ijavaelement renamed generate handle generatehandle names get parent getparent assert true asserttrue rename d renamed element exist renamed exists original should exist originalshouldexist assert true asserttrue original element exist exists i java element delta ijavaelementdelta dest delta destdelta delta listener deltalistener get delta for getdeltafor renamed get parent getparent is main type ismaintype get parent getparent assert true asserttrue rename d renamed compilation unit result main type dest delta destdelta dest delta destdelta get kind getkind i java element delta ijavaelementdelta assert true asserttrue children correct element copy dest delta destdelta get element getelement equals renamed get parent getparent assert true asserttrue flag moved dest delta destdelta get flags getflags i java element delta ijavaelementdelta moved assert true asserttrue moved handle original dest delta destdelta get moved from element getmovedfromelement equals get parent getparent assert true asserttrue destination container changed dest delta destdelta delta children changed deltachildrenchanged dest delta destdelta i java element delta ijavaelementdelta deltas force dest delta destdelta get changed children getchangedchildren dest delta destdelta get added children getaddedchildren assert true asserttrue children correct element rename deltas length deltas get element getelement equals renamed assert true asserttrue kind deltas get kind getkind force i java element delta ijavaelementdelta changed i java element delta ijavaelementdelta deltas dest delta destdelta get removed children getremovedchildren assert true asserttrue removed children correct element rename deltas length deltas get element getelement equals assert true asserttrue kind removed deltas get kind getkind i java element delta ijavaelementdelta removed renames element container optional for cing forcing operation succeed exceptions encountered thrown rename positive renamepositive i java element ijavaelement element string rename force java model exception javamodelexception rename positive renamepositive i java element ijavaelement element string rename force setup test set u p setup exception set u p setup create java project createjavaproject string src bin create file createfile src java bar bar other method othermethod string foo string get compilation unit getcompilationunit src java start deltas startdeltas set u p suite setupsuite exception set u p suite setupsuite i java project ijavaproject project create java project createjavaproject binary project binaryproject string src string jcl lib lib create file createfile binary project binaryproject src java bar foo project get project getproject build incremental project builder incrementalprojectbuilder full build wait for auto build waitforautobuild project set raw classpath setrawclasspath i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path binary project binaryproject lib tests belong skipped names tests testbugxxxx bugxxxx tests prefix test combine access restrictions testcombineaccessrestrictions tests names string test rename field fragment testrenamefieldfragment tests numbers tests range test suite build model test suite buildmodeltestsuite rename tests renametests clean up cleanup previous test tear down teardown exception stop deltas stopdeltas delete project deleteproject tear down teardown tear down suite teardownsuite exception delete project deleteproject binary project binaryproject tear down suite teardownsuite ensures binary field renamed test rename binary field testrenamebinaryfield java model exception javamodelexception i class file iclassfile get class file getclassfile binary project binaryproject lib i field ifield binary field binaryfield get type gettype get field getfield bar rename negative renamenegative binary field binaryfield fred i java model status constants ijavamodelstatusconstants read ensures binary method renamed test rename binary method testrenamebinarymethod java model exception javamodelexception i class file iclassfile get class file getclassfile binary project binaryproject lib i method imethod binary method binarymethod get type gettype get methods getmethods rename negative renamenegative binary method binarymethod fred i java model status constants ijavamodelstatusconstants read ensures binary type renamed test rename binary type testrenamebinarytype java model exception javamodelexception i class file iclassfile get class file getclassfile binary project binaryproject lib i type itype binary type binarytype get type gettype rename negative renamenegative binary type binarytype i java model status constants ijavamodelstatusconstants read operation fail renaming member time supported test rename compilation unit and type testrenamecompilationunitandtype rename negative renamenegative i java element ijavaelement get type gettype string java i java model status constants ijavamodelstatusconstants invalid element types ensures compilation units renamed existing force flag test rename compilation unit resulting in collision testrenamecompilationunitresultingincollision core exception coreexception create file createfile src java rename negative renamenegative java i java model status constants ijavamodelstatusconstants collision rename positive renamepositive java ensures compilation units renamed verifies proper change deltas generated side running operation test rename compilation units checking deltas testrenamecompilationunitscheckingdeltas core exception coreexception create file createfile src java i compilation unit icompilationunit get compilation unit getcompilationunit src java clear deltas cleardeltas rename positive renamepositive i compilation unit icompilationunit string new x newx java new y newy java assert deltas assertdeltas unexpected deltas children src children children new x newx java moved java src new y newy java moved java src java moved new x newx java src java moved new y newy java src ensures compilation unit renamed invalid java valid java identifier test rename compilation unit with invalid name testrenamecompilationunitwithinvalidname rename negative renamenegative new x newx i java model status constants ijavamodelstatusconstants invalid rename negative renamenegative java i java model status constants ijavamodelstatusconstants invalid operation fail renaming code illegal argument exception illegalargumentexception code test rename compilation unit with null testrenamecompilationunitwithnull java model exception javamodelexception rename illegal argument exception illegalargumentexception iae assert true asserttrue rename ensures constr utor construtor renamed code rename elements operation renameelementsoperation code test rename constructor testrenameconstructor i method imethod constructor get type gettype get method getmethod string rename negative renamenegative constructor new name newname i java model status constants ijavamodelstatusconstants collision test rename u testrenamecu core exception coreexception rename new x newx java assert true asserttrue original exist exists i compilation unit icompilationunit newcu get compilation unit getcompilationunit src new x newx java assert true asserttrue exist newcu exists assert types equal asserttypesequal unexpected types new x newx newcu get all types getalltypes assert deltas assertdeltas unexpected deltas children src children children new x newx java moved java src java moved new x newx java src test rename u testrenamecu core exception coreexception create file createfile src java clear deltas cleardeltas rename java i file ifile file i file ifile get resource getresource i compilation unit icompilationunit destcu get compilation unit getcompilationunit src java i file ifile dest file destfile i file ifile destcu get resource getresource assert true asserttrue original exist exists assert true asserttrue original file exist file exists assert true asserttrue destination exist destcu exists assert true asserttrue destination file exist dest file destfile exists assert types equal asserttypesequal unexpected types destcu get all types getalltypes assert deltas assertdeltas unexpected deltas children src children children java moved java src java children fine grained primary resource moved java src ensures correct scheduling rule running i compilation unit icompilationunit rename regression test https bugs eclipse org bugs bug cgi test rename u testrenamecu exception i workspace runnable iworkspacerunnable runnable i workspace runnable iworkspacerunnable i progress monitor iprogressmonitor monitor core exception coreexception rename tests renametests rename new x newx java assert true asserttrue original exist rename tests renametests exists get workspace getworkspace runnable get folder getfolder src i resource iresource ensures correct scheduling rule running i compilation unit icompilationunit rename regression test https bugs eclipse org bugs bug cgi test rename u testrenamecu exception create folder createfolder src create file createfile src java i workspace runnable iworkspacerunnable runnable i workspace runnable iworkspacerunnable i progress monitor iprogressmonitor monitor core exception coreexception i compilation unit icompilationunit get compilation unit getcompilationunit src java rename new x newx java assert true asserttrue original exist exists get workspace getworkspace runnable get folder getfolder src i resource iresource ensures renaming empty fragment doesn disappear regression test bug refactoring empty disappears test rename empty f testrenameemptypf core exception coreexception create folder createfolder src clear deltas cleardeltas get package getpackage src rename i package fragment ipackagefragment new frag newfrag get package getpackage src assert true asserttrue exist new frag newfrag exists assert deltas assertdeltas unexpected deltas children src children moved src moved src ensures renaming enum renames constructors enum regression test bug rename enum type update constructor class cast exception classcastexception test rename enum testrenameenum core exception coreexception create java project createjavaproject string string jcl lib create file createfile java enum i compilation unit icompilationunit enumcu get compilation unit getcompilationunit java enumcu rename other enum otherenum java i compilation unit icompilationunit renamed cu renamedcu get compilation unit getcompilationunit other enum otherenum java assert source equals assertsourceequals unexpected source rename enum other enum otherenum other enum otherenum renamed cu renamedcu get source getsource delete project deleteproject ensures renaming enum enum constant body doesn class cast exeption classcastexeption regression test bug rename enum type update constructor class cast exception classcastexception test rename enum testrenameenum core exception coreexception create java project createjavaproject string string jcl lib create file createfile java enum i compilation unit icompilationunit enumcu get compilation unit getcompilationunit java enumcu rename other enum otherenum java i compilation unit icompilationunit renamed cu renamedcu get compilation unit getcompilationunit other enum otherenum java assert source equals assertsourceequals unexpected source rename enum other enum otherenum renamed cu renamedcu get source getsource delete project deleteproject ensures fields renamed verifies proper change deltas generated side running operation ensures fields pos itioned positioned location rename test rename fields checking deltas and positions testrenamefieldscheckingdeltasandpositions java model exception javamodelexception i type itype type get type gettype i field ifield field type get field getfield bar rename positive renamepositive field fred assert deltas assertdeltas unexpected deltas children src children children java children fine grained primary resource children fine grained bar fred ensure correct pos itioning ensurecorrectpositioning type type get field getfield fred type get field getfield ensures renaming field fragment renames fragment regression test bug wrong field renamed test rename field fragment testrenamefieldfragment exception create file createfile src java i compilation unit icompilationunit get compilation unit getcompilationunit src java i type itype type get type gettype i field ifield field type get field getfield rename positive renamepositive field renamed ensures fields renamed renamings fails test rename fields multi status testrenamefieldsmultistatus core exception coreexception string add ition addition multi status multistatus i type itype type get type gettype i field ifield i fields ifields type get fields getfields string new names newnames string i fields ifields length i fields ifields length i field ifield i fields ifields new names newnames add ition addition get element name getelementname invalid new names newnames type get java model getjavamodel rename i fields ifields i java element ijavaelement type new names newnames java model exception javamodelexception jme assert true asserttrue multistatus failure jme get status getstatus is multi status ismultistatus assert true asserttrue invalid destination jme get status getstatus get code getcode i java model status constants ijavamodelstatusconstants invalid assert true asserttrue exception assert deltas assertdeltas unexpected deltas children src children children java children fine grained primary resource children fine grained multi status other multistatusother i java element ijavaelement copy generate handle generatehandle i fields ifields new names newnames type assert true asserttrue copy exist copy exists ensures fields renamed test rename fields resulting in collision testrenamefieldsresultingincollision java model exception javamodelexception string add ition addition i type itype type get type gettype i field ifield i fields ifields type get fields getfields string new names newnames string i fields ifields length i fields ifields length i field ifield i fields ifields new names newnames add ition addition get element name getelementname fields new names newnames new names newnames rename negative renamenegative i fields ifields new names newnames i java model status constants ijavamodelstatusconstants collision ensures renaming can celed canceled test rename fields with cancel testrenamefieldswithcancel core exception coreexception is canceled iscanceled string add ition addition i type itype type rename tests renametests get type gettype i field ifield i fields ifields type get fields getfields string new names newnames string i fields ifields length i fields ifields length i field ifield i fields ifields new names newnames add ition addition get element name getelementname test progress monitor testprogressmonitor monitor test progress monitor testprogressmonitor get instance getinstance monitor set cancelled counter setcancelledcounter rename positive renamepositive i fields ifields i java element ijavaelement type new names newnames monitor operation canceled exception operationcanceledexception is canceled iscanceled assert true asserttrue operation thrown operation can celed canceled exception is canceled iscanceled ensures initializer renamed test rename initializer testrenameinitializer i type itype type source typesource get type gettype i initializer iinitializer initializer source initializersource type source typesource get initializer getinitializer rename negative renamenegative initializer source initializersource some name somename i java model status constants ijavamodelstatusconstants invalid element types ensures main types renamed side renaming main types types enclosing compilation unit renamed test rename main types testrenamemaintypes core exception coreexception create file createfile src java i compilation unit icompilationunit get compilation unit getcompilationunit src java i package fragment ipackagefragment pkg i package fragment ipackagefragment get parent getparent i java element ijavaelement types i java element ijavaelement get type gettype get type gettype string new names newnames string new x newx new y newy rename positive renamepositive i java element ijavaelement get type gettype get type gettype i java element ijavaelement types get parent getparent types get parent getparent new names newnames test compilation unit main type constructors renamed i compilation unit icompilationunit renamedcu pkg get compilation unit getcompilationunit new x newx java i compilation unit icompilationunit renamedcu pkg get compilation unit getcompilationunit new y newy java i type itype new type newtype renamedcu get type gettype new x newx i type itype new type newtype renamedcu get type gettype new y newy assert true asserttrue new x newx new type newtype exists assert true asserttrue new y newy new type newtype exists i method imethod constructor new type newtype get method getmethod new x newx string i method imethod constructor new type newtype get method getmethod new y newy string assert true asserttrue new x newx constructor exists assert true asserttrue new y newy constructor exists ensures main types renamed child main type side renaming main types types enclosing compilation unit renamed ftkmbd itpjcore rename parent child operation test rename main types and child testrenamemaintypesandachild core exception coreexception create file createfile src java i compilation unit icompilationunit get compilation unit getcompilationunit src java string new names newnames string new bar newbar new x newx new y newy i java element ijavaelement elements i java element ijavaelement get type gettype get field getfield bar get type gettype get type gettype i java element ijavaelement destinations i java element ijavaelement elements length elements length destinations elements get parent getparent get java model getjavamodel rename elements destinations new names newnames test compilation unit main type renamed i package fragment ipackagefragment pkg i package fragment ipackagefragment get parent getparent i compilation unit icompilationunit renamedcu pkg get compilation unit getcompilationunit new x newx java i type itype new x newx renamedcu get type gettype new x newx assert true asserttrue new x newx new x newx exists i compilation unit icompilationunit renamedcu pkg get compilation unit getcompilationunit new y newy java i type itype new y newy renamedcu get type gettype new y newy assert true asserttrue new y newy new y newy exists i field ifield new bar newbar new x newx get field getfield new bar newbar assert true asserttrue rename d renamed field exist new bar newbar exists ensures method renamed test rename method testrenamemethod java model exception javamodelexception i type itype type get type gettype i method imethod method type get method getmethod foo string q string qstring rename positive renamepositive method new foo newfoo ensure method move result rename ensure correct pos itioning ensurecorrectpositioning type type get method getmethod new foo newfoo string q string qstring type get method getmethod other method othermethod string q string qstring ensures method renamed existing method test rename method resulting in collision testrenamemethodresultingincollision i type itype type get type gettype i method imethod method type get method getmethod foo string q string qstring rename negative renamenegative method other method othermethod i java model status constants ijavamodelstatusconstants collision ensures method renamed invalid method test rename methods with invalid name testrenamemethodswithinvalidname i method imethod method get type gettype get method getmethod foo string q string qstring rename negative renamenegative method some invalid name someinvalidname i java model status constants ijavamodelstatusconstants invalid test rename f testrenamepf core exception coreexception create folder createfolder src create file createfile src java i package fragment ipackagefragment frag get package getpackage src clear deltas cleardeltas frag rename new z newz i package fragment ipackagefragment new frag newfrag get package getpackage src new z newz assert true asserttrue exist frag exists assert true asserttrue exist new frag newfrag exists i compilation unit icompilationunit compilation unit compilationunit new frag newfrag get compilation unit getcompilationunit java assert true asserttrue java exits compilation unit compilationunit exists i type itype types compilation unit compilationunit get types gettypes assert true asserttrue types types length i type itype main type maintype types assert equals assertequals unexpected java main type new z newz main type maintype get fully qualified name getfullyqualifiedname assert deltas assertdeltas unexpected deltas children src children new z newz moved src moved new z newz src ensures renaming spaces works regression test bug ref actor refactor rename sub package subpackage start space test rename f testrenamepf core exception coreexception create folder createfolder src create file createfile src java i package fragment ipackagefragment frag get package getpackage src clear deltas cleardeltas frag rename i package fragment ipackagefragment new frag newfrag get package getpackage src assert true asserttrue exist frag exists assert true asserttrue exist new frag newfrag exists i compilation unit icompilationunit compilation unit compilationunit new frag newfrag get compilation unit getcompilationunit java assert true asserttrue java exits compilation unit compilationunit exists i type itype types compilation unit compilationunit get types gettypes assert true asserttrue types types length i type itype main type maintype types assert equals assertequals unexpected java main type main type maintype get fully qualified name getfullyqualifiedname assert deltas assertdeltas unexpected deltas children src children moved src moved src ensure renaming i java project ijavaproject find type findtype iw orskpace runnable iworskpacerunnable finds type regression test bug npe renaming test rename f testrenamepf core exception coreexception create folder createfolder src create file createfile src java i workspace runnable iworkspacerunnable runnable i workspace runnable iworkspacerunnable i progress monitor iprogressmonitor monitor core exception coreexception get package getpackage src rename i type itype type get java project getjavaproject find type findtype assert types equal asserttypesequal u nepected unepected type i type itype type get workspace getworkspace runnable test rename with sub packages testrenamepfwithsubpackages core exception coreexception create folder createfolder src create file createfile src java clear deltas cleardeltas get package getpackage src rename new x newx i package fragment ipackagefragment old frag oldfrag get package getpackage src assert true asserttrue exist old frag oldfrag exists i package fragment ipackagefragment new frag newfrag get package getpackage src new x newx assert true asserttrue exist new frag newfrag exists i compilation unit icompilationunit compilation unit compilationunit old frag oldfrag get compilation unit getcompilationunit java assert true asserttrue java exits compilation unit compilationunit exists assert deltas assertdeltas unexpected deltas children src children new x newx ensures method renamed syntax errors test rename syntax error method testrenamesyntaxerrormethod core exception coreexception create file createfile src java syntax error foo i method imethod method get compilation unit getcompilationunit src java get type gettype get method getmethod foo rename positive renamepositive method new foo newfoo ensures attempting rename incorrect number renamings fails test rename with invalid renamings testrenamewithinvalidrenamings i method imethod method get compilation unit getcompilationunit src java get type gettype get method getmethod foo rename negative renamenegative i java element ijavaelement method string i java model status constants ijavamodelstatusconstants bounds rename negative renamenegative i java element ijavaelement method i java model status constants ijavamodelstatusconstants ensures working copy renamed test rename working copy testrenameworkingcopy java model exception javamodelexception i compilation unit icompilationunit copy copy get working copy getworkingcopy rename negative renamenegative copy new x newx i java model status constants ijavamodelstatusconstants invalid element types copy copy discard working copy discardworkingcopy