junit runner java util java java net url java util zip test case class loader testcaseclassloader class loader classloader scanned path vector f path items fpathitems excluded paths string default exclusions defaultexclusions junit framework junit extensions junit runner excluded properties file string excluded file excluded properties excluded paths vector f excluded fexcluded constructs test case loader testcaseloader scans path excluded paths test case class loader testcaseclassloader system get property getproperty java path constructs test case loader testcaseloader scans path excluded paths test case class loader testcaseclassloader string class path classpath scan path scanpath class path classpath read excluded packages readexcludedpackages scan path scanpath string class path classpath string separator system get property getproperty path separator f path items fpathitems vector string tokenizer stringtokenizer string tokenizer stringtokenizer class path classpath separator has more tokens hasmoretokens f path items fpathitems add element addelement next token nexttoken url get resource getresource string class loader classloader get system resource getsystemresource input stream inputstream get resource as stream getresourceasstream string class loader classloader get system resource as stream getsystemresourceasstream is excluded isexcluded string f excluded fexcluded size starts with startswith string f excluded fexcluded element at elementat load class loadclass string resolve class not found exception classnotfoundexception find loaded class findloadedclass is excluded isexcluded find system class findsystemclass class not found exception classnotfoundexception data lookup class data lookupclassdata data class not found exception classnotfoundexception define class defineclass data data length resolve resolve class resolveclass lookup class data lookupclassdata string class name classname class not found exception classnotfoundexception data f path items fpathitems size string path string f path items fpathitems element at elementat string file name filename class name classname replace is jar isjar path data load jar data loadjardata path file name filename data load file data loadfiledata path file name filename data data class not found exception classnotfoundexception class name classname is jar isjar string path entry pathentry path entry pathentry ends with endswith jar path entry pathentry ends with endswith zip load file data loadfiledata string path string file name filename file file file path file name filename file exists get class data getclassdata file get class data getclassdata file file input stream fileinputstream stream file input stream fileinputstream byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream stream read write stream close close to byte array tobytearray io exception ioexception load jar data loadjardata string path string file name filename zip file zipfile zip file zipfile input stream inputstream stream file archive file path archive exists zip file zipfile zip file zipfile archive io exception ioexception zip entry zipentry entry zip file zipfile get entry getentry file name filename entry size entry get size getsize stream zip file zipfile get input stream getinputstream entry data size pos pos size stream read data pos data length pos pos zip file zipfile close data io exception ioexception stream stream close io exception ioexception read excluded packages readexcludedpackages f excluded fexcluded vector default exclusions defaultexclusions length f excluded fexcluded add element addelement default exclusions defaultexclusions input stream inputstream get class getclass get resource as stream getresourceasstream excluded file properties properties load io exception ioexception close io exception ioexception enumeration property names propertynames has more elements hasmoreelements string key string next element nextelement key starts with startswith excluded string path get property getproperty key path path trim path ends with endswith path path substring path length path length f excluded fexcluded add element addelement path