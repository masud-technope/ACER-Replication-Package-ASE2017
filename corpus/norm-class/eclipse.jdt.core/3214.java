copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests rewrite describing java util hash set hashset java util list junit framework test org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core dom ast org eclipse jdt core dom ast node astnode org eclipse jdt core dom block org eclipse jdt core dom catch clause catchclause org eclipse jdt core dom compilation unit compilationunit org eclipse jdt core dom expression org eclipse jdt core dom expression statement expressionstatement org eclipse jdt core dom if statement ifstatement org eclipse jdt core dom infix expression infixexpression org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom method invocation methodinvocation org eclipse jdt core dom parenthesized expression parenthesizedexpression org eclipse jdt core dom simple type simpletype org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom statement org eclipse jdt core dom try statement trystatement org eclipse jdt core dom type declaration typedeclaration org eclipse jdt core dom type parameter typeparameter org eclipse jdt core dom rewrite ast rewrite astrewrite org eclipse jdt core dom rewrite list rewrite listrewrite org eclipse jdt internal core dom rewrite line comment end offsets linecommentendoffsets suppress warnings suppresswarnings rawtypes unchecked line comment offsets test linecommentoffsetstest ast rewriting test astrewritingtest line comment offsets test linecommentoffsetstest string line comment offsets test linecommentoffsetstest string api level apilevel api level apilevel test suite create suite createsuite line comment offsets test linecommentoffsetstest test empty line comments testemptylinecomments exception string buffer stringbuffer buf string buffer stringbuffer buf append line comment end offsets linecommentendoffsets offsets line comment end offsets linecommentendoffsets res offsets is end of line comment isendoflinecomment assert false assertfalse res res offsets remove assert false assertfalse res test remove testremove exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test comment buf append comment buf append comment buf append comment string contents buf to string tostring i compilation unit icompilationunit pack create compilation unit createcompilationunit java contents compilation unit compilationunit ast root astroot createast line comment end offsets linecommentendoffsets offsets line comment end offsets linecommentendoffsets ast root astroot get comment list getcommentlist contents index of indexof contents index of indexof contents index of indexof contents index of indexof assert false assertfalse offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment res offsets remove assert true asserttrue res res offsets remove assert false assertfalse res assert false assertfalse offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment assert false assertfalse offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment res offsets remove assert true asserttrue res assert false assertfalse offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment assert false assertfalse offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment assert false assertfalse offsets is end of line comment isendoflinecomment res offsets remove assert true asserttrue res assert false assertfalse offsets is end of line comment isendoflinecomment assert false assertfalse offsets is end of line comment isendoflinecomment assert false assertfalse offsets is end of line comment isendoflinecomment assert true asserttrue offsets is end of line comment isendoflinecomment assert false assertfalse offsets is end of line comment isendoflinecomment test line comment end offsets testlinecommentendoffsets exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append comment buf append comment buf append buf append foo buf append buf append foo buf append comment buf append buf append comment comment buf append buf append buf append comment string content buf to string tostring i compilation unit icompilationunit pack create compilation unit createcompilationunit java content compilation unit compilationunit ast root astroot createast line comment end offsets linecommentendoffsets offsets line comment end offsets linecommentendoffsets ast root astroot get comment list getcommentlist hash set hashset expected offsets expectedoffsets hash set hashset content length content char at charat expected offsets expectedoffsets add integer value of valueof count char content charcontent content to char array tochararray content length expected content length char content charcontent actual offsets is end of line comment isendoflinecomment char content charcontent assert equals assertequals expected actual actual offsets is end of line comment isendoflinecomment assert equals assertequals expected actual expected count assert equals assertequals count test line comment end offsets mixed line delimiter testlinecommentendoffsetsmixedlinedelimiter exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append comment buf append comment buf append buf append foo buf append buf append foo buf append comment buf append buf append comment comment buf append buf append buf append comment string content buf to string tostring i compilation unit icompilationunit pack create compilation unit createcompilationunit java content compilation unit compilationunit ast root astroot createast line comment end offsets linecommentendoffsets offsets line comment end offsets linecommentendoffsets ast root astroot get comment list getcommentlist hash set hashset expected offsets expectedoffsets hash set hashset content length content char at charat expected offsets expectedoffsets add integer value of valueof count char content charcontent content to char array tochararray content length expected content length char content charcontent actual offsets is end of line comment isendoflinecomment char content charcontent assert equals assertequals expected actual expected count assert equals assertequals count test comment in lists testcommentinlists exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append comment buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite type type declaration typedeclaration types property simple type simpletype new interface newinterface ast new simple type newsimpletype ast new simple name newsimplename list rewrite listrewrite insert last insertlast new interface newinterface string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append comment buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test comment in type testcommentintype exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append comment buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite type type declaration typedeclaration types property simple type simpletype new interface newinterface ast new simple type newsimpletype ast new simple name newsimplename list rewrite listrewrite insert last insertlast new interface newinterface string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append comment buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append list buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite type type declaration typedeclaration type parameters property type parameter typeparameter new type newtype ast new type parameter newtypeparameter new type newtype set name setname ast new simple name newsimplename list rewrite listrewrite insert last insertlast new type newtype string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append list buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append object method buf append param text param buf append param text param buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot expression statement expressionstatement statement expression statement expressionstatement method declaration methoddeclaration type body declarations bodydeclarations get body getbody statements method invocation methodinvocation inv method invocation methodinvocation statement get expression getexpression list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite inv method invocation methodinvocation arguments property list rewrite listrewrite insert last insertlast ast new simple name newsimplename param string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append object method buf append param text param buf append param text param buf append param buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append io exception ioexception buf append buf append comment buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot try statement trystatement statement try statement trystatement method declaration methoddeclaration type body declarations bodydeclarations get body getbody statements list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite statement try statement trystatement clauses property catch clause catchclause clause ast new catch clause newcatchclause single variable declaration singlevariabledeclaration new single variable declaration newsinglevariabledeclaration ast new single variable declaration newsinglevariabledeclaration new single variable declaration newsinglevariabledeclaration set name setname ast new simple name newsimplename new single variable declaration newsinglevariabledeclaration set type settype ast new simple type newsimpletype ast new simple name newsimplename my exception myexception clause set exception setexception new single variable declaration newsinglevariabledeclaration list rewrite listrewrite insert last insertlast clause string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append io exception ioexception buf append buf append comment buf append my exception myexception buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append comment buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot if statement ifstatement statement if statement ifstatement method declaration methoddeclaration type body declarations bodydeclarations get body getbody statements rewrite statement if statement ifstatement statement property ast new block newblock string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append buf append comment buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append don buf append buf append buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot if statement ifstatement statement if statement ifstatement method declaration methoddeclaration type body declarations bodydeclarations get body getbody statements expression expression infix expression infixexpression statement get expression getexpression get left operand getleftoperand parenthesized expression parenthesizedexpression parenthesized expression parenthesizedexpression ast new parenthesized expression newparenthesizedexpression parenthesized expression parenthesizedexpression set expression setexpression expression rewrite create copy target createcopytarget expression rewrite replace expression parenthesized expression parenthesizedexpression string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append don buf append buf append buf append buf append buf append assert equal string assertequalstring preview buf to string tostring test bug testbug exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append foo buf append foo comment buf append foo buf append buf append i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed type declaration typedeclaration type find type declaration findtypedeclaration ast root astroot method declaration methoddeclaration method method declaration methoddeclaration type body declarations bodydeclarations list statements method get body getbody statements ast node astnode copy rewrite create copy target createcopytarget ast node astnode statements block new block newblock ast new block newblock new block newblock statements add new statement newstatement ast new block newblock statements add copy new block newblock statements add new statement newstatement ast rewrite get list rewrite getlistrewrite method get body getbody block statements property insert last insertlast new block newblock string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append foo buf append foo comment buf append foo buf append buf append bar buf append foo comment buf append bar buf append buf append buf append assert equal string assertequalstring preview buf to string tostring statement new statement newstatement ast ast method invocation methodinvocation inv ast new method invocation newmethodinvocation inv set name setname ast new simple name newsimplename bar ast new expression statement newexpressionstatement inv test comment at end testcommentatend exception i package fragment ipackagefragment pack source folder sourcefolder create package fragment createpackagefragment test string buffer stringbuffer buf string buffer stringbuffer buf append test buf append buf append buf append comment i compilation unit icompilationunit pack create compilation unit createcompilationunit java buf to string tostring compilation unit compilationunit ast root astroot createast ast rewrite astrewrite rewrite ast rewrite astrewrite create ast root astroot getast ast ast ast root astroot getast assert true asserttrue parse errors ast root astroot get flags getflags ast node astnode malformed list rewrite listrewrite list rewrite listrewrite rewrite get list rewrite getlistrewrite ast root astroot compilation unit compilationunit types property type declaration typedeclaration new type newtype ast new type declaration newtypedeclaration new type newtype set name setname ast new simple name newsimplename list rewrite listrewrite insert last insertlast new type newtype string preview evaluate rewrite evaluaterewrite rewrite buf string buffer stringbuffer buf append test buf append buf append buf append comment buf append buf append buf append assert equal string assertequalstring preview buf to string tostring