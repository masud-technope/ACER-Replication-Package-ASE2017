copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors tyeung bea initial api implementation org eclipse jdt apt core internal util java util array list arraylist java util arrays java util list java util map org eclipse jdt core dom ast node astnode org eclipse jdt core dom ast visitor astvisitor org eclipse jdt core dom annotation org eclipse jdt core dom annotation type declaration annotationtypedeclaration org eclipse jdt core dom annotation type member declaration annotationtypememberdeclaration org eclipse jdt core dom block org eclipse jdt core dom body declaration bodydeclaration org eclipse jdt core dom do statement dostatement org eclipse jdt core dom enum constant declaration enumconstantdeclaration org eclipse jdt core dom enum declaration enumdeclaration org eclipse jdt core dom field declaration fielddeclaration org eclipse jdt core dom for statement forstatement org eclipse jdt core dom i extended modifier iextendedmodifier org eclipse jdt core dom if statement ifstatement org eclipse jdt core dom marker annotation markerannotation org eclipse jdt core dom method declaration methoddeclaration org eclipse jdt core dom normal annotation normalannotation org eclipse jdt core dom single member annotation singlememberannotation org eclipse jdt core dom single variable declaration singlevariabledeclaration org eclipse jdt core dom try statement trystatement org eclipse jdt core dom type declaration typedeclaration ast visit ors visitors flavors visit ors visitors traverse ast annotations declaration level visitor operates declaration level method body field initializers block annotation visitor annotationvisitor ast visitor astvisitor list annotation annotations param annotations pop ulated populated visitor annotation visitor annotationvisitor list annotation annotations annotations annotations visit marker annotation markerannotation annotation annotations add annotation visit single member annotation singlememberannotation annotation annotations add annotation visit normal annotation normalannotation annotation annotations add annotation don hit arguments for mal formal parameters visit block blk visit do statement dostatement do statement dostatement visit for statement forstatement for statement forstatement visit if statement ifstatement if statement ifstatement visit try statement trystatement try statement trystatement reset annotations clear locate annotations declaration annotate visitor operates declaration level method body field initializers block annotated node visitor annotatednodevisitor ast visitor astvisitor map ast node astnode list annotation result param map pop ulated populated visitor key declaration ast node list annotation ast nodes annotate declaration annotated node visitor annotatednodevisitor map ast node astnode list annotation map result map visit declaration visit org eclipse jdt core dom package declaration packagedeclaration node list annotation annotations node annotations annotations is empty isempty result node annotations visit declaration visit org eclipse jdt core dom type declaration typedeclaration node visit body declaration visitbodydeclaration node visit annotation type declaration visit org eclipse jdt core dom annotation type declaration annotationtypedeclaration node visit body declaration visitbodydeclaration node visit enum type declaration visit org eclipse jdt core dom enum declaration enumdeclaration node visit body declaration visitbodydeclaration node visit field declaration visit org eclipse jdt core dom field declaration fielddeclaration node visit body declaration visitbodydeclaration node visit enum constant declaration visit org eclipse jdt core dom enum constant declaration enumconstantdeclaration node visit body declaration visitbodydeclaration node visit method declaration visit method declaration methoddeclaration node visit body declaration visitbodydeclaration node visit annotation type member visit annotation type member declaration annotationtypememberdeclaration node visit body declaration visitbodydeclaration node visit body declaration visitbodydeclaration body declaration bodydeclaration node list i extended modifier iextendedmodifier ext mods extmods node modifiers list annotation annos i extended modifier iextendedmodifier ext mod extmod ext mods extmods ext mod extmod is annotation isannotation annos annos array list arraylist result node annos annos add annotation ext mod extmod visiting for mal formal parameter declaration visit single variable declaration singlevariabledeclaration node list i extended modifier iextendedmodifier ext mods extmods node modifiers list annotation annos i extended modifier iextendedmodifier ext mod extmod ext mods extmods ext mod extmod is annotation isannotation annos annos array list arraylist result node annos annos add annotation ext mod extmod skip declaration level visit block node don declaration level visit marker annotation markerannotation node visit normal annotation normalannotation node visit single member annotation singlememberannotation node annotation locate declaration annot ates annotates visitor operates declaration level method body field initializers block declaration finder declarationfinder ast visitor astvisitor annotation anno declaration body declaration parameter remain annotation doesn annot ates annotates ast node astnode result declaration finder declarationfinder annotation annotation anno annotation result search ast node astnode get annotated node getannotatednode result visit nodes annotations visit annotation type declaration annotationtypedeclaration node internal visit internalvisit node visit annotation type member declaration annotationtypememberdeclaration node internal visit internalvisit node visit enum declaration enumdeclaration node internal visit internalvisit node visit enum constant declaration enumconstantdeclaration node internal visit internalvisit node visit field declaration fielddeclaration node internal visit internalvisit node visit method declaration methoddeclaration node internal visit internalvisit node visit type declaration typedeclaration node internal visit internalvisit node visit single variable declaration singlevariabledeclaration node internal visit internalvisit node internal visit internalvisit ast node astnode node terminate search result node start nodestart node get start position getstartposition node end nodeend node start nodestart node get length getlength anno start annostart anno get start position getstartposition anno end annoend anno start annostart anno get length getlength node start nodestart anno end annoend passed position search node start nodestart anno end annoend node end nodeend anno start annostart node end nodeend anno start annostart annotation declaration surrounds offset list i extended modifier iextendedmodifier extended modifiers extendedmodifiers node get node type getnodetype ast node astnode single variable declaration single variable declaration singlevariabledeclaration declaration single variable declaration singlevariabledeclaration node extended modifiers extendedmodifiers declaration modifiers body declaration bodydeclaration declaration body declaration bodydeclaration node extended modifiers extendedmodifiers declaration modifiers i extended modifier iextendedmodifier modifier extended modifiers extendedmodifiers modifier anno result node searching visit block node don declaration level visit marker annotation markerannotation node visit normal annotation normalannotation node visit single member annotation singlememberannotation node res ponsible responsible finding offset tighest ast node match starts offset ast visitor array offsets pass author tyeung ending offset finder endingoffsetfinder ast visitor astvisitor sorted starting offset sortedstartingoffset parallel code sorted offsets sortedoffsets code offset ast node tightest match starting offset ending offsets endingoffsets param offsets array offsets sorted illegal argument exception illegalargumentexception code offsets code code code ending offset finder endingoffsetfinder offsets offsets nls illegal argument exception illegalargumentexception argument sort array arrays sort offsets duplicates count len offsets length len offsets offsets count count offsets length sorted starting offset sortedstartingoffset count len offsets length len offsets offsets sorted starting offset sortedstartingoffset offsets sorted starting offset sortedstartingoffset offsets ending offsets endingoffsets count count ending offsets endingoffsets pre visit previsit ast node astnode node starting offset startingoffset node get start position getstartposition ending offset endingoffset starting offset startingoffset node get length getlength starting offset inclusive start index startindex arrays binary search binarysearch sorted starting offset sortedstartingoffset starting offset startingoffset offset exclusive end index endindex arrays binary search binarysearch sorted starting offset sortedstartingoffset ending offset endingoffset start index startindex start index startindex start index startindex end index endindex end index endindex end index endindex end index endindex exclusive include end index endindex entry computation end index endindex start index startindex sorted starting offset sortedstartingoffset length start index startindex end index endindex ending offsets endingoffsets ending offsets endingoffsets ending offset endingoffset ending offset endingoffset ending offsets endingoffsets ending offsets endingoffsets ending offset endingoffset get ending offset getendingoffset starting offset startingoffset arrays binary search binarysearch sorted starting offset sortedstartingoffset starting offset startingoffset ending offsets endingoffsets