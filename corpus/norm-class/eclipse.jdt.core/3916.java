copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation het google bug org eclipse jdt internal compiler apt model java lang reflect array java lang reflect field java lang reflect invocation handler invocationhandler java lang reflect method java lang reflect proxy java util array list arraylist java util arrays java util collections java util linked hash map linkedhashmap java util list java util map java util map entry javax lang model element annotation mirror annotationmirror javax lang model element annotation value annotationvalue javax lang model element executable element executableelement javax lang model type declared type declaredtype javax lang model type mirrored type exception mirroredtypeexception javax lang model type mirrored types exception mirroredtypesexception javax lang model type type mirror typemirror org eclipse jdt internal compiler apt dispatch base processing env impl baseprocessingenvimpl org eclipse jdt internal compiler impl constant org eclipse jdt internal compiler lookup annotation binding annotationbinding org eclipse jdt internal compiler lookup array binding arraybinding org eclipse jdt internal compiler lookup element value pair elementvaluepair org eclipse jdt internal compiler lookup field binding fieldbinding org eclipse jdt internal compiler lookup method binding methodbinding org eclipse jdt internal compiler lookup reference binding referencebinding org eclipse jdt internal compiler lookup type binding typebinding org eclipse jdt internal compiler lookup type ids typeids annotation mirror impl annotationmirrorimpl annotation mirror annotationmirror invocation handler invocationhandler base processing env impl baseprocessingenvimpl env annotation binding annotationbinding binding annotation mirror impl annotationmirrorimpl base processing env impl baseprocessingenvimpl env annotation binding annotationbinding binding env env binding binding override equals object obj obj annotation mirror impl annotationmirrorimpl binding annotation mirror impl annotationmirrorimpl obj binding equals binding annotation mirror impl annotationmirrorimpl obj binding obj wrapped proxy obj obj equals equals annotation binding annotationbinding annotation binding annotationbinding annotation binding annotationbinding annotation binding annotationbinding identity comparison annotation binding annotationbinding get annotation type getannotationtype annotation binding annotationbinding get annotation type getannotationtype element value pair elementvaluepair element value pairs elementvaluepairs annotation binding annotationbinding get element value pairs getelementvaluepairs element value pair elementvaluepair element value pairs elementvaluepairs annotation binding annotationbinding get element value pairs getelementvaluepairs length element value pairs elementvaluepairs length length element value pairs elementvaluepairs length loop length element value pair elementvaluepair pair element value pairs elementvaluepairs loop pair match length element value pair elementvaluepair pair element value pairs elementvaluepairs pair binding pair binding pair pair loop pair pair object pair object arrays equals object pair object pair pair equals pair loop override declared type declaredtype get annotation type getannotationtype declared type declaredtype env get factory getfactory new type mirror newtypemirror binding get annotation type getannotationtype members annotation mirror explicit values values included override map executable element executableelement annotation value annotationvalue get element values getelementvalues binding collections empty map emptymap element value pair elementvaluepair pairs binding get element value pairs getelementvaluepairs map executable element executableelement annotation value annotationvalue value map valuemap linked hash map linkedhashmap pairs length element value pair elementvaluepair pair pairs method binding methodbinding method pair get method binding getmethodbinding method ide ally ideally create fake executable element impl executableelementimpl executable element executableelement executable element impl executableelementimpl env method annotation value annotationvalue annotation member value annotationmembervalue env pair get value getvalue method value map valuemap collections unmodifiable map unmodifiablemap value map valuemap javax lang model util elements get element values with defaults getelementvalueswithdefaults annotation mirror annotationmirror members annotation mirror explicit values map executable element executableelement annotation value annotationvalue get element values with defaults getelementvalueswithdefaults binding collections empty map emptymap element value pair elementvaluepair pairs binding get element value pairs getelementvaluepairs reference binding referencebinding anno type annotype binding get annotation type getannotationtype map executable element executableelement annotation value annotationvalue value map valuemap linked hash map linkedhashmap method binding methodbinding method anno type annotype methods binding element value pair elementvaluepair list found explicit value foundexplicitvalue pairs length method binding methodbinding explicit binding explicitbinding pairs get method binding getmethodbinding method explicit binding explicitbinding executable element executableelement executable element impl executableelementimpl env explicit binding explicitbinding annotation value annotationvalue annotation member value annotationmembervalue env pairs get value getvalue explicit binding explicitbinding value map valuemap found explicit value foundexplicitvalue exists found explicit value foundexplicitvalue object default val defaultval method get default value getdefaultvalue default val defaultval executable element executableelement executable element impl executableelementimpl env method annotation value annotationvalue annotation member value annotationmembervalue env default val defaultval method value map valuemap collections unmodifiable map unmodifiablemap value map valuemap override hash code hashcode binding env hash code hashcode binding hash code hashcode get annotation getannotation returns ref lective reflective proxy annotation processors invoke methods annotation proxy method called challenge processor compiled annotation definition compiler mention annotation def ective defective source actual type type expected caller result class cast exception classcastexception ugly processor correct type mismatch java lang reflect invocation handler invocationhandler invoke java lang object java lang reflect method java lang object override object invoke object proxy method method object args throwable binding string method name methodname method get name getname args args length method name methodname equals hash code hashcode nls integer value of valueof hash code hashcode method name methodname equals to string tostring nls to string tostring method name methodname equals annotation type annotationtype nls proxy get class getclass get interfaces getinterfaces args length method name methodname equals equals nls value of valueof equals args methods annotation member arguments args args length nls nls no such method exception nosuchmethodexception method method get name getname format args formatargs args exist annotation to string tostring method binding methodbinding method binding methodbinding get method binding getmethodbinding method name methodname method binding methodbinding nls nls no such method exception nosuchmethodexception method method get name getname exist annotation to string tostring object actual value actualvalue found method foundmethod element value pair elementvaluepair pairs binding get element value pairs getelementvaluepairs element value pair elementvaluepair pair pairs method name methodname equals string pair get name getname actual value actualvalue pair get value getvalue found method foundmethod found method foundmethod could n couldn find explicit actual value actualvalue method binding methodbinding get default value getdefaultvalue expected type expectedtype method get return type getreturntype type binding typebinding actual type actualtype method binding methodbinding return type returntype get reflection value getreflectionvalue actual value actualvalue actual type actualtype expected type expectedtype override string to string tostring type mirror typemirror decl get annotation type getannotationtype string builder stringbuilder string builder stringbuilder append append decl to string tostring map executable element executableelement annotation value annotationvalue values get element values getelementvalues values is empty isempty append entry executable element executableelement annotation value annotationvalue values entry set entryset nls append append get key getkey get simple name getsimplename nls append nls append get value getvalue to string tostring append to string tostring constructing exception message text string string format args formatargs object args estimate separators characters string builder stringbuilder builder string builder stringbuilder args length builder append args length nls builder append builder append args get class getclass get name getname builder append builder to string tostring find annotation member compiler method binding member method binding methodbinding get method binding getmethodbinding string reference binding referencebinding anno type annotype binding get annotation type getannotationtype method binding methodbinding methods anno type annotype get methods getmethods to char array tochararray method binding methodbinding method methods annotation members parameters method parameters length method convert annotation member jdt reflection actual type type ref lective reflective invoke r invoker method expecting types permitted member values member constant primitive type string enum constant annotation array multidimensional arrays permitted param actual value actualvalue represented link element value pair elementvaluepair get value getvalue param actual type actualtype type link method binding methodbinding param expected type expectedtype type ref lective reflective method invoke r invoker expecting object expected type representing annotation member dummy object get reflection value getreflectionvalue object actual value actualvalue type binding typebinding actual type actualtype expected type expectedtype expected type expectedtype expected type guess conversion actual value actualvalue type equivalent factory get matching dummy value getmatchingdummyvalue expected type expectedtype expected type expectedtype is array isarray equals expected type expectedtype get component type getcomponenttype value d valued mirrored types exception mirroredtypesexception actual type actualtype is array type isarraytype array binding arraybinding actual type actualtype leaf component type leafcomponenttype erasure type ids typeids java lang class javalangclass object bindings actual value actualvalue object bindings object actual value actualvalue actual value actualvalue type binding typebinding single element passed array annotation type annotationtype bindings object actual value actualvalue bindings bindings list type mirror typemirror mirrors array list arraylist bindings length bindings length bindings type binding typebinding mirrors add env get factory getfactory new type mirror newtypemirror type binding typebinding bindings mirrored types exception mirroredtypesexception mirrors todo actual type binding typebinding type mirror typemirror error type errortype handle arrays types my enum myenum convert array to reflection array convertjdtarraytoreflectionarray actual value actualvalue actual type actualtype expected type expectedtype equals expected type expectedtype value d valued mirrored type exception mirroredtypeexception actual value actualvalue type binding typebinding type mirror typemirror mirror env get factory getfactory new type mirror newtypemirror type binding typebinding actual value actualvalue mirrored type exception mirroredtypeexception mirror todo actual type binding typebinding type mirror typemirror error type errortype handle unitary values type my enum myenum convert value to reflection type convertjdtvaluetoreflectiontype actual value actualvalue actual type actualtype expected type expectedtype convert array jdt types element value pair elementvaluepair get value getvalue object int constant intconstant elements type expected ref lective reflective method invocation handle arrays handle primitives enum constants types string param jdt value jdtvalue actual returned element value pair elementvaluepair get value getvalue method binding methodbinding get default getdefault param jdt type jdttype type annotation method binding param expected type expectedtype type invoke r invoker method expecting array type object array created object convert array to reflection array convertjdtarraytoreflectionarray object jdt value jdtvalue type binding typebinding jdt type jdttype expected type expectedtype expected type expectedtype expected type expectedtype is array isarray jdt type jdttype is array type isarraytype sort syntax error object jdt array jdtarray bug legal pass solo element array type d typed jdt value jdtvalue jdt value jdtvalue object create array expected type jdt array jdtarray object array new instance newinstance jdt value jdtvalue get class getclass jdt array jdtarray jdt value jdtvalue jdt array jdtarray object jdt value jdtvalue type binding typebinding jdt leaf type jdtleaftype jdt type jdttype leaf component type leafcomponenttype expected leaf type expectedleaftype expected type expectedtype get component type getcomponenttype length jdt array jdtarray length object return array returnarray array new instance newinstance expected leaf type expectedleaftype length length object jdt element value jdtelementvalue jdt array jdtarray expected leaf type expectedleaftype is primitive isprimitive string equals expected leaf type expectedleaftype jdt element value jdtelementvalue constant equals expected leaf type expectedleaftype array set boolean setboolean return array returnarray constant jdt element value jdtelementvalue boolean value booleanvalue equals expected leaf type expectedleaftype array set byte setbyte return array returnarray constant jdt element value jdtelementvalue byte value bytevalue equals expected leaf type expectedleaftype array set char setchar return array returnarray constant jdt element value jdtelementvalue char value charvalue equals expected leaf type expectedleaftype array set double setdouble return array returnarray constant jdt element value jdtelementvalue double value doublevalue equals expected leaf type expectedleaftype array set float setfloat return array returnarray constant jdt element value jdtelementvalue float value floatvalue equals expected leaf type expectedleaftype array set int setint return array returnarray constant jdt element value jdtelementvalue int value intvalue equals expected leaf type expectedleaftype array set long setlong return array returnarray constant jdt element value jdtelementvalue long value longvalue equals expected leaf type expectedleaftype array set short setshort return array returnarray constant jdt element value jdtelementvalue short value shortvalue string equals expected leaf type expectedleaftype array return array returnarray constant jdt element value jdtelementvalue string value stringvalue primitive string expected actual coerce d coerced todo actual array primitives unpack factory set array matching dummy value setarraymatchingdummyvalue return array returnarray expected leaf type expectedleaftype expected leaf type expectedleaftype is enum isenum object return val returnval jdt leaf type jdtleaftype jdt leaf type jdtleaftype is enum isenum jdt element value jdtelementvalue field binding fieldbinding field binding fieldbinding binding field binding fieldbinding jdt element value jdtelementvalue field returned field returnedfield returned field returnedfield expected leaf type expectedleaftype get field getfield string binding returned field returnedfield return val returnval returned field returnedfield no such field exception nosuchfieldexception nsfe illegal access exception illegalaccessexception iae array return array returnarray return val returnval expected leaf type expectedleaftype is annotation isannotation member expected annotation type wrap annotation proxy object return val returnval jdt leaf type jdtleaftype is annotation type isannotationtype jdt element value jdtelementvalue annotation binding annotationbinding annotation mirror impl annotationmirrorimpl anno mirror annomirror annotation mirror impl annotationmirrorimpl env get factory getfactory new annotation mirror newannotationmirror annotation binding annotationbinding jdt element value jdtelementvalue return val returnval proxy new proxy instance newproxyinstance expected leaf type expectedleaftype get class loader getclassloader expected leaf type expectedleaftype anno mirror annomirror array return array returnarray return val returnval array return array returnarray return array returnarray convert jdt annotation element value pair elementvaluepair get value getvalue int constant intconstant field binding fieldbinding type expected ref lective reflective method invocation enum constant type code expected type expectedtype dummy type actual converted object convert value to reflection type convertjdtvaluetoreflectiontype object jdt value jdtvalue type binding typebinding actual type actualtype expected type expectedtype expected type expectedtype is primitive isprimitive string equals expected type expectedtype jdt value jdtvalue constant equals expected type expectedtype constant jdt value jdtvalue boolean value booleanvalue equals expected type expectedtype constant jdt value jdtvalue byte value bytevalue equals expected type expectedtype constant jdt value jdtvalue char value charvalue equals expected type expectedtype constant jdt value jdtvalue double value doublevalue equals expected type expectedtype constant jdt value jdtvalue float value floatvalue equals expected type expectedtype constant jdt value jdtvalue int value intvalue equals expected type expectedtype constant jdt value jdtvalue long value longvalue equals expected type expectedtype constant jdt value jdtvalue short value shortvalue string equals expected type expectedtype constant jdt value jdtvalue string value stringvalue todo actual array primitives unpack factory get matching dummy value getmatchingdummyvalue expected type expectedtype expected type expectedtype is enum isenum object return val returnval actual type actualtype actual type actualtype is enum isenum jdt value jdtvalue field binding fieldbinding field binding fieldbinding binding field binding fieldbinding jdt value jdtvalue field returned field returnedfield returned field returnedfield expected type expectedtype get field getfield string binding returned field returnedfield return val returnval returned field returnedfield no such field exception nosuchfieldexception nsfe illegal access exception illegalaccessexception iae return val returnval factory get matching dummy value getmatchingdummyvalue expected type expectedtype return val returnval expected type expectedtype is annotation isannotation member expected annotation type wrap annotation proxy actual type actualtype is annotation type isannotationtype jdt value jdtvalue annotation binding annotationbinding annotation mirror impl annotationmirrorimpl anno mirror annomirror annotation mirror impl annotationmirrorimpl env get factory getfactory new annotation mirror newannotationmirror annotation binding annotationbinding jdt value jdtvalue proxy new proxy instance newproxyinstance expected type expectedtype get class loader getclassloader expected type expectedtype anno mirror annomirror annotation annotation type caller factory get matching dummy value getmatchingdummyvalue expected type expectedtype