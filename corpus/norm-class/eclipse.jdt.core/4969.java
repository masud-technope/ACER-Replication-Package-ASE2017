copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors wharley bea initial api implementation ibm corporation org eclipse jdt compiler apt tests java file java io exception ioexception java util array list arraylist java util list javax tools java compiler javacompiler javax tools tool provider toolprovider junit framework test case testcase junit framework test suite testsuite test ability execute annotation processors batch mode including tests file generation processor environment suite meant exhaustively test types ystem typesystem functionality batch dispatch tests batchdispatchtests test case testcase processor names usage processor classes string inheritedannoproc org eclipse jdt compiler apt tests processors inherited inherited anno proc inheritedannoproc string arg options processor processor path processorpath string arg options proc proc xprint processor info xprintprocessorinfo xprint rounds xprintrounds test suite testsuite suite test suite testsuite suite test suite testsuite suite add test suite addtestsuite batch dispatch tests batchdispatchtests suite batch dispatch tests batchdispatchtests string override set up setup exception set up setup batch test utils batchtestutils init verify eclipse compiler properly supports apt command options test check options testcheckoptions string option arg options assert equals assertequals option requires argument batch test utils batchtestutils get eclipse compiler geteclipsecompiler is supported option issupportedoption option string option arg options assert equals assertequals option requires argument batch test utils batchtestutils get eclipse compiler geteclipsecompiler is supported option issupportedoption option veriy processor sees correct environment options sanity check system compiler io exception ioexception test processor arguments with system compiler testprocessorargumentswithsystemcompiler io exception ioexception system compiler java compiler javacompiler compiler tool provider toolprovider get system java compiler getsystemjavacompiler compiler system println system java compiler internal test processor arguments internaltestprocessorarguments compiler veriy processor sees correct environment options called eclipse compiler io exception ioexception test processor arguments with eclipse compiler testprocessorargumentswitheclipsecompiler io exception ioexception java compiler javacompiler compiler batch test utils batchtestutils get eclipse compiler geteclipsecompiler internal test processor arguments internaltestprocessorarguments compiler read annotation values generate system compiler javac sanity check verify processors sample code compiler options correct io exception ioexception test compiler one class with system compiler testcompileroneclasswithsystemcompiler io exception ioexception system compiler java compiler javacompiler compiler tool provider toolprovider get system java compiler getsystemjavacompiler compiler system println system java compiler internal test generate class internaltestgenerateclass compiler read annotation values generate eclipse compiler io exception ioexception test compiler one class with eclipse compiler testcompileroneclasswitheclipsecompiler io exception ioexception eclipse compiler java compiler javacompiler compiler batch test utils batchtestutils get eclipse compiler geteclipsecompiler internal test generate class internaltestgenerateclass compiler validate inherited annotations test javac compiler io exception ioexception test inherited annos with system compiler testinheritedannoswithsystemcompiler io exception ioexception java compiler javacompiler compiler tool provider toolprovider get system java compiler getsystemjavacompiler compiler system println system java compiler internal test inheritance internaltestinheritance compiler inheritedannoproc test dispatch annotation processor inherited annotations io exception ioexception test inherited annos with eclipse compiler testinheritedannoswitheclipsecompiler io exception ioexception java compiler javacompiler compiler batch test utils batchtestutils get eclipse compiler geteclipsecompiler internal test inheritance internaltestinheritance compiler inheritedannoproc verify type annotations processors io exception ioexception test two annotations testtwoannotations io exception ioexception file target folder targetfolder test utils testutils concat path concatpath batch test utils batchtestutils get src folder name getsrcfoldername targets dispatch file input file inputfile batch test utils batchtestutils copy resource copyresource targets dispatch two annotations twoannotations java target folder targetfolder assert not null assertnotnull input file input file inputfile list string options array list arraylist string list check args proc checkargsproc processor processor illegal state exception illegalstateexception detects mismatch options add afoo bar options add anovalue options add abar batch test utils batchtestutils compile one class compileoneclass batch test utils batchtestutils get eclipse compiler geteclipsecompiler options input file inputfile check src files generated file gen src file gensrcfile test utils testutils concat path concatpath batch test utils batchtestutils get gen folder name getgenfoldername gen two annotations gen twoannotationsgen java assert true asserttrue generated src file exist gen src file gensrcfile exists file class file classfile test utils testutils concat path concatpath batch test utils batchtestutils get bin folder name getbinfoldername targets dispatch two annotations twoannotations assert true asserttrue ordinary src file compiled class file classfile exists file gen class file genclassfile test utils testutils concat path concatpath batch test utils batchtestutils get bin folder name getbinfoldername gen two annotations gen twoannotationsgen assert true asserttrue generated src file compiled gen class file genclassfile exists called system compiler eclipse compiler internal test generate class internaltestgenerateclass java compiler javacompiler compiler io exception ioexception file target folder targetfolder test utils testutils concat path concatpath batch test utils batchtestutils get src folder name getsrcfoldername targets dispatch file input file inputfile batch test utils batchtestutils copy resource copyresource targets dispatch has gen class hasgenclass java target folder targetfolder assert not null assertnotnull input file input file inputfile list string options array list arraylist string batch test utils batchtestutils compile one class compileoneclass compiler options input file inputfile check gen src files generated file gen src file gensrcfile test utils testutils concat path concatpath batch test utils batchtestutils get gen folder name getgenfoldername gen hgc gen hgcgen java assert true asserttrue generated src file exist gen src file gensrcfile exists file class file classfile test utils testutils concat path concatpath batch test utils batchtestutils get bin folder name getbinfoldername targets dispatch has gen class hasgenclass assert true asserttrue ordinary src file compiled class file classfile exists file gen class file genclassfile test utils testutils concat path concatpath batch test utils batchtestutils get bin folder name getbinfoldername gen hgc gen hgcgen assert true asserttrue generated src file compiled gen class file genclassfile exists called system compiler eclipse compiler internal test processor arguments internaltestprocessorarguments java compiler javacompiler compiler io exception ioexception file target folder targetfolder test utils testutils concat path concatpath batch test utils batchtestutils get src folder name getsrcfoldername targets dispatch file input file inputfile batch test utils batchtestutils copy resource copyresource targets dispatch has check args hascheckargs java target folder targetfolder assert not null assertnotnull input file input file inputfile list string options array list arraylist string list check args proc checkargsproc processor processor illegal state exception illegalstateexception detects mismatch options add afoo bar options add anovalue options add abar batch test utils batchtestutils compile one class compileoneclass compiler options input file inputfile test functionality running processor types resources targets processor support annotations report errors success methods base processor baseprocessor io exception ioexception internal test inheritance internaltestinheritance java compiler javacompiler compiler string processor class processorclass io exception ioexception system clear property clearproperty processor class processorclass file target folder targetfolder test utils testutils concat path concatpath batch test utils batchtestutils get src folder name getsrcfoldername targets dispatch inherited anno inheritedanno batch test utils batchtestutils copy resources copyresources targets dispatch inherited anno inheritedanno target folder targetfolder list string options array list arraylist string options add processor class processorclass batch test utils batchtestutils compile tree compiletree compiler options target folder targetfolder succeeded processor property succeeded error assert equals assertequals succeeded system get property getproperty processor class processorclass https bugs eclipse org bugs bug cgi test io exception ioexception file target folder targetfolder test utils testutils concat path concatpath batch test utils batchtestutils get src folder name getsrcfoldername targets dispatch file input file inputfile batch test utils batchtestutils copy resource copyresource targets dispatch java target folder targetfolder assert not null assertnotnull input file input file inputfile file classpath entry classpathentry test utils testutils concat path concatpath file batch test utils batchtestutils get plugin directory path getplugindirectorypath batch test utils batchtestutils get resource folder name getresourcefoldername get absolute path getabsolutepath targets dispatch list string options array list arraylist string list check args proc checkargsproc processor processor illegal state exception illegalstateexception detects mismatch options add classpath options add classpath entry classpathentry get absolute path getabsolutepath options add verbose batch test utils batchtestutils compile one class compileoneclass batch test utils batchtestutils get eclipse compiler geteclipsecompiler options input file inputfile override tear down teardown exception batch test utils batchtestutils tear down teardown