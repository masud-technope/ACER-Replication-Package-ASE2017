copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler parser internal structure parsing recovery org eclipse jdt internal compiler ast ast node astnode org eclipse jdt internal compiler ast abstract method declaration abstractmethoddeclaration org eclipse jdt internal compiler ast block org eclipse jdt internal compiler ast field declaration fielddeclaration org eclipse jdt internal compiler ast import reference importreference org eclipse jdt internal compiler ast local declaration localdeclaration org eclipse jdt internal compiler ast statement org eclipse jdt internal compiler ast type declaration typedeclaration org eclipse jdt internal compiler util util recovered element recoveredelement recovered element recoveredelement parent bracket balance bracketbalance found opening brace foundopeningbrace parser recovering parser recoveringparser recovered lambda element recoveredlambdaelement track entry exit lambdas counter prevent incorrect mutations current element https bugs eclipse org bugs bug cgi lambda nest level lambdanestlevel recovered element recoveredelement recovered element recoveredelement parent bracket balance bracketbalance parent bracket balance bracketbalance recovered element recoveredelement recovered element recoveredelement parent bracket balance bracketbalance parser parser parent parent bracket balance bracketbalance bracket balance bracketbalance recovering parser recoveringparser parser recovered element recoveredelement add annotation name addannotationname identifier ptr identifierptr identifier length ptr identifierlengthptr annotation start annotationstart bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend annotation start annotationstart parent add annotation name addannotationname identifier ptr identifierptr identifier length ptr identifierlengthptr annotation start annotationstart bracket balance value bracketbalancevalue record method declaration recovered element recoveredelement add abstract method declaration abstractmethoddeclaration method declaration methoddeclaration bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend method declaration methoddeclaration declaration source start declarationsourcestart parent add method declaration methoddeclaration bracket balance value bracketbalancevalue record nested block declaration recovered element recoveredelement add block nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend nested block declaration nestedblockdeclaration source start sourcestart parent add nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue record field declaration recovered element recoveredelement add field declaration fielddeclaration field declaration fielddeclaration bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend field declaration fielddeclaration declaration source start declarationsourcestart parent add field declaration fielddeclaration bracket balance value bracketbalancevalue record reference recovered element recoveredelement add import reference importreference import reference importreference bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend import reference importreference declaration source start declarationsourcestart parent add import reference importreference bracket balance value bracketbalancevalue record local declaration recovered element recoveredelement add local declaration localdeclaration local declaration localdeclaration bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend local declaration localdeclaration declaration source start declarationsourcestart parent add local declaration localdeclaration bracket balance value bracketbalancevalue record statement recovered element recoveredelement add statement statement bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent recovered type recoveredtype type declaration typedeclaration type declaration typedeclaration recovered type recoveredtype type declaration typedeclaration type declaration typedeclaration type declaration typedeclaration bits ast node astnode is anonymous type isanonymoustype https bugs eclipse org bugs bug cgi select on message send selectonmessagesend zoo statement source start sourcestart type declaration typedeclaration source start sourcestart statement source end sourceend type declaration typedeclaration source end sourceend update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend statement source start sourcestart parent add statement bracket balance value bracketbalancevalue record type declaration recovered element recoveredelement add type declaration typedeclaration type declaration typedeclaration bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend type declaration typedeclaration declaration source start declarationsourcestart parent add type declaration typedeclaration bracket balance value bracketbalancevalue add block statement addblockstatement recovered block recoveredblock recovered block recoveredblock block block recovered block recoveredblock block declaration blockdeclaration block statements statement statements block statements statements length recovered block recoveredblock add statements add modifier addmodifier flag modifiers source start modifierssourcestart implementation answer depth element parent link depth depth recovered element recoveredelement current current current parent depth depth answer enclosing method node recovered initializer recoveredinitializer enclosing initializer enclosinginitializer recovered element recoveredelement current current current recovered initializer recoveredinitializer recovered initializer recoveredinitializer current current current parent answer enclosing method node recovered method recoveredmethod enclosing method enclosingmethod recovered element recoveredelement current current current recovered method recoveredmethod recovered method recoveredmethod current current current parent answer enclosing type node recovered type recoveredtype enclosing type enclosingtype recovered element recoveredelement current current current recovered type recoveredtype recovered type recoveredtype current current current parent answer closest parser parser parser recovered element recoveredelement current current current recovering parser recoveringparser current recovering parser recoveringparser current current parent answer parsed structure ast node astnode parse tree parsetree reset pending modifiers resetpendingmodifiers implementation recovered elements pending modifiers override method iter ate iterate enclosing blocks tag preserve content preserve enclosing blocks preserveenclosingblocks recovered element recoveredelement current current current recovered block recoveredblock recovered block recoveredblock current preserve content preservecontent anonymous types current recovered type recoveredtype recovered type recoveredtype current preserve content preservecontent current current parent answer position previous spaces trim spaces unclosed elements previous available line end previousavailablelineend position parser parser parser parser position scanner scanner parser scanner scanner line ends lineends position util get line number getlinenumber position scanner line ends lineends scanner line ptr lineptr position previous line end previouslineend scanner line ends lineends source scanner source previous line end previouslineend position source source position previous line end previouslineend answer source parse node source end sourceend string tab string tabstring tab string buffer stringbuffer result string buffer stringbuffer tab nls result append result to string tostring answer top node recovered element recoveredelement top element topelement recovered element recoveredelement current current parent current current parent current string to string tostring to string tostring string to string tostring tab to string tostring answer enclosing type node recovered type recoveredtype type recovered element recoveredelement current current current recovered type recoveredtype recovered type recoveredtype current current current parent update body start bodystart parse node update body start updatebodystart body start bodystart found opening brace foundopeningbrace update parse node parser disappear rest arting restarting recovery update from parser state updatefromparserstate implementation closing brace consumed closed current element current element currentelement exited recovered element recoveredelement update on closing brace updateonclosingbrace brace start bracestart brace end braceend bracket balance bracketbalance parent update source end if necessary updatesourceendifnecessary brace start bracestart brace end braceend parent opening brace consumed expected opening current element body start bodystart updated recovered element recoveredelement update on opening brace updateonopeningbrace brace end braceend recovered element recoveredelement update on opening brace updateonopeningbrace brace start bracestart brace end braceend bracket balance bracketbalance update body start updatebodystart brace end braceend update update parse node update parse tree updateparsetree implementation update declaration source end declarationsourceend parse node update source end if necessary updatesourceendifnecessary brace start bracestart brace end braceend implementation update source end if necessary updatesourceendifnecessary source end sourceend update source end if necessary updatesourceendifnecessary source end sourceend source end sourceend