copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contribution bug compiler apply annotation types analysis bug compiler evaluate annotations array types bug compiler restore nullness info type annotations files bug follow type annotations bug bug ensure runjdtcoretests cope annotations enabled bug massage type annotated analysis gel deep encoded type bindings bug bogus error contradictory specification var ags varags bug evaluate default location defaultlocation attribute non null by default nonnullbydefault bug type mismatch param etrized parametrized annotation attribute bug incorrect analysis error reporting type parameters bug non null by default nonnullbydefault wrongly applied implicit type bound binary type bug clean handling type annotations wrt type variables bug non null by default nonnullbydefault illegally affect bug compiler java compiler recognize declaration style annotations bug compiler analysis emits incorrect warning non null by default nonnullbydefault bug annotations null pointer exception nullpointerexception nullable type param andy clement go pivotal gopivotal aclement gopivotal contributions bug compiler revive code generation support type annotations olivier work bug compiler type annotations int ersection intersection types dropped code generator bug compiler type annotations constructor dropped code generator org eclipse jdt internal compiler ast java util array list arraylist java util list org eclipse jdt internal compiler ast visitor astvisitor org eclipse jdt internal compiler ast null annotation matching nullannotationmatching check mode checkmode org eclipse jdt internal compiler codegen annotation context annotationcontext org eclipse jdt internal compiler codegen annotation target type constants annotationtargettypeconstants org eclipse jdt internal compiler flow flow context flowcontext org eclipse jdt internal compiler flow flow info flowinfo org eclipse jdt internal compiler impl compiler options compileroptions org eclipse jdt internal compiler impl constant org eclipse jdt internal compiler lookup annotation binding annotationbinding org eclipse jdt internal compiler lookup array binding arraybinding org eclipse jdt internal compiler lookup binding org eclipse jdt internal compiler lookup block scope blockscope org eclipse jdt internal compiler lookup class scope classscope org eclipse jdt internal compiler lookup local variable binding localvariablebinding org eclipse jdt internal compiler lookup lookup environment lookupenvironment org eclipse jdt internal compiler lookup problem reasons problemreasons org eclipse jdt internal compiler lookup problem reference binding problemreferencebinding org eclipse jdt internal compiler lookup reference binding referencebinding org eclipse jdt internal compiler lookup scope org eclipse jdt internal compiler lookup substitution org eclipse jdt internal compiler lookup tag bits tagbits org eclipse jdt internal compiler lookup type binding typebinding org eclipse jdt internal compiler lookup type ids typeids org eclipse jdt internal compiler problem problem severities problemseverities suppress warnings suppresswarnings rawtypes unchecked type reference typereference expression type reference typereference type arguments type reference typereference simplified specification complex type reference type annotations type reference typereference has null type annotation hasnulltypeannotation annotation position annotationposition enum annotation position annotationposition arrays outer most outermost dimension parameterized types type nested types inner most innermost type level declaration annotation apply main type arrays leaf component type main type leaf type position admitting type annotations annotation collector annotationcollector ast visitor astvisitor list annotation contexts annotationcontexts expression type reference typereference target type targettype info info local variable binding localvariablebinding local variable localvariable annotation annotations on dimensions annotationsondimensions dimensions wildcard current wildcard currentwildcard annotation collector annotationcollector type parameter typeparameter type parameter typeparameter target type targettype type parameter index typeparameterindex list annotation contexts annotationcontexts annotation contexts annotationcontexts annotation contexts annotationcontexts type reference typereference type parameter typeparameter type target type targettype target type targettype info type parameter index typeparameterindex annotation collector annotationcollector local declaration localdeclaration local declaration localdeclaration target type targettype local variable binding localvariablebinding local variable localvariable list annotation contexts annotationcontexts annotation contexts annotationcontexts annotation contexts annotationcontexts type reference typereference local declaration localdeclaration type target type targettype target type targettype local variable localvariable local variable localvariable annotation collector annotationcollector local declaration localdeclaration local declaration localdeclaration target type targettype parameter index parameterindex list annotation contexts annotationcontexts annotation contexts annotationcontexts annotation contexts annotationcontexts type reference typereference local declaration localdeclaration type target type targettype target type targettype info parameter index parameterindex annotation collector annotationcollector type reference typereference type reference typereference target type targettype list annotation contexts annotationcontexts annotation contexts annotationcontexts annotation contexts annotationcontexts type reference typereference type reference typereference target type targettype target type targettype annotation collector annotationcollector expression type reference typereference target type targettype info list annotation contexts annotationcontexts annotation contexts annotationcontexts annotation contexts annotationcontexts type reference typereference type reference typereference info info target type targettype target type targettype annotation collector annotationcollector type reference typereference type reference typereference target type targettype info type index typeindex list annotation contexts annotationcontexts annotation contexts annotationcontexts annotation contexts annotationcontexts type reference typereference type reference typereference info info target type targettype target type targettype info type index typeindex annotation collector annotationcollector type reference typereference type reference typereference target type targettype info list annotation contexts annotationcontexts annotation annotations on dimensions annotationsondimensions dimensions annotation contexts annotationcontexts annotation contexts annotationcontexts type reference typereference type reference typereference info info target type targettype target type targettype annotations on dimensions annotationsondimensions annotations on dimensions annotationsondimensions array references string manifest array allocation expression arrayallocationexpression type string type carrying dimensions count passed dimensions parameter annotations on dimensions annotationsondimensions annotations dimensions dimensions dimensions internal visit internalvisit annotation annotation annotation context annotationcontext annotation context annotationcontext annotation is runtime type invisible isruntimetypeinvisible annotation context annotationcontext annotation context annotationcontext annotation type reference typereference target type targettype annotation context annotationcontext invisible annotation is runtime type visible isruntimetypevisible annotation context annotationcontext annotation context annotationcontext annotation type reference typereference target type targettype annotation context annotationcontext visible annotation context annotationcontext annotation context annotationcontext wildcard current wildcard currentwildcard target type targettype annotation target type constants annotationtargettypeconstants type parameter annotation target type constants annotationtargettypeconstants method type parameter annotation target type constants annotationtargettypeconstants annotation target type constants annotationtargettypeconstants method for mal formal parameter annotation target type constants annotationtargettypeconstants annotation target type constants annotationtargettypeconstants exception parameter annotation target type constants annotationtargettypeconstants annotation target type constants annotationtargettypeconstants annotation target type constants annotationtargettypeconstants constructor reference annotation target type constants annotationtargettypeconstants method reference annotation context annotationcontext info info annotation target type constants annotationtargettypeconstants local variable annotation target type constants annotationtargettypeconstants resource variable annotation context annotationcontext variable binding variablebinding local variable localvariable annotation target type constants annotationtargettypeconstants constructor invocation type argument annotation target type constants annotationtargettypeconstants method invocation type argument annotation target type constants annotationtargettypeconstants constructor reference type argument annotation target type constants annotationtargettypeconstants method reference type argument annotation target type constants annotationtargettypeconstants type parameter bound annotation target type constants annotationtargettypeconstants method type parameter bound annotation target type constants annotationtargettypeconstants annotation context annotationcontext info info annotation context annotationcontext info info annotation target type constants annotationtargettypeconstants field annotation target type constants annotationtargettypeconstants method annotation target type constants annotationtargettypeconstants method receiver annotation contexts annotationcontexts add annotation context annotationcontext visit marker annotation markerannotation annotation block scope blockscope scope internal visit internalvisit annotation visit normal annotation normalannotation annotation block scope blockscope scope internal visit internalvisit annotation visit single member annotation singlememberannotation annotation block scope blockscope scope internal visit internalvisit annotation visit wildcard wildcard block scope blockscope scope current wildcard currentwildcard wildcard visit argument argument block scope blockscope scope argument bits ast node astnode is union type isuniontype max local variable localvariable initialization count initializationcount max startpc local variable localvariable initializationpcs endpc local variable localvariable initializationpcs entries length startpc endpc visit argument argument class scope classscope scope argument bits ast node astnode is union type isuniontype max local variable localvariable initialization count initializationcount max startpc local variable localvariable initializationpcs endpc local variable localvariable initializationpcs entries length startpc endpc visit local declaration localdeclaration local declaration localdeclaration block scope blockscope scope max local variable localvariable initialization count initializationcount max startpc local variable localvariable initializationpcs endpc local variable localvariable initializationpcs entries length startpc endpc end visit endvisit wildcard wildcard block scope blockscope scope current wildcard currentwildcard answer base type reference array base type type reference typereference base type reference basetypereference base type basetype dim annotation dim annotations dimannotations dim base type basetype type ids typeids single type reference singletypereference type binding typebinding simple name simplename type ids typeids single type reference singletypereference type binding typebinding simple name simplename type ids typeids single type reference singletypereference type binding typebinding simple name simplename type ids typeids single type reference singletypereference type binding typebinding simple name simplename type ids typeids single type reference singletypereference type binding typebinding simple name simplename type ids typeids single type reference singletypereference type binding typebinding simple name simplename type ids typeids single type reference singletypereference type binding typebinding simple name simplename type ids typeids single type reference singletypereference type binding typebinding simple name simplename single type reference singletypereference type binding typebinding simple name simplename base type basetype type ids typeids array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations type ids typeids array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations type ids typeids array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations type ids typeids array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations type ids typeids array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations type ids typeids array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations type ids typeids array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations type ids typeids array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations array type reference arraytypereference type binding typebinding simple name simplename dim dim annotations dimannotations type reference typereference base type reference basetypereference base type basetype dim base type reference basetypereference base type basetype dim jsr type annotations annotation annotations trap completion selection nodes about to resolve abouttoresolve scope scope implementation flow info flowinfo analyse code analysecode block scope blockscope current scope currentscope flow context flowcontext flow context flowcontext flow info flowinfo flow info flowinfo flow info flowinfo check bounds checkbounds scope scope parameterized type references bounds type reference typereference augment type with additional dimensions augmenttypewithadditionaldimensions additional dimensions additionaldimensions annotation additional annotations additionalannotations is varargs isvarargs annotation get merged annotations on dimensions getmergedannotationsondimensions additional dimensions additionaldimensions annotation additional annotations additionalannotations note concatenate additional annotations base annotations bindings base annotations english nullable non null nonnull type non null nonnull arrays nullable arrays english strings changing compiler ast representation ripples leave bindings type reflect rotated reflect correctly annot atable type system annotatabletypesystem flattened annotations flattenedannotations annotation annotations on dimensions annotationsondimensions get annotations on dimensions getannotationsondimensions dimensions dimensions annotations on dimensions annotationsondimensions additional annotations additionalannotations total dimensions totaldimensions dimensions additional dimensions additionaldimensions annotation merged annotations mergedannotations annotation total dimensions totaldimensions annotations on dimensions annotationsondimensions dimensions merged annotations mergedannotations annotations on dimensions annotationsondimensions additional annotations additionalannotations dimensions total dimensions totaldimensions merged annotations mergedannotations additional annotations additionalannotations merged annotations mergedannotations dimensions method array dimension declared local field declaration extra dimension extra dimensions extradimensions annotation context annotationcontext get all annotation contexts getallannotationcontexts target type targettype list all annotation contexts allannotationcontexts array list arraylist annotation collector annotationcollector collector annotation collector annotationcollector target type targettype all annotation contexts allannotationcontexts traverse collector block scope blockscope annotation context annotationcontext all annotation contexts allannotationcontexts to array toarray annotation context annotationcontext all annotation contexts allannotationcontexts size info type superclass super interfaces superinterfaces byte code bytecode param target type targettype param info param all annotation contexts allannotationcontexts get all annotation contexts getallannotationcontexts target type targettype info list all annotation contexts allannotationcontexts annotation collector annotationcollector collector annotation collector annotationcollector target type targettype info all annotation contexts allannotationcontexts traverse collector block scope blockscope get all annotation contexts getallannotationcontexts target type targettype info list all annotation contexts allannotationcontexts annotation annotations annotation collector annotationcollector collector annotation collector annotationcollector target type targettype info all annotation contexts allannotationcontexts length annotations annotations length length annotation annotation annotations annotation traverse collector block scope blockscope traverse collector block scope blockscope info type superclass super interfaces superinterfaces byte code bytecode get all annotation contexts getallannotationcontexts target type targettype info list all annotation contexts allannotationcontexts annotation annotations on dimensions annotationsondimensions dimensions annotation collector annotationcollector collector annotation collector annotationcollector target type targettype info all annotation contexts allannotationcontexts annotations on dimensions annotationsondimensions dimensions traverse collector block scope blockscope annotations on dimensions annotationsondimensions max annotations on dimensions annotationsondimensions length max annotation annotations on dimension annotationsondimension annotations on dimensions annotationsondimensions annotations on dimension annotationsondimension max annotations on dimension annotationsondimension length max annotations on dimension annotationsondimension traverse collector block scope blockscope get all annotation contexts getallannotationcontexts target type targettype info type index typeindex list all annotation contexts allannotationcontexts annotation collector annotationcollector collector annotation collector annotationcollector target type targettype info type index typeindex all annotation contexts allannotationcontexts traverse collector block scope blockscope get all annotation contexts getallannotationcontexts target type targettype list all annotation contexts allannotationcontexts annotation collector annotationcollector collector annotation collector annotationcollector target type targettype all annotation contexts allannotationcontexts traverse collector block scope blockscope annotation get annotations on dimensions getannotationsondimensions get annotations on dimensions getannotationsondimensions type reference typereference get type arguments gettypearguments param use source order usesourceorder annotations dimensions returned source order returned int erpreted interpreted type system external persistence view nullable non null nonnull non null nonnull array nullable arrays ints type system view extended dimensions bind type components precede identifier encoded bindings persisted files dom ast construction dimensions source order provide clients annotation get annotations on dimensions getannotationsondimensions use source order usesourceorder set annotations on dimensions setannotationsondimensions annotation annotations on dimensions annotationsondimensions subtypes react suitably get last token getlasttoken todo jerome merge get type name gettypename get parameterized type name getparameterizedtypename get type name gettypename type binding typebinding get type binding gettypebinding scope scope get type name gettypename type binding typebinding internal resolve type internalresolvetype scope scope location handle error constant constant notaconstant shared type reference resolved resolved type resolvedtype resolved type resolvedtype is valid binding isvalidbinding resolved type resolvedtype resolved type resolvedtype problem id problemid problem reasons problemreasons not found notfound problem reasons problemreasons not visible notvisible problem reasons problemreasons inherited name hides enclosing name inheritednamehidesenclosingname type binding typebinding type resolved type resolvedtype closest match closestmatch type scope environment convert to raw type converttorawtype force conversion enclosing types type has error haserror type binding typebinding type resolved type resolvedtype get type binding gettypebinding scope type detected cycle resolving hierarchy has error haserror type is valid binding isvalidbinding report invalid type reportinvalidtype scope type problem id problemid problem reasons problemreasons not found notfound problem reasons problemreasons not visible notvisible problem reasons problemreasons inherited name hides enclosing name inheritednamehidesenclosingname type type closest match closestmatch type type is array type isarraytype array binding arraybinding type leaf component type leafcomponenttype type binding typebinding scope problem reporter problemreporter cannot all ocate void array cannotallocatevoidarray qualified type reference qualifiedtypereference get type binding gettypebinding called checked deprecation qualified type reference qualifiedtypereference is type use deprecated istypeusedeprecated type scope report deprecated type reportdeprecatedtype type scope type scope environment convert to raw type converttorawtype type type leaf component type leafcomponenttype is raw type israwtype bits ast node astnode ignore raw type check ignorerawtypecheck scope compiler options compileroptions get severity getseverity compiler options compileroptions raw type reference rawtypereference problem severities problemseverities ignore scope problem reporter problemreporter raw type reference rawtypereference type has error haserror don apply defaults bug gy buggy type resolve annotations resolveannotations scope type store computed type error problem type resolved type resolvedtype type resolve annotations resolveannotations scope location pick changed resolve annotations resolveannotations resolved type resolvedtype is type reference istypereference is wildcard iswildcard is union type isuniontype is varargs isvarargs bits ast node astnode is var args isvarargs is parameterized type reference isparameterizedtypereference report deprecated type reportdeprecatedtype type binding typebinding type scope scope scope problem reporter problemreporter deprecated type deprecatedtype type report deprecated type reportdeprecatedtype type binding typebinding type scope scope scope problem reporter problemreporter deprecated type deprecatedtype type integer max report invalid type reportinvalidtype scope scope scope problem reporter problemreporter invalid type invalidtype resolved type resolvedtype type binding typebinding resolve super type resolvesupertype class scope classscope scope assumes implementation resolve type resolvetype class scope classscope call detect cycles type binding typebinding super type supertype resolve type resolvetype scope super type supertype super type supertype is type variable istypevariable resolved type resolvedtype is valid binding isvalidbinding resolved type resolvedtype problem reference binding problemreferencebinding get type name gettypename reference binding referencebinding resolved type resolvedtype problem reasons problemreasons illegal super type variable illegalsupertypevariable report invalid type reportinvalidtype scope super type supertype type binding typebinding resolve type resolvetype block scope blockscope block scope blockscope resolve type resolvetype block scope blockscope type binding typebinding resolve type resolvetype block scope blockscope scope check bounds checkbounds resolve type resolvetype scope check bounds checkbounds type binding typebinding resolve type resolvetype block scope blockscope scope check bounds checkbounds location internal resolve type internalresolvetype scope location type binding typebinding resolve type resolvetype class scope classscope scope resolve type resolvetype scope type binding typebinding resolve type resolvetype class scope classscope scope location internal resolve type internalresolvetype scope location type binding typebinding resolve type argument resolvetypeargument block scope blockscope block scope blockscope reference binding referencebinding generic type generictype rank resolve type resolvetype block scope blockscope check bounds binding default location type argument defaultlocationtypeargument type binding typebinding resolve type argument resolvetypeargument class scope classscope class scope classscope reference binding referencebinding generic type generictype rank https bugs eclipse org bugs bug cgi circularity allowed resolving type arguments reference binding referencebinding class scope classscope reference context referencecontext binding pause hierarchy check pausehierarchycheck is hierarchy being connected ishierarchybeingconnected tag bits tagbits tag bits tagbits pause hierarchy check pausehierarchycheck pause hierarchy check pausehierarchycheck resolve type resolvetype class scope classscope binding default location type argument defaultlocationtypeargument pause hierarchy check pausehierarchycheck tag bits tagbits tag bits tagbits pause hierarchy check pausehierarchycheck traverse ast visitor astvisitor visitor block scope blockscope scope traverse ast visitor astvisitor visitor class scope classscope scope resolve annotations resolveannotations scope scope location annotation annotations on dimensions annotationsondimensions get annotations on dimensions getannotationsondimensions annotations annotations on dimensions annotationsondimensions block scope blockscope resolution scope resolutionscope scope type annotations resolution scope typeannotationsresolutionscope scope resolution scope resolutionscope dimensions dimensions annotations type binding typebinding leaf component type leafcomponenttype resolved type resolvedtype leaf component type leafcomponenttype leaf component type leafcomponenttype resolve annotations resolveannotations resolution scope resolutionscope annotations leaf component type leafcomponenttype resolved type resolvedtype dimensions scope environment create array type createarraytype leaf component type leafcomponenttype dimensions leaf component type leafcomponenttype contradictory annotations type detected annotation resolve type resolvetype treatment annotations on dimensions annotationsondimensions resolved type resolvedtype resolve annotations resolveannotations resolution scope resolutionscope annotations on dimensions annotationsondimensions resolved type resolvedtype resolved type resolvedtype array binding arraybinding null tag bits per dimension nulltagbitsperdimension array binding arraybinding resolved type resolvedtype null tag bits per dimension nulltagbitsperdimension null tag bits per dimension nulltagbitsperdimension skip annotations dimensions concerns leaf type skip annotations dimensions concerns leaf type dimensions skip annotations dimensions concerns leaf type null tag bits per dimension nulltagbitsperdimension tag bits tagbits annotationnullmask tag bits tagbits annotationnullmask scope problem reporter problemreporter contradictory null annotations contradictorynullannotations annotations on dimensions annotationsondimensions null tag bits per dimension nulltagbitsperdimension scope compiler options compileroptions is annotation based null analysis enabled isannotationbasednullanalysisenabled resolved type resolvedtype resolved type resolvedtype tag bits tagbits tag bits tagbits annotationnullmask resolved type resolvedtype is type variable istypevariable resolved type resolvedtype is wildcard iswildcard location scope has default nullness for hasdefaultnullnessfor location location binding default location type bound defaultlocationtypebound resolved type resolvedtype type ids typeids java lang object javalangobject scope problem reporter problemreporter implicit object bound no null default implicitobjectboundnonulldefault lookup environment lookupenvironment environment scope environment annotation binding annotationbinding annots annotation binding annotationbinding environment get non null annotation getnonnullannotation resolved type resolvedtype environment create annotated type createannotatedtype resolved type resolvedtype annots get annot atable levels getannotatablelevels check type arguments typearguments illegal annotations base types check illegal null annotations checkillegalnullannotations scope scope type reference typereference type arguments typearguments scope environment uses null type annotations usesnulltypeannotations type arguments typearguments type arguments typearguments length type reference typereference arg type arguments typearguments arg resolved type resolvedtype arg check illegal null annotation checkillegalnullannotation scope check type reference conf orms conforms constraints defined type variable check null constraints checknullconstraints scope scope substitution substitution type binding typebinding variables rank variables variables length rank type binding typebinding variable variables rank variable has null type annotations hasnulltypeannotations null annotation matching nullannotationmatching analyse variable resolved type resolvedtype substitution check mode checkmode bound check is any mismatch isanymismatch scope problem reporter problemreporter nullity mismatch type argument nullitymismatchtypeargument variable resolved type resolvedtype check illegal null annotation checkillegalnullannotation scope check illegal null annotation checkillegalnullannotation scope scope resolved type resolvedtype leaf component type leafcomponenttype is base type isbasetype has null type annotation hasnulltypeannotation annotation position annotationposition leaf type scope problem reporter problemreporter illegal annotation for base type illegalannotationforbasetype annotations resolved type resolvedtype tag bits tagbits tag bits tagbits annotationnullmask retrieve annotation translated null tag bits nulltagbits annotation find annotation findannotation null tag bits nulltagbits annotations annotation inner annotations innerannotations annotations annotations length inner annotations innerannotations ann bit annbit null tag bits nulltagbits tag bits tagbits annotation non null annotationnonnull type ids typeids bit non null annotation bitnonnullannotation type ids typeids bit nullable annotation bitnullableannotation inner annotations innerannotations length inner annotations innerannotations inner annotations innerannotations has null bit hasnullbit ann bit annbit inner annotations innerannotations has null type annotation hasnulltypeannotation annotation position annotationposition position annotations position annotation position annotationposition main type annotation inner annotations innerannotations annotations annotations length contains null annotation containsnullannotation inner annotations innerannotations annotation some annotations someannotations annotations contains null annotation containsnullannotation some annotations someannotations contains null annotation containsnullannotation annotation annotations annotations annotations length annotations annotations has null bit hasnullbit type ids typeids bit non null annotation bitnonnullannotation type ids typeids bit nullable annotation bitnullableannotation type reference typereference get type references gettypereferences type reference typereference is base type reference isbasetypereference