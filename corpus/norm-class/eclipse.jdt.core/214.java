copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests performance java print stream printstream java text number format numberformat java util hashtable java util iterator java util list java util map junit framework org eclipse jdt core org eclipse jdt core compiler i problem iproblem org eclipse jdt core dom org eclipse jdt core tests model abstract java model tests abstractjavamodeltests suppress warnings suppresswarnings rawtypes unchecked fullsourceworkspaceasttests full source workspace tests fullsourceworkspacetests internal synonym deprecated constant ast jsl all eviate alleviate deprecation warnings deprecated jls internal ast jls tests counter tests count iterations count nodes count nodescount log files print stream printstream log streams print stream printstream dim names length param fullsourceworkspaceasttests string tests prefix test dom ast creation s testdomastcreationjls test suite test suite build suite buildsuite test class testclass tests count suite count test cases counttestcases create print stream createprintstream test class testclass log streams tests count suite test class testclass fullsourceworkspaceasttests set up setup exception abstract java model tests abstractjavamodeltests wait until indexes ready waituntilindexesready set up setup javadoc junit framework test case testcase tear down teardown tear down teardown exception execution test tests count log per f perf result log dir log perf result logperfresult log streams tests count print statistics tests count system println system println dom ast creation performance test statistics number format numberformat int format intformat number format numberformat get integer instance getintegerinstance system println int format intformat format nodes count nodescount nodes parsed system println call close print str eams streams tear down teardown comment mapper visitor commentmapperastvisitor ast visitor astvisitor compilation unit compilationunit compilation unit compilationunit nodes extended start positions extendedstartpositions extended end positions extendedendpositions commentmapperastvisitor compilation unit compilationunit unit compilation unit compilationunit unit visit node visitnode ast node astnode node node positions extended positions node start nodestart node get start position getstartposition node end nodeend node get length getlength node start nodestart extended start extendedstart compilation unit compilationunit get extended start position getextendedstartposition node extended end extendedend compilation unit compilationunit get extended length getextendedlength node extended start extendedstart update count ers counters extended start extendedstart node start nodestart extended start positions extendedstartpositions extended end extendedend node end nodeend extended end positions extendedendpositions nodes end visit node endvisitnode ast node astnode node visit anonymous class declaration anonymousclassdeclaration node visit node visitnode node visit array access arrayaccess node visit node visitnode node visit array creation arraycreation node visit node visitnode node visit array initializer arrayinitializer node visit node visitnode node visit array type arraytype node visit node visitnode node visit assert statement assertstatement node visit node visitnode node visit assignment node visit node visitnode node visit block node visit node visitnode node visit boolean literal booleanliteral node visit node visitnode node visit break statement breakstatement node visit node visitnode node visit cast expression castexpression node visit node visitnode node visit catch clause catchclause node visit node visitnode node visit character literal characterliteral node visit node visitnode node visit class instance creation classinstancecreation node visit node visitnode node visit compilation unit compilationunit node visit node visitnode node visit conditional expression conditionalexpression node visit node visitnode node visit constructor invocation constructorinvocation node visit node visitnode node visit continue statement continuestatement node visit node visitnode node visit do statement dostatement node visit node visitnode node visit empty statement emptystatement node visit node visitnode node visit expression statement expressionstatement node visit node visitnode node visit field access fieldaccess node visit node visitnode node visit field declaration fielddeclaration node visit node visitnode node visit for statement forstatement node visit node visitnode node visit if statement ifstatement node visit node visitnode node visit import declaration importdeclaration node visit node visitnode node visit infix expression infixexpression node visit node visitnode node visit instanceof expression instanceofexpression node visit node visitnode node visit initializer node visit node visitnode node visit javadoc node enable visit node visit node visitnode node visit labeled statement labeledstatement node visit node visitnode node visit method declaration methoddeclaration node visit node visitnode node visit method invocation methodinvocation node visit node visitnode node visit null literal nullliteral node visit node visitnode node visit number literal numberliteral node visit node visitnode node visit package declaration packagedeclaration node visit node visitnode node visit parenthesized expression parenthesizedexpression node visit node visitnode node visit postfix expression postfixexpression node visit node visitnode node visit prefix expression prefixexpression node visit node visitnode node visit primitive type primitivetype node visit node visitnode node visit qualified name qualifiedname node visit node visitnode node visit return statement returnstatement node visit node visitnode node visit simple name simplename node visit node visitnode node visit simple type simpletype node visit node visitnode node visit string literal stringliteral node visit node visitnode node visit super constructor invocation superconstructorinvocation node visit node visitnode node visit super field access superfieldaccess node visit node visitnode node visit super method invocation supermethodinvocation node visit node visitnode node visit switch case switchcase node visit node visitnode node visit switch statement switchstatement node visit node visitnode node visit synchronized statement synchronizedstatement node visit node visitnode node visit this expression thisexpression node visit node visitnode node visit throw statement throwstatement node visit node visitnode node visit try statement trystatement node visit node visitnode node visit type declaration typedeclaration node visit node visitnode node visit type declaration statement typedeclarationstatement node visit node visitnode node visit type literal typeliteral node visit node visitnode node visit single variable declaration singlevariabledeclaration node visit node visitnode node visit variable declaration expression variabledeclarationexpression node visit node visitnode node visit variable declaration statement variabledeclarationstatement node visit node visitnode node visit variable declaration fragment variabledeclarationfragment node visit node visitnode node visit while statement whilestatement node visit node visitnode node visit block comment blockcomment node visit node visitnode node visit line comment linecomment node visit node visitnode node visit member ref memberref node visit node visitnode node visit method ref methodref node visit node visitnode node visit method ref parameter methodrefparameter node visit node visitnode node visit tag element tagelement node visit node visitnode node visit text element textelement node visit node visitnode node end visit endvisit anonymous class declaration anonymousclassdeclaration node end visit node endvisitnode node end visit endvisit array access arrayaccess node end visit node endvisitnode node end visit endvisit array creation arraycreation node end visit node endvisitnode node end visit endvisit array initializer arrayinitializer node end visit node endvisitnode node end visit endvisit array type arraytype node end visit node endvisitnode node end visit endvisit assert statement assertstatement node end visit node endvisitnode node end visit endvisit assignment node end visit node endvisitnode node end visit endvisit block node end visit node endvisitnode node end visit endvisit boolean literal booleanliteral node end visit node endvisitnode node end visit endvisit break statement breakstatement node end visit node endvisitnode node end visit endvisit cast expression castexpression node end visit node endvisitnode node end visit endvisit catch clause catchclause node end visit node endvisitnode node end visit endvisit character literal characterliteral node end visit node endvisitnode node end visit endvisit class instance creation classinstancecreation node end visit node endvisitnode node end visit endvisit compilation unit compilationunit node end visit node endvisitnode node end visit endvisit conditional expression conditionalexpression node end visit node endvisitnode node end visit endvisit constructor invocation constructorinvocation node end visit node endvisitnode node end visit endvisit continue statement continuestatement node end visit node endvisitnode node end visit endvisit do statement dostatement node end visit node endvisitnode node end visit endvisit empty statement emptystatement node end visit node endvisitnode node end visit endvisit expression statement expressionstatement node end visit node endvisitnode node end visit endvisit field access fieldaccess node end visit node endvisitnode node end visit endvisit field declaration fielddeclaration node end visit node endvisitnode node end visit endvisit for statement forstatement node end visit node endvisitnode node end visit endvisit if statement ifstatement node end visit node endvisitnode node end visit endvisit import declaration importdeclaration node end visit node endvisitnode node end visit endvisit infix expression infixexpression node end visit node endvisitnode node end visit endvisit instanceof expression instanceofexpression node end visit node endvisitnode node end visit endvisit initializer node end visit node endvisitnode node end visit endvisit javadoc node end visit node endvisitnode node end visit endvisit labeled statement labeledstatement node end visit node endvisitnode node end visit endvisit method declaration methoddeclaration node end visit node endvisitnode node end visit endvisit method invocation methodinvocation node end visit node endvisitnode node end visit endvisit null literal nullliteral node end visit node endvisitnode node end visit endvisit number literal numberliteral node end visit node endvisitnode node end visit endvisit package declaration packagedeclaration node end visit node endvisitnode node end visit endvisit parenthesized expression parenthesizedexpression node end visit node endvisitnode node end visit endvisit postfix expression postfixexpression node end visit node endvisitnode node end visit endvisit prefix expression prefixexpression node end visit node endvisitnode node end visit endvisit primitive type primitivetype node end visit node endvisitnode node end visit endvisit qualified name qualifiedname node end visit node endvisitnode node end visit endvisit return statement returnstatement node end visit node endvisitnode node end visit endvisit simple name simplename node end visit node endvisitnode node end visit endvisit simple type simpletype node end visit node endvisitnode node end visit endvisit string literal stringliteral node end visit node endvisitnode node end visit endvisit super constructor invocation superconstructorinvocation node end visit node endvisitnode node end visit endvisit super field access superfieldaccess node end visit node endvisitnode node end visit endvisit super method invocation supermethodinvocation node end visit node endvisitnode node end visit endvisit switch case switchcase node end visit node endvisitnode node end visit endvisit switch statement switchstatement node end visit node endvisitnode node end visit endvisit synchronized statement synchronizedstatement node end visit node endvisitnode node end visit endvisit this expression thisexpression node end visit node endvisitnode node end visit endvisit throw statement throwstatement node end visit node endvisitnode node end visit endvisit try statement trystatement node end visit node endvisitnode node end visit endvisit type declaration typedeclaration node end visit node endvisitnode node end visit endvisit type declaration statement typedeclarationstatement node end visit node endvisitnode node end visit endvisit type literal typeliteral node end visit node endvisitnode node end visit endvisit single variable declaration singlevariabledeclaration node end visit node endvisitnode node end visit endvisit variable declaration expression variabledeclarationexpression node end visit node endvisitnode node end visit endvisit variable declaration statement variabledeclarationstatement node end visit node endvisitnode node end visit endvisit variable declaration fragment variabledeclarationfragment node end visit node endvisitnode node end visit endvisit while statement whilestatement node end visit node endvisitnode node end visit endvisit block comment blockcomment node end visit node endvisitnode node end visit endvisit line comment linecomment node end visit node endvisitnode node end visit endvisit member ref memberref node end visit node endvisitnode node end visit endvisit method ref methodref node end visit node endvisitnode node end visit endvisit method ref parameter methodrefparameter node end visit node endvisitnode node end visit endvisit tag element tagelement node end visit node endvisitnode node end visit endvisit text element textelement node end visit node endvisitnode node create ast nodes tree compilation unit jls level deprecated createast i compilation unit icompilationunit unit ast level astlevel java model exception javamodelexception warm ast parser astparser parser ast parser astparser new parser newparser ast level astlevel parser set source setsource unit parser set resolve bindings setresolvebindings parser createast measures measures measures count iter ations iterations iterations count measures ast node astnode result run gc rungc start measuring startmeasuring iter ations iterations ast parser astparser parser ast parser astparser new parser newparser ast level astlevel parser set source setsource unit parser set resolve bindings setresolvebindings result parser createast stop measuring stopmeasuring assert equals assertequals wrong type node result result get node type getnodetype ast node astnode compilation unit compilation unit compilationunit compilation unit compilationunit compilation unit compilationunit result commentmapperastvisitor visitor commentmapperastvisitor compilation unit compilationunit compilation unit compilationunit accept visitor nodes count nodescount visitor nodes iter ations iterations commit commit measurements commitmeasurements assert performance assertperformance deprecated reduce deprecated warnings test perf dom ast creation s testperfdomastcreationjls java model exception javamodelexception fingerprint tag as summary tagassummary dom ast tree file jls i compilation unit icompilationunit unit get compilation unit getcompilationunit org eclipse jdt core org eclipse jdt internal compiler parser parser java hashtable options java core javacore get options getoptions options java core javacore compiler nls string literal java core javacore ignore java core javacore set options setoptions options createast unit ast jls performance dom ast creation entire workspace jls test perf dom ast creation s testperfdomastcreationjls java model exception javamodelexception fingerprint tag as summary tagassummary dom ast tree file jls i compilation unit icompilationunit unit get compilation unit getcompilationunit org eclipse jdt core org eclipse jdt internal compiler parser parser java createast unit jls internal create ast nodes tree compilation units projects run all projects ast creation runallprojectsastcreation ast level astlevel java model exception javamodelexception units count unitscount start measuring startmeasuring debug system println creating ast hierarchy units projects projects length project compilation units debug system print projects get element name getelementname list units get project compilation units getprojectcompilationunits projects size units size size debug system println empty units count unitscount size list units arrays unitsarrays split list in small arrays splitlistinsmallarrays units units arrays unitsarrays size debug system print size units proceed step system print size units proceed steps units arrays unitsarrays size i compilation unit icompilationunit units array unitsarray i compilation unit icompilationunit units arrays unitsarrays remove debug system print length units array unitsarray length compilation unit compilationunit compilation units compilationunits compilation unit compilationunit length create ast tree ptr ptr length ptr i compilation unit icompilationunit unit units array unitsarray ptr release memory handle units array unitsarray ptr ast parser astparser parser ast parser astparser new parser newparser ast level astlevel parser set source setsource unit parser set resolve bindings setresolvebindings ast node astnode result parser createast assert equals assertequals wrong type node result result get node type getnodetype ast node astnode compilation unit compilation units compilationunits ptr compilation unit compilationunit result debug system println stop measuring stopmeasuring commit measurements commitmeasurements assert performance assertperformance units count unitscount deprecated reduce deprecated warnings test wksp dom ast creation s testwkspdomastcreationjls java model exception javamodelexception fingerprint tag as summary tagassummary dom ast tree workspace files jls run all projects ast creation runallprojectsastcreation ast jls create ast nodes compilation unit project run ast creation runastcreation i java project ijavaproject java project javaproject java model exception javamodelexception debug system println creating ast project java project javaproject get element name getelementname ast parser astparser parser ast parser astparser new parser newparser jls internal parser set resolve bindings setresolvebindings parser set project setproject java project javaproject map options java project javaproject get options getoptions options changed iterator iter options key set keyset iterator iter has next hasnext string key string iter string string options key nls nls error equals warning equals system println ignoring key nls options nls key nls ignore enabled equals system println disabling key options key disabled options java core javacore compiler task tags parser set compiler options setcompileroptions options list units get project compilation units getprojectcompilationunits java project javaproject i compilation unit icompilationunit compilation units compilationunits i compilation unit icompilationunit units size units to array toarray compilation units compilationunits print system println options options system println compilation units compilationunits length units parsed java project javaproject get element name getelementname project warm parser createasts compilation units compilationunits string ast requestor astrequestor acceptast i compilation unit icompilationunit source compilation unit compilationunit ast i problem iproblem problems ast get problems getproblems length problems length length string buffer stringbuffer buffer string buffer stringbuffer length buffer append problems get message getmessage buffer append assert equals assertequals unexpected problems buffer to string tostring length measures measures measures count measures run gc rungc start measuring startmeasuring parser createasts compilation units compilationunits string ast requestor astrequestor stop measuring stopmeasuring commit measurements commitmeasurements assert performance assertperformance create ast nodes tree compilation units j unit junit project java model exception javamodelexception test dom ast creation project s testdomastcreationprojectjls java model exception javamodelexception fingerprint tag as summary tagassummary dom ast tree project files jls run ast creation runastcreation get project getproject org eclipse search