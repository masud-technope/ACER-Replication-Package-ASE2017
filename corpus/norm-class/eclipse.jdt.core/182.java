copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors wharley bea initial api implementation ibm corporation modified https bugs eclipse org bugs bug cgi org eclipse jdt apt core internal generated file generatedfile org eclipse core resources i folder ifolder org eclipse core resources i resource iresource org eclipse core resources i workspace iworkspace org eclipse core resources i workspace root iworkspaceroot org eclipse core resources i workspace runnable iworkspacerunnable org eclipse core resources resources plugin resourcesplugin org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime operation canceled exception operationcanceledexception org eclipse core runtime path org eclipse jdt apt core internal apt plugin aptplugin org eclipse jdt apt core internal apt project aptproject org eclipse jdt apt core internal util file system util filesystemutil org eclipse jdt apt core util apt config aptconfig org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java project ijavaproject org eclipse jdt core java model exception javamodelexception manage generated source folder apt project apt project aptproject generated source folder manager generatedsourcefoldermanager depending apt enabled project actual generated source folder disk generated source folder manager generatedsourcefoldermanager responsible creating deleting folder needed apt settings changed job generated source folder manager generatedsourcefoldermanager data agreement apt enabled generated source folder existence actual folder disk presence classpath entry folder problem markers indicating disagreement attempt change classpath entry folder disk enabled disabled folder change discovered preference changed preferencechanged method attempt update classpath entry generated source folder apt enabled entry folder classpath generated source folder manager generatedsourcefoldermanager responsible folder contents contents managed generated file manager generatedfilemanager generated source folder manager generatedsourcefoldermanager apt project aptproject apt project aptproject folder generated source files apt disabled error folder exist disk folder exists disk classpath entry exist general member enabled preference create folder add classpath member enabled preference delete folder contents remove classpath enabled preference gensrcdir folder preference folder delete folder contents remove classpath create folder add classpath work depends not ified notified relevant locks i folder ifolder generated source folder generatedsourcefolder constructed apt project aptproject clients call apt project aptproject get generated source folder manager getgeneratedsourcefoldermanager object generated source folder manager generatedsourcefoldermanager apt project aptproject apt project aptproject apt project aptproject apt project aptproject i java project ijavaproject java project javaproject apt project aptproject get java project getjavaproject leave apt config aptconfig is enabled isenabled java project javaproject i folder ifolder folder get folder getfolder folder exists is on classpath isonclasspath folder generated source folder generatedsourcefolder folder add folder classpath param src folder srcfolder folder add classpath routine folder classpath add to classpath addtoclasspath i folder ifolder src folder srcfolder on classpath onclasspath classpath util classpathutil update project classpath updateprojectclasspath apt project aptproject get java project getjavaproject src folder srcfolder apt plugin aptplugin debug nls apt plugin aptplugin trace nls ensure d ensured classpath entry src folder srcfolder on classpath onclasspath core exception coreexception print stack trace printstacktrace apt plugin aptplugin log failed add classpath entry generated source folder src folder srcfolder get name getname on classpath onclasspath call create folder add classpath apt enabled folder exist folder changed stuff removed method resource lock generated source folder created disk java model lock project source paths updated care calling method ensure loc king locking behavior correct called event thread locks project classpath configure nls generated source folder generatedsourcefolder removed folder i folder ifolder src folder srcfolder get folder preference getfolderpreference src folder srcfolder i status istatus status apt plugin aptplugin create status createstatus nls create generated source folder nls apt config aptconfig get gen src dir getgensrcdir apt project aptproject get java project getjavaproject nls apt plugin aptplugin log status ensure folder exists disk create on disk createondisk src folder srcfolder add classpath add to classpath addtoclasspath src folder srcfolder generated source folder generatedsourcefolder generated source folder generatedsourcefolder src folder srcfolder creates generated source folder called build classpath updated entry generated source folder classpath bug ensure folder exists ensurefolderexists apt disabled apt config aptconfig is enabled isenabled apt project aptproject get java project getjavaproject pri nciple principle bail generated source folder generatedsourcefolder method opportunity detect problems folder deleted generated source folder deleted generatedsourcefolderdeleted called user refresh i folder ifolder src folder srcfolder get folder getfolder src folder srcfolder i status istatus status apt plugin aptplugin create status createstatus nls create generated source folder nls apt config aptconfig get gen src dir getgensrcdir apt project aptproject get java project getjavaproject nls apt plugin aptplugin log status create on disk createondisk src folder srcfolder add to classpath addtoclasspath src folder srcfolder generated source folder generatedsourcefolder folder disk classpath generated source folder generatedsourcefolder src folder srcfolder create folder disk exists method frequently called multiple threads simultaneously build thread thread param src folder srcfolder folder create routine folder exists disk create on disk createondisk i folder ifolder src folder srcfolder exists don locks creating folder file system operations src folder srcfolder refresh local refreshlocal i resource iresource depth infinite src folder srcfolder exists file system util filesystemutil make derived parent folders makederivedparentfolders src folder srcfolder apt plugin aptplugin debug nls nls apt plugin aptplugin trace created folder src folder srcfolder disk exists core exception coreexception print stack trace printstacktrace apt plugin aptplugin log failed ensure existence generated source folder src folder srcfolder get name getname exists call method apt enabled preference changed configure generated source folder apt enabled disabled enabled folder created classpath entry disabled folder classpath entry removed called event thread locks project classpath enabled preference changed enabledpreferencechanged enable apt config aptconfig is enabled isenabled apt project aptproject get java project getjavaproject circuit changed enable generated source folder generatedsourcefolder apt plugin aptplugin debug nls apt plugin aptplugin trace nls enabled changed enabledchanged enable change apt plugin aptplugin debug apt plugin aptplugin trace nls enabled changed enabledchanged changing enable nls apt project aptproject get java project getjavaproject get element name getelementname enable configure remove folder removefolder res pond respond change generated source folder apt enabled remove folder classpath entry create called event thread locks project classpath folder name preference changed foldernamepreferencechanged apt disabled don apt enabled aptenabled apt config aptconfig is enabled isenabled apt project aptproject get java project getjavaproject apt enabled aptenabled didn change don generated source folder generatedsourcefolder generated source folder generatedsourcefolder equals get folder preference getfolderpreference apt plugin aptplugin debug apt plugin aptplugin trace nls folder name changed foldernamechanged generated source folder generatedsourcefolder get project relative path getprojectrelativepath remove folder removefolder configure invoked generated source folder deleted flush memory tracking generated files generated source folder recreated time build note called resource change event ensure classpath correct build resource change event occurs build folder deleted folderdeleted apt project aptproject project clean projectclean i folder ifolder src folder srcfolder src folder srcfolder generated source folder generatedsourcefolder generated source folder generatedsourcefolder apt plugin aptplugin debug nls apt plugin aptplugin trace generated source folder generatedsourcefolder src folder srcfolder method binary output location generated source folder generated source folder configured created project source path method binary output location project i path ipath binary output location generated source folder relative project java model exception javamodelexception get folder getfolder i path ipath get binary output location getbinaryoutputlocation java model exception javamodelexception i path ipath output root path outputrootpath i folder ifolder generated source folder generatedsourcefolder get folder getfolder generated source folder generatedsourcefolder generated source folder generatedsourcefolder exists i classpath entry iclasspathentry cpe classpath util classpathutil find project source path findprojectsourcepath apt project aptproject get java project getjavaproject generated source folder generatedsourcefolder cpe output root path outputrootpath cpe get output location getoutputlocation output root project output location output root path outputrootpath output root path outputrootpath apt project aptproject get java project getjavaproject get output location getoutputlocation output location relative workspace relative project segments output root path outputrootpath matching first segments matchingfirstsegments apt project aptproject get java project getjavaproject get path getpath output root path outputrootpath output root path outputrootpath remove first segments removefirstsegments segments output root path outputrootpath current generated source folder i folder ifolder current generated source folder handle operation folder exists disk illegal argument exception illegalargumentexception invalid i folder ifolder get folder getfolder generated source folder generatedsourcefolder generated source folder generatedsourcefolder get folder preference getfolderpreference i folder ifolder corresponds folder preference apt enabled disabled folder exists disk handle i folder ifolder created illegal i folder ifolder get folder preference getfolderpreference string folder name foldername apt config aptconfig get gen src dir getgensrcdir apt project aptproject get java project getjavaproject i folder ifolder folder folder apt project aptproject get java project getjavaproject get project getproject get folder getfolder folder name foldername illegal argument exception illegalargumentexception folder returns folder source folder generated files param folder folder determine generated source folder generated source folder get folder getfolder is generated source folder isgeneratedsourcefolder i folder ifolder folder folder folder equals get folder getfolder is on classpath isonclasspath i folder ifolder src folder srcfolder classpath util classpathutil does classpath contain entry doesclasspathcontainentry apt project aptproject get java project getjavaproject src folder srcfolder get full path getfullpath java model exception javamodelexception print stack trace printstacktrace remove folder disk classpath param src folder srcfolder remove folder removefolder i folder ifolder src folder srcfolder src folder srcfolder generated source folder generatedsourcefolder generated source folder generatedsourcefolder src folder srcfolder clear generated file maps apt project aptproject project clean projectclean generated source folder won classpath error src folder srcfolder is derived isderived classpath util classpathutil remove from project classpath removefromprojectclasspath apt project aptproject get java project getjavaproject src folder srcfolder java model exception javamodelexception apt plugin aptplugin log failed remove classpath entry generated src folder src folder srcfolder get name getname i workspace runnable iworkspacerunnable runnable i workspace runnable iworkspacerunnable i progress monitor iprogressmonitor monitor i resource iresource parent src folder srcfolder get parent getparent deleted file system util filesystemutil delete derived resources deletederivedresources src folder srcfolder delete parent folder derived empty deleted parent is derived isderived parent get type gettype i resource iresource folder i folder ifolder parent folder parentfolder i folder ifolder parent parent folder parentfolder members length parent parent folder parentfolder get parent getparent file system util filesystemutil delete derived resources deletederivedresources parent folder parentfolder core exception coreexception apt plugin aptplugin log failed delete generated source folder src folder srcfolder get name getname operation canceled exception operationcanceledexception cancel apt plugin aptplugin log cancel deletion generated source folder can celled cancelled i workspace iworkspace resources plugin resourcesplugin get workspace getworkspace runnable get root getroot i workspace iworkspace avoid update core exception coreexception apt plugin aptplugin log runnable deleting generated source folder src folder srcfolder get name getname failed check proposed permitted param folder name foldername including attempting generated source folder code dir string dirstring code succeed validate i java project ijavaproject jproj string folder name foldername succeeded jproj specific project i folder ifolder folder folder jproj get project getproject get folder getfolder folder name foldername succeeded folder asked specific project guess code fail wrong i project iproject get folder getfolder string heuristics i workspace root iworkspaceroot root resources plugin resourcesplugin get workspace getworkspace get root getroot i path ipath apt plugin aptplugin get plugin getplugin get state location getstatelocation i path ipath proposed path folder name foldername i path ipath combined append proposed combined segment count segmentcount segment count segmentcount proposed folder depth shallow i folder ifolder folder root get folder getfolder combined succeeded folder illegal argument exception illegalargumentexception succeeded