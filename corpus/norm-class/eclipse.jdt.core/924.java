copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler parser internal field structure parsing recovery java util hash set hashset java util org eclipse jdt internal compiler ast ast node astnode org eclipse jdt internal compiler ast abstract variable declaration abstractvariabledeclaration org eclipse jdt internal compiler ast annotation org eclipse jdt internal compiler ast array initializer arrayinitializer org eclipse jdt internal compiler ast array qualified type reference arrayqualifiedtypereference org eclipse jdt internal compiler ast array type reference arraytypereference org eclipse jdt internal compiler ast expression org eclipse jdt internal compiler ast field declaration fielddeclaration org eclipse jdt internal compiler ast local declaration localdeclaration org eclipse jdt internal compiler ast statement org eclipse jdt internal compiler ast type declaration typedeclaration recovered field recoveredfield recovered element recoveredelement field declaration fielddeclaration field declaration fielddeclaration already completed field initialization alreadycompletedfieldinitialization recovered annotation recoveredannotation annotations annotation count annotationcount modifiers modifiers start modifiersstart recovered type recoveredtype anonymous types anonymoustypes anonymous type count anonymoustypecount recovered field recoveredfield field declaration fielddeclaration field declaration fielddeclaration recovered element recoveredelement parent bracket balance bracketbalance field declaration fielddeclaration parent bracket balance bracketbalance recovered field recoveredfield field declaration fielddeclaration field declaration fielddeclaration recovered element recoveredelement parent bracket balance bracketbalance parser parser parent bracket balance bracketbalance parser field declaration fielddeclaration field declaration fielddeclaration already completed field initialization alreadycompletedfieldinitialization field declaration fielddeclaration initialization record local declaration recovered element recoveredelement add local declaration localdeclaration local declaration localdeclaration bracket balance value bracketbalancevalue current element lambda recovered full lambda nest level lambdanestlevel add local declaration localdeclaration bracket balance value bracketbalancevalue record field declaration recovered element recoveredelement add field declaration fielddeclaration added field declaration addedfielddeclaration bracket balance value bracketbalancevalue behavior delegate recording parent reset pending modifiers resetpendingmodifiers ignore parent field declaration fielddeclaration declaration source start declarationsourcestart added field declaration addedfielddeclaration declaration source start declarationsourcestart field declaration fielddeclaration initialization update source end if necessary updatesourceendifnecessary field declaration fielddeclaration initialization source end sourceend update source end if necessary updatesourceendifnecessary field declaration fielddeclaration source end sourceend update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend added field declaration addedfielddeclaration declaration source start declarationsourcestart parent add added field declaration addedfielddeclaration bracket balance value bracketbalancevalue record expression statement field expecting initialization expression completion field initializers recovered element recoveredelement add statement statement bracket balance value bracketbalancevalue already completed field initialization alreadycompletedfieldinitialization statement expression add statement bracket balance value bracketbalancevalue statement source end sourceend already completed field initialization alreadycompletedfieldinitialization initialization parsed field declaration fielddeclaration initialization expression statement field declaration fielddeclaration declaration source end declarationsourceend statement source end sourceend field declaration fielddeclaration declaration end declarationend statement source end sourceend record type declaration field expecting initialization expression type anonymous type completion field initializers recovered element recoveredelement add type declaration typedeclaration type declaration typedeclaration bracket balance value bracketbalancevalue already completed field initialization alreadycompletedfieldinitialization type declaration typedeclaration bits ast node astnode is anonymous type isanonymoustype field declaration fielddeclaration declaration source end declarationsourceend type declaration typedeclaration source start sourcestart field declaration fielddeclaration declaration source end declarationsourceend add type declaration typedeclaration bracket balance value bracketbalancevalue prepare anonymous type list anonymous types anonymoustypes anonymous types anonymoustypes recovered type recoveredtype anonymous type count anonymoustypecount anonymous type count anonymoustypecount anonymous types anonymoustypes length system arraycopy anonymous types anonymoustypes anonymous types anonymoustypes recovered type recoveredtype anonymous type count anonymoustypecount anonymous type count anonymoustypecount store type declaration anonymous type recovered type recoveredtype element recovered type recoveredtype type declaration typedeclaration bracket balance value bracketbalancevalue anonymous types anonymoustypes anonymous type count anonymoustypecount element element attach recovered annotation recoveredannotation annots annot count annotcount mods mods source start modssourcestart annot count annotcount annotation existing annotations existingannotations field declaration fielddeclaration annotations existing annotations existingannotations annotations recovered annotation recoveredannotation annot count annotcount annotation count annotationcount annot count annotcount existing annotations existingannotations length annots annotation existing annotations existingannotations annotations annotation count annotationcount annots annotations annots annotation count annotationcount annot count annotcount mods modifiers mods modifiers start modifiersstart mods source start modssourcestart answer parsed structure ast node astnode parse tree parsetree field declaration fielddeclaration answer source parse node source end sourceend field declaration fielddeclaration declaration source end declarationsourceend string to string tostring tab string buffer stringbuffer buffer string buffer stringbuffer tab string tabstring tab nls buffer append recovered field field declaration fielddeclaration print tab buffer annotations annotation count annotationcount nls buffer append buffer append annotations to string tostring tab anonymous types anonymoustypes anonymous type count anonymoustypecount nls buffer append buffer append anonymous types anonymoustypes to string tostring tab buffer to string tostring field declaration fielddeclaration updated field declaration updatedfielddeclaration depth type declaration typedeclaration known types knowntypes update annotations modifiers field declaration fielddeclaration modifiers modifiers modifiers start modifiersstart field declaration fielddeclaration declaration source start declarationsourcestart field declaration fielddeclaration declaration source start declarationsourcestart modifiers start modifiersstart update annotations annotation count annotationcount existing count existingcount field declaration fielddeclaration annotations field declaration fielddeclaration annotations length annotation annotation references annotationreferences annotation existing count existingcount annotation count annotationcount existing count existingcount system arraycopy field declaration fielddeclaration annotations annotation references annotationreferences annotation count annotationcount existing count existingcount annotation count annotationcount annotation references annotationreferences annotations updated annotation reference updatedannotationreference field declaration fielddeclaration annotations annotation references annotationreferences start annotations annotation source start sourcestart start field declaration fielddeclaration declaration source start declarationsourcestart field declaration fielddeclaration declaration source start declarationsourcestart start anonymous types anonymoustypes field declaration fielddeclaration initialization array initializer arrayinitializer recovered initializers recoveredinitializers recovered initializers count recoveredinitializerscount anonymous type count anonymoustypecount recovered initializers recoveredinitializers array initializer arrayinitializer recovered initializers recoveredinitializers expressions expression anonymous type count anonymoustypecount anonymous type count anonymoustypecount recovered type recoveredtype recovered type recoveredtype anonymous types anonymoustypes type declaration typedeclaration type declaration typedeclaration recovered type recoveredtype type declaration typedeclaration type declaration typedeclaration declaration source end declarationsourceend type declaration typedeclaration declaration source end declarationsourceend field declaration fielddeclaration declaration source end declarationsourceend type declaration typedeclaration body end bodyend field declaration fielddeclaration declaration source end declarationsourceend recovered type recoveredtype preserve content preservecontent type declaration typedeclaration anonymous type anonymoustype recovered type recoveredtype updated type declaration updatedtypedeclaration depth known types knowntypes anonymous type anonymoustype anonymous type count anonymoustypecount recovered initializers count recoveredinitializerscount field declaration fielddeclaration initialization recovered initializers recoveredinitializers recovered initializers recoveredinitializers expressions recovered initializers count recoveredinitializerscount anonymous type anonymoustype allocation field declaration fielddeclaration initialization anonymous type anonymoustype allocation anonymous type anonymoustype declaration source end declarationsourceend https bugs eclipse org bugs bug cgi field declaration fielddeclaration declaration source end declarationsourceend field declaration fielddeclaration declaration source end declarationsourceend field declaration fielddeclaration declaration end declarationend anonymous type count anonymoustypecount field declaration fielddeclaration bits ast node astnode has local type haslocaltype field declaration fielddeclaration get kind getkind abstract variable declaration abstractvariabledeclaration enum constant field declaration fielddeclaration enum constant anonymous type count anonymoustypecount recovered type recoveredtype recovered type recoveredtype anonymous types anonymoustypes type declaration typedeclaration type declaration typedeclaration recovered type recoveredtype type declaration typedeclaration type declaration typedeclaration declaration source end declarationsourceend type declaration typedeclaration declaration source end declarationsourceend field declaration fielddeclaration declaration source end declarationsourceend type declaration typedeclaration body end bodyend field declaration fielddeclaration declaration source end declarationsourceend enum recovered enum constants recovered depth considered depth enum recovered type recoveredtype updated type declaration updatedtypedeclaration depth known types knowntypes field declaration fielddeclaration closing brace consumed closed current element current element currentelement exited fields braces matches update parent recovered element recoveredelement update on closing brace updateonclosingbrace brace start bracestart brace end braceend array initializer bracket balance bracketbalance bracket balance bracketbalance bracket balance bracketbalance field declaration fielddeclaration get kind getkind abstract variable declaration abstractvariabledeclaration enum constant update source end if necessary updatesourceendifnecessary brace end braceend parent field declaration fielddeclaration declaration source end declarationsourceend already completed field initialization alreadycompletedfieldinitialization bracket balance bracketbalance already completed field initialization alreadycompletedfieldinitialization update source end if necessary updatesourceendifnecessary brace end braceend parent parent update on closing brace updateonclosingbrace brace start bracestart brace end braceend opening brace consumed expected opening current element body start bodystart updated recovered element recoveredelement update on opening brace updateonopeningbrace brace start bracestart brace end braceend field declaration fielddeclaration declaration source end declarationsourceend field declaration fielddeclaration type array type reference arraytypereference field declaration fielddeclaration type array qualified type reference arrayqualifiedtypereference already completed field initialization alreadycompletedfieldinitialization bracket balance bracketbalance update array initializer https bugs eclipse org bugs bug cgi initializer bracket opened array field field bracket balance bracketbalance update array initializer field declaration fielddeclaration declaration source end declarationsourceend field declaration fielddeclaration get kind getkind abstract variable declaration abstractvariabledeclaration enum constant bracket balance bracketbalance update enum constant array initializer update source end if necessary updatesourceendifnecessary brace start bracestart brace end braceend parent update on opening brace updateonopeningbrace brace start bracestart brace end braceend update parse tree updateparsetree updated field declaration updatedfielddeclaration hash set hashset type declaration typedeclaration update declaration source end declarationsourceend parse node update source end if necessary updatesourceendifnecessary body start bodystart body end bodyend field declaration fielddeclaration declaration source end declarationsourceend field declaration fielddeclaration declaration source end declarationsourceend body end bodyend field declaration fielddeclaration declaration end declarationend body end bodyend