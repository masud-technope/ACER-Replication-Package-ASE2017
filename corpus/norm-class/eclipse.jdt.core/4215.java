copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests model java file java file filter filefilter java file output stream fileoutputstream java io exception ioexception java net url java util array list arraylist java util list java util string tokenizer stringtokenizer org eclipse core resources i resource iresource org eclipse core resources i workspace iworkspace org eclipse core resources i workspace root iworkspaceroot org eclipse core resources resources plugin resourcesplugin org eclipse core runtime file locator filelocator org eclipse core runtime i path ipath org eclipse core runtime path org eclipse core runtime platform org eclipse jdt core org eclipse jdt internal core jar package fragment root jarpackagefragmentroot suppress warnings suppresswarnings rawtypes unchecked model tests util modeltestsutil collect all files collectallfiles file root array list arraylist collector file filter filefilter file filter filefilter file files root list files listfiles file filter filefilter files length file current file currentfile files current file currentfile is directory isdirectory collect all files collectallfiles current file currentfile collector file filter filefilter collector add current file currentfile convert to independant line delimiter converttoindependantlinedelimiter file file file get name getname ends with endswith java copy file src path original file dest path destination file copy file src file dest io exception ioexception read source bytes src bytes srcbytes read src convert to independant line delimiter converttoindependantlinedelimiter src string contents string src bytes srcbytes contents org eclipse jdt core tests util util convert to independant line delimiter converttoindependantlinedelimiter contents src bytes srcbytes contents get bytes getbytes write bytes dest file output stream fileoutputstream file output stream fileoutputstream dest write src bytes srcbytes close copy source directory contents target directory copy directory copydirectory file source file target io exception ioexception target exists target mkdirs file files source list files listfiles files files length file source child sourcechild files string source child sourcechild get name getname equals cvs equals svn file target child targetchild file target source child sourcechild is directory isdirectory copy directory copydirectory source child sourcechild target child targetchild copy source child sourcechild target child targetchild file get all files getallfiles file root file filter filefilter file filter filefilter array list arraylist files array list arraylist root is directory isdirectory collect all files collectallfiles root files file filter filefilter file result file files size files to array toarray result result returns compilation unit project root fragment code code exist i class file iclassfile get class file getclassfile i java project ijavaproject project string root path rootpath string package name packagename string class name classname java model exception javamodelexception i package fragment ipackagefragment pkg get package fragment getpackagefragment project root path rootpath package name packagename pkg pkg get class file getclassfile class name classname returns compilation unit project param java project javaproject param package name packagename param unit name unitname org eclipse jdt core i compilation unit icompilationunit i compilation unit icompilationunit get compilation unit getcompilationunit i java project ijavaproject java project javaproject string package name packagename string unit name unitname java model exception javamodelexception java project javaproject i type itype type java project javaproject find type findtype package name packagename unit name unitname type type get compilation unit getcompilationunit returns compilation units project param java project javaproject project collect units list org eclipse jdt core i compilation unit icompilationunit list get compilation units getcompilationunits i java project ijavaproject java project javaproject java model exception javamodelexception i package fragment root ipackagefragmentroot fragment roots fragmentroots java project javaproject get package fragment roots getpackagefragmentroots length fragment roots fragmentroots length list all units allunits array list arraylist length fragment roots fragmentroots jar package fragment root jarpackagefragmentroot i java element ijavaelement packages fragment roots fragmentroots get children getchildren packages length i package fragment ipackagefragment pack i package fragment ipackagefragment packages i compilation unit icompilationunit units pack get compilation units getcompilationunits units length all units allunits add units all units allunits returns compilation units project param root fragment root collect units list org eclipse jdt core i compilation unit icompilationunit list get compilation units getcompilationunits i package fragment root ipackagefragmentroot root java model exception javamodelexception list all units allunits array list arraylist root jar package fragment root jarpackagefragmentroot i java element ijavaelement packages root get children getchildren packages length i package fragment ipackagefragment pack i package fragment ipackagefragment packages i compilation unit icompilationunit units pack get compilation units getcompilationunits units length all units allunits add units all units allunits i package fragment root ipackagefragmentroot get external jar file getexternaljarfile i java project ijavaproject project string jar simple name jarsimplename java model exception javamodelexception i package fragment root ipackagefragmentroot roots project get package fragment roots getpackagefragmentroots roots roots length roots length i package fragment root ipackagefragmentroot root roots root is external isexternal root get element name getelementname equals jar simple name jarsimplename root returns i path ipath external java library jcl min jclmin jar i path ipath getexternaljclpath path getexternaljclpathstring returns i path ipath external java library jcl min jclmin jar i path ipath getexternaljclpath string compliance path getexternaljclpathstring compliance returns java path external java library jcl min jclmin jar string getexternaljclpathstring getexternaljclpathstring returns java path external java library jcl min jclmin jar string getexternaljclpathstring string compliance get external path getexternalpath jcl min jclmin compliance jar returns i path ipath root source external java library src i path ipath get external root source path getexternaljclrootsourcepath path src returns i path ipath source external java library jcl minsrc jclminsrc zip i path ipath getexternaljclsourcepath path get external source path string getexternaljclsourcepathstring returns i path ipath source external java library jcl minsrc jclminsrc zip i path ipath getexternaljclsourcepath string compliance path get external source path string getexternaljclsourcepathstring compliance returns java path source external java library jcl minsrc jclminsrc zip string get external source path string getexternaljclsourcepathstring get external source path string getexternaljclsourcepathstring returns java path source external java library jcl minsrc jclminsrc zip string get external source path string getexternaljclsourcepathstring string compliance get external path getexternalpath jcl min jclmin compliance src zip returns path external directory external jar files path ends file separator char separatorchar string get external path getexternalpath string path get workspace root getworkspaceroot get location getlocation to file tofile get parent file getparentfile get canonical path getcanonicalpath path char at charat path length file separator char separatorchar path file separator char separatorchar path io exception ioexception print stack trace printstacktrace returns fragment project root code code exist root path rootpath project relative path empty path ref ers refers fragment i package fragment ipackagefragment get package fragment getpackagefragment i java project ijavaproject project string root path rootpath string package name packagename java model exception javamodelexception i package fragment root ipackagefragmentroot root get package fragment root getpackagefragmentroot project root path rootpath root root get package fragment getpackagefragment package name packagename returns fragment root project code code exist relative root path rootpath project relative path empty path ref ers refers fragment root project folder absolute root path rootpath ref ers refers external jar resource internal workspace i package fragment root ipackagefragmentroot get package fragment root getpackagefragmentroot i java project ijavaproject project string root path rootpath java model exception javamodelexception project i path ipath path path root path rootpath path is absolute isabsolute i workspace root iworkspaceroot workspace root workspaceroot resources plugin resourcesplugin get workspace getworkspace get root getroot i resource iresource resource workspace root workspaceroot find member findmember path i package fragment root ipackagefragmentroot root resource external jar root project get package fragment root getpackagefragmentroot root path rootpath resource workspace root project get package fragment root getpackagefragmentroot resource root i package fragment root ipackagefragmentroot roots project get package fragment roots getpackagefragmentroots roots roots length roots length i package fragment root ipackagefragmentroot root roots root is external isexternal root get underlying resource getunderlyingresource get project relative path getprojectrelativepath equals path root get external jar file getexternaljarfile project root path rootpath string get plugin directory path getplugindirectorypath get plugin directory path getplugindirectorypath model returns path directory plugin param type string get plugin directory path getplugindirectorypath string type string buffer stringbuffer bundle name bundlename string buffer stringbuffer org eclipse jdt core tests type bundle name bundlename append bundle name bundlename append type url platformurl platform get bundle getbundle bundle name bundlename to string tostring get entry getentry file file locator filelocator tofileurl platformurl get file getfile get absolute path getabsolutepath io exception ioexception print stack trace printstacktrace string get source workspace path getsourceworkspacepath string workspace get plugin directory path getplugindirectorypath java file separator workspace returns i workspace iworkspace test suite running i workspace iworkspace get workspace getworkspace resources plugin resourcesplugin get workspace getworkspace i workspace root iworkspaceroot get workspace root getworkspaceroot get workspace getworkspace get root getroot read java file file java io exception ioexception file length filelength file bytes filebytes file length filelength file length java file input stream fileinputstream stream java file input stream fileinputstream file bytes read bytesread last read size lastreadsize last read size lastreadsize bytes read bytesread file length filelength last read size lastreadsize stream read file bytes filebytes bytes read bytesread file length filelength bytes read bytesread bytes read bytesread last read size lastreadsize file bytes filebytes stream close remove white spaces string param input input string string whitespaces string remove white space removewhitespace string input string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer input string buffer stringbuffer buffer string buffer stringbuffer tokenizer has more tokens hasmoretokens buffer append tokenizer next token nexttoken buffer to string tostring check locally required jcl files jcl name jclname jar jcl name jclname src zip copy project resources setupexternaljcl string jcl name jclname io exception ioexception string external path externalpath get external path getexternalpath string separator java file separator string resourcejcldir get plugin directory path getplugindirectorypath separator jcl java file jcl dir jcldir java file external path externalpath java file jcl min jclmin java file external path externalpath jcl name jclname jar java file jcl minsrc jclminsrc java file external path externalpath jcl name jclname src zip jcl dir jcldir exists jcl dir jcldir mkdir mkdir failed io exception ioexception create directory jcl dir jcldir copy files jcl directory java file resourcejclmin java file resourcejcldir separator jcl name jclname jar copy resourcejclmin jcl min jclmin java file resourcejclminsrc java file resourcejcldir separator jcl name jclname src zip copy resourcejclminsrc jcl minsrc jclminsrc check files jcl min jclmin jar jcl minsrc jclminsrc zip copy file missing workspace java file resourcejclmin java file resourcejcldir separator jcl name jclname jar jcl min jclmin last modified lastmodified resourcejclmin last modified lastmodified jcl min jclmin length resourcejclmin length copy resourcejclmin jcl min jclmin java file resourcejclminsrc java file resourcejcldir separator jcl name jclname src zip jcl minsrc jclminsrc last modified lastmodified resourcejclminsrc last modified lastmodified jcl minsrc jclminsrc length resourcejclminsrc length copy resourcejclminsrc jcl minsrc jclminsrc setupjclclasspathvariables string compliance java model exception javamodelexception io exception ioexception equals compliance java core javacore get classpath variable getclasspathvariable jcl lib setupexternaljcl jcl min jclmin java core javacore set classpath variables setclasspathvariables string jcl lib jcl src jcl srcroot i path ipath getexternaljclpath compliance getexternaljclsourcepath compliance get external root source path getexternaljclrootsourcepath equals compliance java core javacore get classpath variable getclasspathvariable jcl lib setupexternaljcl jcl min jclmin java core javacore set classpath variables setclasspathvariables string jcl lib jcl src jcl srcroot i path ipath getexternaljclpath compliance getexternaljclsourcepath compliance get external root source path getexternaljclrootsourcepath equals compliance java core javacore get classpath variable getclasspathvariable jcl lib setupexternaljcl jcl min jclmin java core javacore set classpath variables setclasspathvariables string jcl lib jcl src jcl srcroot i path ipath getexternaljclpath compliance getexternaljclsourcepath compliance get external root source path getexternaljclrootsourcepath java core javacore get classpath variable getclasspathvariable jcl lib setupexternaljcl jcl min jclmin java core javacore set classpath variables setclasspathvariables string jcl lib jcl src jcl srcroot i path ipath getexternaljclpath getexternaljclsourcepath get external root source path getexternaljclrootsourcepath remove white spaces deginning lines string param input input string string whitespaces string trim lines leading whitespaces trimlinesleadingwhitespaces string input string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer input string buffer stringbuffer buffer string buffer stringbuffer tokenizer has more tokens hasmoretokens string tokenizer next token nexttoken length length size idx length loop idx length char at charat idx size loop length idx idx length split line index splitlineindex index of indexof idx split line index splitlineindex comment start commentstart index of indexof split line index splitlineindex comment start commentstart size string buffer stringbuffer new line newline string buffer stringbuffer substring idx split line index splitlineindex trim new line newline append new line newline append substring split line index splitlineindex trim new line newline append buffer append new line newline buffer append substring idx trim buffer append buffer append buffer to string tostring