copyright google rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors john glassmyer jogl google group sorting broken https bugs eclipse org lars vogel lars vogel vogella contributions bug org eclipse jdt internal core dom rewrite imports java util array list arraylist java util arrays java util collection java util collections java util comparator java util identity hash map identityhashmap java util iterator java util list java util map org eclipse jface text i region iregion org eclipse text edits delete edit deleteedit org eclipse text edits insert edit insertedit org eclipse text edits move source edit movesourceedit org eclipse text edits move target edit movetargetedit org eclipse text edits multi text edit multitextedit org eclipse text edits range marker rangemarker org eclipse text edits replace edit replaceedit org eclipse text edits text edit textedit creates text edits textedits apply order declarations compilation unit import editor importeditor iter ates iterates compilation unit original order providing turn original original start position leading delimiter original imports cursor originalimportscursor iterator original import entry originalimportentry original import iterator originalimportiterator original import entry originalimportentry current original import currentoriginalimport current position currentposition original imports cursor originalimportscursor start position startposition collection original import entry originalimportentry original import entries originalimportentries original import iterator originalimportiterator original import entries originalimportentries iterator current position currentposition start position startposition current original import currentoriginalimport original import iterator originalimportiterator has next hasnext original import iterator originalimportiterator advances cursor original order advance i region iregion declaration and comments declarationandcomments current original import currentoriginalimport declaration and comments declarationandcomments current position currentposition declaration and comments declarationandcomments get offset getoffset declaration and comments declarationandcomments get length getlength current original import currentoriginalimport original import iterator originalimportiterator has next hasnext original import iterator originalimportiterator import edits importedits collection text edit textedit leading delimiter edits leadingdelimiteredits collection text edit textedit comment and declaration edits commentanddeclarationedits import edits importedits collection text edit textedit leading delimiter edits leadingdelimiteredits collection text edit textedit comment and declaration edits commentanddeclarationedits leading delimiter edits leadingdelimiteredits leading delimiter edits leadingdelimiteredits comment and declaration edits commentanddeclarationedits comment and declaration edits commentanddeclarationedits maps identity key maps identity hash code hashcode handle cases duplicate declarations map import name importname import entry importentry map preceding imports mapprecedingimports collection import entry importentry import entries importentries map import name importname import entry importentry preceding imports precedingimports identity hash map identityhashmap import entries importentries size import entry importentry previous import previousimport import entry importentry current import currentimport import entries importentries import name importname current import name currentimportname current import currentimport import name importname preceding imports precedingimports current import name currentimportname previous import previousimport previous import previousimport current import currentimport preceding imports precedingimports contains floating comment containsfloatingcomment iterable import comment importcomment comments import comment importcomment comment comments comment succeeding line delimiters succeedinglinedelimiters string line delimiter linedelimiter string two line delimiters twolinedelimiters fix all line delimiters fixalllinedelimiters line delimiters between import groups linedelimitersbetweenimportgroups import group comparator importgroupcomparator import group comparator importgroupcomparator removed import comment reassigner removedimportcommentreassigner comment reassigner commentreassigner map import name importname import entry importentry original preceding imports originalprecedingimports list original import entry originalimportentry original import entries originalimportentries rewrite site rewritesite rewrite site rewritesite import declaration writer importdeclarationwriter declaration writer declarationwriter param line delimiter linedelimiter string delimiter generating text edits param fix all line delimiters fixalllinedelimiters specifies standardize whitespace imports pairs imports originally subsequent param line delimiters between import groups linedelimitersbetweenimportgroups number delimiters desired declarations matching groups param import group comparator importgroupcomparator determine subsequent imports match group param original imports originalimports original order imports compilation unit param rewrite site rewritesite describes location compilation unit imports rewrite n rewriten param import declaration writer importdeclarationwriter render declaration originally compilation unit string import editor importeditor string line delimiter linedelimiter fix all line delimiters fixalllinedelimiters line delimiters between import groups linedelimitersbetweenimportgroups import group comparator importgroupcomparator import group comparator importgroupcomparator list original import entry originalimportentry original imports originalimports rewrite site rewritesite rewrite site rewritesite import declaration writer importdeclarationwriter import declaration writer importdeclarationwriter line delimiter linedelimiter line delimiter linedelimiter two line delimiters twolinedelimiters line delimiter linedelimiter concat line delimiter linedelimiter fix all line delimiters fixalllinedelimiters fix all line delimiters fixalllinedelimiters line delimiters between import groups linedelimitersbetweenimportgroups line delimiters between import groups linedelimitersbetweenimportgroups import group comparator importgroupcomparator import group comparator importgroupcomparator original import entries originalimportentries original imports originalimports rewrite site rewritesite rewrite site rewritesite declaration writer declarationwriter import declaration writer importdeclarationwriter comment reassigner commentreassigner removed import comment reassigner removedimportcommentreassigner original imports originalimports fix all line delimiters fixalllinedelimiters original preceding imports originalprecedingimports collections empty map emptymap original preceding imports originalprecedingimports collections unmodifiable map unmodifiablemap map preceding imports mapprecedingimports original imports originalimports generates returns text edit textedit replace update declarations compilation unit match list standard izes standardizes whitespace subsequent imports correct number delimiters pair subsequent imports pairs originally subsequent depending link fix all line delimiters fixalllinedelimiters relocates leading trailing comments removed imports determined link comment reassigner commentreassigner text edit textedit create text edit createtextedit collection import entry importentry result ant imports resultantimports text edit textedit edit multi text edit multitextedit i region iregion surrounding region surroundingregion rewrite site rewritesite surrounding region surroundingregion result ant imports resultantimports is empty isempty original import entries originalimportentries is empty isempty leave compilation unit replace original imports surrounding whitespace delimiters preceding succeeding elements string new whitespace newwhitespace rewrite site rewritesite has preceding elements hasprecedingelements new delims newdelims rewrite site rewritesite has succeeding elements hassucceedingelements new whitespace newwhitespace create delimiter createdelimiter new delims newdelims nls new whitespace newwhitespace nls edit add child addchild replace edit replaceedit surrounding region surroundingregion get offset getoffset surrounding region surroundingregion get length getlength new whitespace newwhitespace original import entries originalimportentries is empty isempty replace existing whitespace preceding delimiters declarations succeeding delimiters collection text edit textedit import edits importedits determine edits for imports determineeditsforimports surrounding region surroundingregion result ant imports resultantimports rewrite site rewritesite has preceding elements hasprecedingelements edit add child addchild insert edit insertedit surrounding region surroundingregion get offset getoffset create delimiter createdelimiter edit add children addchildren import edits importedits to array toarray text edit textedit import edits importedits size new succeeding delims newsucceedingdelims rewrite site rewritesite has succeeding elements hassucceedingelements string new succeeding newsucceeding create delimiter createdelimiter new succeeding delims newsucceedingdelims edit add child addchild insert edit insertedit surrounding region surroundingregion get offset getoffset new succeeding newsucceeding replace original imports leaving surrounding whitespace place collection text edit textedit import edits importedits determine edits for imports determineeditsforimports rewrite site rewritesite imports region importsregion result ant imports resultantimports edit add children addchildren import edits importedits to array toarray text edit textedit import edits importedits size edit concat enates concatenates number delimiters single string string create delimiter createdelimiter number of line delimiters numberoflinedelimiters number of line delimiters numberoflinedelimiters illegal argument exception illegalargumentexception number of line delimiters numberoflinedelimiters line delimiter linedelimiter number of line delimiters numberoflinedelimiters two line delimiters twolinedelimiters string builder stringbuilder correct delimiter correctdelimiter string builder stringbuilder number of line delimiters numberoflinedelimiters correct delimiter correctdelimiter append line delimiter linedelimiter correct delimiter correctdelimiter to string tostring collection text edit textedit determine edits for imports determineeditsforimports i region iregion imports region importsregion collection import entry importentry result ant imports resultantimports collection text edit textedit edits array list arraylist map import entry importentry collection import comment importcomment comment reassignments commentreassignments comment reassigner commentreassigner reassign comments reassigncomments result ant imports resultantimports original imports cursor originalimportscursor cursor original imports cursor originalimportscursor imports region importsregion get offset getoffset original import entries originalimportentries edits add all addall place result ant imports placeresultantimports cursor result ant imports resultantimports comment reassignments commentreassignments edits add all addall delete remaining text deleteremainingtext imports region importsregion edits omit range markers rangemarkers temp orarily temporarily mark text rel ocated relocated imports collection text edit textedit edits without range markers editswithoutrangemarkers array list arraylist edits size text edit textedit edit edits edit range marker rangemarker edits without range markers editswithoutrangemarkers add edit edits without range markers editswithoutrangemarkers creates text edits textedits place result ant resultant correct rewritten position collection text edit textedit place result ant imports placeresultantimports original imports cursor originalimportscursor cursor collection import entry importentry result ant imports resultantimports map import entry importentry collection import comment importcomment comment reassignments commentreassignments collection text edit textedit edits array list arraylist import entry importentry last result ant import lastresultantimport import entry importentry current result ant import currentresultantimport result ant imports resultantimports current result ant import currentresultantimport is original isoriginal skip place original order cursor current original import currentoriginalimport cursor current original import currentoriginalimport current result ant import currentresultantimport cursor advance collection import comment importcomment reassigned comments reassignedcomments comment reassignments commentreassignments current result ant import currentresultantimport reassigned comments reassignedcomments reassigned comments reassignedcomments collections empty list emptylist import edits importedits import placement importplacement current result ant import currentresultantimport is original isoriginal original import entry originalimportentry original import originalimport current result ant import currentresultantimport as original import entry asoriginalimportentry cursor current original import currentoriginalimport current result ant import currentresultantimport import placement importplacement preserve stationary import preservestationaryimport original import originalimport import placement importplacement move original import moveoriginalimport original import originalimport cursor current position currentposition import placement importplacement place new import placenewimport current result ant import currentresultantimport cursor current position currentposition string new delimiter newdelimiter determine new delimiter determinenewdelimiter last result ant import lastresultantimport current result ant import currentresultantimport reassigned comments reassignedcomments new delimiter newdelimiter edits add all addall import placement importplacement leading delimiter edits leadingdelimiteredits new delimiter newdelimiter is empty isempty edits add insert edit insertedit cursor current position currentposition new delimiter newdelimiter reassigned comments reassignedcomments is empty isempty edits add all addall rel ocate comments relocatecomments reassigned comments reassignedcomments cursor current position currentposition has floating comment hasfloatingcomment current result ant import currentresultantimport is original isoriginal contains floating comment containsfloatingcomment current result ant import currentresultantimport as original import entry asoriginalimportentry comments string delimiter after reassigned comments delimiterafterreassignedcomments has floating comment hasfloatingcomment two line delimiters twolinedelimiters line delimiter linedelimiter edits add insert edit insertedit cursor current position currentposition delimiter after reassigned comments delimiterafterreassignedcomments edits add all addall import placement importplacement comment and declaration edits commentanddeclarationedits current result ant import currentresultantimport cursor current original import currentoriginalimport cursor advance last result ant import lastresultantimport current result ant import currentresultantimport edits creates text edits insert text import edits importedits place new import placenewimport import entry importentry current result ant import currentresultantimport position string declaration declaration writer declarationwriter write import declaration writeimportdeclaration current result ant import currentresultantimport import name importname import edits importedits collections text edit textedit empty set emptyset collections text edit textedit singleton insert edit insertedit position declaration creates text edits move text position import edits importedits move original import moveoriginalimport original import entry originalimportentry import entry importentry position move source edit movesourceedit leading source edit leadingsourceedit move source edit movesourceedit import entry importentry leading delimiter leadingdelimiter get offset getoffset import entry importentry leading delimiter leadingdelimiter get length getlength move target edit movetargetedit leading target edit leadingtargetedit move target edit movetargetedit position leading source edit leadingsourceedit collection text edit textedit leading delimiter edits leadingdelimiteredits arrays as list aslist leading source edit leadingsourceedit leading target edit leadingtargetedit move source edit movesourceedit import source edit importsourceedit move source edit movesourceedit import entry importentry declaration and comments declarationandcomments get offset getoffset import entry importentry declaration and comments declarationandcomments get length getlength move target edit movetargetedit import target edit importtargetedit move target edit movetargetedit position import source edit importsourceedit collection text edit textedit declaration and comment edits declarationandcommentedits arrays as list aslist import source edit importsourceedit import target edit importtargetedit import edits importedits leading delimiter edits leadingdelimiteredits declaration and comment edits declarationandcommentedits creates range markers rangemarkers mark rel ocated relocated text prevent deletion import edits importedits preserve stationary import preservestationaryimport original import entry originalimportentry import entry importentry import edits importedits collections text edit textedit singleton range marker rangemarker import entry importentry leading delimiter leadingdelimiter get offset getoffset import entry importentry leading delimiter leadingdelimiter get length getlength collections text edit textedit singleton range marker rangemarker import entry importentry declaration and comments declarationandcomments get offset getoffset import entry importentry declaration and comments declarationandcomments get length getlength determines standardize whitespace previous trailing comment start current leading comment returns string correct whitespace place imports code current original leading whitespace preserved string determine new delimiter determinenewdelimiter import entry importentry last import lastimport import entry importentry current import currentimport collection import comment importcomment reassigned comments reassignedcomments last import lastimport nls has reassigned comments hasreassignedcomments reassigned comments reassignedcomments is empty isempty needs standard delimiter needsstandarddelimiter last import lastimport current import currentimport has reassigned comments hasreassignedcomments number of line delimiters numberoflinedelimiters collection import comment importcomment leading comments leadingcomments has reassigned comments hasreassignedcomments leading comments leadingcomments reassigned comments reassignedcomments current import currentimport is original isoriginal leading comments leadingcomments current import currentimport as original import entry asoriginalimportentry comments leading comments leadingcomments collections empty list emptylist contains floating comment containsfloatingcomment leading comments leadingcomments prevent floating leading comment attached preceding number of line delimiters numberoflinedelimiters import group comparator importgroupcomparator compare last import lastimport import name importname current import currentimport import name importname separate imports belonging groups number of line delimiters numberoflinedelimiters math max number of line delimiters numberoflinedelimiters line delimiters between import groups linedelimitersbetweenimportgroups string standard delimiter standarddelimiter create delimiter createdelimiter number of line delimiters numberoflinedelimiters reassigned comments necessitate rel ocating relocating delimiter current import currentimport is original isoriginal has reassigned comments hasreassignedcomments original import entry originalimportentry original import originalimport current import currentimport as original import entry asoriginalimportentry i region iregion original delimiter originaldelimiter original import originalimport leading delimiter leadingdelimiter original import originalimport preceding line delimiters precedinglinedelimiters number of line delimiters numberoflinedelimiters delimiter is same length delimiterissamelength original delimiter originaldelimiter standard delimiter standarddelimiter is empty isempty original delimiter originaldelimiter original delimiter originaldelimiter get length getlength standard delimiter standarddelimiter length delimiter is same length delimiterissamelength standard delimiter standarddelimiter determines whitespace subsequent imports standard number delimiters needs standard delimiter needsstandarddelimiter import entry importentry last import lastimport import entry importentry current import currentimport has reassigned comments hasreassignedcomments needs standard delimiter needsstandarddelimiter fix all line delimiters fixalllinedelimiters organize imports mode delimiters imports standard ized standardized needs standard delimiter needsstandarddelimiter current import currentimport is original isoriginal original leading delimiter needs standard delimiter needsstandarddelimiter has reassigned comments hasreassignedcomments comments reassigned removed imports prepended needs standard delimiter needsstandarddelimiter import entry importentry original preceding import originalprecedingimport original preceding imports originalprecedingimports current import currentimport import name importname original preceding import originalprecedingimport last import lastimport import name importname original preceding import originalprecedingimport import name importname post rewrite pre rewrite needs standard delimiter needsstandarddelimiter needs standard delimiter needsstandarddelimiter collection text edit textedit rel ocate comments relocatecomments collection import comment importcomment reassigned comments reassignedcomments insert position insertposition reassigned comments reassignedcomments is empty isempty collections empty list emptylist collection text edit textedit edits array list arraylist reassigned comments reassignedcomments size import comment importcomment last comment lastcomment import comment importcomment current comment currentcomment reassigned comments reassignedcomments move source edit movesourceedit source edit sourceedit move source edit movesourceedit current comment currentcomment region get offset getoffset current comment currentcomment region get length getlength edits add source edit sourceedit last comment lastcomment preserve blank lines comments succeeding line delimiters succeedinglinedelimiters last comment lastcomment succeeding line delimiters succeedinglinedelimiters edits add insert edit insertedit insert position insertposition create delimiter createdelimiter succeeding line delimiters succeedinglinedelimiters edits add move target edit movetargetedit insert position insertposition source edit sourceedit last comment lastcomment current comment currentcomment edits creates text edits textedits delete text remaining result ant resultant imports collection text edit textedit delete remaining text deleteremainingtext i region iregion import region importregion collection text edit textedit edits list text edit textedit sorted edits sortededits array list arraylist edits collections sort sorted edits sortededits comparator text edit textedit override compare text edit textedit text edit textedit get offset getoffset get offset getoffset delete position deleteposition import region importregion get offset getoffset collection text edit textedit delete remaining text edits deleteremainingtextedits array list arraylist text edit textedit edit sorted edits sortededits edit get offset getoffset delete position deleteposition delete remaining text edits deleteremainingtextedits add delete edit deleteedit delete position deleteposition edit get offset getoffset delete position deleteposition edit end position editendposition edit get offset getoffset edit get length getlength delete position deleteposition math max delete position deleteposition edit end position editendposition delete text remaining import region end position importregionendposition import region importregion get offset getoffset import region importregion get length getlength delete position deleteposition import region end position importregionendposition delete remaining text edits deleteremainingtextedits add delete edit deleteedit delete position deleteposition import region end position importregionendposition delete position deleteposition delete remaining text edits deleteremainingtextedits