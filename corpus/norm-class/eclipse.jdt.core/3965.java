copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler parser internal block structure parsing recovery org eclipse jdt core compiler org eclipse jdt internal compiler ast argument org eclipse jdt internal compiler ast ast node astnode org eclipse jdt internal compiler ast block org eclipse jdt internal compiler ast field declaration fielddeclaration org eclipse jdt internal compiler ast local declaration localdeclaration org eclipse jdt internal compiler ast statement org eclipse jdt internal compiler ast type declaration typedeclaration org eclipse jdt internal compiler lookup base types basetypes org eclipse jdt internal compiler lookup compiler modifiers compilermodifiers recovered block recoveredblock recovered statement recoveredstatement compiler modifiers compilermodifiers terminal tokens terminaltokens base types basetypes block block declaration blockdeclaration recovered statement recoveredstatement statements statement count statementcount preserve content preservecontent recovered local variable recoveredlocalvariable pending argument pendingargument recovered block recoveredblock block block recovered element recoveredelement parent bracket balance bracketbalance block parent bracket balance bracketbalance block declaration blockdeclaration block found opening brace foundopeningbrace record nested block declaration recovered element recoveredelement add block nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue nested block starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend nested block declaration nestedblockdeclaration source start sourcestart block declaration blockdeclaration source end sourceend parent add nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue recovered block recoveredblock element recovered block recoveredblock nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue pending argument promote block pending argument pendingargument element attach pending argument pendingargument pending argument pendingargument attach element nested block declaration nestedblockdeclaration source end sourceend element record local declaration recovered element recoveredelement add local declaration localdeclaration local declaration localdeclaration bracket balance value bracketbalancevalue add local declaration localdeclaration bracket balance value bracketbalancevalue record local declaration recovered element recoveredelement add local declaration localdeclaration local declaration localdeclaration bracket balance value bracketbalancevalue delegated by parent delegatedbyparent local variable starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend local declaration localdeclaration declaration source start declarationsourcestart block declaration blockdeclaration source end sourceend ignore delegated by parent delegatedbyparent parent add local declaration localdeclaration bracket balance value bracketbalancevalue recovered local variable recoveredlocalvariable element recovered local variable recoveredlocalvariable local declaration localdeclaration bracket balance value bracketbalancevalue local declaration localdeclaration argument pending argument pendingargument element attach element local declaration localdeclaration declaration source end declarationsourceend element record statement declaration recovered element recoveredelement add statement stmt bracket balance value bracketbalancevalue add stmt bracket balance value bracketbalancevalue record statement declaration recovered element recoveredelement add statement stmt bracket balance value bracketbalancevalue delegated by parent delegatedbyparent nested block starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend stmt source start sourcestart block declaration blockdeclaration source end sourceend ignore delegated by parent delegatedbyparent parent add stmt bracket balance value bracketbalancevalue recovered statement recoveredstatement element recovered statement recoveredstatement stmt bracket balance value bracketbalancevalue attach element stmt source end sourceend element add ition addition type initializer method body recovered element recoveredelement add type declaration typedeclaration type declaration typedeclaration bracket balance value bracketbalancevalue add type declaration typedeclaration bracket balance value bracketbalancevalue add ition addition type initializer method body recovered element recoveredelement add type declaration typedeclaration type declaration typedeclaration bracket balance value bracketbalancevalue delegated by parent delegatedbyparent type starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend type declaration typedeclaration declaration source start declarationsourcestart block declaration blockdeclaration source end sourceend ignore delegated by parent delegatedbyparent parent add type declaration typedeclaration bracket balance value bracketbalancevalue recovered statement recoveredstatement element recovered type recoveredtype type declaration typedeclaration bracket balance value bracketbalancevalue attach element type declaration typedeclaration declaration source end declarationsourceend element attach recovered statement attach recovered statement recoveredstatement recovered statement recoveredstatement statements statements recovered statement recoveredstatement statement count statementcount statement count statementcount statements length system arraycopy statements statements recovered statement recoveredstatement statement count statementcount statement count statementcount statements statement count statementcount recovered statement recoveredstatement answer parsed structure ast node astnode parse tree parsetree block declaration blockdeclaration string to string tostring tab string buffer stringbuffer result string buffer stringbuffer tab string tabstring tab nls result append recovered block block declaration blockdeclaration print tab result statements statement count statementcount nls result append result append statements to string tostring tab result to string tostring rebuild block nested structure scope block updated block updatedblock block marked preserved empty ignore preserve content preservecontent statement count statementcount statement updated statements updatedstatements statement statement count statementcount updated count updatedcount collect updated statements statement count statementcount statement updated statement updatedstatement statements updated statement updatedstatement updated statement updatedstatement updated statements updatedstatements updated count updatedcount updated statement updatedstatement int eresting interesting block updated count updatedcount resize statement collection updated count updatedcount statement count statementcount block declaration blockdeclaration statements statement updated count updatedcount system arraycopy updated statements updatedstatements block declaration blockdeclaration statements updated count updatedcount block declaration blockdeclaration statements updated statements updatedstatements block declaration blockdeclaration rebuild statement nested structure scope statement updated statement updatedstatement updated block updatedblock closing brace consumed closed current element current element currentelement exited recovered element recoveredelement update on closing brace updateonclosingbrace brace start bracestart brace end braceend bracket balance bracketbalance parent update source end if necessary updatesourceendifnecessary brace start bracestart brace end braceend block method body closes method recovered method recoveredmethod method enclosing method enclosingmethod method method method body methodbody parent update on closing brace updateonclosingbrace brace start bracestart brace end braceend recovered initializer recoveredinitializer initializer enclosing initializer enclosinginitializer initializer initializer initializer body initializerbody parent update on closing brace updateonclosingbrace brace start bracestart brace end braceend parent opening brace consumed expected opening current element body start bodystart updated recovered element recoveredelement update on opening brace updateonopeningbrace brace start bracestart brace end braceend create nested block block block block block source start sourcestart parser scanner start position startposition add block update parse node update parse tree updateparsetree updated block updatedblock rebuild flattened block nested structure scope statement update statement updatestatement block closed empty ignore block declaration blockdeclaration source end sourceend statement count statementcount statement updated statements updatedstatements statement statement count statementcount updated count updatedcount collect updated statements statement count statementcount statement updated statement updatedstatement statements updated statement updatedstatement updated statement updatedstatement updated statements updatedstatements updated count updatedcount updated statement updatedstatement int eresting interesting block updated count updatedcount resize statement collection updated count updatedcount statement count statementcount block declaration blockdeclaration statements statement updated count updatedcount system arraycopy updated statements updatedstatements block declaration blockdeclaration statements updated count updatedcount block declaration blockdeclaration statements updated statements updatedstatements block declaration blockdeclaration record field declaration recovered element recoveredelement add field declaration fielddeclaration field declaration fielddeclaration bracket balance value bracketbalancevalue local variables method field type name fieldtypename local field declaration fielddeclaration modifiers acc final accfinal initializer field declaration fielddeclaration type field type name fieldtypename field declaration fielddeclaration type get type name gettypename length char operation charoperation equals field type name fieldtypename void binding voidbinding source name sourcename update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend field declaration fielddeclaration declaration source start declarationsourcestart parent add field declaration fielddeclaration bracket balance value bracketbalancevalue local variable starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend field declaration fielddeclaration declaration source start declarationsourcestart block declaration blockdeclaration source end sourceend parent add field declaration fielddeclaration bracket balance value bracketbalancevalue reduced assist node assistnode context gek