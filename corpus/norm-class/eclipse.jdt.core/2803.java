copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contribution bug error inferred annotations leading contradictory annotations bug inference nullness target type lost weaker hint app licability applicability analysis bug nullable type variant non null nonnull constrained type parameter grief brychcy contribution bug type mismatch convert non null nonnull non null nonnull org eclipse jdt internal compiler lookup java util hash map hashmap org eclipse jdt core compiler char operation charoperation org eclipse jdt internal compiler ast ast node astnode org eclipse jdt internal compiler util simple lookup table simplelookuptable org eclipse jdt internal compiler util util type system typesystem abstract ion abstraction responsible keeping track types under go undergo derivation sort derived types produced term derivation pascal sense object oriented par lance parlance java type under go undergo derivation bunch ways created arrays parameterized created raw forms type wildcard type int ersection intersection type parameter izes parameterizes annotated resp onsibility responsibility type system typesystem serve factory ensure unique types created main tained maintained compiler depends object identity derivation parameters dole unique parameterized type binding parameterizedtypebinding attempts create list string assigned java manage create single binding type annotations coming picture order type annotated differently bindings distinct shared start doling bindings valid ating validating type identity equivalence issue solve problem produce bindings annotated differently stamp type binding typebinding types fail ascertained mere annotation var iants variants comparing field responsible stamping unique types types derived form part icipate participate derivation form type arguments tracked type derived form part icipate participate derivation completely oblivious type binding typebinding computation primitive types types assignment start suitably high proceed monotonically accidentally collide space assignments naked type annotated var iants variants var iously variously annotated share map string object map string object map string object map string object map string object share unadorned naked type map string object share map string string annotated type str ip strip annotations naked type naked type annotated type alternately naked type arrive universe differently annotated types share bindings ident ically identically annotated sub systems subsystems annotation agnostic ascertain binding equality comparing field type system typesystem has hed parameterized types hashedparameterizedtypes internal parameterized type binding internalparameterizedtypebinding parameterized type binding parameterizedtypebinding internal parameterized type binding internalparameterizedtypebinding reference binding referencebinding generic type generictype type binding typebinding type arguments typearguments reference binding referencebinding enclosing type enclosingtype lookup environment lookupenvironment environment generic type generictype type arguments typearguments enclosing type enclosingtype environment equals object homogeneous container parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding identity comparison type type enclosing type enclosingtype enclosing type enclosingtype util effectively equal effectivelyequal arguments arguments hash code hashcode hash code hashcode type hash code hashcode enclosing type enclosingtype enclosing type enclosingtype hash code hashcode length arguments arguments length length hash code hashcode arguments arguments hash code hashcode hash code hashcode hash map hashmap parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding has hed parameterized types hashedparameterizedtypes hash map hashmap parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding reference binding referencebinding generic type generictype type binding typebinding type arguments typearguments reference binding referencebinding enclosing type enclosingtype annotation binding annotationbinding annotations reference binding referencebinding unannotated generic type unannotatedgenerictype reference binding referencebinding get unannotated type getunannotatedtype generic type generictype type arguments length typeargumentslength type arguments typearguments type arguments typearguments length type binding typebinding unannotated type arguments unannotatedtypearguments type arguments typearguments type binding typebinding type arguments length typeargumentslength type arguments length typeargumentslength unannotated type arguments unannotatedtypearguments get unannotated type getunannotatedtype type arguments typearguments reference binding referencebinding unannotated enclosing type unannotatedenclosingtype enclosing type enclosingtype reference binding referencebinding get unannotated type getunannotatedtype enclosing type enclosingtype parameterized type binding parameterizedtypebinding type param eterization typeparameterization internal parameterized type binding internalparameterizedtypebinding unannotated generic type unannotatedgenerictype unannotated type arguments unannotatedtypearguments unannotated enclosing type unannotatedenclosingtype type system typesystem environment reference binding referencebinding generic type to match generictypetomatch unannotated generic type unannotatedgenerictype enclosing type to match enclosingtypetomatch unannotated enclosing type unannotatedenclosingtype type binding typebinding type arguments to match typeargumentstomatch unannotated type arguments unannotatedtypearguments type system typesystem annotatable type system annotatabletypesystem generic type to match generictypetomatch generic type generictype enclosing type to match enclosingtypetomatch enclosing type enclosingtype type arguments to match typeargumentstomatch type arguments typearguments parameterized type binding parameterizedtypebinding parameterized type bindings parameterizedtypebindings has hed parameterized types hashedparameterizedtypes type param eterization typeparameterization length parameterized type bindings parameterizedtypebindings parameterized type bindings parameterizedtypebindings length length parameterized type binding parameterizedtypebinding parameterized type parameterizedtype parameterized type bindings parameterizedtypebindings identity comparison parameterized type parameterizedtype actual type actualtype generic type to match generictypetomatch identity comparison parameterized type parameterizedtype enclosing type enclosingtype enclosing type to match enclosingtypetomatch util effectively equal effectivelyequal parameterized type parameterizedtype type arguments typearguments type arguments to match typeargumentstomatch util effectively equal effectivelyequal annotations parameterized type parameterizedtype get type annotations gettypeannotations parameterized type parameterizedtype reference binding referencebinding generic type generictype type binding typebinding type arguments typearguments reference binding referencebinding enclosing type enclosingtype parameterized type binding parameterizedtypebinding parameterized type parameterizedtype reference binding referencebinding unannotated generic type unannotatedgenerictype reference binding referencebinding get unannotated type getunannotatedtype generic type generictype type arguments length typeargumentslength type arguments typearguments type arguments typearguments length type binding typebinding unannotated type arguments unannotatedtypearguments type arguments typearguments type binding typebinding type arguments length typeargumentslength type arguments length typeargumentslength unannotated type arguments unannotatedtypearguments get unannotated type getunannotatedtype type arguments typearguments reference binding referencebinding unannotated enclosing type unannotatedenclosingtype enclosing type enclosingtype reference binding referencebinding get unannotated type getunannotatedtype enclosing type enclosingtype parameterized type binding parameterizedtypebinding type param eterization typeparameterization internal parameterized type binding internalparameterizedtypebinding unannotated generic type unannotatedgenerictype unannotated type arguments unannotatedtypearguments unannotated enclosing type unannotatedenclosingtype type system typesystem environment parameterized type binding parameterizedtypebinding parameterized type bindings parameterizedtypebindings has hed parameterized types hashedparameterizedtypes type param eterization typeparameterization slot parameterized type bindings parameterizedtypebindings slot parameterized type bindings parameterizedtypebindings parameterized type binding parameterizedtypebinding slot parameterized type bindings parameterizedtypebindings length system arraycopy parameterized type bindings parameterizedtypebindings parameterized type bindings parameterizedtypebindings parameterized type binding parameterizedtypebinding slot slot parameterized type bindings parameterizedtypebindings slot parameterized type parameterizedtype has hed parameterized types hashedparameterizedtypes type param eterization typeparameterization parameterized type bindings parameterizedtypebindings type id typeid type ids typeids last well known type id lastwellknowntypeid type binding typebinding types auxiliary fast lookup table parameterized types has hed parameterized types hashedparameterizedtypes parameterized types parameterizedtypes store types annotation binding annotationbinding type binding typebinding don types operate binding level simple lookup table simplelookuptable annotation types annotationtypes lookup environment lookupenvironment environment type system typesystem lookup environment lookupenvironment environment environment environment annotation types annotationtypes simple lookup table simplelookuptable type id typeid type ids typeids last well known type id lastwellknowntypeid types type binding typebinding type ids typeids last well known type id lastwellknowntypeid parameterized types parameterizedtypes has hed parameterized types hashedparameterizedtypes type answer unannotated aka naked prototype convenient register type type system typesystem sta mped stamped type binding typebinding get unannotated type getunannotatedtype type binding typebinding type unresolved reference binding unresolvedreferencebinding urb type is unresolved type isunresolvedtype urb unresolved reference binding unresolvedreferencebinding type reference binding referencebinding resolved type resolvedtype urb resolved type resolvedtype resolved type resolvedtype char operation charoperation index of indexof type source name sourcename type environment convert to raw type converttorawtype resolved type resolvedtype type resolved type resolvedtype char operation charoperation index of indexof type source name sourcename may tolerate missing type maytoleratemissingtype environment may tolerate missing type maytoleratemissingtype environment may tolerate missing type maytoleratemissingtype ensure unique assignment enclosing type parameterized type type binary type binding binarytypebinding resolve type resolvetype type environment environment may tolerate missing type maytoleratemissingtype may tolerate missing type maytoleratemissingtype type type ids typeids no id noid type has type annotations hastypeannotations illegal state exception illegalstateexception types length typeslength types length type id typeid types length typeslength system arraycopy types types type binding typebinding types length typeslength types length typeslength types type type id typeid type binding typebinding type binding typebinding naked type nakedtype types type types type type has type annotations hastypeannotations naked type nakedtype illegal state exception illegalstateexception naked type nakedtype naked type nakedtype type assigned types type type binding typebinding urb urb type ids typeids no id noid urb type types type type force fully forcefully register type derived type registered key unannotated type family create clone play role swap types types cache force register as derived forceregisterasderived type binding typebinding derived derived type ids typeids no id noid types type binding typebinding unannotated types identity comparison unannotated derived registered unannotated replace fresh clone remain unannotated types unannotated derived clone proceed normal cache derived type cachederivedtype unannotated derived nls illegal state exception illegalstateexception type registered expected derived type var iously variously annotated versions type binding typebinding get annotated types getannotatedtypes type binding typebinding type binding types note parameters type type annotations lookup environment type system typesystem type system typesystem ats annotated materialize unannotated versions work array binding arraybinding swap unresolved swapunresolved special handling incoming leaf type leaftype urb resolve raw type array binding arraybinding get array type getarraytype type binding typebinding leaf type leaftype dimensions leaf type leaftype array binding arraybinding dimensions leaf type leaftype dimensions leaf type leaftype leaf type leaftype leaf component type leafcomponenttype type binding typebinding unannotated leaf type unannotatedleaftype get unannotated type getunannotatedtype leaf type leaftype type binding typebinding derived types derivedtypes types unannotated leaf type unannotatedleaftype length derived types derivedtypes length length type binding typebinding derived type derivedtype derived types derivedtypes derived type derivedtype derived type derivedtype is array type isarraytype derived type derivedtype has type annotations hastypeannotations identity comparison derived type derivedtype leaf component type leafcomponenttype unannotated leaf type unannotatedleaftype derived type derivedtype dimensions dimensions array binding arraybinding derived type derivedtype length system arraycopy derived types derivedtypes derived types derivedtypes type binding typebinding length length types unannotated leaf type unannotatedleaftype derived types derivedtypes type binding typebinding array type arraytype derived types derivedtypes array binding arraybinding unannotated leaf type unannotatedleaftype dimensions environment types length typeslength types length type id typeid types length typeslength system arraycopy types types type binding typebinding types length typeslength types length typeslength types type id typeid type binding typebinding array binding arraybinding types array type arraytype type id typeid array type arraytype array binding arraybinding get array type getarraytype type binding typebinding leaf component type leafcomponenttype dimensions annotation binding annotationbinding annotations get array type getarraytype leaf component type leafcomponenttype dimensions reference binding referencebinding get member type getmembertype reference binding referencebinding member type membertype reference binding referencebinding enclosing type enclosingtype plain vanilla type system hooked member type membertype note parameters type type annotations lookup environment type system typesystem annotatable type system annotatabletypesystem materialize unannotated versions work parameterized type binding parameterizedtypebinding get parameterized type getparameterizedtype reference binding referencebinding generic type generictype type binding typebinding type arguments typearguments reference binding referencebinding enclosing type enclosingtype reference binding referencebinding unannotated generic type unannotatedgenerictype reference binding referencebinding get unannotated type getunannotatedtype generic type generictype type arguments length typeargumentslength type arguments typearguments type arguments typearguments length type binding typebinding unannotated type arguments unannotatedtypearguments type arguments typearguments type binding typebinding type arguments length typeargumentslength type arguments length typeargumentslength unannotated type arguments unannotatedtypearguments get unannotated type getunannotatedtype type arguments typearguments reference binding referencebinding unannotated enclosing type unannotatedenclosingtype enclosing type enclosingtype reference binding referencebinding get unannotated type getunannotatedtype enclosing type enclosingtype parameterized type binding parameterizedtypebinding parameterized type parameterizedtype parameterized types parameterizedtypes unannotated generic type unannotatedgenerictype unannotated type arguments unannotatedtypearguments unannotated enclosing type unannotatedenclosingtype binding annotations parameterized type parameterizedtype parameterized type parameterizedtype parameterized type parameterizedtype parameterized type binding parameterizedtypebinding unannotated generic type unannotatedgenerictype unannotated type arguments unannotatedtypearguments unannotated enclosing type unannotatedenclosingtype environment cache derived type cachederivedtype unannotated generic type unannotatedgenerictype parameterized type parameterizedtype parameterized types parameterizedtypes generic type generictype type arguments typearguments enclosing type enclosingtype parameterized type parameterizedtype types length typeslength types length type id typeid types length typeslength system arraycopy types types type binding typebinding types length typeslength types length typeslength types type id typeid type binding typebinding parameterized type binding parameterizedtypebinding types parameterized type parameterizedtype type id typeid parameterized type parameterizedtype parameterized type binding parameterizedtypebinding get parameterized type getparameterizedtype reference binding referencebinding generic type generictype type binding typebinding type arguments typearguments reference binding referencebinding enclosing type enclosingtype annotation binding annotationbinding annotations get parameterized type getparameterizedtype generic type generictype type arguments typearguments enclosing type enclosingtype note parameters type type annotations lookup environment type system typesystem annotatable type system annotatabletypesystem materialize unannotated versions work raw type binding rawtypebinding get raw type getrawtype reference binding referencebinding generic type generictype reference binding referencebinding enclosing type enclosingtype reference binding referencebinding unannotated generic type unannotatedgenerictype reference binding referencebinding get unannotated type getunannotatedtype generic type generictype reference binding referencebinding unannotated enclosing type unannotatedenclosingtype enclosing type enclosingtype reference binding referencebinding get unannotated type getunannotatedtype enclosing type enclosingtype type binding typebinding derived types derivedtypes types unannotated generic type unannotatedgenerictype length derived types derivedtypes length length type binding typebinding derived type derivedtype derived types derivedtypes derived type derivedtype identity comparison derived type derivedtype is raw type israwtype derived type derivedtype actual type actualtype unannotated generic type unannotatedgenerictype derived type derivedtype has type annotations hastypeannotations identity comparison derived type derivedtype enclosing type enclosingtype unannotated enclosing type unannotatedenclosingtype raw type binding rawtypebinding derived type derivedtype length system arraycopy derived types derivedtypes derived types derivedtypes type binding typebinding length length types unannotated generic type unannotatedgenerictype derived types derivedtypes type binding typebinding raw tytpe rawtytpe derived types derivedtypes raw type binding rawtypebinding unannotated generic type unannotatedgenerictype unannotated enclosing type unannotatedenclosingtype environment types length typeslength types length type id typeid types length typeslength system arraycopy types types type binding typebinding types length typeslength types length typeslength types type id typeid type binding typebinding raw type binding rawtypebinding types raw tytpe rawtytpe type id typeid raw tytpe rawtytpe raw type binding rawtypebinding get raw type getrawtype reference binding referencebinding generic type generictype reference binding referencebinding enclosing type enclosingtype annotation binding annotationbinding annotations get raw type getrawtype generic type generictype enclosing type enclosingtype parameters type type annotations lookup environment type system typesystem annotatable type system annotatabletypesystem materialize unannotated versions work wildcard binding wildcardbinding get wildcard getwildcard reference binding referencebinding generic type generictype rank type binding typebinding bound type binding typebinding other bounds otherbounds bound kind boundkind pseudo wildcard denoting composite bounds lub computation generic type generictype generic type generictype reference binding referencebinding lub reference binding referencebinding unannotated generic type unannotatedgenerictype reference binding referencebinding get unannotated type getunannotatedtype generic type generictype other bounds length otherboundslength other bounds otherbounds other bounds otherbounds length type binding typebinding unannotated other bounds unannotatedotherbounds other bounds otherbounds type binding typebinding other bounds length otherboundslength other bounds length otherboundslength unannotated other bounds unannotatedotherbounds get unannotated type getunannotatedtype other bounds otherbounds type binding typebinding unannotated bound unannotatedbound bound get unannotated type getunannotatedtype bound construction cached info cachedinfo type binding typebinding derived types derivedtypes types unannotated generic type unannotatedgenerictype length derived types derivedtypes length length type binding typebinding derived type derivedtype derived types derivedtypes derived type derivedtype identity comparison derived type derivedtype is wildcard iswildcard derived type derivedtype actual type actualtype unannotated generic type unannotatedgenerictype derived type derivedtype has type annotations hastypeannotations identity comparison derived type derivedtype rank rank derived type derivedtype bound kind boundkind bound kind boundkind derived type derivedtype bound unannotated bound unannotatedbound util effectively equal effectivelyequal derived type derivedtype additional bounds additionalbounds unannotated other bounds unannotatedotherbounds wildcard binding wildcardbinding derived type derivedtype length system arraycopy derived types derivedtypes derived types derivedtypes type binding typebinding length length types unannotated generic type unannotatedgenerictype derived types derivedtypes type binding typebinding wildcard derived types derivedtypes wildcard binding wildcardbinding unannotated generic type unannotatedgenerictype rank unannotated bound unannotatedbound unannotated other bounds unannotatedotherbounds bound kind boundkind environment types length typeslength types length type id typeid types length typeslength system arraycopy types types type binding typebinding types length typeslength types length typeslength types type id typeid type binding typebinding wildcard binding wildcardbinding types wildcard type id typeid wildcard override ats int erning interning position specific wildcard annotated capture binding capturebinding get capture d wildcard getcapturedwildcard wildcard binding wildcardbinding wildcard reference binding referencebinding context type contexttype start ast node astnode cud wildcard binding wildcardbinding unannotated wildcard unannotatedwildcard wildcard binding wildcardbinding get unannotated type getunannotatedtype wildcard construction cached info cachedinfo type binding typebinding derived types derivedtypes types unannotated wildcard unannotatedwildcard length derived types derivedtypes length search captures enc ounter encounter capture compilation unit fresh uninterned capture compiling file reach file build structure compile method bodies expect captures file int erleaved interleaved captures files null slot nullslot length length null slot nullslot type binding typebinding derived type derivedtype derived types derivedtypes derived type derivedtype null slot nullslot derived type derivedtype is capture iscapture capture binding capturebinding prior capture binding capturebinding derived type derivedtype searching left futile exit loop prior cud cud null slot nullslot identity comparison prior source type sourcetype context type contexttype prior start start prior prior length system arraycopy derived types derivedtypes derived types derivedtypes type binding typebinding length length types unannotated wildcard unannotatedwildcard derived types derivedtypes capture binding capturebinding derived types derivedtypes capture binding capturebinding wildcard context type contexttype start cud constructor registers capture don repeat wildcard binding wildcardbinding get wildcard getwildcard reference binding referencebinding generic type generictype rank type binding typebinding bound type binding typebinding other bounds otherbounds bound kind boundkind annotation binding annotationbinding annotations get wildcard getwildcard generic type generictype rank bound other bounds otherbounds bound kind boundkind type binding typebinding get annotated type getannotatedtype type binding typebinding type annotation binding annotationbinding annotations plain vanilla type system type type binding typebinding get derived types getderivedtypes type binding typebinding key type keytype key type keytype get unannotated type getunannotatedtype key type keytype types key type keytype type binding typebinding cache derived type cachederivedtype type binding typebinding key type keytype type binding typebinding derived type derivedtype key type keytype derived type derivedtype key type keytype type ids typeids no id noid illegal state exception illegalstateexception type binding typebinding derived types derivedtypes types key type keytype binary search earliest slot reference design construction valid derived type length derived types derivedtypes length length derived types derivedtypes derived types derivedtypes length length system arraycopy derived types derivedtypes derived types derivedtypes type binding typebinding length length types key type keytype derived types derivedtypes derived types derivedtypes derived type derivedtype type binding typebinding cache derived type cachederivedtype type binding typebinding key type keytype type binding typebinding naked type nakedtype type binding typebinding derived type derivedtype cache derived type tag ging tagging derivative key type naked type non null nonnull tag ged tagged derived type needed correctness annotated object reuse provide alternate ways annotate type parameterized types call get paramater ized type getparamaterizedtype annotations create non null nonnull list non null nonnull string str oke stroke parameterized type created annotated get annotated type getannotatedtype tab les tables looked list key list string key binary source substitutions annotation attrib ution attribution locations trigger alternate code paths care exe rcised exercised duplicate objects share type binding typebinding correctness issue memory was tag e wastage cache derived type cachederivedtype key type keytype derived type derivedtype naked type nakedtype key type keytype cache derived type cachederivedtype naked type nakedtype derived type derivedtype derived type derivedtype unique annotation binding annotation element pairs resolved annotation requested unresolved vice versa annotation binding annotationbinding get annotation type getannotationtype reference binding referencebinding annotation type annotationtype required resolved requiredresolved annotation binding annotationbinding annotation annotation binding annotationbinding annotation types annotationtypes annotation type annotationtype annotation required resolved requiredresolved annotation annotation binding annotationbinding annotation type annotationtype binding element pairs annotation unresolved annotation binding unresolvedannotationbinding annotation type annotationtype binding element pairs environment annotation types annotationtypes annotation type annotationtype annotation required resolved requiredresolved annotation resolve annotation is annotated type system isannotatedtypesystem reset annotation types annotationtypes simple lookup table simplelookuptable type id typeid type ids typeids last well known type id lastwellknowntypeid types type binding typebinding type ids typeids last well known type id lastwellknowntypeid parameterized types parameterizedtypes has hed parameterized types hashedparameterizedtypes update caches updatecaches unresolved reference binding unresolvedreferencebinding unresolved type unresolvedtype reference binding referencebinding resolved type resolvedtype unresolved type id unresolvedtypeid unresolved type unresolvedtype unresolved type id unresolvedtypeid type ids typeids no id noid https bugs eclipse org bugs bug cgi type binding typebinding derived types derivedtypes types unresolved type id unresolvedtypeid length derived types derivedtypes derived types derivedtypes length length derived types derivedtypes identity comparison derived types derivedtypes unresolved type unresolvedtype resolved type resolvedtype unresolved type id unresolvedtypeid derived types derivedtypes resolved type resolvedtype update key annotation types annotationtypes unresolved type unresolvedtype object annotation types annotationtypes key table keytable length unresolved type unresolvedtype hash code hashcode based compound name compoundname works resolved type resolvedtype type binding typebinding get int ersection type getintersectiontype reference binding referencebinding int ersecting types intersectingtypes int ersecting types length intersectingtypeslength int ersecting types intersectingtypes int ersecting types intersectingtypes length int ersecting types length intersectingtypeslength type binding typebinding key type keytype int ersecting types intersectingtypes key type keytype int ersecting types length intersectingtypeslength key type keytype type binding typebinding derived types derivedtypes get derived types getderivedtypes key type keytype length derived types derivedtypes length length type binding typebinding derived type derivedtype derived types derivedtypes derived type derivedtype derived type derivedtype is int ersection type isintersectiontype reference binding referencebinding prior int ersecting types priorintersectingtypes derived type derivedtype get int ersecting types getintersectingtypes prior int ersecting types priorintersectingtypes length int ersecting types length intersectingtypeslength int ersecting types length intersectingtypeslength identity comparison int ersecting types intersectingtypes prior int ersecting types priorintersectingtypes derived type derivedtype cache derived type cachederivedtype key type keytype int ersection type binding intersectiontypebinding int ersecting types intersectingtypes environment tvb created dummy declaring element fixed update early clones fix type variable declaring element fixtypevariabledeclaringelement type variable binding typevariablebinding binding declaring element declaringelement type id typeid types type binding typebinding types type variable binding typevariablebinding type variable binding typevariablebinding declaring element declaringelement declaring element declaringelement declaring element declaringelement declaring element declaringelement