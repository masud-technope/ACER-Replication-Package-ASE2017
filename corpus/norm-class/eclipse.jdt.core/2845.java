copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core tests model java file java io exception ioexception junit framework test org eclipse core resources i file ifile org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime path org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core java core javacore test ensure modifications external jar correctly reported i java ellement deltas ijavaellementdeltas java model javamodel refresh external archives refreshexternalarchives external jar delta tests externaljardeltatests modifying resource tests modifyingresourcetests external jar delta tests externaljardeltatests string test suite build model test suite buildmodeltestsuite external jar delta tests externaljardeltatests tests belong skipped tests prefix test bug testbug tests names string test external jar internal external jar testexternaljarinternalexternaljar tests numbers tests range ensures passing empty scope refresh external archives refreshexternalarchives doesn npe regression test bug npe delta processor deltaprocessor test empty scope testemptyscope exception start deltas startdeltas get java model getjavamodel refresh external archives refreshexternalarchives i java element ijavaelement assert deltas assertdeltas unexpected delta stop deltas stopdeltas test modification detected refresh modification detected test external jar testexternaljar core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas touch assert deltas assertdeltas unexpected delta delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh java model javamodel modification external jar test external jar changed testexternaljarchanged core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas touch get java model getjavamodel refresh external archives refreshexternalarchives assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath content archive content changed delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh java project javaproject modification external jar test external jar changed testexternaljarchanged core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas touch get java model getjavamodel refresh external archives refreshexternalarchives i java element ijavaelement project assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath content archive content changed delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh external jar modification jar test external jar changed testexternaljarchanged core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas touch i package fragment root ipackagefragmentroot root project get package fragment root getpackagefragmentroot p path ppath get java model getjavamodel refresh external archives refreshexternalarchives i java element ijavaelement root assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath content archive content changed delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh java model javamodel modification external jar shutdown regression test bug external jar times tamps timestamps persisted accross sessions test external jar changed testexternaljarchanged core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready exit change jar restart simulate exit simulateexit touch simulate restart simulaterestart start deltas startdeltas get java model getjavamodel refresh external archives refreshexternalarchives assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath content archive content changed delete resource deleteresource delete project deleteproject stop deltas stopdeltas ensure external jars ref res hed refreshed call java core javacore initialize after load initializeafterload regression test bug search indexes rebuild test external jar changed testexternaljarchanged core exception coreexception io exception ioexception system println test external jar changed testexternaljarchanged file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready exit change jar restart simulate exit simulateexit touch simulate restart simulaterestart start deltas startdeltas java core javacore initialize after load initializeafterload assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath content archive content changed delete resource deleteresource delete project deleteproject stop deltas stopdeltas ensures correct delta reported set raw classpath setrawclasspath modification external jar regression test https bugs eclipse org bugs bug cgi test external jar changed testexternaljarchanged core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas touch set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath java core javacore new source entry newsourceentry path assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed project root classpath get canonical path getcanonicalpath content archive content changed resource delta resourcedelta classpath delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh java model javamodel add ition addition external jar test external jar added testexternaljaradded core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath p added padded jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh java project javaproject add ition addition external jar test external jar added testexternaljaradded core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath p added padded jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives i java element ijavaelement project assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh external jar add ition addition jar test external jar added testexternaljaradded core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath p added padded jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas file p path ppath create new file createnewfile i package fragment root ipackagefragmentroot root project get package fragment root getpackagefragmentroot p path ppath get java model getjavamodel refresh external archives refreshexternalarchives i java element ijavaelement root assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh java model javamodel removal external jar test external jar removed testexternaljarremoved core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas delete resource deleteresource get java model getjavamodel refresh external archives refreshexternalarchives assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh java project javaproject removal external jar test external jar removed testexternaljarremoved core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas delete resource deleteresource get java model getjavamodel refresh external archives refreshexternalarchives i java element ijavaelement project assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath delete resource deleteresource delete project deleteproject stop deltas stopdeltas refresh external jar removal jar test external jar removed testexternaljarremoved core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string p path ppath get external path getexternalpath jar set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path p path ppath file p path ppath create new file createnewfile get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas delete resource deleteresource i package fragment root ipackagefragmentroot root project get package fragment root getpackagefragmentroot p path ppath get java model getjavamodel refresh external archives refreshexternalarchives i java element ijavaelement root assert deltas assertdeltas unexpected delta children get canonical path getcanonicalpath delete resource deleteresource delete project deleteproject stop deltas stopdeltas add internal jar cla spath claspath remove internal jar jar external jar touch ext enal extenal jar refresh java model javamodel test external jar internal external jar testexternaljarinternalexternaljar core exception coreexception io exception ioexception file i java project ijavaproject project create java project createjavaproject string string internal foo path internalfoopath foo jar i file ifile fooifile create file createfile internal foo path internalfoopath set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry path internal foo path internalfoopath get java model getjavamodel refresh external archives refreshexternalarchives wait until indexes ready waituntilindexesready start deltas startdeltas can onicalize canonicalize external path sensitive platforms creating lib entry i path ipath external foo path externalfoopath path fooifile get location getlocation to file tofile get canonical path getcanonicalpath set classpath setclasspath project i classpath entry iclasspathentry java core javacore new library entry newlibraryentry external foo path externalfoopath ensure project opened external jar delta optimized project opened broadcasting external jar delta project open file external foo path externalfoopath toosstring touch get java model getjavamodel refresh external archives refreshexternalarchives string external foo path string externalfoopathstring get canonical path getcanonicalpath assert deltas assertdeltas unexpected delta children content raw classpath changed resolved classpath changed foo jar removed classpath external foo path string externalfoopathstring resource delta resourcedelta classpath children external foo path string externalfoopathstring content archive content changed delete resource deleteresource delete project deleteproject stop deltas stopdeltas