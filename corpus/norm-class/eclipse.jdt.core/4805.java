copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contribution bug compiler evaluate annotations array types bug bound doesn resolve bounds properly wildcards param etrisation parametrisation bug compiler restore nullness info type annotations files bug compiler apply annotation types analysis bug different iate differentiate type inc ompatibilities incompatibilities annotations bug ensure runjdtcoretests cope annotations enabled bug compiler type annotations grief type variables bug massage type annotated analysis gel deep encoded type bindings bug compiler inference infrastructure evolve meet jls jsr spec bug inference type inferred stream to array toarray bug inference impl gen erify generify type inference engine bug compiler type inference failure nested invocation bug clean handling type annotations wrt type variables bug non null by default nonnullbydefault affect wildcards type variable bug bogus warning type argument annotated non null nonnull org eclipse jdt internal compiler lookup java util list java util org eclipse jdt core compiler char operation charoperation org eclipse jdt internal compiler class file classfile org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler impl compiler options compileroptions org eclipse jdt internal compiler impl constant array binding arraybinding type binding typebinding creation initialization length field declaring class declaringclass field int entionally intentionally distinguished field binding fieldbinding array length arraylength field binding fieldbinding type constants typeconstants length type binding typebinding class file constants classfileconstants acc public accpublic class file constants classfileconstants acc final accfinal constant notaconstant type binding typebinding leaf component type leafcomponenttype dimensions lookup environment lookupenvironment environment constant pool name constantpoolname generic type signature generictypesignature bit set bitset dimension leaf component type position dimensions bits tag bits tagbits annotation non null annotationnonnull tag bits tagbits annotation nullable annotationnullable compiler options compileroptions is annotation based null analysis enabled isannotationbasednullanalysisenabled null tag bits per dimension nulltagbitsperdimension method binding methodbinding clone array binding arraybinding type binding typebinding type dimensions lookup environment lookupenvironment environment tag bits tagbits tag bits tagbits is array type isarraytype leaf component type leafcomponenttype type dimensions dimensions environment environment type unresolved reference binding unresolvedreferencebinding unresolved reference binding unresolvedreferencebinding type add wrapper addwrapper environment tag bits tagbits type tag bits tagbits tag bits tagbits has type variable hastypevariable tag bits tagbits has direct wildcard hasdirectwildcard tag bits tagbits has missing type hasmissingtype tag bits tagbits contains nested type references containsnestedtypereferences tag bits tagbits has capture d wildcard hascapturedwildcard mask type tag bits tagbits tag bits tagbits annotationnullmask mask null tag bits per dimension nulltagbitsperdimension dimensions null tag bits per dimension nulltagbitsperdimension dimensions mask tag bits tagbits tag bits tagbits has null type annotation hasnulltypeannotation type binding typebinding closest match closestmatch is valid binding isvalidbinding type binding typebinding leaf closest match leafclosestmatch leaf component type leafcomponenttype closest match closestmatch leaf closest match leafclosestmatch environment create array type createarraytype leaf component type leafcomponenttype closest match closestmatch dimensions org eclipse jdt internal compiler lookup type binding typebinding collect missing types collectmissingtypes java util list list type binding typebinding collect missing types collectmissingtypes list type binding typebinding missing types missingtypes tag bits tagbits tag bits tagbits has missing type hasmissingtype missing types missingtypes leaf component type leafcomponenttype collect missing types collectmissingtypes missing types missingtypes missing types missingtypes collect sub stitutes substitutes map type variables receiver type collection collect sub stitutes collectsubstitutes collection list map populate map list constraints corresponds collect sub stitutes collectsubstitutes constraint corresponds collect sub stitutes collectsubstitutes constraint equal corresponds collect sub stitutes collectsubstitutes constraint collect sub stitutes collectsubstitutes scope scope type binding typebinding actual type actualtype inference context inferencecontext inference context inferencecontext constraint tag bits tagbits tag bits tagbits has type variable hastypevariable actual type actualtype type binding typebinding actual type actualtype kind poly type actual type actualtype kind binding array type actual dim actualdim actual type actualtype dimensions actual dim actualdim dimensions leaf component type leafcomponenttype collect sub stitutes collectsubstitutes scope actual type actualtype leaf component type leafcomponenttype inference context inferencecontext constraint actual dim actualdim dimensions array binding arraybinding actual reduced type actualreducedtype environment create array type createarraytype actual type actualtype leaf component type leafcomponenttype actual dim actualdim dimensions leaf component type leafcomponenttype collect sub stitutes collectsubstitutes scope actual reduced type actualreducedtype inference context inferencecontext constraint binding type parameter todo philippe array bounds recurse override mentions any mentionsany type binding typebinding parameters idx leaf component type leafcomponenttype mentions any mentionsany parameters idx collect inference variables collectinferencevariables inference variable inferencevariable variables leaf component type leafcomponenttype collect inference variables collectinferencevariables variables type binding typebinding substitute inference variable substituteinferencevariable inference variable inferencevariable type binding typebinding substitute type substitutetype type binding typebinding substituted leaf substitutedleaf leaf component type leafcomponenttype substitute inference variable substituteinferencevariable substitute type substitutetype type binding typebinding not equals notequals substituted leaf substitutedleaf leaf component type leafcomponenttype environment create array type createarraytype substituted leaf substitutedleaf dimensions type annotations typeannotations brakets leaf unique key leafuniquekey compute unique key computeuniquekey is leaf isleaf brackets dimensions dimensions brackets char operation charoperation concat brackets leaf component type leafcomponenttype compute unique key computeuniquekey is leaf isleaf answer receiver constant pool note method code gen ljava lang object constant pool name constantpoolname constant pool name constantpoolname constant pool name constantpoolname brackets dimensions dimensions brackets constant pool name constantpoolname char operation charoperation concat brackets leaf component type leafcomponenttype signature string debug name debugname has type annotations hastypeannotations annotated debug name annotateddebugname string buffer stringbuffer brackets string buffer stringbuffer dimensions dimensions nls brackets append leaf component type leafcomponenttype debug name debugname brackets to string tostring string annotated debug name annotateddebugname string buffer stringbuffer brackets string buffer stringbuffer dimensions brackets append leaf component type leafcomponenttype annotated debug name annotateddebugname brackets append annotation binding annotationbinding annotations get type annotations gettypeannotations dimensions annotations brackets append annotations length annotations brackets append annotations brackets append nls brackets append brackets to string tostring dimensions dimensions answer array dimension size receiver receiver dimension size answer leaf component type type binding typebinding elements type elementstype dimensions leaf component type leafcomponenttype annotation binding annotationbinding old ies oldies get type annotations gettypeannotations annotation binding annotationbinding new bies newbies binding annotations length old ies oldies old ies oldies length length old ies oldies system arraycopy old ies oldies new bies newbies annotation binding annotationbinding length length environment create array type createarraytype leaf component type leafcomponenttype dimensions new bies newbies org eclipse jdt internal compiler lookup type binding typebinding erasure type binding typebinding erasure type binding typebinding erased type erasedtype leaf component type leafcomponenttype erasure type binding typebinding not equals notequals leaf component type leafcomponenttype erased type erasedtype environment create array type createarraytype erased type erasedtype dimensions lookup environment lookupenvironment environment environment generic type signature generictypesignature generic type signature generictypesignature brackets dimensions dimensions brackets generic type signature generictypesignature char operation charoperation concat brackets leaf component type leafcomponenttype generic type signature generictypesignature generic type signature generictypesignature package binding packagebinding get package getpackage leaf component type leafcomponenttype get package getpackage hash code hashcode leaf component type leafcomponenttype hash code hashcode leaf component type leafcomponenttype hash code hashcode answer receiver type assigned argument type is compatible with iscompatiblewith type binding typebinding other type othertype scope capture scope capturescope equals equals equalsequals other type othertype other type othertype kind binding array type array binding arraybinding other array otherarray array binding arraybinding other type othertype other array otherarray leaf component type leafcomponenttype is base type isbasetype relying fact equal arrays identical dimensions other array otherarray dimensions leaf component type leafcomponenttype is compatible with iscompatiblewith other array otherarray leaf component type leafcomponenttype dimensions other array otherarray dimensions assign string object assign object binding base type binding wildcard type binding intersection type wildcard binding wildcardbinding other type othertype bound check boundcheck binding type parameter check compatibility capture other type othertype is capture iscapture capture binding capturebinding other capture othercapture capture binding capturebinding other type othertype type binding typebinding other lower bound otherlowerbound other lower bound otherlowerbound other capture othercapture lower bound lowerbound other lower bound otherlowerbound is array type isarraytype is compatible with iscompatiblewith other lower bound otherlowerbound capture scope capturescope type checking support other type othertype leaf component type leafcomponenttype type ids typeids java lang object javalangobject type ids typeids java lang cloneable javalangcloneable type ids typeids java io serializable javaioserializable override is subtype of issubtypeof type binding typebinding other type othertype equals equals equalsequals other type othertype other type othertype kind binding array type array binding arraybinding other array otherarray array binding arraybinding other type othertype other array otherarray leaf component type leafcomponenttype is base type isbasetype relying fact equal arrays identical dimensions other array otherarray dimensions leaf component type leafcomponenttype is subtype of issubtypeof other array otherarray leaf component type leafcomponenttype dimensions other array otherarray dimensions assign string object assign object binding base type other type othertype leaf component type leafcomponenttype type ids typeids java lang object javalangobject type ids typeids java lang cloneable javalangcloneable type ids typeids java io serializable javaioserializable is proper type ispropertype admit capture admitcapture leaf component type leafcomponenttype is proper type ispropertype admit capture admitcapture kind array type type binding typebinding leaf component type leafcomponenttype leaf component type leafcomponenttype null annotated readable name nullannotatedreadablename compiler options compileroptions options short names shortnames java lang object non null nonnull null tag bits per dimension nulltagbitsperdimension short names shortnames short readable name shortreadablename readable name readablename brackets dimensions dimensions null tag bits per dimension nulltagbitsperdimension tag bits tagbits annotationnullmask fq annotation name fqannotationname null tag bits per dimension nulltagbitsperdimension tag bits tagbits annotation non null annotationnonnull fq annotation name fqannotationname options non null annotation name nonnullannotationname fq annotation name fqannotationname options null able annotation name nullableannotationname annotation name annotationname short names shortnames fq annotation name fqannotationname fq annotation name fqannotationname length char operation charoperation concat with concatwith fq annotation name fqannotationname brackets annotation name annotationname length brackets system arraycopy annotation name annotationname brackets annotation name annotationname length brackets annotation name annotationname length brackets annotation name annotationname length brackets char operation charoperation concat leaf component type leafcomponenttype null annotated readable name nullannotatedreadablename options short names shortnames char operation charoperation concat with concatwith brackets api answer problem receiver no error noerror receiver valid binding problem id problemid leaf component type leafcomponenttype problem id problemid answer source type member types qualified top level type member type defined qualified source name qualifiedsourcename brackets dimensions dimensions brackets brackets char operation charoperation concat leaf component type leafcomponenttype qualified source name qualifiedsourcename brackets readable name readablename java lang object brackets dimensions dimensions brackets brackets char operation charoperation concat leaf component type leafcomponenttype readable name readablename brackets set type annotations settypeannotations annotation binding annotationbinding annotations eval null annotations evalnullannotations tag bits tagbits tag bits tagbits has type annotations hastypeannotations annotations annotations length type annotations typeannotations annotations eval null annotations evalnullannotations null tag bits nulltagbits null tag bits per dimension nulltagbitsperdimension null tag bits per dimension nulltagbitsperdimension dimensions dimension length annotations length length annotation binding annotationbinding annotation annotations annotation annotation type has null bit hasnullbit type ids typeids bit nullable annotation bitnullableannotation null tag bits nulltagbits tag bits tagbits annotation nullable annotationnullable tag bits tagbits tag bits tagbits has null type annotation hasnulltypeannotation annotation type has null bit hasnullbit type ids typeids bit non null annotation bitnonnullannotation null tag bits nulltagbits tag bits tagbits annotation non null annotationnonnull tag bits tagbits tag bits tagbits has null type annotation hasnulltypeannotation sig nals signals annotations current dimension serialized form null tag bits nulltagbits null tag bits per dimension nulltagbitsperdimension dimension null tag bits nulltagbits null tag bits nulltagbits dimension dimension tag bits tagbits null tag bits per dimension nulltagbitsperdimension short readable name shortreadablename brackets dimensions dimensions brackets brackets char operation charoperation concat leaf component type leafcomponenttype short readable name shortreadablename brackets source name sourcename brackets dimensions dimensions brackets brackets char operation charoperation concat leaf component type leafcomponenttype source name sourcename brackets swap unresolved swapunresolved unresolved reference binding unresolvedreferencebinding unresolved type unresolvedtype reference binding referencebinding resolved type resolvedtype lookup environment lookupenvironment env identity comparison leaf component type leafcomponenttype unresolved type unresolvedtype leaf component type leafcomponenttype env convert unresolved binary to raw type convertunresolvedbinarytorawtype resolved type resolvedtype leaf component type key type system under goes undergoes change array rehashed achieve creating fresh array component type equating array array key harmless component type consulted type system typesystem get array type getarraytype array type fully int erned interned singleton object array created cached type system doled array creations raw component type dimensions annotations harmless type binding typebinding consulted equality checks https bugs eclipse org bugs bug cgi details test identity comparison leaf component type leafcomponenttype resolved type resolvedtype env create array type createarraytype leaf component type leafcomponenttype dimensions type annotations typeannotations tag bits tagbits leaf component type leafcomponenttype tag bits tagbits tag bits tagbits has type variable hastypevariable tag bits tagbits has direct wildcard hasdirectwildcard tag bits tagbits has missing type hasmissingtype tag bits tagbits has capture d wildcard hascapturedwildcard string to string tostring nls leaf component type leafcomponenttype debug name debugname type array type binding typebinding unannotated has type annotations hastypeannotations environment get unannotated type getunannotatedtype override type binding typebinding without top level null annotation withouttoplevelnullannotation has null type annotations hasnulltypeannotations annotation binding annotationbinding new annotations newannotations environment filter null type annotations filternulltypeannotations type annotations typeannotations environment create array type createarraytype leaf component type leafcomponenttype dimensions new annotations newannotations override type binding typebinding uncapture scope scope tag bits tagbits tag bits tagbits has capture d wildcard hascapturedwildcard type binding typebinding leaf type leaftype leaf component type leafcomponenttype uncapture scope scope environment create array type createarraytype leaf type leaftype dimensions type annotations typeannotations override accepts non null default acceptsnonnulldefault override update tag bits updatetagbits leaf component type leafcomponenttype tag bits tagbits leaf component type leafcomponenttype update tag bits updatetagbits update tag bits updatetagbits type clone substituted object type receiver array method binding methodbinding get clone method getclonemethod method binding methodbinding original method originalmethod clone clone method binding methodbinding method method binding methodbinding override signature class file classfile class file classfile code gen codegen answer signature object clone original method originalmethod signature method modifiers original method originalmethod modifiers method selector original method originalmethod selector array binding declaring tweaked code stream codestream get constant pool declaring class getconstantpooldeclaringclass method declaring class declaringclass original method originalmethod declaring class declaringclass method type variables typevariables binding type variables method parameters original method originalmethod parameters method thrown exceptions thrownexceptions binding exceptions method tag bits tagbits original method originalmethod tag bits tagbits method return type returntype environment global options globaloptions source level sourcelevel class file constants classfileconstants jdk original method originalmethod return type returntype environment global options globaloptions is annotation based null analysis enabled isannotationbasednullanalysisenabled environment uses null type annotations usesnulltypeannotations method return type returntype environment create annotated type createannotatedtype method return type returntype annotation binding annotationbinding environment get non null annotation getnonnullannotation method tag bits tagbits tag bits tagbits annotation non null annotationnonnull method return type returntype tag bits tagbits tag bits tagbits has missing type hasmissingtype method tag bits tagbits tag bits tagbits has missing type hasmissingtype clone method is array clone isarrayclone type binding typebinding receiver type receivertype method binding methodbinding binding receiver type receivertype array binding arraybinding method binding methodbinding clone array binding arraybinding receiver type receivertype clone clone binding clone