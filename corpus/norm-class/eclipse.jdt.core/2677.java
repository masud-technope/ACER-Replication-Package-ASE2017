copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt core dom org eclipse jdt core i buffer ibuffer org eclipse jdt core i source range isourcerange org eclipse jdt core i type root ityperoot org eclipse jdt core java model exception javamodelexception org eclipse jdt core tool factory toolfactory org eclipse jdt core compiler i scanner iscanner org eclipse jdt core compiler i terminal symbols iterminalsymbols org eclipse jdt core compiler invalid input exception invalidinputexception selection range finds covered node covering node node finder nodefinder defines actual visitor finds node node finder visitor nodefindervisitor ast visitor astvisitor f start fstart f end fend ast node astnode f covering node fcoveringnode ast node astnode f covered node fcoverednode node finder visitor nodefindervisitor offset length include javadoc tags f start fstart offset f end fend offset length pre visit previsit ast node astnode node node start nodestart node get start position getstartposition node end nodeend node start nodestart node get length getlength node end nodeend f start fstart f end fend node start nodestart node start nodestart f start fstart f end fend node end nodeend f covering node fcoveringnode node f start fstart node start nodestart node end nodeend f end fend node start nodestart f start fstart node end nodeend f end fend f covering node fcoveringnode node f covered node fcoverednode node node length parent f covered node fcoverednode f covered node fcoverednode node returns covered node nodes covered selection returned node covered node top traversal ast ast node astnode ast node astnode get covered node getcoverednode f covered node fcoverednode returns covering node nodes covering selection returned node covering node top traversal ast ast node astnode ast node astnode get covering node getcoveringnode f covering node fcoveringnode maps selection ast node astnode selection defined start length result node determined find node range selection multiple matching nodes inner most innermost returned node exists node preorder traversal ast returned node range fully selection length ties adjacent nodes broken choosing side param root root node search starts param start start selection param length length selection inner most innermost node matches selection node selection ast node astnode perform ast node astnode root start length node finder nodefinder finder node finder nodefinder root start length ast node astnode result finder get covered node getcoverednode result result get start position getstartposition start result get length getlength length finder get covering node getcoveringnode result maps selection ast node astnode selection defined source range calls code perform root range get offset getoffset range get length getlength code param root root node search starts param range selection range inner most innermost node matches selection node selection perform ast node astnode ast node astnode perform ast node astnode root i source range isourcerange range perform root range get offset getoffset range get length getlength maps selection ast node astnode selection start length result node determined link get covered node getcoverednode doesn find node returns code code iff selection covered node option ally optionally whitespace comments side node returns node returns link get covering node getcoveringnode covering node param root root node search starts param start start selection param length length selection param source source compilation unit result node java model exception javamodelexception error occurs java model ast node astnode perform ast node astnode root start length i type root ityperoot source java model exception javamodelexception node finder nodefinder finder node finder nodefinder root start length ast node astnode result finder get covered node getcoverednode result node start nodestart result get start position getstartposition start node start nodestart node start nodestart result get length getlength start length i buffer ibuffer buffer source get buffer getbuffer buffer i scanner iscanner scanner tool factory toolfactory create scanner createscanner scanner set source setsource buffer get text gettext start length t o char array tochararray token scanner get next token getnexttoken token i terminal symbols iterminalsymbols tokennameeof t start tstart scanner get current token start position getcurrenttokenstartposition t start tstart result get start position getstartposition start scanner reset to resetto t start tstart result get length getlength length token scanner get next token getnexttoken token i terminal symbols iterminalsymbols tokennameeof result invalid input exception invalidinputexception index out of bounds exception indexoutofboundsexception finder get covering node getcoveringnode ast node astnode f covering node fcoveringnode ast node astnode f covered node fcoverednode instantiate node finder root node start length param root root node param start start param length length node finder nodefinder ast node astnode root start length node finder visitor nodefindervisitor node finder visitor nodefindervisitor node finder visitor nodefindervisitor start length root accept node finder visitor nodefindervisitor f covered node fcoverednode node finder visitor nodefindervisitor get covered node getcoverednode f covering node fcoveringnode node finder visitor nodefindervisitor get covering node getcoveringnode ast nodes range equal selection returns inner most innermost nodes returns node preorder traversal ast complete node range covered selection link simple type simpletype link simple name simplename selection equals nodes range covered node code simple name simplename code selection expanded include whitespace code simple type simpletype code covered node code simple type simpletype code covered node code code selection empty cover entire node ast node astnode get covered node getcoverednode f covered node fcoverednode returns inner most innermost node fully selection node length selection node covers selection returned node covering node preorder traversal ast impl ies implies length selection adjacent sibling nodes node returned covering node ast node astnode get covering node getcoveringnode f covering node fcoveringnode