copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal core builder org eclipse core resources org eclipse core runtime org eclipse jdt core org eclipse jdt core compiler org eclipse jdt internal compiler org eclipse jdt internal compiler class fmt classfmt org eclipse jdt internal compiler lookup type constants typeconstants org eclipse jdt internal compiler problem org eclipse jdt internal compiler util simple lookup table simplelookuptable org eclipse jdt internal compiler util suffix constants suffixconstants org eclipse jdt internal core util messages org eclipse jdt internal core util util java java net uri java util incremental image builder suppress warnings suppresswarnings rawtypes unchecked incremental image builder incrementalimagebuilder abstract image builder abstractimagebuilder array list arraylist source files sourcefiles array list arraylist previous source files previoussourcefiles string set stringset qualified strings qualifiedstrings string set stringset simple strings simplestrings string set stringset root strings rootstrings simple lookup table simplelookuptable secondary types to remove secondarytypestoremove has structural changes hasstructuralchanges compile loop compileloop make output folder consistent makeoutputfolderconsistent perform full build takes incremental compile loops max compile loop maxcompileloop incremental image builder incrementalimagebuilder java builder javabuilder java builder javabuilder build state buildstate java builder javabuilder build state buildstate name environment nameenvironment is incremental build isincrementalbuild make output folder consistent makeoutputfolderconsistent java core javacore enabled equals java builder javabuilder java project javaproject get option getoption java core javacore core java build recreate modified files output folder incremental image builder incrementalimagebuilder java builder javabuilder java builder javabuilder java builder javabuilder new state newstate copy from copyfrom java builder javabuilder last state laststate incremental image builder incrementalimagebuilder batch image builder batchimagebuilder batch builder batchbuilder batch builder batchbuilder java builder javabuilder batch builder batchbuilder new state newstate reset collections resetcollections build simple lookup table simplelookuptable deltas java builder javabuilder debug nls system println incremental build reset collections resetcollections not ifier notifier sub task subtask messages build analyzing deltas analyzingdeltas java builder javabuilder has buildpath errors hasbuildpatherrors avoid unnecessary deltas caused full build java builder javabuilder debug nls system println nls compiling source files build path buildpath errors java builder javabuilder current project currentproject delete markers deletemarkers i java model marker ijavamodelmarker java model problem marker i resource iresource depth add all source files addallsourcefiles source files sourcefiles not ifier notifier update progress delta updateprogressdelta i resource delta iresourcedelta source delta sourcedelta i resource delta iresourcedelta deltas java builder javabuilder current project currentproject source delta sourcedelta find source files findsourcefiles source delta sourcedelta not ifier notifier update progress delta updateprogressdelta object key table keytable deltas key table keytable object value table valuetable deltas value table valuetable value table valuetable length i resource delta iresourcedelta delta i resource delta iresourcedelta value table valuetable delta i project iproject i project iproject key table keytable classpath location classpathlocation class folders and jars classfoldersandjars classpath location classpathlocation java builder javabuilder binary locations per project binarylocationsperproject class folders and jars classfoldersandjars find affected source files findaffectedsourcefiles delta class folders and jars classfoldersandjars not ifier notifier update progress delta updateprogressdelta not ifier notifier sub task subtask messages build analyzing sources analyzingsources add affected source files addaffectedsourcefiles not ifier notifier update progress delta updateprogressdelta compile loop compileloop increment accept result acceptresult source files sourcefiles size compile loop compileloop max compile loop maxcompileloop java builder javabuilder debug system println aborting incremental build exc eeded exceeded loop count not ifier notifier check cancel checkcancel source file sourcefile all source files allsourcefiles source file sourcefile source files sourcefiles size source files sourcefiles to array toarray all source files allsourcefiles reset collections resetcollections work queue workqueue add all addall all source files allsourcefiles not ifier notifier set progress per compilation unit setprogresspercompilationunit increment all source files allsourcefiles length increment increment compile all source files allsourcefiles remove secondary types removesecondarytypes add affected source files addaffectedsourcefiles has structural changes hasstructuralchanges java builder javabuilder java project javaproject has cycle marker hascyclemarker java builder javabuilder must prop agate structural changes mustpropagatestructuralchanges abort incremental build exception abortincrementalbuildexception java builder javabuilder debug system println aborting incremental build problem qualified type name qualifiedtypename renamed existing source file core exception coreexception internal exception internalexception clean up cleanup build after batch build buildafterbatchbuild java builder javabuilder debug nls system println incremental build batch build system current time millis currenttimemillis copy incremental build loop add affected source files addaffectedsourcefiles source files sourcefiles size not ifier notifier check cancel checkcancel source file sourcefile all source files allsourcefiles source file sourcefile source files sourcefiles size source files sourcefiles to array toarray all source files allsourcefiles reset collections resetcollections not ifier notifier set progress per compilation unit setprogresspercompilationunit all source files allsourcefiles length work queue workqueue add all addall all source files allsourcefiles compile all source files allsourcefiles remove secondary types removesecondarytypes add affected source files addaffectedsourcefiles core exception coreexception internal exception internalexception clean up cleanup add affected source files addaffectedsourcefiles qualified strings qualifiedstrings element size elementsize simple strings simplestrings element size elementsize add affected source files addaffectedsourcefiles qualified strings qualifiedstrings simple strings simplestrings root strings rootstrings add affected source files addaffectedsourcefiles string set stringset qualified set qualifiedset string set stringset simple set simpleset string set stringset root set rootset string set stringset affected types affectedtypes qualified strings qualifiedstrings form simple strings simplestrings int erned qualified names internedqualifiednames reference collection referencecollection int ern qualified names internqualifiednames qualified set qualifiedset qualified skip int erned qualified names internedqualifiednames length qualified set qualifiedset element size elementsize int erned qualified names internedqualifiednames int erned simple names internedsimplenames reference collection referencecollection int ern simple names internsimplenames simple set simpleset skip int erned simple names internedsimplenames length simple set simpleset element size elementsize int erned simple names internedsimplenames int erned root names internedrootnames reference collection referencecollection int ern simple names internsimplenames root set rootset object key table keytable new state newstate references key table keytable object value table valuetable new state newstate references value table valuetable value table valuetable length string type locator typelocator string key table keytable type locator typelocator affected types affectedtypes affected types affectedtypes includes type locator typelocator reference collection referencecollection reference collection referencecollection value table valuetable includes int erned qualified names internedqualifiednames int erned simple names internedsimplenames int erned root names internedrootnames i file ifile file java builder javabuilder current project currentproject get file getfile type locator typelocator source file sourcefile source file sourcefile find source file findsourcefile file source file sourcefile source files sourcefiles source file sourcefile compiled all at once compiledallatonce previous source files previoussourcefiles previous source files previoussourcefiles source file sourcefile skip compiled files hierarchy problems java builder javabuilder debug system println nls adding source file nls type locator typelocator source files sourcefiles add source file sourcefile add dependents of adddependentsof i path ipath path is structural change isstructuralchange add dependents of adddependentsof path is structural change isstructuralchange qualified strings qualifiedstrings simple strings simplestrings root strings rootstrings add dependents of adddependentsof i path ipath path is structural change isstructuralchange string set stringset qualified names qualifiednames string set stringset simple names simplenames string set stringset root names rootnames path path set device setdevice is structural change isstructuralchange string path last segment lastsegment length type constants typeconstants info length char operation charoperation equals to char array tochararray type constants typeconstants info info file changed blame path path remove last segments removelastsegments https bugs eclipse org bugs bug cgi blame annotations documentation comment tags info file influence bail don touch objects path is empty isempty is structural change isstructuralchange has structural changes hasstructuralchanges new state newstate tag as str ucturally changed tagasstructurallychanged has structural changes hasstructuralchanges qualified strings qualifiedstrings form simple strings simplestrings root names rootnames add path segment string package name packagename path remove last segments removelastsegments to string tostring was new wasnew qualified names qualifiednames add package name packagename string type name typename path last segment lastsegment member index memberindex type name typename index of indexof member index memberindex type name typename type name typename substring member index memberindex was new wasnew simple names simplenames add type name typename was new wasnew was new wasnew java builder javabuilder debug system println nls dependents type name typename nls package name packagename check for class file changes checkforclassfilechanges i resource delta iresourcedelta binary delta binarydelta classpath multi directory classpathmultidirectory segment count segmentcount core exception coreexception i resource iresource resource binary delta binarydelta get resource getresource remember inclusion exclusion patterns change full build is excluded isexcluded exclusion patterns exclusionpatterns inclusion patterns inclusionpatterns util is excluded isexcluded resource inclusion patterns inclusionpatterns exclusion patterns exclusionpatterns resource get type gettype i resource iresource folder is excluded isexcluded inclusion patterns inclusionpatterns delta children included i resource delta iresourcedelta children binary delta binarydelta get affected children getaffectedchildren children length check for class file changes checkforclassfilechanges children segment count segmentcount i resource iresource file is excluded isexcluded org eclipse jdt internal compiler util util is class file name isclassfilename resource get name getname perform full build managed file changed i path ipath type path typepath resource get full path getfullpath remove first segments removefirstsegments segment count segmentcount remove file extension removefileextension new state newstate is known type isknowntype type path typepath to string tostring java builder javabuilder debug system println nls full build change file nls type path typepath clean up cleanup clean up cleanup source files sourcefiles previous source files previoussourcefiles qualified strings qualifiedstrings simple strings simplestrings root strings rootstrings secondary types to remove secondarytypestoremove has structural changes hasstructuralchanges compile loop compileloop compile source file sourcefile units source file sourcefile additional units additionalunits compiling first group compilingfirstgroup compiling first group compilingfirstgroup additional units additionalunits add source file additional units additionalunits units defines secondary types testing max secondary type infinite loop alt ernates alternates defined bug array list arraylist extras additional units additionalunits length source file sourcefile unit additional units additionalunits unit new state newstate get defined type names for getdefinedtypenamesfor unit type locator typelocator java builder javabuilder debug system println compile file secondary types nls unit type locator typelocator extras extras array list arraylist extras add unit extras old length oldlength units length to add toadd extras size system arraycopy units units source file sourcefile old length oldlength to add toadd old length oldlength to add toadd units old length oldlength source file sourcefile extras compile units additional units additionalunits compiling first group compilingfirstgroup delete generated files deletegeneratedfiles i file ifile deleted generated files deletedgeneratedfiles delete generated files recompile source files deleted generated files deletedgeneratedfiles length i file ifile deleted file deletedfile deleted generated files deletedgeneratedfiles delete files source files deleted deleted file deletedfile exists source file sourcefile source file sourcefile find source file findsourcefile deleted file deletedfile string type locator typelocator source file sourcefile type locator typelocator md segment count mdsegmentcount source file sourcefile source location sourcelocation source folder sourcefolder get full path getfullpath segment count segmentcount i path ipath type path typepath source file sourcefile resource get full path getfullpath remove first segments removefirstsegments md segment count mdsegmentcount remove file extension removefileextension add dependents source file deleted add dependents of adddependentsof type path typepath existing source files deleted compiled previous source files previoussourcefiles defined type names definedtypenames new state newstate get defined type names for getdefinedtypenamesfor type locator typelocator defined single type matching type path typepath defined type names definedtypenames remove class file removeclassfile type path typepath source file sourcefile source location sourcelocation binary folder binaryfolder skip failed define type defined type names definedtypenames length i path ipath package path packagepath type path typepath remove last segments removelastsegments defined type names definedtypenames length remove class file removeclassfile package path packagepath append string defined type names definedtypenames source file sourcefile source location sourcelocation binary folder binaryfolder new state newstate remove locator removelocator type locator typelocator core exception coreexception util log java builder javabuilder logging compilation participant compilationparticipant core exception coreexception debug ging debugging find affected source files findaffectedsourcefiles i resource delta iresourcedelta delta classpath location classpathlocation class folders and jars classfoldersandjars i project iproject prereq project prereqproject class folders and jars classfoldersandjars length classpath location classpathlocation b location blocation class folders and jars classfoldersandjars file folder zip jar file skip unchanged output folder b location blocation i path ipath b location blocation get project relative path getprojectrelativepath i resource delta iresourcedelta binary delta binarydelta delta find member findmember binary delta binarydelta b location blocation classpath jar classpathjar java builder javabuilder debug system println aborting incremental build delta jar zip file full build jar file changed removed caught classpath change binary delta binarydelta get kind getkind i resource delta iresourcedelta binary delta binarydelta get kind getkind i resource delta iresourcedelta removed java builder javabuilder debug system println aborting incremental build removed binary folder removed binary folder classpath change handle segment count segmentcount binary delta binarydelta get full path getfullpath segment count segmentcount files folder i resource delta iresourcedelta children binary delta binarydelta get affected children getaffectedchildren string set stringset str ucturally changed types structurallychangedtypes b location blocation is output folder isoutputfolder str ucturally changed types structurallychangedtypes new state newstate get str ucturally changed types getstructurallychangedtypes java builder javabuilder get last state getlaststate prereq project prereqproject children length find affected source files findaffectedsourcefiles children segment count segmentcount str ucturally changed types structurallychangedtypes not ifier notifier check cancel checkcancel find affected source files findaffectedsourcefiles i resource delta iresourcedelta binary delta binarydelta segment count segmentcount string set stringset str ucturally changed types structurallychangedtypes type vice versa expect deltas folder file i resource iresource resource binary delta binarydelta get resource getresource resource get type gettype i resource iresource folder binary delta binarydelta get kind getkind i resource delta iresourcedelta i resource delta iresourcedelta removed i path ipath package path packagepath resource get full path getfullpath remove first segments removefirstsegments segment count segmentcount string package name packagename package path packagepath to string tostring binary delta binarydelta get kind getkind i resource delta iresourcedelta source file classpath includes new state newstate is known package isknownpackage package name packagename java builder javabuilder debug system println package name packagename add dependents of adddependentsof package path packagepath java builder javabuilder debug system println nls skipped dependents nls package name packagename exists classpath name environment nameenvironment is package ispackage package name packagename java builder javabuilder debug system println removed package name packagename add dependents of adddependentsof package path packagepath java builder javabuilder debug system println nls skipped dependents removed nls package name packagename fall traverse packages files i resource delta iresourcedelta changed i resource delta iresourcedelta children binary delta binarydelta get affected children getaffectedchildren children length find affected source files findaffectedsourcefiles children segment count segmentcount str ucturally changed types structurallychangedtypes i resource iresource file org eclipse jdt internal compiler util util is class file name isclassfilename resource get name getname i path ipath type path typepath resource get full path getfullpath remove first segments removefirstsegments segment count segmentcount remove file extension removefileextension binary delta binarydelta get kind getkind i resource delta iresourcedelta i resource delta iresourcedelta removed java builder javabuilder debug system println removed file type path typepath add dependents of adddependentsof type path typepath i resource delta iresourcedelta changed binary delta binarydelta get flags getflags i resource delta iresourcedelta content skip isn changed str ucturally changed types structurallychangedtypes str ucturally changed types structurallychangedtypes includes type path typepath to string tostring skip was n wasn structural change java builder javabuilder debug system println changed file type path typepath add dependents of adddependentsof type path typepath find source files findsourcefiles i resource delta iresourcedelta delta core exception coreexception array list arraylist visited make output folder consistent makeoutputfolderconsistent array list arraylist source locations sourcelocations length source locations sourcelocations length classpath multi directory classpathmultidirectory source locations sourcelocations make output folder consistent makeoutputfolderconsistent has independent output folder hasindependentoutputfolder visited binary folder binaryfolder project acts source folder independent nested output folder visited add binary folder binaryfolder i resource delta iresourcedelta binary delta binarydelta delta find member findmember binary folder binaryfolder get project relative path getprojectrelativepath binary delta binarydelta segment count segmentcount binary delta binarydelta get full path getfullpath segment count segmentcount i resource delta iresourcedelta children binary delta binarydelta get affected children getaffectedchildren children length check for class file changes checkforclassfilechanges children segment count segmentcount source folder sourcefolder equals java builder javabuilder current project currentproject skip nested source output folders project source folder segment count segmentcount delta get full path getfullpath segment count segmentcount i resource delta iresourcedelta children delta get affected children getaffectedchildren children length is excluded from project isexcludedfromproject children get full path getfullpath find source files findsourcefiles children segment count segmentcount i resource delta iresourcedelta source delta sourcedelta delta find member findmember source folder sourcefolder get project relative path getprojectrelativepath source delta sourcedelta source delta sourcedelta get kind getkind i resource delta iresourcedelta removed java builder javabuilder debug system println aborting incremental build removed source folder removed source folder handle supported segment count segmentcount source delta sourcedelta get full path getfullpath segment count segmentcount i resource delta iresourcedelta children source delta sourcedelta get affected children getaffectedchildren children length find source files findsourcefiles children segment count segmentcount core exception coreexception get status getstatus get code getcode i resource status iresourcestatus var iant variant exists java builder javabuilder debug system println aborting incremental build renamed not ifier notifier check cancel checkcancel find source files findsourcefiles i resource delta iresourcedelta source delta sourcedelta classpath multi directory classpathmultidirectory segment count segmentcount core exception coreexception type vice versa expect deltas folder source file i resource iresource resource source delta sourcedelta get resource getresource remember inclusion exclusion patterns change full build is excluded isexcluded exclusion patterns exclusionpatterns inclusion patterns inclusionpatterns util is excluded isexcluded resource inclusion patterns inclusionpatterns exclusion patterns exclusionpatterns resource get type gettype i resource iresource folder is excluded isexcluded inclusion patterns inclusionpatterns delta children included source delta sourcedelta get kind getkind i resource delta iresourcedelta is excluded isexcluded i path ipath added package path addedpackagepath resource get full path getfullpath remove first segments removefirstsegments segment count segmentcount ensure exists output folder create folder createfolder added package path addedpackagepath binary folder binaryfolder source file classpath includes source locations sourcelocations length new state newstate is known package isknownpackage added package path addedpackagepath to string tostring java builder javabuilder debug system println nls skipped dependents nls added package path addedpackagepath java builder javabuilder debug system println nls nls added package path addedpackagepath add dependents of adddependentsof added package path addedpackagepath fall collect source files i resource delta iresourcedelta changed i resource delta iresourcedelta children source delta sourcedelta get affected children getaffectedchildren children length find source files findsourcefiles children segment count segmentcount i resource delta iresourcedelta removed is excluded isexcluded folder excluded delete walk included sub folders subfolders children source delta sourcedelta get affected children getaffectedchildren children length find source files findsourcefiles children segment count segmentcount i path ipath removed package path removedpackagepath resource get full path getfullpath remove first segments removefirstsegments segment count segmentcount source locations sourcelocations length source locations sourcelocations length source locations sourcelocations source folder sourcefolder get folder getfolder removed package path removedpackagepath exists fragment removed removing multiple source files has independent output folder hasindependentoutputfolder ensure exists output folder create folder createfolder removed package path removedpackagepath binary folder binaryfolder i resource delta iresourcedelta removed children removedchildren source delta sourcedelta get affected children getaffectedchildren removed children removedchildren length find source files findsourcefiles removed children removedchildren segment count segmentcount source delta sourcedelta get flags getflags i resource delta iresourcedelta moved idea moving source file bug i resource iresource moved folder movedfolder java builder javabuilder workspace root workspaceroot get folder getfolder source delta sourcedelta get moved to path getmovedtopath java builder javabuilder remove problems and tasks for removeproblemsandtasksfor moved folder movedfolder i folder ifolder removed package folder removedpackagefolder binary folder binaryfolder get folder getfolder removed package path removedpackagepath removed package folder removedpackagefolder exists removed package folder removedpackagefolder delete i resource iresource force add dependents thinks exist safe side java builder javabuilder debug system println nls removed nls removed package path removedpackagepath add dependents of adddependentsof removed package path removedpackagepath new state newstate remove package removepackage source delta sourcedelta i resource iresource file is excluded isexcluded string resource name resourcename resource get name getname org eclipse jdt internal core util util is java like file name isjavalikefilename resource name resourcename i path ipath type path typepath resource get full path getfullpath remove first segments removefirstsegments segment count segmentcount remove file extension removefileextension string type locator typelocator resource get project relative path getprojectrelativepath to string tostring source delta sourcedelta get kind getkind i resource delta iresourcedelta java builder javabuilder debug system println nls compile source file nls type locator typelocator source files sourcefiles add source file sourcefile i file ifile resource string type name typename type path typepath to string tostring adding dependents duplicate errors new state newstate is duplicate locator isduplicatelocator type name typename type locator typelocator java builder javabuilder debug system println source file type name typename add dependents of adddependentsof type path typepath i resource delta iresourcedelta removed defined type names definedtypenames new state newstate get defined type names for getdefinedtypenamesfor type locator typelocator defined single type matching type path typepath defined type names definedtypenames remove class file removeclassfile type path typepath binary folder binaryfolder source delta sourcedelta get flags getflags i resource delta iresourcedelta moved remove problems tasks compilation unit moved renamed target file compilation unit recompiled target file java resource markers removed bug i resource iresource moved file movedfile java builder javabuilder workspace root workspaceroot get file getfile source delta sourcedelta get moved to path getmovedtopath java builder javabuilder remove problems and tasks for removeproblemsandtasksfor moved file movedfile java builder javabuilder debug system println nls removed source file nls type path typepath to string tostring add dependents source file involved collision add dependents of adddependentsof type path typepath skip failed define type defined type names definedtypenames length i path ipath package path packagepath type path typepath remove last segments removelastsegments defined type names definedtypenames length remove class file removeclassfile package path packagepath append string defined type names definedtypenames binary folder binaryfolder new state newstate remove locator removelocator type locator typelocator i resource delta iresourcedelta changed source delta sourcedelta get flags getflags i resource delta iresourcedelta content source delta sourcedelta get flags getflags i resource delta iresourcedelta encoding skip isn changed java builder javabuilder debug system println nls compile changed source file nls type locator typelocator source files sourcefiles add source file sourcefile i file ifile resource org eclipse jdt internal compiler util util is class file name isclassfilename resource name resourcename perform full build managed file changed make output folder consistent makeoutputfolderconsistent i path ipath type path typepath resource get full path getfullpath remove first segments removefirstsegments segment count segmentcount remove file extension removefileextension new state newstate is known type isknowntype type path typepath to string tostring java builder javabuilder debug system println full build change file type path typepath has independent output folder hasindependentoutputfolder java builder javabuilder filter extra resource filterextraresource resource copy resource deltas output folder i path ipath resource path resourcepath resource get full path getfullpath remove first segments removefirstsegments segment count segmentcount i resource iresource output file outputfile binary folder binaryfolder get file getfile resource path resourcepath source delta sourcedelta get kind getkind i resource delta iresourcedelta output file outputfile exists java builder javabuilder debug system println deleting existing file resource path resourcepath output file outputfile delete i resource iresource force java builder javabuilder debug system println nls copying file nls resource path resourcepath ensure exists output folder create folder createfolder resource path resourcepath remove last segments removelastsegments binary folder binaryfolder copy resource copyresource resource output file outputfile i resource delta iresourcedelta removed output file outputfile exists java builder javabuilder debug system println deleting removed file resource path resourcepath output file outputfile delete i resource iresource force i resource delta iresourcedelta changed source delta sourcedelta get flags getflags i resource delta iresourcedelta content source delta sourcedelta get flags getflags i resource delta iresourcedelta encoding skip isn changed output file outputfile exists java builder javabuilder debug system println deleting existing file resource path resourcepath output file outputfile delete i resource iresource force java builder javabuilder debug system println nls copying changed file nls resource path resourcepath ensure exists output folder create folder createfolder resource path resourcepath remove last segments removelastsegments binary folder binaryfolder copy resource copyresource resource output file outputfile finished with finishedwith string source locator sourcelocator compilation result compilationresult result main type name maintypename array list arraylist defined type names definedtypenames array list arraylist duplicate type names duplicatetypenames previous type names previoustypenames new state newstate get defined type names for getdefinedtypenamesfor source locator sourcelocator previous type names previoustypenames previous type names previoustypenames main type name maintypename i path ipath package path packagepath previous type names previoustypenames length previous previous type names previoustypenames defined type names definedtypenames size char operation charoperation equals previous defined type names definedtypenames source file sourcefile source file sourcefile source file sourcefile result get compilation unit getcompilationunit package path packagepath count source file sourcefile source location sourcelocation source folder sourcefolder get full path getfullpath segment count segmentcount package path packagepath source file sourcefile resource get full path getfullpath remove first segments removefirstsegments count remove last segments removelastsegments secondary types to remove secondarytypestoremove secondary types to remove secondarytypestoremove simple lookup table simplelookuptable array list arraylist types array list arraylist secondary types to remove secondarytypestoremove source file sourcefile source location sourcelocation binary folder binaryfolder types types array list arraylist defined type names definedtypenames size types add package path packagepath append string previous secondary types to remove secondarytypestoremove source file sourcefile source location sourcelocation binary folder binaryfolder types finished with finishedwith source locator sourcelocator result main type name maintypename defined type names definedtypenames duplicate type names duplicatetypenames process annotation results processannotationresults compilation participant result compilationparticipantresult length compilation participant result compilationparticipantresult result result i file ifile deleted generated files deletedgeneratedfiles result deleted files deletedfiles deleted generated files deletedgeneratedfiles delete generated files deletegeneratedfiles deleted generated files deletedgeneratedfiles i file ifile added generated files addedgeneratedfiles result added files addedfiles added generated files addedgeneratedfiles added generated files addedgeneratedfiles length source file sourcefile source file sourcefile find source file findsourcefile added generated files addedgeneratedfiles source file sourcefile source files sourcefiles source file sourcefile source files sourcefiles add source file sourcefile record participant result recordparticipantresult result remove class file removeclassfile i path ipath type path typepath i container icontainer output folder outputfolder core exception coreexception nested type type path typepath last segment lastsegment index of indexof new state newstate remove qualified type name removequalifiedtypename type path typepath to string tostring add dependents type thinks exist safe side java builder javabuilder debug nls system println removed type type path typepath member types removed enclosing type str ucturally structurally changed add dependents of adddependentsof type path typepath i file ifile class file classfile output folder outputfolder get file getfile type path typepath add file extension addfileextension suffix constants suffixconstants extension class file classfile exists java builder javabuilder debug nls system println deleting file removed type type path typepath class file classfile delete i resource iresource force remove secondary types removesecondarytypes core exception coreexception delayed deleting secondary types compile loop secondary types to remove secondarytypestoremove object key table keytable secondary types to remove secondarytypestoremove key table keytable object value table valuetable secondary types to remove secondarytypestoremove value table valuetable key table keytable length i container icontainer output folder outputfolder i container icontainer key table keytable output folder outputfolder array list arraylist paths array list arraylist value table valuetable paths size remove class file removeclassfile i path ipath paths output folder outputfolder secondary types to remove secondarytypestoremove previous source files previoussourcefiles optimize recompile secondary type deleted previous source files previoussourcefiles reset collections resetcollections source files sourcefiles source files sourcefiles array list arraylist previous source files previoussourcefiles qualified strings qualifiedstrings string set stringset simple strings simplestrings string set stringset root strings rootstrings string set stringset has structural changes hasstructuralchanges compile loop compileloop previous source files previoussourcefiles source files sourcefiles is empty isempty array list arraylist source files sourcefiles clone source files sourcefiles clear qualified strings qualifiedstrings clear simple strings simplestrings clear root strings rootstrings clear work queue workqueue clear update problems for updateproblemsfor source file sourcefile source file sourcefile compilation result compilationresult result core exception coreexception char operation charoperation equals source file sourcefile get main type name getmaintypename type constants typeconstants info i resource iresource pkg resource pkgresource source file sourcefile resource get parent getparent pkg resource pkgresource delete markers deletemarkers i java model marker ijavamodelmarker java model problem marker i resource iresource depth i marker imarker markers java builder javabuilder get problems for getproblemsfor source file sourcefile resource categorized problem categorizedproblem problems result get problems getproblems problems markers length not ifier notifier update problem counts updateproblemcounts markers problems java builder javabuilder remove problems for removeproblemsfor source file sourcefile resource store problems for storeproblemsfor source file sourcefile problems update tasks for updatetasksfor source file sourcefile source file sourcefile compilation result compilationresult result core exception coreexception i marker imarker markers java builder javabuilder get tasks for gettasksfor source file sourcefile resource categorized problem categorizedproblem tasks result get tasks gettasks tasks markers length java builder javabuilder remove tasks for removetasksfor source file sourcefile resource store tasks for storetasksfor source file sourcefile tasks org eclipse jdt internal core builder abstract image builder abstractimagebuilder write class file contents writeclassfilecontents org eclipse jdt internal compiler class file classfile org eclipse core resources i file ifile java lang string org eclipse jdt internal core builder source file sourcefile write class file contents writeclassfilecontents class file classfile class file classfile i file ifile file string qualified file name qualifiedfilename is top level type istopleveltype source file sourcefile compilation unit compilationunit core exception coreexception writing file compare previous file structural occurred add dependent source files bytes class file classfile get bytes getbytes file exists write class file check writeclassfilecheck file qualified file name qualifiedfilename bytes compilation unit compilationunit update class file updateclassfile java builder javabuilder debug system println writing changed file nls file get name getname file is derived isderived file set derived setderived file set contents setcontents byte array input stream bytearrayinputstream bytes java builder javabuilder debug nls system println skipped unchanged file file get name getname is top level type istopleveltype type add dependents of adddependentsof path qualified file name qualifiedfilename java builder javabuilder debug nls system println writing file file get name getname file create byte array input stream bytearrayinputstream bytes i resource iresource force i resource iresource derived core exception coreexception get status getstatus get code getcode i resource status iresourcestatus var iant variant exists i status istatus status get status getstatus status i resource status iresourcestatus i path ipath old file path oldfilepath i resource status iresourcestatus status get path getpath old type name oldtypename old file path oldfilepath remove file extension removefileextension last segment lastsegment to char array tochararray previous type names previoustypenames new state newstate get defined type names for getdefinedtypenamesfor compilation unit compilationunit type locator typelocator from same file fromsamefile previous type names previoustypenames from same file fromsamefile char operation charoperation equals compilation unit compilationunit get main type name getmaintypename old type name oldtypename previous type names previoustypenames length char operation charoperation equals previous type names previoustypenames old type name oldtypename from same file fromsamefile from same file fromsamefile i file ifile collision file get parent getparent get file getfile path old file path oldfilepath last segment lastsegment collision delete success file create byte array input stream bytearrayinputstream bytes i resource iresource force i resource iresource derived success core exception coreexception success abort compilation abortcompilation abort incremental build exception abortincrementalbuildexception qualified file name qualifiedfilename write class file check writeclassfilecheck i file ifile file string file name filename new bytes newbytes core exception coreexception old bytes oldbytes util get resource contents as byte array getresourcecontentsasbytearray file not equal notequal new bytes newbytes length old bytes oldbytes length new bytes newbytes length new bytes newbytes old bytes oldbytes not equal notequal bytes identical skip uri location file getlocationuri unable determine location file location string file path filepath location get scheme specific part getschemespecificpart class file reader classfilereader reader class file reader classfilereader old bytes oldbytes file path filepath to char array tochararray ignore local types visible single method reader is local islocal reader is anonymous isanonymous reader has structural changes hasstructuralchanges new bytes newbytes java builder javabuilder debug nls system println nls type structural file name filename add dependents of adddependentsof path file name filename new state newstate was str ucturally changed wasstructurallychanged file name filename class format exception classformatexception add dependents of adddependentsof path file name filename new state newstate was str ucturally changed wasstructurallychanged file name filename string to string tostring nls incremental image builder tnew new state newstate debug helper dump i resource delta iresourcedelta delta string buffer stringbuffer buffer string buffer stringbuffer i path ipath path delta get full path getfullpath path segment count segmentcount buffer append delta get kind getkind i resource delta iresourcedelta buffer append i resource delta iresourcedelta removed buffer append i resource delta iresourcedelta changed buffer append i resource delta iresourcedelta change buffer append buffer append buffer append path system println buffer to string tostring i resource delta iresourcedelta children delta get affected children getaffectedchildren children length dump children