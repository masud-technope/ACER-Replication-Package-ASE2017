copyright bea systems rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors tyeung bea initial api implementation org eclipse jdt apt tests java util hash set hashset java util org eclipse core resources i folder ifolder org eclipse core resources i marker imarker org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse jdt apt core internal apt plugin aptplugin org eclipse jdt apt core util apt config aptconfig org eclipse jdt apt tests annotations base processor baseprocessor org eclipse jdt apt tests annotations processor test status processorteststatus org eclipse jdt apt tests annotations generic factory genericfactory org eclipse jdt core i java project ijavaproject org eclipse jdt core tests builder builder tests buildertests org eclipse jdt core tests builder problem org eclipse jdt core tests util util sun mirror apt annotation processor annotationprocessor setup project common apt testing apt test base apttestbase builder tests buildertests i java project ijavaproject jproj apt test base apttestbase string basic project properties java compliance level src source folder bin output folder add java library build path create add annotation jar set up setup exception run final izers runfinalizers processor test status processorteststatus reset set up setup env reset workspace resetworkspace test util testutil enable auto build enableautobuild project deleted tear down teardown method string project name projectname get project name getprojectname project name projectname illegal state exception illegalstateexception jproj create java project createjavaproject project name projectname apt config aptconfig set enabled setenabled jproj java project created set up setup note tests create project method returns named get project name getprojectname i java project ijavaproject get current java project getcurrentjavaproject jproj create java project java libraries test annotations classpath compiler level src source folder bin output folder apt enabled param project name projectname java project current workspace exception i java project ijavaproject create java project createjavaproject string project name projectname exception i path ipath project path projectpath env add project addproject project name projectname env add external jars addexternaljars project path projectpath util get java class libs getjavaclasslibs remove fragment root names don collide nls env remove package fragment root removepackagefragmentroot project path projectpath nls env add package fragment root addpackagefragmentroot project path projectpath src nls env set output folder setoutputfolder project path projectpath bin i java project ijavaproject java proj javaproj env get java project getjavaproject project path projectpath test util testutil create and add annotation jar createandaddannotationjar java proj javaproj java proj javaproj tear down teardown exception apt plugin aptplugin trace tearing get project name getprojectname run final izers runfinalizers generic factory genericfactory processor tear down teardown run final izers runfinalizers attempt release file lock classes jar system system run finalization runfinalization system system run finalization runfinalization string get project name getprojectname nls get class getclass get name getname project i path ipath get source path getsourcepath i project iproject project env get project getproject get project name getprojectname nls i folder ifolder src folder srcfolder project get folder getfolder src i path ipath src root srcroot src folder srcfolder get full path getfullpath src root srcroot string concat e concate string messages len messages messages length string builder stringbuilder buffer string builder stringbuilder len buffer append messages buffer append buffer to string tostring string concat e concate i marker imarker markers len markers markers length string builder stringbuilder buffer string builder stringbuilder len buffer append markers get attribute getattribute i marker imarker message core exception coreexception assert true asserttrue unexpected core exception get message getmessage buffer append buffer to string tostring clear processor result clearprocessorresult annotation processor annotationprocessor processor string property name propertyname base processor baseprocessor get property name getpropertyname processor system clear property clearproperty property name propertyname processors result message base processor baseprocessor report error reporterror report success reportsuccess method test fail processor reported error result cleared success failure string check processor result checkprocessorresult annotation processor annotationprocessor processor string property name propertyname base processor baseprocessor get property name getpropertyname processor string result system get property getproperty property name propertyname system clear property clearproperty property name propertyname base processor baseprocessor success equals result fail result result processors result message base processor baseprocessor report error reporterror report success reportsuccess method returns message reported processor clears result string get processor result getprocessorresult annotation processor annotationprocessor processor string property name propertyname base processor baseprocessor get property name getpropertyname processor string result system get property getproperty property name propertyname system clear property clearproperty property name propertyname result expecting markers expectingmarkers string messages i marker imarker markers getallaptmarkers env get workspace root path getworkspacerootpath string expected messages expectedmessages hash set hashset string string msg messages expected messages expectedmessages add msg fail i marker imarker marker markers string marker msg markermsg string marker get attribute getattribute i marker imarker message expected messages expectedmessages marker msg markermsg expected messages expectedmessages remove marker msg markermsg fail expected messages expectedmessages is empty isempty fail core exception coreexception assert true asserttrue unexpected core exception get message getmessage fail assert equals assertequals concat e concate messages concat e concate markers expecting no markers expectingnomarkers expecting no markers expectingnomarkers env get workspace root path getworkspacerootpath expecting no markers expectingnomarkers i path ipath path i marker imarker markers getallaptmarkers path markers markers length assert true asserttrue nls unexpected marker markers get attribute getattribute i marker imarker message nls core exception coreexception assert true asserttrue unexpected core exception get message getmessage i marker imarker getallaptmarkers i path ipath path i resource iresource resource path equals env get workspace root path getworkspacerootpath resource env get workspace getworkspace get root getroot i project iproject env get project getproject path path equals get full path getfullpath resource env get project getproject path last segment lastsegment path get file extension getfileextension resource env get workspace getworkspace get root getroot get folder getfolder path resource env get workspace getworkspace get root getroot get file getfile path i marker imarker markers total i marker imarker processor markers processormarkers resource find markers findmarkers apt plugin aptplugin apt batch processor problem marker i resource iresource depth infinite total processor markers processormarkers length markers processor markers processormarkers i marker imarker factory path markers factorypathmarkers resource find markers findmarkers apt plugin aptplugin apt loader problem marker i resource iresource depth infinite factory path markers factorypathmarkers length total len factory path markers factorypathmarkers length i marker imarker temp i marker imarker len total system arraycopy markers temp total system arraycopy factory path markers factorypathmarkers temp total len markers temp total len markers factory path markers factorypathmarkers i marker imarker config markers configmarkers resource find markers findmarkers apt plugin aptplugin apt config problem marker i resource iresource depth infinite config markers configmarkers length total len config markers configmarkers length i marker imarker temp i marker imarker len total system arraycopy markers temp total system arraycopy config markers configmarkers temp total len markers temp total len markers config markers configmarkers markers core exception coreexception verifies element spec ifics specifics problems problems tests expecting only specific problems for expectingonlyspecificproblemsfor i path ipath problem tests expecting specific problems for expectingspecificproblemsfor i path ipath problem variant isn implemented expecting only specific problems for expectingonlyspecificproblemsfor i path ipath root expected problem expectedproblem expected problems expectedproblems debug print problems for printproblemsfor root problem root problems rootproblems env get problems for getproblemsfor root expected problems expectedproblems length expected problem expectedproblem expected problem expectedproblem expected problems expectedproblems root problems rootproblems length expected problem expectedproblem equals problem equalsproblem root problems rootproblems root problems rootproblems print problems for printproblemsfor root nls assert true asserttrue problem expected problem expectedproblem to string tostring root problems rootproblems length root problems rootproblems print problems for printproblemsfor root assert true asserttrue nls unexpected problem root problems rootproblems to string tostring nls verifies element specific problems expecting specific problems for expectingspecificproblemsfor i path ipath root expected problem expectedproblem problems debug print problems for printproblemsfor root problem root problems rootproblems env get problems for getproblemsfor root problems length expected problem expectedproblem problem problems root problems rootproblems length problem root problem rootproblem root problems rootproblems root problem rootproblem problem equals problem equalsproblem root problem rootproblem root problems rootproblems root problems rootproblems length problem root problems rootproblems system print problem get location getlocation get message getmessage get resource path getresourcepath system print get start getstart get end getend get category id getcategoryid system println assert true asserttrue missing expected problem problem verifies element specific problem problem expecting only specific problem for expectingonlyspecificproblemfor i path ipath root expected problem expectedproblem problem expecting only specific problems for expectingonlyspecificproblemsfor root expected problem expectedproblem problem sleep millis system current time millis currenttimemillis millis millis thread sleep millis interrupted exception interruptedexception millis system current time millis currenttimemillis