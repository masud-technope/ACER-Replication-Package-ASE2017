copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation stephan herrmann contributions bug compiler resource avoid remaining pos itives positives compiling eclipse sdk bug compiler resource restore resource leak warnings bug compiler resource incorrect potential resource leak bug safety comp romise compromise array creation bug compiler npe org eclipse jdt internal compiler ast conditional expression conditionalexpression generate code generatecode conditional expression conditionalexpression java bug compiler java compiler recognize declaration style annotations andy clement go pivotal gopivotal aclement gopivotal contributions bug compiler revive code generation support type annotations olivier work org eclipse jdt internal compiler ast org eclipse jdt internal compiler ast expression context expressioncontext assignment context org eclipse jdt internal compiler ast visitor astvisitor org eclipse jdt internal compiler codegen org eclipse jdt internal compiler flow org eclipse jdt internal compiler impl compiler options compileroptions org eclipse jdt internal compiler impl constant org eclipse jdt internal compiler lookup array initializer arrayinitializer expression expression expressions type array binding arraybinding binding array initializer arrayinitializer constructor comment array initializer arrayinitializer flow info flowinfo analyse code analysecode block scope blockscope current scope currentscope flow context flowcontext flow context flowcontext flow info flowinfo flow info flowinfo expressions compiler options compileroptions compiler options compileroptions current scope currentscope compiler options compileroptions analyse resources analyseresources compiler options compileroptions analyse resource leaks analyseresourceleaks eval null type annotations evalnulltypeannotations current scope currentscope environment uses null type annotations usesnulltypeannotations max expressions length max flow info flowinfo expressions analyse code analysecode current scope currentscope flow context flowcontext flow info flowinfo unconditional inits unconditionalinits analyse resources analyseresources faked tracking variable fakedtrackingvariable is any closeable isanycloseable expressions resolved type resolvedtype flow info flowinfo faked tracking variable fakedtrackingvariable mark passed to out side markpassedtooutside current scope currentscope expressions flow info flowinfo flow context flowcontext eval null type annotations evalnulltypeannotations check against null type annotation checkagainstnulltypeannotation current scope currentscope binding elements type elementstype expressions flow context flowcontext flow info flowinfo flow info flowinfo generate code generatecode block scope blockscope current scope currentscope code stream codestream code stream codestream value required valuerequired generate code generatecode current scope currentscope code stream codestream value required valuerequired code generation array initializer generate code generatecode type reference typereference type reference typereference array allocation expression arrayallocationexpression allocation expression allocationexpression block scope blockscope current scope currentscope code stream codestream code stream codestream value required valuerequired flat ten flatten values compute dimensions iter ating iterating depth nested array initializers code stream codestream position expression length expressionlength expressions expressions length code stream codestream generate inlined value generateinlinedvalue expression length expressionlength code stream codestream new array newarray type reference typereference allocation expression allocationexpression binding expressions binding array type arraytype deal dimension elements type d elementstypeid binding dimensions binding leaf component type leafcomponenttype expression length expressionlength expression expr expr expressions constant constant notaconstant filter initial izations initializations values elements type d elementstypeid expr constant long value longvalue code stream codestream dup code stream codestream generate inlined value generateinlinedvalue expr generate code generatecode current scope currentscope code stream codestream code stream codestream array at put arrayatput elements type d elementstypeid constant value constantvalue expr constant double value doublevalue constant value constantvalue constant value constantvalue code stream codestream dup code stream codestream generate inlined value generateinlinedvalue expr generate code generatecode current scope currentscope code stream codestream code stream codestream array at put arrayatput elements type d elementstypeid expr constant boolean value booleanvalue code stream codestream dup code stream codestream generate inlined value generateinlinedvalue expr generate code generatecode current scope currentscope code stream codestream code stream codestream array at put arrayatput elements type d elementstypeid expr null literal nullliteral code stream codestream dup code stream codestream generate inlined value generateinlinedvalue expr generate code generatecode current scope currentscope code stream codestream code stream codestream array at put arrayatput elements type d elementstypeid expr null literal nullliteral code stream codestream dup code stream codestream generate inlined value generateinlinedvalue expr generate code generatecode current scope currentscope code stream codestream code stream codestream array at put arrayatput elements type d elementstypeid value required valuerequired code stream codestream generate implicit conversion generateimplicitconversion implicit conversion implicitconversion code stream codestream pop code stream codestream record positions from recordpositionsfrom source start sourcestart string buffer stringbuffer print expression printexpression indent string buffer stringbuffer output output append expressions expressions length nls output append nls expressions print expression printexpression output output append print indent printindent indent output output append type binding typebinding resolve type expecting resolvetypeexpecting block scope blockscope scope type binding typebinding expected type expectedtype array initializers occur hand side assignment expression expected type valid type enforced elements array initializer method recursive test is array type isarraytype constant constant notaconstant expected type expectedtype array binding arraybinding list annotation commen surate commensurate jls bits is annotation default value isannotationdefaultvalue list check array initializer checked initializer resolution type binding typebinding leaf component type leafcomponenttype expected type expectedtype leaf component type leafcomponenttype leaf component type leafcomponenttype is reifiable isreifiable scope problem reporter problemreporter illegal generic array illegalgenericarray leaf component type leafcomponenttype resolved type resolvedtype binding array binding arraybinding expected type expectedtype expressions binding type binding typebinding element type elementtype binding elements type elementstype length expressions length length expression expression expressions expression set expression context setexpressioncontext assignment context expression set expected type setexpectedtype element type elementtype type binding typebinding expression type expressiontype expression array initializer arrayinitializer expression resolve type expecting resolvetypeexpecting scope element type elementtype expression resolve type resolvetype scope expression type expressiontype compile time conversion required call compute conversion computeconversion type mismatch error typemismatcherror type binding typebinding not equals notequals element type elementtype expression type expressiontype scope compilation unit scope compilationunitscope record type conversion recordtypeconversion element type elementtype expression type expressiontype expression is constant value of type assignable to type isconstantvalueoftypeassignabletotype expression type expressiontype element type elementtype expression type expressiontype is compatible with iscompatiblewith element type elementtype expression compute conversion computeconversion scope element type elementtype expression type expressiontype is boxing compatible isboxingcompatible expression type expressiontype element type elementtype expression scope expression compute conversion computeconversion scope element type elementtype expression type expressiontype scope problem reporter problemreporter type mismatch error typemismatcherror expression type expressiontype element type elementtype expression binding infer initializer type error reporting based element type binding typebinding leaf element type leafelementtype dim expressions leaf element type leafelementtype scope get java lang object getjavalangobject expression expression expressions expression expression array initializer arrayinitializer dim expression sub exprs subexprs array initializer arrayinitializer expression expressions sub exprs subexprs leaf element type leafelementtype scope get java lang object getjavalangobject expression expression array initializer arrayinitializer expression expressions expression leaf element type leafelementtype expression resolve type resolvetype scope fault tolerance resolve expressions length expressions length length expression expressions expression expression resolve type resolvetype scope leaf element type leafelementtype resolved type resolvedtype scope create array type createarraytype leaf element type leafelementtype dim expected type expectedtype scope problem reporter problemreporter type mismatch error typemismatcherror resolved type resolvedtype expected type expectedtype traverse ast visitor astvisitor visitor block scope blockscope scope visitor visit scope expressions expressions length expressionslength expressions length expressions length expressionslength expressions traverse visitor scope visitor end visit endvisit scope