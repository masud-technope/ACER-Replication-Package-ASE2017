copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse jdt internal compiler parser java util hash set hashset java util org eclipse jdt core compiler org eclipse jdt internal compiler ast abstract method declaration abstractmethoddeclaration org eclipse jdt internal compiler ast argument org eclipse jdt internal compiler ast ast node astnode org eclipse jdt internal compiler ast block org eclipse jdt internal compiler ast field declaration fielddeclaration org eclipse jdt internal compiler ast local declaration localdeclaration org eclipse jdt internal compiler ast statement org eclipse jdt internal compiler ast type declaration typedeclaration org eclipse jdt internal compiler class fmt classfmt class file constants classfileconstants org eclipse jdt internal compiler lookup type binding typebinding recovered block recoveredblock recovered statement recoveredstatement terminal tokens terminaltokens block block declaration blockdeclaration recovered statement recoveredstatement statements statement count statementcount preserve content preservecontent recovered local variable recoveredlocalvariable pending argument pendingargument pending modifiers pendingmodifiers pending modifers source start pendingmodiferssourcestart recovered annotation recoveredannotation pending annotations pendingannotations pending annotation count pendingannotationcount recovered block recoveredblock block block recovered element recoveredelement parent bracket balance bracketbalance block parent bracket balance bracketbalance block declaration blockdeclaration block found opening brace foundopeningbrace preserve content preservecontent parser method recovery activated methodrecoveryactivated parser statement recovery activated statementrecoveryactivated recovered element recoveredelement add abstract method declaration abstractmethoddeclaration method declaration methoddeclaration bracket balance value bracketbalancevalue parent parent recovered method recoveredmethod recovered method recoveredmethod enclosing recovered method enclosingrecoveredmethod recovered method recoveredmethod parent enclosing recovered method enclosingrecoveredmethod method body methodbody enclosing recovered method enclosingrecoveredmethod parent reset pending modifiers resetpendingmodifiers ignore element add method declaration methoddeclaration bracket balance value bracketbalancevalue record nested block declaration recovered element recoveredelement add block nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue reset pending modifiers resetpendingmodifiers nested block starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend nested block declaration nestedblockdeclaration source start sourcestart block declaration blockdeclaration source end sourceend parent add nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue recovered block recoveredblock element recovered block recoveredblock nested block declaration nestedblockdeclaration bracket balance value bracketbalancevalue pending argument promote block pending argument pendingargument element attach pending argument pendingargument pending argument pendingargument parser statement recovery activated statementrecoveryactivated add block statement addblockstatement element attach element nested block declaration nestedblockdeclaration source end sourceend element record local declaration recovered element recoveredelement add local declaration localdeclaration local declaration localdeclaration bracket balance value bracketbalancevalue add local declaration localdeclaration bracket balance value bracketbalancevalue record local declaration recovered element recoveredelement add local declaration localdeclaration local declaration localdeclaration bracket balance value bracketbalancevalue delegated by parent delegatedbyparent local declaration localdeclaration is recovered from lone identifier isrecoveredfromloneidentifier skip local mutated assignment parser consume local variable declaration statement consumelocalvariabledeclarationstatement local variable starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend local declaration localdeclaration declaration source start declarationsourcestart block declaration blockdeclaration source end sourceend reset pending modifiers resetpendingmodifiers ignore delegated by parent delegatedbyparent parent add local declaration localdeclaration bracket balance value bracketbalancevalue recovered local variable recoveredlocalvariable element recovered local variable recoveredlocalvariable local declaration localdeclaration bracket balance value bracketbalancevalue pending annotation count pendingannotationcount element attach pending annotations pendingannotations pending annotation count pendingannotationcount pending modifiers pendingmodifiers pending modifers source start pendingmodiferssourcestart reset pending modifiers resetpendingmodifiers local declaration localdeclaration argument pending argument pendingargument element attach element local declaration localdeclaration declaration source end declarationsourceend element record statement declaration recovered element recoveredelement add statement stmt bracket balance value bracketbalancevalue add stmt bracket balance value bracketbalancevalue record statement declaration recovered element recoveredelement add statement stmt bracket balance value bracketbalancevalue delegated by parent delegatedbyparent reset pending modifiers resetpendingmodifiers nested block starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend stmt source start sourcestart block declaration blockdeclaration source end sourceend ignore delegated by parent delegatedbyparent parent add stmt bracket balance value bracketbalancevalue recovered statement recoveredstatement element recovered statement recoveredstatement stmt bracket balance value bracketbalancevalue attach element stmt source end sourceend element add ition addition type initializer method body recovered element recoveredelement add type declaration typedeclaration type declaration typedeclaration bracket balance value bracketbalancevalue add type declaration typedeclaration bracket balance value bracketbalancevalue add ition addition type initializer method body recovered element recoveredelement add type declaration typedeclaration type declaration typedeclaration bracket balance value bracketbalancevalue delegated by parent delegatedbyparent type starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend type declaration typedeclaration declaration source start declarationsourcestart block declaration blockdeclaration source end sourceend reset pending modifiers resetpendingmodifiers ignore delegated by parent delegatedbyparent parent add type declaration typedeclaration bracket balance value bracketbalancevalue recovered type recoveredtype element recovered type recoveredtype type declaration typedeclaration bracket balance value bracketbalancevalue pending annotation count pendingannotationcount element attach pending annotations pendingannotations pending annotation count pendingannotationcount pending modifiers pendingmodifiers pending modifers source start pendingmodiferssourcestart reset pending modifiers resetpendingmodifiers attach element type declaration typedeclaration declaration source end declarationsourceend element recovered element recoveredelement add annotation name addannotationname identifier ptr identifierptr identifier length ptr identifierlengthptr annotation start annotationstart bracket balance value bracketbalancevalue pending annotations pendingannotations pending annotations pendingannotations recovered annotation recoveredannotation pending annotation count pendingannotationcount pending annotation count pendingannotationcount pending annotations pendingannotations length system arraycopy pending annotations pendingannotations pending annotations pendingannotations recovered annotation recoveredannotation pending annotation count pendingannotationcount pending annotation count pendingannotationcount recovered annotation recoveredannotation element recovered annotation recoveredannotation identifier ptr identifierptr identifier length ptr identifierlengthptr annotation start annotationstart bracket balance value bracketbalancevalue pending annotations pendingannotations pending annotation count pendingannotationcount element element add modifier addmodifier flag modifiers source start modifierssourcestart pending modifiers pendingmodifiers flag pending modifers source start pendingmodiferssourcestart pending modifers source start pendingmodiferssourcestart modifiers source start modifierssourcestart attach recovered statement attach recovered statement recoveredstatement recovered statement recoveredstatement statements statements recovered statement recoveredstatement statement count statementcount statement count statementcount statements length system arraycopy statements statements recovered statement recoveredstatement statement count statementcount statement count statementcount statements statement count statementcount recovered statement recoveredstatement attach pending modifiers attachpendingmodifiers recovered annotation recoveredannotation pending anno ts pendingannots pending annot count pendingannotcount pending mods pendingmods pending mods source start pendingmodssourcestart pending annotations pendingannotations pending anno ts pendingannots pending annotation count pendingannotationcount pending annot count pendingannotcount pending modifiers pendingmodifiers pending mods pendingmods pending modifers source start pendingmodiferssourcestart pending mods source start pendingmodssourcestart answer parsed structure ast node astnode parse tree parsetree block declaration blockdeclaration reset pending modifiers resetpendingmodifiers pending annotations pendingannotations pending annotation count pendingannotationcount pending modifiers pendingmodifiers pending modifers source start pendingmodiferssourcestart string to string tostring tab string buffer stringbuffer result string buffer stringbuffer tab string tabstring tab nls result append recovered block block declaration blockdeclaration print tab result statements statement count statementcount nls result append result append statements to string tostring tab result to string tostring rebuild block nested structure scope block updated block updatedblock depth type declaration typedeclaration known types knowntypes block marked preserved empty ignore preserve content preservecontent statement count statementcount statement updated statements updatedstatements statement statement count statementcount updated count updatedcount update statement recovered statement recoveredstatement last statement laststatement statements statement count statementcount recovered method recoveredmethod enclosing method enclosingmethod enclosing method enclosingmethod recovered initializer recoveredinitializer enclosing int ializer enclosingintializer enclosing initializer enclosinginitializer body end value bodyendvalue enclosing method enclosingmethod body end value bodyendvalue enclosing method enclosingmethod method declaration methoddeclaration body end bodyend enclosing int ializer enclosingintializer enclosing method enclosingmethod method declaration methoddeclaration source start sourcestart enclosing int ializer enclosingintializer field declaration fielddeclaration source start sourcestart body end value bodyendvalue enclosing int ializer enclosingintializer field declaration fielddeclaration declaration source end declarationsourceend enclosing int ializer enclosingintializer body end value bodyendvalue enclosing int ializer enclosingintializer field declaration fielddeclaration declaration source end declarationsourceend body end value bodyendvalue block declaration blockdeclaration source end sourceend last statement laststatement recovered local variable recoveredlocalvariable recovered local variable recoveredlocalvariable last local variable lastlocalvariable recovered local variable recoveredlocalvariable last statement laststatement last local variable lastlocalvariable local declaration localdeclaration declaration source end declarationsourceend last local variable lastlocalvariable local declaration localdeclaration declaration source end declarationsourceend body end value bodyendvalue last local variable lastlocalvariable local declaration localdeclaration declaration end declarationend body end value bodyendvalue last statement laststatement recovered block recoveredblock recovered block recoveredblock last block lastblock recovered block recoveredblock last statement laststatement last block lastblock block declaration blockdeclaration source end sourceend last block lastblock block declaration blockdeclaration source end sourceend body end value bodyendvalue last statement laststatement recovered type recoveredtype last statement laststatement statement source end sourceend last statement laststatement statement source end sourceend body end value bodyendvalue last end lastend block declaration blockdeclaration source start sourcestart collect updated statements statement count statementcount statement updated statement updatedstatement statements updated statement updatedstatement depth known types knowntypes updated statement updatedstatement updated statements updatedstatements local declaration localdeclaration local declaration localdeclaration local local declaration localdeclaration updated statements updatedstatements local initialization updated statement updatedstatement source start sourcestart local initialization source start sourcestart updated statement updatedstatement source end sourceend local initialization source end sourceend updated statements updatedstatements updated count updatedcount updated statement updatedstatement updated statement updatedstatement local declaration localdeclaration local declaration localdeclaration local declaration localdeclaration local declaration localdeclaration updated statement updatedstatement local declaration localdeclaration declaration source end declarationsourceend last end lastend last end lastend local declaration localdeclaration declaration source end declarationsourceend updated statement updatedstatement type declaration typedeclaration type declaration typedeclaration type declaration typedeclaration type declaration typedeclaration updated statement updatedstatement type declaration typedeclaration declaration source end declarationsourceend last end lastend last end lastend type declaration typedeclaration declaration source end declarationsourceend updated statement updatedstatement source end sourceend last end lastend last end lastend updated statement updatedstatement source end sourceend int eresting interesting block updated count updatedcount resize statement collection updated count updatedcount statement count statementcount block declaration blockdeclaration statements statement updated count updatedcount system arraycopy updated statements updatedstatements block declaration blockdeclaration statements updated count updatedcount block declaration blockdeclaration statements updated statements updatedstatements block declaration blockdeclaration source end sourceend last end lastend body end value bodyendvalue block declaration blockdeclaration source end sourceend body end value bodyendvalue block declaration blockdeclaration source end sourceend last end lastend block declaration blockdeclaration rebuild statement nested structure scope statement updated statement updatedstatement depth type declaration typedeclaration known types knowntypes updated block updatedblock depth known types knowntypes closing brace consumed closed current element current element currentelement exited recovered element recoveredelement update on closing brace updateonclosingbrace brace start bracestart brace end braceend bracket balance bracketbalance parent update source end if necessary updatesourceendifnecessary brace start bracestart brace end braceend block method body closes method recovered method recoveredmethod method enclosing method enclosingmethod method method method body methodbody parent update on closing brace updateonclosingbrace brace start bracestart brace end braceend recovered initializer recoveredinitializer initializer enclosing initializer enclosinginitializer initializer initializer initializer body initializerbody parent update on closing brace updateonclosingbrace brace start bracestart brace end braceend parent opening brace consumed expected opening current element body start bodystart updated recovered element recoveredelement update on opening brace updateonopeningbrace brace start bracestart brace end braceend create nested block block block block block source start sourcestart parser scanner start position startposition add block update parse node update parse tree updateparsetree updated block updatedblock hash set hashset type declaration typedeclaration record field declaration recovered element recoveredelement add field declaration fielddeclaration field declaration fielddeclaration bracket balance value bracketbalancevalue reset pending modifiers resetpendingmodifiers local variables method field type name fieldtypename local field declaration fielddeclaration modifiers class file constants classfileconstants acc final accfinal initializer field declaration fielddeclaration type field type name fieldtypename field declaration fielddeclaration type get type name gettypename length char operation charoperation equals field type name fieldtypename type binding typebinding source name sourcename update source end if necessary updatesourceendifnecessary previous available line end previousavailablelineend field declaration fielddeclaration declaration source start declarationsourcestart parent add field declaration fielddeclaration bracket balance value bracketbalancevalue local variable starting passed block belonging enclosing block block declaration blockdeclaration source end sourceend field declaration fielddeclaration declaration source start declarationsourcestart block declaration blockdeclaration source end sourceend parent add field declaration fielddeclaration bracket balance value bracketbalancevalue reduced assist node assistnode context gek