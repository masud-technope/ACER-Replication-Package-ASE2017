copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde api tools tests util java file java file input stream fileinputstream java file not found exception filenotfoundexception java file output stream fileoutputstream java io exception ioexception java input stream inputstream java print writer printwriter java lang reflect invocation target exception invocationtargetexception java util array list arraylist java util iterator java util list java util zip zip entry zipentry java util zip zip output stream zipoutputstream org eclipse core resources i container icontainer org eclipse core resources i file ifile org eclipse core resources i folder ifolder org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core resources resources plugin resourcesplugin org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i progress monitor iprogressmonitor org eclipse pde api tools internal util util org eclipse pde api tools model tests test suite helper testsuitehelper utilities handling files file utils fileutils maximum time wait deletion operation running jdt core tests seconds number exc eed exceed minute avoid loops waiting ten waiting repeating ten loops waiting loops waiting delete max wait time was ted wasted deleted resources delete max time recursively adds files directory list param dir param collection io exception ioexception add java files addjavafiles file dir list file collection io exception ioexception file files dir list files listfiles list file sub dirs subdirs array list arraylist file files length files is file isfile collection add files files is directory isdirectory sub dirs subdirs add files iterator file iter sub dirs subdirs iterator iter has next hasnext file sub dir subdir iter add java files addjavafiles sub dir subdir collection imports files root directory path param root dir rootdir param dest path destpath param monitor invocation target exception invocationtargetexception io exception ioexception import files from directory importfilesfromdirectory file root dir rootdir i path ipath dest path destpath i progress monitor iprogressmonitor monitor invocation target exception invocationtargetexception io exception ioexception i resource iresource find member findmember resources plugin resourcesplugin get workspace getworkspace get root getroot get folder getfolder dest path destpath file dest find member findmember get location getlocation to file tofile dest exists dest mkdirs test suite helper testsuitehelper copy root dir rootdir dest find member findmember refresh local refreshlocal i resource iresource depth infinite core exception coreexception imports file destination path param file param dest path destpath param monitor invocation target exception invocationtargetexception io exception ioexception import file from directory importfilefromdirectory file file i path ipath dest path destpath i progress monitor iprogressmonitor monitor invocation target exception invocationtargetexception io exception ioexception i resource iresource find member findmember dest path destpath segment count segmentcount find member findmember resources plugin resourcesplugin get workspace getworkspace get root getroot get project getproject dest path destpath last segment lastsegment find member findmember resources plugin resourcesplugin get workspace getworkspace get root getroot get folder getfolder dest path destpath find member findmember file dest find member findmember get location getlocation to file tofile dest exists dest mkdirs test suite helper testsuitehelper copy file dest find member findmember refresh local refreshlocal i resource iresource depth infinite core exception coreexception creates java file path contents param path param contents io exception ioexception create file createfile string path string contents io exception ioexception file output stream fileoutputstream output file output stream fileoutputstream path output write contents get bytes getbytes output close delete file directory insure file longer file system directory delete hierarchy param resource resource delete iff file delete delete i resource iresource resource resource delete is resource deleted isresourcedeleted resource core exception coreexception wait until resource deleted waituntilresourcedeleted resource delete file directory insure file longer file system directory delete hierarchy param path path file directory delete iff file delete delete string path util delete file path flush content directory leaving empty directory flush directory content flushdirectorycontent file dir file files dir list files listfiles files max files length max util delete files wait resource deleted file system param resource deleted resource file deleted wait until resource deleted waituntilresourcedeleted i resource iresource resource i path ipath location resource get location getlocation location system println nls nls system println error resource get location getlocation returned system println file file location to file tofile count delay max retry maxretry delete max wait delay time count max retry maxretry count thread sleep delay time delay time delete max time delete max time time resource is accessible isaccessible resource delete is resource deleted isresourcedeleted resource util is file deleted isfiledeleted file core exception coreexception is resource deleted isresourcedeleted resource util is file deleted isfiledeleted file increment waiting delay exp one ntially exponentially count delay count delay max retry maxretry delete max wait delay delete max wait delay max retry maxretry interrupted exception interruptedexception system println nls nls nls system println error resource deleted waited delete max time system println returns resource deleted rely link i resource iresource is accessible isaccessible method parent children link get parent child resource getparentchildresource i resource iresource param resource resource test deleted resource accessible parent children is resource deleted isresourcedeleted i resource iresource resource resource is accessible isaccessible get parent child resource getparentchildresource resource reads content source file returns unable read source file string read from file readfromfile string source file path sourcefilepath file not found exception filenotfoundexception io exception ioexception file source file sourcefile file source file path sourcefilepath source file sourcefile exists source file sourcefile is file isfile string buffer stringbuffer source content buffer sourcecontentbuffer string buffer stringbuffer file input stream fileinputstream input input file input stream fileinputstream source file sourcefile read read input read read source content buffer sourcecontentbuffer append read read input close input close source content buffer sourcecontentbuffer to string tostring writes content string output file param contents param destination file path destinationfilepath write to file writetofile string contents string destination file path destinationfilepath file dest file destfile file destination file path destinationfilepath print writer printwriter writer file output stream fileoutputstream output output file output stream fileoutputstream dest file destfile writer print writer printwriter output writer print contents writer flush io exception ioexception print stack trace printstacktrace writer writer close output output close io exception ioexception writes zip file files contained root directory param root dir rootdir param zip path zippath io exception ioexception zip file root dir rootdir string zip path zippath io exception ioexception zip output stream zipoutputstream zip file zip file zipfile file zip path zippath zip file zipfile exists util delete zip file zipfile zip zip output stream zipoutputstream file output stream fileoutputstream zip file zipfile zip root dir rootdir zip root dir rootdir get path getpath length slash zip zip close writes zip entries directory zip output stream param dir param zip param root path length rootpathlength io exception ioexception zip file dir zip output stream zipoutputstream zip root path length rootpathlength io exception ioexception file files dir list files listfiles files length files length length file file files file is file isfile string path file get path getpath path path substring root path length rootpathlength zip entry zipentry entry zip entry zipentry path replace zip put next entry putnextentry entry zip write org eclipse jdt internal compiler util util get file byte content getfilebytecontent file zip close entry closeentry zip file zip root path length rootpathlength i resource iresource get parent child resource getparentchildresource i resource iresource resource i container icontainer parent resource get parent getparent parent parent exists i resource iresource members parent members length members members length length length members resource members members equals resource members members get full path getfullpath equals resource get full path getfullpath members core exception coreexception copy file copyfile string source path sourcepath string dest path destpath source path sourcepath util to native path tonativepath source path sourcepath dest path destpath util to native path tonativepath dest path destpath file source file source path sourcepath source exists file dest file dest path destpath dest exists source is directory isdirectory string files source list files files length string file files file source file sourcefile file source file source file sourcefile is directory isdirectory file dest sub dir destsubdir file dest file dest sub dir destsubdir mkdir copy file copyfile source file sourcefile get path getpath dest sub dir destsubdir get path getpath copy file copyfile source file sourcefile get path getpath dest get path getpath file input stream fileinputstream file output stream fileoutputstream file input stream fileinputstream source file dest file destfile file dest source get name getname dest file destfile exists util delete dest file destfile io exception ioexception dest file destfile file output stream fileoutputstream dest file destfile buffer length bufferlength buffer buffer length bufferlength read read read read buffer buffer length bufferlength read write buffer read io exception ioexception error to string tostring close io exception ioexception close io exception ioexception delete resource deleteresource i project iproject project retry count retrycount retry count retrycount delete project system runtime exception runtimeexception delete project get full path getfullpath delete i project iproject project project delete org eclipse jdt core tests util util is resource deleted isresourcedeleted project core exception coreexception org eclipse jdt core tests util util wait until resource deleted waituntilresourcedeleted project copy folder copyfolder i folder ifolder folder file dir exception i resource iresource members folder members members length i resource iresource res members res get type gettype i resource iresource file i file ifile file i file ifile res file utils fileutils copy file copyfile dir file i folder ifolder nested i folder ifolder res file file dir nested get name getname mkdirs copy folder copyfolder nested copy file copyfile file dir i file ifile file exception file local file dir file get name getname local create new file createnewfile file output stream fileoutputstream stream file output stream fileoutputstream local input stream inputstream contents file get contents getcontents bytes util get input stream as byte array getinputstreamasbytearray contents stream write bytes contents close stream close