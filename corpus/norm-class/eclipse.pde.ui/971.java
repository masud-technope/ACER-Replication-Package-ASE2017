copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal util java java net malformedurlexception java net url java util java util zip org eclipse core resources org eclipse core runtime org eclipse jdt core org eclipse pde core plugin org eclipse pde internal core target platform helper targetplatformhelper org eclipse pde internal core ibundle i bundle plugin base ibundlepluginbase org eclipse pde internal pde ui messages pdeuimessages org eclipse pde internal wizards product i splash handler constants isplashhandlerconstants org eclipse pde internal wizards product update splash handler action updatesplashhandleraction org eclipse pde internal wizards templates control stack controlstack org eclipse pde templates i template section itemplatesection org eclipse pde templates i variable provider ivariableprovider org osgi framework bundle template file generator templatefilegenerator template file generator templatefilegenerator i variable provider ivariableprovider todo splash merge utility template base extra cted extracted org eclipse pde templates abstract template section abstracttemplatesection todo splash major code clean required key main plug plug template plugin class pluginclass fully qualified nls string key plugin plugin class pluginclass key simple bundle activator activator nls string key activator simple activator key plug plug template plugin id pluginid nls string key plugin plugin id pluginid key plug plug template plugin name pluginname nls string key plugin plugin name pluginname key created team plate teamplate package name packagename nls string key package name packagename i project iproject f project fproject i plugin model base ipluginmodelbase f model fmodel string f plugin d fpluginid string f package fpackage string f class fclass string f template ftemplate param project param model template file generator templatefilegenerator i project iproject project i plugin model base ipluginmodelbase model string pluginid string target package targetpackage string target class targetclass string template f project fproject project f model fmodel model f plugin d fpluginid pluginid f package fpackage target package targetpackage f class fclass target class targetclass f template ftemplate template generates files template execution implementation template location root file templates link generate files generatefiles i progress monitor iprogressmonitor monitor url location url locationurl location processed param monitor progress monitor generation progress generate files generatefiles i progress monitor iprogressmonitor monitor core exception coreexception generate files template location generate files generatefiles monitor get template location gettemplatelocation generate files shared branding location splash scr een screen nls bundle template bundle templatebundle platform get bundle getbundle org eclipse pde templates template bundle templatebundle nls generate files generatefiles monitor template bundle templatebundle get entry getentry branding url get template location gettemplatelocation nls bundle bundle platform get bundle getbundle org eclipse pde templates bundle string candidates get directory candidates getdirectorycandidates candidates length bundle get entry getentry candidates url candidate nls url nls bundle get entry getentry nls candidates candidate malformedurlexception generates files template execution files location processed files folders directory samp bin samp copied target project modification files directory samp java samp copied java source folder creating folder structure corresponds variable samp package name packagename samp java files subject conditional generation variable replacement files folders copied target folder conditional generation variable replacement files variable replacement includes file names param monitor progress monitor generation progress param location url locationurl url pointing file directory copied template generate files generatefiles i progress monitor iprogressmonitor monitor url location url locationurl core exception coreexception monitor set task name settaskname pde ui messages pdeuimessages abstract template section abstracttemplatesection generating location url locationurl location url locationurl file locator filelocator resolve location url locationurl location url locationurl file locator filelocator tofileurl location url locationurl io exception ioexception nls file equals location url locationurl get protocol getprotocol file template directory templatedirectory file location url locationurl get file getfile template directory templatedirectory exists generate files generatefiles template directory templatedirectory f project fproject monitor nls jar equals location url locationurl get protocol getprotocol string file location url locationurl get file getfile exclamation file index of indexof exclamation url file url fileurl file url fileurl url file substring exclamation malformedurlexception mue file plugin jar pluginjar file file url fileurl get file getfile plugin jar pluginjar exists path string template directory templatedirectory file substring exclamation i path ipath path path template directory templatedirectory zip file zipfile zip file zipfile zip file zipfile zip file zipfile plugin jar pluginjar generate files generatefiles zip file zipfile path f project fproject monitor zip exception zipexception io exception ioexception ioe zip file zipfile zip file zipfile close io exception ioexception nls monitor sub task subtask monitor worked generate files generatefiles file src i container icontainer dst first level firstlevel binary i progress monitor iprogressmonitor monitor core exception coreexception file members src list files listfiles members length file member members member is directory isdirectory i container icontainer dst container dstcontainer first level firstlevel binary is ok to create folder isoktocreatefolder member nls member get name getname equals nls java i folder ifolder source folder sourcefolder get source folder getsourcefolder monitor dst container dstcontainer generate java source folder generatejavasourcefolder source folder sourcefolder monitor nls member get name getname equals nls bin binary dst container dstcontainer dst dst container dstcontainer is ok to create folder isoktocreatefolder member string folder name foldername get processed string getprocessedstring member get name getname member get name getname dst container dstcontainer dst get folder getfolder path folder name foldername dst container dstcontainer i folder ifolder dst container dstcontainer exists i folder ifolder dst container dstcontainer create monitor generate files generatefiles member dst container dstcontainer binary monitor is ok to create file isoktocreatefile member first level firstlevel binary input stream inputstream file input stream fileinputstream member copy file copyfile member get name getname dst binary monitor io exception ioexception ioe close io exception ioexception ioe copy file copyfile string file name filename input stream inputstream input i container icontainer dst binary i progress monitor iprogressmonitor monitor core exception coreexception string target file name targetfilename get processed string getprocessedstring file name filename file name filename monitor sub task subtask target file name targetfilename i file ifile dst file dstfile dst get file getfile path target file name targetfilename input stream inputstream stream get processed stream getprocessedstream file name filename input binary dst file dstfile exists dst file dstfile set contents setcontents stream monitor dst file dstfile create stream monitor stream close io exception ioexception generate files generatefiles zip file zipfile zip file zipfile i path ipath path i container icontainer dst first level firstlevel binary i progress monitor iprogressmonitor monitor core exception coreexception path length pathlength path segment count segmentcount immidiate children dir dir file java map string zip entry zipentry child zip entries childzipentries hash map hashmap enumeration zip entries zipentries zip file zipfile entries zip entries zipentries has more elements hasmoreelements zip entry zipentry zip entry zipentry zip entry zipentry zip entries zipentries next element nextelement i path ipath entry path entrypath path zip entry zipentry get name getname entry path entrypath segment count segmentcount path length pathlength ancestor current directory path is prefix of isprefixof entry path entrypath descendant entry path entrypath segment count segmentcount path length pathlength child zip entries childzipentries zip entry zipentry get name getname zip entry zipentry string entry path entrypath upto segment uptosegment path length pathlength add trailing separator addtrailingseparator to string tostring child zip entries childzipentries contains key containskey zip entry zipentry dir entry direntry zip entry zipentry child zip entries childzipentries dir entry direntry iterator zip entry zipentry child zip entries childzipentries values iterator has next hasnext zip entry zipentry zip enry zipenry string path zip enry zipenry get name getname last segment lastsegment to string tostring zip enry zipenry is directory isdirectory i container icontainer dst container dstcontainer first level firstlevel binary nls equals nls java i folder ifolder source folder sourcefolder get source folder getsourcefolder monitor dst container dstcontainer generate java source folder generatejavasourcefolder source folder sourcefolder monitor nls equals nls bin binary dst container dstcontainer dst dst container dstcontainer is ok to create folder isoktocreatefolder file path to file tofile string folder name foldername get processed string getprocessedstring dst container dstcontainer dst get folder getfolder path folder name foldername dst container dstcontainer i folder ifolder dst container dstcontainer exists i folder ifolder dst container dstcontainer create monitor generate files generatefiles zip file zipfile path append dst container dstcontainer binary monitor is ok to create file isoktocreatefile file path to file tofile first level firstlevel binary input stream inputstream zip file zipfile get input stream getinputstream zip enry zipenry copy file copyfile dst binary monitor io exception ioexception ioe close io exception ioexception ioe tests folder template location created target project subclasses method condition ally conditionally block creation entire directories subject user choices param source folder sourcefolder folder tested code code folder created workspace code code values substitution variables is ok to create folder isoktocreatefolder file source folder sourcefolder ext ensible template selected extensibletemplateselected update splash handler action updatesplashhandleraction is extensible template selected isextensibletemplateselected f template ftemplate string source folder string sourcefolderstring source folder sourcefolder to string tostring nls ext ensible template selected extensibletemplateselected source folder string sourcefolderstring ends with endswith icons nls ext ensible template selected extensibletemplateselected source folder string sourcefolderstring ends with endswith schema tests file template location created target project subclasses method condition ally conditionally block creation file subject user choices param source file sourcefile file template location created samp samp file created project samp samp skip implementation samp samp is ok to create file isoktocreatefile file source file sourcefile nls string java suffix javasuffix java string target file targetfile f class fclass java suffix javasuffix string copy file copyfile source file sourcefile to string tostring todo splash propagate share copy prevent ion prevention code org eclipse pde internal templates ide splash handlers template splashhandlerstemplate copy file copyfile ends with endswith java suffix javasuffix nls copy file copyfile ends with endswith target file targetfile f project fproject exists path src f package fpackage replace target file targetfile nls copy file copyfile ends with endswith splash bmp nls f project fproject exists path splash bmp nls copy file copyfile ends with endswith png nls copy file copyfile ends with endswith png f project fproject exists path icons png nls copy file copyfile ends with endswith embedded png f project fproject exists path icons embedded png nls copy file copyfile ends with endswith enter pri se enterprise png f project fproject exists path icons enter pri se enterprise png nls copy file copyfile ends with endswith rcp png f project fproject exists path icons rcp png nls copy file copyfile ends with endswith lang uages languages png f project fproject exists path icons lang uages languages png nls copy file copyfile ends with endswith splash extension splashextension exsd nls f project fproject exists path schema splash extension splashextension exsd returns folder java files target project implementation source folders classpath target folders picks encountered subclasses override behavior param monitor progress monitor source folder generate java files samp samp core exception coreexception i folder ifolder get source folder getsourcefolder i progress monitor iprogressmonitor monitor core exception coreexception i folder ifolder source folder sourcefolder i java project ijavaproject java project javaproject java core javacore create f project fproject i classpath entry iclasspathentry classpath java project javaproject get raw classpath getrawclasspath classpath length i classpath entry iclasspathentry entry classpath entry get entry kind getentrykind i classpath entry iclasspathentry cpe source i path ipath path entry get path getpath remove first segments removefirstsegments path segment count segmentcount source folder sourcefolder f project fproject get folder getfolder path java model exception javamodelexception source folder sourcefolder i variable provider ivariableprovider get value getvalue string override object get value getvalue string key get key value getkeyvalue key i folder ifolder generate java source folder generatejavasourcefolder i folder ifolder source folder sourcefolder i progress monitor iprogressmonitor monitor core exception coreexception object package value packagevalue get value getvalue key string package name packagename package value packagevalue package value packagevalue to string tostring package name packagename package name packagename f model fmodel get plugin base getpluginbase get id getid i path ipath path path package name packagename replace file separator char separatorchar source folder sourcefolder path source folder sourcefolder get project relative path getprojectrelativepath append path path segment count segmentcount i path ipath sub path subpath path upto segment uptosegment i folder ifolder sub folder subfolder f project fproject get folder getfolder sub path subpath sub folder subfolder exists sub folder subfolder create monitor f project fproject get folder getfolder path string get processed string getprocessedstring string file name filename string source source index of indexof source loc string buffer stringbuffer buffer string buffer stringbuffer replacement mode replacementmode source length source char at charat replacement mode replacementmode string key source substring loc string nls key length nls get replacement string getreplacementstring file name filename key buffer append replacement mode replacementmode replacement mode replacementmode loc replacement mode replacementmode buffer append buffer to string tostring implementation method values samp plugin class pluginclass samp samp plugin id pluginid samp samp plugin name pluginname samp i template section itemplatesection get replacement string getreplacementstring string string string get replacement string getreplacementstring string file name filename string key string result get key value getkeyvalue key result result key string get key value getkeyvalue string key f model fmodel todo splash broken needed underlying model translated parameters defined key equals key plugin f model fmodel i plugin model ipluginmodel i plugin iplugin plugin i plugin iplugin f model fmodel get plugin base getpluginbase plugin get class name getclassname todo splash broken needed underlying model translated parameters defined key equals key activator simple f model fmodel i plugin model ipluginmodel i plugin iplugin plugin i plugin iplugin f model fmodel get plugin base getpluginbase string qualified plugin get class name getclassname qualified last dot lastdot qualified last index of lastindexof last dot lastdot last dot lastdot qualified length qualified substring last dot lastdot qualified key equals key plugin f plugin d fpluginid implementation work i plugin base ipluginbase plugin f model fmodel get plugin base getpluginbase plugin get id getid todo splash broken needed underlying model translated parameters defined key equals key plugin i plugin base ipluginbase plugin f model fmodel get plugin base getpluginbase plugin get translated name gettranslatedname key equals key f model fmodel i plugin model ipluginmodel f package fpackage implementation work i plugin iplugin plugin i plugin iplugin f model fmodel get plugin base getpluginbase string qualified plugin get class name getclassname qualified last dot lastdot qualified last index of lastindexof last dot lastdot qualified substring last dot lastdot qualified input stream inputstream get processed stream getprocessedstream string file name filename input stream inputstream stream binary io exception ioexception core exception coreexception binary stream input stream reader inputstreamreader reader input stream reader inputstreamreader stream buf size bufsize cbuffer buf size bufsize read string buffer stringbuffer key buffer keybuffer string buffer stringbuffer string buffer stringbuffer out buffer outbuffer string buffer stringbuffer string buffer stringbuffer pre buffer prebuffer string buffer stringbuffer new line newline control stack controlstack pre stack prestack control stack controlstack pre stack prestack set value provider setvalueprovider replacement mode replacementmode preprocessor mode preprocessormode escape read read reader read cbuffer read cbuffer escape string buffer stringbuffer buf preprocessor mode preprocessormode pre buffer prebuffer out buffer outbuffer buf append escape new line newline preprocessor preprocessor mode preprocessormode pre buffer prebuffer delete pre buffer prebuffer length preprocessor mode preprocessormode escape preprocessor mode preprocessormode new line newline string pre buffer prebuffer to string tostring trim pre stack prestack process line processline pre buffer prebuffer append pre stack prestack get current state getcurrentstate replacement mode replacementmode replacement mode replacementmode string key key buffer keybuffer to string tostring string key length get replacement string getreplacementstring file name filename key out buffer outbuffer append key buffer keybuffer delete key buffer keybuffer length replacement mode replacementmode replacement mode replacementmode key buffer keybuffer append out buffer outbuffer append new line newline new line newline byte array input stream bytearrayinputstream out buffer outbuffer to string tostring get bytes getbytes f project fproject get default charset getdefaultcharset string get directory candidates getdirectorycandidates version get target version gettargetversion array list arraylist string result array list arraylist version result add templates get section id getsectionid version result add templates get section id getsectionid version result add templates get section id getsectionid version result add templates get section id getsectionid result to array toarray string result size string get section id getsectionid i splash handler constants isplashhandlerconstants unqualified extension get target version gettargetversion i plugin base ipluginbase plugin f model fmodel get plugin base getpluginbase plugin i bundle plugin base ibundlepluginbase parse double parsedouble i bundle plugin base ibundlepluginbase plugin get target version gettargetversion number format exception numberformatexception target platform helper targetplatformhelper get target version gettargetversion