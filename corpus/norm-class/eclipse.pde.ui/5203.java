copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core java java net malformedurlexception java net url java util org eclipse core runtime org eclipse core variables i string variable manager istringvariablemanager org eclipse core variables variables plugin variablesplugin org eclipse osgi service data location datalocation location org eclipse pde core plugin target platform targetplatform org eclipse update config urator configurator configurator utils configuratorutils org eclipse update config urator configurator i platform configuration iplatformconfiguration suppress warnings suppresswarnings deprecation plugin path finder pluginpathfinder pde supports searching platform xml plug feature list ings listings nls string url property org eclipse update resolution url nls string empty string param platform home platformhome param link file linkfile param features plugins features path plugins features directory extension site string get site path getsitepath string platform home platformhome file link file linkfile features string prefix path platform home platformhome remove last segments removelastsegments to string tostring properties properties properties file input stream fileinputstream fis file input stream fileinputstream link file linkfile properties load fis fis close nls string path properties get property getproperty path path path path is absolute isabsolute path prefix i path ipath separator path path i path ipath separator eclipse nls i path ipath separator features nls path nls features nls path plugins file path exists path io exception ioexception param platform home platformhome param features plugin sites feature sites array plugins features files file get sites getsites string platform home platformhome features hash set hashset file sites hash set hashset file nls nls file file file platform home platformhome features features plugins features file exists file file platform home platformhome file exists sites add file nls file link files linkfiles file platform home platformhome i path ipath separator links list files listfiles link files linkfiles link files linkfiles length string path get site path getsitepath platform home platformhome link files linkfiles features path sites add file path features plugins folder linked files location sites is empty isempty file file platform home platformhome file exists sites add file sites to array toarray file sites size attempts find plugin paths target platform string location called pde confirm test match i target platform service itargetplatformservice param platform home platformhome target platform location param installed only installedonly check bundles info configuration file determine bundles installed bundles simply exist plugins folder list url plug locations url get plugin paths getpluginpaths string platform home platformhome installed only installedonly don care installed bundles simply scan location installed only installedonly scan locations scanlocations get sites getsites platform home platformhome find bundles info installed bundles url urls path platform home platformhome equals path target platform targetplatform get default location getdefaultlocation pointing install actual configuration area location config area configarea platform get configuration location getconfigurationlocation config area configarea urls utils read bundles txt readbundlestxt platform home platformhome config area configarea geturl shared location parent urls config area configarea get parent location getparentlocation urls utils read bundles txt readbundlestxt platform home platformhome config area configarea get parent location getparentlocation geturl pointing folder guess configuration area nls file configuration area configurationarea file platform home platformhome configuration configuration area configurationarea exists urls utils read bundles txt readbundlestxt platform home platformhome configuration area configurationarea tourl malformedurlexception pde core pdecore log urls urls path platform home platformhome equals path target platform targetplatform get default location getdefaultlocation is dev launch mode isdevlaunchmode configurator utils configuratorutils get current platform configuration getcurrentplatformconfiguration get plugin path getpluginpath getplatformxmlpaths platform home platformhome url get feature paths getfeaturepaths string platform home platformhome getplatformxmlpaths platform home platformhome returns list file ur ls urls plug ins features platform xml file directory plugins features platform xml param platform home platformhome base location installation search platform xml param find features findfeatures code code paths features paths plug ins list url paths plug ins features empty platform xml entries directory valid files url getplatformxmlpaths string platform home platformhome find features findfeatures file file get platform file getplatformfile platform home platformhome file string path platform home platformhome to file tofile tourl to external form toexternalform system set property setproperty url property i platform configuration iplatformconfiguration config configurator utils configuratorutils get platform configuration getplatformconfiguration file tourl get configured sites paths getconfiguredsitespaths platform home platformhome config find features findfeatures system set property setproperty url property empty string malformedurlexception io exception ioexception scan locations scanlocations get sites getsites platform home platformhome find features findfeatures returns file object representing platform xml file file representing platform xml code code file get platform file getplatformfile string platform home platformhome nls string location system get property getproperty org eclipse pde platform location file file location i string variable manager istringvariablemanager manager variables plugin variablesplugin get default getdefault get string variable manager getstringvariablemanager location manager perform string substitution performstringsubstitution location path path path location path is absolute isabsolute file path to file tofile file file platform home platformhome location file exists file core exception coreexception pde core pdecore log nls file file platform home platformhome configuration org eclipse update platform xml file exists file url get configured sites paths getconfiguredsitespaths string platform home platformhome i platform configuration iplatformconfiguration configuration features nls nls url install plugins installplugins scan locations scanlocations file file platform home platformhome features features plugins url extension plugins extensionplugins get extension plugin ls getextensionpluginurls configuration features url url install plugins installplugins length extension plugins extensionplugins length system arraycopy install plugins installplugins install plugins installplugins length system arraycopy extension plugins extensionplugins install plugins installplugins length extension plugins extensionplugins length param config param features features plugins ur ls urls features plugins site url get extension plugin ls getextensionpluginurls i platform configuration iplatformconfiguration config features array list arraylist url extension plugins extensionplugins array list arraylist url i platform configuration iplatformconfiguration i site entry isiteentry sites config get configured sites getconfiguredsites sites length url url sites geturl nls file equals ignore case equalsignorecase url get protocol getprotocol string entries features entries sites get features getfeatures entries sites get plugins getplugins entries length extension plugins extensionplugins add file url get file getfile entries tourl malformedurlexception extension plugins extensionplugins to array toarray url extension plugins extensionplugins size scan plugin feature directories jars existence param sites ur ls urls plugins features url scan locations scanlocations file sites hash set hashset url result hash set hashset url sites length sites exists file children sites list files listfiles children children length result add children tourl malformedurlexception result to array toarray url result size is dev launch mode isdevlaunchmode nls get boolean getboolean eclipse pde launch string args platform get application args getapplicationargs args length nls args equals pde launch pdelaunch