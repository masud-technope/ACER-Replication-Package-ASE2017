copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core util java java util java util jar jar file jarfile java util zip zip entry zipentry java util zip zip file zipfile org eclipse core resources org eclipse core runtime org eclipse jdt core org eclipse osgi service plugin conversion pluginconversion plugin conversion exception pluginconversionexception org eclipse osgi service plugin conversion pluginconversion plugin converter pluginconverter org eclipse osgi util manifest element manifestelement org eclipse osgi util nls org eclipse pde core build i build ibuild org eclipse pde core build i build entry ibuildentry org eclipse pde internal core org eclipse pde internal core build workspace build model workspacebuildmodel org eclipse pde internal core ibundle i manifest header imanifestheader org eclipse pde internal core project pde project pdeproject org osgi framework bundle exception bundleexception org osgi framework constants manifest utils manifestutils manifest header syntax version jar manifest os gi osgi specification header manifest typically nls string manifest version manifest version nls string manifest list separator nls string manifest separator manifest max line maxline status code returned core exception style plug manifest converted link plugin converter pluginconverter service status code plugin converter unavailable status code returned core exception manifest file required bundle symbolic name symbolicname header status code bundle manifest utility method parse bundle manifest dictionary bundle directory archive location manifest entries plugin xml fragment xml checked style plug plugin xml converted link plugin converter pluginconverter service thrown core exception status code link status code plugin converter unavailable special processing method called dev mode workspace returned map passed link target weaver targetweaver weave manifest weavemanifest map bundle classpath corrected method called org eclipse pde api tools internal model bundle component bundlecomponent get manifest getmanifest os gi osgi running load manifest bundle todo method removed favour caches manifest contents caching worthwhile calling code manifest element manifestelement parse manifest parsemanifest code takes trivial time repeat calls file param bundle location bundlelocation root location bundle archive file directory map bundle manifest properties core exception coreexception manifest invalid syntax missing problem converting style plug map string string load manifest loadmanifest file bundle location bundlelocation core exception coreexception check file archive directory bundle location bundlelocation is file isfile zip file zipfile jar file jarfile input stream inputstream stream jar file jarfile zip file zipfile bundle location bundlelocation zip file zipfile open read check manifest zip entry zipentry manifest entry manifestentry jar file jarfile get entry getentry jar file jarfile manifest manifest entry manifestentry stream jar file jarfile get input stream getinputstream manifest entry manifestentry stream map string string map manifest element manifestelement parse bundle manifest parsebundlemanifest stream symbolic required manifest entry bundle map map contains key containskey constants bundle symbolicname map manifest was n wasn good check plugin xml fragment xml zip entry zipentry plugin entry pluginentry jar file jarfile get entry getentry i core constants icoreconstants plugin filename descriptor plugin entry pluginentry plugin entry pluginentry jar file jarfile get entry getentry i core constants icoreconstants fragment filename descriptor plugin entry pluginentry map string string map loadpluginxml bundle location bundlelocation map map contains key containskey constants bundle symbolicname map close zip file and stream closezipfileandstream stream jar file jarfile check manifest file file file bundle location bundlelocation jar file jarfile manifest file exists input stream inputstream stream stream file input stream fileinputstream file map string string map manifest element manifestelement parse bundle manifest parsebundlemanifest stream hash map hashmap string string map map contains key containskey constants bundle symbolicname map stream stream close manifest was n wasn good check plugin xml fragment xml file pxml file bundle location bundlelocation i core constants icoreconstants plugin filename descriptor file fxml file bundle location bundlelocation i core constants icoreconstants fragment filename descriptor pxml exists fxml exists map string string map loadpluginxml bundle location bundlelocation map map contains key containskey constants bundle symbolicname map bundle manifest plugin xml core exception coreexception status i status istatus error pde core pdecore plugin status code bundle manifest nls bind util messages utilmessages error reading manifest errorreadingmanifest bundle location bundlelocation get absolute path getabsolutepath bundle exception bundleexception core exception coreexception status i status istatus error pde core pdecore plugin nls bind util messages utilmessages error reading manifest errorreadingmanifest bundle location bundlelocation get absolute path getabsolutepath io exception ioexception core exception coreexception status i status istatus error pde core pdecore plugin nls bind util messages utilmessages error reading manifest errorreadingmanifest bundle location bundlelocation get absolute path getabsolutepath os gi osgi plugin converter pluginconverter generate manifest project attempt refresh project complete plugin xml converted link plugin converter pluginconverter service thrown core exception status code link status code plugin converter unavailable special processing param project project convert param target version targetversion runtime version converted manifest targeted param dev properties devproperties dictionary development time classpath properties dictionary mapping plugin development time classpath development time classpath properties core exception coreexception problem converting manifest compatibility fragment hosting converter service converttoosgiformat i project iproject project string target version targetversion dictionary string string dev properties devproperties core exception coreexception file output file outputfile file pde project pdeproject get manifest getmanifest project get location getlocation toosstring file input file inputfile file project get location getlocation toosstring plugin converter pluginconverter converter plugin converter pluginconverter pde core pdecore get default getdefault acquire service acquireservice plugin converter pluginconverter get name getname converter core exception coreexception status i status istatus error pde core pdecore plugin status code plugin converter unavailable nls bind util messages utilmessages manifest utils manifestutils need comp at fragment to convert manifest file needcompatfragmenttoconvertmanifestfile project get location getlocation converter convert manifest convertmanifest input file inputfile output file outputfile target version targetversion dev properties devproperties plugin conversion exception pluginconversionexception core exception coreexception status i status istatus error pde core pdecore plugin nls bind util messages utilmessages error reading old style manifest errorreadingoldstylemanifest input file inputfile get absolute path getabsolutepath project refresh local refreshlocal i resource iresource depth infinite core exception coreexception i package fragment root ipackagefragmentroot find package fragment roots findpackagefragmentroots i manifest header imanifestheader header i project iproject project i java project ijavaproject java project javaproject java core javacore create project string libs header header get value getvalue nls libs string nls libs header get value getvalue split i build ibuild build get build getbuild project build java project javaproject get package fragment roots getpackagefragmentroots java model exception javamodelexception i package fragment root ipackagefragmentroot list i package fragment root ipackagefragmentroot pkg frag roots pkgfragroots linked list linkedlist i package fragment root ipackagefragmentroot libs length string lib libs https bugs eclipse org bugs bug cgi i package fragment root ipackagefragmentroot root nls lib equals root java project javaproject get package fragment root getpackagefragmentroot project get file getfile lib illegal argument exception illegalargumentexception i package fragment root ipackagefragmentroot root root exists pkg frag roots pkgfragroots add root i build entry ibuildentry entry nls build get entry getentry nls source lib entry string tokens entry get tokens gettokens tokens length i resource iresource resource project find member findmember tokens resource root java project javaproject get package fragment root getpackagefragmentroot resource root root exists pkg frag roots pkgfragroots add root pkg frag roots pkgfragroots to array toarray i package fragment root ipackagefragmentroot pkg frag roots pkgfragroots size is immediate root isimmediateroot i package fragment root ipackagefragmentroot root java model exception javamodelexception kind root get kind getkind kind i package fragment root ipackagefragmentroot source kind i package fragment root ipackagefragmentroot binary root is external isexternal writes manifest file stream orders manifest expected order flush output close stream param manifest to write manifesttowrite manifest headers write stream param stream write output io exception ioexception problem stream write manifest writemanifest map string string manifest to write manifesttowrite writer io exception ioexception replaces event ual eventual existing file manifest to write manifesttowrite hashtable string string manifest to write manifesttowrite manifest version header os gi osgi header jdk jar specification write entry writeentry manifest version manifest to write manifesttowrite remove manifest version attempt write bundle manifest version manifestversion header exists bug write entry writeentry constants bundle manifest version manifestversion manifest to write manifesttowrite remove constants bundle manifest version manifestversion write entry writeentry constants bundle manifest to write manifesttowrite remove constants bundle write entry writeentry constants bundle symbolicname manifest to write manifesttowrite remove constants bundle symbolicname write entry writeentry constants bundle version manifest to write manifesttowrite remove constants bundle version write entry writeentry constants bundle classpath manifest to write manifesttowrite remove constants bundle classpath write entry writeentry constants bundle activator manifest to write manifesttowrite remove constants bundle activator write entry writeentry constants bundle vendor manifest to write manifesttowrite remove constants bundle vendor write entry writeentry constants fragment host manifest to write manifesttowrite remove constants fragment host write entry writeentry constants bundle localization manifest to write manifesttowrite remove constants bundle localization write entry writeentry constants export manifest to write manifesttowrite remove constants export write entry writeentry i core constants icoreconstants provide manifest to write manifesttowrite remove i core constants icoreconstants provide write entry writeentry constants require bundle manifest to write manifesttowrite remove constants require bundle iterator manifest to write manifesttowrite key set keyset iterator has next hasnext string key string write entry writeentry key manifest to write manifesttowrite key flush i build ibuild get build getbuild i project iproject project i file ifile build props buildprops pde project pdeproject get build properties getbuildproperties project build props buildprops exists workspace build model workspacebuildmodel model workspace build model workspacebuildmodel build props buildprops model get build getbuild parses style plug fragment xml definition file dictionary file zip archive directory existence plugin xml fragment xml checked method plugin xml converted link plugin converter pluginconverter service thrown core exception status code link status code plugin converter unavailable special processing param plugin location pluginlocation location bundle archive file directory bundle manifest dictionary code code core exception coreexception manifest invalid syntax map string string loadpluginxml file plugin location pluginlocation core exception coreexception called api tools os gi osgi running status pde core pdecore get default getdefault core exception coreexception status i status istatus error pde core pdecore plugin status code plugin converter unavailable util messages utilmessages manifest utils manifestutils plugin converter only available with gi pluginconverteronlyavailablewithosgi plugin converter pluginconverter converter plugin converter pluginconverter pde core pdecore get default getdefault acquire service acquireservice plugin converter pluginconverter get name getname converter core exception coreexception status i status istatus error pde core pdecore plugin status code plugin converter unavailable nls bind util messages utilmessages manifest utils manifestutils need comp at fragment to convert manifest needcompatfragmenttoconvertmanifest plugin location pluginlocation to string tostring dictionary string string convert convert converter convert manifest convertmanifest plugin location pluginlocation plugin conversion exception pluginconversionexception core exception coreexception status i status istatus error pde core pdecore plugin nls bind util messages utilmessages error reading old style manifest errorreadingoldstylemanifest plugin location pluginlocation get absolute path getabsolutepath convert core exception coreexception status i status istatus error pde core pdecore plugin nls bind util messages utilmessages error reading old style manifest errorreadingoldstylemanifest plugin location pluginlocation get absolute path getabsolutepath map string string map hash map hashmap string string convert size enumeration string convert has more elements hasmoreelements string key next element nextelement map key convert key map closes stream file param stream param jar file jarfile close zip file and stream closezipfileandstream input stream inputstream stream zip file zipfile jar file jarfile stream stream close io exception ioexception pde core pdecore log jar file jarfile jar file jarfile close io exception ioexception pde core pdecore log write entry writeentry writer string key string io exception ioexception length nls write split on comma splitoncomma key write string split on comma splitoncomma string length manifest max line maxline index of indexof manifest separator assume split string values manifest element manifestelement get array from list getarrayfromlist values values length string buffer stringbuffer string buffer stringbuffer length values length manifest list separator length values length append values append manifest list separator append values values length to string tostring