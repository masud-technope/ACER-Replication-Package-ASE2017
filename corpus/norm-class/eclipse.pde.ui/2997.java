copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation code corporation ongoing enhancements les j ones jones lesojones gamil bug org eclipse pde internal wizards tools java lang reflect invocation target exception invocationtargetexception java util array list arraylist org eclipse core resources i file ifile org eclipse core resources i project iproject org eclipse core runtime org eclipse jdt core org eclipse pde core i base model ibasemodel org eclipse pde core build i build ibuild org eclipse pde core build i build entry ibuildentry org eclipse pde core plugin org eclipse pde internal core org eclipse pde internal core build workspace build model workspacebuildmodel org eclipse pde internal core bundle workspace bundle plugin model workspacebundlepluginmodel org eclipse pde internal core ibundle i bundle ibundle org eclipse pde internal core ibundle i bundle plugin model base ibundlepluginmodelbase org eclipse pde internal core natures pde org eclipse pde internal core project pde project pdeproject org eclipse pde internal core util core utility coreutility org eclipse pde internal core util id util idutil org eclipse pde internal pde plugin pdeplugin org eclipse pde internal pde ui messages pdeuimessages org eclipse pde internal util model modification modelmodification org eclipse pde internal util pde model utility pdemodelutility org eclipse actions workspace modify operation workspacemodifyoperation org osgi framework constants operation convert normal workspace project plug project code main ref actored refactored copied amendment org eclipse pde internal wizards tool converted projects page convertedprojectspage convert project to plugin operation convertprojecttopluginoperation workspace modify operation workspacemodifyoperation i project iproject projects to convert projectstoconvert enable api analysis enableapianalysis string f library name flibraryname string f src entries fsrcentries string f lib entries flibentries workspace operation convert project plug project param the projects to convert theprojectstoconvert project converted param enable api analysis enableapianalysis api tooling analysis projects convert project to plugin operation convertprojecttopluginoperation i project iproject the projects to convert theprojectstoconvert enable api analysis enableapianalysis projects to convert projectstoconvert the projects to convert theprojectstoconvert enable api analysis enableapianalysis enable api analysis enableapianalysis convert normal java project plug project param monitor progress monitor override execute i progress monitor iprogressmonitor monitor core exception coreexception invocation target exception invocationtargetexception interrupted exception interruptedexception monitor begin task begintask pde ui messages pdeuimessages converted project wizard convertedprojectwizard converting projects to convert projectstoconvert length projects to convert projectstoconvert length i project iproject project to convert projecttoconvert projects to convert projectstoconvert convert project convertproject project to convert projecttoconvert monitor monitor worked core exception coreexception pde plugin pdeplugin log exception logexception monitor convert project convertproject i project iproject project to convert projecttoconvert i progress monitor iprogressmonitor monitor core exception coreexception properly project to convert projecttoconvert project to convert projecttoconvert exists nature check project to convert projecttoconvert has nature hasnature pde plugin nature core utility coreutility add nature to project addnaturetoproject project to convert projecttoconvert pde plugin nature monitor setup api tooling requires java nature enable api analysis enableapianalysis project to convert projecttoconvert has nature hasnature java core javacore nature core utility coreutility add nature to project addnaturetoproject project to convert projecttoconvert java core javacore nature monitor nls core utility coreutility add nature to project addnaturetoproject project to convert projecttoconvert org eclipse pde api tools api analysis nature apianalysisnature monitor load classpath entries loadclasspathentries project to convert projecttoconvert monitor load library name loadlibraryname project to convert projecttoconvert create manifest file createmanifestfile pde project pdeproject get manifest getmanifest project to convert projecttoconvert monitor i file ifile build file buildfile pde project pdeproject get build properties getbuildproperties project to convert projecttoconvert build file buildfile exists workspace build model workspacebuildmodel model workspace build model workspacebuildmodel build file buildfile i build ibuild build model get build getbuild i build entry ibuildentry entry model get factory getfactory create entry createentry i build entry ibuildentry bin includes pde project pdeproject get plugin xml getpluginxml project to convert projecttoconvert exists entry add token addtoken i core constants icoreconstants plugin filename descriptor pde project pdeproject get manifest getmanifest project to convert projecttoconvert exists entry add token addtoken i core constants icoreconstants manifest folder f lib entries flibentries length entry add token addtoken f lib entries flibentries f src entries fsrcentries length entry add token addtoken f library name flibraryname i build entry ibuildentry source model get factory getfactory create entry createentry i build entry ibuildentry jar prefix f library name flibraryname f src entries fsrcentries length source add token addtoken f src entries fsrcentries build add source entry get tokens gettokens length build add entry model save load classpath entries loadclasspathentries i project iproject project i progress monitor iprogressmonitor monitor i java project ijavaproject java project javaproject java core javacore create project i classpath entry iclasspathentry current class path currentclasspath i classpath entry iclasspathentry array list arraylist string sources array list arraylist array list arraylist string libraries array list arraylist current class path currentclasspath java project javaproject get raw classpath getrawclasspath java model exception javamodelexception current class path currentclasspath length content type contenttype current class path currentclasspath get entry kind getentrykind content type contenttype i classpath entry iclasspathentry cpe source string relative path relativepath get relative path getrelativepath current class path currentclasspath project nls relative path relativepath equals nls sources add sources add nls relative path relativepath nls content type contenttype i classpath entry iclasspathentry cpe library string path get relative path getrelativepath current class path currentclasspath project path length libraries add path nls libraries add nls f src entries fsrcentries sources to array toarray string sources size f lib entries flibentries libraries to array toarray string libraries size i classpath entry iclasspathentry class path classpath i classpath entry iclasspathentry current class path currentclasspath length system arraycopy current class path currentclasspath class path classpath current class path currentclasspath length class path classpath class path classpath length classpath computer classpathcomputer create container entry createcontainerentry java project javaproject set raw classpath setrawclasspath class path classpath monitor java model exception javamodelexception string get relative path getrelativepath i classpath entry iclasspathentry cpe i project iproject project i path ipath path project get file getfile cpe get path getpath get project relative path getprojectrelativepath path remove first segments removefirstsegments to string tostring load library name loadlibraryname i project iproject project is old target isoldtarget f lib entries flibentries length f src entries fsrcentries length string lib name libname project get name getname nls lib name libname last index of lastindexof lib name libname lib name libname substring nls f library name flibraryname lib name libname jar nls f library name flibraryname org anize exports organizeexports i project iproject project pde model utility pdemodelutility modify model modifymodel model modification modelmodification pde project pdeproject get manifest getmanifest project override modify model modifymodel i base model ibasemodel model i progress monitor iprogressmonitor monitor core exception coreexception model i bundle plugin model base ibundlepluginmodelbase organize manifest organizemanifest org anize export packages organizeexportpackages i bundle plugin model base ibundlepluginmodelbase model get bundle model getbundlemodel get bundle getbundle project string create initial name createinitialname string loc last index of lastindexof loc string buffer stringbuffer buf string buffer stringbuffer substring loc buf set char at setcharat character to upper case touppercase buf char at charat buf to string tostring create manifest file createmanifestfile i file ifile file i progress monitor iprogressmonitor monitor core exception coreexception workspace bundle plugin model workspacebundlepluginmodel model workspace bundle plugin model workspacebundlepluginmodel file model load i bundle ibundle plugin bundle pluginbundle model get bundle model getbundlemodel get bundle getbundle string plugin id pluginid plugin bundle pluginbundle get header getheader constants bundle symbolicname string plugin name pluginname plugin bundle pluginbundle get header getheader constants bundle string plugin version pluginversion plugin bundle pluginbundle get header getheader constants bundle version missing info missinginfo plugin id pluginid plugin name pluginname plugin version pluginversion exists create plugin id pluginid plugin id pluginid id util idutil get valid id getvalidid file get project getproject get name getname version number exists create plugin version pluginversion nls plugin version pluginversion qualifier exists create pluginid plugin name pluginname plugin name pluginname create initial name createinitialname plugin id pluginid plugin bundle pluginbundle set header setheader constants bundle symbolicname plugin id pluginid plugin bundle pluginbundle set header setheader constants bundle version plugin version pluginversion plugin bundle pluginbundle set header setheader constants bundle plugin name pluginname missing info missinginfo i plugin model factory ipluginmodelfactory factory model get plugin factory getpluginfactory i plugin base ipluginbase base model get plugin base getpluginbase nls f library name flibraryname f library name flibraryname equals i plugin library ipluginlibrary library factory create library createlibrary library set name setname f library name flibraryname library set exported setexported base add library f lib entries flibentries length i plugin library ipluginlibrary library factory create library createlibrary library set name setname f lib entries flibentries library set exported setexported base add library target platform helper targetplatformhelper get target version gettargetversion nls plugin bundle pluginbundle set header setheader nls constants bundle manifest version manifestversion nls model save monitor org anize exports organizeexports file get project getproject is old target isoldtarget target platform helper targetplatformhelper get target version gettargetversion