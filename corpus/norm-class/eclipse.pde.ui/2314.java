copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde tests target java java net java util hash set hashset java util junit framework org eclipse core resources org eclipse core runtime org eclipse core variables variables plugin variablesplugin org eclipse equinox metadata i installable unit iinstallableunit org eclipse jdt launching java runtime javaruntime org eclipse pde core plugin target platform targetplatform org eclipse pde core target org eclipse pde internal core target org eclipse pde tests pde tests plugin pdetestsplugin org osgi framework service reference servicereference tests persistence target definitions tests memento creation reading target files writing model target definition persistence tests targetdefinitionpersistencetests test case testcase test suite test suite testsuite target definition persistence tests targetdefinitionpersistencetests assert target definitions equal asserttargetdefinitionsequal i target definition itargetdefinition target a targeta i target definition itargetdefinition target b targetb assert true asserttrue target content equal target definition targetdefinition target a targeta is content equal iscontentequal target b targetb returns target platform service code code target platform service i target platform service itargetplatformservice get target service gettargetservice service reference servicereference reference pde tests plugin pdetestsplugin get bundle context getbundlecontext get service reference getservicereference i target platform service itargetplatformservice get name getname assert not null assertnotnull missing target platform service reference reference i target platform service itargetplatformservice pde tests plugin pdetestsplugin get bundle context getbundlecontext get service getservice reference returns resolved location bundle container param container bundle container resolved location core exception coreexception string get resolved location getresolvedlocation i target location itargetlocation container core exception coreexception container get location getlocation returns location jdt feature running host path local file system path jdt feature i path ipath get jdt feature location getjdtfeaturelocation i path ipath path path target platform targetplatform get default location getdefaultlocation path path append features file dir path to file tofile assert true asserttrue missing features directory dir exists dir is file isfile string files dir list string location string file files file starts with startswith org eclipse jdt location path append file toosstring assert not null assertnotnull missing jdt feature location path location tests res toration restoration handle target definition i file ifile core exception coreexception test workspace target handle memento testworkspacetargethandlememento core exception coreexception i target platform service itargetplatformservice service get target service gettargetservice i file ifile file resources plugin resourcesplugin get workspace getworkspace get root getroot get file getfile path exist i target handle itargethandle handle service get target gettarget file assert false assertfalse target exist handle exists string memento handle get memento getmemento assert not null assertnotnull missing memento memento i target handle itargethandle handle service get target gettarget memento assert equals assertequals restore failed handle handle i file ifile file resources plugin resourcesplugin get workspace getworkspace get root getroot get file getfile path exist i target handle itargethandle handle service get target gettarget file assert false assertfalse targets handle equals handle tests res toration restoration handle target definition local metadata core exception coreexception interrupted exception interruptedexception test local target handle memento testlocaltargethandlememento core exception coreexception interrupted exception interruptedexception i target platform service itargetplatformservice service get target service gettargetservice i target handle itargethandle handle service new target newtarget get handle gethandle assert false assertfalse target exist handle exists string memento handle get memento getmemento assert not null assertnotnull missing memento memento i target handle itargethandle handle service get target gettarget memento assert equals assertequals restore failed handle handle i target handle itargethandle handle service new target newtarget get handle gethandle assert false assertfalse targets handle equals handle tests res toration restoration handle target definition external uri core exception coreexception interrupted exception interruptedexception test external file target handle memento testexternalfiletargethandlememento core exception coreexception interrupted exception interruptedexception i target platform service itargetplatformservice service get target service gettargetservice uri uri uri uri file exist uri syntax exception urisyntaxexception i file ifile file resources plugin resourcesplugin get workspace getworkspace get root getroot get file getfile path exist i target handle itargethandle handle service get target gettarget uri assert false assertfalse target exist handle exists string memento handle get memento getmemento assert not null assertnotnull missing memento memento i target handle itargethandle handle service get target gettarget memento assert equals assertequals restore failed handle handle i file ifile file resources plugin resourcesplugin get workspace getworkspace get root getroot get file getfile path exist uri uri uri uri file file exist uri syntax exception urisyntaxexception i target handle itargethandle handle service get target gettarget uri assert false assertfalse targets handle equals handle tests complex metadata based target definition serialized xml deserialized loss data exception test per sist complex metadata definition testpersistcomplexmetadatadefinition exception i target definition itargetdefinition definition a definitiona get target service gettargetservice new target newtarget init complex def init on initcomplexdefiniton definition a definitiona byte array output stream bytearrayoutputstream output stream outputstream byte array output stream bytearrayoutputstream target definition persistence helper targetdefinitionpersistencehelper persistxml definition a definitiona output stream outputstream i target definition itargetdefinition definition b definitionb get target service gettargetservice new target newtarget byte array input stream bytearrayinputstream input stream inputstream byte array input stream bytearrayinputstream output stream outputstream to byte array tobytearray target definition persistence helper targetdefinitionpersistencehelper initfromxml definition b definitionb input stream inputstream assert target definitions equal asserttargetdefinitionsequal definition a definitiona definition b definitionb tests complex workspace file based target definition serialized xml deserialized loss data exception test per sist complex workspace definition testpersistcomplexworkspacedefinition exception i project iproject project resources plugin resourcesplugin get workspace getworkspace get root getroot get project getproject target definition persistence tests targetdefinitionpersistencetests project exists project create assert true asserttrue create test project project exists project open assert true asserttrue open test project project is open isopen i file ifile target project get file getfile system current time millis currenttimemillis to string tostring target i target definition itargetdefinition definition a definitiona get target service gettargetservice get target gettarget target get target definition gettargetdefinition init complex def init on initcomplexdefiniton definition a definitiona get target service gettargetservice save target definition savetargetdefinition definition a definitiona i target definition itargetdefinition definition b definitionb get target service gettargetservice get target gettarget target get target definition gettargetdefinition assert target definitions equal asserttargetdefinitionsequal definition a definitiona definition b definitionb project exists project delete assert false assertfalse delete test project project exists init complex def init on initcomplexdefiniton i target definition itargetdefinition definition uri syntax exception urisyntaxexception definition set name setname definition setos definition setws definition set arch setarch arch definition setnl definition set program arguments setprogramarguments program nargs definition setvmarguments nargs definition setjrecontainer java runtime javaruntime newdefaultjrecontainerpath name version descriptor nameversiondescriptor implicit name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse jdt launching name version descriptor nameversiondescriptor org eclipse jdt debug definition set implicit dependencies setimplicitdependencies implicit directory container i target location itargetlocation dir container dircontainer get target service gettargetservice new directory location newdirectorylocation target platform targetplatform get default location getdefaultlocation plugins profile container specific config area i target location itargetlocation profile container profilecontainer get target service gettargetservice new profile location newprofilelocation target platform targetplatform get default location getdefaultlocation file platform get configuration location getconfigurationlocation geturl get file getfile get absolute path getabsolutepath feature container specific version i path ipath location get jdt feature location getjdtfeaturelocation string segment location last segment lastsegment segment index of indexof assert true asserttrue missing version string version segment substring i target location itargetlocation feature container featurecontainer get target service gettargetservice new feature location newfeaturelocation eclipse org eclipse jdt version profile container restricted bundles i target location itargetlocation restricted profile container restrictedprofilecontainer get target service gettargetservice new profile location newprofilelocation target platform targetplatform get default location getdefaultlocation site bundle containers settings iu bundle container iubundlecontainer site container sitecontainer iu bundle container iubundlecontainer get target service gettargetservice newiulocation i installable unit iinstallableunit uri uri test uri testuri uri test uri testuri iu bundle container iubundlecontainer include environments iu bundle container iubundlecontainer site container sitecontainer iu bundle container iubundlecontainer get target service gettargetservice newiulocation string unit unit string uri uri test uri testuri uri test uri testuri iu bundle container iubundlecontainer include required name version descriptor nameversiondescriptor restrictions name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse jdt launching name version descriptor nameversiondescriptor org eclipse jdt debug definition set included setincluded restrictions definition set target locations settargetlocations i target location itargetlocation dir container dircontainer profile container profilecontainer feature container featurecontainer restricted profile container restrictedprofilecontainer site container sitecontainer site container sitecontainer tests empty target definition serialized xml deserialized loss data exception test per sist empty definition testpersistemptydefinition exception i target definition itargetdefinition definition a definitiona get target service gettargetservice new target newtarget byte array output stream bytearrayoutputstream output stream outputstream byte array output stream bytearrayoutputstream target definition persistence helper targetdefinitionpersistencehelper persistxml definition a definitiona output stream outputstream i target definition itargetdefinition definition b definitionb get target service gettargetservice new target newtarget byte array input stream bytearrayinputstream input stream inputstream byte array input stream bytearrayinputstream output stream outputstream to byte array tobytearray target definition persistence helper targetdefinitionpersistencehelper initfromxml definition b definitionb input stream inputstream assert target definitions equal asserttargetdefinitionsequal definition a definitiona definition b definitionb reads target definition file tests targets target files location note target appended param target definition exception i target definition itargetdefinition read old target readoldtarget string exception url url pde tests plugin pdetestsplugin get bundle context getbundlecontext get bundle getbundle get entry getentry tests targets target files trgt file file file file locator filelocator tofileurl url get file getfile i target definition itargetdefinition target get target service gettargetservice new target newtarget file input stream fileinputstream stream file input stream fileinputstream file target definition persistence helper targetdefinitionpersistencehelper initfromxml target stream stream close target tests serialize style target definition file version retrieve correct contents exception test read old basic target file testreadoldbasictargetfile exception i target definition itargetdefinition target read old target readoldtarget basic assert equals assertequals wrong basic target get name getname assert null assertnull target get arch getarch assert null assertnull target getos assert null assertnull target getnl assert null assertnull target getws assert null assertnull target get program arguments getprogramarguments assert null assertnull target getvmarguments assert null assertnull target get implicit dependencies getimplicitdependencies assert null assertnull target getjrecontainer i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number bundles containers length assert true asserttrue container profile container containers profile bundle container profilebundlecontainer assert equals assertequals wrong location path target platform targetplatform get default location getdefaultlocation path get resolved location getresolvedlocation containers tests serialize style target definition file version retrieve correct contents exception test read old basic directory target file testreadoldbasicdirectorytargetfile exception i target definition itargetdefinition target read old target readoldtarget directory assert equals assertequals wrong directory target get name getname assert null assertnull target get arch getarch assert null assertnull target getos assert null assertnull target getnl assert null assertnull target getws assert null assertnull target get program arguments getprogramarguments assert null assertnull target getvmarguments assert null assertnull target get implicit dependencies getimplicitdependencies assert null assertnull target getjrecontainer i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number bundles containers length assert true asserttrue container directory container containers directory bundle container directorybundlecontainer assert equals assertequals wrong location path target platform targetplatform get default location getdefaultlocation append plugins path get resolved location getresolvedlocation containers tests serialize style target definition file version retrieve correct contents exception test read old specific target file testreadoldspecifictargetfile exception i target definition itargetdefinition target read old target readoldtarget specific assert equals assertequals wrong specific settings target get name getname assert equals assertequals target get arch getarch assert equals assertequals linux target getos assert equals assertequals target getnl assert equals assertequals gtk target getws assert equals assertequals pgm pgm target get program arguments getprogramarguments assert equals assertequals dfoo bar target getvmarguments assert equals assertequals java runtime javaruntime newjrecontainerpath java runtime javaruntime get execution environments manager getexecutionenvironmentsmanager get environment getenvironment target getjrecontainer name version descriptor nameversiondescriptor infos target get implicit dependencies getimplicitdependencies assert equals assertequals wrong number implicit dependencies infos length hash set hashset name version descriptor nameversiondescriptor info infos add info get id getid assert true asserttrue missing remove org eclipse jdt debug assert true asserttrue missing remove org eclipse debug core assert true asserttrue is empty isempty i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number bundles containers length assert true asserttrue container directory container containers directory bundle container directorybundlecontainer assert equals assertequals wrong location path target platform targetplatform get default location getdefaultlocation append plugins path get resolved location getresolvedlocation containers tests serialize style target definition file version retrieve correct contents exception test read old add ition locations target file testreadoldadditionlocationstargetfile exception i target definition itargetdefinition target read old target readoldtarget additional locations additionallocations assert equals assertequals wrong additional locations target get name getname assert null assertnull target get arch getarch assert null assertnull target getos assert null assertnull target getnl assert null assertnull target getws assert null assertnull target get program arguments getprogramarguments assert null assertnull target getvmarguments assert null assertnull target getjrecontainer assert null assertnull target get implicit dependencies getimplicitdependencies i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number bundles containers length assert true asserttrue containers profile bundle container profilebundlecontainer assert true asserttrue containers directory bundle container directorybundlecontainer assert true asserttrue containers directory bundle container directorybundlecontainer assert equals assertequals wrong location path target platform targetplatform get default location getdefaultlocation path get resolved location getresolvedlocation containers string string variables plugin variablesplugin get default getdefault get string variable manager getstringvariablemanager perform string substitution performstringsubstitution workspace loc assert equals assertequals wrong additional location path string append stuff path get resolved location getresolvedlocation containers assert equals assertequals wrong additional location path target platform targetplatform get default location getdefaultlocation append dropins path get resolved location getresolvedlocation containers tests serialize style target definition file version retrieve correct contents exception test read old features target file testreadoldfeaturestargetfile exception i target definition itargetdefinition target read old target readoldtarget feature locations featurelocations assert equals assertequals wrong features target get name getname assert null assertnull target get arch getarch assert null assertnull target getos assert null assertnull target getnl assert null assertnull target getws assert null assertnull target get program arguments getprogramarguments assert null assertnull target getvmarguments assert null assertnull target getjrecontainer assert null assertnull target get implicit dependencies getimplicitdependencies i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number bundles containers length assert true asserttrue containers feature bundle container featurebundlecontainer assert true asserttrue containers feature bundle container featurebundlecontainer assert equals assertequals wrong feature location org eclipse jdt feature bundle container featurebundlecontainer containers get feature id getfeatureid assert equals assertequals wrong feature location org eclipse platform feature bundle container featurebundlecontainer containers get feature id getfeatureid tests serialize style target definition file version retrieve correct contents exception test read old restrictions target file testreadoldrestrictionstargetfile exception i target definition itargetdefinition target read old target readoldtarget restrictions assert equals assertequals wrong restrictions target get name getname assert null assertnull target get arch getarch assert null assertnull target getos assert null assertnull target getnl assert null assertnull target getws assert null assertnull target get program arguments getprogramarguments assert null assertnull target getvmarguments assert null assertnull target getjrecontainer assert null assertnull target get implicit dependencies getimplicitdependencies i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number containers containers length assert true asserttrue containers profile bundle container profilebundlecontainer assert true asserttrue containers feature bundle container featurebundlecontainer assert true asserttrue containers directory bundle container directorybundlecontainer assert equals assertequals wrong location path target platform targetplatform get default location getdefaultlocation path get resolved location getresolvedlocation containers assert equals assertequals wrong additional location org eclipse jdt feature bundle container featurebundlecontainer containers get feature id getfeatureid assert equals assertequals wrong additional location path target platform targetplatform get default location getdefaultlocation append dropins path get resolved location getresolvedlocation containers name version descriptor nameversiondescriptor restrictions name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse debug core name version descriptor nameversiondescriptor org eclipse debug name version descriptor nameversiondescriptor org eclipse jdt debug name version descriptor nameversiondescriptor org eclipse jdt debug name version descriptor nameversiondescriptor org eclipse jdt launching name version descriptor nameversiondescriptor actual target get included getincluded assert not null assertnotnull actual assert equals assertequals wrong number restrictions restrictions length actual length actual length assert equals assertequals wrong restriction restrictions actual tests serialize style target definition file version extra unsupported tags retrieve correct contents exception test read old target file with unknown tags testreadoldtargetfilewithunknowntags exception i target definition itargetdefinition target read old target readoldtarget extra tags extratags assert equals assertequals wrong restrictions target get name getname assert null assertnull target get arch getarch assert null assertnull target getos assert null assertnull target getnl assert null assertnull target getws assert null assertnull target get program arguments getprogramarguments assert null assertnull target getvmarguments assert null assertnull target getjrecontainer assert null assertnull target get implicit dependencies getimplicitdependencies i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number bundles containers length assert true asserttrue containers profile bundle container profilebundlecontainer assert true asserttrue containers feature bundle container featurebundlecontainer assert true asserttrue containers directory bundle container directorybundlecontainer assert equals assertequals wrong location path target platform targetplatform get default location getdefaultlocation path get resolved location getresolvedlocation containers assert equals assertequals wrong additional location org eclipse jdt feature bundle container featurebundlecontainer containers get feature id getfeatureid assert equals assertequals wrong additional location path target platform targetplatform get default location getdefaultlocation append dropins path get resolved location getresolvedlocation containers name version descriptor nameversiondescriptor restrictions name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse debug core name version descriptor nameversiondescriptor org eclipse debug name version descriptor nameversiondescriptor org eclipse jdt debug name version descriptor nameversiondescriptor org eclipse jdt debug name version descriptor nameversiondescriptor org eclipse jdt launching name version descriptor nameversiondescriptor actual target get included getincluded assert not null assertnotnull actual assert equals assertequals wrong number restrictions restrictions length actual length actual length assert equals assertequals wrong restriction restrictions actual tests serialize style target definition file version retrieve correct contents optional bundles exception test read old optional target file testreadoldoptionaltargetfile exception i target definition itargetdefinition target read old target readoldtarget optional assert equals assertequals wrong optional target get name getname assert null assertnull target get arch getarch assert null assertnull target getos assert null assertnull target getnl assert null assertnull target getws assert null assertnull target get program arguments getprogramarguments assert null assertnull target getvmarguments assert null assertnull target get implicit dependencies getimplicitdependencies assert null assertnull target getjrecontainer i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number bundles containers length assert true asserttrue container profile container containers profile bundle container profilebundlecontainer assert true asserttrue container profile container containers feature bundle container featurebundlecontainer assert equals assertequals wrong location path target platform targetplatform get default location getdefaultlocation path get resolved location getresolvedlocation containers assert equals assertequals wrong feature location org eclipse jdt feature bundle container featurebundlecontainer containers get feature id getfeatureid optional settings includes name version descriptor nameversiondescriptor included name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse debug core name version descriptor nameversiondescriptor org eclipse debug examples core name version descriptor nameversiondescriptor org eclipse debug examples name version descriptor nameversiondescriptor org eclipse debug name version descriptor nameversiondescriptor org eclipse jdt debug name version descriptor nameversiondescriptor org eclipse jdt debug name version descriptor nameversiondescriptor org eclipse jdt launching name version descriptor nameversiondescriptor actual target get included getincluded assert not null assertnotnull actual assert equals assertequals wrong number inc lusions inclusions included length actual length actual length assert equals assertequals wrong restriction included actual test bug content included xml specific plug ins features use all plugins useallplugins setting treat file include plug ins directory test empty content section testemptycontentsection exception i target definition itargetdefinition target read old target readoldtarget empty content emptycontent i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals wrong number bundles containers length assert true asserttrue container directory container containers directory bundle container directorybundlecontainer assert equals assertequals wrong location path target platform targetplatform get default location getdefaultlocation append plugins path get resolved location getresolvedlocation containers target resolve assert true asserttrue resolved bundles target get bundles getbundles length test bug tests target definition specifies use all plugins useallplugins ignore specific plug ins features file migration exception test migration of use all with restrictions testmigrationofuseallwithrestrictions exception i target definition itargetdefinition target read old target readoldtarget eclipse server side serverside i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals containers length validate type and location validatetypeandlocation containers profile bundle container profilebundlecontainer resource loc target platforms eclipse equinox sdk eclipse validate type and location validatetypeandlocation containers directory bundle container directorybundlecontainer resource loc target platforms eclipse delta pack eclipse validate type and location validatetypeandlocation containers directory bundle container directorybundlecontainer resource loc target platforms eclipse pde head less headless validate type and location validatetypeandlocation containers directory bundle container directorybundlecontainer resource loc target platforms eclipse test framework eclipse validate type and location validatetypeandlocation containers directory bundle container directorybundlecontainer resource loc target platforms eclipse core plugins validate type and location validatetypeandlocation containers directory bundle container directorybundlecontainer resource loc target platforms rdparty bundles valid ates validates type location bundle container param container container validate param clazz type container expected param raw location rawlocation unresolved location core exception coreexception wrong validate type and location validatetypeandlocation i target location itargetlocation container clazz string raw location rawlocation core exception coreexception assert true asserttrue clazz is instance isinstance container assert equals assertequals raw location rawlocation container get location getlocation tests increment sequence number correctly target modified contents exception test sequence number change testsequencenumberchange exception i target definition itargetdefinition target read old target readoldtarget feature locations featurelocations assert equals assertequals wrong features target get name getname target definition targetdefinition target def targetdef target definition targetdefinition target current seq no currentseqno target def targetdef get sequence number getsequencenumber target set arch setarch asssrt sequence number asssrtsequencenumber arch current seq no currentseqno target def targetdef current seq no currentseqno target def targetdef get sequence number getsequencenumber target setos win asssrt sequence number asssrtsequencenumber current seq no currentseqno target def targetdef current seq no currentseqno target def targetdef get sequence number getsequencenumber target setnl asssrt sequence number asssrtsequencenumber current seq no currentseqno target def targetdef current seq no currentseqno target def targetdef get sequence number getsequencenumber target setws carbon asssrt sequence number asssrtsequencenumber current seq no currentseqno target def targetdef i target location itargetlocation new containers newcontainers i target location itargetlocation new containers newcontainers directory bundle container directorybundlecontainer path current seq no currentseqno target def targetdef get sequence number getsequencenumber target set target locations settargetlocations new containers newcontainers asssrt sequence number asssrtsequencenumber bundle containers current seq no currentseqno target def targetdef asssrt sequence number asssrtsequencenumber string current seq no currentseqno target definition targetdefinition target def targetdef assert equals assertequals sequence number increment updating current seq no currentseqno target def targetdef get sequence number getsequencenumber test include source testincludesource exception i target definition itargetdefinition target read old target readoldtarget software site target softwaresitetarget i target location itargetlocation containers target get target locations gettargetlocations assert equals assertequals containers length assert true asserttrue containers iu bundle container iubundlecontainer iu bundle container iubundlecontainer iubc iu bundle container iubundlecontainer containers assert true asserttrue iubc get include source getincludesource