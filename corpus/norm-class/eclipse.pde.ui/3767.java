copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde api tools internal tasks java buffered writer bufferedwriter java file java file filter filefilter java file writer filewriter java io exception ioexception java print writer printwriter java util array list arraylist java util arrays java util comparator java util hash map hashmap java util list java util map javax xml parsers parser configuration exception parserconfigurationexception javax xml parsers sax parser saxparser javax xml parsers sax parser factory saxparserfactory org apache tools ant build exception buildexception org apache tools ant task org eclipse osgi util nls org eclipse pde api tools internal i api xml constants iapixmlconstants org eclipse pde api tools internal provisional api plugin apiplugin org eclipse pde api tools internal util util org xml sax attributes org xml sax sax exception saxexception org xml sax helpers default handler defaulthandler ibm icu text message format messageformat task convert reports generated api tooling apitooling analysis task html reports analysis report conversion task analysisreportconversiontask task problem string message severity problem string message severity message message severity severity string get html message gethtmlmessage string buffer stringbuffer buffer string buffer stringbuffer chars message to char array tochararray max chars length max character chars character nls buffer append nls buffer append nls buffer append nls amp nls buffer append nls quot buffer append character string value of valueof buffer override string to string tostring string buffer stringbuffer buffer string buffer stringbuffer nls buffer append problem append message append append severity string value of valueof buffer converter default handler converterdefaulthandler default handler defaulthandler string category debug report report converter default handler converterdefaulthandler debug debug debug report get report getreport report override start element startelement string uri string local name localname string attributes attributes sax exception saxexception i api xml constants iapixmlconstants element api tool report equals string componentid attributes get value getvalue i api xml constants iapixmlconstants attr component debug system println component nls string value of valueof nls componentid report report componentid i api xml constants iapixmlconstants attr category equals category attributes get value getvalue i api xml constants iapixmlconstants attr debug system println nls category nls category i api xml constants iapixmlconstants element api problem equals string message attributes get value getvalue i api xml constants iapixmlconstants attr message debug system println nls problem message nls message severity integer parse int parseint attributes get value getvalue i api xml constants iapixmlconstants attr severity debug system println nls problem severity nls severity report add problem addproblem category problem message severity i api xml constants iapixmlconstants element resolver error equals string message attributes get value getvalue i api xml constants iapixmlconstants attr message debug system println nls resolver error nls message report add problem addproblem category problem message api plugin apiplugin severity warning i api xml constants iapixmlconstants element bundle equals string bundle name bundlename attributes get value getvalue i api xml constants iapixmlconstants attr debug system println nls bundle nls bundle name bundlename report add non api bundles addnonapibundles bundle name bundlename debug i api xml constants iapixmlconstants element problem message arguments equals i api xml constants iapixmlconstants element problem message argument equals i api xml constants iapixmlconstants element api problems equals i api xml constants iapixmlconstants element problem extra argument equals i api xml constants iapixmlconstants element problem extra arguments equals system println unknown element nls string value of valueof nls report string componentid string link list string non api bundles nonapibundles map string list problem problems per categories problemspercategories report string componentid componentid componentid add non api bundles addnonapibundles string bundle name bundlename non api bundles nonapibundles non api bundles nonapibundles array list arraylist non api bundles nonapibundles add bundle name bundlename add problem addproblem string category problem problem problems per categories problemspercategories problems per categories problemspercategories hash map hashmap list problem problems list problemslist problems per categories problemspercategories category problems list problemslist problems list problemslist array list arraylist problems per categories problemspercategories category problems list problemslist problems list problemslist add problem string get non api bundles getnonapibundles non api bundles nonapibundles non api bundles nonapibundles size api bundles string non api bundles names nonapibundlesnames string non api bundles nonapibundles size non api bundles nonapibundles to array toarray non api bundles names nonapibundlesnames non api bundles names nonapibundlesnames problem get problems getproblems string category problems per categories problemspercategories problems list problem problems list problemslist problems per categories problemspercategories category size problems list problemslist problems list problemslist size size problems problem problems problem size problems list problemslist to array toarray problems problems get problem size getproblemsize string category problems per categories problemspercategories list problem problems list problemslist problems per categories problemspercategories category problems list problemslist problems list problemslist size is non api bundles report isnonapibundlesreport componentid set link setlink string link link link summary api usage number apiusagenumber bundle version number bundleversionnumber compatibility number compatibilitynumber component resolution number componentresolutionnumber string componentid string link summary report report api usage number apiusagenumber report get problem size getproblemsize api tools analysis task apitoolsanalysistask usage bundle version number bundleversionnumber report get problem size getproblemsize api tools analysis task apitoolsanalysistask bundle version compatibility number compatibilitynumber report get problem size getproblemsize api tools analysis task apitoolsanalysistask compatibility component resolution number componentresolutionnumber report get problem size getproblemsize api tools analysis task apitoolsanalysistask component resolution componentid report componentid link report link override string to string tostring nls message format messageformat format nls compatibility api usage bundle version resolution link componentid integer to string tostring compatibility number compatibilitynumber integer to string tostring api usage number apiusagenumber integer to string tostring bundle version number bundleversionnumber integer to string tostring component resolution number componentresolutionnumber link problem problems problem string api bundles string debug string html reports location htmlreportslocation file html root htmlroot file reports root reportsroot string xml reports location xmlreportslocation dump foo ter dumpfooter print writer printwriter writer writer println messages foo ter footer dump header dumpheader print writer printwriter writer report report writer println message format messageformat format messages full report task fullreporttask api problem header apiproblemheader report componentid dump summary writer println message format messageformat format messages full report task fullreporttask api problems ummary apiproblemsummary integer to string tostring report get problem size getproblemsize api tools analysis task apitoolsanalysistask compatibility integer to string tostring report get problem size getproblemsize api tools analysis task apitoolsanalysistask usage integer to string tostring report get problem size getproblemsize api tools analysis task apitoolsanalysistask bundle version report get problem size getproblemsize api tools analysis task apitoolsanalysistask component resolution writer println message format messageformat format messages full report task fullreporttask resolution details single resolutiondetailssingle report componentid integer to string tostring report get problem size getproblemsize api tools analysis task apitoolsanalysistask component resolution report get problem size getproblemsize api tools analysis task apitoolsanalysistask component resolution writer println message format messageformat format messages full report task fullreporttask resolution details resolutiondetails report componentid integer to string tostring report get problem size getproblemsize api tools analysis task apitoolsanalysistask component resolution dump index entry dumpindexentry print writer printwriter writer summary summary debug system println summary writer println message format messageformat format messages full report task fullreporttask index summary indexsummary summary componentid integer to string tostring summary compatibility number compatibilitynumber integer to string tostring summary api usage number apiusagenumber integer to string tostring summary bundle version number bundleversionnumber summary link writer println message format messageformat format messages full report task fullreporttask index summary indexsummary odd summary componentid integer to string tostring summary compatibility number compatibilitynumber integer to string tostring summary api usage number apiusagenumber integer to string tostring summary bundle version number bundleversionnumber summary link summary component resolution number componentresolutionnumber writer println message format messageformat format messages full report task fullreporttask resolution summary resolutionsummary summary componentid integer to string tostring summary component resolution number componentresolutionnumber writer println message format messageformat format messages full report task fullreporttask resolution summary resolutionsummary odd summary componentid integer to string tostring summary component resolution number componentresolutionnumber write file param reports root reportsroot param summaries param all non api bundle summary allnonapibundlesummary dump index file dumpindexfile file reports root reportsroot summary summaries summary all non api bundle summary allnonapibundlesummary nls file html file htmlfile file html reports location htmlreportslocation html print writer printwriter writer file writer filewriter file writer filewriter file writer filewriter html file htmlfile writer print writer printwriter buffered writer bufferedwriter file writer filewriter all non api bundle summary allnonapibundlesummary writer println message format messageformat format messages full report task fullreporttask index header indexheader nls bind messages full report task fullreporttask non api bundle summary nonapibundlesummary all non api bundle summary allnonapibundlesummary link writer println message format messageformat format messages full report task fullreporttask index header indexheader messages full report task fullreporttask api bundle summary apibundlesummary arrays sort summaries comparator object override compare object object summary summary summary summary summary summary summary componentid compare to compareto summary componentid max summaries length max dump index entry dumpindexentry writer summaries writer println messages full report task fullreporttask index footer indexfooter writer flush io exception ioexception build exception buildexception nls bind messages ioe xception ioexception writing html file html file htmlfile get absolute path getabsolutepath writer writer close dump non api bundles dumpnonapibundles print writer printwriter writer report report writer println messages full report task fullreporttask bundles header bundlesheader string non api bundle names nonapibundlenames report get non api bundles getnonapibundles non api bundle names nonapibundlenames length string bundle name bundlename non api bundle names nonapibundlenames writer println message format messageformat format messages full report task fullreporttask bundles entry bundlesentry bundle name bundlename writer println message format messageformat format messages full report task fullreporttask bundles entry bundlesentry odd bundle name bundlename writer println messages full report task fullreporttask bundles footer bundlesfooter dump problems dumpproblems print writer printwriter writer string category name categoryname problem problems print empty category printemptycategory problems problems length writer println message format messageformat format messages full report task fullreporttask category header categoryheader category name categoryname max problems length max problem problem problems problem severity api plugin apiplugin severity error writer println message format messageformat format messages full report task fullreporttask problem entry problementry error problem get html message gethtmlmessage api plugin apiplugin severity warning writer println message format messageformat format messages full report task fullreporttask problem entry problementry warning problem get html message gethtmlmessage problem severity api plugin apiplugin severity error writer println message format messageformat format messages full report task fullreporttask problem entry problementry odd error problem get html message gethtmlmessage api plugin apiplugin severity warning writer println message format messageformat format messages full report task fullreporttask problem entry problementry odd warning problem get html message gethtmlmessage writer println messages full report task fullreporttask category footer categoryfooter print empty category printemptycategory writer println message format messageformat format messages full report task fullreporttask category elements category name categoryname dump report dumpreport file xml file xmlfile report report create file writer generate html file xml file string html name htmlname extractnamefromxmlname xml file xmlfile report set link setlink extract link from extractlinkfrom html name htmlname file html file htmlfile file html name htmlname file parent html file htmlfile get parent file getparentfile parent exists parent mkdirs build exception buildexception nls bind messages create file html name htmlname print writer printwriter writer file writer filewriter file writer filewriter file writer filewriter html file htmlfile writer print writer printwriter buffered writer bufferedwriter file writer filewriter report is non api bundles report isnonapibundlesreport dump non api bundles dumpnonapibundles writer report dump header dumpheader writer report dump problems dumpproblems writer messages analysis report conversion task analysisreportconversiontask component resolution header report get problems getproblems api tools analysis task apitoolsanalysistask component resolution dump problems dumpproblems writer messages full report task fullreporttask compatibility header report get problems getproblems api tools analysis task apitoolsanalysistask compatibility dump problems dumpproblems writer messages full report task fullreporttask api usage header report get problems getproblems api tools analysis task apitoolsanalysistask usage dump problems dumpproblems writer messages full report task fullreporttask bundle version header report get problems getproblems api tools analysis task apitoolsanalysistask bundle version dump foo ter dumpfooter writer writer flush io exception ioexception build exception buildexception nls bind messages ioe xception ioexception writing html file html name htmlname writer writer close ant task override execute build exception buildexception debug nls system println xml reports location xmlreportslocation xml reports location xmlreportslocation nls system println html reports location htmlreportslocation html reports location htmlreportslocation xml reports location xmlreportslocation build exception buildexception messages missing xml files location reports root reportsroot file xml reports location xmlreportslocation reports root reportsroot exists reports root reportsroot is directory isdirectory build exception buildexception nls bind messages invalid directory xml reports location xmlreportslocation sax parser factory saxparserfactory factory sax parser factory saxparserfactory new instance newinstance sax parser saxparser parser parser factory newsaxparser parser configuration exception parserconfigurationexception print stack trace printstacktrace sax exception saxexception print stack trace printstacktrace parser build exception buildexception messages create sax parser html reports location htmlreportslocation html reports location htmlreportslocation xml reports location xmlreportslocation html root htmlroot file html reports location htmlreportslocation html root htmlroot exists html root htmlroot mkdirs build exception buildexception nls bind messages create file html reports location htmlreportslocation debug nls system println output html reports location htmlreportslocation retrieve xml reports file all files allfiles util get all files getallfiles reports root reportsroot file filter filefilter override accept file path name pathname path name pathname is directory isdirectory nls path name pathname get name getname ends with endswith nls xml all files allfiles length all files allfiles length list summary summaries list summarieslist array list arraylist length summary non api bundle summary nonapibundlesummary length file file all files allfiles converter default handler converterdefaulthandler default handler defaulthandler converter default handler converterdefaulthandler debug parser parse file default handler defaulthandler report report default handler defaulthandler get report getreport report ignore file counts xml file debug system println nls skipped file nls file get absolute path getabsolutepath dump report dumpreport file report report is non api bundles report isnonapibundlesreport non api bundle summary nonapibundlesummary summary report summaries list summarieslist add summary report tools bundles ignore count xml summaries list summarieslist is empty isempty non api bundle summary nonapibundlesummary summary summaries summary summaries list summarieslist size summaries list summarieslist to array toarray summaries dump index file dumpindexfile reports root reportsroot summaries non api bundle summary nonapibundlesummary sax exception saxexception io exception ioexception string extract link from extractlinkfrom string file name filename string buffer stringbuffer buffer string buffer stringbuffer buffer append append file name filename substring html root htmlroot get absolute path getabsolutepath length replace string value of valueof buffer string extractnamefromxmlname file xml file xmlfile string file name filename xml file xmlfile get absolute path getabsolutepath file name filename last index of lastindexof string buffer stringbuffer buffer string buffer stringbuffer buffer append file name filename substring reports root reportsroot get absolute path getabsolutepath length append html file html file htmlfile file html reports location htmlreportslocation string value of valueof buffer html file htmlfile get absolute path getabsolutepath set debug setdebug string debug value debugvalue debug to string tostring equals debug value debugvalue set html files sethtmlfiles string html files location htmlfileslocation html reports location htmlreportslocation html files location htmlfileslocation set xml files setxmlfiles string xml files location xmlfileslocation xml reports location xmlreportslocation xml files location xmlfileslocation