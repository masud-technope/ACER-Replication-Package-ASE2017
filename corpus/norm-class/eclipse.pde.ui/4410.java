copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde api tools internal java util array list arraylist java util hash set hashset java util iterator java util list java util map java util java util jar jar file jarfile org eclipse core resources i file ifile org eclipse core resources i resource iresource org eclipse core runtime core exception coreexception org eclipse core runtime i progress monitor iprogressmonitor org eclipse core runtime i status istatus org eclipse core runtime status org eclipse jdt core i class file iclassfile org eclipse jdt core i classpath entry iclasspathentry org eclipse jdt core i compilation unit icompilationunit org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core i type itype org eclipse jdt core java model exception javamodelexception org eclipse pde api tools internal builder build stamps buildstamps org eclipse pde api tools internal model bundle component bundlecomponent org eclipse pde api tools internal model project component projectcomponent org eclipse pde api tools internal provisional api description visitor apidescriptionvisitor org eclipse pde api tools internal provisional api plugin apiplugin org eclipse pde api tools internal provisional factory org eclipse pde api tools internal provisional i api annotations iapiannotations org eclipse pde api tools internal provisional restriction modifiers restrictionmodifiers org eclipse pde api tools internal provisional visibility modifiers visibilitymodifiers org eclipse pde api tools internal provisional descriptors i element descriptor ielementdescriptor org eclipse pde api tools internal provisional descriptors i package descriptor ipackagedescriptor org eclipse pde api tools internal provisional descriptors i reference type descriptor ireferencetypedescriptor org eclipse pde api tools internal provisional model i api baseline iapibaseline org eclipse pde api tools internal provisional model i api type container iapitypecontainer org eclipse pde api tools internal provisional scanner tag scanner tagscanner org eclipse pde api tools internal util util org dom document org dom element implementation api description java project project api description projectapidescription api description apidescription java project i java project ijavaproject f project fproject time stamp created f package time stamp fpackagetimestamp refresh progress f ref res hing in progress frefreshinginprogress manifest file i file ifile f manifest file fmanifestfile api description synch project project visiting performed traversing cached nodes traversing java model elements effectively building cache f in synch finsynch node package node packagenode manifest node manifestnode i package fragment ipackagefragment f fragments ffragments constructs node param parent param element param visibility param restrictions package node packagenode i package fragment ipackagefragment fragments manifest node manifestnode parent i element descriptor ielementdescriptor element visibility restrictions parent element visibility restrictions f fragments ffragments fragments override manifest node manifestnode refresh refresh packages refreshpackages f fragments ffragments length f fragments ffragments exists modified override persistxml document document element parent element parentelement has api visibility hasapivisibility element pkg document create element createelement i api xml constants iapixmlconstants element f fragments ffragments length element fragment document create element createelement i api xml constants iapixmlconstants element fragment fragment set attribute setattribute i api xml constants iapixmlconstants attr handle f fragments ffragments get handle identifier gethandleidentifier pkg append child appendchild fragment pkg set attribute setattribute i api xml constants iapixmlconstants attr visibility integer to string tostring visibility persist children persistchildren document pkg children parent element parentelement append child appendchild pkg override string to string tostring string buffer stringbuffer buffer string buffer stringbuffer string i package descriptor ipackagedescriptor element get name getname nls nls nls buffer append node append equals nls buffer append n visibility nvisibility append visibility modifiers visibilitymodifiers get visibility name getvisibilityname visibility nls buffer append n restrictions nrestrictions append restriction modifiers restrictionmodifiers get restriction text getrestrictiontext restrictions f fragments ffragments nls buffer append nls n fragments nfragments i package fragment ipackagefragment fragment f fragments ffragments length fragment f fragments ffragments buffer append append nls fragment get element name getelementname nls buffer append nls buffer append fragment get parent getparent get element name getelementname nls buffer append nls buffer to string tostring node reference type type node typenode manifest node manifestnode f time stamp ftimestamp f build stamp fbuildstamp f ref res hing frefreshing i type itype f type ftype constructs node reference type param type param parent param element param visibility param restrictions type node typenode i type itype type manifest node manifestnode parent i element descriptor ielementdescriptor element visibility restrictions parent element visibility restrictions f type ftype type parent type node typenode f time stamp ftimestamp type node typenode parent f time stamp ftimestamp f build stamp fbuildstamp type node typenode parent f build stamp fbuildstamp override manifest node manifestnode refresh f ref res hing frefreshing api plugin apiplugin debug api description string buffer stringbuffer buffer string buffer stringbuffer buffer append ref res hing refreshing manifest node buffer append buffer append aborted refresh progress system println buffer to string tostring f ref res hing frefreshing parent vis parentvis resolve visibility resolvevisibility parent visibility modifiers visibilitymodifiers isapi parent vis parentvis i compilation unit icompilationunit unit f type ftype get compilation unit getcompilationunit unit i resource iresource resource resource unit get underlying resource getunderlyingresource java model exception javamodelexception api plugin apiplugin debug api description string buffer stringbuffer buffer string buffer stringbuffer buffer append failed underlying resource compilation unit buffer append unit system println buffer to string tostring get java model status getjavamodelstatus is does not exist isdoesnotexist api plugin apiplugin log get status getstatus resource resource exists stamp resource get modification stamp getmodificationstamp stamp f time stamp ftimestamp compute current crc crc visitor crcvisitor visitor crc visitor crcvisitor visit type visittype visitor crc visitor get value getvalue api plugin apiplugin debug api description string buffer stringbuffer buffer string buffer stringbuffer buffer append resource changed type manifest node buffer append nls buffer append nls tag scanning type nls buffer append crc buffer append crc buffer append system println buffer to string tostring modified children clear restrictions restriction modifiers restrictionmodifiers restrictions f time stamp ftimestamp resource get modification stamp getmodificationstamp tag scanner tagscanner new scanner newscanner scan unit project api description projectapidescription get api type container getapitypecontainer i package fragment root ipackagefragmentroot f type ftype get package fragment getpackagefragment get parent getparent core exception coreexception api plugin apiplugin log get status getstatus description changed visitor crc visitor crcvisitor visit type visittype visitor crc visitor get value getvalue crc crc update relative build time stamp f build stamp fbuildstamp build stamps buildstamps get build stamp getbuildstamp resource get project getproject api plugin apiplugin debug api description string buffer stringbuffer buffer string buffer stringbuffer buffer append crc changed type manifest node buffer append nls buffer append crc buffer append crc buffer append system println buffer to string tostring api plugin apiplugin debug api description string buffer stringbuffer buffer string buffer stringbuffer buffer append underlying resource type manifest node buffer append nls buffer append nls exist system println buffer to string tostring element removed modified parent children remove element api plugin apiplugin debug api description string buffer stringbuffer buffer string buffer stringbuffer buffer append failed compilation unit buffer append f type ftype buffer append ref res hing refreshing type manifest node buffer append system println buffer to string tostring todo binary type don scan internal types f ref res hing frefreshing override persistxml document document element parent element parentelement has api visibility hasapivisibility element type document create element createelement i api xml constants iapixmlconstants element type type set attribute setattribute i api xml constants iapixmlconstants attr handle f type ftype get handle identifier gethandleidentifier persist annotations persistannotations type type set attribute setattribute i api xml constants iapixmlconstants attr modification stamp to string tostring f time stamp ftimestamp persist children persistchildren document type children parent element parentelement append child appendchild type override string to string tostring string buffer stringbuffer buffer string buffer stringbuffer nls buffer append type node append f type ftype get fully qualified name getfullyqualifiedname nls buffer append n visibility nvisibility append visibility modifiers visibilitymodifiers get visibility name getvisibilityname visibility nls buffer append n restrictions nrestrictions append restriction modifiers restrictionmodifiers get restriction text getrestrictiontext restrictions parent string pname parent element get element type getelementtype i element descriptor ielementdescriptor i package descriptor ipackagedescriptor parent element get name getname i reference type descriptor ireferencetypedescriptor parent element get qualified name getqualifiedname nls buffer append n parent nparent append nls pname buffer to string tostring constructs api description project api component param component project api description projectapidescription i java project ijavaproject project project get element name getelementname f project fproject project override accept api description visitor apidescriptionvisitor visitor i progress monitor iprogressmonitor monitor complete visit completevisit f in synch finsynch accept visitor monitor i package fragment ipackagefragment fragments get local package fragments getlocalpackagefragments i java element ijavaelement children i java element ijavaelement child i compilation unit icompilationunit unit fragments length api plugin apiplugin debug api description system println nls fragments get element name getelementname i package descriptor ipackagedescriptor package descriptor packagedescriptor factory package descriptor packagedescriptor fragments get element name getelementname visit manifest node manifestnode pkg node pkgnode find node findnode package descriptor packagedescriptor pkg node pkgnode i api annotations iapiannotations annotations resolve annotations resolveannotations pkg node pkgnode package descriptor packagedescriptor visitor visit element visitelement package descriptor packagedescriptor annotations children fragments get children getchildren children length child children child i compilation unit icompilationunit unit i compilation unit icompilationunit child string cu name cuname unit get element name getelementname string t name tname cu name cuname substring nls cu name cuname length java length visit visitor unit get type gettype t name tname child i class file iclassfile visit visitor i class file iclassfile child get type gettype complete visit completevisit visitor end visit element endvisitelement package descriptor packagedescriptor annotations java model exception javamodelexception complete visit completevisit api plugin apiplugin log get status getstatus complete visit completevisit f in synch finsynch visits type param visitor param owning component owningcomponent param type visit api description visitor apidescriptionvisitor visitor i type itype type i element descriptor ielementdescriptor element get element descriptor getelementdescriptor type manifest node manifestnode type node typenode find node findnode element type node typenode visit type visittype type node typenode visitor visit type visittype manifest node manifestnode node api description visitor apidescriptionvisitor visitor i api annotations iapiannotations annotations resolve annotations resolveannotations node node element visitor visit element visitelement node element annotations children node children visit children visitchildren visitor node children visitor end visit element endvisitelement node element annotations override is insert on resolve isinsertonresolve i element descriptor ielementdescriptor element descriptor elementdescriptor element descriptor elementdescriptor get element type getelementtype i element descriptor ielementdescriptor method i element descriptor ielementdescriptor field i element descriptor ielementdescriptor type insert member types i reference type descriptor ireferencetypedescriptor element descriptor elementdescriptor get enclosing type getenclosingtype override manifest node manifestnode create node createnode manifest node manifestnode parent node parentnode i element descriptor ielementdescriptor element element get element type getelementtype i element descriptor ielementdescriptor i package descriptor ipackagedescriptor pkg i package descriptor ipackagedescriptor element i package fragment root ipackagefragmentroot roots get java project getjavaproject get package fragment roots getpackagefragmentroots list i package fragment ipackagefragment fragments array list arraylist roots length i package fragment root ipackagefragmentroot root roots i classpath entry iclasspathentry entry root get raw classpath entry getrawclasspathentry entry get entry kind getentrykind i classpath entry iclasspathentry cpe source i classpath entry iclasspathentry cpe library i package fragment ipackagefragment fragment root get package fragment getpackagefragment pkg get name getname fragment exists fragments add fragment root is archive isarchive root get kind getkind i package fragment root ipackagefragmentroot binary file folder fragment root get package fragment getpackagefragment pkg get name getname fragment exists fragments add fragment fragments is empty isempty new package node newpackagenode fragments to array toarray i package fragment ipackagefragment fragments size parent node parentnode element visibility modifiers visibilitymodifiers restriction modifiers restrictionmodifiers restrictions core exception coreexception i element descriptor ielementdescriptor type i reference type descriptor ireferencetypedescriptor descriptor i reference type descriptor ireferencetypedescriptor element i type itype type string descriptor get name getname parent node parentnode package node packagenode i package fragment ipackagefragment fragments package node packagenode parent node parentnode f fragments ffragments fragments length i package fragment ipackagefragment fragment fragments fragment get kind getkind i package fragment root ipackagefragmentroot source i compilation unit icompilationunit unit nls fragment get compilation unit getcompilationunit nls java i resource iresource resource unit get underlying resource getunderlyingresource resource type unit get type gettype java model exception javamodelexception jme jme get java model status getjavamodelstatus is does not exist isdoesnotexist jme i class file iclassfile file nls fragment get class file getclassfile nls file exists type file get type gettype parent node parentnode type node typenode type type node typenode parent node parentnode f type ftype get type gettype type new type node newtypenode type parent node parentnode element visibility inherited restriction modifiers restrictionmodifiers restrictions core exception coreexception create node createnode parent node parentnode element constructs returns node fragment param fragment param parent param descriptor param vis param res package node packagenode new package node newpackagenode i package fragment ipackagefragment fragments manifest node manifestnode parent i element descriptor ielementdescriptor descriptor vis res package node packagenode fragments parent descriptor vis res constructs returns node type param type param parent param descriptor param vis param res type node typenode new type node newtypenode i type itype type manifest node manifestnode parent i element descriptor ielementdescriptor descriptor vis res type node typenode type parent descriptor vis res constructs manifest node param parent param element param vis param res manifest node manifestnode new node newnode manifest node manifestnode parent i element descriptor ielementdescriptor element vis res manifest node manifestnode parent element vis res ref res hes refreshes nodes required refresh packages refreshpackages f ref res hing in progress frefreshinginprogress api plugin apiplugin debug api description string buffer stringbuffer buffer string buffer stringbuffer nls buffer append nls ref res hing refreshing manifest node buffer append nls buffer append nls aborted refresh progress system println buffer to string tostring check synch f manifest file fmanifestfile f manifest file fmanifestfile get modification stamp getmodificationstamp f package time stamp fpackagetimestamp modified f ref res hing in progress frefreshinginprogress existing packages clear map efficient iterator manifest node manifestnode iterator f package map fpackagemap values iterator iterator has next hasnext package node packagenode node package node packagenode iterator node visibility visibility modifiers visibilitymodifiers f manifest file fmanifestfile get java project getjavaproject get project getproject get file getfile jar file jarfile manifest f manifest file fmanifestfile exists i package fragment ipackagefragment fragments get local package fragments getlocalpackagefragments string names hash set hashset fragments length names add fragments get element name getelementname project component projectcomponent component get api component getapicomponent bundle component bundlecomponent initialize api description initializeapidescription component get bundle description getbundledescription names f package time stamp fpackagetimestamp f manifest file fmanifestfile get modification stamp getmodificationstamp core exception coreexception api plugin apiplugin log get status getstatus f ref res hing in progress frefreshinginprogress i element descriptor ielementdescriptor get element descriptor getelementdescriptor i java element ijavaelement element element get element type getelementtype i java element ijavaelement fragment factory package descriptor packagedescriptor element get element name getelementname i java element ijavaelement type factory type descriptor typedescriptor i type itype element get fully qualified name getfullyqualifiedname returns java project component java project i java project ijavaproject get java project getjavaproject f project fproject returns file container fragment root param root fragment root file container exception core exception coreexception container located i api type container iapitypecontainer get api type container getapitypecontainer i package fragment root ipackagefragmentroot root core exception coreexception i api type container iapitypecontainer container get api component getapicomponent get type container gettypecontainer root container nls core exception coreexception status i status istatus error api plugin apiplugin plugin unable resolve type conatiner fragment root container returns fragments origin ate originate project fragments origin ate originate project i package fragment ipackagefragment get local package fragments getlocalpackagefragments list i java element ijavaelement local array list arraylist i package fragment root ipackagefragmentroot roots get java project getjavaproject get package fragment roots getpackagefragmentroots roots length i package fragment root ipackagefragmentroot root roots care roots originating project binary source i resource iresource resource root get corresponding resource getcorrespondingresource resource resource get project getproject equals get java project getjavaproject get project getproject i java element ijavaelement children root get children getchildren children length local add children java model exception javamodelexception local to array toarray i package fragment ipackagefragment local size returns api description xml core exception coreexception string getxml core exception coreexception document document util new document newdocument element component document create element createelement i api xml constants iapixmlconstants element component component set attribute setattribute i api xml constants iapixmlconstants attr get java project getjavaproject get element name getelementname component set attribute setattribute i api xml constants iapixmlconstants attr modification stamp to string tostring f package time stamp fpackagetimestamp component set attribute setattribute i api xml constants iapixmlconstants attr version i api xml constants iapixmlconstants api description current version document append child appendchild component persist children persistchildren document component f package map fpackagemap util serialize document serializedocument document per sists persists elements map xml elements appended xml element xmlelement param document xml document param xml element xmlelement node append children param element map elementmap elements persist persist children persistchildren document document element xml element xmlelement map i element descriptor ielementdescriptor manifest node manifestnode element map elementmap iterator manifest node manifestnode iterator element map elementmap values iterator iterator has next hasnext manifest node manifestnode node iterator node persistxml document xml element xmlelement cleans api description pop ulated populated fresh data clean f package map fpackagemap clear f package time stamp fpackagetimestamp f in synch finsynch modified notes underlying project changed description cache longer synch project project changed projectchanged f in synch finsynch notes underlying project classpath changed description cache longer synch project project classpath changed projectclasspathchanged f in synch finsynch flush packages cache reload packages fragment roots f package time stamp fpackagetimestamp override string to string tostring string buffer stringbuffer buffer string buffer stringbuffer nls buffer append project api description append get java project getjavaproject get element name getelementname buffer to string tostring returns api component api description api component exception core exception coreexception api component located project component projectcomponent get api component getapicomponent core exception coreexception i api baseline iapibaseline baseline api baseline manager apibaselinemanager get manager getmanager get workspace baseline getworkspacebaseline project component projectcomponent component project component projectcomponent baseline get api component getapicomponent get java project getjavaproject get project getproject component nls core exception coreexception status i status istatus error api plugin apiplugin plugin unable resolve project api component api description component resolves annotations based inheritance node element param node manifest node param element element annotations resolved annotations override i api annotations iapiannotations resolve annotations resolveannotations manifest node manifestnode node i element descriptor ielementdescriptor element i api annotations iapiannotations ann resolve annotations resolveannotations node element node type node typenode type annotations typeannotations ann type node typenode node f build stamp fbuildstamp ann