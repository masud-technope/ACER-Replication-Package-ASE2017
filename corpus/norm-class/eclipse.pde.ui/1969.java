copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core java java net url java util org eclipse core runtime org eclipse osgi util nls org eclipse pde core i model provider event imodelproviderevent org eclipse pde core i model provider listener imodelproviderlistener org eclipse pde core target i target definition itargetdefinition org eclipse pde core target target feature targetfeature org eclipse pde internal core feature external feature model externalfeaturemodel org eclipse pde internal core ifeature i feature model ifeaturemodel org eclipse pde internal core target messages manages features pde target platform utility methods create feature models locations external feature model manager externalfeaturemodelmanager creates feature model feature based feature xml file param manifest feature xml file local file system link external feature model externalfeaturemodel loaded xml core exception coreexception problem reading feature xml i feature model ifeaturemodel create model createmodel file manifest core exception coreexception external feature model externalfeaturemodel model external feature model externalfeaturemodel model set install location setinstalllocation manifest get parent getparent input stream inputstream stream stream buffered input stream bufferedinputstream file input stream fileinputstream manifest model load stream model file not found exception filenotfoundexception core exception coreexception status i status istatus error pde core pdecore plugin nls bind messages target feature targetfeature file does not exist filedoesnotexist manifest stream stream close io exception ioexception listener list listenerlist f listeners flisteners listener list listenerlist i feature model ifeaturemodel f models fmodels add model provider listener addmodelproviderlistener i model provider listener imodelproviderlistener listener f listeners flisteners add listener fire model provider event firemodelproviderevent i model provider event imodelproviderevent object listeners f listeners flisteners get listeners getlisteners listeners length i model provider listener imodelproviderlistener listener i model provider listener imodelproviderlistener listeners listener models changed modelschanged loads feature models preferences not ifies notifies listeners initialize model loading sync h synch block models load i feature model ifeaturemodel old models oldmodels old models oldmodels f models fmodels f models fmodels i feature model ifeaturemodel start time starttime system current time millis currenttimemillis f models fmodels get external models getexternalmodels pde core pdecore debug model nls system println nls time load features target platform system current time millis currenttimemillis start time starttime nls system println nls external features loaded f models fmodels length release lock not ifying notifying listeners bug notify listeners notifylisteners old models oldmodels f models fmodels returns list feature models target platform empty array problem list external feature models empty i feature model ifeaturemodel get external models getexternalmodels plug resolution cancelled user skip resolving target pde core pdecore get default getdefault get model manager getmodelmanager is cancelled iscancelled i feature model ifeaturemodel i target definition itargetdefinition target target target platform helper targetplatformhelper get workspace target resolved getworkspacetargetresolved core exception coreexception pde core pdecore log i feature model ifeaturemodel resolution cancelled target i feature model ifeaturemodel list i feature model ifeaturemodel result array list arraylist i feature model ifeaturemodel target feature targetfeature features target get all features getallfeatures features features length string location features get location getlocation file manifest file location i core constants icoreconstants feature filename descriptor manifest exists manifest is file isfile i feature model ifeaturemodel model create model createmodel manifest model model is loaded isloaded result add model core exception coreexception pde core pdecore log result to array toarray i feature model ifeaturemodel result size notify listeners notifylisteners i feature model ifeaturemodel old models oldmodels i feature model ifeaturemodel new feature models newfeaturemodels old models oldmodels length new feature models newfeaturemodels length type old models oldmodels length type i model provider event imodelproviderevent models removed new feature models newfeaturemodels length type i model provider event imodelproviderevent models model provider event modelproviderevent replaced features replacedfeatures model provider event modelproviderevent type new feature models newfeaturemodels old models oldmodels fire model provider event firemodelproviderevent replaced features replacedfeatures remove model provider listener removemodelproviderlistener i model provider listener imodelproviderlistener listener f listeners flisteners remove listener i feature model ifeaturemodel get models getmodels f models fmodels target feature targetfeature create features createfeatures string platform home platformhome array list arraylist additional locations additionallocations i progress monitor iprogressmonitor monitor platform home platformhome platform home platformhome length url featureurls plugin path finder pluginpathfinder get feature paths getfeaturepaths platform home platformhome additional locations additionallocations size create features createfeatures featureurls monitor file dirs file additional locations additionallocations size dirs length string directory additional locations additionallocations to string tostring file dir nls file nls directory nls features dir exists dir file directory dirs dir url new urls newurls plugin path finder pluginpathfinder scan locations scanlocations dirs url result url featureurls length new urls newurls length system arraycopy featureurls result featureurls length system arraycopy new urls newurls result featureurls length new urls newurls length create features createfeatures result monitor target feature targetfeature target feature targetfeature create features createfeatures url feature paths featurepaths i progress monitor iprogressmonitor monitor monitor monitor null progress monitor nullprogressmonitor nls monitor begin task begintask feature paths featurepaths length map string target feature targetfeature unique features uniquefeatures hash map hashmap string target feature targetfeature feature paths featurepaths length file manifest file feature paths featurepaths get file getfile i core constants icoreconstants feature filename descriptor manifest exists manifest is file isfile monitor worked target feature targetfeature model target feature targetfeature manifest nls unique features uniquefeatures nls model get id getid model get version getversion nls model core exception coreexception monitor worked collection target feature targetfeature models unique features uniquefeatures values models to array toarray target feature targetfeature models size