copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde api tools model tests java buffered input stream bufferedinputstream java buffered output stream bufferedoutputstream java buffered writer bufferedwriter java file java file input stream fileinputstream java file not found exception filenotfoundexception java file output stream fileoutputstream java file writer filewriter java io exception ioexception java print writer printwriter java string writer stringwriter java net url java util array list arraylist java util hash set hashset java util iterator java util list java util org eclipse core runtime core exception coreexception org eclipse core runtime file locator filelocator org eclipse core runtime i path ipath org eclipse core runtime i status istatus org eclipse core runtime path org eclipse core runtime platform org eclipse core runtime status org eclipse jdt core compiler batch batch compiler batchcompiler org eclipse osgi service resolver resolver error resolvererror org eclipse pde api tools internal model api model factory apimodelfactory org eclipse pde api tools internal model api type apitype org eclipse pde api tools internal provisional api plugin apiplugin org eclipse pde api tools internal provisional i api description iapidescription org eclipse pde api tools internal provisional i api filter store iapifilterstore org eclipse pde api tools internal provisional i required component description irequiredcomponentdescription org eclipse pde api tools internal provisional descriptors i element descriptor ielementdescriptor org eclipse pde api tools internal provisional model api type container visitor apitypecontainervisitor org eclipse pde api tools internal provisional model i api baseline iapibaseline org eclipse pde api tools internal provisional model i api component iapicomponent org eclipse pde api tools internal provisional model i api element iapielement org eclipse pde api tools internal provisional model i api type iapitype org eclipse pde api tools internal provisional model i api type container iapitypecontainer org eclipse pde api tools internal provisional model i api type root iapityperoot org eclipse pde api tools internal search i reference collection ireferencecollection org eclipse pde api tools internal search use scan references usescanreferences org eclipse pde api tools internal util util org eclipse pde api tools tests api tests plugin apitestsplugin org eclipse pde api tools tests util project utils projectutils org junit helper methods base lines baselines test suite helper testsuitehelper computes compile options running tests java array compiler options string get compiler options getcompileroptions array list arraylist string args array list arraylist string project utils projectutils is java isjava compatible nls args add nls args add nls args add preserve all locals preservealllocals nls args add nowarn args to array toarray string creates baseline bundles directory param root directory rootdirectory directory collect bundles api baseline core exception coreexception i api baseline iapibaseline create baseline createbaseline string file root directory rootdirectory core exception coreexception file ee file eefile geteedescriptionfile i api baseline iapibaseline baseline new api baseline newapibaseline ee file eefile create component jar directory folder file files root directory rootdirectory list files listfiles list i api component iapicomponent components array list arraylist i api component iapicomponent string required components requiredcomponents hash set hashset string files length file bundle files i api component iapicomponent component api model factory apimodelfactory new api component newapicomponent baseline bundle get absolute path getabsolutepath component components add component required components requiredcomponents add component get symbolic name getsymbolicname collect required components i api component iapicomponent base components to array toarray i api component iapicomponent components size base length i api component iapicomponent component base add all required addallrequired baseline required components requiredcomponents component components baseline add api components addapicomponents components to array toarray i api component iapicomponent components size baseline creates testing api baseline param test directory testdirectory core exception coreexception i api baseline iapibaseline create testing baseline createtestingbaseline string test directory testdirectory core exception coreexception create testing baseline createtestingbaseline path test directory testdirectory creates testing link i api component iapicomponent testing baseline created param baseline name baselinename owning testing link i api baseline iapibaseline code code param component param component param description link i api description iapidescription component code code link i api component iapicomponent testing purposes i api component iapicomponent create testing api component createtestingapicomponent string baseline name baselinename string string i api description iapidescription description i api component iapicomponent i reference collection ireferencecollection f references freferences override string get package names getpackagenames core exception coreexception override i api type root iapityperoot find type root findtyperoot string qualified name qualifiedname core exception coreexception override close core exception coreexception override accept api type container visitor apitypecontainervisitor visitor core exception coreexception override string get version getversion override i required component description irequiredcomponentdescription get required components getrequiredcomponents override string get name getname override string get location getlocation override string get symbolic name getsymbolicname override string get execution environments getexecutionenvironments override i api type container iapitypecontainer get api type containers getapitypecontainers override i api description iapidescription get api description getapidescription description override has api description hasapidescription override is system component issystemcomponent override dispose override i api baseline iapibaseline get baseline getbaseline api model factory apimodelfactory new api baseline newapibaseline baseline name baselinename override i api filter store iapifilterstore get filter store getfilterstore override is source component issourcecomponent override is fragment isfragment override has fragments hasfragments override i api type container iapitypecontainer get api type containers getapitypecontainers string override i api type root iapityperoot find type root findtyperoot string qualified name qualifiedname string core exception coreexception override i api element iapielement get ancestor getancestor ancestor type ancestortype override i api element iapielement get parent getparent override get type gettype i api element iapielement component override string get lowest es getlowestees override resolver error resolvererror get errors geterrors core exception coreexception override i api component iapicomponent get api component getapicomponent override i element descriptor ielementdescriptor get handle gethandle override i api component iapicomponent get host gethost core exception coreexception override get container type getcontainertype javadoc org eclipse pde api tools internal provisional model i api component iapicomponent get external dependencies getexternaldependencies override i reference collection ireferencecollection get external dependencies getexternaldependencies f references freferences f references freferences use scan references usescanreferences f references freferences creates testing link i api component iapicomponent param param param description link i api component iapicomponent testing i api component iapicomponent create testing api component createtestingapicomponent string string i api description iapidescription description create testing api component createtestingapicomponent description creates simple baseline bundles directory test plug project param base line id baselineid testing baseline param test directory testdirectory dir test baseline res ides resides testing api baseline reason testing directory code code returned core exception coreexception i api baseline iapibaseline create testing baseline createtestingbaseline string base line id baselineid i path ipath test directory testdirectory core exception coreexception i path ipath path test suite helper testsuitehelper get plugin directory path getplugindirectorypath path path append test directory testdirectory file file path to file tofile nls string base line id baselineid test base line id baselineid file exists file ee file eefile geteedescriptionfile i api baseline iapibaseline baseline new api baseline newapibaseline ee file eefile create component jar directory folder file files file list files listfiles list i api component iapicomponent components array list arraylist i api component iapicomponent string required components requiredcomponents hash set hashset string files length file bundle files nls bundle get name getname equals cvs ignore cvs folder i api component iapicomponent component api model factory apimodelfactory new api component newapicomponent baseline bundle get absolute path getabsolutepath component components add component required components requiredcomponents add component get symbolic name getsymbolicname collect required components i api component iapicomponent base components to array toarray i api component iapicomponent components size base length i api component iapicomponent component base add all required addallrequired baseline required components requiredcomponents component components baseline add api components addapicomponents components to array toarray i api component iapicomponent components size baseline constructs link i api profile iapiprofile version environment attempts locate osg i osgi execution environment baseline running osg i osgi framework param param execution environment description file api baseline exception core exception coreexception unable create baseline i api baseline iapibaseline new api baseline newapibaseline string file ee file eefile core exception coreexception api model factory apimodelfactory new api baseline newapibaseline ee file eefile creates link i api type iapitype testing param component id componentid param param sig param generics ig genericsig param flags param enclosing name enclosingname testing link i api type iapitype i api type iapitype create testing api type createtestingapitype string base line id baselineid string component id componentid string string sig string generics ig genericsig flags string enclosing name enclosingname api type apitype test suite helper testsuitehelper create testing api component createtestingapicomponent base line id baselineid component id componentid component id componentid sig generics ig genericsig flags enclosing name enclosingname file supplied tests based system property file geteedescriptionfile nls string ee path eepath system get property getproperty file ee path eepath generate fake file file fakeeefile print writer printwriter writer nls nls fakeeefile util create temp file createtempfile ee file eefile writer print writer printwriter buffered writer bufferedwriter file writer filewriter fakeeefile nls writer print nls djava nls writer println nls system get property getproperty java nls writer print nls dee bootclasspath writer println org eclipse pde api tools internal util util get java class libs as string getjavaclasslibsasstring nls writer println nls dee language level nls writer println nls dee library level javase writer flush io exception ioexception writer writer close fakeeefile delete on exit deleteonexit ee path eepath fakeeefile get absolute path getabsolutepath nls assert not null assertnotnull dee file ee path eepath file ee file eefile file ee path eepath nls assert true asserttrue file exist ee path eepath ee file eefile exists ee file eefile returns file root bundle code code searches plug ins based required bundles requiredbundles system property param bundle name bundlename symbolic bundle root code code file get bundle getbundle string bundle name bundlename nls string root system get property getproperty required bundles requiredbundles root file bundles root bundlesroot file root bundles root bundlesroot exists bundles root bundlesroot is directory isdirectory file bundles bundles root bundlesroot list files listfiles string key nls bundle name bundlename nls bundles length file file bundles file get name getname starts with startswith key file adds required components collection components param component collected param component component add prerequisites param collection collection add prerequisites core exception coreexception add all required addallrequired i api baseline iapibaseline baseline string i api component iapicomponent component list i api component iapicomponent collection core exception coreexception i required component description irequiredcomponentdescription descriptions component get required components getrequiredcomponents error string buffer stringbuffer buffer descriptions length i required component description irequiredcomponentdescription description descriptions description get id getid file bundle get bundle getbundle description get id getid bundle description is optional isoptional buffer buffer string buffer stringbuffer buffer append description get id getid append error i api component iapicomponent api component apicomponent api model factory apimodelfactory new api component newapicomponent baseline bundle get absolute path getabsolutepath collection add api component apicomponent add api component apicomponent get symbolic name getsymbolicname add all required addallrequired baseline api component apicomponent collection error nls core exception coreexception status i status istatus error api tests plugin apitestsplugin plugin check property d required bundles drequiredbundles n missing nmissing required bundle string value of valueof buffer comp iles compiles single source file param source name sourcename param destination path destinationpath param compiler options compileroptions compilation succeeded compile string source name sourcename string destination path destinationpath string compiler options compileroptions string writer stringwriter string writer stringwriter print writer printwriter out writer outwriter print writer printwriter string writer stringwriter err string writer stringwriter print writer printwriter err writer errwriter print writer printwriter err list string cmd array list arraylist string nls cmd add no exit noexit max compiler options compileroptions length max cmd add compiler options compileroptions destination path destinationpath nls cmd add cmd add destination path destinationpath cmd add source name sourcename string args string cmd size cmd to array toarray args result result batch compiler batchcompiler compile args out writer outwriter err writer errwriter runtime exception runtimeexception print stack trace printstacktrace result system err println err get buffer getbuffer result comp iles compiles source files source paths destination path compiler options param source file paths sourcefilepaths param destination path destinationpath param compiler options compileroptions compilation succeeded compile string source file paths sourcefilepaths string destination path destinationpath string compiler options compileroptions string writer stringwriter string writer stringwriter print writer printwriter out writer outwriter print writer printwriter string writer stringwriter err string writer stringwriter print writer printwriter err writer errwriter print writer printwriter err list string cmd array list arraylist string nls cmd add no exit noexit max compiler options compileroptions length max cmd add compiler options compileroptions destination path destinationpath nls cmd add cmd add destination path destinationpath string directories hash set hashset string max source file paths sourcefilepaths length max string source file path sourcefilepath source file paths sourcefilepaths file file file source file path sourcefilepath file exists file is directory isdirectory directories add file get absolute path getabsolutepath file parent file get parent file getparentfile directories add parent get absolute path getabsolutepath cmd add source file path sourcefilepath add directories classpath entries directories is empty isempty string buffer stringbuffer classpath entry classpathentry string buffer stringbuffer length directories size counter iterator string iterator directories iterator iterator has next hasnext string path iterator classpath entry classpathentry append path counter length classpath entry classpathentry append file path separator char pathseparatorchar nls cmd add classpath cmd add string value of valueof classpath entry classpathentry string args string cmd size cmd to array toarray args result result batch compiler batchcompiler compile args out writer outwriter err writer errwriter runtime exception runtimeexception print stack trace printstacktrace result system err println err get buffer getbuffer result delete file directories directory param file delete file deleted delete file util delete nls system err println delete get absolute path getabsolutepath copy file destination folder file directory copied destination folder file directory files sub folders subfolders copied destination folder code dest code directory param file file copy param dest destination folder illegal argument exception illegalargumentexception dest directory doesn exist file doesn exist copy file file file dest dest exists dest mkdirs nls illegal argument exception illegalargumentexception nls create destination dest is directory isdirectory nls illegal argument exception illegalargumentexception destination directory file exists nls illegal argument exception illegalargumentexception file copy doesn exist copy file dest copy file file dest dest mkdirs is directory isdirectory string dir name dirname get name getname nls cvs equals dir name dirname file files list files listfiles max files length max file file files file is directory isdirectory string file get name getname nls cvs equals nls copy file file dest copy file dest bytes buffered input stream bufferedinputstream input stream inputstream input stream inputstream buffered input stream bufferedinputstream file input stream fileinputstream bytes util get input stream as byte array getinputstreamasbytearray input stream inputstream file not found exception filenotfoundexception print stack trace printstacktrace io exception ioexception print stack trace printstacktrace input stream inputstream input stream inputstream close io exception ioexception api plugin apiplugin log bytes buffered output stream bufferedoutputstream output stream outputstream output stream outputstream buffered output stream bufferedoutputstream file output stream fileoutputstream file dest get name getname output stream outputstream write bytes output stream outputstream flush file not found exception filenotfoundexception print stack trace printstacktrace io exception ioexception print stack trace printstacktrace output stream outputstream output stream outputstream close io exception ioexception api plugin apiplugin log returns path directory plugin i path ipath get plugin directory path getplugindirectorypath platform is running isrunning nls nls url platformurl platform get bundle getbundle org eclipse pde api tools tests get entry getentry path file file locator filelocator tofileurl platformurl get file getfile get absolute path getabsolutepath io exception ioexception print stack trace printstacktrace nls path system get property getproperty user dir path system property code user dir code i path ipath get user directory path getuserdirectorypath nls path system get property getproperty user dir