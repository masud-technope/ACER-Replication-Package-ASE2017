copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core java java util java util jar jar file jarfile java util zip zip entry zipentry org eclipse core runtime i path ipath org eclipse osgi service resolver bundle description bundledescription org eclipse pde core plugin i plugin library ipluginlibrary org eclipse pde core plugin i plugin model base ipluginmodelbase org eclipse pde internal core util core utility coreutility external model manager externalmodelmanager abstract model manager abstractmodelmanager i plugin model base ipluginmodelbase f models fmodels i plugin model base ipluginmodelbase external library cache externallibrarycache f lib cache flibcache external library cache externallibrarycache i plugin model base ipluginmodelbase get all models getallmodels f models fmodels set models setmodels i plugin model base ipluginmodelbase models f models fmodels models f lib cache flibcache clean extracted libraries cleanextractedlibraries f models fmodels returns libraries extracted external jar red jarred plug empty array plug jar red jarred jar red jarred libraries exist cached libraries returned libraries cache extracted plug pde metadata location param model model libraries extracted libraries empty array file get extracted libraries getextractedlibraries i plugin model base ipluginmodelbase model f lib cache flibcache get extracted libraries getextractedlibraries model external model classpath libraries defined bundle classpath header classpath jdt compiler handled link pde classpath container pdeclasspathcontainer classpath support nested jars extract libraries jar red jarred bundle manages libraries extracted deletes list external models pde classpath container pdeclasspathcontainer add external plugin addexternalplugin i plugin model base ipluginmodelbase org eclipse pde internal core pde classpath container pdeclasspathcontainer rule array list arraylist external library cache externallibrarycache location pde metadata area extracted libraries stored extracted libraries stored directory named plug extracted workspace metadata plugins org eclipse pde core external libraries plugin plugin version library jar nls string lib cache dir external libraries file get extracted libraries getextractedlibraries i plugin model base ipluginmodelbase model file f jar file fjarfile file model get install location getinstalllocation f jar file fjarfile is file isfile file bundle description bundledescription desc model get bundle description getbundledescription i plugin library ipluginlibrary libs model get plugin base getpluginbase get libraries getlibraries file f cache dir fcachedir file get library cache dir getlibrarycachedir get bundle libs cache dir name getbundlelibscachedirname desc list file files array list arraylist file libs length string lib name libname libs get name getname nls equals lib name libname lib name libname classpath util core classpathutilcore expand library name expandlibraryname lib name libname file f dest file fdestfile file f cache dir fcachedir lib name libname assume existing file valid f dest file fdestfile is file isfile file extracted lib extractedlib extract jar extractjar f jar file fjarfile lib name libname f dest file fdestfile extracted lib extractedlib files add extracted lib extractedlib io exception ioexception pde core pdecore log exception logexception extract library jar red jarred bundle desc get symbolic name getsymbolicname files add f dest file fdestfile files to array toarray file deletes cached jar s jars libraries contained enabled target platform ignore errors delete directory param target models targetmodels current contents target platform clean extracted libraries cleanextractedlibraries i plugin model base ipluginmodelbase target models targetmodels file f cache dir fcachedir get library cache dir getlibrarycachedir f cache dir fcachedir is directory isdirectory build list potential directory names quick check string bundle keys bundlekeys hash set hashset string target models targetmodels length target models targetmodels is enabled isenabled bundle description bundledescription desc target models targetmodels get bundle description getbundledescription bundle keys bundlekeys add get bundle libs cache dir name getbundlelibscachedirname desc file f dirs fdirs f cache dir fcachedir list files listfiles f dirs fdirs length f dirs fdirs is directory isdirectory bundle keys bundlekeys f dirs fdirs get name getname core utility coreutility delete content deletecontent f dirs fdirs delete cache folder empty f cache dir fcachedir delete directory pde core location wrapped jar s jars external bundles stored file get library cache dir getlibrarycachedir i path ipath path pde core pdecore get default getdefault get state location getstatelocation file path to file tofile lib cache dir returns library cache directory bundle param desc bundle descriptor code bundle bundle version code string get bundle libs cache dir name getbundlelibscachedirname bundle description bundledescription desc nls desc get symbolic name getsymbolicname desc get version getversion extra cts extracts library jar red jarred plug directory param f jar file fjarfile jar file extract param lib name libname library extract param f target file ftargetfile file location extract library file jar extracted successful code code io exception ioexception file extract jar extractjar file f jar file fjarfile string lib name libname file f target file ftargetfile io exception ioexception jar file jarfile jar file jarfile f jar file fjarfile input stream inputstream zip entry zipentry lib entry libentry get entry getentry lib name libname lib entry libentry lib entry libentry is directory isdirectory f target file ftargetfile get parent file getparentfile mkdirs get input stream getinputstream lib entry libentry io exception ioexception core utility coreutility read file readfile f target file ftargetfile f target file ftargetfile close exception close exception