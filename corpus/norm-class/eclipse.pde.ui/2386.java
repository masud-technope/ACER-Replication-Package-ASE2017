copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core ant java java net malformedurlexception java net url java util org apache tools ant org eclipse core runtime i path ipath org eclipse core runtime path org eclipse osgi util manifest element manifestelement org eclipse osgi util nls org eclipse pde core plugin i plugin extension point ipluginextensionpoint org eclipse pde core plugin i plugin model base ipluginmodelbase org eclipse pde internal core org eclipse pde internal core build ers builders schema transformer schematransformer org eclipse pde internal core ischema i schema include ischemainclude org eclipse pde internal core plugin org eclipse pde internal core schema schema org eclipse pde internal core schema schema descriptor schemadescriptor org eclipse pde internal core util header map headermap org eclipse pde internal core util sax parser wrapper saxparserwrapper org osgi framework constants ant task takes plug created html reference doc uments documents schema exsd files convertschematohtml task schema transformer schematransformer f transformer ftransformer schema transformer schematransformer string manifest string destination url cssurl string additional search paths additionalsearchpaths override execute build exception buildexception destination nls build exception buildexception nls bind pde core messages pdecoremessages builders convert missing attribute missingattribute destination manifest nls build exception buildexception nls bind pde core messages pdecoremessages builders convert missing attribute missingattribute manifest path destination is valid path isvalidpath destination nls build exception buildexception nls bind pde core messages pdecoremessages builders convert illegal value illegalvalue destination i plugin model base ipluginmodelbase model read manifest file readmanifestfile model string pluginid model get plugin base getpluginbase get id getid pluginid pluginid get plugin d getpluginid list i path ipath search paths searchpaths get search paths getsearchpaths i plugin extension point ipluginextensionpoint ext points extpoints model get plugin base getpluginbase get extension points getextensionpoints ext points extpoints length string schema location schemalocation ext points extpoints get schema getschema print writer printwriter nls schema location schemalocation schema location schemalocation equals schema schema sax parser wrapper saxparserwrapper parser parser sax parser wrapper saxparserwrapper file schema file schemafile file model get install location getinstalllocation schema location schemalocation xml default handler xmldefaulthandler handler xml default handler xmldefaulthandler parser parse schema file schemafile handler url url schema file schemafile tourl schema descriptor schemadescriptor desc schema descriptor schemadescriptor ext points extpoints get full id getfullid url search paths searchpaths schema schema desc get schema getschema check included schemas i schema include ischemainclude includes schema get includes getincludes includes length includes get included schema getincludedschema log nls bind pde core messages pdecoremessages convertschematohtml cannot find included schema cannotfindincludedschema includes get location getlocation schema file schemafile project msg err file directory path destination is absolute isabsolute file destination file get project getproject get base dir getbasedir destination directory exists directory is directory isdirectory directory mkdirs schema dispose string ext points extpoints get id getid index of indexof nls pluginid nls file file nls file nls directory nls replace html print writer printwriter output stream writer outputstreamwriter file output stream fileoutputstream file i core constants icoreconstants utf f transformer ftransformer transform schema cssurl schema transformer schematransformer build exception build exception buildexception close schema schema dispose required attribute describing location plugin xml file plug create schema html docs absolute file path path relative ant base directory code based ir basedir code param manifest string file path plugin xml plug convert set manifest setmanifest string manifest manifest manifest required attribute describing location output html param destination string file path output html set destination setdestination string destination destination destination optional attribute providing comma code code delimited list file paths search plug ins provide schema files included schema files converted schema file includes html include element definitions included schema schema exist plug task assume schema url form code schema pluginid schema path schemapath extract plug folder directory parent schema host plug plug ins directory attribute locate paths absolute file paths paths relative ant base directory code based ir basedir code param additional search paths additionalsearchpaths comma delimited list search paths set additional search paths setadditionalsearchpaths string additional search paths additionalsearchpaths additional search paths additionalsearchpaths additional search paths additionalsearchpaths url getcssurl cssurl sets url location lookup css file schema transformation task search css product plug param url string form url pointing css file setcssurl string url cssurl url url malformedurlexception pde core pdecore log exception logexception setcssurl url url cssurl url string get plugin d getpluginid file file path manifest is absolute isabsolute file manifest file get project getproject get base dir getbasedir manifest file osg i file osgifile file file get parent file getparentfile i core constants icoreconstants bundle filename descriptor osg i file osgifile exists map string string headers manifest element manifestelement parse bundle manifest parsebundlemanifest file input stream fileinputstream osg i file osgifile header map headermap string string string headers constants bundle symbolicname to string tostring manifest element manifestelement elements manifest element manifestelement parse header parseheader constants bundle symbolicname elements length elements get value getvalue exception system print get message getmessage user search paths code code list i path ipath get search paths getsearchpaths additional search paths additionalsearchpaths nls string paths additional search paths additionalsearchpaths split list i path ipath result array list arraylist i path ipath paths length paths length i path ipath path path paths path is valid path isvalidpath paths path is absolute isabsolute file base dir basedir get project getproject get base dir getbasedir path path base dir basedir get path getpath append path result add path system println nls bind pde core messages pdecoremessages convertschematohtml invalid additional search path invalidadditionalsearchpath paths result i plugin model base ipluginmodelbase read manifest file readmanifestfile build exception buildexception file file path manifest is absolute isabsolute file manifest file get project getproject get base dir getbasedir manifest input stream inputstream stream stream buffered input stream bufferedinputstream file input stream fileinputstream file exception build exception buildexception external plugin model base externalpluginmodelbase model file get name getname to lower case tolowercase locale english equals i core constants icoreconstants fragment filename descriptor model external fragment model externalfragmentmodel file get name getname to lower case tolowercase locale english equals i core constants icoreconstants plugin filename descriptor model external plugin model externalpluginmodel stream close nls build exception buildexception nls nls bind pde core messages pdecoremessages builders convert illegal value illegalvalue manifest string parent path parentpath file get parent file getparentfile get absolute path getabsolutepath model set install location setinstalllocation parent path parentpath model load stream stream close exception build exception buildexception model