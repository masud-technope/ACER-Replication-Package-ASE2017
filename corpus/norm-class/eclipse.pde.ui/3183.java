copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde tests model xml junit framework test junit framework test suite testsuite org eclipse pde core plugin org eclipse pde internal core text i document element node idocumentelementnode structurexmlmodeltestcase xml model test case xmlmodeltestcase plugin write string indent print writer printwriter writer nls string indent plugin element pluginelement attribute shift nls string attribute shift plugin element pluginelement element shift nls string element shift test suite test suite testsuite structurexmlmodeltestcase test structure add extension f teststructureaddextensionlf exception add extension addextension test structure add extension f teststructureaddextensioncrlf exception add extension addextension crlf test structure add element f teststructureaddelementlf exception add element addelement test structure add element f teststructureaddelementcrlf exception add element addelement crlf test structure add attribute f teststructureaddattributelf exception add attributes to element addattributestoelement test structure add attribute f teststructureaddattributecrlf exception add attributes to element addattributestoelement crlf test structure break open element f teststructurebreakopenelementlf exception break open element breakopenelement test structure break open element f teststructurebreakopenelementcrlf exception break open element breakopenelement crlf test structure preserve comment in root f teststructurepreservecommentinrootlf exception preserve comment add extension preservecommentaddextension test structure preserve comment in root f teststructurepreservecommentinrootcrlf exception preserve comment add extension preservecommentaddextension crlf test structure preserve comment in extension f teststructurepreservecommentinextensionlf exception preserve contained comment add element preservecontainedcommentaddelement test structure preserve comment in extension f teststructurepreservecommentinextensioncrlf exception preserve contained comment add element preservecontainedcommentaddelement crlf add extension addextension string line delim linedelim exception string buffer stringbuffer string buffer stringbuffer append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append extension setxmlcontents line delim linedelim load i plugin extension ipluginextension ext f model fmodel get factory getfactory create extension createextension ext set point setpoint org eclipse pde f model fmodel get plugin base getpluginbase add ext reload string new contents newcontents f document fdocument string buffer stringbuffer append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append extension append line delim linedelim append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append extension setxmlcontents line delim linedelim assert equals assertequals f document fdocument new contents newcontents add element addelement string line delim linedelim exception string buffer stringbuffer string buffer stringbuffer append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append extension setxmlcontents line delim linedelim load i plugin extension ipluginextension extensions f model fmodel get plugin base getpluginbase get extensions getextensions assert equals assertequals extensions length i plugin element ipluginelement element f model fmodel get factory getfactory create element createelement extensions element set name setname child extensions add element reload string new contents newcontents f document fdocument string buffer stringbuffer append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append element shift append child child append line delim linedelim append indent append extension setxmlcontents line delim linedelim assert equals assertequals f document fdocument new contents newcontents add attributes to element addattributestoelement string line delim linedelim exception string buffer stringbuffer string buffer stringbuffer append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append element shift append child append line delim linedelim append indent append extension setxmlcontents line delim linedelim load i plugin extension ipluginextension extensions f model fmodel get plugin base getpluginbase get extensions getextensions assert equals assertequals extensions length i plugin object ipluginobject children extensions get children getchildren assert equals assertequals children length assert true asserttrue children i plugin element ipluginelement i plugin element ipluginelement children set attribute setattribute i plugin element ipluginelement children set attribute setattribute test reload string new contents newcontents f document fdocument string buffer stringbuffer append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append element shift append child append line delim linedelim append indent append element shift append attribute shift append append line delim linedelim append indent append element shift append attribute shift append test append line delim linedelim append indent append extension setxmlcontents line delim linedelim assert equals assertequals f document fdocument new contents newcontents break open element breakopenelement string line delim linedelim exception string buffer stringbuffer string buffer stringbuffer append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append element shift append child append line delim linedelim append indent append extension setxmlcontents line delim linedelim load i plugin extension ipluginextension extensions f model fmodel get plugin base getpluginbase get extensions getextensions assert equals assertequals extensions length i plugin object ipluginobject children extensions get children getchildren assert equals assertequals children length assert true asserttrue children i plugin element ipluginelement i plugin element ipluginelement element f model fmodel get factory getfactory create element createelement children element set name setname sub child subchild i plugin element ipluginelement children add element reload string new contents newcontents f document fdocument string buffer stringbuffer append indent append extension append line delim linedelim append indent append attribute shift append point org eclipse pde append line delim linedelim append indent append element shift append child append line delim linedelim append indent append element shift append element shift append sub child subchild sub child subchild append line delim linedelim append indent append element shift append child append line delim linedelim append indent append extension setxmlcontents line delim linedelim assert equals assertequals f document fdocument new contents newcontents preserve comment add extension preservecommentaddextension string line delim linedelim exception string comment comment string buffer stringbuffer string buffer stringbuffer comment setxmlcontents line delim linedelim load i plugin extension ipluginextension ext f model fmodel get factory getfactory create extension createextension ext set point setpoint org eclipse pde f model fmodel get plugin base getpluginbase add ext reload comment index commentindex f document fdocument index of indexof comment assert true asserttrue comment index commentindex i document element node idocumentelementnode parent i document element node idocumentelementnode f model fmodel get plugin base getpluginbase assert true asserttrue comment index commentindex parent get offset getoffset assert true asserttrue comment index commentindex comment length parent get offset getoffset parent get length getlength preserve contained comment add element preservecontainedcommentaddelement string line delim linedelim exception string comment comment extension string buffer stringbuffer string buffer stringbuffer append extension point org eclipse pde append line delim linedelim append comment append line delim linedelim append extension setxmlcontents line delim linedelim load i plugin extension ipluginextension extensions f model fmodel get plugin base getpluginbase get extensions getextensions assert equals assertequals extensions length i plugin element ipluginelement element f model fmodel get factory getfactory create element createelement extensions element set name setname element extensions add element reload comment index commentindex f document fdocument index of indexof comment assert true asserttrue comment index commentindex i document element node idocumentelementnode parent i document element node idocumentelementnode f model fmodel get plugin base getpluginbase assert true asserttrue comment index commentindex parent get offset getoffset assert true asserttrue comment index commentindex comment length parent get offset getoffset parent get length getlength