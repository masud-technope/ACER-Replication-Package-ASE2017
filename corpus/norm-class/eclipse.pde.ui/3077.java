copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal tests junit framework test case testcase org eclipse core runtime core exception coreexception org eclipse jface text bad location exception badlocationexception org eclipse jface text document org eclipse pde internal core text i model text change listener imodeltextchangelistener org eclipse pde internal core text plugin xml text change listener xmltextchangelistener org eclipse pde internal core text ds model dsmodel org eclipse text edits malformed tree exception malformedtreeexception org eclipse text edits multi text edit multitextedit org eclipse text edits text edit textedit abstract model test case abstractdsmodeltestcase test case testcase nls string nls string string crlf nls string component sample document f document fdocument ds model dsmodel f model fmodel i model text change listener imodeltextchangelistener f listener flistener abstract model test case abstractdsmodeltestcase override set up setup exception f document fdocument document load load load add listener addlistener f model fmodel ds model dsmodel f document fdocument f model fmodel load f model fmodel is loaded isloaded f model fmodel is valid isvalid fail model loaded add listener addlistener f listener flistener xml text change listener xmltextchangelistener f model fmodel get document getdocument f model fmodel add model changed listener addmodelchangedlistener f listener flistener core exception coreexception fail model loaded setxmlcontents string buffer stringbuffer body string new line newline string buffer stringbuffer string buffer stringbuffer append xml version encoding utf append new line newline append scr component xml ns xmlns scr http osgi org xml ns xmlns scr component append new line newline body append body to string tostring append new line newline append scr component append new line newline f document fdocument to string tostring reload text edit textedit ops f listener flistener get text operations gettextoperations ops length multi text edit multitextedit multi multi text edit multitextedit multi add children addchildren ops multi apply f document fdocument malformed tree exception malformedtreeexception fail get message getmessage bad location exception badlocationexception fail get message getmessage load