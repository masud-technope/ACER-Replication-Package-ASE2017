copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation johannes ahlers johannes ahlers gmx bug org eclipse pde internal search dependencies java java lang reflect invocation target exception invocationtargetexception java util org eclipse core resources org eclipse core runtime org eclipse jdt core org eclipse jdt core search org eclipse osgi service resolver org eclipse osgi util manifest element manifestelement org eclipse osgi util nls org eclipse pde core build i build ibuild org eclipse pde core build i build entry ibuildentry org eclipse pde core plugin org eclipse pde internal build ipde build constants ipdebuildconstants org eclipse pde internal core i core constants icoreconstants org eclipse pde internal core pde core pdecore org eclipse pde internal core build workspace build model workspacebuildmodel org eclipse pde internal core bundle bundle plugin base bundlepluginbase org eclipse pde internal core ibundle org eclipse pde internal core plugin plugin import pluginimport org eclipse pde internal core project pde project pdeproject org eclipse pde internal core search plugin java search util pluginjavasearchutil org eclipse pde internal core text bundle org eclipse pde internal core util manifest utils manifestutils org eclipse pde internal pde plugin pdeplugin org eclipse pde internal pde ui messages pdeuimessages org eclipse actions workspace modify operation workspacemodifyoperation org osgi framework add new dependencies operation addnewdependenciesoperation workspace modify operation workspacemodifyoperation i project iproject f project fproject i bundle plugin model base ibundlepluginmodelbase f base fbase f new dependencies fnewdependencies reference finder referencefinder search requestor searchrequestor override accept search match acceptsearchmatch search match searchmatch match core exception coreexception found matches foundmatches add new dependencies operation addnewdependenciesoperation i project iproject project i bundle plugin model base ibundlepluginmodelbase base f project fproject project f base fbase base override execute i progress monitor iprogressmonitor monitor core exception coreexception invocation target exception invocationtargetexception interrupted exception interruptedexception sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor pde ui messages pdeuimessages add new dependencies operation addnewdependenciesoperation main task maintask i bundle ibundle bundle f base fbase get bundle model getbundlemodel get bundle getbundle string ignore pkgs ignorepkgs hash set hashset string sec deps secdeps find secondary bundles findsecondarybundles bundle ignore pkgs ignorepkgs sec deps secdeps sec deps secdeps length sub monitor submonitor worked find import packages findimportpackages bundle ignore pkgs ignorepkgs sub monitor submonitor worked add project packages addprojectpackages bundle ignore pkgs ignorepkgs sub monitor submonitor worked map export package description exportpackagedescription string additional deps additionaldeps hash map hashmap sub monitor submonitor sub task subtask pde ui messages pdeuimessages add new dependencies operation addnewdependenciesoperation search project searchproject use require bundle userequirebundle project scope projectscope f project fproject get node getnode pde core pdecore plugin get boolean getboolean i core constants icoreconstants resolve require bundle find secondary dependencies findsecondarydependencies sec deps secdeps ignore pkgs ignorepkgs additional deps additionaldeps bundle use require bundle userequirebundle sub monitor submonitor split handle new dependencies handlenewdependencies additional deps additionaldeps use require bundle userequirebundle sub monitor submonitor split found new dependencies foundnewdependencies f new dependencies fnewdependencies string find secondary bundles findsecondarybundles i bundle ibundle bundle string ignore pkgs ignorepkgs string sec deps secdeps get secondary dependencies getsecondarydependencies sec deps secdeps string manifest plugins manifestplugins find manifest plugins findmanifestplugins bundle ignore pkgs ignorepkgs list string result linked list linkedlist sec deps secdeps length manifest plugins manifestplugins sec deps secdeps result add sec deps secdeps result to array toarray string result size string get secondary dependencies getsecondarydependencies i build ibuild build get build getbuild build i build entry ibuildentry build get entry getentry i build entry ibuildentry secondary dependencies get tokens gettokens i build ibuild get build getbuild i file ifile build props buildprops pde project pdeproject get build properties getbuildproperties f project fproject build props buildprops workspace build model workspacebuildmodel model workspace build model workspacebuildmodel build props buildprops model get build getbuild string find manifest plugins findmanifestplugins i bundle ibundle bundle string ignore pkgs ignorepkgs i manifest header imanifestheader header bundle get manifest header getmanifestheader constants require bundle header hash set hashset string plugins header require bundle header requirebundleheader find manifest plugins findmanifestplugins require bundle header requirebundleheader header ignore pkgs ignorepkgs find manifest plugins findmanifestplugins ignore pkgs ignorepkgs plugins ipde build constants ipdebuildconstants bundle core runtime nls plugins add system bundle plugins string find manifest plugins findmanifestplugins require bundle header requirebundleheader header string ignore pkgs ignorepkgs require bundle object requirebundleobject bundles header get required bundles getrequiredbundles string result hash set hashset bundles length array list arraylist i plugin base ipluginbase plugins array list arraylist bundles length string bundles get id getid result add i plugin model base ipluginmodelbase base plugin registry pluginregistry find model findmodel base export package description exportpackagedescription exported pkgs exportedpkgs find exported packages findexportedpackages base get bundle description getbundledescription exported pkgs exportedpkgs length ignore pkgs ignorepkgs add exported pkgs exportedpkgs get name getname plugins add base get plugin base getpluginbase result string find manifest plugins findmanifestplugins string ignore pkgs ignorepkgs bundle specification bundlespecification bundles f base fbase get bundle description getbundledescription get required bundles getrequiredbundles string result hash set hashset bundles length array list arraylist i plugin base ipluginbase plugins array list arraylist bundles length string bundles get name getname result add i plugin model base ipluginmodelbase base plugin registry pluginregistry find model findmodel base export package description exportpackagedescription exported pkgs exportedpkgs find exported packages findexportedpackages base get bundle description getbundledescription exported pkgs exportedpkgs length ignore pkgs ignorepkgs add exported pkgs exportedpkgs get name getname plugins add base get plugin base getpluginbase result export package description exportpackagedescription find exported packages findexportedpackages bundle description bundledescription desc desc i bundle ibundle bundle f base fbase get bundle model getbundlemodel get bundle getbundle string bundle get header getheader constants bundle symbolicname index of indexof string project bundle id projectbundleid substring list export package description exportpackagedescription result linked list linkedlist stack base description basedescription stack stack stack add desc stack is empty isempty bundle description bundledescription bdesc bundle description bundledescription stack pop export package description exportpackagedescription expkgs bdesc get export packages getexportpackages expkgs length add package addpackage project bundle id projectbundleid expkgs result add expkgs exported require bundles exported packages bundle specification bundlespecification required bundles requiredbundles bdesc get required bundles getrequiredbundles required bundles requiredbundles length required bundles requiredbundles is exported isexported base description basedescription required bundles requiredbundles get supplier getsupplier bundle description bundledescription stack add result to array toarray export package description exportpackagedescription result size export package description exportpackagedescription add package addpackage string symbolic name symbolicname export package description exportpackagedescription pkg symbolic name symbolicname string friends string pkg get directive getdirective i core constants icoreconstants friends directive friends friends length symbolic name symbolicname equals friends find import packages findimportpackages i bundle ibundle bundle string ignore pkgs ignorepkgs i manifest header imanifestheader header bundle get manifest header getmanifestheader constants header header get value getvalue header import package header importpackageheader import package object importpackageobject pkgs import package header importpackageheader header get packages getpackages pkgs length ignore pkgs ignorepkgs add pkgs get name getname import package specification importpackagespecification pkgs f base fbase get bundle description getbundledescription get import packages getimportpackages pkgs length ignore pkgs ignorepkgs add pkgs get name getname find secondary dependencies findsecondarydependencies string sec deps secdeps string ignore pkgs ignorepkgs map export package description exportpackagedescription string new deps newdeps i bundle ibundle bundle use require bundle userequirebundle i progress monitor iprogressmonitor monitor i java project ijavaproject j project jproject java core javacore create f project fproject search engine searchengine engine search engine searchengine ignore pkgs ignorepkgs ignore pkgs ignorepkgs hash set hashset sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor pde ui messages pdeuimessages add new dependencies operation addnewdependenciesoperation search project searchproject sec deps secdeps length sec deps secdeps length sub monitor submonitor iteration monitor iterationmonitor sub monitor submonitor split iteration monitor iterationmonitor is canceled iscanceled string plugin id pluginid sec deps secdeps i plugin model base ipluginmodelbase base plugin registry pluginregistry find model findmodel sec deps secdeps base export package description exportpackagedescription exported find exported packages findexportedpackages base get bundle description getbundledescription i java search scope ijavasearchscope search scope searchscope plugin java search util pluginjavasearchutil create seach scope createseachscope j project jproject iteration monitor iterationmonitor begin task begintask nls bind pde ui messages pdeuimessages add new dependencies operation addnewdependenciesoperation search for dependency searchfordependency plugin id pluginid exported length exported length string pkg name pkgname exported get name getname ignore pkgs ignorepkgs pkg name pkgname reference finder referencefinder requestor reference finder referencefinder engine search search pattern searchpattern create pattern createpattern pkg name pkgname i java search constants ijavasearchconstants i java search constants ijavasearchconstants references search pattern searchpattern exact match search participant searchparticipant search engine searchengine get default search participant getdefaultsearchparticipant search scope searchscope requestor requestor found matches foundmatches f new dependencies fnewdependencies ignore pkgs ignorepkgs add pkg name pkgname new deps newdeps exported plugin id pluginid use require bundle userequirebundle require bundle packages bundle exported length ignore pkgs ignorepkgs add exported get name getname iteration monitor iterationmonitor worked core exception coreexception pde plugin pdeplugin log exception logexception add project packages addprojectpackages i bundle ibundle bundle string ignore pkgs ignorepkgs i build ibuild build get build getbuild build i build entry ibuildentry bin includes binincludes build get entry getentry i build entry ibuildentry bin includes bin includes binincludes string bundle get header getheader constants bundle classpath nls manifest element manifestelement elems elems manifest element manifestelement parse header parseheader constants bundle classpath bundle exception bundleexception i java project ijavaproject j project jproject java core javacore create f project fproject elems length string library elems get value getvalue include packages avialable exporting included bin includes bin includes binincludes library library bin includes source folder compile search source folders i build entry ibuildentry entry build get entry getentry i build entry ibuildentry jar prefix library entry string resources entry get tokens gettokens resources length add packages from resource addpackagesfromresource j project jproject f project fproject find member findmember resources ignore pkgs ignorepkgs source entry library assume binary jar add exists add packages from resource addpackagesfromresource j project jproject f project fproject find member findmember library ignore pkgs ignorepkgs bin includes parent folder common binary jar string tokenizer stringtokenizer tokenizer nls string tokenizer stringtokenizer nls library nls string buffer stringbuffer buffer string buffer stringbuffer tokenizer has more tokens hasmoretokens buffer append tokenizer next token nexttoken append bin includes binincludes buffer to string tostring add packages from resource addpackagesfromresource j project jproject f project fproject find member findmember library ignore pkgs ignorepkgs add packages from resource addpackagesfromresource i java project ijavaproject j project jproject i resource iresource res string ignore pkgs ignorepkgs res i package fragment root ipackagefragmentroot root j project jproject get package fragment root getpackagefragmentroot res i java element ijavaelement children root get children getchildren children length string pkg name pkgname children get element name getelementname children i parent iparent pkg name pkgname length i parent iparent children has children haschildren ignore pkgs ignorepkgs add children get element name getelementname java model exception javamodelexception handle new dependencies handlenewdependencies map export package description exportpackagedescription string additional deps additionaldeps use require bundle userequirebundle i progress monitor iprogressmonitor monitor additional deps additionaldeps is empty isempty add dependencies adddependencies additional deps additionaldeps use require bundle userequirebundle add dependencies adddependencies map export package description exportpackagedescription string deps to add depstoadd use require bundle userequirebundle use require bundle userequirebundle collection string plugins deps to add depstoadd values min imize bundles minimizebundles plugins i build ibuild build get build getbuild i plugin base ipluginbase pbase f base fbase get plugin base getpluginbase pbase add require bundles addrequirebundles plugins f base fbase get bundle model getbundlemodel get bundle getbundle build get entry getentry i build entry ibuildentry secondary dependencies add require bundles addrequirebundles plugins pbase build get entry getentry i build entry ibuildentry secondary dependencies nls build write nls nls print writer printwriter file output stream fileoutputstream pde project pdeproject get build properties getbuildproperties f project fproject get full path getfullpath to file tofile file not found exception filenotfoundexception collection export package description exportpackagedescription pkgs deps to add depstoadd key set keyset add import packages addimportpackages pkgs f base fbase get bundle model getbundlemodel get bundle getbundle add import packages addimportpackages collection export package description exportpackagedescription deps to add depstoadd i bundle ibundle bundle iterator export package description exportpackagedescription deps to add depstoadd iterator i manifest header imanifestheader mheader bundle get manifest header getmanifestheader constants create header import package header importpackageheader for matting formatting bug mheader bundle set header setheader constants string mheader bundle get manifest header getmanifestheader constants mheader import package header importpackageheader import package header importpackageheader header import package header importpackageheader mheader string version attr versionattr bundle plugin base bundlepluginbase get bundle manifest version getbundlemanifestversion bundle i core constants icoreconstants specification version constants version attribute has next hasnext import package object importpackageobject obj import package object importpackageobject header version attr versionattr header add package addpackage obj string current value currentvalue mheader mheader get value getvalue nls string buffer stringbuffer buffer current value currentvalue string buffer stringbuffer string buffer stringbuffer current value currentvalue append has next hasnext export package description exportpackagedescription desc nls nls string desc get version getversion equals version empty version emptyversion desc get name getname desc get name getname version desc get version getversion separator writing manifest buffer append append manifest utils manifestutils manifest list separator buffer length buffer set length setlength buffer length manifest utils manifestutils manifest list separator length bundle set header setheader constants buffer to string tostring add require bundles addrequirebundles collection string deps to add depstoadd i bundle ibundle bundle i build entry ibuildentry entry bundle hash set hashset string hash set hashset iterator string deps to add depstoadd iterator i manifest header imanifestheader mheader bundle get manifest header getmanifestheader constants require bundle mheader require bundle header requirebundleheader require bundle header requirebundleheader header require bundle header requirebundleheader mheader has next hasnext string plugin id pluginid plugin id pluginid header add bundle addbundle plugin id pluginid add plugin id pluginid entry remove token removetoken plugin id pluginid core exception coreexception string current value currentvalue mheader mheader get value getvalue nls string buffer stringbuffer buffer current value currentvalue string buffer stringbuffer string buffer stringbuffer current value currentvalue append has next hasnext string plugin id pluginid plugin id pluginid buffer append plugin id pluginid append manifest utils manifestutils manifest list separator add plugin id pluginid entry remove token removetoken plugin id pluginid core exception coreexception buffer length buffer set length setlength buffer length manifest utils manifestutils manifest list separator length bundle set header setheader constants require bundle buffer to string tostring add require bundles addrequirebundles collection string deps to add depstoadd i plugin base ipluginbase base i build entry ibuildentry entry hash set hashset string hash set hashset iterator string deps to add depstoadd iterator call get imports getimports initialize i plugin base ipluginbase add plugin trigger modification event base get imports getimports has next hasnext string plugin id pluginid plugin id pluginid plugin import pluginimport plugin plugin import pluginimport manifest element manifestelement element manifest element manifestelement parse header parseheader constants require bundle plugin id pluginid plugin load element plugin set model setmodel base get model getmodel base add plugin add plugin id pluginid entry entry plugin id pluginid entry remove token removetoken plugin id pluginid bundle exception bundleexception core exception coreexception min imize bundles minimizebundles collection string plugin ids pluginids stack string stack stack iterator string plugin ids pluginids iterator has next hasnext stack push to string tostring stack is empty isempty i plugin model base ipluginmodelbase base plugin registry pluginregistry find model findmodel stack pop to string tostring base i plugin import ipluginimport imports base get plugin base getpluginbase get imports getimports imports length imports is reexported isreexported string re exported id reexportedid imports get id getid plugin ids pluginids remove imports get id getid stack push re exported id reexportedid