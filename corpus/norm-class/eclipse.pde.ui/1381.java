copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde tests target org eclipse pde core target java util junit framework test junit framework test suite testsuite org eclipse core runtime org eclipse pde core plugin target platform targetplatform org eclipse pde internal core pde core pdecore org eclipse pde internal core ifeature i feature model ifeaturemodel tests targets bundle containers manage features correctly target definition feature resolution tests targetdefinitionfeatureresolutiontests abstract target test abstracttargettest test suite test suite testsuite target definition feature resolution tests targetdefinitionfeatureresolutiontests tests directory bundle container correct features target test directory bundle container testdirectorybundlecontainer exception i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation directory container directorycontainer get target service gettargetservice new directory location newdirectorylocation target platform targetplatform get default location getdefaultlocation assert null assertnull directory container directorycontainer get features getfeatures i feature model ifeaturemodel expected features expectedfeatures pde core pdecore get default getdefault get feature model manager getfeaturemodelmanager get models getmodels expectedids hash set hashset i feature model ifeaturemodel expected feature expectedfeature expected features expectedfeatures expectedids add expected feature expectedfeature get feature getfeature get id getid directory container directorycontainer resolve definition target feature targetfeature features directory container directorycontainer get features getfeatures assert not null assertnotnull features target feature targetfeature feature features string currentid feature get id getid assert true asserttrue extra feature result currentid expectedids currentid expectedids remove currentid assert true asserttrue expected features returned container expectedids to string tostring expectedids is empty isempty tests profile installation bundle container correct features target test profile bundle container testprofilebundlecontainer exception i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation profile container profilecontainer get target service gettargetservice new profile location newprofilelocation target platform targetplatform get default location getdefaultlocation assert null assertnull profile container profilecontainer get features getfeatures i feature model ifeaturemodel expected features expectedfeatures pde core pdecore get default getdefault get feature model manager getfeaturemodelmanager get models getmodels expectedids hash set hashset i feature model ifeaturemodel expected feature expectedfeature expected features expectedfeatures expectedids add expected feature expectedfeature get feature getfeature get id getid profile container profilecontainer resolve definition target feature targetfeature features profile container profilecontainer get features getfeatures assert not null assertnotnull features target feature targetfeature feature features string currentid feature get id getid assert true asserttrue extra feature result currentid expectedids currentid expectedids remove currentid assert true asserttrue expected features returned container expectedids to string tostring expectedids is empty isempty tests feature bundle container correct features target test feature bundle container testfeaturebundlecontainer exception i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation feature container featurecontainer get target service gettargetservice new feature location newfeaturelocation target platform targetplatform get default location getdefaultlocation org eclipse pde assert null assertnull feature container featurecontainer get features getfeatures i feature model ifeaturemodel possible features possiblefeatures pde core pdecore get default getdefault get feature model manager getfeaturemodelmanager find feature models findfeaturemodels org eclipse pde assert true asserttrue possible features possiblefeatures length feature container featurecontainer resolve definition target feature targetfeature features feature container featurecontainer get features getfeatures assert not null assertnotnull features assert equals assertequals features length assert equals assertequals features get id getid possible features possiblefeatures get feature getfeature get id getid test explicit includes testexplicitincludes exception modified jdt features versions i target definition itargetdefinition definition get new target getnewtarget i path ipath location extract modified features extractmodifiedfeatures i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation location toosstring definition set target locations settargetlocations i target location itargetlocation container definition resolve list expected array list arraylist expected add org eclipse jdt expected add org eclipse jdt launching expected add org eclipse jdt launching source versions j unit junit expected add org junit expected add org junit source expected add org junit expected add org junit source expected add org junit platform getos equals platform macosx expected add org eclipse jdt launching macosx expected add org eclipse jdt launching macosx source name version descriptor nameversiondescriptor all features allfeatures name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse jdt vfr fmt b fmtb p oy hhoek poykhhoek name version descriptor nameversiondescriptor type feature name version descriptor nameversiondescriptor org eclipse jdt source vfr fmt b fmtb p oy hhoek poykhhoek name version descriptor nameversiondescriptor type feature definition set included setincluded all features allfeatures target bundle targetbundle bundles definition get bundles getbundles target bundle targetbundle bundle bundles string symbolic name symbolicname bundle get bundle info getbundleinfo get symbolic name getsymbolicname expected remove symbolic name symbolicname symbolic name symbolicname equals org eclipse jdt launching macosx bundle missing mac i status istatus status bundle get status getstatus platform getos equals platform macosx assert true asserttrue mac bundle status isok assert false assertfalse mac bundle missing status isok assert equals assertequals mac bundle mssing target bundle targetbundle status plugin exist status get code getcode iterator iterator expected iterator iterator has next hasnext string string iterator system err println missing assert true asserttrue wrong bundles jdt feature expected is empty isempty test single include testsingleinclude exception modified jdt features versions i target definition itargetdefinition definition get new target getnewtarget i path ipath location extract modified features extractmodifiedfeatures i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation location toosstring definition set target locations settargetlocations i target location itargetlocation container definition resolve list expected array list arraylist expected add org eclipse jdt expected add org eclipse jdt launching versions j unit junit expected add org junit expected add org junit expected add org junit platform getos equals platform macosx expected add org eclipse jdt launching macosx name version descriptor nameversiondescriptor all features allfeatures name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse jdt name version descriptor nameversiondescriptor type feature definition set included setincluded all features allfeatures target bundle targetbundle bundles definition get bundles getbundles target bundle targetbundle bundle bundles string symbolic name symbolicname bundle get bundle info getbundleinfo get symbolic name getsymbolicname expected remove symbolic name symbolicname symbolic name symbolicname equals org eclipse jdt launching macosx bundle missing mac i status istatus status bundle get status getstatus platform getos equals platform macosx assert true asserttrue mac bundle status isok assert false assertfalse mac bundle missing status isok assert equals assertequals mac bundle missing target bundle targetbundle status plugin exist status get code getcode iterator iterator expected iterator iterator has next hasnext string string iterator system err println missing assert true asserttrue wrong bundles jdt feature expected is empty isempty test mixed includes testmixedincludes exception modified jdt features versions i target definition itargetdefinition definition get new target getnewtarget i path ipath location extract modified features extractmodifiedfeatures i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation location toosstring definition set target locations settargetlocations i target location itargetlocation container definition resolve list expected array list arraylist expected add org eclipse jdt expected add org eclipse jdt launching versions j unit junit expected add org junit expected add org junit expected add org junit platform getos equals platform macosx expected add org eclipse jdt launching macosx name version descriptor nameversiondescriptor all features allfeatures name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse jdt name version descriptor nameversiondescriptor type feature name version descriptor nameversiondescriptor org eclipse jdt name version descriptor nameversiondescriptor type plugin definition set included setincluded all features allfeatures target bundle targetbundle bundles definition get bundles getbundles target bundle targetbundle bundle bundles string symbolic name symbolicname bundle get bundle info getbundleinfo get symbolic name getsymbolicname expected remove symbolic name symbolicname symbolic name symbolicname equals org eclipse jdt launching macosx bundle missing mac i status istatus status bundle get status getstatus platform getos equals platform macosx assert true asserttrue mac bundle status isok assert false assertfalse mac bundle missing status isok assert equals assertequals mac bundle mssing target bundle targetbundle status plugin exist status get code getcode iterator iterator expected iterator iterator has next hasnext string string iterator system err println missing assert true asserttrue wrong bundles jdt feature expected is empty isempty test missing features testmissingfeatures exception modified jdt features versions i target definition itargetdefinition definition get new target getnewtarget i path ipath location extract modified features extractmodifiedfeatures i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation location toosstring definition set target locations settargetlocations i target location itargetlocation container definition resolve name version descriptor nameversiondescriptor all features allfeatures name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor exist name version descriptor nameversiondescriptor type feature definition set included setincluded all features allfeatures target bundle targetbundle bundles definition get bundles getbundles assert not null assertnotnull target didn resolve bundles assert equals assertequals wrong number included bundles bundles length i status istatus definition status definitionstatus definition get status getstatus assert equals assertequals wrong severity i status istatus error definition status definitionstatus get severity getseverity i status istatus children definition status definitionstatus get children getchildren assert equals assertequals wrong number statuses children length assert equals assertequals wrong severity i status istatus error children get severity getseverity assert equals assertequals target bundle targetbundle status feature exist children get code getcode check removing included bundles resolving removes errors definition set included setincluded assert true asserttrue definition is resolved isresolved assert true asserttrue definition get status getstatus isok assert true asserttrue definition get bundles getbundles length test missing feature version testmissingfeatureversion exception modified jdt features versions i target definition itargetdefinition definition get new target getnewtarget i path ipath location extract modified features extractmodifiedfeatures i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation location toosstring definition set target locations settargetlocations i target location itargetlocation container definition resolve list expected array list arraylist expected add org eclipse jdt expected add org eclipse jdt launching versions j unit junit expected add org junit expected add org junit expected add org junit platform getos equals platform macosx expected add org eclipse jdt launching macosx name version descriptor nameversiondescriptor all features allfeatures name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse jdt exist name version descriptor nameversiondescriptor type feature definition set included setincluded all features allfeatures target bundle targetbundle bundles definition get bundles getbundles target bundle targetbundle bundle bundles string symbolic name symbolicname bundle get bundle info getbundleinfo get symbolic name getsymbolicname expected remove symbolic name symbolicname symbolic name symbolicname equals org eclipse jdt launching macosx bundle missing mac i status istatus status bundle get status getstatus platform getos equals platform macosx assert true asserttrue mac bundle status isok assert false assertfalse mac bundle missing status isok assert equals assertequals mac bundle mssing target bundle targetbundle status plugin exist status get code getcode iterator iterator expected iterator iterator has next hasnext string string iterator system err println missing assert true asserttrue wrong bundles jdt feature expected is empty isempty test missing mixed testmissingmixed exception modified jdt features versions i target definition itargetdefinition definition get new target getnewtarget i path ipath location extract modified features extractmodifiedfeatures i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation location toosstring definition set target locations settargetlocations i target location itargetlocation container definition resolve name version descriptor nameversiondescriptor all features allfeatures name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor exist name version descriptor nameversiondescriptor type feature name version descriptor nameversiondescriptor exist name version descriptor nameversiondescriptor type plugin name version descriptor nameversiondescriptor org eclipse jdt exist name version descriptor nameversiondescriptor type plugin definition set included setincluded all features allfeatures target bundle targetbundle bundles definition get bundles getbundles assert not null assertnotnull target didn resolve bundles assert equals assertequals wrong number included bundles bundles length i status istatus definition status definitionstatus definition get status getstatus assert equals assertequals wrong severity i status istatus error definition status definitionstatus get severity getseverity i status istatus children definition status definitionstatus get children getchildren assert equals assertequals wrong number statuses children length assert equals assertequals wrong severity i status istatus error children get severity getseverity assert equals assertequals target bundle targetbundle status feature exist children get code getcode check removing included bundles resolving removes errors definition set included setincluded assert true asserttrue definition is resolved isresolved assert true asserttrue definition get status getstatus isok assert true asserttrue definition get bundles getbundles length