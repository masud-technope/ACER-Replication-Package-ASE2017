copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal wizards imports java java lang reflect invocation target exception invocationtargetexception java util java util zip zip file zipfile org eclipse core resources i file ifile org eclipse core runtime org eclipse pde internal pde plugin pdeplugin org eclipse dialogs i overwrite query ioverwritequery org eclipse wizards data transfer datatransfer helper plug operation methods assist copying extra cting extracting jar folder files plugin import helper pluginimporthelper imports contents zip file folder extra cting extracting files put ting putting destination param source file folder root zip file file representing folder param dst path dstpath param provider param files to import filestoimport param monitor core exception coreexception import content importcontent object source i path ipath dst path dstpath i import structure provider iimportstructureprovider provider list object files to import filestoimport i progress monitor iprogressmonitor monitor core exception coreexception i overwrite query ioverwritequery query i overwrite query ioverwritequery override string query overwrite queryoverwrite string file import operation importoperation import operation importoperation dst path dstpath source provider query set create container structure setcreatecontainerstructure files to import filestoimport set files to import setfilestoimport files to import filestoimport monitor invocation target exception invocationtargetexception i status istatus status status i status istatus error pde plugin pdeplugin get plugin id getpluginid i status istatus error get message getmessage core exception coreexception status interrupted exception interruptedexception operation canceled exception operationcanceledexception get message getmessage extra cts extracts contents zip file destination param file param dst path dstpath param collected packages collectedpackages updated packages extracted source belongs code code step skipped param monitor core exception coreexception extract archive extractarchive file file i path ipath dst path dstpath i path ipath collected packages collectedpackages i progress monitor iprogressmonitor monitor core exception coreexception zip file zipfile zip file zipfile zip file zipfile zip file zipfile file zip file structure provider zipfilestructureprovider provider zip file structure provider zipfilestructureprovider zip file zipfile caller names collected scan zip file str uctures structures collected packages collectedpackages array list arraylist object collected array list arraylist collect resources collectresources provider provider get root getroot collected collect java packages collectjavapackages provider collected collected packages collectedpackages import content importcontent provider get root getroot dst path dstpath provider monitor io exception ioexception i status istatus status status i status istatus error pde plugin pdeplugin get plugin id getpluginid i status istatus error get message getmessage core exception coreexception status zip file zipfile zip file zipfile close io exception ioexception extra cts extracts files sub folders subfolders single folder archive file param file archive file search files param folder path folderpath path folder extract param dst path dstpath destination content param collected packages collectedpackages updated packages extracted source belongs code code step skipped param monitor progress monitor core exception coreexception problem occurs extra cting extracting extract folder from archive extractfolderfromarchive file file i path ipath folder path folderpath i path ipath dst path dstpath i path ipath collected packages collectedpackages i progress monitor iprogressmonitor monitor core exception coreexception zip file zipfile zip file zipfile zip file zipfile zip file zipfile file zip file structure provider zipfilestructureprovider provider zip file structure provider zipfilestructureprovider zip file zipfile array list arraylist object collected array list arraylist collect resources from folder collectresourcesfromfolder provider provider get root getroot folder path folderpath collected collected packages collectedpackages collect java packages collectjavapackages provider collected folder path folderpath collected packages collectedpackages import content importcontent provider get root getroot dst path dstpath provider collected monitor io exception ioexception i status istatus status status i status istatus error pde plugin pdeplugin get plugin id getpluginid i status istatus error get message getmessage core exception coreexception status zip file zipfile zip file zipfile close io exception ioexception searches archive file java source folders imports files source folders destination folder list folders exclude param file archive file search source param exclude folders excludefolders list i paths ipaths describing folders ignore searching param dst path dstpath full path destination extracted source param collected packages collectedpackages updated packages extracted source belongs code code step skipped param monitor progress monitor core exception coreexception problem extra cting extracting source zip extract java source from archive extractjavasourcefromarchive file file list i path ipath exclude folders excludefolders i path ipath dst path dstpath i path ipath collected packages collectedpackages i progress monitor iprogressmonitor monitor core exception coreexception zip file zipfile zip file zipfile zip file zipfile zip file zipfile file zip file structure provider zipfilestructureprovider provider zip file structure provider zipfilestructureprovider zip file zipfile array list arraylist object collected array list arraylist collect java source from root collectjavasourcefromroot provider exclude folders excludefolders collected collected packages collectedpackages collect java packages collectjavapackages provider collected collected packages collectedpackages import content importcontent provider get root getroot dst path dstpath provider collected monitor io exception ioexception i status istatus status status i status istatus error pde plugin pdeplugin get plugin id getpluginid i status istatus error get message getmessage core exception coreexception status zip file zipfile zip file zipfile close io exception ioexception s cans scans list files grabs path org eclipse foo adds packages prefix prefix removed start path method directory structure determine structure param provider file structure provider files folder zip param java files javafiles list files file structure search param prefix path prefixpath path files start path prefix removed adding list code code param package list packagelist updated discovered packages collect java packages collectjavapackages i import structure provider iimportstructureprovider provider list object java files javafiles i path ipath prefix path prefixpath i path ipath package list packagelist iterator object iterator java files javafiles iterator iterator has next hasnext string string path stringpath provider get full path getfullpath iterator i path ipath path path string path stringpath path path remove last segments removelastsegments current path starts prefix remove prefix prefix path prefixpath prefix matches prefixmatches prefix path prefixpath segment count segmentcount prefix path prefixpath segment equals path segment prefix matches prefixmatches prefix matches prefixmatches path path remove first segments removefirstsegments prefix path prefixpath segment count segmentcount package list packagelist add path copies archive file i file ifile param file param dst file dstfile core exception coreexception copy archive copyarchive file file i file ifile dst file dstfile i progress monitor iprogressmonitor monitor core exception coreexception file input stream fileinputstream fstream file input stream fileinputstream file dst file dstfile exists dst file dstfile set contents setcontents fstream monitor dst file dstfile create fstream monitor fstream close io exception ioexception i status istatus status status i status istatus error pde plugin pdeplugin get plugin id getpluginid i status istatus get message getmessage core exception coreexception status string get top level resources gettoplevelresources file file array list arraylist string result array list arraylist zip file zipfile zip file zipfile zip file zipfile zip file zipfile file zip file structure provider zipfilestructureprovider provider zip file structure provider zipfilestructureprovider zip file zipfile list children provider get children getchildren provider get root getroot children children is empty isempty children size object curr children provider is folder isfolder curr is class folder isclassfolder provider curr result add nls provider get label getlabel nls curr nls result nls result add result add provider get label getlabel curr io exception ioexception zip file zipfile zip file zipfile close io exception ioexception result to array toarray string result size collect required bundle files collectrequiredbundlefiles i import structure provider iimportstructureprovider provider object element array list arraylist object collected list children provider get children getchildren element children children is empty isempty children size object curr children string provider get label getlabel curr provider is folder isfolder curr equals src is class folder isclassfolder nls provider nls curr source folders folders collect required bundle files collectrequiredbundlefiles provider curr collected nls nls nls nls ends with endswith ends with endswith rsa ends with endswith dsa ends with endswith files signing files collected add curr collects items files signing files map split entries multiple dest inations destinations param provider provider param element element start search param package locations packagelocations pre pop ulated populated map names destination folder param collected map collect file list maps destination folder list files collect binary files collectbinaryfiles i import structure provider iimportstructureprovider provider object element map i path ipath i path ipath package locations packagelocations map i path ipath list object collected list children provider get children getchildren element children children is empty isempty children size object curr children string provider get label getlabel curr provider is folder isfolder curr collect binary files collectbinaryfiles provider curr package locations packagelocations collected nls nls nls nls ends with endswith ends with endswith rsa ends with endswith dsa ends with endswith collect files signing files note unjarred files root binary jar folder should n shouldn lib org eclipse foo myclass string full path fullpath provider get full path getfullpath curr i path ipath package path packagepath path full path fullpath i path ipath destination segment filename package path packagepath package path packagepath remove last segments removelastsegments rep eatedly repeatedly remove segment path matches locations package path packagepath segment count segmentcount destination destination package locations packagelocations package path packagepath package path packagepath package path packagepath remove last segments removelastsegments file doesn belong project root destination nls destination nls path add file list map list object file list filelist collected destination file list filelist file list filelist array list arraylist collected destination file list filelist file list filelist add curr searches content provider java files imported source bundle source folders java files ignores meta inf folder osgi inf folder skip source bundle localization note accurate skip localization reading localization header bundle param provider provider search param element root element search provider param collected list children imported collect non java non build files collectnonjavanonbuildfiles i import structure provider iimportstructureprovider provider object element array list arraylist object collected list children provider get children getchildren element children children is empty isempty children size object curr children provider is folder isfolder curr ignore source folders folder contains file extension foldercontainsfileextension nls provider nls curr nls java nls provider get full path getfullpath curr equals nls meta inf nls provider get full path getfullpath curr equals nls osgi inf collected add curr nls provider get label getlabel curr ends with endswith java collected add curr recursively searches folder zip structure files param provider zip folder structure provider param element element structure search param collected collection gathering file list collect resources collectresources i import structure provider iimportstructureprovider provider object element array list arraylist object collected list children provider get children getchildren element children children is empty isempty children size object curr children provider is folder isfolder curr collect resources collectresources provider curr collected nls provider get label getlabel curr ends with endswith collected add curr recursively searches zip files searching files folder files list param provider zip provider param element element zip looked param folder path folderpath location folder resources param collected list files collect resources from folder collectresourcesfromfolder zip file structure provider zipfilestructureprovider provider object element i path ipath folder path folderpath array list arraylist object collected list children provider get children getchildren element children children is empty isempty children size object curr children provider is folder isfolder curr provider get label getlabel curr equals folder path folderpath segment folder path folderpath segment count segmentcount collect resources from folder collectresourcesfromfolder provider curr folder path folderpath remove first segments removefirstsegments collected collect resources collectresources provider curr collected recursively searches files folder files list param provider provider param element element looked param folder path folderpath location folder resources param collected list files collect resources from folder collectresourcesfromfolder i import structure provider iimportstructureprovider provider object element i path ipath folder path folderpath array list arraylist object collected list children provider get children getchildren element children children is empty isempty children size object curr children provider is folder isfolder curr provider get label getlabel curr equals folder path folderpath segment folder path folderpath segment count segmentcount collect resources from folder collectresourcesfromfolder provider curr folder path folderpath remove first segments removefirstsegments collected collect resources collectresources provider curr collected searches zip file java source folders collects files source folders folder list folder paths ignore folder skipped param provider zip provider param ignore folders ignorefolders list i paths ipaths describing folders ignore param collected list source files collect java source from root collectjavasourcefromroot zip file structure provider zipfilestructureprovider provider list i path ipath ignore folders ignorefolders array list arraylist object collected list children provider get children getchildren provider get root getroot children children is empty isempty children size object curr children nls provider is folder isfolder curr folder contains file extension foldercontainsfileextension provider curr java check folder list i path ipath ignore sub folders ignoresubfolders array list arraylist ignore this child ignorethischild iterator i path ipath iterator ignore folders ignorefolders iterator iterator has next hasnext i path ipath current path currentpath iterator provider get label getlabel curr equals current path currentpath segment current path currentpath segment count segmentcount sub folder subfolder ignore sub folders ignoresubfolders add current path currentpath remove first segments removefirstsegments folder ignore this child ignorethischild ignore this child ignorethischild collect java source collectjavasource provider curr ignore sub folders ignoresubfolders collected recursively searches children element zip file folder path folders ignore folder skipped files files list updated source files param provider zip provider param element current element zip param ignore folders ignorefolders list i path ipath folder paths skip searching param collected list update files collect java source collectjavasource zip file structure provider zipfilestructureprovider provider object element list i path ipath ignore folders ignorefolders array list arraylist object collected list children provider get children getchildren element children children is empty isempty children size object curr children provider is folder isfolder curr check folder list i path ipath ignore sub folders ignoresubfolders array list arraylist ignore this child ignorethischild iterator i path ipath iterator ignore folders ignorefolders iterator iterator has next hasnext i path ipath current path currentpath iterator provider get label getlabel curr equals current path currentpath segment current path currentpath segment count segmentcount sub folder subfolder remove segment referencing current folder ignore sub folders ignoresubfolders add current path currentpath remove first segments removefirstsegments folder ignore this child ignorethischild ignore this child ignorethischild collect java source collectjavasource provider curr ignore sub folders ignoresubfolders collected add file list nls provider get label getlabel curr ends with endswith collected add curr folder contains file extension foldercontainsfileextension i import structure provider iimportstructureprovider provider object element string file extension fileextension list children provider get children getchildren element children children is empty isempty children size object curr children provider is folder isfolder curr folder contains file extension foldercontainsfileextension provider curr file extension fileextension provider get label getlabel curr ends with endswith file extension fileextension is class folder isclassfolder i import structure provider iimportstructureprovider provider object element nls folder contains file extension foldercontainsfileextension provider element