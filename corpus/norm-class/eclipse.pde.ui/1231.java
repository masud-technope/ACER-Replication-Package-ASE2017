copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde api tools internal tasks java buffered input stream bufferedinputstream java buffered reader bufferedreader java file java file filter filefilter java file input stream fileinputstream java file not found exception filenotfoundexception java io exception ioexception java print writer printwriter java string reader stringreader java string writer stringwriter java util array list arraylist java util enumeration java util hash set hashset java util list java util map java util java util zip zip entry zipentry java util zip zip file zipfile javax xml parsers factory configuration error factoryconfigurationerror javax xml parsers parser configuration exception parserconfigurationexception javax xml parsers sax parser saxparser javax xml parsers sax parser factory saxparserfactory org apache tools ant build exception buildexception org apache tools ant task org eclipse core runtime core exception coreexception org eclipse jdt core java core javacore org eclipse osgi util manifest element manifestelement org eclipse osgi util nls org eclipse pde api tools internal api description apidescription org eclipse pde api tools internal api description xml creator apidescriptionxmlcreator org eclipse pde api tools internal compilation unit compilationunit org eclipse pde api tools internal i api core constants iapicoreconstants org eclipse pde api tools internal model archive api type container archiveapitypecontainer org eclipse pde api tools internal model composite api type container compositeapitypecontainer org eclipse pde api tools internal model directory api type container directoryapitypecontainer org eclipse pde api tools internal provisional api plugin apiplugin org eclipse pde api tools internal provisional model i api type container iapitypecontainer org eclipse pde api tools internal provisional scanner tag scanner tagscanner org eclipse pde api tools internal util util org osgi framework bundle exception bundleexception org osgi framework constants org xml sax attributes org xml sax input source inputsource org xml sax sax exception saxexception org xml sax sax parse exception saxparseexception org xml sax helpers default handler defaulthandler ant task generate api description file eclipse build api file generation task apifilegenerationtask task api tools nature default handler apitoolsnaturedefaulthandler default handler defaulthandler nls string nature element nature isapitoolsnature inside nature insidenature string buffer stringbuffer buffer override error sax parse exception saxparseexception sax exception saxexception print stack trace printstacktrace override start element startelement string uri string local name localname string attributes attributes sax exception saxexception isapitoolsnature inside nature insidenature nature element equals inside nature insidenature buffer string buffer stringbuffer override characters start length sax exception saxexception inside nature insidenature buffer append start length override end element endelement string uri string local name localname string sax exception saxexception inside nature insidenature check contents characters string nature name naturename string value of valueof buffer trim isapitoolsnature api plugin apiplugin nature equals nature name naturename inside nature insidenature isapitoolsnature isapitoolsnature debug string project name projectname string project location projectlocation string target folder targetfolder string binary locations binarylocations string manifests string source locations sourcelocations allow non api project allownonapiproject encoding read source files string encoding string api packages apipackages hash set hashset project param project name projectname project set project name setprojectname string project name projectname project name projectname project name projectname project location folder source files project location absolute path param project location projectlocation project location set project setproject string project location projectlocation project location projectlocation project location projectlocation target location folder generated files generated location absolute path param target location targetlocation target location set target settarget string target location targetlocation target folder targetfolder target location targetlocation binary locations list folders jar files files project separated platform path separator entry exist absolute paths param binary locations binarylocations binary locations set binary setbinary string binary locations binarylocations binary locations binarylocations binary locations binarylocations task scan project api tools enabled values code code code code code code param set allow non api project setallownonapiproject string allow non api project allownonapiproject value of valueof boolean value booleanvalue sets encoding task reading text str eams streams param encoding set encoding setencoding string encoding encoding encoding debug values code code code code code code param debug value debugvalue debug set debug setdebug string debug value debugvalue debug to string tostring equals debug value debugvalue extra manifest files locations list extra manifest files locations provide api packages scan separated platform path separator entry exist path absolute resolved relative current working directory jar files manifest file jar file manifest file read exists param manifests extra manifest files locations set extra manifests setextramanifests string manifests manifests manifests extra source locations list locations source files scanned separated platform path separator entry exist absolute paths param manifests extra source locations set extra source locations setextrasourcelocations string source locations sourcelocations source locations sourcelocations source locations sourcelocations execute ant task override execute build exception buildexception binary locations binarylocations project name projectname project location projectlocation target folder targetfolder string writer stringwriter string writer stringwriter print writer printwriter writer print writer printwriter writer println nls bind messages api generation print arguments printarguments string project name projectname project location projectlocation binary locations binarylocations target folder targetfolder writer flush writer close build exception buildexception string value of valueof get buffer getbuffer debug nls system println project project name projectname nls system println encoding encoding nls system println project location project location projectlocation nls system println binary locations binary locations binarylocations nls system println target folder target folder targetfolder manifests nls system println nls extra manifest entries manifests source locations sourcelocations nls system println nls extra source locations entries source locations sourcelocations collect compilation units file root file project location projectlocation root exists root is directory isdirectory debug nls system err println nls directory project location projectlocation build exception buildexception nls bind messages api generation project location not directory projectlocationnotadirectory project location projectlocation check project api tools nature nls file dot project file dotprojectfile file root project allow non api project allownonapiproject isapitoolsnature dot project file dotprojectfile nls system err println project api tools nature api description file generated check api description file exists file target project folder targetprojectfolder file target folder targetfolder target project folder targetprojectfolder exists target project folder targetprojectfolder mkdirs target project folder targetprojectfolder is directory isdirectory debug nls system err println nls directory target folder targetfolder build exception buildexception nls bind messages api generation target folder not directory targetfoldernotadirectory target folder targetfolder file api description file apidescriptionfile file target project folder targetprojectfolder i api core constants iapicoreconstants api description xml api description file apidescriptionfile exists https bugs eclipse org bugs bug cgi debug nls system println nls existing api description file deleted api description file apidescriptionfile delete file all files allfiles map string string manifest map manifestmap i api type container iapitypecontainer class file container classfilecontainer project location projectlocation ends with endswith util org eclipse swt create directory file container resolve signatures tag scanning string all binary locations allbinarylocations binary locations binarylocations split file path separator pathseparator list i api type container iapitypecontainer all containers allcontainers array list arraylist i api type container iapitypecontainer container all binary locations allbinarylocations length container get container getcontainer all binary locations allbinarylocations container build exception buildexception nls bind messages api generation invalid binary location invalidbinarylocation all binary locations allbinarylocations all containers allcontainers add container class file container classfilecontainer composite api type container compositeapitypecontainer all containers allcontainers file manifest file manifestfile nls file manifest dir manifestdir file root meta inf manifest dir manifestdir exists manifest dir manifestdir is directory isdirectory manifest file manifestfile nls file nls manifest dir manifestdir nls manifest manifest file manifestfile manifest file manifestfile exists buffered input stream bufferedinputstream input stream inputstream input stream inputstream buffered input stream bufferedinputstream file input stream fileinputstream manifest file manifestfile manifest map manifestmap manifest element manifestelement parse bundle manifest parsebundlemanifest input stream inputstream api packages apipackages collect api package names collectapipackagenames manifest map manifestmap file not found exception filenotfoundexception api plugin apiplugin log io exception ioexception api plugin apiplugin log bundle exception bundleexception api plugin apiplugin log input stream inputstream input stream inputstream close io exception ioexception manifests string all manifest files allmanifestfiles manifests split file path separator pathseparator max all manifest files allmanifestfiles length max file current manifest currentmanifest file all manifest files allmanifestfiles string current api packages currentapipackages current manifest currentmanifest exists buffered input stream bufferedinputstream input stream inputstream zip file zipfile zip file zipfile is zip jar file iszipjarfile current manifest currentmanifest get name getname zip file zipfile zip file zipfile current manifest currentmanifest zip entry zipentry entry nls zip file zipfile get entry getentry nls meta inf manifest entry input stream inputstream buffered input stream bufferedinputstream zip file zipfile get input stream getinputstream entry input stream inputstream buffered input stream bufferedinputstream file input stream fileinputstream current manifest currentmanifest input stream inputstream manifest map manifestmap manifest element manifestelement parse bundle manifest parsebundlemanifest input stream inputstream current api packages currentapipackages collect api package names collectapipackagenames manifest map manifestmap file not found exception filenotfoundexception api plugin apiplugin log io exception ioexception api plugin apiplugin log bundle exception bundleexception api plugin apiplugin log input stream inputstream input stream inputstream close io exception ioexception zip file zipfile zip file zipfile close io exception ioexception current api packages currentapipackages api packages apipackages api packages apipackages current api packages currentapipackages api packages apipackages add all addall current api packages currentapipackages file filter filefilter file filter filefilter file filter filefilter override accept file path path is file isfile util is java file name isjavafilename path get name getname is api isapi path get parent getparent path is directory isdirectory all files allfiles util get all files getallfiles root file filter filefilter source locations sourcelocations string all source locations allsourcelocations source locations sourcelocations split file path separator pathseparator max all source locations allsourcelocations length max string current source location currentsourcelocation all source locations allsourcelocations file all files allfiles util get all files getallfiles file current source location currentsourcelocation file filter filefilter all files allfiles all files allfiles all files allfiles all files allfiles length all files allfiles length length all files allfiles length system arraycopy all files allfiles all files allfiles file length length length system arraycopy all files allfiles all files allfiles length length api description apidescription api description apidescription api description apidescription project name projectname tag scanner tagscanner tag scanner tagscanner tag scanner tagscanner new scanner newscanner all files allfiles all files allfiles length map string string options java core javacore get options getoptions options java core javacore compiler compliance resolve compliance resolvecompliance manifest map manifestmap compilation unit compilationunit unit max all files allfiles length max unit compilation unit compilationunit all files allfiles get absolute path getabsolutepath encoding debug nls nls system println unit unit get name getname tag scanner tagscanner scan unit api description apidescription class file container classfilecontainer options core exception coreexception api plugin apiplugin log class file container classfilecontainer class file container classfilecontainer close core exception coreexception api description xml creator apidescriptionxmlcreator xml visitor xmlvisitor api description xml creator apidescriptionxmlcreator project name projectname project name projectname api description apidescription accept xml visitor xmlvisitor string xml xml visitor xmlvisitor getxml util save file savefile api description file apidescriptionfile xml core exception coreexception api plugin apiplugin log io exception ioexception api plugin apiplugin log returns path ends collected api path names param path path ends collected api names is api isapi string path string pkg api packages apipackages path ends with endswith pkg replace file separator char separatorchar collects names packages api bundle api description created param manifest map manifestmap names packages api bundle api description created bundle exception bundleexception parsing manifest map api names fail reason string collect api package names collectapipackagenames map string string manifest map manifestmap bundle exception bundleexception hash set hashset string hash set hashset manifest element manifestelement packages manifest element manifestelement parse header parseheader constants export manifest map manifestmap constants export packages packages length manifest element manifestelement package name packagename packages enumeration string directive keys directivekeys package name packagename get directive keys getdirectivekeys directive keys directivekeys add package name packagename get value getvalue include loop directive keys directivekeys has more elements hasmoreelements object directive directive keys directivekeys next element nextelement nls internal equals nls directive string package name packagename get directive getdirective string directive value of valueof boolean value booleanvalue include loop nls friends equals nls directive include loop include add package name packagename get value getvalue i api type container iapitypecontainer get container getcontainer string location file file location exists is zip jar file iszipjarfile location archive api type container archiveapitypecontainer location directory api type container directoryapitypecontainer location resolves compiler compliance based bree entry manifest file param manifest map manifestmap derived link java core javacore compiler compliance bree manifest map link java core javacore version bree entry map bree entry map string resolve compliance resolvecompliance map string string manifest map manifestmap manifest map manifestmap string eename manifest map manifestmap constants bundle requiredexecutionenvironment eename nls equals eename java core javacore version nls equals eename java core javacore version nls javase equals eename java core javacore version nls javase equals eename java core javacore version nls javase equals eename java core javacore version java core javacore version resolves project file belongs api enabled project param dot project file dotprojectfile project file api enabled project isapitoolsnature file dot project file dotprojectfile dot project file dotprojectfile exists buffered input stream bufferedinputstream stream stream buffered input stream bufferedinputstream file input stream fileinputstream dot project file dotprojectfile nls string contents string util get input stream as char array getinputstreamaschararray stream utf containsapitoolsnature contents file not found exception filenotfoundexception print stack trace printstacktrace io exception ioexception print stack trace printstacktrace stream stream close io exception ioexception is zip jar file iszipjarfile string file name filename string normalized file name normalizedfilename file name filename to lower case tolowercase nls normalized file name normalizedfilename ends with endswith zip nls normalized file name normalizedfilename ends with endswith nls jar check source source extension point param pluginxmlcontents file contents source extension point containsapitoolsnature string pluginxmlcontents sax parser factory saxparserfactory factory factory sax parser factory saxparserfactory new instance newinstance factory configuration error factoryconfigurationerror sax parser saxparser sax parser saxparser sax parser saxparser factory newsaxparser parser configuration exception parserconfigurationexception sax exception saxexception sax parser saxparser parse input source inputsource input source inputsource input source inputsource buffered reader bufferedreader string reader stringreader pluginxmlcontents api tools nature default handler apitoolsnaturedefaulthandler default handler defaulthandler api tools nature default handler apitoolsnaturedefaulthandler sax parser saxparser parse input source inputsource default handler defaulthandler default handler defaulthandler isapitoolsnature sax exception saxexception io exception ioexception