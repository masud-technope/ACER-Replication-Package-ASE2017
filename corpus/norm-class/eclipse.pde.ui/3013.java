copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation johannes ahlers johannes ahlers gmx bug org eclipse pde internal search dependencies java lang reflect invocation target exception invocationtargetexception java util org eclipse core resources i project iproject org eclipse core runtime org eclipse jdt core org eclipse jdt core search org eclipse jface operation i runnable with progress irunnablewithprogress org eclipse pde core plugin org eclipse pde internal core classpath util core classpathutilcore org eclipse pde internal core ibundle org eclipse pde internal core search plugin java search util pluginjavasearchutil org eclipse pde internal core text bundle org eclipse pde internal pde plugin pdeplugin org eclipse pde internal pde ui messages pdeuimessages org osgi framework constants gather unused dependencies operation gatherunuseddependenciesoperation i runnable with progress irunnablewithprogress requestor search requestor searchrequestor f found ffound override accept search match acceptsearchmatch search match searchmatch match core exception coreexception f found ffound found matches foundmatches f found ffound i plugin model base ipluginmodelbase f model fmodel array list arraylist object f list flist gather unused dependencies operation gatherunuseddependenciesoperation i plugin model base ipluginmodelbase model f model fmodel model override i progress monitor iprogressmonitor monitor invocation target exception invocationtargetexception interrupted exception interruptedexception import package object importpackageobject packages collection exported packages exportedpackages classpath util core classpathutilcore has bundle structure hasbundlestructure f model fmodel i bundle ibundle bundle i bundle plugin model base ibundlepluginmodelbase f model fmodel get bundle model getbundlemodel get bundle getbundle i manifest header imanifestheader header bundle get manifest header getmanifestheader constants header import package header importpackageheader packages import package header importpackageheader header get packages getpackages header header get value getvalue header nls import package header importpackageheader nls constants nls header get value getvalue nls bundle nls system get property getproperty separator packages import package header importpackageheader header get packages getpackages header bundle get manifest header getmanifestheader constants export header export package header exportpackageheader exported packages exportedpackages export package header exportpackageheader header get package names getpackagenames header header get value getvalue header nls export package header exportpackageheader nls constants export nls header get value getvalue nls bundle nls system get property getproperty sep erator seperator exported packages exportedpackages export package header exportpackageheader header get package names getpackagenames i plugin import ipluginimport imports f model fmodel get plugin base getpluginbase get imports getimports total work totalwork imports length packages packages length sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor total work totalwork hash map hashmap string i plugin import ipluginimport used plugins usedplugins hash map hashmap f list flist array list arraylist imports length sub monitor submonitor is canceled iscanceled is unused isunused imports sub monitor submonitor split f list flist add imports used plugins usedplugins imports get id getid imports update monitor updatemonitor sub monitor submonitor f list flist size array list arraylist import package object importpackageobject used packages usedpackages array list arraylist packages sub monitor submonitor is canceled iscanceled packages length sub monitor submonitor is canceled iscanceled is unused isunused packages exported packages exportedpackages sub monitor submonitor split f list flist add packages update monitor updatemonitor sub monitor submonitor f list flist size used packages usedpackages add packages sub monitor submonitor is canceled iscanceled min imize dependencies minimizedependencies used plugins usedplugins used packages usedpackages sub monitor submonitor update monitor updatemonitor i progress monitor iprogressmonitor monitor size monitor set task name settaskname nls pde ui messages pdeuimessages unused dependencies unuseddependencies analyze size nls pde ui messages pdeuimessages unused dependencies unuseddependencies unused nls nls size pde ui messages pdeuimessages dependency extent dependencyextent singular pde ui messages pdeuimessages dependency extent dependencyextent plural nls pde ui messages pdeuimessages dependency extent dependencyextent is unused isunused i plugin import ipluginimport plugin i progress monitor iprogressmonitor monitor i plugin model base ipluginmodelbase models plugin java search util pluginjavasearchutil get plugin imports getpluginimports plugin provide java classes providejavaclasses models monitor is unused isunused import package object importpackageobject pkg collection exported packages exportedpackages i progress monitor iprogressmonitor monitor exported packages exportedpackages exported packages exportedpackages pkg get value getvalue provide java classes providejavaclasses pkg monitor provide java classes providejavaclasses i plugin model base ipluginmodelbase models i progress monitor iprogressmonitor monitor i project iproject project f model fmodel get underlying resource getunderlyingresource get project getproject project has nature hasnature java core javacore nature i java project ijavaproject j project jproject java core javacore create project i package fragment ipackagefragment package fragments packagefragments plugin java search util pluginjavasearchutil collect package fragments collectpackagefragments models j project jproject search engine searchengine engine search engine searchengine i java search scope ijavasearchscope search scope searchscope plugin java search util pluginjavasearchutil create seach scope createseachscope j project jproject sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor package fragments packagefragments length package fragments packagefragments length sub monitor submonitor iteration monitor iterationmonitor sub monitor submonitor split i package fragment ipackagefragment pkg fragment pkgfragment package fragments packagefragments pkg fragment pkgfragment has children haschildren requestor requestor requestor engine search search pattern searchpattern create pattern createpattern pkg fragment pkgfragment i java search constants ijavasearchconstants references search participant searchparticipant search engine searchengine get default search participant getdefaultsearchparticipant search scope searchscope requestor iteration monitor iterationmonitor split requestor found matches foundmatches provide java classes providejavaclasses package fragments packagefragments engine search scope searchscope iteration monitor iterationmonitor split core exception coreexception pde plugin pdeplugin log exception logexception provide java classes providejavaclasses i package fragment ipackagefragment package fragment packagefragment search engine searchengine engine i java search scope ijavasearchscope search scope searchscope i progress monitor iprogressmonitor monitor java model exception javamodelexception core exception coreexception requestor requestor i java element ijavaelement children package fragment packagefragment get children getchildren sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor children length children length i type itype types children i compilation unit icompilationunit types i compilation unit icompilationunit children get all types getalltypes children i class file iclassfile types i type itype i class file iclassfile children get type gettype types sub monitor submonitor iteration monitor iterationmonitor sub monitor submonitor split set work remaining setworkremaining types length types length requestor requestor engine search search pattern searchpattern create pattern createpattern types i java search constants ijavasearchconstants references search participant searchparticipant search engine searchengine get default search participant getdefaultsearchparticipant search scope searchscope requestor iteration monitor iterationmonitor split requestor found matches foundmatches sub monitor submonitor worked provide java classes providejavaclasses import package object importpackageobject pkg i progress monitor iprogressmonitor monitor i project iproject project f model fmodel get underlying resource getunderlyingresource get project getproject project has nature hasnature java core javacore nature sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor i java project ijavaproject j project jproject java core javacore create project search engine searchengine engine search engine searchengine i java search scope ijavasearchscope search scope searchscope plugin java search util pluginjavasearchutil create seach scope createseachscope j project jproject requestor requestor requestor string package name packagename pkg get name getname engine search search pattern searchpattern create pattern createpattern package name packagename i java search constants ijavasearchconstants i java search constants ijavasearchconstants references search pattern searchpattern exact match search participant searchparticipant search engine searchengine get default search participant getdefaultsearchparticipant search scope searchscope requestor sub monitor submonitor split requestor found matches foundmatches core exception coreexception pde plugin pdeplugin log exception logexception array list arraylist object get list getlist f list flist remove dependencies removedependencies i plugin model base ipluginmodelbase model object elements import package header importpackageheader pkg header pkgheader elements length elements i plugin import ipluginimport model get plugin base getpluginbase remove i plugin import ipluginimport elements core exception coreexception elements import package object importpackageobject pkg header pkgheader pkg header pkgheader import package header importpackageheader import package object importpackageobject elements get header getheader pkg header pkgheader remove package removepackage import package object importpackageobject elements min imize dependencies minimizedependencies hash map hashmap string i plugin import ipluginimport used plugins usedplugins array list arraylist import package object importpackageobject used packages usedpackages i progress monitor iprogressmonitor monitor list iterator listiterator import package object importpackageobject used packages usedpackages list iterator listiterator has next hasnext import package object importpackageobject ipo string bundle ipo get attribute getattribute constants bundle symbolicname attribute used plugins usedplugins contains key containskey bundle f list flist add ipo iterator string used plugins usedplugins key set keyset iterator stack string plugins stack has next hasnext plugins push to string tostring sub monitor submonitor sub monitor submonitor sub monitor submonitor convert monitor plugins is empty isempty string plugin id pluginid plugins pop i plugin model base ipluginmodelbase base plugin registry pluginregistry find model findmodel plugin id pluginid base i plugin import ipluginimport imports base get plugin base getpluginbase get imports getimports sub monitor submonitor iteration monitor iterationmonitor sub monitor submonitor set work remaining setworkremaining math max plugins size split set work remaining setworkremaining imports length imports length imports is reexported isreexported string re exported id reexportedid imports get id getid object plugin import pluginimport used plugins usedplugins remove imports get id getid plugin import pluginimport f list flist add plugin import pluginimport update monitor updatemonitor iteration monitor iterationmonitor f list flist size plugins push re exported id reexportedid iteration monitor iterationmonitor worked