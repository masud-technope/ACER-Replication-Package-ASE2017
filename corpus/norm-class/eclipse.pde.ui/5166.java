copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde api tools internal tasks java buffered input stream bufferedinputstream java buffered writer bufferedwriter java file java file input stream fileinputstream java file not found exception filenotfoundexception java file output stream fileoutputstream java io exception ioexception java output stream writer outputstreamwriter java unsupported encoding exception unsupportedencodingexception java util array list arraylist java util arrays java util collections java util comparator java util hash map hashmap java util hash set hashset java util list java util map java util properties java util java util tree set treeset org apache tools ant build exception buildexception org eclipse core runtime core exception coreexception org eclipse core runtime null progress monitor nullprogressmonitor org eclipse osgi service resolver resolver error resolvererror org eclipse osgi util nls org eclipse pde api tools internal i api core constants iapicoreconstants org eclipse pde api tools internal i api xml constants iapixmlconstants org eclipse pde api tools internal builder base api analyzer baseapianalyzer org eclipse pde api tools internal builder build context buildcontext org eclipse pde api tools internal model stub api component stubapicomponent org eclipse pde api tools internal problems api problem apiproblem org eclipse pde api tools internal problems api problem factory apiproblemfactory org eclipse pde api tools internal provisional api plugin apiplugin org eclipse pde api tools internal provisional model i api baseline iapibaseline org eclipse pde api tools internal provisional model i api component iapicomponent org eclipse pde api tools internal provisional problems i api problem iapiproblem org eclipse pde api tools internal provisional problems i api problem types iapiproblemtypes org eclipse pde api tools internal search missing ref metadata missingrefmetadata org eclipse pde api tools internal search skipped component skippedcomponent org eclipse pde api tools internal search use scan manager usescanmanager org eclipse pde api tools internal util filtered elements filteredelements org eclipse pde api tools internal util util org osgi framework version org dom dom exception domexception org dom document org dom element ant task head lessly headlessly api analysis builder generate report missing references api s cans scans missing ref problems task missingrefproblemstask common utils task commonutilstask filtered elements filteredelements excluded elements excludedelements filtered elements filteredelements included elements includedelements string api use s cans apiusescans string use scans usescans properties properties properties tree set treeset skipped component skippedcomponent not searched notsearched tree set treeset util components orter componentsorter nls string compatibility compatibility summary summaries summary summary string f component d fcomponentid list i api problem iapiproblem f api problems fapiproblems summary string componentid i api problem iapiproblem api problems apiproblems f component d fcomponentid componentid f api problems fapiproblems arrays as list aslist api problems apiproblems api scan problems task build exception buildexception exception thrown wrong verification override execute build exception buildexception current baseline location currentbaselinelocation report location reportlocation api use s cans apiusescans string buffer stringbuffer error string buffer stringbuffer nls bind messages missing ref problems task missingrefproblemstask missing arguments missingarguments string current baseline location currentbaselinelocation report location reportlocation build exception buildexception error to string tostring scr ub scrub directory time file loc file report location reportlocation loc exists util delete loc use scans usescans use scans usescans length use scans usescans length file file file use scans usescans trim file exists string buffer stringbuffer error string buffer stringbuffer messages missing ref problems task missingrefproblemstask invalid api use scan location invalidapiusescanlocation error append use scans usescans build exception buildexception error to string tostring debug nls system println profile compare current baseline location currentbaselinelocation nls system println report location report location reportlocation exclude list location excludelistlocation nls system println nls exclude list location exclude list location excludelistlocation nls system println nls exclude list location include list location includelistlocation nls system println nls include list location include list location includelistlocation nls system println nls include list location unzip profile time debug time system current time millis currenttimemillis file baseline install dir baselineinstalldir extractsdk current current baseline location currentbaselinelocation debug nls nls system println preparation profile installation system current time millis currenttimemillis time time system current time millis currenttimemillis create baseline profile i api baseline iapibaseline profile create baseline createbaseline current baseline baseline install dir baselineinstalldir get absolute path getabsolutepath debug nls nls system println creation baseline system current time millis currenttimemillis time time system current time millis currenttimemillis exclude list location excludelistlocation excluded elements excludedelements common utils task commonutilstask initialize filtered elements initializefilteredelements exclude list location excludelistlocation profile debug include list location includelistlocation included elements includedelements common utils task commonutilstask initialize filtered elements initializefilteredelements include list location includelistlocation profile debug use scan manager usescanmanager get instance getinstance set report locations setreportlocations use scans usescans debug nls system println nls system println api scan locations use scans usescans length nls nls system println location use scans usescans map string i api problem iapiproblem all problems allproblems hash map hashmap i api component iapicomponent api components apicomponents profile get api components getapicomponents length api components apicomponents length string visited api component names visitedapicomponentnames hash set hashset length i api component iapicomponent api component apicomponent api components apicomponents string api component apicomponent get symbolic name getsymbolicname string version api component apicomponent get version getversion accept component acceptcomponent api component apicomponent visited api component names visitedapicomponentnames add base api analyzer baseapianalyzer analyzer base api analyzer baseapianalyzer properties is empty isempty add default properties adddefaultproperties analyzer check external dependencies checkexternaldependencies api component apicomponent build context buildcontext properties null progress monitor nullprogressmonitor i api problem iapiproblem problems analyzer get problems getproblems problems length nls nls all problems allproblems version version to string tostring problems runtime exception runtimeexception api plugin apiplugin log core exception coreexception api plugin apiplugin log analyzer dispose debug nls nls system println scan reference check completed system current time millis currenttimemillis time time system current time millis currenttimemillis profile dispose stub api component stubapicomponent dispose all caches disposeallcaches delete baseline deletebaseline current baseline location currentbaselinelocation baseline install dir baselineinstalldir nls write meta data writemetadata file report location reportlocation meta xml summary summaries create all sum maries createallsummaries all problems allproblems dump report dumpreport summaries report not searched reportnotsearched not searched notsearched runtime exception runtimeexception api plugin apiplugin log component scanned searched listing param component code code component scanned code code accept component acceptcomponent i api component iapicomponent component string component get symbolic name getsymbolicname string version component get version getversion resolver error resolvererror errors component get errors geterrors errors errors length component is system component issystemcomponent util is api tools component isapitoolscomponent component not searched notsearched add skipped component skippedcomponent version errors excluded elements excludedelements excluded elements excludedelements contains exact match containsexactmatch excluded elements excludedelements contains partial match containspartialmatch not searched notsearched add skipped component skippedcomponent version errors included elements includedelements included elements includedelements is empty isempty included elements includedelements contains exact match containsexactmatch included elements includedelements contains partial match containspartialmatch not searched notsearched add skipped component skippedcomponent version errors core exception coreexception not searched notsearched add skipped component skippedcomponent version add default properties adddefaultproperties properties i api problem types iapiproblemtypes api scan type severity api plugin apiplugin error properties i api problem types iapiproblemtypes api scan method severity api plugin apiplugin error properties i api problem types iapiproblemtypes api scan field severity api plugin apiplugin error write meta data writemetadata file file file exists file get parent file getparentfile mkdirs file create new file createnewfile create meta xml debug nls system println nls writing metadata file get absolute path getabsolutepath missing ref metadata missingrefmetadata metadata missing ref metadata missingrefmetadata current baseline location currentbaselinelocation report location reportlocation api use s cans apiusescans metadata serialize to file serializetofile file unsupported encoding exception unsupportedencodingexception api plugin apiplugin log file not found exception filenotfoundexception api plugin apiplugin log io exception ioexception api plugin apiplugin log core exception coreexception api plugin apiplugin log summary create all sum maries createallsummaries map string i api problem iapiproblem all problems allproblems map entry string i api problem iapiproblem entry set entryset all problems allproblems entry set entryset size entry set entryset size size summaries list map entry string i api problem iapiproblem all entries allentries array list arraylist all entries allentries add all addall entry set entryset collections sort all entries allentries comparator object suppress warnings suppresswarnings unchecked override compare object object map entry string i api problem iapiproblem entry map entry string i api problem iapiproblem map entry string i api problem iapiproblem entry map entry string i api problem iapiproblem entry get key getkey compare to compareto entry get key getkey summary summaries summary size map entry string i api problem iapiproblem entry all entries allentries summaries summary entry get key getkey entry get value getvalue summaries dump report dumpreport summary summaries max summaries length max summary summary summaries string contents string componentid summary f component d fcomponentid document document util new document newdocument element report document create element createelement i api xml constants iapixmlconstants element api tool report report set attribute setattribute i api xml constants iapixmlconstants attr version i api xml constants iapixmlconstants api report current version report set attribute setattribute i api xml constants iapixmlconstants attr component componentid document append child appendchild report element category document create element createelement i api xml constants iapixmlconstants attr category category set attribute setattribute i api xml constants iapixmlconstants attr key integer to string tostring i api problem iapiproblem category api scan problem category set attribute setattribute i api xml constants iapixmlconstants attr compatibility insertapiproblems category document summary f api problems fapiproblems report append child appendchild category contents util serialize document serializedocument document dom exception domexception build exception buildexception core exception coreexception build exception buildexception contents save report savereport nls componentid nls contents nls report xml report not searched reportnotsearched skipped component skippedcomponent not searched list notsearchedlist not searched list notsearchedlist is empty isempty buffered writer bufferedwriter writer debug nls system println nls writing file projects searched file root file rootfile file report location reportlocation root file rootfile exists root file rootfile mkdirs nls file file file root file rootfile searched xml file exists file create new file createnewfile document doc util new document newdocument element root doc create element createelement i api xml constants iapixmlconstants element components nls nls root set attribute setattribute show missing showmissing doc append child appendchild root element comp skipped component skippedcomponent component not searched list notsearchedlist comp doc create element createelement i api xml constants iapixmlconstants element component comp set attribute setattribute i api xml constants iapixmlconstants attr component get component id getcomponentid comp set attribute setattribute i api xml constants iapixmlconstants attr version component get version getversion comp set attribute setattribute i api xml constants iapixmlconstants skipped details component get error details geterrordetails root append child appendchild comp writer buffered writer bufferedwriter output stream writer outputstreamwriter file output stream fileoutputstream file i api core constants iapicoreconstants utf writer write util serialize document serializedocument doc writer flush file not found exception filenotfoundexception fnfe io exception ioexception ioe core exception coreexception writer writer close io exception ioexception adds link i api problem iapiproblem document root param root param document param problems core exception coreexception insertapiproblems element root document document list i api problem iapiproblem problems core exception coreexception element api problems apiproblems document create element createelement i api xml constants iapixmlconstants element api problems root append child appendchild api problems apiproblems element element sort problem type collections sort problems comparator object override compare object object i api problem iapiproblem i api problem iapiproblem i api problem iapiproblem i api problem iapiproblem get type name gettypename compare to compareto get type name gettypename i api problem iapiproblem problem problems element document create element createelement i api xml constants iapixmlconstants element api problem element set attribute setattribute i api xml constants iapixmlconstants attr type string value of valueof problem get type name gettypename element set attribute setattribute i api xml constants iapixmlconstants attr integer to string tostring problem get id getid element set attribute setattribute i api xml constants iapixmlconstants attr number integer to string tostring problem get line number getlinenumber element set attribute setattribute i api xml constants iapixmlconstants attr start integer to string tostring problem get char start getcharstart element set attribute setattribute i api xml constants iapixmlconstants attr integer to string tostring problem get char end getcharend element set attribute setattribute i api xml constants iapixmlconstants attr element kind integer to string tostring problem get element kind getelementkind element set attribute setattribute i api xml constants iapixmlconstants attr element type api problem apiproblem get problem element kind getproblemelementkind problem get category getcategory problem get element kind getelementkind element set attribute setattribute i api xml constants iapixmlconstants attr category api problem apiproblem get problem category getproblemcategory problem get category getcategory element set attribute setattribute i api xml constants iapixmlconstants attr severity properties get property getproperty api problem factory apiproblemfactory get problem severity id getproblemseverityid problem element set attribute setattribute i api xml constants iapixmlconstants attr kind integer to string tostring problem get kind getkind element set attribute setattribute i api xml constants iapixmlconstants attr flags integer to string tostring problem get flags getflags element set attribute setattribute i api xml constants iapixmlconstants attr message problem get message getmessage string extra marker attribute ids extramarkerattributeids problem get extra marker attribute ids getextramarkerattributeids extra marker attribute ids extramarkerattributeids extra marker attribute ids extramarkerattributeids length length extra marker attribute ids extramarkerattributeids length object extra marker attribute values extramarkerattributevalues problem get extra marker attribute values getextramarkerattributevalues element extra arguments element extraargumentselement document create element createelement i api xml constants iapixmlconstants element problem extra arguments length element extra argument element extraargumentelement document create element createelement i api xml constants iapixmlconstants element problem extra argument extra argument element extraargumentelement set attribute setattribute i api xml constants iapixmlconstants attr extra marker attribute ids extramarkerattributeids extra argument element extraargumentelement set attribute setattribute i api xml constants iapixmlconstants attr string value of valueof extra marker attribute values extramarkerattributevalues extra arguments element extraargumentselement append child appendchild extra argument element extraargumentelement element append child appendchild extra arguments element extraargumentselement string message arguments messagearguments problem get message arguments getmessagearguments message arguments messagearguments message arguments messagearguments length length message arguments messagearguments length element message arguments element messageargumentselement document create element createelement i api xml constants iapixmlconstants element problem message arguments length element message argument element messageargumentelement document create element createelement i api xml constants iapixmlconstants element problem message argument message argument element messageargumentelement set attribute setattribute i api xml constants iapixmlconstants attr string value of valueof message arguments messagearguments message arguments element messageargumentselement append child appendchild message argument element messageargumentelement element append child appendchild message arguments element messageargumentselement api problems apiproblems append child appendchild element debug values code code code code code code param debug value debugvalue debug set debug setdebug debug value debugvalue debug debug value debugvalue exclude list location exclude list bundles excluded xml report generated task execution lines starting excluded elements format exclude list file pre doc bundles org eclipse jdt doc isv org eclipse jdt doc user org eclipse pde doc user org eclipse platform doc isv org eclipse platform doc user eclipse bundles ibm icu jcr aft jcraft jsch javax servlet javax servlet jsp pre location absolute path param exclude list location excludelistlocation location excluded list file set exclude list setexcludelist string exclude list location excludelistlocation exclude list location excludelistlocation exclude list location excludelistlocation include list location include list bundles included xml report generated task execution lines starting included elements format include list file pre doc bundles org eclipse jdt doc isv org eclipse jdt doc user org eclipse pde doc user org eclipse platform doc isv org eclipse platform doc user eclipse bundles ibm icu jcr aft jcraft jsch javax servlet javax servlet jsp pre location absolute path param include list location includelistlocation location included list file set include list setincludelist string include list location includelistlocation include list location includelistlocation include list location includelistlocation preferences task preferences configure problem severities problem severities values ignore warning error problems detected defined problem preference api tools location doesn exist preferences won lines starting format preferences file pre thu jan ist api scan type severity error api scan method severity ignore api scan field severity ignore pre link org eclipse pde api tools internal provisional problems i api problem types iapiproblemtypes location absolute path param preferences location preferenceslocation location preference file set preferences setpreferences string preferences location preferenceslocation file preferences file preferencesfile file preferences location preferenceslocation preferences file preferencesfile exists buffered input stream bufferedinputstream input stream inputstream input stream inputstream buffered input stream bufferedinputstream file input stream fileinputstream preferences file preferencesfile properties temp properties temp load input stream inputstream properties temp io exception ioexception input stream inputstream input stream inputstream close io exception ioexception location current product baseline compare reference baseline zip jar tgz tar file directory corresponds eclipse installation folder directory find eclipse executable param baseline location baselinelocation location baseline analyze set profile setprofile string baseline location baselinelocation current baseline location currentbaselinelocation baseline location baselinelocation comma separated list locations api s cans scans check reference baseline zip file directory corresponds api scan report directory find xml folder param baseline location baselinelocation location baseline analyze setapiusescans string api use s cans apiusescans api use s cans apiusescans api use s cans apiusescans nls use scans usescans api use s cans apiusescans split output location reports generated task completed reports directory structure filter root folder created component problems reported folder file called report xml special folder called all non api bundles allnonapibundles created folder xml file called report xml file lists bundles api tooling nature param baseline location baselinelocation location reference baseline analyze set report setreport string report location reportlocation report location reportlocation report location reportlocation