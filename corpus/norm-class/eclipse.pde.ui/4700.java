copyright christian pontesegger rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors christian pontesegger initial api implementation ibm corporation bug fixing org eclipse pde internal views image browser imagebrowser java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java util map org eclipse core commands org eclipse core resources org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse jface dialogs message dialog messagedialog org eclipse jface window window org eclipse osgi util nls org eclipse pde internal pde plugin pdeplugin org eclipse pde internal pde ui messages pdeuimessages org eclipse swt swt org eclipse swt graphics image data imagedata org eclipse swt graphics image loader imageloader org eclipse i source provider isourceprovider org eclipse platformui org eclipse dialogs save as dialog saveasdialog org eclipse handlers handler util handlerutil org eclipse services i source provider service isourceproviderservice handler image browser view save workspace command save to workspace savetoworkspace abstract handler abstracthandler override object execute execution event executionevent event execution exception executionexception i source provider service isourceproviderservice service i source provider service isourceproviderservice platformui get workbench getworkbench get service getservice i source provider service isourceproviderservice i source provider isourceprovider provider service get source provider getsourceprovider active image source provider activeimagesourceprovider active image provider map current state currentstate provider get current state getcurrentstate object data current state currentstate active image source provider activeimagesourceprovider active image data image element imageelement save as dialog saveasdialog dialog save as dialog saveasdialog handler util handlerutil get active shell getactiveshell event dialog set title settitle pde ui messages pdeuimessages save to workspace savetoworkspace save image to workspace saveimagetoworkspace dialog set original name setoriginalname image element imageelement data get file name getfilename dialog set message setmessage select location filename store image dialog open window i path ipath result dialog get result getresult i file ifile file resources plugin resourcesplugin get workspace getworkspace get root getroot get file getfile result exists file exists exists confirm message dialog messagedialog open confirm openconfirm handler util handlerutil get active shell getactiveshell event pde ui messages pdeuimessages save to workspace savetoworkspace confirm overwrite confirmoverwrite nls bind pde ui messages pdeuimessages save to workspace savetoworkspace confirm overwrite text confirmoverwritetext result confirm image type imagetype get image type getimagetype result byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream image loader imageloader image loader imageloader image loader imageloader image loader imageloader data image data imagedata image element imageelement data get image data getimagedata image loader imageloader save image type imagetype byte array input stream bytearrayinputstream byte array input stream bytearrayinputstream to byte array tobytearray exists file set contents setcontents file create file get parent getparent refresh local refreshlocal i resource iresource depth core exception coreexception pde plugin pdeplugin log get image type getimagetype i path ipath path string extension path get file extension getfileextension nls gif equals ignore case equalsignorecase extension swt image gif nls bmp equals ignore case equalsignorecase extension swt image bmp nls png equals ignore case equalsignorecase extension swt image png nls ico equals ignore case equalsignorecase extension swt image ico swt image png