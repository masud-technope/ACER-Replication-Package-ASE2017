copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde tests target java java net url java util java util zip zip entry zipentry java util zip zip file zipfile junit framework test case testcase org eclipse core runtime org eclipse equinox framework admin frameworkadmin bundle info bundleinfo org eclipse pde core plugin target platform targetplatform org eclipse pde core target org eclipse pde tests pde tests plugin pdetestsplugin org osgi framework service reference servicereference common utility methods target definition tests abstract target test abstracttargettest test case testcase returns target platform service code code target platform service i target platform service itargetplatformservice get target service gettargetservice service reference servicereference reference pde tests plugin pdetestsplugin get bundle context getbundlecontext get service reference getservicereference i target platform service itargetplatformservice get name getname assert not null assertnotnull missing target platform service reference reference i target platform service itargetplatformservice pde tests plugin pdetestsplugin get bundle context getbundlecontext get service getservice reference extracts bundles returns path root directory plug ins path plug ins directory exception i path ipath extract abcde plugins extractabcdeplugins exception i path ipath state location statelocation pde tests plugin pdetestsplugin get default getdefault get state location getstatelocation i path ipath location state location statelocation append abc de abcde plugins location to file tofile exists recursively delete file dir location to file tofile delete dir do un zip dounzip location tests targets abc de abcde plugins zip extracts plugins link extract abcde plugins extractabcdeplugins puts linked folder setup linked eclipse plugins returns location plugins directory path plug ins directory exception i path ipath extract linked plugins extractlinkedplugins exception i path ipath state location statelocation pde tests plugin pdetestsplugin get default getdefault get state location getstatelocation i path ipath location state location statelocation append abc de abcde linked eclipse plugins location to file tofile exists recursively delete file dir location to file tofile delete dir do un zip dounzip location tests targets abc de abcde plugins zip extracts classic plug ins archive returns path root directory plug ins path plug ins directory exception i path ipath extract classic plugins extractclassicplugins exception extract skeleton i path ipath state location statelocation pde tests plugin pdetestsplugin get default getdefault get state location getstatelocation i path ipath location state location statelocation append classic eclipse location to file tofile exists location append plugins do un zip dounzip location tests targets classic plugins zip location append plugins extracts modified jdt features archive returns path root directory features plug ins path root directory exception i path ipath extract modified features extractmodifiedfeatures exception i path ipath state location statelocation pde tests plugin pdetestsplugin get default getdefault get state location getstatelocation i path ipath location state location statelocation append modified jdt features location to file tofile exists location do un zip dounzip location tests targets modified jdt features zip mac delete mac launching bundle standard mac build plug would n wouldn exist platform getos equals platform macosx file mac bundle macbundle location append plugins append org eclipse jdt launching macosx jar to file tofile mac bundle macbundle exists assert true asserttrue unable delete test mac launching bundle mac bundle macbundle delete location extracts multiple versions plug ins archive returns path root directory plug ins path directory bundles exception i path ipath extract multi version plugins extractmultiversionplugins exception i path ipath state location statelocation pde tests plugin pdetestsplugin get default getdefault get state location getstatelocation i path ipath location state location statelocation append multi versions location to file tofile exists location do un zip dounzip location tests targets multi versions zip location extracts classic plug ins archive returns path root directory plug ins path plug ins directory exception i path ipath extract classic non bundle manifest plugins extractclassicnonbundlemanifestplugins exception extract skeleton i path ipath state location statelocation pde tests plugin pdetestsplugin get default getdefault get state location getstatelocation i path ipath location state location statelocation append eclipse nbm location to file tofile exists location append plugins do un zip dounzip location tests targets eclipse nbm zip location append plugins unzips archive location param location path local file system param archive path archivepath path archive relative test plug io exception ioexception i path ipath do un zip dounzip i path ipath location string archive path archivepath io exception ioexception url zipurl pde tests plugin pdetestsplugin get bundle context getbundlecontext get bundle getbundle get entry getentry archive path archivepath path zip path zippath path file file locator filelocator tofileurl zipurl get file getfile get absolute path getabsolutepath zip file zipfile zip file zipfile zip file zipfile zip path zippath to file tofile enumeration entries zip file zipfile entries i path ipath parent location remove last segments removelastsegments entries has more elements hasmoreelements zip entry zipentry entry zip entry zipentry entries next element nextelement entry is directory isdirectory i path ipath entry path entrypath parent append entry get name getname file dir entry path entrypath remove last segments removelastsegments to file tofile dir mkdirs file file entry path entrypath to file tofile file create new file createnewfile input stream inputstream input stream inputstream buffered input stream bufferedinputstream zip file zipfile get input stream getinputstream entry bytes local target definition tests localtargetdefinitiontests get input stream as byte array getinputstreamasbytearray input stream inputstream input stream inputstream close buffered output stream bufferedoutputstream output stream outputstream buffered output stream bufferedoutputstream file output stream fileoutputstream file output stream outputstream write bytes output stream outputstream close zip file zipfile close parent recursively deletes directory files param dir directory delete delete file dir file files dir list files listfiles file file files file is directory isdirectory delete file file delete dir delete reset target platform original settings test target platform core exception coreexception reset target platform resettargetplatform core exception coreexception i target definition itargetdefinition definition get default target platorm getdefaulttargetplatorm set target platform settargetplatform definition returns target definition target service method overridden link workspace target definition tests workspacetargetdefinitiontests workspace target definition target definition i target definition itargetdefinition get new target getnewtarget get target service gettargetservice new target newtarget returns target platform takes target weaving account instance eclipse target platform reset changing test settings target platform i target definition itargetdefinition get default target platorm getdefaulttargetplatorm i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation container get target service gettargetservice new profile location newprofilelocation target platform targetplatform get default location getdefaultlocation file platform get configuration location getconfigurationlocation geturl get file getfile get absolute path getabsolutepath definition set target locations settargetlocations i target location itargetlocation container definition synch ronously synchronously sets target platform based definition method called block call link reset target platform resettargetplatform param target target definition code code core exception coreexception set target platform settargetplatform i target definition itargetdefinition target core exception coreexception create job load target join job thread load target definition job loadtargetdefinitionjob job load target definition job loadtargetdefinitionjob target job schedule job join interrupted exception interruptedexception assert false assertfalse target platform reset int errupted interrupted i target handle itargethandle handle target handle target get handle gethandle assert equals assertequals wrong target platform handle preference setting handle get target service gettargetservice get workspace target handle getworkspacetargethandle collects bundle symbolic names param infos bundles bundle symbolic names collect all symbolic names collectallsymbolicnames list infos hash set hashset infos size iterator iterator infos iterator iterator has next hasnext bundle info bundleinfo info bundle info bundleinfo iterator add info get symbolic name getsymbolicname retrieves bundles source code target definition returning list bundle infos bundleinfos param target target definition bundle infos bundleinfos list get all bundle infos getallbundleinfos i target definition itargetdefinition target exception target is resolved isresolved target resolve target bundle targetbundle bundles target get bundles getbundles list list array list arraylist bundles length target bundle targetbundle bundle bundles list add bundle get bundle info getbundleinfo list returns list bundles included container param container bundle container included bundles exception list get bundle infos getbundleinfos i target location itargetlocation container exception target bundle targetbundle bundles container get bundles getbundles list list array list arraylist bundles length target bundle targetbundle bundle bundles list add bundle get bundle info getbundleinfo list