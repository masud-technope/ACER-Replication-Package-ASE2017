copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde tests performance parts java java net url java util java util zip zip entry zipentry java util zip zip file zipfile junit framework test junit framework test suite testsuite org eclipse core resources org eclipse core runtime org eclipse osgi service resolver bundle specification bundlespecification org eclipse pde core plugin i plugin model base ipluginmodelbase org eclipse pde core plugin plugin registry pluginregistry org eclipse pde core project i bundle project description ibundleprojectdescription org eclipse pde core project i bundle project service ibundleprojectservice org eclipse pde core target org eclipse pde internal core pde core pdecore org eclipse pde tests pde tests plugin pdetestsplugin org eclipse pde tests target local target definition tests localtargetdefinitiontests org eclipse pde tests util test bundle creator testbundlecreator org eclipse test performance dimension org eclipse test performance performance test case performancetestcase org osgi framework version tests time takes resolve target definition target platform performance tests operations iter ate iterate large number times account inc onsistency inconsistency target tests consists simple bundles manifest generated link test bundle creator testbundlecreator inc reasing increasing numbers required bundles manifest test bundle testbundle required bundles test bundle testbundle test bundle testbundle target platform perf test targetplatformperftest performance test case performancetestcase string search test workspace example workspace project exampleworkspaceproject string search test external test bundle testbundle search test external count string test plugin location tests performance target target perf test plugins targetperftestplugins zip test suite test suite testsuite target platform perf test targetplatformperftest resolves target definition test resolve target definition testresolvetargetdefinition exception nls tag as summary tagassummary resolve target definition dimension elapsed process i path ipath test bundles testbundles extract target perf test plugins extracttargetperftestplugins i target platform service itargetplatformservice tps i target platform service itargetplatformservice pde core pdecore get default getdefault acquire service acquireservice i target platform service itargetplatformservice get name getname i target definition itargetdefinition original target originaltarget tps new target newtarget original target originaltarget set target locations settargetlocations i target location itargetlocation tps new directory location newdirectorylocation test bundles testbundles to portable string toportablestring tps save target definition savetargetdefinition original target originaltarget i target handle itargethandle handle original target originaltarget get handle gethandle warm iterations target definition loop resolved i target definition itargetdefinition target handle get target definition gettargetdefinition target resolve null progress monitor nullprogressmonitor test iterations target definition loop resolved i target definition itargetdefinition target handle get target definition gettargetdefinition start measuring startmeasuring target resolve null progress monitor nullprogressmonitor stop measuring stopmeasuring commit measurements commitmeasurements assert performance assertperformance searches model registry plug ins efficient model retrieval test search model registry testsearchmodelregistry exception nls tag as summary tagassummary resolve target definition dimension elapsed process i path ipath test bundles testbundles extract target perf test plugins extracttargetperftestplugins i bundle project service ibundleprojectservice service i bundle project service ibundleprojectservice pde core pdecore get default getdefault acquire service acquireservice i bundle project service ibundleprojectservice get name getname i target platform service itargetplatformservice tps i target platform service itargetplatformservice pde core pdecore get default getdefault acquire service acquireservice i target platform service itargetplatformservice get name getname create workspace model i workspace iworkspace resources plugin resourcesplugin get workspace getworkspace i project iproject proj get root getroot get project getproject search test workspace assert false assertfalse project exist proj exists i bundle project description ibundleprojectdescription description service get description getdescription proj description set symbolic name setsymbolicname search test workspace description set bundle version setbundleversion version description apply build project model build incremental project builder incrementalprojectbuilder full build target active i target definition itargetdefinition target tps new target newtarget target set target locations settargetlocations i target location itargetlocation tps new directory location newdirectorylocation test bundles testbundles to portable string toportablestring target resolve load target definition job loadtargetdefinitionjob job load target definition job loadtargetdefinitionjob target job run in workspace runinworkspace null progress monitor nullprogressmonitor warm iterations execute search test executesearchtest test iterations start measuring startmeasuring execute search test executesearchtest stop measuring stopmeasuring commit measurements commitmeasurements assert performance assertperformance delete created project proj delete restore target platform i target definition itargetdefinition default target defaulttarget tps new default target newdefaulttarget load target definition job loadtargetdefinitionjob restore job restorejob load target definition job loadtargetdefinitionjob default target defaulttarget restore job restorejob run in workspace runinworkspace loads target definition active target platform test change target platform testchangetargetplatform exception tag as summary tagassummary change target platform dimension elapsed process nls i path ipath test bundles testbundles extract target perf test plugins extracttargetperftestplugins i target platform service itargetplatformservice tps i target platform service itargetplatformservice pde core pdecore get default getdefault acquire service acquireservice i target platform service itargetplatformservice get name getname i target definition itargetdefinition target tps new target newtarget target set target locations settargetlocations i target location itargetlocation tps new directory location newdirectorylocation test bundles testbundles to portable string toportablestring target resolve load target definition job loadtargetdefinitionjob job load target definition job loadtargetdefinitionjob target warm iterations execute test thread job run in workspace runinworkspace null progress monitor nullprogressmonitor test iterations execute test thread start measuring startmeasuring job run in workspace runinworkspace null progress monitor nullprogressmonitor stop measuring stopmeasuring commit measurements commitmeasurements assert performance assertperformance restore target platform i target definition itargetdefinition default target defaulttarget tps new default target newdefaulttarget load target definition job loadtargetdefinitionjob restore job restorejob load target definition job loadtargetdefinitionjob default target defaulttarget restore job restorejob run in workspace runinworkspace execute search test executesearchtest i plugin model base ipluginmodelbase models models plugin registry pluginregistry get all models getallmodels assert equals assertequals search test external count models length models plugin registry pluginregistry get workspace models getworkspacemodels assert equals assertequals models length models plugin registry pluginregistry get external models getexternalmodels assert equals assertequals search test external count models length i plugin model base ipluginmodelbase model i workspace iworkspace resources plugin resourcesplugin get workspace getworkspace model plugin registry pluginregistry find model findmodel search test workspace assert not null assertnotnull model i project iproject project get root getroot get project getproject search test workspace model plugin registry pluginregistry find model findmodel project assert not null assertnotnull model model plugin registry pluginregistry find model findmodel search test external open required bundles openrequiredbundles model hash set hashset checks model exists required bundles exist models plugin registry param model model dependencies param all bundle names allbundlenames symbolic names looked prevent stack over flows overflows open required bundles openrequiredbundles i plugin model base ipluginmodelbase model all bundle names allbundlenames assert not null assertnotnull model bundle specification bundlespecification required model get bundle description getbundledescription get required bundles getrequiredbundles required length all bundle names allbundlenames required get name getname all bundle names allbundlenames add required get name getname model plugin registry pluginregistry find model findmodel required get bundle getbundle open required bundles openrequiredbundles model all bundle names allbundlenames i path ipath extract target perf test plugins extracttargetperftestplugins exception i path ipath state location statelocation pde tests plugin pdetestsplugin get default getdefault get state location getstatelocation i path ipath location state location statelocation append target perf test plugins targetperftestplugins location to file tofile exists do un zip dounzip location test plugin location location unzips archive location param location path local file system param archive path archivepath path archive relative test plug io exception ioexception i path ipath do un zip dounzip i path ipath location string archive path archivepath io exception ioexception url zipurl pde tests plugin pdetestsplugin get bundle context getbundlecontext get bundle getbundle get entry getentry archive path archivepath path zip path zippath path file file locator filelocator tofileurl zipurl get file getfile get absolute path getabsolutepath zip file zipfile zip file zipfile zip file zipfile zip path zippath to file tofile enumeration entries zip file zipfile entries i path ipath parent location remove last segments removelastsegments entries has more elements hasmoreelements zip entry zipentry entry zip entry zipentry entries next element nextelement entry is directory isdirectory i path ipath entry path entrypath parent append entry get name getname file dir entry path entrypath remove last segments removelastsegments to file tofile dir mkdirs file file entry path entrypath to file tofile file create new file createnewfile input stream inputstream input stream inputstream buffered input stream bufferedinputstream zip file zipfile get input stream getinputstream entry bytes local target definition tests localtargetdefinitiontests get input stream as byte array getinputstreamasbytearray input stream inputstream input stream inputstream close buffered output stream bufferedoutputstream output stream outputstream buffered output stream bufferedoutputstream file output stream fileoutputstream file output stream outputstream write bytes output stream outputstream close zip file zipfile close parent