copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde api tools internal java file java file filter filefilter java file input stream fileinputstream java file output stream fileoutputstream java io exception ioexception java input stream inputstream java output stream outputstream java unsupported encoding exception unsupportedencodingexception java util array list arraylist java util hash map hashmap java util hash set hashset java util iterator java util list java util map entry java util javax xml parsers document builder documentbuilder javax xml parsers document builder factory documentbuilderfactory javax xml parsers factory configuration error factoryconfigurationerror javax xml parsers parser configuration exception parserconfigurationexception org eclipse core resources i save context isavecontext org eclipse core resources i save participant isaveparticipant org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse core runtime i status istatus org eclipse core runtime path org eclipse core runtime platform org eclipse core runtime status org eclipse core runtime preferences i eclipse preferences ieclipsepreferences org eclipse core runtime preferences i preferences service ipreferencesservice org eclipse core runtime preferences i scope context iscopecontext org eclipse core runtime preferences instance scope instancescope org eclipse pde api tools internal model api baseline apibaseline org eclipse pde api tools internal model api model cache apimodelcache org eclipse pde api tools internal model api model factory apimodelfactory org eclipse pde api tools internal model stub api component stubapicomponent org eclipse pde api tools internal model workspace baseline workspacebaseline org eclipse pde api tools internal provisional api plugin apiplugin org eclipse pde api tools internal provisional i api baseline manager iapibaselinemanager org eclipse pde api tools internal provisional model i api baseline iapibaseline org eclipse pde api tools internal provisional model i api component iapicomponent org eclipse pde api tools internal util util org eclipse pde core plugin i plugin model base ipluginmodelbase org eclipse pde core plugin plugin registry pluginregistry org eclipse pde internal core dependency manager dependencymanager org dom document org dom element org dom node list nodelist org xml sax sax exception saxexception org xml sax helpers default handler defaulthandler manager main tain maintain persist restore access update api baselines manager lazy caches built main tained maintained requests pre loaded manager initialized noinstantiate intended instantiated clients api baseline manager apibaselinemanager i api baseline manager iapibaselinemanager i save participant isaveparticipant constant api baseline code api profile code nls string baseline api profile constant representing workspace link i api baseline iapibaseline code workspace code nls string workspace api baseline workspace constant representing file extension baseline file code profile code nls string baseline file extension profile main cache manager form cache pre hash map hashmap string baseline id baselineid link i api baseline iapibaseline pre hash map hashmap string i api baseline iapibaseline baselinecache cache baseline names location infos hash map hashmap string string handle cache handlecache hash set hashset string has infos hasinfos current link i api baseline iapibaseline string default baseline defaultbaseline current workspace baseline i api baseline iapibaseline workspace baseline workspacebaseline save location per sisting persisting cache manager i path ipath save location savelocation cache baselines saved f needs saving fneedssaving singleton instance api baseline manager apibaselinemanager f instance finstance constructor api baseline manager apibaselinemanager framework framework api plugin apiplugin get default getdefault add save participant addsaveparticipant nls save location savelocation api plugin apiplugin get default getdefault get state location getstatelocation append api profiles add trailing separator addtrailingseparator returns singleton instance manager singleton instance manager api baseline manager apibaselinemanager get manager getmanager f instance finstance f instance finstance api baseline manager apibaselinemanager api plugin apiplugin is running in framework isrunninginframework f instance finstance override i api baseline iapibaseline get api baseline getapibaseline string initialize state cache initializestatecache baselinecache override i api baseline iapibaseline get api base lines getapibaselines initialize state cache initializestatecache baselinecache values to array toarray i api baseline iapibaseline baselinecache size override add api baseline addapibaseline i api baseline iapibaseline new baseline newbaseline new baseline newbaseline initialize state cache initializestatecache baselinecache new baseline newbaseline get name getname new baseline newbaseline api baseline apibaseline new baseline newbaseline peek infos peekinfos has infos hasinfos add new baseline newbaseline get name getname f needs saving fneedssaving override remove api baseline removeapibaseline string initialize state cache initializestatecache i api baseline iapibaseline baseline baselinecache remove baseline baseline dispose success save location savelocation success remove file system filesystem file file save location savelocation append baseline file extension to file tofile file exists success file delete f needs saving fneedssaving flush model cache api model cache apimodelcache get cache getcache remove element info removeelementinfo baseline success loads infos baseline persisted storage profile file param baseline baseline core exception coreexception exception occurs loading baseline infos load baseline infos loadbaselineinfos i api baseline iapibaseline baseline core exception coreexception initialize state cache initializestatecache has infos hasinfos baseline get name getname string filename handle cache handlecache baseline get name getname filename file file file filename file exists file input stream fileinputstream input stream inputstream input stream inputstream file input stream fileinputstream file restore baseline restorebaseline baseline input stream inputstream io exception ioexception api plugin apiplugin log input stream inputstream input stream inputstream close io exception ioexception has infos hasinfos add baseline get name getname initializes baseline cache lazily performs work current cache created factory configuration error factoryconfigurationerror parser configuration exception parserconfigurationexception initialize state cache initializestatecache time system current time millis currenttimemillis baselinecache handle cache handlecache hash map hashmap has infos hasinfos hash set hashset baselinecache hash map hashmap api plugin apiplugin is running in framework isrunninginframework file baselines save location savelocation to file tofile list files listfiles file filter filefilter path name pathname path name pathname get name getname ends with endswith baseline file extension baselines i api baseline iapibaseline new baseline newbaseline baselines length file baseline baselines baseline exists new baseline newbaseline api baseline apibaseline path baseline get name getname remove file extension removefileextension to string tostring handle cache handlecache new baseline newbaseline get name getname baseline get absolute path getabsolutepath baselinecache new baseline newbaseline get name getname new baseline newbaseline string def get default profile pref getdefaultprofilepref i api baseline iapibaseline baseline baselinecache def default baseline defaultbaseline baseline def api plugin apiplugin debug baseline manager nls nls system println time initialize cache system current time millis currenttimemillis time api baseline saved preferences code code isn string get default profile pref getdefaultprofilepref i preferences service ipreferencesservice service platform get preferences service getpreferencesservice service get string getstring api plugin apiplugin plugin baseline i scope context iscopecontext instance scope instancescope instance per sists persists cached elements individual xml files named api baseline io exception ioexception persist state cache persiststatecache core exception coreexception io exception ioexception save location savelocation i eclipse preferences ieclipsepreferences node instance scope instancescope instance get node getnode api plugin apiplugin plugin default baseline defaultbaseline node baseline default baseline defaultbaseline node remove baseline baselinecache has infos hasinfos file dir file save location savelocation toosstring dir exists dir mkdirs string file file file output stream fileoutputstream fout i api baseline iapibaseline baseline entry string i api baseline iapibaseline entry baselinecache entry set entryset entry get key getkey baseline entry get value getvalue has infos hasinfos baseline get name getname file save location savelocation append baseline file extension to file tofile file exists file create new file createnewfile fout file output stream fileoutputstream file write baseline description writebaselinedescription baseline fout save api baseline order reload handle cache handlecache baseline get name getname file get absolute path getabsolutepath fout flush fout fout close writes current link i api baseline iapibaseline xml output stream param stream core exception coreexception write baseline description writebaselinedescription i api baseline iapibaseline baseline output stream outputstream stream core exception coreexception string xml getprofilexml baseline stream write xml get bytes getbytes i api core constants iapicoreconstants utf unsupported encoding exception unsupportedencodingexception abort error writing pofile desc rition descrition io exception ioexception abort error writing pofile desc rition descrition returns xml description baseline param baseline api baseline xml string representation baseline core exception coreexception exception occurs retrieving xml string representation string getprofilexml i api baseline iapibaseline baseline core exception coreexception document document util new document newdocument element root document create element createelement i api xml constants iapixmlconstants element api profile apiprofile document append child appendchild root root set attribute setattribute i api xml constants iapixmlconstants attr baseline get name getname root set attribute setattribute i api xml constants iapixmlconstants attr version i api xml constants iapixmlconstants api profile current version string location baseline get location getlocation location root set attribute setattribute i api xml constants iapixmlconstants attr location location element celement i api component iapicomponent components baseline get api components getapicomponents max components length max i api component iapicomponent comp components comp is system component issystemcomponent celement document create element createelement i api xml constants iapixmlconstants element api component apicomponent celement set attribute setattribute i api xml constants iapixmlconstants attr comp get symbolic name getsymbolicname celement set attribute setattribute i api xml constants iapixmlconstants attr version comp get version getversion celement set attribute setattribute i api xml constants iapixmlconstants attr location path comp get location getlocation to portable string toportablestring root append child appendchild celement util serialize document serializedocument document core exception message underlying exception param message error message param underlying exception code code core exception coreexception abort string message throwable core exception coreexception core exception coreexception status i status istatus error api plugin apiplugin plugin message restore baseline input stream persisted baseline param baseline baseline restore param stream input stream core exception coreexception unable restore baseline restore baseline restorebaseline i api baseline iapibaseline baseline input stream inputstream stream core exception coreexception start system current time millis currenttimemillis document builder documentbuilder parser parser document builder factory documentbuilderfactory new instance newinstance new document builder newdocumentbuilder parser set error handler seterrorhandler default handler defaulthandler parser configuration exception parserconfigurationexception abort error res toring restoring api baseline factory configuration error factoryconfigurationerror abort error res toring restoring api baseline document document parser parse stream element root document get document element getdocumentelement root get node name getnodename equals i api xml constants iapixmlconstants element api profile apiprofile string baseline location baselinelocation root get attribute getattribute i api xml constants iapixmlconstants attr location baseline location baselinelocation baseline location baselinelocation equals util empty string baseline set location setlocation path from portable string fromportablestring baseline location baselinelocation toosstring pooled components node list nodelist children root get elements by tag name getelementsbytagname i api xml constants iapixmlconstants element api component apicomponent list i api component iapicomponent components array list arraylist children get length getlength element component node componentnode element children item component node componentnode get parent node getparentnode equals root string location component node componentnode get attribute getattribute i api xml constants iapixmlconstants attr location i api component iapicomponent component api model factory apimodelfactory new api component newapicomponent baseline path from portable string fromportablestring location toosstring component components add component pooled components xml file version version pools removed children root get elements by tag name getelementsbytagname i api xml constants iapixmlconstants element pool i api component iapicomponent component children get length getlength string location element children item get attribute getattribute i api xml constants iapixmlconstants attr location i path ipath pool path poolpath path from portable string fromportablestring location node list nodelist component nodes componentnodes root get elements by tag name getelementsbytagname i api xml constants iapixmlconstants element api component apicomponent component nodes componentnodes get length getlength element comp element compelement element component nodes componentnodes item string comp element compelement get attribute getattribute i api xml constants iapixmlconstants attr string ver comp element compelement get attribute getattribute i api xml constants iapixmlconstants attr version string buffer stringbuffer string buffer stringbuffer append append append ver file file pool path poolpath append to string tostring to file tofile file exists nls append jar file pool path poolpath append to string tostring to file tofile component api model factory apimodelfactory new api component newapicomponent baseline file get absolute path getabsolutepath component components add component baseline add api components addapicomponents components to array toarray i api component iapicomponent components size io exception ioexception abort error res toring restoring api baseline sax exception saxexception abort error res toring restoring api baseline stream close io exception ioexception api plugin apiplugin log baseline nls abort invalid baseline description api plugin apiplugin debug baseline manager nls nls system println time restore persisted baseline system current time millis currenttimemillis start override saving i save context isavecontext context core exception coreexception f needs saving fneedssaving persist state cache persiststatecache clean state cache cleanstatecache f needs saving fneedssaving io exception ioexception api plugin apiplugin log cleans baseline memory cache baselines clean state cache cleanstatecache baselinecache i api baseline iapibaseline baseline entry string i api baseline iapibaseline entry baselinecache entry set entryset baseline entry get value getvalue baseline get name getname equals default baseline defaultbaseline baseline dispose has infos hasinfos remove baseline get name getname iter remove returns existing baseline param existing baseline is existing profile name isexistingprofilename string baselinecache baselinecache key set keyset cleans manager baselinecache dispose existing baselines iterator i api baseline iapibaseline iterator baselinecache values iterator iterator has next hasnext iterator dispose baselinecache clear workspace baseline workspacebaseline workspace baseline workspacebaseline dispose handle cache handlecache handle cache handlecache clear has infos hasinfos has infos hasinfos clear stub api component stubapicomponent dispose all caches disposeallcaches api plugin apiplugin is running in framework isrunninginframework api plugin apiplugin get default getdefault remove save participant removesaveparticipant override done saving donesaving i save context isavecontext context override prepare to save preparetosave i save context isavecontext context core exception coreexception override rollback i save context isavecontext context override i api baseline iapibaseline get default api baseline getdefaultapibaseline initialize state cache initializestatecache baselinecache default baseline defaultbaseline override set default api baseline setdefaultapibaseline string f needs saving fneedssaving default baseline defaultbaseline override i api baseline iapibaseline get workspace baseline getworkspacebaseline api plugin apiplugin is running in framework isrunninginframework workspace baseline workspacebaseline workspace baseline workspacebaseline create workspace baseline createworkspacebaseline core exception coreexception api plugin apiplugin log workspace baseline workspacebaseline disposes workspace baseline created request dispose workspace baseline disposeworkspacebaseline workspace baseline workspacebaseline api plugin apiplugin debug baseline manager nls system println nls disposing workspace baseline workspace baseline workspacebaseline dispose stub api component stubapicomponent dispose all caches disposeallcaches workspace baseline workspacebaseline creates workspace link i api baseline iapibaseline workspace link i api baseline iapibaseline code code i api baseline iapibaseline create workspace baseline createworkspacebaseline core exception coreexception time system current time millis currenttimemillis i api baseline iapibaseline baseline baseline workspace baseline workspacebaseline populate projects api aware string ids dependency manager dependencymanager get self and dependencies getselfanddependencies plugin registry pluginregistry get workspace models getworkspacemodels list i api component iapicomponent components list componentslist array list arraylist ids size i api component iapicomponent api component apicomponent i plugin model base ipluginmodelbase model string ids model plugin registry pluginregistry find model findmodel model api component apicomponent api model factory apimodelfactory new api component newapicomponent baseline model api component apicomponent components list componentslist add api component apicomponent core exception coreexception api plugin apiplugin log baseline add api components addapicomponents components list componentslist to array toarray i api component iapicomponent components list componentslist size api plugin apiplugin debug baseline manager nls nls system println time create workspace baseline system current time millis currenttimemillis time baseline override i api component iapicomponent get workspace component getworkspacecomponent string symbolic name symbolicname i api baseline iapibaseline baseline get workspace baseline getworkspacebaseline baseline baseline get api component getapicomponent symbolic name symbolicname