copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde tests java file junit framework test junit framework test suite testsuite org eclipse core resources i project iproject org eclipse core resources resources plugin resourcesplugin org eclipse core runtime org eclipse jdt core i java project ijavaproject org eclipse jdt core tool factory toolfactory org eclipse jdt core util i class file reader iclassfilereader org eclipse jdt launching java runtime javaruntime org eclipse jdt launching environments i execution environment iexecutionenvironment org eclipse pde core plugin plugin registry pluginregistry org eclipse pde internal core exports feature export info featureexportinfo org eclipse pde internal core exports plugin export operation pluginexportoperation org eclipse pde tests pde test case pdetestcase org eclipse pde tests pde tests plugin pdetestsplugin org eclipse pde tests util project utils projectutils tests exporting bundles export bundle tests exportbundletests pde test case pdetestcase i path ipath export path pde tests plugin pdetestsplugin get default getdefault get state location getstatelocation append export test suite test suite testsuite export bundle tests exportbundletests deletes project param core exception coreexception delete project deleteproject string core exception coreexception i project iproject project resources plugin resourcesplugin get workspace getworkspace get root getroot get project getproject project exists project delete deletes folder param dir file delete delete folder deletefolder file dir dir is directory isdirectory dir list length dir delete file files dir list files listfiles file file files delete folder deletefolder file dir list length dir delete dir delete valid ates validates target level generated file param zip file name zipfilename location archive file param zip entry name zipentryname path file archive param major expected major file version validate target level validatetargetlevel string zip file name zipfilename string zip entry name zipentryname major i class file reader iclassfilereader reader tool factory toolfactory create default class file reader createdefaultclassfilereader zip file name zipfilename zip entry name zipentryname i class file reader iclassfilereader assert equals assertequals wrong major version major reader get major version getmajorversion exports plug project custom execution environment valid ates validates file target level exception test export custom environment testexportcustomenvironment exception i execution environment iexecutionenvironment env java runtime javaruntime get execution environments manager getexecutionenvironmentsmanager get environment getenvironment environment analyzer delegate environmentanalyzerdelegate sound i java project ijavaproject project project utils projectutils create plugin project createpluginproject sound export env assert true asserttrue project created project exists feature export info featureexportinfo info feature export info featureexportinfo info to directory todirectory info use jar format usejarformat info export source exportsource info allow binary cycles allowbinarycycles info use workspace compiled classes useworkspacecompiledclasses info destination directory destinationdirectory export path toosstring info zip file name zipfilename info items object plugin registry pluginregistry find model findmodel project get project getproject info sig ning info signinginfo info qualifier vxyz plugin export operation pluginexportoperation job plugin export operation pluginexportoperation info test export job schedule job join job has ant errors hasanterrors fail export job ant errors i status istatus result job get result getresult assert true asserttrue export job errors result isok verify exported bundle exists i path ipath path export path append plugins sound export jar jar file copied file system bug path to file tofile exists thread sleep interrupted exception interruptedexception assert true asserttrue missing exported bundle path to file tofile exists validate target level validatetargetlevel path toosstring sound export activator delete project deleteproject sound export delete folder deletefolder export path to file tofile exports plug project execution environment valid ates validates file target level exception test export testexport environment exception i execution environment iexecutionenvironment env java runtime javaruntime get execution environments manager getexecutionenvironmentsmanager get environment getenvironment i java project ijavaproject project project utils projectutils create plugin project createpluginproject export env assert true asserttrue project created project exists feature export info featureexportinfo info feature export info featureexportinfo info to directory todirectory info use jar format usejarformat info export source exportsource info allow binary cycles allowbinarycycles info use workspace compiled classes useworkspacecompiledclasses info destination directory destinationdirectory export path toosstring info zip file name zipfilename info items object plugin registry pluginregistry find model findmodel project get project getproject info sig ning info signinginfo info qualifier vxyz system current time millis currenttimemillis plugin export operation pluginexportoperation job plugin export operation pluginexportoperation info test export system current time millis currenttimemillis job schedule system current time millis currenttimemillis job join system current time millis currenttimemillis job has ant errors hasanterrors fail export job ant errors system current time millis currenttimemillis i status istatus result job get result getresult assert true asserttrue export job errors result isok system current time millis currenttimemillis ver iry veriry exported bundle exists i path ipath path export path append plugins export jar system current time millis currenttimemillis did path exist before sleep didpathexistbeforesleep path to file tofile exists delay path doesn exist work worth path to file tofile exists thread sleep interrupted exception interruptedexception did path exist after sleep didpathexistaftersleep path to file tofile exists system current time millis currenttimemillis print time pattern test breaks bug debug statement required print every time everytime pass fail system println bug system println constructor plugin export operation pluginexportoperation time system println schedule time system println job join time system println ant error time system println job result time system println append time system println thread sleep time file time system println file exist sleep did path exist before sleep didpathexistbeforesleep system println file exist sleep did path exist after sleep didpathexistaftersleep system println n end nend bug path to file tofile exists system println bug file export contents exportcontents export path to file tofile export contents exportcontents is directory isdirectory plugin feature folders file children export contents exportcontents list files listfiles file element children element is directory isdirectory system println directory element get name getname file sub children subchildren element list files listfiles file sub element subelement sub children subchildren sub element subelement is directory isdirectory system println directory sub element subelement get name getname system println file sub element subelement get name getname system println file element get name getname system println n end nend bug assert true asserttrue missing exported bundle path to file tofile exists validate target level validatetargetlevel path toosstring export activator delete project deleteproject export delete folder deletefolder export path to file tofile