copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core search java file java util array list arraylist java util hash set hashset org eclipse core resources i project iproject org eclipse core resources i resource iresource org eclipse core runtime i path ipath org eclipse core runtime path org eclipse jdt core i java element ijavaelement org eclipse jdt core i java project ijavaproject org eclipse jdt core i package fragment ipackagefragment org eclipse jdt core i package fragment root ipackagefragmentroot org eclipse jdt core java model exception javamodelexception org eclipse jdt core search i java search scope ijavasearchscope org eclipse jdt core search search engine searchengine org eclipse pde core plugin i fragment model ifragmentmodel org eclipse pde core plugin i plugin iplugin org eclipse pde core plugin i plugin base ipluginbase org eclipse pde core plugin i plugin import ipluginimport org eclipse pde core plugin i plugin library ipluginlibrary org eclipse pde core plugin i plugin model base ipluginmodelbase org eclipse pde core plugin plugin registry pluginregistry org eclipse pde internal core classpath util core classpathutilcore org eclipse pde internal core pde manager pdemanager plugin java search util pluginjavasearchutil i plugin model base ipluginmodelbase get plugin imports getpluginimports i plugin import ipluginimport dep get plugin imports getpluginimports dep get id getid i plugin model base ipluginmodelbase get plugin imports getpluginimports string plugin import d pluginimportid hash set hashset i plugin model base ipluginmodelbase hash set hashset i plugin model base ipluginmodelbase collect all prerequisites collectallprerequisites plugin registry pluginregistry find model findmodel plugin import d pluginimportid to array toarray i plugin model base ipluginmodelbase size collect all prerequisites collectallprerequisites i plugin model base ipluginmodelbase model hash set hashset i plugin model base ipluginmodelbase model add model i plugin import ipluginimport imports model get plugin base getpluginbase get imports getimports imports length imports is reexported isreexported i plugin model base ipluginmodelbase child plugin registry pluginregistry find model findmodel imports get id getid child collect all prerequisites collectallprerequisites child i package fragment ipackagefragment collect package fragments collectpackagefragments i plugin model base ipluginmodelbase models i java project ijavaproject parent project parentproject filter empty packages filteremptypackages java model exception javamodelexception array list arraylist i package fragment ipackagefragment result array list arraylist i package fragment ipackagefragment i package fragment root ipackagefragmentroot roots parent project parentproject get all package fragment roots getallpackagefragmentroots models length i plugin model base ipluginmodelbase model models i resource iresource resource model get underlying resource getunderlyingresource resource array list arraylist path library paths librarypaths array list arraylist path add library paths addlibrarypaths model library paths librarypaths roots length library paths librarypaths roots get path getpath extract package fragments extractpackagefragments roots result filter empty packages filteremptypackages i project iproject project resource get project getproject roots length i java project ijavaproject j project jproject i java project ijavaproject roots get parent getparent j project jproject get project getproject equals project extract package fragments extractpackagefragments roots result filter empty packages filteremptypackages result to array toarray i package fragment ipackagefragment result size extract package fragments extractpackagefragments i package fragment root ipackagefragmentroot root array list arraylist i package fragment ipackagefragment result filter empty filterempty i java element ijavaelement children root get children getchildren children length i package fragment ipackagefragment fragment i package fragment ipackagefragment children filter empty filterempty fragment has children haschildren result add fragment java model exception javamodelexception add library paths addlibrarypaths i plugin model base ipluginmodelbase model array list arraylist path library paths librarypaths i plugin base ipluginbase plugin model get plugin base getpluginbase i fragment model ifragmentmodel fragments i fragment model ifragmentmodel plugin i plugin iplugin fragments pde manager pdemanager find fragments for findfragmentsfor model file file file model get install location getinstalllocation file is file isfile library paths librarypaths add path file get absolute path getabsolutepath i plugin library ipluginlibrary libraries plugin get libraries getlibraries libraries length string library name libraryname classpath util core classpathutilcore expand library name expandlibraryname libraries get name getname string path plugin get model getmodel get install location getinstalllocation i path ipath separator library name libraryname file path exists library paths librarypaths add path path find library in fragments findlibraryinfragments fragments library name libraryname library paths librarypaths classpath util core classpathutilcore hasextensibleapi model fragments length add library paths addlibrarypaths fragments library paths librarypaths find library in fragments findlibraryinfragments i fragment model ifragmentmodel fragments string library name libraryname array list arraylist path library paths librarypaths fragments length string path fragments get install location getinstalllocation i path ipath separator library name libraryname file path exists library paths librarypaths add path path i java search scope ijavasearchscope create seach scope createseachscope i java project ijavaproject j project jproject java model exception javamodelexception i package fragment root ipackagefragmentroot roots j project jproject get package fragment roots getpackagefragmentroots array list arraylist i package fragment root ipackagefragmentroot filtered roots filteredroots array list arraylist i package fragment root ipackagefragmentroot roots length roots get resource getresource roots get resource getresource get project getproject equals j project jproject get project getproject filtered roots filteredroots add roots search engine searchengine create java search scope createjavasearchscope filtered roots filteredroots to array toarray i java element ijavaelement filtered roots filteredroots size