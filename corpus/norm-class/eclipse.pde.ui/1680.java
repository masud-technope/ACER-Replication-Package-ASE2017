copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation eclipse source eclipsesource corporation ongoing enhancements org eclipse pde internal core java java net malformedurlexception java net url java util org eclipse core runtime org eclipse equinox framework admin frameworkadmin bundle info bundleinfo org eclipse equinox core i provisioning agent iprovisioningagent org eclipse equinox core i provisioning agent provider iprovisioningagentprovider org eclipse equinox engine org eclipse equinox metadata org eclipse equinox metadata metadata factory metadatafactory installable unit description installableunitdescription org eclipse equinox metadata version range versionrange org eclipse equinox planner profile inclusion rules profileinclusionrules org eclipse equinox simple configurator simpleconfigurator manipulator simple configurator manipulator simpleconfiguratormanipulator org eclipse osgi service resolver org eclipse pde core plugin org eclipse pde internal build bundle helper bundlehelper org eclipse pde internal core plugin plugin base pluginbase org osgi framework constants utilities read write files utils nls string flavor tooling nls i to uchpoint type itouchpointtype touchpoint osgi metadata factory metadatafactory create to uchpoint type createtouchpointtype org eclipse equinox osgi version createosgi nls string capability osgi bundle osgi bundle nls string capability osgi fragment osgi fragment nls string type eclipse bundle bundle nls string name space namespace eclipse type org eclipse equinox eclipse type i provided capability iprovidedcapability bundle capability metadata factory metadatafactory create provided capability createprovidedcapability name space namespace eclipse type type eclipse bundle version createosgi nls string capability java java returns bundles defined bundles info file location code code bundles info file assumed fixed location relative configuration area url method source info source bundles returned list bundle u r ls urls bundles info relative appended platform home platformhome absolute param platform home platformhome absolute path local file system installation param configuration area configurationarea url location configuration directory search bundles info source info u r ls urls bundles installation code code locate bundles info url read bundles txt readbundlestxt string platform home platformhome url configuration area configurationarea configuration area configurationarea bundle info bundleinfo bundles read bundles readbundles platform home platformhome configuration area configurationarea bundles length bundles length bundle info bundleinfo src bundles srcbundles read source bundles readsourcebundles platform home platformhome configuration area configurationarea src bundles srcbundles length src bundles srcbundles length url urls url length copyurls urls bundles src bundles srcbundles src bundles srcbundles length copyurls urls bundles length src bundles srcbundles urls malformedurlexception pde core pdecore log returns bundles defined bundles info relative configuration area code code bundles info file assumed fixed location relative configuration area url param platform home platformhome absolute path local file system installation param configuration area configurationarea url location configuration directory search bundles info bundles installation code code locate bundles info bundle info bundleinfo read bundles readbundles string platform home platformhome url configuration area configurationarea i path ipath base path basepath path platform home platformhome configuration area configurationarea url bundles txt bundlestxt url configuration area configurationarea get protocol getprotocol configuration area configurationarea get host gethost file configuration area configurationarea get file getfile simple configurator manipulator simpleconfiguratormanipulator bundles info path get absolute path getabsolutepath file base path basepath to file tofile bundle info bundleinfo bundles get bundles from file getbundlesfromfile bundles txt bundlestxt bundles bundles length bundles malformedurlexception pde core pdecore log i o exception ioexception pde core pdecore log returns source bundles defined source info file location code code source info file assumed fixed location relative configuration area url param platform home platformhome absolute path local file system installation param configuration area configurationarea url location configuration directory search bundles info source info source bundles installation code code locate source info bundle info bundleinfo read source bundles readsourcebundles string platform home platformhome url configuration area configurationarea i path ipath base path basepath path platform home platformhome configuration area configurationarea file base path basepath to file tofile url src bundles txt srcbundlestxt url configuration area configurationarea get protocol getprotocol configuration area configurationarea get host gethost configuration area configurationarea get file getfile concat simple configurator manipulator simpleconfiguratormanipulator source info path bundle info bundleinfo src bundles srcbundles get bundles from file getbundlesfromfile src bundles txt srcbundlestxt src bundles srcbundles src bundles srcbundles length src bundles srcbundles malformedurlexception pde core pdecore log i o exception ioexception pde core pdecore log copies u r ls urls bundle info objects array starting param dest array copy u r ls urls param start start copying param infos bundle infos malformedurlexception copyurls url dest start bundle info bundleinfo infos malformedurlexception infos length dest start file infos get location getlocation tourl returns list link bundle info bundleinfo bundle entry code code problem reading file param fileurl url file read param path describing base location platform install list url locations code code i o exception ioexception bundle info bundleinfo get bundles from file getbundlesfromfile url fileurl file i o exception ioexception simple configurator manipulator simpleconfiguratormanipulator manipulator simple configurator manipulator simpleconfiguratormanipulator pde core pdecore get default getdefault acquire service acquireservice simple configurator manipulator simpleconfiguratormanipulator get name getname manipulator input stream buf fered buffered closed manipulator load configuration loadconfiguration fileurl open stream openstream touri file not found exception filenotfoundexception creates bundles info file directory version location start level expected bundles launch create source info source bundles launch map bundles form i model plugin base imodelpluginbase string start level startlevel auto start autostart returns url location bundle info code code problem creating param bundles map bundles write bundles info maps i plugin model base ipluginmodelbase string start level startlevel auto start autostart param default start level defaultstartlevel start level start level param default auto start defaultautostart auto start setting auto start setting param directory configuration directory create files param osgi bundle list osgibundlelist list bundles coming template config ini url location bundles info code code url write bundles txt writebundlestxt map bundles default start level defaultstartlevel default auto start defaultautostart file directory string osgi bundle list osgibundlelist bundles size parse osgi bundle list start levels map string string osgi start levels osgistartlevels hash map hashmap string string osgi bundle list osgibundlelist nls string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer osgi bundle list osgibundlelist tokenizer has more tokens hasmoretokens string token tokenizer next token nexttoken token index of indexof string model name modelname token substring string start data startdata token substring start data startdata index of indexof string level nls nls start data startdata substring nls string auto nls start data startdata length nls start data startdata substring nls nls start equals nls auto nls auto osgi start levels osgistartlevels model name modelname level auto list bundle info bundleinfo bundle info bundleinfo array list arraylist bundle info bundleinfo bundles size list bundle info bundleinfo source info sourceinfo array list arraylist bundle info bundleinfo bundles size iterator iterator bundles key set keyset iterator iterator has next hasnext i plugin model base ipluginmodelbase current model currentmodel i plugin model base ipluginmodelbase iterator i plugin base ipluginbase base current model currentmodel get plugin base getpluginbase bundle info bundleinfo info bundle info bundleinfo string install location installlocation current model currentmodel get install location getinstalllocation install location installlocation info set location setlocation file install location installlocation touri base plugin base pluginbase plugin base pluginbase base get bundle source entry getbundlesourceentry info set symbolic name setsymbolicname base get id getid info set version setversion base get version getversion info set start level setstartlevel info set marked as started setmarkedasstarted source info sourceinfo add info base info set symbolic name setsymbolicname base get id getid info set version setversion base get version getversion string current level currentlevel string bundles current model currentmodel override start level setting config ini osgi start levels osgistartlevels contains key containskey base get id getid current level currentlevel osgi start levels osgistartlevels base get id getid current level currentlevel index of indexof string level string levelstring nls nls current level currentlevel substring nls string auto nls current level currentlevel length nls current level currentlevel substring nls is auto isauto level nls equals nls auto is auto isauto default auto start defaultautostart is auto isauto value of valueof auto boolean value booleanvalue nls equals nls level string levelstring level default start level defaultstartlevel level integer parse int parseint level string levelstring number format exception numberformatexception pde core pdecore log status i status istatus error pde core pdecore plugin error writing bundles parse start level bundle current model currentmodel info set marked as started setmarkedasstarted is auto isauto info set start level setstartlevel level bundle info bundleinfo add info nls pde core pdecore log nls status i status istatus error pde core pdecore plugin error writing bundles find bundle location bundle current model currentmodel file bundles txt bundlestxt file directory simple configurator manipulator simpleconfiguratormanipulator bundles info path file src bundles txt srcbundlestxt file directory simple configurator manipulator simpleconfiguratormanipulator source info path bundle info bundleinfo infos bundle info bundleinfo to array toarray bundle info bundleinfo bundle info bundleinfo size bundle info bundleinfo sources source info sourceinfo to array toarray bundle info bundleinfo source info sourceinfo size simple configurator manipulator simpleconfiguratormanipulator manipulator simple configurator manipulator simpleconfiguratormanipulator bundle helper bundlehelper get default getdefault acquire service acquireservice simple configurator manipulator simpleconfiguratormanipulator get name getname manipulator save configuration saveconfiguration infos bundles txt bundlestxt manipulator save configuration saveconfiguration sources src bundles txt srcbundlestxt i o exception ioexception pde core pdecore log exception logexception bundles txt bundlestxt exists bundles txt bundlestxt tourl malformedurlexception pde core pdecore log exception logexception returns profile exists profile registry stored data area param profileid profile check param data area dataarea data area profile registry profile exists profile exists profileexists string profileid file data area dataarea core exception coreexception i provisioning agent provider iprovisioningagentprovider provider i provisioning agent provider iprovisioningagentprovider pde core pdecore get default getdefault acquire service acquireservice i provisioning agent provider iprovisioningagentprovider service provider core exception coreexception status i status istatus error pde core pdecore plugin pde core messages pdecoremessages utils unable to acquire p unabletoacquirep service i provisioning agent iprovisioningagent agent provider create agent createagent data area dataarea touri agent core exception coreexception status i status istatus error pde core pdecore plugin pde core messages pdecoremessages utils unable to acquire p unabletoacquirep service i profile registry iprofileregistry registry i profile registry iprofileregistry agent get service getservice i profile registry iprofileregistry service registry core exception coreexception status i status istatus error pde core pdecore plugin pde core messages pdecoremessages utils unable to acquire p unabletoacquirep service registry contains profile containsprofile profileid generates profile metadata bundles collection profile profile persisted profile registry directory data area param profileid creating profile profile exists overwritten param data area dataarea directory data including profile registry directory path doesn exist created param bundles collection i plugin model base ipluginmodelbase objects representing bundles create metadata add profile core exception coreexception profile generated create profile createprofile string profileid file data area dataarea collection bundles core exception coreexception acquire required services creating agent target metadata area i provisioning agent provider iprovisioningagentprovider provider i provisioning agent provider iprovisioningagentprovider pde core pdecore get default getdefault acquire service acquireservice i provisioning agent provider iprovisioningagentprovider service provider core exception coreexception status i status istatus error pde core pdecore plugin pde core messages pdecoremessages utils unable to acquire p unabletoacquirep service i provisioning agent iprovisioningagent agent provider create agent createagent data area dataarea touri agent core exception coreexception status i status istatus error pde core pdecore plugin pde core messages pdecoremessages utils unable to acquire p unabletoacquirep service i profile registry iprofileregistry registry i profile registry iprofileregistry agent get service getservice i profile registry iprofileregistry service registry core exception coreexception status i status istatus error pde core pdecore plugin pde core messages pdecoremessages utils unable to acquire p unabletoacquirep service i engine iengine engine i engine iengine agent get service getservice i engine iengine service engine core exception coreexception status i status istatus error pde core pdecore plugin pde core messages pdecoremessages utils unable to acquire p unabletoacquirep service delete previous profiles registry remove profile removeprofile profileid create profile i profile iprofile profile map string string props hash map hashmap string string props set property setproperty i profile iprofile prop install folder registry area registryarea get absolute path getabsolutepath props i profile iprofile prop install features to string tostring environment nat ionalization nationalization properties specific fragments installed props i profile iprofile prop environments generate environment properties generateenvironmentproperties props i profile iprofile prop target platform targetplatform getnl profile registry add profile addprofile profileid props create metadata bundles collection i installable unit iinstallableunit ius array list arraylist i installable unit iinstallableunit bundles size iterator iterator bundles iterator iterator has next hasnext i plugin model base ipluginmodelbase model i plugin model base ipluginmodelbase iterator bundle description bundledescription bundle model get bundle description getbundledescription ius add create bundle u createbundleiu bundle add metadata profile provisioning context provisioningcontext context provisioning context provisioningcontext agent i provisioning plan iprovisioningplan plan engine create plan createplan profile context iterator i installable unit iinstallableunit iter ius iterator iter has next hasnext i installable unit iinstallableunit iter plan add installable unit addinstallableunit nls plan set installable unit profile property setinstallableunitprofileproperty org eclipse equinox internal inclusion rules profile inclusion rules profileinclusionrules create optional inclusion rule createoptionalinclusionrule i p has e set iphaseset phase set phaseset p has e set factory phasesetfactory create default p has e set excluding createdefaultphasesetexcluding string p has e set factory phasesetfactory phase check trust p has e set factory phasesetfactory phase collect p has e set factory phasesetfactory phase configure p has e set factory phasesetfactory phase unconfigure p has e set factory phasesetfactory phase uninstall i status istatus status engine perform plan phase set phaseset null progress monitor nullprogressmonitor status isok status get severity getseverity i status istatus cancel core exception coreexception status generates environment properties string hosting profile current target platform properties environment properties string string generate environment properties generateenvironmentproperties string buffer stringbuffer env string buffer stringbuffer nls env append osgi env append target platform targetplatform getws nls env append nls env append osgi env append target platform targetplatform getos nls env append nls env append osgi arch env append target platform targetplatform getosarch env to string tostring creates install able installable unit bundle description param bundle description create metadata install able installable unit i installable unit iinstallableunit create bundle u createbundleiu bundle description bundledescription installable unit description installableunitdescription metadata factory metadatafactory installable unit description installableunitdescription set singleton setsingleton is singleton issingleton set id setid get symbolic name getsymbolicname set version setversion fromosgiversion get version getversion set filter setfilter get platform filter getplatformfilter set to uchpoint type settouchpointtype touchpoint osgi is fragment isfragment get host gethost process required bundles bundle specification bundlespecification required bundles requiredbundles get required bundles getrequiredbundles array list arraylist i requirement irequirement reqs deps reqsdeps array list arraylist i requirement irequirement is fragment isfragment reqs deps reqsdeps add metadata factory metadatafactory create requirement createrequirement capability osgi bundle get host gethost get name getname from gi version range fromosgiversionrange get host gethost get version range getversionrange required bundles requiredbundles length reqs deps reqsdeps add metadata factory metadatafactory create requirement createrequirement capability osgi bundle required bundles requiredbundles get name getname from gi version range fromosgiversionrange required bundles requiredbundles get version range getversionrange required bundles requiredbundles is optional isoptional process packages import package specification importpackagespecification osgi imports osgiimports get import packages getimportpackages osgi imports osgiimports length todo sort handle wild carded dynamic imports ignore import package specification importpackagespecification import spec importspec osgi imports osgiimports string import package name importpackagename import spec importspec get name getname import package name importpackagename index of indexof version range versionrange version range versionrange from gi version range fromosgiversionrange import spec importspec get version range getversionrange todo ref ined refined account attribute handled imports is optional isoptional import spec importspec get directive getdirective constants resolution directive equals import package specification importpackagespecification resolution dynamic import spec importspec get directive getdirective constants resolution directive equals import package specification importpackagespecification resolution optional reqs deps reqsdeps add metadata factory metadatafactory create requirement createrequirement capability java import package name importpackagename version range versionrange is optional isoptional set requirements setrequirements reqs deps reqsdeps to array toarray i requirement irequirement reqs deps reqsdeps size create capabilities array list arraylist i provided capability iprovidedcapability provided capabilities providedcapabilities array list arraylist i provided capability iprovidedcapability provided capabilities providedcapabilities add metadata factory metadatafactory create provided capability createprovidedcapability i installable unit iinstallableunit name space namespace get symbolic name getsymbolicname fromosgiversion get version getversion provided capabilities providedcapabilities add metadata factory metadatafactory create provided capability createprovidedcapability capability osgi bundle get symbolic name getsymbolicname fromosgiversion get version getversion process export export package description exportpackagedescription exports get export packages getexportpackages exports length todo support ref inement refinement exports provided capabilities providedcapabilities add metadata factory metadatafactory create provided capability createprovidedcapability capability java exports get name getname fromosgiversion exports get version getversion add bundle capability identify bundles provided capabilities providedcapabilities add bundle capability is fragment isfragment provided capabilities providedcapabilities add metadata factory metadatafactory create provided capability createprovidedcapability capability osgi fragment get host gethost get name getname fromosgiversion get version getversion set capabilities setcapabilities provided capabilities providedcapabilities to array toarray i provided capability iprovidedcapability provided capabilities providedcapabilities size metadata factory metadatafactory create installable unit createinstallableunit version fromosgiversion org osgi framework version version version version max version version get major getmajor integer max version get micro getmicro integer max version get micro getmicro integer max version max version version createosgi version get major getmajor version get minor getminor version get micro getmicro version get qualifier getqualifier version range versionrange from gi version range fromosgiversionrange org eclipse osgi service resolver version range versionrange range range equals org eclipse osgi service resolver version range versionrange empty range emptyrange version range versionrange empty range emptyrange version range versionrange fromosgiversion range get minimum getminimum range get include minimum getincludeminimum fromosgiversion range get right getright range get include maximum getincludemaximum