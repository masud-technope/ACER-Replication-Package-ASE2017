copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde api tools internal tasks java buffered input stream bufferedinputstream java file java file input stream fileinputstream java io exception ioexception java print writer printwriter java string writer stringwriter java util array list arraylist java util collections java util comparator java util hash map hashmap java util hash set hashset java util list java util map java util map entry java util properties java util org apache tools ant build exception buildexception org eclipse core runtime core exception coreexception org eclipse core runtime null progress monitor nullprogressmonitor org eclipse osgi service resolver resolver error resolvererror org eclipse osgi util nls org eclipse pde api tools internal ant filter store antfilterstore org eclipse pde api tools internal i api xml constants iapixmlconstants org eclipse pde api tools internal builder base api analyzer baseapianalyzer org eclipse pde api tools internal builder build context buildcontext org eclipse pde api tools internal model stub api component stubapicomponent org eclipse pde api tools internal problems api problem factory apiproblemfactory org eclipse pde api tools internal provisional api plugin apiplugin org eclipse pde api tools internal provisional i api filter store iapifilterstore org eclipse pde api tools internal provisional i api marker constants iapimarkerconstants org eclipse pde api tools internal provisional comparator i delta idelta org eclipse pde api tools internal provisional model i api baseline iapibaseline org eclipse pde api tools internal provisional model i api component iapicomponent org eclipse pde api tools internal provisional problems i api problem iapiproblem org eclipse pde api tools internal util filtered elements filteredelements org eclipse pde api tools internal util util org dom dom exception domexception org dom document org dom element ant task api tool verification eclipse build api tools analysis task apitoolsanalysistask common utils task commonutilstask summary list i api problem iapiproblem api bundle version problems apibundleversionproblems array list arraylist list i api problem iapiproblem api compatibility problems apicompatibilityproblems array list arraylist list i api problem iapiproblem api usage problems apiusageproblems array list arraylist string componentid summary string componentid i api problem iapiproblem api problems apiproblems componentid componentid max api problems apiproblems length max i api problem iapiproblem problem api problems apiproblems problem get category getcategory i api problem iapiproblem category compatibility api compatibility problems apicompatibilityproblems add problem i api problem iapiproblem category usage api usage problems apiusageproblems add problem i api problem iapiproblem category version api bundle version problems apibundleversionproblems add problem override string to string tostring get details getdetails string get details getdetails string writer stringwriter writer string writer stringwriter print writer printwriter print writer printwriter print writer printwriter writer nls print writer printwriter println print title printtitle print writer printwriter nls print writer printwriter println nls dump problems dumpproblems usage api usage problems apiusageproblems print writer printwriter nls dump problems dumpproblems compatibility api compatibility problems apicompatibilityproblems print writer printwriter nls dump problems dumpproblems bundle versions api bundle version problems apibundleversionproblems print writer printwriter nls print writer printwriter println print writer printwriter flush print writer printwriter close string value of valueof writer get buffer getbuffer print title printtitle print writer printwriter print writer printwriter nls print writer printwriter print componentid nls print writer printwriter print total print writer printwriter print api usage problems apiusageproblems size api bundle version problems apibundleversionproblems size api compatibility problems apicompatibilityproblems size nls print writer printwriter print usage print writer printwriter print api usage problems apiusageproblems size nls print writer printwriter print compatibility print writer printwriter print api compatibility problems apicompatibilityproblems size nls print writer printwriter print bundle version print writer printwriter print api bundle version problems apibundleversionproblems size print writer printwriter print print writer printwriter println dump problems dumpproblems string title list i api problem iapiproblem problems list problemslist print writer printwriter print writer printwriter problems list problemslist is empty isempty print writer printwriter println title i api problem iapiproblem problem problems list problemslist print writer printwriter println problem get message getmessage stores int eger integer counts types problems reported problem counter problemcounter total warnings errors problem counter problemcounter total warnings errors add problem addproblem severity total severity api plugin apiplugin severity error errors severity api plugin apiplugin severity warning warnings nls string bundle version bundle version bundleversion nls string compatibility compatibility nls string component resolution component resolution componentresolution summary summaries summary nls string usage usage filtered elements filteredelements excluded elements excludedelements filtered elements filteredelements included elements includedelements string filters properties properties code code components resolver errors included analysis list bundles resolver errors included output xml code code process unresolved bundles processunresolvedbundles summary create all sum maries createallsummaries map string i api problem iapiproblem all problems allproblems map entry string i api problem iapiproblem entry set entryset all problems allproblems entry set entryset size entry set entryset size size summaries list entry string i api problem iapiproblem all entries allentries array list arraylist all entries allentries add all addall entry set entryset collections sort all entries allentries comparator object suppress warnings suppresswarnings unchecked override compare object object map entry string i api problem iapiproblem entry map entry string i api problem iapiproblem map entry string i api problem iapiproblem entry map entry string i api problem iapiproblem entry get key getkey compare to compareto entry get key getkey summary summaries summary size map entry string i api problem iapiproblem entry all entries allentries summaries create problem summary createproblemsummary entry get key getkey entry get value getvalue summaries summary create problem summary createproblemsummary string componentid i api problem iapiproblem api problems apiproblems summary componentid api problems apiproblems dump report dumpreport summary summaries list string nonapibundlenames map string object bundles with errors bundleswitherrors problem counter problemcounter counter problem counter problemcounter max summaries length max summary summary summaries string contents string componentid summary componentid is filtered isfiltered componentid debug system println summary get details getdetails document document util new document newdocument element report document create element createelement i api xml constants iapixmlconstants element api tool report report set attribute setattribute i api xml constants iapixmlconstants attr version i api xml constants iapixmlconstants api report current version report set attribute setattribute i api xml constants iapixmlconstants attr component componentid document append child appendchild report element category document create element createelement i api xml constants iapixmlconstants attr category category set attribute setattribute i api xml constants iapixmlconstants attr key integer to string tostring i api problem iapiproblem category compatibility category set attribute setattribute i api xml constants iapixmlconstants attr compatibility insertapiproblems category document summary api compatibility problems apicompatibilityproblems counter report append child appendchild category category document create element createelement i api xml constants iapixmlconstants attr category category set attribute setattribute i api xml constants iapixmlconstants attr key integer to string tostring i api problem iapiproblem category usage category set attribute setattribute i api xml constants iapixmlconstants attr usage insertapiproblems category document summary api usage problems apiusageproblems counter report append child appendchild category category document create element createelement i api xml constants iapixmlconstants attr category category set attribute setattribute i api xml constants iapixmlconstants attr key integer to string tostring i api problem iapiproblem category version category set attribute setattribute i api xml constants iapixmlconstants attr bundle version insertapiproblems category document summary api bundle version problems apibundleversionproblems counter report append child appendchild category bundles with errors bundleswitherrors bundles with errors bundleswitherrors contains key containskey componentid category document create element createelement i api xml constants iapixmlconstants attr category category set attribute setattribute i api xml constants iapixmlconstants attr key integer to string tostring i api problem iapiproblem category api component resolution category set attribute setattribute i api xml constants iapixmlconstants attr component resolution resolver error resolvererror errors resolver error resolvererror bundles with errors bundleswitherrors componentid errors length element error document create element createelement i api xml constants iapixmlconstants element resolver error error set attribute setattribute i api xml constants iapixmlconstants attr message errors to string tostring category append child appendchild error report append child appendchild category contents util serialize document serializedocument document dom exception domexception build exception buildexception core exception coreexception build exception buildexception contents save report savereport nls componentid nls contents nls report xml enabled nonapibundlenames nonapibundlenames size string contents document document util new document newdocument element report document create element createelement i api xml constants iapixmlconstants element api tool report report set attribute setattribute i api xml constants iapixmlconstants attr version i api xml constants iapixmlconstants api report current version document append child appendchild report string bundle name bundlename nonapibundlenames is filtered isfiltered bundle name bundlename element bundle document create element createelement i api xml constants iapixmlconstants element bundle bundle set attribute setattribute i api xml constants iapixmlconstants attr bundle name bundlename report append child appendchild bundle contents util serialize document serializedocument document dom exception domexception build exception buildexception core exception coreexception build exception buildexception contents nls nls save report savereport skipped bundles contents report xml write problem count file string contents document document util new document newdocument element root document create element createelement i api xml constants iapixmlconstants element reported count document append child appendchild root root set attribute setattribute i api xml constants iapixmlconstants attr total integer to string tostring counter total root set attribute setattribute i api xml constants iapixmlconstants attr count warnings integer to string tostring counter warnings root set attribute setattribute i api xml constants iapixmlconstants attr count errors integer to string tostring counter errors contents util serialize document serializedocument document dom exception domexception build exception buildexception core exception coreexception build exception buildexception contents nls save report savereport contents counts xml api tools verification task build exception buildexception exception thrown wrong verification override execute build exception buildexception reference baseline location referencebaselinelocation current baseline location currentbaselinelocation report location reportlocation string writer stringwriter string writer stringwriter print writer printwriter writer print writer printwriter writer println nls bind messages print arguments printarguments string reference baseline location referencebaselinelocation current baseline location currentbaselinelocation report location reportlocation writer flush writer close build exception buildexception string value of valueof get buffer getbuffer debug nls system println reference reference baseline location referencebaselinelocation nls system println baseline compare current baseline location currentbaselinelocation nls system println report location report location reportlocation filters nls system println nls filter store filters nls system println nls filter store exclude list location excludelistlocation nls system println nls exclude list location exclude list location excludelistlocation nls system println nls exclude list location include list location includelistlocation nls system println nls include list location include list location includelistlocation nls system println nls include list location unzip reference time debug time system current time millis currenttimemillis file reference install dir referenceinstalldir extractsdk reference reference baseline location referencebaselinelocation file baseline install dir baselineinstalldir extractsdk current current baseline location currentbaselinelocation debug nls nls system println preparation baseline installation system current time millis currenttimemillis time time system current time millis currenttimemillis comparison create baseline reference i api baseline iapibaseline reference baseline referencebaseline create baseline createbaseline reference baseline reference install dir referenceinstalldir get absolute path getabsolutepath ee file location eefilelocation i api baseline iapibaseline current baseline currentbaseline create baseline createbaseline current baseline baseline install dir baselineinstalldir get absolute path getabsolutepath ee file location eefilelocation exclude list location excludelistlocation excluded elements excludedelements common utils task commonutilstask initialize filtered elements initializefilteredelements exclude list location excludelistlocation current baseline currentbaseline debug debug nls system println nls nls system println nls excluded elements list system println excluded elements excludedelements include list location includelistlocation included elements includedelements common utils task commonutilstask initialize filtered elements initializefilteredelements include list location includelistlocation current baseline currentbaseline debug debug nls system println nls nls system println nls included elements list system println included elements includedelements debug nls nls system println creation base lines baselines system current time millis currenttimemillis time time system current time millis currenttimemillis map string i api problem iapiproblem all problems allproblems hash map hashmap list string all non api bundles allnonapibundles array list arraylist list string all api bundles allapibundles array list arraylist map string object bundles with errors bundleswitherrors hash map hashmap i api component iapicomponent api components apicomponents current baseline currentbaseline get api components getapicomponents length api components apicomponents length string visited api component names visitedapicomponentnames hash set hashset length i api component iapicomponent api component apicomponent api components apicomponents string api component apicomponent get symbolic name getsymbolicname visited api component names visitedapicomponentnames add is filtered isfiltered api component apicomponent is system component issystemcomponent util is api tools component isapitoolscomponent api component apicomponent all non api bundles allnonapibundles add accurate store problems category resolver error resolvererror resolver errors resolvererrors api component apicomponent get errors geterrors resolver errors resolvererrors resolver errors resolvererrors length bundles with errors bundleswitherrors api component apicomponent get errors geterrors process unresolved bundles processunresolvedbundles process bundles resolver errors core exception coreexception api plugin apiplugin log get status getstatus build exception buildexception all api bundles allapibundles add base api analyzer baseapianalyzer analyzer base api analyzer baseapianalyzer analyzer set continue on resolver error setcontinueonresolvererror analyzer analyze component analyzecomponent get filter store getfilterstore properties reference baseline referencebaseline api component apicomponent build context buildcontext null progress monitor nullprogressmonitor i api problem iapiproblem problems analyzer get problems getproblems remove duplicates problems remove duplicates removeduplicates problems problems length all problems allproblems problems debug system println nls nls problems runtime exception runtimeexception api plugin apiplugin log analyzer dispose debug nls system println nls nls system println nls total number components current baseline length nls system println nls nls system println nls total number api tools components current baseline all api bundles allapibundles size nls system println nls details collections sort all api bundles allapibundles string string all api bundles allapibundles system println string nls system println nls nls system println nls total number api tools components current baseline all non api bundles allnonapibundles size nls system println nls details collections sort all non api bundles allnonapibundles string string all non api bundles allnonapibundles system println string nls system println nls nls system println nls total number components resolver errors bundles with errors bundleswitherrors size nls system println nls details list string names array list arraylist names add all addall bundles with errors bundleswitherrors key set keyset collections sort names string names system println resolver error resolvererror errors resolver error resolvererror bundles with errors bundleswitherrors errors length system println errors nls system println nls check components removed baseline i api component iapicomponent baseline api components baselineapicomponents reference baseline referencebaseline get api components getapicomponents max baseline api components baselineapicomponents length max i api component iapicomponent api component apicomponent baseline api components baselineapicomponents string api component apicomponent get symbolic name getsymbolicname visited api component names visitedapicomponentnames remove filters is filtered isfiltered i api problem iapiproblem problem api problem factory apiproblemfactory new api problem newapiproblem string string i api marker constants iapimarkerconstants marker attr handle i api marker constants iapimarkerconstants api marker attr object integer i api marker constants iapimarkerconstants compatibility marker i api problem iapiproblem category compatibility i delta idelta api baseline element type i delta idelta removed i delta idelta api component all problems allproblems i api problem iapiproblem problem debug nls nls system println api tools verification check system current time millis currenttimemillis time time system current time millis currenttimemillis reference baseline referencebaseline dispose current baseline currentbaseline dispose stub api component stubapicomponent dispose all caches disposeallcaches delete baseline deletebaseline reference baseline location referencebaselinelocation reference install dir referenceinstalldir delete baseline deletebaseline current baseline location currentbaselinelocation baseline install dir baselineinstalldir debug nls nls system println clean up cleanup system current time millis currenttimemillis time summary summaries create all sum maries createallsummaries all problems allproblems dump report dumpreport summaries all non api bundles allnonapibundles bundles with errors bundleswitherrors runtime exception runtimeexception api plugin apiplugin log returns code code component filtered task match partial match exlude list match include list include exclude list filtering code code returned param componentid api component symbolic bundle component filtered is filtered isfiltered string componentid excluded elements excludedelements excluded elements excludedelements contains exact match containsexactmatch componentid excluded elements excludedelements contains partial match containspartialmatch componentid included elements includedelements included elements includedelements is empty isempty included elements includedelements contains exact match containsexactmatch componentid included elements includedelements contains partial match containspartialmatch componentid i api problem iapiproblem remove duplicates removeduplicates i api problem iapiproblem problems length problems length length problems string unique problems uniqueproblems hash set hashset length list i api problem iapiproblem all problems allproblems length i api problem iapiproblem api problem apiproblem problems string message api problem apiproblem get message getmessage unique problems uniqueproblems message all problems allproblems all problems allproblems array list arraylist length unique problems uniqueproblems add message all problems allproblems add api problem apiproblem all problems allproblems to array toarray i api problem iapiproblem all problems allproblems size i api filter store iapifilterstore get filter store getfilterstore string filters ant filter store antfilterstore filters returns element api problem nodes param document xml document param problems problem dump document param counter counter object reported problems element api problem nodes error occurred core exception coreexception insertapiproblems element root document document list i api problem iapiproblem problems problem counter problemcounter counter core exception coreexception element api problems apiproblems document create element createelement i api xml constants iapixmlconstants element api problems root append child appendchild api problems apiproblems element element sort problem type collections sort problems comparator object override compare object object i api problem iapiproblem i api problem iapiproblem i api problem iapiproblem i api problem iapiproblem get type name gettypename compare to compareto get type name gettypename i api problem iapiproblem problem problems severity get severity getseverity problem counter add problem addproblem severity element document create element createelement i api xml constants iapixmlconstants element api problem element set attribute setattribute i api xml constants iapixmlconstants attr type string value of valueof problem get type name gettypename element set attribute setattribute i api xml constants iapixmlconstants attr integer to string tostring problem get id getid element set attribute setattribute i api xml constants iapixmlconstants attr number integer to string tostring problem get line number getlinenumber element set attribute setattribute i api xml constants iapixmlconstants attr start integer to string tostring problem get char start getcharstart element set attribute setattribute i api xml constants iapixmlconstants attr integer to string tostring problem get char end getcharend element set attribute setattribute i api xml constants iapixmlconstants attr element kind integer to string tostring problem get element kind getelementkind element set attribute setattribute i api xml constants iapixmlconstants attr severity integer to string tostring severity element set attribute setattribute i api xml constants iapixmlconstants attr kind integer to string tostring problem get kind getkind element set attribute setattribute i api xml constants iapixmlconstants attr flags integer to string tostring problem get flags getflags element set attribute setattribute i api xml constants iapixmlconstants attr message problem get message getmessage string extra marker attribute ids extramarkerattributeids problem get extra marker attribute ids getextramarkerattributeids extra marker attribute ids extramarkerattributeids extra marker attribute ids extramarkerattributeids length length extra marker attribute ids extramarkerattributeids length object extra marker attribute values extramarkerattributevalues problem get extra marker attribute values getextramarkerattributevalues element extra arguments element extraargumentselement document create element createelement i api xml constants iapixmlconstants element problem extra arguments length element extra argument element extraargumentelement document create element createelement i api xml constants iapixmlconstants element problem extra argument extra argument element extraargumentelement set attribute setattribute i api xml constants iapixmlconstants attr extra marker attribute ids extramarkerattributeids extra argument element extraargumentelement set attribute setattribute i api xml constants iapixmlconstants attr string value of valueof extra marker attribute values extramarkerattributevalues extra arguments element extraargumentselement append child appendchild extra argument element extraargumentelement element append child appendchild extra arguments element extraargumentselement string message arguments messagearguments problem get message arguments getmessagearguments message arguments messagearguments message arguments messagearguments length length message arguments messagearguments length element message arguments element messageargumentselement document create element createelement i api xml constants iapixmlconstants element problem message arguments length element message argument element messageargumentelement document create element createelement i api xml constants iapixmlconstants element problem message argument message argument element messageargumentelement set attribute setattribute i api xml constants iapixmlconstants attr string value of valueof message arguments messagearguments message arguments element messageargumentselement append child appendchild message argument element messageargumentelement element append child appendchild message arguments element messageargumentselement api problems apiproblems append child appendchild element warning severity param problem problem problem severity get severity getseverity i api problem iapiproblem problem properties string key api problem factory apiproblemfactory get problem severity id getproblemseverityid problem key string properties get property getproperty key api plugin apiplugin error equals api plugin apiplugin severity error api plugin apiplugin severity warning debug values code code code code code code param debug value debugvalue debug set debug setdebug string debug value debugvalue debug to string tostring equals debug value debugvalue execution environment file execution environment file javase execution environment file absolute path optional param ee file location eefilelocation execution environment file seteefile string ee file location eefilelocation ee file location eefilelocation ee file location eefilelocation exclude list location exclude list bundles excluded xml report generated task execution lines starting excluded elements format exclude list file pre doc bundles org eclipse jdt doc isv org eclipse jdt doc user org eclipse pde doc user org eclipse platform doc isv org eclipse platform doc user eclipse bundles ibm icu jcr aft jcraft jsch javax servlet javax servlet jsp pre location absolute path param exclude list location excludelistlocation location excluded list file set exclude list setexcludelist string exclude list location excludelistlocation exclude list location excludelistlocation exclude list location excludelistlocation include list location include list bundles included xml report generated task execution lines starting included elements format include list file pre doc bundles org eclipse jdt doc isv org eclipse jdt doc user org eclipse pde doc user org eclipse platform doc isv org eclipse platform doc user eclipse bundles ibm icu jcr aft jcraft jsch javax servlet javax servlet jsp pre location absolute path param include list location includelistlocation location included list file set include list setincludelist string include list location includelistlocation include list location includelistlocation include list location includelistlocation root directory api filters analysis argument root directory api filters files filter potential problems created api tools analysis root structure pre root component org eclipse jface api filters pre param filters root api filters files set filters setfilters string filters filters filters preferences task preferences configure problem severities problem severities values ignore warning error problems detected defined problem preference api tools location doesn exist preferences won lines starting format preferences file pre thu nov est annotation element type method ignore annotation element type changed type conversion ignore annotation element type removed field ignore annotation element type removed method ignore annotation element type removed type member warning api component element type removed api type ignore api component element type removed type ignore element type method error element type restrictions ignore element type type parameter ignore element type changed contracted superinterfaces ignore pre link org eclipse pde api tools internal provisional problems i api problem types iapiproblemtypes location absolute path param preferences location preferenceslocation location preference file set preferences setpreferences string preferences location preferenceslocation file preferences file preferencesfile file preferences location preferenceslocation preferences file preferencesfile exists buffered input stream bufferedinputstream input stream inputstream input stream inputstream buffered input stream bufferedinputstream file input stream fileinputstream preferences file preferencesfile properties temp properties temp load input stream inputstream properties temp io exception ioexception input stream inputstream input stream inputstream close io exception ioexception location current product baseline compare reference baseline zip jar tgz tar file directory corresponds eclipse installation folder directory find eclipse executable param baseline location baselinelocation location baseline analyze set profile setprofile string baseline location baselinelocation current baseline location currentbaselinelocation baseline location baselinelocation location reference baseline zip jar tgz tar file directory corresponds eclipse installation folder directory find eclipse executable location absolute path param baseline location baselinelocation location reference baseline analyze set baseline setbaseline string baseline location baselinelocation reference baseline location referencebaselinelocation baseline location baselinelocation output location reports generated task completed reports directory structure filter root folder created component problems reported folder file called report xml special folder called all non api bundles allnonapibundles created folder xml file called report xml file lists bundles api tools nature param baseline location baselinelocation location reference baseline analyze set report setreport string report location reportlocation report location reportlocation report location reportlocation analyzing api component bundle resolver errors missing dependencies analysis accurate list resolver errors bundle included xml output inc orporated incorporated html output report conversion task defaults code code param process unresolved bundles processunresolvedbundles processing bundle resolver errors set process unresolved bundles setprocessunresolvedbundles process unresolved bundles processunresolvedbundles process unresolved bundles processunresolvedbundles process unresolved bundles processunresolvedbundles