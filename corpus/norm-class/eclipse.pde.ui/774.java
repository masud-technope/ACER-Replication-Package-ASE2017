copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal editor toc java util hash map hashmap java util list java util map java util org eclipse jface text bad location exception badlocationexception org eclipse jface text i document idocument org eclipse jface text position org eclipse pde internal core text i document element node idocumentelementnode org eclipse pde internal core text i editing model ieditingmodel org eclipse pde internal core toc text toc model tocmodel org eclipse pde internal core toc text toc object tocobject org eclipse pde internal editor abstract folding structure provider abstractfoldingstructureprovider org eclipse pde internal editor pde source page pdesourcepage toc folding structure provider tocfoldingstructureprovider abstract folding structure provider abstractfoldingstructureprovider map f position to element fpositiontoelement hash map hashmap toc folding structure provider tocfoldingstructureprovider pde source page pdesourcepage editor i editing model ieditingmodel model editor model add folding regions addfoldingregions current regions currentregions i editing model ieditingmodel model bad location exception badlocationexception toc object tocobject toc toc model tocmodel model get toc gettoc list child list childlist toc get children getchildren i document element node idocumentelementnode children i document element node idocumentelementnode child list childlist to array toarray i document element node idocumentelementnode child list childlist size add folding regions addfoldingregions current regions currentregions children model get document getdocument add folding regions addfoldingregions regions i document element node idocumentelementnode nodes i document idocument document bad location exception badlocationexception nodes length i document element node idocumentelementnode element nodes start line startline document get line of offset getlineofoffset element get offset getoffset end line endline document get line of offset getlineofoffset element get offset getoffset element get length getlength start line startline end line endline start document get line offset getlineoffset start line startline document get line offset getlineoffset end line endline document get line length getlinelength end line endline position position position start start regions add position f position to element fpositiontoelement position element i document element node idocumentelementnode children element get child nodes getchildnodes children add folding regions addfoldingregions regions children document