copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core build ers builders java util java util map entry org eclipse core resources org eclipse core runtime org eclipse jdt core org eclipse osgi util nls org eclipse pde core build i build ibuild org eclipse pde core build i build entry ibuildentry org eclipse pde core plugin org eclipse pde internal core pde core pdecore org eclipse pde internal core pde core messages pdecoremessages org eclipse pde internal core project pde project pdeproject source entry error reporter sourceentryerrorreporter build error reporter builderrorreporter string def output entry property output prefix source entry error reporter sourceentryerrorreporter i file ifile file i build ibuild model file f build fbuild model project folder projectfolder i path ipath f path fpath string f token ftoken array list arraylist string f libs flibs array list arraylist string string dup e lib name dupelibname project folder projectfolder i path ipath path f path fpath path i path ipath get path getpath f path fpath set token settoken string token f token ftoken token string get token gettoken f token ftoken f path fpath to string tostring f token ftoken add lib addlib string lib name libname f libs flibs lib name libname dup e lib name dupelibname lib name libname f libs flibs add lib name libname array list arraylist string get libs getlibs f libs flibs string get dupe lib name getdupelibname dup e lib name dupelibname source folder sourcefolder project folder projectfolder output folder outputfolder f output folder foutputfolder constructs source folder project relative path param path source folder path param output folder outputfolder output folder source folder sourcefolder i path ipath path output folder outputfolder output folder outputfolder path f output folder foutputfolder output folder outputfolder output folder outputfolder get output location getoutputlocation f output folder foutputfolder output folder outputfolder project folder projectfolder array list arraylist source folder sourcefolder f source folders fsourcefolders array list arraylist source folder sourcefolder source file folder library f is library fislibrary creates output folder relative path relative project param path project relative path output folder outputfolder i path ipath path path creates output folder relative path relative project param path project relative path param is library islibrary output folder binary location source folder output folder outputfolder i path ipath path is library islibrary path f is library fislibrary is library islibrary add source folder addsourcefolder source folder sourcefolder source folder sourcefolder f source folders fsourcefolders source folder sourcefolder f source folders fsourcefolders add source folder sourcefolder is library islibrary f is library fislibrary array list arraylist source folder sourcefolder get source folders getsourcefolders f source folders fsourcefolders represents custom encoding property resource library encoding entry encodingentry string f encoding fencoding i resource iresource f resource fresource constructs encoding entry resource param resource resource param encoding encoding identifier encoding entry encodingentry i resource iresource resource string encoding f encoding fencoding encoding f resource fresource resource returns explicit encoding entry explicit encoding string get encoding getencoding f encoding fencoding returns resource encoding resource i resource iresource get resource getresource f resource fresource override string to string tostring get value getvalue override equals object obj obj encoding entry encodingentry encoding entry encodingentry encoding entry encodingentry obj f encoding fencoding equals f encoding fencoding f resource fresource equals f resource fresource override hash code hashcode f encoding fencoding hash code hashcode f resource fresource hash code hashcode returns generated entry build properties file enter build properties string get value getvalue string buffer stringbuffer buf string buffer stringbuffer i container icontainer root pde project pdeproject get bundle root getbundleroot f resource fresource get project getproject buf append f resource fresource get full path getfullpath make relative to makerelativeto root get full path getfullpath make absolute makeabsolute buf append buf append f encoding fencoding buf append buf to string tostring visits source folder gathering encodings visitor i resource visitor iresourcevisitor string f libs flibs visitor source folder sourcefolder folder array list arraylist string list folder get libs getlibs f libs flibs list to array toarray string list size override visit i resource iresource resource core exception coreexception string encoding resource get type gettype i resource iresource folder encoding i folder ifolder resource get default charset getdefaultcharset i resource iresource file i file ifile file i file ifile resource worry java files file get file extension getfileextension nls file get file extension getfileextension equals nls java encoding file get charset getcharset encoding encoding entry encodingentry entry encoding entry encodingentry resource encoding f libs flibs length string lib f libs flibs list encoding entry encodingentry encodings f custom encodings fcustomencodings lib encodings encodings array list arraylist encoding entry encodingentry f custom encodings fcustomencodings lib encodings encodings add entry hash map hashmap i path ipath source folder sourcefolder f source folder map fsourcefoldermap hash map hashmap i path ipath source folder sourcefolder hash map hashmap i path ipath output folder outputfolder f output folder map foutputfoldermap hash map hashmap i path ipath output folder outputfolder i build ibuild f build fbuild maps library encoding library explicit encoding map string string f default library encodings fdefaultlibraryencodings hash map hashmap string string maps library custom link encoding entry encodingentry library map string list encoding entry encodingentry f custom encodings fcustomencodings hash map hashmap string list encoding entry encodingentry initialize array list arraylist source entries sourceentries array list arraylist output entries outputentries i classpath entry iclasspathentry cpes i project iproject project f project fproject project i path ipath default output location defaultoutputlocation i java project ijavaproject java project javaproject java core javacore create f project fproject default output location defaultoutputlocation java project javaproject get output location getoutputlocation java model exception javamodelexception list string plugin library names pluginlibrarynames array list arraylist string i plugin model base ipluginmodelbase plugin model pluginmodel plugin registry pluginregistry find model findmodel f project fproject plugin model pluginmodel i plugin library ipluginlibrary plugin libraries pluginlibraries plugin model pluginmodel get plugin base getpluginbase get libraries getlibraries plugin libraries pluginlibraries length plugin library names pluginlibrarynames add plugin libraries pluginlibraries get name getname nls plugin library names pluginlibrarynames nls plugin library names pluginlibrarynames add cpes length cpes get entry kind getentrykind i classpath entry iclasspathentry cpe source i path ipath source path sourcepath get path getpath cpes source path sourcepath i path ipath output location outputlocation cpes get output location getoutputlocation output location outputlocation output location outputlocation default output location defaultoutputlocation i path ipath output path outputpath get path getpath output location outputlocation output folder outputfolder output folder outputfolder f output folder map foutputfoldermap output path outputpath output folder outputfolder output folder outputfolder output folder outputfolder output path outputpath source folder sourcefolder source folder sourcefolder f source folder map fsourcefoldermap source path sourcepath source folder sourcefolder source folder sourcefolder source folder sourcefolder source path sourcepath output folder outputfolder output folder outputfolder add source folder addsourcefolder source folder sourcefolder f output folder map foutputfoldermap output path outputpath output folder outputfolder f source folder map fsourcefoldermap source path sourcepath source folder sourcefolder cpes get entry kind getentrykind i classpath entry iclasspathentry cpe library i classpath entry iclasspathentry entry cpes i package fragment root ipackagefragmentroot roots java project javaproject find package fragment roots findpackagefragmentroots entry i path ipath output path outputpath entry library roots length roots is archive isarchive output path outputpath get path getpath entry output folder outputfolder output folder outputfolder output folder outputfolder output path outputpath f output folder map foutputfoldermap output path outputpath output folder outputfolder iterator iterator source entries sourceentries iterator iterator has next hasnext i build entry ibuildentry source entry sourceentry i build entry ibuildentry iterator string lib name libname source entry sourceentry get name getname substring property source prefix length plugin library names pluginlibrarynames lib name libname prepare error prepareerror source entry sourceentry get name getname nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter missing library missinglibrary lib name libname pde marker factory pdemarkerfactory removal f src lib severity fsrclibseverity pde marker factory pdemarkerfactory cat string tokens source entry sourceentry get tokens gettokens tokens length i path ipath path path tokens add trailing separator addtrailingseparator source folder sourcefolder source folder sourcefolder f source folder map fsourcefoldermap path source folder sourcefolder source folder sourcefolder source folder sourcefolder path f source folder map fsourcefoldermap path source folder sourcefolder source folder sourcefolder set token settoken tokens source folder sourcefolder add lib addlib lib name libname iterator iterator output entries outputentries iterator iterator has next hasnext i build entry ibuildentry output entry outputentry i build entry ibuildentry iterator string lib name libname output entry outputentry get name getname substring property output prefix length plugin library names pluginlibrarynames lib name libname prepare error prepareerror output entry outputentry get name getname nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter missing library missinglibrary lib name libname pde marker factory pdemarkerfactory removal f out ut lib severity foututlibseverity pde marker factory pdemarkerfactory cat string tokens output entry outputentry get tokens gettokens tokens length i path ipath path path tokens add trailing separator addtrailingseparator nls path segment count segmentcount path segment equals translate root path path path root output folder outputfolder output folder outputfolder f output folder map foutputfoldermap path output folder outputfolder output folder outputfolder output folder outputfolder path f output folder map foutputfoldermap path output folder outputfolder output folder outputfolder set token settoken tokens output folder outputfolder add lib addlib lib name libname i path ipath get path getpath object entry i path ipath path entry i classpath entry iclasspathentry i classpath entry iclasspathentry cpes i classpath entry iclasspathentry entry path cpes get path getpath entry i path ipath path i path ipath entry path path matching first segments matchingfirstsegments f project fproject get full path getfullpath path path remove first segments removefirstsegments path path add trailing separator addtrailingseparator validate iterator i path ipath iterator f output folder map foutputfoldermap key set keyset iterator iterator has next hasnext i path ipath output path outputpath iterator output folder outputfolder output folder outputfolder f output folder map foutputfoldermap output path outputpath array list arraylist source folder sourcefolder source folders sourcefolders output folder outputfolder get source folders getsourcefolders array list arraylist string output folder libs outputfolderlibs array list arraylist string output folder outputfolder get libs getlibs source folders sourcefolders size output folder outputfolder is library islibrary report error invalid output folder iterator string lib name iterator libnameiterator output folder libs outputfolderlibs iterator lib name iterator libnameiterator has next hasnext string lib name libname lib name iterator libnameiterator i resource iresource folder entry folderentry f project fproject find member findmember output path outputpath string message folder entry folderentry folder entry folderentry exists folder entry folderentry i container icontainer message nls bind pde core messages pdecoremessages build error reporter builderrorreporter missing folder missingfolder output path outputpath to string tostring message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter invalid output folder invalidoutputfolder output path outputpath to string tostring prepare error prepareerror property output prefix lib name libname output folder outputfolder get token gettoken message pde marker factory pdemarkerfactory removal f out ut lib severity foututlibseverity pde marker factory pdemarkerfactory cat output folder libs outputfolderlibs size folder output library entry plugin model project i plugin model base ipluginmodelbase model plugin registry pluginregistry find model findmodel f project fproject model i plugin library ipluginlibrary libs model get plugin base getpluginbase get libraries getlibraries string message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter missing output lib for class folder missingoutputlibforclassfolder output path outputpath to string tostring libs length prepare error prepareerror property output prefix message pde marker factory pdemarkerfactory resolution f out ut lib severity foututlibseverity pde marker factory pdemarkerfactory cat prepare error prepareerror def output entry output path outputpath to string tostring message pde marker factory pdemarkerfactory addition f out ut lib severity foututlibseverity pde marker factory pdemarkerfactory cat string src folder lib name srcfolderlibname source folders sourcefolders size source folder sourcefolder source folder sourcefolder source folders sourcefolders array list arraylist string src folder libs srcfolderlibs source folder sourcefolder get libs getlibs output folder libs outputfolderlibs remove all removeall src folder libs srcfolderlibs src folder libs srcfolderlibs size caught src folder lib name srcfolderlibname src folder lib name srcfolderlibname src folder libs srcfolderlibs src folder lib name srcfolderlibname equals src folder libs srcfolderlibs error targeted diff libs string erring src folders erringsrcfolders join source folders sourcefolders to array toarray source folder sourcefolder source folders sourcefolders size source folders sourcefolders size source folder sourcefolder src folder srcfolder source folders sourcefolders src folder srcfolder get libs getlibs size string lib name libname src folder srcfolder get libs getlibs string message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter different target library differenttargetlibrary erring src folders erringsrcfolders prepare error prepareerror property source prefix lib name libname src folder srcfolder get token gettoken message pde marker factory pdemarkerfactory resolution f src lib severity fsrclibseverity pde marker factory pdemarkerfactory cat output folder libs outputfolderlibs size string message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter extra output folder extraoutputfolder output folder outputfolder get path getpath to string tostring property source prefix output folder libs outputfolderlibs prepare error prepareerror property output prefix output folder libs outputfolderlibs output folder outputfolder get token gettoken message pde marker factory pdemarkerfactory removal f out ut lib severity foututlibseverity pde marker factory pdemarkerfactory cat output folder outputfolder get dupe lib name getdupelibname string message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter dupe output folder dupeoutputfolder output path outputpath to string tostring property output prefix output folder outputfolder get dupe lib name getdupelibname prepare error prepareerror property output prefix output folder outputfolder get dupe lib name getdupelibname output folder outputfolder get token gettoken message pde marker factory pdemarkerfactory resolution f out ut lib severity foututlibseverity pde marker factory pdemarkerfactory cat missing output entry missingoutputentry list string f src folders fsrcfolders array list arraylist string list string f output folders foutputfolders array list arraylist string string get output list getoutputlist generate list generatelist f output folders foutputfolders string get source list getsourcelist generate list generatelist f src folders fsrcfolders string generate list generatelist list string strings string buffer stringbuffer buffer string buffer stringbuffer iterator string iterator strings iterator iterator has next hasnext string iterator buffer append iterator has next hasnext buffer append buffer append buffer to string tostring add src folder addsrcfolder string source path sourcepath f src folders fsrcfolders source path sourcepath f src folders fsrcfolders add source path sourcepath add output folder addoutputfolder string output path outputpath f output folders foutputfolders output path outputpath f output folders foutputfolders add output path outputpath hash map hashmap string missing output entry missingoutputentry missing output entry errors missingoutputentryerrors hash map hashmap string missing output entry missingoutputentry list source folders perform encoding validation list source folder sourcefolder to validate tovalidate array list arraylist source folder sourcefolder iterator i path ipath iterator f source folder map fsourcefoldermap key set keyset iterator iterator has next hasnext i path ipath source path sourcepath iterator source folder sourcefolder source folder sourcefolder f source folder map fsourcefoldermap source path sourcepath output folder outputfolder output folder outputfolder source folder sourcefolder get output location getoutputlocation output folder outputfolder error src folder i resource iresource folder entry folderentry f project fproject find member findmember source path sourcepath string message folder entry folderentry folder entry folderentry exists folder entry folderentry i container icontainer message nls bind pde core messages pdecoremessages build error reporter builderrorreporter missing folder missingfolder source path sourcepath to string tostring message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter invalid source folder invalidsourcefolder source path sourcepath to string tostring array list arraylist string src libs srclibs source folder sourcefolder get libs getlibs src libs srclibs size string lib name libname src libs srclibs prepare error prepareerror property source prefix lib name libname source folder sourcefolder get token gettoken message pde marker factory pdemarkerfactory removal f src lib severity fsrclibseverity pde marker factory pdemarkerfactory cat output folder outputfolder get libs getlibs size source folder sourcefolder get libs getlibs size error missing output folder string lib name libname source folder sourcefolder get libs getlibs missing output entry missingoutputentry error entry errorentry missing output entry errors missingoutputentryerrors lib name libname error entry errorentry error entry errorentry missing output entry missingoutputentry error entry errorentry add src folder addsrcfolder source path sourcepath to string tostring error entry errorentry add output folder addoutputfolder output folder outputfolder get token gettoken missing output entry errors missingoutputentryerrors lib name libname error entry errorentry source folder sourcefolder get dupe lib name getdupelibname string message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter dupe source folder dupesourcefolder source path sourcepath to string tostring property source prefix source folder sourcefolder get dupe lib name getdupelibname prepare error prepareerror property source prefix source folder sourcefolder get dupe lib name getdupelibname source folder sourcefolder get token gettoken message pde marker factory pdemarkerfactory resolution f src lib severity fsrclibseverity pde marker factory pdemarkerfactory cat to validate tovalidate add source folder sourcefolder iterator string iter missing output entry errors missingoutputentryerrors key set keyset iterator iter has next hasnext string lib name libname iter missing output entry missingoutputentry error entry errorentry missing output entry errors missingoutputentryerrors lib name libname string message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter missing output entry missingoutputentry error entry errorentry get source list getsourcelist property output prefix lib name libname prepare error prepareerror property output prefix lib name libname error entry errorentry get output list getoutputlist message pde marker factory pdemarkerfactory addition f missing output lib severity fmissingoutputlibseverity pde marker factory pdemarkerfactory cat f encoding severity fencodingseverity compiler flags compilerflags error f encoding severity fencodingseverity compiler flags compilerflags warning build map expected encodings iterator source folder sourcefolder iterator to validate tovalidate iterator iterator has next hasnext source folder sourcefolder source folder sourcefolder iterator i path ipath source path sourcepath source folder sourcefolder get path getpath i container icontainer container f project fproject source path sourcepath is empty isempty source path sourcepath is root isroot container container get folder getfolder source path sourcepath array list arraylist string list source folder sourcefolder get libs getlibs string libs list to array toarray string list size string encoding get explicit encoding getexplicitencoding container encoding libs length f default library encodings fdefaultlibraryencodings libs encoding container accept visitor source folder sourcefolder core exception coreexception pde core pdecore log compare encodings build properties i build entry ibuildentry entries f build fbuild get build entries getbuildentries entries length i build entry ibuildentry entry entries string entry get name getname starts with startswith property javac encoding prefix string lib substring property javac encoding prefix length string tokens entry get tokens gettokens tokens length tokens length compare string tokens string expected f default library encodings fdefaultlibraryencodings remove lib expected equals expected prepare error prepareerror nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter string expected lib pde marker factory pdemarkerfactory resolution f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat encoding workspace prepare error prepareerror nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter string lib pde marker factory pdemarkerfactory removal f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat syntax error f default library encodings fdefaultlibraryencodings remove lib prepare error prepareerror nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter lib pde marker factory pdemarkerfactory resolution f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat starts with startswith property javac custom encodings prefix i container icontainer bundle root bundleroot pde project pdeproject get bundle root getbundleroot f project fproject string lib substring property javac custom encodings prefix length string tokens entry get tokens gettokens tokens length list encoding entry encodingentry encodings array list arraylist encoding entry encodingentry tokens length string special tokens special index of indexof nls nls special ends with endswith string path special substring string encoding special substring special length i resource iresource member bundle root bundleroot find member findmember path member error missing resource string message nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter string encoding path prepare error prepareerror special message pde marker factory pdemarkerfactory removal f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat encodings add encoding entry encodingentry member encoding syntax error invalid string message pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter prepare error prepareerror special message pde marker factory pdemarkerfactory resolution f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat compare workspace encodings list encoding entry encodingentry workspace f custom encodings fcustomencodings remove lib workspace prepare error prepareerror nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter lib pde marker factory pdemarkerfactory removal f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat map i resource iresource string map hash map hashmap i resource iresource string iterator encoding entry encodingentry iter workspace iterator iter has next hasnext encoding entry encodingentry iter map get resource getresource get encoding getencoding iter encodings iterator iter has next hasnext encoding entry encodingentry iter string get encoding getencoding string expected map remove get resource getresource expected prepare error prepareerror get value getvalue nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter string expected get resource getresource get project relative path getprojectrelativepath to string tostring pde marker factory pdemarkerfactory removal f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat equals expected prepare error prepareerror get value getvalue nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter string expected get resource getresource get project relative path getprojectrelativepath to string tostring pde marker factory pdemarkerfactory resolution f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat left workspace map map is empty isempty iterator entry i resource iresource string iter map entry set entryset iterator iter has next hasnext entry i resource iresource string iter i resource iresource res get key getkey string expected get value getvalue encoding entry encodingentry missing encoding entry encodingentry res expected string nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter string expected res get project relative path getprojectrelativepath to string tostring prepare error prepareerror missing get value getvalue pde marker factory pdemarkerfactory addition f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat check unspecified encodings iterator entry string string iter f default library encodings fdefaultlibraryencodings entry set entryset iterator iter has next hasnext entry string string entry iter string lib entry get key getkey string expected entry get value getvalue prepare error prepareerror property javac encoding prefix lib expected nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter string expected lib pde marker factory pdemarkerfactory addition f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat check unspecified custom encodings iterator entry string list encoding entry encodingentry iter f custom encodings fcustomencodings entry set entryset iterator iter has next hasnext entry string list encoding entry encodingentry entry iter string lib entry get key getkey list encoding entry encodingentry encodings entry get value getvalue iterator encoding entry encodingentry iterator encodings iterator iterator has next hasnext encoding entry encodingentry encoding iterator string nls bind pde core messages pdecoremessages source entry error reporter sourceentryerrorreporter string encoding get encoding getencoding encoding get resource getresource get project relative path getprojectrelativepath to string tostring prepare error prepareerror property javac custom encodings prefix lib encoding get value getvalue pde marker factory pdemarkerfactory addition f encoding severity fencodingseverity pde marker factory pdemarkerfactory cat returns explicit encoding container parents including project param container container explicit encoding code code core exception coreexception string get explicit encoding getexplicitencoding i container icontainer container core exception coreexception string encoding container get default charset getdefaultcharset encoding i container icontainer parent container get parent getparent parent parent get type gettype i resource iresource folder get explicit encoding getexplicitencoding parent i resource iresource project get explicit encoding getexplicitencoding parent don workspace encoding encoding string join project folder projectfolder folders string buffer stringbuffer result string buffer stringbuffer folders length string text folders get path getpath to string tostring trim text length result append text result append result delete char at deletecharat result length result to string tostring array list arraylist build problem buildproblem get problem list getproblemlist f problem list fproblemlist