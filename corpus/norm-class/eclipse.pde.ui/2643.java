copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core java java net malformedurlexception java net url java util org eclipse core resources org eclipse core runtime core exception coreexception org eclipse core runtime i path ipath org eclipse jdt core java core javacore org eclipse pde core i model imodel org eclipse pde core i model provider event imodelproviderevent org eclipse pde core plugin i plugin model base ipluginmodelbase org eclipse pde core plugin i shared extensions model isharedextensionsmodel org eclipse pde internal core build ers builders schema transformer schematransformer org eclipse pde internal core bundle org eclipse pde internal core ibundle i bundle model ibundlemodel org eclipse pde internal core ibundle i bundle plugin model base ibundlepluginmodelbase org eclipse pde internal core ischema i schema ischema org eclipse pde internal core ischema i schema descriptor ischemadescriptor org eclipse pde internal core plugin org eclipse pde internal core project pde project pdeproject org eclipse pde internal core schema schema descriptor schemadescriptor workspace plugin model manager workspacepluginmodelmanager workspace model manager workspacemodelmanager array list arraylist i extension delta listener iextensiondeltalistener f extension listeners fextensionlisteners array list arraylist i extension delta listener iextensiondeltalistener array list arraylist model change modelchange f changed extensions fchangedextensions workspace plug model manager int erested interested plug projects override is int eresting project isinterestingproject i project iproject project is plugin project ispluginproject project creates plug model based project structure bundle model created project manifest file option ally optionally plugin xml fragment xml file style plugin model created project plugin xml fragment xml file override create model createmodel i project iproject project notify i plugin model base ipluginmodelbase model i file ifile manifest pde project pdeproject get manifest getmanifest project i file ifile plugin xml pluginxml pde project pdeproject get plugin xml getpluginxml project i file ifile fragment xml fragmentxml pde project pdeproject get fragment xml getfragmentxml project manifest exists workspace bundle model workspacebundlemodel bmodel workspace bundle model workspacebundlemodel manifest load model loadmodel bmodel bmodel is fragment model isfragmentmodel model bundle fragment model bundlefragmentmodel model bundle plugin model bundlepluginmodel model set enabled setenabled bmodel set editable seteditable i bundle plugin model base ibundlepluginmodelbase model set bundle model setbundlemodel bmodel i file ifile efile bmodel is fragment model isfragmentmodel fragment xml fragmentxml plugin xml pluginxml efile exists workspace extensions model workspaceextensionsmodel ext model extmodel workspace extensions model workspaceextensionsmodel efile ext model extmodel set editable seteditable load model loadmodel ext model extmodel i bundle plugin model base ibundlepluginmodelbase model set extensions model setextensionsmodel ext model extmodel ext model extmodel set bundle model setbundlemodel i bundle plugin model base ibundlepluginmodelbase model plugin xml pluginxml exists model workspace plugin model workspacepluginmodel plugin xml pluginxml load model loadmodel model fragment xml fragmentxml exists model workspace fragment model workspacefragmentmodel fragment xml fragmentxml load model loadmodel model pde project pdeproject get options file getoptionsfile project exists pde core pdecore get default getdefault get tracing options manager gettracingoptionsmanager reset model f models fmodels f models fmodels hash map hashmap i project iproject i model imodel f models fmodels project model notify add change addchange model i model provider event imodelproviderevent models reacts files int erest interest pde override handle file delta handlefiledelta i resource delta iresourcedelta delta i file ifile file i file ifile delta get resource getresource i project iproject project file get project getproject string filename file get name getname file equals pde project pdeproject get options file getoptionsfile project pde core pdecore get default getdefault get tracing options manager gettracingoptionsmanager reset file equals pde project pdeproject get build properties getbuildproperties project change build properties trigger classpath update fire notification todo inefficient object model get model getmodel project model add change addchange model i model provider event imodelproviderevent models changed file equals pde project pdeproject get localization file getlocalizationfile project reset bundle resource localization file changed i plugin model base ipluginmodelbase model get plugin model getpluginmodel project model abstractnlmodel model resetnlresourcehelper nls filename ends with endswith exsd handle eclipse schema delta handleeclipseschemadelta file delta file equals pde project pdeproject get plugin xml getpluginxml project file equals pde project pdeproject get fragment xml getfragmentxml project handle extension file delta handleextensionfiledelta file delta file equals pde project pdeproject get manifest getmanifest project handle bundle manifest delta handlebundlemanifestdelta file delta param schema file schemafile param delta handle eclipse schema delta handleeclipseschemadelta i file ifile schema file schemafile i resource delta iresourcedelta delta kind resource delta kind delta get kind getkind int erested interested schema files contents changed kind i resource delta iresourcedelta changed i resource delta iresourcedelta content delta get flags getflags schema preview file session property object property property schema file schemafile get session property getsessionproperty pde core pdecore schema preview file core exception coreexception org eclipse pde internal search show description action showdescriptionaction link preview file to schema file linkpreviewfiletoschemafile property property file file schema preview file schemapreviewfile file property ensure file exists writable schema preview file schemapreviewfile exists schema preview file schemapreviewfile is file isfile schema preview file schemapreviewfile can write canwrite schema model object i schema descriptor ischemadescriptor descriptor schema descriptor schemadescriptor schema file schemafile i schema ischema schema descriptor get schema getschema generate schema preview file contents order reflect schema recreate schema preview file contents recreateschemapreviewfilecontents schema preview file schemapreviewfile schema io exception ioexception param schema preview file schemapreviewfile param schema io exception ioexception recreate schema preview file contents recreateschemapreviewfilecontents file schema preview file schemapreviewfile i schema ischema schema io exception ioexception schema transformer schematransformer transformer schema transformer schematransformer output stream outputstream file output stream fileoutputstream schema preview file schemapreviewfile print writer printwriter print writer printwriter print writer printwriter output stream writer outputstreamwriter i core constants icoreconstants utf transformer transform schema print writer printwriter flush close reacts plugin xml fragment xml file file deleted project manifest file deletion extensions extension points file deleted project manifest file style plug entire model removed table file project manifest file contributes extensions extensions send notification trigger update classpath dependent plug ins file project manifest style plug created file modified project manifest reload extensions model send not ifications notifications file modified project manifest style plug reload send not ifications notifications trigger classpath update dependent plug ins param file manifest file param delta resource delta handle extension file delta handleextensionfiledelta i file ifile file i resource delta iresourcedelta delta kind delta get kind getkind i plugin model base ipluginmodelbase model i plugin model base ipluginmodelbase get model getmodel file get project getproject kind i resource delta iresourcedelta removed model i bundle plugin model base ibundlepluginmodelbase i bundle plugin model base ibundlepluginmodelbase model set extensions model setextensionsmodel add extension change addextensionchange model i model provider event imodelproviderevent models removed remove model removemodel file get project getproject kind i resource delta iresourcedelta model i bundle plugin model base ibundlepluginmodelbase workspace extensions model workspaceextensionsmodel extensions workspace extensions model workspaceextensionsmodel file extensions set editable seteditable i bundle plugin model base ibundlepluginmodelbase model set extensions model setextensionsmodel extensions extensions set bundle model setbundlemodel i bundle plugin model base ibundlepluginmodelbase model load model loadmodel extensions add extension change addextensionchange model i model provider event imodelproviderevent models create model createmodel file get project getproject kind i resource delta iresourcedelta changed i resource delta iresourcedelta content delta get flags getflags model i bundle plugin model base ibundlepluginmodelbase i shared extensions model isharedextensionsmodel extensions i bundle plugin model base ibundlepluginmodelbase model get extensions model getextensionsmodel reload extensions extensions extensions workspace extensions model workspaceextensionsmodel file workspace extensions model workspaceextensionsmodel extensions set editable seteditable i bundle plugin model base ibundlepluginmodelbase model set extensions model setextensionsmodel extensions workspace extensions model workspaceextensionsmodel extensions set bundle model setbundlemodel i bundle plugin model base ibundlepluginmodelbase model load model loadmodel extensions reload model load model loadmodel model add change addchange model i model provider event imodelproviderevent models changed add extension change addextensionchange model i model provider event imodelproviderevent models changed reacts manifest file file deleted style plug plugin xml file exists file create bundle model file modified reload model reset resource bundle localization changed fire notification model changed param file manifest file modified param delta resource delta handle bundle manifest delta handlebundlemanifestdelta i file ifile file i resource delta iresourcedelta delta kind delta get kind getkind i project iproject project file get project getproject object model get model getmodel project kind i resource delta iresourcedelta removed model remove model removemodel project legacy plugin structure applicable create model createmodel project kind i resource delta iresourcedelta model create model createmodel project kind i resource delta iresourcedelta changed i resource delta iresourcedelta content delta get flags getflags model i bundle plugin model base ibundlepluginmodelbase check localization changed bug string old localization oldlocalization i bundle plugin model base ibundlepluginmodelbase model get bundle localization getbundlelocalization i bundle model ibundlemodel bmodel i bundle plugin model base ibundlepluginmodelbase model get bundle model getbundlemodel was fragment wasfragment bmodel is fragment model isfragmentmodel load model loadmodel bmodel string new localization newlocalization i bundle plugin model base ibundlepluginmodelbase model get bundle localization getbundlelocalization fragment host header removed was fragment wasfragment bmodel is fragment model isfragmentmodel remove model removemodel project create model createmodel project model abstractnlmodel old localization oldlocalization new localization newlocalization old localization oldlocalization equals new localization newlocalization new localization newlocalization old localization oldlocalization new localization newlocalization equals old localization oldlocalization abstractnlmodel model resetnlresourcehelper add change addchange model i model provider event imodelproviderevent models changed removes model project table project plug project override object remove model removemodel i project iproject project object model remove model removemodel project model pde project pdeproject get options file getoptionsfile project exists pde core pdecore get default getdefault get tracing options manager gettracingoptionsmanager reset model i plugin model base ipluginmodelbase plugin model manager pluginmodelmanager remove i plugin model base ipluginmodelbase form model entry modelentry triggering i model changed event imodelchangedevent track removed model create entry extension delta event extensiondeltaevent string i plugin model base ipluginmodelbase model get plugin base getpluginbase get id getid model entry modelentry entry plugin registry pluginregistry find entry findentry entry get workspace models getworkspacemodels length entry get external models getexternalmodels length add extension change addextensionchange i plugin model base ipluginmodelbase model i model provider event imodelproviderevent models removed model returns plug model project code code project plug project manifest file missing vital data symbolic version param project project plug model project code code valid model exists i plugin model base ipluginmodelbase get plugin model getpluginmodel i project iproject project i plugin model base ipluginmodelbase get model getmodel project returns list workspace plug models array workspace plug models i plugin model base ipluginmodelbase get plugin models getpluginmodels initialize f models fmodels values to array toarray i plugin model base ipluginmodelbase f models fmodels size adds listeners workspace java model not ified notified pre close events post change events override add listeners addlisteners i workspace iworkspace workspace pde core pdecore get workspace getworkspace workspace add resource change listener addresourcechangelistener i resource change event iresourcechangeevent pre close pde process post change events java model pde container classpath update proceed smoothly java core javacore add pre processing resource changed listener addpreprocessingresourcechangedlistener i resource change event iresourcechangeevent post change removes listeners model manager attached listeners attached model manager override remove listeners removelisteners pde core pdecore get workspace getworkspace remove resource change listener removeresourcechangelistener java core javacore remove pre processing resource changed listener removepreprocessingresourcechangedlistener f extension listeners fextensionlisteners size f extension listeners fextensionlisteners clear remove listeners removelisteners returns folder visited int erest interest pde pde int erested interested meta inf folders root plug project int erested interested schema folders code code folder children int erest interest pde code code override is int eresting folder isinterestingfolder i folder ifolder folder i container icontainer root pde project pdeproject get bundle root getbundleroot folder get project getproject folder get project relative path getprojectrelativepath is prefix of isprefixof root get project relative path getprojectrelativepath string folder name foldername folder get name getname nls nls nls meta inf equals folder name foldername osgi inf equals folder name foldername schema equals folder name foldername folder get parent getparent equals root nls osgi inf equals folder get project relative path getprojectrelativepath to string tostring method called workspace models read initialized cache read workspace plug ins scr atch scratch param models workspace plug models set models setmodels i plugin model base ipluginmodelbase models f models fmodels collections synchronized map synchronizedmap hash map hashmap i project iproject i model imodel models length i project iproject project models get underlying resource getunderlyingresource get project getproject f models fmodels project models i project iproject projects pde core pdecore get workspace getworkspace get root getroot get projects getprojects projects length create models f models fmodels contains key containskey projects is int eresting project isinterestingproject projects create model createmodel projects add listeners addlisteners url s urls projects workspace manifest file manifest plugin xml array url s urls workspace plug ins url get plugin paths getpluginpaths array list arraylist url list array list arraylist url i project iproject projects pde core pdecore get workspace getworkspace get root getroot get projects getprojects projects length is plugin project ispluginproject projects i path ipath path projects get location getlocation path list add path to file tofile tourl malformedurlexception list to array toarray url list size add extension delta listener addextensiondeltalistener i extension delta listener iextensiondeltalistener listener f extension listeners fextensionlisteners listener f extension listeners fextensionlisteners add listener remove extension delta listener removeextensiondeltalistener i extension delta listener iextensiondeltalistener listener f extension listeners fextensionlisteners remove listener fire extension delta event fireextensiondeltaevent i extension delta event iextensiondeltaevent event list iterator listiterator i extension delta listener iextensiondeltalistener f extension listeners fextensionlisteners list iterator listiterator has next hasnext extensions changed extensionschanged event override process model changes processmodelchanges process model model manager accurate process extension events bug process model changes processmodelchanges nls process model changes processmodelchanges org eclipse pde internal core i extension delta event iextensiondeltaevent f changed extensions fchangedextensions f changed extensions fchangedextensions override create and fire event createandfireevent string event id eventid type collection i model imodel collection i model imodel removed collection i model imodel changed nls event id eventid equals org eclipse pde internal core i extension delta event iextensiondeltaevent i extension delta event iextensiondeltaevent event extension delta event extensiondeltaevent type to array toarray i plugin model base ipluginmodelbase size removed to array toarray i plugin model base ipluginmodelbase removed size changed to array toarray i plugin model base ipluginmodelbase changed size fire extension delta event fireextensiondeltaevent event create and fire event createandfireevent event id eventid type removed changed add extension change addextensionchange i plugin model base ipluginmodelbase plugin type f changed extensions fchangedextensions f changed extensions fchangedextensions array list arraylist model change modelchange model change modelchange change model change modelchange plugin type f changed extensions fchangedextensions add change