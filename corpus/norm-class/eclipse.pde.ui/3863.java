copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde internal core java java net url java util java util map entry org eclipse core resources org eclipse core runtime org eclipse core runtime preferences i eclipse preferences ieclipsepreferences org eclipse jdt core org eclipse osgi util nls org eclipse pde core i bundle classpath resolver ibundleclasspathresolver org eclipse pde core build i build ibuild org eclipse pde core build i build entry ibuildentry org eclipse pde core plugin org eclipse pde internal core build workspace build model workspacebuildmodel org eclipse pde internal core project pde project pdeproject classpath helper classpathhelper nls string dot nls string fragment annotation fragment string get dev entries properties getdeventriesproperties string file name filename check excluded checkexcluded file file file file name filename file exists file directory file get parent file getparentfile directory directory exists directory is file isfile directory mkdirs properties properties properties account cascading works paces workspaces target weaver targetweaver weave dev properties weavedevproperties properties i plugin model base ipluginmodelbase models plugin registry pluginregistry get workspace models getworkspacemodels models length string models get plugin base getpluginbase get id getid string entry write entry writeentry get dev paths getdevpaths models check excluded checkexcluded entry length string current value currentvalue string properties entry equals current value currentvalue current value currentvalue entry nls current value currentvalue concat concat nls entry properties entry nls nls properties ignored ot ignoredot file output stream fileoutputstream stream stream file output stream fileoutputstream file name filename nls properties store stream stream flush nls url file file name filename to string tostring io exception ioexception pde core pdecore log exception logexception stream stream close io exception ioexception get dev entries getdeventries check excluded checkexcluded string get dev entries properties getdeventriesproperties string file name filename map map file file file file name filename file exists file directory file get parent file getparentfile directory directory exists directory is file isfile directory mkdirs properties properties properties account cascading works paces workspaces target weaver targetweaver weave dev properties weavedevproperties properties iterator iter map values iterator iter has next hasnext i plugin model base ipluginmodelbase model i plugin model base ipluginmodelbase iter model get underlying resource getunderlyingresource string entry write entry writeentry get dev paths getdevpaths model map entry length string model get plugin base getpluginbase get id getid string current value currentvalue string properties entry equals current value currentvalue current value currentvalue entry nls current value currentvalue concat concat nls entry properties entry nls nls properties ignored ot ignoredot file output stream fileoutputstream stream stream file output stream fileoutputstream file name filename nls properties store stream stream flush nls url file file name filename to string tostring io exception ioexception pde core pdecore log exception logexception stream stream close io exception ioexception get dev entries getdeventries string get dev entries getdeventries check excluded checkexcluded i plugin model base ipluginmodelbase models plugin registry pluginregistry get workspace models getworkspacemodels array list arraylist i path ipath list array list arraylist i path ipath models length string models get plugin base getpluginbase get id getid trim length i path ipath paths get dev paths getdevpaths models check excluded checkexcluded paths length list add paths string entry write entry writeentry list to array toarray i path ipath list size nls entry length entry bin string write entry writeentry i path ipath paths string buffer stringbuffer buffer string buffer stringbuffer paths length buffer append paths to string tostring paths length nls buffer append nls buffer to string tostring todo remove longer bug dictionary string string get dev dictionary getdevdictionary i plugin model base ipluginmodelbase model model get underlying resource getunderlyingresource string model get plugin base getpluginbase get id getid trim length i path ipath paths get dev paths getdevpaths model string entry write entry writeentry paths hashtable string string map hashtable string string nls nls map ignored ot ignoredot nls map entry length entry bin map creates map key path source directory jar path output directory jar map i path ipath array list arraylist i path ipath get classpath map getclasspathmap i project iproject project check excluded checkexcluded absolute paths absolutepaths java model exception javamodelexception list path excluded get folders to exclude getfolderstoexclude project check excluded checkexcluded i java project ijavaproject j project jproject java core javacore create project hash map hashmap i path ipath array list arraylist i path ipath map hash map hashmap i path ipath array list arraylist i path ipath i classpath entry iclasspathentry entries j project jproject get raw classpath getrawclasspath entries length paths project relative paths relative problems adding absolute path workspace relative i path ipath output source entries get entry kind getentrykind i classpath entry iclasspathentry cpe source source entries get path getpath output entries get output location getoutputlocation output output j project jproject get output location getoutputlocation entries get entry kind getentrykind i classpath entry iclasspathentry cpe library source entries get path getpath output entries get path getpath source segment count segmentcount source path dot output excluded output i resource iresource file project find member findmember output remove first segments removefirstsegments path relative absolute file is linked islinked file is linked islinked i resource iresource check ancestors is linked islinked absolute paths absolutepaths i path ipath location file get location getlocation location output location make absolute makeabsolute pde core pdecore log status i status istatus error pde core pdecore plugin nls bind pde core messages pdecoremessages classpath helper classpathhelper bad file location badfilelocation file get full path getfullpath output output make relative makerelative array list arraylist i path ipath list map source list list array list arraylist i path ipath list add output map source list add additional entries contributed bundle classpath resolve rs resolvers i bundle classpath resolver ibundleclasspathresolver resolve rs resolvers pde core pdecore get default getdefault get classpath container resolver manager getclasspathcontainerresolvermanager get bundle classpath resolve rs getbundleclasspathresolvers project resolve rs resolvers length map i path ipath collection i path ipath resolved resolve rs resolvers get additional classpath entries getadditionalclasspathentries j project jproject iterator entry i path ipath collection i path ipath resolved iter resolvediter resolved entry set entryset iterator resolved iter resolvediter has next hasnext map entry i path ipath collection i path ipath resolved entry resolvedentry resolved iter resolvediter i path ipath ce source cesource resolved entry resolvedentry get key getkey array list arraylist i path ipath list map ce source cesource list list array list arraylist i path ipath map ce source cesource list list add all addall resolved entry resolvedentry get value getvalue map find paths library searches source folders includes libraries build path buildpath i path ipath find library findlibrary string lib name libname i project iproject project map i path ipath array list arraylist i path ipath classpath map classpathmap i build ibuild build array list arraylist i path ipath paths array list arraylist i path ipath i build entry ibuildentry entry build build get entry getentry i build entry ibuildentry jar prefix lib name libname entry string resources entry get tokens gettokens resources length i resource iresource res project find member findmember resources res array list arraylist i path ipath list classpath map classpathmap res get full path getfullpath list iterator i path ipath list iterator has next hasnext paths add search library exists jar form build path buildpath i path ipath path lib name libname equals dot path path dot i resource iresource res project find member findmember lib name libname res path res get full path getfullpath path path lib name libname list i path ipath list classpath map classpathmap path list iterator i path ipath list iterator has next hasnext paths add paths to array toarray i path ipath paths size i path ipath get dev paths getdevpaths i plugin model base ipluginmodelbase model check excluded checkexcluded map plugins map pluginsmap array list arraylist i path ipath result array list arraylist i path ipath i project iproject project model get underlying resource getunderlyingresource get project getproject i plugin base ipluginbase base model get plugin base getpluginbase i plugin library ipluginlibrary libraries base get libraries getlibraries project has nature hasnature java core javacore nature map i path ipath array list arraylist i path ipath classpath map classpathmap get classpath map getclasspathmap project check excluded checkexcluded i file ifile file pde project pdeproject get build properties getbuildproperties project i path ipath file path filepath file get location getlocation search build searchbuild file path filepath file path filepath to file tofile exists search build searchbuild workspace build model workspacebuildmodel b model bmodel workspace build model workspacebuildmodel file i build ibuild build b model bmodel get build getbuild custom build build properties add i build entry ibuildentry entry nls build get entry getentry nls custom entry search build searchbuild libraries length i path ipath paths find library findlibrary dot project classpath map classpathmap build paths length works bug classpath map classpathmap is empty isempty iterator array list arraylist i path ipath iterator classpath map classpathmap values iterator list i path ipath collect array list arraylist i path ipath iterator has next hasnext collect add all addall iterator paths collect to array toarray i path ipath collect size paths length add path addpath result project paths libraries length i path ipath paths find library findlibrary libraries get name getname project classpath map classpathmap build paths length libraries get name getname equals dot paths find library from fragments findlibraryfromfragments libraries get name getname model check excluded checkexcluded plugins map pluginsmap paths length add path addpath result project paths search build searchbuild build properties add output folders iterator entry i path ipath array list arraylist i path ipath classpath map classpathmap entry set entryset iterator has next hasnext map entry i path ipath array list arraylist i path ipath entry array list arraylist i path ipath list entry get value getvalue list iterator listiterator i path ipath list list iterator listiterator has next hasnext add path addpath result project java model exception javamodelexception core exception coreexception result to array toarray i path ipath result size fragments plug searches fragments specific library paths absolute required runtime i path ipath find library from fragments findlibraryfromfragments string lib name libname i plugin model base ipluginmodelbase model check excluded checkexcluded map plugins i fragment model ifragmentmodel frags pde manager pdemanager find fragments for findfragmentsfor model frags length plugins plugins contains key containskey frags get bundle description getbundledescription get symbolic name getsymbolicname project frags get underlying resource getunderlyingresource i project iproject project frags get underlying resource getunderlyingresource get project getproject map i path ipath array list arraylist i path ipath classpath map classpathmap get classpath map getclasspathmap project check excluded checkexcluded i file ifile file pde project pdeproject get build properties getbuildproperties project i build ibuild build file exists workspace build model workspacebuildmodel b model bmodel workspace build model workspacebuildmodel file build b model bmodel get build getbuild i path ipath paths find library findlibrary lib name libname project classpath map classpathmap build paths length postfix fragment annotation postfixfragmentannotation paths java model exception javamodelexception external plugin child directories library file file file frags get install location getinstalllocation file is directory isdirectory file file file lib name libname file exists postfix fragment annotation fragment path bug i path ipath path file get path getpath fragment annotation i path ipath post fixes postfixes fragment annotation paths fragments needed bug i path ipath postfix fragment annotation postfixfragmentannotation i path ipath paths paths length paths path paths to string tostring fragment annotation paths add path addpath array list arraylist i path ipath result i project iproject project i path ipath path i path ipath result path resultpath path is absolute isabsolute result path resultpath path path segment count segmentcount path segment equals project get name getname i container icontainer bundle root bundleroot pde project pdeproject get bundle root getbundleroot project i path ipath root path rootpath bundle root bundleroot get full path getfullpath path relative bundle root path path make relative to makerelativeto root path rootpath path segment count segmentcount result path resultpath path dot i resource iresource resource bundle root bundleroot find member findmember path resource result path resultpath path result path resultpath result result path resultpath result add result path resultpath list path get folders to exclude getfolderstoexclude i project iproject project check excluded checkexcluded array list arraylist path list array list arraylist path check excluded checkexcluded i eclipse preferences ieclipsepreferences pref project scope projectscope project get node getnode pde core pdecore plugin pref string bin excludes binexcludes nls pref nls i core constants icoreconstants selfhosting bin excludes nls string tokenizer stringtokenizer tokenizer nls string tokenizer stringtokenizer nls bin excludes binexcludes nls tokenizer has more tokens hasmoretokens list add path tokenizer next token nexttoken trim list