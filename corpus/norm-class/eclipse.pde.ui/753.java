copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse pde tests target java file java file writer filewriter junit framework test junit framework test suite testsuite org eclipse core runtime org eclipse equinox framework admin frameworkadmin bundle info bundleinfo org eclipse equinox metadata i installable unit iinstallableunit org eclipse jdt launching java runtime javaruntime org eclipse pde core plugin target platform targetplatform org eclipse pde core target org eclipse pde internal core org eclipse pde internal core target iu bundle container iubundlecontainer org eclipse pde internal core target target platform service targetplatformservice target definition resolution tests targetdefinitionresolutiontests abstract target test abstracttargettest test suite test suite testsuite target definition resolution tests targetdefinitionresolutiontests test missing bundles testmissingbundles exception i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation directory container directorycontainer get target service gettargetservice new directory location newdirectorylocation target platform targetplatform get default location getdefaultlocation plugins i target location itargetlocation profile container profilecontainer get target service gettargetservice new profile location newprofilelocation target platform targetplatform get default location getdefaultlocation definition set target locations settargetlocations i target location itargetlocation directory container directorycontainer profile container profilecontainer definition set included setincluded name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor bogus name version descriptor nameversiondescriptor org eclipse platform definition resolve assert not null assertnotnull target didn resolve definition get bundles getbundles assert equals assertequals wrong number included bundles definition get bundles getbundles length i status istatus definition status definitionstatus definition get status getstatus assert equals assertequals wrong severity i status istatus error definition status definitionstatus get severity getseverity i status istatus children definition status definitionstatus get children getchildren assert equals assertequals wrong number stat uses statuses children length assert equals assertequals wrong severity i status istatus error children get severity getseverity assert equals assertequals target bundle targetbundle status plugin exist children get code getcode assert equals assertequals wrong severity i status istatus error children get severity getseverity assert equals assertequals target bundle targetbundle status version exist children get code getcode check removing included bundles resolving removes errors definition set included setincluded assert true asserttrue definition is resolved isresolved assert true asserttrue definition get status getstatus isok assert true asserttrue definition get bundles getbundles length test invalid bundle containers testinvalidbundlecontainers exception i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation directory container directorycontainer get target service gettargetservice new directory location newdirectorylocation exist i status istatus status directory container directorycontainer resolve definition assert equals assertequals incorrect severity i status istatus error status get severity getseverity i target location itargetlocation profile container profilecontainer get target service gettargetservice new profile location newprofilelocation exist status directory container directorycontainer resolve definition assert equals assertequals incorrect severity i status istatus error status get severity getseverity i target location itargetlocation feature container featurecontainer get target service gettargetservice new feature location newfeaturelocation exist org eclipse jdt status directory container directorycontainer resolve definition assert equals assertequals incorrect severity i status istatus error status get severity getseverity definition set target locations settargetlocations i target location itargetlocation directory container directorycontainer profile container profilecontainer feature container featurecontainer status definition resolve i status istatus children status get children getchildren assert equals assertequals wrong number children children length i status istatus element children assert equals assertequals incorrect severity i status istatus error element get severity getseverity assert false assertfalse failed resolution single status element is multi status ismultistatus tests find bundle bad missing manifest resolving create correct status target bundle targetbundle status invalid manifest exception test invalid manifest testinvalidmanifest exception todo tests test resolution caching testresolutioncaching exception i target definition itargetdefinition definition get new target getnewtarget assert true asserttrue definition is resolved isresolved assert not null assertnotnull bundles resolved definition get bundles getbundles assert equals assertequals wrong number bundles definition get bundles getbundles length res olving resolving errors stay resolved solving definition resolve targets i target location itargetlocation broken container brokencontainer get target service gettargetservice new directory location newdirectorylocation exist assert false assertfalse broken container brokencontainer is resolved isresolved assert null assertnull bundles unresolved broken container brokencontainer get bundles getbundles definition set target locations settargetlocations i target location itargetlocation broken container brokencontainer assert false assertfalse definition is resolved isresolved assert null assertnull bundles unresolved definition get bundles getbundles i status istatus status definition resolve assert equals assertequals incorrect severity i status istatus error status get severity getseverity assert true asserttrue broken container brokencontainer is resolved isresolved assert not null assertnotnull bundles resolved broken container brokencontainer get bundles getbundles assert true asserttrue definition is resolved isresolved assert not null assertnotnull bundles resolved definition get bundles getbundles adding unresolved container target unresolved resolving container resolve target i target location itargetlocation profile container profilecontainer get target service gettargetservice new profile location newprofilelocation target platform targetplatform get default location getdefaultlocation assert false assertfalse profile container profilecontainer is resolved isresolved assert null assertnull bundles unresolved profile container profilecontainer get bundles getbundles definition set target locations settargetlocations i target location itargetlocation broken container brokencontainer profile container profilecontainer assert false assertfalse definition is resolved isresolved assert null assertnull bundles unresolved definition get bundles getbundles status profile container profilecontainer resolve definition assert equals assertequals incorrect severity i status istatus status get severity getseverity assert equals assertequals incorrect severity i status istatus error definition get status getstatus get severity getseverity assert true asserttrue profile container profilecontainer is resolved isresolved assert not null assertnotnull bundles resolved profile container profilecontainer get bundles getbundles assert true asserttrue definition is resolved isresolved assert not null assertnotnull bundles resolved definition get bundles getbundles bundle status prevent resolution adding resolved container leave target resolved i target location itargetlocation includes container includescontainer get target service gettargetservice new profile location newprofilelocation target platform targetplatform get default location getdefaultlocation assert false assertfalse includes container includescontainer is resolved isresolved assert null assertnull bundles unresolved includes container includescontainer get bundles getbundles status includes container includescontainer resolve definition assert true asserttrue includes container includescontainer is resolved isresolved assert not null assertnotnull bundles resolved includes container includescontainer get bundles getbundles assert equals assertequals incorrect severity i status istatus status get severity getseverity assert equals assertequals incorrect severity i status istatus includes container includescontainer get status getstatus get severity getseverity definition set target locations settargetlocations i target location itargetlocation broken container brokencontainer profile container profilecontainer definition set included setincluded name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor bogus name version descriptor nameversiondescriptor org eclipse platform assert true asserttrue definition is resolved isresolved assert equals assertequals incorrect severity i status istatus error definition get status getstatus get severity getseverity assert not null assertnotnull bundles resolved definition get bundles getbundles setting includes unresolve target definition set included setincluded assert true asserttrue definition is resolved isresolved definition set included setincluded name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor bogus name version descriptor nameversiondescriptor org eclipse platform assert true asserttrue definition is resolved isresolved definition set name setname definition setos definition setws definition set arch setarch arch definition setnl definition set program arguments setprogramarguments program nargs definition setvmarguments nargs definition setjrecontainer java runtime javaruntime newdefaultjrecontainerpath name version descriptor nameversiondescriptor implicit name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor org eclipse jdt launching name version descriptor nameversiondescriptor org eclipse jdt debug definition set implicit dependencies setimplicitdependencies implicit assert true asserttrue definition is resolved isresolved definition set name setname definition setos definition setws definition set arch setarch definition setnl definition set program arguments setprogramarguments definition setvmarguments definition setjrecontainer definition set implicit dependencies setimplicitdependencies assert true asserttrue definition is resolved isresolved definition set target locations settargetlocations assert true asserttrue definition is resolved isresolved assert not null assertnotnull bundles resolved definition get bundles getbundles tests users preference append ini arguments target definitions migrated properly arguments appended suppress warnings suppresswarnings deprecation test arguments migration append testvmargumentsmigrationappend exception preferences store pde core pdecore get default getdefault get plugin preferences getpluginpreferences original store get boolean getboolean i core constants icoreconstants launcher ini store set value setvalue i core constants icoreconstants launcher ini string original target originaltarget store get string getstring i core constants icoreconstants target mode store set value setvalue i core constants icoreconstants target mode i core constants icoreconstants i target definition itargetdefinition target target platform service targetplatformservice get target service gettargetservice new target from preferences newtargetfrompreferences assert not null assertnotnull target created preferences target string vm arguments vmarguments target getvmarguments string ini vm args inivmargs target platform helper targetplatformhelper getinivmargs assert equals assertequals vm arguments vmarguments ini vm args inivmargs store set value setvalue i core constants icoreconstants launcher ini original store set value setvalue i core constants icoreconstants target mode original target originaltarget tests users don preference append ini arguments target definitions migrated properly arguments appended suppress warnings suppresswarnings deprecation test arguments migration no append testvmargumentsmigrationnoappend exception preferences store pde core pdecore get default getdefault get plugin preferences getpluginpreferences original store get boolean getboolean i core constants icoreconstants launcher ini store set value setvalue i core constants icoreconstants launcher ini string original target originaltarget store get string getstring i core constants icoreconstants target mode store set value setvalue i core constants icoreconstants target mode i core constants icoreconstants i target definition itargetdefinition target target platform service targetplatformservice get target service gettargetservice new target from preferences newtargetfrompreferences assert not null assertnotnull target created preferences target string vm arguments vmarguments target getvmarguments assert null assertnull arguments empty vm arguments vmarguments store set value setvalue i core constants icoreconstants launcher ini original store set value setvalue i core constants icoreconstants target mode original target originaltarget tests target definition synch target platform exception test target in synch testtargetinsynch exception i path ipath location extract abcde plugins extractabcdeplugins i path ipath dir path dirpath location append plugins i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation dir path dirpath toosstring definition set target locations settargetlocations i target location itargetlocation container definition resolve target bundle targetbundle all bundles allbundles definition get all bundles getallbundles assert equals assertequals all bundles allbundles length set target platform settargetplatform definition i status istatus status get target service gettargetservice compare with target platform comparewithtargetplatform definition assert true asserttrue status isok reset target platform resettargetplatform tests target definition synch target platform duplicates target definition duplicates exception test target in synch with duplicates testtargetinsynchwithduplicates exception i path ipath location extract abcde plugins extractabcdeplugins i path ipath dir path dirpath location append plugins i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation dir path dirpath toosstring i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation dir path dirpath toosstring definition set target locations settargetlocations i target location itargetlocation container container definition resolve target bundle targetbundle all bundles allbundles definition get all bundles getallbundles assert equals assertequals all bundles allbundles length set target platform settargetplatform definition i status istatus status get target service gettargetservice compare with target platform comparewithtargetplatform definition assert true asserttrue status isok reset target platform resettargetplatform tests target definition synch target platform bundle deleted underlying files system target platform exception test target missing bundle testtargetmissingbundle exception i path ipath location extract abcde plugins extractabcdeplugins i path ipath dir path dirpath location append plugins i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation dir path dirpath toosstring definition set target locations settargetlocations i target location itargetlocation container set target platform settargetplatform definition delete bundle i path ipath bundle dir path dirpath append bundle jar assert true asserttrue bundle to file tofile exists bundle to file tofile delete force definition resolve i target definition itargetdefinition copy get target service gettargetservice new target newtarget get target service gettargetservice copy target definition copytargetdefinition definition copy copy resolve i status istatus status get target service gettargetservice compare with target platform comparewithtargetplatform copy assert not null assertnotnull status assert false assertfalse status isok i status istatus children status get children getchildren assert equals assertequals children length assert equals assertequals i target platform service itargetplatformservice status missing target definition children get code getcode assert equals assertequals bundle children get message getmessage reset target platform resettargetplatform tests target definition warn expected bundle exist file system exception test target platform missing bundle testtargetplatformmissingbundle exception i path ipath location extract abcde plugins extractabcdeplugins i path ipath dir path dirpath location append plugins delete bundle i path ipath bundle dir path dirpath append bundle jar file jar bundle to file tofile assert true asserttrue jar exists jar delete i target definition itargetdefinition definition get target service gettargetservice new target newtarget i target location itargetlocation container get target service gettargetservice new directory location newdirectorylocation dir path dirpath toosstring definition set target locations settargetlocations i target location itargetlocation container definition resolve target bundle targetbundle all bundles allbundles definition get all bundles getallbundles assert equals assertequals all bundles allbundles length set target platform settargetplatform definition force definition resolve i target definition itargetdefinition copy get target service gettargetservice new target newtarget get target service gettargetservice copy target definition copytargetdefinition definition copy add bundle file system extract abcde plugins extractabcdeplugins copy resolve i status istatus status get target service gettargetservice compare with target platform comparewithtargetplatform copy assert not null assertnotnull status assert false assertfalse status isok i status istatus children status get children getchildren assert equals assertequals children length assert equals assertequals i target platform service itargetplatformservice status missing target platform children get code getcode assert equals assertequals bundle children get message getmessage reset target platform resettargetplatform tests pre installation read parsed properly exception test classic install resolution testclassicinstallresolution exception extract skeleton i path ipath location extract classic plugins extractclassicplugins i target definition itargetdefinition definition get new target getnewtarget string location remove last segments removelastsegments toosstring i target location itargetlocation container get target service gettargetservice new profile location newprofilelocation definition set target locations settargetlocations i target location itargetlocation container definition resolve target bundle targetbundle bundles definition get all bundles getallbundles source frag bin target bundle targetbundle bundle bundles bundle is fragment isfragment frag bundle is source bundle issourcebundle fragment source source bundle is source bundle issourcebundle source bin plug ins source plug ins win assert equals assertequals wrong number bundles bundles length assert equals assertequals wrong number binary bundles bin assert equals assertequals wrong number source bundles source assert equals assertequals wrong number fragments frag tests installation container recognize linked plug ins directory container exception test linked install resolution testlinkedinstallresolution exception extract skeleton extra plugins link i path ipath location extract classic plugins extractclassicplugins i path ipath extra plugins extraplugins extract linked plugins extractlinkedplugins create link file file link location linklocation file location to file tofile get parent file getparentfile links file link file linkfile file link location linklocation test link link location linklocation mkdirs link file linkfile create new file createnewfile file writer filewriter writer file writer filewriter link file linkfile writer write path extra plugins extraplugins remove last segments removelastsegments to portable string toportablestring writer flush writer close i target definition itargetdefinition definition get new target getnewtarget string location remove last segments removelastsegments toosstring i target location itargetlocation container get target service gettargetservice new profile location newprofilelocation i target location itargetlocation container get target service gettargetservice new profile location newprofilelocation link location linklocation get absolute path getabsolutepath definition set target locations settargetlocations i target location itargetlocation container container definition resolve target bundle targetbundle bundles definition get all bundles getallbundles source frag bin target bundle targetbundle bundle bundles bundle is fragment isfragment frag bundle is source bundle issourcebundle fragment source source bundle is source bundle issourcebundle source bin plug ins source plug ins win extra links plug ins source assert equals assertequals wrong number bundles bundles length assert equals assertequals wrong number binary bundles bin assert equals assertequals wrong number source bundles source assert equals assertequals wrong number fragments frag check directory container doesn find linked plugins definition get new target getnewtarget container get target service gettargetservice new directory location newdirectorylocation definition set target locations settargetlocations i target location itargetlocation container definition resolve bundles definition get all bundles getallbundles source frag bin target bundle targetbundle bundle bundles bundle is fragment isfragment frag bundle is source bundle issourcebundle fragment source source bundle is source bundle issourcebundle source bin plug ins source plug ins win assert equals assertequals wrong number bundles bundles length assert equals assertequals wrong number source bundles source assert equals assertequals wrong number fragments frag delete link files affect tests bug link file linkfile delete link location linklocation delete tests resolving bundles include source bundles source bundles determine bundle source exception test source bundle recognition testsourcebundlerecognition exception i target definition itargetdefinition definition get new target getnewtarget i target location itargetlocation directory container directorycontainer get target service gettargetservice new directory location newdirectorylocation target platform targetplatform get default location getdefaultlocation plugins i target location itargetlocation profile container profilecontainer get target service gettargetservice new profile location newprofilelocation target platform targetplatform get default location getdefaultlocation i target location itargetlocation feature container featurecontainer get target service gettargetservice new feature location newfeaturelocation target platform targetplatform get default location getdefaultlocation org eclipse jdt i target location itargetlocation feature container featurecontainer get target service gettargetservice new feature location newfeaturelocation target platform targetplatform get default location getdefaultlocation org eclipse jdt source definition set target locations settargetlocations i target location itargetlocation directory container directorycontainer profile container profilecontainer feature container featurecontainer feature container featurecontainer definition resolve target bundle targetbundle bundles definition get bundles getbundles assert not null assertnotnull target didn resolve bundles i status istatus definition status definitionstatus definition get status getstatus assert equals assertequals wrong severity i status istatus definition status definitionstatus get severity getseverity ensure source bundles provide source target bundle targetbundle bundle bundles bundle is source bundle issourcebundle bundle info bundleinfo info bundle get source target getsourcetarget assert not null assertnotnull missing source target bundle info assert null assertnull bundle get source target getsourcetarget jdt feature equivalent named source bundle bundles feature container featurecontainer get bundles getbundles target bundle targetbundle bundle bundles bundle get bundle info getbundleinfo get symbolic name getsymbolicname index of indexof doc assert true asserttrue source bundle source feature bundle is source bundle issourcebundle assert equals assertequals incorrect source target bundle get bundle info getbundleinfo get symbolic name getsymbolicname bundle get source target getsourcetarget get symbolic name getsymbolicname source tests options bundle containers controlling site resolved exception test site container include settings testsitecontainerincludesettings exception i target definition itargetdefinition target get new target getnewtarget iu bundle container iubundlecontainer container a containera iu bundle container iubundlecontainer get target service gettargetservice newiulocation i installable unit iinstallableunit iu bundle container iubundlecontainer include required iu bundle container iubundlecontainer container b containerb iu bundle container iubundlecontainer get target service gettargetservice newiulocation string unit unit string iu bundle container iubundlecontainer include required target set target locations settargetlocations i target location itargetlocation container a containera container b containerb check settings assert true asserttrue container a containera get include all required getincludeallrequired assert false assertfalse container a containera get include all environments getincludeallenvironments assert false assertfalse container a containera get include source getincludesource assert true asserttrue container b containerb get include all required getincludeallrequired assert false assertfalse container b containerb get include all environments getincludeallenvironments assert false assertfalse container b containerb get include source getincludesource check basic flags iu bundle container iubundlecontainer include environments iu bundle container iubundlecontainer include source container a containera iu bundle container iubundlecontainer get target service gettargetservice newiulocation i installable unit iinstallableunit flags container b containerb iu bundle container iubundlecontainer get target service gettargetservice newiulocation string unit unit string flags target set target locations settargetlocations i target location itargetlocation container a containera container b containerb assert false assertfalse container a containera get include all required getincludeallrequired assert true asserttrue container a containera get include all environments getincludeallenvironments assert true asserttrue container a containera get include source getincludesource check containers updated target target passed argument flags iu bundle container iubundlecontainer include environments iu bundle container iubundlecontainer include source container a containera iu bundle container iubundlecontainer get target service gettargetservice newiulocation i installable unit iinstallableunit flags flags iu bundle container iubundlecontainer include required container b containerb iu bundle container iubundlecontainer get target service gettargetservice newiulocation string unit unit string flags target set target locations settargetlocations i target location itargetlocation container a containera container b containerb assert true asserttrue container a containera get include all required getincludeallrequired assert false assertfalse container a containera get include all environments getincludeallenvironments assert false assertfalse container a containera get include source getincludesource assert true asserttrue container b containerb get include all required getincludeallrequired assert false assertfalse container b containerb get include all environments getincludeallenvironments assert false assertfalse container b containerb get include source getincludesource order target set target locations settargetlocations i target location itargetlocation container b containerb container a containera assert false assertfalse container a containera get include all required getincludeallrequired assert true asserttrue container a containera get include all environments getincludeallenvironments assert true asserttrue container a containera get include source getincludesource assert false assertfalse container b containerb get include all required getincludeallrequired assert true asserttrue container b containerb get include all environments getincludeallenvironments assert true asserttrue container b containerb get include source getincludesource test name version descriptor testnameversiondescriptor name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor assert equals assertequals name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor assert false assertfalse equals name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor assert false assertfalse equals name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor assert equals assertequals name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor assert false assertfalse equals name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor assert false assertfalse equals name version descriptor nameversiondescriptor name version descriptor nameversiondescriptor assert false assertfalse equals